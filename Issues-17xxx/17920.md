# Issue 17920: Reimplement IntegerLists using Polyhedron.integral_points()

archive/issues_017683.json:
```json
{
    "assignees": [],
    "body": "This fixes #17548.\n\nIt also adds new features to `IntegerLists`:\n\n1. Negative integers are allowed (but the default still is `min_part=0`).\n\n2. There does not need to be a fixed sum, one can do for example `IntegerLists(max_part=2)` for all lists of integers <= 2. One can also give a lower/upper bound for the sum.\n\nNote that the current implementation requires, for a given length, that there are only finitely many lists of that length. This limitation could be lifted in the future.\n\nDepends on #17937\nDepends on #18087\n\nCC:  @nathanncohen @anneschilling @tscrim @nthiery\n\nBranch/Commit: **[u/jdemeyer/ticket/17920](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17920) @ [`621d467`](https://github.com/sagemath/sagetrac-mirror/commit/621d467827d8d0c6a0cb1113cb4b861cca936f41)**\n\nAuthor: **Jeroen Demeyer**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17920_\n\n",
    "closed_at": "2015-03-09T20:56:34Z",
    "created_at": "2015-03-09T17:52:44Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Reimplement IntegerLists using Polyhedron.integral_points()",
    "type": "issue",
    "updated_at": "2022-12-29T01:31:15Z",
    "url": "https://github.com/sagemath/sage/issues/17920",
    "user": "https://github.com/jdemeyer"
}
```
This fixes #17548.

It also adds new features to `IntegerLists`:

1. Negative integers are allowed (but the default still is `min_part=0`).

2. There does not need to be a fixed sum, one can do for example `IntegerLists(max_part=2)` for all lists of integers <= 2. One can also give a lower/upper bound for the sum.

Note that the current implementation requires, for a given length, that there are only finitely many lists of that length. This limitation could be lifted in the future.

Depends on #17937
Depends on #18087

CC:  @nathanncohen @anneschilling @tscrim @nthiery

Branch/Commit: **[u/jdemeyer/ticket/17920](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17920) @ [`621d467`](https://github.com/sagemath/sagetrac-mirror/commit/621d467827d8d0c6a0cb1113cb4b861cca936f41)**

Author: **Jeroen Demeyer**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/17920_





---

archive/issue_events_255004.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T17:52:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255004"
}
```



---

archive/issue_events_255005.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T17:52:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255005"
}
```



---

archive/issue_events_255006.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T17:52:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255006"
}
```



---

archive/issue_events_255007.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T17:52:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255007"
}
```



---

archive/issue_events_255008.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T20:56:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255008"
}
```



---

archive/issue_events_255009.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T20:56:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255009"
}
```



---

archive/issue_events_255010.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T20:56:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255010"
}
```



---

archive/issue_events_255011.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-09T20:56:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255011"
}
```



---

archive/issue_comments_242763.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe Sage MILP solvers cannot enumerate all solutions => closing as invalid.",
    "created_at": "2015-03-09T20:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242763",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

The Sage MILP solvers cannot enumerate all solutions => closing as invalid.



---

archive/issue_events_255012.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-10T15:41:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "title_is": "Reimplement IntegerLists using Polyhedron.integral_points()",
    "title_was": "Reimplement IntegerLists using MILP",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255012"
}
```



---

archive/issue_events_255013.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-10T15:41:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255013"
}
```



---

archive/issue_events_255014.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-10T15:41:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255014"
}
```



---

archive/issue_comments_242764.json:
```json
{
    "body": "Branch: **[u/jdemeyer/ticket/17920](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17920)**",
    "created_at": "2015-03-11T21:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242764",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/ticket/17920](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17920)**



---

archive/issue_comments_242765.json:
```json
{
    "body": "Commit: **[`492696f`](https://github.com/sagemath/sagetrac-mirror/commit/492696fb8bbca610dd8b5415b44910196e9d9222)**",
    "created_at": "2015-03-12T07:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242765",
    "user": "https://github.com/nathanncohen"
}
```

Commit: **[`492696f`](https://github.com/sagemath/sagetrac-mirror/commit/492696fb8bbca610dd8b5415b44910196e9d9222)**



---

archive/issue_comments_242766.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI do not understand what this is... Did you copy/paste the original file? It seems that you copy/pasted the original files and made some modifications to it `O_o`\n\nNathann\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/492696fb8bbca610dd8b5415b44910196e9d9222\"><code>492696f</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-12T07:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242766",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

I do not understand what this is... Did you copy/paste the original file? It seems that you copy/pasted the original files and made some modifications to it `O_o`

Nathann

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/492696fb8bbca610dd8b5415b44910196e9d9222"><code>492696f</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_242767.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nYes, that's what I did. Anyway, this is still very much work in progress...",
    "created_at": "2015-03-12T10:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242767",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

Yes, that's what I did. Anyway, this is still very much work in progress...



---

archive/issue_comments_242768.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n> Yes, that's what I did. Anyway, this is still very much work in progress...\n\nOh, okay!\n\nNathann",
    "created_at": "2015-03-12T10:03:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242768",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

> Yes, that's what I did. Anyway, this is still very much work in progress...

Oh, okay!

Nathann



---

archive/issue_comments_242769.json:
```json
{
    "body": "Dependencies: **#17937**",
    "created_at": "2015-03-12T15:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242769",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#17937**



---

archive/issue_comments_242770.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb6ba858894c3c3f77b2278115198bfe9076adf0\"><code>eb6ba85</code></a></td><td><code>Fix integral_points() for polyhedra in 0 dimensions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5896b1160e7dd123abfc03325583ffe805d0912b\"><code>5896b11</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-12T16:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242770",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb6ba858894c3c3f77b2278115198bfe9076adf0"><code>eb6ba85</code></a></td><td><code>Fix integral_points() for polyhedra in 0 dimensions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5896b1160e7dd123abfc03325583ffe805d0912b"><code>5896b11</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_242771.json:
```json
{
    "body": "Changed commit from **[`492696f`](https://github.com/sagemath/sagetrac-mirror/commit/492696fb8bbca610dd8b5415b44910196e9d9222)** to **[`5896b11`](https://github.com/sagemath/sagetrac-mirror/commit/5896b1160e7dd123abfc03325583ffe805d0912b)**",
    "created_at": "2015-03-12T16:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242771",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`492696f`](https://github.com/sagemath/sagetrac-mirror/commit/492696fb8bbca610dd8b5415b44910196e9d9222)** to **[`5896b11`](https://github.com/sagemath/sagetrac-mirror/commit/5896b1160e7dd123abfc03325583ffe805d0912b)**



---

archive/issue_comments_242772.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c835117a1e14e84d3f823b4111a092a80b4c3ef4\"><code>c835117</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-13T10:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242772",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c835117a1e14e84d3f823b4111a092a80b4c3ef4"><code>c835117</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_242773.json:
```json
{
    "body": "Changed commit from **[`5896b11`](https://github.com/sagemath/sagetrac-mirror/commit/5896b1160e7dd123abfc03325583ffe805d0912b)** to **[`c835117`](https://github.com/sagemath/sagetrac-mirror/commit/c835117a1e14e84d3f823b4111a092a80b4c3ef4)**",
    "created_at": "2015-03-13T10:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242773",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5896b11`](https://github.com/sagemath/sagetrac-mirror/commit/5896b1160e7dd123abfc03325583ffe805d0912b)** to **[`c835117`](https://github.com/sagemath/sagetrac-mirror/commit/c835117a1e14e84d3f823b4111a092a80b4c3ef4)**



---

archive/issue_comments_242774.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/755b67a1c9516bcd44f59aab6a8b6032d257591d\"><code>755b67a</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-14T14:11:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242774",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/755b67a1c9516bcd44f59aab6a8b6032d257591d"><code>755b67a</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_242775.json:
```json
{
    "body": "Changed commit from **[`c835117`](https://github.com/sagemath/sagetrac-mirror/commit/c835117a1e14e84d3f823b4111a092a80b4c3ef4)** to **[`755b67a`](https://github.com/sagemath/sagetrac-mirror/commit/755b67a1c9516bcd44f59aab6a8b6032d257591d)**",
    "created_at": "2015-03-14T14:11:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242775",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c835117`](https://github.com/sagemath/sagetrac-mirror/commit/c835117a1e14e84d3f823b4111a092a80b4c3ef4)** to **[`755b67a`](https://github.com/sagemath/sagetrac-mirror/commit/755b67a1c9516bcd44f59aab6a8b6032d257591d)**



---

archive/issue_comments_242776.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThis now seems to work reasonably well. Not yet ready, but good enough for example to compare with the existing implementation. That's how I found all the bugs at #17548.\n\nDue to the polyhedra overhead, it is generally (a lot) slower than the existing code.",
    "created_at": "2015-03-14T14:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242776",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

This now seems to work reasonably well. Not yet ready, but good enough for example to compare with the existing implementation. That's how I found all the bugs at #17548.

Due to the polyhedra overhead, it is generally (a lot) slower than the existing code.



---

archive/issue_comments_242777.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@jdemeyer](#comment:12):\n> This now seems to work reasonably well. Not yet ready, but good enough for example to compare with the existing implementation. That's how I found all the bugs at #17548.\n> \n> Due to the polyhedra overhead, it is generally (a lot) slower than the existing code.\n\nIs it worth changing this branch so that it changes the existing code instead of adding a new file ? As you said: let's be correct first, *then* fast.\n\nNathann",
    "created_at": "2015-03-14T16:40:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242777",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@jdemeyer](#comment:12):
> This now seems to work reasonably well. Not yet ready, but good enough for example to compare with the existing implementation. That's how I found all the bugs at #17548.
> 
> Due to the polyhedra overhead, it is generally (a lot) slower than the existing code.

Is it worth changing this branch so that it changes the existing code instead of adding a new file ? As you said: let's be correct first, *then* fast.

Nathann



---

archive/issue_comments_242778.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nMy code does not yet support all (undocumented!) features of the old `IntegerListsLex`, so we cannot yet replace `IntegerListsLex`.",
    "created_at": "2015-03-14T16:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242778",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

My code does not yet support all (undocumented!) features of the old `IntegerListsLex`, so we cannot yet replace `IntegerListsLex`.



---

archive/issue_comments_242779.json:
```json
{
    "body": "Changed commit from **[`755b67a`](https://github.com/sagemath/sagetrac-mirror/commit/755b67a1c9516bcd44f59aab6a8b6032d257591d)** to **[`674a518`](https://github.com/sagemath/sagetrac-mirror/commit/674a518d20e6b220f668d88ec748376217b243da)**",
    "created_at": "2015-03-14T18:24:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242779",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`755b67a`](https://github.com/sagemath/sagetrac-mirror/commit/755b67a1c9516bcd44f59aab6a8b6032d257591d)** to **[`674a518`](https://github.com/sagemath/sagetrac-mirror/commit/674a518d20e6b220f668d88ec748376217b243da)**



---

archive/issue_comments_242780.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/674a518d20e6b220f668d88ec748376217b243da\"><code>674a518</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-14T18:24:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242780",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/674a518d20e6b220f668d88ec748376217b243da"><code>674a518</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_242781.json:
```json
{
    "body": "Changed commit from **[`674a518`](https://github.com/sagemath/sagetrac-mirror/commit/674a518d20e6b220f668d88ec748376217b243da)** to **[`4e5dbae`](https://github.com/sagemath/sagetrac-mirror/commit/4e5dbaec98f2d779a6c73a69d5b71581be7fb5da)**",
    "created_at": "2015-03-14T22:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242781",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`674a518`](https://github.com/sagemath/sagetrac-mirror/commit/674a518d20e6b220f668d88ec748376217b243da)** to **[`4e5dbae`](https://github.com/sagemath/sagetrac-mirror/commit/4e5dbaec98f2d779a6c73a69d5b71581be7fb5da)**



---

archive/issue_comments_242782.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e5dbaec98f2d779a6c73a69d5b71581be7fb5da\"><code>4e5dbae</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-14T22:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242782",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e5dbaec98f2d779a6c73a69d5b71581be7fb5da"><code>4e5dbae</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_242783.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThis now implements `Compositions` using my new `IntegerListsLex` (is the lex ordering really important? I guess not, it's for sure nowhere documented). However, doing the same for `Partitions` leads to all kinds of breakage and I don't understand why.",
    "created_at": "2015-03-14T22:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242783",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

This now implements `Compositions` using my new `IntegerListsLex` (is the lex ordering really important? I guess not, it's for sure nowhere documented). However, doing the same for `Partitions` leads to all kinds of breakage and I don't understand why.



---

archive/issue_comments_242784.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0772f8981d3856bdf85cb3eb07094944aa73262\"><code>c0772f8</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-14T22:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242784",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0772f8981d3856bdf85cb3eb07094944aa73262"><code>c0772f8</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_242785.json:
```json
{
    "body": "Changed commit from **[`4e5dbae`](https://github.com/sagemath/sagetrac-mirror/commit/4e5dbaec98f2d779a6c73a69d5b71581be7fb5da)** to **[`c0772f8`](https://github.com/sagemath/sagetrac-mirror/commit/c0772f8981d3856bdf85cb3eb07094944aa73262)**",
    "created_at": "2015-03-14T22:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242785",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4e5dbae`](https://github.com/sagemath/sagetrac-mirror/commit/4e5dbaec98f2d779a6c73a69d5b71581be7fb5da)** to **[`c0772f8`](https://github.com/sagemath/sagetrac-mirror/commit/c0772f8981d3856bdf85cb3eb07094944aa73262)**



---

archive/issue_comments_242786.json:
```json
{
    "body": "Changed commit from **[`c0772f8`](https://github.com/sagemath/sagetrac-mirror/commit/c0772f8981d3856bdf85cb3eb07094944aa73262)** to **[`631c476`](https://github.com/sagemath/sagetrac-mirror/commit/631c47652412b518bb4bcd8cb4465a4fbfe16a83)**",
    "created_at": "2015-03-14T22:23:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242786",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c0772f8`](https://github.com/sagemath/sagetrac-mirror/commit/c0772f8981d3856bdf85cb3eb07094944aa73262)** to **[`631c476`](https://github.com/sagemath/sagetrac-mirror/commit/631c47652412b518bb4bcd8cb4465a4fbfe16a83)**



---

archive/issue_comments_242787.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/631c47652412b518bb4bcd8cb4465a4fbfe16a83\"><code>631c476</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-14T22:23:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242787",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/631c47652412b518bb4bcd8cb4465a4fbfe16a83"><code>631c476</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_242788.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b7f4cd93be25051cc9ecf08d573b2aacdc02010\"><code>3b7f4cd</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-15T11:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242788",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b7f4cd93be25051cc9ecf08d573b2aacdc02010"><code>3b7f4cd</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_242789.json:
```json
{
    "body": "Changed commit from **[`631c476`](https://github.com/sagemath/sagetrac-mirror/commit/631c47652412b518bb4bcd8cb4465a4fbfe16a83)** to **[`3b7f4cd`](https://github.com/sagemath/sagetrac-mirror/commit/3b7f4cd93be25051cc9ecf08d573b2aacdc02010)**",
    "created_at": "2015-03-15T11:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242789",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`631c476`](https://github.com/sagemath/sagetrac-mirror/commit/631c47652412b518bb4bcd8cb4465a4fbfe16a83)** to **[`3b7f4cd`](https://github.com/sagemath/sagetrac-mirror/commit/3b7f4cd93be25051cc9ecf08d573b2aacdc02010)**



---

archive/issue_comments_242790.json:
```json
{
    "body": "Changed commit from **[`3b7f4cd`](https://github.com/sagemath/sagetrac-mirror/commit/3b7f4cd93be25051cc9ecf08d573b2aacdc02010)** to **[`936a2c7`](https://github.com/sagemath/sagetrac-mirror/commit/936a2c73d3612c76cf115d1b5dd690417e6ce4ab)**",
    "created_at": "2015-03-15T11:19:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242790",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3b7f4cd`](https://github.com/sagemath/sagetrac-mirror/commit/3b7f4cd93be25051cc9ecf08d573b2aacdc02010)** to **[`936a2c7`](https://github.com/sagemath/sagetrac-mirror/commit/936a2c73d3612c76cf115d1b5dd690417e6ce4ab)**



---

archive/issue_comments_242791.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/936a2c73d3612c76cf115d1b5dd690417e6ce4ab\"><code>936a2c7</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-15T11:19:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242791",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/936a2c73d3612c76cf115d1b5dd690417e6ce4ab"><code>936a2c7</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_242792.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nNote that this changes 3 tests (just reordering the output) in `src/sage/tests/book_schilling_zabrocki_kschur_primer.py`",
    "created_at": "2015-03-15T11:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242792",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Note that this changes 3 tests (just reordering the output) in `src/sage/tests/book_schilling_zabrocki_kschur_primer.py`



---

archive/issue_comments_242793.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe code on this ticket is essentially complete, I just need to add more doctests to comply with the \"coverage\" policy.",
    "created_at": "2015-03-15T11:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242793",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

The code on this ticket is essentially complete, I just need to add more doctests to comply with the "coverage" policy.



---

archive/issue_comments_242794.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9fa1c403feb7efb7b0c272b36e9062b3f0988d3\"><code>c9fa1c4</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-15T12:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242794",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9fa1c403feb7efb7b0c272b36e9062b3f0988d3"><code>c9fa1c4</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_242795.json:
```json
{
    "body": "Changed commit from **[`936a2c7`](https://github.com/sagemath/sagetrac-mirror/commit/936a2c73d3612c76cf115d1b5dd690417e6ce4ab)** to **[`c9fa1c4`](https://github.com/sagemath/sagetrac-mirror/commit/c9fa1c403feb7efb7b0c272b36e9062b3f0988d3)**",
    "created_at": "2015-03-15T12:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242795",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`936a2c7`](https://github.com/sagemath/sagetrac-mirror/commit/936a2c73d3612c76cf115d1b5dd690417e6ce4ab)** to **[`c9fa1c4`](https://github.com/sagemath/sagetrac-mirror/commit/c9fa1c403feb7efb7b0c272b36e9062b3f0988d3)**



---

archive/issue_comments_242796.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0a04aa5a4454766ed9802d8e99abcd7fb3e105b\"><code>b0a04aa</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>\n",
    "created_at": "2015-03-15T15:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242796",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0a04aa5a4454766ed9802d8e99abcd7fb3e105b"><code>b0a04aa</code></a></td><td><code>Reimplement IntegerLists using Polyhedron.integral_points()</code></td></tr></table>




---

archive/issue_comments_242797.json:
```json
{
    "body": "Changed commit from **[`c9fa1c4`](https://github.com/sagemath/sagetrac-mirror/commit/c9fa1c403feb7efb7b0c272b36e9062b3f0988d3)** to **[`b0a04aa`](https://github.com/sagemath/sagetrac-mirror/commit/b0a04aa5a4454766ed9802d8e99abcd7fb3e105b)**",
    "created_at": "2015-03-15T15:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242797",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c9fa1c4`](https://github.com/sagemath/sagetrac-mirror/commit/c9fa1c403feb7efb7b0c272b36e9062b3f0988d3)** to **[`b0a04aa`](https://github.com/sagemath/sagetrac-mirror/commit/b0a04aa5a4454766ed9802d8e99abcd7fb3e105b)**



---

archive/issue_events_255015.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-15T15:08:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255015"
}
```



---

archive/issue_comments_242798.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nDo you have some timings?\n\nAlso, both of these are wrong:\n\n```\nsage: Compositions(3, max_length=2, inner=[1,1,1]).list()\n[]\nsage: Compositions(10, outer=[4], inner=[1,1]).list()\n[]\n```\nThe first should be `[[2, 1], [1, 2]]` since the `inner` (or `outer`) are not related to the min or max lengths. For the second, the inner composition is extendedby the minimum part, so there are many such compositions, such as `[4,6]`, `[2,8]`, etc.",
    "created_at": "2015-03-15T15:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242798",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:27" align="right">comment:27</div>

Do you have some timings?

Also, both of these are wrong:

```
sage: Compositions(3, max_length=2, inner=[1,1,1]).list()
[]
sage: Compositions(10, outer=[4], inner=[1,1]).list()
[]
```
The first should be `[[2, 1], [1, 2]]` since the `inner` (or `outer`) are not related to the min or max lengths. For the second, the inner composition is extendedby the minimum part, so there are many such compositions, such as `[4,6]`, `[2,8]`, etc.



---

archive/issue_comments_242799.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@tscrim](#comment:27):\n> Do you have some timings?\n\nSlow is better than wrong, isn't it? ;-)",
    "created_at": "2015-03-15T15:28:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242799",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@tscrim](#comment:27):
> Do you have some timings?

Slow is better than wrong, isn't it? ;-)



---

archive/issue_comments_242800.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@tscrim](#comment:27):\n> Do you have some timings?\n\nMy code is much slower.\n\n> Also, both of these are wrong:\n> \n> ```\n> sage: Compositions(3, max_length=2, inner=[1,1,1]).list()\n> []\n> sage: Compositions(10, outer=[4], inner=[1,1]).list()\n> []\n> ```\n> The first should be `[[2, 1], [1, 2]]`\n\nI don't think so. The `Compositions` code explicitly adds the length of the `inner` argument as minimal length. I didn't change this.",
    "created_at": "2015-03-15T15:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242800",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@tscrim](#comment:27):
> Do you have some timings?

My code is much slower.

> Also, both of these are wrong:
> 
> ```
> sage: Compositions(3, max_length=2, inner=[1,1,1]).list()
> []
> sage: Compositions(10, outer=[4], inner=[1,1]).list()
> []
> ```
> The first should be `[[2, 1], [1, 2]]`

I don't think so. The `Compositions` code explicitly adds the length of the `inner` argument as minimal length. I didn't change this.



---

archive/issue_events_255016.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-15T15:31:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255016"
}
```



---

archive/issue_comments_242801.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nSetting to blocker status since either #17920 or #17956 should be fixed.",
    "created_at": "2015-03-15T15:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242801",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

Setting to blocker status since either #17920 or #17956 should be fixed.



---

archive/issue_comments_242802.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+This fixes #17548.\n``````\n",
    "created_at": "2015-03-15T15:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242802",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+This fixes #17548.
``````




---

archive/issue_comments_242803.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@tscrim](#comment:27):\n> The first should be `[[2, 1], [1, 2]]` since the `inner` (or `outer`) are not related to the min or max lengths.\n\nTo clarify: you might be confusing with the `floor` and `ceiling` arguments of `IntegerListsLex`. Those do not have any effect on the length, but `inner`/`outer` *do* add lower/upper bounds to the length. With both the existing code as well as with my code, we have for example\n\n```\nsage: Compositions(3, inner=[1,1,1]).list()\n[[1, 1, 1]]\n```",
    "created_at": "2015-03-15T15:35:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242803",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@tscrim](#comment:27):
> The first should be `[[2, 1], [1, 2]]` since the `inner` (or `outer`) are not related to the min or max lengths.

To clarify: you might be confusing with the `floor` and `ceiling` arguments of `IntegerListsLex`. Those do not have any effect on the length, but `inner`/`outer` *do* add lower/upper bounds to the length. With both the existing code as well as with my code, we have for example

```
sage: Compositions(3, inner=[1,1,1]).list()
[[1, 1, 1]]
```



---

archive/issue_comments_242804.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nOn the ordering, from the title of the class, the output should be in lexicographical order. Moreover, since these are `EnumeratedSets`, the change in the ordering could lead to subtle changes that breaks people's code.\n\n`Compositions` also does a similar thing with the max length and `outer`, so I agree that those should be empty. However IMO these tests should be in `Compositions`.\n\n@videlec It's mostly correct and there is a lot of code which depends on this being fast. Minimal slowdowns are okay (IMO), but significant slowdowns are unacceptable.",
    "created_at": "2015-03-15T15:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242804",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:33" align="right">comment:33</div>

On the ordering, from the title of the class, the output should be in lexicographical order. Moreover, since these are `EnumeratedSets`, the change in the ordering could lead to subtle changes that breaks people's code.

`Compositions` also does a similar thing with the max length and `outer`, so I agree that those should be empty. However IMO these tests should be in `Compositions`.

@videlec It's mostly correct and there is a lot of code which depends on this being fast. Minimal slowdowns are okay (IMO), but significant slowdowns are unacceptable.



---

archive/issue_comments_242805.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\n> On the ordering, from the title of the class, the output should be in lexicographical order. Moreover, since these are `EnumeratedSets`, the change in the ordering could lead to subtle changes that breaks people's code.\n\nWe can sort it before returning it I guess.\n\n> @videlec It's mostly correct\n\nJeroen compiled many related bugs in the description of #17548.\n\n> Minimal slowdowns are okay (IMO), but significant slowdowns are unacceptable.\n\nSignificant slowdown can be a problem, that's for sure. If they turn out to be our only way to have a code which does not return wrong results, however, we will learn to live with them.\n\nNathann",
    "created_at": "2015-03-15T15:42:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242805",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:34" align="right">comment:34</div>

> On the ordering, from the title of the class, the output should be in lexicographical order. Moreover, since these are `EnumeratedSets`, the change in the ordering could lead to subtle changes that breaks people's code.

We can sort it before returning it I guess.

> @videlec It's mostly correct

Jeroen compiled many related bugs in the description of #17548.

> Minimal slowdowns are okay (IMO), but significant slowdowns are unacceptable.

Significant slowdown can be a problem, that's for sure. If they turn out to be our only way to have a code which does not return wrong results, however, we will learn to live with them.

Nathann



---

archive/issue_comments_242806.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI think it is great that Jeroen implemented this to get the correct results! Of course we do want fast code at the end.\n\nAs I mentioned on sage-devel, the order of lists of tableaux does not matter very much.\n\nAs Travis mentioned, there might be some subtle places where the order matters. One example that comes to mind is that the representations of S_n and characters are returned as matrices with rows and columns indexed by integers instead of partitions. So if the order of partitions changes, the interpretation of the results might change!",
    "created_at": "2015-03-15T15:45:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242806",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:35" align="right">comment:35</div>

I think it is great that Jeroen implemented this to get the correct results! Of course we do want fast code at the end.

As I mentioned on sage-devel, the order of lists of tableaux does not matter very much.

As Travis mentioned, there might be some subtle places where the order matters. One example that comes to mind is that the representations of S_n and characters are returned as matrices with rows and columns indexed by integers instead of partitions. So if the order of partitions changes, the interpretation of the results might change!



---

archive/issue_comments_242807.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@tscrim](#comment:33):\n> On the ordering, from the title of the class, the output should be in lexicographical order.\n\nThe name is now `IntegerLists` and I do provide `IntegerListsLex` for \"backwards compatibility\" which does sort.\n\nSince the documentation of neither `Partitions` nor `Compositions` says anything about the order, I think it's allowed to change the order.",
    "created_at": "2015-03-15T15:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242807",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@tscrim](#comment:33):
> On the ordering, from the title of the class, the output should be in lexicographical order.

The name is now `IntegerLists` and I do provide `IntegerListsLex` for "backwards compatibility" which does sort.

Since the documentation of neither `Partitions` nor `Compositions` says anything about the order, I think it's allowed to change the order.



---

archive/issue_comments_242808.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nAbout the speed: if you manage to fix all existing bugs in the `IntegerListsLex` code, you can again use that implementation for `Compositions` and `Partitions`. It's probably good to have two indepdendent implementations anyway.\n\nEven better would of course be that somebody speeds up `Polyhedron().integral_points()` which would benefit everybody using polyhedra.",
    "created_at": "2015-03-15T15:54:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242808",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

About the speed: if you manage to fix all existing bugs in the `IntegerListsLex` code, you can again use that implementation for `Compositions` and `Partitions`. It's probably good to have two indepdendent implementations anyway.

Even better would of course be that somebody speeds up `Polyhedron().integral_points()` which would benefit everybody using polyhedra.



---

archive/issue_comments_242809.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n This fixes #17548.\n+\n+It also adds new features to `IntegerLists`:\n+\n+1. Negative integers are allowed (but the default still is `min_part=0`).\n+\n+2. There does not need to be a fixed sum, one can do for example `IntegerLists(max_part=2)` for all lists of integers <= 2. One can also give a lower/upper bound for the sum.\n+\n+Note that the current implementation requires, for a given length, that there are only finitely many lists of that length. This limitation could be lifted in the future.\n``````\n",
    "created_at": "2015-03-15T16:56:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242809",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,9 @@
 This fixes #17548.
+
+It also adds new features to `IntegerLists`:
+
+1. Negative integers are allowed (but the default still is `min_part=0`).
+
+2. There does not need to be a fixed sum, one can do for example `IntegerLists(max_part=2)` for all lists of integers <= 2. One can also give a lower/upper bound for the sum.
+
+Note that the current implementation requires, for a given length, that there are only finitely many lists of that length. This limitation could be lifted in the future.
``````




---

archive/issue_comments_242810.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nDear Jeroen,\n\nThanks a lot for taking action! It's definitely a good thing to have a\ngood connection between ``IntegerListLex`` and ``Polyhedron``, as\nthere is some non trivial overlap. The main differences is that\n``IntegerListLex`` was specifically designed for allowing for\n(essentially) Constant Amortized Time lexicographic Iteration in\nalmost constant memory, which is an important feature.\n\nSo I can see a work path along the following lines:\n\n- Get this ticket in to have a robust implementation of list\n\n- Completely rewrite the current ``IntegerListLex`` iterator to be\n  robust (it's definitely possible); keep the Polyhedron\n  implementation for testing purposes as well as for counting, ...\n\n- Optimize the iterator (Cythonization, using ClonableIntArray, ...).\n\nPlease do not change the enumeration order, at least as default: quite\nsome code depends on it (I agree, this should be made explicit in the\ndocumentation). The proposed generalizations (n in a range, negative\nentries) are fine since the iterator could be made to handle them.\n\nCheers,\n                       Nicolas",
    "created_at": "2015-03-16T05:10:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242810",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:39" align="right">comment:39</div>

Dear Jeroen,

Thanks a lot for taking action! It's definitely a good thing to have a
good connection between ``IntegerListLex`` and ``Polyhedron``, as
there is some non trivial overlap. The main differences is that
``IntegerListLex`` was specifically designed for allowing for
(essentially) Constant Amortized Time lexicographic Iteration in
almost constant memory, which is an important feature.

So I can see a work path along the following lines:

- Get this ticket in to have a robust implementation of list

- Completely rewrite the current ``IntegerListLex`` iterator to be
  robust (it's definitely possible); keep the Polyhedron
  implementation for testing purposes as well as for counting, ...

- Optimize the iterator (Cythonization, using ClonableIntArray, ...).

Please do not change the enumeration order, at least as default: quite
some code depends on it (I agree, this should be made explicit in the
documentation). The proposed generalizations (n in a range, negative
entries) are fine since the iterator could be made to handle them.

Cheers,
                       Nicolas



---

archive/issue_comments_242811.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@nthiery](#comment:39):\n> Please do not change the enumeration order, at least as default\n\nI disagree with this: the default should be \"do not sort, return stuff in the fastest possible way\". Sorting an iterator is very expensive and should only be done if really needed.\n\n> quite some code depends on it\n\nIs that really true? The only doctest failures that I saw where \"obvious\" failures where some list order changed, I didn't see anything subtle.",
    "created_at": "2015-03-16T07:30:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242811",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@nthiery](#comment:39):
> Please do not change the enumeration order, at least as default

I disagree with this: the default should be "do not sort, return stuff in the fastest possible way". Sorting an iterator is very expensive and should only be done if really needed.

> quite some code depends on it

Is that really true? The only doctest failures that I saw where "obvious" failures where some list order changed, I didn't see anything subtle.



---

archive/issue_comments_242812.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@nthiery](#comment:39):\n> keep the Polyhedron implementation for testing purposes as well as for counting, ...\n\nI'm not sure about the counting... I guess a well-written Cython implementation of `IntegerListsLex` will usually be faster than the current polyhedra code. Profiling shows that a lot of time is spent in just *constructing* the polyhedra (if there are not so many points, enumerating them takes a lot less time than constructing the polyhedron in the first place).",
    "created_at": "2015-03-16T08:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242812",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@nthiery](#comment:39):
> keep the Polyhedron implementation for testing purposes as well as for counting, ...

I'm not sure about the counting... I guess a well-written Cython implementation of `IntegerListsLex` will usually be faster than the current polyhedra code. Profiling shows that a lot of time is spent in just *constructing* the polyhedra (if there are not so many points, enumerating them takes a lot less time than constructing the polyhedron in the first place).



---

archive/issue_comments_242813.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nHello,\n\n> I'm not sure about the counting... I guess a well-written Cython implementation of `IntegerListsLex` will usually be faster than the current polyhedra code.\n\nTrue. This being said, your polyhedron code may very well be 'all we can do' to implement this feature while handling all possible combinations of parameters.\n\n> Profiling shows that a lot of time is spent in just *constructing* the polyhedra\n\nTrue. Do you have any idea where that comes from ? I had similar troubles with the Poset constructor (related to memory usage).\n\nNathann",
    "created_at": "2015-03-16T09:15:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242813",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:42" align="right">comment:42</div>

Hello,

> I'm not sure about the counting... I guess a well-written Cython implementation of `IntegerListsLex` will usually be faster than the current polyhedra code.

True. This being said, your polyhedron code may very well be 'all we can do' to implement this feature while handling all possible combinations of parameters.

> Profiling shows that a lot of time is spent in just *constructing* the polyhedra

True. Do you have any idea where that comes from ? I had similar troubles with the Poset constructor (related to memory usage).

Nathann



---

archive/issue_comments_242814.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@nathanncohen](#comment:42):\n> > Profiling shows that a lot of time is spent in just *constructing* the polyhedra\n\n> \n> True. Do you have any idea where that comes from ?\n\nIt's just PPL.\n\nInterestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.",
    "created_at": "2015-03-16T09:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242814",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@nathanncohen](#comment:42):
> > Profiling shows that a lot of time is spent in just *constructing* the polyhedra

> 
> True. Do you have any idea where that comes from ?

It's just PPL.

Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.



---

archive/issue_comments_242815.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\n> Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.\n\nAahahah. Yaeh, Vincent has been fighting a lot with some abstractions we have, which makes code run *much* slower. For `+oo` he advises to solve the problem by using float(\"inf\") instead of Infinity. It is *MUCH* faster.\n\nAt some point he got some crazy somewhere by adding 'from math import sqrt' in a module to overwrite Sage's sqrt function.\n\nNathann",
    "created_at": "2015-03-16T09:25:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242815",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:44" align="right">comment:44</div>

> Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.

Aahahah. Yaeh, Vincent has been fighting a lot with some abstractions we have, which makes code run *much* slower. For `+oo` he advises to solve the problem by using float("inf") instead of Infinity. It is *MUCH* faster.

At some point he got some crazy somewhere by adding 'from math import sqrt' in a module to overwrite Sage's sqrt function.

Nathann



---

archive/issue_comments_242816.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@nathanncohen](#comment:44):\n> > Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.\n\n> \n> Aahahah. Yaeh, Vincent has been fighting a lot with some abstractions we have, which makes code run *much* slower. For `+oo` he advises to solve the problem by using float(\"inf\") instead of Infinity.\n\nIn general, I don't like the \"X is slow, therefore let's not use X\" mentality. My idea is: \"let's use X and then optimize X\".",
    "created_at": "2015-03-16T09:29:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242816",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@nathanncohen](#comment:44):
> > Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.

> 
> Aahahah. Yaeh, Vincent has been fighting a lot with some abstractions we have, which makes code run *much* slower. For `+oo` he advises to solve the problem by using float("inf") instead of Infinity.

In general, I don't like the "X is slow, therefore let's not use X" mentality. My idea is: "let's use X and then optimize X".



---

archive/issue_comments_242817.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@jdemeyer](#comment:45):\n> > > Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.\n\n> > \n> > Aahahah. Yaeh, Vincent has been fighting a lot with some abstractions we have, which makes code run *much* slower. For `+oo` he advises to solve the problem by using float(\"inf\") instead of Infinity.\n\n> \n> In general, I don't like the \"X is slow, therefore let's not use X\" mentality. My idea is: \"let's use X and then optimize X\".\n\nOn a tangential note: if someone makes major changes to the infinity rings, please consider adding a `NaN` element to them.",
    "created_at": "2015-03-16T10:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242817",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@jdemeyer](#comment:45):
> > > Interestingly, arithmetic with infinity also shows up quite high in the profiling reports (up to 10% of the time), so optimizing `src/sage/rings/infinity.py` will also give some speedup.

> > 
> > Aahahah. Yaeh, Vincent has been fighting a lot with some abstractions we have, which makes code run *much* slower. For `+oo` he advises to solve the problem by using float("inf") instead of Infinity.

> 
> In general, I don't like the "X is slow, therefore let's not use X" mentality. My idea is: "let's use X and then optimize X".

On a tangential note: if someone makes major changes to the infinity rings, please consider adding a `NaN` element to them.



---

archive/issue_comments_242818.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\n> In general, I don't like the \"X is slow, therefore let's not use X\" mentality. My idea is: \"let's use X and then optimize X\".\n\nWell, for the sqrt problem we were only computing on floats, and sqrt(5) in Sage is not a float. Having this symbolic value in the code we compared it with floats and this had a cost we had no reason to pay, so `from math import sqrt` made total sense, and there was nothing in Sage's sqrt that we could have wanted to change.\n\nAs per Sage's Infinity... Well, it also seems to have been designed with a different aim in mind. I usually want speed, and I do not want to pay for pointless abstraction. In infinity.py you will find parents, elements, rings and generators, while the feature I need is already provided by the constant LONG_MAX.\n\nThis Sage object is called 'infinity', but it turns out that one definition of \"infinity\" cannot cover all uses that we have for infinity on a computer. And I don't think that we could beat a single CPU instruction while dealing with parents and elements in a .py file.\n\nNathann",
    "created_at": "2015-03-16T10:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242818",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:47" align="right">comment:47</div>

> In general, I don't like the "X is slow, therefore let's not use X" mentality. My idea is: "let's use X and then optimize X".

Well, for the sqrt problem we were only computing on floats, and sqrt(5) in Sage is not a float. Having this symbolic value in the code we compared it with floats and this had a cost we had no reason to pay, so `from math import sqrt` made total sense, and there was nothing in Sage's sqrt that we could have wanted to change.

As per Sage's Infinity... Well, it also seems to have been designed with a different aim in mind. I usually want speed, and I do not want to pay for pointless abstraction. In infinity.py you will find parents, elements, rings and generators, while the feature I need is already provided by the constant LONG_MAX.

This Sage object is called 'infinity', but it turns out that one definition of "infinity" cannot cover all uses that we have for infinity on a computer. And I don't think that we could beat a single CPU instruction while dealing with parents and elements in a .py file.

Nathann



---

archive/issue_comments_242819.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@nathanncohen](#comment:47):\n> while the feature I need is already provided by the constant LONG_MAX.\n\nIn this case, we shouldn't aritificially restrict to `long`s:\n\n```\nsage: IntegerLists(10^100, max_length=1).list()\n[[10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000]]\n```\n\n> This Sage object is called 'infinity', but it turns out that one definition of \"infinity\" cannot cover all uses that we have for infinity on a computer.\n\nI think we can have one definition which covers all uses *within Sage*. There is nothing fundamentally wrong with `Infinity`, it's just slow.",
    "created_at": "2015-03-16T11:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242819",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@nathanncohen](#comment:47):
> while the feature I need is already provided by the constant LONG_MAX.

In this case, we shouldn't aritificially restrict to `long`s:

```
sage: IntegerLists(10^100, max_length=1).list()
[[10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000]]
```

> This Sage object is called 'infinity', but it turns out that one definition of "infinity" cannot cover all uses that we have for infinity on a computer.

I think we can have one definition which covers all uses *within Sage*. There is nothing fundamentally wrong with `Infinity`, it's just slow.



---

archive/issue_comments_242820.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nNote the difference of a factor 20 between the following:\n\n```\nsage: b = ZZ(1); a = Infinity; timeit('a < b', repeat=20, number=10^4)\n10000 loops, best of 20: 11.7 \u00b5s per loop\nsage: b = ZZ(1); a = QQ(2); timeit('a < b', repeat=20, number=10^4)\n10000 loops, best of 20: 681 ns per loop\n```\nA proper Cython implementation of `Infinity` should match the speed for `QQ`.",
    "created_at": "2015-03-16T11:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242820",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:49" align="right">comment:49</div>

Note the difference of a factor 20 between the following:

```
sage: b = ZZ(1); a = Infinity; timeit('a < b', repeat=20, number=10^4)
10000 loops, best of 20: 11.7 s per loop
sage: b = ZZ(1); a = QQ(2); timeit('a < b', repeat=20, number=10^4)
10000 loops, best of 20: 681 ns per loop
```
A proper Cython implementation of `Infinity` should match the speed for `QQ`.



---

archive/issue_comments_242821.json:
```json
{
    "body": "Changed commit from **[`b0a04aa`](https://github.com/sagemath/sagetrac-mirror/commit/b0a04aa5a4454766ed9802d8e99abcd7fb3e105b)** to **[`5f81a0a`](https://github.com/sagemath/sagetrac-mirror/commit/5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1)**",
    "created_at": "2015-03-16T13:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242821",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b0a04aa`](https://github.com/sagemath/sagetrac-mirror/commit/b0a04aa5a4454766ed9802d8e99abcd7fb3e105b)** to **[`5f81a0a`](https://github.com/sagemath/sagetrac-mirror/commit/5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1)**



---

archive/issue_comments_242822.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1\"><code>5f81a0a</code></a></td><td><code>Move doctests</code></td></tr></table>\n",
    "created_at": "2015-03-16T13:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242822",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1"><code>5f81a0a</code></a></td><td><code>Move doctests</code></td></tr></table>




---

archive/issue_comments_242823.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@tscrim](#comment:33):\n> However IMO these tests should be in `Compositions`.\n\nDone",
    "created_at": "2015-03-16T13:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242823",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@tscrim](#comment:33):
> However IMO these tests should be in `Compositions`.

Done



---

archive/issue_comments_242824.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@jdemeyer](#comment:40):\n> Replying to [@nthiery](#comment:39):\n> > Please do not change the enumeration order, at least as default\n\n> I disagree with this: the default should be \"do not sort, return stuff in the fastest possible way\". Sorting an iterator is very expensive and should only be done if really needed.\n\nFor IntegerList itself, any default is fine, and sorting is certainly\nvery bad. But for Partitions, Compositions, ... users are really\nexpecting lexicographic order. Besides, this is only a temporary\nsolution, and we will switch back to lexicographic once we have a\nproper implementation of IntegerListLex.\n\n> Is that really true? The only doctest failures that I saw where\n> \"obvious\" failures where some list order changed, I didn't see\n> anything subtle.\n\nThat's a point indeed; my feeling is that we have been lucky, although\nit could be that some changes w.r.t. MuPAD-Combinat makes the code\nless dependent on that feature.  I am worried by user's personal code\nout there. Well, if you are willing to help those guys ...\n\nCheers,\n                                    Nicolas",
    "created_at": "2015-03-16T14:30:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242824",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@jdemeyer](#comment:40):
> Replying to [@nthiery](#comment:39):
> > Please do not change the enumeration order, at least as default

> I disagree with this: the default should be "do not sort, return stuff in the fastest possible way". Sorting an iterator is very expensive and should only be done if really needed.

For IntegerList itself, any default is fine, and sorting is certainly
very bad. But for Partitions, Compositions, ... users are really
expecting lexicographic order. Besides, this is only a temporary
solution, and we will switch back to lexicographic once we have a
proper implementation of IntegerListLex.

> Is that really true? The only doctest failures that I saw where
> "obvious" failures where some list order changed, I didn't see
> anything subtle.

That's a point indeed; my feeling is that we have been lucky, although
it could be that some changes w.r.t. MuPAD-Combinat makes the code
less dependent on that feature.  I am worried by user's personal code
out there. Well, if you are willing to help those guys ...

Cheers,
                                    Nicolas



---

archive/issue_comments_242825.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@jdemeyer](#comment:41):\n> I'm not sure about the counting... I guess a well-written Cython\n> implementation of `IntegerListsLex` will usually be faster than the\n> current polyhedra code. Profiling shows that a lot of time is spent in\n> just *constructing* the polyhedra (if there are not so many points,\n> enumerating them takes a lot less time than constructing the\n> polyhedron in the first place).\n\nAgreed, especially if we further go parallel: counting through\npolyhedral methods only becomes relevant for relatively large\npolyhedron. But this would be a very useful feature. So count\nwould eventually have some threshold to choose between the\ntwo methods. \n\nBy the way: we don't yet use Barvinok-like algorithms for counting\n(e.g. through LattE), or do we? This could make a difference too.\n\nCheers,\n                               Nicolas",
    "created_at": "2015-03-16T14:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242825",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@jdemeyer](#comment:41):
> I'm not sure about the counting... I guess a well-written Cython
> implementation of `IntegerListsLex` will usually be faster than the
> current polyhedra code. Profiling shows that a lot of time is spent in
> just *constructing* the polyhedra (if there are not so many points,
> enumerating them takes a lot less time than constructing the
> polyhedron in the first place).

Agreed, especially if we further go parallel: counting through
polyhedral methods only becomes relevant for relatively large
polyhedron. But this would be a very useful feature. So count
would eventually have some threshold to choose between the
two methods. 

By the way: we don't yet use Barvinok-like algorithms for counting
(e.g. through LattE), or do we? This could make a difference too.

Cheers,
                               Nicolas



---

archive/issue_comments_242826.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@nthiery](#comment:54):\n> By the way: we don't yet use Barvinok-like algorithms for counting\n> (e.g. through LattE), or do we? This could make a difference too.\n\nI just read the first paragraph of the LattE manual and it does **exactly** what we need for counting:\n\n```\n1.1    What is LattE?\n\nThe name \u201cLattE\u201d is an abbreviation for \u201cLattice point Enumeration.\u201d LattE\nwas developed in 2001 to count lattice points contained in convex polyhedra\ndefined by linear equations and inequalities with integer coefficients. The poly-\nhedra can be of any (reasonably small) dimension.\n```",
    "created_at": "2015-03-16T14:47:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242826",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@nthiery](#comment:54):
> By the way: we don't yet use Barvinok-like algorithms for counting
> (e.g. through LattE), or do we? This could make a difference too.

I just read the first paragraph of the LattE manual and it does **exactly** what we need for counting:

```
1.1    What is LattE?

The name LattE is an abbreviation for Lattice point Enumeration. LattE
was developed in 2001 to count lattice points contained in convex polyhedra
defined by linear equations and inequalities with integer coefficients. The poly-
hedra can be of any (reasonably small) dimension.
```



---

archive/issue_comments_242827.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@nthiery](#comment:53):\n> But for Partitions, Compositions, ... users are really expecting lexicographic order.\n\nWell, certainly for `Compositions`, the current order is not defined:\n\n```\nsage: Compositions(2).list()\n[[1, 1], [2]]\nsage: Compositions(2, max_slope=0).list()\n[[2], [1, 1]]\n```",
    "created_at": "2015-03-16T14:55:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242827",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@nthiery](#comment:53):
> But for Partitions, Compositions, ... users are really expecting lexicographic order.

Well, certainly for `Compositions`, the current order is not defined:

```
sage: Compositions(2).list()
[[1, 1], [2]]
sage: Compositions(2, max_slope=0).list()
[[2], [1, 1]]
```



---

archive/issue_comments_242828.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\n[#17529 comment:11](https://github.com/sagemath/sage/issues/17529#comment:11) (we already have a LattE package)",
    "created_at": "2015-03-16T14:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242828",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:57" align="right">comment:57</div>

[#17529 comment:11](https://github.com/sagemath/sage/issues/17529#comment:11) (we already have a LattE package)



---

archive/issue_comments_242829.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@jdemeyer](#comment:55):\n> I just read the first paragraph of the LattE manual and it does **exactly** what we need for counting:\n\nYes indeed! See also #15180.\n\nBtw: in case this could be useful, the developers are in Davis where I\ncurrently am for the upcoming Sage Days 64.\n\nCheers,\n                             Nicolas",
    "created_at": "2015-03-16T14:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242829",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@jdemeyer](#comment:55):
> I just read the first paragraph of the LattE manual and it does **exactly** what we need for counting:

Yes indeed! See also #15180.

Btw: in case this could be useful, the developers are in Davis where I
currently am for the upcoming Sage Days 64.

Cheers,
                             Nicolas



---

archive/issue_comments_242830.json:
```json
{
    "body": "Changed commit from **[`5f81a0a`](https://github.com/sagemath/sagetrac-mirror/commit/5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1)** to **[`6f31649`](https://github.com/sagemath/sagetrac-mirror/commit/6f3164941f2565627afc1128ace01973c788f767)**",
    "created_at": "2015-03-16T14:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242830",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5f81a0a`](https://github.com/sagemath/sagetrac-mirror/commit/5f81a0a08bed2dc5c73f8f99dd32deafdfb3c9a1)** to **[`6f31649`](https://github.com/sagemath/sagetrac-mirror/commit/6f3164941f2565627afc1128ace01973c788f767)**



---

archive/issue_comments_242831.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f3164941f2565627afc1128ace01973c788f767\"><code>6f31649</code></a></td><td><code>Add two extra tests</code></td></tr></table>\n",
    "created_at": "2015-03-16T14:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242831",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f3164941f2565627afc1128ace01973c788f767"><code>6f31649</code></a></td><td><code>Add two extra tests</code></td></tr></table>




---

archive/issue_comments_242832.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nFYI - `float('inf')` works quite well as a good and fast substitute for `Infinity` (which is why it is used in the current `IntegerListsLex`).",
    "created_at": "2015-03-16T15:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242832",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:60" align="right">comment:60</div>

FYI - `float('inf')` works quite well as a good and fast substitute for `Infinity` (which is why it is used in the current `IntegerListsLex`).



---

archive/issue_comments_242833.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@nthiery](#comment:53):\n> But for Partitions users are really expecting lexicographic order.\n\nFor which applications does this really matter?\n\nI know that's how partitions are traditionally written down and how things are done in Sage historically. But I don't think that's enough reason to not change it, especially given the fact that the documentation doesn't say anything about the order. Any order of the list of partitions is a good answer mathematically.",
    "created_at": "2015-03-16T15:13:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242833",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@nthiery](#comment:53):
> But for Partitions users are really expecting lexicographic order.

For which applications does this really matter?

I know that's how partitions are traditionally written down and how things are done in Sage historically. But I don't think that's enough reason to not change it, especially given the fact that the documentation doesn't say anything about the order. Any order of the list of partitions is a good answer mathematically.



---

archive/issue_comments_242834.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nI'm worried this could lead to errors being raised when trying to convert between different bases of the symmetric functions (which are indexed by partitions). IIRC the code relies on some of the (graded) transition matrices being upper triangular, which requires the order be compatible with dominance ordering.",
    "created_at": "2015-03-16T15:17:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242834",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:62" align="right">comment:62</div>

I'm worried this could lead to errors being raised when trying to convert between different bases of the symmetric functions (which are indexed by partitions). IIRC the code relies on some of the (graded) transition matrices being upper triangular, which requires the order be compatible with dominance ordering.



---

archive/issue_comments_242835.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@tscrim](#comment:62):\n> I'm worried this could lead to errors being raised when trying to convert between different bases of the symmetric functions (which are indexed by partitions). IIRC the code relies on some of the (graded) transition matrices being upper triangular, which requires the order be compatible with dominance ordering.\n\nTo be honest, I don't know what you mean mathematically. But, like I said, the fact that there are no strange doctest failures shows that the issue cannot be so serious.\n\nAnd in the cases where the order really matters, I think those places should simply explicitly sort or use `IntegerListsLex`. Slowing down all of `Paritions()` just because one or two applications require it seems stupid.",
    "created_at": "2015-03-16T15:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242835",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@tscrim](#comment:62):
> I'm worried this could lead to errors being raised when trying to convert between different bases of the symmetric functions (which are indexed by partitions). IIRC the code relies on some of the (graded) transition matrices being upper triangular, which requires the order be compatible with dominance ordering.

To be honest, I don't know what you mean mathematically. But, like I said, the fact that there are no strange doctest failures shows that the issue cannot be so serious.

And in the cases where the order really matters, I think those places should simply explicitly sort or use `IntegerListsLex`. Slowing down all of `Paritions()` just because one or two applications require it seems stupid.



---

archive/issue_comments_242836.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\n> But, like I said, the fact that there are no strange doctest failures shows that the issue cannot be so serious.\n\nThis might be an issue though\n\n```\nsage: S=SymmetricGroup(3)\nsage: S.character_table()\n[ 1 -1  1]\n[ 2  0 -1]\n[ 1  1  1]\nsage: type(S.character_table())\n<type 'sage.matrix.matrix_cyclo_dense.Matrix_cyclo_dense'>\n```\nThe character table should really be indexed by partitions (or conjugacy classes of S_n).\nSo the meaning of the matrix changes if the order of the list of partitions changes.",
    "created_at": "2015-03-16T19:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242836",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:64" align="right">comment:64</div>

> But, like I said, the fact that there are no strange doctest failures shows that the issue cannot be so serious.

This might be an issue though

```
sage: S=SymmetricGroup(3)
sage: S.character_table()
[ 1 -1  1]
[ 2  0 -1]
[ 1  1  1]
sage: type(S.character_table())
<type 'sage.matrix.matrix_cyclo_dense.Matrix_cyclo_dense'>
```
The character table should really be indexed by partitions (or conjugacy classes of S_n).
So the meaning of the matrix changes if the order of the list of partitions changes.



---

archive/issue_comments_242837.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@anneschilling](#comment:64):\n> This might be an issue though\n> \n> ```\n> sage: S=SymmetricGroup(3)\n> sage: S.character_table()\n> [ 1 -1  1]\n> [ 2  0 -1]\n> [ 1  1  1]\n> sage: type(S.character_table())\n> <type 'sage.matrix.matrix_cyclo_dense.Matrix_cyclo_dense'>\n> ```\n> The character table should really be indexed by partitions (or conjugacy classes of S_n).\n> So the meaning of the matrix changes if the order of the list of partitions changes.\n\nOkay, so the meaning of the matrix changes. There is nothing wrong with output *changing* as long as things stay mathematically correct and internally consistent.",
    "created_at": "2015-03-16T19:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242837",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@anneschilling](#comment:64):
> This might be an issue though
> 
> ```
> sage: S=SymmetricGroup(3)
> sage: S.character_table()
> [ 1 -1  1]
> [ 2  0 -1]
> [ 1  1  1]
> sage: type(S.character_table())
> <type 'sage.matrix.matrix_cyclo_dense.Matrix_cyclo_dense'>
> ```
> The character table should really be indexed by partitions (or conjugacy classes of S_n).
> So the meaning of the matrix changes if the order of the list of partitions changes.

Okay, so the meaning of the matrix changes. There is nothing wrong with output *changing* as long as things stay mathematically correct and internally consistent.



---

archive/issue_comments_242838.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@jdemeyer](#comment:55):\n> Replying to [@nthiery](#comment:54):\n> > By the way: we don't yet use Barvinok-like algorithms for counting\n> > (e.g. through LattE), or do we? This could make a difference too.\n\n> \n> I just read the first paragraph of the LattE manual and it does **exactly** what we need for counting:\n\nMoreover, counting the points is faster than enumerating the points; there could be exponentially many points to count, but still the number of them is only polynomial in the input size, for fixed dimension, and LattE provides a truly polynomial-time procedure for this counting.",
    "created_at": "2015-03-18T10:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242838",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@jdemeyer](#comment:55):
> Replying to [@nthiery](#comment:54):
> > By the way: we don't yet use Barvinok-like algorithms for counting
> > (e.g. through LattE), or do we? This could make a difference too.

> 
> I just read the first paragraph of the LattE manual and it does **exactly** what we need for counting:

Moreover, counting the points is faster than enumerating the points; there could be exponentially many points to count, but still the number of them is only polynomial in the input size, for fixed dimension, and LattE provides a truly polynomial-time procedure for this counting.



---

archive/issue_comments_242839.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\na badly formated doc in composition.py\n\n```\n     TESTS::\n \n+    Check that :trac:`17548` is fixed::\n```",
    "created_at": "2015-03-25T20:01:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242839",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:67" align="right">comment:67</div>

a badly formated doc in composition.py

```
     TESTS::
 
+    Check that :trac:`17548` is fixed::
```



---

archive/issue_events_255017.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-25T20:01:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255017"
}
```



---

archive/issue_events_255018.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-25T20:01:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255018"
}
```



---

archive/issue_comments_242840.json:
```json
{
    "body": "Changed commit from **[`6f31649`](https://github.com/sagemath/sagetrac-mirror/commit/6f3164941f2565627afc1128ace01973c788f767)** to **[`62b56ba`](https://github.com/sagemath/sagetrac-mirror/commit/62b56ba0e0fa855ab89d832755d0219bd9f6b5f5)**",
    "created_at": "2015-03-25T22:34:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242840",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6f31649`](https://github.com/sagemath/sagetrac-mirror/commit/6f3164941f2565627afc1128ace01973c788f767)** to **[`62b56ba`](https://github.com/sagemath/sagetrac-mirror/commit/62b56ba0e0fa855ab89d832755d0219bd9f6b5f5)**



---

archive/issue_comments_242841.json:
```json
{
    "body": "<div id=\"comment:68\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62b56ba0e0fa855ab89d832755d0219bd9f6b5f5\"><code>62b56ba</code></a></td><td><code>Improve IntegerLists_polyhedron; sort Partitions by default</code></td></tr></table>\n",
    "created_at": "2015-03-25T22:34:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242841",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62b56ba0e0fa855ab89d832755d0219bd9f6b5f5"><code>62b56ba</code></a></td><td><code>Improve IntegerLists_polyhedron; sort Partitions by default</code></td></tr></table>




---

archive/issue_comments_242842.json:
```json
{
    "body": "<div id=\"comment:69\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5096e5f0fb03432307efea20493216bf713eb020\"><code>5096e5f</code></a></td><td><code>Fix documentation</code></td></tr></table>\n",
    "created_at": "2015-03-25T22:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242842",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:69"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5096e5f0fb03432307efea20493216bf713eb020"><code>5096e5f</code></a></td><td><code>Fix documentation</code></td></tr></table>




---

archive/issue_comments_242843.json:
```json
{
    "body": "Changed commit from **[`62b56ba`](https://github.com/sagemath/sagetrac-mirror/commit/62b56ba0e0fa855ab89d832755d0219bd9f6b5f5)** to **[`5096e5f`](https://github.com/sagemath/sagetrac-mirror/commit/5096e5f0fb03432307efea20493216bf713eb020)**",
    "created_at": "2015-03-25T22:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242843",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`62b56ba`](https://github.com/sagemath/sagetrac-mirror/commit/62b56ba0e0fa855ab89d832755d0219bd9f6b5f5)** to **[`5096e5f`](https://github.com/sagemath/sagetrac-mirror/commit/5096e5f0fb03432307efea20493216bf713eb020)**



---

archive/issue_events_255019.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T22:37:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255019"
}
```



---

archive/issue_events_255020.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T22:37:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255020"
}
```



---

archive/issue_comments_242844.json:
```json
{
    "body": "Changed dependencies from **#17937** to **#17937, #18087**",
    "created_at": "2015-04-05T07:00:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242844",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#17937** to **#17937, #18087**



---

archive/issue_comments_242845.json:
```json
{
    "body": "Changed commit from **[`5096e5f`](https://github.com/sagemath/sagetrac-mirror/commit/5096e5f0fb03432307efea20493216bf713eb020)** to **[`621d467`](https://github.com/sagemath/sagetrac-mirror/commit/621d467827d8d0c6a0cb1113cb4b861cca936f41)**",
    "created_at": "2015-04-05T07:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242845",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5096e5f`](https://github.com/sagemath/sagetrac-mirror/commit/5096e5f0fb03432307efea20493216bf713eb020)** to **[`621d467`](https://github.com/sagemath/sagetrac-mirror/commit/621d467827d8d0c6a0cb1113cb4b861cca936f41)**



---

archive/issue_comments_242846.json:
```json
{
    "body": "<div id=\"comment:72\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9dce18385fd59755cbcced5f1804bf60b19df07\"><code>c9dce18</code></a></td><td><code>Remove sig_on() from __dealloc__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/621d467827d8d0c6a0cb1113cb4b861cca936f41\"><code>621d467</code></a></td><td><code>Merge commit 'c9dce18385fd59755cbcced5f1804bf60b19df07' into t/17920/ticket/17920</code></td></tr></table>\n",
    "created_at": "2015-04-05T07:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242846",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:72"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9dce18385fd59755cbcced5f1804bf60b19df07"><code>c9dce18</code></a></td><td><code>Remove sig_on() from __dealloc__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/621d467827d8d0c6a0cb1113cb4b861cca936f41"><code>621d467</code></a></td><td><code>Merge commit 'c9dce18385fd59755cbcced5f1804bf60b19df07' into t/17920/ticket/17920</code></td></tr></table>




---

archive/issue_events_255021.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-12T11:24:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255021"
}
```



---

archive/issue_events_255022.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-12T11:24:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255022"
}
```



---

archive/issue_events_255023.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-12T11:24:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255023"
}
```



---

archive/issue_events_255024.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-12T11:24:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255024"
}
```



---

archive/issue_comments_242847.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nWhats your plan with the code here? It might be useful to check. Thoughts?",
    "created_at": "2015-04-12T11:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242847",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:73" align="right">comment:73</div>

Whats your plan with the code here? It might be useful to check. Thoughts?



---

archive/issue_events_255025.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-04-12T11:47:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255025"
}
```



---

archive/issue_events_255026.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-04-12T11:47:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255026"
}
```



---

archive/issue_comments_242848.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nThis code is useful as it works in more general context than the new `IntegerListsLex` as it allows entries in `ZZ` (instead of just `NN`) and when lex ordering doesn't hit every element in finite time. Plus I like alternative algorithms for testing, and this is faster in certain cases currently as well. I just need to find some time to review this.",
    "created_at": "2015-04-12T11:47:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242848",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:74" align="right">comment:74</div>

This code is useful as it works in more general context than the new `IntegerListsLex` as it allows entries in `ZZ` (instead of just `NN`) and when lex ordering doesn't hit every element in finite time. Plus I like alternative algorithms for testing, and this is faster in certain cases currently as well. I just need to find some time to review this.



---

archive/issue_comments_242849.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nIndeed, we want this code in Sage! I promised Jeroen I would rebase his code, and work on the review. This could be a good sprint for Sage Days 67. But yes this certainly is not a blocker anymore for 6.6.",
    "created_at": "2015-04-12T14:54:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242849",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:75" align="right">comment:75</div>

Indeed, we want this code in Sage! I promised Jeroen I would rebase his code, and work on the review. This could be a good sprint for Sage Days 67. But yes this certainly is not a blocker anymore for 6.6.



---

archive/issue_events_255027.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-04-13T07:09:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255027"
}
```



---

archive/issue_events_255028.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-04-13T07:09:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255028"
}
```



---

archive/issue_comments_242850.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nNeeds to be rebased in any case. I might also try to make it work in *all* cases of infinite iterator (currently, I still require that there are only finitely many lists of every given length).",
    "created_at": "2015-04-13T07:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242850",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:76" align="right">comment:76</div>

Needs to be rebased in any case. I might also try to make it work in *all* cases of infinite iterator (currently, I still require that there are only finitely many lists of every given length).



---

archive/issue_comments_242851.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nI would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.",
    "created_at": "2015-04-13T07:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242851",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:77" align="right">comment:77</div>

I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.



---

archive/issue_comments_242852.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@jdemeyer](#comment:77):\n> I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.\n\n+1\n\nwhy not several iterators on the same class? (with a reasonable one by default in `__iter__`).",
    "created_at": "2015-04-13T08:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242852",
    "user": "https://github.com/videlec"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@jdemeyer](#comment:77):
> I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.

+1

why not several iterators on the same class? (with a reasonable one by default in `__iter__`).



---

archive/issue_comments_242853.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@videlec](#comment:78):\n> Replying to [@jdemeyer](#comment:77):\n> > I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.\n\n> \n> +1\n> \n> why not several iterators on the same class? (with a reasonable one by default in `__iter__`).\n\nWell, it will be something along those lines. But I haven't thought too much about the actual design.",
    "created_at": "2015-04-13T08:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242853",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@videlec](#comment:78):
> Replying to [@jdemeyer](#comment:77):
> > I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.

> 
> +1
> 
> why not several iterators on the same class? (with a reasonable one by default in `__iter__`).

Well, it will be something along those lines. But I haven't thought too much about the actual design.



---

archive/issue_comments_242854.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@nthiery](#comment:75):\n> I promised Jeroen I would rebase his code\n\nThanks for the offer, but that will not be needed (in any case, it's just merging with `-X theirs` essentially)",
    "created_at": "2015-04-13T08:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242854",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@nthiery](#comment:75):
> I promised Jeroen I would rebase his code

Thanks for the offer, but that will not be needed (in any case, it's just merging with `-X theirs` essentially)



---

archive/issue_comments_242855.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@jdemeyer](#comment:79):\n> Replying to [@videlec](#comment:78):\n> > Replying to [@jdemeyer](#comment:77):\n> > > I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.\n\n> > \n> > +1\n> > \n> > why not several iterators on the same class? (with a reasonable one by default in `__iter__`).\n\n> Well, it will be something along those lines. But I haven't thought too much about the actual design.\n\n+1 to sharing code between the classes; in fact I had put a mental\nnote on doing this when I offered to do the merge :-)\n\nHaving a class that can handle any set of constraints, even if it does\nonly containment check, would be useful. We would need this in\nparticular to properly refactor integer vectors.\n\nI am not sure whether we want a single class, or two classes:\n\n```\nclass IntegerLists:\n    __iter__ -> __iter__ on the polyhedron\n\nclass IntegerListsLex(IntegerLists):\n```\n\nWith the second one having the additional specification that the\nenumeration shall be lexicographic.\n\nThoughts?\n\nCheers,\n                              Nicolas",
    "created_at": "2015-04-13T11:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17920#issuecomment-242855",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@jdemeyer](#comment:79):
> Replying to [@videlec](#comment:78):
> > Replying to [@jdemeyer](#comment:77):
> > > I would actually like to redesign `IntegerListsLex` and `IntegerLists_polyhedron` such that they share code: they could be the same class but with a different implementation for `__iter__` and `__contains__`.

> > 
> > +1
> > 
> > why not several iterators on the same class? (with a reasonable one by default in `__iter__`).

> Well, it will be something along those lines. But I haven't thought too much about the actual design.

+1 to sharing code between the classes; in fact I had put a mental
note on doing this when I offered to do the merge :-)

Having a class that can handle any set of constraints, even if it does
only containment check, would be useful. We would need this in
particular to properly refactor integer vectors.

I am not sure whether we want a single class, or two classes:

```
class IntegerLists:
    __iter__ -> __iter__ on the polyhedron

class IntegerListsLex(IntegerLists):
```

With the second one having the additional specification that the
enumeration shall be lexicographic.

Thoughts?

Cheers,
                              Nicolas



---

archive/issue_events_255029.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:31:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17920",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17920#event-255029"
}
```
