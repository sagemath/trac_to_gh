# Issue 17659: make symbolic series subclass of Expression

archive/issues_017422.json:
```json
{
    "assignees": [],
    "body": "Making `Expression.series` create `SymbolicSeries` (a subclass of `Expression`) and moving the series code into a separate file `series.pyx` \n* reflects the fact that expressions and series don't commute\n* allows upcoming fixes that don't clutter `Expression` methods with `if ex.is_a_series():`\n* makes for better documentation via having a `Symbolic Series` ref man page\n\nIn refactoring language this is \"replace conditional with polymorphism\".\n\n#16203, #17400, and #17402 depend on this.\n\nDepends on #19948\n\nComponent: **symbolics**\n\nAuthor: **Ralf Stephan**\n\nBranch/Commit: **[`1832f4a`](https://github.com/sagemath/sagetrac-mirror/commit/1832f4a951c489fa9634beaab7708c443d181c96)**\n\nReviewer: **Vincent Delecroix**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17659_\n\n",
    "closed_at": "2016-01-30T00:11:07Z",
    "created_at": "2015-01-22T14:54:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "make symbolic series subclass of Expression",
    "type": "issue",
    "updated_at": "2016-01-30T00:11:07Z",
    "url": "https://github.com/sagemath/sage/issues/17659",
    "user": "https://github.com/rwst"
}
```
Making `Expression.series` create `SymbolicSeries` (a subclass of `Expression`) and moving the series code into a separate file `series.pyx` 
* reflects the fact that expressions and series don't commute
* allows upcoming fixes that don't clutter `Expression` methods with `if ex.is_a_series():`
* makes for better documentation via having a `Symbolic Series` ref man page

In refactoring language this is "replace conditional with polymorphism".

#16203, #17400, and #17402 depend on this.

Depends on #19948

Component: **symbolics**

Author: **Ralf Stephan**

Branch/Commit: **[`1832f4a`](https://github.com/sagemath/sagetrac-mirror/commit/1832f4a951c489fa9634beaab7708c443d181c96)**

Reviewer: **Vincent Delecroix**

_Issue created by migration from https://trac.sagemath.org/ticket/17659_





---

archive/issue_events_249296.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-22T14:54:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249296"
}
```



---

archive/issue_events_249297.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-22T14:54:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249297"
}
```



---

archive/issue_events_249298.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-22T14:54:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249298"
}
```



---

archive/issue_events_249299.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-22T14:54:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249299"
}
```



---

archive/issue_comments_238096.json:
```json
{
    "body": "Branch: **[u/rws/17659](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17659)**",
    "created_at": "2015-01-22T14:56:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238096",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/17659](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17659)**



---

archive/issue_comments_238097.json:
```json
{
    "body": "Commit: **[`a4d2084`](https://github.com/sagemath/sagetrac-mirror/commit/a4d2084a82b5f9e2ec3d43472181fccf42a19251)**",
    "created_at": "2015-01-22T14:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238097",
    "user": "https://github.com/rwst"
}
```

Commit: **[`a4d2084`](https://github.com/sagemath/sagetrac-mirror/commit/a4d2084a82b5f9e2ec3d43472181fccf42a19251)**



---

archive/issue_events_249300.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-22T14:57:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249300"
}
```



---

archive/issue_comments_238098.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4d2084a82b5f9e2ec3d43472181fccf42a19251\"><code>a4d2084</code></a></td><td><code>17659: make symbolic series subclass of Expression</code></td></tr></table>\n",
    "created_at": "2015-01-22T14:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238098",
    "user": "https://github.com/rwst"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4d2084a82b5f9e2ec3d43472181fccf42a19251"><code>a4d2084</code></a></td><td><code>17659: make symbolic series subclass of Expression</code></td></tr></table>




---

archive/issue_comments_238099.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI have nothing invested in how symbolics and series interact, but I see some immediate problems that would arise from subclassing Expression for a Series type:\n- when does a SymbolicSeries expression get created? The problem is that the SymbolicRing by itself is a rather untyped environment, so how do you know that an object needs to be made in this specialized class\n- How do SymbolicSeries in different variables interact, e.g.:\n\n```\nF = (1/(x+1))*y+sin(x)*y^2+O(y^3)\nG = (y/(y^2-2)*x + cos(y)*x^2 +O(x^3)\nF+G\n```\nIs the result a series? If so, in which variable(s)? One solution would be a SymbolicSeriesRing as a parent, which declares in what variables the series are. I suspect this would be nearly useless for whatever problem the current design tries to solve, though.",
    "created_at": "2015-01-22T20:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238099",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:3" align="right">comment:3</div>

I have nothing invested in how symbolics and series interact, but I see some immediate problems that would arise from subclassing Expression for a Series type:
- when does a SymbolicSeries expression get created? The problem is that the SymbolicRing by itself is a rather untyped environment, so how do you know that an object needs to be made in this specialized class
- How do SymbolicSeries in different variables interact, e.g.:

```
F = (1/(x+1))*y+sin(x)*y^2+O(y^3)
G = (y/(y^2-2)*x + cos(y)*x^2 +O(x^3)
F+G
```
Is the result a series? If so, in which variable(s)? One solution would be a SymbolicSeriesRing as a parent, which declares in what variables the series are. I suspect this would be nearly useless for whatever problem the current design tries to solve, though.



---

archive/issue_comments_238100.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nNils, this is not about creating a ring but simple refactoring. No behaviour change.\n\nhttp://www.refactoring.com/catalog/replaceConditionalWithPolymorphism.html\n\nReplying to [@nbruin](#comment%3A3):\n> I have nothing invested in how symbolics and series interact, but I see some immediate problems that would arise from subclassing Expression for a Series type:\n\nThese problems already exist, so nothing is new.",
    "created_at": "2015-01-23T06:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238100",
    "user": "https://github.com/rwst"
}
```

<div id="comment:4" align="right">comment:4</div>

Nils, this is not about creating a ring but simple refactoring. No behaviour change.

http://www.refactoring.com/catalog/replaceConditionalWithPolymorphism.html

Replying to [@nbruin](#comment%3A3):
> I have nothing invested in how symbolics and series interact, but I see some immediate problems that would arise from subclassing Expression for a Series type:

These problems already exist, so nothing is new.



---

archive/issue_comments_238101.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,4 @@\n * allows upcoming fixes that don't clutter `Expression` methods with `if ex.is_a_series():`\n * makes for better documentation via having a `Symbolic Series` ref man page\n \n+In refactoring language this is \"replace conditional with polymorphism\".\n``````\n",
    "created_at": "2015-01-23T06:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238101",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,4 @@
 * allows upcoming fixes that don't clutter `Expression` methods with `if ex.is_a_series():`
 * makes for better documentation via having a `Symbolic Series` ref man page
 
+In refactoring language this is "replace conditional with polymorphism".
``````




---

archive/issue_comments_238102.json:
```json
{
    "body": "Changed commit from **[`a4d2084`](https://github.com/sagemath/sagetrac-mirror/commit/a4d2084a82b5f9e2ec3d43472181fccf42a19251)** to **[`ed003f0`](https://github.com/sagemath/sagetrac-mirror/commit/ed003f04b1eefba775e841c0dbfaffdb66d0953a)**",
    "created_at": "2015-01-23T08:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238102",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a4d2084`](https://github.com/sagemath/sagetrac-mirror/commit/a4d2084a82b5f9e2ec3d43472181fccf42a19251)** to **[`ed003f0`](https://github.com/sagemath/sagetrac-mirror/commit/ed003f04b1eefba775e841c0dbfaffdb66d0953a)**



---

archive/issue_comments_238103.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed003f04b1eefba775e841c0dbfaffdb66d0953a\"><code>ed003f0</code></a></td><td><code>16203: make imports more specific to prevent import loops</code></td></tr></table>\n",
    "created_at": "2015-01-23T08:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238103",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed003f04b1eefba775e841c0dbfaffdb66d0953a"><code>ed003f0</code></a></td><td><code>16203: make imports more specific to prevent import loops</code></td></tr></table>




---

archive/issue_comments_238104.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,5 @@\n * makes for better documentation via having a `Symbolic Series` ref man page\n \n In refactoring language this is \"replace conditional with polymorphism\".\n+\n+#16302 and #17400 depend on this.\n``````\n",
    "created_at": "2015-01-23T17:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238104",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,5 @@
 * makes for better documentation via having a `Symbolic Series` ref man page
 
 In refactoring language this is "replace conditional with polymorphism".
+
+#16302 and #17400 depend on this.
``````




---

archive/issue_comments_238105.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOK, I thought that `f.is_series()` would do some non-trivial logic to see if `f` can be used as a series, but it's just exposing a flag that is held internally somewhere. You could indeed expose that information in the type instead, but with ducktyping, subtyping and sage's parent infrastructure doing so might not be as convenient as it might be in systems that are really governed by explicit types. You'd need to think if this refactoring actually will help for further development.\n\nIndeed, being a \"series\" seems a rather fickle property. It doesn't seem to be preserved under anything:\n\n```\nsage: var('x,y');\nsage: f=cos(y).series(y,10)\nsage: g=sin(x).series(x,10)\nsage: var('x,y');\nsage: f=cos(y).series(y,10)\nsage: g=sin(x).series(x,10)\nsage: f.is_series()\nTrue\nsage: (f+f).is_series()\nFalse\nsage: (-f).is_series()\nFalse\nsage: (f+g).series(x,10)\nOrder(1)\n```\nThe last result probably follows from interpreting the `Order(x^10)` term in `g` as an order term in `y`, and hence equivalent to `Order(y^0)`.",
    "created_at": "2015-01-23T20:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238105",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:8" align="right">comment:8</div>

OK, I thought that `f.is_series()` would do some non-trivial logic to see if `f` can be used as a series, but it's just exposing a flag that is held internally somewhere. You could indeed expose that information in the type instead, but with ducktyping, subtyping and sage's parent infrastructure doing so might not be as convenient as it might be in systems that are really governed by explicit types. You'd need to think if this refactoring actually will help for further development.

Indeed, being a "series" seems a rather fickle property. It doesn't seem to be preserved under anything:

```
sage: var('x,y');
sage: f=cos(y).series(y,10)
sage: g=sin(x).series(x,10)
sage: var('x,y');
sage: f=cos(y).series(y,10)
sage: g=sin(x).series(x,10)
sage: f.is_series()
True
sage: (f+f).is_series()
False
sage: (-f).is_series()
False
sage: (f+g).series(x,10)
Order(1)
```
The last result probably follows from interpreting the `Order(x^10)` term in `g` as an order term in `y`, and hence equivalent to `Order(y^0)`.



---

archive/issue_comments_238106.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@nbruin](#comment%3A8):\n> You'd need to think if this refactoring actually will help for further development.\n\nIt isolates the code and the documentation.\n> Indeed, being a \"series\" seems a rather fickle property. It doesn't seem to be preserved under anything:\n\nThere are functions in `pynac-0.3.2/ginac/pseries.cpp` to compare, add, multiply (also with constant), power (to constant). My plan is to only provide conversion to and from `PowerSeries` (#10846, #16203, #17402) and fix the worst bugs (#17400, #16213) and that's it. I'd rather improve `PowerSeries` but symbolic is what people use.",
    "created_at": "2015-01-24T07:22:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238106",
    "user": "https://github.com/rwst"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@nbruin](#comment%3A8):
> You'd need to think if this refactoring actually will help for further development.

It isolates the code and the documentation.
> Indeed, being a "series" seems a rather fickle property. It doesn't seem to be preserved under anything:

There are functions in `pynac-0.3.2/ginac/pseries.cpp` to compare, add, multiply (also with constant), power (to constant). My plan is to only provide conversion to and from `PowerSeries` (#10846, #16203, #17402) and fix the worst bugs (#17400, #16213) and that's it. I'd rather improve `PowerSeries` but symbolic is what people use.



---

archive/issue_comments_238107.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n \n In refactoring language this is \"replace conditional with polymorphism\".\n \n-#16302 and #17400 depend on this.\n+#16203 and #17400 depend on this.\n``````\n",
    "created_at": "2015-01-25T09:17:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238107",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 
 In refactoring language this is "replace conditional with polymorphism".
 
-#16302 and #17400 depend on this.
+#16203 and #17400 depend on this.
``````




---

archive/issue_comments_238108.json:
```json
{
    "body": "Changed commit from **[`ed003f0`](https://github.com/sagemath/sagetrac-mirror/commit/ed003f04b1eefba775e841c0dbfaffdb66d0953a)** to **[`f97d47d`](https://github.com/sagemath/sagetrac-mirror/commit/f97d47d646598385f8f46acea6bc04db4979cc3b)**",
    "created_at": "2015-01-25T15:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238108",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ed003f0`](https://github.com/sagemath/sagetrac-mirror/commit/ed003f04b1eefba775e841c0dbfaffdb66d0953a)** to **[`f97d47d`](https://github.com/sagemath/sagetrac-mirror/commit/f97d47d646598385f8f46acea6bc04db4979cc3b)**



---

archive/issue_comments_238109.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02885af754f56eafbac027a75856cd84c966bcd5\"><code>02885af</code></a></td><td><code>Merge branch 'develop' into t/17659/17659</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f97d47d646598385f8f46acea6bc04db4979cc3b\"><code>f97d47d</code></a></td><td><code>17659: add SymbolicSeries.default_variable() and coefficients()</code></td></tr></table>\n",
    "created_at": "2015-01-25T15:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238109",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02885af754f56eafbac027a75856cd84c966bcd5"><code>02885af</code></a></td><td><code>Merge branch 'develop' into t/17659/17659</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f97d47d646598385f8f46acea6bc04db4979cc3b"><code>f97d47d</code></a></td><td><code>17659: add SymbolicSeries.default_variable() and coefficients()</code></td></tr></table>




---

archive/issue_comments_238110.json:
```json
{
    "body": "Changed branch from **[u/rws/17659](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17659)** to **[public/17659](https://github.com/sagemath/sagetrac-mirror/tree/public/17659)**",
    "created_at": "2015-01-25T16:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238110",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/17659](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17659)** to **[public/17659](https://github.com/sagemath/sagetrac-mirror/tree/public/17659)**



---

archive/issue_comments_238111.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/319860334be59a8470b753b2fdc256bf198503e0\"><code>3198603</code></a></td><td><code>17659: factor out SymbolicSeries from Expression</code></td></tr></table>\n",
    "created_at": "2015-01-25T16:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238111",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/319860334be59a8470b753b2fdc256bf198503e0"><code>3198603</code></a></td><td><code>17659: factor out SymbolicSeries from Expression</code></td></tr></table>




---

archive/issue_comments_238112.json:
```json
{
    "body": "Changed commit from **[`f97d47d`](https://github.com/sagemath/sagetrac-mirror/commit/f97d47d646598385f8f46acea6bc04db4979cc3b)** to **[`3198603`](https://github.com/sagemath/sagetrac-mirror/commit/319860334be59a8470b753b2fdc256bf198503e0)**",
    "created_at": "2015-01-25T16:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238112",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f97d47d`](https://github.com/sagemath/sagetrac-mirror/commit/f97d47d646598385f8f46acea6bc04db4979cc3b)** to **[`3198603`](https://github.com/sagemath/sagetrac-mirror/commit/319860334be59a8470b753b2fdc256bf198503e0)**



---

archive/issue_comments_238113.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n \n In refactoring language this is \"replace conditional with polymorphism\".\n \n-#16203 and #17400 depend on this.\n+#16203, #17400, and 17402 depend on this.\n``````\n",
    "created_at": "2015-01-25T16:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238113",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 
 In refactoring language this is "replace conditional with polymorphism".
 
-#16203 and #17400 depend on this.
+#16203, #17400, and 17402 depend on this.
``````




---

archive/issue_comments_238114.json:
```json
{
    "body": "Changed commit from **[`3198603`](https://github.com/sagemath/sagetrac-mirror/commit/319860334be59a8470b753b2fdc256bf198503e0)** to **[`a67d0ce`](https://github.com/sagemath/sagetrac-mirror/commit/a67d0cee6840c90f8dc150734f5a3bd2dc732523)**",
    "created_at": "2015-03-05T14:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238114",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3198603`](https://github.com/sagemath/sagetrac-mirror/commit/319860334be59a8470b753b2fdc256bf198503e0)** to **[`a67d0ce`](https://github.com/sagemath/sagetrac-mirror/commit/a67d0cee6840c90f8dc150734f5a3bd2dc732523)**



---

archive/issue_comments_238115.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a67d0cee6840c90f8dc150734f5a3bd2dc732523\"><code>a67d0ce</code></a></td><td><code>Merge branch 'develop' into t/17659/public/17659</code></td></tr></table>\n",
    "created_at": "2015-03-05T14:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238115",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a67d0cee6840c90f8dc150734f5a3bd2dc732523"><code>a67d0ce</code></a></td><td><code>Merge branch 'develop' into t/17659/public/17659</code></td></tr></table>




---

archive/issue_comments_238116.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThere is a spurious unreprodcible doctest failure in the 6.6beta2 pachbot run.",
    "created_at": "2015-03-30T07:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238116",
    "user": "https://github.com/rwst"
}
```

<div id="comment:16" align="right">comment:16</div>

There is a spurious unreprodcible doctest failure in the 6.6beta2 pachbot run.



---

archive/issue_comments_238117.json:
```json
{
    "body": "Changed commit from **[`a67d0ce`](https://github.com/sagemath/sagetrac-mirror/commit/a67d0cee6840c90f8dc150734f5a3bd2dc732523)** to **[`cb7bbed`](https://github.com/sagemath/sagetrac-mirror/commit/cb7bbedad5c5afbb815f24c57552c997389e908e)**",
    "created_at": "2015-04-20T15:09:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238117",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a67d0ce`](https://github.com/sagemath/sagetrac-mirror/commit/a67d0cee6840c90f8dc150734f5a3bd2dc732523)** to **[`cb7bbed`](https://github.com/sagemath/sagetrac-mirror/commit/cb7bbedad5c5afbb815f24c57552c997389e908e)**



---

archive/issue_comments_238118.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7183f4dbd6aee06d0bbc249efbbbb7e2699441e6\"><code>7183f4d</code></a></td><td><code>Merge branch 'develop' into t/17659/public/17659</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb7bbedad5c5afbb815f24c57552c997389e908e\"><code>cb7bbed</code></a></td><td><code>17659: replace PY_NEW</code></td></tr></table>\n",
    "created_at": "2015-04-20T15:09:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238118",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7183f4dbd6aee06d0bbc249efbbbb7e2699441e6"><code>7183f4d</code></a></td><td><code>Merge branch 'develop' into t/17659/public/17659</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb7bbedad5c5afbb815f24c57552c997389e908e"><code>cb7bbed</code></a></td><td><code>17659: replace PY_NEW</code></td></tr></table>




---

archive/issue_comments_238119.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThis now uncovers a regression of #12255 which was not really fixed.\n\n```\nFile \"src/sage/symbolic/expression.pyx\", line 5279, in sage.symbolic.expression.Expression.coefficients\nFailed example:\n    f.coefficients(g)\nException raised:\n    ValueError: The name \"g(t)\" is not a valid Python identifier.\n```\nI will now let this ticket (and with it its dependencies) lie in limbo because, as a posting on sage-devel showed, there is no interest in symbolic series.",
    "created_at": "2015-04-20T15:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238119",
    "user": "https://github.com/rwst"
}
```

<div id="comment:18" align="right">comment:18</div>

This now uncovers a regression of #12255 which was not really fixed.

```
File "src/sage/symbolic/expression.pyx", line 5279, in sage.symbolic.expression.Expression.coefficients
Failed example:
    f.coefficients(g)
Exception raised:
    ValueError: The name "g(t)" is not a valid Python identifier.
```
I will now let this ticket (and with it its dependencies) lie in limbo because, as a posting on sage-devel showed, there is no interest in symbolic series.



---

archive/issue_events_249301.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-20T15:48:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249301"
}
```



---

archive/issue_events_249302.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-20T15:48:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249302"
}
```



---

archive/issue_events_249303.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-20T15:48:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249303"
}
```



---

archive/issue_events_249304.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-20T15:48:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249304"
}
```



---

archive/issue_comments_238120.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bdef21b714a7a7f1ed38890f492aa9463edd9d1\"><code>1bdef21</code></a></td><td><code>Merge branch 'develop' into t/17659/public/17659</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce2ebb5f8c20226fc458077df934cbcb8cddacce\"><code>ce2ebb5</code></a></td><td><code>17659: remove nonsensical code to fix doctest failure</code></td></tr></table>\n",
    "created_at": "2015-06-18T06:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238120",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bdef21b714a7a7f1ed38890f492aa9463edd9d1"><code>1bdef21</code></a></td><td><code>Merge branch 'develop' into t/17659/public/17659</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce2ebb5f8c20226fc458077df934cbcb8cddacce"><code>ce2ebb5</code></a></td><td><code>17659: remove nonsensical code to fix doctest failure</code></td></tr></table>




---

archive/issue_comments_238121.json:
```json
{
    "body": "Changed commit from **[`cb7bbed`](https://github.com/sagemath/sagetrac-mirror/commit/cb7bbedad5c5afbb815f24c57552c997389e908e)** to **[`ce2ebb5`](https://github.com/sagemath/sagetrac-mirror/commit/ce2ebb5f8c20226fc458077df934cbcb8cddacce)**",
    "created_at": "2015-06-18T06:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238121",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cb7bbed`](https://github.com/sagemath/sagetrac-mirror/commit/cb7bbedad5c5afbb815f24c57552c997389e908e)** to **[`ce2ebb5`](https://github.com/sagemath/sagetrac-mirror/commit/ce2ebb5f8c20226fc458077df934cbcb8cddacce)**



---

archive/issue_events_249305.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-06-18T06:06:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249305"
}
```



---

archive/issue_events_249306.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-06-18T06:06:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249306"
}
```



---

archive/issue_events_249307.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-06-18T06:06:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249307"
}
```



---

archive/issue_events_249308.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-06-18T06:06:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249308"
}
```



---

archive/issue_comments_238122.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e2a136fb4fb81f7f17c06b1b037de19159f462d\"><code>5e2a136</code></a></td><td><code>17659: complete doctest coverage</code></td></tr></table>\n",
    "created_at": "2015-06-18T14:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238122",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e2a136fb4fb81f7f17c06b1b037de19159f462d"><code>5e2a136</code></a></td><td><code>17659: complete doctest coverage</code></td></tr></table>




---

archive/issue_comments_238123.json:
```json
{
    "body": "Changed commit from **[`ce2ebb5`](https://github.com/sagemath/sagetrac-mirror/commit/ce2ebb5f8c20226fc458077df934cbcb8cddacce)** to **[`5e2a136`](https://github.com/sagemath/sagetrac-mirror/commit/5e2a136fb4fb81f7f17c06b1b037de19159f462d)**",
    "created_at": "2015-06-18T14:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238123",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ce2ebb5`](https://github.com/sagemath/sagetrac-mirror/commit/ce2ebb5f8c20226fc458077df934cbcb8cddacce)** to **[`5e2a136`](https://github.com/sagemath/sagetrac-mirror/commit/5e2a136fb4fb81f7f17c06b1b037de19159f462d)**



---

archive/issue_events_249309.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-11-28T13:45:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249309"
}
```



---

archive/issue_events_249310.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-11-28T13:45:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249310"
}
```



---

archive/issue_comments_238124.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2015-11-28T13:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238124",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_238125.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHello,\n\nThe ticket looks good.\n\n1. Why do you need all these include\n\n```\ninclude \"sage/ext/interrupt.pxi\"\ninclude \"sage/ext/stdsage.pxi\"\ninclude \"sage/ext/cdefs.pxi\"\ninclude \"sage/ext/python.pxi\"\n```\n  As far as I saw you are using none of them.\n\n2. You should fix your mind\n\n```\n... about 0, about `1` ...\n```\n   Either <code>\\`0\\`</code> and <code>\\`1\\`</code> or `0` and `1`.\n\n3. In the example, instead of `float(expr)` could you use `numerical_approx(expr)`?\n\n4. You should not put `self` as an argument of a method (you did it in `truncate`). Moreover, it is better to avoid `self` in the documentation. Always prefer `this expression` or `this object`.\n\n5. In `coefficients`, the argument `sparse` is not documented in the `INPUT` section\n\n6. In `coefficients`, you should replace `if sparse is True` by `if sparse`.",
    "created_at": "2015-11-28T13:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238125",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">comment:22</div>

Hello,

The ticket looks good.

1. Why do you need all these include

```
include "sage/ext/interrupt.pxi"
include "sage/ext/stdsage.pxi"
include "sage/ext/cdefs.pxi"
include "sage/ext/python.pxi"
```
  As far as I saw you are using none of them.

2. You should fix your mind

```
... about 0, about `1` ...
```
   Either <code>\`0\`</code> and <code>\`1\`</code> or `0` and `1`.

3. In the example, instead of `float(expr)` could you use `numerical_approx(expr)`?

4. You should not put `self` as an argument of a method (you did it in `truncate`). Moreover, it is better to avoid `self` in the documentation. Always prefer `this expression` or `this object`.

5. In `coefficients`, the argument `sparse` is not documented in the `INPUT` section

6. In `coefficients`, you should replace `if sparse is True` by `if sparse`.



---

archive/issue_events_249311.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-11-28T13:45:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249311"
}
```



---

archive/issue_events_249312.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-11-28T13:45:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249312"
}
```



---

archive/issue_comments_238126.json:
```json
{
    "body": "Changed branch from **[public/17659](https://github.com/sagemath/sagetrac-mirror/tree/public/17659)** to **[u/rws/17659-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17659-1)**",
    "created_at": "2015-11-28T16:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238126",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[public/17659](https://github.com/sagemath/sagetrac-mirror/tree/public/17659)** to **[u/rws/17659-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17659-1)**



---

archive/issue_comments_238127.json:
```json
{
    "body": "Changed commit from **[`5e2a136`](https://github.com/sagemath/sagetrac-mirror/commit/5e2a136fb4fb81f7f17c06b1b037de19159f462d)** to **[`fbc9775`](https://github.com/sagemath/sagetrac-mirror/commit/fbc9775937aa2078a8923de36f266081b57a94b4)**",
    "created_at": "2015-11-28T16:47:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238127",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`5e2a136`](https://github.com/sagemath/sagetrac-mirror/commit/5e2a136fb4fb81f7f17c06b1b037de19159f462d)** to **[`fbc9775`](https://github.com/sagemath/sagetrac-mirror/commit/fbc9775937aa2078a8923de36f266081b57a94b4)**



---

archive/issue_events_249313.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-11-28T16:47:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249313"
}
```



---

archive/issue_events_249314.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-11-28T16:47:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249314"
}
```



---

archive/issue_comments_238128.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThanks for looking at this.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab8b1b0d2249559280af4d9e942804fa1c4c2d3d\"><code>ab8b1b0</code></a></td><td><code>Merge branch 'public/17659' of trac.sagemath.org:sage into tmp01</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fbc9775937aa2078a8923de36f266081b57a94b4\"><code>fbc9775</code></a></td><td><code>17659: address reviewer's comments</code></td></tr></table>\n",
    "created_at": "2015-11-28T16:47:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238128",
    "user": "https://github.com/rwst"
}
```

<div id="comment:24" align="right">comment:24</div>

Thanks for looking at this.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab8b1b0d2249559280af4d9e942804fa1c4c2d3d"><code>ab8b1b0</code></a></td><td><code>Merge branch 'public/17659' of trac.sagemath.org:sage into tmp01</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fbc9775937aa2078a8923de36f266081b57a94b4"><code>fbc9775</code></a></td><td><code>17659: address reviewer's comments</code></td></tr></table>




---

archive/issue_comments_238129.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nIs the method `is_series` really usefull?",
    "created_at": "2015-11-28T16:51:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238129",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

Is the method `is_series` really usefull?



---

archive/issue_comments_238130.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@videlec](#comment%3A25):\n> Is the method `is_series` really usefull?\n\nSeries are still expressions. How would you know a symbol holding a specific expression holds a series?",
    "created_at": "2015-11-29T07:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238130",
    "user": "https://github.com/rwst"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@videlec](#comment%3A25):
> Is the method `is_series` really usefull?

Series are still expressions. How would you know a symbol holding a specific expression holds a series?



---

archive/issue_comments_238131.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b87cc1af8d453e868f78d960d92b22b03ff2ca28\"><code>b87cc1a</code></a></td><td><code>17659: make doctest clearer</code></td></tr></table>\n",
    "created_at": "2015-11-29T07:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238131",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b87cc1af8d453e868f78d960d92b22b03ff2ca28"><code>b87cc1a</code></a></td><td><code>17659: make doctest clearer</code></td></tr></table>




---

archive/issue_comments_238132.json:
```json
{
    "body": "Changed commit from **[`fbc9775`](https://github.com/sagemath/sagetrac-mirror/commit/fbc9775937aa2078a8923de36f266081b57a94b4)** to **[`b87cc1a`](https://github.com/sagemath/sagetrac-mirror/commit/b87cc1af8d453e868f78d960d92b22b03ff2ca28)**",
    "created_at": "2015-11-29T07:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238132",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fbc9775`](https://github.com/sagemath/sagetrac-mirror/commit/fbc9775937aa2078a8923de36f266081b57a94b4)** to **[`b87cc1a`](https://github.com/sagemath/sagetrac-mirror/commit/b87cc1af8d453e868f78d960d92b22b03ff2ca28)**



---

archive/issue_comments_238133.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@rwst](#comment%3A26):\n> Replying to [@videlec](#comment%3A25):\n> > Is the method `is_series` really usefull?\n\n> Series are still expressions. How would you know a symbol holding a specific expression holds a series?\n\n`instance(my_object, SymbolicSeries)`?",
    "created_at": "2015-11-29T12:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238133",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@rwst](#comment%3A26):
> Replying to [@videlec](#comment%3A25):
> > Is the method `is_series` really usefull?

> Series are still expressions. How would you know a symbol holding a specific expression holds a series?

`instance(my_object, SymbolicSeries)`?



---

archive/issue_comments_238134.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b30cf0a7607bd4847b70950daa1b0798c9b9a9ae\"><code>b30cf0a</code></a></td><td><code>17659: remove superfluous is_series()</code></td></tr></table>\n",
    "created_at": "2015-11-30T07:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238134",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b30cf0a7607bd4847b70950daa1b0798c9b9a9ae"><code>b30cf0a</code></a></td><td><code>17659: remove superfluous is_series()</code></td></tr></table>




---

archive/issue_comments_238135.json:
```json
{
    "body": "Changed commit from **[`b87cc1a`](https://github.com/sagemath/sagetrac-mirror/commit/b87cc1af8d453e868f78d960d92b22b03ff2ca28)** to **[`b30cf0a`](https://github.com/sagemath/sagetrac-mirror/commit/b30cf0a7607bd4847b70950daa1b0798c9b9a9ae)**",
    "created_at": "2015-11-30T07:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238135",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b87cc1a`](https://github.com/sagemath/sagetrac-mirror/commit/b87cc1af8d453e868f78d960d92b22b03ff2ca28)** to **[`b30cf0a`](https://github.com/sagemath/sagetrac-mirror/commit/b30cf0a7607bd4847b70950daa1b0798c9b9a9ae)**



---

archive/issue_comments_238136.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nIndeed. Anything else?",
    "created_at": "2015-11-30T07:38:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238136",
    "user": "https://github.com/rwst"
}
```

<div id="comment:30" align="right">comment:30</div>

Indeed. Anything else?



---

archive/issue_events_249315.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-11-30T09:12:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249315"
}
```



---

archive/issue_events_249316.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-11-30T09:12:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249316"
}
```



---

archive/issue_comments_238137.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@rwst](#comment%3A30):\n> Indeed. Anything else?\n\nYes: you are not allowed to remove a public function without (one year) deprecation with an error message that indicates the new procedure: http://doc.sagemath.org/html/en/developer/coding_in_python.html#deprecation",
    "created_at": "2015-11-30T09:12:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238137",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@rwst](#comment%3A30):
> Indeed. Anything else?

Yes: you are not allowed to remove a public function without (one year) deprecation with an error message that indicates the new procedure: http://doc.sagemath.org/html/en/developer/coding_in_python.html#deprecation



---

archive/issue_comments_238138.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d9e245e5675806f1b211a781ee2caa1423c6729\"><code>1d9e245</code></a></td><td><code>17659: add deprecated is_series()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7eb36ecea399f47132565939a033e7300208248b\"><code>7eb36ec</code></a></td><td><code>17659: add documentation</code></td></tr></table>\n",
    "created_at": "2015-11-30T14:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238138",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d9e245e5675806f1b211a781ee2caa1423c6729"><code>1d9e245</code></a></td><td><code>17659: add deprecated is_series()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7eb36ecea399f47132565939a033e7300208248b"><code>7eb36ec</code></a></td><td><code>17659: add documentation</code></td></tr></table>




---

archive/issue_comments_238139.json:
```json
{
    "body": "Changed commit from **[`b30cf0a`](https://github.com/sagemath/sagetrac-mirror/commit/b30cf0a7607bd4847b70950daa1b0798c9b9a9ae)** to **[`7eb36ec`](https://github.com/sagemath/sagetrac-mirror/commit/7eb36ecea399f47132565939a033e7300208248b)**",
    "created_at": "2015-11-30T14:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238139",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b30cf0a`](https://github.com/sagemath/sagetrac-mirror/commit/b30cf0a7607bd4847b70950daa1b0798c9b9a9ae)** to **[`7eb36ec`](https://github.com/sagemath/sagetrac-mirror/commit/7eb36ecea399f47132565939a033e7300208248b)**



---

archive/issue_events_249317.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-11-30T14:37:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249317"
}
```



---

archive/issue_events_249318.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-11-30T14:37:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249318"
}
```



---

archive/issue_comments_238140.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nIsn't it dangerous to expose globally `SymbolicSeries`? If people don't know about classes they do not want to see it. And if they do, they know how to import modules. You can just be explicit in the deprecation message\n\n```\nisinstance(my_expr, sage.symbolic.series.SymbolicSeries)\n```\n\n(I would also hide `Expression` from the global namespace but this does not concern this ticket.)",
    "created_at": "2015-11-30T14:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238140",
    "user": "https://github.com/videlec"
}
```

<div id="comment:34" align="right">comment:34</div>

Isn't it dangerous to expose globally `SymbolicSeries`? If people don't know about classes they do not want to see it. And if they do, they know how to import modules. You can just be explicit in the deprecation message

```
isinstance(my_expr, sage.symbolic.series.SymbolicSeries)
```

(I would also hide `Expression` from the global namespace but this does not concern this ticket.)



---

archive/issue_comments_238141.json:
```json
{
    "body": "Changed commit from **[`7eb36ec`](https://github.com/sagemath/sagetrac-mirror/commit/7eb36ecea399f47132565939a033e7300208248b)** to **[`d5cc424`](https://github.com/sagemath/sagetrac-mirror/commit/d5cc4241d638adb1329adbc737fa29591fc204b6)**",
    "created_at": "2015-11-30T16:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238141",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7eb36ec`](https://github.com/sagemath/sagetrac-mirror/commit/7eb36ecea399f47132565939a033e7300208248b)** to **[`d5cc424`](https://github.com/sagemath/sagetrac-mirror/commit/d5cc4241d638adb1329adbc737fa29591fc204b6)**



---

archive/issue_comments_238142.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5cc4241d638adb1329adbc737fa29591fc204b6\"><code>d5cc424</code></a></td><td><code>17659: address reviewers comments</code></td></tr></table>\n",
    "created_at": "2015-11-30T16:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238142",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5cc4241d638adb1329adbc737fa29591fc204b6"><code>d5cc424</code></a></td><td><code>17659: address reviewers comments</code></td></tr></table>




---

archive/issue_comments_238143.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nGood for me.",
    "created_at": "2015-11-30T18:15:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238143",
    "user": "https://github.com/videlec"
}
```

<div id="comment:36" align="right">comment:36</div>

Good for me.



---

archive/issue_comments_238144.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n \n In refactoring language this is \"replace conditional with polymorphism\".\n \n-#16203, #17400, and 17402 depend on this.\n+#16203, #17400, and #17402 depend on this.\n``````\n",
    "created_at": "2015-11-30T18:15:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238144",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 
 In refactoring language this is "replace conditional with polymorphism".
 
-#16203, #17400, and 17402 depend on this.
+#16203, #17400, and #17402 depend on this.
``````




---

archive/issue_events_249319.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-11-30T18:15:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249319"
}
```



---

archive/issue_events_249320.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-11-30T18:15:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249320"
}
```



---

archive/issue_events_249321.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-01T08:33:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249321"
}
```



---

archive/issue_events_249322.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-01T08:33:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249322"
}
```



---

archive/issue_comments_238145.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\n\n```\nsage -t --long src/sage/symbolic/series.pyx\n**********************************************************************\nFile \"src/sage/symbolic/series.pyx\", line 71, in sage.symbolic.series\nFailed example:\n    x*ex1\nExpected:\n    (1*x + (-1/6)*x^3 + Order(x^4))*x\nGot:\n    x*(1*x + (-1/6)*x^3 + Order(x^4))\n**********************************************************************\n1 item had failures:\n   1 of  23 in sage.symbolic.series\n    [42 tests, 1 failure, 0.04 s]\n```",
    "created_at": "2015-12-01T08:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238145",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:37" align="right">comment:37</div>


```
sage -t --long src/sage/symbolic/series.pyx
**********************************************************************
File "src/sage/symbolic/series.pyx", line 71, in sage.symbolic.series
Failed example:
    x*ex1
Expected:
    (1*x + (-1/6)*x^3 + Order(x^4))*x
Got:
    x*(1*x + (-1/6)*x^3 + Order(x^4))
**********************************************************************
1 item had failures:
   1 of  23 in sage.symbolic.series
    [42 tests, 1 failure, 0.04 s]
```



---

archive/issue_comments_238146.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThat happens in 6 out of 10 attempts here. Bummer.",
    "created_at": "2015-12-01T09:47:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238146",
    "user": "https://github.com/rwst"
}
```

<div id="comment:38" align="right">comment:38</div>

That happens in 6 out of 10 attempts here. Bummer.



---

archive/issue_comments_238147.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nFor the record, only when doctesting and in different processes does it fail often enough to be noticed (regardless of if testing in parallel or not). When not leaving the Sage process the results seem always the same. One possbility would be therefore an uninitialized variable in Pynac affecting the result depending on what's in the memory at Sage start.",
    "created_at": "2015-12-01T15:45:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238147",
    "user": "https://github.com/rwst"
}
```

<div id="comment:39" align="right">comment:39</div>

For the record, only when doctesting and in different processes does it fail often enough to be noticed (regardless of if testing in parallel or not). When not leaving the Sage process the results seem always the same. One possbility would be therefore an uninitialized variable in Pynac affecting the result depending on what's in the memory at Sage start.



---

archive/issue_comments_238148.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nMight also depend on Python memory locations (are the underlying ginac objects cached or not?). If its an uninitialized pynac variable then valgrind should find it.",
    "created_at": "2015-12-01T15:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238148",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:40" align="right">comment:40</div>

Might also depend on Python memory locations (are the underlying ginac objects cached or not?). If its an uninitialized pynac variable then valgrind should find it.



---

archive/issue_comments_238149.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI would have found it if it were in the upcoming pynac-0.5.2 because I used valgrind extensively there. So it might just disappear with #19312.",
    "created_at": "2015-12-01T16:02:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238149",
    "user": "https://github.com/rwst"
}
```

<div id="comment:41" align="right">comment:41</div>

I would have found it if it were in the upcoming pynac-0.5.2 because I used valgrind extensively there. So it might just disappear with #19312.



---

archive/issue_comments_238150.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nOkay, for some reason printing order here is according to hash value, and hash values of symbols are not preserved over different processes. Putting `sage: hash(x)` in an arbitrary doctest and testing multiple times shows this clearly, also in Sage-6.6. It's just that such series manipulations produced an error until recently, so the differences over time couldn't be observed.",
    "created_at": "2016-01-11T16:47:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238150",
    "user": "https://github.com/rwst"
}
```

<div id="comment:42" align="right">comment:42</div>

Okay, for some reason printing order here is according to hash value, and hash values of symbols are not preserved over different processes. Putting `sage: hash(x)` in an arbitrary doctest and testing multiple times shows this clearly, also in Sage-6.6. It's just that such series manipulations produced an error until recently, so the differences over time couldn't be observed.



---

archive/issue_comments_238151.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nSee https://github.com/pynac/pynac/issues/22\n\nThis is now fixed in pynac and depends on the upgrade to pynac-0.6.1.",
    "created_at": "2016-01-12T09:13:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238151",
    "user": "https://github.com/rwst"
}
```

<div id="comment:43" align="right">comment:43</div>

See https://github.com/pynac/pynac/issues/22

This is now fixed in pynac and depends on the upgrade to pynac-0.6.1.



---

archive/issue_comments_238152.json:
```json
{
    "body": "Dependencies: **#19448**",
    "created_at": "2016-01-24T07:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238152",
    "user": "https://github.com/rwst"
}
```

Dependencies: **#19448**



---

archive/issue_events_249323.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-01-24T07:26:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249323"
}
```



---

archive/issue_events_249324.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-01-24T07:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249324"
}
```



---

archive/issue_comments_238153.json:
```json
{
    "body": "Changed dependencies from **#19448** to **#19948**",
    "created_at": "2016-01-24T08:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238153",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **#19448** to **#19948**



---

archive/issue_events_249325.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-28T08:01:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249325"
}
```



---

archive/issue_events_249326.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-28T08:01:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249326"
}
```



---

archive/issue_comments_238154.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\n\n```\nsage -t --long src/sage/symbolic/series.pyx\n**********************************************************************\nFile \"src/sage/symbolic/series.pyx\", line 71, in sage.symbolic.series\nFailed example:\n    x*ex1\nExpected:\n    (1*x + (-1/6)*x^3 + Order(x^4))*x\nGot:\n    x*(1*x + (-1/6)*x^3 + Order(x^4))\n**********************************************************************\n1 item had failures:\n   1 of  23 in sage.symbolic.series\n    [42 tests, 1 failure, 0.04 s]\n```",
    "created_at": "2016-01-28T08:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238154",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:46" align="right">comment:46</div>


```
sage -t --long src/sage/symbolic/series.pyx
**********************************************************************
File "src/sage/symbolic/series.pyx", line 71, in sage.symbolic.series
Failed example:
    x*ex1
Expected:
    (1*x + (-1/6)*x^3 + Order(x^4))*x
Got:
    x*(1*x + (-1/6)*x^3 + Order(x^4))
**********************************************************************
1 item had failures:
   1 of  23 in sage.symbolic.series
    [42 tests, 1 failure, 0.04 s]
```



---

archive/issue_comments_238155.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nBeware the dependency!",
    "created_at": "2016-01-28T09:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238155",
    "user": "https://github.com/rwst"
}
```

<div id="comment:47" align="right">comment:47</div>

Beware the dependency!



---

archive/issue_events_249327.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-01-29T07:18:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249327"
}
```



---

archive/issue_events_249328.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-01-29T07:18:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249328"
}
```



---

archive/issue_events_249329.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-01-29T07:18:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249329"
}
```



---

archive/issue_events_249330.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-01-29T07:18:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249330"
}
```



---

archive/issue_comments_238156.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nPatchbot also shows failure",
    "created_at": "2016-01-29T13:08:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238156",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:49" align="right">comment:49</div>

Patchbot also shows failure



---

archive/issue_events_249331.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-29T13:08:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249331"
}
```



---

archive/issue_events_249332.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-29T13:08:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249332"
}
```



---

archive/issue_comments_238157.json:
```json
{
    "body": "Changed branch from **[u/rws/17659-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17659-1)** to **[u/rws/17659-2](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17659-2)**",
    "created_at": "2016-01-29T13:28:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238157",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/17659-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17659-1)** to **[u/rws/17659-2](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17659-2)**



---

archive/issue_comments_238158.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nYes, a remainder from the time before #19948.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3be6a1396d8dc4df49cd80e9d2d1888307f9dfe\"><code>c3be6a1</code></a></td><td><code>Merge branch 'u/rws/17659-1' of trac.sagemath.org:sage into tmp04</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1832f4a951c489fa9634beaab7708c443d181c96\"><code>1832f4a</code></a></td><td><code>17659: fix doctest</code></td></tr></table>\n",
    "created_at": "2016-01-29T13:29:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238158",
    "user": "https://github.com/rwst"
}
```

<div id="comment:51" align="right">comment:51</div>

Yes, a remainder from the time before #19948.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3be6a1396d8dc4df49cd80e9d2d1888307f9dfe"><code>c3be6a1</code></a></td><td><code>Merge branch 'u/rws/17659-1' of trac.sagemath.org:sage into tmp04</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1832f4a951c489fa9634beaab7708c443d181c96"><code>1832f4a</code></a></td><td><code>17659: fix doctest</code></td></tr></table>




---

archive/issue_events_249333.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-01-29T13:29:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249333"
}
```



---

archive/issue_events_249334.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-01-29T13:29:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249334"
}
```



---

archive/issue_comments_238159.json:
```json
{
    "body": "Changed commit from **[`d5cc424`](https://github.com/sagemath/sagetrac-mirror/commit/d5cc4241d638adb1329adbc737fa29591fc204b6)** to **[`1832f4a`](https://github.com/sagemath/sagetrac-mirror/commit/1832f4a951c489fa9634beaab7708c443d181c96)**",
    "created_at": "2016-01-29T13:29:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238159",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`d5cc424`](https://github.com/sagemath/sagetrac-mirror/commit/d5cc4241d638adb1329adbc737fa29591fc204b6)** to **[`1832f4a`](https://github.com/sagemath/sagetrac-mirror/commit/1832f4a951c489fa9634beaab7708c443d181c96)**



---

archive/issue_events_249335.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-29T13:33:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249335"
}
```



---

archive/issue_events_249336.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-29T13:33:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249336"
}
```



---

archive/issue_comments_238160.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nRalf, did you intend for this to wait to 7.2 or did you mean 7.1?",
    "created_at": "2016-01-29T20:33:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238160",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:53" align="right">comment:53</div>

Ralf, did you intend for this to wait to 7.2 or did you mean 7.1?



---

archive/issue_events_249337.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-30T00:11:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249337"
}
```



---

archive/issue_events_249338.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b5d4ef16fa9ede4e1eb62a9eeef82091af6d974d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-01-30T00:11:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17659#event-249338"
}
```



---

archive/issue_comments_238161.json:
```json
{
    "body": "Changed branch from **[u/rws/17659-2](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17659-2)** to **[`1832f4a`](https://github.com/sagemath/sagetrac-mirror/commit/1832f4a951c489fa9634beaab7708c443d181c96)**",
    "created_at": "2016-01-30T00:11:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17659#issuecomment-238161",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/rws/17659-2](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17659-2)** to **[`1832f4a`](https://github.com/sagemath/sagetrac-mirror/commit/1832f4a951c489fa9634beaab7708c443d181c96)**
