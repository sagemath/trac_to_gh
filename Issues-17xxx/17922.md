# Issue 17922: coefficients() function more consistent between Expressions and polynomial rings

archive/issues_017685.json:
```json
{
    "body": "The different behaviour between the two rings consists of\n1. the `coefficients(sparse=True)` (which is default) method returns a list of pairs in `SR`, and a list in `PolynomialRing`,\n2. `Expression.dict()` does not exist.\nExample:\n\n```\ny = 3*x^3 + 2*x^2 - 4*x\nprint(y)\ntype(y)\n```\nGives:\n\n```\n3*x^3 + 2*x^2 - 4*x\n<type 'sage.symbolic.expression.Expression'>\n```\nAnd\n\n```\nM = matrix(SR,[[1,2],[0,-2]])\nch = M.charpoly()\nprint(ch)\ntype(ch)\n```\ngives\n\n```\nx^2 + x - 2\n<class 'sage.rings.polynomial.polynomial_element_generic.Polynomial_generic_dense_field'>\n```\nBut:\n\n```\ny.coeffs()\n```\nreturns\n\n```\n[[\u22124,1],[2,2],[3,3]]\n```\nand\n\n```\nch.coeffs()\n```\nreturns\n\n```\n[\u22122,1,1]\n```\n\nI'd prefer if these two functions returned the same format, preferably the Expression format, as having access to the index allows list comprehension tastiness.\n\nKeywords: coeffs, rings, polynomials, expression, symbolic\n\nStatus: new\n\nIssue created by migration from https://trac.sagemath.org/ticket/17922\n\n",
    "created_at": "2015-03-10T01:18:41Z",
    "labels": [
        "component: algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "coefficients() function more consistent between Expressions and polynomial rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17922",
    "user": "https://trac.sagemath.org/admin/accounts/users/JoalHeagney"
}
```
The different behaviour between the two rings consists of
1. the `coefficients(sparse=True)` (which is default) method returns a list of pairs in `SR`, and a list in `PolynomialRing`,
2. `Expression.dict()` does not exist.
Example:

```
y = 3*x^3 + 2*x^2 - 4*x
print(y)
type(y)
```
Gives:

```
3*x^3 + 2*x^2 - 4*x
<type 'sage.symbolic.expression.Expression'>
```
And

```
M = matrix(SR,[[1,2],[0,-2]])
ch = M.charpoly()
print(ch)
type(ch)
```
gives

```
x^2 + x - 2
<class 'sage.rings.polynomial.polynomial_element_generic.Polynomial_generic_dense_field'>
```
But:

```
y.coeffs()
```
returns

```
[[−4,1],[2,2],[3,3]]
```
and

```
ch.coeffs()
```
returns

```
[−2,1,1]
```

I'd prefer if these two functions returned the same format, preferably the Expression format, as having access to the index allows list comprehension tastiness.

Keywords: coeffs, rings, polynomials, expression, symbolic

Status: new

Issue created by migration from https://trac.sagemath.org/ticket/17922





---

archive/issue_comments_251539.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-03-10T01:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17922",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17922#issuecomment-251539",
    "user": "https://trac.sagemath.org/admin/accounts/users/JoalHeagney"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_251540.json:
```json
{
    "body": "Changing keywords from \"coeffs\" to \"coeffs, rings, polynomials, expression, symbolic\".",
    "created_at": "2015-03-10T01:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17922",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17922#issuecomment-251540",
    "user": "https://trac.sagemath.org/admin/accounts/users/JoalHeagney"
}
```

Changing keywords from "coeffs" to "coeffs, rings, polynomials, expression, symbolic".



---

archive/issue_comments_251541.json:
```json
{
    "body": "<a id='comment:2'></a>Have list comprehension tastiness with `dict`:\n\n```\nsage: ch.dict().values()\n[-2, 1, 1]\n```\nIn #17518 we started being more consistent by deprecating `coeffs`.",
    "created_at": "2015-03-11T15:16:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17922",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17922#issuecomment-251541",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>Have list comprehension tastiness with `dict`:

```
sage: ch.dict().values()
[-2, 1, 1]
```
In #17518 we started being more consistent by deprecating `coeffs`.



---

archive/issue_comments_251542.json:
```json
{
    "body": "<a id='comment:3'></a>That works for polynomial rings, are there plans to add that to sage.symbolic.expression.Expressions?",
    "created_at": "2015-03-11T21:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17922",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17922#issuecomment-251542",
    "user": "https://trac.sagemath.org/admin/accounts/users/JoalHeagney"
}
```

<a id='comment:3'></a>That works for polynomial rings, are there plans to add that to sage.symbolic.expression.Expressions?



---

archive/issue_comments_251543.json:
```json
{
    "body": "<a id='comment:4'></a>Clarified the ticket description.",
    "created_at": "2015-03-12T07:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17922",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17922#issuecomment-251543",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>Clarified the ticket description.



---

archive/issue_comments_251544.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,8 @@\n+The different behaviour between the two rings consists of\n+1. the \\`coefficients(sparse=True)\\` (which is default) method returns a list of pairs in \\`SR\\`, and a list in \\`PolynomialRing\\`,\n+2. \\`Expression.dict()\\` does not exist.\n+Example:\n+\n \\`\\`\\`\n y = 3*x^3 + 2*x^2 - 4*x\n print(y)\n@@ -46,8 +51,6 @@\n \n I'd prefer if these two functions returned the same format, preferably the Expression format, as having access to the index allows list comprehension tastiness.\n \n-Keywords: coeffs\n-\n Comment: 1\n \n Type: PLEASE CHANGE\n```\n",
    "created_at": "2015-03-12T07:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17922",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17922#issuecomment-251544",
    "user": "https://github.com/rwst"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,8 @@
+The different behaviour between the two rings consists of
+1. the \`coefficients(sparse=True)\` (which is default) method returns a list of pairs in \`SR\`, and a list in \`PolynomialRing\`,
+2. \`Expression.dict()\` does not exist.
+Example:
+
 \`\`\`
 y = 3*x^3 + 2*x^2 - 4*x
 print(y)
@@ -46,8 +51,6 @@
 
 I'd prefer if these two functions returned the same format, preferably the Expression format, as having access to the index allows list comprehension tastiness.
 
-Keywords: coeffs
-
 Comment: 1
 
 Type: PLEASE CHANGE
```




---

archive/issue_comments_251545.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:3 JoalHeagney]:\n> That works for polynomial rings, are there plans to add that to sage.symbolic.expression.Expressions?\n\nThat would not be difficult (in comparison). If you expect it then to behave identically you will be disappointed however, because symbolics have no default generator (although `Expression.coefficients()` has the lexically first occuring var hard-wired when no varname is given).\n\n```\nsage: var('a,b,c')\n(a, b, c)\nsage: (a+2*a^2+3*b).list()\n[3*b, 1, 2]\nsage: (3*b+a+2*a^2).list()\n[3*b, 1, 2]\nsage: (3*b+c+2*c^2).list()\n[2*c^2 + c, 3]\n```\nso you could never have true polymorphism.",
    "created_at": "2015-03-12T07:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17922",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17922#issuecomment-251545",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>Replying to [comment:3 JoalHeagney]:
> That works for polynomial rings, are there plans to add that to sage.symbolic.expression.Expressions?

That would not be difficult (in comparison). If you expect it then to behave identically you will be disappointed however, because symbolics have no default generator (although `Expression.coefficients()` has the lexically first occuring var hard-wired when no varname is given).

```
sage: var('a,b,c')
(a, b, c)
sage: (a+2*a^2+3*b).list()
[3*b, 1, 2]
sage: (3*b+a+2*a^2).list()
[3*b, 1, 2]
sage: (3*b+c+2*c^2).list()
[2*c^2 + c, 3]
```
so you could never have true polymorphism.
