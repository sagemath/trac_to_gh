# Issue 17998: is_dominant methods of weight lattices should ignore vectors orthogonal to coroots

archive/issues_017761.json:
```json
{
    "body": "Weight lattices have definitions in `root_lattice_realizations.py` and in `weight_space.py`. Furthermore there is a separate function called `is_dominant_weight` defined in root_lattice_realizations. There is a reason for having separate implementations: the realization in `weight_space.py` (when available) is more efficient since it avoids taking scalar products.\n\nAdding a vector that is orthogonal to the simple coroots should not affect whether a weight is dominant.   Indeed, in //Infinite-dimensional Lie algebras// Kac defines dominant to mean having positive inner product with the positive coroots, and there doesn't seem to be any other useful convention. But the method in `weight_space.py` just looks at the coefficients to see if they are positive. But this method only works if the basis consists of the fundamental weights. In an extended affine weight lattice the basis consists of the fundamental weights plus the null root 'delta'. The coefficient of  'delta' should be ignored, so currently this method can give wrong results.\n\n```\nsage: P=RootSystem(['A',2,1]).weight_lattice(extended=true)\nsage: delta=P.null_root(); delta\ndelta\nsage: Lam = P.fundamental_weights()\nsage: Lam[0].is_dominant()\nTrue\nsage: (Lam[0]-delta).is_dominant()\nFalse\n```\n\nConsequently we need to revise a remark in the docstring for is_dominant_weight, and refine the definition in `weight_lattice.py` to ignore the coefficient of `'delta'` in the method in `weight_space.py`.\n\nAssignee: @dwbump\n\nCC:  sage-combinat @anneschilling @nthiery mshimo @tscrim\n\nKeywords: dominant, days64\n\nReviewer: Anne Schilling\n\nAuthor: Daniel Bump\n\nBranch: 502db4d5eb01044e5a00b357bbbc20bbeb7ee965\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17998\n\n",
    "closed_at": "2015-03-19T23:39:45Z",
    "created_at": "2015-03-19T15:06:19Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "is_dominant methods of weight lattices should ignore vectors orthogonal to coroots",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17998",
    "user": "https://github.com/dwbump"
}
```
Weight lattices have definitions in `root_lattice_realizations.py` and in `weight_space.py`. Furthermore there is a separate function called `is_dominant_weight` defined in root_lattice_realizations. There is a reason for having separate implementations: the realization in `weight_space.py` (when available) is more efficient since it avoids taking scalar products.

Adding a vector that is orthogonal to the simple coroots should not affect whether a weight is dominant.   Indeed, in //Infinite-dimensional Lie algebras// Kac defines dominant to mean having positive inner product with the positive coroots, and there doesn't seem to be any other useful convention. But the method in `weight_space.py` just looks at the coefficients to see if they are positive. But this method only works if the basis consists of the fundamental weights. In an extended affine weight lattice the basis consists of the fundamental weights plus the null root 'delta'. The coefficient of  'delta' should be ignored, so currently this method can give wrong results.

```
sage: P=RootSystem(['A',2,1]).weight_lattice(extended=true)
sage: delta=P.null_root(); delta
delta
sage: Lam = P.fundamental_weights()
sage: Lam[0].is_dominant()
True
sage: (Lam[0]-delta).is_dominant()
False
```

Consequently we need to revise a remark in the docstring for is_dominant_weight, and refine the definition in `weight_lattice.py` to ignore the coefficient of `'delta'` in the method in `weight_space.py`.

Assignee: @dwbump

CC:  sage-combinat @anneschilling @nthiery mshimo @tscrim

Keywords: dominant, days64

Reviewer: Anne Schilling

Author: Daniel Bump

Branch: 502db4d5eb01044e5a00b357bbbc20bbeb7ee965

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17998





---

archive/issue_comments_253095.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n-Weight lattices have definitions in \\`root_lattice_realizations.py\\` and in \\`weight_space.py\\`. Adding a vector that is orthogonal to the simple coroots should not affect whether a weight is dominant.  Furthermore there is a separate function called is_dominant_weight defined in root_lattice_realizations. There are reasons for having separate implementations: the realization in weight_space.py is more efficient since it avoids taking scalar products. Instead, it just looks at the coefficients to see if they are positive. But this method only works if the basis consists of the fundamental weights. Moreover in an extended affine weight lattice the basis consists of the fundamental weights plus the null root 'delta'. The coefficient of  'delta' should be ignored, so currently this method can give wrong results.\n+Weight lattices have definitions in \\`root_lattice_realizations.py\\` and in \\`weight_space.py\\`. Furthermore there is a separate function called \\`is_dominant_weight\\` defined in root_lattice_realizations. There is a reason for having separate implementations: the realization in \\`weight_space.py\\` (when available) is more efficient since it avoids taking scalar products.\n+\n+Adding a vector that is orthogonal to the simple coroots should not affect whether a weight is dominant.   Indeed, in //Infinite-dimensional Lie algebras// Kac defines dominant to mean having positive inner product with the positive coroots, and there doesn't seem to be any other useful convention. But the method in \\`weight_space.py\\` just looks at the coefficients to see if they are positive. But this method only works if the basis consists of the fundamental weights. In an extended affine weight lattice the basis consists of the fundamental weights plus the null root 'delta'. The coefficient of  'delta' should be ignored, so currently this method can give wrong results.\n \n \\`\\`\\`\n sage: P=RootSystem(['A',2,1]).weight_lattice(extended=true)\n@@ -11,7 +13,7 @@\n False\n \\`\\`\\`\n \n-Consequently we need to revise a remark in the docstring for is_dominant_weight, and refine the definition in \\`weight_lattice.py\\` to ignore the coefficient of \\`'delta'\\`\n+Consequently we need to revise a remark in the docstring for is_dominant_weight, and refine the definition in \\`weight_lattice.py\\` to ignore the coefficient of \\`'delta'\\` in the method in \\`weight_space.py\\`.\n \n Comment: 1\n \n```\n",
    "created_at": "2015-03-19T15:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17998#issuecomment-253095",
    "user": "https://github.com/dwbump"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
-Weight lattices have definitions in \`root_lattice_realizations.py\` and in \`weight_space.py\`. Adding a vector that is orthogonal to the simple coroots should not affect whether a weight is dominant.  Furthermore there is a separate function called is_dominant_weight defined in root_lattice_realizations. There are reasons for having separate implementations: the realization in weight_space.py is more efficient since it avoids taking scalar products. Instead, it just looks at the coefficients to see if they are positive. But this method only works if the basis consists of the fundamental weights. Moreover in an extended affine weight lattice the basis consists of the fundamental weights plus the null root 'delta'. The coefficient of  'delta' should be ignored, so currently this method can give wrong results.
+Weight lattices have definitions in \`root_lattice_realizations.py\` and in \`weight_space.py\`. Furthermore there is a separate function called \`is_dominant_weight\` defined in root_lattice_realizations. There is a reason for having separate implementations: the realization in \`weight_space.py\` (when available) is more efficient since it avoids taking scalar products.
+
+Adding a vector that is orthogonal to the simple coroots should not affect whether a weight is dominant.   Indeed, in //Infinite-dimensional Lie algebras// Kac defines dominant to mean having positive inner product with the positive coroots, and there doesn't seem to be any other useful convention. But the method in \`weight_space.py\` just looks at the coefficients to see if they are positive. But this method only works if the basis consists of the fundamental weights. In an extended affine weight lattice the basis consists of the fundamental weights plus the null root 'delta'. The coefficient of  'delta' should be ignored, so currently this method can give wrong results.
 
 \`\`\`
 sage: P=RootSystem(['A',2,1]).weight_lattice(extended=true)
@@ -11,7 +13,7 @@
 False
 \`\`\`
 
-Consequently we need to revise a remark in the docstring for is_dominant_weight, and refine the definition in \`weight_lattice.py\` to ignore the coefficient of \`'delta'\`
+Consequently we need to revise a remark in the docstring for is_dominant_weight, and refine the definition in \`weight_lattice.py\` to ignore the coefficient of \`'delta'\` in the method in \`weight_space.py\`.
 
 Comment: 1
 
```




---

archive/issue_comments_253096.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2015-03-19T17:01:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17998#issuecomment-253096",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_253097.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-19T17:09:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17998#issuecomment-253097",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_253098.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-19T18:02:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17998#issuecomment-253098",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_253099.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-19T18:13:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17998#issuecomment-253099",
    "user": "https://github.com/dwbump"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_253100.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-19T19:14:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17998#issuecomment-253100",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_253101.json:
```json
{
    "body": "<a id='comment:8'></a>Looks good to me! Perhaps a reference to Kac should be added?",
    "created_at": "2015-03-19T19:20:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17998#issuecomment-253101",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:8'></a>Looks good to me! Perhaps a reference to Kac should be added?



---

archive/issue_comments_253102.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-19T19:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17998#issuecomment-253102",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_253103.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-19T19:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17998#issuecomment-253103",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_051139.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-19T23:39:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17998",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17998#event-51139"
}
```



---

archive/issue_comments_253104.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-19T23:39:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17998#issuecomment-253104",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
