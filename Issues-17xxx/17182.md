# Issue 17182: random spanning trees using the Aldous-Broder algorithm

archive/issues_016945.json:
```json
{
    "body": "This implements the Aldous-Broder algorithm that uses a random walk to find a random spanning tree (with uniform distribution).\n\n**CC:**  @nathanncohen\n\n**Keywords:** random tree\n\n**Branch/Commit:** [e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2](https://github.com/sagemath/sagetrac-mirror/commit/e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2)\n\n**Reviewer:** Nathann Cohen\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/17182\n\n",
    "closed_at": "2014-10-23T11:17:23Z",
    "created_at": "2014-10-20T12:43:58Z",
    "labels": [
        "component: graph theory",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "random spanning trees using the Aldous-Broder algorithm",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17182",
    "user": "https://github.com/fchapoton"
}
```
This implements the Aldous-Broder algorithm that uses a random walk to find a random spanning tree (with uniform distribution).

**CC:**  @nathanncohen

**Keywords:** random tree

**Branch/Commit:** [e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2](https://github.com/sagemath/sagetrac-mirror/commit/e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2)

**Reviewer:** Nathann Cohen

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/17182





---

archive/issue_comments_278251.json:
```json
{
    "body": "**Branch:** [u/chapoton/17182](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17182)",
    "created_at": "2014-10-20T12:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278251",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/17182](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17182)



---

archive/issue_comments_278252.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2014-10-20T12:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278252",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_278253.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b2a308e2943c4f13c07e4e8d9da12e2ff2b3805\">3b2a308</a></td><td><code>trac #17182 random spanning trees</code></td></tr></table>\n",
    "created_at": "2014-10-20T12:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278253",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b2a308e2943c4f13c07e4e8d9da12e2ff2b3805">3b2a308</a></td><td><code>trac #17182 random spanning trees</code></td></tr></table>




---

archive/issue_comments_278254.json:
```json
{
    "body": "**Commit:** [3b2a308e2943c4f13c07e4e8d9da12e2ff2b3805](https://github.com/sagemath/sagetrac-mirror/commit/3b2a308e2943c4f13c07e4e8d9da12e2ff2b3805)",
    "created_at": "2014-10-20T12:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278254",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [3b2a308e2943c4f13c07e4e8d9da12e2ff2b3805](https://github.com/sagemath/sagetrac-mirror/commit/3b2a308e2943c4f13c07e4e8d9da12e2ff2b3805)



---

archive/issue_comments_278255.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis should probably go in `graph/spanning_trees.py`\n\nNathann",
    "created_at": "2014-10-20T12:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278255",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>
This should probably go in `graph/spanning_trees.py`

Nathann



---

archive/issue_comments_278256.json:
```json
{
    "body": "**Changing commit** from \"[3b2a308e2943c4f13c07e4e8d9da12e2ff2b3805](https://github.com/sagemath/sagetrac-mirror/commit/3b2a308e2943c4f13c07e4e8d9da12e2ff2b3805)\" to \"[06d62687aeca758eced0d3605c767cfac5dd985d](https://github.com/sagemath/sagetrac-mirror/commit/06d62687aeca758eced0d3605c767cfac5dd985d)\".",
    "created_at": "2014-10-20T13:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278256",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3b2a308e2943c4f13c07e4e8d9da12e2ff2b3805](https://github.com/sagemath/sagetrac-mirror/commit/3b2a308e2943c4f13c07e4e8d9da12e2ff2b3805)" to "[06d62687aeca758eced0d3605c767cfac5dd985d](https://github.com/sagemath/sagetrac-mirror/commit/06d62687aeca758eced0d3605c767cfac5dd985d)".



---

archive/issue_comments_278257.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06d62687aeca758eced0d3605c767cfac5dd985d\">06d6268</a></td><td><code>trac #17182 little more doc, small fixes</code></td></tr></table>\n",
    "created_at": "2014-10-20T13:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278257",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06d62687aeca758eced0d3605c767cfac5dd985d">06d6268</a></td><td><code>trac #17182 little more doc, small fixes</code></td></tr></table>




---

archive/issue_comments_278258.json:
```json
{
    "body": "<a id='comment:4'></a>\n1) Should be in `spanning_trees.py`\n\n2) Fails on the empty graph\n\n3) Infinite loop on disconnected graphs\n\n4) `found` should be a set, not a list\n\nNathann",
    "created_at": "2014-10-20T13:46:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278258",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
1) Should be in `spanning_trees.py`

2) Fails on the empty graph

3) Infinite loop on disconnected graphs

4) `found` should be a set, not a list

Nathann



---

archive/issue_comments_278259.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2014-10-20T13:46:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278259",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_278260.json:
```json
{
    "body": "<a id='comment:5'></a>\nFurthermore, all explanations of the `Aldous-Broder` algorithm that I find mention taking the initial vertex at random, while you always take the first one.\n\nNathann",
    "created_at": "2014-10-20T13:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278260",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Furthermore, all explanations of the `Aldous-Broder` algorithm that I find mention taking the initial vertex at random, while you always take the first one.

Nathann



---

archive/issue_comments_278261.json:
```json
{
    "body": "<a id='comment:6'></a>\nAny vertex does the job, see page 2 of https://www.cs.cmu.edu/~15859n/RelatedWork/Broder-GenRanSpanningTrees.pdf\n\nI am working now on the move.\n\nShould I use `set`, `Set` or `frozenset` ?",
    "created_at": "2014-10-20T14:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278261",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
Any vertex does the job, see page 2 of https://www.cs.cmu.edu/~15859n/RelatedWork/Broder-GenRanSpanningTrees.pdf

I am working now on the move.

Should I use `set`, `Set` or `frozenset` ?



---

archive/issue_comments_278262.json:
```json
{
    "body": "<a id='comment:7'></a>\nYo !\n\n> Any vertex does the job, see page 2 of https://www.cs.cmu.edu/~15859n/RelatedWork/Broder-GenRanSpanningTrees.pdf\n\n\nOkay.\n\n> I am working now on the move.\n\n\nOkay.\n\n> Should I use `set`, `Set` or `frozenset` ?\n\n\n`set` is fine. Never use `Set` for anything else than teaching purposes, and `frozenset` makes no sense here as you want to add elements to the set.\n\nNathann",
    "created_at": "2014-10-20T14:36:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278262",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>
Yo !

> Any vertex does the job, see page 2 of https://www.cs.cmu.edu/~15859n/RelatedWork/Broder-GenRanSpanningTrees.pdf


Okay.

> I am working now on the move.


Okay.

> Should I use `set`, `Set` or `frozenset` ?


`set` is fine. Never use `Set` for anything else than teaching purposes, and `frozenset` makes no sense here as you want to add elements to the set.

Nathann



---

archive/issue_comments_278263.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c382750f9cd0d08f492d9aed2f35b2410d1f5f24\">c382750</a></td><td><code>trac #17182 reviewer's remarks (all but one)</code></td></tr></table>\n",
    "created_at": "2014-10-20T15:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278263",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c382750f9cd0d08f492d9aed2f35b2410d1f5f24">c382750</a></td><td><code>trac #17182 reviewer's remarks (all but one)</code></td></tr></table>




---

archive/issue_comments_278264.json:
```json
{
    "body": "**Changing commit** from \"[06d62687aeca758eced0d3605c767cfac5dd985d](https://github.com/sagemath/sagetrac-mirror/commit/06d62687aeca758eced0d3605c767cfac5dd985d)\" to \"[c382750f9cd0d08f492d9aed2f35b2410d1f5f24](https://github.com/sagemath/sagetrac-mirror/commit/c382750f9cd0d08f492d9aed2f35b2410d1f5f24)\".",
    "created_at": "2014-10-20T15:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278264",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[06d62687aeca758eced0d3605c767cfac5dd985d](https://github.com/sagemath/sagetrac-mirror/commit/06d62687aeca758eced0d3605c767cfac5dd985d)" to "[c382750f9cd0d08f492d9aed2f35b2410d1f5f24](https://github.com/sagemath/sagetrac-mirror/commit/c382750f9cd0d08f492d9aed2f35b2410d1f5f24)".



---

archive/issue_comments_278265.json:
```json
{
    "body": "<a id='comment:9'></a>\nI have a problem with the empty graph, but I do not see what is wrong with my code.\n\nAnother question : do you think I should raise an exception for the empty graph ? Does it have one spanning tree or none ? I would go for none.\n\nI have also corrected Graph().spanning_trees(), that was failing also. It now says that the empty graph has no spanning tree, which is coherent with spanning_trees_count.",
    "created_at": "2014-10-20T15:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278265",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>
I have a problem with the empty graph, but I do not see what is wrong with my code.

Another question : do you think I should raise an exception for the empty graph ? Does it have one spanning tree or none ? I would go for none.

I have also corrected Graph().spanning_trees(), that was failing also. It now says that the empty graph has no spanning tree, which is coherent with spanning_trees_count.



---

archive/issue_comments_278266.json:
```json
{
    "body": "**Changing commit** from \"[c382750f9cd0d08f492d9aed2f35b2410d1f5f24](https://github.com/sagemath/sagetrac-mirror/commit/c382750f9cd0d08f492d9aed2f35b2410d1f5f24)\" to \"[9f04077fa49968c80334d1c2fc58ce46d93febfd](https://github.com/sagemath/sagetrac-mirror/commit/9f04077fa49968c80334d1c2fc58ce46d93febfd)\".",
    "created_at": "2014-10-20T16:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278266",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c382750f9cd0d08f492d9aed2f35b2410d1f5f24](https://github.com/sagemath/sagetrac-mirror/commit/c382750f9cd0d08f492d9aed2f35b2410d1f5f24)" to "[9f04077fa49968c80334d1c2fc58ce46d93febfd](https://github.com/sagemath/sagetrac-mirror/commit/9f04077fa49968c80334d1c2fc58ce46d93febfd)".



---

archive/issue_comments_278267.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f04077fa49968c80334d1c2fc58ce46d93febfd\">9f04077</a></td><td><code>trac #17182 solving the empty graph issue</code></td></tr></table>\n",
    "created_at": "2014-10-20T16:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278267",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f04077fa49968c80334d1c2fc58ce46d93febfd">9f04077</a></td><td><code>trac #17182 solving the empty graph issue</code></td></tr></table>




---

archive/issue_comments_278268.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2014-10-20T16:11:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278268",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_278269.json:
```json
{
    "body": "**Changing commit** from \"[9f04077fa49968c80334d1c2fc58ce46d93febfd](https://github.com/sagemath/sagetrac-mirror/commit/9f04077fa49968c80334d1c2fc58ce46d93febfd)\" to \"[e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2](https://github.com/sagemath/sagetrac-mirror/commit/e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2)\".",
    "created_at": "2014-10-21T14:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278269",
    "user": "https://github.com/nathanncohen"
}
```

**Changing commit** from "[9f04077fa49968c80334d1c2fc58ce46d93febfd](https://github.com/sagemath/sagetrac-mirror/commit/9f04077fa49968c80334d1c2fc58ce46d93febfd)" to "[e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2](https://github.com/sagemath/sagetrac-mirror/commit/e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2)".



---

archive/issue_comments_278270.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/17182](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17182)\" to \"[public/17182](https://github.com/sagemath/sagetrac-mirror/tree/public/17182)\".",
    "created_at": "2014-10-21T14:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278270",
    "user": "https://github.com/nathanncohen"
}
```

**Changing branch** from "[u/chapoton/17182](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17182)" to "[public/17182](https://github.com/sagemath/sagetrac-mirror/tree/public/17182)".



---

archive/issue_comments_278271.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2014-10-21T14:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278271",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_comments_278272.json:
```json
{
    "body": "<a id='comment:12'></a>\nHello,\n\nThe doc did not compile. I fixed it. A reference was defined twice (once in `spanning_trees.pyx`, another time in the copy of that function as it is imported in `graph.py`).\n\nThe 'see also' should appear a bit earlier, especially when there is a 'test' section. Otherwise nobody sees it.\n\nI flagged the spanning tree in the doctest as `#random`, because the vertex ordering can depend on the architecture.\n\nIf you agree with the commit I added, please set this ticket to `positive_review`\n\nNathann\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2\">e0345a9</a></td><td><code>trac #17182: review</code></td></tr></table>\n",
    "created_at": "2014-10-21T14:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278272",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>
Hello,

The doc did not compile. I fixed it. A reference was defined twice (once in `spanning_trees.pyx`, another time in the copy of that function as it is imported in `graph.py`).

The 'see also' should appear a bit earlier, especially when there is a 'test' section. Otherwise nobody sees it.

I flagged the spanning tree in the doctest as `#random`, because the vertex ordering can depend on the architecture.

If you agree with the commit I added, please set this ticket to `positive_review`

Nathann

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2">e0345a9</a></td><td><code>trac #17182: review</code></td></tr></table>




---

archive/issue_comments_278273.json:
```json
{
    "body": "<a id='comment:13'></a>\nThank you Nathann !",
    "created_at": "2014-10-21T14:43:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278273",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>
Thank you Nathann !



---

archive/issue_comments_278274.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2014-10-21T14:43:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278274",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_278275.json:
```json
{
    "body": "**Changing branch** from \"[public/17182](https://github.com/sagemath/sagetrac-mirror/tree/public/17182)\" to \"[e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2](https://github.com/sagemath/sagetrac-mirror/commit/e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2)\".",
    "created_at": "2014-10-23T11:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17182#issuecomment-278275",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/17182](https://github.com/sagemath/sagetrac-mirror/tree/public/17182)" to "[e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2](https://github.com/sagemath/sagetrac-mirror/commit/e0345a9ec9b5e64e1d9f0d66eff279bfd5ea61d2)".



---

archive/issue_events_056230.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-23T11:17:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17182",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17182#event-56230"
}
```
