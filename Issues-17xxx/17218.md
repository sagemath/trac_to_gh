# Issue 17218: Minimal bindings for acb's in the optional arb package

archive/issues_016981.json:
```json
{
    "body": "As a follow-up to #17194, where the `arb` type of the Arb library has been wrapped, this wraps the `acb` type for complex balls.\n\nAs in #17194, the bindings are very minimal, just to have the type, the parent and conversions.\n\nCC:  alina @fredrik-johansson ktkohl skropf @jdemeyer @mezzarobba\n\nKeywords: arb, Acb, complex intervals\n\nReviewer: Vincent Delecroix, Marc Mezzarobba\n\nAuthor: Clemens Heuberger\n\nBranch: b666ea200def5384fa56ae9266ceeed5586fc86d\n\nDependencies: #17194, #16747\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17218\n\n",
    "closed_at": "2015-05-23T22:59:57Z",
    "created_at": "2014-10-25T08:18:00Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Minimal bindings for acb's in the optional arb package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17218",
    "user": "https://github.com/cheuberg"
}
```
As a follow-up to #17194, where the `arb` type of the Arb library has been wrapped, this wraps the `acb` type for complex balls.

As in #17194, the bindings are very minimal, just to have the type, the parent and conversions.

CC:  alina @fredrik-johansson ktkohl skropf @jdemeyer @mezzarobba

Keywords: arb, Acb, complex intervals

Reviewer: Vincent Delecroix, Marc Mezzarobba

Author: Clemens Heuberger

Branch: b666ea200def5384fa56ae9266ceeed5586fc86d

Dependencies: #17194, #16747

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17218





---

archive/issue_comments_239541.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-10-25T08:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239541",
    "user": "https://github.com/cheuberg"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_239542.json:
```json
{
    "body": "<a id='comment:1'></a>Last 10 new commits:",
    "created_at": "2014-10-25T08:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239542",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:1'></a>Last 10 new commits:



---

archive/issue_comments_239543.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-25T14:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239543",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239544.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-06T09:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239544",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_239545.json:
```json
{
    "body": "<a id='comment:3'></a>The modifications made in #17194 will have to be made here, too, once #17194 is in final form.",
    "created_at": "2015-02-06T09:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239545",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:3'></a>The modifications made in #17194 will have to be made here, too, once #17194 is in final form.



---

archive/issue_comments_239546.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-02-20T18:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_239547.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:3 cheuberg]:\n> The modifications made in #17194 will have to be made here, too, once #17194 is in final form.\n\nDone.",
    "created_at": "2015-02-20T18:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239547",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:5'></a>Replying to [comment:3 cheuberg]:
> The modifications made in #17194 will have to be made here, too, once #17194 is in final form.

Done.



---

archive/issue_comments_239548.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-02-20T18:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239548",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_239549.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n As a follow-up to #17194, where the `arb` type of the Arb library has been wrapped, this wraps the `acb` type for complex balls.\n \n-As in #17194, the bindings are very minimal, just to have the type and conversions. Again, the precision is stored in `Acb` directly as this does not yet live in sage's coercion world and therefore having a parent seems to be overkill for now.\n+As in #17194, the bindings are very minimal, just to have the type, the parent and conversions.\n \n Author: Clemens Heuberger\n \n```\n",
    "created_at": "2015-02-20T18:31:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239549",
    "user": "https://github.com/cheuberg"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,6 @@
 As a follow-up to #17194, where the `arb` type of the Arb library has been wrapped, this wraps the `acb` type for complex balls.
 
-As in #17194, the bindings are very minimal, just to have the type and conversions. Again, the precision is stored in `Acb` directly as this does not yet live in sage's coercion world and therefore having a parent seems to be overkill for now.
+As in #17194, the bindings are very minimal, just to have the type, the parent and conversions.
 
 Author: Clemens Heuberger
 
```




---

archive/issue_comments_239550.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-24T18:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239550",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239551.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-28T08:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239551",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239552.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-14T07:05:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239552",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239553.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-14T07:19:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239553",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239554.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-17T06:10:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239554",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239555.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-07T04:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239556.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-05-12T08:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239556",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_239557.json:
```json
{
    "body": "<a id='comment:14'></a>Hello,\n\n1. In the constructor\n\n```\nsuper(ComplexBall, self).__init__(parent)\n```\n  is much slower than\n\n```\nElement.__init__(self, parent)\n```\n\n2. Do you really need to make a subtraction to check if two complex balls are different?!\n\n3. Why did you changed the convention for equality? We have\n\n```\nsage: a = RIF(1,2)\nsage: a == a\nFalse\n```\n\nVincent",
    "created_at": "2015-05-12T08:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239557",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'></a>Hello,

1. In the constructor

```
super(ComplexBall, self).__init__(parent)
```
  is much slower than

```
Element.__init__(self, parent)
```

2. Do you really need to make a subtraction to check if two complex balls are different?!

3. Why did you changed the convention for equality? We have

```
sage: a = RIF(1,2)
sage: a == a
False
```

Vincent



---

archive/issue_comments_239558.json:
```json
{
    "body": "<a id='comment:15'></a>Hi Vincent,\n\nReplying to [comment:14 vdelecroix]:\n> 3. Why did you changed the convention for equality? We have\n> \n> ```\n> sage: a = RIF(1,2)\n> sage: a == a\n> False\n> ```\n\n\nSee #17194 (and #17186) for the rationale.\n\nAs for this ticket, I'd like to suggest marking the whole module as experimental (cf. `sage.misc.deprecated`) until the bindings are a bit less minimal, in order to be able to make backward-incompatible changes without deprecation while extending them. Of course, the experimental warning would be removed after a while even if nothing changes.  (I've been planning to review this ticket and work on a counterpart of #17186 for weeks, but I didn't find time yet.) What do you think?",
    "created_at": "2015-05-12T14:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239558",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:15'></a>Hi Vincent,

Replying to [comment:14 vdelecroix]:
> 3. Why did you changed the convention for equality? We have
> 
> ```
> sage: a = RIF(1,2)
> sage: a == a
> False
> ```


See #17194 (and #17186) for the rationale.

As for this ticket, I'd like to suggest marking the whole module as experimental (cf. `sage.misc.deprecated`) until the bindings are a bit less minimal, in order to be able to make backward-incompatible changes without deprecation while extending them. Of course, the experimental warning would be removed after a while even if nothing changes.  (I've been planning to review this ticket and work on a counterpart of #17186 for weeks, but I didn't find time yet.) What do you think?



---

archive/issue_comments_239559.json:
```json
{
    "body": "<a id='comment:16'></a>Hi Marc,\n\nReplying to [comment:15 mmezzarobba]:\n> Replying to [comment:14 vdelecroix]:\n> > 3. Why did you changed the convention for equality? We have\n> > \n> > ```\n> > sage: a = RIF(1,2)\n> > sage: a == a\n> > False\n> > ```\n\n> \n> See #17194 (and #17186) for the rationale.\n\n\nI am fine with the rationale to be changed but I just want them to be the same for interval field and ball field.\n\nVincent",
    "created_at": "2015-05-13T06:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239559",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'></a>Hi Marc,

Replying to [comment:15 mmezzarobba]:
> Replying to [comment:14 vdelecroix]:
> > 3. Why did you changed the convention for equality? We have
> > 
> > ```
> > sage: a = RIF(1,2)
> > sage: a == a
> > False
> > ```

> 
> See #17194 (and #17186) for the rationale.


I am fine with the rationale to be changed but I just want them to be the same for interval field and ball field.

Vincent



---

archive/issue_comments_239560.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-18T17:23:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239560",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239561.json:
```json
{
    "body": "<a id='comment:18'></a>Hi Vincent, Hi Marc,\n\nthank you for your comments.\n\nReplying to [comment:14 vdelecroix]:\n> Hello,\n> \n> 1. In the constructor\n> \n> ```\n> super(ComplexBall, self).__init__(parent)\n> ```\n>   is much slower than\n> \n> ```\n> Element.__init__(self, parent)\n> ```\n\n>\n\nthank you, fixed. I guess that this should also be changed in `RealBall`?\n \n> 2. Do you really need to make a subtraction to check if two complex balls are different?!\n\n\nthanks for pointing this out, `!=` is now the negation of `overlaps`.\n\nReplying to [comment:15 mmezzarobba]:\n> As for this ticket, I'd like to suggest marking the whole module as experimental\n\n\ngood point, done.\n\nReplying to [comment:16 vdelecroix]:\n> I am fine with the rationale to be changed but I just want them to be the same for interval field and ball field.\n\n\nI'd also prefer to have the interval field with this behaviour (`a is b => a == b`) but how should that be done?\nWon't it need a deprecation and possibly break lots of code?\n\nThe current status is that `RealIntervalField` and `RealBallField` (intentionally) differ in their behaviour.\n\nIMHO changing RIF is outside the scope of this ticket.",
    "created_at": "2015-05-18T17:31:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239561",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:18'></a>Hi Vincent, Hi Marc,

thank you for your comments.

Replying to [comment:14 vdelecroix]:
> Hello,
> 
> 1. In the constructor
> 
> ```
> super(ComplexBall, self).__init__(parent)
> ```
>   is much slower than
> 
> ```
> Element.__init__(self, parent)
> ```

>

thank you, fixed. I guess that this should also be changed in `RealBall`?
 
> 2. Do you really need to make a subtraction to check if two complex balls are different?!


thanks for pointing this out, `!=` is now the negation of `overlaps`.

Replying to [comment:15 mmezzarobba]:
> As for this ticket, I'd like to suggest marking the whole module as experimental


good point, done.

Replying to [comment:16 vdelecroix]:
> I am fine with the rationale to be changed but I just want them to be the same for interval field and ball field.


I'd also prefer to have the interval field with this behaviour (`a is b => a == b`) but how should that be done?
Won't it need a deprecation and possibly break lots of code?

The current status is that `RealIntervalField` and `RealBallField` (intentionally) differ in their behaviour.

IMHO changing RIF is outside the scope of this ticket.



---

archive/issue_comments_239562.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-05-18T17:31:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239562",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_239563.json:
```json
{
    "body": "<a id='comment:19'></a>Looks good to me! Sorry for taking so long to review this ticket.",
    "created_at": "2015-05-23T13:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239563",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:19'></a>Looks good to me! Sorry for taking so long to review this ticket.



---

archive/issue_comments_239564.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-23T13:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239564",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_049853.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-05-23T13:19:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17218#event-49853"
}
```



---

archive/issue_comments_239565.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-23T22:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239565",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_049854.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-23T22:59:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17218#event-49854"
}
```



---

archive/issue_comments_239566.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:15 mmezzarobba]:\n> See #17194 (and #17186) for the rationale.\n\n\nLinking to a ticket with 82 comments isn't very helpful. I am asking because #24627 wants to change this.",
    "created_at": "2018-02-12T14:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239566",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>Replying to [comment:15 mmezzarobba]:
> See #17194 (and #17186) for the rationale.


Linking to a ticket with 82 comments isn't very helpful. I am asking because #24627 wants to change this.



---

archive/issue_comments_239567.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:21 jdemeyer]:\n> Replying to [comment:15 mmezzarobba]:\n> > See #17194 (and #17186) for the rationale.\n\n> \n> Linking to a ticket with 82 comments isn't very helpful. I am asking because #24627 wants to change this.\n\n\nI did my best to sum up the situation in #24627. If you want more detail, I don't really have anything better to suggest than to read the whole discussion.",
    "created_at": "2018-02-12T14:23:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17218#issuecomment-239567",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:22'></a>Replying to [comment:21 jdemeyer]:
> Replying to [comment:15 mmezzarobba]:
> > See #17194 (and #17186) for the rationale.

> 
> Linking to a ticket with 82 comments isn't very helpful. I am asking because #24627 wants to change this.


I did my best to sum up the situation in #24627. If you want more detail, I don't really have anything better to suggest than to read the whole discussion.
