# Issue 17254: Upgrade to Singular-4.x.x

archive/issues_017017.json:
```json
{
    "assignees": [],
    "body": "**Lots** of stuff has changed in Singular 4.\nThis is a big update.\n\nBuild system completely changed, and a lot of internal stuff.\n\nOriginal upstream tarball at `www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/`:  `singular-4.0.3p3` **dot** `tar` **dot** `gz`\n\nModified tarball made with spkg-src at:\n* http://www.lmona.de/files/sage/singular-4.0.3p3.tar.bz2\n\nThis corresponds to commit a070b84d whose message tells 4.0.3p3 and on which this branch was based:\n* https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7\n\nYou can also make your own tarball based on this commit or another one with\n\n```\nenv SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src\n./sage --package fix-checksum singular\n```\nThis script is loosely based on the `make_tar.sh` script from upstream.\n\nDepends on #17635\n\nCC:  @jpflori @burcin @sagetrac-jakobkroeker @kiwifb @malb @mkoeppe @vbraun @nthiery @bhutz @miguelmarco @sagetrac-gjorgenson\n\nComponent: **packages: standard**\n\nAuthor: **Jakob Kroeker, Jean-Pierre Flori, Jeroen Demeyer, John Perry, Fran\u00e7ois Bissey, Leif Leonhardy, Dima Pasechnik**\n\nBranch: **[`f1a0dcc`](https://github.com/sagemath/sagetrac-mirror/commit/f1a0dcc6c83ecac7ea4b0ebcd4638b7919047e58)**\n\nReviewer: **Fran\u00e7ois Bissey, Jeroen Demeyer, Ben Hutz, Leif Leonhardy, Dima Pasechnik, Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17254_\n\n",
    "closed_at": "2016-10-21T07:04:36Z",
    "created_at": "2014-10-29T15:17:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to Singular-4.x.x",
    "type": "issue",
    "updated_at": "2016-10-21T09:38:42Z",
    "url": "https://github.com/sagemath/sage/issues/17254",
    "user": "https://github.com/jdemeyer"
}
```
**Lots** of stuff has changed in Singular 4.
This is a big update.

Build system completely changed, and a lot of internal stuff.

Original upstream tarball at `www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/`:  `singular-4.0.3p3` **dot** `tar` **dot** `gz`

Modified tarball made with spkg-src at:
* http://www.lmona.de/files/sage/singular-4.0.3p3.tar.bz2

This corresponds to commit a070b84d whose message tells 4.0.3p3 and on which this branch was based:
* https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7

You can also make your own tarball based on this commit or another one with

```
env SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src
./sage --package fix-checksum singular
```
This script is loosely based on the `make_tar.sh` script from upstream.

Depends on #17635

CC:  @jpflori @burcin @sagetrac-jakobkroeker @kiwifb @malb @mkoeppe @vbraun @nthiery @bhutz @miguelmarco @sagetrac-gjorgenson

Component: **packages: standard**

Author: **Jakob Kroeker, Jean-Pierre Flori, Jeroen Demeyer, John Perry, François Bissey, Leif Leonhardy, Dima Pasechnik**

Branch: **[`f1a0dcc`](https://github.com/sagemath/sagetrac-mirror/commit/f1a0dcc6c83ecac7ea4b0ebcd4638b7919047e58)**

Reviewer: **François Bissey, Jeroen Demeyer, Ben Hutz, Leif Leonhardy, Dima Pasechnik, Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/17254_





---

archive/issue_events_244022.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-29T15:17:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244022"
}
```



---

archive/issue_events_244023.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-29T15:17:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244023"
}
```



---

archive/issue_events_244024.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-29T15:17:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244024"
}
```



---

archive/issue_events_244025.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-29T15:17:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244025"
}
```



---

archive/issue_comments_229589.json:
```json
{
    "body": "Branch: **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)**",
    "created_at": "2014-10-29T19:30:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229589",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)**



---

archive/issue_comments_229590.json:
```json
{
    "body": "Commit: **[`2fcaeb5`](https://github.com/sagemath/sagetrac-mirror/commit/2fcaeb5fadff9391624d03819bd9a4d405fdda72)**",
    "created_at": "2014-10-29T19:30:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229590",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`2fcaeb5`](https://github.com/sagemath/sagetrac-mirror/commit/2fcaeb5fadff9391624d03819bd9a4d405fdda72)**



---

archive/issue_comments_229591.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+**Lots** of stuff has changed in Singular 4. The attached branch is far from working.\n``````\n",
    "created_at": "2014-10-29T19:30:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229591",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+**Lots** of stuff has changed in Singular 4. The attached branch is far from working.
``````




---

archive/issue_comments_229592.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nYeah, the update is non trivial, that's a reason to get #17184 (and so #16882) inbetween.",
    "created_at": "2014-10-30T10:41:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229592",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:2" align="right">comment:2</div>

Yeah, the update is non trivial, that's a reason to get #17184 (and so #16882) inbetween.



---

archive/issue_comments_229593.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@jpflori](#comment%3A2):\n> Yeah, the update is non trivial\n\nI wonder if we even have a Sage developer who is familiar enough with Singular to do this (for the record: not me, I know nothing about Singular).\n\n> that's a reason to get #17184 (and so #16882) inbetween.\n\nOf course, I'm not arguing with that.",
    "created_at": "2014-10-30T10:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229593",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@jpflori](#comment%3A2):
> Yeah, the update is non trivial

I wonder if we even have a Sage developer who is familiar enough with Singular to do this (for the record: not me, I know nothing about Singular).

> that's a reason to get #17184 (and so #16882) inbetween.

Of course, I'm not arguing with that.



---

archive/issue_comments_229594.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@jdemeyer](#comment%3A3):\n> Replying to [@jpflori](#comment%3A2):\n> > Yeah, the update is non trivial\n\n> I wonder if we even have a Sage developer who is familiar enough with Singular to do this (for the record: not me, I know nothing about Singular).\n\nMaybe Burcin would do...\nIIRC the update was proposed as a GSoC project.",
    "created_at": "2014-10-30T13:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229594",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@jdemeyer](#comment%3A3):
> Replying to [@jpflori](#comment%3A2):
> > Yeah, the update is non trivial

> I wonder if we even have a Sage developer who is familiar enough with Singular to do this (for the record: not me, I know nothing about Singular).

Maybe Burcin would do...
IIRC the update was proposed as a GSoC project.



---

archive/issue_comments_229595.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nQ: where to get the singular tarball for this commit? \nI get a failure at \n\n``` \nTrying to download http://www.sagemath.org/packages/upstream/singular/singular-4.0.1p1.tar.bz2\n```\n\n2.\n> > Update to Singular 4.0.1\n\n> Maybe Burcin would do...\n\n\n\nCould the update to 4.0.1. be done by at least two or three persons to spread the knownledge\nabout Singular internals?",
    "created_at": "2014-11-03T11:59:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229595",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:6" align="right">comment:6</div>

Q: where to get the singular tarball for this commit? 
I get a failure at 

``` 
Trying to download http://www.sagemath.org/packages/upstream/singular/singular-4.0.1p1.tar.bz2
```

2.
> > Update to Singular 4.0.1

> Maybe Burcin would do...



Could the update to 4.0.1. be done by at least two or three persons to spread the knownledge
about Singular internals?



---

archive/issue_comments_229596.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYou have to put a tarball repackaged by the `spkg-src` script in the `upstream` folder directly.\nOnce the ticket is merged, the tarball will be put on the official mirror and could be downloaded automatically but not at the moment.\n\nI've put a repackaged tarball at:\n* http://boxen.math.washington.edu/home/jpflori/upstream/singular-4.0.1.tar.bz2",
    "created_at": "2014-11-03T12:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229596",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:7" align="right">comment:7</div>

You have to put a tarball repackaged by the `spkg-src` script in the `upstream` folder directly.
Once the ticket is merged, the tarball will be put on the official mirror and could be downloaded automatically but not at the moment.

I've put a repackaged tarball at:
* http://boxen.math.washington.edu/home/jpflori/upstream/singular-4.0.1.tar.bz2



---

archive/issue_comments_229597.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n(I'm not sure the checksums will the same as what Jeroen branch expect, run `./sage -sh sage-fix-pkg-checksums` after you have downloaded the tarball to fix this.)",
    "created_at": "2014-11-03T12:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229597",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:8" align="right">comment:8</div>

(I'm not sure the checksums will the same as what Jeroen branch expect, run `./sage -sh sage-fix-pkg-checksums` after you have downloaded the tarball to fix this.)



---

archive/issue_comments_229598.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAnd I'd be happy to work on the upgrade and learn more about Singular's internals, but please also review the \"easy\" #17184 (where I've already learnt some stuff) firsT.",
    "created_at": "2014-11-03T12:36:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229598",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:9" align="right">comment:9</div>

And I'd be happy to work on the upgrade and learn more about Singular's internals, but please also review the "easy" #17184 (where I've already learnt some stuff) firsT.



---

archive/issue_comments_229599.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n **Lots** of stuff has changed in Singular 4. The attached branch is far from working.\n+\n+Repackaged upstream tarball: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2)\n``````\n",
    "created_at": "2014-11-03T20:02:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229599",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 **Lots** of stuff has changed in Singular 4. The attached branch is far from working.
+
+Repackaged upstream tarball: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2)
``````




---

archive/issue_comments_229600.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nSingular 4.0.1. compiles now in sage but sage does not yet -\nI just pushed a branch 'u/jakobkroeker/ticket/17254'.\nYou have to correct the 'singular-4.0.1p1.tar.bz2' tarball to get it work ( the 'm4' folder is missing). \n\nFor the moment I removed some patches; we probably will have to adjust them later on. For example there is meanwhile no such thing like 'lomalloc_ndebug' so if we want to disable some debug functionality or output for omalloc we have to do that by passing appropriate flags to omalloc/configure, e,g\n'--enable-optimizationflags --disable-debug --without-debug' ?\n\nAlso I disabled the currently broken\n'--enable-debugoutput' configure flag for the standalone 'factory'\nand informed Oleksander Motsak about the issue.\n\nCould someone of you take care of the sage compile errors and figure out what is going wrong and/or ask for help in the Singular forum? I can't do that easily, because within the Singular-team I'm out-of-favor because I constantly  criticise their software and thus I will likely get little or no support.\n\n\nJakob",
    "created_at": "2015-01-21T10:50:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229600",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:11" align="right">comment:11</div>

Singular 4.0.1. compiles now in sage but sage does not yet -
I just pushed a branch 'u/jakobkroeker/ticket/17254'.
You have to correct the 'singular-4.0.1p1.tar.bz2' tarball to get it work ( the 'm4' folder is missing). 

For the moment I removed some patches; we probably will have to adjust them later on. For example there is meanwhile no such thing like 'lomalloc_ndebug' so if we want to disable some debug functionality or output for omalloc we have to do that by passing appropriate flags to omalloc/configure, e,g
'--enable-optimizationflags --disable-debug --without-debug' ?

Also I disabled the currently broken
'--enable-debugoutput' configure flag for the standalone 'factory'
and informed Oleksander Motsak about the issue.

Could someone of you take care of the sage compile errors and figure out what is going wrong and/or ask for help in the Singular forum? I can't do that easily, because within the Singular-team I'm out-of-favor because I constantly  criticise their software and thus I will likely get little or no support.


Jakob



---

archive/issue_comments_229601.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)** to **[u/jakobkroeker/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket/17254)**",
    "created_at": "2015-01-21T13:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229601",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)** to **[u/jakobkroeker/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket/17254)**



---

archive/issue_comments_229602.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c0bba332e4d67e3fc28df9b1ec9d136eb895b4a\"><code>4c0bba3</code></a></td><td><code> singular 4.0.1 builds now, but sage does not due to changes in libsingular?</code></td></tr></table>\n",
    "created_at": "2015-01-21T13:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229602",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c0bba332e4d67e3fc28df9b1ec9d136eb895b4a"><code>4c0bba3</code></a></td><td><code> singular 4.0.1 builds now, but sage does not due to changes in libsingular?</code></td></tr></table>




---

archive/issue_comments_229603.json:
```json
{
    "body": "Changed commit from **[`2fcaeb5`](https://github.com/sagemath/sagetrac-mirror/commit/2fcaeb5fadff9391624d03819bd9a4d405fdda72)** to **[`4c0bba3`](https://github.com/sagemath/sagetrac-mirror/commit/4c0bba332e4d67e3fc28df9b1ec9d136eb895b4a)**",
    "created_at": "2015-01-21T13:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229603",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`2fcaeb5`](https://github.com/sagemath/sagetrac-mirror/commit/2fcaeb5fadff9391624d03819bd9a4d405fdda72)** to **[`4c0bba3`](https://github.com/sagemath/sagetrac-mirror/commit/4c0bba332e4d67e3fc28df9b1ec9d136eb895b4a)**



---

archive/issue_comments_229604.json:
```json
{
    "body": "Changed commit from **[`4c0bba3`](https://github.com/sagemath/sagetrac-mirror/commit/4c0bba332e4d67e3fc28df9b1ec9d136eb895b4a)** to **[`2fcaeb5`](https://github.com/sagemath/sagetrac-mirror/commit/2fcaeb5fadff9391624d03819bd9a4d405fdda72)**",
    "created_at": "2015-01-21T13:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229604",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`4c0bba3`](https://github.com/sagemath/sagetrac-mirror/commit/4c0bba332e4d67e3fc28df9b1ec9d136eb895b4a)** to **[`2fcaeb5`](https://github.com/sagemath/sagetrac-mirror/commit/2fcaeb5fadff9391624d03819bd9a4d405fdda72)**



---

archive/issue_comments_229605.json:
```json
{
    "body": "Changed branch from **[u/jakobkroeker/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket/17254)** to **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)**",
    "created_at": "2015-01-21T13:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229605",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/jakobkroeker/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket/17254)** to **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)**



---

archive/issue_comments_229606.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nfirst hint: for example the interface of 'naIsZero'\nseems changed from \n\n```\nBOOLEAN naIsZero(number a)\n```\nto \n\n```\nBOOLEAN naIsZero(number a, const coeffs cf)\n```\nPersons who might have an idea about the changes:\n\nOleksandr Motsak\nMohamed Barakat\nMartin Lee\nHans Sch\u00f6nemann \n\nsee contact details at\nhttp://www.mathematik.uni-kl.de/agag/mitglieder/",
    "created_at": "2015-01-21T13:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229606",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:14" align="right">comment:14</div>

first hint: for example the interface of 'naIsZero'
seems changed from 

```
BOOLEAN naIsZero(number a)
```
to 

```
BOOLEAN naIsZero(number a, const coeffs cf)
```
Persons who might have an idea about the changes:

Oleksandr Motsak
Mohamed Barakat
Martin Lee
Hans Schönemann 

see contact details at
http://www.mathematik.uni-kl.de/agag/mitglieder/



---

archive/issue_comments_229607.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@jpflori](#comment%3A7):\n> I've put a repackaged tarball at:\n> * http://boxen.math.washington.edu/home/jpflori/upstream/singular-4.0.1.tar.bz2\n\nThat's an older version than the one that I put in the ticket description, any reason...?",
    "created_at": "2015-01-21T21:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229607",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@jpflori](#comment%3A7):
> I've put a repackaged tarball at:
> * http://boxen.math.washington.edu/home/jpflori/upstream/singular-4.0.1.tar.bz2

That's an older version than the one that I put in the ticket description, any reason...?



---

archive/issue_comments_229608.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A11):\n> You have to correct the 'singular-4.0.1p1.tar.bz2' tarball to get it work ( the 'm4' folder is missing).\n\nMy tarball compiled fine, so what is the problem?",
    "created_at": "2015-01-21T21:40:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229608",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A11):
> You have to correct the 'singular-4.0.1p1.tar.bz2' tarball to get it work ( the 'm4' folder is missing).

My tarball compiled fine, so what is the problem?



---

archive/issue_comments_229609.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nYou should never run `./autogen.sh`, that is supposed to be run at packaging-time, not build-time.",
    "created_at": "2015-01-21T21:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229609",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

You should never run `./autogen.sh`, that is supposed to be run at packaging-time, not build-time.



---

archive/issue_comments_229610.json:
```json
{
    "body": "Changed commit from **[`2fcaeb5`](https://github.com/sagemath/sagetrac-mirror/commit/2fcaeb5fadff9391624d03819bd9a4d405fdda72)** to **[`80a6b05`](https://github.com/sagemath/sagetrac-mirror/commit/80a6b05a08e391fa9718e1f83df861c93e2e5967)**",
    "created_at": "2015-01-21T22:00:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229610",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2fcaeb5`](https://github.com/sagemath/sagetrac-mirror/commit/2fcaeb5fadff9391624d03819bd9a4d405fdda72)** to **[`80a6b05`](https://github.com/sagemath/sagetrac-mirror/commit/80a6b05a08e391fa9718e1f83df861c93e2e5967)**



---

archive/issue_comments_229611.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79c079ff03bc6acfa6caaaf83ffa6912ea8d449c\"><code>79c079f</code></a></td><td><code>Upgrade to Singular-4-0-1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c0bba332e4d67e3fc28df9b1ec9d136eb895b4a\"><code>4c0bba3</code></a></td><td><code> singular 4.0.1 builds now, but sage does not due to changes in libsingular?</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80a6b05a08e391fa9718e1f83df861c93e2e5967\"><code>80a6b05</code></a></td><td><code>Merge commit '4c0bba3' into ticket/17254</code></td></tr></table>\n",
    "created_at": "2015-01-21T22:00:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229611",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79c079ff03bc6acfa6caaaf83ffa6912ea8d449c"><code>79c079f</code></a></td><td><code>Upgrade to Singular-4-0-1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c0bba332e4d67e3fc28df9b1ec9d136eb895b4a"><code>4c0bba3</code></a></td><td><code> singular 4.0.1 builds now, but sage does not due to changes in libsingular?</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80a6b05a08e391fa9718e1f83df861c93e2e5967"><code>80a6b05</code></a></td><td><code>Merge commit '4c0bba3' into ticket/17254</code></td></tr></table>




---

archive/issue_comments_229612.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n>My tarball compiled fine, so what is the problem?\n\nConfirm; cannot reproduce the issue.\nSo likely I didn't use the recent tarball, or I screwed something up.\n\n> You should never run ./autogen.sh, that is supposed to be run at packaging-time, not build-time.\n\nI'm guilty ;-)",
    "created_at": "2015-01-23T16:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229612",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:20" align="right">comment:20</div>

>My tarball compiled fine, so what is the problem?

Confirm; cannot reproduce the issue.
So likely I didn't use the recent tarball, or I screwed something up.

> You should never run ./autogen.sh, that is supposed to be run at packaging-time, not build-time.

I'm guilty ;-)



---

archive/issue_comments_229613.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nsingulars spkg-install:\n\nthe '--enable-debugoutput' configure flag \nfor standalone factory needs now in additon '--enable-streamio --without-Singular'",
    "created_at": "2015-01-26T17:43:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229613",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:21" align="right">comment:21</div>

singulars spkg-install:

the '--enable-debugoutput' configure flag 
for standalone factory needs now in additon '--enable-streamio --without-Singular'



---

archive/issue_comments_229614.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAfter a little more tweaking and temporarily disabling the extension fields/rings, \nI was able to build some parts of sage with Singular 4.0.1  on a 'fc18 system' and\nthen.. sage crashes at start! That happens because I didn't update ring creation right - I only  recently discovered examples at './libpolys/tests/rings_test.h'.  And some sage packages create common rings at loading time.\n\nremaining riddles:\n- during build one sage file tried to link to -lsingular (I have no idea why), instead to the   libSingular* files (that changed!), so I worked around by manually creating links to libSingular* files.\n\n- on a ScientificLinux system I get errors like \"ImportError: /home/kroeker/Projects/sage-singular-4.0.1/local/lib/python2.7/site-packages/sage/rings/polynomial/plural.so: undefined symbol: wFunctionalBuch\". This symbol is in libSingular*\n\n- fix ring creation. See examples at './libpolys/tests/rings_test.h'\n\n- the extension fields will need some more love. See 'algext.h' and 'transext.h'. @mantepse: could you take a look?\n\n- some mapping functions (e.g. nr2mMapZp) now require a source and dst (coefficient) parameter. Not sure if I did it right (source: currentRing, dest: _ring or vice versa?)\n\n- I didn't fix unused interface definitions in singular-cdefs.pxi. TODO\n \nSee branch u/jakobkroeker/ticket/17254\nand some notes at https://github.com/jakobkroeker/jk_test_sage/issues/13\n\nIf a build get stuck before errors described above, then maybe a 'make distclean' is necessary.\nAnd of course, the Singular tarball http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2 is required.\n\n\nAny help appreciated.\n\n\n\n\n\n\n \n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79c079ff03bc6acfa6caaaf83ffa6912ea8d449c\"><code>79c079f</code></a></td><td><code>Upgrade to Singular-4-0-1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fcaeb5fadff9391624d03819bd9a4d405fdda72\"><code>2fcaeb5</code></a></td><td><code>Update Singular to 4.0.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c0bba332e4d67e3fc28df9b1ec9d136eb895b4a\"><code>4c0bba3</code></a></td><td><code> singular 4.0.1 builds now, but sage does not due to changes in libsingular?</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80a6b05a08e391fa9718e1f83df861c93e2e5967\"><code>80a6b05</code></a></td><td><code>Merge commit '4c0bba3' into ticket/17254</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ae243af00a11db1a0df12a31bc06b7651d44c17\"><code>2ae243a</code></a></td><td><code>messy fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff2a9dc11f1982d59b620279e3115a869da49d06\"><code>ff2a9dc</code></a></td><td><code>required changes for singular to build sage; should be fixed upstream</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b7877e78caf76b952d8db36d89790f25fa361f1\"><code>3b7877e</code></a></td><td><code>hacking sage to build with Singular 4.0.1. needs more love for extension coefficient fields and a refactoring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f178dfc5c45529826a973815b62ab5be2a7f7136\"><code>f178dfc</code></a></td><td><code>fixing nr2mMapZp call</code></td></tr></table>\n",
    "created_at": "2015-02-02T12:06:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229614",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:22" align="right">comment:22</div>

After a little more tweaking and temporarily disabling the extension fields/rings, 
I was able to build some parts of sage with Singular 4.0.1  on a 'fc18 system' and
then.. sage crashes at start! That happens because I didn't update ring creation right - I only  recently discovered examples at './libpolys/tests/rings_test.h'.  And some sage packages create common rings at loading time.

remaining riddles:
- during build one sage file tried to link to -lsingular (I have no idea why), instead to the   libSingular* files (that changed!), so I worked around by manually creating links to libSingular* files.

- on a ScientificLinux system I get errors like "ImportError: /home/kroeker/Projects/sage-singular-4.0.1/local/lib/python2.7/site-packages/sage/rings/polynomial/plural.so: undefined symbol: wFunctionalBuch". This symbol is in libSingular*

- fix ring creation. See examples at './libpolys/tests/rings_test.h'

- the extension fields will need some more love. See 'algext.h' and 'transext.h'. @mantepse: could you take a look?

- some mapping functions (e.g. nr2mMapZp) now require a source and dst (coefficient) parameter. Not sure if I did it right (source: currentRing, dest: _ring or vice versa?)

- I didn't fix unused interface definitions in singular-cdefs.pxi. TODO
 
See branch u/jakobkroeker/ticket/17254
and some notes at https://github.com/jakobkroeker/jk_test_sage/issues/13

If a build get stuck before errors described above, then maybe a 'make distclean' is necessary.
And of course, the Singular tarball http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2 is required.


Any help appreciated.






 
---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79c079ff03bc6acfa6caaaf83ffa6912ea8d449c"><code>79c079f</code></a></td><td><code>Upgrade to Singular-4-0-1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fcaeb5fadff9391624d03819bd9a4d405fdda72"><code>2fcaeb5</code></a></td><td><code>Update Singular to 4.0.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c0bba332e4d67e3fc28df9b1ec9d136eb895b4a"><code>4c0bba3</code></a></td><td><code> singular 4.0.1 builds now, but sage does not due to changes in libsingular?</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80a6b05a08e391fa9718e1f83df861c93e2e5967"><code>80a6b05</code></a></td><td><code>Merge commit '4c0bba3' into ticket/17254</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ae243af00a11db1a0df12a31bc06b7651d44c17"><code>2ae243a</code></a></td><td><code>messy fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff2a9dc11f1982d59b620279e3115a869da49d06"><code>ff2a9dc</code></a></td><td><code>required changes for singular to build sage; should be fixed upstream</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b7877e78caf76b952d8db36d89790f25fa361f1"><code>3b7877e</code></a></td><td><code>hacking sage to build with Singular 4.0.1. needs more love for extension coefficient fields and a refactoring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f178dfc5c45529826a973815b62ab5be2a7f7136"><code>f178dfc</code></a></td><td><code>fixing nr2mMapZp call</code></td></tr></table>




---

archive/issue_comments_229615.json:
```json
{
    "body": "Changed commit from **[`80a6b05`](https://github.com/sagemath/sagetrac-mirror/commit/80a6b05a08e391fa9718e1f83df861c93e2e5967)** to **[`f178dfc`](https://github.com/sagemath/sagetrac-mirror/commit/f178dfc5c45529826a973815b62ab5be2a7f7136)**",
    "created_at": "2015-02-02T12:06:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229615",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed commit from **[`80a6b05`](https://github.com/sagemath/sagetrac-mirror/commit/80a6b05a08e391fa9718e1f83df861c93e2e5967)** to **[`f178dfc`](https://github.com/sagemath/sagetrac-mirror/commit/f178dfc5c45529826a973815b62ab5be2a7f7136)**



---

archive/issue_comments_229616.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)** to **[u/jakobkroeker/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket/17254)**",
    "created_at": "2015-02-02T12:06:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229616",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed branch from **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)** to **[u/jakobkroeker/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket/17254)**



---

archive/issue_comments_229617.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ba17d8bc77cab7d3cffdda267dde132cbaff45e\"><code>8ba17d8</code></a></td><td><code>messy fixes</code></td></tr></table>\n",
    "created_at": "2015-02-02T12:14:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229617",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ba17d8bc77cab7d3cffdda267dde132cbaff45e"><code>8ba17d8</code></a></td><td><code>messy fixes</code></td></tr></table>




---

archive/issue_comments_229618.json:
```json
{
    "body": "Changed commit from **[`f178dfc`](https://github.com/sagemath/sagetrac-mirror/commit/f178dfc5c45529826a973815b62ab5be2a7f7136)** to **[`8ba17d8`](https://github.com/sagemath/sagetrac-mirror/commit/8ba17d8bc77cab7d3cffdda267dde132cbaff45e)**",
    "created_at": "2015-02-02T12:14:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229618",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f178dfc`](https://github.com/sagemath/sagetrac-mirror/commit/f178dfc5c45529826a973815b62ab5be2a7f7136)** to **[`8ba17d8`](https://github.com/sagemath/sagetrac-mirror/commit/8ba17d8bc77cab7d3cffdda267dde132cbaff45e)**



---

archive/issue_comments_229619.json:
```json
{
    "body": "Changed commit from **[`8ba17d8`](https://github.com/sagemath/sagetrac-mirror/commit/8ba17d8bc77cab7d3cffdda267dde132cbaff45e)** to **[`c2a21bd`](https://github.com/sagemath/sagetrac-mirror/commit/c2a21bd383e0f9d82dd409efbd4b48a4317be0c7)**",
    "created_at": "2015-02-04T20:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229619",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8ba17d8`](https://github.com/sagemath/sagetrac-mirror/commit/8ba17d8bc77cab7d3cffdda267dde132cbaff45e)** to **[`c2a21bd`](https://github.com/sagemath/sagetrac-mirror/commit/c2a21bd383e0f9d82dd409efbd4b48a4317be0c7)**



---

archive/issue_comments_229620.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ae243af00a11db1a0df12a31bc06b7651d44c17\"><code>2ae243a</code></a></td><td><code>messy fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff2a9dc11f1982d59b620279e3115a869da49d06\"><code>ff2a9dc</code></a></td><td><code>required changes for singular to build sage; should be fixed upstream</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b7877e78caf76b952d8db36d89790f25fa361f1\"><code>3b7877e</code></a></td><td><code>hacking sage to build with Singular 4.0.1. needs more love for extension coefficient fields and a refactoring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f178dfc5c45529826a973815b62ab5be2a7f7136\"><code>f178dfc</code></a></td><td><code>fixing nr2mMapZp call</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e823877eb9cfa23f33f68956d8b8ab18c8306e2\"><code>8e82387</code></a></td><td><code>Merge branch 'u/jakobkroeker/jakobkroeker.ticket.17254' of git://trac.sagemath.org/sage into jakobkroeker.ticket.17254</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2a21bd383e0f9d82dd409efbd4b48a4317be0c7\"><code>c2a21bd</code></a></td><td><code>fixed some ring creation</code></td></tr></table>\n",
    "created_at": "2015-02-04T20:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229620",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ae243af00a11db1a0df12a31bc06b7651d44c17"><code>2ae243a</code></a></td><td><code>messy fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff2a9dc11f1982d59b620279e3115a869da49d06"><code>ff2a9dc</code></a></td><td><code>required changes for singular to build sage; should be fixed upstream</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b7877e78caf76b952d8db36d89790f25fa361f1"><code>3b7877e</code></a></td><td><code>hacking sage to build with Singular 4.0.1. needs more love for extension coefficient fields and a refactoring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f178dfc5c45529826a973815b62ab5be2a7f7136"><code>f178dfc</code></a></td><td><code>fixing nr2mMapZp call</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e823877eb9cfa23f33f68956d8b8ab18c8306e2"><code>8e82387</code></a></td><td><code>Merge branch 'u/jakobkroeker/jakobkroeker.ticket.17254' of git://trac.sagemath.org/sage into jakobkroeker.ticket.17254</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2a21bd383e0f9d82dd409efbd4b48a4317be0c7"><code>c2a21bd</code></a></td><td><code>fixed some ring creation</code></td></tr></table>




---

archive/issue_comments_229621.json:
```json
{
    "body": "Changed commit from **[`c2a21bd`](https://github.com/sagemath/sagetrac-mirror/commit/c2a21bd383e0f9d82dd409efbd4b48a4317be0c7)** to none",
    "created_at": "2015-02-05T12:19:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229621",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed commit from **[`c2a21bd`](https://github.com/sagemath/sagetrac-mirror/commit/c2a21bd383e0f9d82dd409efbd4b48a4317be0c7)** to none



---

archive/issue_comments_229622.json:
```json
{
    "body": "Changed branch from **[u/jakobkroeker/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket/17254)** to **[trac/u/jakobkroeker/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/trac/u/jakobkroeker/ticket.17254.squashed)**",
    "created_at": "2015-02-05T12:19:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229622",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed branch from **[u/jakobkroeker/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket/17254)** to **[trac/u/jakobkroeker/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/trac/u/jakobkroeker/ticket.17254.squashed)**



---

archive/issue_comments_229623.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6384b9b8d22905e7dcc72b84df33effae9c8a517\"><code>6384b9b</code></a></td><td><code>Upgrade to Singular 4.0.1: incomplete, messy patch(first aproach)</code></td></tr></table>\n",
    "created_at": "2015-02-05T12:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229623",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:26"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6384b9b8d22905e7dcc72b84df33effae9c8a517"><code>6384b9b</code></a></td><td><code>Upgrade to Singular 4.0.1: incomplete, messy patch(first aproach)</code></td></tr></table>




---

archive/issue_comments_229624.json:
```json
{
    "body": "Commit: **[`6384b9b`](https://github.com/sagemath/sagetrac-mirror/commit/6384b9b8d22905e7dcc72b84df33effae9c8a517)**",
    "created_at": "2015-02-05T12:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229624",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Commit: **[`6384b9b`](https://github.com/sagemath/sagetrac-mirror/commit/6384b9b8d22905e7dcc72b84df33effae9c8a517)**



---

archive/issue_comments_229625.json:
```json
{
    "body": "Changed branch from **[trac/u/jakobkroeker/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/trac/u/jakobkroeker/ticket.17254.squashed)** to **[u/jakobkroeker/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed)**",
    "created_at": "2015-02-05T12:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229625",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed branch from **[trac/u/jakobkroeker/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/trac/u/jakobkroeker/ticket.17254.squashed)** to **[u/jakobkroeker/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed)**



---

archive/issue_comments_229626.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-**Lots** of stuff has changed in Singular 4. The attached branch is far from working.\n+**Lots** of stuff has changed in Singular 4. But now the attached branch is almost working.\n \n Repackaged upstream tarball: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2)\n``````\n",
    "created_at": "2015-02-05T12:23:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229626",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-**Lots** of stuff has changed in Singular 4. The attached branch is far from working.
+**Lots** of stuff has changed in Singular 4. But now the attached branch is almost working.
 
 Repackaged upstream tarball: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2)
``````




---

archive/issue_comments_229627.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/221c5d63e02d7f1d7fdc57cf6c819677553dd262\"><code>221c5d6</code></a></td><td><code>Upgrade to Singular 4.0.1: incomplete, messy patch(first aproach)</code></td></tr></table>\n",
    "created_at": "2015-02-05T14:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229627",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/221c5d63e02d7f1d7fdc57cf6c819677553dd262"><code>221c5d6</code></a></td><td><code>Upgrade to Singular 4.0.1: incomplete, messy patch(first aproach)</code></td></tr></table>




---

archive/issue_comments_229628.json:
```json
{
    "body": "Changed commit from **[`6384b9b`](https://github.com/sagemath/sagetrac-mirror/commit/6384b9b8d22905e7dcc72b84df33effae9c8a517)** to **[`221c5d6`](https://github.com/sagemath/sagetrac-mirror/commit/221c5d63e02d7f1d7fdc57cf6c819677553dd262)**",
    "created_at": "2015-02-05T14:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229628",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6384b9b`](https://github.com/sagemath/sagetrac-mirror/commit/6384b9b8d22905e7dcc72b84df33effae9c8a517)** to **[`221c5d6`](https://github.com/sagemath/sagetrac-mirror/commit/221c5d63e02d7f1d7fdc57cf6c819677553dd262)**



---

archive/issue_comments_229629.json:
```json
{
    "body": "Changed commit from **[`221c5d6`](https://github.com/sagemath/sagetrac-mirror/commit/221c5d63e02d7f1d7fdc57cf6c819677553dd262)** to **[`1e84789`](https://github.com/sagemath/sagetrac-mirror/commit/1e847897b9fce54fa25f1b91dea78f9e225ad0c9)**",
    "created_at": "2015-02-07T12:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229629",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`221c5d6`](https://github.com/sagemath/sagetrac-mirror/commit/221c5d63e02d7f1d7fdc57cf6c819677553dd262)** to **[`1e84789`](https://github.com/sagemath/sagetrac-mirror/commit/1e847897b9fce54fa25f1b91dea78f9e225ad0c9)**



---

archive/issue_comments_229630.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e847897b9fce54fa25f1b91dea78f9e225ad0c9\"><code>1e84789</code></a></td><td><code>one more renaming from libsingular to libSingular</code></td></tr></table>\n",
    "created_at": "2015-02-07T12:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229630",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e847897b9fce54fa25f1b91dea78f9e225ad0c9"><code>1e84789</code></a></td><td><code>one more renaming from libsingular to libSingular</code></td></tr></table>




---

archive/issue_comments_229631.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a512cd7e08e21a4a4e66bfe9179290601717ba0\"><code>3a512cd</code></a></td><td><code>improved error handling messages when loading Singular</code></td></tr></table>\n",
    "created_at": "2015-02-07T13:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229631",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a512cd7e08e21a4a4e66bfe9179290601717ba0"><code>3a512cd</code></a></td><td><code>improved error handling messages when loading Singular</code></td></tr></table>




---

archive/issue_comments_229632.json:
```json
{
    "body": "Changed commit from **[`1e84789`](https://github.com/sagemath/sagetrac-mirror/commit/1e847897b9fce54fa25f1b91dea78f9e225ad0c9)** to **[`3a512cd`](https://github.com/sagemath/sagetrac-mirror/commit/3a512cd7e08e21a4a4e66bfe9179290601717ba0)**",
    "created_at": "2015-02-07T13:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229632",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1e84789`](https://github.com/sagemath/sagetrac-mirror/commit/1e847897b9fce54fa25f1b91dea78f9e225ad0c9)** to **[`3a512cd`](https://github.com/sagemath/sagetrac-mirror/commit/3a512cd7e08e21a4a4e66bfe9179290601717ba0)**



---

archive/issue_comments_229633.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nWhat is the status of this ticket? I see the branch is off 6.5.rc0, which is quite old already...",
    "created_at": "2015-05-22T11:08:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229633",
    "user": "https://github.com/SnarkBoojum"
}
```

<div id="comment:31" align="right">comment:31</div>

What is the status of this ticket? I see the branch is off 6.5.rc0, which is quite old already...



---

archive/issue_comments_229634.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n>What is the status of this ticket? I see the branch is off 6.5.rc0, which is quite old already...\n\nI'm busy and can't work on the ticket currently and expect to have time for the ticket at end of June,\nnot earlier...\n\nwith the state as is, sage should build and start (using the Singular tarball from above), but extension fields and transcendental fields are not functional yet and also a cython Singular-interface cleanup has to be done.",
    "created_at": "2015-05-22T13:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229634",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:32" align="right">comment:32</div>

>What is the status of this ticket? I see the branch is off 6.5.rc0, which is quite old already...

I'm busy and can't work on the ticket currently and expect to have time for the ticket at end of June,
not earlier...

with the state as is, sage should build and start (using the Singular tarball from above), but extension fields and transcendental fields are not functional yet and also a cython Singular-interface cleanup has to be done.



---

archive/issue_comments_229635.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A32):\n> I'm busy and can't work on the ticket currently and expect to have time for the ticket at end of June, not earlier...\n> \n> with the state as is, sage should build and start (using the Singular tarball from above), but extension fields and transcendental fields are not functional yet and also a cython Singular-interface cleanup has to be done. \n> \n\nI'm at SD64.25 and am willing to work on this, but I'll need some hand-holding since I haven't worked on a package like this before. Do you have any suggestions for ways to test extension and transcendental fields?",
    "created_at": "2015-05-24T17:31:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229635",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A32):
> I'm busy and can't work on the ticket currently and expect to have time for the ticket at end of June, not earlier...
> 
> with the state as is, sage should build and start (using the Singular tarball from above), but extension fields and transcendental fields are not functional yet and also a cython Singular-interface cleanup has to be done. 
> 

I'm at SD64.25 and am willing to work on this, but I'll need some hand-holding since I haven't worked on a package like this before. Do you have any suggestions for ways to test extension and transcendental fields?



---

archive/issue_comments_229636.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI just applied this to 6.4.1 and encountered the message,\n\n    fatal error: Singular/libsingular.h: No such file or directory\n\nwhile compiling\n\n    build/cythonized/sage/algebras/letterplace/free_algebra_element_letterplace.cpp\n\nAny ideas what causes this?",
    "created_at": "2015-05-24T19:56:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229636",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:34" align="right">comment:34</div>

I just applied this to 6.4.1 and encountered the message,

    fatal error: Singular/libsingular.h: No such file or directory

while compiling

    build/cythonized/sage/algebras/letterplace/free_algebra_element_letterplace.cpp

Any ideas what causes this?



---

archive/issue_comments_229637.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI haven't looked yet at the new singular 4.0.x but the first port of call would be to check if the header is indeed installed in `$SAGE_LOCAL/include`.",
    "created_at": "2015-05-24T20:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229637",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:35" align="right">comment:35</div>

I haven't looked yet at the new singular 4.0.x but the first port of call would be to check if the header is indeed installed in `$SAGE_LOCAL/include`.



---

archive/issue_comments_229638.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@kiwifb](#comment%3A35):\n> I haven't looked yet at the new singular 4.0.x but the first port of call would be to check if the header is indeed installed in `$SAGE_LOCAL/include`.\n\nShortly after, that installation of Sage fell completely apart (not sure why) so now I'm working on Sage-6.7.\n\nOn 6.7, git identifies some issues with merging in singular.pyx and ring.pyx, but they're fairly clear to fix, so I did. (Unless they *weren't* easy.) Things went much further this time, until I encountered this error:\n\n```\n****************************************************\n### Singular spkg-install: choose_patches ###\n### Singular spkg-install: apply_patches ###\nApplying /Applications/sage-6.7/local/var/tmp/sage/build/singular-4.0.1p1.p0/patches/stricmp.patch\ncan't find file to patch at input line 7\nPerhaps you used the wrong -p or --strip option?\nThe text leading up to this was:\n--------------------------\n|stricmp is being deprecated in Cygwin.\n|One should use strcasecmp.\n|See https://cygwin.com/ml/cygwin/2014-10/msg00359.html\n|diff -druN src/latest/Singular/run.c src/latest/Singular/run.c\n|--- latest/Singular/run.c\t2014-11-19 14:06:05.000000000 +0100\n|+++ latest/Singular/run.c\t2015-01-16 09:32:45.771298300 +0100\n--------------------------\nFile to patch: \nSkip this patch? [y] \nSkipping patch.\n1 out of 1 hunk ignored\nError applying '/Applications/sage-6.7/local/var/tmp/sage/build/singular-4.0.1p1.p0/patches/stricmp.patch'\nError building Singular (error in apply_patches).\n```\nHere's what the file in question suggests:\n\n```\nstricmp is being deprecated in Cygwin.\nOne should use strcasecmp.\nSee https://cygwin.com/ml/cygwin/2014-10/msg00359.html\ndiff -druN src/latest/Singular/run.c src/latest/Singular/run.c\n--- latest/Singular/run.c       2014-11-19 14:06:05.000000000 +0100\n+++ latest/Singular/run.c       2015-01-16 09:32:45.771298300 +0100\n@@ -45,6 +45,7 @@\n  #include <sys/stat.h>\n  #include <sys/cygwin.h>\n  #include <sys/unistd.h>\n+ #define stricmp strcasecmp\n //WinMainCRTStartup() { mainCRTStartup(); }\n #else\n  #include <direct.h>\n```\nIndeed, I do not find `run.c` in `local/var/tmp/sage/build/singular-4.0.1p1.p0/src/latest/Singular/`, which I am guessing is where this is supposed to be; instead, I find only run.h.\n\nIn my local distribution of Singular, I find a `run.c`. If I copy it over & try to make, I get the same complaint, & it looks as if the file is actually deleted. Suggestions?",
    "created_at": "2015-05-24T22:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229638",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@kiwifb](#comment%3A35):
> I haven't looked yet at the new singular 4.0.x but the first port of call would be to check if the header is indeed installed in `$SAGE_LOCAL/include`.

Shortly after, that installation of Sage fell completely apart (not sure why) so now I'm working on Sage-6.7.

On 6.7, git identifies some issues with merging in singular.pyx and ring.pyx, but they're fairly clear to fix, so I did. (Unless they *weren't* easy.) Things went much further this time, until I encountered this error:

```
****************************************************
### Singular spkg-install: choose_patches ###
### Singular spkg-install: apply_patches ###
Applying /Applications/sage-6.7/local/var/tmp/sage/build/singular-4.0.1p1.p0/patches/stricmp.patch
can't find file to patch at input line 7
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|stricmp is being deprecated in Cygwin.
|One should use strcasecmp.
|See https://cygwin.com/ml/cygwin/2014-10/msg00359.html
|diff -druN src/latest/Singular/run.c src/latest/Singular/run.c
|--- latest/Singular/run.c	2014-11-19 14:06:05.000000000 +0100
|+++ latest/Singular/run.c	2015-01-16 09:32:45.771298300 +0100
--------------------------
File to patch: 
Skip this patch? [y] 
Skipping patch.
1 out of 1 hunk ignored
Error applying '/Applications/sage-6.7/local/var/tmp/sage/build/singular-4.0.1p1.p0/patches/stricmp.patch'
Error building Singular (error in apply_patches).
```
Here's what the file in question suggests:

```
stricmp is being deprecated in Cygwin.
One should use strcasecmp.
See https://cygwin.com/ml/cygwin/2014-10/msg00359.html
diff -druN src/latest/Singular/run.c src/latest/Singular/run.c
--- latest/Singular/run.c       2014-11-19 14:06:05.000000000 +0100
+++ latest/Singular/run.c       2015-01-16 09:32:45.771298300 +0100
@@ -45,6 +45,7 @@
  #include <sys/stat.h>
  #include <sys/cygwin.h>
  #include <sys/unistd.h>
+ #define stricmp strcasecmp
 //WinMainCRTStartup() { mainCRTStartup(); }
 #else
  #include <direct.h>
```
Indeed, I do not find `run.c` in `local/var/tmp/sage/build/singular-4.0.1p1.p0/src/latest/Singular/`, which I am guessing is where this is supposed to be; instead, I find only run.h.

In my local distribution of Singular, I find a `run.c`. If I copy it over & try to make, I get the same complaint, & it looks as if the file is actually deleted. Suggestions?



---

archive/issue_comments_229639.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nDid you mean `local/var/tmp/sage/build/singular-4.0.1p1.p0/src/Singular/` the `latest` bit should be stripped by the `-p1` option to patch.",
    "created_at": "2015-05-24T22:56:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229639",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:37" align="right">comment:37</div>

Did you mean `local/var/tmp/sage/build/singular-4.0.1p1.p0/src/Singular/` the `latest` bit should be stripped by the `-p1` option to patch.



---

archive/issue_comments_229640.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThe patch has `latest` in it; that's why I wrote that in there, so that is what I mean. Is your meaning that `latest` should not be there? That directory doesn't exist when I look through the paths.",
    "created_at": "2015-05-24T23:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229640",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:38" align="right">comment:38</div>

The patch has `latest` in it; that's why I wrote that in there, so that is what I mean. Is your meaning that `latest` should not be there? That directory doesn't exist when I look through the paths.



---

archive/issue_comments_229641.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nIt is expected for that directory not to exist for you. Whoever wrote the patch was working in a folder named `latest` but it is their own naming. It doesn't matter anyway. Let me explain to you how the `-p` option of patch works. \n\nYour patch has a header that helps you locate the file to patch:\n\n```\n--- latest/Singular/run.c       2014-11-19 14:06:05.000000000 +0100\n+++ latest/Singular/run.c       2015-01-16 09:32:45.771298300 +0100\n```\n`patch < mypatch.patch` or equivalently `patch -p0< mypatch.patch` will look for the file\n`latest/Singular/run.c` relative to where patch is executed. `-pN` will strip the `N` first folders in front of the file name so \n\n`patch -p1< mypatch.patch` will look for `Singular/run.c`. In `spkg-install` for singular, patches are applied with `patch -p1 <\"$patch\"` so you shouldn't care about `latest` it is discarded. Look for `local/var/tmp/sage/build/singular-4.0.1p1.p0/src/Singular/run.c` OK?",
    "created_at": "2015-05-24T23:30:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229641",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:39" align="right">comment:39</div>

It is expected for that directory not to exist for you. Whoever wrote the patch was working in a folder named `latest` but it is their own naming. It doesn't matter anyway. Let me explain to you how the `-p` option of patch works. 

Your patch has a header that helps you locate the file to patch:

```
--- latest/Singular/run.c       2014-11-19 14:06:05.000000000 +0100
+++ latest/Singular/run.c       2015-01-16 09:32:45.771298300 +0100
```
`patch < mypatch.patch` or equivalently `patch -p0< mypatch.patch` will look for the file
`latest/Singular/run.c` relative to where patch is executed. `-pN` will strip the `N` first folders in front of the file name so 

`patch -p1< mypatch.patch` will look for `Singular/run.c`. In `spkg-install` for singular, patches are applied with `patch -p1 <"$patch"` so you shouldn't care about `latest` it is discarded. Look for `local/var/tmp/sage/build/singular-4.0.1p1.p0/src/Singular/run.c` OK?



---

archive/issue_comments_229642.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nI think you misunderstand.\n\nReplying to [@kiwifb](#comment%3A39):\n> It is expected for that directory not to exist for you.\n\nWhy not? That directory *does* exist for me. The problem is that the *file* `run.c` does not exist *in* it.\n\n>Look for `local/var/tmp/sage/build/singular-4.0.1p1.p0/src/Singular/run.c` OK?\n\nThere is no such directory. I can get to `local/var/tmp/sage/build/singular-4.0.1p1.p0/src/` but the only directories in there are `latest` and `shared`.",
    "created_at": "2015-05-24T23:37:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229642",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:40" align="right">comment:40</div>

I think you misunderstand.

Replying to [@kiwifb](#comment%3A39):
> It is expected for that directory not to exist for you.

Why not? That directory *does* exist for me. The problem is that the *file* `run.c` does not exist *in* it.

>Look for `local/var/tmp/sage/build/singular-4.0.1p1.p0/src/Singular/run.c` OK?

There is no such directory. I can get to `local/var/tmp/sage/build/singular-4.0.1p1.p0/src/` but the only directories in there are `latest` and `shared`.



---

archive/issue_comments_229643.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nOK you seem to be right. The tarball has been packaged strangely and I am not sure I have the right `spkg-install`. It is a cygwin patch and cygwin support in singular seems to have changed considerably. I would just remove the patch for now, it doesn't/cannot apply anywway any new fix for cygwin would have to be done from scratch by someone with a cygwin system.",
    "created_at": "2015-05-24T23:43:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229643",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:41" align="right">comment:41</div>

OK you seem to be right. The tarball has been packaged strangely and I am not sure I have the right `spkg-install`. It is a cygwin patch and cygwin support in singular seems to have changed considerably. I would just remove the patch for now, it doesn't/cannot apply anywway any new fix for cygwin would have to be done from scratch by someone with a cygwin system.



---

archive/issue_comments_229644.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nHow do I remove it? If I move it & `make` anew, the file reappears.",
    "created_at": "2015-05-24T23:49:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229644",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:42" align="right">comment:42</div>

How do I remove it? If I move it & `make` anew, the file reappears.



---

archive/issue_comments_229645.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\n`git rm build/pkgs/singular/patches/stricmp.patch`?",
    "created_at": "2015-05-24T23:52:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229645",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:43" align="right">comment:43</div>

`git rm build/pkgs/singular/patches/stricmp.patch`?



---

archive/issue_comments_229646.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nThanks, that worked. Now I get failure on a line in ring.pyx,\n\n```\n    if is_64_bit:\n```\nNamely, Cython (?) claims this is undefined. I guess this is a change in Cython, since that isn't introduced by this patch. I found online another way to test this (`sys.maxsize > 2**32`) so I'm trying with that. Found another issue, but that was easy. Proceeding with fingers crossed... it's still compiling, which is already an progress...!",
    "created_at": "2015-05-25T00:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229646",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:44" align="right">comment:44</div>

Thanks, that worked. Now I get failure on a line in ring.pyx,

```
    if is_64_bit:
```
Namely, Cython (?) claims this is undefined. I guess this is a change in Cython, since that isn't introduced by this patch. I found online another way to test this (`sys.maxsize > 2**32`) so I'm trying with that. Found another issue, but that was easy. Proceeding with fingers crossed... it's still compiling, which is already an progress...!



---

archive/issue_comments_229647.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nIt seems to have built, but Sage doesn't run. Here's the last few lines of the compilation (sorry for so much, but I wanted to show what it was saying at the end of what looks like a successful build, too):\n\n```\n...\nbyte-compiling /Applications/sage-6.7/local/lib/python2.7/site-packages/sage_setup/find.py to find.pyc\nbyte-compiling /Applications/sage-6.7/local/lib/python2.7/site-packages/sage_setup/optional_extension.py to optional_extension.pyc\nrunning install_egg_info\nRemoving /Applications/sage-6.7/local/lib/python2.7/site-packages/sage-6.8.beta0-py2.7.egg-info\nWriting /Applications/sage-6.7/local/lib/python2.7/site-packages/sage-6.8.beta0-py2.7.egg-info\n\nreal\t0m25.849s\nuser\t0m11.855s\nsys\t0m3.847s\n[ -f local/etc/sage-started.txt ] || local/bin/sage-starts\nbuild/pipestatus \"./sage --docbuild --no-pdf-links all html  2>&1\" \"tee -a logs/dochtml.log\"\nDeleting empty directory /Applications/sage-6.7/src/doc/common/static\nDeleting empty directory /Applications/sage-6.7/src/doc/en/reference/combinat/static\nDeleting empty directory /Applications/sage-6.7/src/doc/en/reference/combinat/templates\nDeleting empty directory /Applications/sage-6.7/src/doc/en/reference/polynomial_rings/static\nDeleting empty directory /Applications/sage-6.7/src/doc/en/reference/polynomial_rings/templates\nDeleting empty directory /Applications/sage-6.7/src/doc/en/reference/repl/static\nDeleting empty directory /Applications/sage-6.7/src/doc/en/reference/repl/templates\nDeleting empty directory /Applications/sage-6.7/src/doc/en/reference/tensor_free_modules/static\nDeleting empty directory /Applications/sage-6.7/src/doc/en/reference/tensor_free_modules/templates\nDeleting empty directory /Applications/sage-6.7/src/doc/output/inventory/en/reference/combinat\nTraceback (most recent call last):\n  File \"/Applications/sage-6.7/src/doc/common/builder.py\", line 1619, in <module>\n    import sage.all\n  File \"/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/all.py\", line 98, in <module>\n    from sage.rings.all      import *\n  File \"/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/all.py\", line 68, in <module>\n    from number_field.all import *\n  File \"/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/number_field/all.py\", line 7, in <module>\n    from totallyreal import enumerate_totallyreal_fields_prim\n  File \"sage/rings/number_field/totallyreal_data.pxd\", line 16, in init sage.rings.number_field.totallyreal (build/cythonized/sage/rings/number_field/totallyreal.c:10339)\n  File \"sage/rings/number_field/totallyreal_data.pyx\", line 39, in init sage.rings.number_field.totallyreal_data (build/cythonized/sage/rings/number_field/totallyreal_data.c:11133)\n  File \"/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py\", line 465, in PolynomialRing\n    R = _single_variate(base_ring, name, sparse, implementation)\n  File \"/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py\", line 539, in _single_variate\n    R = m.PolynomialRing_integral_domain(base_ring, name, sparse, implementation)\n  File \"/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py\", line 1544, in __init__\n    sparse=sparse, element_class=element_class)\n  File \"/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py\", line 1451, in __init__\n    sparse=sparse, element_class=element_class, category=category)\n  File \"/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py\", line 305, in __init__\n    from sage.matrix.matrix_space import is_MatrixSpace\n  File \"/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py\", line 57, in <module>\n    import matrix_mpolynomial_dense\nImportError: dlopen(/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so, 2): Symbol not found: __Z17initCanonicalFormv\n  Referenced from: /Applications/sage-6.7/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so\n  Expected in: flat namespace\n in /Applications/sage-6.7/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so\nmake: *** [doc-html] Error 1\n```",
    "created_at": "2015-05-25T01:31:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229647",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:45" align="right">comment:45</div>

It seems to have built, but Sage doesn't run. Here's the last few lines of the compilation (sorry for so much, but I wanted to show what it was saying at the end of what looks like a successful build, too):

```
...
byte-compiling /Applications/sage-6.7/local/lib/python2.7/site-packages/sage_setup/find.py to find.pyc
byte-compiling /Applications/sage-6.7/local/lib/python2.7/site-packages/sage_setup/optional_extension.py to optional_extension.pyc
running install_egg_info
Removing /Applications/sage-6.7/local/lib/python2.7/site-packages/sage-6.8.beta0-py2.7.egg-info
Writing /Applications/sage-6.7/local/lib/python2.7/site-packages/sage-6.8.beta0-py2.7.egg-info

real	0m25.849s
user	0m11.855s
sys	0m3.847s
[ -f local/etc/sage-started.txt ] || local/bin/sage-starts
build/pipestatus "./sage --docbuild --no-pdf-links all html  2>&1" "tee -a logs/dochtml.log"
Deleting empty directory /Applications/sage-6.7/src/doc/common/static
Deleting empty directory /Applications/sage-6.7/src/doc/en/reference/combinat/static
Deleting empty directory /Applications/sage-6.7/src/doc/en/reference/combinat/templates
Deleting empty directory /Applications/sage-6.7/src/doc/en/reference/polynomial_rings/static
Deleting empty directory /Applications/sage-6.7/src/doc/en/reference/polynomial_rings/templates
Deleting empty directory /Applications/sage-6.7/src/doc/en/reference/repl/static
Deleting empty directory /Applications/sage-6.7/src/doc/en/reference/repl/templates
Deleting empty directory /Applications/sage-6.7/src/doc/en/reference/tensor_free_modules/static
Deleting empty directory /Applications/sage-6.7/src/doc/en/reference/tensor_free_modules/templates
Deleting empty directory /Applications/sage-6.7/src/doc/output/inventory/en/reference/combinat
Traceback (most recent call last):
  File "/Applications/sage-6.7/src/doc/common/builder.py", line 1619, in <module>
    import sage.all
  File "/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/all.py", line 98, in <module>
    from sage.rings.all      import *
  File "/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/all.py", line 68, in <module>
    from number_field.all import *
  File "/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/number_field/all.py", line 7, in <module>
    from totallyreal import enumerate_totallyreal_fields_prim
  File "sage/rings/number_field/totallyreal_data.pxd", line 16, in init sage.rings.number_field.totallyreal (build/cythonized/sage/rings/number_field/totallyreal.c:10339)
  File "sage/rings/number_field/totallyreal_data.pyx", line 39, in init sage.rings.number_field.totallyreal_data (build/cythonized/sage/rings/number_field/totallyreal_data.c:11133)
  File "/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py", line 465, in PolynomialRing
    R = _single_variate(base_ring, name, sparse, implementation)
  File "/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py", line 539, in _single_variate
    R = m.PolynomialRing_integral_domain(base_ring, name, sparse, implementation)
  File "/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py", line 1544, in __init__
    sparse=sparse, element_class=element_class)
  File "/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py", line 1451, in __init__
    sparse=sparse, element_class=element_class, category=category)
  File "/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py", line 305, in __init__
    from sage.matrix.matrix_space import is_MatrixSpace
  File "/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py", line 57, in <module>
    import matrix_mpolynomial_dense
ImportError: dlopen(/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so, 2): Symbol not found: __Z17initCanonicalFormv
  Referenced from: /Applications/sage-6.7/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so
  Expected in: flat namespace
 in /Applications/sage-6.7/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so
make: *** [doc-html] Error 1
```



---

archive/issue_comments_229648.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nIt appears that it should be generated by `initCanonicalForm` but no functions of that name is to be found in the source code I have for singular 4.0.2 here and I am expecting it to be the same for you. I think you may have old singular headers on your system that are interfering (`factory.h`) we'll have to develop a proper upgrade procedure to remove singular 3.1.x stuff before installing 4.x. That or the singular 4.x headers have not been installed properly. `local/include/factory/factory/factory.h` and `local/include/factory/factory.h` both have this function in singular 3.1.7 but it shouldn't be present in the equivalent headers from singular 4.x.",
    "created_at": "2015-05-25T02:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229648",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:46" align="right">comment:46</div>

It appears that it should be generated by `initCanonicalForm` but no functions of that name is to be found in the source code I have for singular 4.0.2 here and I am expecting it to be the same for you. I think you may have old singular headers on your system that are interfering (`factory.h`) we'll have to develop a proper upgrade procedure to remove singular 3.1.x stuff before installing 4.x. That or the singular 4.x headers have not been installed properly. `local/include/factory/factory/factory.h` and `local/include/factory/factory.h` both have this function in singular 3.1.7 but it shouldn't be present in the equivalent headers from singular 4.x.



---

archive/issue_comments_229649.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI don't seem to have a `local/include/factory` at all...",
    "created_at": "2015-05-25T05:08:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229649",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:47" align="right">comment:47</div>

I don't seem to have a `local/include/factory` at all...



---

archive/issue_comments_229650.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI really have to inspect the spkg. I think I went overboard with the `factory` in the path. Should have been `local/include/factory.h` and `local/include/factory/factory.h`. Do you have a `factory.h` and does it contains `initCanonicalForm`?",
    "created_at": "2015-05-25T06:41:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229650",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:48" align="right">comment:48</div>

I really have to inspect the spkg. I think I went overboard with the `factory` in the path. Should have been `local/include/factory.h` and `local/include/factory/factory.h`. Do you have a `factory.h` and does it contains `initCanonicalForm`?



---

archive/issue_comments_229651.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\n`make distclean` then `make` seems to have fixed my problems. I am apparently running Singular 4, albeit with the changes I mentioned earlier. At startup, I see the following:\n\n```\nring with rational coefficient field created\n_ring.ShortOut 1\n_ring.N 2\npolynomial ring over integers created\n_ring.ShortOut 1\n_ring.N 2\nring with rational coefficient field created\n_ring.ShortOut 1\n_ring.N 2\n```\nI found that in the source code, so I'm guessing this was put in to test.",
    "created_at": "2015-05-25T15:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229651",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:49" align="right">comment:49</div>

`make distclean` then `make` seems to have fixed my problems. I am apparently running Singular 4, albeit with the changes I mentioned earlier. At startup, I see the following:

```
ring with rational coefficient field created
_ring.ShortOut 1
_ring.N 2
polynomial ring over integers created
_ring.ShortOut 1
_ring.N 2
ring with rational coefficient field created
_ring.ShortOut 1
_ring.N 2
```
I found that in the source code, so I'm guessing this was put in to test.



---

archive/issue_comments_229652.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nWell, this is bad.\n\n```\nsage: R=PolynomialRing(GF(32003),'x',7)\nsage: I = sage.rings.ideal.Cyclic(R,7).homogenize()\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-2-59ae6a3e91c7> in <module>()\n----> 1 I = sage.rings.ideal.Cyclic(R,Integer(7)).homogenize()\n\n/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/ideal.pyc in Cyclic(R, n, homog, singular)\n   1607         n = R.ngens()\n   1608 \n-> 1609     singular.lib(\"poly\")\n   1610     R2 = R.change_ring(RationalField())\n   1611     R2._singular_().set_ring()\n\n/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in lib(self, lib, reload)\n    783         if not reload and lib in self.__libs:\n    784             return\n--> 785         self.eval('LIB \"%s\"'%lib)\n    786         self.__libs.append(lib)\n    787 \n\n/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in eval(self, x, allow_semicolon, strip, **kwds)\n    585             x += ';'\n    586 \n--> 587         s = Expect.eval(self, x, **kwds)\n    588 \n    589         if s.find(\"error\") != -1 or s.find(\"Segment fault\") != -1:\n\n/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)\n   1220                 elif split_lines:\n   1221                     return '\\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)\n-> 1222                                         for L in code.split('\\n') if L != ''])\n   1223                 else:\n   1224                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)\n\n/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed)\n    817         try:\n    818             if self._expect is None:\n--> 819                 self._start()\n    820             E = self._expect\n    821             try:\n\n/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in _start(self, alt_message)\n    410         \"\"\"\n    411         self.__libs = []\n--> 412         Expect._start(self, alt_message)\n    413         # Load some standard libraries.\n    414         self.lib('general')   # assumed loaded by misc/constants.py\n\n/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in _start(self, alt_message, block_during_init)\n    427                 # Change pexpect errors to RuntimeError\n    428                 raise RuntimeError(\"unable to start %s because the command %r failed: %s\\n%s\" %\n--> 429                         (self.name(), cmd, e, self._install_hints()))\n    430         except BaseException:\n    431             self._expect = None\n\nRuntimeError: unable to start singular because the command 'Singular -t --ticks-per-sec 1000' failed: The command was not found or was not executable: Singular.\n```",
    "created_at": "2015-05-25T15:56:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229652",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:50" align="right">comment:50</div>

Well, this is bad.

```
sage: R=PolynomialRing(GF(32003),'x',7)
sage: I = sage.rings.ideal.Cyclic(R,7).homogenize()
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-2-59ae6a3e91c7> in <module>()
----> 1 I = sage.rings.ideal.Cyclic(R,Integer(7)).homogenize()

/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/rings/ideal.pyc in Cyclic(R, n, homog, singular)
   1607         n = R.ngens()
   1608 
-> 1609     singular.lib("poly")
   1610     R2 = R.change_ring(RationalField())
   1611     R2._singular_().set_ring()

/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in lib(self, lib, reload)
    783         if not reload and lib in self.__libs:
    784             return
--> 785         self.eval('LIB "%s"'%lib)
    786         self.__libs.append(lib)
    787 

/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in eval(self, x, allow_semicolon, strip, **kwds)
    585             x += ';'
    586 
--> 587         s = Expect.eval(self, x, **kwds)
    588 
    589         if s.find("error") != -1 or s.find("Segment fault") != -1:

/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)
   1220                 elif split_lines:
   1221                     return '\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)
-> 1222                                         for L in code.split('\n') if L != ''])
   1223                 else:
   1224                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)

/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed)
    817         try:
    818             if self._expect is None:
--> 819                 self._start()
    820             E = self._expect
    821             try:

/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in _start(self, alt_message)
    410         """
    411         self.__libs = []
--> 412         Expect._start(self, alt_message)
    413         # Load some standard libraries.
    414         self.lib('general')   # assumed loaded by misc/constants.py

/Applications/sage-6.7/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in _start(self, alt_message, block_during_init)
    427                 # Change pexpect errors to RuntimeError
    428                 raise RuntimeError("unable to start %s because the command %r failed: %s\n%s" %
--> 429                         (self.name(), cmd, e, self._install_hints()))
    430         except BaseException:
    431             self._expect = None

RuntimeError: unable to start singular because the command 'Singular -t --ticks-per-sec 1000' failed: The command was not found or was not executable: Singular.
```



---

archive/issue_comments_229653.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nFor what it's worth, lots of other things work.: I can, for instance, compute an ideal's Gr\u00f6bner basis, its Hilbert [numerator, series, polynomial], and so forth.",
    "created_at": "2015-05-25T16:05:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229653",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:51" align="right">comment:51</div>

For what it's worth, lots of other things work.: I can, for instance, compute an ideal's Gröbner basis, its Hilbert [numerator, series, polynomial], and so forth.



---

archive/issue_comments_229654.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nIndeed, there is no Singular binary in local/bin. I presume this is the problem, though I have no idea what became of it.",
    "created_at": "2015-05-25T17:00:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229654",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:52" align="right">comment:52</div>

Indeed, there is no Singular binary in local/bin. I presume this is the problem, though I have no idea what became of it.



---

archive/issue_comments_229655.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI'm guessing that failure to install the singular binary is because of a symlink: `local/bin/singular' points to `local/bin/Singular` and removing the old (3.x) `Singular` wasn't enough to allow the new one in. I removed `local/bin/singular` and it's now working.\n\nThis may be an issue with Apple's file system, because after installing the new `Singular` I wasn't allowed to create the symlink.",
    "created_at": "2015-05-25T17:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229655",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:53" align="right">comment:53</div>

I'm guessing that failure to install the singular binary is because of a symlink: `local/bin/singular' points to `local/bin/Singular` and removing the old (3.x) `Singular` wasn't enough to allow the new one in. I removed `local/bin/singular` and it's now working.

This may be an issue with Apple's file system, because after installing the new `Singular` I wasn't allowed to create the symlink.



---

archive/issue_comments_229656.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\n`is_64_bit` is deprecated. In Cython, check `sizeof(the_type_that_you_care_about)` instead.\n\nDo not use `sys.maxsize`, that's much slower.",
    "created_at": "2015-05-25T18:25:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229656",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:54" align="right">comment:54</div>

`is_64_bit` is deprecated. In Cython, check `sizeof(the_type_that_you_care_about)` instead.

Do not use `sys.maxsize`, that's much slower.



---

archive/issue_comments_229657.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@johnperry-math](#comment%3A53):\n> I'm guessing that failure to install the singular binary is because of a symlink: `local/bin/singular' points to `local/bin/Singular` and removing the old (3.x) `Singular` wasn't enough to allow the new one in. I removed `local/bin/singular` and it's now working.\n> \n> This may be an issue with Apple's file system, because after installing the new `Singular` I wasn't allowed to create the symlink.\n\nYes you may have seen another ticket in which I demonstrated that something like `Singular` was really `singular`. OS X file system is not case sensitive but it gives the impression of being one.",
    "created_at": "2015-05-25T21:27:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229657",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@johnperry-math](#comment%3A53):
> I'm guessing that failure to install the singular binary is because of a symlink: `local/bin/singular' points to `local/bin/Singular` and removing the old (3.x) `Singular` wasn't enough to allow the new one in. I removed `local/bin/singular` and it's now working.
> 
> This may be an issue with Apple's file system, because after installing the new `Singular` I wasn't allowed to create the symlink.

Yes you may have seen another ticket in which I demonstrated that something like `Singular` was really `singular`. OS X file system is not case sensitive but it gives the impression of being one.



---

archive/issue_comments_229658.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@johnperry-math](#comment%3A34):\n> I just applied this to 6.4.1 and encountered the message,\n> \n>     fatal error: Singular/libsingular.h: No such file or directory\n> \n> while compiling\n> \n>     build/cythonized/sage/algebras/letterplace/free_algebra_element_letterplace.cpp\n> \n> Any ideas what causes this?\n\nIt's now certain that this, too, was caused by the failure to install `Singular` because `singular` exists in the directory (what can I say, it's a Mac). Removing that link and reinstalling the spkg fixed all these problems. \n\n**Meanwhile**, I discovered some memory-related bugs in the patch. For instance, ring.pyx has the line\n\n```\nassert( exponent == base_ring.degree() )\n```\nwhich causes a failure. I'm not sure why those should be equal (the test I used had `Zmod(2^3)` where `exponent==3` and `base_ring.degree()==1`), but commenting it out leads to a failure on these lines:\n\n```\n_param.GFChar     = ch;\n_param.GFDegree   = base_ring.degree();\n_param.GFPar_name = omStrDup(base_ring.gen());   \n```\nbecause `_param` has not been initialized. Adding\n\n```\n_param = <GFInfo *>omAlloc(sizeof(GFInfo));\n```\n**before** the access gives me a ring. However,\n\n1. I'm not sure whether `omAlloc` or one of the other `omAlloc*` commands is more appropriate (e.g., `omAlloc0`). Anyone know?\n2. I suppose this has to be freed somewhere... I know there's an obvious-sounding place, so I'll find it.\n\nThere are other places this change has to occur. One more question:\n\n* A few lines before the ones I cited above is the test for 64-bits. I've switched to jdemeyer's test (`sizeof(long)>4`). However, the code in the patch is exactly the same for both 32- and 64-bit. Is there a recommendation for what to do here? I'm not sufficiently familiar with this to know what to do.",
    "created_at": "2015-05-25T21:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229658",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@johnperry-math](#comment%3A34):
> I just applied this to 6.4.1 and encountered the message,
> 
>     fatal error: Singular/libsingular.h: No such file or directory
> 
> while compiling
> 
>     build/cythonized/sage/algebras/letterplace/free_algebra_element_letterplace.cpp
> 
> Any ideas what causes this?

It's now certain that this, too, was caused by the failure to install `Singular` because `singular` exists in the directory (what can I say, it's a Mac). Removing that link and reinstalling the spkg fixed all these problems. 

**Meanwhile**, I discovered some memory-related bugs in the patch. For instance, ring.pyx has the line

```
assert( exponent == base_ring.degree() )
```
which causes a failure. I'm not sure why those should be equal (the test I used had `Zmod(2^3)` where `exponent==3` and `base_ring.degree()==1`), but commenting it out leads to a failure on these lines:

```
_param.GFChar     = ch;
_param.GFDegree   = base_ring.degree();
_param.GFPar_name = omStrDup(base_ring.gen());   
```
because `_param` has not been initialized. Adding

```
_param = <GFInfo *>omAlloc(sizeof(GFInfo));
```
**before** the access gives me a ring. However,

1. I'm not sure whether `omAlloc` or one of the other `omAlloc*` commands is more appropriate (e.g., `omAlloc0`). Anyone know?
2. I suppose this has to be freed somewhere... I know there's an obvious-sounding place, so I'll find it.

There are other places this change has to occur. One more question:

* A few lines before the ones I cited above is the test for 64-bits. I've switched to jdemeyer's test (`sizeof(long)>4`). However, the code in the patch is exactly the same for both 32- and 64-bit. Is there a recommendation for what to do here? I'm not sufficiently familiar with this to know what to do.



---

archive/issue_comments_229659.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@johnperry-math](#comment%3A56):\n> **Meanwhile**, I discovered some memory-related bugs in the patch. For instance, ring.pyx has the line\n> \n> ```\n> assert( exponent == base_ring.degree() )\n> ```\n> which causes a failure. I'm not sure why those should be equal (the test I used had `Zmod(2^3)` where `exponent==3` and `base_ring.degree()==1`)...\n\nTo wit, the source code for `base_ring.degree()` is, in total,\n\n```\n    def degree(self):\n        \"\"\"\n        Return 1.\n\n        EXAMPLE::\n\n            sage: R = Integers(12345678900)\n            sage: R.degree()\n            1\n        \"\"\"\n        return integer.Integer(1)\n```\nI don't know what is meant by the degree of a ring here, so I'll need guidance. For now I've commented it out.",
    "created_at": "2015-05-25T21:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229659",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@johnperry-math](#comment%3A56):
> **Meanwhile**, I discovered some memory-related bugs in the patch. For instance, ring.pyx has the line
> 
> ```
> assert( exponent == base_ring.degree() )
> ```
> which causes a failure. I'm not sure why those should be equal (the test I used had `Zmod(2^3)` where `exponent==3` and `base_ring.degree()==1`)...

To wit, the source code for `base_ring.degree()` is, in total,

```
    def degree(self):
        """
        Return 1.

        EXAMPLE::

            sage: R = Integers(12345678900)
            sage: R.degree()
            1
        """
        return integer.Integer(1)
```
I don't know what is meant by the degree of a ring here, so I'll need guidance. For now I've commented it out.



---

archive/issue_comments_229660.json:
```json
{
    "body": "Changed branch from **[u/jakobkroeker/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed)** to **[u/john_perry/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/u/john_perry/ticket.17254.squashed)**",
    "created_at": "2015-05-25T23:39:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229660",
    "user": "https://github.com/johnperry-math"
}
```

Changed branch from **[u/jakobkroeker/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed)** to **[u/john_perry/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/u/john_perry/ticket.17254.squashed)**



---

archive/issue_comments_229661.json:
```json
{
    "body": "Changed commit from **[`3a512cd`](https://github.com/sagemath/sagetrac-mirror/commit/3a512cd7e08e21a4a4e66bfe9179290601717ba0)** to **[`1f4ebcb`](https://github.com/sagemath/sagetrac-mirror/commit/1f4ebcbf9e431a629ba1a899267dd9b42d4ed0cf)**",
    "created_at": "2015-05-25T23:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229661",
    "user": "https://github.com/johnperry-math"
}
```

Changed commit from **[`3a512cd`](https://github.com/sagemath/sagetrac-mirror/commit/3a512cd7e08e21a4a4e66bfe9179290601717ba0)** to **[`1f4ebcb`](https://github.com/sagemath/sagetrac-mirror/commit/1f4ebcbf9e431a629ba1a899267dd9b42d4ed0cf)**



---

archive/issue_comments_229662.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nPushed code should build on 6.7. Mac users may have problems; if so, delete `local/bin/singular` and then `sage-spkg singular`; it should work after that. (In fact, I have to do it again myself now.) I have to run to the train (leaving SD) or I'd do it before leaving.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bdb0851a98acb654ea8b47713d84a79924315450\"><code>bdb0851</code></a></td><td><code>first attempt to resolve</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f4ebcbf9e431a629ba1a899267dd9b42d4ed0cf\"><code>1f4ebcb</code></a></td><td><code>fix for _param and discrepancy between exponent and degree</code></td></tr></table>\n",
    "created_at": "2015-05-25T23:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229662",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:59" align="right">comment:59</div>

Pushed code should build on 6.7. Mac users may have problems; if so, delete `local/bin/singular` and then `sage-spkg singular`; it should work after that. (In fact, I have to do it again myself now.) I have to run to the train (leaving SD) or I'd do it before leaving.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bdb0851a98acb654ea8b47713d84a79924315450"><code>bdb0851</code></a></td><td><code>first attempt to resolve</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f4ebcbf9e431a629ba1a899267dd9b42d4ed0cf"><code>1f4ebcb</code></a></td><td><code>fix for _param and discrepancy between exponent and degree</code></td></tr></table>




---

archive/issue_comments_229663.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nForgot to remove that bad patch; that will come in a subsequent push. Still have the problem with `local/bin/Singular` because of the local symlink; it's a problem with the package itself, because I deleted both symlink and local copy before running the install. I don't know how to fix that, so advice would be appreciated.",
    "created_at": "2015-05-26T01:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229663",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:60" align="right">comment:60</div>

Forgot to remove that bad patch; that will come in a subsequent push. Still have the problem with `local/bin/Singular` because of the local symlink; it's a problem with the package itself, because I deleted both symlink and local copy before running the install. I don't know how to fix that, so advice would be appreciated.



---

archive/issue_comments_229664.json:
```json
{
    "body": "Changed commit from **[`1f4ebcb`](https://github.com/sagemath/sagetrac-mirror/commit/1f4ebcbf9e431a629ba1a899267dd9b42d4ed0cf)** to **[`9aa2456`](https://github.com/sagemath/sagetrac-mirror/commit/9aa24564da611fd23d29dd9c5866cfef0be5b4f2)**",
    "created_at": "2015-05-26T03:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229664",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1f4ebcb`](https://github.com/sagemath/sagetrac-mirror/commit/1f4ebcbf9e431a629ba1a899267dd9b42d4ed0cf)** to **[`9aa2456`](https://github.com/sagemath/sagetrac-mirror/commit/9aa24564da611fd23d29dd9c5866cfef0be5b4f2)**



---

archive/issue_comments_229665.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9aa24564da611fd23d29dd9c5866cfef0be5b4f2\"><code>9aa2456</code></a></td><td><code>delete stricmp.patch</code></td></tr></table>\n",
    "created_at": "2015-05-26T03:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229665",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9aa24564da611fd23d29dd9c5866cfef0be5b4f2"><code>9aa2456</code></a></td><td><code>delete stricmp.patch</code></td></tr></table>




---

archive/issue_comments_229666.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@johnperry-math](#comment%3A56):\n> However, the code in the patch is exactly the same for both 32- and 64-bit. Is there a recommendation for what to do here?\n\nObviously, replace\n\n```\nif condition:\n    X\nelse:\n    X\n```\nby\n\n```\nX\n```",
    "created_at": "2015-05-26T05:55:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229666",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@johnperry-math](#comment%3A56):
> However, the code in the patch is exactly the same for both 32- and 64-bit. Is there a recommendation for what to do here?

Obviously, replace

```
if condition:
    X
else:
    X
```
by

```
X
```



---

archive/issue_comments_229667.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@johnperry-math](#comment%3A56):\n> * A few lines before the ones I cited above is the test for 64-bits. I've switched to jdemeyer's test (`sizeof(long)>4`). However, the code in the patch is exactly the same for both 32- and 64-bit. Is there a recommendation for what to do here? I'm not sufficiently familiar with this to know what to do.\n\nLook at the diff for the old corresponding code: this doesn't have the branch.",
    "created_at": "2015-05-26T05:57:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229667",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@johnperry-math](#comment%3A56):
> * A few lines before the ones I cited above is the test for 64-bits. I've switched to jdemeyer's test (`sizeof(long)>4`). However, the code in the patch is exactly the same for both 32- and 64-bit. Is there a recommendation for what to do here? I'm not sufficiently familiar with this to know what to do.

Look at the diff for the old corresponding code: this doesn't have the branch.



---

archive/issue_comments_229668.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nI would also recommend you to keep the logic of the old code where applicable. For example, the old code started with\n\n```\nif ch.is_power_of(2):\nexponent = ch.nbits() -1\n    # it seems Singular uses ints somewhere\n    # internally, cf. #6051 (Sage) and #138 (Singular)\n    if exponent <= 30:\n```\nand I see no reason to change this.",
    "created_at": "2015-05-26T06:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229668",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:64" align="right">comment:64</div>

I would also recommend you to keep the logic of the old code where applicable. For example, the old code started with

```
if ch.is_power_of(2):
exponent = ch.nbits() -1
    # it seems Singular uses ints somewhere
    # internally, cf. #6051 (Sage) and #138 (Singular)
    if exponent <= 30:
```
and I see no reason to change this.



---

archive/issue_comments_229669.json:
```json
{
    "body": "Changed branch from **[u/john_perry/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/u/john_perry/ticket.17254.squashed)** to **[public/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17254)**",
    "created_at": "2015-08-04T12:51:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229669",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/john_perry/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/u/john_perry/ticket.17254.squashed)** to **[public/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17254)**



---

archive/issue_comments_229670.json:
```json
{
    "body": "Changed commit from **[`9aa2456`](https://github.com/sagemath/sagetrac-mirror/commit/9aa24564da611fd23d29dd9c5866cfef0be5b4f2)** to **[`ab68eb0`](https://github.com/sagemath/sagetrac-mirror/commit/ab68eb0be8aec650b12e3c922ce282f5bd506490)**",
    "created_at": "2015-08-04T12:51:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229670",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`9aa2456`](https://github.com/sagemath/sagetrac-mirror/commit/9aa24564da611fd23d29dd9c5866cfef0be5b4f2)** to **[`ab68eb0`](https://github.com/sagemath/sagetrac-mirror/commit/ab68eb0be8aec650b12e3c922ce282f5bd506490)**



---

archive/issue_comments_229671.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nnaive rebase.\n\nThe spkg is no longer available from boxen..\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab68eb0be8aec650b12e3c922ce282f5bd506490\"><code>ab68eb0</code></a></td><td><code>Merge branch 'u/john_perry/ticket.17254.squashed' into 6.9.b0</code></td></tr></table>\n",
    "created_at": "2015-08-04T12:51:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229671",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:65" align="right">comment:65</div>

naive rebase.

The spkg is no longer available from boxen..

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab68eb0be8aec650b12e3c922ce282f5bd506490"><code>ab68eb0</code></a></td><td><code>Merge branch 'u/john_perry/ticket.17254.squashed' into 6.9.b0</code></td></tr></table>




---

archive/issue_comments_229672.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\n> The [singular 4.0.1] spkg is no longer available from boxen..\n\nThat is unfortunate. \n@jdemeyer/@jpflori: could you upload the singular 4.0.1.p1 tarball to somewhere else?\n\n>naive rebase. [by chapoton]\n>Conflicts:\n>\tsrc/sage/libs/singular/singular-cdefs.pxi\n\nthe file `src/sage/libs/singular/singular-cdefs.pxi` is even missing in the ticket branch\n`public/ticket/17254` \n\n@fchapoton\nDid you set the ticket branch to broken `public/ticket/17254` instead of leaving it \n'`u/john_perry/ticket.17254.squashed`' by accident?",
    "created_at": "2015-08-18T09:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229672",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:66" align="right">comment:66</div>

> The [singular 4.0.1] spkg is no longer available from boxen..

That is unfortunate. 
@jdemeyer/@jpflori: could you upload the singular 4.0.1.p1 tarball to somewhere else?

>naive rebase. [by chapoton]
>Conflicts:
>	src/sage/libs/singular/singular-cdefs.pxi

the file `src/sage/libs/singular/singular-cdefs.pxi` is even missing in the ticket branch
`public/ticket/17254` 

@fchapoton
Did you set the ticket branch to broken `public/ticket/17254` instead of leaving it 
'`u/john_perry/ticket.17254.squashed`' by accident?



---

archive/issue_comments_229673.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nIt seems I don't have access to boxen anymore...",
    "created_at": "2015-08-18T09:30:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229673",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:67" align="right">comment:67</div>

It seems I don't have access to boxen anymore...



---

archive/issue_comments_229674.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nAnd I don't have the `p1` tarball Jeroen posted.",
    "created_at": "2015-08-18T09:33:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229674",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:68" align="right">comment:68</div>

And I don't have the `p1` tarball Jeroen posted.



---

archive/issue_comments_229675.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nI have a tarball answering that description. Up on the lmona.de server....\n\n[http://www.lmona.de/files/sage/singular-4.0.1p1.tar.bz2](http://www.lmona.de/files/sage/singular-4.0.1p1.tar.bz2)",
    "created_at": "2015-08-18T10:14:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229675",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:69" align="right">comment:69</div>

I have a tarball answering that description. Up on the lmona.de server....

[http://www.lmona.de/files/sage/singular-4.0.1p1.tar.bz2](http://www.lmona.de/files/sage/singular-4.0.1p1.tar.bz2)



---

archive/issue_comments_229676.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n **Lots** of stuff has changed in Singular 4. But now the attached branch is almost working.\n \n-Repackaged upstream tarball: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2)\n+Repackaged upstream tarball: [http://www.lmona.de/files/sage/singular-4.0.1p1.tar.bz2](http://www.lmona.de/files/sage/singular-4.0.1p1.tar.bz2)\n``````\n",
    "created_at": "2015-08-18T22:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229676",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 **Lots** of stuff has changed in Singular 4. But now the attached branch is almost working.
 
-Repackaged upstream tarball: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-4.0.1p1.tar.bz2)
+Repackaged upstream tarball: [http://www.lmona.de/files/sage/singular-4.0.1p1.tar.bz2](http://www.lmona.de/files/sage/singular-4.0.1p1.tar.bz2)
``````




---

archive/issue_comments_229677.json:
```json
{
    "body": "Changed commit from **[`ab68eb0`](https://github.com/sagemath/sagetrac-mirror/commit/ab68eb0be8aec650b12e3c922ce282f5bd506490)** to **[`aa40c90`](https://github.com/sagemath/sagetrac-mirror/commit/aa40c90711a6c50fe3b78fc0668370a9046f20a2)**",
    "created_at": "2015-08-18T23:31:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229677",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed commit from **[`ab68eb0`](https://github.com/sagemath/sagetrac-mirror/commit/ab68eb0be8aec650b12e3c922ce282f5bd506490)** to **[`aa40c90`](https://github.com/sagemath/sagetrac-mirror/commit/aa40c90711a6c50fe3b78fc0668370a9046f20a2)**



---

archive/issue_comments_229678.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nbumped to recent sage dvelopment version.\n\nThe build may fail with 'undefined ..' error again.\nProbably this can be fixed with `./sage -ba`; \nif not, `make distclean`-bazooka should work...\n\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e259d1a4b38a049fa619ff21041bf5726c4b7a1\"><code>8e259d1</code></a></td><td><code>merged with recent develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa40c90711a6c50fe3b78fc0668370a9046f20a2\"><code>aa40c90</code></a></td><td><code>check for local tarball</code></td></tr></table>\n",
    "created_at": "2015-08-18T23:31:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229678",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:71" align="right">comment:71</div>

bumped to recent sage dvelopment version.

The build may fail with 'undefined ..' error again.
Probably this can be fixed with `./sage -ba`; 
if not, `make distclean`-bazooka should work...


---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e259d1a4b38a049fa619ff21041bf5726c4b7a1"><code>8e259d1</code></a></td><td><code>merged with recent develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa40c90711a6c50fe3b78fc0668370a9046f20a2"><code>aa40c90</code></a></td><td><code>check for local tarball</code></td></tr></table>




---

archive/issue_comments_229679.json:
```json
{
    "body": "Changed branch from **[public/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17254)** to **[u/jakobkroeker/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed)**",
    "created_at": "2015-08-18T23:31:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229679",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed branch from **[public/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17254)** to **[u/jakobkroeker/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed)**



---

archive/issue_comments_229680.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\n@fchapoton\n\n> naive rebase.\n\nexcept for the issue with `src/sage/libs/singular/singular-cdefs.pxi`, how did you do the rebase? \nDid you a rebase by hand, or did you create a patch after merge and then apply the patch to 6.9.b0?",
    "created_at": "2015-08-18T23:49:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229680",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:72" align="right">comment:72</div>

@fchapoton

> naive rebase.

except for the issue with `src/sage/libs/singular/singular-cdefs.pxi`, how did you do the rebase? 
Did you a rebase by hand, or did you create a patch after merge and then apply the patch to 6.9.b0?



---

archive/issue_comments_229681.json:
```json
{
    "body": "Changed commit from **[`aa40c90`](https://github.com/sagemath/sagetrac-mirror/commit/aa40c90711a6c50fe3b78fc0668370a9046f20a2)** to **[`72ef927`](https://github.com/sagemath/sagetrac-mirror/commit/72ef9273b6d33a7771fd7c42a47ac5e430a81197)**",
    "created_at": "2015-08-19T18:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229681",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aa40c90`](https://github.com/sagemath/sagetrac-mirror/commit/aa40c90711a6c50fe3b78fc0668370a9046f20a2)** to **[`72ef927`](https://github.com/sagemath/sagetrac-mirror/commit/72ef9273b6d33a7771fd7c42a47ac5e430a81197)**



---

archive/issue_comments_229682.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72ef9273b6d33a7771fd7c42a47ac5e430a81197\"><code>72ef927</code></a></td><td><code>squashed singular upgrade changes in one commit</code></td></tr></table>\n",
    "created_at": "2015-08-19T18:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229682",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72ef9273b6d33a7771fd7c42a47ac5e430a81197"><code>72ef927</code></a></td><td><code>squashed singular upgrade changes in one commit</code></td></tr></table>




---

archive/issue_comments_229683.json:
```json
{
    "body": "Changed commit from **[`72ef927`](https://github.com/sagemath/sagetrac-mirror/commit/72ef9273b6d33a7771fd7c42a47ac5e430a81197)** to **[`4adc75d`](https://github.com/sagemath/sagetrac-mirror/commit/4adc75d8a3982aed7b9e66a9a567cfeb4c2fc81b)**",
    "created_at": "2015-08-19T18:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229683",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`72ef927`](https://github.com/sagemath/sagetrac-mirror/commit/72ef9273b6d33a7771fd7c42a47ac5e430a81197)** to **[`4adc75d`](https://github.com/sagemath/sagetrac-mirror/commit/4adc75d8a3982aed7b9e66a9a567cfeb4c2fc81b)**



---

archive/issue_comments_229684.json:
```json
{
    "body": "<div id=\"comment:74\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4adc75d8a3982aed7b9e66a9a567cfeb4c2fc81b\"><code>4adc75d</code></a></td><td><code>squashed singular upgrade changes in one commit</code></td></tr></table>\n",
    "created_at": "2015-08-19T18:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229684",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:74"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4adc75d8a3982aed7b9e66a9a567cfeb4c2fc81b"><code>4adc75d</code></a></td><td><code>squashed singular upgrade changes in one commit</code></td></tr></table>




---

archive/issue_comments_229685.json:
```json
{
    "body": "<div id=\"comment:75\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f492ef2752f810b0fec487ac6bd7044c5d75827c\"><code>f492ef2</code></a></td><td><code>squashed singular upgrade changes in one commit</code></td></tr></table>\n",
    "created_at": "2015-08-19T18:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229685",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:75"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f492ef2752f810b0fec487ac6bd7044c5d75827c"><code>f492ef2</code></a></td><td><code>squashed singular upgrade changes in one commit</code></td></tr></table>




---

archive/issue_comments_229686.json:
```json
{
    "body": "Changed commit from **[`4adc75d`](https://github.com/sagemath/sagetrac-mirror/commit/4adc75d8a3982aed7b9e66a9a567cfeb4c2fc81b)** to **[`f492ef2`](https://github.com/sagemath/sagetrac-mirror/commit/f492ef2752f810b0fec487ac6bd7044c5d75827c)**",
    "created_at": "2015-08-19T18:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229686",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4adc75d`](https://github.com/sagemath/sagetrac-mirror/commit/4adc75d8a3982aed7b9e66a9a567cfeb4c2fc81b)** to **[`f492ef2`](https://github.com/sagemath/sagetrac-mirror/commit/f492ef2752f810b0fec487ac6bd7044c5d75827c)**



---

archive/issue_comments_229687.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\n@johnperry-math\nthanks for the bugfix!\n\n\n> I am willing to work on this\n\nsomehow I overlooked your messages in my emails in the past.Are you still available for help? \nMaybe we could work together on the remaining issues? (skype?)\n\nAn example of creating extension fields can be found in Singulars\n`libpolys/tests/polys_test.h :: test_Q_Ext_a()`)\nwhile the basic data structure idea is sketched in \n`libpolys/polys/ext_fields/algext.h`",
    "created_at": "2015-08-19T20:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229687",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:76" align="right">comment:76</div>

@johnperry-math
thanks for the bugfix!


> I am willing to work on this

somehow I overlooked your messages in my emails in the past.Are you still available for help? 
Maybe we could work together on the remaining issues? (skype?)

An example of creating extension fields can be found in Singulars
`libpolys/tests/polys_test.h :: test_Q_Ext_a()`)
while the basic data structure idea is sketched in 
`libpolys/polys/ext_fields/algext.h`



---

archive/issue_comments_229688.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A76):\n> @johnperry-math\n> somehow I overlooked your messages in my emails in the past.Are you still available for help? \n> Maybe we could work together on the remaining issues? (skype?)\n\nI'm willing to collaborate on it, but I've had a more pressing project which has consumed my attention/free time. I thought I'd be done with it months ago :-) so I can't promise to be very helpful and/or focus on this at the moment, but I do hope to be available from time to time, until the current project passes in which case I could focus on this a little bit.",
    "created_at": "2015-08-20T15:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229688",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:77" align="right">comment:77</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A76):
> @johnperry-math
> somehow I overlooked your messages in my emails in the past.Are you still available for help? 
> Maybe we could work together on the remaining issues? (skype?)

I'm willing to collaborate on it, but I've had a more pressing project which has consumed my attention/free time. I thought I'd be done with it months ago :-) so I can't promise to be very helpful and/or focus on this at the moment, but I do hope to be available from time to time, until the current project passes in which case I could focus on this a little bit.



---

archive/issue_comments_229689.json:
```json
{
    "body": "Changed commit from **[`f492ef2`](https://github.com/sagemath/sagetrac-mirror/commit/f492ef2752f810b0fec487ac6bd7044c5d75827c)** to **[`90cefc5`](https://github.com/sagemath/sagetrac-mirror/commit/90cefc5509dbe54f05781a82d76935319da3364a)**",
    "created_at": "2015-08-24T00:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229689",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed commit from **[`f492ef2`](https://github.com/sagemath/sagetrac-mirror/commit/f492ef2752f810b0fec487ac6bd7044c5d75827c)** to **[`90cefc5`](https://github.com/sagemath/sagetrac-mirror/commit/90cefc5509dbe54f05781a82d76935319da3364a)**



---

archive/issue_comments_229690.json:
```json
{
    "body": "Changed branch from **[u/jakobkroeker/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed)** to **[u/jakobkroeker/ticket.17254.squashed.new](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed.new)**",
    "created_at": "2015-08-24T00:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229690",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed branch from **[u/jakobkroeker/ticket.17254.squashed](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed)** to **[u/jakobkroeker/ticket.17254.squashed.new](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed.new)**



---

archive/issue_comments_229691.json:
```json
{
    "body": "<div id=\"comment:78\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90cefc5509dbe54f05781a82d76935319da3364a\"><code>90cefc5</code></a></td><td><code>bugfixes</code></td></tr></table>\n",
    "created_at": "2015-08-24T00:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229691",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:78"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90cefc5509dbe54f05781a82d76935319da3364a"><code>90cefc5</code></a></td><td><code>bugfixes</code></td></tr></table>




---

archive/issue_comments_229692.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\n-added support for extensions over QQ; fixed some bugs of mine\n\nopen tasks: \n-put back `si2sa_GFqGivaro, si2sa_GFqNTLGF2E, si2sa_GFq_generic`\n\n-and fix failing tests - a lot of tests (about 100) still fail:\n\n`naMap00()` call in `singular.pyx` crashes - either I use it incorrectly or there is a bug in Singular.",
    "created_at": "2015-08-24T00:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229692",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:79" align="right">comment:79</div>

-added support for extensions over QQ; fixed some bugs of mine

open tasks: 
-put back `si2sa_GFqGivaro, si2sa_GFqNTLGF2E, si2sa_GFq_generic`

-and fix failing tests - a lot of tests (about 100) still fail:

`naMap00()` call in `singular.pyx` crashes - either I use it incorrectly or there is a bug in Singular.



---

archive/issue_comments_229693.json:
```json
{
    "body": "Changed commit from **[`90cefc5`](https://github.com/sagemath/sagetrac-mirror/commit/90cefc5509dbe54f05781a82d76935319da3364a)** to **[`b4d0495`](https://github.com/sagemath/sagetrac-mirror/commit/b4d049557c374f61a497d5c61d27ca13b2993281)**",
    "created_at": "2015-08-24T00:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229693",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`90cefc5`](https://github.com/sagemath/sagetrac-mirror/commit/90cefc5509dbe54f05781a82d76935319da3364a)** to **[`b4d0495`](https://github.com/sagemath/sagetrac-mirror/commit/b4d049557c374f61a497d5c61d27ca13b2993281)**



---

archive/issue_comments_229694.json:
```json
{
    "body": "<div id=\"comment:80\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4d049557c374f61a497d5c61d27ca13b2993281\"><code>b4d0495</code></a></td><td><code>removed printouts</code></td></tr></table>\n",
    "created_at": "2015-08-24T00:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229694",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:80"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4d049557c374f61a497d5c61d27ca13b2993281"><code>b4d0495</code></a></td><td><code>removed printouts</code></td></tr></table>




---

archive/issue_comments_229695.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nrepackaged latest Singular\n\nhttps://www.dropbox.com/s/3io9k5srkcjrysr/singular-4.0.2.latest.tar.bz2?dl=0",
    "created_at": "2015-08-25T12:03:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229695",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:81" align="right">comment:81</div>

repackaged latest Singular

https://www.dropbox.com/s/3io9k5srkcjrysr/singular-4.0.2.latest.tar.bz2?dl=0



---

archive/issue_comments_229696.json:
```json
{
    "body": "<div id=\"comment:82\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e14c77bd2222d901b33588f0f67bb694c3c1b48\"><code>5e14c77</code></a></td><td><code>updated to latest singular</code></td></tr></table>\n",
    "created_at": "2015-08-25T12:33:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229696",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:82"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e14c77bd2222d901b33588f0f67bb694c3c1b48"><code>5e14c77</code></a></td><td><code>updated to latest singular</code></td></tr></table>




---

archive/issue_comments_229697.json:
```json
{
    "body": "Changed commit from **[`b4d0495`](https://github.com/sagemath/sagetrac-mirror/commit/b4d049557c374f61a497d5c61d27ca13b2993281)** to **[`5e14c77`](https://github.com/sagemath/sagetrac-mirror/commit/5e14c77bd2222d901b33588f0f67bb694c3c1b48)**",
    "created_at": "2015-08-25T12:33:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229697",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b4d0495`](https://github.com/sagemath/sagetrac-mirror/commit/b4d049557c374f61a497d5c61d27ca13b2993281)** to **[`5e14c77`](https://github.com/sagemath/sagetrac-mirror/commit/5e14c77bd2222d901b33588f0f67bb694c3c1b48)**



---

archive/issue_comments_229698.json:
```json
{
    "body": "Changed commit from **[`5e14c77`](https://github.com/sagemath/sagetrac-mirror/commit/5e14c77bd2222d901b33588f0f67bb694c3c1b48)** to **[`179ecd8`](https://github.com/sagemath/sagetrac-mirror/commit/179ecd8b461135724979671c786301e515abb00c)**",
    "created_at": "2015-08-25T12:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229698",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5e14c77`](https://github.com/sagemath/sagetrac-mirror/commit/5e14c77bd2222d901b33588f0f67bb694c3c1b48)** to **[`179ecd8`](https://github.com/sagemath/sagetrac-mirror/commit/179ecd8b461135724979671c786301e515abb00c)**



---

archive/issue_comments_229699.json:
```json
{
    "body": "<div id=\"comment:83\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/179ecd8b461135724979671c786301e515abb00c\"><code>179ecd8</code></a></td><td><code>support building singular in debug mode</code></td></tr></table>\n",
    "created_at": "2015-08-25T12:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229699",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:83"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/179ecd8b461135724979671c786301e515abb00c"><code>179ecd8</code></a></td><td><code>support building singular in debug mode</code></td></tr></table>




---

archive/issue_comments_229700.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n **Lots** of stuff has changed in Singular 4. But now the attached branch is almost working.\n \n-Repackaged upstream tarball: [http://www.lmona.de/files/sage/singular-4.0.1p1.tar.bz2](http://www.lmona.de/files/sage/singular-4.0.1p1.tar.bz2)\n+Repackaged upstream tarball: [https://www.dropbox.com/s/3io9k5srkcjrysr/singular-4.0.2.latest.tar.bz2?dl=0](https://www.dropbox.com/s/3io9k5srkcjrysr/singular-4.0.2.latest.tar.bz2?dl=0)\n``````\n",
    "created_at": "2015-08-27T09:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229700",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 **Lots** of stuff has changed in Singular 4. But now the attached branch is almost working.
 
-Repackaged upstream tarball: [http://www.lmona.de/files/sage/singular-4.0.1p1.tar.bz2](http://www.lmona.de/files/sage/singular-4.0.1p1.tar.bz2)
+Repackaged upstream tarball: [https://www.dropbox.com/s/3io9k5srkcjrysr/singular-4.0.2.latest.tar.bz2?dl=0](https://www.dropbox.com/s/3io9k5srkcjrysr/singular-4.0.2.latest.tar.bz2?dl=0)
``````




---

archive/issue_comments_229701.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\n@malb\n\nwhile upgrading to Singular 4 I'm currently hit a segfault in Singular for \n\n```\nsage: x = var('x')\nsage: K.<z> = QQ.extension(x^2 + 1)\nsage: P.<v,w> = K[]\nsage: P._singular_() \nsage: P(1) # crash\n```\n\nSince I neither familiar enough with the sage interface to Singular nor \nwith Singular internals, I'm currently stuck. Could you take a look?",
    "created_at": "2015-08-27T09:14:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229701",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:85" align="right">comment:85</div>

@malb

while upgrading to Singular 4 I'm currently hit a segfault in Singular for 

```
sage: x = var('x')
sage: K.<z> = QQ.extension(x^2 + 1)
sage: P.<v,w> = K[]
sage: P._singular_() 
sage: P(1) # crash
```

Since I neither familiar enough with the sage interface to Singular nor 
with Singular internals, I'm currently stuck. Could you take a look?



---

archive/issue_comments_229702.json:
```json
{
    "body": "Author: **jakobkroeker**",
    "created_at": "2015-08-27T10:15:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229702",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Author: **jakobkroeker**



---

archive/issue_comments_229703.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nSo far, I have no luck even building this. Did you see this before:\n\n```\nImportError: \u2026/sage-review/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so: undefined symbol: _Z17initCanonicalFormv\n```",
    "created_at": "2015-08-27T16:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229703",
    "user": "https://github.com/malb"
}
```

<div id="comment:87" align="right">comment:87</div>

So far, I have no luck even building this. Did you see this before:

```
ImportError: …/sage-review/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so: undefined symbol: _Z17initCanonicalFormv
```



---

archive/issue_comments_229704.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\n> So far, I have no luck even building this. Did you see this before:\n> ImportError: \u2026/sage-review/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so: undefined symbol: _Z17initCanonicalFormv\n\nYes. These are clearly artifacts from singular 3.1.7.\nIn Singular 4  is no 'initCanonicalForm'. \n\nEither this is a caching issue, incorrect dependency issue(in sage/cython)\nor somewhere are files from 3.1.7 left. \nOn which OS do you build singular( See also comment 55 )?\nDid you try 'make distclean'? ( If you have a better solution for this, please share it)",
    "created_at": "2015-08-27T17:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229704",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:88" align="right">comment:88</div>

> So far, I have no luck even building this. Did you see this before:
> ImportError: …/sage-review/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so: undefined symbol: _Z17initCanonicalFormv

Yes. These are clearly artifacts from singular 3.1.7.
In Singular 4  is no 'initCanonicalForm'. 

Either this is a caching issue, incorrect dependency issue(in sage/cython)
or somewhere are files from 3.1.7 left. 
On which OS do you build singular( See also comment 55 )?
Did you try 'make distclean'? ( If you have a better solution for this, please share it)



---

archive/issue_comments_229705.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A88):\n> Either this is a caching issue, incorrect dependency issue(in sage/cython)\n> or somewhere are files from 3.1.7 left.\n\nIf it is a dependency issue (which looks the most likely), please make a *new ticket* for it.",
    "created_at": "2015-08-27T18:07:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229705",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:89" align="right">comment:89</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A88):
> Either this is a caching issue, incorrect dependency issue(in sage/cython)
> or somewhere are files from 3.1.7 left.

If it is a dependency issue (which looks the most likely), please make a *new ticket* for it.



---

archive/issue_comments_229706.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nIndeed, building from scratch made it go away \u2026 this will be fun to deal with eventually.",
    "created_at": "2015-08-31T11:08:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229706",
    "user": "https://github.com/malb"
}
```

<div id="comment:90" align="right">comment:90</div>

Indeed, building from scratch made it go away … this will be fun to deal with eventually.



---

archive/issue_comments_229707.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nHi, I have rebuild Singular + Sage extension with SAGE_DEBUG=yes and it seems trouble starts a few lines earlier in your minimal example:\n\n```\nsage: x = var('x')\nsage: K.<z> = QQ.extension(x^2 + 1)\nsage: P.<v,w> = K[]\n***omError_WrongSize: wrong size specification of addr                                                                                                                                                           [677/4609]\n occured at: \n  #0 at ??:0                 in ??                  \n occured for addr:0x7f7c9b303190 size:32 specified size:24\n\n// ***dPolyReportError: memory error \n occured at\n occured for poly: z2+1  addr:0x7f7c9b303190 size:32\n***omError_WrongSize: wrong size specification of addr\n occured at: \n  #0 at ??:0                 in ??                  \n occured for addr:0x7f7c9b303190 size:32 specified size:24\n\n// ***dPolyReportError: memory error \n occured at\n occured for poly: !!longrat: NULL in monomials/p_polys.cc:3598\n!!longrat: NULL in monomials/p_polys.cc:3598\noz2+oz2+...  addr:0x7f7c9b303190 size:32\n***omError_WrongSize: wrong size specification of addr\n occured at: \n  #0 at ??:0                 in ??                  \n occured for addr:0x7f7c9b303190 size:32 specified size:24\n\n// ***dPolyReportError: memory error \n occured at\n occured for poly: !!longrat: NULL in monomials/p_polys.cc:3598\n!!longrat: NULL in monomials/p_polys.cc:3598\noz2+oz2+...  addr:0x7f7c9b303190 size:32\n***omError_WrongSize: wrong size specification of addr\n occured at: \n  #0 at ??:0                 in ??                  \n occured for addr:0x7f7c9b303190 size:32 specified size:24\n\n// ***dPolyReportError: memory error \n occured at\n occured for poly: !!longrat: NULL in monomials/p_polys.cc:3598\n!!longrat: NULL in monomials/p_polys.cc:3598\noz2+oz2+...  addr:0x7f7c9b303190 size:32\n***omError_WrongSize: wrong size specification of addr\n occured at: \n  #0 at ??:0                 in ??                  \n occured for addr:0x7f7c9b303190 size:32 specified size:24\n\n// ***dPolyReportError: memory error \n occured at\n occured for poly: !!longrat: NULL in monomials/p_polys.cc:3598\n!!longrat: NULL in monomials/p_polys.cc:3598\noz2+oz2+...  addr:0x7f7c9b303190 size:32\n```",
    "created_at": "2015-08-31T13:06:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229707",
    "user": "https://github.com/malb"
}
```

<div id="comment:91" align="right">comment:91</div>

Hi, I have rebuild Singular + Sage extension with SAGE_DEBUG=yes and it seems trouble starts a few lines earlier in your minimal example:

```
sage: x = var('x')
sage: K.<z> = QQ.extension(x^2 + 1)
sage: P.<v,w> = K[]
***omError_WrongSize: wrong size specification of addr                                                                                                                                                           [677/4609]
 occured at: 
  #0 at ??:0                 in ??                  
 occured for addr:0x7f7c9b303190 size:32 specified size:24

// ***dPolyReportError: memory error 
 occured at
 occured for poly: z2+1  addr:0x7f7c9b303190 size:32
***omError_WrongSize: wrong size specification of addr
 occured at: 
  #0 at ??:0                 in ??                  
 occured for addr:0x7f7c9b303190 size:32 specified size:24

// ***dPolyReportError: memory error 
 occured at
 occured for poly: !!longrat: NULL in monomials/p_polys.cc:3598
!!longrat: NULL in monomials/p_polys.cc:3598
oz2+oz2+...  addr:0x7f7c9b303190 size:32
***omError_WrongSize: wrong size specification of addr
 occured at: 
  #0 at ??:0                 in ??                  
 occured for addr:0x7f7c9b303190 size:32 specified size:24

// ***dPolyReportError: memory error 
 occured at
 occured for poly: !!longrat: NULL in monomials/p_polys.cc:3598
!!longrat: NULL in monomials/p_polys.cc:3598
oz2+oz2+...  addr:0x7f7c9b303190 size:32
***omError_WrongSize: wrong size specification of addr
 occured at: 
  #0 at ??:0                 in ??                  
 occured for addr:0x7f7c9b303190 size:32 specified size:24

// ***dPolyReportError: memory error 
 occured at
 occured for poly: !!longrat: NULL in monomials/p_polys.cc:3598
!!longrat: NULL in monomials/p_polys.cc:3598
oz2+oz2+...  addr:0x7f7c9b303190 size:32
***omError_WrongSize: wrong size specification of addr
 occured at: 
  #0 at ??:0                 in ??                  
 occured for addr:0x7f7c9b303190 size:32 specified size:24

// ***dPolyReportError: memory error 
 occured at
 occured for poly: !!longrat: NULL in monomials/p_polys.cc:3598
!!longrat: NULL in monomials/p_polys.cc:3598
oz2+oz2+...  addr:0x7f7c9b303190 size:32
```



---

archive/issue_comments_229708.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nReplying to [@malb](#comment%3A91):\n> Hi, I have rebuild Singular + Sage extension with SAGE_DEBUG=yes and it seems trouble starts a few lines earlier in your minimal example:\n> \n> ```\n> sage: x = var('x')\n> sage: K.<z> = QQ.extension(x^2 + 1)\n> sage: P.<v,w> = K[]\n> ***omError_WrongSize: wrong size specification of addr [...] \n> ```\n\nDo you know in detail what happens or should happen in sage for \n\n```\nsage: P.<v,w> = K[]\nsage: P(1) \n```\n\nbehind the scenes? \nWith that information we could ask Singular's developers if we use `libSingular` correctly.",
    "created_at": "2015-09-02T20:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229708",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:92" align="right">comment:92</div>

Replying to [@malb](#comment%3A91):
> Hi, I have rebuild Singular + Sage extension with SAGE_DEBUG=yes and it seems trouble starts a few lines earlier in your minimal example:
> 
> ```
> sage: x = var('x')
> sage: K.<z> = QQ.extension(x^2 + 1)
> sage: P.<v,w> = K[]
> ***omError_WrongSize: wrong size specification of addr [...] 
> ```

Do you know in detail what happens or should happen in sage for 

```
sage: P.<v,w> = K[]
sage: P(1) 
```

behind the scenes? 
With that information we could ask Singular's developers if we use `libSingular` correctly.



---

archive/issue_comments_229709.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nIt'll construct a ring for the extension and then a ring in in v, w. I'll try to investigate further what's going wrong there (sorry, I'm being slow on this)",
    "created_at": "2015-09-03T07:53:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229709",
    "user": "https://github.com/malb"
}
```

<div id="comment:93" align="right">comment:93</div>

It'll construct a ring for the extension and then a ring in in v, w. I'll try to investigate further what's going wrong there (sorry, I'm being slow on this)



---

archive/issue_comments_229710.json:
```json
{
    "body": "Changed commit from **[`179ecd8`](https://github.com/sagemath/sagetrac-mirror/commit/179ecd8b461135724979671c786301e515abb00c)** to **[`7803030`](https://github.com/sagemath/sagetrac-mirror/commit/7803030893acbea4a6f54c1a3ee3d08ce1d04042)**",
    "created_at": "2015-09-09T20:19:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229710",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`179ecd8`](https://github.com/sagemath/sagetrac-mirror/commit/179ecd8b461135724979671c786301e515abb00c)** to **[`7803030`](https://github.com/sagemath/sagetrac-mirror/commit/7803030893acbea4a6f54c1a3ee3d08ce1d04042)**



---

archive/issue_comments_229711.json:
```json
{
    "body": "<div id=\"comment:94\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7803030893acbea4a6f54c1a3ee3d08ce1d04042\"><code>7803030</code></a></td><td><code>located algext issue</code></td></tr></table>\n",
    "created_at": "2015-09-09T20:19:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229711",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:94"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7803030893acbea4a6f54c1a3ee3d08ce1d04042"><code>7803030</code></a></td><td><code>located algext issue</code></td></tr></table>




---

archive/issue_comments_229712.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nReplying to [@malb](#comment%3A93):\n> It'll construct a ring for the extension and then a ring in in v, w. I'll try to investigate further what's going wrong there (sorry, I'm being slow on this)\n\n>\n> trouble starts a few lines earlier in your minimal example:\n\nIndeed. With printouts I tracked down the issue to ring creation in \n`src/sage/libs/singular/ring.pyx`\nI guess that I incorrectly assembly the minpoly in ring construction\n(omalloc magic or whatever)\nOr there is an issue with the `AlgExtInfo` declaration or in `nInitChar()` call.\n\nCould you take a look or even fix it?\nSee the corresponding Singular example `test_Q_Ext_a()` in \n`latest/libpolys/tests/polys_test.h`",
    "created_at": "2015-09-09T20:31:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229712",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:95" align="right">comment:95</div>

Replying to [@malb](#comment%3A93):
> It'll construct a ring for the extension and then a ring in in v, w. I'll try to investigate further what's going wrong there (sorry, I'm being slow on this)

>
> trouble starts a few lines earlier in your minimal example:

Indeed. With printouts I tracked down the issue to ring creation in 
`src/sage/libs/singular/ring.pyx`
I guess that I incorrectly assembly the minpoly in ring construction
(omalloc magic or whatever)
Or there is an issue with the `AlgExtInfo` declaration or in `nInitChar()` call.

Could you take a look or even fix it?
See the corresponding Singular example `test_Q_Ext_a()` in 
`latest/libpolys/tests/polys_test.h`



---

archive/issue_comments_229713.json:
```json
{
    "body": "Changed branch from **[u/jakobkroeker/ticket.17254.squashed.new](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed.new)** to **[u/jdemeyer/ticket.17254.squashed.new](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket.17254.squashed.new)**",
    "created_at": "2015-09-10T12:09:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229713",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/jakobkroeker/ticket.17254.squashed.new](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed.new)** to **[u/jdemeyer/ticket.17254.squashed.new](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket.17254.squashed.new)**



---

archive/issue_comments_229714.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A88):\n> > So far, I have no luck even building this. Did you see this before:\n> > ImportError: \u2026/sage-review/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so: undefined symbol: _Z17initCanonicalFormv\n\n> \n> Yes. These are clearly artifacts from singular 3.1.7.\n> In Singular 4  is no 'initCanonicalForm'.\n\nThe problem was with the include path containing old files, this is now fixed.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f7f7f10c73bee55118e2644546a6dfa08bae2bd\"><code>1f7f7f1</code></a></td><td><code>Fix Singular include path</code></td></tr></table>\n",
    "created_at": "2015-09-10T12:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229714",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A88):
> > So far, I have no luck even building this. Did you see this before:
> > ImportError: …/sage-review/local/lib/python2.7/site-packages/sage/matrix/matrix_mpolynomial_dense.so: undefined symbol: _Z17initCanonicalFormv

> 
> Yes. These are clearly artifacts from singular 3.1.7.
> In Singular 4  is no 'initCanonicalForm'.

The problem was with the include path containing old files, this is now fixed.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f7f7f10c73bee55118e2644546a6dfa08bae2bd"><code>1f7f7f1</code></a></td><td><code>Fix Singular include path</code></td></tr></table>




---

archive/issue_events_244026.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-10T12:10:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "title_is": "Upgrade to Singular-4-0-2",
    "title_was": "Upgrade to Singular-4-0-1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244026"
}
```



---

archive/issue_comments_229715.json:
```json
{
    "body": "Changed commit from **[`7803030`](https://github.com/sagemath/sagetrac-mirror/commit/7803030893acbea4a6f54c1a3ee3d08ce1d04042)** to **[`1f7f7f1`](https://github.com/sagemath/sagetrac-mirror/commit/1f7f7f10c73bee55118e2644546a6dfa08bae2bd)**",
    "created_at": "2015-09-10T12:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229715",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`7803030`](https://github.com/sagemath/sagetrac-mirror/commit/7803030893acbea4a6f54c1a3ee3d08ce1d04042)** to **[`1f7f7f1`](https://github.com/sagemath/sagetrac-mirror/commit/1f7f7f10c73bee55118e2644546a6dfa08bae2bd)**



---

archive/issue_comments_229716.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nAny progress Martin?\nI'll rebuild a debug version of Sage and give it a try as well in the next few days.",
    "created_at": "2015-10-06T09:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229716",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:98" align="right">comment:98</div>

Any progress Martin?
I'll rebuild a debug version of Sage and give it a try as well in the next few days.



---

archive/issue_comments_229717.json:
```json
{
    "body": "Changed commit from **[`1f7f7f1`](https://github.com/sagemath/sagetrac-mirror/commit/1f7f7f10c73bee55118e2644546a6dfa08bae2bd)** to **[`b39fe93`](https://github.com/sagemath/sagetrac-mirror/commit/b39fe932f1938dadd332bd54c007d7c95a147a6e)**",
    "created_at": "2015-10-08T13:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229717",
    "user": "https://github.com/jpflori"
}
```

Changed commit from **[`1f7f7f1`](https://github.com/sagemath/sagetrac-mirror/commit/1f7f7f10c73bee55118e2644546a6dfa08bae2bd)** to **[`b39fe93`](https://github.com/sagemath/sagetrac-mirror/commit/b39fe932f1938dadd332bd54c007d7c95a147a6e)**



---

archive/issue_comments_229718.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket.17254.squashed.new](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket.17254.squashed.new)** to **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)**",
    "created_at": "2015-10-08T13:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229718",
    "user": "https://github.com/jpflori"
}
```

Changed branch from **[u/jdemeyer/ticket.17254.squashed.new](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket.17254.squashed.new)** to **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)**



---

archive/issue_comments_229719.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nI looked a little bit into the problem and from what I see when the multivariate gets created the first thing done is to create the number field in Singular.\nJust after the number field creation, the first memory error Singular complains about is related to the polynomial defining the number field, so I would say the number field creation already went wrong (or the number field is wrongly used once created).",
    "created_at": "2015-10-08T16:22:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229719",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:100" align="right">comment:100</div>

I looked a little bit into the problem and from what I see when the multivariate gets created the first thing done is to create the number field in Singular.
Just after the number field creation, the first memory error Singular complains about is related to the polynomial defining the number field, so I would say the number field creation already went wrong (or the number field is wrongly used once created).



---

archive/issue_comments_229720.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nHere is the backtrace of the first error reporting:\n\n```\n(gdb) bt\n#0  omReportError (error=omError_WrongSize, report_error=omError_NoError,\n    r=0x3fffa170be00 <omTestBinAddrSize+68>, fmt=0x3fffa171bd80 \"\")\n    at omError.c:83\n#1  0x00003fffa17120b0 in omReportAddrError (error=omError_WrongSize,\n    report_error=omError_NoError, addr=0x3fffa13001f0, bin_size=0x18,\n    flags=262, r=0x3fffa170be00 <omTestBinAddrSize+68>, fmt=0x3fffa171bd80 \"\")\n    at omDebugCheck.c:409\n#2  0x00003fffa1710d5c in omDoCheckBinAddr (addr=0x3fffa13001f0,\n    bin_size=0x18, flags=262, level=1 '\\001', report=omError_NoError,\n    r=0x3fffa170be00 <omTestBinAddrSize+68>) at omDebugCheck.c:211\n#3  0x00003fffa17108b8 in omDoCheckAddr (addr=0x3fffa13001f0, bin_size=0x18,\n    flags=262, level=1 '\\001', report=omError_NoError,\n    r=0x3fffa170be00 <omTestBinAddrSize+68>) at omDebugCheck.c:169\n#4  0x00003fffa170fd2c in _omCheckAddr (addr=0x3fffa13001f0, size_bin=0x18,\n    flags=262, check=1 '\\001', report=omError_NoError,\n    r=0x3fffa170be00 <omTestBinAddrSize+68>) at omDebugCheck.c:46\n#5  0x00003fffa170cd8c in _omDebugAddr (addr=0x3fffa13001f0, bin_size=0x18,\n    flags=258, check=1 '\\001') at omDebug.c:283\n#6  0x00003fffa170be00 in omTestBinAddrSize (addr=0x3fffa13001f0, size=24, \n    check_level=1) at omDebug.c:46\n#7  0x00003fffa1b64c14 in _p_Test (p=0x3fffa13001f0, r=0x3fffa13344d0, level=0)\n    at pDebug.cc:223\n#8  0x00003fffa1c1fcd0 in naInitChar (cf=0x3fffa131c9a8, \n    infoStruct=0x3fffffff9240) at ext_fields/algext.cc:1419\n#9  0x00003fffa1c5b114 in nInitChar (t=n_algExt, parameter=0x3fffffff9240)\n    at numbers.cc:385\n#10 0x00003fffa0f81758 in __pyx_f_4sage_4libs_8singular_4ring_singular_ring_new\n...\n}",
    "created_at": "2015-10-08T16:39:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229720",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:101" align="right">comment:101</div>

Here is the backtrace of the first error reporting:

```
(gdb) bt
#0  omReportError (error=omError_WrongSize, report_error=omError_NoError,
    r=0x3fffa170be00 <omTestBinAddrSize+68>, fmt=0x3fffa171bd80 "")
    at omError.c:83
#1  0x00003fffa17120b0 in omReportAddrError (error=omError_WrongSize,
    report_error=omError_NoError, addr=0x3fffa13001f0, bin_size=0x18,
    flags=262, r=0x3fffa170be00 <omTestBinAddrSize+68>, fmt=0x3fffa171bd80 "")
    at omDebugCheck.c:409
#2  0x00003fffa1710d5c in omDoCheckBinAddr (addr=0x3fffa13001f0,
    bin_size=0x18, flags=262, level=1 '\001', report=omError_NoError,
    r=0x3fffa170be00 <omTestBinAddrSize+68>) at omDebugCheck.c:211
#3  0x00003fffa17108b8 in omDoCheckAddr (addr=0x3fffa13001f0, bin_size=0x18,
    flags=262, level=1 '\001', report=omError_NoError,
    r=0x3fffa170be00 <omTestBinAddrSize+68>) at omDebugCheck.c:169
#4  0x00003fffa170fd2c in _omCheckAddr (addr=0x3fffa13001f0, size_bin=0x18,
    flags=262, check=1 '\001', report=omError_NoError,
    r=0x3fffa170be00 <omTestBinAddrSize+68>) at omDebugCheck.c:46
#5  0x00003fffa170cd8c in _omDebugAddr (addr=0x3fffa13001f0, bin_size=0x18,
    flags=258, check=1 '\001') at omDebug.c:283
#6  0x00003fffa170be00 in omTestBinAddrSize (addr=0x3fffa13001f0, size=24, 
    check_level=1) at omDebug.c:46
#7  0x00003fffa1b64c14 in _p_Test (p=0x3fffa13001f0, r=0x3fffa13344d0, level=0)
    at pDebug.cc:223
#8  0x00003fffa1c1fcd0 in naInitChar (cf=0x3fffa131c9a8, 
    infoStruct=0x3fffffff9240) at ext_fields/algext.cc:1419
#9  0x00003fffa1c5b114 in nInitChar (t=n_algExt, parameter=0x3fffffff9240)
    at numbers.cc:385
#10 0x00003fffa0f81758 in __pyx_f_4sage_4libs_8singular_4ring_singular_ring_new
...
}



---

archive/issue_comments_229721.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nAnd of the second one:\n\n```\n(gdb) bt\n#0  dPolyReportError (p=0x3fffa13001f0, r=0x3fffa13344d0,\n    fmt=0x3fffa1cb5140 \"%s \") at pDebug.cc:46\n#1  0x00003fffa1b64c54 in _p_Test (p=0x3fffa13001f0, r=0x3fffa13344d0, level=0)\n    at pDebug.cc:223\n#2  0x00003fffa1c1fcd0 in naInitChar (cf=0x3fffa131c9a8,\n    infoStruct=0x3fffffff9240) at ext_fields/algext.cc:1419\n#3  0x00003fffa1c5b114 in nInitChar (t=n_algExt, parameter=0x3fffffff9240)\n    at numbers.cc:385\n#4  0x00003fffa0f81758 in __pyx_f_4sage_4libs_8singular_4ring_singular_ring_new\n...\n}",
    "created_at": "2015-10-08T16:41:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229721",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:102" align="right">comment:102</div>

And of the second one:

```
(gdb) bt
#0  dPolyReportError (p=0x3fffa13001f0, r=0x3fffa13344d0,
    fmt=0x3fffa1cb5140 "%s ") at pDebug.cc:46
#1  0x00003fffa1b64c54 in _p_Test (p=0x3fffa13001f0, r=0x3fffa13344d0, level=0)
    at pDebug.cc:223
#2  0x00003fffa1c1fcd0 in naInitChar (cf=0x3fffa131c9a8,
    infoStruct=0x3fffffff9240) at ext_fields/algext.cc:1419
#3  0x00003fffa1c5b114 in nInitChar (t=n_algExt, parameter=0x3fffffff9240)
    at numbers.cc:385
#4  0x00003fffa0f81758 in __pyx_f_4sage_4libs_8singular_4ring_singular_ring_new
...
}



---

archive/issue_comments_229722.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nSome pointers, I have to quit now and tomorrow I'll have forgotten everything:\n* https://github.com/hannes14/Singular/blob/master/HOWTO-libsingular\n* https://github.com/wbhart/Nemo.jl/wiki/Accessing-Singular-from-Julia",
    "created_at": "2015-10-08T17:13:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229722",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:103" align="right">comment:103</div>

Some pointers, I have to quit now and tomorrow I'll have forgotten everything:
* https://github.com/hannes14/Singular/blob/master/HOWTO-libsingular
* https://github.com/wbhart/Nemo.jl/wiki/Accessing-Singular-from-Julia



---

archive/issue_comments_229723.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nGot a suggestion from Hannes:\n* https://groups.google.com/d/msg/libsingular-devel/4JRHxVXIF70/r4aXry32BQAJ\n\nAdditional issue:\n* we should clean up old headers when upgrading.",
    "created_at": "2015-10-09T12:50:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229723",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:104" align="right">comment:104</div>

Got a suggestion from Hannes:
* https://groups.google.com/d/msg/libsingular-devel/4JRHxVXIF70/r4aXry32BQAJ

Additional issue:
* we should clean up old headers when upgrading.



---

archive/issue_comments_229724.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nThe above suggestion fixes the problem.",
    "created_at": "2015-10-09T13:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229724",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:105" align="right">comment:105</div>

The above suggestion fixes the problem.



---

archive/issue_comments_229725.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nI still get a bunch of crashes/errors when testing `sage/libs/singular`, working on it.",
    "created_at": "2015-10-09T13:56:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229725",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:106" align="right">comment:106</div>

I still get a bunch of crashes/errors when testing `sage/libs/singular`, working on it.



---

archive/issue_comments_229726.json:
```json
{
    "body": "Changed commit from **[`b39fe93`](https://github.com/sagemath/sagetrac-mirror/commit/b39fe932f1938dadd332bd54c007d7c95a147a6e)** to **[`bea5a27`](https://github.com/sagemath/sagetrac-mirror/commit/bea5a27251a7be04fccb22c0032905218f13a301)**",
    "created_at": "2015-10-09T14:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229726",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b39fe93`](https://github.com/sagemath/sagetrac-mirror/commit/b39fe932f1938dadd332bd54c007d7c95a147a6e)** to **[`bea5a27`](https://github.com/sagemath/sagetrac-mirror/commit/bea5a27251a7be04fccb22c0032905218f13a301)**



---

archive/issue_comments_229727.json:
```json
{
    "body": "<div id=\"comment:107\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bea5a27251a7be04fccb22c0032905218f13a301\"><code>bea5a27</code></a></td><td><code>Correctly initialize Singular polynomials.</code></td></tr></table>\n",
    "created_at": "2015-10-09T14:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229727",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:107"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bea5a27251a7be04fccb22c0032905218f13a301"><code>bea5a27</code></a></td><td><code>Correctly initialize Singular polynomials.</code></td></tr></table>




---

archive/issue_comments_229728.json:
```json
{
    "body": "Changed commit from **[`bea5a27`](https://github.com/sagemath/sagetrac-mirror/commit/bea5a27251a7be04fccb22c0032905218f13a301)** to **[`e6a30ff`](https://github.com/sagemath/sagetrac-mirror/commit/e6a30ffadfd625e4baf1def440fab8f9489976bc)**",
    "created_at": "2015-10-10T17:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229728",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed commit from **[`bea5a27`](https://github.com/sagemath/sagetrac-mirror/commit/bea5a27251a7be04fccb22c0032905218f13a301)** to **[`e6a30ff`](https://github.com/sagemath/sagetrac-mirror/commit/e6a30ffadfd625e4baf1def440fab8f9489976bc)**



---

archive/issue_comments_229729.json:
```json
{
    "body": "Changed branch from **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)** to **[u/jakobkroeker/ticket.17254.squashed.new](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed.new)**",
    "created_at": "2015-10-10T17:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229729",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed branch from **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)** to **[u/jakobkroeker/ticket.17254.squashed.new](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed.new)**



---

archive/issue_comments_229730.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\n> I still get a bunch of crashes/errors when testing sage/libs/singular, working on it.\n\nI was able to fix the issue with `naSetMap()` and `nlInit2gmp()` usage in `sa2si_NF()`)\nand this reduces the number of segfaults significantly\nThe example \n\n```\nsage: x = var('x')\nsage: K.<z> = QQ.extension(x^2 + 1)\nsage: P.<v,w> = K[]\nsage: P._singular_() \nsage: P(2/3) \n```\ndoes not crash any more!\n\nA remaining task is to reuse the plain polynomial ring `qqr = QQ['x']` over Q in \n`sa2si_NF()` instead of rebuilding it everytime. (variable name is irrelevant)\n\n\n.\n.\nNext interesting riddle in `sa2si_ZZmod()`; simple failing example:\n\n```\nsage: sage: R.<a> = Zmod(5)['a', 'b']  \nsage: R(1) #crash\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6a30ffadfd625e4baf1def440fab8f9489976bc\"><code>e6a30ff</code></a></td><td><code>fixed issue with nMapFuncPtr- usage</code></td></tr></table>\n",
    "created_at": "2015-10-10T17:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229730",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:108" align="right">comment:108</div>

> I still get a bunch of crashes/errors when testing sage/libs/singular, working on it.

I was able to fix the issue with `naSetMap()` and `nlInit2gmp()` usage in `sa2si_NF()`)
and this reduces the number of segfaults significantly
The example 

```
sage: x = var('x')
sage: K.<z> = QQ.extension(x^2 + 1)
sage: P.<v,w> = K[]
sage: P._singular_() 
sage: P(2/3) 
```
does not crash any more!

A remaining task is to reuse the plain polynomial ring `qqr = QQ['x']` over Q in 
`sa2si_NF()` instead of rebuilding it everytime. (variable name is irrelevant)


.
.
Next interesting riddle in `sa2si_ZZmod()`; simple failing example:

```
sage: sage: R.<a> = Zmod(5)['a', 'b']  
sage: R(1) #crash
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6a30ffadfd625e4baf1def440fab8f9489976bc"><code>e6a30ff</code></a></td><td><code>fixed issue with nMapFuncPtr- usage</code></td></tr></table>




---

archive/issue_comments_229731.json:
```json
{
    "body": "Changed author from **jakobkroeker** to **jakobkroeker, jpflori**",
    "created_at": "2015-10-10T17:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229731",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed author from **jakobkroeker** to **jakobkroeker, jpflori**



---

archive/issue_comments_229732.json:
```json
{
    "body": "<div id=\"comment:109\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71d1873d022e211bf5075b296b63d82070cc01ef\"><code>71d1873</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into singular</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2529486683b3bb464ec6ed3a51311084114666d\"><code>d252948</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into singular</code></td></tr></table>\n",
    "created_at": "2015-11-10T21:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229732",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:109"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71d1873d022e211bf5075b296b63d82070cc01ef"><code>71d1873</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into singular</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2529486683b3bb464ec6ed3a51311084114666d"><code>d252948</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into singular</code></td></tr></table>




---

archive/issue_comments_229733.json:
```json
{
    "body": "Changed commit from **[`e6a30ff`](https://github.com/sagemath/sagetrac-mirror/commit/e6a30ffadfd625e4baf1def440fab8f9489976bc)** to **[`d252948`](https://github.com/sagemath/sagetrac-mirror/commit/d2529486683b3bb464ec6ed3a51311084114666d)**",
    "created_at": "2015-11-10T21:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229733",
    "user": "https://github.com/jpflori"
}
```

Changed commit from **[`e6a30ff`](https://github.com/sagemath/sagetrac-mirror/commit/e6a30ffadfd625e4baf1def440fab8f9489976bc)** to **[`d252948`](https://github.com/sagemath/sagetrac-mirror/commit/d2529486683b3bb464ec6ed3a51311084114666d)**



---

archive/issue_comments_229734.json:
```json
{
    "body": "Changed branch from **[u/jakobkroeker/ticket.17254.squashed.new](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed.new)** to **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)**",
    "created_at": "2015-11-10T21:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229734",
    "user": "https://github.com/jpflori"
}
```

Changed branch from **[u/jakobkroeker/ticket.17254.squashed.new](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed.new)** to **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)**



---

archive/issue_comments_229735.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nThe segfault is due to a division by zero (happening in gmp which aborts I guess):\n\n```\n#0  0x00003fffadbeaf28 in __gmpz_mod (rem=0x3fffa03ce230,\n    dividend=0x3fffa03ce220, divisor=0x0) at mod.c:29\n#1  0x00003fffa0d1558c in nrnMapGMP (from=0x3fffa03ce220, dst=0x3fffa03bc9a8)\n    at rmodulon.cc:766\n#2  0x00003fffa0d1561c in nrnMapZ (from=0x3fffa03ce220, src=0x3fffa03bc680,\n    dst=0x3fffa03bc9a8) at rmodulon.cc:790\n#3  0x00003fffa014903c in __pyx_f_4sage_4libs_8singular_8singular_sa2si_ZZmod (\n    __pyx_v_d=0x3fff986212e0, __pyx_v__ring=0x3fffa03d43a8)\n```\n\nI guess the ring is wrongly initialized.",
    "created_at": "2015-11-10T22:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229735",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:110" align="right">comment:110</div>

The segfault is due to a division by zero (happening in gmp which aborts I guess):

```
#0  0x00003fffadbeaf28 in __gmpz_mod (rem=0x3fffa03ce230,
    dividend=0x3fffa03ce220, divisor=0x0) at mod.c:29
#1  0x00003fffa0d1558c in nrnMapGMP (from=0x3fffa03ce220, dst=0x3fffa03bc9a8)
    at rmodulon.cc:766
#2  0x00003fffa0d1561c in nrnMapZ (from=0x3fffa03ce220, src=0x3fffa03bc680,
    dst=0x3fffa03bc9a8) at rmodulon.cc:790
#3  0x00003fffa014903c in __pyx_f_4sage_4libs_8singular_8singular_sa2si_ZZmod (
    __pyx_v_d=0x3fff986212e0, __pyx_v__ring=0x3fffa03d43a8)
```

I guess the ring is wrongly initialized.



---

archive/issue_comments_229736.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nNote that the same thing works when `5` is replaced by anything non-prime.\nAnd indeed during ring creation the former is caught at the beginning of the method in `sage/libs/singular/ring.pyx` as `field`, `finite` and `prime` whereas the latter is caught as `integer_mod_ring`.",
    "created_at": "2015-11-10T22:59:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229736",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:111" align="right">comment:111</div>

Note that the same thing works when `5` is replaced by anything non-prime.
And indeed during ring creation the former is caught at the beginning of the method in `sage/libs/singular/ring.pyx` as `field`, `finite` and `prime` whereas the latter is caught as `integer_mod_ring`.



---

archive/issue_comments_229737.json:
```json
{
    "body": "Changed commit from **[`d252948`](https://github.com/sagemath/sagetrac-mirror/commit/d2529486683b3bb464ec6ed3a51311084114666d)** to **[`92304e8`](https://github.com/sagemath/sagetrac-mirror/commit/92304e83987a9c31b6d77de91e6264b46bfb8e21)**",
    "created_at": "2015-11-10T23:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229737",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d252948`](https://github.com/sagemath/sagetrac-mirror/commit/d2529486683b3bb464ec6ed3a51311084114666d)** to **[`92304e8`](https://github.com/sagemath/sagetrac-mirror/commit/92304e83987a9c31b6d77de91e6264b46bfb8e21)**



---

archive/issue_comments_229738.json:
```json
{
    "body": "<div id=\"comment:112\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92304e83987a9c31b6d77de91e6264b46bfb8e21\"><code>92304e8</code></a></td><td><code>Properly initial prime fields in singular.</code></td></tr></table>\n",
    "created_at": "2015-11-10T23:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229738",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:112"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92304e83987a9c31b6d77de91e6264b46bfb8e21"><code>92304e8</code></a></td><td><code>Properly initial prime fields in singular.</code></td></tr></table>




---

archive/issue_comments_229739.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nWhy does this branch change `build/bin/sage-spkg`???",
    "created_at": "2015-11-10T23:59:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229739",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:113" align="right">comment:113</div>

Why does this branch change `build/bin/sage-spkg`???



---

archive/issue_comments_229740.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">comment:114</div>\n\nNo idea, mistake from me surely...",
    "created_at": "2015-11-11T00:03:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229740",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:114" align="right">comment:114</div>

No idea, mistake from me surely...



---

archive/issue_comments_229741.json:
```json
{
    "body": "Changed commit from **[`92304e8`](https://github.com/sagemath/sagetrac-mirror/commit/92304e83987a9c31b6d77de91e6264b46bfb8e21)** to **[`97c8bb6`](https://github.com/sagemath/sagetrac-mirror/commit/97c8bb68b01a1129df50a224eb0a2deb494558ff)**",
    "created_at": "2015-11-11T00:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229741",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`92304e8`](https://github.com/sagemath/sagetrac-mirror/commit/92304e83987a9c31b6d77de91e6264b46bfb8e21)** to **[`97c8bb6`](https://github.com/sagemath/sagetrac-mirror/commit/97c8bb68b01a1129df50a224eb0a2deb494558ff)**



---

archive/issue_comments_229742.json:
```json
{
    "body": "<div id=\"comment:115\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97c8bb68b01a1129df50a224eb0a2deb494558ff\"><code>97c8bb6</code></a></td><td><code>Revert \"Properly initial prime fields in singular.\"</code></td></tr></table>\n",
    "created_at": "2015-11-11T00:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229742",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:115"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97c8bb68b01a1129df50a224eb0a2deb494558ff"><code>97c8bb6</code></a></td><td><code>Revert "Properly initial prime fields in singular."</code></td></tr></table>




---

archive/issue_comments_229743.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nOk the issue is indeed a mix between `Zmod` and `GF`.\nThe ring was initially created in singular as a \"finite field\" but then for some reason the conversion is made as for a \"modular integer\".\nThe former one uses `int`s whereas the second one uses `mpz`s.",
    "created_at": "2015-11-11T00:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229743",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:116" align="right">comment:116</div>

Ok the issue is indeed a mix between `Zmod` and `GF`.
The ring was initially created in singular as a "finite field" but then for some reason the conversion is made as for a "modular integer".
The former one uses `int`s whereas the second one uses `mpz`s.



---

archive/issue_comments_229744.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nI've not checked but I guess the reason is as follow:\n* to create the singular ring we ask if the base ring is a prime finite field, not if it's a class derived from `FiniteField`, so classes derived from `IntegerModRing` are caught,\n* when sending something into the ring we follow the \"classes\" logic, boom.",
    "created_at": "2015-11-11T00:43:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229744",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:117" align="right">comment:117</div>

I've not checked but I guess the reason is as follow:
* to create the singular ring we ask if the base ring is a prime finite field, not if it's a class derived from `FiniteField`, so classes derived from `IntegerModRing` are caught,
* when sending something into the ring we follow the "classes" logic, boom.



---

archive/issue_comments_229745.json:
```json
{
    "body": "<div id=\"comment:118\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18a6be12c9a551f71cd145a4dcc86eaa86653de4\"><code>18a6be1</code></a></td><td><code>Fix for the GF vs Zmod issue with Singular.</code></td></tr></table>\n",
    "created_at": "2015-11-11T00:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229745",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:118"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18a6be12c9a551f71cd145a4dcc86eaa86653de4"><code>18a6be1</code></a></td><td><code>Fix for the GF vs Zmod issue with Singular.</code></td></tr></table>




---

archive/issue_comments_229746.json:
```json
{
    "body": "Changed commit from **[`97c8bb6`](https://github.com/sagemath/sagetrac-mirror/commit/97c8bb68b01a1129df50a224eb0a2deb494558ff)** to **[`18a6be1`](https://github.com/sagemath/sagetrac-mirror/commit/18a6be12c9a551f71cd145a4dcc86eaa86653de4)**",
    "created_at": "2015-11-11T00:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229746",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`97c8bb6`](https://github.com/sagemath/sagetrac-mirror/commit/97c8bb68b01a1129df50a224eb0a2deb494558ff)** to **[`18a6be1`](https://github.com/sagemath/sagetrac-mirror/commit/18a6be12c9a551f71cd145a4dcc86eaa86653de4)**



---

archive/issue_comments_229747.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nOk next issue:\n`napoly` and `slnumber` do not exist anymore, seemingly since a long time...",
    "created_at": "2015-11-11T01:53:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229747",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:119" align="right">comment:119</div>

Ok next issue:
`napoly` and `slnumber` do not exist anymore, seemingly since a long time...



---

archive/issue_comments_229748.json:
```json
{
    "body": "<div id=\"comment:120\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf2aedeae41383316835925a3dcd70ce6edb6b93\"><code>bf2aede</code></a></td><td><code>WIP to use new Singular API.</code></td></tr></table>\n",
    "created_at": "2015-11-11T02:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229748",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:120"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf2aedeae41383316835925a3dcd70ce6edb6b93"><code>bf2aede</code></a></td><td><code>WIP to use new Singular API.</code></td></tr></table>




---

archive/issue_comments_229749.json:
```json
{
    "body": "Changed commit from **[`18a6be1`](https://github.com/sagemath/sagetrac-mirror/commit/18a6be12c9a551f71cd145a4dcc86eaa86653de4)** to **[`bf2aede`](https://github.com/sagemath/sagetrac-mirror/commit/bf2aedeae41383316835925a3dcd70ce6edb6b93)**",
    "created_at": "2015-11-11T02:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229749",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`18a6be1`](https://github.com/sagemath/sagetrac-mirror/commit/18a6be12c9a551f71cd145a4dcc86eaa86653de4)** to **[`bf2aede`](https://github.com/sagemath/sagetrac-mirror/commit/bf2aedeae41383316835925a3dcd70ce6edb6b93)**



---

archive/issue_comments_229750.json:
```json
{
    "body": "Changed branch from **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)** to **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)**",
    "created_at": "2015-11-11T19:40:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229750",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)** to **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)**



---

archive/issue_comments_229751.json:
```json
{
    "body": "<div id=\"comment:122\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ecb686790acddc33ee8a09bf1045955a6b53f45\"><code>2ecb686</code></a></td><td><code>Fix several doctest failures in libs/singular</code></td></tr></table>\n",
    "created_at": "2015-11-11T20:08:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229751",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:122"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ecb686790acddc33ee8a09bf1045955a6b53f45"><code>2ecb686</code></a></td><td><code>Fix several doctest failures in libs/singular</code></td></tr></table>




---

archive/issue_comments_229752.json:
```json
{
    "body": "Changed commit from **[`bf2aede`](https://github.com/sagemath/sagetrac-mirror/commit/bf2aedeae41383316835925a3dcd70ce6edb6b93)** to **[`2ecb686`](https://github.com/sagemath/sagetrac-mirror/commit/2ecb686790acddc33ee8a09bf1045955a6b53f45)**",
    "created_at": "2015-11-11T20:08:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229752",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bf2aede`](https://github.com/sagemath/sagetrac-mirror/commit/bf2aedeae41383316835925a3dcd70ce6edb6b93)** to **[`2ecb686`](https://github.com/sagemath/sagetrac-mirror/commit/2ecb686790acddc33ee8a09bf1045955a6b53f45)**



---

archive/issue_events_244027.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-11-11T20:10:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244027"
}
```



---

archive/issue_events_244028.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-11-11T20:10:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244028"
}
```



---

archive/issue_comments_229753.json:
```json
{
    "body": "<div id=\"comment:124\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e949c00c1f15ae70c9c8d929f9148750c031595d\"><code>e949c00</code></a></td><td><code>Fix error message formatting</code></td></tr></table>\n",
    "created_at": "2015-11-11T20:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229753",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:124"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e949c00c1f15ae70c9c8d929f9148750c031595d"><code>e949c00</code></a></td><td><code>Fix error message formatting</code></td></tr></table>




---

archive/issue_comments_229754.json:
```json
{
    "body": "Changed commit from **[`2ecb686`](https://github.com/sagemath/sagetrac-mirror/commit/2ecb686790acddc33ee8a09bf1045955a6b53f45)** to **[`e949c00`](https://github.com/sagemath/sagetrac-mirror/commit/e949c00c1f15ae70c9c8d929f9148750c031595d)**",
    "created_at": "2015-11-11T20:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229754",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2ecb686`](https://github.com/sagemath/sagetrac-mirror/commit/2ecb686790acddc33ee8a09bf1045955a6b53f45)** to **[`e949c00`](https://github.com/sagemath/sagetrac-mirror/commit/e949c00c1f15ae70c9c8d929f9148750c031595d)**



---

archive/issue_comments_229755.json:
```json
{
    "body": "<div id=\"comment:125\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15d5f12fa817187bd97b592afe83676b977e081d\"><code>15d5f12</code></a></td><td><code>Fix usage of algebraic extension as base rings in libsingular.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3566cbab7cdda4a78772aaa041055ba08885573\"><code>d3566cb</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/ticket/17254' into singular</code></td></tr></table>\n",
    "created_at": "2015-11-11T22:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229755",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:125"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15d5f12fa817187bd97b592afe83676b977e081d"><code>15d5f12</code></a></td><td><code>Fix usage of algebraic extension as base rings in libsingular.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3566cbab7cdda4a78772aaa041055ba08885573"><code>d3566cb</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/ticket/17254' into singular</code></td></tr></table>




---

archive/issue_comments_229756.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)** to **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)**",
    "created_at": "2015-11-11T22:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229756",
    "user": "https://github.com/jpflori"
}
```

Changed branch from **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)** to **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)**



---

archive/issue_comments_229757.json:
```json
{
    "body": "Changed commit from **[`e949c00`](https://github.com/sagemath/sagetrac-mirror/commit/e949c00c1f15ae70c9c8d929f9148750c031595d)** to **[`d3566cb`](https://github.com/sagemath/sagetrac-mirror/commit/d3566cbab7cdda4a78772aaa041055ba08885573)**",
    "created_at": "2015-11-11T22:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229757",
    "user": "https://github.com/jpflori"
}
```

Changed commit from **[`e949c00`](https://github.com/sagemath/sagetrac-mirror/commit/e949c00c1f15ae70c9c8d929f9148750c031595d)** to **[`d3566cb`](https://github.com/sagemath/sagetrac-mirror/commit/d3566cbab7cdda4a78772aaa041055ba08885573)**



---

archive/issue_comments_229758.json:
```json
{
    "body": "Changed commit from **[`d3566cb`](https://github.com/sagemath/sagetrac-mirror/commit/d3566cbab7cdda4a78772aaa041055ba08885573)** to **[`8c02754`](https://github.com/sagemath/sagetrac-mirror/commit/8c0275427c66b709413188b82da7845a3196e4bb)**",
    "created_at": "2015-11-12T00:10:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229758",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d3566cb`](https://github.com/sagemath/sagetrac-mirror/commit/d3566cbab7cdda4a78772aaa041055ba08885573)** to **[`8c02754`](https://github.com/sagemath/sagetrac-mirror/commit/8c0275427c66b709413188b82da7845a3196e4bb)**



---

archive/issue_comments_229759.json:
```json
{
    "body": "<div id=\"comment:126\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c0275427c66b709413188b82da7845a3196e4bb\"><code>8c02754</code></a></td><td><code>Use new Singular overflow limits.</code></td></tr></table>\n",
    "created_at": "2015-11-12T00:10:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229759",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:126"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c0275427c66b709413188b82da7845a3196e4bb"><code>8c02754</code></a></td><td><code>Use new Singular overflow limits.</code></td></tr></table>




---

archive/issue_comments_229760.json:
```json
{
    "body": "<div id=\"comment:127\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cab5fc5fc3126901bb20ef18455e09ca68a8444a\"><code>cab5fc5</code></a></td><td><code>groebner_norm Singular function does not exist, groebner does.</code></td></tr></table>\n",
    "created_at": "2015-11-12T03:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229760",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:127"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cab5fc5fc3126901bb20ef18455e09ca68a8444a"><code>cab5fc5</code></a></td><td><code>groebner_norm Singular function does not exist, groebner does.</code></td></tr></table>




---

archive/issue_comments_229761.json:
```json
{
    "body": "Changed commit from **[`8c02754`](https://github.com/sagemath/sagetrac-mirror/commit/8c0275427c66b709413188b82da7845a3196e4bb)** to **[`cab5fc5`](https://github.com/sagemath/sagetrac-mirror/commit/cab5fc5fc3126901bb20ef18455e09ca68a8444a)**",
    "created_at": "2015-11-12T03:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229761",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8c02754`](https://github.com/sagemath/sagetrac-mirror/commit/8c0275427c66b709413188b82da7845a3196e4bb)** to **[`cab5fc5`](https://github.com/sagemath/sagetrac-mirror/commit/cab5fc5fc3126901bb20ef18455e09ca68a8444a)**



---

archive/issue_comments_229762.json:
```json
{
    "body": "<div id=\"comment:128\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35b9919c0b21cc300fde75fee3570d4f4a6b70a3\"><code>35b9919</code></a></td><td><code>Fix some order changes and normalization changes in Singular output.</code></td></tr></table>\n",
    "created_at": "2015-11-12T03:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229762",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:128"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35b9919c0b21cc300fde75fee3570d4f4a6b70a3"><code>35b9919</code></a></td><td><code>Fix some order changes and normalization changes in Singular output.</code></td></tr></table>




---

archive/issue_comments_229763.json:
```json
{
    "body": "Changed commit from **[`cab5fc5`](https://github.com/sagemath/sagetrac-mirror/commit/cab5fc5fc3126901bb20ef18455e09ca68a8444a)** to **[`35b9919`](https://github.com/sagemath/sagetrac-mirror/commit/35b9919c0b21cc300fde75fee3570d4f4a6b70a3)**",
    "created_at": "2015-11-12T03:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229763",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cab5fc5`](https://github.com/sagemath/sagetrac-mirror/commit/cab5fc5fc3126901bb20ef18455e09ca68a8444a)** to **[`35b9919`](https://github.com/sagemath/sagetrac-mirror/commit/35b9919c0b21cc300fde75fee3570d4f4a6b70a3)**



---

archive/issue_comments_229764.json:
```json
{
    "body": "<div id=\"comment:129\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee62dcd20702fe1ea0f8e180497ac92091b66a94\"><code>ee62dcd</code></a></td><td><code>Yet another (doubtful) different normalization (-1 == 2 mod 3).</code></td></tr></table>\n",
    "created_at": "2015-11-12T03:55:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229764",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:129"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee62dcd20702fe1ea0f8e180497ac92091b66a94"><code>ee62dcd</code></a></td><td><code>Yet another (doubtful) different normalization (-1 == 2 mod 3).</code></td></tr></table>




---

archive/issue_comments_229765.json:
```json
{
    "body": "Changed commit from **[`35b9919`](https://github.com/sagemath/sagetrac-mirror/commit/35b9919c0b21cc300fde75fee3570d4f4a6b70a3)** to **[`ee62dcd`](https://github.com/sagemath/sagetrac-mirror/commit/ee62dcd20702fe1ea0f8e180497ac92091b66a94)**",
    "created_at": "2015-11-12T03:55:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229765",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`35b9919`](https://github.com/sagemath/sagetrac-mirror/commit/35b9919c0b21cc300fde75fee3570d4f4a6b70a3)** to **[`ee62dcd`](https://github.com/sagemath/sagetrac-mirror/commit/ee62dcd20702fe1ea0f8e180497ac92091b66a94)**



---

archive/issue_comments_229766.json:
```json
{
    "body": "<div id=\"comment:130\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31c98df2aeb4a4e943db65be32214fa316cf3b24\"><code>31c98df</code></a></td><td><code>New uniform overflow limit for Singular exponents.</code></td></tr></table>\n",
    "created_at": "2015-11-12T03:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229766",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:130"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31c98df2aeb4a4e943db65be32214fa316cf3b24"><code>31c98df</code></a></td><td><code>New uniform overflow limit for Singular exponents.</code></td></tr></table>




---

archive/issue_comments_229767.json:
```json
{
    "body": "Changed commit from **[`ee62dcd`](https://github.com/sagemath/sagetrac-mirror/commit/ee62dcd20702fe1ea0f8e180497ac92091b66a94)** to **[`31c98df`](https://github.com/sagemath/sagetrac-mirror/commit/31c98df2aeb4a4e943db65be32214fa316cf3b24)**",
    "created_at": "2015-11-12T03:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229767",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ee62dcd`](https://github.com/sagemath/sagetrac-mirror/commit/ee62dcd20702fe1ea0f8e180497ac92091b66a94)** to **[`31c98df`](https://github.com/sagemath/sagetrac-mirror/commit/31c98df2aeb4a4e943db65be32214fa316cf3b24)**



---

archive/issue_comments_229768.json:
```json
{
    "body": "Changed commit from **[`31c98df`](https://github.com/sagemath/sagetrac-mirror/commit/31c98df2aeb4a4e943db65be32214fa316cf3b24)** to **[`d7a3f36`](https://github.com/sagemath/sagetrac-mirror/commit/d7a3f36965dd6b12c4ae48a27556c9c18d77e923)**",
    "created_at": "2015-11-12T18:54:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229768",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`31c98df`](https://github.com/sagemath/sagetrac-mirror/commit/31c98df2aeb4a4e943db65be32214fa316cf3b24)** to **[`d7a3f36`](https://github.com/sagemath/sagetrac-mirror/commit/d7a3f36965dd6b12c4ae48a27556c9c18d77e923)**



---

archive/issue_comments_229769.json:
```json
{
    "body": "<div id=\"comment:131\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7a3f36965dd6b12c4ae48a27556c9c18d77e923\"><code>d7a3f36</code></a></td><td><code>singclap_isSqrFree was removed from Singular 4.</code></td></tr></table>\n",
    "created_at": "2015-11-12T18:54:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229769",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:131"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7a3f36965dd6b12c4ae48a27556c9c18d77e923"><code>d7a3f36</code></a></td><td><code>singclap_isSqrFree was removed from Singular 4.</code></td></tr></table>




---

archive/issue_comments_229770.json:
```json
{
    "body": "<div id=\"comment:132\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b610f9d96cf75479349b5b94ce849d78a72e8002\"><code>b610f9d</code></a></td><td><code>Another overflow in Singular related change.</code></td></tr></table>\n",
    "created_at": "2015-11-12T19:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229770",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:132"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b610f9d96cf75479349b5b94ce849d78a72e8002"><code>b610f9d</code></a></td><td><code>Another overflow in Singular related change.</code></td></tr></table>




---

archive/issue_comments_229771.json:
```json
{
    "body": "Changed commit from **[`d7a3f36`](https://github.com/sagemath/sagetrac-mirror/commit/d7a3f36965dd6b12c4ae48a27556c9c18d77e923)** to **[`b610f9d`](https://github.com/sagemath/sagetrac-mirror/commit/b610f9d96cf75479349b5b94ce849d78a72e8002)**",
    "created_at": "2015-11-12T19:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229771",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d7a3f36`](https://github.com/sagemath/sagetrac-mirror/commit/d7a3f36965dd6b12c4ae48a27556c9c18d77e923)** to **[`b610f9d`](https://github.com/sagemath/sagetrac-mirror/commit/b610f9d96cf75479349b5b94ce849d78a72e8002)**



---

archive/issue_comments_229772.json:
```json
{
    "body": "Changed branch from **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)** to **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)**",
    "created_at": "2015-11-12T22:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229772",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)** to **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)**



---

archive/issue_comments_229773.json:
```json
{
    "body": "Changed commit from **[`b610f9d`](https://github.com/sagemath/sagetrac-mirror/commit/b610f9d96cf75479349b5b94ce849d78a72e8002)** to **[`d7fd9ba`](https://github.com/sagemath/sagetrac-mirror/commit/d7fd9ba94ff7c4c160d44d72f8a6814196795330)**",
    "created_at": "2015-11-13T00:02:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229773",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`b610f9d`](https://github.com/sagemath/sagetrac-mirror/commit/b610f9d96cf75479349b5b94ce849d78a72e8002)** to **[`d7fd9ba`](https://github.com/sagemath/sagetrac-mirror/commit/d7fd9ba94ff7c4c160d44d72f8a6814196795330)**



---

archive/issue_comments_229774.json:
```json
{
    "body": "Changed author from **jakobkroeker, jpflori** to **Jakob Kroeker, Jean-Pierre Flori, Jeroen Demeyer**",
    "created_at": "2015-11-13T00:02:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229774",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **jakobkroeker, jpflori** to **Jakob Kroeker, Jean-Pierre Flori, Jeroen Demeyer**



---

archive/issue_comments_229775.json:
```json
{
    "body": "<div id=\"comment:134\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7fd9ba94ff7c4c160d44d72f8a6814196795330\"><code>d7fd9ba</code></a></td><td><code>Better overflow check</code></td></tr></table>\n",
    "created_at": "2015-11-13T00:02:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229775",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:134"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7fd9ba94ff7c4c160d44d72f8a6814196795330"><code>d7fd9ba</code></a></td><td><code>Better overflow check</code></td></tr></table>




---

archive/issue_comments_229776.json:
```json
{
    "body": "<div id=\"comment:135\" align=\"right\">comment:135</div>\n\nStrange way to deal with floats accuracy, see:\nhttps://groups.google.com/forum/#!topic/libsingular-devel/kj3KlcrcNo8\n\nNow looking into the weighted degree issue.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf9ec9de3b7371f3d8e5669fc6879bd1605c7c2d\"><code>bf9ec9d</code></a></td><td><code>Change in doctest now that Integers(2)[x, y, ...] uses Singular's Zn type.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0a71c9eb73187edc88b48e2a846107ff190ff7a\"><code>a0a71c9</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/ticket/17254' into singular</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5b45a346c6796296ec86208db97c12bf96104cd\"><code>a5b45a3</code></a></td><td><code>Yet others overflow related changes.</code></td></tr></table>\n",
    "created_at": "2015-11-13T00:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229776",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:135" align="right">comment:135</div>

Strange way to deal with floats accuracy, see:
https://groups.google.com/forum/#!topic/libsingular-devel/kj3KlcrcNo8

Now looking into the weighted degree issue.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf9ec9de3b7371f3d8e5669fc6879bd1605c7c2d"><code>bf9ec9d</code></a></td><td><code>Change in doctest now that Integers(2)[x, y, ...] uses Singular's Zn type.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0a71c9eb73187edc88b48e2a846107ff190ff7a"><code>a0a71c9</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/ticket/17254' into singular</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5b45a346c6796296ec86208db97c12bf96104cd"><code>a5b45a3</code></a></td><td><code>Yet others overflow related changes.</code></td></tr></table>




---

archive/issue_comments_229777.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)** to **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)**",
    "created_at": "2015-11-13T00:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229777",
    "user": "https://github.com/jpflori"
}
```

Changed branch from **[u/jdemeyer/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17254)** to **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)**



---

archive/issue_comments_229778.json:
```json
{
    "body": "Changed commit from **[`d7fd9ba`](https://github.com/sagemath/sagetrac-mirror/commit/d7fd9ba94ff7c4c160d44d72f8a6814196795330)** to **[`a5b45a3`](https://github.com/sagemath/sagetrac-mirror/commit/a5b45a346c6796296ec86208db97c12bf96104cd)**",
    "created_at": "2015-11-13T00:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229778",
    "user": "https://github.com/jpflori"
}
```

Changed commit from **[`d7fd9ba`](https://github.com/sagemath/sagetrac-mirror/commit/d7fd9ba94ff7c4c160d44d72f8a6814196795330)** to **[`a5b45a3`](https://github.com/sagemath/sagetrac-mirror/commit/a5b45a346c6796296ec86208db97c12bf96104cd)**



---

archive/issue_comments_229779.json:
```json
{
    "body": "<div id=\"comment:136\" align=\"right\">comment:136</div>\n\nNote for myself: the issue is that at some point r->pFDeg gets replaced from p_WTotalDegree by p_TotalDegree. Don't know why yet.",
    "created_at": "2015-11-13T06:43:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229779",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:136" align="right">comment:136</div>

Note for myself: the issue is that at some point r->pFDeg gets replaced from p_WTotalDegree by p_TotalDegree. Don't know why yet.



---

archive/issue_comments_229780.json:
```json
{
    "body": "<div id=\"comment:137\" align=\"right\">comment:137</div>\n\nThis is triggered here:\n\n```\n  if ((r->pFDeg==p_WTotaldegree) && rOrd_is_MixedDegree_Ordering(r))\n    r->pFDeg = p_Totaldegree;\n```\nline 3837/8 of `ring.cc`.",
    "created_at": "2015-11-13T07:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229780",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:137" align="right">comment:137</div>

This is triggered here:

```
  if ((r->pFDeg==p_WTotaldegree) && rOrd_is_MixedDegree_Ordering(r))
    r->pFDeg = p_Totaldegree;
```
line 3837/8 of `ring.cc`.



---

archive/issue_comments_229781.json:
```json
{
    "body": "<div id=\"comment:138\" align=\"right\">comment:138</div>\n\nMade by:\n* https://github.com/Singular/Sources/commit/d711b46eb29f241f3854ae99e8451d3beb7f96e4\n\nMaybe the 0 in the weights makes think Singular the order is useless.",
    "created_at": "2015-11-13T07:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229781",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:138" align="right">comment:138</div>

Made by:
* https://github.com/Singular/Sources/commit/d711b46eb29f241f3854ae99e8451d3beb7f96e4

Maybe the 0 in the weights makes think Singular the order is useless.



---

archive/issue_comments_229782.json:
```json
{
    "body": "<div id=\"comment:139\" align=\"right\">comment:139</div>\n\nQuestion to upstream here:\n* https://groups.google.com/forum/?fromgroups=#!topic/libsingular-devel/jregxl-k8Mw",
    "created_at": "2015-11-13T20:14:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229782",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:139" align="right">comment:139</div>

Question to upstream here:
* https://groups.google.com/forum/?fromgroups=#!topic/libsingular-devel/jregxl-k8Mw



---

archive/issue_comments_229783.json:
```json
{
    "body": "Changed commit from **[`a5b45a3`](https://github.com/sagemath/sagetrac-mirror/commit/a5b45a346c6796296ec86208db97c12bf96104cd)** to **[`199169e`](https://github.com/sagemath/sagetrac-mirror/commit/199169e84b29678c6dd94a8d8e2231359cc131a1)**",
    "created_at": "2015-11-17T14:54:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229783",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a5b45a3`](https://github.com/sagemath/sagetrac-mirror/commit/a5b45a346c6796296ec86208db97c12bf96104cd)** to **[`199169e`](https://github.com/sagemath/sagetrac-mirror/commit/199169e84b29678c6dd94a8d8e2231359cc131a1)**



---

archive/issue_comments_229784.json:
```json
{
    "body": "<div id=\"comment:140\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/199169e84b29678c6dd94a8d8e2231359cc131a1\"><code>199169e</code></a></td><td><code>Forgotten overflow stuff + use user defined degree.</code></td></tr></table>\n",
    "created_at": "2015-11-17T14:54:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229784",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:140"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/199169e84b29678c6dd94a8d8e2231359cc131a1"><code>199169e</code></a></td><td><code>Forgotten overflow stuff + use user defined degree.</code></td></tr></table>




---

archive/issue_comments_229785.json:
```json
{
    "body": "<div id=\"comment:141\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69ea9a493840a4d0c85cf5d40339784309852ee8\"><code>69ea9a4</code></a></td><td><code>Order changed in Singular output.</code></td></tr></table>\n",
    "created_at": "2015-11-17T15:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229785",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:141"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69ea9a493840a4d0c85cf5d40339784309852ee8"><code>69ea9a4</code></a></td><td><code>Order changed in Singular output.</code></td></tr></table>




---

archive/issue_comments_229786.json:
```json
{
    "body": "Changed commit from **[`199169e`](https://github.com/sagemath/sagetrac-mirror/commit/199169e84b29678c6dd94a8d8e2231359cc131a1)** to **[`69ea9a4`](https://github.com/sagemath/sagetrac-mirror/commit/69ea9a493840a4d0c85cf5d40339784309852ee8)**",
    "created_at": "2015-11-17T15:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229786",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`199169e`](https://github.com/sagemath/sagetrac-mirror/commit/199169e84b29678c6dd94a8d8e2231359cc131a1)** to **[`69ea9a4`](https://github.com/sagemath/sagetrac-mirror/commit/69ea9a493840a4d0c85cf5d40339784309852ee8)**



---

archive/issue_comments_229787.json:
```json
{
    "body": "<div id=\"comment:142\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b5bb325da3e5f7816aa93dd38c8e8bc90962e49\"><code>7b5bb32</code></a></td><td><code>Use correct function for degree.</code></td></tr></table>\n",
    "created_at": "2015-12-02T16:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229787",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:142"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b5bb325da3e5f7816aa93dd38c8e8bc90962e49"><code>7b5bb32</code></a></td><td><code>Use correct function for degree.</code></td></tr></table>




---

archive/issue_comments_229788.json:
```json
{
    "body": "Changed commit from **[`69ea9a4`](https://github.com/sagemath/sagetrac-mirror/commit/69ea9a493840a4d0c85cf5d40339784309852ee8)** to **[`7b5bb32`](https://github.com/sagemath/sagetrac-mirror/commit/7b5bb325da3e5f7816aa93dd38c8e8bc90962e49)**",
    "created_at": "2015-12-02T16:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229788",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`69ea9a4`](https://github.com/sagemath/sagetrac-mirror/commit/69ea9a493840a4d0c85cf5d40339784309852ee8)** to **[`7b5bb32`](https://github.com/sagemath/sagetrac-mirror/commit/7b5bb325da3e5f7816aa93dd38c8e8bc90962e49)**



---

archive/issue_comments_229789.json:
```json
{
    "body": "<div id=\"comment:143\" align=\"right\">comment:143</div>\n\nReplying to [@sagetrac-git](#comment%3A142):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b5bb325da3e5f7816aa93dd38c8e8bc90962e49\"><code>7b5bb32</code></a></td><td><code>Use correct function for degree.</code></td></tr></table>\n\nI get the following errors for the last change:\n\n```\n\nError compiling Cython file:\n------------------------------------------------------------\n...\n    deg = 0\n    if p == NULL:\n        return -1\n    if(r != currRing): rChangeCurrRing(r)\n    if x == NULL:\n       return r.pDeg(p,&deg,r)\n              ^\n------------------------------------------------------------\n\nsage/libs/singular/polynomial.pyx:534:15: Object of type 'ring' has no attribute 'pDeg'\n\nError compiling Cython file:\n------------------------------------------------------------\n...\n    deg = 0\n    if p == NULL:\n        return -1\n    if(r != currRing): rChangeCurrRing(r)\n    if x == NULL:\n       return r.pDeg(p,&deg,r)\n                      ^\n------------------------------------------------------------\n\nsage/libs/singular/polynomial.pyx:534:23: Cannot convert 'poly *' to Python object\n\nError compiling Cython file:\n------------------------------------------------------------\n...\n    deg = 0\n    if p == NULL:\n        return -1\n    if(r != currRing): rChangeCurrRing(r)\n    if x == NULL:\n       return r.pDeg(p,&deg,r)\n                       ^\n------------------------------------------------------------\n\nsage/libs/singular/polynomial.pyx:534:24: Cannot convert 'int *' to Python object\n\nError compiling Cython file:\n------------------------------------------------------------\n...\n    deg = 0\n    if p == NULL:\n        return -1\n    if(r != currRing): rChangeCurrRing(r)\n    if x == NULL:\n       return r.pDeg(p,&deg,r)\n                             ^\n```",
    "created_at": "2015-12-23T18:13:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229789",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:143" align="right">comment:143</div>

Replying to [@sagetrac-git](#comment%3A142):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b5bb325da3e5f7816aa93dd38c8e8bc90962e49"><code>7b5bb32</code></a></td><td><code>Use correct function for degree.</code></td></tr></table>

I get the following errors for the last change:

```

Error compiling Cython file:
------------------------------------------------------------
...
    deg = 0
    if p == NULL:
        return -1
    if(r != currRing): rChangeCurrRing(r)
    if x == NULL:
       return r.pDeg(p,&deg,r)
              ^
------------------------------------------------------------

sage/libs/singular/polynomial.pyx:534:15: Object of type 'ring' has no attribute 'pDeg'

Error compiling Cython file:
------------------------------------------------------------
...
    deg = 0
    if p == NULL:
        return -1
    if(r != currRing): rChangeCurrRing(r)
    if x == NULL:
       return r.pDeg(p,&deg,r)
                      ^
------------------------------------------------------------

sage/libs/singular/polynomial.pyx:534:23: Cannot convert 'poly *' to Python object

Error compiling Cython file:
------------------------------------------------------------
...
    deg = 0
    if p == NULL:
        return -1
    if(r != currRing): rChangeCurrRing(r)
    if x == NULL:
       return r.pDeg(p,&deg,r)
                       ^
------------------------------------------------------------

sage/libs/singular/polynomial.pyx:534:24: Cannot convert 'int *' to Python object

Error compiling Cython file:
------------------------------------------------------------
...
    deg = 0
    if p == NULL:
        return -1
    if(r != currRing): rChangeCurrRing(r)
    if x == NULL:
       return r.pDeg(p,&deg,r)
                             ^
```



---

archive/issue_comments_229790.json:
```json
{
    "body": "<div id=\"comment:144\" align=\"right\">comment:144</div>\n\nYes I guess I made a typo and forgot to push the latest commit.",
    "created_at": "2015-12-24T16:11:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229790",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:144" align="right">comment:144</div>

Yes I guess I made a typo and forgot to push the latest commit.



---

archive/issue_comments_229791.json:
```json
{
    "body": "<div id=\"comment:145\" align=\"right\">comment:145</div>\n\nOr forgot to add the function prototype.",
    "created_at": "2015-12-24T16:13:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229791",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:145" align="right">comment:145</div>

Or forgot to add the function prototype.



---

archive/issue_comments_229792.json:
```json
{
    "body": "<div id=\"comment:146\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c3c32009985e3972b16497af058c76e57c3cef9\"><code>5c3c320</code></a></td><td><code>Add declaration for Singular pDeg.</code></td></tr></table>\n",
    "created_at": "2015-12-24T16:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229792",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:146"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c3c32009985e3972b16497af058c76e57c3cef9"><code>5c3c320</code></a></td><td><code>Add declaration for Singular pDeg.</code></td></tr></table>




---

archive/issue_comments_229793.json:
```json
{
    "body": "Changed commit from **[`7b5bb32`](https://github.com/sagemath/sagetrac-mirror/commit/7b5bb325da3e5f7816aa93dd38c8e8bc90962e49)** to **[`5c3c320`](https://github.com/sagemath/sagetrac-mirror/commit/5c3c32009985e3972b16497af058c76e57c3cef9)**",
    "created_at": "2015-12-24T16:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229793",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7b5bb32`](https://github.com/sagemath/sagetrac-mirror/commit/7b5bb325da3e5f7816aa93dd38c8e8bc90962e49)** to **[`5c3c320`](https://github.com/sagemath/sagetrac-mirror/commit/5c3c32009985e3972b16497af058c76e57c3cef9)**



---

archive/issue_comments_229794.json:
```json
{
    "body": "<div id=\"comment:147\" align=\"right\">comment:147</div>\n\nHopefully better now although I did not test the fix.\n\nFrom what I remember the next issue was a segfault when letterplace stuff elements were multiplied.",
    "created_at": "2015-12-24T16:20:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229794",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:147" align="right">comment:147</div>

Hopefully better now although I did not test the fix.

From what I remember the next issue was a segfault when letterplace stuff elements were multiplied.



---

archive/issue_comments_229795.json:
```json
{
    "body": "<div id=\"comment:148\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b762791944972470678f8c6b478082ed1565064\"><code>2b76279</code></a></td><td><code>Correct fix for the degree in singular.</code></td></tr></table>\n",
    "created_at": "2015-12-24T21:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229795",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:148"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b762791944972470678f8c6b478082ed1565064"><code>2b76279</code></a></td><td><code>Correct fix for the degree in singular.</code></td></tr></table>




---

archive/issue_comments_229796.json:
```json
{
    "body": "Changed commit from **[`5c3c320`](https://github.com/sagemath/sagetrac-mirror/commit/5c3c32009985e3972b16497af058c76e57c3cef9)** to **[`2b76279`](https://github.com/sagemath/sagetrac-mirror/commit/2b762791944972470678f8c6b478082ed1565064)**",
    "created_at": "2015-12-24T21:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229796",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5c3c320`](https://github.com/sagemath/sagetrac-mirror/commit/5c3c32009985e3972b16497af058c76e57c3cef9)** to **[`2b76279`](https://github.com/sagemath/sagetrac-mirror/commit/2b762791944972470678f8c6b478082ed1565064)**



---

archive/issue_comments_229797.json:
```json
{
    "body": "<div id=\"comment:149\" align=\"right\">comment:149</div>\n\nProblem with letterplace algebra:\n\n```\nsage: F.<x> = FreeAlgebra(ZZ, implementation='letterplace')\nsage: x**2\nsage: x**2\nsage: x**2\n```",
    "created_at": "2015-12-24T21:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229797",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:149" align="right">comment:149</div>

Problem with letterplace algebra:

```
sage: F.<x> = FreeAlgebra(ZZ, implementation='letterplace')
sage: x**2
sage: x**2
sage: x**2
```



---

archive/issue_comments_229798.json:
```json
{
    "body": "<div id=\"comment:150\" align=\"right\">comment:150</div>\n\nI seem to remember there was a double free.",
    "created_at": "2015-12-24T21:32:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229798",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:150" align="right">comment:150</div>

I seem to remember there was a double free.



---

archive/issue_comments_229799.json:
```json
{
    "body": "<div id=\"comment:151\" align=\"right\">comment:151</div>\n\nDid you manage to build the branch and reproduce the letterplace error?",
    "created_at": "2016-01-05T14:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229799",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:151" align="right">comment:151</div>

Did you manage to build the branch and reproduce the letterplace error?



---

archive/issue_comments_229800.json:
```json
{
    "body": "Changed branch from **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)** to **[u/tscrim/upgrade_singular-17254](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_singular-17254)**",
    "created_at": "2016-03-13T04:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229800",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/jpflori/ticket/17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17254)** to **[u/tscrim/upgrade_singular-17254](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_singular-17254)**



---

archive/issue_comments_229801.json:
```json
{
    "body": "<div id=\"comment:152\" align=\"right\">comment:152</div>\n\nI rebased the branch (as best as I could), and I did get an error with letterplace:\n\n```\nsage: F.<x> = FreeAlgebra(ZZ, implementation='letterplace')\nsage: x**2\n0\n```\nI am also getting a variety of failures in testing the `rings/polynomial` folder, but most of them seem to be related to constructing ideals. I haven't run tests elsewhere.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef0b4e053f7b5fb73c6b4ea7c9fd336f63f43699\"><code>ef0b4e0</code></a></td><td><code>Rebase #17254 on 7.1.rc0.</code></td></tr></table>\n",
    "created_at": "2016-03-13T04:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229801",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:152" align="right">comment:152</div>

I rebased the branch (as best as I could), and I did get an error with letterplace:

```
sage: F.<x> = FreeAlgebra(ZZ, implementation='letterplace')
sage: x**2
0
```
I am also getting a variety of failures in testing the `rings/polynomial` folder, but most of them seem to be related to constructing ideals. I haven't run tests elsewhere.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef0b4e053f7b5fb73c6b4ea7c9fd336f63f43699"><code>ef0b4e0</code></a></td><td><code>Rebase #17254 on 7.1.rc0.</code></td></tr></table>




---

archive/issue_events_244029.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-03-13T04:53:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244029"
}
```



---

archive/issue_events_244030.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-03-13T04:53:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244030"
}
```



---

archive/issue_comments_229802.json:
```json
{
    "body": "Changed commit from **[`2b76279`](https://github.com/sagemath/sagetrac-mirror/commit/2b762791944972470678f8c6b478082ed1565064)** to **[`ef0b4e0`](https://github.com/sagemath/sagetrac-mirror/commit/ef0b4e053f7b5fb73c6b4ea7c9fd336f63f43699)**",
    "created_at": "2016-03-13T04:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229802",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`2b76279`](https://github.com/sagemath/sagetrac-mirror/commit/2b762791944972470678f8c6b478082ed1565064)** to **[`ef0b4e0`](https://github.com/sagemath/sagetrac-mirror/commit/ef0b4e053f7b5fb73c6b4ea7c9fd336f63f43699)**



---

archive/issue_comments_229803.json:
```json
{
    "body": "Changed commit from **[`ef0b4e0`](https://github.com/sagemath/sagetrac-mirror/commit/ef0b4e053f7b5fb73c6b4ea7c9fd336f63f43699)** to **[`dca98ec`](https://github.com/sagemath/sagetrac-mirror/commit/dca98ec292ca4e782a9e641e61ea92d60089fd09)**",
    "created_at": "2016-03-13T09:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229803",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ef0b4e0`](https://github.com/sagemath/sagetrac-mirror/commit/ef0b4e053f7b5fb73c6b4ea7c9fd336f63f43699)** to **[`dca98ec`](https://github.com/sagemath/sagetrac-mirror/commit/dca98ec292ca4e782a9e641e61ea92d60089fd09)**



---

archive/issue_comments_229804.json:
```json
{
    "body": "<div id=\"comment:153\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dca98ec292ca4e782a9e641e61ea92d60089fd09\"><code>dca98ec</code></a></td><td><code>Fixing an issue with my rebase.</code></td></tr></table>\n",
    "created_at": "2016-03-13T09:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229804",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:153"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dca98ec292ca4e782a9e641e61ea92d60089fd09"><code>dca98ec</code></a></td><td><code>Fixing an issue with my rebase.</code></td></tr></table>




---

archive/issue_comments_229805.json:
```json
{
    "body": "<div id=\"comment:154\" align=\"right\">comment:154</div>\n\nReplying to [@jpflori](#comment%3A149):\n> Problem with letterplace algebra:\n> \n> ```\n> sage: F.<x> = FreeAlgebra(ZZ, implementation='letterplace')\n> sage: x**2\n> sage: x**2\n> sage: x**2\n> ```\n\nwhen I compile the recent 'u/jpflori/ticket/17254' or 'u/tscrim/upgrade_singular-17254' with SAGE_DEBUG=yes on my 32 bit fedora22\n\n```\n  export SAGE_DEBUG=yes\n  ./sage -f singular\n```\nI get an printout from Singular:\n\n```\n  pmLPshift: too big shift requested\n```\n\nthe corresponding Singular source snippet is (look at 'shiftgb.cc')\n\n```\n if (L+sh-1 > uptodeg)\n  {\n#ifdef PDEBUG\n    PrintS(\"pmLPshift: too big shift requested\\n\");\n#endif\n    return(NULL); /* violation, 2check */\n  }\n```\nThis seems to be a bug, but the next question is, why do we get there and is this \nan error caused by a previous one or not.",
    "created_at": "2016-05-10T23:24:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229805",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:154" align="right">comment:154</div>

Replying to [@jpflori](#comment%3A149):
> Problem with letterplace algebra:
> 
> ```
> sage: F.<x> = FreeAlgebra(ZZ, implementation='letterplace')
> sage: x**2
> sage: x**2
> sage: x**2
> ```

when I compile the recent 'u/jpflori/ticket/17254' or 'u/tscrim/upgrade_singular-17254' with SAGE_DEBUG=yes on my 32 bit fedora22

```
  export SAGE_DEBUG=yes
  ./sage -f singular
```
I get an printout from Singular:

```
  pmLPshift: too big shift requested
```

the corresponding Singular source snippet is (look at 'shiftgb.cc')

```
 if (L+sh-1 > uptodeg)
  {
#ifdef PDEBUG
    PrintS("pmLPshift: too big shift requested\n");
#endif
    return(NULL); /* violation, 2check */
  }
```
This seems to be a bug, but the next question is, why do we get there and is this 
an error caused by a previous one or not.



---

archive/issue_comments_229806.json:
```json
{
    "body": "<div id=\"comment:155\" align=\"right\">comment:155</div>\n\nremaining failing tests (probably not all related to Singular):\n\n```\n./sage -t src/sage/schemes/affine/affine_rational_point.py  # Killed due to abort\n./sage -t src/sage/schemes/affine/affine_point.py  # Killed due to segmentation fault\n./sage -t src/sage/schemes/affine/affine_morphism.py  # Killed due to segmentation fault\n./sage -t src/sage/schemes/generic/algebraic_scheme.py  # Killed due to segmentation fault\n./sage -t src/sage/schemes/elliptic_curves/isogeny_small_degree.py  # Killed due to abort\n./sage -t src/sage/libs/cremona/newforms.pyx  # IOError in doctesting framework\n./sage -t src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # Bad exit: 14\n./sage -t src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # Timed out (and interrupt failed)\n./sage -t src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to segmentation fault\n./sage -t src/sage/rings/polynomial/multi_polynomial_ideal.py  # Killed due to segmentation fault\n./sage -t src/sage/rings/polynomial/pbori.pyx  # 7 doctests failed\n./sage -t src/sage/schemes/projective/projective_morphism.py  # 9 doctests failed\n./sage -t src/sage/rings/polynomial/polynomial_element.pyx  # 1 doctest failed\n./sage -t src/sage/rings/polynomial/plural.pyx  # 6 doctests failed\n./sage -t src/sage/schemes/jacobians/abstract_jacobian.py  # 1 doctest failed\n./sage -t src/sage/schemes/plane_curves/projective_curve.py  # 1 doctest failed\n./sage -t src/sage/rings/polynomial/polynomial_singular_interface.py  # 1 doctest failed\n./sage -t src/sage/rings/number_field/number_field_ideal.py  # 2 doctests failed\n./sage -t src/sage/modular/modform_hecketriangle/abstract_space.py  # 1 doctest failed\n./sage -t src/sage/rings/polynomial/infinite_polynomial_element.py  # 4 doctests failed\n./sage -t src/sage/rings/finite_rings/finite_field_ext_pari.py  # 1 doctest failed\n./sage -t src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed\n./sage -t src/sage/graphs/generic_graph.py  # 1 doctest failed\n./sage -t src/sage/modular/modform_hecketriangle/graded_ring_element.py  # 7 doctests failed\n./sage -t src/sage/rings/finite_rings/finite_field_givaro.py  # 1 doctest failed\n./sage -t src/sage/algebras/free_algebra.py  # 12 doctests failed\n./sage -t src/sage/rings/multi_power_series_ring_element.py  # 5 doctests failed\n./sage -t src/sage/rings/polynomial/infinite_polynomial_ring.py  # 1 doctest failed\n./sage -t src/sage/graphs/base/graph_backends.pyx  # 4 doctests failed\n./sage -t src/sage/symbolic/relation.py  # 7 doctests failed\n./sage -t src/sage/interfaces/singular.py  # 5 doctests failed\n./sage -t src/sage/rings/quotient_ring_element.py  # 1 doctest failed\n./sage -t src/sage/structure/element.pyx  # 1 doctest failed\n./sage -t src/sage/schemes/product_projective/wehlerK3.py  # 17 doctests failed\n./sage -t src/sage/categories/pushout.py  # 1 doctest failed\n./sage -t src/sage/rings/quotient_ring.py  # 12 doctests failed\n./sage -t src/sage/structure/sage_object.pyx  # 1 doctest failed\n```",
    "created_at": "2016-05-10T23:37:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229806",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:155" align="right">comment:155</div>

remaining failing tests (probably not all related to Singular):

```
./sage -t src/sage/schemes/affine/affine_rational_point.py  # Killed due to abort
./sage -t src/sage/schemes/affine/affine_point.py  # Killed due to segmentation fault
./sage -t src/sage/schemes/affine/affine_morphism.py  # Killed due to segmentation fault
./sage -t src/sage/schemes/generic/algebraic_scheme.py  # Killed due to segmentation fault
./sage -t src/sage/schemes/elliptic_curves/isogeny_small_degree.py  # Killed due to abort
./sage -t src/sage/libs/cremona/newforms.pyx  # IOError in doctesting framework
./sage -t src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # Bad exit: 14
./sage -t src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # Timed out (and interrupt failed)
./sage -t src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to segmentation fault
./sage -t src/sage/rings/polynomial/multi_polynomial_ideal.py  # Killed due to segmentation fault
./sage -t src/sage/rings/polynomial/pbori.pyx  # 7 doctests failed
./sage -t src/sage/schemes/projective/projective_morphism.py  # 9 doctests failed
./sage -t src/sage/rings/polynomial/polynomial_element.pyx  # 1 doctest failed
./sage -t src/sage/rings/polynomial/plural.pyx  # 6 doctests failed
./sage -t src/sage/schemes/jacobians/abstract_jacobian.py  # 1 doctest failed
./sage -t src/sage/schemes/plane_curves/projective_curve.py  # 1 doctest failed
./sage -t src/sage/rings/polynomial/polynomial_singular_interface.py  # 1 doctest failed
./sage -t src/sage/rings/number_field/number_field_ideal.py  # 2 doctests failed
./sage -t src/sage/modular/modform_hecketriangle/abstract_space.py  # 1 doctest failed
./sage -t src/sage/rings/polynomial/infinite_polynomial_element.py  # 4 doctests failed
./sage -t src/sage/rings/finite_rings/finite_field_ext_pari.py  # 1 doctest failed
./sage -t src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed
./sage -t src/sage/graphs/generic_graph.py  # 1 doctest failed
./sage -t src/sage/modular/modform_hecketriangle/graded_ring_element.py  # 7 doctests failed
./sage -t src/sage/rings/finite_rings/finite_field_givaro.py  # 1 doctest failed
./sage -t src/sage/algebras/free_algebra.py  # 12 doctests failed
./sage -t src/sage/rings/multi_power_series_ring_element.py  # 5 doctests failed
./sage -t src/sage/rings/polynomial/infinite_polynomial_ring.py  # 1 doctest failed
./sage -t src/sage/graphs/base/graph_backends.pyx  # 4 doctests failed
./sage -t src/sage/symbolic/relation.py  # 7 doctests failed
./sage -t src/sage/interfaces/singular.py  # 5 doctests failed
./sage -t src/sage/rings/quotient_ring_element.py  # 1 doctest failed
./sage -t src/sage/structure/element.pyx  # 1 doctest failed
./sage -t src/sage/schemes/product_projective/wehlerK3.py  # 17 doctests failed
./sage -t src/sage/categories/pushout.py  # 1 doctest failed
./sage -t src/sage/rings/quotient_ring.py  # 12 doctests failed
./sage -t src/sage/structure/sage_object.pyx  # 1 doctest failed
```



---

archive/issue_comments_229807.json:
```json
{
    "body": "<div id=\"comment:156\" align=\"right\">comment:156</div>\n\n@jpflori\n\nwhen using 'r.pLDeg()' instead of 'p_Deg()' in 'singular_polynomial_deg()'  (src/sage/libs/singular/polynomial.pyx)\n\n\nsome test from above pass, for example:\n\n```\n./sage -t src/sage/schemes/affine/affine_point.py \n./sage -t src/sage/schemes/affine/affine_morphism.py \n./sage -t src/sage/rings/polynomial/pbori.pyx  \n./sage -t  src/sage/rings/polynomial/infinite_polynomial_element.py\n```\nespecially some segfaults disappear but then probably other passing tests get broken?\n\nWhich example did you have in mind when you changed 'r.pLDeg()' to 'p_Deg()' in \n'singular_polynomial_deg()'  (src/sage/libs/singular/polynomial.pyx)?\n\nMaybe we should discuss with Hans his commit in case it breaks something\n\nhttps://groups.google.com/forum/#!topic/libsingular-devel/jregxl-k8Mw",
    "created_at": "2016-05-12T00:30:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229807",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:156" align="right">comment:156</div>

@jpflori

when using 'r.pLDeg()' instead of 'p_Deg()' in 'singular_polynomial_deg()'  (src/sage/libs/singular/polynomial.pyx)


some test from above pass, for example:

```
./sage -t src/sage/schemes/affine/affine_point.py 
./sage -t src/sage/schemes/affine/affine_morphism.py 
./sage -t src/sage/rings/polynomial/pbori.pyx  
./sage -t  src/sage/rings/polynomial/infinite_polynomial_element.py
```
especially some segfaults disappear but then probably other passing tests get broken?

Which example did you have in mind when you changed 'r.pLDeg()' to 'p_Deg()' in 
'singular_polynomial_deg()'  (src/sage/libs/singular/polynomial.pyx)?

Maybe we should discuss with Hans his commit in case it breaks something

https://groups.google.com/forum/#!topic/libsingular-devel/jregxl-k8Mw



---

archive/issue_comments_229808.json:
```json
{
    "body": "<div id=\"comment:157\" align=\"right\">comment:157</div>\n\nThe `plDeg` function is a Singular internal function, made for ecart, and has some restrictions regarding the ordering it can be applied to (no negative weights or things like that).\nIt gets constructed by Singular at initialization of the object from `p_Deg`.\n\nWhat we want in Sage is the \"usual\" degree which is `p_Deg`.\n\nMaybe the doctests were just wrong, i have no idea.",
    "created_at": "2016-05-12T07:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229808",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:157" align="right">comment:157</div>

The `plDeg` function is a Singular internal function, made for ecart, and has some restrictions regarding the ordering it can be applied to (no negative weights or things like that).
It gets constructed by Singular at initialization of the object from `p_Deg`.

What we want in Sage is the "usual" degree which is `p_Deg`.

Maybe the doctests were just wrong, i have no idea.



---

archive/issue_comments_229809.json:
```json
{
    "body": "<div id=\"comment:158\" align=\"right\">comment:158</div>\n\nWhich branch are you using? The branch on this ticket seems to have multiple conflicts with the current `develop`.",
    "created_at": "2016-05-12T08:52:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229809",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:158" align="right">comment:158</div>

Which branch are you using? The branch on this ticket seems to have multiple conflicts with the current `develop`.



---

archive/issue_comments_229810.json:
```json
{
    "body": "<div id=\"comment:159\" align=\"right\">comment:159</div>\n\nThe conflicts seem to be because of #20386.",
    "created_at": "2016-05-12T08:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229810",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:159" align="right">comment:159</div>

The conflicts seem to be because of #20386.



---

archive/issue_comments_229811.json:
```json
{
    "body": "Changed commit from **[`dca98ec`](https://github.com/sagemath/sagetrac-mirror/commit/dca98ec292ca4e782a9e641e61ea92d60089fd09)** to **[`048e5c5`](https://github.com/sagemath/sagetrac-mirror/commit/048e5c5bb4fa7b300933ffaa05fe936684a72ec5)**",
    "created_at": "2016-05-21T18:19:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229811",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed commit from **[`dca98ec`](https://github.com/sagemath/sagetrac-mirror/commit/dca98ec292ca4e782a9e641e61ea92d60089fd09)** to **[`048e5c5`](https://github.com/sagemath/sagetrac-mirror/commit/048e5c5bb4fa7b300933ffaa05fe936684a72ec5)**



---

archive/issue_comments_229812.json:
```json
{
    "body": "<div id=\"comment:160\" align=\"right\">comment:160</div>\n\nfixed some more issues.\n\nA rebase on recent develop branch was too hard for me so I squashed everything in a new commit.\n\n@jdemeyer I had to revert some of your changes in `src/module_list.py` \n(removing singular from include path)\nbecause I failed to do the same for Singular 4.",
    "created_at": "2016-05-21T18:19:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229812",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:160" align="right">comment:160</div>

fixed some more issues.

A rebase on recent develop branch was too hard for me so I squashed everything in a new commit.

@jdemeyer I had to revert some of your changes in `src/module_list.py` 
(removing singular from include path)
because I failed to do the same for Singular 4.



---

archive/issue_comments_229813.json:
```json
{
    "body": "Changed branch from **[u/tscrim/upgrade_singular-17254](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_singular-17254)** to **[u/jakobkroeker/ticket.17254.squashed.latest](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed.latest)**",
    "created_at": "2016-05-21T18:19:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229813",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed branch from **[u/tscrim/upgrade_singular-17254](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_singular-17254)** to **[u/jakobkroeker/ticket.17254.squashed.latest](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed.latest)**



---

archive/issue_comments_229814.json:
```json
{
    "body": "<div id=\"comment:161\" align=\"right\">comment:161</div>\n\nactually, in my recent branch the 'upgrade.patch' file is missing.\nNo idea how that happened, but this is a fact.\n\nI will fix that tomorrow or on friday. At the moment I'm just too tired.",
    "created_at": "2016-05-26T00:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229814",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:161" align="right">comment:161</div>

actually, in my recent branch the 'upgrade.patch' file is missing.
No idea how that happened, but this is a fact.

I will fix that tomorrow or on friday. At the moment I'm just too tired.



---

archive/issue_comments_229815.json:
```json
{
    "body": "<div id=\"comment:162\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3312a178e07d7441722425857096d228ab2148f9\"><code>3312a17</code></a></td><td><code>upgrade.patch was not staged, staging it</code></td></tr></table>\n",
    "created_at": "2016-05-28T19:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229815",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:162"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3312a178e07d7441722425857096d228ab2148f9"><code>3312a17</code></a></td><td><code>upgrade.patch was not staged, staging it</code></td></tr></table>




---

archive/issue_comments_229816.json:
```json
{
    "body": "Changed commit from **[`048e5c5`](https://github.com/sagemath/sagetrac-mirror/commit/048e5c5bb4fa7b300933ffaa05fe936684a72ec5)** to **[`3312a17`](https://github.com/sagemath/sagetrac-mirror/commit/3312a178e07d7441722425857096d228ab2148f9)**",
    "created_at": "2016-05-28T19:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229816",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`048e5c5`](https://github.com/sagemath/sagetrac-mirror/commit/048e5c5bb4fa7b300933ffaa05fe936684a72ec5)** to **[`3312a17`](https://github.com/sagemath/sagetrac-mirror/commit/3312a178e07d7441722425857096d228ab2148f9)**



---

archive/issue_comments_229817.json:
```json
{
    "body": "<div id=\"comment:163\" align=\"right\">comment:163</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A160):\n> A rebase on recent develop branch was too hard for me so I squashed everything in a new commit.\n> \n> @jdemeyer I had to revert some of your changes in `src/module_list.py` \n\nBoth of these are quite bad. Do you want me to have a look?",
    "created_at": "2016-05-28T20:50:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229817",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:163" align="right">comment:163</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A160):
> A rebase on recent develop branch was too hard for me so I squashed everything in a new commit.
> 
> @jdemeyer I had to revert some of your changes in `src/module_list.py` 

Both of these are quite bad. Do you want me to have a look?



---

archive/issue_comments_229818.json:
```json
{
    "body": "<div id=\"comment:164\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc868a01f121e7f32ea7678777d9b8d9bf988b45\"><code>cc868a0</code></a></td><td><code>rebase too hard for me. squashed everything again</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff98a0b4399f1ee25be9ce17398a12f864819e5c\"><code>ff98a0b</code></a></td><td><code>upgrade.patch was not staged, staging it</code></td></tr></table>\n",
    "created_at": "2016-05-29T09:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229818",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:164"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc868a01f121e7f32ea7678777d9b8d9bf988b45"><code>cc868a0</code></a></td><td><code>rebase too hard for me. squashed everything again</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff98a0b4399f1ee25be9ce17398a12f864819e5c"><code>ff98a0b</code></a></td><td><code>upgrade.patch was not staged, staging it</code></td></tr></table>




---

archive/issue_comments_229819.json:
```json
{
    "body": "Changed commit from **[`3312a17`](https://github.com/sagemath/sagetrac-mirror/commit/3312a178e07d7441722425857096d228ab2148f9)** to **[`ff98a0b`](https://github.com/sagemath/sagetrac-mirror/commit/ff98a0b4399f1ee25be9ce17398a12f864819e5c)**",
    "created_at": "2016-05-29T09:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229819",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3312a17`](https://github.com/sagemath/sagetrac-mirror/commit/3312a178e07d7441722425857096d228ab2148f9)** to **[`ff98a0b`](https://github.com/sagemath/sagetrac-mirror/commit/ff98a0b4399f1ee25be9ce17398a12f864819e5c)**



---

archive/issue_comments_229820.json:
```json
{
    "body": "<div id=\"comment:165\" align=\"right\">comment:165</div>\n\nReplying to [@jdemeyer](#comment%3A163):\n> Replying to [@sagetrac-jakobkroeker](#comment%3A160):\n> > A rebase on recent develop branch was too hard for me so I squashed everything in a new commit.\n> > \n> > @jdemeyer I had to revert some of your changes in `src/module_list.py` \n\n> \n> Both of these are quite bad. Do you want me to have a look?\n\nThat would be good. \n\nThe latest `u/jakobkroeker/ticket.17254.squashed.latest` (just committed with force) should have no conflicts with develop/master branch",
    "created_at": "2016-05-29T09:53:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229820",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:165" align="right">comment:165</div>

Replying to [@jdemeyer](#comment%3A163):
> Replying to [@sagetrac-jakobkroeker](#comment%3A160):
> > A rebase on recent develop branch was too hard for me so I squashed everything in a new commit.
> > 
> > @jdemeyer I had to revert some of your changes in `src/module_list.py` 

> 
> Both of these are quite bad. Do you want me to have a look?

That would be good. 

The latest `u/jakobkroeker/ticket.17254.squashed.latest` (just committed with force) should have no conflicts with develop/master branch



---

archive/issue_comments_229821.json:
```json
{
    "body": "<div id=\"comment:166\" align=\"right\">comment:166</div>\n\nQuestion : why trac shows me that trac's automerging failed?",
    "created_at": "2016-05-29T09:57:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229821",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:166" align="right">comment:166</div>

Question : why trac shows me that trac's automerging failed?



---

archive/issue_comments_229822.json:
```json
{
    "body": "<div id=\"comment:167\" align=\"right\">comment:167</div>\n\nI experience several strange doctest failures, for example:\n\n```\nFile \"src/sage/modular/modform_hecketriangle/abstract_space.py\", line 379, in sage.modular.modform_hecketriangle.abstract_space.FormsSpace_abstract.one_element\nFailed example:\n    MF.one_element()\nExpected:\n    doctest:...: DeprecationWarning: .one_element() is deprecated. Use .one() instead.\n    See http://trac.sagemath.org/17694 for details.\n    1 + O(q^5)\nGot:\n    doctest:1: DeprecationWarning: .one_element() is deprecated. Use .one() instead.\n    See http://trac.sagemath.org/17694 for details.\n      Running doctests with ID 2016-05-15-20-09-37-2e7003e6.\n    1 + O(q^5)\n*******************\n```\nany idea what is wrong here or how to fix it?\n\n`make distclean` and `ccache --clear` did not help",
    "created_at": "2016-05-29T10:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229822",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:167" align="right">comment:167</div>

I experience several strange doctest failures, for example:

```
File "src/sage/modular/modform_hecketriangle/abstract_space.py", line 379, in sage.modular.modform_hecketriangle.abstract_space.FormsSpace_abstract.one_element
Failed example:
    MF.one_element()
Expected:
    doctest:...: DeprecationWarning: .one_element() is deprecated. Use .one() instead.
    See http://trac.sagemath.org/17694 for details.
    1 + O(q^5)
Got:
    doctest:1: DeprecationWarning: .one_element() is deprecated. Use .one() instead.
    See http://trac.sagemath.org/17694 for details.
      Running doctests with ID 2016-05-15-20-09-37-2e7003e6.
    1 + O(q^5)
*******************
```
any idea what is wrong here or how to fix it?

`make distclean` and `ccache --clear` did not help



---

archive/issue_comments_229823.json:
```json
{
    "body": "<div id=\"comment:168\" align=\"right\">comment:168</div>\n\nIs it based off `develop` or `master`? These are different as `develop` is the (released today) 7.3.beta2, whereas `master` is `7.2`.",
    "created_at": "2016-05-29T10:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229823",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:168" align="right">comment:168</div>

Is it based off `develop` or `master`? These are different as `develop` is the (released today) 7.3.beta2, whereas `master` is `7.2`.



---

archive/issue_comments_229824.json:
```json
{
    "body": "<div id=\"comment:169\" align=\"right\">comment:169</div>\n\nI've seen some errors somewhat similar to that before. It is as if something in the doctesting output gets read with an offset to what it should. I forget exactly what I've done in the past to fix this, but I think it came from a specific type of doctest failure...",
    "created_at": "2016-05-29T10:11:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229824",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:169" align="right">comment:169</div>

I've seen some errors somewhat similar to that before. It is as if something in the doctesting output gets read with an offset to what it should. I forget exactly what I've done in the past to fix this, but I think it came from a specific type of doctest failure...



---

archive/issue_comments_229825.json:
```json
{
    "body": "<div id=\"comment:170\" align=\"right\">comment:170</div>\n\nReplying to [@tscrim](#comment%3A169):\n> I've seen some errors somewhat similar to that before. It is as if something in the doctesting output gets read with an offset to what it should. I forget exactly what I've done in the past to fix this, but I think it came from a specific type of doctest failure...\n\nare you able to reproduce some of these (false-positive) doctest failures?",
    "created_at": "2016-05-29T15:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229825",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:170" align="right">comment:170</div>

Replying to [@tscrim](#comment%3A169):
> I've seen some errors somewhat similar to that before. It is as if something in the doctesting output gets read with an offset to what it should. I forget exactly what I've done in the past to fix this, but I think it came from a specific type of doctest failure...

are you able to reproduce some of these (false-positive) doctest failures?



---

archive/issue_comments_229826.json:
```json
{
    "body": "<div id=\"comment:171\" align=\"right\">comment:171</div>\n\nReplying to [@tscrim](#comment%3A168):\n> Is it based off `develop` or `master`? These are different as `develop` is the (released today) 7.3.beta2, whereas `master` is `7.2`.\n\nBased on develop (https://github.com/sagemath/sage)\non my machine it merges without conflicts with master and develop branch.",
    "created_at": "2016-05-29T15:43:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229826",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:171" align="right">comment:171</div>

Replying to [@tscrim](#comment%3A168):
> Is it based off `develop` or `master`? These are different as `develop` is the (released today) 7.3.beta2, whereas `master` is `7.2`.

Based on develop (https://github.com/sagemath/sage)
on my machine it merges without conflicts with master and develop branch.



---

archive/issue_comments_229827.json:
```json
{
    "body": "<div id=\"comment:172\" align=\"right\">comment:172</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A171):\n> Replying to [@tscrim](#comment%3A168):\n> > Is it based off `develop` or `master`? These are different as `develop` is the (released today) 7.3.beta2, whereas `master` is `7.2`.\n\n> \n> Based on develop (https://github.com/sagemath/sage)\n> on my machine it merges without conflicts with master and develop branch.\n\nThe automerging that is used on trac is not as good as what local versions of git can do.\n\nAs for [comment:170](#comment%3A170), I haven't testing this branch yet.",
    "created_at": "2016-05-29T15:50:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229827",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:172" align="right">comment:172</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A171):
> Replying to [@tscrim](#comment%3A168):
> > Is it based off `develop` or `master`? These are different as `develop` is the (released today) 7.3.beta2, whereas `master` is `7.2`.

> 
> Based on develop (https://github.com/sagemath/sage)
> on my machine it merges without conflicts with master and develop branch.

The automerging that is used on trac is not as good as what local versions of git can do.

As for [comment:170](#comment%3A170), I haven't testing this branch yet.



---

archive/issue_comments_229828.json:
```json
{
    "body": "Changed branch from **[u/jakobkroeker/ticket.17254.squashed.latest](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed.latest)** to **[u/jdemeyer/ticket.17254.squashed.latest](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket.17254.squashed.latest)**",
    "created_at": "2016-05-30T08:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229828",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/jakobkroeker/ticket.17254.squashed.latest](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.squashed.latest)** to **[u/jdemeyer/ticket.17254.squashed.latest](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket.17254.squashed.latest)**



---

archive/issue_comments_229829.json:
```json
{
    "body": "Changed commit from **[`ff98a0b`](https://github.com/sagemath/sagetrac-mirror/commit/ff98a0b4399f1ee25be9ce17398a12f864819e5c)** to **[`a80b3a0`](https://github.com/sagemath/sagetrac-mirror/commit/a80b3a0929c2d5fd93337e682ba85e4a870fd4fb)**",
    "created_at": "2016-05-30T08:26:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229829",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`ff98a0b`](https://github.com/sagemath/sagetrac-mirror/commit/ff98a0b4399f1ee25be9ce17398a12f864819e5c)** to **[`a80b3a0`](https://github.com/sagemath/sagetrac-mirror/commit/a80b3a0929c2d5fd93337e682ba85e4a870fd4fb)**



---

archive/issue_comments_229830.json:
```json
{
    "body": "<div id=\"comment:174\" align=\"right\">comment:174</div>\n\nThere was a merge conflict with Sage 7.3.beta2, I fixed it.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a80b3a0929c2d5fd93337e682ba85e4a870fd4fb\"><code>a80b3a0</code></a></td><td><code>Merge tag '7.3.beta2' into t/17254/ticket.17254.squashed.latest</code></td></tr></table>\n",
    "created_at": "2016-05-30T08:26:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229830",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:174" align="right">comment:174</div>

There was a merge conflict with Sage 7.3.beta2, I fixed it.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a80b3a0929c2d5fd93337e682ba85e4a870fd4fb"><code>a80b3a0</code></a></td><td><code>Merge tag '7.3.beta2' into t/17254/ticket.17254.squashed.latest</code></td></tr></table>




---

archive/issue_comments_229831.json:
```json
{
    "body": "Changed commit from **[`a80b3a0`](https://github.com/sagemath/sagetrac-mirror/commit/a80b3a0929c2d5fd93337e682ba85e4a870fd4fb)** to **[`e8fbe03`](https://github.com/sagemath/sagetrac-mirror/commit/e8fbe03ca40868b74694ead4a1182804b881b9de)**",
    "created_at": "2016-05-30T08:39:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229831",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a80b3a0`](https://github.com/sagemath/sagetrac-mirror/commit/a80b3a0929c2d5fd93337e682ba85e4a870fd4fb)** to **[`e8fbe03`](https://github.com/sagemath/sagetrac-mirror/commit/e8fbe03ca40868b74694ead4a1182804b881b9de)**



---

archive/issue_comments_229832.json:
```json
{
    "body": "<div id=\"comment:175\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8fbe03ca40868b74694ead4a1182804b881b9de\"><code>e8fbe03</code></a></td><td><code>Upgrade to Singular-4.0.2</code></td></tr></table>\n",
    "created_at": "2016-05-30T08:39:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229832",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:175"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8fbe03ca40868b74694ead4a1182804b881b9de"><code>e8fbe03</code></a></td><td><code>Upgrade to Singular-4.0.2</code></td></tr></table>




---

archive/issue_comments_229833.json:
```json
{
    "body": "Changed commit from **[`e8fbe03`](https://github.com/sagemath/sagetrac-mirror/commit/e8fbe03ca40868b74694ead4a1182804b881b9de)** to **[`5b8343b`](https://github.com/sagemath/sagetrac-mirror/commit/5b8343bedcf79691520953721c432b5e88cbc764)**",
    "created_at": "2016-05-30T09:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229833",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e8fbe03`](https://github.com/sagemath/sagetrac-mirror/commit/e8fbe03ca40868b74694ead4a1182804b881b9de)** to **[`5b8343b`](https://github.com/sagemath/sagetrac-mirror/commit/5b8343bedcf79691520953721c432b5e88cbc764)**



---

archive/issue_comments_229834.json:
```json
{
    "body": "<div id=\"comment:176\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b8343bedcf79691520953721c432b5e88cbc764\"><code>5b8343b</code></a></td><td><code>Upgrade to Singular-4.0.2</code></td></tr></table>\n",
    "created_at": "2016-05-30T09:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229834",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:176"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b8343bedcf79691520953721c432b5e88cbc764"><code>5b8343b</code></a></td><td><code>Upgrade to Singular-4.0.2</code></td></tr></table>




---

archive/issue_comments_229835.json:
```json
{
    "body": "<div id=\"comment:177\" align=\"right\">comment:177</div>\n\nI cleaned up the patch and removed some unacceptable parts. Right now it doesn't build, that still needs to be fixed.",
    "created_at": "2016-05-30T09:51:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229835",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:177" align="right">comment:177</div>

I cleaned up the patch and removed some unacceptable parts. Right now it doesn't build, that still needs to be fixed.



---

archive/issue_comments_229836.json:
```json
{
    "body": "<div id=\"comment:178\" align=\"right\">comment:178</div>\n\nI think it's best to discuss with upstream about the crazy `#include` directory structure. It was already bad in Singular 3 and it seems to have gotten worse with Singular 4.",
    "created_at": "2016-05-30T10:00:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229836",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:178" align="right">comment:178</div>

I think it's best to discuss with upstream about the crazy `#include` directory structure. It was already bad in Singular 3 and it seems to have gotten worse with Singular 4.



---

archive/issue_comments_229837.json:
```json
{
    "body": "<div id=\"comment:179\" align=\"right\">comment:179</div>\n\nReplying to [@jdemeyer](#comment%3A177):\n> I cleaned up the patch and removed some unacceptable parts. Right now it doesn't build, that still needs to be fixed.\n\nwhat has to be done to get it compiling?",
    "created_at": "2016-05-30T15:20:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229837",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:179" align="right">comment:179</div>

Replying to [@jdemeyer](#comment%3A177):
> I cleaned up the patch and removed some unacceptable parts. Right now it doesn't build, that still needs to be fixed.

what has to be done to get it compiling?



---

archive/issue_comments_229838.json:
```json
{
    "body": "<div id=\"comment:180\" align=\"right\">comment:180</div>\n\nI am working on a hack to fix the includes, hang on...",
    "created_at": "2016-05-30T15:24:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229838",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:180" align="right">comment:180</div>

I am working on a hack to fix the includes, hang on...



---

archive/issue_comments_229839.json:
```json
{
    "body": "Changed commit from **[`5b8343b`](https://github.com/sagemath/sagetrac-mirror/commit/5b8343bedcf79691520953721c432b5e88cbc764)** to **[`1426ad8`](https://github.com/sagemath/sagetrac-mirror/commit/1426ad88ab3e8a3d72a75f952727deca44f951a7)**",
    "created_at": "2016-05-30T15:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229839",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5b8343b`](https://github.com/sagemath/sagetrac-mirror/commit/5b8343bedcf79691520953721c432b5e88cbc764)** to **[`1426ad8`](https://github.com/sagemath/sagetrac-mirror/commit/1426ad88ab3e8a3d72a75f952727deca44f951a7)**



---

archive/issue_comments_229840.json:
```json
{
    "body": "<div id=\"comment:181\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1426ad88ab3e8a3d72a75f952727deca44f951a7\"><code>1426ad8</code></a></td><td><code>Fix singular include directories</code></td></tr></table>\n",
    "created_at": "2016-05-30T15:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229840",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:181"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1426ad88ab3e8a3d72a75f952727deca44f951a7"><code>1426ad8</code></a></td><td><code>Fix singular include directories</code></td></tr></table>




---

archive/issue_comments_229841.json:
```json
{
    "body": "<div id=\"comment:182\" align=\"right\">comment:182</div>\n\nReplying to [@jdemeyer](#comment%3A177):\n> I cleaned up the patch and removed some unacceptable parts. Right now it doesn't build, that still needs to be fixed.\n\n\nAre these the unacceptable parts? (e.g  in src/sage/rings/polynomial/polydict.pyx)\n\n```\ndiff --git a/src/sage/rings/polynomial/polydict.pyx b/src/sage/rings/polynomial/polydict.pyx\nindex fd858f7..0b49f38 100644\n--- a/src/sage/rings/polynomial/polydict.pyx\n+++ b/src/sage/rings/polynomial/polydict.pyx\n@@ -506,7 +506,7 @@ cdef class PolyDict:\n         don't put negative signs on the generators. ::\n \n             sage: Integers(2)['x,y'].gens()\n-            (1*x, 1*y)\n+            (x, y)\n \n         We make sure that intervals are correctly represented. ::\n \n```\n\nThe 1*x output stems from Singular4 and that seems the new behaviour for that ring, for whatever reasons.\n\nsame for \n\n```\ndiff --git a/src/sage/rings/multi_power_series_ring_element.py b/src/sage/rings/multi_power_series_ring_element.py\nindex 7293a91..7b9ca6e 100644\n--- a/src/sage/rings/multi_power_series_ring_element.py\n+++ b/src/sage/rings/multi_power_series_ring_element.py\n@@ -32,7 +32,7 @@ Power series arithmetic, tracking precision::\n     sage: f*=s; f\n     s + 2*s^2 + 3*s^3 + O(s, t)^8\n     sage: f%2\n-    1*s + 1*s^3 + O(1*s, 1*t)^8\n+    s + s^3 + O(s, t)^8\n     sage: (f%2).parent()\n     Multivariate Power Series Ring in s, t over Ring of integers modulo 2\n \n@@ -1078,7 +1078,7 @@ class MPowerSeries(PowerSeries):\n             sage: R.<a,b,c> = PowerSeriesRing(ZZ)\n             sage: f = -a^3*b*c^2 + a^2*b^2*c^4 - 12*a^3*b^3*c^3 + R.O(10)\n             sage: g = f % 2; g\n-            1*a^3*b*c^2 + 1*a^2*b^2*c^4 + O(1*a, 1*b, 1*c)^10\n+            a^3*b*c^2 + a^2*b^2*c^4 + O(a, b, c)^10\n             sage: g in R\n             False\n             sage: g in R.base_extend(Zmod(2))\n```\n             \n\nalso floats are now put in braces,\nmaybe because otherwise parsing the string '1.7E+30*5' in Singular would be wronng or fail? (just guessing)\n\nso removing the following hack\n\n```\n--- a/src/sage/rings/real_double.pyx\n+++ b/src/sage/rings/real_double.pyx\n@@ -689,21 +689,6 @@ cdef class RealDoubleElement(FieldElement):\n             sage: RDF(10^100)\n             1e+100\n         \"\"\"\n-        if isinstance(x,basestring):\n-            # a hack for parsing float strings beginning with braces\n-            if len(x)>2 and x.count('(')==1 and  x.count(')')==1:\n-                try:\n-                    if (x[0] == '(' or x[1] == '(') and x[-1] == ')':\n-                        if (x[0] == '-' and x[1] == '(') :\n-                            x = x[2:-1]\n-                            self._value = - float(x)\n-                            return\n-                        else:\n-                            x = x[1:-1]\n-                            self._value = float(x)\n-                            return\n-                except:\n-                    pass\n         self._value = float(x)\n \n     def _magma_init_(self, magma):\n```\n\nwill result in a lot of failing doctests...",
    "created_at": "2016-05-30T15:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229841",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:182" align="right">comment:182</div>

Replying to [@jdemeyer](#comment%3A177):
> I cleaned up the patch and removed some unacceptable parts. Right now it doesn't build, that still needs to be fixed.


Are these the unacceptable parts? (e.g  in src/sage/rings/polynomial/polydict.pyx)

```
diff --git a/src/sage/rings/polynomial/polydict.pyx b/src/sage/rings/polynomial/polydict.pyx
index fd858f7..0b49f38 100644
--- a/src/sage/rings/polynomial/polydict.pyx
+++ b/src/sage/rings/polynomial/polydict.pyx
@@ -506,7 +506,7 @@ cdef class PolyDict:
         don't put negative signs on the generators. ::
 
             sage: Integers(2)['x,y'].gens()
-            (1*x, 1*y)
+            (x, y)
 
         We make sure that intervals are correctly represented. ::
 
```

The 1*x output stems from Singular4 and that seems the new behaviour for that ring, for whatever reasons.

same for 

```
diff --git a/src/sage/rings/multi_power_series_ring_element.py b/src/sage/rings/multi_power_series_ring_element.py
index 7293a91..7b9ca6e 100644
--- a/src/sage/rings/multi_power_series_ring_element.py
+++ b/src/sage/rings/multi_power_series_ring_element.py
@@ -32,7 +32,7 @@ Power series arithmetic, tracking precision::
     sage: f*=s; f
     s + 2*s^2 + 3*s^3 + O(s, t)^8
     sage: f%2
-    1*s + 1*s^3 + O(1*s, 1*t)^8
+    s + s^3 + O(s, t)^8
     sage: (f%2).parent()
     Multivariate Power Series Ring in s, t over Ring of integers modulo 2
 
@@ -1078,7 +1078,7 @@ class MPowerSeries(PowerSeries):
             sage: R.<a,b,c> = PowerSeriesRing(ZZ)
             sage: f = -a^3*b*c^2 + a^2*b^2*c^4 - 12*a^3*b^3*c^3 + R.O(10)
             sage: g = f % 2; g
-            1*a^3*b*c^2 + 1*a^2*b^2*c^4 + O(1*a, 1*b, 1*c)^10
+            a^3*b*c^2 + a^2*b^2*c^4 + O(a, b, c)^10
             sage: g in R
             False
             sage: g in R.base_extend(Zmod(2))
```
             

also floats are now put in braces,
maybe because otherwise parsing the string '1.7E+30*5' in Singular would be wronng or fail? (just guessing)

so removing the following hack

```
--- a/src/sage/rings/real_double.pyx
+++ b/src/sage/rings/real_double.pyx
@@ -689,21 +689,6 @@ cdef class RealDoubleElement(FieldElement):
             sage: RDF(10^100)
             1e+100
         """
-        if isinstance(x,basestring):
-            # a hack for parsing float strings beginning with braces
-            if len(x)>2 and x.count('(')==1 and  x.count(')')==1:
-                try:
-                    if (x[0] == '(' or x[1] == '(') and x[-1] == ')':
-                        if (x[0] == '-' and x[1] == '(') :
-                            x = x[2:-1]
-                            self._value = - float(x)
-                            return
-                        else:
-                            x = x[1:-1]
-                            self._value = float(x)
-                            return
-                except:
-                    pass
         self._value = float(x)
 
     def _magma_init_(self, magma):
```

will result in a lot of failing doctests...



---

archive/issue_comments_229842.json:
```json
{
    "body": "<div id=\"comment:183\" align=\"right\">comment:183</div>\n\nIt's not because Singular prints something in a certain way that Sage has to print it that way. The correct fix is changing the way how Sage prints Singular objects then.",
    "created_at": "2016-05-30T16:03:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229842",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:183" align="right">comment:183</div>

It's not because Singular prints something in a certain way that Sage has to print it that way. The correct fix is changing the way how Sage prints Singular objects then.



---

archive/issue_comments_229843.json:
```json
{
    "body": "<div id=\"comment:184\" align=\"right\">comment:184</div>\n\nI added a fix for the include file issue.",
    "created_at": "2016-05-30T16:04:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229843",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:184" align="right">comment:184</div>

I added a fix for the include file issue.



---

archive/issue_comments_229844.json:
```json
{
    "body": "<div id=\"comment:185\" align=\"right\">comment:185</div>\n\nReplying to [@jdemeyer](#comment%3A184):\n> I added a fix for the include file issue.\n\nThanks!",
    "created_at": "2016-05-30T16:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229844",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:185" align="right">comment:185</div>

Replying to [@jdemeyer](#comment%3A184):
> I added a fix for the include file issue.

Thanks!



---

archive/issue_comments_229845.json:
```json
{
    "body": "<div id=\"comment:186\" align=\"right\">comment:186</div>\n\nReplying to [@jdemeyer](#comment%3A183):\n> It's not because Singular prints something in a certain way that Sage has to print it that way. The correct fix is changing the way how Sage prints Singular objects then.\n\nAt least we should understand the reasons \n- for ` 1*x `\n- and for braces around floats \n\nI do not know whether it is safe to remove the `1*` and the braces around floats.\nI don't know what Sage does for example with `_repr_()`, (which calls `singular_polynomial_str()` which in turn calls `p_String`\n\nAnd if it' safe, how we should do that? \nregexping each polynomial string on the fly?",
    "created_at": "2016-05-30T16:48:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229845",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:186" align="right">comment:186</div>

Replying to [@jdemeyer](#comment%3A183):
> It's not because Singular prints something in a certain way that Sage has to print it that way. The correct fix is changing the way how Sage prints Singular objects then.

At least we should understand the reasons 
- for ` 1*x `
- and for braces around floats 

I do not know whether it is safe to remove the `1*` and the braces around floats.
I don't know what Sage does for example with `_repr_()`, (which calls `singular_polynomial_str()` which in turn calls `p_String`

And if it' safe, how we should do that? 
regexping each polynomial string on the fly?



---

archive/issue_comments_229846.json:
```json
{
    "body": "<div id=\"comment:187\" align=\"right\">comment:187</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A186):\n> regexping each polynomial string on the fly?\n\nIf that works, why not?",
    "created_at": "2016-05-30T20:56:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229846",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:187" align="right">comment:187</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A186):
> regexping each polynomial string on the fly?

If that works, why not?



---

archive/issue_comments_229847.json:
```json
{
    "body": "<div id=\"comment:188\" align=\"right\">comment:188</div>\n\nremaining failing tests:\n\n```\n./sage -t --long src/sage/arith/misc.py  # 1 doctest failed\n./sage -t --long src/sage/modular/modform_hecketriangle/graded_ring_element.py  # 7 doctests failed\n./sage -t --long src/sage/interfaces/singular.py  # 1 doctest failed\n./sage -t --long src/sage/categories/pushout.py  # 1 doctest failed\n./sage -t --long src/sage/quivers/algebra_elements.pyx  # Timed out (and interrupt failed)\n./sage -t --long src/sage/algebras/free_algebra.py  # 12 doctests failed\n./sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # Bad exit: 14\n./sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # Killed due to abort\n./sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # Killed due to segmentation fault\n./sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed\n./sage -t --long src/sage/rings/ring.pyx  # Killed due to abort\n./sage -t --long src/sage/rings/quotient_ring.py  # 12 doctests failed\n./sage -t --long src/sage/rings/multi_power_series_ring_element.py  # 3 doctests failed\n./sage -t --long src/sage/rings/polynomial/infinite_polynomial_ring.py  # 1 doctest failed\n./sage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to segmentation fault\n./sage -t --long src/sage/rings/polynomial/plural.pyx  # 6 doctests failed\n./sage -t --long src/sage/rings/polynomial/multi_polynomial_libsingular.pyx  # 2 doctests failed\n./sage -t --long src/sage/rings/polynomial/polynomial_singular_interface.py  # 1 doctest failed\n./sage -t --long src/sage/rings/polynomial/symmetric_ideal.py  # 12 doctests failed\n./sage -t --long src/sage/rings/polynomial/infinite_polynomial_element.py  # 4 doctests failed\n./sage -t --long src/sage/rings/polynomial/polydict.pyx  # 1 doctest failed\n./sage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py  # Killed due to segmentation fault\n./sage -t --long src/sage/schemes/projective/projective_morphism.py  # Killed due to segmentation fault\n./sage -t --long src/sage/schemes/plane_curves/projective_curve.py  # 1 doctest failed\n./sage -t --long src/sage/schemes/affine/affine_rational_point.py  # Killed due to abort\n./sage -t --long src/sage/schemes/affine/affine_point.py  # Killed due to segmentation fault\n./sage -t --long src/sage/schemes/affine/affine_morphism.py  # Killed due to segmentation fault\n./sage -t --long src/sage/schemes/jacobians/abstract_jacobian.py  # 1 doctest failed\n./sage -t --long src/sage/schemes/generic/algebraic_scheme.py  # Killed due to segmentation fault\n./sage -t --long src/sage/schemes/elliptic_curves/isogeny_small_degree.py  # Timed out (with hangup after interrupt)\n./sage -t --long src/sage/structure/element.pyx  # 1 doctest failed\n./sage -t --long src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed\n```\nany volunteers?",
    "created_at": "2016-06-01T06:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229847",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:188" align="right">comment:188</div>

remaining failing tests:

```
./sage -t --long src/sage/arith/misc.py  # 1 doctest failed
./sage -t --long src/sage/modular/modform_hecketriangle/graded_ring_element.py  # 7 doctests failed
./sage -t --long src/sage/interfaces/singular.py  # 1 doctest failed
./sage -t --long src/sage/categories/pushout.py  # 1 doctest failed
./sage -t --long src/sage/quivers/algebra_elements.pyx  # Timed out (and interrupt failed)
./sage -t --long src/sage/algebras/free_algebra.py  # 12 doctests failed
./sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # Bad exit: 14
./sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # Killed due to abort
./sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # Killed due to segmentation fault
./sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed
./sage -t --long src/sage/rings/ring.pyx  # Killed due to abort
./sage -t --long src/sage/rings/quotient_ring.py  # 12 doctests failed
./sage -t --long src/sage/rings/multi_power_series_ring_element.py  # 3 doctests failed
./sage -t --long src/sage/rings/polynomial/infinite_polynomial_ring.py  # 1 doctest failed
./sage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to segmentation fault
./sage -t --long src/sage/rings/polynomial/plural.pyx  # 6 doctests failed
./sage -t --long src/sage/rings/polynomial/multi_polynomial_libsingular.pyx  # 2 doctests failed
./sage -t --long src/sage/rings/polynomial/polynomial_singular_interface.py  # 1 doctest failed
./sage -t --long src/sage/rings/polynomial/symmetric_ideal.py  # 12 doctests failed
./sage -t --long src/sage/rings/polynomial/infinite_polynomial_element.py  # 4 doctests failed
./sage -t --long src/sage/rings/polynomial/polydict.pyx  # 1 doctest failed
./sage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py  # Killed due to segmentation fault
./sage -t --long src/sage/schemes/projective/projective_morphism.py  # Killed due to segmentation fault
./sage -t --long src/sage/schemes/plane_curves/projective_curve.py  # 1 doctest failed
./sage -t --long src/sage/schemes/affine/affine_rational_point.py  # Killed due to abort
./sage -t --long src/sage/schemes/affine/affine_point.py  # Killed due to segmentation fault
./sage -t --long src/sage/schemes/affine/affine_morphism.py  # Killed due to segmentation fault
./sage -t --long src/sage/schemes/jacobians/abstract_jacobian.py  # 1 doctest failed
./sage -t --long src/sage/schemes/generic/algebraic_scheme.py  # Killed due to segmentation fault
./sage -t --long src/sage/schemes/elliptic_curves/isogeny_small_degree.py  # Timed out (with hangup after interrupt)
./sage -t --long src/sage/structure/element.pyx  # 1 doctest failed
./sage -t --long src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed
```
any volunteers?



---

archive/issue_comments_229848.json:
```json
{
    "body": "<div id=\"comment:189\" align=\"right\">comment:189</div>\n\nDo you still get the letterplace segfault?",
    "created_at": "2016-06-01T06:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229848",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:189" align="right">comment:189</div>

Do you still get the letterplace segfault?



---

archive/issue_comments_229849.json:
```json
{
    "body": "<div id=\"comment:190\" align=\"right\">comment:190</div>\n\nReplying to [@jpflori](#comment%3A189):\n> Do you still get the letterplace segfault?\n\nI did not fix that one because I have no idea what FreeAlgebra is neither I know something about letterplace implementation, so I did not even try.",
    "created_at": "2016-06-01T19:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229849",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:190" align="right">comment:190</div>

Replying to [@jpflori](#comment%3A189):
> Do you still get the letterplace segfault?

I did not fix that one because I have no idea what FreeAlgebra is neither I know something about letterplace implementation, so I did not even try.



---

archive/issue_comments_229850.json:
```json
{
    "body": "Changed commit from **[`1426ad8`](https://github.com/sagemath/sagetrac-mirror/commit/1426ad88ab3e8a3d72a75f952727deca44f951a7)** to **[`df297d6`](https://github.com/sagemath/sagetrac-mirror/commit/df297d6c6a4dc2955ef985bdef3646f8a7217be1)**",
    "created_at": "2016-06-01T22:04:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229850",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed commit from **[`1426ad8`](https://github.com/sagemath/sagetrac-mirror/commit/1426ad88ab3e8a3d72a75f952727deca44f951a7)** to **[`df297d6`](https://github.com/sagemath/sagetrac-mirror/commit/df297d6c6a4dc2955ef985bdef3646f8a7217be1)**



---

archive/issue_comments_229851.json:
```json
{
    "body": "<div id=\"comment:191\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df297d6c6a4dc2955ef985bdef3646f8a7217be1\"><code>df297d6</code></a></td><td><code>add meaninful messages to Singular error</code></td></tr></table>\n\nremark: the patch above does not solve the issue with letterplace segfault",
    "created_at": "2016-06-01T22:04:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229851",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:191"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df297d6c6a4dc2955ef985bdef3646f8a7217be1"><code>df297d6</code></a></td><td><code>add meaninful messages to Singular error</code></td></tr></table>

remark: the patch above does not solve the issue with letterplace segfault



---

archive/issue_comments_229852.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket.17254.squashed.latest](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket.17254.squashed.latest)** to **[u/jakobkroeker/ticket.17254.Jeroen_Demeyer.version](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.Jeroen_Demeyer.version)**",
    "created_at": "2016-06-01T22:04:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229852",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed branch from **[u/jdemeyer/ticket.17254.squashed.latest](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket.17254.squashed.latest)** to **[u/jakobkroeker/ticket.17254.Jeroen_Demeyer.version](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.Jeroen_Demeyer.version)**



---

archive/issue_comments_229853.json:
```json
{
    "body": "<div id=\"comment:192\" align=\"right\">comment:192</div>\n\nsimplest failing example:\n\n```\nsage: A.<x> = AffineSpace(GF(3^2, 't'), 1) ## line 299 ##\nIdeal(x).weil_restriction()\n```",
    "created_at": "2016-06-01T22:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229853",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:192" align="right">comment:192</div>

simplest failing example:

```
sage: A.<x> = AffineSpace(GF(3^2, 't'), 1) ## line 299 ##
Ideal(x).weil_restriction()
```



---

archive/issue_comments_229854.json:
```json
{
    "body": "<div id=\"comment:193\" align=\"right\">comment:193</div>\n\nadded debug printouts in \n\n```\nu/jakobkroeker/jdemeyer_ticket.17254.latest.debug\n```\n\nfor the example\n\n```\nsage: F.<x> = FreeAlgebra(ZZ, implementation='letterplace')\nsage: x**2\n```\nin `free_algebra_element_letterplace.pyx`, `__pow__()` routine\nafter copying the polynomial from one ring to another (with `prCopyR`) something seems broken\n(look at the polynomial degree!)\n\nand for the \n\n```\nsage: A.<x> = AffineSpace(GF(3^2, 't'), 1) ## line 299 ##\nIdeal(x).weil_restriction()\n```\n\nafter the `subs()`  command in the `weil_restriction()`-Routine something is screwed up\n(look at the polynomial degree!)\n\n@jpflori\nAny idea?",
    "created_at": "2016-06-02T21:30:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229854",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:193" align="right">comment:193</div>

added debug printouts in 

```
u/jakobkroeker/jdemeyer_ticket.17254.latest.debug
```

for the example

```
sage: F.<x> = FreeAlgebra(ZZ, implementation='letterplace')
sage: x**2
```
in `free_algebra_element_letterplace.pyx`, `__pow__()` routine
after copying the polynomial from one ring to another (with `prCopyR`) something seems broken
(look at the polynomial degree!)

and for the 

```
sage: A.<x> = AffineSpace(GF(3^2, 't'), 1) ## line 299 ##
Ideal(x).weil_restriction()
```

after the `subs()`  command in the `weil_restriction()`-Routine something is screwed up
(look at the polynomial degree!)

@jpflori
Any idea?



---

archive/issue_comments_229855.json:
```json
{
    "body": "Changed commit from **[`df297d6`](https://github.com/sagemath/sagetrac-mirror/commit/df297d6c6a4dc2955ef985bdef3646f8a7217be1)** to **[`88ce71f`](https://github.com/sagemath/sagetrac-mirror/commit/88ce71f30b3d013eac38df7470679caec832f15f)**",
    "created_at": "2016-06-03T17:51:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229855",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`df297d6`](https://github.com/sagemath/sagetrac-mirror/commit/df297d6c6a4dc2955ef985bdef3646f8a7217be1)** to **[`88ce71f`](https://github.com/sagemath/sagetrac-mirror/commit/88ce71f30b3d013eac38df7470679caec832f15f)**



---

archive/issue_comments_229856.json:
```json
{
    "body": "<div id=\"comment:194\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88ce71f30b3d013eac38df7470679caec832f15f\"><code>88ce71f</code></a></td><td><code>call rComplete for singular ring</code></td></tr></table>\n",
    "created_at": "2016-06-03T17:51:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229856",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:194"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88ce71f30b3d013eac38df7470679caec832f15f"><code>88ce71f</code></a></td><td><code>call rComplete for singular ring</code></td></tr></table>




---

archive/issue_comments_229857.json:
```json
{
    "body": "<div id=\"comment:195\" align=\"right\">comment:195</div>\n\np_Deg seems to have problems with lex ordering:\n\n```\nk = QQ\nS.<a,b>=PolynomialRing(k, 2, {\"a\",\"b\"}, order='lex')\na.degree() # 65536\n\nk = QQ\nS.<a,b>=PolynomialRing(k, 2, {\"a\",\"b\"}, order='degrevlex')\na.degree() #1\n\n```",
    "created_at": "2016-06-04T01:13:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229857",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:195" align="right">comment:195</div>

p_Deg seems to have problems with lex ordering:

```
k = QQ
S.<a,b>=PolynomialRing(k, 2, {"a","b"}, order='lex')
a.degree() # 65536

k = QQ
S.<a,b>=PolynomialRing(k, 2, {"a","b"}, order='degrevlex')
a.degree() #1

```



---

archive/issue_comments_229858.json:
```json
{
    "body": "<div id=\"comment:196\" align=\"right\">comment:196</div>\n\n@jpflori\n\nSingulars degree function calls `pLDeg` and not `p_Deg`, \n(grep for '`jjDEG`' in Singular sources), so we should do the same/similar by default.\none of the reasons: `p_Deg` seems returning garbage for lexicographic orderings\n(see comment 195)\n\n\nQuestion: is the behaviour described in the documentation of the 'degree' function in sage \n\n```\nNote that a matrix term ordering alters the grading of the generators\n          of the ring; see the tests below.  To avoid this behavior, use either\n          ``exponents()`` for the exponents themselves, or the optional\n          argument ``std_grading=False``.\n```\n\nnatural and is it what a user would expect? Then we could(?) fix it using a different appropriate call:\n\n```\nsage: sage: tord = TermOrder(matrix([3,0,1,1,1,0,1,0,0]))\nsage: sage: R.<x,y,z> = PolynomialRing(QQ,'x',3,order=tord)\nsage: sage: (x^3*y+x*z^4).degree() # 9\n('p_Totaldegree', 4)\n('p_WTotaldegree', 9)\n('p_WDegree', 9)\n('pFDeg', 4)\n('pLDeg', 5)\n```",
    "created_at": "2016-06-13T01:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229858",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:196" align="right">comment:196</div>

@jpflori

Singulars degree function calls `pLDeg` and not `p_Deg`, 
(grep for '`jjDEG`' in Singular sources), so we should do the same/similar by default.
one of the reasons: `p_Deg` seems returning garbage for lexicographic orderings
(see comment 195)


Question: is the behaviour described in the documentation of the 'degree' function in sage 

```
Note that a matrix term ordering alters the grading of the generators
          of the ring; see the tests below.  To avoid this behavior, use either
          ``exponents()`` for the exponents themselves, or the optional
          argument ``std_grading=False``.
```

natural and is it what a user would expect? Then we could(?) fix it using a different appropriate call:

```
sage: sage: tord = TermOrder(matrix([3,0,1,1,1,0,1,0,0]))
sage: sage: R.<x,y,z> = PolynomialRing(QQ,'x',3,order=tord)
sage: sage: (x^3*y+x*z^4).degree() # 9
('p_Totaldegree', 4)
('p_WTotaldegree', 9)
('p_WDegree', 9)
('pFDeg', 4)
('pLDeg', 5)
```



---

archive/issue_comments_229859.json:
```json
{
    "body": "<div id=\"comment:197\" align=\"right\">comment:197</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A196):\n> Question: is the behaviour described in the documentation of the 'degree' function in sage \n> \n> ```\n> Note that a matrix term ordering alters the grading of the generators\n>           of the ring; see the tests below.  To avoid this behavior, use either\n>           ``exponents()`` for the exponents themselves, or the optional\n>           argument ``std_grading=False``.\n> ```\n> \n> natural and is it what a user would expect?\n\nI bumped into this a long time ago. It shocked me then, but I adapted & now my code depends on it. If this is true of me, it is probably true of others.\n\nThis, for example, is from Sage 6.7:\n\n```\nsage: T = TermOrder(matrix(3,3,[1,2,3,3,4,5,0,0,1]))\nsage: R.<x,y,z> = PolynomialRing(QQ,'x',3,order=T)\nsage: y.degree()\n2\nsage: version()\n'SageMath Version 6.7, Release Date: 2015-05-17'\n```\nSo IMHO we should mimic Singular for compatibility reasons (i.e., we're mimicking Sage itself).",
    "created_at": "2016-06-13T02:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229859",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:197" align="right">comment:197</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A196):
> Question: is the behaviour described in the documentation of the 'degree' function in sage 
> 
> ```
> Note that a matrix term ordering alters the grading of the generators
>           of the ring; see the tests below.  To avoid this behavior, use either
>           ``exponents()`` for the exponents themselves, or the optional
>           argument ``std_grading=False``.
> ```
> 
> natural and is it what a user would expect?

I bumped into this a long time ago. It shocked me then, but I adapted & now my code depends on it. If this is true of me, it is probably true of others.

This, for example, is from Sage 6.7:

```
sage: T = TermOrder(matrix(3,3,[1,2,3,3,4,5,0,0,1]))
sage: R.<x,y,z> = PolynomialRing(QQ,'x',3,order=T)
sage: y.degree()
2
sage: version()
'SageMath Version 6.7, Release Date: 2015-05-17'
```
So IMHO we should mimic Singular for compatibility reasons (i.e., we're mimicking Sage itself).



---

archive/issue_comments_229860.json:
```json
{
    "body": "Changed branch from **[u/jakobkroeker/ticket.17254.Jeroen_Demeyer.version](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.Jeroen_Demeyer.version)** to **[u/tscrim/upgrade_singular-17254](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_singular-17254)**",
    "created_at": "2016-06-14T02:55:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229860",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/jakobkroeker/ticket.17254.Jeroen_Demeyer.version](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/ticket.17254.Jeroen_Demeyer.version)** to **[u/tscrim/upgrade_singular-17254](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_singular-17254)**



---

archive/issue_events_244031.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-06-14T02:55:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244031"
}
```



---

archive/issue_events_244032.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-06-14T02:55:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244032"
}
```



---

archive/issue_comments_229861.json:
```json
{
    "body": "<div id=\"comment:198\" align=\"right\">comment:198</div>\n\nRebased on latest beta.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ec51342d57b7b66aa576edca3b1810768f3a593\"><code>9ec5134</code></a></td><td><code>Merge branch 'u/jakobkroeker/ticket.17254.Jeroen_Demeyer.version' of git://trac.sagemath.org/sage into u/jakobkroeker/ticket.17254.Jeroen_Demeyer.version</code></td></tr></table>\n",
    "created_at": "2016-06-14T02:55:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229861",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:198" align="right">comment:198</div>

Rebased on latest beta.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ec51342d57b7b66aa576edca3b1810768f3a593"><code>9ec5134</code></a></td><td><code>Merge branch 'u/jakobkroeker/ticket.17254.Jeroen_Demeyer.version' of git://trac.sagemath.org/sage into u/jakobkroeker/ticket.17254.Jeroen_Demeyer.version</code></td></tr></table>




---

archive/issue_comments_229862.json:
```json
{
    "body": "Changed commit from **[`88ce71f`](https://github.com/sagemath/sagetrac-mirror/commit/88ce71f30b3d013eac38df7470679caec832f15f)** to **[`9ec5134`](https://github.com/sagemath/sagetrac-mirror/commit/9ec51342d57b7b66aa576edca3b1810768f3a593)**",
    "created_at": "2016-06-14T02:55:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229862",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`88ce71f`](https://github.com/sagemath/sagetrac-mirror/commit/88ce71f30b3d013eac38df7470679caec832f15f)** to **[`9ec5134`](https://github.com/sagemath/sagetrac-mirror/commit/9ec51342d57b7b66aa576edca3b1810768f3a593)**



---

archive/issue_comments_229863.json:
```json
{
    "body": "<div id=\"comment:199\" align=\"right\">comment:199</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A196):\n> Question: is the behaviour described in the documentation of the 'degree' function in sage \n> \n> ```\n> Note that a matrix term ordering alters the grading of the generators\n>           of the ring; see the tests below.  To avoid this behavior, use either\n>           ``exponents()`` for the exponents themselves, or the optional\n>           argument ``std_grading=False``.\n> ```\n> \n> natural and is it what a user would expect? Then we could(?) fix it using a different appropriate call:\n> \n> ```\n> sage: sage: tord = TermOrder(matrix([3,0,1,1,1,0,1,0,0]))\n> sage: sage: R.<x,y,z> = PolynomialRing(QQ,'x',3,order=tord)\n> sage: sage: (x^3*y+x*z^4).degree() # 9\n> ('p_Totaldegree', 4)\n> ('p_WTotaldegree', 9)\n> ('p_WDegree', 9)\n> ('pFDeg', 4)\n> ('pLDeg', 5)\n> ```\n\nAs the person who introduced the matrix term ordering into Sage, I think that it was just due to the Singular behavior that a matrix term ordering changes the grading of the generators according to the first row of the matrix in Sage. It shocked everyone including John, and was regarded as a bug. So if we can make the grading and the matrix term ordering independent, switching to Singular 4, then I would be happy. Of course it should go with an appropriate deprecation warning.",
    "created_at": "2016-06-22T01:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229863",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:199" align="right">comment:199</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A196):
> Question: is the behaviour described in the documentation of the 'degree' function in sage 
> 
> ```
> Note that a matrix term ordering alters the grading of the generators
>           of the ring; see the tests below.  To avoid this behavior, use either
>           ``exponents()`` for the exponents themselves, or the optional
>           argument ``std_grading=False``.
> ```
> 
> natural and is it what a user would expect? Then we could(?) fix it using a different appropriate call:
> 
> ```
> sage: sage: tord = TermOrder(matrix([3,0,1,1,1,0,1,0,0]))
> sage: sage: R.<x,y,z> = PolynomialRing(QQ,'x',3,order=tord)
> sage: sage: (x^3*y+x*z^4).degree() # 9
> ('p_Totaldegree', 4)
> ('p_WTotaldegree', 9)
> ('p_WDegree', 9)
> ('pFDeg', 4)
> ('pLDeg', 5)
> ```

As the person who introduced the matrix term ordering into Sage, I think that it was just due to the Singular behavior that a matrix term ordering changes the grading of the generators according to the first row of the matrix in Sage. It shocked everyone including John, and was regarded as a bug. So if we can make the grading and the matrix term ordering independent, switching to Singular 4, then I would be happy. Of course it should go with an appropriate deprecation warning.



---

archive/issue_comments_229864.json:
```json
{
    "body": "<div id=\"comment:200\" align=\"right\">comment:200</div>\n\nReplying to [@kwankyu](#comment%3A199):\n> Of course it should go with an appropriate deprecation warning.\n\n+1",
    "created_at": "2016-06-22T04:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229864",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:200" align="right">comment:200</div>

Replying to [@kwankyu](#comment%3A199):
> Of course it should go with an appropriate deprecation warning.

+1



---

archive/issue_comments_229865.json:
```json
{
    "body": "<div id=\"comment:201\" align=\"right\">comment:201</div>\n\nPolymake (#20892) looks for a binary called `libsingular-config`. Is this something that will be installed by Singular 4?",
    "created_at": "2016-06-29T16:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229865",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:201" align="right">comment:201</div>

Polymake (#20892) looks for a binary called `libsingular-config`. Is this something that will be installed by Singular 4?



---

archive/issue_comments_229866.json:
```json
{
    "body": "<div id=\"comment:202\" align=\"right\">comment:202</div>\n\nReplying to [@mkoeppe](#comment%3A201):\n> Polymake (#20892) looks for a binary called `libsingular-config`. Is this something that will be installed by Singular 4?\n\nyes, libsingular-config is a bash script in Singular 4",
    "created_at": "2016-07-01T13:58:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229866",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:202" align="right">comment:202</div>

Replying to [@mkoeppe](#comment%3A201):
> Polymake (#20892) looks for a binary called `libsingular-config`. Is this something that will be installed by Singular 4?

yes, libsingular-config is a bash script in Singular 4



---

archive/issue_comments_229867.json:
```json
{
    "body": "<div id=\"comment:203\" align=\"right\">comment:203</div>\n\nThis will hopefully build with GCC 6.x... (cf. #20738) :P",
    "created_at": "2016-07-03T15:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229867",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:203" align="right">comment:203</div>

This will hopefully build with GCC 6.x... (cf. #20738) :P



---

archive/issue_comments_229868.json:
```json
{
    "body": "Changed commit from **[`9ec5134`](https://github.com/sagemath/sagetrac-mirror/commit/9ec51342d57b7b66aa576edca3b1810768f3a593)** to **[`738fe43`](https://github.com/sagemath/sagetrac-mirror/commit/738fe43d05806edcd1e4f8c8b7dd1b086b9ca7e2)**",
    "created_at": "2016-07-04T22:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229868",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed commit from **[`9ec5134`](https://github.com/sagemath/sagetrac-mirror/commit/9ec51342d57b7b66aa576edca3b1810768f3a593)** to **[`738fe43`](https://github.com/sagemath/sagetrac-mirror/commit/738fe43d05806edcd1e4f8c8b7dd1b086b9ca7e2)**



---

archive/issue_comments_229869.json:
```json
{
    "body": "<div id=\"comment:204\" align=\"right\">comment:204</div>\n\nCurrently I implemented `singular_polynomial_deg` as follows\nto mimic its behaviour as it was with Singular 3.1.7(and older)\n\n```\n    ...\n    cdef long _deg, deg\n    \n    deg = -1\n    _deg = -1 \n    if x == NULL:\n        while p:  \n            _deg = p_WTotaldegree(p,r)\n          \n            if _deg > deg:\n                deg = _deg\n            p = pNext(p)\n\n        return deg\n    ...\n```\n\nThe degree-related tests seem to pass now.\n\nRemakr: pDeg() seems not usable/has different behaviour; see \nhttps://groups.google.com/forum/?_escaped_fragment_=topic/libsingular-devel/dulzKFTF3g8#!topic/libsingular-devel/dulzKFTF3g8 for details.\n\nFurther changes: added some missing rComplete() calls (\notherwise prCopyR cannot be used, for instance, see https://groups.google.com/forum/?_escaped_fragment_=topic/libsingular-devel/4JRHxVXIF70#!topic/libsingular-devel/4JRHxVXIF70 )\n\n\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1e228e55ce1f57532260291a2bc669c8622197a\"><code>b1e228e</code></a></td><td><code>replacement for pLDeg from Singular 3 (behaviour of pLDeg changed in Singular 4)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a511817f07485041f8fc5cb335a939089bf954a6\"><code>a511817</code></a></td><td><code>added missing rComplete calls</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/738fe43d05806edcd1e4f8c8b7dd1b086b9ca7e2\"><code>738fe43</code></a></td><td><code>disable short output for Singular</code></td></tr></table>\n",
    "created_at": "2016-07-04T22:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229869",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:204" align="right">comment:204</div>

Currently I implemented `singular_polynomial_deg` as follows
to mimic its behaviour as it was with Singular 3.1.7(and older)

```
    ...
    cdef long _deg, deg
    
    deg = -1
    _deg = -1 
    if x == NULL:
        while p:  
            _deg = p_WTotaldegree(p,r)
          
            if _deg > deg:
                deg = _deg
            p = pNext(p)

        return deg
    ...
```

The degree-related tests seem to pass now.

Remakr: pDeg() seems not usable/has different behaviour; see 
https://groups.google.com/forum/?_escaped_fragment_=topic/libsingular-devel/dulzKFTF3g8#!topic/libsingular-devel/dulzKFTF3g8 for details.

Further changes: added some missing rComplete() calls (
otherwise prCopyR cannot be used, for instance, see https://groups.google.com/forum/?_escaped_fragment_=topic/libsingular-devel/4JRHxVXIF70#!topic/libsingular-devel/4JRHxVXIF70 )



---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1e228e55ce1f57532260291a2bc669c8622197a"><code>b1e228e</code></a></td><td><code>replacement for pLDeg from Singular 3 (behaviour of pLDeg changed in Singular 4)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a511817f07485041f8fc5cb335a939089bf954a6"><code>a511817</code></a></td><td><code>added missing rComplete calls</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/738fe43d05806edcd1e4f8c8b7dd1b086b9ca7e2"><code>738fe43</code></a></td><td><code>disable short output for Singular</code></td></tr></table>




---

archive/issue_comments_229870.json:
```json
{
    "body": "Changed branch from **[u/tscrim/upgrade_singular-17254](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_singular-17254)** to **[u/jakobkroeker/tscrim.upgrade_singular-17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/tscrim.upgrade_singular-17254)**",
    "created_at": "2016-07-04T22:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229870",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed branch from **[u/tscrim/upgrade_singular-17254](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_singular-17254)** to **[u/jakobkroeker/tscrim.upgrade_singular-17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/tscrim.upgrade_singular-17254)**



---

archive/issue_comments_229871.json:
```json
{
    "body": "<div id=\"comment:205\" align=\"right\">comment:205</div>\n\nonly few issues are left; \n\nwho will fix the next one? \nthat should be easy!\n\n```\n./sage -t --long src/sage/arith/misc.py  # 1 doctest failed\n./sage -t --long src/sage/modular/modform_hecketriangle/graded_ring_element.py  # 7 doctests failed\n./sage -t --long src/sage/quivers/algebra_elements.pyx  # Timed out (and interrupt failed)\n./sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # Killed due to segmentation fault\n./sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # Killed due to abort\n./sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # Timed out (and interrupt failed)\n./sage -t --long src/sage/rings/ring.pyx  # Killed due to abort\n./sage -t --long src/sage/rings/multi_power_series_ring_element.py  # 2 doctests failed\n./sage -t --long src/sage/rings/polynomial/multi_polynomial_libsingular.pyx  # 2 doctests failed\n./sage -t --long src/sage/rings/polynomial/polynomial_singular_interface.py  # 1 doctest failed\n./sage -t --long src/sage/rings/polynomial/polydict.pyx  # 1 doctest failed\n./sage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py  # 1 doctest failed\n./sage -t --long src/sage/schemes/projective/projective_morphism.py  # Timed out (with hangup after interrupt)\n./sage -t --long src/sage/schemes/affine/affine_rational_point.py  # Killed due to abort\n./sage -t --long src/sage/schemes/jacobians/abstract_jacobian.py  # 1 doctest failed\n./sage -t --long src/sage/schemes/elliptic_curves/isogeny_small_degree.py  # Killed due to segmentation fault\n./sage -t --long src/sage/structure/element.pyx  # 1 doctest failed\n./sage -t --long src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed\n```",
    "created_at": "2016-07-04T22:56:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229871",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:205" align="right">comment:205</div>

only few issues are left; 

who will fix the next one? 
that should be easy!

```
./sage -t --long src/sage/arith/misc.py  # 1 doctest failed
./sage -t --long src/sage/modular/modform_hecketriangle/graded_ring_element.py  # 7 doctests failed
./sage -t --long src/sage/quivers/algebra_elements.pyx  # Timed out (and interrupt failed)
./sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # Killed due to segmentation fault
./sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # Killed due to abort
./sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # Timed out (and interrupt failed)
./sage -t --long src/sage/rings/ring.pyx  # Killed due to abort
./sage -t --long src/sage/rings/multi_power_series_ring_element.py  # 2 doctests failed
./sage -t --long src/sage/rings/polynomial/multi_polynomial_libsingular.pyx  # 2 doctests failed
./sage -t --long src/sage/rings/polynomial/polynomial_singular_interface.py  # 1 doctest failed
./sage -t --long src/sage/rings/polynomial/polydict.pyx  # 1 doctest failed
./sage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py  # 1 doctest failed
./sage -t --long src/sage/schemes/projective/projective_morphism.py  # Timed out (with hangup after interrupt)
./sage -t --long src/sage/schemes/affine/affine_rational_point.py  # Killed due to abort
./sage -t --long src/sage/schemes/jacobians/abstract_jacobian.py  # 1 doctest failed
./sage -t --long src/sage/schemes/elliptic_curves/isogeny_small_degree.py  # Killed due to segmentation fault
./sage -t --long src/sage/structure/element.pyx  # 1 doctest failed
./sage -t --long src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed
```



---

archive/issue_comments_229872.json:
```json
{
    "body": "<div id=\"comment:206\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cb430465e30fede5e3e9d393ed0f12fd21061c6\"><code>3cb4304</code></a></td><td><code>explained si_opt_1 and si_opt_2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac8e614777f6e5e49149f6227d40ba1cc71585c9\"><code>ac8e614</code></a></td><td><code>fixed an upstream bug in brnoeth.lib and thus the failing test in src/sage/schemes/curves/projective_curve.py. TODO: upstream report/ upstream pull request</code></td></tr></table>\n",
    "created_at": "2016-07-09T23:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229872",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:206"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cb430465e30fede5e3e9d393ed0f12fd21061c6"><code>3cb4304</code></a></td><td><code>explained si_opt_1 and si_opt_2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac8e614777f6e5e49149f6227d40ba1cc71585c9"><code>ac8e614</code></a></td><td><code>fixed an upstream bug in brnoeth.lib and thus the failing test in src/sage/schemes/curves/projective_curve.py. TODO: upstream report/ upstream pull request</code></td></tr></table>




---

archive/issue_comments_229873.json:
```json
{
    "body": "Changed commit from **[`738fe43`](https://github.com/sagemath/sagetrac-mirror/commit/738fe43d05806edcd1e4f8c8b7dd1b086b9ca7e2)** to **[`ac8e614`](https://github.com/sagemath/sagetrac-mirror/commit/ac8e614777f6e5e49149f6227d40ba1cc71585c9)**",
    "created_at": "2016-07-09T23:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229873",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`738fe43`](https://github.com/sagemath/sagetrac-mirror/commit/738fe43d05806edcd1e4f8c8b7dd1b086b9ca7e2)** to **[`ac8e614`](https://github.com/sagemath/sagetrac-mirror/commit/ac8e614777f6e5e49149f6227d40ba1cc71585c9)**



---

archive/issue_comments_229874.json:
```json
{
    "body": "<div id=\"comment:207\" align=\"right\">comment:207</div>\n\nFailing of \n\n```\nsage: F.<x> = FreeAlgebra(ZZ, implementation='letterplace')\nsage: x**2\n```\nis caused by an upstream bug; (reported: https://www.singular.uni-kl.de:8005/trac/ticket/767#ticket)\n\nLetterplace over fields should work (please check)",
    "created_at": "2016-07-10T12:25:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229874",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:207" align="right">comment:207</div>

Failing of 

```
sage: F.<x> = FreeAlgebra(ZZ, implementation='letterplace')
sage: x**2
```
is caused by an upstream bug; (reported: https://www.singular.uni-kl.de:8005/trac/ticket/767#ticket)

Letterplace over fields should work (please check)



---

archive/issue_comments_229875.json:
```json
{
    "body": "<div id=\"comment:208\" align=\"right\">comment:208</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A207):\n> Failing of \n> \n> ```\n> sage: F.<x> = FreeAlgebra(ZZ, implementation='letterplace')\n> sage: x**2\n> ```\n> is caused by an upstream bug; (reported: https://www.singular.uni-kl.de:8005/trac/ticket/767#ticket)\n> \n> Letterplace over fields should work (please check)\n\nThanks for devising this!\n>",
    "created_at": "2016-07-15T09:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229875",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:208" align="right">comment:208</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A207):
> Failing of 
> 
> ```
> sage: F.<x> = FreeAlgebra(ZZ, implementation='letterplace')
> sage: x**2
> ```
> is caused by an upstream bug; (reported: https://www.singular.uni-kl.de:8005/trac/ticket/767#ticket)
> 
> Letterplace over fields should work (please check)

Thanks for devising this!
>



---

archive/issue_comments_229876.json:
```json
{
    "body": "<div id=\"comment:209\" align=\"right\">comment:209</div>\n\nthe upsream issue\n\npathed in https://github.com/sagemath/sagetrac-mirror/commit/ac8e614777f6e5e49149f6227d40ba1cc71585c9\n(upgrade.patch)\n\nis now reported on upstream with a pull request:\n\nhttps://www.singular.uni-kl.de:8005/trac/ticket/770#ticket",
    "created_at": "2016-07-31T09:20:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229876",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:209" align="right">comment:209</div>

the upsream issue

pathed in https://github.com/sagemath/sagetrac-mirror/commit/ac8e614777f6e5e49149f6227d40ba1cc71585c9
(upgrade.patch)

is now reported on upstream with a pull request:

https://www.singular.uni-kl.de:8005/trac/ticket/770#ticket



---

archive/issue_comments_229877.json:
```json
{
    "body": "<div id=\"comment:210\" align=\"right\">comment:210</div>\n\ncould someone please look what goes wrong with\n\n```\n./sage -t --long src/sage/modular/modform_hecketriangle/graded_ring_element.py\n```\n?",
    "created_at": "2016-07-31T12:53:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229877",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:210" align="right">comment:210</div>

could someone please look what goes wrong with

```
./sage -t --long src/sage/modular/modform_hecketriangle/graded_ring_element.py
```
?



---

archive/issue_events_244033.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-08-17T10:30:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "title_is": "Upgrade to Singular-4.x.x",
    "title_was": "Upgrade to Singular-4-0-2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244033"
}
```



---

archive/issue_comments_229878.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-**Lots** of stuff has changed in Singular 4. But now the attached branch is almost working.\n+**Lots** of stuff has changed in Singular 4. But now the attached branch based on Singular git version is almost working.\n \n-Repackaged upstream tarball: [https://www.dropbox.com/s/3io9k5srkcjrysr/singular-4.0.2.latest.tar.bz2?dl=0](https://www.dropbox.com/s/3io9k5srkcjrysr/singular-4.0.2.latest.tar.bz2?dl=0)\n+ATM, make your own tarball with `SINGULAR_GIT=1 spkg-src` and fix checksum `sage --package fix-checksum singular`.\n``````\n",
    "created_at": "2016-08-17T10:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229878",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-**Lots** of stuff has changed in Singular 4. But now the attached branch is almost working.
+**Lots** of stuff has changed in Singular 4. But now the attached branch based on Singular git version is almost working.
 
-Repackaged upstream tarball: [https://www.dropbox.com/s/3io9k5srkcjrysr/singular-4.0.2.latest.tar.bz2?dl=0](https://www.dropbox.com/s/3io9k5srkcjrysr/singular-4.0.2.latest.tar.bz2?dl=0)
+ATM, make your own tarball with `SINGULAR_GIT=1 spkg-src` and fix checksum `sage --package fix-checksum singular`.
``````




---

archive/issue_comments_229879.json:
```json
{
    "body": "<div id=\"comment:211\" align=\"right\">comment:211</div>\n\nI've removed a bunch of very old hackish stuff in `spkg-install`, especially regarding Solaris and sparc.\nMaybe too much, but the Singular build system changed so much and it does not seem we have real support for such systems anymore that we should only reintroduce removed hacks if found that are still needed.\n\nIt also seems this upgrade to git version rebroke some stuff...\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/637b2b7c260142e8db2d8d021fc7b1904f790080\"><code>637b2b7</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jakobkroeker/tscrim.upgrade_singular-17254' into singular</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be4f5e72b36849e190cff77a2dd9c90b8392482f\"><code>be4f5e7</code></a></td><td><code>Update Singular to 4.0.3p1.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b984961d6d698941f0b3d22e31e95d09227a747\"><code>5b98496</code></a></td><td><code>Let's play with singular git version.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a5baecb9bf6d935fd295fe19a1854546281e5fe\"><code>3a5baec</code></a></td><td><code>Work with Singular git version.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e99c41f6a6332cf01d73abb9841020ecc67a356\"><code>7e99c41</code></a></td><td><code>Use Singular git version.</code></td></tr></table>\n",
    "created_at": "2016-08-17T10:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229879",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:211" align="right">comment:211</div>

I've removed a bunch of very old hackish stuff in `spkg-install`, especially regarding Solaris and sparc.
Maybe too much, but the Singular build system changed so much and it does not seem we have real support for such systems anymore that we should only reintroduce removed hacks if found that are still needed.

It also seems this upgrade to git version rebroke some stuff...

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/637b2b7c260142e8db2d8d021fc7b1904f790080"><code>637b2b7</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jakobkroeker/tscrim.upgrade_singular-17254' into singular</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be4f5e72b36849e190cff77a2dd9c90b8392482f"><code>be4f5e7</code></a></td><td><code>Update Singular to 4.0.3p1.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b984961d6d698941f0b3d22e31e95d09227a747"><code>5b98496</code></a></td><td><code>Let's play with singular git version.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a5baecb9bf6d935fd295fe19a1854546281e5fe"><code>3a5baec</code></a></td><td><code>Work with Singular git version.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e99c41f6a6332cf01d73abb9841020ecc67a356"><code>7e99c41</code></a></td><td><code>Use Singular git version.</code></td></tr></table>




---

archive/issue_comments_229880.json:
```json
{
    "body": "Changed branch from **[u/jakobkroeker/tscrim.upgrade_singular-17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/tscrim.upgrade_singular-17254)** to **[public/singular4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular4)**",
    "created_at": "2016-08-17T10:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229880",
    "user": "https://github.com/jpflori"
}
```

Changed branch from **[u/jakobkroeker/tscrim.upgrade_singular-17254](https://github.com/sagemath/sagetrac-mirror/tree/u/jakobkroeker/tscrim.upgrade_singular-17254)** to **[public/singular4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular4)**



---

archive/issue_comments_229881.json:
```json
{
    "body": "Changed commit from **[`ac8e614`](https://github.com/sagemath/sagetrac-mirror/commit/ac8e614777f6e5e49149f6227d40ba1cc71585c9)** to **[`7e99c41`](https://github.com/sagemath/sagetrac-mirror/commit/7e99c41f6a6332cf01d73abb9841020ecc67a356)**",
    "created_at": "2016-08-17T10:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229881",
    "user": "https://github.com/jpflori"
}
```

Changed commit from **[`ac8e614`](https://github.com/sagemath/sagetrac-mirror/commit/ac8e614777f6e5e49149f6227d40ba1cc71585c9)** to **[`7e99c41`](https://github.com/sagemath/sagetrac-mirror/commit/7e99c41f6a6332cf01d73abb9841020ecc67a356)**



---

archive/issue_comments_229882.json:
```json
{
    "body": "<div id=\"comment:212\" align=\"right\">comment:212</div>\n\nIn particular, in `function.pyx`, in `__init__` after calling\n\n```\n        if currRingHdl == NULL:\n            currRingHdl = ggetid(\"my_awesome_sage_ring\")\n            if currRingHdl == NULL:\n                currRingHdl = enterid(\"my_awesome_sage_ring\", 0, RING_CMD, &IDROOT, 1)\n            currRingHdl.data.uring.ref += 1\n```\nthe last line segfaults because:\n\n```\n(gdb) print currRingHdl.data\n$2 = {\n  i = 0, \n  uring = 0x0, \n  p = 0x0, \n  n = 0x0, \n  uideal = 0x0, \n  umap = 0x0, \n  umatrix = 0x0, \n  ustring = 0x0, \n  iv = 0x0, \n  bim = 0x0, \n  l = 0x0, \n  li = 0x0, \n  pack = 0x0, \n  pinf = 0x0\n}\n```\n\nI guess some additional funciton should be used to initialize properly `currRingHdl`.",
    "created_at": "2016-08-17T10:49:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229882",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:212" align="right">comment:212</div>

In particular, in `function.pyx`, in `__init__` after calling

```
        if currRingHdl == NULL:
            currRingHdl = ggetid("my_awesome_sage_ring")
            if currRingHdl == NULL:
                currRingHdl = enterid("my_awesome_sage_ring", 0, RING_CMD, &IDROOT, 1)
            currRingHdl.data.uring.ref += 1
```
the last line segfaults because:

```
(gdb) print currRingHdl.data
$2 = {
  i = 0, 
  uring = 0x0, 
  p = 0x0, 
  n = 0x0, 
  uideal = 0x0, 
  umap = 0x0, 
  umatrix = 0x0, 
  ustring = 0x0, 
  iv = 0x0, 
  bim = 0x0, 
  l = 0x0, 
  li = 0x0, 
  pack = 0x0, 
  pinf = 0x0
}
```

I guess some additional funciton should be used to initialize properly `currRingHdl`.



---

archive/issue_comments_229883.json:
```json
{
    "body": "<div id=\"comment:213\" align=\"right\">comment:213</div>\n\nThe culprit might be\nhttps://github.com/Singular/Sources/commit/595145c77dbdb42114960862678d5ca6351578be",
    "created_at": "2016-08-17T10:55:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229883",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:213" align="right">comment:213</div>

The culprit might be
https://github.com/Singular/Sources/commit/595145c77dbdb42114960862678d5ca6351578be



---

archive/issue_comments_229884.json:
```json
{
    "body": "<div id=\"comment:214\" align=\"right\">comment:214</div>\n\nSo everyone's always using the *latest* git version in `spkg-src`?\n\nFWIW, `sed -i` isn't portable, e.g. won't work on Oraclis.\n\n`SPKG.txt` now says \"Patches: None\" whereas there is `upgrade.patch`.",
    "created_at": "2016-08-17T11:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229884",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:214" align="right">comment:214</div>

So everyone's always using the *latest* git version in `spkg-src`?

FWIW, `sed -i` isn't portable, e.g. won't work on Oraclis.

`SPKG.txt` now says "Patches: None" whereas there is `upgrade.patch`.



---

archive/issue_comments_229885.json:
```json
{
    "body": "<div id=\"comment:215\" align=\"right\">comment:215</div>\n\nThat's just work in progress...\nThis upgrade is hell.",
    "created_at": "2016-08-17T11:07:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229885",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:215" align="right">comment:215</div>

That's just work in progress...
This upgrade is hell.



---

archive/issue_comments_229886.json:
```json
{
    "body": "Changed commit from **[`7e99c41`](https://github.com/sagemath/sagetrac-mirror/commit/7e99c41f6a6332cf01d73abb9841020ecc67a356)** to **[`4a85552`](https://github.com/sagemath/sagetrac-mirror/commit/4a85552db111bb7dae27a61b7e46cf9943673ce6)**",
    "created_at": "2016-08-17T11:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229886",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7e99c41`](https://github.com/sagemath/sagetrac-mirror/commit/7e99c41f6a6332cf01d73abb9841020ecc67a356)** to **[`4a85552`](https://github.com/sagemath/sagetrac-mirror/commit/4a85552db111bb7dae27a61b7e46cf9943673ce6)**



---

archive/issue_comments_229887.json:
```json
{
    "body": "<div id=\"comment:216\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a85552db111bb7dae27a61b7e46cf9943673ce6\"><code>4a85552</code></a></td><td><code>enterid does not initialize underlying ring anymore, fix for function.pyx.</code></td></tr></table>\n",
    "created_at": "2016-08-17T11:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229887",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:216"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a85552db111bb7dae27a61b7e46cf9943673ce6"><code>4a85552</code></a></td><td><code>enterid does not initialize underlying ring anymore, fix for function.pyx.</code></td></tr></table>




---

archive/issue_comments_229888.json:
```json
{
    "body": "<div id=\"comment:217\" align=\"right\">comment:217</div>\n\nReplying to [@jpflori](#comment%3A215):\n> That's just work in progress...\n> This upgrade is hell.\n\nSure.  So you'll (by default) check out a specific commit once you know which one is suited best?",
    "created_at": "2016-08-17T11:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229888",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:217" align="right">comment:217</div>

Replying to [@jpflori](#comment%3A215):
> That's just work in progress...
> This upgrade is hell.

Sure.  So you'll (by default) check out a specific commit once you know which one is suited best?



---

archive/issue_comments_229889.json:
```json
{
    "body": "<div id=\"comment:218\" align=\"right\">comment:218</div>\n\nJust for the record:\n\n`make_tar.sh` checks out `HEAD`, and calls `autogen.sh` (without checking for errors) which in turn runs (some random version of) `autoreconf`.",
    "created_at": "2016-08-17T11:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229889",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:218" align="right">comment:218</div>

Just for the record:

`make_tar.sh` checks out `HEAD`, and calls `autogen.sh` (without checking for errors) which in turn runs (some random version of) `autoreconf`.



---

archive/issue_comments_229890.json:
```json
{
    "body": "<div id=\"comment:219\" align=\"right\">comment:219</div>\n\nFYI, explanation for the removal and readdition of `nlDelete`:\nhttps://groups.google.com/d/msg/libsingular-devel/EtEblVqdV3I/CyJJ5jaJCAAJ",
    "created_at": "2016-08-17T13:18:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229890",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:219" align="right">comment:219</div>

FYI, explanation for the removal and readdition of `nlDelete`:
https://groups.google.com/d/msg/libsingular-devel/EtEblVqdV3I/CyJJ5jaJCAAJ



---

archive/issue_comments_229891.json:
```json
{
    "body": "<div id=\"comment:220\" align=\"right\">comment:220</div>\n\nReplying to [@nexttime](#comment%3A217):\n> Replying to [@jpflori](#comment%3A215):\n> > That's just work in progress...\n> > This upgrade is hell.\n\n> \n> Sure.  So you'll (by default) check out a specific commit once you know which one is suited best?\n\nSure!\nHopefully it should be 4.1 upstream version though I don't know when it's planned.\n4.0.3p1 seems to be a poorer choice as a bunch of bugs reported here where fixed in Singular after that release and the fixes would have to be backported...",
    "created_at": "2016-08-17T13:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229891",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:220" align="right">comment:220</div>

Replying to [@nexttime](#comment%3A217):
> Replying to [@jpflori](#comment%3A215):
> > That's just work in progress...
> > This upgrade is hell.

> 
> Sure.  So you'll (by default) check out a specific commit once you know which one is suited best?

Sure!
Hopefully it should be 4.1 upstream version though I don't know when it's planned.
4.0.3p1 seems to be a poorer choice as a bunch of bugs reported here where fixed in Singular after that release and the fixes would have to be backported...



---

archive/issue_comments_229892.json:
```json
{
    "body": "<div id=\"comment:221\" align=\"right\">comment:221</div>\n\nReplying to [@nexttime](#comment%3A218):\n> Just for the record:\n> \n> `make_tar.sh` checks out `HEAD`, and calls `autogen.sh` (without checking for errors) which in turn runs (some random version of) `autoreconf`.\n\nYes and tries to copy some files from the person who wrote the script :)",
    "created_at": "2016-08-17T13:26:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229892",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:221" align="right">comment:221</div>

Replying to [@nexttime](#comment%3A218):
> Just for the record:
> 
> `make_tar.sh` checks out `HEAD`, and calls `autogen.sh` (without checking for errors) which in turn runs (some random version of) `autoreconf`.

Yes and tries to copy some files from the person who wrote the script :)



---

archive/issue_comments_229893.json:
```json
{
    "body": "<div id=\"comment:222\" align=\"right\">comment:222</div>\n\nReplying to [@jpflori](#comment%3A220):\n> Replying to [@nexttime](#comment%3A217):\n> > So you'll (by default) check out a specific commit once you know which one is suited best?\n\n> Sure!\n> Hopefully it should be 4.1 upstream version though I don't know when it's planned.\n\nI was just about to ask you that, as there are many recent commits mentioning 4.1.\n\nI'll probably add something to `spkg-src` regarding checkout and `autogen.sh` / `make_tar.sh` unless you're going to as well.",
    "created_at": "2016-08-17T13:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229893",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:222" align="right">comment:222</div>

Replying to [@jpflori](#comment%3A220):
> Replying to [@nexttime](#comment%3A217):
> > So you'll (by default) check out a specific commit once you know which one is suited best?

> Sure!
> Hopefully it should be 4.1 upstream version though I don't know when it's planned.

I was just about to ask you that, as there are many recent commits mentioning 4.1.

I'll probably add something to `spkg-src` regarding checkout and `autogen.sh` / `make_tar.sh` unless you're going to as well.



---

archive/issue_comments_229894.json:
```json
{
    "body": "<div id=\"comment:223\" align=\"right\">comment:223</div>\n\nReplying to [@jpflori](#comment%3A221):\n> Replying to [@nexttime](#comment%3A218):\n> > `make_tar.sh` checks out `HEAD`, and calls `autogen.sh` (without checking for errors) which in turn runs (some random version of) `autoreconf`.\n\n> Yes and tries to copy some files from the person who wrote the script :)\n\nI just stumbled upon\n\n```sh\ncp /tmp/wawa-i/share/singular/LIB/all.lib  singular-$VERSION/Singular/LIB/.\n```\n\nDid you mean that, or is there more?",
    "created_at": "2016-08-17T13:31:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229894",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:223" align="right">comment:223</div>

Replying to [@jpflori](#comment%3A221):
> Replying to [@nexttime](#comment%3A218):
> > `make_tar.sh` checks out `HEAD`, and calls `autogen.sh` (without checking for errors) which in turn runs (some random version of) `autoreconf`.

> Yes and tries to copy some files from the person who wrote the script :)

I just stumbled upon

```sh
cp /tmp/wawa-i/share/singular/LIB/all.lib  singular-$VERSION/Singular/LIB/.
```

Did you mean that, or is there more?



---

archive/issue_comments_229895.json:
```json
{
    "body": "<div id=\"comment:224\" align=\"right\">comment:224</div>\n\nAfter all, it's `spielwiese`  (~= playground).\n\nIs the repo on GitHub their \"master\" one, or do they (occasionally) just sync from elsewhere?",
    "created_at": "2016-08-17T13:40:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229895",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:224" align="right">comment:224</div>

After all, it's `spielwiese`  (~= playground).

Is the repo on GitHub their "master" one, or do they (occasionally) just sync from elsewhere?



---

archive/issue_comments_229896.json:
```json
{
    "body": "Changed commit from **[`4a85552`](https://github.com/sagemath/sagetrac-mirror/commit/4a85552db111bb7dae27a61b7e46cf9943673ce6)** to **[`d0c7069`](https://github.com/sagemath/sagetrac-mirror/commit/d0c7069423e49673bd3ea4a722f8da34af56b38d)**",
    "created_at": "2016-08-17T13:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229896",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4a85552`](https://github.com/sagemath/sagetrac-mirror/commit/4a85552db111bb7dae27a61b7e46cf9943673ce6)** to **[`d0c7069`](https://github.com/sagemath/sagetrac-mirror/commit/d0c7069423e49673bd3ea4a722f8da34af56b38d)**



---

archive/issue_comments_229897.json:
```json
{
    "body": "<div id=\"comment:225\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0c7069423e49673bd3ea4a722f8da34af56b38d\"><code>d0c7069</code></a></td><td><code>Update singular git version.</code></td></tr></table>\n",
    "created_at": "2016-08-17T13:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229897",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:225"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0c7069423e49673bd3ea4a722f8da34af56b38d"><code>d0c7069</code></a></td><td><code>Update singular git version.</code></td></tr></table>




---

archive/issue_comments_229898.json:
```json
{
    "body": "<div id=\"comment:226\" align=\"right\">comment:226</div>\n\nReplying to [@nexttime](#comment%3A223):\n> Replying to [@jpflori](#comment%3A221):\n> > Replying to [@nexttime](#comment%3A218):\n> > > `make_tar.sh` checks out `HEAD`, and calls `autogen.sh` (without checking for errors) which in turn runs (some random version of) `autoreconf`.\n\n> > Yes and tries to copy some files from the person who wrote the script :)\n\n> \n> I just stumbled upon\n> \n> ```sh\n> cp /tmp/wawa-i/share/singular/LIB/all.lib  singular-$VERSION/Singular/LIB/.\n> ```\n> \n> Did you mean that, or is there more?\n\nThere is also a non-existing fedora (IIRC) file.",
    "created_at": "2016-08-17T13:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229898",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:226" align="right">comment:226</div>

Replying to [@nexttime](#comment%3A223):
> Replying to [@jpflori](#comment%3A221):
> > Replying to [@nexttime](#comment%3A218):
> > > `make_tar.sh` checks out `HEAD`, and calls `autogen.sh` (without checking for errors) which in turn runs (some random version of) `autoreconf`.

> > Yes and tries to copy some files from the person who wrote the script :)

> 
> I just stumbled upon
> 
> ```sh
> cp /tmp/wawa-i/share/singular/LIB/all.lib  singular-$VERSION/Singular/LIB/.
> ```
> 
> Did you mean that, or is there more?

There is also a non-existing fedora (IIRC) file.



---

archive/issue_comments_229899.json:
```json
{
    "body": "<div id=\"comment:227\" align=\"right\">comment:227</div>\n\nReplying to [@nexttime](#comment%3A224):\n> After all, it's `spielwiese`  (~= playground).\n> \n> Is the repo on GitHub their \"master\" one, or do they (occasionally) just sync from elsewhere?\n\nI would say the `spielwiese` branch on github is the real master one.\nAs you can see, the following commit:\nhttps://github.com/Singular/Sources/commit/b412eebf8435fb44680b5160c7f8d524cdb20b2b\njust followed my post on libsingular-devel:\nhttps://groups.google.com/forum/#!topic/libsingular-devel/EtEblVqdV3I",
    "created_at": "2016-08-17T13:44:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229899",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:227" align="right">comment:227</div>

Replying to [@nexttime](#comment%3A224):
> After all, it's `spielwiese`  (~= playground).
> 
> Is the repo on GitHub their "master" one, or do they (occasionally) just sync from elsewhere?

I would say the `spielwiese` branch on github is the real master one.
As you can see, the following commit:
https://github.com/Singular/Sources/commit/b412eebf8435fb44680b5160c7f8d524cdb20b2b
just followed my post on libsingular-devel:
https://groups.google.com/forum/#!topic/libsingular-devel/EtEblVqdV3I



---

archive/issue_comments_229900.json:
```json
{
    "body": "<div id=\"comment:228\" align=\"right\">comment:228</div>\n\nThings seem good.\nA ptest yeilds:\n\n```\nsage -t --warn-long 121.7 src/doc/en/prep/Advanced-2DPlotting.rst  # Killed due \nto segmentation fault\nsage -t --warn-long 121.7 src/sage/calculus/riemann.pyx  # Timed out (and interr\nupt failed)\nsage -t --warn-long 121.7 src/sage/schemes/elliptic_curves/isogeny_small_degree.\npy  # Killed due to segmentation fault\nsage -t --warn-long 121.7 src/sage/schemes/elliptic_curves/ell_number_field.py  \n# Timed out\nsage -t --warn-long 121.7 src/sage/libs/gap/all_documented_functions.py  # Timed\n out\nsage -t --warn-long 121.7 src/sage/plot/plot.py  # Timed out\nsage -t --warn-long 121.7 src/sage/libs/gap/assigned_names.py  # Timed out\nsage -t --warn-long 121.7 src/sage/finance/time_series.pyx  # Timed out\nsage -t --warn-long 121.7 src/sage/plot/plot3d/implicit_plot3d.py  # Timed out\nsage -t --warn-long 121.7 src/sage/plot/plot3d/parametric_plot3d.py  # Timed out\nsage -t --warn-long 121.7 src/sage/plot/plot3d/plot3d.py  # Timed out\nsage -t --warn-long 121.7 src/sage/plot/graphics.py  # Timed out\nsage -t --warn-long 121.7 src/sage/plot/plot3d/base.pyx  # Timed out\nsage -t --warn-long 121.7 src/doc/en/prep/Calculus.rst  # Killed due to segmentation fault\nsage -t --warn-long 121.7 src/sage/modular/local_comp/type_space.py  # Timed out\nsage -t --warn-long 121.7 src/sage/modular/modform_hecketriangle/graded_ring_element.py  # 7 doctests failed\nsage -t --warn-long 121.7 src/sage/schemes/projective/projective_morphism.py  # 4 doctests failed\nsage -t --warn-long 121.7 src/sage/misc/randstate.pyx  # 1 doctest failed\nsage -t --warn-long 121.7 src/sage/arith/misc.py  # 1 doctest failed\nsage -t --warn-long 121.7 src/sage/structure/element.pyx  # 1 doctest failed\nsage -t --warn-long 121.7 src/sage/doctest/test.py  # Timed out\nsage -t --warn-long 121.7 src/sage/tests/french_book/mpoly.py  # 1 doctest failed\nsage -t --warn-long 121.7 src/sage/rings/polynomial/multi_polynomial_ideal.py  # 4 doctests failed\nsage -t --warn-long 121.7 src/sage/homology/simplicial_complex.py  # 1 doctest failed\nsage -t --warn-long 121.7 src/sage/plot/misc.py  # 1 doctest failed\nsage -t --warn-long 121.7 src/sage/interfaces/singular.py  # 3 doctests failed\nsage -t --warn-long 121.7 src/sage/rings/polynomial/multi_polynomial_libsingular.pyx  # 4 doctests failedsage -t --warn-long 121.7 src/sage/schemes/affine/affine_rational_point.py  # Killed due to abort\nsage -t --warn-long 121.7 src/sage/libs/singular/function.pyx  # 6 doctests failed\nsage -t --warn-long 121.7 src/sage/rings/multi_power_series_ring_element.py  # 2 doctests failed\nsage -t --warn-long 121.7 src/sage/rings/polynomial/polynomial_singular_interface.py  # 3 doctests failed\nsage -t --warn-long 121.7 src/sage/rings/polynomial/multi_polynomial_ideal_libsingular.pyx  # 1 doctest failed  \nsage -t --warn-long 121.7 src/sage/schemes/jacobians/abstract_jacobian.py  # 1 doctest failed\nsage -t --warn-long 121.7 src/sage/rings/polynomial/polydict.pyx  # 1 doctest failed\n----------------------------------------------------------------------\n```\nI assume many of them are unrelated to Singular, and due to the POWER7 arch, especially the plots ones.",
    "created_at": "2016-08-17T15:05:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229900",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:228" align="right">comment:228</div>

Things seem good.
A ptest yeilds:

```
sage -t --warn-long 121.7 src/doc/en/prep/Advanced-2DPlotting.rst  # Killed due 
to segmentation fault
sage -t --warn-long 121.7 src/sage/calculus/riemann.pyx  # Timed out (and interr
upt failed)
sage -t --warn-long 121.7 src/sage/schemes/elliptic_curves/isogeny_small_degree.
py  # Killed due to segmentation fault
sage -t --warn-long 121.7 src/sage/schemes/elliptic_curves/ell_number_field.py  
# Timed out
sage -t --warn-long 121.7 src/sage/libs/gap/all_documented_functions.py  # Timed
 out
sage -t --warn-long 121.7 src/sage/plot/plot.py  # Timed out
sage -t --warn-long 121.7 src/sage/libs/gap/assigned_names.py  # Timed out
sage -t --warn-long 121.7 src/sage/finance/time_series.pyx  # Timed out
sage -t --warn-long 121.7 src/sage/plot/plot3d/implicit_plot3d.py  # Timed out
sage -t --warn-long 121.7 src/sage/plot/plot3d/parametric_plot3d.py  # Timed out
sage -t --warn-long 121.7 src/sage/plot/plot3d/plot3d.py  # Timed out
sage -t --warn-long 121.7 src/sage/plot/graphics.py  # Timed out
sage -t --warn-long 121.7 src/sage/plot/plot3d/base.pyx  # Timed out
sage -t --warn-long 121.7 src/doc/en/prep/Calculus.rst  # Killed due to segmentation fault
sage -t --warn-long 121.7 src/sage/modular/local_comp/type_space.py  # Timed out
sage -t --warn-long 121.7 src/sage/modular/modform_hecketriangle/graded_ring_element.py  # 7 doctests failed
sage -t --warn-long 121.7 src/sage/schemes/projective/projective_morphism.py  # 4 doctests failed
sage -t --warn-long 121.7 src/sage/misc/randstate.pyx  # 1 doctest failed
sage -t --warn-long 121.7 src/sage/arith/misc.py  # 1 doctest failed
sage -t --warn-long 121.7 src/sage/structure/element.pyx  # 1 doctest failed
sage -t --warn-long 121.7 src/sage/doctest/test.py  # Timed out
sage -t --warn-long 121.7 src/sage/tests/french_book/mpoly.py  # 1 doctest failed
sage -t --warn-long 121.7 src/sage/rings/polynomial/multi_polynomial_ideal.py  # 4 doctests failed
sage -t --warn-long 121.7 src/sage/homology/simplicial_complex.py  # 1 doctest failed
sage -t --warn-long 121.7 src/sage/plot/misc.py  # 1 doctest failed
sage -t --warn-long 121.7 src/sage/interfaces/singular.py  # 3 doctests failed
sage -t --warn-long 121.7 src/sage/rings/polynomial/multi_polynomial_libsingular.pyx  # 4 doctests failedsage -t --warn-long 121.7 src/sage/schemes/affine/affine_rational_point.py  # Killed due to abort
sage -t --warn-long 121.7 src/sage/libs/singular/function.pyx  # 6 doctests failed
sage -t --warn-long 121.7 src/sage/rings/multi_power_series_ring_element.py  # 2 doctests failed
sage -t --warn-long 121.7 src/sage/rings/polynomial/polynomial_singular_interface.py  # 3 doctests failed
sage -t --warn-long 121.7 src/sage/rings/polynomial/multi_polynomial_ideal_libsingular.pyx  # 1 doctest failed  
sage -t --warn-long 121.7 src/sage/schemes/jacobians/abstract_jacobian.py  # 1 doctest failed
sage -t --warn-long 121.7 src/sage/rings/polynomial/polydict.pyx  # 1 doctest failed
----------------------------------------------------------------------
```
I assume many of them are unrelated to Singular, and due to the POWER7 arch, especially the plots ones.



---

archive/issue_comments_229901.json:
```json
{
    "body": "<div id=\"comment:229\" align=\"right\">comment:229</div>\n\nThe singular related ones seem to be:\n* schemes/elliptic_curves/isogeny_small_degree.py: segfault.\n* modular/modform_hecketriangle/graded_ring_element.py: lots of singular stuff, including coercion.\n* schemes/projective/projective_morphism.py: not sure... something about mpfr!\n* arith/misc.py: representation of finite fields changed, easy to fix.\n* structure/element.pyx: new limitation in max exponent?\n* tests/french_book/mpoly.py: different result, might be just as good as the previous one.\n* rings/polynomial/multi_polynomial_ideal.py: some different results, surely just as good and even better\n* interfaces/singular.py: different Singular printing.\n* rings/polynomial/multi_polynomial_libsingular.pyx: printing and squarefree stuff.\n* schemes/affine/affine_rational_point.py: bad abort.\n* src/sage/libs/singular/function.pyx: hopefully mostly random values changed in internal singular functions.\n* rings/multi_power_series_ring_element.py: printing of power series changed.\n* rings/polynomial/polynomial_singular_interface.py: printing changed.\n* rings/polynomial/multi_polynomial_ideal_libsingular.pyx: different result, might be just as good.\n* schemes/jacobians/abstract_jacobian.py: coercion error?\n* rings/polynomial/polydict.pyx: printing of polys changed (x -> 1*x).",
    "created_at": "2016-08-17T15:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229901",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:229" align="right">comment:229</div>

The singular related ones seem to be:
* schemes/elliptic_curves/isogeny_small_degree.py: segfault.
* modular/modform_hecketriangle/graded_ring_element.py: lots of singular stuff, including coercion.
* schemes/projective/projective_morphism.py: not sure... something about mpfr!
* arith/misc.py: representation of finite fields changed, easy to fix.
* structure/element.pyx: new limitation in max exponent?
* tests/french_book/mpoly.py: different result, might be just as good as the previous one.
* rings/polynomial/multi_polynomial_ideal.py: some different results, surely just as good and even better
* interfaces/singular.py: different Singular printing.
* rings/polynomial/multi_polynomial_libsingular.pyx: printing and squarefree stuff.
* schemes/affine/affine_rational_point.py: bad abort.
* src/sage/libs/singular/function.pyx: hopefully mostly random values changed in internal singular functions.
* rings/multi_power_series_ring_element.py: printing of power series changed.
* rings/polynomial/polynomial_singular_interface.py: printing changed.
* rings/polynomial/multi_polynomial_ideal_libsingular.pyx: different result, might be just as good.
* schemes/jacobians/abstract_jacobian.py: coercion error?
* rings/polynomial/polydict.pyx: printing of polys changed (x -> 1*x).



---

archive/issue_comments_229902.json:
```json
{
    "body": "<div id=\"comment:230\" align=\"right\">comment:230</div>\n\nAutomake complains about `LIBTOOL` not being defined although libtool is used.\n\nAnd finally I'm getting: `curl: command not found`... :-)",
    "created_at": "2016-08-17T16:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229902",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:230" align="right">comment:230</div>

Automake complains about `LIBTOOL` not being defined although libtool is used.

And finally I'm getting: `curl: command not found`... :-)



---

archive/issue_comments_229903.json:
```json
{
    "body": "<div id=\"comment:231\" align=\"right\">comment:231</div>\n\nThread for the \"1*\" issue:\nhttps://groups.google.com/forum/#!topic/libsingular-devel/X29-H_bv9-4",
    "created_at": "2016-08-19T10:42:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229903",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:231" align="right">comment:231</div>

Thread for the "1*" issue:
https://groups.google.com/forum/#!topic/libsingular-devel/X29-H_bv9-4



---

archive/issue_comments_229904.json:
```json
{
    "body": "Changed commit from **[`d0c7069`](https://github.com/sagemath/sagetrac-mirror/commit/d0c7069423e49673bd3ea4a722f8da34af56b38d)** to **[`9e14834`](https://github.com/sagemath/sagetrac-mirror/commit/9e14834568de9126fde80fff73f400ea93965fda)**",
    "created_at": "2016-08-19T10:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229904",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d0c7069`](https://github.com/sagemath/sagetrac-mirror/commit/d0c7069423e49673bd3ea4a722f8da34af56b38d)** to **[`9e14834`](https://github.com/sagemath/sagetrac-mirror/commit/9e14834568de9126fde80fff73f400ea93965fda)**



---

archive/issue_comments_229905.json:
```json
{
    "body": "<div id=\"comment:232\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a010eb5b1ef298f46b16ce09ef2dae2783fd866d\"><code>a010eb5</code></a></td><td><code>New singular git version including gcc/gmp fix.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e14834568de9126fde80fff73f400ea93965fda\"><code>9e14834</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into singular</code></td></tr></table>\n",
    "created_at": "2016-08-19T10:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229905",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:232"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a010eb5b1ef298f46b16ce09ef2dae2783fd866d"><code>a010eb5</code></a></td><td><code>New singular git version including gcc/gmp fix.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e14834568de9126fde80fff73f400ea93965fda"><code>9e14834</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into singular</code></td></tr></table>




---

archive/issue_comments_229906.json:
```json
{
    "body": "Changed commit from **[`9e14834`](https://github.com/sagemath/sagetrac-mirror/commit/9e14834568de9126fde80fff73f400ea93965fda)** to **[`62735be`](https://github.com/sagemath/sagetrac-mirror/commit/62735be27fa6ac2517463e24795a1d84d34922f8)**",
    "created_at": "2016-08-19T14:29:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229906",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9e14834`](https://github.com/sagemath/sagetrac-mirror/commit/9e14834568de9126fde80fff73f400ea93965fda)** to **[`62735be`](https://github.com/sagemath/sagetrac-mirror/commit/62735be27fa6ac2517463e24795a1d84d34922f8)**



---

archive/issue_comments_229907.json:
```json
{
    "body": "<div id=\"comment:233\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62735be27fa6ac2517463e24795a1d84d34922f8\"><code>62735be</code></a></td><td><code>Let's use Singular finite field struct for finite rings of prime char.</code></td></tr></table>\n",
    "created_at": "2016-08-19T14:29:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229907",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:233"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62735be27fa6ac2517463e24795a1d84d34922f8"><code>62735be</code></a></td><td><code>Let's use Singular finite field struct for finite rings of prime char.</code></td></tr></table>




---

archive/issue_comments_229908.json:
```json
{
    "body": "<div id=\"comment:234\" align=\"right\">comment:234</div>\n\nAs a sidenote, if we really want to stick to a finite ring structure rather than a finite field structure for Z/2Z and Z/pZ, we could do so.\nHans fixed the \"1*\" disturbing behavior.",
    "created_at": "2016-08-19T14:57:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229908",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:234" align="right">comment:234</div>

As a sidenote, if we really want to stick to a finite ring structure rather than a finite field structure for Z/2Z and Z/pZ, we could do so.
Hans fixed the "1*" disturbing behavior.



---

archive/issue_comments_229909.json:
```json
{
    "body": "<div id=\"comment:235\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d840441d8a897b749cef423c209c068f923df00\"><code>2d84044</code></a></td><td><code>In Singular 4 limit for exponents is the same on 32 and 64 bit.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75efae0a5b82345399ad938579705e0f543737a1\"><code>75efae0</code></a></td><td><code>Let's stick with integer mod ring in Singular at the moment.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/919165a5ec1ce57a74f90c74cc5b03759ca6881f\"><code>919165a</code></a></td><td><code>Integer mod ring printing is not centered anymore in Singular.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ace4d54dfc759f0186a644c1edeffa8d112436f8\"><code>ace4d54</code></a></td><td><code>Spurious dot.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc921ec4cc64b04c70bd6571fd54749446bd1d89\"><code>cc921ec</code></a></td><td><code>Singular printing changes.</code></td></tr></table>\n",
    "created_at": "2016-08-19T15:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229909",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:235"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d840441d8a897b749cef423c209c068f923df00"><code>2d84044</code></a></td><td><code>In Singular 4 limit for exponents is the same on 32 and 64 bit.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75efae0a5b82345399ad938579705e0f543737a1"><code>75efae0</code></a></td><td><code>Let's stick with integer mod ring in Singular at the moment.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/919165a5ec1ce57a74f90c74cc5b03759ca6881f"><code>919165a</code></a></td><td><code>Integer mod ring printing is not centered anymore in Singular.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ace4d54dfc759f0186a644c1edeffa8d112436f8"><code>ace4d54</code></a></td><td><code>Spurious dot.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc921ec4cc64b04c70bd6571fd54749446bd1d89"><code>cc921ec</code></a></td><td><code>Singular printing changes.</code></td></tr></table>




---

archive/issue_comments_229910.json:
```json
{
    "body": "Changed commit from **[`62735be`](https://github.com/sagemath/sagetrac-mirror/commit/62735be27fa6ac2517463e24795a1d84d34922f8)** to **[`cc921ec`](https://github.com/sagemath/sagetrac-mirror/commit/cc921ec4cc64b04c70bd6571fd54749446bd1d89)**",
    "created_at": "2016-08-19T15:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229910",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`62735be`](https://github.com/sagemath/sagetrac-mirror/commit/62735be27fa6ac2517463e24795a1d84d34922f8)** to **[`cc921ec`](https://github.com/sagemath/sagetrac-mirror/commit/cc921ec4cc64b04c70bd6571fd54749446bd1d89)**



---

archive/issue_comments_229911.json:
```json
{
    "body": "Changed commit from **[`cc921ec`](https://github.com/sagemath/sagetrac-mirror/commit/cc921ec4cc64b04c70bd6571fd54749446bd1d89)** to **[`6c88bc3`](https://github.com/sagemath/sagetrac-mirror/commit/6c88bc303df3aa5ecc0437e414e742b4c0fae7c5)**",
    "created_at": "2016-08-19T15:48:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229911",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cc921ec`](https://github.com/sagemath/sagetrac-mirror/commit/cc921ec4cc64b04c70bd6571fd54749446bd1d89)** to **[`6c88bc3`](https://github.com/sagemath/sagetrac-mirror/commit/6c88bc303df3aa5ecc0437e414e742b4c0fae7c5)**



---

archive/issue_comments_229912.json:
```json
{
    "body": "<div id=\"comment:236\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50ed3b3c8c1bcda2c3750daf6b570c8e1b2e8c3b\"><code>50ed3b3</code></a></td><td><code>Warning disappeared in Singular (better implem?).</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a39f146e1d86ca4c536110cc1f81920c3012cecd\"><code>a39f146</code></a></td><td><code>Different but (hopefully) equivalent Groebner basis.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c88bc303df3aa5ecc0437e414e742b4c0fae7c5\"><code>6c88bc3</code></a></td><td><code>Singular now yields same result for ZZ and QQ.</code></td></tr></table>\n",
    "created_at": "2016-08-19T15:48:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229912",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:236"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50ed3b3c8c1bcda2c3750daf6b570c8e1b2e8c3b"><code>50ed3b3</code></a></td><td><code>Warning disappeared in Singular (better implem?).</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a39f146e1d86ca4c536110cc1f81920c3012cecd"><code>a39f146</code></a></td><td><code>Different but (hopefully) equivalent Groebner basis.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c88bc303df3aa5ecc0437e414e742b4c0fae7c5"><code>6c88bc3</code></a></td><td><code>Singular now yields same result for ZZ and QQ.</code></td></tr></table>




---

archive/issue_comments_229913.json:
```json
{
    "body": "<div id=\"comment:237\" align=\"right\">comment:237</div>\n\nFor the segfault in `schemes/elliptic_curves/isogeny_small_degree.py` it seems that the following commit now triggers a double free or invalid free (use MALLOC_CHECK_=3 or it will just fails somewhere else randomly):\n* https://github.com/sagemath/sage/commit/14061a1d40e8a27d86eac6dd91559b0131f9fe55\n\n`@`Volker: could you have a look?",
    "created_at": "2016-08-19T17:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229913",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:237" align="right">comment:237</div>

For the segfault in `schemes/elliptic_curves/isogeny_small_degree.py` it seems that the following commit now triggers a double free or invalid free (use MALLOC_CHECK_=3 or it will just fails somewhere else randomly):
* https://github.com/sagemath/sage/commit/14061a1d40e8a27d86eac6dd91559b0131f9fe55

`@`Volker: could you have a look?



---

archive/issue_comments_229914.json:
```json
{
    "body": "<div id=\"comment:238\" align=\"right\">comment:238</div>\n\nReplying to [@jpflori](#comment%3A237):\n> For the segfault in `schemes/elliptic_curves/isogeny_small_degree.py` it seems that the following commit now triggers a double free or invalid free (use MALLOC_CHECK_=3 or it will just fails somewhere else randomly):\n> * https://github.com/sagemath/sage/commit/14061a1d40e8a27d86eac6dd91559b0131f9fe55\n\nKind of painfuly got it:\n* nlNormalize(x) can free whatever is in x and change x from a struct to a disqguised int.\n* when calling sa2si on a polynomial we call nlGetDenom or such functions on pointers returned by p_GetCoeff for the coeffs, which in turn call nlNormalize and free the underlying memory and modify our pointer, but not the original pointers in the polynomial\n* we call p_Delete on the polynomial which call nlDelete on the coeff which gives no indication the underlying memory is freed\n* bang",
    "created_at": "2016-08-20T20:09:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229914",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:238" align="right">comment:238</div>

Replying to [@jpflori](#comment%3A237):
> For the segfault in `schemes/elliptic_curves/isogeny_small_degree.py` it seems that the following commit now triggers a double free or invalid free (use MALLOC_CHECK_=3 or it will just fails somewhere else randomly):
> * https://github.com/sagemath/sage/commit/14061a1d40e8a27d86eac6dd91559b0131f9fe55

Kind of painfuly got it:
* nlNormalize(x) can free whatever is in x and change x from a struct to a disqguised int.
* when calling sa2si on a polynomial we call nlGetDenom or such functions on pointers returned by p_GetCoeff for the coeffs, which in turn call nlNormalize and free the underlying memory and modify our pointer, but not the original pointers in the polynomial
* we call p_Delete on the polynomial which call nlDelete on the coeff which gives no indication the underlying memory is freed
* bang



---

archive/issue_comments_229915.json:
```json
{
    "body": "<div id=\"comment:239\" align=\"right\">comment:239</div>\n\nThe solution would be something like calling p_SetCoeff whenever we call p_GetCoeff to be sure any hackish modification gets transmitted back to the original place.",
    "created_at": "2016-08-20T20:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229915",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:239" align="right">comment:239</div>

The solution would be something like calling p_SetCoeff whenever we call p_GetCoeff to be sure any hackish modification gets transmitted back to the original place.



---

archive/issue_comments_229916.json:
```json
{
    "body": "<div id=\"comment:240\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbd3af34be7c63c3fc55e95aaa1607232d371795\"><code>cbd3af3</code></a></td><td><code>Seemingly equivalent result.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20e0b22fda544da53b11d64b99da703b454bdd3e\"><code>20e0b22</code></a></td><td><code>Fix update of coefficients in algext singular elements.</code></td></tr></table>\n",
    "created_at": "2016-08-22T15:00:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229916",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:240"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbd3af34be7c63c3fc55e95aaa1607232d371795"><code>cbd3af3</code></a></td><td><code>Seemingly equivalent result.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20e0b22fda544da53b11d64b99da703b454bdd3e"><code>20e0b22</code></a></td><td><code>Fix update of coefficients in algext singular elements.</code></td></tr></table>




---

archive/issue_comments_229917.json:
```json
{
    "body": "Changed commit from **[`6c88bc3`](https://github.com/sagemath/sagetrac-mirror/commit/6c88bc303df3aa5ecc0437e414e742b4c0fae7c5)** to **[`20e0b22`](https://github.com/sagemath/sagetrac-mirror/commit/20e0b22fda544da53b11d64b99da703b454bdd3e)**",
    "created_at": "2016-08-22T15:00:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229917",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6c88bc3`](https://github.com/sagemath/sagetrac-mirror/commit/6c88bc303df3aa5ecc0437e414e742b4c0fae7c5)** to **[`20e0b22`](https://github.com/sagemath/sagetrac-mirror/commit/20e0b22fda544da53b11d64b99da703b454bdd3e)**



---

archive/issue_comments_229918.json:
```json
{
    "body": "Changed commit from **[`20e0b22`](https://github.com/sagemath/sagetrac-mirror/commit/20e0b22fda544da53b11d64b99da703b454bdd3e)** to **[`765b60a`](https://github.com/sagemath/sagetrac-mirror/commit/765b60a6a82cbe5a554778c2ca9981dc634f6373)**",
    "created_at": "2016-08-23T08:59:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229918",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`20e0b22`](https://github.com/sagemath/sagetrac-mirror/commit/20e0b22fda544da53b11d64b99da703b454bdd3e)** to **[`765b60a`](https://github.com/sagemath/sagetrac-mirror/commit/765b60a6a82cbe5a554778c2ca9981dc634f6373)**



---

archive/issue_comments_229919.json:
```json
{
    "body": "<div id=\"comment:241\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9ae25e3d0a0a14b5e0f7069810eaf7d4b73d369\"><code>f9ae25e</code></a></td><td><code>Different singular printing for ring names.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/765b60a6a82cbe5a554778c2ca9981dc634f6373\"><code>765b60a</code></a></td><td><code>Squarefree not implemented anymore by Singular for rings.</code></td></tr></table>\n",
    "created_at": "2016-08-23T08:59:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229919",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:241"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9ae25e3d0a0a14b5e0f7069810eaf7d4b73d369"><code>f9ae25e</code></a></td><td><code>Different singular printing for ring names.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/765b60a6a82cbe5a554778c2ca9981dc634f6373"><code>765b60a</code></a></td><td><code>Squarefree not implemented anymore by Singular for rings.</code></td></tr></table>




---

archive/issue_comments_229920.json:
```json
{
    "body": "Changed commit from **[`765b60a`](https://github.com/sagemath/sagetrac-mirror/commit/765b60a6a82cbe5a554778c2ca9981dc634f6373)** to **[`e9b79db`](https://github.com/sagemath/sagetrac-mirror/commit/e9b79db3dae782d97be4b8ac59c80dd74ed2d5dd)**",
    "created_at": "2016-08-23T20:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229920",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`765b60a`](https://github.com/sagemath/sagetrac-mirror/commit/765b60a6a82cbe5a554778c2ca9981dc634f6373)** to **[`e9b79db`](https://github.com/sagemath/sagetrac-mirror/commit/e9b79db3dae782d97be4b8ac59c80dd74ed2d5dd)**



---

archive/issue_comments_229921.json:
```json
{
    "body": "<div id=\"comment:242\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9b79db3dae782d97be4b8ac59c80dd74ed2d5dd\"><code>e9b79db</code></a></td><td><code>Remove hack for singular 1*.</code></td></tr></table>\n",
    "created_at": "2016-08-23T20:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229921",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:242"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9b79db3dae782d97be4b8ac59c80dd74ed2d5dd"><code>e9b79db</code></a></td><td><code>Remove hack for singular 1*.</code></td></tr></table>




---

archive/issue_comments_229922.json:
```json
{
    "body": "Changed commit from **[`e9b79db`](https://github.com/sagemath/sagetrac-mirror/commit/e9b79db3dae782d97be4b8ac59c80dd74ed2d5dd)** to **[`21cf2a5`](https://github.com/sagemath/sagetrac-mirror/commit/21cf2a536cbdc604beec1cfb86354631b40a6f93)**",
    "created_at": "2016-08-23T23:08:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229922",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e9b79db`](https://github.com/sagemath/sagetrac-mirror/commit/e9b79db3dae782d97be4b8ac59c80dd74ed2d5dd)** to **[`21cf2a5`](https://github.com/sagemath/sagetrac-mirror/commit/21cf2a536cbdc604beec1cfb86354631b40a6f93)**



---

archive/issue_comments_229923.json:
```json
{
    "body": "<div id=\"comment:243\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21cf2a536cbdc604beec1cfb86354631b40a6f93\"><code>21cf2a5</code></a></td><td><code>Hack to parse Singular polys with real coefficients.</code></td></tr></table>\n",
    "created_at": "2016-08-23T23:08:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229923",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:243"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21cf2a536cbdc604beec1cfb86354631b40a6f93"><code>21cf2a5</code></a></td><td><code>Hack to parse Singular polys with real coefficients.</code></td></tr></table>




---

archive/issue_comments_229924.json:
```json
{
    "body": "<div id=\"comment:244\" align=\"right\">comment:244</div>\n\nHere is the current state of affairs for `make testlong` on a POWER7/\n\n```\nsage -t --long src/sage/misc/randstate.pyx  # 1 doctest failed\nsage -t --long src/sage/symbolic/function.pyx  # 1 doctest failed\nsage -t --long src/sage/modular/modform_hecketriangle/graded_ring_element.py  # 7 doctests failed\nsage -t --long src/sage/calculus/riemann.pyx  # 2 doctests failed\nsage -t --long src/sage/schemes/projective/projective_morphism.py  # Timed out\nsage -t --long src/sage/schemes/jacobians/abstract_jacobian.py  # 1 doctest failed\nsage -t --long src/sage/schemes/curves/projective_curve.py  # 2 doctests failed\nsage -t --long src/sage/schemes/curves/affine_curve.py  # 1 doctest failed\nsage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py  # 2 doctests failed\nsage -t --long src/sage/finance/time_series.pyx  # 6 doctests failed\nsage -t --long src/sage/plot/graphics.py  # 1 doctest failed\nsage -t --long src/sage/plot/contour_plot.py  # Killed due to segmentation fault\nsage -t --long src/sage/plot/misc.py  # 1 doctest failed\nsage -t --long src/sage/plot/plot.py  # 1 doctest failed\nsage -t --long src/sage/plot/matrix_plot.py  # Killed due to segmentation fault\nsage -t --long src/sage/tests/french_book/mpoly.py  # 2 doctests failed\nsage -t --long src/sage/libs/singular/function.pyx  # 6 doctests failed\nsage -t --long src/doc/en/prep/Advanced-2DPlotting.rst  # Killed due to segmentation fault\nsage -t --long src/doc/en/constructions/algebraic_geometry.rst  # 14 doctests failed\n```",
    "created_at": "2016-08-25T08:54:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229924",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:244" align="right">comment:244</div>

Here is the current state of affairs for `make testlong` on a POWER7/

```
sage -t --long src/sage/misc/randstate.pyx  # 1 doctest failed
sage -t --long src/sage/symbolic/function.pyx  # 1 doctest failed
sage -t --long src/sage/modular/modform_hecketriangle/graded_ring_element.py  # 7 doctests failed
sage -t --long src/sage/calculus/riemann.pyx  # 2 doctests failed
sage -t --long src/sage/schemes/projective/projective_morphism.py  # Timed out
sage -t --long src/sage/schemes/jacobians/abstract_jacobian.py  # 1 doctest failed
sage -t --long src/sage/schemes/curves/projective_curve.py  # 2 doctests failed
sage -t --long src/sage/schemes/curves/affine_curve.py  # 1 doctest failed
sage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py  # 2 doctests failed
sage -t --long src/sage/finance/time_series.pyx  # 6 doctests failed
sage -t --long src/sage/plot/graphics.py  # 1 doctest failed
sage -t --long src/sage/plot/contour_plot.py  # Killed due to segmentation fault
sage -t --long src/sage/plot/misc.py  # 1 doctest failed
sage -t --long src/sage/plot/plot.py  # 1 doctest failed
sage -t --long src/sage/plot/matrix_plot.py  # Killed due to segmentation fault
sage -t --long src/sage/tests/french_book/mpoly.py  # 2 doctests failed
sage -t --long src/sage/libs/singular/function.pyx  # 6 doctests failed
sage -t --long src/doc/en/prep/Advanced-2DPlotting.rst  # Killed due to segmentation fault
sage -t --long src/doc/en/constructions/algebraic_geometry.rst  # 14 doctests failed
```



---

archive/issue_comments_229925.json:
```json
{
    "body": "<div id=\"comment:245\" align=\"right\">comment:245</div>\n\n\n```\nmisc/randstate.pyx  # 1 doctest failed: unrelated, gap random different\nsymbolic/function.pyx  # 1 doctest failed: unrelated, precision issue\nmodular/modform_hecketriangle/graded_ring_element.py  # 7 doctests failed: singular, real coeffs printing with parenthesis\ncalculus/riemann.pyx  # 2 doctests failed: unrelated, precision issue\nschemes/projective/projective_morphism.py  # Timed out: singular, real parsing \nschemes/jacobians/abstract_jacobian.py  # 1 doctest failed: singular, real parsing\nschemes/curves/projective_curve.py  # 2 doctests failed: singular, real parsing\nschemes/curves/affine_curve.py  # 1 doctest failed: singular, different result\nrings/polynomial/multi_polynomial_ideal.py  # 2 doctests failed: singular, gwalk and skipping text issue\nfinance/time_series.pyx  # 6 doctests failed: unrelated, precision issue\nplot/graphics.py  # 1 doctest failed: unrelated, div by 0\nplot/contour_plot.py  # Killed due to segmentation fault: passed the second time\nplot/misc.py  # 1 doctest failed: unrelated, div by 0\nplot/plot.py  # 1 doctest failed: unrelated, div by 0\nplot/matrix_plot.py  # Killed due to segmentation fault: passed the second time\ntests/french_book/mpoly.py  # 2 doctests failed: singular, gwalk and skipping text issue\nlibs/singular/function.pyx  # 6 doctests failed: singular, arity code changes and skipping text issue\n```\n\n```\nen/prep/Advanced-2DPlotting.rst  # Killed due to segmentation fault: passed the second time\nen/constructions/algebraic_geometry.rst  # 14 doctests failed: singular, stuff in brnoeth.lib, undefined stuff\n```",
    "created_at": "2016-08-25T12:00:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229925",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:245" align="right">comment:245</div>


```
misc/randstate.pyx  # 1 doctest failed: unrelated, gap random different
symbolic/function.pyx  # 1 doctest failed: unrelated, precision issue
modular/modform_hecketriangle/graded_ring_element.py  # 7 doctests failed: singular, real coeffs printing with parenthesis
calculus/riemann.pyx  # 2 doctests failed: unrelated, precision issue
schemes/projective/projective_morphism.py  # Timed out: singular, real parsing 
schemes/jacobians/abstract_jacobian.py  # 1 doctest failed: singular, real parsing
schemes/curves/projective_curve.py  # 2 doctests failed: singular, real parsing
schemes/curves/affine_curve.py  # 1 doctest failed: singular, different result
rings/polynomial/multi_polynomial_ideal.py  # 2 doctests failed: singular, gwalk and skipping text issue
finance/time_series.pyx  # 6 doctests failed: unrelated, precision issue
plot/graphics.py  # 1 doctest failed: unrelated, div by 0
plot/contour_plot.py  # Killed due to segmentation fault: passed the second time
plot/misc.py  # 1 doctest failed: unrelated, div by 0
plot/plot.py  # 1 doctest failed: unrelated, div by 0
plot/matrix_plot.py  # Killed due to segmentation fault: passed the second time
tests/french_book/mpoly.py  # 2 doctests failed: singular, gwalk and skipping text issue
libs/singular/function.pyx  # 6 doctests failed: singular, arity code changes and skipping text issue
```

```
en/prep/Advanced-2DPlotting.rst  # Killed due to segmentation fault: passed the second time
en/constructions/algebraic_geometry.rst  # 14 doctests failed: singular, stuff in brnoeth.lib, undefined stuff
```



---

archive/issue_comments_229926.json:
```json
{
    "body": "Changed commit from **[`21cf2a5`](https://github.com/sagemath/sagetrac-mirror/commit/21cf2a536cbdc604beec1cfb86354631b40a6f93)** to **[`c6eaaf4`](https://github.com/sagemath/sagetrac-mirror/commit/c6eaaf4d4549220c814945c7dacb82d8a980ce6d)**",
    "created_at": "2016-08-25T12:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229926",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`21cf2a5`](https://github.com/sagemath/sagetrac-mirror/commit/21cf2a536cbdc604beec1cfb86354631b40a6f93)** to **[`c6eaaf4`](https://github.com/sagemath/sagetrac-mirror/commit/c6eaaf4d4549220c814945c7dacb82d8a980ce6d)**



---

archive/issue_comments_229927.json:
```json
{
    "body": "<div id=\"comment:246\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e705c27a1b2bcf80eb272999acb5eab6291b5a91\"><code>e705c27</code></a></td><td><code>Better handling of Singular 4 floats printing.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d18e566f104cea395b9d13ba110ba1cfaf9a9fd\"><code>5d18e56</code></a></td><td><code>Singular 4 puts sign outside of parentheses for floats.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfc8c565447ef3262aa4c883c84770ce80769076\"><code>cfc8c56</code></a></td><td><code>Rely on Singular ring type rather than Sage one.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6eaaf4d4549220c814945c7dacb82d8a980ce6d\"><code>c6eaaf4</code></a></td><td><code>New singular picks different ratfuncs.</code></td></tr></table>\n",
    "created_at": "2016-08-25T12:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229927",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:246"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e705c27a1b2bcf80eb272999acb5eab6291b5a91"><code>e705c27</code></a></td><td><code>Better handling of Singular 4 floats printing.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d18e566f104cea395b9d13ba110ba1cfaf9a9fd"><code>5d18e56</code></a></td><td><code>Singular 4 puts sign outside of parentheses for floats.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfc8c565447ef3262aa4c883c84770ce80769076"><code>cfc8c56</code></a></td><td><code>Rely on Singular ring type rather than Sage one.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6eaaf4d4549220c814945c7dacb82d8a980ce6d"><code>c6eaaf4</code></a></td><td><code>New singular picks different ratfuncs.</code></td></tr></table>




---

archive/issue_comments_229928.json:
```json
{
    "body": "<div id=\"comment:247\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/019204823624ca730576d6144336337e45e26de6\"><code>0192048</code></a></td><td><code>Update \"arity code\" constants for Singular 4.</code></td></tr></table>\n",
    "created_at": "2016-08-25T12:22:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229928",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:247"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/019204823624ca730576d6144336337e45e26de6"><code>0192048</code></a></td><td><code>Update "arity code" constants for Singular 4.</code></td></tr></table>




---

archive/issue_comments_229929.json:
```json
{
    "body": "Changed commit from **[`c6eaaf4`](https://github.com/sagemath/sagetrac-mirror/commit/c6eaaf4d4549220c814945c7dacb82d8a980ce6d)** to **[`0192048`](https://github.com/sagemath/sagetrac-mirror/commit/019204823624ca730576d6144336337e45e26de6)**",
    "created_at": "2016-08-25T12:22:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229929",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c6eaaf4`](https://github.com/sagemath/sagetrac-mirror/commit/c6eaaf4d4549220c814945c7dacb82d8a980ce6d)** to **[`0192048`](https://github.com/sagemath/sagetrac-mirror/commit/019204823624ca730576d6144336337e45e26de6)**



---

archive/issue_comments_229930.json:
```json
{
    "body": "<div id=\"comment:248\" align=\"right\">comment:248</div>\n\nSo we're hopefully left with:\n* bug in mprimedec.lib (https://groups.google.com/forum/#!topic/libsingular-devel/94d9c574uvg)\n* bug in brnoeth.lib (https://groups.google.com/forum/#!topic/libsingular-devel/DxjhbYqVfFQ)\n* gwalk issue\n* the \"skipping text in `parameter`\" output (when doing GB computations?)",
    "created_at": "2016-08-25T13:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229930",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:248" align="right">comment:248</div>

So we're hopefully left with:
* bug in mprimedec.lib (https://groups.google.com/forum/#!topic/libsingular-devel/94d9c574uvg)
* bug in brnoeth.lib (https://groups.google.com/forum/#!topic/libsingular-devel/DxjhbYqVfFQ)
* gwalk issue
* the "skipping text in `parameter`" output (when doing GB computations?)



---

archive/issue_comments_229931.json:
```json
{
    "body": "<div id=\"comment:249\" align=\"right\">comment:249</div>\n\nThe grwalk thing must be:\n* https://github.com/Singular/Sources/commit/53aa95a962b7ad2b6b48f9f308a22948c39cc41f",
    "created_at": "2016-08-25T13:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229931",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:249" align="right">comment:249</div>

The grwalk thing must be:
* https://github.com/Singular/Sources/commit/53aa95a962b7ad2b6b48f9f308a22948c39cc41f



---

archive/issue_comments_229932.json:
```json
{
    "body": "<div id=\"comment:250\" align=\"right\">comment:250</div>\n\nIn fact the grwalk and brnoeth issues were caused by old `lib` files in `local/share/singular`.\nAlready fixed upstream.",
    "created_at": "2016-08-25T14:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229932",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:250" align="right">comment:250</div>

In fact the grwalk and brnoeth issues were caused by old `lib` files in `local/share/singular`.
Already fixed upstream.



---

archive/issue_comments_229933.json:
```json
{
    "body": "Changed commit from **[`0192048`](https://github.com/sagemath/sagetrac-mirror/commit/019204823624ca730576d6144336337e45e26de6)** to **[`526f0a2`](https://github.com/sagemath/sagetrac-mirror/commit/526f0a2e93f12d5782a7202de3b2469e2ee9d53c)**",
    "created_at": "2016-08-25T14:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229933",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0192048`](https://github.com/sagemath/sagetrac-mirror/commit/019204823624ca730576d6144336337e45e26de6)** to **[`526f0a2`](https://github.com/sagemath/sagetrac-mirror/commit/526f0a2e93f12d5782a7202de3b2469e2ee9d53c)**



---

archive/issue_comments_229934.json:
```json
{
    "body": "<div id=\"comment:251\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/526f0a2e93f12d5782a7202de3b2469e2ee9d53c\"><code>526f0a2</code></a></td><td><code>Make sure old Singular lib files are deleted.</code></td></tr></table>\n",
    "created_at": "2016-08-25T14:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229934",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:251"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/526f0a2e93f12d5782a7202de3b2469e2ee9d53c"><code>526f0a2</code></a></td><td><code>Make sure old Singular lib files are deleted.</code></td></tr></table>




---

archive/issue_comments_229935.json:
```json
{
    "body": "<div id=\"comment:252\" align=\"right\">comment:252</div>\n\nWe're almost good now:\n* the \"skipping text from `parameter`\" text only appears when an error previously happened in Singular, so we it now only appears when testing `libs/singular/function.pyx` becasuse of the `GTZmod` error.\n* hopefully the `GTZmod` error will be fixed upstream soon and we can fix a commit to incule here (which should be more or less official Singular `4.0.3`).\n\nCan someone else please test the current branch?\nYou'll need to build your own tarball first using `spkg-src`.\n\n(There will still be some polishing to do about the Singular C++ function we use, see the comments Hans added in some header files, but that can wait for another ticket.)",
    "created_at": "2016-08-26T09:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229935",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:252" align="right">comment:252</div>

We're almost good now:
* the "skipping text from `parameter`" text only appears when an error previously happened in Singular, so we it now only appears when testing `libs/singular/function.pyx` becasuse of the `GTZmod` error.
* hopefully the `GTZmod` error will be fixed upstream soon and we can fix a commit to incule here (which should be more or less official Singular `4.0.3`).

Can someone else please test the current branch?
You'll need to build your own tarball first using `spkg-src`.

(There will still be some polishing to do about the Singular C++ function we use, see the comments Hans added in some header files, but that can wait for another ticket.)



---

archive/issue_comments_229936.json:
```json
{
    "body": "<div id=\"comment:253\" align=\"right\">comment:253</div>\n\nOh crap, we should also reenable the possibility of debug builds.\nIIRC this was removed at some point in this ticket.",
    "created_at": "2016-08-26T09:22:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229936",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:253" align="right">comment:253</div>

Oh crap, we should also reenable the possibility of debug builds.
IIRC this was removed at some point in this ticket.



---

archive/issue_comments_229937.json:
```json
{
    "body": "<div id=\"comment:254\" align=\"right\">comment:254</div>\n\nBut that can wait for another ticket as well (at least the replace omalloc by malloc stuff).",
    "created_at": "2016-08-26T09:22:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229937",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:254" align="right">comment:254</div>

But that can wait for another ticket as well (at least the replace omalloc by malloc stuff).



---

archive/issue_comments_229938.json:
```json
{
    "body": "Changed commit from **[`526f0a2`](https://github.com/sagemath/sagetrac-mirror/commit/526f0a2e93f12d5782a7202de3b2469e2ee9d53c)** to **[`dcd4e14`](https://github.com/sagemath/sagetrac-mirror/commit/dcd4e1454c917f8cd9a89c59a77421a08d798868)**",
    "created_at": "2016-08-26T13:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229938",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`526f0a2`](https://github.com/sagemath/sagetrac-mirror/commit/526f0a2e93f12d5782a7202de3b2469e2ee9d53c)** to **[`dcd4e14`](https://github.com/sagemath/sagetrac-mirror/commit/dcd4e1454c917f8cd9a89c59a77421a08d798868)**



---

archive/issue_comments_229939.json:
```json
{
    "body": "<div id=\"comment:255\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dcd4e1454c917f8cd9a89c59a77421a08d798868\"><code>dcd4e14</code></a></td><td><code>More changes for Singular 4.</code></td></tr></table>\n",
    "created_at": "2016-08-26T13:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229939",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:255"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dcd4e1454c917f8cd9a89c59a77421a08d798868"><code>dcd4e14</code></a></td><td><code>More changes for Singular 4.</code></td></tr></table>




---

archive/issue_comments_229940.json:
```json
{
    "body": "Changed commit from **[`dcd4e14`](https://github.com/sagemath/sagetrac-mirror/commit/dcd4e1454c917f8cd9a89c59a77421a08d798868)** to **[`7366fb6`](https://github.com/sagemath/sagetrac-mirror/commit/7366fb629a1aec7fc6e7167784406657baa8e9f0)**",
    "created_at": "2016-08-26T14:12:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229940",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dcd4e14`](https://github.com/sagemath/sagetrac-mirror/commit/dcd4e1454c917f8cd9a89c59a77421a08d798868)** to **[`7366fb6`](https://github.com/sagemath/sagetrac-mirror/commit/7366fb629a1aec7fc6e7167784406657baa8e9f0)**



---

archive/issue_comments_229941.json:
```json
{
    "body": "<div id=\"comment:256\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7366fb629a1aec7fc6e7167784406657baa8e9f0\"><code>7366fb6</code></a></td><td><code>Better script to package singular tarball.</code></td></tr></table>\n",
    "created_at": "2016-08-26T14:12:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229941",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:256"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7366fb629a1aec7fc6e7167784406657baa8e9f0"><code>7366fb6</code></a></td><td><code>Better script to package singular tarball.</code></td></tr></table>




---

archive/issue_comments_229942.json:
```json
{
    "body": "<div id=\"comment:257\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f016ae48d72d9dd51e90e36fbaabcf247bf3b58\"><code>9f016ae</code></a></td><td><code>Apply patches to singular before debug hacks.</code></td></tr></table>\n",
    "created_at": "2016-08-26T14:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229942",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:257"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f016ae48d72d9dd51e90e36fbaabcf247bf3b58"><code>9f016ae</code></a></td><td><code>Apply patches to singular before debug hacks.</code></td></tr></table>




---

archive/issue_comments_229943.json:
```json
{
    "body": "Changed commit from **[`7366fb6`](https://github.com/sagemath/sagetrac-mirror/commit/7366fb629a1aec7fc6e7167784406657baa8e9f0)** to **[`9f016ae`](https://github.com/sagemath/sagetrac-mirror/commit/9f016ae48d72d9dd51e90e36fbaabcf247bf3b58)**",
    "created_at": "2016-08-26T14:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229943",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7366fb6`](https://github.com/sagemath/sagetrac-mirror/commit/7366fb629a1aec7fc6e7167784406657baa8e9f0)** to **[`9f016ae`](https://github.com/sagemath/sagetrac-mirror/commit/9f016ae48d72d9dd51e90e36fbaabcf247bf3b58)**



---

archive/issue_comments_229944.json:
```json
{
    "body": "Changed commit from **[`9f016ae`](https://github.com/sagemath/sagetrac-mirror/commit/9f016ae48d72d9dd51e90e36fbaabcf247bf3b58)** to **[`cfe9a9c`](https://github.com/sagemath/sagetrac-mirror/commit/cfe9a9cb6abba2030372c982b2cf2d7fb3a1b854)**",
    "created_at": "2016-08-26T14:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229944",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9f016ae`](https://github.com/sagemath/sagetrac-mirror/commit/9f016ae48d72d9dd51e90e36fbaabcf247bf3b58)** to **[`cfe9a9c`](https://github.com/sagemath/sagetrac-mirror/commit/cfe9a9cb6abba2030372c982b2cf2d7fb3a1b854)**



---

archive/issue_comments_229945.json:
```json
{
    "body": "<div id=\"comment:258\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfe9a9cb6abba2030372c982b2cf2d7fb3a1b854\"><code>cfe9a9c</code></a></td><td><code>Patch for Singular xalloc.</code></td></tr></table>\n",
    "created_at": "2016-08-26T14:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229945",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:258"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfe9a9cb6abba2030372c982b2cf2d7fb3a1b854"><code>cfe9a9c</code></a></td><td><code>Patch for Singular xalloc.</code></td></tr></table>




---

archive/issue_events_244034.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-08-26T14:37:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244034"
}
```



---

archive/issue_comments_229946.json:
```json
{
    "body": "<div id=\"comment:259\" align=\"right\">comment:259</div>\n\nSetting `SAGE_DEBUG=yes`, debug mode with `xalloc` should be ok although:\n* I did not wait for the build to finish,\n* it seems auto* wants to reconfigure everything,\n* you get a alot of unsued stuff warnings but that's surely normal.\n\nI removed a bunch of hacks from `spkg-install`.\n\nPlease test!",
    "created_at": "2016-08-26T14:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229946",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:259" align="right">comment:259</div>

Setting `SAGE_DEBUG=yes`, debug mode with `xalloc` should be ok although:
* I did not wait for the build to finish,
* it seems auto* wants to reconfigure everything,
* you get a alot of unsued stuff warnings but that's surely normal.

I removed a bunch of hacks from `spkg-install`.

Please test!



---

archive/issue_comments_229947.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n-**Lots** of stuff has changed in Singular 4. But now the attached branch based on Singular git version is almost working.\n+**Lots** of stuff has changed in Singular 4.\n+This is a big update.\n+Build system completely changed, and a lot of internal stuff.\n \n-ATM, make your own tarball with `SINGULAR_GIT=1 spkg-src` and fix checksum `sage --package fix-checksum singular`.\n+The branch here is based on commit a070b84d whose message tells 4.0.3p3:\n+* https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7\n+\n+Make your own tarball with `SINGULAR_GIT_COMMIT=a070b84d spkg-src`.\n+This is loosely based on the `make_tar.sh` script from upstream.\n``````\n",
    "created_at": "2016-08-26T14:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229947",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,9 @@
-**Lots** of stuff has changed in Singular 4. But now the attached branch based on Singular git version is almost working.
+**Lots** of stuff has changed in Singular 4.
+This is a big update.
+Build system completely changed, and a lot of internal stuff.
 
-ATM, make your own tarball with `SINGULAR_GIT=1 spkg-src` and fix checksum `sage --package fix-checksum singular`.
+The branch here is based on commit a070b84d whose message tells 4.0.3p3:
+* https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7
+
+Make your own tarball with `SINGULAR_GIT_COMMIT=a070b84d spkg-src`.
+This is loosely based on the `make_tar.sh` script from upstream.
``````




---

archive/issue_comments_229948.json:
```json
{
    "body": "Changed commit from **[`cfe9a9c`](https://github.com/sagemath/sagetrac-mirror/commit/cfe9a9cb6abba2030372c982b2cf2d7fb3a1b854)** to **[`7dd92be`](https://github.com/sagemath/sagetrac-mirror/commit/7dd92be65babe002f265b9e3cd24e6493d8d0cd5)**",
    "created_at": "2016-08-26T14:50:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229948",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cfe9a9c`](https://github.com/sagemath/sagetrac-mirror/commit/cfe9a9cb6abba2030372c982b2cf2d7fb3a1b854)** to **[`7dd92be`](https://github.com/sagemath/sagetrac-mirror/commit/7dd92be65babe002f265b9e3cd24e6493d8d0cd5)**



---

archive/issue_comments_229949.json:
```json
{
    "body": "<div id=\"comment:261\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dd92be65babe002f265b9e3cd24e6493d8d0cd5\"><code>7dd92be</code></a></td><td><code>Fix singular debug build mode.</code></td></tr></table>\n",
    "created_at": "2016-08-26T14:50:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229949",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:261"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dd92be65babe002f265b9e3cd24e6493d8d0cd5"><code>7dd92be</code></a></td><td><code>Fix singular debug build mode.</code></td></tr></table>




---

archive/issue_comments_229950.json:
```json
{
    "body": "<div id=\"comment:262\" align=\"right\">comment:262</div>\n\nthe branch does not merge cleanly (so I had to do some manual editing), and after building singular I get\n\n```\n[sagelib-7.4.beta1] ************************************************************************\n[sagelib-7.4.beta1] Traceback (most recent call last):\n[sagelib-7.4.beta1]   File \"setup.py\", line 47, in <module>\n[sagelib-7.4.beta1]     from module_list import ext_modules, library_order, aliases\n[sagelib-7.4.beta1]   File \"/home/dima/software/sage/src/module_list.py\", line 1587, in <module>\n[sagelib-7.4.beta1]     extra_compile_args = givaro_extra_compile_args),\n[sagelib-7.4.beta1] NameError: name 'givaro_extra_compile_args' is not defined\n[sagelib-7.4.beta1] ************************************************************************\n[sagelib-7.4.beta1] Error building the Sage library\n```\n\nalthough this might be due to me trying to merge this into the branch on #17635\n(which should probably become a dependency here)",
    "created_at": "2016-08-26T15:33:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229950",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:262" align="right">comment:262</div>

the branch does not merge cleanly (so I had to do some manual editing), and after building singular I get

```
[sagelib-7.4.beta1] ************************************************************************
[sagelib-7.4.beta1] Traceback (most recent call last):
[sagelib-7.4.beta1]   File "setup.py", line 47, in <module>
[sagelib-7.4.beta1]     from module_list import ext_modules, library_order, aliases
[sagelib-7.4.beta1]   File "/home/dima/software/sage/src/module_list.py", line 1587, in <module>
[sagelib-7.4.beta1]     extra_compile_args = givaro_extra_compile_args),
[sagelib-7.4.beta1] NameError: name 'givaro_extra_compile_args' is not defined
[sagelib-7.4.beta1] ************************************************************************
[sagelib-7.4.beta1] Error building the Sage library
```

although this might be due to me trying to merge this into the branch on #17635
(which should probably become a dependency here)



---

archive/issue_comments_229951.json:
```json
{
    "body": "<div id=\"comment:263\" align=\"right\">comment:263</div>\n\nIt built okay for me on my Ubunutu 16.04 LTS system.\n\nAlso, I think we should set a fixed tarball and checksum. Do you want me to do this?",
    "created_at": "2016-08-26T17:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229951",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:263" align="right">comment:263</div>

It built okay for me on my Ubunutu 16.04 LTS system.

Also, I think we should set a fixed tarball and checksum. Do you want me to do this?



---

archive/issue_events_244035.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-27T06:03:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244035"
}
```



---

archive/issue_events_244036.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-27T06:03:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244036"
}
```



---

archive/issue_comments_229952.json:
```json
{
    "body": "Dependencies: **#17635**",
    "created_at": "2016-08-27T06:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229952",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#17635**



---

archive/issue_comments_229953.json:
```json
{
    "body": "<div id=\"comment:264\" align=\"right\">comment:264</div>\n\nThe upgrade of givaro on #17635 has to be taken into account here.",
    "created_at": "2016-08-27T06:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229953",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:264" align="right">comment:264</div>

The upgrade of givaro on #17635 has to be taken into account here.



---

archive/issue_comments_229954.json:
```json
{
    "body": "<div id=\"comment:265\" align=\"right\">comment:265</div>\n\nReplying to [@tscrim](#comment%3A263):\n>\n> Also, I think we should set a fixed tarball and checksum. Do you want me to do this?\n\nI don't follow the ticket very closely, but that makes me jump: what about taking an upstream tarball instead of hacking something?",
    "created_at": "2016-08-27T07:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229954",
    "user": "https://github.com/SnarkBoojum"
}
```

<div id="comment:265" align="right">comment:265</div>

Replying to [@tscrim](#comment%3A263):
>
> Also, I think we should set a fixed tarball and checksum. Do you want me to do this?

I don't follow the ticket very closely, but that makes me jump: what about taking an upstream tarball instead of hacking something?



---

archive/issue_comments_229955.json:
```json
{
    "body": "<div id=\"comment:266\" align=\"right\">comment:266</div>\n\nReplying to [@SnarkBoojum](#comment%3A265):\n> Replying to [@tscrim](#comment%3A263):\n> >\n> > Also, I think we should set a fixed tarball and checksum. Do you want me to do this?\n\n> \n> I don't follow the ticket very closely, but that makes me jump: what about taking an upstream tarball instead of hacking something?\n\nWIP / moving target:\n\n```\ncommit 117ae9c7dde9eb9fcaa4cb899cfb7690addd6dfe\nAuthor: Hans Schoenemann <hannes@mathematik.uni-kl.de>\nDate:   Fri Aug 26 18:47:06 2016 +0200\n\n    opt: prefer unsigned over int in for loops\n\ncommit f5e732af7572071c189ad8185ce830f96ababa46\nAuthor: Hans Schoenemann <hannes@mathematik.uni-kl.de>\nDate:   Fri Aug 26 18:46:40 2016 +0200\n\n    compiler warnings\n\ncommit 6e28802f29d0fee351ccab022adc6853e46bd3fe\nAuthor: Hans Schoenemann <hannes@mathematik.uni-kl.de>\nDate:   Wed Aug 24 17:18:54 2016 +0200\n\n    opt: use id_Delete in syz1.cc\n\ncommit 84963dfd52839fd9d4215c5d5b0534e80417dfad\nAuthor: Hans Schoenemann <hannes@mathematik.uni-kl.de>\nDate:   Wed Aug 24 16:42:29 2016 +0200\n\n    opt: NULL in syResolvente->*res\n\ncommit 495258ce8ff8e5b1376e6c7fa8ae2815387e8b4a\nAuthor: Hans Schoenemann <hannes@mathematik.uni-kl.de>\nDate:   Mon Aug 22 16:04:20 2016 +0200\n\n    removed wrong warning (see Tst/Plural/doc-module-ops.tst)\n\ncommit 32e84f5b8f065a8070d982ae939de64e4721beab\nAuthor: Hans Schoenemann <hannes@mathematik.uni-kl.de>\nDate:   Mon Aug 22 16:03:02 2016 +0200\n\n    removed AlgDep-qso3-dp.tst from Plural/short.lst: also in Plural.lst\n\ncommit a070b84d59be835a2946d1386edd3221d80f3fe7\nAuthor: Hans Schoenemann <hannes@mathematik.uni-kl.de>\nDate:   Fri Aug 19 16:56:16 2016 +0200\n\n    Singular 4.0.3p3\n\ncommit 961c76da92efc86885b6506c8c83262f14e705ff\nAuthor: Hans Schoenemann <hannes@mathematik.uni-kl.de>\nDate:   Fri Aug 19 16:34:25 2016 +0200\n\n    chg: n_IsMOne for Z/2: maybe n_Zp, n_Zn, n_Z2m\n\n...\n```",
    "created_at": "2016-08-27T13:24:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229955",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:266" align="right">comment:266</div>

Replying to [@SnarkBoojum](#comment%3A265):
> Replying to [@tscrim](#comment%3A263):
> >
> > Also, I think we should set a fixed tarball and checksum. Do you want me to do this?

> 
> I don't follow the ticket very closely, but that makes me jump: what about taking an upstream tarball instead of hacking something?

WIP / moving target:

```
commit 117ae9c7dde9eb9fcaa4cb899cfb7690addd6dfe
Author: Hans Schoenemann <hannes@mathematik.uni-kl.de>
Date:   Fri Aug 26 18:47:06 2016 +0200

    opt: prefer unsigned over int in for loops

commit f5e732af7572071c189ad8185ce830f96ababa46
Author: Hans Schoenemann <hannes@mathematik.uni-kl.de>
Date:   Fri Aug 26 18:46:40 2016 +0200

    compiler warnings

commit 6e28802f29d0fee351ccab022adc6853e46bd3fe
Author: Hans Schoenemann <hannes@mathematik.uni-kl.de>
Date:   Wed Aug 24 17:18:54 2016 +0200

    opt: use id_Delete in syz1.cc

commit 84963dfd52839fd9d4215c5d5b0534e80417dfad
Author: Hans Schoenemann <hannes@mathematik.uni-kl.de>
Date:   Wed Aug 24 16:42:29 2016 +0200

    opt: NULL in syResolvente->*res

commit 495258ce8ff8e5b1376e6c7fa8ae2815387e8b4a
Author: Hans Schoenemann <hannes@mathematik.uni-kl.de>
Date:   Mon Aug 22 16:04:20 2016 +0200

    removed wrong warning (see Tst/Plural/doc-module-ops.tst)

commit 32e84f5b8f065a8070d982ae939de64e4721beab
Author: Hans Schoenemann <hannes@mathematik.uni-kl.de>
Date:   Mon Aug 22 16:03:02 2016 +0200

    removed AlgDep-qso3-dp.tst from Plural/short.lst: also in Plural.lst

commit a070b84d59be835a2946d1386edd3221d80f3fe7
Author: Hans Schoenemann <hannes@mathematik.uni-kl.de>
Date:   Fri Aug 19 16:56:16 2016 +0200

    Singular 4.0.3p3

commit 961c76da92efc86885b6506c8c83262f14e705ff
Author: Hans Schoenemann <hannes@mathematik.uni-kl.de>
Date:   Fri Aug 19 16:34:25 2016 +0200

    chg: n_IsMOne for Z/2: maybe n_Zp, n_Zn, n_Z2m

...
```



---

archive/issue_comments_229956.json:
```json
{
    "body": "<div id=\"comment:267\" align=\"right\">comment:267</div>\n\nMinor thing:  All error messages in `spkg-install` should start with `\"Error`[`:`]` ...\"`.\n\n`spkg-src` could be beautified a bit as well (e.g. not unconditionally deleting `singular.git`, and recording what we checked out, error checking), besides that `curl` is non-standard... ;-)",
    "created_at": "2016-08-27T13:45:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229956",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:267" align="right">comment:267</div>

Minor thing:  All error messages in `spkg-install` should start with `"Error`[`:`]` ..."`.

`spkg-src` could be beautified a bit as well (e.g. not unconditionally deleting `singular.git`, and recording what we checked out, error checking), besides that `curl` is non-standard... ;-)



---

archive/issue_comments_229957.json:
```json
{
    "body": "<div id=\"comment:268\" align=\"right\">comment:268</div>\n\nP.S.:  I'd prefer to not use `-lSingular`, but create a symlink from lower to uppercase instead.",
    "created_at": "2016-08-27T13:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229957",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:268" align="right">comment:268</div>

P.S.:  I'd prefer to not use `-lSingular`, but create a symlink from lower to uppercase instead.



---

archive/issue_comments_229958.json:
```json
{
    "body": "<div id=\"comment:269\" align=\"right\">comment:269</div>\n\naclocal is currently a dependency, probably due to warnings treated as errors:\n\n```\n[singular-4.0.3p3] config.status: executing libtool commands\n[singular-4.0.3p3] ### Singular spkg-install: build_singular ###\n[singular-4.0.3p3] make[3]: Entering directory '/home/dima/Sage/sage/local/var/tmp/sage/build/singular-4.0.3p3/src/latest'\n[singular-4.0.3p3] CDPATH=\"${ZSH_VERSION+.}:\" && cd . && /bin/sh /home/dima/Sage/sage/local/var/tmp/sage/build/singular-4.0.3p3/src/latest/build-aux/missing aclocal-1.14 -I m4\n[singular-4.0.3p3] /home/dima/Sage/sage/local/var/tmp/sage/build/singular-4.0.3p3/src/latest/build-aux/missing: line 81: aclocal-1.14: command not found\n[singular-4.0.3p3] WARNING: 'aclocal-1.14' is missing on your system.\n[singular-4.0.3p3]          You should only need it if you modified 'acinclude.m4' or\n[singular-4.0.3p3]          'configure.ac' or m4 files included by 'configure.ac'.\n[singular-4.0.3p3]          The 'aclocal' program is part of the GNU Automake package:\n[singular-4.0.3p3]          <http://www.gnu.org/software/automake>\n[singular-4.0.3p3]          It also requires GNU Autoconf, GNU m4 and Perl in order to run:\n[singular-4.0.3p3]          <http://www.gnu.org/software/autoconf>\n[singular-4.0.3p3]          <http://www.gnu.org/software/m4/>\n[singular-4.0.3p3]          <http://www.perl.org/>\n[singular-4.0.3p3] make[3]: *** [Makefile:485: aclocal.m4] Error 127\n[singular-4.0.3p3] make[3]: Leaving directory '/home/dima/Sage/sage/local/var/tmp/sage/build/singular-4.0.3p3/src/latest'\n[singular-4.0.3p3] \n[singular-4.0.3p3] real\t0m28.318s\n[singular-4.0.3p3] user\t0m13.437s\n[singular-4.0.3p3] sys\t0m4.493s\n[singular-4.0.3p3] ************************************************************************\n[singular-4.0.3p3] Error installing package singular-4.0.3p3\n[singular-4.0.3p3] ************************************************************************\n```\nonly caught this as I'm setting up a new laptop :-)",
    "created_at": "2016-08-27T16:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229958",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:269" align="right">comment:269</div>

aclocal is currently a dependency, probably due to warnings treated as errors:

```
[singular-4.0.3p3] config.status: executing libtool commands
[singular-4.0.3p3] ### Singular spkg-install: build_singular ###
[singular-4.0.3p3] make[3]: Entering directory '/home/dima/Sage/sage/local/var/tmp/sage/build/singular-4.0.3p3/src/latest'
[singular-4.0.3p3] CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/sh /home/dima/Sage/sage/local/var/tmp/sage/build/singular-4.0.3p3/src/latest/build-aux/missing aclocal-1.14 -I m4
[singular-4.0.3p3] /home/dima/Sage/sage/local/var/tmp/sage/build/singular-4.0.3p3/src/latest/build-aux/missing: line 81: aclocal-1.14: command not found
[singular-4.0.3p3] WARNING: 'aclocal-1.14' is missing on your system.
[singular-4.0.3p3]          You should only need it if you modified 'acinclude.m4' or
[singular-4.0.3p3]          'configure.ac' or m4 files included by 'configure.ac'.
[singular-4.0.3p3]          The 'aclocal' program is part of the GNU Automake package:
[singular-4.0.3p3]          <http://www.gnu.org/software/automake>
[singular-4.0.3p3]          It also requires GNU Autoconf, GNU m4 and Perl in order to run:
[singular-4.0.3p3]          <http://www.gnu.org/software/autoconf>
[singular-4.0.3p3]          <http://www.gnu.org/software/m4/>
[singular-4.0.3p3]          <http://www.perl.org/>
[singular-4.0.3p3] make[3]: *** [Makefile:485: aclocal.m4] Error 127
[singular-4.0.3p3] make[3]: Leaving directory '/home/dima/Sage/sage/local/var/tmp/sage/build/singular-4.0.3p3/src/latest'
[singular-4.0.3p3] 
[singular-4.0.3p3] real	0m28.318s
[singular-4.0.3p3] user	0m13.437s
[singular-4.0.3p3] sys	0m4.493s
[singular-4.0.3p3] ************************************************************************
[singular-4.0.3p3] Error installing package singular-4.0.3p3
[singular-4.0.3p3] ************************************************************************
```
only caught this as I'm setting up a new laptop :-)



---

archive/issue_comments_229959.json:
```json
{
    "body": "<div id=\"comment:270\" align=\"right\">comment:270</div>\n\nI have aclocal-1.15, but it insists on 1.14; weird, no?",
    "created_at": "2016-08-27T16:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229959",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:270" align="right">comment:270</div>

I have aclocal-1.15, but it insists on 1.14; weird, no?



---

archive/issue_comments_229960.json:
```json
{
    "body": "<div id=\"comment:271\" align=\"right\">comment:271</div>\n\nReplying to [@dimpase](#comment%3A269):\n> aclocal is currently a dependency\n\nThis should be fixed by running the necessary autotools in `spkg-src`.",
    "created_at": "2016-08-27T17:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229960",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:271" align="right">comment:271</div>

Replying to [@dimpase](#comment%3A269):
> aclocal is currently a dependency

This should be fixed by running the necessary autotools in `spkg-src`.



---

archive/issue_comments_229961.json:
```json
{
    "body": "<div id=\"comment:272\" align=\"right\">comment:272</div>\n\nReplying to [@jdemeyer](#comment%3A271):\n> Replying to [@dimpase](#comment%3A269):\n> > aclocal is currently a dependency\n\n> \n> This should be fixed by running the necessary autotools in `spkg-src`.\n\nAC_REQUIRE proper timestamps.",
    "created_at": "2016-08-27T17:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229961",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:272" align="right">comment:272</div>

Replying to [@jdemeyer](#comment%3A271):
> Replying to [@dimpase](#comment%3A269):
> > aclocal is currently a dependency

> 
> This should be fixed by running the necessary autotools in `spkg-src`.

AC_REQUIRE proper timestamps.



---

archive/issue_comments_229962.json:
```json
{
    "body": "<div id=\"comment:273\" align=\"right\">comment:273</div>\n\nReplying to [@jdemeyer](#comment%3A271):\n> Replying to [@dimpase](#comment%3A269):\n> > aclocal is currently a dependency\n\n> \n> This should be fixed by running the necessary autotools in `spkg-src`.\n\nI did make the tarball using `spkg-src`, as described.\nI guess it's an upstream bug: they don't detect presence of aclocal-1.14, even though they don't need it, and bail out, even though it's meant to be a warning. \n\nAny, why `1.14` only? Won't they be happy with `1.14` or newer?",
    "created_at": "2016-08-27T17:36:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229962",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:273" align="right">comment:273</div>

Replying to [@jdemeyer](#comment%3A271):
> Replying to [@dimpase](#comment%3A269):
> > aclocal is currently a dependency

> 
> This should be fixed by running the necessary autotools in `spkg-src`.

I did make the tarball using `spkg-src`, as described.
I guess it's an upstream bug: they don't detect presence of aclocal-1.14, even though they don't need it, and bail out, even though it's meant to be a warning. 

Any, why `1.14` only? Won't they be happy with `1.14` or newer?



---

archive/issue_comments_229963.json:
```json
{
    "body": "Changed commit from **[`7dd92be`](https://github.com/sagemath/sagetrac-mirror/commit/7dd92be65babe002f265b9e3cd24e6493d8d0cd5)** to **[`457bd23`](https://github.com/sagemath/sagetrac-mirror/commit/457bd233fc051f4ec6f8acf48dbf271af6d5bb46)**",
    "created_at": "2016-08-27T19:52:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229963",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`7dd92be`](https://github.com/sagemath/sagetrac-mirror/commit/7dd92be65babe002f265b9e3cd24e6493d8d0cd5)** to **[`457bd23`](https://github.com/sagemath/sagetrac-mirror/commit/457bd233fc051f4ec6f8acf48dbf271af6d5bb46)**



---

archive/issue_comments_229964.json:
```json
{
    "body": "Changed branch from **[public/singular4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular4)** to **[u/dimpase/singular4](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/singular4)**",
    "created_at": "2016-08-27T19:52:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229964",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[public/singular4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular4)** to **[u/dimpase/singular4](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/singular4)**



---

archive/issue_comments_229965.json:
```json
{
    "body": "<div id=\"comment:274\" align=\"right\">comment:274</div>\n\nmodulo the following, `ptestlong` passes with the new branch\n\n```\nsage -t --long --warn-long 77.2 src/sage/schemes/curves/affine_curve.py\n**********************************************************************\nFile \"src/sage/schemes/curves/affine_curve.py\", line 494, in sage.schemes.curves.affine_curve.AffineCurve.resolution_of_singularities\nFailed example:\n    C.resolution_of_singularities(extend=True)[0] # long time (2 seconds)\nExpected:\n    (Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),\n     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1,\n     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)\nGot:\n    (Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),\n     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1,\n     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)\n**********************************************************************\n1 item had failures:\n   1 of  23 in sage.schemes.curves.affine_curve.AffineCurve.resolution_of_singularities\n    [195 tests, 1 failure, 3.51 s]\n```\n\nI don't know enough about resolution of singularities to decide whether the latter output is correct, or not (notice some signs are changed...)\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d8c1d913c8b73cbac18dbc4ad5c4d0560def951\"><code>5d8c1d9</code></a></td><td><code>adding a patch fixing the i386 with AVX issue</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d2787452bd823dd1f42996206f2bcb54dc8b9ef\"><code>0d27874</code></a></td><td><code>Fix int size bug in the interface between singular and givaro (on 32bit arch)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/162c717f4d5ba4f4b96e4acb1c6a445879eaf578\"><code>162c717</code></a></td><td><code>preparing upgrade to linbox-1.4.2rc0 fflas-ffpack-2.2.2rc0 and givaro 4.0.2rc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20e86b3dbebb16771b9efcf1aba3feba693bfafa\"><code>20e86b3</code></a></td><td><code>update to the lastest releases</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fb5502c88d23b2e3de1a46acec7e9e1af013bfe\"><code>2fb5502</code></a></td><td><code>* Merging and fixing conflicts.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85ce544d09b947126b387fa70735d1fa37b4b711\"><code>85ce544</code></a></td><td><code>Merge branch 'u/cpernet/givaro_fflasffpack_linbox' of git://trac.sagemath.org/sage into givaroupd</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7233c9cb64829f3c8a64b04aa744bdbb007ed27\"><code>b7233c9</code></a></td><td><code>Fix coercion bug: raise a TypeError exception whenever an ArithmeticError is caught, while trying to reduce an element mod the characteristic.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd30aec77fc84b942c91b602fd675f008fd7a431\"><code>cd30aec</code></a></td><td><code>Merge branch 'u/cpernet/givaro_fflasffpack_linbox' of git://trac.sagemath.org/sage into givaroupd</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0efcdecdaf1d97c8ed5433c4aad10ff2d9055775\"><code>0efcdec</code></a></td><td><code>Merge branch 'public/singular4' into givaro 4.0.2 branch from #17635</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/457bd233fc051f4ec6f8acf48dbf271af6d5bb46\"><code>457bd23</code></a></td><td><code>missing capital 'S' in Singular</code></td></tr></table>\n",
    "created_at": "2016-08-27T19:52:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229965",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:274" align="right">comment:274</div>

modulo the following, `ptestlong` passes with the new branch

```
sage -t --long --warn-long 77.2 src/sage/schemes/curves/affine_curve.py
**********************************************************************
File "src/sage/schemes/curves/affine_curve.py", line 494, in sage.schemes.curves.affine_curve.AffineCurve.resolution_of_singularities
Failed example:
    C.resolution_of_singularities(extend=True)[0] # long time (2 seconds)
Expected:
    (Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),
     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1,
     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)
Got:
    (Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),
     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1,
     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)
**********************************************************************
1 item had failures:
   1 of  23 in sage.schemes.curves.affine_curve.AffineCurve.resolution_of_singularities
    [195 tests, 1 failure, 3.51 s]
```

I don't know enough about resolution of singularities to decide whether the latter output is correct, or not (notice some signs are changed...)

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d8c1d913c8b73cbac18dbc4ad5c4d0560def951"><code>5d8c1d9</code></a></td><td><code>adding a patch fixing the i386 with AVX issue</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d2787452bd823dd1f42996206f2bcb54dc8b9ef"><code>0d27874</code></a></td><td><code>Fix int size bug in the interface between singular and givaro (on 32bit arch)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/162c717f4d5ba4f4b96e4acb1c6a445879eaf578"><code>162c717</code></a></td><td><code>preparing upgrade to linbox-1.4.2rc0 fflas-ffpack-2.2.2rc0 and givaro 4.0.2rc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20e86b3dbebb16771b9efcf1aba3feba693bfafa"><code>20e86b3</code></a></td><td><code>update to the lastest releases</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fb5502c88d23b2e3de1a46acec7e9e1af013bfe"><code>2fb5502</code></a></td><td><code>* Merging and fixing conflicts.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85ce544d09b947126b387fa70735d1fa37b4b711"><code>85ce544</code></a></td><td><code>Merge branch 'u/cpernet/givaro_fflasffpack_linbox' of git://trac.sagemath.org/sage into givaroupd</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7233c9cb64829f3c8a64b04aa744bdbb007ed27"><code>b7233c9</code></a></td><td><code>Fix coercion bug: raise a TypeError exception whenever an ArithmeticError is caught, while trying to reduce an element mod the characteristic.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd30aec77fc84b942c91b602fd675f008fd7a431"><code>cd30aec</code></a></td><td><code>Merge branch 'u/cpernet/givaro_fflasffpack_linbox' of git://trac.sagemath.org/sage into givaroupd</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0efcdecdaf1d97c8ed5433c4aad10ff2d9055775"><code>0efcdec</code></a></td><td><code>Merge branch 'public/singular4' into givaro 4.0.2 branch from #17635</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/457bd233fc051f4ec6f8acf48dbf271af6d5bb46"><code>457bd23</code></a></td><td><code>missing capital 'S' in Singular</code></td></tr></table>




---

archive/issue_events_244037.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-27T19:52:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244037"
}
```



---

archive/issue_events_244038.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-27T19:52:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244038"
}
```



---

archive/issue_comments_229966.json:
```json
{
    "body": "<div id=\"comment:275\" align=\"right\">comment:275</div>\n\nCould we please not mix commits from different upgrades?\n\nI don't see an immediate reason to base this ticket on #17635 either; they're IMHO better first reviewed independently.",
    "created_at": "2016-08-27T20:11:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229966",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:275" align="right">comment:275</div>

Could we please not mix commits from different upgrades?

I don't see an immediate reason to base this ticket on #17635 either; they're IMHO better first reviewed independently.



---

archive/issue_comments_229967.json:
```json
{
    "body": "<div id=\"comment:276\" align=\"right\">comment:276</div>\n\nLGTM at least in principle.  I'm going to try over the next day or two to test how this works on Cygwin64.",
    "created_at": "2016-08-29T10:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229967",
    "user": "https://github.com/embray"
}
```

<div id="comment:276" align="right">comment:276</div>

LGTM at least in principle.  I'm going to try over the next day or two to test how this works on Cygwin64.



---

archive/issue_comments_229968.json:
```json
{
    "body": "<div id=\"comment:277\" align=\"right\">comment:277</div>\n\nAlso I guess the milestone for this ticket should be changed?  I don't know what to though.",
    "created_at": "2016-08-29T10:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229968",
    "user": "https://github.com/embray"
}
```

<div id="comment:277" align="right">comment:277</div>

Also I guess the milestone for this ticket should be changed?  I don't know what to though.



---

archive/issue_events_244039.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-29T10:34:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244039"
}
```



---

archive/issue_events_244040.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-29T10:34:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244040"
}
```



---

archive/issue_comments_229969.json:
```json
{
    "body": "<div id=\"comment:278\" align=\"right\">comment:278</div>\n\nReplying to [@nexttime](#comment%3A275):\n> Could we please not mix commits from different upgrades?\n> \n> I don't see an immediate reason to base this ticket on #17635 either; they're IMHO better first reviewed independently.\n\nwell, they depend, albeit not too deeply. Perhaps wait for the next beta with #17635 in?",
    "created_at": "2016-08-29T10:34:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229969",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:278" align="right">comment:278</div>

Replying to [@nexttime](#comment%3A275):
> Could we please not mix commits from different upgrades?
> 
> I don't see an immediate reason to base this ticket on #17635 either; they're IMHO better first reviewed independently.

well, they depend, albeit not too deeply. Perhaps wait for the next beta with #17635 in?



---

archive/issue_comments_229970.json:
```json
{
    "body": "<div id=\"comment:279\" align=\"right\">comment:279</div>\n\nIMO, we should get this in as soon as we can to get as much testing as we can before it goes into a stable release.",
    "created_at": "2016-08-29T14:04:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229970",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:279" align="right">comment:279</div>

IMO, we should get this in as soon as we can to get as much testing as we can before it goes into a stable release.



---

archive/issue_comments_229971.json:
```json
{
    "body": "<div id=\"comment:280\" align=\"right\">comment:280</div>\n\nReplying to [@tscrim](#comment%3A279):\n> IMO, we should get this in as soon as we can to get as much testing as we can before it goes into a stable release.\n\n+1; I'm trying to get cygwin testing ASAP, but first I have to get cygwin builds working against the current `develop` (since my cygwin branch is from a couple months' old `develop`).  Should be close to that, but I'd be fine if this is merged in the meantime, and I can open a ticket for any issue I discover later.",
    "created_at": "2016-08-29T16:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229971",
    "user": "https://github.com/embray"
}
```

<div id="comment:280" align="right">comment:280</div>

Replying to [@tscrim](#comment%3A279):
> IMO, we should get this in as soon as we can to get as much testing as we can before it goes into a stable release.

+1; I'm trying to get cygwin testing ASAP, but first I have to get cygwin builds working against the current `develop` (since my cygwin branch is from a couple months' old `develop`).  Should be close to that, but I'd be fine if this is merged in the meantime, and I can open a ticket for any issue I discover later.



---

archive/issue_comments_229972.json:
```json
{
    "body": "<div id=\"comment:281\" align=\"right\">comment:281</div>\n\n#17635 is now closed, so you need to make sure that it doesn't conflict with that ticket.",
    "created_at": "2016-08-30T07:19:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229972",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:281" align="right">comment:281</div>

#17635 is now closed, so you need to make sure that it doesn't conflict with that ticket.



---

archive/issue_comments_229973.json:
```json
{
    "body": "<div id=\"comment:282\" align=\"right\">comment:282</div>\n\n...although Volker closes tickets before fully testing them, so there is still a chance that it will be reopened.",
    "created_at": "2016-08-30T07:20:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229973",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:282" align="right">comment:282</div>

...although Volker closes tickets before fully testing them, so there is still a chance that it will be reopened.



---

archive/issue_comments_229974.json:
```json
{
    "body": "<div id=\"comment:283\" align=\"right\">comment:283</div>\n\nReplying to [@embray](#comment%3A276):\n> LGTM at least in principle.  I'm going to try over the next day or two to test how this works on Cygwin64.\n\nThx, I absolutely did nothing Cygwin-related on that one.",
    "created_at": "2016-08-30T17:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229974",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:283" align="right">comment:283</div>

Replying to [@embray](#comment%3A276):
> LGTM at least in principle.  I'm going to try over the next day or two to test how this works on Cygwin64.

Thx, I absolutely did nothing Cygwin-related on that one.



---

archive/issue_comments_229975.json:
```json
{
    "body": "<div id=\"comment:284\" align=\"right\">comment:284</div>\n\nReplying to [@nexttime](#comment%3A267):\n> Minor thing:  All error messages in `spkg-install` should start with `\"Error`[`:`]` ...\"`.\n> \n\nYes.\n> `spkg-src` could be beautified a bit as well (e.g. not unconditionally deleting `singular.git`, and recording what we checked out, error checking), besides that `curl` is non-standard... ;-)\n\nSure but `curl` was already used in the script anyway and that's only to make the tarball, not for end-users.",
    "created_at": "2016-08-31T07:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229975",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:284" align="right">comment:284</div>

Replying to [@nexttime](#comment%3A267):
> Minor thing:  All error messages in `spkg-install` should start with `"Error`[`:`]` ..."`.
> 

Yes.
> `spkg-src` could be beautified a bit as well (e.g. not unconditionally deleting `singular.git`, and recording what we checked out, error checking), besides that `curl` is non-standard... ;-)

Sure but `curl` was already used in the script anyway and that's only to make the tarball, not for end-users.



---

archive/issue_comments_229976.json:
```json
{
    "body": "<div id=\"comment:285\" align=\"right\">comment:285</div>\n\nI agree that using `curl` in `spkg-src` is not a big issue.",
    "created_at": "2016-08-31T10:06:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229976",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:285" align="right">comment:285</div>

I agree that using `curl` in `spkg-src` is not a big issue.



---

archive/issue_comments_229977.json:
```json
{
    "body": "<div id=\"comment:286\" align=\"right\">comment:286</div>\n\nThis cannot go into Sage until there is a proper tarball.",
    "created_at": "2016-08-31T10:10:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229977",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:286" align="right">comment:286</div>

This cannot go into Sage until there is a proper tarball.



---

archive/issue_events_244041.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-31T10:10:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244041"
}
```



---

archive/issue_events_244042.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-31T10:10:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244042"
}
```



---

archive/issue_comments_229978.json:
```json
{
    "body": "<div id=\"comment:287\" align=\"right\">comment:287</div>\n\nWhat's the point of this commented-out code? Just remove it.\n\n```\n# C++11 workaround https://trac.sagemath.org/ticket/20926\n# Since https://trac.sagemath.org/ticket/17635 linbox passes a -std=gnu++11 flag, so we no longer need to add it\n# if [ \"$UNAME\" = CYGWIN ]; then\n     # Special case for Cygwin https://trac.sagemath.org/ticket/21185\n#     CXXFLAGS=\"$CXXFLAGS -std=gnu++98\"\n# else\n#     CXXFLAGS=\"$CXXFLAGS -std=c++98\"\n#fi\n```",
    "created_at": "2016-08-31T10:12:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229978",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:287" align="right">comment:287</div>

What's the point of this commented-out code? Just remove it.

```
# C++11 workaround https://trac.sagemath.org/ticket/20926
# Since https://trac.sagemath.org/ticket/17635 linbox passes a -std=gnu++11 flag, so we no longer need to add it
# if [ "$UNAME" = CYGWIN ]; then
     # Special case for Cygwin https://trac.sagemath.org/ticket/21185
#     CXXFLAGS="$CXXFLAGS -std=gnu++98"
# else
#     CXXFLAGS="$CXXFLAGS -std=c++98"
#fi
```



---

archive/issue_comments_229979.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,5 +5,9 @@\n The branch here is based on commit a070b84d whose message tells 4.0.3p3:\n * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7\n \n-Make your own tarball with `SINGULAR_GIT_COMMIT=a070b84d spkg-src`.\n-This is loosely based on the `make_tar.sh` script from upstream.\n+Make your own tarball with\n+\n+```\n+SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src\n+```\n+This script is loosely based on the `make_tar.sh` script from upstream.\n``````\n",
    "created_at": "2016-08-31T10:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229979",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,5 +5,9 @@
 The branch here is based on commit a070b84d whose message tells 4.0.3p3:
 * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7
 
-Make your own tarball with `SINGULAR_GIT_COMMIT=a070b84d spkg-src`.
-This is loosely based on the `make_tar.sh` script from upstream.
+Make your own tarball with
+
+```
+SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src
+```
+This script is loosely based on the `make_tar.sh` script from upstream.
``````




---

archive/issue_comments_229980.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,7 @@\n Make your own tarball with\n \n ```\n-SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src\n+env SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src\n+./sage --package fix-checksum singular\n ```\n This script is loosely based on the `make_tar.sh` script from upstream.\n``````\n",
    "created_at": "2016-08-31T10:14:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229980",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,7 @@
 Make your own tarball with
 
 ```
-SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src
+env SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src
+./sage --package fix-checksum singular
 ```
 This script is loosely based on the `make_tar.sh` script from upstream.
``````




---

archive/issue_comments_229981.json:
```json
{
    "body": "<div id=\"comment:290\" align=\"right\">comment:290</div>\n\nIn `build/pkgs/singular/spkg-install`, if you use `set -e`, it is pointless to do manual error checking like\n\n```\n    if [ $? -ne 0 ]; then\n        echo >&2 \"Error applying '$patch'\"\n        return 1\n    fi\n```",
    "created_at": "2016-08-31T10:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229981",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:290" align="right">comment:290</div>

In `build/pkgs/singular/spkg-install`, if you use `set -e`, it is pointless to do manual error checking like

```
    if [ $? -ne 0 ]; then
        echo >&2 "Error applying '$patch'"
        return 1
    fi
```



---

archive/issue_comments_229982.json:
```json
{
    "body": "<div id=\"comment:291\" align=\"right\">comment:291</div>\n\nWhat's the point of this commented-out code? Just remove it.\n\n```\n #    Extension('sage.libs.linbox.linbox',\n #             sources = ['sage/libs/linbox/linbox.pyx']),\n```\n\nMore generally, better remove all commented-out code unless there is a clear purpose.",
    "created_at": "2016-08-31T10:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229982",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:291" align="right">comment:291</div>

What's the point of this commented-out code? Just remove it.

```
 #    Extension('sage.libs.linbox.linbox',
 #             sources = ['sage/libs/linbox/linbox.pyx']),
```

More generally, better remove all commented-out code unless there is a clear purpose.



---

archive/issue_comments_229983.json:
```json
{
    "body": "<div id=\"comment:292\" align=\"right\">comment:292</div>\n\nIn\n\n```\n    cdef enum n_coeffType:\n        n_unknown=0\n        n_Zp=1 #/**< \\F{p < 2^31} */\n        n_Q=2   #/**< rational (GMP) numbers */\n        [...]\n```\nI would remove the values (like `=0`) because that is only confusing. And please either properly format the comments there or remove them.",
    "created_at": "2016-08-31T10:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229983",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:292" align="right">comment:292</div>

In

```
    cdef enum n_coeffType:
        n_unknown=0
        n_Zp=1 #/**< \F{p < 2^31} */
        n_Q=2   #/**< rational (GMP) numbers */
        [...]
```
I would remove the values (like `=0`) because that is only confusing. And please either properly format the comments there or remove them.



---

archive/issue_comments_229984.json:
```json
{
    "body": "<div id=\"comment:293\" align=\"right\">comment:293</div>\n\nThis is also silly:\n\n```\n            if sizeof(long) > 4:\n\n                # it seems Singular uses ints somewhere\n                # internally, cf. #6051 (Sage) and #138 (Singular)\n\n                if exponent <= 30:  ringtype = n_Z2m\n                else:               ringtype = n_Znm\n            else:\n                if exponent <= 30: ringtype = n_Z2m\n                else:              ringtype = n_Znm\n```\n\nYou can change code of the form\n\n```\nif condition:\n    A\nelse:\n    A\n```\nto\n\n```\nA\n```",
    "created_at": "2016-08-31T10:26:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229984",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:293" align="right">comment:293</div>

This is also silly:

```
            if sizeof(long) > 4:

                # it seems Singular uses ints somewhere
                # internally, cf. #6051 (Sage) and #138 (Singular)

                if exponent <= 30:  ringtype = n_Z2m
                else:               ringtype = n_Znm
            else:
                if exponent <= 30: ringtype = n_Z2m
                else:              ringtype = n_Znm
```

You can change code of the form

```
if condition:
    A
else:
    A
```
to

```
A
```



---

archive/issue_comments_229985.json:
```json
{
    "body": "<div id=\"comment:294\" align=\"right\">comment:294</div>\n\nI think this regression is not acceptable:\n\n```\n             sage: P.<x,y,z> = PolynomialRing(QQ)\n             sage: f= x^2 + 2*x*y + 1/2*z\n             sage: f.is_squarefree()\n             Traceback (most recent call last):\n             ...\n             NotImplementedError: is_squarefree of multivariate polynomials over rings is not implemented.\n```\n\nAsking whether a multivariate polynomial is squarefree seems like a very natural thing to do and not something you should just break.",
    "created_at": "2016-08-31T10:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229985",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:294" align="right">comment:294</div>

I think this regression is not acceptable:

```
             sage: P.<x,y,z> = PolynomialRing(QQ)
             sage: f= x^2 + 2*x*y + 1/2*z
             sage: f.is_squarefree()
             Traceback (most recent call last):
             ...
             NotImplementedError: is_squarefree of multivariate polynomials over rings is not implemented.
```

Asking whether a multivariate polynomial is squarefree seems like a very natural thing to do and not something you should just break.



---

archive/issue_comments_229986.json:
```json
{
    "body": "<div id=\"comment:295\" align=\"right\">comment:295</div>\n\nAlso, I am not so happy with the regression in exponent overflow but that's a less serious issue.",
    "created_at": "2016-08-31T10:32:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229986",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:295" align="right">comment:295</div>

Also, I am not so happy with the regression in exponent overflow but that's a less serious issue.



---

archive/issue_events_244043.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-31T10:33:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244043"
}
```



---

archive/issue_events_244044.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-31T10:33:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244044"
}
```



---

archive/issue_comments_229987.json:
```json
{
    "body": "<div id=\"comment:297\" align=\"right\">comment:297</div>\n\nSorry to say this, but the code is really ugly and certainly uglier than it was before. I see lots of annoying things, like unneeded comments, indentation not a multiple of 4 spaces, needlessly complicated code.\n\nI think this requires somebody to go over all the code and clean it up.",
    "created_at": "2016-08-31T11:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229987",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:297" align="right">comment:297</div>

Sorry to say this, but the code is really ugly and certainly uglier than it was before. I see lots of annoying things, like unneeded comments, indentation not a multiple of 4 spaces, needlessly complicated code.

I think this requires somebody to go over all the code and clean it up.



---

archive/issue_comments_229988.json:
```json
{
    "body": "<div id=\"comment:298\" align=\"right\">comment:298</div>\n\nAnother example:\n\n```\n    libSingularFound = False\n\n    for extension in [\"so\", \"dylib\", \"dll\"]:\n        lib = os.environ['SAGE_LOCAL']+\"/lib/libSingular.\"+extension # libsingular renamed to libSingular\n        if os.path.exists(lib):\n            libSingularFound = True\n            handle = dlopen(lib, RTLD_GLOBAL|RTLD_LAZY)\n            if not handle:\n                err = dlerror()\n                if err:\n                    print(err)\n            break\n\n    if not libSingularFound :\n        raise OSError(\"did not find libsingular file\")\n\n\n    if handle == NULL:\n        dlerrormsg = dlerror()\n        if dlerrormsg == NULL:\n            dlerrormsg = \"\"\n        raise ImportError(\"failed to dlopen {} ({})\".format(lib, dlerrormsg))\n```\n\nThe `handle == NULL` cannot be reached since we would error out before. The old code is simpler and better:\n\n```\n    for extension in [\"so\", \"dylib\", \"dll\"]:\n        lib = os.environ['SAGE_LOCAL']+\"/lib/libsingular.\"+extension\n        if os.path.exists(lib):\n            handle = dlopen(lib, RTLD_GLOBAL|RTLD_LAZY)\n            if not handle:\n                err = dlerror()\n                if err:\n                    print(err)\n            break\n\n    if handle == NULL:\n        raise ImportError(\"cannot load libSINGULAR library\")\n```\n\nThere was no reason to make the code more complicated, why was it done???",
    "created_at": "2016-08-31T11:29:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229988",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:298" align="right">comment:298</div>

Another example:

```
    libSingularFound = False

    for extension in ["so", "dylib", "dll"]:
        lib = os.environ['SAGE_LOCAL']+"/lib/libSingular."+extension # libsingular renamed to libSingular
        if os.path.exists(lib):
            libSingularFound = True
            handle = dlopen(lib, RTLD_GLOBAL|RTLD_LAZY)
            if not handle:
                err = dlerror()
                if err:
                    print(err)
            break

    if not libSingularFound :
        raise OSError("did not find libsingular file")


    if handle == NULL:
        dlerrormsg = dlerror()
        if dlerrormsg == NULL:
            dlerrormsg = ""
        raise ImportError("failed to dlopen {} ({})".format(lib, dlerrormsg))
```

The `handle == NULL` cannot be reached since we would error out before. The old code is simpler and better:

```
    for extension in ["so", "dylib", "dll"]:
        lib = os.environ['SAGE_LOCAL']+"/lib/libsingular."+extension
        if os.path.exists(lib):
            handle = dlopen(lib, RTLD_GLOBAL|RTLD_LAZY)
            if not handle:
                err = dlerror()
                if err:
                    print(err)
            break

    if handle == NULL:
        raise ImportError("cannot load libSINGULAR library")
```

There was no reason to make the code more complicated, why was it done???



---

archive/issue_comments_229989.json:
```json
{
    "body": "<div id=\"comment:299\" align=\"right\">comment:299</div>\n\nAnother example in `plural.pyx`:\n\n```\ncdef n_coeffType unknownRingtype = n_unknown\n```\n\nWhat's the point of this?",
    "created_at": "2016-08-31T11:32:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229989",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:299" align="right">comment:299</div>

Another example in `plural.pyx`:

```
cdef n_coeffType unknownRingtype = n_unknown
```

What's the point of this?



---

archive/issue_comments_229990.json:
```json
{
    "body": "<div id=\"comment:300\" align=\"right\">comment:300</div>\n\nTo be clear: I am very happy with the work done on this ticket, really. I just feel that it's not ready to merge yet. I also feel that not much effort was done to re-use the existing code, that code was rewritten without reason. That makes it hard to review because the diff is huge.",
    "created_at": "2016-08-31T11:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229990",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:300" align="right">comment:300</div>

To be clear: I am very happy with the work done on this ticket, really. I just feel that it's not ready to merge yet. I also feel that not much effort was done to re-use the existing code, that code was rewritten without reason. That makes it hard to review because the diff is huge.



---

archive/issue_comments_229991.json:
```json
{
    "body": "<div id=\"comment:301\" align=\"right\">comment:301</div>\n\nNo worry Jeroen, that's exactly the point of making a proper review.\nTo this point this ticket is just a heap of changes, hacks, commits by different people to get the new singular working and at least on my side I did not really look at what the other did, especially given the huge diff.\nI'll try to polish the points you mentioned this week.",
    "created_at": "2016-08-31T16:08:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229991",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:301" align="right">comment:301</div>

No worry Jeroen, that's exactly the point of making a proper review.
To this point this ticket is just a heap of changes, hacks, commits by different people to get the new singular working and at least on my side I did not really look at what the other did, especially given the huge diff.
I'll try to polish the points you mentioned this week.



---

archive/issue_comments_229992.json:
```json
{
    "body": "<div id=\"comment:302\" align=\"right\">comment:302</div>\n\nAt least we have something that works (modulo the `is_squarefree` issue). That is a very important starting point.",
    "created_at": "2016-08-31T16:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229992",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:302" align="right">comment:302</div>

At least we have something that works (modulo the `is_squarefree` issue). That is a very important starting point.



---

archive/issue_comments_229993.json:
```json
{
    "body": "<div id=\"comment:303\" align=\"right\">comment:303</div>\n\nReplying to [@jdemeyer](#comment%3A302):\n> At least we have something that works (modulo the `is_squarefree` issue). That is a very important starting point.\n\nsurely Singular 4.0.3 still has the squarefree test, so it's matter of digging up how it is implemented:\n\n```\n> ring r=0,(x,y),dp;\n> poly p=x^2+2*x*y+y^2;\n>> ring r=0,(x,y),dp;\n> poly p=x^2+2*x*y+y^2;\n> sqrfree(p);\n[1]:\n   _[1]=1\n   _[2]=x+y\n[2]:\n   1,2\n```",
    "created_at": "2016-08-31T19:23:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229993",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:303" align="right">comment:303</div>

Replying to [@jdemeyer](#comment%3A302):
> At least we have something that works (modulo the `is_squarefree` issue). That is a very important starting point.

surely Singular 4.0.3 still has the squarefree test, so it's matter of digging up how it is implemented:

```
> ring r=0,(x,y),dp;
> poly p=x^2+2*x*y+y^2;
>> ring r=0,(x,y),dp;
> poly p=x^2+2*x*y+y^2;
> sqrfree(p);
[1]:
   _[1]=1
   _[2]=x+y
[2]:
   1,2
```



---

archive/issue_comments_229994.json:
```json
{
    "body": "<div id=\"comment:304\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e8eb3a794d96c79900cd1567ccf325bd023c836\"><code>7e8eb3a</code></a></td><td><code>add pacth fixing the gcc <= 4.9.2 issue by leif.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aab3eb19842d5f119ead49a4210a93b6bc14558c\"><code>aab3eb1</code></a></td><td><code>Merge branch 'u/cpernet/givaro_fflasffpack_linbox' of trac.sagemath.org:sage into givaroupd</code></td></tr></table>\n",
    "created_at": "2016-09-01T09:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229994",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:304"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e8eb3a794d96c79900cd1567ccf325bd023c836"><code>7e8eb3a</code></a></td><td><code>add pacth fixing the gcc <= 4.9.2 issue by leif.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aab3eb19842d5f119ead49a4210a93b6bc14558c"><code>aab3eb1</code></a></td><td><code>Merge branch 'u/cpernet/givaro_fflasffpack_linbox' of trac.sagemath.org:sage into givaroupd</code></td></tr></table>




---

archive/issue_comments_229995.json:
```json
{
    "body": "Changed commit from **[`457bd23`](https://github.com/sagemath/sagetrac-mirror/commit/457bd233fc051f4ec6f8acf48dbf271af6d5bb46)** to **[`aab3eb1`](https://github.com/sagemath/sagetrac-mirror/commit/aab3eb19842d5f119ead49a4210a93b6bc14558c)**",
    "created_at": "2016-09-01T09:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229995",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`457bd23`](https://github.com/sagemath/sagetrac-mirror/commit/457bd233fc051f4ec6f8acf48dbf271af6d5bb46)** to **[`aab3eb1`](https://github.com/sagemath/sagetrac-mirror/commit/aab3eb19842d5f119ead49a4210a93b6bc14558c)**



---

archive/issue_events_244045.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-09-01T09:41:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244045"
}
```



---

archive/issue_events_244046.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-09-01T09:41:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244046"
}
```



---

archive/issue_events_244047.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-09-01T09:41:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244047"
}
```



---

archive/issue_events_244048.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-09-01T09:41:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244048"
}
```



---

archive/issue_comments_229996.json:
```json
{
    "body": "<div id=\"comment:305\" align=\"right\">comment:305</div>\n\nmerged last commit from givaro upgrade ticket, uploaded the tarball.",
    "created_at": "2016-09-01T09:41:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229996",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:305" align="right">comment:305</div>

merged last commit from givaro upgrade ticket, uploaded the tarball.



---

archive/issue_comments_229997.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,11 @@\n The branch here is based on commit a070b84d whose message tells 4.0.3p3:\n * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7\n \n-Make your own tarball with\n+The tarball is here:\n+\n+http://users.ox.ac.uk/~coml0531/sage/singular-4.0.3p3.tar.bz2\n+\n+It was made using the following procedure : \n \n ```\n env SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src\n``````\n",
    "created_at": "2016-09-01T09:41:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229997",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,11 @@
 The branch here is based on commit a070b84d whose message tells 4.0.3p3:
 * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7
 
-Make your own tarball with
+The tarball is here:
+
+http://users.ox.ac.uk/~coml0531/sage/singular-4.0.3p3.tar.bz2
+
+It was made using the following procedure : 
 
 ```
 env SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src
``````




---

archive/issue_events_244049.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-01T09:48:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244049"
}
```



---

archive/issue_events_244050.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-01T09:48:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244050"
}
```



---

archive/issue_comments_229998.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,11 +5,9 @@\n The branch here is based on commit a070b84d whose message tells 4.0.3p3:\n * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7\n \n-The tarball is here:\n-\n-http://users.ox.ac.uk/~coml0531/sage/singular-4.0.3p3.tar.bz2\n-\n-It was made using the following procedure : \n+use the tarball at:\n+* http://perso.telecom-paristech.fr/~flori/singular/singular-4.0.3p3.tar.bz2\n+* or make your own tarball with\n \n ```\n env SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src\n``````\n",
    "created_at": "2016-09-01T09:48:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229998",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,11 +5,9 @@
 The branch here is based on commit a070b84d whose message tells 4.0.3p3:
 * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7
 
-The tarball is here:
-
-http://users.ox.ac.uk/~coml0531/sage/singular-4.0.3p3.tar.bz2
-
-It was made using the following procedure : 
+use the tarball at:
+* http://perso.telecom-paristech.fr/~flori/singular/singular-4.0.3p3.tar.bz2
+* or make your own tarball with
 
 ```
 env SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src
``````




---

archive/issue_comments_229999.json:
```json
{
    "body": "<div id=\"comment:307\" align=\"right\">comment:307</div>\n\noops, we pushed similar stuff at the same time...",
    "created_at": "2016-09-01T09:49:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-229999",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:307" align="right">comment:307</div>

oops, we pushed similar stuff at the same time...



---

archive/issue_comments_230000.json:
```json
{
    "body": "<div id=\"comment:308\" align=\"right\">comment:308</div>\n\nI'm working on this, so pleas refrain taking Jeroen comments into account right now :)",
    "created_at": "2016-09-01T09:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230000",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:308" align="right">comment:308</div>

I'm working on this, so pleas refrain taking Jeroen comments into account right now :)



---

archive/issue_comments_230001.json:
```json
{
    "body": "<div id=\"comment:309\" align=\"right\">comment:309</div>\n\nTook some Jeroen comments into account.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95b768ab437854732fc3b51059bc84db5722de17\"><code>95b768a</code></a></td><td><code>Modify error handling in Singular spkg-install.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4dad30f87f87fb060532e0383816d716aff97db\"><code>b4dad30</code></a></td><td><code>Merge remote-tracking branch 'trac/u/dimpase/singular4' into singular</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9124efc33959dec75a04905bf1012e9a356b3ea2\"><code>9124efc</code></a></td><td><code>Purify enum for singular ring types.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c60efc216bf0c062d8a51f60961671c665911493\"><code>c60efc2</code></a></td><td><code>Remove print debug statement in singular ring creation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34960ee588608893deb1d1ecbf1fb8e6c649e94b\"><code>34960ee</code></a></td><td><code>Revert simpler old code to load libsingular.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c7c6a9990ec261455f46fdefb010b2767c94c84\"><code>0c7c6a9</code></a></td><td><code>Don't define useless variable.</code></td></tr></table>\n",
    "created_at": "2016-09-01T10:03:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230001",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:309" align="right">comment:309</div>

Took some Jeroen comments into account.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95b768ab437854732fc3b51059bc84db5722de17"><code>95b768a</code></a></td><td><code>Modify error handling in Singular spkg-install.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4dad30f87f87fb060532e0383816d716aff97db"><code>b4dad30</code></a></td><td><code>Merge remote-tracking branch 'trac/u/dimpase/singular4' into singular</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9124efc33959dec75a04905bf1012e9a356b3ea2"><code>9124efc</code></a></td><td><code>Purify enum for singular ring types.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c60efc216bf0c062d8a51f60961671c665911493"><code>c60efc2</code></a></td><td><code>Remove print debug statement in singular ring creation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34960ee588608893deb1d1ecbf1fb8e6c649e94b"><code>34960ee</code></a></td><td><code>Revert simpler old code to load libsingular.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c7c6a9990ec261455f46fdefb010b2767c94c84"><code>0c7c6a9</code></a></td><td><code>Don't define useless variable.</code></td></tr></table>




---

archive/issue_comments_230002.json:
```json
{
    "body": "Changed branch from **[u/dimpase/singular4](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/singular4)** to **[public/singular4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular4)**",
    "created_at": "2016-09-01T10:03:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230002",
    "user": "https://github.com/jpflori"
}
```

Changed branch from **[u/dimpase/singular4](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/singular4)** to **[public/singular4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular4)**



---

archive/issue_events_244051.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-01T10:03:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244051"
}
```



---

archive/issue_events_244052.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-01T10:03:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244052"
}
```



---

archive/issue_comments_230003.json:
```json
{
    "body": "Changed commit from **[`aab3eb1`](https://github.com/sagemath/sagetrac-mirror/commit/aab3eb19842d5f119ead49a4210a93b6bc14558c)** to **[`0c7c6a9`](https://github.com/sagemath/sagetrac-mirror/commit/0c7c6a9990ec261455f46fdefb010b2767c94c84)**",
    "created_at": "2016-09-01T10:03:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230003",
    "user": "https://github.com/jpflori"
}
```

Changed commit from **[`aab3eb1`](https://github.com/sagemath/sagetrac-mirror/commit/aab3eb19842d5f119ead49a4210a93b6bc14558c)** to **[`0c7c6a9`](https://github.com/sagemath/sagetrac-mirror/commit/0c7c6a9990ec261455f46fdefb010b2767c94c84)**



---

archive/issue_comments_230004.json:
```json
{
    "body": "Changed commit from **[`0c7c6a9`](https://github.com/sagemath/sagetrac-mirror/commit/0c7c6a9990ec261455f46fdefb010b2767c94c84)** to **[`cd00aa1`](https://github.com/sagemath/sagetrac-mirror/commit/cd00aa122d2081d05a87c65d5ff2bcd44f6505a9)**",
    "created_at": "2016-09-01T10:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230004",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0c7c6a9`](https://github.com/sagemath/sagetrac-mirror/commit/0c7c6a9990ec261455f46fdefb010b2767c94c84)** to **[`cd00aa1`](https://github.com/sagemath/sagetrac-mirror/commit/cd00aa122d2081d05a87c65d5ff2bcd44f6505a9)**



---

archive/issue_comments_230005.json:
```json
{
    "body": "<div id=\"comment:310\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f9977989d427453644d9952ab8401cdd24127bd\"><code>5f99779</code></a></td><td><code>Remove useless import.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d4ba4e5b3af25855e253b65e30ea1732ac7a47c\"><code>1d4ba4e</code></a></td><td><code>Simplify verbosity for singular.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd3cd2fd67ac12011a442333273c5cadc24bfa56\"><code>cd3cd2f</code></a></td><td><code>Remove print debug statement in polynomial.pyx.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4d54188b1da46109fc7422a8edc4f539c4e5f93\"><code>a4d5418</code></a></td><td><code>Remove old comments in singular ring creation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b307cd0aa658b94dcf317a457f589a35a942f51c\"><code>b307cd0</code></a></td><td><code>Simplify cimport from singular.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd00aa122d2081d05a87c65d5ff2bcd44f6505a9\"><code>cd00aa1</code></a></td><td><code>Remove print debug statement in singular lib.</code></td></tr></table>\n",
    "created_at": "2016-09-01T10:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230005",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:310"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f9977989d427453644d9952ab8401cdd24127bd"><code>5f99779</code></a></td><td><code>Remove useless import.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d4ba4e5b3af25855e253b65e30ea1732ac7a47c"><code>1d4ba4e</code></a></td><td><code>Simplify verbosity for singular.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd3cd2fd67ac12011a442333273c5cadc24bfa56"><code>cd3cd2f</code></a></td><td><code>Remove print debug statement in polynomial.pyx.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4d54188b1da46109fc7422a8edc4f539c4e5f93"><code>a4d5418</code></a></td><td><code>Remove old comments in singular ring creation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b307cd0aa658b94dcf317a457f589a35a942f51c"><code>b307cd0</code></a></td><td><code>Simplify cimport from singular.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd00aa122d2081d05a87c65d5ff2bcd44f6505a9"><code>cd00aa1</code></a></td><td><code>Remove print debug statement in singular lib.</code></td></tr></table>




---

archive/issue_comments_230006.json:
```json
{
    "body": "<div id=\"comment:311\" align=\"right\">comment:311</div>\n\nI'm done for at least a couple of hours.\nSo feel free to play with the current branch.\nAnd pleas push any changes on the `public/singular4` branch.",
    "created_at": "2016-09-01T10:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230006",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:311" align="right">comment:311</div>

I'm done for at least a couple of hours.
So feel free to play with the current branch.
And pleas push any changes on the `public/singular4` branch.



---

archive/issue_comments_230007.json:
```json
{
    "body": "<div id=\"comment:312\" align=\"right\">comment:312</div>\n\nwith the new tarball, it complains about absent aclocal-1.13...\n\nSomething needs to be done with this. Normally speaking, you want to make tarballs using `make dist`, after running `./configure`, and not by hand. I'll try to go this route now, and see if this works. By right, it should not require any autotools then (of course one can remove stuff from the tarball, after it's done).\n\nProbably one just needs to run `automake --add-missing --copy` before making tarball.",
    "created_at": "2016-09-01T14:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230007",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:312" align="right">comment:312</div>

with the new tarball, it complains about absent aclocal-1.13...

Something needs to be done with this. Normally speaking, you want to make tarballs using `make dist`, after running `./configure`, and not by hand. I'll try to go this route now, and see if this works. By right, it should not require any autotools then (of course one can remove stuff from the tarball, after it's done).

Probably one just needs to run `automake --add-missing --copy` before making tarball.



---

archive/issue_comments_230008.json:
```json
{
    "body": "<div id=\"comment:313\" align=\"right\">comment:313</div>\n\nReplying to [@dimpase](#comment%3A312):\n> with the new tarball, it complains about absent aclocal-1.13...\n> \n> Something needs to be done with this. Normally speaking, you want to make tarballs using `make dist`, after running `./configure`, and not by hand. I'll try to go this route now, and see if this works. By right, it should not require any autotools then (of course one can remove stuff from the tarball, after it's done).\n\nIs this using the autotools package from #21047?",
    "created_at": "2016-09-01T14:17:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230008",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:313" align="right">comment:313</div>

Replying to [@dimpase](#comment%3A312):
> with the new tarball, it complains about absent aclocal-1.13...
> 
> Something needs to be done with this. Normally speaking, you want to make tarballs using `make dist`, after running `./configure`, and not by hand. I'll try to go this route now, and see if this works. By right, it should not require any autotools then (of course one can remove stuff from the tarball, after it's done).

Is this using the autotools package from #21047?



---

archive/issue_comments_230009.json:
```json
{
    "body": "<div id=\"comment:314\" align=\"right\">comment:314</div>\n\nit should not use any autotools while installing, at all. It's clearly something is not done properly while making tarball (by spkg-src).",
    "created_at": "2016-09-01T14:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230009",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:314" align="right">comment:314</div>

it should not use any autotools while installing, at all. It's clearly something is not done properly while making tarball (by spkg-src).



---

archive/issue_comments_230010.json:
```json
{
    "body": "<div id=\"comment:315\" align=\"right\">comment:315</div>\n\n>There was no reason to make the code more complicated, why was it done??? \n\nI changed the library loading code to annoy everyone ( just kidding ;-) ) \n\n``\n\n\n> Revert simpler old code to load Singular\n\nI disagree. \n\n\nPlease read my arguments first and reply to the arguments (or disprove them). @jdemeyer, If it was your code I changed and it hurts you. I'm sorry for that. Still, try to understand the arguments for the change and accept the change if you agree with the arguments.\n\n\nThe old (and current) failing message is \n\n```\nraise ImportError(\"cannot load libSINGULAR library\")\n```\n\nIn some situations this message gives no clue about the error caused a failing and even worse, is misleading:\n\nThe issue I ran into was while working on this upgrade, the loading of libSINGULAR failed, but I could for hours not figure out the cause. The library file was there,\nI was able to open it manually. The error message did mislead my thoughts in the wrong direction. The issue was that Singular changed the naming of `'libsingular.so'` to `'libSingular.so' ` (did you note the difference? ('s' vs 'S') and dlopen failed because sage tried to open a non-existing file!\n\nAlso, if we reach \n\n```\nif handle == NULL\n```\n\nit is legitimate to print for `_which_` file we failed to dlopen, because we try several different extensions (`\"so\", \"dylib\", \"dll\"`) in a loop!  Otherwise, by just looking at the error message we would have NO CLUE, for `_which_` file `dlopen` failed.  And they may exist all three of them in the same place.",
    "created_at": "2016-09-01T19:32:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230010",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:315" align="right">comment:315</div>

>There was no reason to make the code more complicated, why was it done??? 

I changed the library loading code to annoy everyone ( just kidding ;-) ) 

``


> Revert simpler old code to load Singular

I disagree. 


Please read my arguments first and reply to the arguments (or disprove them). @jdemeyer, If it was your code I changed and it hurts you. I'm sorry for that. Still, try to understand the arguments for the change and accept the change if you agree with the arguments.


The old (and current) failing message is 

```
raise ImportError("cannot load libSINGULAR library")
```

In some situations this message gives no clue about the error caused a failing and even worse, is misleading:

The issue I ran into was while working on this upgrade, the loading of libSINGULAR failed, but I could for hours not figure out the cause. The library file was there,
I was able to open it manually. The error message did mislead my thoughts in the wrong direction. The issue was that Singular changed the naming of `'libsingular.so'` to `'libSingular.so' ` (did you note the difference? ('s' vs 'S') and dlopen failed because sage tried to open a non-existing file!

Also, if we reach 

```
if handle == NULL
```

it is legitimate to print for `_which_` file we failed to dlopen, because we try several different extensions (`"so", "dylib", "dll"`) in a loop!  Otherwise, by just looking at the error message we would have NO CLUE, for `_which_` file `dlopen` failed.  And they may exist all three of them in the same place.



---

archive/issue_comments_230011.json:
```json
{
    "body": "<div id=\"comment:316\" align=\"right\">comment:316</div>\n\n> Purify enum for singular ring types.\n\nIf the comments are not well-formatted, incomplete or incorrect,\nit would be better to fix them rather than removing.\n\n(Have fun to guess by the names what they stand for)",
    "created_at": "2016-09-01T19:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230011",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:316" align="right">comment:316</div>

> Purify enum for singular ring types.

If the comments are not well-formatted, incomplete or incorrect,
it would be better to fix them rather than removing.

(Have fun to guess by the names what they stand for)



---

archive/issue_comments_230012.json:
```json
{
    "body": "<div id=\"comment:317\" align=\"right\">comment:317</div>\n\n> Remove print debug statement in singular lib\n\nIf I recall correctly, if Singular ring creation fails (with exception), \nthere is a fallback creating a sage ring, (sage catches the exception,\nand no exception is printed)\n\nSo my question is, how a developer should properly and easily detect, that \nSingular ring creation ended with an exception?",
    "created_at": "2016-09-01T19:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230012",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:317" align="right">comment:317</div>

> Remove print debug statement in singular lib

If I recall correctly, if Singular ring creation fails (with exception), 
there is a fallback creating a sage ring, (sage catches the exception,
and no exception is printed)

So my question is, how a developer should properly and easily detect, that 
Singular ring creation ended with an exception?



---

archive/issue_comments_230013.json:
```json
{
    "body": "<div id=\"comment:318\" align=\"right\">comment:318</div>\n\nReplying to [@dimpase](#comment%3A314):\n> it should not use any autotools while installing, at all. It's clearly something is not done properly while making tarball (by spkg-src).\n\n`spkg-src` just calls `autoreconf` which is the usual way to generate `configure` and `Makefile.in`.\nNot sure why running `configure` or `make` decides to rerun `autotools`.\nMaybe some timestamps issues after patching but we don't patch a lot, especially we do nothing to `configure` and `Makefile.in`, so...\nAnd IIRC I had no trace of `autotools` getting rerun on my setup, except when using `SAGE_DEBUG=yes` (which was already strange enough).",
    "created_at": "2016-09-01T20:19:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230013",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:318" align="right">comment:318</div>

Replying to [@dimpase](#comment%3A314):
> it should not use any autotools while installing, at all. It's clearly something is not done properly while making tarball (by spkg-src).

`spkg-src` just calls `autoreconf` which is the usual way to generate `configure` and `Makefile.in`.
Not sure why running `configure` or `make` decides to rerun `autotools`.
Maybe some timestamps issues after patching but we don't patch a lot, especially we do nothing to `configure` and `Makefile.in`, so...
And IIRC I had no trace of `autotools` getting rerun on my setup, except when using `SAGE_DEBUG=yes` (which was already strange enough).



---

archive/issue_comments_230014.json:
```json
{
    "body": "<div id=\"comment:319\" align=\"right\">comment:319</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A317):\n> > Remove print debug statement in singular lib\n\n> \n> If I recall correctly, if Singular ring creation fails (with exception), \n> there is a fallback creating a sage ring, (sage catches the exception,\n> and no exception is printed)\n> \n> So my question is, how a developer should properly and easily detect, that \n> Singular ring creation ended with an exception?\n\nIt's fine to have `print` statement during development, but I would say it should not be there in \"production\" code.",
    "created_at": "2016-09-01T20:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230014",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:319" align="right">comment:319</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A317):
> > Remove print debug statement in singular lib

> 
> If I recall correctly, if Singular ring creation fails (with exception), 
> there is a fallback creating a sage ring, (sage catches the exception,
> and no exception is printed)
> 
> So my question is, how a developer should properly and easily detect, that 
> Singular ring creation ended with an exception?

It's fine to have `print` statement during development, but I would say it should not be there in "production" code.



---

archive/issue_comments_230015.json:
```json
{
    "body": "<div id=\"comment:320\" align=\"right\">comment:320</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A316):\n> > Purify enum for singular ring types.\n\n> \n> If the comments are not well-formatted, incomplete or incorrect,\n> it would be better to fix them rather than removing.\n> \n> (Have fun to guess by the names what they stand for)\n\nComments are available here:\nhttps://github.com/Singular/Sources/blob/spielwiese/libpolys/coeffs/coeffs.h\n\nI took the easy solution of removing them form the Cython wrapper.",
    "created_at": "2016-09-01T20:23:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230015",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:320" align="right">comment:320</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A316):
> > Purify enum for singular ring types.

> 
> If the comments are not well-formatted, incomplete or incorrect,
> it would be better to fix them rather than removing.
> 
> (Have fun to guess by the names what they stand for)

Comments are available here:
https://github.com/Singular/Sources/blob/spielwiese/libpolys/coeffs/coeffs.h

I took the easy solution of removing them form the Cython wrapper.



---

archive/issue_comments_230016.json:
```json
{
    "body": "<div id=\"comment:321\" align=\"right\">comment:321</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A315):\n> \n> >There was no reason to make the code more complicated, why was it done??? \n\n> \n> I changed the library loading code to annoy everyone ( just kidding ;-) ) \n> \n> ``\n> \n> \n> > Revert simpler old code to load Singular\n\n> \n> I disagree. \n> \n> \n> Please read my arguments first and reply to the arguments (or disprove them). @jdemeyer, If it was your code I changed and it hurts you. I'm sorry for that. Still, try to understand the arguments for the change and accept the change if you agree with the arguments.\n> \n> \n> The old (and current) failing message is \n> \n> ```\n> raise ImportError(\"cannot load libSINGULAR library\")\n> ```\n> \n> In some situations this message gives no clue about the error caused a failing and even worse, is misleading:\n> \n> The issue I ran into was while working on this upgrade, the loading of libSINGULAR failed, but I could for hours not figure out the cause. The library file was there,\n> I was able to open it manually. The error message did mislead my thoughts in the wrong direction. The issue was that Singular changed the naming of `'libsingular.so'` to `'libSingular.so' ` (did you note the difference? ('s' vs 'S') and dlopen failed because sage tried to open a non-existing file!\n> \n> Also, if we reach \n> \n> ```\n> if handle == NULL\n> ```\n> \n> it is legitimate to print for `_which_` file we failed to dlopen, because we try several different extensions (`\"so\", \"dylib\", \"dll\"`) in a loop!  Otherwise, by just looking at the error message we would have NO CLUE, for `_which_` file `dlopen` failed.  And they may exist all three of them in the same place.\n> \n> \n> \n> \n> \n\nOk, so maybe we should put back a more verbose error message.",
    "created_at": "2016-09-01T20:24:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230016",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:321" align="right">comment:321</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A315):
> 
> >There was no reason to make the code more complicated, why was it done??? 

> 
> I changed the library loading code to annoy everyone ( just kidding ;-) ) 
> 
> ``
> 
> 
> > Revert simpler old code to load Singular

> 
> I disagree. 
> 
> 
> Please read my arguments first and reply to the arguments (or disprove them). @jdemeyer, If it was your code I changed and it hurts you. I'm sorry for that. Still, try to understand the arguments for the change and accept the change if you agree with the arguments.
> 
> 
> The old (and current) failing message is 
> 
> ```
> raise ImportError("cannot load libSINGULAR library")
> ```
> 
> In some situations this message gives no clue about the error caused a failing and even worse, is misleading:
> 
> The issue I ran into was while working on this upgrade, the loading of libSINGULAR failed, but I could for hours not figure out the cause. The library file was there,
> I was able to open it manually. The error message did mislead my thoughts in the wrong direction. The issue was that Singular changed the naming of `'libsingular.so'` to `'libSingular.so' ` (did you note the difference? ('s' vs 'S') and dlopen failed because sage tried to open a non-existing file!
> 
> Also, if we reach 
> 
> ```
> if handle == NULL
> ```
> 
> it is legitimate to print for `_which_` file we failed to dlopen, because we try several different extensions (`"so", "dylib", "dll"`) in a loop!  Otherwise, by just looking at the error message we would have NO CLUE, for `_which_` file `dlopen` failed.  And they may exist all three of them in the same place.
> 
> 
> 
> 
> 

Ok, so maybe we should put back a more verbose error message.



---

archive/issue_comments_230017.json:
```json
{
    "body": "<div id=\"comment:322\" align=\"right\">comment:322</div>\n\nReplying to [@jpflori](#comment%3A321):\n> Replying to [@sagetrac-jakobkroeker](#comment%3A315):\n> > \n> > >There was no reason to make the code more complicated, why was it done??? \n\n> > \n> > I changed the library loading code to annoy everyone ( just kidding ;-) ) \n> > \n> > ``\n> > \n> > \n> > > Revert simpler old code to load Singular\n\n> > \n> > I disagree. \n> > \n> > \n> > Please read my arguments first and reply to the arguments (or disprove them). @jdemeyer, If it was your code I changed and it hurts you. I'm sorry for that. Still, try to understand the arguments for the change and accept the change if you agree with the arguments.\n> > \n> > \n> > The old (and current) failing message is \n> > \n> > ```\n> > raise ImportError(\"cannot load libSINGULAR library\")\n> > ```\n> > \n> > In some situations this message gives no clue about the error caused a failing and even worse, is misleading:\n> > \n> > The issue I ran into was while working on this upgrade, the loading of libSINGULAR failed, but I could for hours not figure out the cause. The library file was there,\n> > I was able to open it manually. The error message did mislead my thoughts in the wrong direction. The issue was that Singular changed the naming of `'libsingular.so'` to `'libSingular.so' ` (did you note the difference? ('s' vs 'S') and dlopen failed because sage tried to open a non-existing file!\n> > \n> > Also, if we reach \n> > \n> > ```\n> > if handle == NULL\n> > ```\n> > \n> > it is legitimate to print for `_which_` file we failed to dlopen, because we try several different extensions (`\"so\", \"dylib\", \"dll\"`) in a loop!  Otherwise, by just looking at the error message we would have NO CLUE, for `_which_` file `dlopen` failed.  And they may exist all three of them in the same place.\n> > \n> > \n> > \n> > \n> > \n\n> Ok, so maybe we should put back a more verbose error message.\n\nAnd rather than trying three different extensions, just try the one corresponding to the underlying system.",
    "created_at": "2016-09-01T20:25:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230017",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:322" align="right">comment:322</div>

Replying to [@jpflori](#comment%3A321):
> Replying to [@sagetrac-jakobkroeker](#comment%3A315):
> > 
> > >There was no reason to make the code more complicated, why was it done??? 

> > 
> > I changed the library loading code to annoy everyone ( just kidding ;-) ) 
> > 
> > ``
> > 
> > 
> > > Revert simpler old code to load Singular

> > 
> > I disagree. 
> > 
> > 
> > Please read my arguments first and reply to the arguments (or disprove them). @jdemeyer, If it was your code I changed and it hurts you. I'm sorry for that. Still, try to understand the arguments for the change and accept the change if you agree with the arguments.
> > 
> > 
> > The old (and current) failing message is 
> > 
> > ```
> > raise ImportError("cannot load libSINGULAR library")
> > ```
> > 
> > In some situations this message gives no clue about the error caused a failing and even worse, is misleading:
> > 
> > The issue I ran into was while working on this upgrade, the loading of libSINGULAR failed, but I could for hours not figure out the cause. The library file was there,
> > I was able to open it manually. The error message did mislead my thoughts in the wrong direction. The issue was that Singular changed the naming of `'libsingular.so'` to `'libSingular.so' ` (did you note the difference? ('s' vs 'S') and dlopen failed because sage tried to open a non-existing file!
> > 
> > Also, if we reach 
> > 
> > ```
> > if handle == NULL
> > ```
> > 
> > it is legitimate to print for `_which_` file we failed to dlopen, because we try several different extensions (`"so", "dylib", "dll"`) in a loop!  Otherwise, by just looking at the error message we would have NO CLUE, for `_which_` file `dlopen` failed.  And they may exist all three of them in the same place.
> > 
> > 
> > 
> > 
> > 

> Ok, so maybe we should put back a more verbose error message.

And rather than trying three different extensions, just try the one corresponding to the underlying system.



---

archive/issue_comments_230018.json:
```json
{
    "body": "<div id=\"comment:323\" align=\"right\">comment:323</div>\n\n> It's fine to have print statement during development, but I would say it should not be there in \"production\" code. \n\nThats fine to remove the (outcommented) debug statements. \n\nMy question is just about if there is a better way to detect a failed singular ring creation  than printouts?.",
    "created_at": "2016-09-01T21:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230018",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:323" align="right">comment:323</div>

> It's fine to have print statement during development, but I would say it should not be there in "production" code. 

Thats fine to remove the (outcommented) debug statements. 

My question is just about if there is a better way to detect a failed singular ring creation  than printouts?.



---

archive/issue_comments_230019.json:
```json
{
    "body": "<div id=\"comment:324\" align=\"right\">comment:324</div>\n\nReplying to [@jpflori](#comment%3A320):\n> Replying to [@sagetrac-jakobkroeker](#comment%3A316):\n> > > Purify enum for singular ring types.\n\n> > \n> > If the comments are not well-formatted, incomplete or incorrect,\n> > it would be better to fix them rather than removing.\n> > \n\n> Comments are available here:\n> https://github.com/Singular/Sources/blob/spielwiese/libpolys/coeffs/coeffs.h\n> \n> I took the easy solution of removing them form the Cython wrapper.\n\nSure, there are some comments in `spielwiese/libpolys/coeffs/coeffs.h`,\nbut then the reader has to investigate (how did `_you_` find the `coeffs.h`?)\n\nAt least I would add in `decl.pxd` before the line `cdef enum n_coeffType:` something like \n\n```\n# see libpolys/coeffs/coeffs.h for reference\n```\nWhat do you think?\n\nNot that I did a better job, but do you agree, that several comments in `coeffs.h` related to  the `enum n_coeffType` are not really helpful? (=> we should improve them?)",
    "created_at": "2016-09-01T21:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230019",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:324" align="right">comment:324</div>

Replying to [@jpflori](#comment%3A320):
> Replying to [@sagetrac-jakobkroeker](#comment%3A316):
> > > Purify enum for singular ring types.

> > 
> > If the comments are not well-formatted, incomplete or incorrect,
> > it would be better to fix them rather than removing.
> > 

> Comments are available here:
> https://github.com/Singular/Sources/blob/spielwiese/libpolys/coeffs/coeffs.h
> 
> I took the easy solution of removing them form the Cython wrapper.

Sure, there are some comments in `spielwiese/libpolys/coeffs/coeffs.h`,
but then the reader has to investigate (how did `_you_` find the `coeffs.h`?)

At least I would add in `decl.pxd` before the line `cdef enum n_coeffType:` something like 

```
# see libpolys/coeffs/coeffs.h for reference
```
What do you think?

Not that I did a better job, but do you agree, that several comments in `coeffs.h` related to  the `enum n_coeffType` are not really helpful? (=> we should improve them?)



---

archive/issue_comments_230020.json:
```json
{
    "body": "<div id=\"comment:325\" align=\"right\">comment:325</div>\n\nReplying to [@dimpase](#comment%3A314):\n> it should not use any autotools while installing, at all. It's clearly something is not done properly while making tarball (by spkg-src).\n\nI give up, I don't understand quite what's going on. There is a `missing` script in `build-aux/`\nthat is called on `aclocal-<VERSION>`, where `<VERSION>` is the autotools version the tarball is made with.\nBut I don't know why it is there and how to disable it.",
    "created_at": "2016-09-01T22:07:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230020",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:325" align="right">comment:325</div>

Replying to [@dimpase](#comment%3A314):
> it should not use any autotools while installing, at all. It's clearly something is not done properly while making tarball (by spkg-src).

I give up, I don't understand quite what's going on. There is a `missing` script in `build-aux/`
that is called on `aclocal-<VERSION>`, where `<VERSION>` is the autotools version the tarball is made with.
But I don't know why it is there and how to disable it.



---

archive/issue_comments_230021.json:
```json
{
    "body": "<div id=\"comment:326\" align=\"right\">comment:326</div>\n\n> And rather than trying three different extensions, just try the one corresponding to the underlying system. \n\nNot quite sure, since I 'm not a Mac OS user, but it might be (or might be not) a problem on Mac OS. Are you familiar with Mac OS? \n\nIf I recall correctly, on Mac OS we might have both (\".so\" and \".dylib\") or only one of (\".so\" and \".dylib\")? Is that true??",
    "created_at": "2016-09-01T22:16:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230021",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:326" align="right">comment:326</div>

> And rather than trying three different extensions, just try the one corresponding to the underlying system. 

Not quite sure, since I 'm not a Mac OS user, but it might be (or might be not) a problem on Mac OS. Are you familiar with Mac OS? 

If I recall correctly, on Mac OS we might have both (".so" and ".dylib") or only one of (".so" and ".dylib")? Is that true??



---

archive/issue_comments_230022.json:
```json
{
    "body": "<div id=\"comment:327\" align=\"right\">comment:327</div>\n\nReplying to [@dimpase](#comment%3A325):\n> Replying to [@dimpase](#comment%3A314):\n> > it should not use any autotools while installing, at all. It's clearly something is not done properly while making tarball (by spkg-src).\n\n> \n> I give up, I don't understand quite what's going on. There is a `missing` script in `build-aux/`\n> that is called on `aclocal-<VERSION>`, where `<VERSION>` is the autotools version the tarball is made with.\n> But I don't know why it is there and how to disable it. \n\nWe could ask Jeroen or Jean-Pierre for help to package recent Singular,\n\n...or ask Hans Schoenemann(Singular head developer) for the Singular release timetable...",
    "created_at": "2016-09-01T22:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230022",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:327" align="right">comment:327</div>

Replying to [@dimpase](#comment%3A325):
> Replying to [@dimpase](#comment%3A314):
> > it should not use any autotools while installing, at all. It's clearly something is not done properly while making tarball (by spkg-src).

> 
> I give up, I don't understand quite what's going on. There is a `missing` script in `build-aux/`
> that is called on `aclocal-<VERSION>`, where `<VERSION>` is the autotools version the tarball is made with.
> But I don't know why it is there and how to disable it. 

We could ask Jeroen or Jean-Pierre for help to package recent Singular,

...or ask Hans Schoenemann(Singular head developer) for the Singular release timetable...



---

archive/issue_comments_230023.json:
```json
{
    "body": "<div id=\"comment:328\" align=\"right\">comment:328</div>\n\nthe following hack appears to stop that aclocal nonsense:\n\n```\n--- a/build/pkgs/singular/spkg-install\n+++ b/build/pkgs/singular/spkg-install\n@@ -65,6 +65,9 @@ remove_old_version()\n     rm -rf \"$SAGE_LOCAL/share/singular\"\n }\n \n+touch configure.ac aclocal.m4 configure Makefile.am Makefile.in\n+touch */configure.ac */aclocal.m4 */configure */Makefile.am */Makefile.in\n+\n config()\n {\n     # configure notes (dates from Singular 3.x, maybe outdated for 4.x):\n```\n\nwill do more tests on it, before pushing this change...",
    "created_at": "2016-09-01T23:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230023",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:328" align="right">comment:328</div>

the following hack appears to stop that aclocal nonsense:

```
--- a/build/pkgs/singular/spkg-install
+++ b/build/pkgs/singular/spkg-install
@@ -65,6 +65,9 @@ remove_old_version()
     rm -rf "$SAGE_LOCAL/share/singular"
 }
 
+touch configure.ac aclocal.m4 configure Makefile.am Makefile.in
+touch */configure.ac */aclocal.m4 */configure */Makefile.am */Makefile.in
+
 config()
 {
     # configure notes (dates from Singular 3.x, maybe outdated for 4.x):
```

will do more tests on it, before pushing this change...



---

archive/issue_comments_230024.json:
```json
{
    "body": "<div id=\"comment:329\" align=\"right\">comment:329</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A326):\n> > And rather than trying three different extensions, just try the one corresponding to the underlying system. \n\n> \n> Not quite sure, since I 'm not a Mac OS user, but it might be (or might be not) a problem on Mac OS. Are you familiar with Mac OS? \n> \n> If I recall correctly, on Mac OS we might have both (\".so\" and \".dylib\") or only one of (\".so\" and \".dylib\")? Is that true?? \n\nI can tell you if you confirm for me where I should look. When I look in `/Applications/sage-6.7/src/build/lib.macosx-10.9-x86_64-2.7/sage/libs/singular/` I find only `singular.so`. Do you know anywhere else we might put a library? (And is it likely anything would have changed since 6.7?",
    "created_at": "2016-09-02T00:13:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230024",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:329" align="right">comment:329</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A326):
> > And rather than trying three different extensions, just try the one corresponding to the underlying system. 

> 
> Not quite sure, since I 'm not a Mac OS user, but it might be (or might be not) a problem on Mac OS. Are you familiar with Mac OS? 
> 
> If I recall correctly, on Mac OS we might have both (".so" and ".dylib") or only one of (".so" and ".dylib")? Is that true?? 

I can tell you if you confirm for me where I should look. When I look in `/Applications/sage-6.7/src/build/lib.macosx-10.9-x86_64-2.7/sage/libs/singular/` I find only `singular.so`. Do you know anywhere else we might put a library? (And is it likely anything would have changed since 6.7?



---

archive/issue_comments_230025.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,17 @@\n **Lots** of stuff has changed in Singular 4.\n This is a big update.\n+\n Build system completely changed, and a lot of internal stuff.\n \n-The branch here is based on commit a070b84d whose message tells 4.0.3p3:\n+Upstream tarball at:\n+* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz\n+Modified tarball made with spkg-src at:\n+* http://www.infres.enst.fr/~flori/singular/singular-4.0.3p3.tar.bz2\n+\n+This corresponds to commit a070b84d whose message tells 4.0.3p3 and on which this branch was based:\n * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7\n \n-use the tarball at:\n-* http://perso.telecom-paristech.fr/~flori/singular/singular-4.0.3p3.tar.bz2\n-* or make your own tarball with\n+You can also make your own tarball based on this commit or another one with\n \n ```\n env SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src\n``````\n",
    "created_at": "2016-09-02T07:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230025",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,17 @@
 **Lots** of stuff has changed in Singular 4.
 This is a big update.
+
 Build system completely changed, and a lot of internal stuff.
 
-The branch here is based on commit a070b84d whose message tells 4.0.3p3:
+Upstream tarball at:
+* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz
+Modified tarball made with spkg-src at:
+* http://www.infres.enst.fr/~flori/singular/singular-4.0.3p3.tar.bz2
+
+This corresponds to commit a070b84d whose message tells 4.0.3p3 and on which this branch was based:
 * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7
 
-use the tarball at:
-* http://perso.telecom-paristech.fr/~flori/singular/singular-4.0.3p3.tar.bz2
-* or make your own tarball with
+You can also make your own tarball based on this commit or another one with
 
 ```
 env SINGULAR_GIT_COMMIT=a070b84d ./sage --sh build/pkgs/singular/spkg-src
``````




---

archive/issue_comments_230026.json:
```json
{
    "body": "<div id=\"comment:330\" align=\"right\">comment:330</div>\n\nI guess this one corresponds to the commit I usd:\n* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz\n\nI repackaged it, but now it also fails on my system complaining about `aclocal-1.15`...",
    "created_at": "2016-09-02T07:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230026",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:330" align="right">comment:330</div>

I guess this one corresponds to the commit I usd:
* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz

I repackaged it, but now it also fails on my system complaining about `aclocal-1.15`...



---

archive/issue_comments_230027.json:
```json
{
    "body": "<div id=\"comment:331\" align=\"right\">comment:331</div>\n\nAnd the upstream tarball is not autoreconfed in the `xalloc` directory so `SAGE_DEBUG=yes` won't work.",
    "created_at": "2016-09-02T07:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230027",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:331" align="right">comment:331</div>

And the upstream tarball is not autoreconfed in the `xalloc` directory so `SAGE_DEBUG=yes` won't work.



---

archive/issue_comments_230028.json:
```json
{
    "body": "<div id=\"comment:332\" align=\"right\">comment:332</div>\n\nI haven't been following this discussion closely, but if I were to test out this branch now should I expect it to work (for some value of \"work\"--at least build?)",
    "created_at": "2016-09-02T08:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230028",
    "user": "https://github.com/embray"
}
```

<div id="comment:332" align="right">comment:332</div>

I haven't been following this discussion closely, but if I were to test out this branch now should I expect it to work (for some value of "work"--at least build?)



---

archive/issue_comments_230029.json:
```json
{
    "body": "<div id=\"comment:333\" align=\"right\">comment:333</div>\n\nOn my system, `aclocal` first gets called in `resources` seemingly because it thinks that files generated by `libtool` in `../m4/` are older than `aclocal.m4`.",
    "created_at": "2016-09-02T08:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230029",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:333" align="right">comment:333</div>

On my system, `aclocal` first gets called in `resources` seemingly because it thinks that files generated by `libtool` in `../m4/` are older than `aclocal.m4`.



---

archive/issue_comments_230030.json:
```json
{
    "body": "<div id=\"comment:334\" align=\"right\">comment:334</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A315):\n> Please read my arguments first and reply to the arguments (or disprove them).\n\nIf there are arguments for that in one of the 315 comments above, sorry that I missed them :-)\n\n> @jdemeyer, If it was your code I changed and it hurts you. I'm sorry for that.\n\nI don't care whose code it was. Probably not mine.\n\n> The old (and current) failing message is \n> \n> ```\n> raise ImportError(\"cannot load libSINGULAR library\")\n> ```\n> \n> In some situations this message gives no clue about the error caused a failing and even worse, is misleading:\n\nImproving an error message is very good, but I don't see why you needed to complicate the whole code structure for that.\n\n> \n> Also, if we reach \n> \n> ```\n> if handle == NULL\n> ```\n\nIt wasn't clear to me whether it was even possible to reach that line.\n\nAnyway, this has been improved now (although the now-unused variables `dlerrormsg` and `libSingularFound` should still be removed).",
    "created_at": "2016-09-02T08:29:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230030",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:334" align="right">comment:334</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A315):
> Please read my arguments first and reply to the arguments (or disprove them).

If there are arguments for that in one of the 315 comments above, sorry that I missed them :-)

> @jdemeyer, If it was your code I changed and it hurts you. I'm sorry for that.

I don't care whose code it was. Probably not mine.

> The old (and current) failing message is 
> 
> ```
> raise ImportError("cannot load libSINGULAR library")
> ```
> 
> In some situations this message gives no clue about the error caused a failing and even worse, is misleading:

Improving an error message is very good, but I don't see why you needed to complicate the whole code structure for that.

> 
> Also, if we reach 
> 
> ```
> if handle == NULL
> ```

It wasn't clear to me whether it was even possible to reach that line.

Anyway, this has been improved now (although the now-unused variables `dlerrormsg` and `libSingularFound` should still be removed).



---

archive/issue_comments_230031.json:
```json
{
    "body": "<div id=\"comment:335\" align=\"right\">comment:335</div>\n\nNote that at minute precision these files have similar timestamps, altough at second precision `aclocal.m4` is actually older...",
    "created_at": "2016-09-02T08:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230031",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:335" align="right">comment:335</div>

Note that at minute precision these files have similar timestamps, altough at second precision `aclocal.m4` is actually older...



---

archive/issue_comments_230032.json:
```json
{
    "body": "<div id=\"comment:336\" align=\"right\">comment:336</div>\n\non 32-bit Ubuntu 14.04 I get, with the `touch` hack above, the following error while building sagelib:\n\n```\n[193/459] Cythonizing sage/libs/singular/singular.pyx\n\nError compiling Cython file:\n------------------------------------------------------------\n...\nfrom sage.libs.singular.decl cimport number, poly, ring, currRing\nfrom sage.libs.singular.decl cimport rChangeCurrRing, rCopy0, rComplete, rDelete, idInit\nfrom sage.libs.singular.decl cimport omAlloc0, omStrDup, omAlloc, omAlloc0Bin,  sip_sring_bin, rnumber_bin\nfrom sage.libs.singular.decl cimport ringorder_dp, ringorder_Dp, ringorder_lp, ringorder_rp, ringorder_ds, ringorder_Ds, ringorder_ls, ringorder_M, ringorder_C, ringorder_wp, ringorder_Wp, ringorder_ws, ringorder_Ws, ringorder_a\nfrom sage.libs.singular.decl cimport p_Copy, prCopyR\nfrom sage.libs.singular.decl cimport n_unknown,  n_Zp,  n_Q,   n_R,   n_GF,  n_long_R,  n_algExt,n_transExt,n_long_C,   n_Z,   n_Zn,  n_Znm,  n_Z2m,  n_CF\n^\n------------------------------------------------------------\n\nsage/libs/singular/ring.pyx:26:0: 'sage/libs/singular/decl/n_Zn.pxd' not found\n\nError compiling Cython file:\n------------------------------------------------------------\n...\nfrom sage.libs.singular.decl cimport number, poly, ring, currRing\nfrom sage.libs.singular.decl cimport rChangeCurrRing, rCopy0, rComplete, rDelete, idInit\nfrom sage.libs.singular.decl cimport omAlloc0, omStrDup, omAlloc, omAlloc0Bin,  sip_sring_bin, rnumber_bin\nfrom sage.libs.singular.decl cimport ringorder_dp, ringorder_Dp, ringorder_lp, ringorder_rp, ringorder_ds, ringorder_Ds, ringorder_ls, ringorder_M, ringorder_C, ringorder_wp, ringorder_Wp, ringorder_ws, ringorder_Ws, ringorder_a\nfrom sage.libs.singular.decl cimport p_Copy, prCopyR\n...\n```\n\nI don't know whether it's related to `touch` applied, or not.\n\nI can install the requested aclocal version and see whether without `touch` I get the same error...",
    "created_at": "2016-09-02T08:31:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230032",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:336" align="right">comment:336</div>

on 32-bit Ubuntu 14.04 I get, with the `touch` hack above, the following error while building sagelib:

```
[193/459] Cythonizing sage/libs/singular/singular.pyx

Error compiling Cython file:
------------------------------------------------------------
...
from sage.libs.singular.decl cimport number, poly, ring, currRing
from sage.libs.singular.decl cimport rChangeCurrRing, rCopy0, rComplete, rDelete, idInit
from sage.libs.singular.decl cimport omAlloc0, omStrDup, omAlloc, omAlloc0Bin,  sip_sring_bin, rnumber_bin
from sage.libs.singular.decl cimport ringorder_dp, ringorder_Dp, ringorder_lp, ringorder_rp, ringorder_ds, ringorder_Ds, ringorder_ls, ringorder_M, ringorder_C, ringorder_wp, ringorder_Wp, ringorder_ws, ringorder_Ws, ringorder_a
from sage.libs.singular.decl cimport p_Copy, prCopyR
from sage.libs.singular.decl cimport n_unknown,  n_Zp,  n_Q,   n_R,   n_GF,  n_long_R,  n_algExt,n_transExt,n_long_C,   n_Z,   n_Zn,  n_Znm,  n_Z2m,  n_CF
^
------------------------------------------------------------

sage/libs/singular/ring.pyx:26:0: 'sage/libs/singular/decl/n_Zn.pxd' not found

Error compiling Cython file:
------------------------------------------------------------
...
from sage.libs.singular.decl cimport number, poly, ring, currRing
from sage.libs.singular.decl cimport rChangeCurrRing, rCopy0, rComplete, rDelete, idInit
from sage.libs.singular.decl cimport omAlloc0, omStrDup, omAlloc, omAlloc0Bin,  sip_sring_bin, rnumber_bin
from sage.libs.singular.decl cimport ringorder_dp, ringorder_Dp, ringorder_lp, ringorder_rp, ringorder_ds, ringorder_Ds, ringorder_ls, ringorder_M, ringorder_C, ringorder_wp, ringorder_Wp, ringorder_ws, ringorder_Ws, ringorder_a
from sage.libs.singular.decl cimport p_Copy, prCopyR
...
```

I don't know whether it's related to `touch` applied, or not.

I can install the requested aclocal version and see whether without `touch` I get the same error...



---

archive/issue_comments_230033.json:
```json
{
    "body": "<div id=\"comment:337\" align=\"right\">comment:337</div>\n\n> If I recall correctly, on Mac OS we might have both (\".so\" and \".dylib\") or only one of (\".so\" and \".dylib\")? Is that true?? \n\nBoth exist for a different purpose. On OS X:\n\n- `.dylib` = dynamic library (needed for the usual case of linking libraries at build-time).\n\n- `.so` = loadable module (needed for run-time linking, for example Python extension modules).\n\nOn most other OSes, there is no difference between these.",
    "created_at": "2016-09-02T08:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230033",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:337" align="right">comment:337</div>

> If I recall correctly, on Mac OS we might have both (".so" and ".dylib") or only one of (".so" and ".dylib")? Is that true?? 

Both exist for a different purpose. On OS X:

- `.dylib` = dynamic library (needed for the usual case of linking libraries at build-time).

- `.so` = loadable module (needed for run-time linking, for example Python extension modules).

On most other OSes, there is no difference between these.



---

archive/issue_comments_230034.json:
```json
{
    "body": "<div id=\"comment:338\" align=\"right\">comment:338</div>\n\nReplying to [@dimpase](#comment%3A336):\n> on 32-bit Ubuntu 14.04 I get, with the `touch` hack above, the following error while building sagelib:\n> \n> ```\n> [193/459] Cythonizing sage/libs/singular/singular.pyx\n> \n> Error compiling Cython file:\n> ------------------------------------------------------------\n> ...\n> from sage.libs.singular.decl cimport number, poly, ring, currRing\n> from sage.libs.singular.decl cimport rChangeCurrRing, rCopy0, rComplete, rDelete, idInit\n> from sage.libs.singular.decl cimport omAlloc0, omStrDup, omAlloc, omAlloc0Bin,  sip_sring_bin, rnumber_bin\n> from sage.libs.singular.decl cimport ringorder_dp, ringorder_Dp, ringorder_lp, ringorder_rp, ringorder_ds, ringorder_Ds, ringorder_ls, ringorder_M, ringorder_C, ringorder_wp, ringorder_Wp, ringorder_ws, ringorder_Ws, ringorder_a\n> from sage.libs.singular.decl cimport p_Copy, prCopyR\n> from sage.libs.singular.decl cimport n_unknown,  n_Zp,  n_Q,   n_R,   n_GF,  n_long_R,  n_algExt,n_transExt,n_long_C,   n_Z,   n_Zn,  n_Znm,  n_Z2m,  n_CF\n> ^\n> ------------------------------------------------------------\n> \n> sage/libs/singular/ring.pyx:26:0: 'sage/libs/singular/decl/n_Zn.pxd' not found\n> \n> Error compiling Cython file:\n> ------------------------------------------------------------\n> ...\n> from sage.libs.singular.decl cimport number, poly, ring, currRing\n> from sage.libs.singular.decl cimport rChangeCurrRing, rCopy0, rComplete, rDelete, idInit\n> from sage.libs.singular.decl cimport omAlloc0, omStrDup, omAlloc, omAlloc0Bin,  sip_sring_bin, rnumber_bin\n> from sage.libs.singular.decl cimport ringorder_dp, ringorder_Dp, ringorder_lp, ringorder_rp, ringorder_ds, ringorder_Ds, ringorder_ls, ringorder_M, ringorder_C, ringorder_wp, ringorder_Wp, ringorder_ws, ringorder_Ws, ringorder_a\n> from sage.libs.singular.decl cimport p_Copy, prCopyR\n> ...\n> ```\n> \n> I don't know whether it's related to `touch` applied, or not.\n> \n\nNope, I must have screwed up when removing the comments in the enumeration.\n\n> I can install the requested aclocal version and see whether without `touch` I get the same error...\n\nThats not necessary, we cannot get away with only a `touch` anyway because of `xalloc`.\nI'll rerun autoreconf on my side to get proper timestamps in all folders...",
    "created_at": "2016-09-02T08:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230034",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:338" align="right">comment:338</div>

Replying to [@dimpase](#comment%3A336):
> on 32-bit Ubuntu 14.04 I get, with the `touch` hack above, the following error while building sagelib:
> 
> ```
> [193/459] Cythonizing sage/libs/singular/singular.pyx
> 
> Error compiling Cython file:
> ------------------------------------------------------------
> ...
> from sage.libs.singular.decl cimport number, poly, ring, currRing
> from sage.libs.singular.decl cimport rChangeCurrRing, rCopy0, rComplete, rDelete, idInit
> from sage.libs.singular.decl cimport omAlloc0, omStrDup, omAlloc, omAlloc0Bin,  sip_sring_bin, rnumber_bin
> from sage.libs.singular.decl cimport ringorder_dp, ringorder_Dp, ringorder_lp, ringorder_rp, ringorder_ds, ringorder_Ds, ringorder_ls, ringorder_M, ringorder_C, ringorder_wp, ringorder_Wp, ringorder_ws, ringorder_Ws, ringorder_a
> from sage.libs.singular.decl cimport p_Copy, prCopyR
> from sage.libs.singular.decl cimport n_unknown,  n_Zp,  n_Q,   n_R,   n_GF,  n_long_R,  n_algExt,n_transExt,n_long_C,   n_Z,   n_Zn,  n_Znm,  n_Z2m,  n_CF
> ^
> ------------------------------------------------------------
> 
> sage/libs/singular/ring.pyx:26:0: 'sage/libs/singular/decl/n_Zn.pxd' not found
> 
> Error compiling Cython file:
> ------------------------------------------------------------
> ...
> from sage.libs.singular.decl cimport number, poly, ring, currRing
> from sage.libs.singular.decl cimport rChangeCurrRing, rCopy0, rComplete, rDelete, idInit
> from sage.libs.singular.decl cimport omAlloc0, omStrDup, omAlloc, omAlloc0Bin,  sip_sring_bin, rnumber_bin
> from sage.libs.singular.decl cimport ringorder_dp, ringorder_Dp, ringorder_lp, ringorder_rp, ringorder_ds, ringorder_Ds, ringorder_ls, ringorder_M, ringorder_C, ringorder_wp, ringorder_Wp, ringorder_ws, ringorder_Ws, ringorder_a
> from sage.libs.singular.decl cimport p_Copy, prCopyR
> ...
> ```
> 
> I don't know whether it's related to `touch` applied, or not.
> 

Nope, I must have screwed up when removing the comments in the enumeration.

> I can install the requested aclocal version and see whether without `touch` I get the same error...

Thats not necessary, we cannot get away with only a `touch` anyway because of `xalloc`.
I'll rerun autoreconf on my side to get proper timestamps in all folders...



---

archive/issue_comments_230035.json:
```json
{
    "body": "<div id=\"comment:339\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6dee3c4a86a864952d164b7efa00c128e2b83cc\"><code>d6dee3c</code></a></td><td><code>Fix enum in singular ring types.</code></td></tr></table>\n",
    "created_at": "2016-09-02T08:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230035",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:339"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6dee3c4a86a864952d164b7efa00c128e2b83cc"><code>d6dee3c</code></a></td><td><code>Fix enum in singular ring types.</code></td></tr></table>




---

archive/issue_comments_230036.json:
```json
{
    "body": "Changed commit from **[`cd00aa1`](https://github.com/sagemath/sagetrac-mirror/commit/cd00aa122d2081d05a87c65d5ff2bcd44f6505a9)** to **[`d6dee3c`](https://github.com/sagemath/sagetrac-mirror/commit/d6dee3c4a86a864952d164b7efa00c128e2b83cc)**",
    "created_at": "2016-09-02T08:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230036",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cd00aa1`](https://github.com/sagemath/sagetrac-mirror/commit/cd00aa122d2081d05a87c65d5ff2bcd44f6505a9)** to **[`d6dee3c`](https://github.com/sagemath/sagetrac-mirror/commit/d6dee3c4a86a864952d164b7efa00c128e2b83cc)**



---

archive/issue_comments_230037.json:
```json
{
    "body": "<div id=\"comment:340\" align=\"right\">comment:340</div>\n\nReplying to [@sagetrac-git](#comment%3A339):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6dee3c4a86a864952d164b7efa00c128e2b83cc\"><code>d6dee3c</code></a></td><td><code>Fix enum in singular ring types.</code></td></tr></table>\n\nOK, this helps to get further; the latest error on 32-bit Ubuntu is\n\n```\n[149/444] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/dima/sage/dev/sage/local/include -I/home/dima/sage/dev/sage/local/include/python2.7 -I/home/dima/sage/dev/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/dima/sage/dev/sage/src -I/home/dima/sage/dev/sage/src/sage/ext -I/home/dima/sage/dev/sage/src/build/cythonized -I/home/dima/sage/dev/sage/src/build/cythonized/sage/ext -I/home/dima/sage/dev/sage/local/include/python2.7 -c /home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/ring.cpp -o build/temp.linux-i686-2.7/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/ring.o -fno-strict-aliasing -fno-tree-copyrename\nerror: command 'gcc' failed with exit status 1\n/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/polynomial.cpp: In function \u2018long int __pyx_f_4sage_4libs_8singular_10polynomial_singular_polynomial_deg(polyrec*, polyrec*, ip_sring*)\u2019:\n/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/polynomial.cpp:6028:7: warning: \u2018__pyx_v_i\u2019 may be used uninitialized in this function [-Wmaybe-uninitialized]\n   int __pyx_v_i;\n       ^\nmake[3]: *** [sage] Error 1\n```\nIt might be that gcc is too old, it uses gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.3).\n\nShould I rather build Sage's gcc?",
    "created_at": "2016-09-02T09:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230037",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:340" align="right">comment:340</div>

Replying to [@sagetrac-git](#comment%3A339):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6dee3c4a86a864952d164b7efa00c128e2b83cc"><code>d6dee3c</code></a></td><td><code>Fix enum in singular ring types.</code></td></tr></table>

OK, this helps to get further; the latest error on 32-bit Ubuntu is

```
[149/444] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/dima/sage/dev/sage/local/include -I/home/dima/sage/dev/sage/local/include/python2.7 -I/home/dima/sage/dev/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/dima/sage/dev/sage/src -I/home/dima/sage/dev/sage/src/sage/ext -I/home/dima/sage/dev/sage/src/build/cythonized -I/home/dima/sage/dev/sage/src/build/cythonized/sage/ext -I/home/dima/sage/dev/sage/local/include/python2.7 -c /home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/ring.cpp -o build/temp.linux-i686-2.7/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/ring.o -fno-strict-aliasing -fno-tree-copyrename
error: command 'gcc' failed with exit status 1
/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/polynomial.cpp: In function ‘long int __pyx_f_4sage_4libs_8singular_10polynomial_singular_polynomial_deg(polyrec*, polyrec*, ip_sring*)’:
/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/polynomial.cpp:6028:7: warning: ‘__pyx_v_i’ may be used uninitialized in this function [-Wmaybe-uninitialized]
   int __pyx_v_i;
       ^
make[3]: *** [sage] Error 1
```
It might be that gcc is too old, it uses gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.3).

Should I rather build Sage's gcc?



---

archive/issue_comments_230038.json:
```json
{
    "body": "<div id=\"comment:341\" align=\"right\">comment:341</div>\n\nReplying to [@jpflori](#comment%3A338):\n> > I can install the requested aclocal version and see whether without `touch` I get the same error...\n\n> Thats not necessary, we cannot get away with only a `touch` anyway because of `xalloc`.\n> I'll rerun autoreconf on my side to get proper timestamps in all folders...\n\nI do touch stuff in `*/` too, not only in top level.\n(probably `*` is an overkill, but it works).\n \nIndeed, I first tried to touch the top level only, it went a bit further, entered `resources/`, and complained from there instead.",
    "created_at": "2016-09-02T09:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230038",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:341" align="right">comment:341</div>

Replying to [@jpflori](#comment%3A338):
> > I can install the requested aclocal version and see whether without `touch` I get the same error...

> Thats not necessary, we cannot get away with only a `touch` anyway because of `xalloc`.
> I'll rerun autoreconf on my side to get proper timestamps in all folders...

I do touch stuff in `*/` too, not only in top level.
(probably `*` is an overkill, but it works).
 
Indeed, I first tried to touch the top level only, it went a bit further, entered `resources/`, and complained from there instead.



---

archive/issue_comments_230039.json:
```json
{
    "body": "<div id=\"comment:342\" align=\"right\">comment:342</div>\n\nOne also needs to `touch [*/]_config.h.in` in order to prevent autoheader` invokation...\nI'll modify the `spkg-src` script to:\n* use the upstream tarball,\n* autoreconf in xalloc,\n* touch all files.",
    "created_at": "2016-09-02T09:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230039",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:342" align="right">comment:342</div>

One also needs to `touch [*/]_config.h.in` in order to prevent autoheader` invokation...
I'll modify the `spkg-src` script to:
* use the upstream tarball,
* autoreconf in xalloc,
* touch all files.



---

archive/issue_comments_230040.json:
```json
{
    "body": "<div id=\"comment:343\" align=\"right\">comment:343</div>\n\nReplying to [@dimpase](#comment%3A340):\n> OK, this helps to get further; the latest error on 32-bit Ubuntu is\n\nWhat's the error message? (it's not in the piece that you quoted)",
    "created_at": "2016-09-02T09:45:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230040",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:343" align="right">comment:343</div>

Replying to [@dimpase](#comment%3A340):
> OK, this helps to get further; the latest error on 32-bit Ubuntu is

What's the error message? (it's not in the piece that you quoted)



---

archive/issue_comments_230041.json:
```json
{
    "body": "<div id=\"comment:344\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8362a9c233f198d6d97dc22d16d09c47fd431c8\"><code>f8362a9</code></a></td><td><code>Hopefully a singular tarball not invoking autostuff.</code></td></tr></table>\n",
    "created_at": "2016-09-02T10:29:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230041",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:344"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8362a9c233f198d6d97dc22d16d09c47fd431c8"><code>f8362a9</code></a></td><td><code>Hopefully a singular tarball not invoking autostuff.</code></td></tr></table>




---

archive/issue_comments_230042.json:
```json
{
    "body": "Changed commit from **[`d6dee3c`](https://github.com/sagemath/sagetrac-mirror/commit/d6dee3c4a86a864952d164b7efa00c128e2b83cc)** to **[`f8362a9`](https://github.com/sagemath/sagetrac-mirror/commit/f8362a9c233f198d6d97dc22d16d09c47fd431c8)**",
    "created_at": "2016-09-02T10:29:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230042",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d6dee3c`](https://github.com/sagemath/sagetrac-mirror/commit/d6dee3c4a86a864952d164b7efa00c128e2b83cc)** to **[`f8362a9`](https://github.com/sagemath/sagetrac-mirror/commit/f8362a9c233f198d6d97dc22d16d09c47fd431c8)**



---

archive/issue_comments_230043.json:
```json
{
    "body": "<div id=\"comment:345\" align=\"right\">comment:345</div>\n\nReplying to [@jdemeyer](#comment%3A343):\n> Replying to [@dimpase](#comment%3A340):\n> > OK, this helps to get further; the latest error on 32-bit Ubuntu is\n\n> \n> What's the error message? (it's not in the piece that you quoted)\n\noops, sorry... please see `err.log` in attachments to this ticket",
    "created_at": "2016-09-02T10:30:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230043",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:345" align="right">comment:345</div>

Replying to [@jdemeyer](#comment%3A343):
> Replying to [@dimpase](#comment%3A340):
> > OK, this helps to get further; the latest error on 32-bit Ubuntu is

> 
> What's the error message? (it's not in the piece that you quoted)

oops, sorry... please see `err.log` in attachments to this ticket



---

archive/issue_comments_230044.json:
```json
{
    "body": "<div id=\"comment:346\" align=\"right\">comment:346</div>\n\nOk reuploaded a new tarball (same address).\nPlease test.\nNote that I finally did:\n* use upstream 4.0.3p3\n* autoreconf\n* autoreconf in xalloc\n* touch files\n\nIf I only autoreconfed xalloc, then libtool complained about different versions so I autoreconfed evrything then xalloc.\n(Yes, I know I could build my own autotools to get matching versions but thats more time consuming.)",
    "created_at": "2016-09-02T10:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230044",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:346" align="right">comment:346</div>

Ok reuploaded a new tarball (same address).
Please test.
Note that I finally did:
* use upstream 4.0.3p3
* autoreconf
* autoreconf in xalloc
* touch files

If I only autoreconfed xalloc, then libtool complained about different versions so I autoreconfed evrything then xalloc.
(Yes, I know I could build my own autotools to get matching versions but thats more time consuming.)



---

archive/issue_comments_230045.json:
```json
{
    "body": "<div id=\"comment:347\" align=\"right\">comment:347</div>\n\nthe link to the new tarball is not working",
    "created_at": "2016-09-02T10:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230045",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:347" align="right">comment:347</div>

the link to the new tarball is not working



---

archive/issue_comments_230046.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n Upstream tarball at:\n * http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz\n Modified tarball made with spkg-src at:\n-* http://www.infres.enst.fr/~flori/singular/singular-4.0.3p3.tar.bz2\n+* http://www.infres.enst.fr/~flori/singular-4.0.3p3.tar.bz2\n \n This corresponds to commit a070b84d whose message tells 4.0.3p3 and on which this branch was based:\n * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7\n``````\n",
    "created_at": "2016-09-02T11:28:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230046",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 Upstream tarball at:
 * http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz
 Modified tarball made with spkg-src at:
-* http://www.infres.enst.fr/~flori/singular/singular-4.0.3p3.tar.bz2
+* http://www.infres.enst.fr/~flori/singular-4.0.3p3.tar.bz2
 
 This corresponds to commit a070b84d whose message tells 4.0.3p3 and on which this branch was based:
 * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7
``````




---

archive/issue_comments_230047.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n Upstream tarball at:\n * http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz\n Modified tarball made with spkg-src at:\n-* http://www.infres.enst.fr/~flori/singular-4.0.3p3.tar.bz2\n+* http://perso.telecom-paristech.fr/~flori/singular-4.0.3p3.tar.bz2\n \n This corresponds to commit a070b84d whose message tells 4.0.3p3 and on which this branch was based:\n * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7\n``````\n",
    "created_at": "2016-09-02T11:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230047",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 Upstream tarball at:
 * http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz
 Modified tarball made with spkg-src at:
-* http://www.infres.enst.fr/~flori/singular-4.0.3p3.tar.bz2
+* http://perso.telecom-paristech.fr/~flori/singular-4.0.3p3.tar.bz2
 
 This corresponds to commit a070b84d whose message tells 4.0.3p3 and on which this branch was based:
 * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7
``````




---

archive/issue_comments_230048.json:
```json
{
    "body": "<div id=\"comment:350\" align=\"right\">comment:350</div>\n\nShould be ok now.",
    "created_at": "2016-09-02T11:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230048",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:350" align="right">comment:350</div>

Should be ok now.



---

archive/issue_comments_230049.json:
```json
{
    "body": "<div id=\"comment:351\" align=\"right\">comment:351</div>\n\nReplying to [@jpflori](#comment%3A350):\n> Should be ok now.\n\nAs far as `aclocal` & Co. problem is concerned, it's fixed now, thanks.",
    "created_at": "2016-09-02T11:39:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230049",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:351" align="right">comment:351</div>

Replying to [@jpflori](#comment%3A350):
> Should be ok now.

As far as `aclocal` & Co. problem is concerned, it's fixed now, thanks.



---

archive/issue_comments_230050.json:
```json
{
    "body": "<div id=\"comment:352\" align=\"right\">comment:352</div>\n\nCan you also try with `SAGE_DEBUG=yes` ?",
    "created_at": "2016-09-02T12:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230050",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:352" align="right">comment:352</div>

Can you also try with `SAGE_DEBUG=yes` ?



---

archive/issue_comments_230051.json:
```json
{
    "body": "<div id=\"comment:353\" align=\"right\">comment:353</div>\n\nI now have another error, on a 64-bit machine with gcc 6.1.1:\n\n```\n[dochtml] /home/dima/Sage/sage/local/bin/python: cannot load libSINGULAR library; 'sage_setup.docbuild' is a package and cannot be directly executed\nmake[2]: *** [Makefile:1039: doc-html] Error 1\n```\nthis is even after `make distclean`.\nNo idea what it is and where it really comes from. `make build` completes, but Sage crashes on startup. (in crash report libSINGULAR is also mentioned). I'll attach it in a moment here.",
    "created_at": "2016-09-02T13:11:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230051",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:353" align="right">comment:353</div>

I now have another error, on a 64-bit machine with gcc 6.1.1:

```
[dochtml] /home/dima/Sage/sage/local/bin/python: cannot load libSINGULAR library; 'sage_setup.docbuild' is a package and cannot be directly executed
make[2]: *** [Makefile:1039: doc-html] Error 1
```
this is even after `make distclean`.
No idea what it is and where it really comes from. `make build` completes, but Sage crashes on startup. (in crash report libSINGULAR is also mentioned). I'll attach it in a moment here.



---

archive/issue_comments_230052.json:
```json
{
    "body": "<div id=\"comment:354\" align=\"right\">comment:354</div>\n\nAttachment: **[Sage_crash_report.txt](https://github.com/sagemath/sage/files/ticket17254/Sage_crash_report.txt)**\n\nI bet it's one of the latest \"simplifying\"/\"cleaning up\" commits that is to blame.",
    "created_at": "2016-09-02T13:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230052",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:354" align="right">comment:354</div>

Attachment: **[Sage_crash_report.txt](https://github.com/sagemath/sage/files/ticket17254/Sage_crash_report.txt)**

I bet it's one of the latest "simplifying"/"cleaning up" commits that is to blame.



---

archive/issue_comments_230053.json:
```json
{
    "body": "Changed commit from **[`f8362a9`](https://github.com/sagemath/sagetrac-mirror/commit/f8362a9c233f198d6d97dc22d16d09c47fd431c8)** to **[`9a99f2c`](https://github.com/sagemath/sagetrac-mirror/commit/9a99f2c4b5666aa5a37e396f10ac039d647a5c09)**",
    "created_at": "2016-09-02T14:07:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230053",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f8362a9`](https://github.com/sagemath/sagetrac-mirror/commit/f8362a9c233f198d6d97dc22d16d09c47fd431c8)** to **[`9a99f2c`](https://github.com/sagemath/sagetrac-mirror/commit/9a99f2c4b5666aa5a37e396f10ac039d647a5c09)**



---

archive/issue_comments_230054.json:
```json
{
    "body": "<div id=\"comment:355\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a99f2c4b5666aa5a37e396f10ac039d647a5c09\"><code>9a99f2c</code></a></td><td><code>Singular, not singular!</code></td></tr></table>\n",
    "created_at": "2016-09-02T14:07:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230054",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:355"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a99f2c4b5666aa5a37e396f10ac039d647a5c09"><code>9a99f2c</code></a></td><td><code>Singular, not singular!</code></td></tr></table>




---

archive/issue_comments_230055.json:
```json
{
    "body": "<div id=\"comment:356\" align=\"right\">comment:356</div>\n\nReplying to [@sagetrac-git](#comment%3A355):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a99f2c4b5666aa5a37e396f10ac039d647a5c09\"><code>9a99f2c</code></a></td><td><code>Singular, not singular!</code></td></tr></table>\n\nthis fixes a typo in 34960ee. Now Sage starts.",
    "created_at": "2016-09-02T14:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230055",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:356" align="right">comment:356</div>

Replying to [@sagetrac-git](#comment%3A355):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a99f2c4b5666aa5a37e396f10ac039d647a5c09"><code>9a99f2c</code></a></td><td><code>Singular, not singular!</code></td></tr></table>

this fixes a typo in 34960ee. Now Sage starts.



---

archive/issue_comments_230056.json:
```json
{
    "body": "<div id=\"comment:357\" align=\"right\">comment:357</div>\n\nReplying to [@jdemeyer](#comment%3A334):\n> Replying to [@sagetrac-jakobkroeker](#comment%3A315):\n> Anyway, this (remark: loading libSINGULAR) has been improved now  (although the now-unused variables `dlerrormsg` and `libSingularFound` should still be removed).\n\n``` \n\n```\n\nNope, \nmy changes were just reverted\nand now Dima had fun with the issue  (see [comment_315](#comment%3A315) ):  \n\n```\n```\n\nDima faced the old error message ( see [comment_353](#comment%3A353) )\n\n```\n[dochtml] /home/dima/Sage/sage/local/bin/python: cannot load libSINGULAR library; 'sage_setup.docbuild' is a package and cannot be directly executed\nmake[2]: *** [Makefile:1039: doc-html] Error 1\n```\n\nHe comments the error:\n\n```\n No idea what it is and where it really comes from\n```\n\nFinally he was able to fix it ([comment_356](#comment%3A356) )",
    "created_at": "2016-09-02T19:12:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230056",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:357" align="right">comment:357</div>

Replying to [@jdemeyer](#comment%3A334):
> Replying to [@sagetrac-jakobkroeker](#comment%3A315):
> Anyway, this (remark: loading libSINGULAR) has been improved now  (although the now-unused variables `dlerrormsg` and `libSingularFound` should still be removed).

``` 

```

Nope, 
my changes were just reverted
and now Dima had fun with the issue  (see [comment_315](#comment%3A315) ):  

```
```

Dima faced the old error message ( see [comment_353](#comment%3A353) )

```
[dochtml] /home/dima/Sage/sage/local/bin/python: cannot load libSINGULAR library; 'sage_setup.docbuild' is a package and cannot be directly executed
make[2]: *** [Makefile:1039: doc-html] Error 1
```

He comments the error:

```
 No idea what it is and where it really comes from
```

Finally he was able to fix it ([comment_356](#comment%3A356) )



---

archive/issue_comments_230057.json:
```json
{
    "body": "<div id=\"comment:358\" align=\"right\">comment:358</div>\n\nstill failing on 32-bit Ubuntu 14.04 with gcc 4.8.4",
    "created_at": "2016-09-03T08:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230057",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:358" align="right">comment:358</div>

still failing on 32-bit Ubuntu 14.04 with gcc 4.8.4



---

archive/issue_comments_230058.json:
```json
{
    "body": "<div id=\"comment:359\" align=\"right\">comment:359</div>\n\nReplying to [@jpflori](#comment%3A352):\n> Can you also try with `SAGE_DEBUG=yes` ?\n\nthis seems to work (the package building without aclocal-1.15 installed); whether it works is another question.",
    "created_at": "2016-09-03T13:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230058",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:359" align="right">comment:359</div>

Replying to [@jpflori](#comment%3A352):
> Can you also try with `SAGE_DEBUG=yes` ?

this seems to work (the package building without aclocal-1.15 installed); whether it works is another question.



---

archive/issue_comments_230059.json:
```json
{
    "body": "<div id=\"comment:360\" align=\"right\">comment:360</div>\n\nReplying to [@dimpase](#comment%3A358):\n> still failing on 32-bit Ubuntu 14.04 with gcc 4.8.4\n\nWhen you get an error during building the Sage library, please do\n\n```sh\nenv SAGE_NUM_THREADS=1 ./sage -b\n```\nand post the log of *that*.",
    "created_at": "2016-09-03T22:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230059",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:360" align="right">comment:360</div>

Replying to [@dimpase](#comment%3A358):
> still failing on 32-bit Ubuntu 14.04 with gcc 4.8.4

When you get an error during building the Sage library, please do

```sh
env SAGE_NUM_THREADS=1 ./sage -b
```
and post the log of *that*.



---

archive/issue_comments_230060.json:
```json
{
    "body": "<div id=\"comment:361\" align=\"right\">comment:361</div>\n\nI'm getting:\n\n```\nsage -t --long --warn-long 99.6 src/sage/schemes/curves/affine_curve.py\n**********************************************************************\nFile \"src/sage/schemes/curves/affine_curve.py\", line 494, in sage.schemes.curves.affine_curve.AffineCurve.resolution_of_singularities\nFailed example:\n    C.resolution_of_singularities(extend=True)[0] # long time (2 seconds)\nExpected:\n    (Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by\n    24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),\n     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by\n     24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1,\n     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by\n     8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)\nGot:\n    (Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),\n     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1,\n     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)\n**********************************************************************\n1 item had failures:\n   1 of  23 in sage.schemes.curves.affine_curve.AffineCurve.resolution_of_singularities\n    [195 tests, 1 failure, 29.15 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 99.6 src/sage/schemes/curves/affine_curve.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\n---\n\nJust in case anybody wonders why Singular suddenly builds that fast:\n\n```\n if [ \"x$SAGE_DEBUG\" = \"xyes\" ]; then\n     ...\n-else\n-    WITH_DEBUG=\"--without-debug\"\n-    ENABLE_DEBUGOUTPUT=\"--disable-debugoutput\"\n-    \n-    # By default, parts of Singular are compiled with -O2 and parts\n-    # with -O3. If we do set any CFLAGS, this always overrides the\n-    # default CFLAGS set by upstream. In order to be compatible, we\n-    # set the optimization to -O2.\n-    # Increasing the optimization level to -O3 has caused various\n-    # problems in the past either with specific compilers or on specific\n-    # platforms.\n-    OPTIMIZATION_FLAGS=\"-O2\"\n-    \n-    CFLAGS=\"$OPTIMIZATION_FLAGS -g $CFLAGS\"\n-    CXXFLAGS=\"$OPTIMIZATION_FLAGS -g $CXXFLAGS\"\n fi\n```\nand\n\n```\nchecking whether build environment is sane... yes\nconfigure: WARNING: Please note that we set empty defaults for `CFLAGS' and `CXXFLAGS' (instead of `-g -O')\nchecking whether C compiler accepts ... yes\n```\n(One of seven instances.)",
    "created_at": "2016-09-04T00:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230060",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:361" align="right">comment:361</div>

I'm getting:

```
sage -t --long --warn-long 99.6 src/sage/schemes/curves/affine_curve.py
**********************************************************************
File "src/sage/schemes/curves/affine_curve.py", line 494, in sage.schemes.curves.affine_curve.AffineCurve.resolution_of_singularities
Failed example:
    C.resolution_of_singularities(extend=True)[0] # long time (2 seconds)
Expected:
    (Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by
    24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),
     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by
     24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1,
     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by
     8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)
Got:
    (Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),
     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1,
     Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)
**********************************************************************
1 item had failures:
   1 of  23 in sage.schemes.curves.affine_curve.AffineCurve.resolution_of_singularities
    [195 tests, 1 failure, 29.15 s]
----------------------------------------------------------------------
sage -t --long --warn-long 99.6 src/sage/schemes/curves/affine_curve.py  # 1 doctest failed
----------------------------------------------------------------------
```

---

Just in case anybody wonders why Singular suddenly builds that fast:

```
 if [ "x$SAGE_DEBUG" = "xyes" ]; then
     ...
-else
-    WITH_DEBUG="--without-debug"
-    ENABLE_DEBUGOUTPUT="--disable-debugoutput"
-    
-    # By default, parts of Singular are compiled with -O2 and parts
-    # with -O3. If we do set any CFLAGS, this always overrides the
-    # default CFLAGS set by upstream. In order to be compatible, we
-    # set the optimization to -O2.
-    # Increasing the optimization level to -O3 has caused various
-    # problems in the past either with specific compilers or on specific
-    # platforms.
-    OPTIMIZATION_FLAGS="-O2"
-    
-    CFLAGS="$OPTIMIZATION_FLAGS -g $CFLAGS"
-    CXXFLAGS="$OPTIMIZATION_FLAGS -g $CXXFLAGS"
 fi
```
and

```
checking whether build environment is sane... yes
configure: WARNING: Please note that we set empty defaults for `CFLAGS' and `CXXFLAGS' (instead of `-g -O')
checking whether C compiler accepts ... yes
```
(One of seven instances.)



---

archive/issue_comments_230061.json:
```json
{
    "body": "<div id=\"comment:362\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ed156d045c1e59af173e0a35d1e8fcc4d60a924\"><code>0ed156d</code></a></td><td><code>Singular 4.x (#17254):  Restore setting defaults for CFLAGS and CXXFLAGS in spkg-install, minor fixes.</code></td></tr></table>\n",
    "created_at": "2016-09-04T12:02:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230061",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:362"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ed156d045c1e59af173e0a35d1e8fcc4d60a924"><code>0ed156d</code></a></td><td><code>Singular 4.x (#17254):  Restore setting defaults for CFLAGS and CXXFLAGS in spkg-install, minor fixes.</code></td></tr></table>




---

archive/issue_comments_230062.json:
```json
{
    "body": "Changed commit from **[`9a99f2c`](https://github.com/sagemath/sagetrac-mirror/commit/9a99f2c4b5666aa5a37e396f10ac039d647a5c09)** to **[`0ed156d`](https://github.com/sagemath/sagetrac-mirror/commit/0ed156d045c1e59af173e0a35d1e8fcc4d60a924)**",
    "created_at": "2016-09-04T12:02:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230062",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9a99f2c`](https://github.com/sagemath/sagetrac-mirror/commit/9a99f2c4b5666aa5a37e396f10ac039d647a5c09)** to **[`0ed156d`](https://github.com/sagemath/sagetrac-mirror/commit/0ed156d045c1e59af173e0a35d1e8fcc4d60a924)**



---

archive/issue_comments_230063.json:
```json
{
    "body": "<div id=\"comment:363\" align=\"right\">comment:363</div>\n\nLooks like Singular was currently using `-O3` in many (if not all?) places though, despite the warning(s).  Anyway, I've restored the old `[ \"$SAGE_DEBUG\" != yes ]` branch, for the moment at least.",
    "created_at": "2016-09-04T12:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230063",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:363" align="right">comment:363</div>

Looks like Singular was currently using `-O3` in many (if not all?) places though, despite the warning(s).  Anyway, I've restored the old `[ "$SAGE_DEBUG" != yes ]` branch, for the moment at least.



---

archive/issue_comments_230064.json:
```json
{
    "body": "<div id=\"comment:364\" align=\"right\">comment:364</div>\n\nDoctest failure in `src/sage/schemes/curves/affine_curve.py, line 494`, more readable:\n\n```diff\n--- doctest/expected\n+++ doctest/got\n@@ -1,9 +1,9 @@\n     C.resolution_of_singularities(extend=True)[0] # long time (2 seconds)\n-Expected:\n+Got:\n     (Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by\n     24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),\n      Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by\n-     24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1,\n+     24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1,\n      Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by\n-     8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)\n+     8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)\n \n```\n(No idea where the different line breaks in the actual output come from.)",
    "created_at": "2016-09-04T12:19:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230064",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:364" align="right">comment:364</div>

Doctest failure in `src/sage/schemes/curves/affine_curve.py, line 494`, more readable:

```diff
--- doctest/expected
+++ doctest/got
@@ -1,9 +1,9 @@
     C.resolution_of_singularities(extend=True)[0] # long time (2 seconds)
-Expected:
+Got:
     (Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by
     24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),
      Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by
-     24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1,
+     24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1,
      Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by
-     8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)
+     8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)
 
```
(No idea where the different line breaks in the actual output come from.)



---

archive/issue_comments_230065.json:
```json
{
    "body": "<div id=\"comment:365\" align=\"right\">comment:365</div>\n\nReplying to [@nexttime](#comment%3A364):\n> Doctest failure in `src/sage/schemes/curves/affine_curve.py, line 494`, more readable:\n\nI've reported this one already (it's actually a different answer...)",
    "created_at": "2016-09-04T13:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230065",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:365" align="right">comment:365</div>

Replying to [@nexttime](#comment%3A364):
> Doctest failure in `src/sage/schemes/curves/affine_curve.py, line 494`, more readable:

I've reported this one already (it's actually a different answer...)



---

archive/issue_comments_230066.json:
```json
{
    "body": "<div id=\"comment:366\" align=\"right\">comment:366</div>\n\nReplying to [@dimpase](#comment%3A365):\n> Replying to [@nexttime](#comment%3A364):\n> > Doctest failure in `src/sage/schemes/curves/affine_curve.py, line 494`, more readable:\n\n> I've reported this one already (it's actually a different answer...)\n\nThere's been some change to that file in 7.4.beta3, haven't checked yet where / whether it's related.\n\n---\n\nIn `spkg-install`, there's no error checking done in `install_docs()` and `fix_includes()`, haven't touched these though.",
    "created_at": "2016-09-04T13:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230066",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:366" align="right">comment:366</div>

Replying to [@dimpase](#comment%3A365):
> Replying to [@nexttime](#comment%3A364):
> > Doctest failure in `src/sage/schemes/curves/affine_curve.py, line 494`, more readable:

> I've reported this one already (it's actually a different answer...)

There's been some change to that file in 7.4.beta3, haven't checked yet where / whether it's related.

---

In `spkg-install`, there's no error checking done in `install_docs()` and `fix_includes()`, haven't touched these though.



---

archive/issue_comments_230067.json:
```json
{
    "body": "<div id=\"comment:367\" align=\"right\">comment:367</div>\n\nReplying to [@nexttime](#comment%3A360):\n> Replying to [@dimpase](#comment%3A358):\n> > still failing on 32-bit Ubuntu 14.04 with gcc 4.8.4\n\n> \n> When you get an error during building the Sage library, please do\n> \n> ```sh\n> env SAGE_NUM_THREADS=1 ./sage -b\n> ```\n> and post the log of *that*.\n\nP.S.:  FSF GCC 4.8.5 works for me on *64-bit* Linux.  (Just the doctest failure above.)",
    "created_at": "2016-09-04T13:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230067",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:367" align="right">comment:367</div>

Replying to [@nexttime](#comment%3A360):
> Replying to [@dimpase](#comment%3A358):
> > still failing on 32-bit Ubuntu 14.04 with gcc 4.8.4

> 
> When you get an error during building the Sage library, please do
> 
> ```sh
> env SAGE_NUM_THREADS=1 ./sage -b
> ```
> and post the log of *that*.

P.S.:  FSF GCC 4.8.5 works for me on *64-bit* Linux.  (Just the doctest failure above.)



---

archive/issue_comments_230068.json:
```json
{
    "body": "<div id=\"comment:368\" align=\"right\">comment:368</div>\n\nReplying to [@nexttime](#comment%3A366):\n> Replying to [@dimpase](#comment%3A365):\n> > Replying to [@nexttime](#comment%3A364):\n> > > Doctest failure in `src/sage/schemes/curves/affine_curve.py, line 494`, more readable:\n\n> > I've reported this one already (it's actually a different answer...)\n\n> \n> There's been some change to that file in 7.4.beta3, haven't checked yet where / whether it's related.\n\nApparently not.  I'm getting the same with the branch *pulled into* Sage 7.4.beta3 (as opposed to fetching it, since it's based on beta2 with the Linbox upgrade manually merged in by Dima IIRC).\n\nPresumably unrelated, with GCC 6.2:\n\n```\nsage -t --long src/sage/parallel/map_reduce.py\n**********************************************************************\nFile \"src/sage/parallel/map_reduce.py\", line 217, in sage.parallel.map_reduce\nFailed example:\n    try:\n        res = EX.run(timeout=0.01)\n    except AbortError:\n        print(\"Computation timeout\")\n    else:\n        print(\"Computation normally finished\")\n        res\nExpected:\n    Computation timeout\nGot:\n    Computation normally finished\n    40320*x^8 + 5040*x^7 + 720*x^6 + 120*x^5 + 24*x^4 + 6*x^3 + 2*x^2 + x + 1\n**********************************************************************\n1 item had failures:\n   1 of  47 in sage.parallel.map_reduce\n    [296 tests, 1 failure, 27.61 s]\n```\n\nXD\n\n(Passes when rerun separately though.)",
    "created_at": "2016-09-04T14:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230068",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:368" align="right">comment:368</div>

Replying to [@nexttime](#comment%3A366):
> Replying to [@dimpase](#comment%3A365):
> > Replying to [@nexttime](#comment%3A364):
> > > Doctest failure in `src/sage/schemes/curves/affine_curve.py, line 494`, more readable:

> > I've reported this one already (it's actually a different answer...)

> 
> There's been some change to that file in 7.4.beta3, haven't checked yet where / whether it's related.

Apparently not.  I'm getting the same with the branch *pulled into* Sage 7.4.beta3 (as opposed to fetching it, since it's based on beta2 with the Linbox upgrade manually merged in by Dima IIRC).

Presumably unrelated, with GCC 6.2:

```
sage -t --long src/sage/parallel/map_reduce.py
**********************************************************************
File "src/sage/parallel/map_reduce.py", line 217, in sage.parallel.map_reduce
Failed example:
    try:
        res = EX.run(timeout=0.01)
    except AbortError:
        print("Computation timeout")
    else:
        print("Computation normally finished")
        res
Expected:
    Computation timeout
Got:
    Computation normally finished
    40320*x^8 + 5040*x^7 + 720*x^6 + 120*x^5 + 24*x^4 + 6*x^3 + 2*x^2 + x + 1
**********************************************************************
1 item had failures:
   1 of  47 in sage.parallel.map_reduce
    [296 tests, 1 failure, 27.61 s]
```

XD

(Passes when rerun separately though.)



---

archive/issue_comments_230069.json:
```json
{
    "body": "<div id=\"comment:369\" align=\"right\">comment:369</div>\n\nReplying to [@nexttime](#comment%3A360):\n> Replying to [@dimpase](#comment%3A358):\n> > still failing on 32-bit Ubuntu 14.04 with gcc 4.8.4\n\n> \n> When you get an error during building the Sage library, please do\n> \n> ```sh\n> env SAGE_NUM_THREADS=1 ./sage -b\n> ```\n> and post the log of *that*.\n\nRight, sorry for the multithread mess. With singular built with SAGE_DEBUG=yes I get\n\n```\n[  1/308] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/dima/sage/dev/sage/local/include -I/home/dima/sage/dev/sage/local/include/python2.7 -I/home/dima/sage/dev/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/dima/sage/dev/sage/src -I/home/dima/sage/dev/sage/src/sage/ext -I/home/dima/sage/dev/sage/src/build/cythonized -I/home/dima/sage/dev/sage/src/build/cythonized/sage/ext -I/home/dima/sage/dev/sage/local/include/python2.7 -c /home/dima/sage/dev/sage/src/build/cythonized/sage/algebras/letterplace/free_algebra_letterplace.cpp -o build/temp.linux-i686-2.7/home/dima/sage/dev/sage/src/build/cythonized/sage/algebras/letterplace/free_algebra_letterplace.o -fno-strict-aliasing -fno-tree-copyrename\nIn file included from /home/dima/sage/dev/sage/local/include/singular/kernel/structs.h:12:0,\n                 from /home/dima/sage/dev/sage/local/include/singular/Singular/libsingular.h:8,\n                 from /home/dima/sage/dev/sage/src/build/cythonized/sage/algebras/letterplace/free_algebra_letterplace.cpp:348:\n/home/dima/sage/dev/sage/local/include/omalloc/omalloc.h:11:30: fatal error: omalloc/omConfig.h: No such file or directory\n #include <omalloc/omConfig.h>\n                              ^\n```\n\nAnd without SAGE_DEBUG the error is\n\n```\n[  1/302] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/dima/sage/dev/sage/local/include -I/home/di\nma/sage/dev/sage/local/include/python2.7 -I/home/dima/sage/dev/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/dima/sage/de\nv/sage/src -I/home/dima/sage/dev/sage/src/sage/ext -I/home/dima/sage/dev/sage/src/build/cythonized -I/home/dima/sage/dev/sage/src/build/cytho\nnized/sage/ext -I/home/dima/sage/dev/sage/local/include/python2.7 -c /home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/singula\nr.cpp -o build/temp.linux-i686-2.7/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/singular.o -I/home/dima/sage/dev/sage/loca\nl//include -fPIC -I/home/dima/sage/dev/sage/local/include -std=gnu++11 -mmmx -mpopcnt -msse -msse2 -msse3 -msse4.1 -msse4.2 -mavx -mfpmath=ss\ne -fabi-version=6 -fno-strict-aliasing -fno-tree-copyrename\n/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/singular.cpp: In function \u2018__pyx_obj_4sage_5rings_12finite_rings_14element_g\nivaro_FiniteField_givaroElement* __pyx_f_4sage_4libs_8singular_8singular_si2sa_GFqGivaro(snumber*, ip_sring*, __pyx_obj_4sage_5rings_12finite\n_rings_14element_givaro_Cache_givaro*)\u2019:\n/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/singular.cpp:4218:104: error: call of overloaded \u2018init(int&, long int)\u2019 is a\nmbiguous\n     __pyx_v_c = __pyx_v_cache->objectptr->init(__pyx_v_c, ((long)p_GetCoeff(__pyx_v_z, __pyx_v_cfRing)));\n                                                                                                        ^\n/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/singular.cpp:4218:104: note: candidates are:\n\n[..long list omitted by me - see err.log for the complete listing..] \n```",
    "created_at": "2016-09-04T15:20:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230069",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:369" align="right">comment:369</div>

Replying to [@nexttime](#comment%3A360):
> Replying to [@dimpase](#comment%3A358):
> > still failing on 32-bit Ubuntu 14.04 with gcc 4.8.4

> 
> When you get an error during building the Sage library, please do
> 
> ```sh
> env SAGE_NUM_THREADS=1 ./sage -b
> ```
> and post the log of *that*.

Right, sorry for the multithread mess. With singular built with SAGE_DEBUG=yes I get

```
[  1/308] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/dima/sage/dev/sage/local/include -I/home/dima/sage/dev/sage/local/include/python2.7 -I/home/dima/sage/dev/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/dima/sage/dev/sage/src -I/home/dima/sage/dev/sage/src/sage/ext -I/home/dima/sage/dev/sage/src/build/cythonized -I/home/dima/sage/dev/sage/src/build/cythonized/sage/ext -I/home/dima/sage/dev/sage/local/include/python2.7 -c /home/dima/sage/dev/sage/src/build/cythonized/sage/algebras/letterplace/free_algebra_letterplace.cpp -o build/temp.linux-i686-2.7/home/dima/sage/dev/sage/src/build/cythonized/sage/algebras/letterplace/free_algebra_letterplace.o -fno-strict-aliasing -fno-tree-copyrename
In file included from /home/dima/sage/dev/sage/local/include/singular/kernel/structs.h:12:0,
                 from /home/dima/sage/dev/sage/local/include/singular/Singular/libsingular.h:8,
                 from /home/dima/sage/dev/sage/src/build/cythonized/sage/algebras/letterplace/free_algebra_letterplace.cpp:348:
/home/dima/sage/dev/sage/local/include/omalloc/omalloc.h:11:30: fatal error: omalloc/omConfig.h: No such file or directory
 #include <omalloc/omConfig.h>
                              ^
```

And without SAGE_DEBUG the error is

```
[  1/302] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/dima/sage/dev/sage/local/include -I/home/di
ma/sage/dev/sage/local/include/python2.7 -I/home/dima/sage/dev/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/dima/sage/de
v/sage/src -I/home/dima/sage/dev/sage/src/sage/ext -I/home/dima/sage/dev/sage/src/build/cythonized -I/home/dima/sage/dev/sage/src/build/cytho
nized/sage/ext -I/home/dima/sage/dev/sage/local/include/python2.7 -c /home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/singula
r.cpp -o build/temp.linux-i686-2.7/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/singular.o -I/home/dima/sage/dev/sage/loca
l//include -fPIC -I/home/dima/sage/dev/sage/local/include -std=gnu++11 -mmmx -mpopcnt -msse -msse2 -msse3 -msse4.1 -msse4.2 -mavx -mfpmath=ss
e -fabi-version=6 -fno-strict-aliasing -fno-tree-copyrename
/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/singular.cpp: In function ‘__pyx_obj_4sage_5rings_12finite_rings_14element_g
ivaro_FiniteField_givaroElement* __pyx_f_4sage_4libs_8singular_8singular_si2sa_GFqGivaro(snumber*, ip_sring*, __pyx_obj_4sage_5rings_12finite
_rings_14element_givaro_Cache_givaro*)’:
/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/singular.cpp:4218:104: error: call of overloaded ‘init(int&, long int)’ is a
mbiguous
     __pyx_v_c = __pyx_v_cache->objectptr->init(__pyx_v_c, ((long)p_GetCoeff(__pyx_v_z, __pyx_v_cfRing)));
                                                                                                        ^
/home/dima/sage/dev/sage/src/build/cythonized/sage/libs/singular/singular.cpp:4218:104: note: candidates are:

[..long list omitted by me - see err.log for the complete listing..] 
```



---

archive/issue_comments_230070.json:
```json
{
    "body": "32-bit Ubuntu 14.04 with gcc 4.8.4 error",
    "created_at": "2016-09-04T15:23:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230070",
    "user": "https://github.com/dimpase"
}
```

32-bit Ubuntu 14.04 with gcc 4.8.4 error



---

archive/issue_comments_230071.json:
```json
{
    "body": "<div id=\"comment:370\" align=\"right\">comment:370</div>\n\nAttachment: **[err.log](https://github.com/sagemath/sage/files/ticket17254/err.log)**\n\nReplying to [@jdemeyer](#comment%3A294):\n> I think this regression is not acceptable:\n> \n> ```\n>              sage: P.<x,y,z> = PolynomialRing(QQ)\n>              sage: f= x^2 + 2*x*y + 1/2*z\n>              sage: f.is_squarefree()\n>              Traceback (most recent call last):\n>              ...\n>              NotImplementedError: is_squarefree of multivariate polynomials over rings is not implemented.\n> ```\n> \n> Asking whether a multivariate polynomial is squarefree seems like a very natural thing to do and not something you should just break.\n\nHow about\n\n```diff\n--- a/src/sage/rings/polynomial/multi_polynomial_libsingular.pyx\n+++ b/src/sage/rings/polynomial/multi_polynomial_libsingular.pyx\n@@ -4703,16 +4703,12 @@ cdef class MPolynomial_libsingular(sage.rings.polynomial.multi_polynomial.MPolyn\n             sage: P.<x,y,z> = PolynomialRing(QQ)\n             sage: f= x^2 + 2*x*y + 1/2*z\n             sage: f.is_squarefree()\n-            Traceback (most recent call last):\n-            ...\n-            NotImplementedError: is_squarefree of multivariate polynomials over rings is not implemented.\n+            True\n             sage: h = f^2\n             sage: h.is_squarefree()\n-            Traceback (most recent call last):\n-            ...\n-            NotImplementedError: is_squarefree of multivariate polynomials over rings is not implemented.\n+            False\n         \"\"\"\n-        raise NotImplementedError(\"is_squarefree of multivariate polynomials over rings is not implemented.\")\n+        return all([ e==1 for (f,e) in self.factor() ])\n \n     @coerce_binop\n     def quo_rem(self, MPolynomial_libsingular right):\n```\nfor the moment?\n\nWe could improve it later, probably on a follow-up.",
    "created_at": "2016-09-04T15:48:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230071",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:370" align="right">comment:370</div>

Attachment: **[err.log](https://github.com/sagemath/sage/files/ticket17254/err.log)**

Replying to [@jdemeyer](#comment%3A294):
> I think this regression is not acceptable:
> 
> ```
>              sage: P.<x,y,z> = PolynomialRing(QQ)
>              sage: f= x^2 + 2*x*y + 1/2*z
>              sage: f.is_squarefree()
>              Traceback (most recent call last):
>              ...
>              NotImplementedError: is_squarefree of multivariate polynomials over rings is not implemented.
> ```
> 
> Asking whether a multivariate polynomial is squarefree seems like a very natural thing to do and not something you should just break.

How about

```diff
--- a/src/sage/rings/polynomial/multi_polynomial_libsingular.pyx
+++ b/src/sage/rings/polynomial/multi_polynomial_libsingular.pyx
@@ -4703,16 +4703,12 @@ cdef class MPolynomial_libsingular(sage.rings.polynomial.multi_polynomial.MPolyn
             sage: P.<x,y,z> = PolynomialRing(QQ)
             sage: f= x^2 + 2*x*y + 1/2*z
             sage: f.is_squarefree()
-            Traceback (most recent call last):
-            ...
-            NotImplementedError: is_squarefree of multivariate polynomials over rings is not implemented.
+            True
             sage: h = f^2
             sage: h.is_squarefree()
-            Traceback (most recent call last):
-            ...
-            NotImplementedError: is_squarefree of multivariate polynomials over rings is not implemented.
+            False
         """
-        raise NotImplementedError("is_squarefree of multivariate polynomials over rings is not implemented.")
+        return all([ e==1 for (f,e) in self.factor() ])
 
     @coerce_binop
     def quo_rem(self, MPolynomial_libsingular right):
```
for the moment?

We could improve it later, probably on a follow-up.



---

archive/issue_comments_230072.json:
```json
{
    "body": "<div id=\"comment:371\" align=\"right\">comment:371</div>\n\nReplying to [@dimpase](#comment%3A369):\n> Right, sorry for the multithread mess. With singular built with SAGE_CHECK=yes I get\n\nI guess you meant `SAGE_DEBUG=yes` (and `SAGE_NUM_THREADS=1`).",
    "created_at": "2016-09-04T16:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230072",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:371" align="right">comment:371</div>

Replying to [@dimpase](#comment%3A369):
> Right, sorry for the multithread mess. With singular built with SAGE_CHECK=yes I get

I guess you meant `SAGE_DEBUG=yes` (and `SAGE_NUM_THREADS=1`).



---

archive/issue_comments_230073.json:
```json
{
    "body": "<div id=\"comment:372\" align=\"right\">comment:372</div>\n\nI'll try to revive a 32-bit x86 machine the next days, as we have other issues on 32-bit Ubuntu 14.04 and 16.04 (i.e., building bdists for them) as well.",
    "created_at": "2016-09-04T16:08:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230073",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:372" align="right">comment:372</div>

I'll try to revive a 32-bit x86 machine the next days, as we have other issues on 32-bit Ubuntu 14.04 and 16.04 (i.e., building bdists for them) as well.



---

archive/issue_comments_230074.json:
```json
{
    "body": "<div id=\"comment:373\" align=\"right\">comment:373</div>\n\nReplying to [@nexttime](#comment%3A371):\n> Replying to [@dimpase](#comment%3A369):\n> > Right, sorry for the multithread mess. With singular built with SAGE_CHECK=yes I get\n\n> \n> I guess you meant `SAGE_DEBUG=yes` (and `SAGE_NUM_THREADS=1`).\n\noops, yes that's what I meant.",
    "created_at": "2016-09-04T16:16:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230074",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:373" align="right">comment:373</div>

Replying to [@nexttime](#comment%3A371):
> Replying to [@dimpase](#comment%3A369):
> > Right, sorry for the multithread mess. With singular built with SAGE_CHECK=yes I get

> 
> I guess you meant `SAGE_DEBUG=yes` (and `SAGE_NUM_THREADS=1`).

oops, yes that's what I meant.



---

archive/issue_comments_230075.json:
```json
{
    "body": "<div id=\"comment:374\" align=\"right\">comment:374</div>\n\nReplying to [@nexttime](#comment%3A372):\n> I'll try to revive a 32-bit x86 machine the next days, as we have other issues on 32-bit Ubuntu 14.04 and 16.04 (i.e., building bdists for them) as well.\n\nI've installed gcc-6.1.1 on my 32-bit system and am rebuilding Sage with it now. Hopefully it will fix the C++ madness...",
    "created_at": "2016-09-04T16:18:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230075",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:374" align="right">comment:374</div>

Replying to [@nexttime](#comment%3A372):
> I'll try to revive a 32-bit x86 machine the next days, as we have other issues on 32-bit Ubuntu 14.04 and 16.04 (i.e., building bdists for them) as well.

I've installed gcc-6.1.1 on my 32-bit system and am rebuilding Sage with it now. Hopefully it will fix the C++ madness...



---

archive/issue_comments_230076.json:
```json
{
    "body": "<div id=\"comment:375\" align=\"right\">comment:375</div>\n\nReplying to [@dimpase](#comment%3A374):\n> Replying to [@nexttime](#comment%3A372):\n> > I'll try to revive a 32-bit x86 machine the next days, as we have other issues on 32-bit Ubuntu 14.04 and 16.04 (i.e., building bdists for them) as well.\n\n> \n> I've installed gcc-6.1.1 on my 32-bit system and am rebuilding Sage with it now. Hopefully it will fix the C++ madness...\n\nNot really GCC-related I'd say, but rather 32-bit vs. 64-bit.\n\nDoes the following work for you?\n\n```diff\n--- a/src/sage/libs/singular/singular.pyx\n+++ b/src/sage/libs/singular/singular.pyx\n@@ -150,7 +150,7 @@ cdef FFgivE si2sa_GFqGivaro(number *n, ring *_ring, Cache_givaro cache):\n     order = cache.objectptr.cardinality() - 1\n \n     while z:\n-        c = cache.objectptr.initi(c, <long>p_GetCoeff(z, cfRing))\n+        c = cache.objectptr.initi(c, <int64_t>p_GetCoeff(z, cfRing))\n         e = p_GetExp(z, 1, cfRing)\n         if e == 0:\n             ret = cache.objectptr.add(ret, c, ret)\n```",
    "created_at": "2016-09-04T16:49:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230076",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:375" align="right">comment:375</div>

Replying to [@dimpase](#comment%3A374):
> Replying to [@nexttime](#comment%3A372):
> > I'll try to revive a 32-bit x86 machine the next days, as we have other issues on 32-bit Ubuntu 14.04 and 16.04 (i.e., building bdists for them) as well.

> 
> I've installed gcc-6.1.1 on my 32-bit system and am rebuilding Sage with it now. Hopefully it will fix the C++ madness...

Not really GCC-related I'd say, but rather 32-bit vs. 64-bit.

Does the following work for you?

```diff
--- a/src/sage/libs/singular/singular.pyx
+++ b/src/sage/libs/singular/singular.pyx
@@ -150,7 +150,7 @@ cdef FFgivE si2sa_GFqGivaro(number *n, ring *_ring, Cache_givaro cache):
     order = cache.objectptr.cardinality() - 1
 
     while z:
-        c = cache.objectptr.initi(c, <long>p_GetCoeff(z, cfRing))
+        c = cache.objectptr.initi(c, <int64_t>p_GetCoeff(z, cfRing))
         e = p_GetExp(z, 1, cfRing)
         if e == 0:
             ret = cache.objectptr.add(ret, c, ret)
```



---

archive/issue_comments_230077.json:
```json
{
    "body": "<div id=\"comment:376\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe8df87230d5324f2283f66afb5f762a33ac9dc2\"><code>fe8df87</code></a></td><td><code>Singular 4.x (#17254):  Fix a few integer types w.r.t. width/signedness in singular.{pxd,pyx}.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8dcddb1db91a2fffb3641cbd0c5b8b1f61689686\"><code>8dcddb1</code></a></td><td><code>Singular 4.x (#17254):  Temporarily (re-)implement is_squarefree() for mpolys.</code></td></tr></table>\n",
    "created_at": "2016-09-04T19:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230077",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:376"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe8df87230d5324f2283f66afb5f762a33ac9dc2"><code>fe8df87</code></a></td><td><code>Singular 4.x (#17254):  Fix a few integer types w.r.t. width/signedness in singular.{pxd,pyx}.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8dcddb1db91a2fffb3641cbd0c5b8b1f61689686"><code>8dcddb1</code></a></td><td><code>Singular 4.x (#17254):  Temporarily (re-)implement is_squarefree() for mpolys.</code></td></tr></table>




---

archive/issue_comments_230078.json:
```json
{
    "body": "Changed commit from **[`0ed156d`](https://github.com/sagemath/sagetrac-mirror/commit/0ed156d045c1e59af173e0a35d1e8fcc4d60a924)** to **[`8dcddb1`](https://github.com/sagemath/sagetrac-mirror/commit/8dcddb1db91a2fffb3641cbd0c5b8b1f61689686)**",
    "created_at": "2016-09-04T19:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230078",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0ed156d`](https://github.com/sagemath/sagetrac-mirror/commit/0ed156d045c1e59af173e0a35d1e8fcc4d60a924)** to **[`8dcddb1`](https://github.com/sagemath/sagetrac-mirror/commit/8dcddb1db91a2fffb3641cbd0c5b8b1f61689686)**



---

archive/issue_comments_230079.json:
```json
{
    "body": "<div id=\"comment:377\" align=\"right\">comment:377</div>\n\nI pushed a (hopefully sufficient) fix for the 32-bit issue and a slightly beautified version of the `is_squarefree()` implementation above.\n\n(Not sure when I'll be back.)",
    "created_at": "2016-09-04T19:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230079",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:377" align="right">comment:377</div>

I pushed a (hopefully sufficient) fix for the 32-bit issue and a slightly beautified version of the `is_squarefree()` implementation above.

(Not sure when I'll be back.)



---

archive/issue_comments_230080.json:
```json
{
    "body": "Work Issues: **Code clean-up; perhaps fix more warnings**",
    "created_at": "2016-09-04T19:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230080",
    "user": "https://github.com/nexttime"
}
```

Work Issues: **Code clean-up; perhaps fix more warnings**



---

archive/issue_comments_230081.json:
```json
{
    "body": "<div id=\"comment:379\" align=\"right\">comment:379</div>\n\nReplying to [@nexttime](#comment%3A377):\n> I pushed a (hopefully sufficient) fix for the 32-bit issue and a slightly beautified version of the `is_squarefree()` implementation above.\n\nOK, at least now it builds on 32-bit.",
    "created_at": "2016-09-04T19:52:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230081",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:379" align="right">comment:379</div>

Replying to [@nexttime](#comment%3A377):
> I pushed a (hopefully sufficient) fix for the 32-bit issue and a slightly beautified version of the `is_squarefree()` implementation above.

OK, at least now it builds on 32-bit.



---

archive/issue_comments_230082.json:
```json
{
    "body": "<div id=\"comment:380\" align=\"right\">comment:380</div>\n\nReplying to [@dimpase](#comment%3A379):\n> Replying to [@nexttime](#comment%3A377):\n> > I pushed a (hopefully sufficient) fix for the 32-bit issue and a slightly beautified version of the `is_squarefree()` implementation above.\n\n> \n> OK, at least now it builds on 32-bit.\n\nOK, long tests pass too, modulo already reported here affine_curves test, and some unrelated numerical noise in gsl (see #21417, needs review).",
    "created_at": "2016-09-05T08:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230082",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:380" align="right">comment:380</div>

Replying to [@dimpase](#comment%3A379):
> Replying to [@nexttime](#comment%3A377):
> > I pushed a (hopefully sufficient) fix for the 32-bit issue and a slightly beautified version of the `is_squarefree()` implementation above.

> 
> OK, at least now it builds on 32-bit.

OK, long tests pass too, modulo already reported here affine_curves test, and some unrelated numerical noise in gsl (see #21417, needs review).



---

archive/issue_comments_230083.json:
```json
{
    "body": "<div id=\"comment:381\" align=\"right\">comment:381</div>\n\nReplying to [@dimpase](#comment%3A369):\n> Replying to [@nexttime](#comment%3A360):\n> > Replying to [@dimpase](#comment%3A358):\n> > > still failing on 32-bit Ubuntu 14.04 with gcc 4.8.4\n\n> > \n> > When you get an error during building the Sage library, please do\n> > \n> > ```sh\n> > env SAGE_NUM_THREADS=1 ./sage -b\n> > ```\n> > and post the log of *that*.\n\n> \n> Right, sorry for the multithread mess. With singular built with SAGE_DEBUG=yes I get\n> \n> ```\n> [  1/308] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/dima/sage/dev/sage/local/include -I/home/dima/sage/dev/sage/local/include/python2.7 -I/home/dima/sage/dev/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/dima/sage/dev/sage/src -I/home/dima/sage/dev/sage/src/sage/ext -I/home/dima/sage/dev/sage/src/build/cythonized -I/home/dima/sage/dev/sage/src/build/cythonized/sage/ext -I/home/dima/sage/dev/sage/local/include/python2.7 -c /home/dima/sage/dev/sage/src/build/cythonized/sage/algebras/letterplace/free_algebra_letterplace.cpp -o build/temp.linux-i686-2.7/home/dima/sage/dev/sage/src/build/cythonized/sage/algebras/letterplace/free_algebra_letterplace.o -fno-strict-aliasing -fno-tree-copyrename\n> In file included from /home/dima/sage/dev/sage/local/include/singular/kernel/structs.h:12:0,\n>                  from /home/dima/sage/dev/sage/local/include/singular/Singular/libsingular.h:8,\n>                  from /home/dima/sage/dev/sage/src/build/cythonized/sage/algebras/letterplace/free_algebra_letterplace.cpp:348:\n> /home/dima/sage/dev/sage/local/include/omalloc/omalloc.h:11:30: fatal error: omalloc/omConfig.h: No such file or directory\n>  #include <omalloc/omConfig.h>\n>                               ^\n> ```\n> \n\nCan you try to remove this line from `omallc/omalloc.h` and restart the SAge library build?",
    "created_at": "2016-09-05T09:58:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230083",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:381" align="right">comment:381</div>

Replying to [@dimpase](#comment%3A369):
> Replying to [@nexttime](#comment%3A360):
> > Replying to [@dimpase](#comment%3A358):
> > > still failing on 32-bit Ubuntu 14.04 with gcc 4.8.4

> > 
> > When you get an error during building the Sage library, please do
> > 
> > ```sh
> > env SAGE_NUM_THREADS=1 ./sage -b
> > ```
> > and post the log of *that*.

> 
> Right, sorry for the multithread mess. With singular built with SAGE_DEBUG=yes I get
> 
> ```
> [  1/308] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/dima/sage/dev/sage/local/include -I/home/dima/sage/dev/sage/local/include/python2.7 -I/home/dima/sage/dev/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/dima/sage/dev/sage/src -I/home/dima/sage/dev/sage/src/sage/ext -I/home/dima/sage/dev/sage/src/build/cythonized -I/home/dima/sage/dev/sage/src/build/cythonized/sage/ext -I/home/dima/sage/dev/sage/local/include/python2.7 -c /home/dima/sage/dev/sage/src/build/cythonized/sage/algebras/letterplace/free_algebra_letterplace.cpp -o build/temp.linux-i686-2.7/home/dima/sage/dev/sage/src/build/cythonized/sage/algebras/letterplace/free_algebra_letterplace.o -fno-strict-aliasing -fno-tree-copyrename
> In file included from /home/dima/sage/dev/sage/local/include/singular/kernel/structs.h:12:0,
>                  from /home/dima/sage/dev/sage/local/include/singular/Singular/libsingular.h:8,
>                  from /home/dima/sage/dev/sage/src/build/cythonized/sage/algebras/letterplace/free_algebra_letterplace.cpp:348:
> /home/dima/sage/dev/sage/local/include/omalloc/omalloc.h:11:30: fatal error: omalloc/omConfig.h: No such file or directory
>  #include <omalloc/omConfig.h>
>                               ^
> ```
> 

Can you try to remove this line from `omallc/omalloc.h` and restart the SAge library build?



---

archive/issue_comments_230084.json:
```json
{
    "body": "Changed commit from **[`8dcddb1`](https://github.com/sagemath/sagetrac-mirror/commit/8dcddb1db91a2fffb3641cbd0c5b8b1f61689686)** to **[`aad26dc`](https://github.com/sagemath/sagetrac-mirror/commit/aad26dc57a39a49d60c1c471e8b1923392b38adf)**",
    "created_at": "2016-09-05T11:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230084",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8dcddb1`](https://github.com/sagemath/sagetrac-mirror/commit/8dcddb1db91a2fffb3641cbd0c5b8b1f61689686)** to **[`aad26dc`](https://github.com/sagemath/sagetrac-mirror/commit/aad26dc57a39a49d60c1c471e8b1923392b38adf)**



---

archive/issue_comments_230085.json:
```json
{
    "body": "<div id=\"comment:382\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d69ac3d3e8c46608d97e9b01faaebd934024470f\"><code>d69ac3d</code></a></td><td><code>Remove Singular omalloc stuff.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aad26dc57a39a49d60c1c471e8b1923392b38adf\"><code>aad26dc</code></a></td><td><code>Fix non-existing include in singular's xalloc.</code></td></tr></table>\n",
    "created_at": "2016-09-05T11:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230085",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:382"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d69ac3d3e8c46608d97e9b01faaebd934024470f"><code>d69ac3d</code></a></td><td><code>Remove Singular omalloc stuff.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aad26dc57a39a49d60c1c471e8b1923392b38adf"><code>aad26dc</code></a></td><td><code>Fix non-existing include in singular's xalloc.</code></td></tr></table>




---

archive/issue_comments_230086.json:
```json
{
    "body": "Changed commit from **[`aad26dc`](https://github.com/sagemath/sagetrac-mirror/commit/aad26dc57a39a49d60c1c471e8b1923392b38adf)** to **[`51502d6`](https://github.com/sagemath/sagetrac-mirror/commit/51502d6630aaa6d8ddfc4a99901f1782aa72bfbb)**",
    "created_at": "2016-09-05T11:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230086",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aad26dc`](https://github.com/sagemath/sagetrac-mirror/commit/aad26dc57a39a49d60c1c471e8b1923392b38adf)** to **[`51502d6`](https://github.com/sagemath/sagetrac-mirror/commit/51502d6630aaa6d8ddfc4a99901f1782aa72bfbb)**



---

archive/issue_comments_230087.json:
```json
{
    "body": "<div id=\"comment:383\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51502d6630aaa6d8ddfc4a99901f1782aa72bfbb\"><code>51502d6</code></a></td><td><code>Simplify CFLAGS treatment for Singular.</code></td></tr></table>\n",
    "created_at": "2016-09-05T11:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230087",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:383"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51502d6630aaa6d8ddfc4a99901f1782aa72bfbb"><code>51502d6</code></a></td><td><code>Simplify CFLAGS treatment for Singular.</code></td></tr></table>




---

archive/issue_comments_230088.json:
```json
{
    "body": "<div id=\"comment:384\" align=\"right\">comment:384</div>\n\nReplying to [@jdemeyer](#comment%3A337):\n> > If I recall correctly, on Mac OS we might have both (\".so\" and \".dylib\") or only one of (\".so\" and \".dylib\")? Is that true?? \n\n> \n> Both exist for a different purpose. On OS X:\n> \n> - `.dylib` = dynamic library (needed for the usual case of linking libraries at build-time).\n> \n> - `.so` = loadable module (needed for run-time linking, for example Python extension modules).\n> \n> On most other OSes, there is no difference between these.\n\nI guess we should only deal with `dylib` on OS X as far as Singular is concerned.\nCan someone confirm this?",
    "created_at": "2016-09-05T11:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230088",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:384" align="right">comment:384</div>

Replying to [@jdemeyer](#comment%3A337):
> > If I recall correctly, on Mac OS we might have both (".so" and ".dylib") or only one of (".so" and ".dylib")? Is that true?? 

> 
> Both exist for a different purpose. On OS X:
> 
> - `.dylib` = dynamic library (needed for the usual case of linking libraries at build-time).
> 
> - `.so` = loadable module (needed for run-time linking, for example Python extension modules).
> 
> On most other OSes, there is no difference between these.

I guess we should only deal with `dylib` on OS X as far as Singular is concerned.
Can someone confirm this?



---

archive/issue_comments_230089.json:
```json
{
    "body": "<div id=\"comment:385\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/536d849bc73d831f831b82515d2d016bcbefd310\"><code>536d849</code></a></td><td><code>Make sure to delete Singular 3.x files.</code></td></tr></table>\n",
    "created_at": "2016-09-05T11:43:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230089",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:385"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/536d849bc73d831f831b82515d2d016bcbefd310"><code>536d849</code></a></td><td><code>Make sure to delete Singular 3.x files.</code></td></tr></table>




---

archive/issue_comments_230090.json:
```json
{
    "body": "Changed commit from **[`51502d6`](https://github.com/sagemath/sagetrac-mirror/commit/51502d6630aaa6d8ddfc4a99901f1782aa72bfbb)** to **[`536d849`](https://github.com/sagemath/sagetrac-mirror/commit/536d849bc73d831f831b82515d2d016bcbefd310)**",
    "created_at": "2016-09-05T11:43:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230090",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`51502d6`](https://github.com/sagemath/sagetrac-mirror/commit/51502d6630aaa6d8ddfc4a99901f1782aa72bfbb)** to **[`536d849`](https://github.com/sagemath/sagetrac-mirror/commit/536d849bc73d831f831b82515d2d016bcbefd310)**



---

archive/issue_comments_230091.json:
```json
{
    "body": "<div id=\"comment:386\" align=\"right\">comment:386</div>\n\nReplying to [@jpflori](#comment%3A384):\n> Replying to [@jdemeyer](#comment%3A337):\n> > > If I recall correctly, on Mac OS we might have both (\".so\" and \".dylib\") or only one of (\".so\" and \".dylib\")? Is that true?? \n\n> > \n> > Both exist for a different purpose. On OS X:\n> > \n> > - `.dylib` = dynamic library (needed for the usual case of linking libraries at build-time).\n> > \n> > - `.so` = loadable module (needed for run-time linking, for example Python extension modules).\n> > \n> > On most other OSes, there is no difference between these.\n\n> I guess we should only deal with `dylib` on OS X as far as Singular is concerned.\n> Can someone confirm this?\n\nI cannot think of another platform producing `dylib` so it's fair.",
    "created_at": "2016-09-05T11:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230091",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:386" align="right">comment:386</div>

Replying to [@jpflori](#comment%3A384):
> Replying to [@jdemeyer](#comment%3A337):
> > > If I recall correctly, on Mac OS we might have both (".so" and ".dylib") or only one of (".so" and ".dylib")? Is that true?? 

> > 
> > Both exist for a different purpose. On OS X:
> > 
> > - `.dylib` = dynamic library (needed for the usual case of linking libraries at build-time).
> > 
> > - `.so` = loadable module (needed for run-time linking, for example Python extension modules).
> > 
> > On most other OSes, there is no difference between these.

> I guess we should only deal with `dylib` on OS X as far as Singular is concerned.
> Can someone confirm this?

I cannot think of another platform producing `dylib` so it's fair.



---

archive/issue_comments_230092.json:
```json
{
    "body": "<div id=\"comment:387\" align=\"right\">comment:387</div>\n\nSorry, I was not clear: I meant that Singular produces no `.so` file on OS X.",
    "created_at": "2016-09-05T12:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230092",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:387" align="right">comment:387</div>

Sorry, I was not clear: I meant that Singular produces no `.so` file on OS X.



---

archive/issue_comments_230093.json:
```json
{
    "body": "<div id=\"comment:388\" align=\"right\">comment:388</div>\n\nwith `SAGE_DEBUG=yes ./sage -f singular`\non 32-bit Linux I get \n\n```\n[singular-4.0.3p3]   CXX      libSingular_la-mod_lib.lo\n[singular-4.0.3p3] misc_ip.cc: In function 'char* versionString()':\n[singular-4.0.3p3] misc_ip.cc:783:34: error: 'SIZEOF_VOIDP' was not declared in this scope\n[singular-4.0.3p3]                 SINGULAR_VERSION, SIZEOF_VOIDP*8,\n[singular-4.0.3p3]                                   ^~~~~~~~~~~~\n[singular-4.0.3p3] make[6]: *** [libSingular_la-misc_ip.lo] Error 1\n```",
    "created_at": "2016-09-05T14:05:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230093",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:388" align="right">comment:388</div>

with `SAGE_DEBUG=yes ./sage -f singular`
on 32-bit Linux I get 

```
[singular-4.0.3p3]   CXX      libSingular_la-mod_lib.lo
[singular-4.0.3p3] misc_ip.cc: In function 'char* versionString()':
[singular-4.0.3p3] misc_ip.cc:783:34: error: 'SIZEOF_VOIDP' was not declared in this scope
[singular-4.0.3p3]                 SINGULAR_VERSION, SIZEOF_VOIDP*8,
[singular-4.0.3p3]                                   ^~~~~~~~~~~~
[singular-4.0.3p3] make[6]: *** [libSingular_la-misc_ip.lo] Error 1
```



---

archive/issue_comments_230094.json:
```json
{
    "body": "<div id=\"comment:389\" align=\"right\">comment:389</div>\n\nReplying to [@sagetrac-git](#comment%3A383):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51502d6630aaa6d8ddfc4a99901f1782aa72bfbb\"><code>51502d6</code></a></td><td><code>Simplify CFLAGS treatment for Singular.</code></td></tr></table>\n\nYou just undid common subexpression elimination... ;-)",
    "created_at": "2016-09-05T15:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230094",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:389" align="right">comment:389</div>

Replying to [@sagetrac-git](#comment%3A383):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51502d6630aaa6d8ddfc4a99901f1782aa72bfbb"><code>51502d6</code></a></td><td><code>Simplify CFLAGS treatment for Singular.</code></td></tr></table>

You just undid common subexpression elimination... ;-)



---

archive/issue_comments_230095.json:
```json
{
    "body": "<div id=\"comment:390\" align=\"right\">comment:390</div>\n\nTrue.\n\nI just thought it was more readable for a human being.\nAnd was in line with the if clause.\nBut I might be wrong.",
    "created_at": "2016-09-05T15:47:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230095",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:390" align="right">comment:390</div>

True.

I just thought it was more readable for a human being.
And was in line with the if clause.
But I might be wrong.



---

archive/issue_comments_230096.json:
```json
{
    "body": "<div id=\"comment:391\" align=\"right\">comment:391</div>\n\nReplying to [@jpflori](#comment%3A390):\n> And was in line with the if clause.\n\nWell, it's more likely we add things to `OPTIMIZATION_FLAGS` than to / past `-O0`.",
    "created_at": "2016-09-05T15:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230096",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:391" align="right">comment:391</div>

Replying to [@jpflori](#comment%3A390):
> And was in line with the if clause.

Well, it's more likely we add things to `OPTIMIZATION_FLAGS` than to / past `-O0`.



---

archive/issue_comments_230097.json:
```json
{
    "body": "<div id=\"comment:392\" align=\"right\">comment:392</div>\n\nReplying to [@dimpase](#comment%3A388):\n> with `SAGE_DEBUG=yes ./sage -f singular`\n> on 32-bit Linux I get \n> \n> ```\n> [singular-4.0.3p3]   CXX      libSingular_la-mod_lib.lo\n> [singular-4.0.3p3] misc_ip.cc: In function 'char* versionString()':\n> [singular-4.0.3p3] misc_ip.cc:783:34: error: 'SIZEOF_VOIDP' was not declared in this scope\n> [singular-4.0.3p3]                 SINGULAR_VERSION, SIZEOF_VOIDP*8,\n> [singular-4.0.3p3]                                   ^~~~~~~~~~~~\n> [singular-4.0.3p3] make[6]: *** [libSingular_la-misc_ip.lo] Error 1\n> ```\n\nGot it: `omConfig.h` is needed at build time to define this...\nSo the easiest solution would be not to modify `xalloc/omalloc.h` and to ship `omConfig.h` jsut as `omalloc` does.\nCan you modify `xalloc/configure.ac` by adding \n\n```\nnodist_libomalloc_include_HEADERS = omConfig.h\n```\nthen autoreconf and retest?",
    "created_at": "2016-09-05T16:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230097",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:392" align="right">comment:392</div>

Replying to [@dimpase](#comment%3A388):
> with `SAGE_DEBUG=yes ./sage -f singular`
> on 32-bit Linux I get 
> 
> ```
> [singular-4.0.3p3]   CXX      libSingular_la-mod_lib.lo
> [singular-4.0.3p3] misc_ip.cc: In function 'char* versionString()':
> [singular-4.0.3p3] misc_ip.cc:783:34: error: 'SIZEOF_VOIDP' was not declared in this scope
> [singular-4.0.3p3]                 SINGULAR_VERSION, SIZEOF_VOIDP*8,
> [singular-4.0.3p3]                                   ^~~~~~~~~~~~
> [singular-4.0.3p3] make[6]: *** [libSingular_la-misc_ip.lo] Error 1
> ```

Got it: `omConfig.h` is needed at build time to define this...
So the easiest solution would be not to modify `xalloc/omalloc.h` and to ship `omConfig.h` jsut as `omalloc` does.
Can you modify `xalloc/configure.ac` by adding 

```
nodist_libomalloc_include_HEADERS = omConfig.h
```
then autoreconf and retest?



---

archive/issue_comments_230098.json:
```json
{
    "body": "<div id=\"comment:393\" align=\"right\">comment:393</div>\n\nReplying to [@jpflori](#comment%3A387):\n> Sorry, I was not clear: I meant that Singular produces no `.so` file on OS X.\n\nI can only see `dylib` around here. The only `.so` files are in `lib/python2.7` (and they would be `.bundle` if we were building python as a framework).",
    "created_at": "2016-09-05T19:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230098",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:393" align="right">comment:393</div>

Replying to [@jpflori](#comment%3A387):
> Sorry, I was not clear: I meant that Singular produces no `.so` file on OS X.

I can only see `dylib` around here. The only `.so` files are in `lib/python2.7` (and they would be `.bundle` if we were building python as a framework).



---

archive/issue_comments_230099.json:
```json
{
    "body": "<div id=\"comment:394\" align=\"right\">comment:394</div>\n\nI have started working in earnest on a ebuild for sage-on-gentoo. I based on it on stuff in the maintree for 4.0.2. \n\nAnyway I believe that by default `--enable-gfanlib` is on. libgfan needs `cddlib` to be installed to build. Since `cddlib` is not currently a dependency of `singular`, but is a standard package, we could get different `singular` installs depending on build order.\n\nSince `cddlib` is a standard package I propose we make it a dependency of `singular` - unless there are reasons to have `gfanlib` to be completely disabled.",
    "created_at": "2016-09-05T23:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230099",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:394" align="right">comment:394</div>

I have started working in earnest on a ebuild for sage-on-gentoo. I based on it on stuff in the maintree for 4.0.2. 

Anyway I believe that by default `--enable-gfanlib` is on. libgfan needs `cddlib` to be installed to build. Since `cddlib` is not currently a dependency of `singular`, but is a standard package, we could get different `singular` installs depending on build order.

Since `cddlib` is a standard package I propose we make it a dependency of `singular` - unless there are reasons to have `gfanlib` to be completely disabled.



---

archive/issue_comments_230100.json:
```json
{
    "body": "<div id=\"comment:395\" align=\"right\">comment:395</div>\n\nReplying to [@kiwifb](#comment%3A394):\n> Anyway I believe that by default `--enable-gfanlib` is on. libgfan needs `cddlib` to be installed to build. Since `cddlib` is not currently a dependency of `singular`, but is a standard package, we could get different `singular` installs depending on build order.\n> \n> Since `cddlib` is a standard package I propose we make it a dependency of `singular` - unless there are reasons to have `gfanlib` to be completely disabled.\n\nI don't think so.  Go ahead...",
    "created_at": "2016-09-06T08:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230100",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:395" align="right">comment:395</div>

Replying to [@kiwifb](#comment%3A394):
> Anyway I believe that by default `--enable-gfanlib` is on. libgfan needs `cddlib` to be installed to build. Since `cddlib` is not currently a dependency of `singular`, but is a standard package, we could get different `singular` installs depending on build order.
> 
> Since `cddlib` is a standard package I propose we make it a dependency of `singular` - unless there are reasons to have `gfanlib` to be completely disabled.

I don't think so.  Go ahead...



---

archive/issue_comments_230101.json:
```json
{
    "body": "<div id=\"comment:396\" align=\"right\">comment:396</div>\n\nReplying to [@nexttime](#comment%3A395):\n> Replying to [@kiwifb](#comment%3A394):\n> > Anyway I believe that by default `--enable-gfanlib` is on. libgfan needs `cddlib` to be installed to build. Since `cddlib` is not currently a dependency of `singular`, but is a standard package, we could get different `singular` installs depending on build order.\n> > \n> > Since `cddlib` is a standard package I propose we make it a dependency of `singular` - unless there are reasons to have `gfanlib` to be completely disabled.\n\n> \n> I don't think so.  Go ahead...\n\nP.S.: `cddlib` just depends on GMP/MPIR, which is built (nearly) first anyway, so adding the dependency wouldn't slow down anything either.",
    "created_at": "2016-09-06T09:15:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230101",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:396" align="right">comment:396</div>

Replying to [@nexttime](#comment%3A395):
> Replying to [@kiwifb](#comment%3A394):
> > Anyway I believe that by default `--enable-gfanlib` is on. libgfan needs `cddlib` to be installed to build. Since `cddlib` is not currently a dependency of `singular`, but is a standard package, we could get different `singular` installs depending on build order.
> > 
> > Since `cddlib` is a standard package I propose we make it a dependency of `singular` - unless there are reasons to have `gfanlib` to be completely disabled.

> 
> I don't think so.  Go ahead...

P.S.: `cddlib` just depends on GMP/MPIR, which is built (nearly) first anyway, so adding the dependency wouldn't slow down anything either.



---

archive/issue_comments_230102.json:
```json
{
    "body": "<div id=\"comment:397\" align=\"right\">comment:397</div>\n\nG(roebner)Fans are important, let's enable this.",
    "created_at": "2016-09-06T09:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230102",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:397" align="right">comment:397</div>

G(roebner)Fans are important, let's enable this.



---

archive/issue_comments_230103.json:
```json
{
    "body": "<div id=\"comment:398\" align=\"right\">comment:398</div>\n\nReplying to [@dimpase](#comment%3A397):\n> G(roebner)Fans are important, let's enable this.\n\nAFAICS they're only accessible through the Singular binary, and/but we already also have `gfan`.",
    "created_at": "2016-09-06T09:39:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230103",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:398" align="right">comment:398</div>

Replying to [@dimpase](#comment%3A397):
> G(roebner)Fans are important, let's enable this.

AFAICS they're only accessible through the Singular binary, and/but we already also have `gfan`.



---

archive/issue_comments_230104.json:
```json
{
    "body": "<div id=\"comment:399\" align=\"right\">comment:399</div>\n\nReplying to [@nexttime](#comment%3A398):\n> Replying to [@dimpase](#comment%3A397):\n> > G(roebner)Fans are important, let's enable this.\n\n> \n> AFAICS they're only accessible through the Singular binary, and/but we already also have `gfan`.\n\nIndeed, but there is a `libgfan.so` installed (linking may need improvement, I'll look into that) and could be used directly instead of going through a pexpect interface. Of course functionality and performance are also a consideration.",
    "created_at": "2016-09-06T10:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230104",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:399" align="right">comment:399</div>

Replying to [@nexttime](#comment%3A398):
> Replying to [@dimpase](#comment%3A397):
> > G(roebner)Fans are important, let's enable this.

> 
> AFAICS they're only accessible through the Singular binary, and/but we already also have `gfan`.

Indeed, but there is a `libgfan.so` installed (linking may need improvement, I'll look into that) and could be used directly instead of going through a pexpect interface. Of course functionality and performance are also a consideration.



---

archive/issue_comments_230105.json:
```json
{
    "body": "<div id=\"comment:400\" align=\"right\">comment:400</div>\n\nReplying to [@jpflori](#comment%3A392):\n> Replying to [@dimpase](#comment%3A388):\n> > with `SAGE_DEBUG=yes ./sage -f singular`\n> > on 32-bit Linux I get \n> > \n> > ```\n> > [singular-4.0.3p3]   CXX      libSingular_la-mod_lib.lo\n> > [singular-4.0.3p3] misc_ip.cc: In function 'char* versionString()':\n> > [singular-4.0.3p3] misc_ip.cc:783:34: error: 'SIZEOF_VOIDP' was not declared in this scope\n> > [singular-4.0.3p3]                 SINGULAR_VERSION, SIZEOF_VOIDP*8,\n> > [singular-4.0.3p3]                                   ^~~~~~~~~~~~\n> > [singular-4.0.3p3] make[6]: *** [libSingular_la-misc_ip.lo] Error 1\n> > ```\n\n> Got it: `omConfig.h` is needed at build time to define this...\n> So the easiest solution would be not to modify `xalloc/omalloc.h` and to ship `omConfig.h` jsut as `omalloc` does.\n> Can you modify `xalloc/configure.ac` by adding \n> \n> ```\n> nodist_libomalloc_include_HEADERS = omConfig.h\n> ```\n> then autoreconf and retest?\n\nThis seems to work.\nI'll produce a patch.",
    "created_at": "2016-09-06T10:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230105",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:400" align="right">comment:400</div>

Replying to [@jpflori](#comment%3A392):
> Replying to [@dimpase](#comment%3A388):
> > with `SAGE_DEBUG=yes ./sage -f singular`
> > on 32-bit Linux I get 
> > 
> > ```
> > [singular-4.0.3p3]   CXX      libSingular_la-mod_lib.lo
> > [singular-4.0.3p3] misc_ip.cc: In function 'char* versionString()':
> > [singular-4.0.3p3] misc_ip.cc:783:34: error: 'SIZEOF_VOIDP' was not declared in this scope
> > [singular-4.0.3p3]                 SINGULAR_VERSION, SIZEOF_VOIDP*8,
> > [singular-4.0.3p3]                                   ^~~~~~~~~~~~
> > [singular-4.0.3p3] make[6]: *** [libSingular_la-misc_ip.lo] Error 1
> > ```

> Got it: `omConfig.h` is needed at build time to define this...
> So the easiest solution would be not to modify `xalloc/omalloc.h` and to ship `omConfig.h` jsut as `omalloc` does.
> Can you modify `xalloc/configure.ac` by adding 
> 
> ```
> nodist_libomalloc_include_HEADERS = omConfig.h
> ```
> then autoreconf and retest?

This seems to work.
I'll produce a patch.



---

archive/issue_comments_230106.json:
```json
{
    "body": "Changed commit from **[`536d849`](https://github.com/sagemath/sagetrac-mirror/commit/536d849bc73d831f831b82515d2d016bcbefd310)** to **[`4865a48`](https://github.com/sagemath/sagetrac-mirror/commit/4865a489c058d31d2e255245c56dea5930666477)**",
    "created_at": "2016-09-06T10:55:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230106",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`536d849`](https://github.com/sagemath/sagetrac-mirror/commit/536d849bc73d831f831b82515d2d016bcbefd310)** to **[`4865a48`](https://github.com/sagemath/sagetrac-mirror/commit/4865a489c058d31d2e255245c56dea5930666477)**



---

archive/issue_comments_230107.json:
```json
{
    "body": "<div id=\"comment:401\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4865a489c058d31d2e255245c56dea5930666477\"><code>4865a48</code></a></td><td><code>Make sure Singular's xalloc installs omConfig.h.</code></td></tr></table>\n",
    "created_at": "2016-09-06T10:55:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230107",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:401"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4865a489c058d31d2e255245c56dea5930666477"><code>4865a48</code></a></td><td><code>Make sure Singular's xalloc installs omConfig.h.</code></td></tr></table>




---

archive/issue_comments_230108.json:
```json
{
    "body": "Changed commit from **[`4865a48`](https://github.com/sagemath/sagetrac-mirror/commit/4865a489c058d31d2e255245c56dea5930666477)** to **[`98cc68c`](https://github.com/sagemath/sagetrac-mirror/commit/98cc68c6c7af5d2788c832eec7c9182b69c52005)**",
    "created_at": "2016-09-06T13:18:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230108",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4865a48`](https://github.com/sagemath/sagetrac-mirror/commit/4865a489c058d31d2e255245c56dea5930666477)** to **[`98cc68c`](https://github.com/sagemath/sagetrac-mirror/commit/98cc68c6c7af5d2788c832eec7c9182b69c52005)**



---

archive/issue_comments_230109.json:
```json
{
    "body": "<div id=\"comment:402\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98cc68c6c7af5d2788c832eec7c9182b69c52005\"><code>98cc68c</code></a></td><td><code>Only try relevant extension for OS when loading libSingular.</code></td></tr></table>\n",
    "created_at": "2016-09-06T13:18:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230109",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:402"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98cc68c6c7af5d2788c832eec7c9182b69c52005"><code>98cc68c</code></a></td><td><code>Only try relevant extension for OS when loading libSingular.</code></td></tr></table>




---

archive/issue_comments_230110.json:
```json
{
    "body": "<div id=\"comment:403\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/399f051511572037fb4d2de79d44df09b34f08b0\"><code>399f051</code></a></td><td><code>Add cddlib as a dependency and make gfanlib building explicit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/797c53949b2725028e41275c08cb909554fedf3c\"><code>797c539</code></a></td><td><code>Improve the cleaning</code></td></tr></table>\n",
    "created_at": "2016-09-07T02:04:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230110",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:403"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/399f051511572037fb4d2de79d44df09b34f08b0"><code>399f051</code></a></td><td><code>Add cddlib as a dependency and make gfanlib building explicit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/797c53949b2725028e41275c08cb909554fedf3c"><code>797c539</code></a></td><td><code>Improve the cleaning</code></td></tr></table>




---

archive/issue_comments_230111.json:
```json
{
    "body": "Changed commit from **[`98cc68c`](https://github.com/sagemath/sagetrac-mirror/commit/98cc68c6c7af5d2788c832eec7c9182b69c52005)** to **[`797c539`](https://github.com/sagemath/sagetrac-mirror/commit/797c53949b2725028e41275c08cb909554fedf3c)**",
    "created_at": "2016-09-07T02:04:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230111",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`98cc68c`](https://github.com/sagemath/sagetrac-mirror/commit/98cc68c6c7af5d2788c832eec7c9182b69c52005)** to **[`797c539`](https://github.com/sagemath/sagetrac-mirror/commit/797c53949b2725028e41275c08cb909554fedf3c)**



---

archive/issue_comments_230112.json:
```json
{
    "body": "<div id=\"comment:404\" align=\"right\">comment:404</div>\n\nAnd I am in. There are several other stuff I want to raise or do related to packaging:\n1) drop the separate (re-)building of libfactory. Historically this was done to build maccauley2 (anyone else remember that?). My understanding is that upstream maccauley2 includes its own internal copy now. And there is no new style spkg for it currently. Any objections to ditching it?\n2) singular install `.pc` files we should use them",
    "created_at": "2016-09-07T02:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230112",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:404" align="right">comment:404</div>

And I am in. There are several other stuff I want to raise or do related to packaging:
1) drop the separate (re-)building of libfactory. Historically this was done to build maccauley2 (anyone else remember that?). My understanding is that upstream maccauley2 includes its own internal copy now. And there is no new style spkg for it currently. Any objections to ditching it?
2) singular install `.pc` files we should use them



---

archive/issue_comments_230113.json:
```json
{
    "body": "<div id=\"comment:405\" align=\"right\">comment:405</div>\n\nReplying to [@kiwifb](#comment%3A404):\n> 1) drop the separate (re-)building of libfactory. Historically this was done to build maccauley2 (anyone else remember that?). My understanding is that upstream maccauley2 includes its own internal copy now. And there is no new style spkg for it currently. Any objections to ditching it?\n\nI'm guessing you're talking about dropping libfactory since Macaulay2 is an experimental spkg, so I have no objections..",
    "created_at": "2016-09-07T02:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230113",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:405" align="right">comment:405</div>

Replying to [@kiwifb](#comment%3A404):
> 1) drop the separate (re-)building of libfactory. Historically this was done to build maccauley2 (anyone else remember that?). My understanding is that upstream maccauley2 includes its own internal copy now. And there is no new style spkg for it currently. Any objections to ditching it?

I'm guessing you're talking about dropping libfactory since Macaulay2 is an experimental spkg, so I have no objections..



---

archive/issue_comments_230114.json:
```json
{
    "body": "<div id=\"comment:406\" align=\"right\">comment:406</div>\n\nIt is not really dropping it since it is naturally produced and installed when building singular. But in singular 3.x it was a static library only and libsingular had its own copy inside. In singular 4, libfactory is dynamic and libsingular depends on it...\n\nIn the past we were rebuilding libfactory.a with a slightly different configuration to satisfy Macauley2 and it had no impact on libsingular. This is potentially not the case anymore. I haven't checked but the rebuilding may just be costing us time with no final difference.",
    "created_at": "2016-09-07T02:32:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230114",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:406" align="right">comment:406</div>

It is not really dropping it since it is naturally produced and installed when building singular. But in singular 3.x it was a static library only and libsingular had its own copy inside. In singular 4, libfactory is dynamic and libsingular depends on it...

In the past we were rebuilding libfactory.a with a slightly different configuration to satisfy Macauley2 and it had no impact on libsingular. This is potentially not the case anymore. I haven't checked but the rebuilding may just be costing us time with no final difference.



---

archive/issue_comments_230115.json:
```json
{
    "body": "<div id=\"comment:407\" align=\"right\">comment:407</div>\n\nI am almost done with my first pass at using `Singular.pc`. Once it is done there may be simplifications that can be done in `module_list.py`. But I need to clear the view and be sure that it works as it is first.",
    "created_at": "2016-09-07T04:47:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230115",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:407" align="right">comment:407</div>

I am almost done with my first pass at using `Singular.pc`. Once it is done there may be simplifications that can be done in `module_list.py`. But I need to clear the view and be sure that it works as it is first.



---

archive/issue_comments_230116.json:
```json
{
    "body": "Changed commit from **[`797c539`](https://github.com/sagemath/sagetrac-mirror/commit/797c53949b2725028e41275c08cb909554fedf3c)** to **[`75e383a`](https://github.com/sagemath/sagetrac-mirror/commit/75e383ad8f14f28142deb33f7c14364e20517a88)**",
    "created_at": "2016-09-07T05:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230116",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`797c539`](https://github.com/sagemath/sagetrac-mirror/commit/797c53949b2725028e41275c08cb909554fedf3c)** to **[`75e383a`](https://github.com/sagemath/sagetrac-mirror/commit/75e383ad8f14f28142deb33f7c14364e20517a88)**



---

archive/issue_comments_230117.json:
```json
{
    "body": "<div id=\"comment:408\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75e383ad8f14f28142deb33f7c14364e20517a88\"><code>75e383a</code></a></td><td><code>use Singular.pc almost everywhere</code></td></tr></table>\n",
    "created_at": "2016-09-07T05:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230117",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:408"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75e383ad8f14f28142deb33f7c14364e20517a88"><code>75e383a</code></a></td><td><code>use Singular.pc almost everywhere</code></td></tr></table>




---

archive/issue_comments_230118.json:
```json
{
    "body": "<div id=\"comment:409\" align=\"right\">comment:409</div>\n\nReplying to [@kiwifb](#comment%3A404):\n> And I am in. There are several other stuff I want to raise or do related to packaging:\n> 1) drop the separate (re-)building of libfactory. Historically this was done to build maccauley2 (anyone else remember that?). My understanding is that upstream maccauley2 includes its own internal copy now. And there is no new style spkg for it currently. Any objections to ditching it?\n> 2) singular install `.pc` files we should use them\n\nwell, AFAIK Macaulay2 uses an unpatched version of libfactory.\n(more precisely they apply [this](https://github.com/Macaulay2/M2/blob/master/M2/libraries/factory/patch-4.0.2), but it's just documentation, right?)\n\nI recently spent some time trying to resurrect M2 Sage package, so I'd prefer libfactory as it is now, a separate one.",
    "created_at": "2016-09-07T07:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230118",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:409" align="right">comment:409</div>

Replying to [@kiwifb](#comment%3A404):
> And I am in. There are several other stuff I want to raise or do related to packaging:
> 1) drop the separate (re-)building of libfactory. Historically this was done to build maccauley2 (anyone else remember that?). My understanding is that upstream maccauley2 includes its own internal copy now. And there is no new style spkg for it currently. Any objections to ditching it?
> 2) singular install `.pc` files we should use them

well, AFAIK Macaulay2 uses an unpatched version of libfactory.
(more precisely they apply [this](https://github.com/Macaulay2/M2/blob/master/M2/libraries/factory/patch-4.0.2), but it's just documentation, right?)

I recently spent some time trying to resurrect M2 Sage package, so I'd prefer libfactory as it is now, a separate one.



---

archive/issue_comments_230119.json:
```json
{
    "body": "<div id=\"comment:410\" align=\"right\">comment:410</div>\n\nReplying to [@dimpase](#comment%3A409):\n> Replying to [@kiwifb](#comment%3A404): \n> I recently spent some time trying to resurrect M2 Sage package, so I'd prefer libfactory as it is now, a separate one.\n> \n\nI will look into this further. But rebuilding libfactory is a risk. I would be OK if libfactory was a separate package and singular and M2 would build on top of it but that's not what it looks like now.",
    "created_at": "2016-09-07T07:44:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230119",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:410" align="right">comment:410</div>

Replying to [@dimpase](#comment%3A409):
> Replying to [@kiwifb](#comment%3A404): 
> I recently spent some time trying to resurrect M2 Sage package, so I'd prefer libfactory as it is now, a separate one.
> 

I will look into this further. But rebuilding libfactory is a risk. I would be OK if libfactory was a separate package and singular and M2 would build on top of it but that's not what it looks like now.



---

archive/issue_comments_230120.json:
```json
{
    "body": "<div id=\"comment:411\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0f55ea2018b9fb3dc587cb20d90141063fc5852\"><code>a0f55ea</code></a></td><td><code>Singular.pc is now used everywhere. plural.pyx doesn't need givaro or readline or m anymore.</code></td></tr></table>\n",
    "created_at": "2016-09-07T07:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230120",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:411"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0f55ea2018b9fb3dc587cb20d90141063fc5852"><code>a0f55ea</code></a></td><td><code>Singular.pc is now used everywhere. plural.pyx doesn't need givaro or readline or m anymore.</code></td></tr></table>




---

archive/issue_comments_230121.json:
```json
{
    "body": "Changed commit from **[`75e383a`](https://github.com/sagemath/sagetrac-mirror/commit/75e383ad8f14f28142deb33f7c14364e20517a88)** to **[`a0f55ea`](https://github.com/sagemath/sagetrac-mirror/commit/a0f55ea2018b9fb3dc587cb20d90141063fc5852)**",
    "created_at": "2016-09-07T07:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230121",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`75e383a`](https://github.com/sagemath/sagetrac-mirror/commit/75e383ad8f14f28142deb33f7c14364e20517a88)** to **[`a0f55ea`](https://github.com/sagemath/sagetrac-mirror/commit/a0f55ea2018b9fb3dc587cb20d90141063fc5852)**



---

archive/issue_comments_230122.json:
```json
{
    "body": "<div id=\"comment:412\" align=\"right\">comment:412</div>\n\nReplying to [@sagetrac-git](#comment%3A403):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n\n|                                                                                                                                                 |                                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|\n|[399f051](https://github.com/sagemath/sagetrac-mirror/commit/399f051511572037fb4d2de79d44df09b34f08b0)|`Add cddlib as a dependency and make gfanlib building explicit`|\n|[797c539](https://github.com/sagemath/sagetrac-mirror/commit/797c53949b2725028e41275c08cb909554fedf3c)|`Improve the cleaning`|\nI see `libomalloc`'s in my `loca/lib` but no `libSingomalloc`'s.\nIs the latter one what `3.x` used to install?\nWhatsoever we could still remove the former one as well.",
    "created_at": "2016-09-07T08:52:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230122",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:412" align="right">comment:412</div>

Replying to [@sagetrac-git](#comment%3A403):
> Branch pushed to git repo; I updated commit sha1. New commits:

|                                                                                                                                                 |                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
|[399f051](https://github.com/sagemath/sagetrac-mirror/commit/399f051511572037fb4d2de79d44df09b34f08b0)|`Add cddlib as a dependency and make gfanlib building explicit`|
|[797c539](https://github.com/sagemath/sagetrac-mirror/commit/797c53949b2725028e41275c08cb909554fedf3c)|`Improve the cleaning`|
I see `libomalloc`'s in my `loca/lib` but no `libSingomalloc`'s.
Is the latter one what `3.x` used to install?
Whatsoever we could still remove the former one as well.



---

archive/issue_comments_230123.json:
```json
{
    "body": "<div id=\"comment:413\" align=\"right\">comment:413</div>\n\nThat's a mistake. I really don't know how I did that, looks like a misplaced cut and paste.",
    "created_at": "2016-09-07T09:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230123",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:413" align="right">comment:413</div>

That's a mistake. I really don't know how I did that, looks like a misplaced cut and paste.



---

archive/issue_comments_230124.json:
```json
{
    "body": "<div id=\"comment:414\" align=\"right\">comment:414</div>\n\nMaybe we could also use some more wildcards in `module_list.py`, especially for `sage/libs/singular`?",
    "created_at": "2016-09-07T09:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230124",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:414" align="right">comment:414</div>

Maybe we could also use some more wildcards in `module_list.py`, especially for `sage/libs/singular`?



---

archive/issue_comments_230125.json:
```json
{
    "body": "<div id=\"comment:415\" align=\"right\">comment:415</div>\n\nYes that's why I said it was a first pass. Once you have done that, we have a better idea about potential wildcards. `sage/libs/singular` and `sage/algebras/letterplace` both look like they could be reduced to wildcards.",
    "created_at": "2016-09-07T09:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230125",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:415" align="right">comment:415</div>

Yes that's why I said it was a first pass. Once you have done that, we have a better idea about potential wildcards. `sage/libs/singular` and `sage/algebras/letterplace` both look like they could be reduced to wildcards.



---

archive/issue_comments_230126.json:
```json
{
    "body": "<div id=\"comment:416\" align=\"right\">comment:416</div>\n\nI am done for the day. No more commits from me for the next ~10hours at least.",
    "created_at": "2016-09-07T10:49:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230126",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:416" align="right">comment:416</div>

I am done for the day. No more commits from me for the next ~10hours at least.



---

archive/issue_comments_230127.json:
```json
{
    "body": "<div id=\"comment:417\" align=\"right\">comment:417</div>\n\nReplying to [@dimpase](#comment%3A409):\n> Replying to [@kiwifb](#comment%3A404):\n> > And I am in. There are several other stuff I want to raise or do related to packaging:\n> > 1) drop the separate (re-)building of libfactory. Historically this was done to build maccauley2 (anyone else remember that?). My understanding is that upstream maccauley2 includes its own internal copy now. And there is no new style spkg for it currently. Any objections to ditching it?\n> > 2) singular install `.pc` files we should use them\n\n> \n> well, AFAIK Macaulay2 uses an unpatched version of libfactory.\n> (more precisely they apply [this](https://github.com/Macaulay2/M2/blob/master/M2/libraries/factory/patch-4.0.2), but it's just documentation, right?)\n> \n> I recently spent some time trying to resurrect M2 Sage package, so I'd prefer libfactory as it is now, a separate one.\n\nRebuilding `libfactory` as we do at the moment is nothing but redundant, so we can safely remove the step.",
    "created_at": "2016-09-07T12:12:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230127",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:417" align="right">comment:417</div>

Replying to [@dimpase](#comment%3A409):
> Replying to [@kiwifb](#comment%3A404):
> > And I am in. There are several other stuff I want to raise or do related to packaging:
> > 1) drop the separate (re-)building of libfactory. Historically this was done to build maccauley2 (anyone else remember that?). My understanding is that upstream maccauley2 includes its own internal copy now. And there is no new style spkg for it currently. Any objections to ditching it?
> > 2) singular install `.pc` files we should use them

> 
> well, AFAIK Macaulay2 uses an unpatched version of libfactory.
> (more precisely they apply [this](https://github.com/Macaulay2/M2/blob/master/M2/libraries/factory/patch-4.0.2), but it's just documentation, right?)
> 
> I recently spent some time trying to resurrect M2 Sage package, so I'd prefer libfactory as it is now, a separate one.

Rebuilding `libfactory` as we do at the moment is nothing but redundant, so we can safely remove the step.



---

archive/issue_comments_230128.json:
```json
{
    "body": "<div id=\"comment:418\" align=\"right\">comment:418</div>\n\nYes, I'm currently cleaning up that and the \"removal\" part of `spkg-install`.\nPleas hold on.",
    "created_at": "2016-09-07T12:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230128",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:418" align="right">comment:418</div>

Yes, I'm currently cleaning up that and the "removal" part of `spkg-install`.
Pleas hold on.



---

archive/issue_comments_230129.json:
```json
{
    "body": "<div id=\"comment:419\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55447da99460780f883b220cfd1a205aa3be3c90\"><code>55447da</code></a></td><td><code>Do not build (a second time) libfactory when building Singular.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5c10aeb455e0d1b348f1b564a64ead88ebe18f0\"><code>e5c10ae</code></a></td><td><code>Cleaner removal of files.</code></td></tr></table>\n",
    "created_at": "2016-09-07T12:59:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230129",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:419"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55447da99460780f883b220cfd1a205aa3be3c90"><code>55447da</code></a></td><td><code>Do not build (a second time) libfactory when building Singular.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5c10aeb455e0d1b348f1b564a64ead88ebe18f0"><code>e5c10ae</code></a></td><td><code>Cleaner removal of files.</code></td></tr></table>




---

archive/issue_comments_230130.json:
```json
{
    "body": "Changed commit from **[`a0f55ea`](https://github.com/sagemath/sagetrac-mirror/commit/a0f55ea2018b9fb3dc587cb20d90141063fc5852)** to **[`e5c10ae`](https://github.com/sagemath/sagetrac-mirror/commit/e5c10aeb455e0d1b348f1b564a64ead88ebe18f0)**",
    "created_at": "2016-09-07T12:59:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230130",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a0f55ea`](https://github.com/sagemath/sagetrac-mirror/commit/a0f55ea2018b9fb3dc587cb20d90141063fc5852)** to **[`e5c10ae`](https://github.com/sagemath/sagetrac-mirror/commit/e5c10aeb455e0d1b348f1b564a64ead88ebe18f0)**



---

archive/issue_comments_230131.json:
```json
{
    "body": "<div id=\"comment:420\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29077a76c6db047aba433a150cc8074eee82ef58\"><code>29077a7</code></a></td><td><code>Use wildcards for singular and letterplace in module_list.py.</code></td></tr></table>\n",
    "created_at": "2016-09-07T13:28:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230131",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:420"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29077a76c6db047aba433a150cc8074eee82ef58"><code>29077a7</code></a></td><td><code>Use wildcards for singular and letterplace in module_list.py.</code></td></tr></table>




---

archive/issue_comments_230132.json:
```json
{
    "body": "Changed commit from **[`e5c10ae`](https://github.com/sagemath/sagetrac-mirror/commit/e5c10aeb455e0d1b348f1b564a64ead88ebe18f0)** to **[`29077a7`](https://github.com/sagemath/sagetrac-mirror/commit/29077a76c6db047aba433a150cc8074eee82ef58)**",
    "created_at": "2016-09-07T13:28:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230132",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e5c10ae`](https://github.com/sagemath/sagetrac-mirror/commit/e5c10aeb455e0d1b348f1b564a64ead88ebe18f0)** to **[`29077a7`](https://github.com/sagemath/sagetrac-mirror/commit/29077a76c6db047aba433a150cc8074eee82ef58)**



---

archive/issue_events_244053.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-07T13:38:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244053"
}
```



---

archive/issue_events_244054.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-07T13:38:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244054"
}
```



---

archive/issue_comments_230133.json:
```json
{
    "body": "<div id=\"comment:421\" align=\"right\">comment:421</div>\n\nAny more work needed?",
    "created_at": "2016-09-07T13:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230133",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:421" align="right">comment:421</div>

Any more work needed?



---

archive/issue_comments_230134.json:
```json
{
    "body": "<div id=\"comment:422\" align=\"right\">comment:422</div>\n\nWhat do we do with the failing doctest?  (The patch/buildbots won't like it.)\n\nWe could tag it `# known bug` for the moment, for example, and open a follow-up for fixing it later.",
    "created_at": "2016-09-07T13:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230134",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:422" align="right">comment:422</div>

What do we do with the failing doctest?  (The patch/buildbots won't like it.)

We could tag it `# known bug` for the moment, for example, and open a follow-up for fixing it later.



---

archive/issue_comments_230135.json:
```json
{
    "body": "<div id=\"comment:423\" align=\"right\">comment:423</div>\n\nReplying to [@nexttime](#comment%3A422):\n> What do we do with the failing doctest?  (The patch/buildbots won't like it.)\n> \n\nHum, I did not think about this one.\nWhat is still failing?\nOnly different values due to the upgrade?\nOr still serious stufF?",
    "created_at": "2016-09-07T14:08:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230135",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:423" align="right">comment:423</div>

Replying to [@nexttime](#comment%3A422):
> What do we do with the failing doctest?  (The patch/buildbots won't like it.)
> 

Hum, I did not think about this one.
What is still failing?
Only different values due to the upgrade?
Or still serious stufF?



---

archive/issue_comments_230136.json:
```json
{
    "body": "<div id=\"comment:424\" align=\"right\">comment:424</div>\n\nReplying to [@jpflori](#comment%3A423):\n> Replying to [@nexttime](#comment%3A422):\n> > What do we do with the failing doctest?  (The patch/buildbots won't like it.)\n> > \n\n> Hum, I did not think about this one.\n> What is still failing?\n> Only different values due to the upgrade?\n> Or still serious stufF?\n\nAsk Dima (cf. [comment 365](#comment%3A365)).",
    "created_at": "2016-09-07T14:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230136",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:424" align="right">comment:424</div>

Replying to [@jpflori](#comment%3A423):
> Replying to [@nexttime](#comment%3A422):
> > What do we do with the failing doctest?  (The patch/buildbots won't like it.)
> > 

> Hum, I did not think about this one.
> What is still failing?
> Only different values due to the upgrade?
> Or still serious stufF?

Ask Dima (cf. [comment 365](#comment%3A365)).



---

archive/issue_comments_230137.json:
```json
{
    "body": "<div id=\"comment:425\" align=\"right\">comment:425</div>\n\nYes this is the only thing I located here...\nI have no idea either.\nI'll ask on sage-devel.",
    "created_at": "2016-09-07T14:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230137",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:425" align="right">comment:425</div>

Yes this is the only thing I located here...
I have no idea either.
I'll ask on sage-devel.



---

archive/issue_comments_230138.json:
```json
{
    "body": "<div id=\"comment:426\" align=\"right\">comment:426</div>\n\nReplying to [@nexttime](#comment%3A424):\n> Replying to [@jpflori](#comment%3A423):\n> > Replying to [@nexttime](#comment%3A422):\n> > > What do we do with the failing doctest?  (The patch/buildbots won't like it.)\n> > > \n\n> > Hum, I did not think about this one.\n> > What is still failing?\n> > Only different values due to the upgrade?\n> > Or still serious stufF?\n\n> \n> Ask Dima (cf. [comment 365](#comment%3A365)).\n\nP.S.:  The whole doctest that fails now is\n\n```\nsage: set_verbose(-1)\nsage: K.<a> = QuadraticField(3)\nsage: A.<x,y> = AffineSpace(K, 2)\nsage: C = A.curve(x^4 + 2*x^2 + a*y^3 + 1)\nsage: C.resolution_of_singularities(extend=True)[0] # long time (2 seconds)\n(Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by\n24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),\n Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by\n 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1,\n Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by\n 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)\n```",
    "created_at": "2016-09-07T14:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230138",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:426" align="right">comment:426</div>

Replying to [@nexttime](#comment%3A424):
> Replying to [@jpflori](#comment%3A423):
> > Replying to [@nexttime](#comment%3A422):
> > > What do we do with the failing doctest?  (The patch/buildbots won't like it.)
> > > 

> > Hum, I did not think about this one.
> > What is still failing?
> > Only different values due to the upgrade?
> > Or still serious stufF?

> 
> Ask Dima (cf. [comment 365](#comment%3A365)).

P.S.:  The whole doctest that fails now is

```
sage: set_verbose(-1)
sage: K.<a> = QuadraticField(3)
sage: A.<x,y> = AffineSpace(K, 2)
sage: C = A.curve(x^4 + 2*x^2 + a*y^3 + 1)
sage: C.resolution_of_singularities(extend=True)[0] # long time (2 seconds)
(Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by
24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),
 Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by
 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1,
 Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by
 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)
```



---

archive/issue_comments_230139.json:
```json
{
    "body": "<div id=\"comment:428\" align=\"right\">comment:428</div>\n\nI don't have this ticket built, what is the doctest returning in the new version?",
    "created_at": "2016-09-07T19:53:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230139",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:428" align="right">comment:428</div>

I don't have this ticket built, what is the doctest returning in the new version?



---

archive/issue_comments_230140.json:
```json
{
    "body": "<div id=\"comment:429\" align=\"right\">comment:429</div>\n\nReplying to [@bhutz](#comment%3A428):\n> I don't have this ticket built, what is the doctest returning in the new version?\n\nsee [#17254 comment:364](https://github.com/sagemath/sage/issues/17254#comment:364)",
    "created_at": "2016-09-07T20:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230140",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:429" align="right">comment:429</div>

Replying to [@bhutz](#comment%3A428):
> I don't have this ticket built, what is the doctest returning in the new version?

see [#17254 comment:364](https://github.com/sagemath/sage/issues/17254#comment:364)



---

archive/issue_comments_230141.json:
```json
{
    "body": "<div id=\"comment:430\" align=\"right\">comment:430</div>\n\nNote that in both cases (old and new Singular) one gets\n\n```\nverbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.\nverbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.\nverbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.\nverbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.\nverbose 0 (2086: multi_polynomial_ideal.py, variety) Warning: falling back to very slow toy implementation.\nverbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.\nverbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.\nverbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.\nverbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.\nverbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.\nverbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.\nverbose 0 (2086: multi_polynomial_ideal.py, variety) Warning: falling back to very slow toy implementation.\nverbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.\nverbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.\nverbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.\nverbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.\nverbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.\nverbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.\nverbose 0 (2086: multi_polynomial_ideal.py, variety) Warning: falling back to very slow toy implementation.\n```\nanyway... ;-)\n\n(Hence the `set_verbose(-1)` I guess.)",
    "created_at": "2016-09-07T20:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230141",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:430" align="right">comment:430</div>

Note that in both cases (old and new Singular) one gets

```
verbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.
verbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.
verbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.
verbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.
verbose 0 (2086: multi_polynomial_ideal.py, variety) Warning: falling back to very slow toy implementation.
verbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.
verbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.
verbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.
verbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.
verbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.
verbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.
verbose 0 (2086: multi_polynomial_ideal.py, variety) Warning: falling back to very slow toy implementation.
verbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.
verbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.
verbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.
verbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.
verbose 0 (3369: multi_polynomial_ideal.py, groebner_basis) Warning: falling back to very slow toy implementation.
verbose 0 (1081: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.
verbose 0 (2086: multi_polynomial_ideal.py, variety) Warning: falling back to very slow toy implementation.
```
anyway... ;-)

(Hence the `set_verbose(-1)` I guess.)



---

archive/issue_comments_230142.json:
```json
{
    "body": "<div id=\"comment:431\" align=\"right\">comment:431</div>\n\nTwo another minor(?) issues I could not solve due to lack of expertise in sage:\n\n-reuse a plain polynomial ring over ZZ and \n\n\n-reuse Singular polynomial ring over QQ\n\ninstead of creating a new one every time,\n\n\nsee\n\n```\nsrc/sage/libs/singular/singular.pyx\n```\n\n**snip**\n\n```\n        # if I understand nrnMapGMP/nMapFuncPtr correctly we need first\n+        # a source value in ZZr\n+        # create ZZr, a plain polynomial ring over ZZ with one variable.\n+        #\n+        # todo (later): reuse ZZr\n+        _name = omStrDup(varname)\n+        _ext_names = <char**>omAlloc0(sizeof(char*))\n+        _ext_names[0] = omStrDup(_name)\n+        _cf = nInitChar( n_Z, NULL) # integer coefficient ring\n+        ZZr = rDefault (_cf ,1, _ext_names)\n+        rComplete(ZZr,1)\n```\n\n```\n\n+    # the result of nlInit2gmp() is in a plain polynomial ring over QQ (not an extension ring!),\n+    # so we hace to get/create one :\n+    #\n+    # todo: reuse qqr/ get an existing Singular polynomial ring over Q.\n+    varname = \"a\"\n+    _name = omStrDup(varname)\n+    cdef char **_ext_names\n+    _ext_names = <char**>omAlloc0(sizeof(char*))\n+    _ext_names[0] = omStrDup(_name)\n+    qqr = rDefault( 0, 1, _ext_names);\n+    rComplete(qqr,1)\n+    qqr.ShortOut = 0}}}",
    "created_at": "2016-09-07T21:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230142",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:431" align="right">comment:431</div>

Two another minor(?) issues I could not solve due to lack of expertise in sage:

-reuse a plain polynomial ring over ZZ and 


-reuse Singular polynomial ring over QQ

instead of creating a new one every time,


see

```
src/sage/libs/singular/singular.pyx
```

**snip**

```
        # if I understand nrnMapGMP/nMapFuncPtr correctly we need first
+        # a source value in ZZr
+        # create ZZr, a plain polynomial ring over ZZ with one variable.
+        #
+        # todo (later): reuse ZZr
+        _name = omStrDup(varname)
+        _ext_names = <char**>omAlloc0(sizeof(char*))
+        _ext_names[0] = omStrDup(_name)
+        _cf = nInitChar( n_Z, NULL) # integer coefficient ring
+        ZZr = rDefault (_cf ,1, _ext_names)
+        rComplete(ZZr,1)
```

```

+    # the result of nlInit2gmp() is in a plain polynomial ring over QQ (not an extension ring!),
+    # so we hace to get/create one :
+    #
+    # todo: reuse qqr/ get an existing Singular polynomial ring over Q.
+    varname = "a"
+    _name = omStrDup(varname)
+    cdef char **_ext_names
+    _ext_names = <char**>omAlloc0(sizeof(char*))
+    _ext_names[0] = omStrDup(_name)
+    qqr = rDefault( 0, 1, _ext_names);
+    rComplete(qqr,1)
+    qqr.ShortOut = 0}}}



---

archive/issue_comments_230143.json:
```json
{
    "body": "<div id=\"comment:432\" align=\"right\">comment:432</div>\n\nok. I didn't see the diff on the doc test up there. It is possible it is just a coordinate change, but I'm going to have to get more information from it than the output is providing. I have it building now.",
    "created_at": "2016-09-07T23:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230143",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:432" align="right">comment:432</div>

ok. I didn't see the diff on the doc test up there. It is possible it is just a coordinate change, but I'm going to have to get more information from it than the output is providing. I have it building now.



---

archive/issue_comments_230144.json:
```json
{
    "body": "<div id=\"comment:433\" align=\"right\">comment:433</div>\n\nFWIW, here's the full diff of the *EXMAPLE<sup>TM</sup>*\n\n```python\nsage: K.<a> = QuadraticField(3)\nsage: A.<x,y> = AffineSpace(K, 2)\nsage: C = A.curve(x^4 + a*y^3 +2*x^2 + 1)\nsage: res = C.resolution_of_singularities(extend=True)\n...\n```\n\nwith Singular 3.1.7p1.p2 vs. 4.0.3p3, with all three components of the result:\n\n```diff\ndiff --git a/exmaple-full.singular3.txt b/exmaple-full.singular4.txt\nindex 272f2da..0ad11d0 100644\n--- a/exmaple-full.singular3.txt\n+++ b/exmaple-full.singular4.txt\n@@ -24,41 +24,41 @@ verbose 0 (2086: multi_polynomial_ideal.py, variety) Warning: falling back to ve\n sage: res[0]\n \n (Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),\n- Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1,\n- Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)\n+ Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1,\n+ Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)\n sage: res[1]\n \n ((Scheme endomorphism of Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0)\n     Defn: Defined on coordinates by sending (x, ss1) to\n           (x, ss1), Scheme morphism:\n     From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0)\n-    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1\n+    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1\n     Defn: Defined on coordinates by sending (x, ss1) to\n-          (x*ss1 + (-1/8*a0^3)*ss1, 1/ss1), Scheme morphism:\n+          (x*ss1 + (1/8*a0^3)*ss1, 1/ss1), Scheme morphism:\n     From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0)\n-    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y\n+    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y\n     Defn: Defined on coordinates by sending (x, ss1) to\n-          (x^2*ss1 + ss1, 1/(x*ss1 + (-1/8*a0^3)*ss1))), (Scheme morphism:\n-    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1\n+          (x^2*ss1 + ss1, 1/(x*ss1 + (1/8*a0^3)*ss1))), (Scheme morphism:\n+    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1\n     To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0)\n     Defn: Defined on coordinates by sending (s1, ss0) to\n-          (s1*ss0 + (1/8*a0^3), 1/ss0),\n-  Scheme endomorphism of Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1\n+          (s1*ss0 + (-1/8*a0^3), 1/ss0),\n+  Scheme endomorphism of Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1\n     Defn: Defined on coordinates by sending (s1, ss0) to\n           (s1, ss0),\n   Scheme morphism:\n-    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1\n-    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y\n+    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1\n+    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y\n     Defn: Defined on coordinates by sending (s1, ss0) to\n-          (s1^2*ss0 + (1/4*a0^3)*s1, 1/s1)), (Scheme morphism:\n-    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y\n+          (s1^2*ss0 + (-1/4*a0^3)*s1, 1/s1)), (Scheme morphism:\n+    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y\n     To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0)\n     Defn: Defined on coordinates by sending (y, s0) to\n-          (y*s0 + (-1/8*a0^3), 1/(y*s0^2 + (-1/4*a0^3)*s0)), Scheme morphism:\n-    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y\n-    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1\n+          (y*s0 + (1/8*a0^3), 1/(y*s0^2 + (1/4*a0^3)*s0)), Scheme morphism:\n+    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y\n+    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1\n     Defn: Defined on coordinates by sending (y, s0) to\n-          (1/s0, y*s0^2 + (-1/4*a0^3)*s0), Scheme endomorphism of Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y\n+          (1/s0, y*s0^2 + (1/4*a0^3)*s0), Scheme endomorphism of Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y\n     Defn: Defined on coordinates by sending (y, s0) to\n           (y, s0)))\n sage: res[2]\n@@ -68,13 +68,13 @@ sage: res[2]\n    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by x^4 + (1/8*a0^3 - a0)*y^3 + 2*x^2 + 1\n    Defn: Defined on coordinates by sending (x, ss1) to\n          (x, x^2*ss1 + ss1), Scheme morphism:\n-   From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1\n+   From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1\n    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by x^4 + (1/8*a0^3 - a0)*y^3 + 2*x^2 + 1\n    Defn: Defined on coordinates by sending (s1, ss0) to\n-         (s1*ss0 + (1/8*a0^3), s1^2*ss0 + (1/4*a0^3)*s1), Scheme morphism:\n-   From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y\n+         (s1*ss0 + (-1/8*a0^3), s1^2*ss0 + (-1/4*a0^3)*s1), Scheme morphism:\n+   From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y\n    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by x^4 + (1/8*a0^3 - a0)*y^3 + 2*x^2 + 1\n    Defn: Defined on coordinates by sending (y, s0) to\n-         (y*s0 + (-1/8*a0^3), y))\n+         (y*s0 + (1/8*a0^3), y))\n sage: \n```",
    "created_at": "2016-09-08T08:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230144",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:433" align="right">comment:433</div>

FWIW, here's the full diff of the *EXMAPLE<sup>TM</sup>*

```python
sage: K.<a> = QuadraticField(3)
sage: A.<x,y> = AffineSpace(K, 2)
sage: C = A.curve(x^4 + a*y^3 +2*x^2 + 1)
sage: res = C.resolution_of_singularities(extend=True)
...
```

with Singular 3.1.7p1.p2 vs. 4.0.3p3, with all three components of the result:

```diff
diff --git a/exmaple-full.singular3.txt b/exmaple-full.singular4.txt
index 272f2da..0ad11d0 100644
--- a/exmaple-full.singular3.txt
+++ b/exmaple-full.singular4.txt
@@ -24,41 +24,41 @@ verbose 0 (2086: multi_polynomial_ideal.py, variety) Warning: falling back to ve
 sage: res[0]
 
 (Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0),
- Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1,
- Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)
+ Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1,
+ Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y)
 sage: res[1]
 
 ((Scheme endomorphism of Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0)
     Defn: Defined on coordinates by sending (x, ss1) to
           (x, ss1), Scheme morphism:
     From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0)
-    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1
+    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1
     Defn: Defined on coordinates by sending (x, ss1) to
-          (x*ss1 + (-1/8*a0^3)*ss1, 1/ss1), Scheme morphism:
+          (x*ss1 + (1/8*a0^3)*ss1, 1/ss1), Scheme morphism:
     From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0)
-    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y
+    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y
     Defn: Defined on coordinates by sending (x, ss1) to
-          (x^2*ss1 + ss1, 1/(x*ss1 + (-1/8*a0^3)*ss1))), (Scheme morphism:
-    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1
+          (x^2*ss1 + ss1, 1/(x*ss1 + (1/8*a0^3)*ss1))), (Scheme morphism:
+    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1
     To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0)
     Defn: Defined on coordinates by sending (s1, ss0) to
-          (s1*ss0 + (1/8*a0^3), 1/ss0),
-  Scheme endomorphism of Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1
+          (s1*ss0 + (-1/8*a0^3), 1/ss0),
+  Scheme endomorphism of Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1
     Defn: Defined on coordinates by sending (s1, ss0) to
           (s1, ss0),
   Scheme morphism:
-    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1
-    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y
+    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1
+    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y
     Defn: Defined on coordinates by sending (s1, ss0) to
-          (s1^2*ss0 + (1/4*a0^3)*s1, 1/s1)), (Scheme morphism:
-    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y
+          (s1^2*ss0 + (-1/4*a0^3)*s1, 1/s1)), (Scheme morphism:
+    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y
     To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*x^2*ss1^3 + 24*ss1^3 + (a0^3 - 8*a0)
     Defn: Defined on coordinates by sending (y, s0) to
-          (y*s0 + (-1/8*a0^3), 1/(y*s0^2 + (-1/4*a0^3)*s0)), Scheme morphism:
-    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y
-    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1
+          (y*s0 + (1/8*a0^3), 1/(y*s0^2 + (1/4*a0^3)*s0)), Scheme morphism:
+    From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y
+    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1
     Defn: Defined on coordinates by sending (y, s0) to
-          (1/s0, y*s0^2 + (-1/4*a0^3)*s0), Scheme endomorphism of Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y
+          (1/s0, y*s0^2 + (1/4*a0^3)*s0), Scheme endomorphism of Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y
     Defn: Defined on coordinates by sending (y, s0) to
           (y, s0)))
 sage: res[2]
@@ -68,13 +68,13 @@ sage: res[2]
    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by x^4 + (1/8*a0^3 - a0)*y^3 + 2*x^2 + 1
    Defn: Defined on coordinates by sending (x, ss1) to
          (x, x^2*ss1 + ss1), Scheme morphism:
-   From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (6*a0^3)*s1
+   From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 24*s1^2*ss0 + (a0^3 - 8*a0)*ss0^2 + (-6*a0^3)*s1
    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by x^4 + (1/8*a0^3 - a0)*y^3 + 2*x^2 + 1
    Defn: Defined on coordinates by sending (s1, ss0) to
-         (s1*ss0 + (1/8*a0^3), s1^2*ss0 + (1/4*a0^3)*s1), Scheme morphism:
-   From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (-4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y
+         (s1*ss0 + (-1/8*a0^3), s1^2*ss0 + (-1/4*a0^3)*s1), Scheme morphism:
+   From: Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by 8*y^2*s0^4 + (4*a0^3)*y*s0^3 - 32*s0^2 + (a0^3 - 8*a0)*y
    To:   Affine Plane Curve over Number Field in a0 with defining polynomial y^4 - 4*y^2 + 16 defined by x^4 + (1/8*a0^3 - a0)*y^3 + 2*x^2 + 1
    Defn: Defined on coordinates by sending (y, s0) to
-         (y*s0 + (-1/8*a0^3), y))
+         (y*s0 + (1/8*a0^3), y))
 sage: 
```



---

archive/issue_comments_230145.json:
```json
{
    "body": "<div id=\"comment:434\" align=\"right\">comment:434</div>\n\nYes, that helps, since this ticket doesn't build for me for some reason.\n\nThis looks to me like a change of coordinates (x to -x) at the first blow-up that is then carried through the rest of the stages. The connecting maps and the new curves are changed consistently so I see nothing incorrect about the new output, it is just a change of variables from the original blow-ups.",
    "created_at": "2016-09-08T15:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230145",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:434" align="right">comment:434</div>

Yes, that helps, since this ticket doesn't build for me for some reason.

This looks to me like a change of coordinates (x to -x) at the first blow-up that is then carried through the rest of the stages. The connecting maps and the new curves are changed consistently so I see nothing incorrect about the new output, it is just a change of variables from the original blow-ups.



---

archive/issue_comments_230146.json:
```json
{
    "body": "Changed commit from **[`29077a7`](https://github.com/sagemath/sagetrac-mirror/commit/29077a76c6db047aba433a150cc8074eee82ef58)** to **[`494f8b8`](https://github.com/sagemath/sagetrac-mirror/commit/494f8b85cc541b19ae7dd02ba99d3fce09dc2077)**",
    "created_at": "2016-09-08T17:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230146",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`29077a7`](https://github.com/sagemath/sagetrac-mirror/commit/29077a76c6db047aba433a150cc8074eee82ef58)** to **[`494f8b8`](https://github.com/sagemath/sagetrac-mirror/commit/494f8b85cc541b19ae7dd02ba99d3fce09dc2077)**



---

archive/issue_comments_230147.json:
```json
{
    "body": "<div id=\"comment:435\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/494f8b85cc541b19ae7dd02ba99d3fce09dc2077\"><code>494f8b8</code></a></td><td><code>Fix changed doctest because of different blow-up.</code></td></tr></table>\n",
    "created_at": "2016-09-08T17:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230147",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:435"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/494f8b85cc541b19ae7dd02ba99d3fce09dc2077"><code>494f8b8</code></a></td><td><code>Fix changed doctest because of different blow-up.</code></td></tr></table>




---

archive/issue_events_244055.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-08T17:20:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244055"
}
```



---

archive/issue_events_244056.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-08T17:20:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244056"
}
```



---

archive/issue_comments_230148.json:
```json
{
    "body": "<div id=\"comment:436\" align=\"right\">comment:436</div>\n\nOk, I think we're good now.\nSome details are suboptimal, but most of them are documented in the source code (e.g. reuse singular rings).\n\nWho wants to change the status and let the patchbots complain?",
    "created_at": "2016-09-08T17:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230148",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:436" align="right">comment:436</div>

Ok, I think we're good now.
Some details are suboptimal, but most of them are documented in the source code (e.g. reuse singular rings).

Who wants to change the status and let the patchbots complain?



---

archive/issue_events_244057.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-09-08T19:27:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244057"
}
```



---

archive/issue_events_244058.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-09-08T19:27:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244058"
}
```



---

archive/issue_comments_230149.json:
```json
{
    "body": "<div id=\"comment:437\" align=\"right\">comment:437</div>\n\nOk, I just randomly added reviewers such that Volker or some scripts won't complain.\n\nAnd we should open (a) follow-up(s) for the mentioned further improvements.\n\nBut this really needs to get into Sage, hopefully already beta4.",
    "created_at": "2016-09-08T19:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230149",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:437" align="right">comment:437</div>

Ok, I just randomly added reviewers such that Volker or some scripts won't complain.

And we should open (a) follow-up(s) for the mentioned further improvements.

But this really needs to get into Sage, hopefully already beta4.



---

archive/issue_comments_230150.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey, Jeroen Demeyer, Ben Hutz, Leif Leonhardy**",
    "created_at": "2016-09-08T19:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230150",
    "user": "https://github.com/nexttime"
}
```

Reviewer: **François Bissey, Jeroen Demeyer, Ben Hutz, Leif Leonhardy**



---

archive/issue_events_244059.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-09-08T19:27:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244059"
}
```



---

archive/issue_events_244060.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-09-08T19:27:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244060"
}
```



---

archive/issue_comments_230151.json:
```json
{
    "body": "Changed work issues from **Code clean-up; perhaps fix more warnings** to none",
    "created_at": "2016-09-08T19:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230151",
    "user": "https://github.com/nexttime"
}
```

Changed work issues from **Code clean-up; perhaps fix more warnings** to none



---

archive/issue_comments_230152.json:
```json
{
    "body": "<div id=\"comment:438\" align=\"right\">comment:438</div>\n\n(Scrolling through hundreds of comments...)\n\nSorry, Dima, add yourself as author or reviewer (probably Codima as the latter ;-) ), and John Perry seems to have contributed as well, so please add anybody I missed.",
    "created_at": "2016-09-08T19:42:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230152",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:438" align="right">comment:438</div>

(Scrolling through hundreds of comments...)

Sorry, Dima, add yourself as author or reviewer (probably Codima as the latter ;-) ), and John Perry seems to have contributed as well, so please add anybody I missed.



---

archive/issue_comments_230153.json:
```json
{
    "body": "<div id=\"comment:439\" align=\"right\">comment:439</div>\n\nCoDima should go into \"Viewers:\" field, which is missing...",
    "created_at": "2016-09-08T20:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230153",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:439" align="right">comment:439</div>

CoDima should go into "Viewers:" field, which is missing...



---

archive/issue_comments_230154.json:
```json
{
    "body": "Changed reviewer from **Fran\u00e7ois Bissey, Jeroen Demeyer, Ben Hutz, Leif Leonhardy** to **Fran\u00e7ois Bissey, Jeroen Demeyer, Ben Hutz, Leif Leonhardy, Dima Pasechnik**",
    "created_at": "2016-09-08T20:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230154",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **François Bissey, Jeroen Demeyer, Ben Hutz, Leif Leonhardy** to **François Bissey, Jeroen Demeyer, Ben Hutz, Leif Leonhardy, Dima Pasechnik**



---

archive/issue_comments_230155.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,8 +3,8 @@\n \n Build system completely changed, and a lot of internal stuff.\n \n-Upstream tarball at:\n-* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz\n+Original upstream tarball at `www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/`:  `singular-4.0.3p3` **dot** `tar` **dot** `gz`\n+\n Modified tarball made with spkg-src at:\n * http://perso.telecom-paristech.fr/~flori/singular-4.0.3p3.tar.bz2\n \n``````\n",
    "created_at": "2016-09-09T15:13:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230155",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,8 +3,8 @@
 
 Build system completely changed, and a lot of internal stuff.
 
-Upstream tarball at:
-* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz
+Original upstream tarball at `www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/`:  `singular-4.0.3p3` **dot** `tar` **dot** `gz`
+
 Modified tarball made with spkg-src at:
 * http://perso.telecom-paristech.fr/~flori/singular-4.0.3p3.tar.bz2
 
``````




---

archive/issue_comments_230156.json:
```json
{
    "body": "<div id=\"comment:440\" align=\"right\">comment:440</div>\n\n\n```\n...\n2016-09-09 13:14:01 (10.8 MB/s) - \u2018/tmp/tmpTW_qa8/singular-4.0.3p3.tar.bz2\u2019 saved [12948313/12948313]\n\n> Successfully uploaded\ntar xf /tmp/tmpTW_qa8/singular-4.0.3p3.tar.bz2 -C /tmp/tmpTW_qa8\n> Successfully unpacked\nSha1 of singular-4.0.3p3.tar.bz2 is c368b9dbe7e4d8abf75b49010f2bd9f426b1de11\n> Correct sha1\nNow comparing to previous spkg.\nUnable to locate existing package singular.\nhttp://perso.telecom-paristech.fr/~flori/singular-4.0.3p3.tar.bz2 -- 3 seconds\n++++++++++ http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz ++++++++++\n> name and version = singular-4.0.3p3\nwget --progress=dot:mega -O /tmp/tmpj_5SgQ/singular-4.0.3p3.tar.gz http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz\n--2016-09-09 13:14:02--  http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz\nResolving www.mathematik.uni-kl.de (www.mathematik.uni-kl.de)... 131.246.164.55\nConnecting to www.mathematik.uni-kl.de (www.mathematik.uni-kl.de)|131.246.164.55|:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 12783052 (12M) [application/x-gzip]\nSaving to: \u2018/tmp/tmpj_5SgQ/singular-4.0.3p3.tar.gz\u2019\n\n     0K ........ ........ ........ ........ ........ ........ 24% 8.43M 1s\n  3072K ........ ........ ........ ........ ........ ........ 49% 11.2M 1s\n  6144K ........ ........ ........ ........ ........ ........ 73% 11.2M 0s\n  9216K ........ ........ ........ ........ ........ ........ 98% 11.2M 0s\n 12288K ...                                                  100% 11.3M=1.2s\n\n2016-09-09 13:14:04 (10.4 MB/s) - \u2018/tmp/tmpj_5SgQ/singular-4.0.3p3.tar.gz\u2019 saved [12783052/12783052]\n\n> Successfully uploaded\ntar xf /tmp/tmpj_5SgQ/singular-4.0.3p3.tar.gz -C /tmp/tmpj_5SgQ\n> Successfully unpacked\nSha1 of singular-4.0.3p3.tar.gz is de34fab01c9c58b3b6e073049a80c0c293fddded\nTraceback (most recent call last):\n  File \"/home/sage/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py\", line 1018, in test_a_ticket\n    self.check_spkg(spkg)\n  File \"/home/sage/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py\", line 1197, in check_spkg\n    raise SkipTicket(\"spkg has incorrect sha1\")\nSkipTicket: spkg has incorrect sha1\n...\n```\n\nI **knew** something like [this](https://patchbot.sagemath.org/log/17254/debian/8.5/x86_64/3.16.0-4-amd64/cristal/2016-09-09%2011:14:06?short) would happen...",
    "created_at": "2016-09-09T15:13:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230156",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:440" align="right">comment:440</div>


```
...
2016-09-09 13:14:01 (10.8 MB/s) - ‘/tmp/tmpTW_qa8/singular-4.0.3p3.tar.bz2’ saved [12948313/12948313]

> Successfully uploaded
tar xf /tmp/tmpTW_qa8/singular-4.0.3p3.tar.bz2 -C /tmp/tmpTW_qa8
> Successfully unpacked
Sha1 of singular-4.0.3p3.tar.bz2 is c368b9dbe7e4d8abf75b49010f2bd9f426b1de11
> Correct sha1
Now comparing to previous spkg.
Unable to locate existing package singular.
http://perso.telecom-paristech.fr/~flori/singular-4.0.3p3.tar.bz2 -- 3 seconds
++++++++++ http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz ++++++++++
> name and version = singular-4.0.3p3
wget --progress=dot:mega -O /tmp/tmpj_5SgQ/singular-4.0.3p3.tar.gz http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz
--2016-09-09 13:14:02--  http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p3.tar.gz
Resolving www.mathematik.uni-kl.de (www.mathematik.uni-kl.de)... 131.246.164.55
Connecting to www.mathematik.uni-kl.de (www.mathematik.uni-kl.de)|131.246.164.55|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 12783052 (12M) [application/x-gzip]
Saving to: ‘/tmp/tmpj_5SgQ/singular-4.0.3p3.tar.gz’

     0K ........ ........ ........ ........ ........ ........ 24% 8.43M 1s
  3072K ........ ........ ........ ........ ........ ........ 49% 11.2M 1s
  6144K ........ ........ ........ ........ ........ ........ 73% 11.2M 0s
  9216K ........ ........ ........ ........ ........ ........ 98% 11.2M 0s
 12288K ...                                                  100% 11.3M=1.2s

2016-09-09 13:14:04 (10.4 MB/s) - ‘/tmp/tmpj_5SgQ/singular-4.0.3p3.tar.gz’ saved [12783052/12783052]

> Successfully uploaded
tar xf /tmp/tmpj_5SgQ/singular-4.0.3p3.tar.gz -C /tmp/tmpj_5SgQ
> Successfully unpacked
Sha1 of singular-4.0.3p3.tar.gz is de34fab01c9c58b3b6e073049a80c0c293fddded
Traceback (most recent call last):
  File "/home/sage/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py", line 1018, in test_a_ticket
    self.check_spkg(spkg)
  File "/home/sage/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py", line 1197, in check_spkg
    raise SkipTicket("spkg has incorrect sha1")
SkipTicket: spkg has incorrect sha1
...
```

I **knew** something like [this](https://patchbot.sagemath.org/log/17254/debian/8.5/x86_64/3.16.0-4-amd64/cristal/2016-09-09%2011:14:06?short) would happen...



---

archive/issue_comments_230157.json:
```json
{
    "body": "<div id=\"comment:441\" align=\"right\">comment:441</div>\n\nSeems to work on all buildbots except OSX:\n\n```\nosx:build buildslave-sage$ ./local/bin/singular\n-bash: ./local/bin/singular: Too many levels of symbolic links\n```\nNote that OSX is wonky with filename upper/lower case: Case is preserved but ignored when looking up files.",
    "created_at": "2016-09-09T22:45:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230157",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:441" align="right">comment:441</div>

Seems to work on all buildbots except OSX:

```
osx:build buildslave-sage$ ./local/bin/singular
-bash: ./local/bin/singular: Too many levels of symbolic links
```
Note that OSX is wonky with filename upper/lower case: Case is preserved but ignored when looking up files.



---

archive/issue_events_244061.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-09T22:45:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244061"
}
```



---

archive/issue_events_244062.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-09T22:45:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244062"
}
```



---

archive/issue_comments_230158.json:
```json
{
    "body": "<div id=\"comment:442\" align=\"right\">comment:442</div>\n\nAnyone knows why we deliberately create the link `singular` -> `Singular`? Is it for cygwin. Otherwise let's just drop it and correct the sage internals to use `Singular`. That shouldn't create any problem on OS X.\n\nI just wish I had done a build on my OS X laptop before that came up.",
    "created_at": "2016-09-09T23:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230158",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:442" align="right">comment:442</div>

Anyone knows why we deliberately create the link `singular` -> `Singular`? Is it for cygwin. Otherwise let's just drop it and correct the sage internals to use `Singular`. That shouldn't create any problem on OS X.

I just wish I had done a build on my OS X laptop before that came up.



---

archive/issue_comments_230159.json:
```json
{
    "body": "<div id=\"comment:443\" align=\"right\">comment:443</div>\n\nHmmm, I didn't like\n\n```sh\n    # Lower case version is convenient (this can fail on\n    # case-insensitive systems, we ignore the error).\n    ln -sf Singular singular 2> /dev/null\n```\nfrom the beginning... ;-)\n\nSo this actually creates a symlink to itself on MacOS X.  Nice.\n\nJust skip symlinking on Darwin?",
    "created_at": "2016-09-10T00:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230159",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:443" align="right">comment:443</div>

Hmmm, I didn't like

```sh
    # Lower case version is convenient (this can fail on
    # case-insensitive systems, we ignore the error).
    ln -sf Singular singular 2> /dev/null
```
from the beginning... ;-)

So this actually creates a symlink to itself on MacOS X.  Nice.

Just skip symlinking on Darwin?



---

archive/issue_comments_230160.json:
```json
{
    "body": "<div id=\"comment:444\" align=\"right\">comment:444</div>\n\n... or remove the `-s`, making it a hard link, which is less dangerous.",
    "created_at": "2016-09-10T00:19:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230160",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:444" align="right">comment:444</div>

... or remove the `-s`, making it a hard link, which is less dangerous.



---

archive/issue_comments_230161.json:
```json
{
    "body": "<div id=\"comment:445\" align=\"right\">comment:445</div>\n\nIf no one can explain why we need `singular` on case sensitive system I think we should just drop it. There is no reason for keeping that kind of useless baggage.",
    "created_at": "2016-09-10T00:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230161",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:445" align="right">comment:445</div>

If no one can explain why we need `singular` on case sensitive system I think we should just drop it. There is no reason for keeping that kind of useless baggage.



---

archive/issue_comments_230162.json:
```json
{
    "body": "<div id=\"comment:446\" align=\"right\">comment:446</div>\n\nReplying to [@kiwifb](#comment%3A445):\n> If no one can explain why we need `singular` on case sensitive system I think we should just drop it. There is no reason for keeping that kind of useless baggage. \n\nWell, uppercase Singular is just as ugly and inconvenient as libSingular (and their dash-versions); we'd just have to make further changes like you did for the library name.\n\nI personally don't care, but if it doesn't work on MacOS X while it's at the same time not necessary there either, why \"disable\" it for all other systems, having to make lots(?) of changes elsewhere?",
    "created_at": "2016-09-10T01:34:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230162",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:446" align="right">comment:446</div>

Replying to [@kiwifb](#comment%3A445):
> If no one can explain why we need `singular` on case sensitive system I think we should just drop it. There is no reason for keeping that kind of useless baggage. 

Well, uppercase Singular is just as ugly and inconvenient as libSingular (and their dash-versions); we'd just have to make further changes like you did for the library name.

I personally don't care, but if it doesn't work on MacOS X while it's at the same time not necessary there either, why "disable" it for all other systems, having to make lots(?) of changes elsewhere?



---

archive/issue_comments_230163.json:
```json
{
    "body": "<div id=\"comment:447\" align=\"right\">comment:447</div>\n\nI think you are just pulling my leg because of #21430 :) In any case KISS principle dictate that we shouldn't mess up with what we install unless we need to. Someone did it in the past and the cost is either to keep carrying forward and keep paying, or just fix it once for all and pay a final bill. I also happen to have a fairly good idea of what needs to be fixed - because I used to do it in sage-on-gentoo.\n\nMy OS X laptop is ready for action before I push a fix.",
    "created_at": "2016-09-10T02:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230163",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:447" align="right">comment:447</div>

I think you are just pulling my leg because of #21430 :) In any case KISS principle dictate that we shouldn't mess up with what we install unless we need to. Someone did it in the past and the cost is either to keep carrying forward and keep paying, or just fix it once for all and pay a final bill. I also happen to have a fairly good idea of what needs to be fixed - because I used to do it in sage-on-gentoo.

My OS X laptop is ready for action before I push a fix.



---

archive/issue_comments_230164.json:
```json
{
    "body": "<div id=\"comment:448\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2cab45869da2619a6b9b01c6845b6c431875674\"><code>d2cab45</code></a></td><td><code>Do not create singular (all lower case) and only use Singular</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64b37109db0ad78307479bea3e54d7b6f5b0ec3d\"><code>64b3710</code></a></td><td><code>clean up</code></td></tr></table>\n",
    "created_at": "2016-09-10T09:09:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230164",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:448"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2cab45869da2619a6b9b01c6845b6c431875674"><code>d2cab45</code></a></td><td><code>Do not create singular (all lower case) and only use Singular</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64b37109db0ad78307479bea3e54d7b6f5b0ec3d"><code>64b3710</code></a></td><td><code>clean up</code></td></tr></table>




---

archive/issue_comments_230165.json:
```json
{
    "body": "Changed commit from **[`494f8b8`](https://github.com/sagemath/sagetrac-mirror/commit/494f8b85cc541b19ae7dd02ba99d3fce09dc2077)** to **[`64b3710`](https://github.com/sagemath/sagetrac-mirror/commit/64b37109db0ad78307479bea3e54d7b6f5b0ec3d)**",
    "created_at": "2016-09-10T09:09:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230165",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`494f8b8`](https://github.com/sagemath/sagetrac-mirror/commit/494f8b85cc541b19ae7dd02ba99d3fce09dc2077)** to **[`64b3710`](https://github.com/sagemath/sagetrac-mirror/commit/64b37109db0ad78307479bea3e54d7b6f5b0ec3d)**



---

archive/issue_comments_230166.json:
```json
{
    "body": "<div id=\"comment:449\" align=\"right\">comment:449</div>\n\nTo my surprise there was only one spot with a call to `singular` instead of `Singular` left. Someone has done some cleaning. I also added a small clean up I had hanging up for ages. `singular.py` and `singular.pyx` where the two last files where `SAGE_LOCAL` is obtained through `os.environ` rather than `sage/env.py`.\n\nI'd like to see this go through the bot again now.",
    "created_at": "2016-09-10T09:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230166",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:449" align="right">comment:449</div>

To my surprise there was only one spot with a call to `singular` instead of `Singular` left. Someone has done some cleaning. I also added a small clean up I had hanging up for ages. `singular.py` and `singular.pyx` where the two last files where `SAGE_LOCAL` is obtained through `os.environ` rather than `sage/env.py`.

I'd like to see this go through the bot again now.



---

archive/issue_events_244063.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-09-10T09:13:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244063"
}
```



---

archive/issue_events_244064.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-09-10T09:13:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244064"
}
```



---

archive/issue_events_244065.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-10T10:34:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244065"
}
```



---

archive/issue_events_244066.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-10T10:34:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244066"
}
```



---

archive/issue_comments_230167.json:
```json
{
    "body": "<div id=\"comment:450\" align=\"right\">comment:450</div>\n\n\n``` \n[sagelib-7.4.beta4] \n[sagelib-7.4.beta4] Error compiling Cython file:\n[sagelib-7.4.beta4] ------------------------------------------------------------\n[sagelib-7.4.beta4] ...\n[sagelib-7.4.beta4]         extension = \"dylib\"\n[sagelib-7.4.beta4]     else:\n[sagelib-7.4.beta4]         extension = \"so\"\n[sagelib-7.4.beta4] \n[sagelib-7.4.beta4]     # library name changed from libsingular to libSingular btw 3.x and 4.x\n[sagelib-7.4.beta4]     lib = sage.env.SAGE_LOCAL+\"/lib/libSingular.\"+extension\n[sagelib-7.4.beta4]              ^\n[sagelib-7.4.beta4] ------------------------------------------------------------\n[sagelib-7.4.beta4] \n[sagelib-7.4.beta4] sage/libs/singular/singular.pyx:774:14: undeclared name not builtin: sage\n```",
    "created_at": "2016-09-10T10:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230167",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:450" align="right">comment:450</div>


``` 
[sagelib-7.4.beta4] 
[sagelib-7.4.beta4] Error compiling Cython file:
[sagelib-7.4.beta4] ------------------------------------------------------------
[sagelib-7.4.beta4] ...
[sagelib-7.4.beta4]         extension = "dylib"
[sagelib-7.4.beta4]     else:
[sagelib-7.4.beta4]         extension = "so"
[sagelib-7.4.beta4] 
[sagelib-7.4.beta4]     # library name changed from libsingular to libSingular btw 3.x and 4.x
[sagelib-7.4.beta4]     lib = sage.env.SAGE_LOCAL+"/lib/libSingular."+extension
[sagelib-7.4.beta4]              ^
[sagelib-7.4.beta4] ------------------------------------------------------------
[sagelib-7.4.beta4] 
[sagelib-7.4.beta4] sage/libs/singular/singular.pyx:774:14: undeclared name not builtin: sage
```



---

archive/issue_comments_230168.json:
```json
{
    "body": "<div id=\"comment:451\" align=\"right\">comment:451</div>\n\nOK surprising but not a deal breaker.",
    "created_at": "2016-09-10T10:35:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230168",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:451" align="right">comment:451</div>

OK surprising but not a deal breaker.



---

archive/issue_comments_230169.json:
```json
{
    "body": "<div id=\"comment:452\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d25cd8fc3cca39c6ef67ee80fee3b53123b5cd9\"><code>4d25cd8</code></a></td><td><code>use cleaner import syntax to get SAGE_LOCAL</code></td></tr></table>\n",
    "created_at": "2016-09-10T11:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230169",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:452"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d25cd8fc3cca39c6ef67ee80fee3b53123b5cd9"><code>4d25cd8</code></a></td><td><code>use cleaner import syntax to get SAGE_LOCAL</code></td></tr></table>




---

archive/issue_comments_230170.json:
```json
{
    "body": "Changed commit from **[`64b3710`](https://github.com/sagemath/sagetrac-mirror/commit/64b37109db0ad78307479bea3e54d7b6f5b0ec3d)** to **[`4d25cd8`](https://github.com/sagemath/sagetrac-mirror/commit/4d25cd8fc3cca39c6ef67ee80fee3b53123b5cd9)**",
    "created_at": "2016-09-10T11:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230170",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`64b3710`](https://github.com/sagemath/sagetrac-mirror/commit/64b37109db0ad78307479bea3e54d7b6f5b0ec3d)** to **[`4d25cd8`](https://github.com/sagemath/sagetrac-mirror/commit/4d25cd8fc3cca39c6ef67ee80fee3b53123b5cd9)**



---

archive/issue_events_244067.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-09-10T11:43:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244067"
}
```



---

archive/issue_events_244068.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-09-10T11:43:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244068"
}
```



---

archive/issue_comments_230171.json:
```json
{
    "body": "<div id=\"comment:453\" align=\"right\">comment:453</div>\n\nOK, all cleaner and I made sure it builds locally. One more time...",
    "created_at": "2016-09-10T11:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230171",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:453" align="right">comment:453</div>

OK, all cleaner and I made sure it builds locally. One more time...



---

archive/issue_comments_230172.json:
```json
{
    "body": "<div id=\"comment:454\" align=\"right\">comment:454</div>\n\nTypo:  `form`->`from`.\n\n```diff\n--- a/src/sage/interfaces/singular.py\n+++ b/src/sage/interfaces/singular.py\n@@ -2275,13 +2275,15 @@ def generate_docstring_dictionary():\nsage: from sage.interfaces.singular import generate_docstring_dictionary\nsage: generate_docstring_dictionary()\n\"\"\"\n+ form sage.env import SAGE_LOCAL\n+\nglobal nodes\nglobal node_names\n...\n```",
    "created_at": "2016-09-10T12:32:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230172",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:454" align="right">comment:454</div>

Typo:  `form`->`from`.

```diff
--- a/src/sage/interfaces/singular.py
+++ b/src/sage/interfaces/singular.py
@@ -2275,13 +2275,15 @@ def generate_docstring_dictionary():
sage: from sage.interfaces.singular import generate_docstring_dictionary
sage: generate_docstring_dictionary()
"""
+ form sage.env import SAGE_LOCAL
+
global nodes
global node_names
...
```



---

archive/issue_comments_230173.json:
```json
{
    "body": "<div id=\"comment:455\" align=\"right\">comment:455</div>\n\nI guess you meant `form SAGE_LOCAL from sage.env`... :-)",
    "created_at": "2016-09-10T12:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230173",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:455" align="right">comment:455</div>

I guess you meant `form SAGE_LOCAL from sage.env`... :-)



---

archive/issue_comments_230174.json:
```json
{
    "body": "<div id=\"comment:456\" align=\"right\">comment:456</div>\n\nMinor things:\n\n`sage.env` also defines `SAGE_SHARE`.\n\nWe generally use `os.path.join()` rather than `+` and `'/'`.",
    "created_at": "2016-09-10T12:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230174",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:456" align="right">comment:456</div>

Minor things:

`sage.env` also defines `SAGE_SHARE`.

We generally use `os.path.join()` rather than `+` and `'/'`.



---

archive/issue_comments_230175.json:
```json
{
    "body": "<div id=\"comment:457\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3740cae41a8217de00619a01998912d3661a34fe\"><code>3740cae</code></a></td><td><code>Singular 4.x (#17254):  Fix typo in interfaces/singular.py (syntax error).</code></td></tr></table>\n",
    "created_at": "2016-09-10T13:04:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230175",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:457"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3740cae41a8217de00619a01998912d3661a34fe"><code>3740cae</code></a></td><td><code>Singular 4.x (#17254):  Fix typo in interfaces/singular.py (syntax error).</code></td></tr></table>




---

archive/issue_events_244069.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-09-10T13:04:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244069"
}
```



---

archive/issue_events_244070.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-09-10T13:04:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244070"
}
```



---

archive/issue_comments_230176.json:
```json
{
    "body": "Changed commit from **[`4d25cd8`](https://github.com/sagemath/sagetrac-mirror/commit/4d25cd8fc3cca39c6ef67ee80fee3b53123b5cd9)** to **[`3740cae`](https://github.com/sagemath/sagetrac-mirror/commit/3740cae41a8217de00619a01998912d3661a34fe)**",
    "created_at": "2016-09-10T13:04:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230176",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4d25cd8`](https://github.com/sagemath/sagetrac-mirror/commit/4d25cd8fc3cca39c6ef67ee80fee3b53123b5cd9)** to **[`3740cae`](https://github.com/sagemath/sagetrac-mirror/commit/3740cae41a8217de00619a01998912d3661a34fe)**



---

archive/issue_comments_230177.json:
```json
{
    "body": "<div id=\"comment:458\" align=\"right\">comment:458</div>\n\nReplying to [@nexttime](#comment%3A454):\n> Typo:  `form`->`from`.\n> \n> ```diff\n> --- a/src/sage/interfaces/singular.py\n> +++ b/src/sage/interfaces/singular.py\n> @@ -2275,13 +2275,15 @@ def generate_docstring_dictionary():\n> sage: from sage.interfaces.singular import generate_docstring_dictionary\n> sage: generate_docstring_dictionary()\n> \"\"\"\n> + form sage.env import SAGE_LOCAL\n> +\n> global nodes\n> global node_names\n> ...\n> ```\n\nFixed.  (Assuming the antipodeans are asleep.)",
    "created_at": "2016-09-10T13:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230177",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:458" align="right">comment:458</div>

Replying to [@nexttime](#comment%3A454):
> Typo:  `form`->`from`.
> 
> ```diff
> --- a/src/sage/interfaces/singular.py
> +++ b/src/sage/interfaces/singular.py
> @@ -2275,13 +2275,15 @@ def generate_docstring_dictionary():
> sage: from sage.interfaces.singular import generate_docstring_dictionary
> sage: generate_docstring_dictionary()
> """
> + form sage.env import SAGE_LOCAL
> +
> global nodes
> global node_names
> ...
> ```

Fixed.  (Assuming the antipodeans are asleep.)



---

archive/issue_events_244071.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-09-10T13:08:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244071"
}
```



---

archive/issue_events_244072.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-09-10T13:08:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244072"
}
```



---

archive/issue_comments_230178.json:
```json
{
    "body": "<div id=\"comment:459\" align=\"right\">comment:459</div>\n\nAnyone looked into this:\n\n```\nchecking whether to check for gfanlib... yes\nchecking setoper.h usability... yes\nchecking setoper.h presence... yes\nchecking for setoper.h... yes\nchecking cdd/setoper.h usability... no\nchecking cdd/setoper.h presence... no\nchecking for cdd/setoper.h... no\nchecking cddlib/setoper.h usability... no\nchecking cddlib/setoper.h presence... no\nchecking for cddlib/setoper.h... no\nchecking whether libcddgmp is usable... checking for dd_free_global_constants... yes\nyes\nno\nchecking whether to check for polymake interface... yes\nchecking for polymake-config... 0\n```\nand\n\n```\nchecking for setoper.h... yes\nchecking cdd/setoper.h usability... no\nchecking cdd/setoper.h presence... no\nchecking for cdd/setoper.h... no\nchecking cddlib/setoper.h usability... no\nchecking cddlib/setoper.h presence... no\nchecking for cddlib/setoper.h... no\nchecking whether libcddgmp is usable... checking for dd_free_global_constants... yes\nyes\nno\nchecking whether to check for polymake interface... yes\nchecking for polymake-config... 0\nchecking whether non-commutative subsystem should be enabled... yes\nchecking whether to have ratGB... no\nchecking built-in modules... no\nchecking SI_BUILTINMODULES_ADD(add)...... unset\nchecking BUILTIN_LIBS...... unset\n```\nI meant the `yes no` (more results than `checking`; above you have to scroll to the right to see the third), which appears twice in cddlib context, and just noticed the `polymake-config` result.\n\n(There are a few other instances where a result is shown without apparent matching `checking`.)",
    "created_at": "2016-09-10T13:58:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230178",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:459" align="right">comment:459</div>

Anyone looked into this:

```
checking whether to check for gfanlib... yes
checking setoper.h usability... yes
checking setoper.h presence... yes
checking for setoper.h... yes
checking cdd/setoper.h usability... no
checking cdd/setoper.h presence... no
checking for cdd/setoper.h... no
checking cddlib/setoper.h usability... no
checking cddlib/setoper.h presence... no
checking for cddlib/setoper.h... no
checking whether libcddgmp is usable... checking for dd_free_global_constants... yes
yes
no
checking whether to check for polymake interface... yes
checking for polymake-config... 0
```
and

```
checking for setoper.h... yes
checking cdd/setoper.h usability... no
checking cdd/setoper.h presence... no
checking for cdd/setoper.h... no
checking cddlib/setoper.h usability... no
checking cddlib/setoper.h presence... no
checking for cddlib/setoper.h... no
checking whether libcddgmp is usable... checking for dd_free_global_constants... yes
yes
no
checking whether to check for polymake interface... yes
checking for polymake-config... 0
checking whether non-commutative subsystem should be enabled... yes
checking whether to have ratGB... no
checking built-in modules... no
checking SI_BUILTINMODULES_ADD(add)...... unset
checking BUILTIN_LIBS...... unset
```
I meant the `yes no` (more results than `checking`; above you have to scroll to the right to see the third), which appears twice in cddlib context, and just noticed the `polymake-config` result.

(There are a few other instances where a result is shown without apparent matching `checking`.)



---

archive/issue_comments_230179.json:
```json
{
    "body": "<div id=\"comment:460\" align=\"right\">comment:460</div>\n\nThanks Leif :) as for those messages `m4/ax_gfan_check.m4` (I think it is called) is littered with `AC_MSG_RESULT` commands that will have that effect - I am guessing other files may be too. In sage-on-gentoo I decided to disable `polymake` checking until further notice. It looks like `polymake` may need to be built a certain way or something.",
    "created_at": "2016-09-10T19:14:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230179",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:460" align="right">comment:460</div>

Thanks Leif :) as for those messages `m4/ax_gfan_check.m4` (I think it is called) is littered with `AC_MSG_RESULT` commands that will have that effect - I am guessing other files may be too. In sage-on-gentoo I decided to disable `polymake` checking until further notice. It looks like `polymake` may need to be built a certain way or something.



---

archive/issue_comments_230180.json:
```json
{
    "body": "<div id=\"comment:461\" align=\"right\">comment:461</div>\n\nHuh, another one:\n\n```\nsage -t --long --warn-long 98.3 src/sage/interfaces/tests.py\n**********************************************************************\nFile \"src/sage/interfaces/tests.py\", line 42, in sage.interfaces.tests\nFailed example:\n    subprocess.call(\"echo syntax error | singular\", **kwds)\nExpected:\n    0\nGot:\n    127\n**********************************************************************\n1 item had failures:\n   1 of  18 in sage.interfaces.tests\n    [17 tests, 1 failure, 6.53 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 98.3 src/sage/interfaces/tests.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n(I actually forgot to look at the result of ptestlong which finished hours ago. 8-/ )",
    "created_at": "2016-09-10T19:39:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230180",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:461" align="right">comment:461</div>

Huh, another one:

```
sage -t --long --warn-long 98.3 src/sage/interfaces/tests.py
**********************************************************************
File "src/sage/interfaces/tests.py", line 42, in sage.interfaces.tests
Failed example:
    subprocess.call("echo syntax error | singular", **kwds)
Expected:
    0
Got:
    127
**********************************************************************
1 item had failures:
   1 of  18 in sage.interfaces.tests
    [17 tests, 1 failure, 6.53 s]
----------------------------------------------------------------------
sage -t --long --warn-long 98.3 src/sage/interfaces/tests.py  # 1 doctest failed
----------------------------------------------------------------------
```
(I actually forgot to look at the result of ptestlong which finished hours ago. 8-/ )



---

archive/issue_comments_230181.json:
```json
{
    "body": "Changed commit from **[`3740cae`](https://github.com/sagemath/sagetrac-mirror/commit/3740cae41a8217de00619a01998912d3661a34fe)** to **[`76b7ea9`](https://github.com/sagemath/sagetrac-mirror/commit/76b7ea9ae8461b04870d329e886659b17badb000)**",
    "created_at": "2016-09-10T19:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230181",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3740cae`](https://github.com/sagemath/sagetrac-mirror/commit/3740cae41a8217de00619a01998912d3661a34fe)** to **[`76b7ea9`](https://github.com/sagemath/sagetrac-mirror/commit/76b7ea9ae8461b04870d329e886659b17badb000)**



---

archive/issue_comments_230182.json:
```json
{
    "body": "<div id=\"comment:462\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76b7ea9ae8461b04870d329e886659b17badb000\"><code>76b7ea9</code></a></td><td><code>Singular 4.x (#17254):  Fix last instance of lowercase singular executable usage.</code></td></tr></table>\n",
    "created_at": "2016-09-10T19:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230182",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:462"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76b7ea9ae8461b04870d329e886659b17badb000"><code>76b7ea9</code></a></td><td><code>Singular 4.x (#17254):  Fix last instance of lowercase singular executable usage.</code></td></tr></table>




---

archive/issue_events_244073.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-09-10T19:46:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244073"
}
```



---

archive/issue_events_244074.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-09-10T19:46:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244074"
}
```



---

archive/issue_comments_230183.json:
```json
{
    "body": "<div id=\"comment:463\" align=\"right\">comment:463</div>\n\nFixed.",
    "created_at": "2016-09-10T19:47:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230183",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:463" align="right">comment:463</div>

Fixed.



---

archive/issue_events_244075.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-09-10T19:47:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244075"
}
```



---

archive/issue_events_244076.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-09-10T19:47:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244076"
}
```



---

archive/issue_comments_230184.json:
```json
{
    "body": "<div id=\"comment:464\" align=\"right\">comment:464</div>\n\nIndeed I missed that one. I thought it was a message and of course on OS X (fake case sensitivity), where I ran tests, it passed.",
    "created_at": "2016-09-10T20:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230184",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:464" align="right">comment:464</div>

Indeed I missed that one. I thought it was a message and of course on OS X (fake case sensitivity), where I ran tests, it passed.



---

archive/issue_comments_230185.json:
```json
{
    "body": "<div id=\"comment:465\" align=\"right\">comment:465</div>\n\nDarn I have one failure on OS X that doesn't exist on linux\n\n```\nMirage:sage-7.2.beta5 fbissey$ ./sage -t --long --warn-long 62.6 src/sage/interfaces/singular.py\nRunning doctests with ID 2016-09-11-18-06-48-8b8f2392.\nGit branch: singular4\nUsing --optional=mpir,python2,sage\nDoctesting 1 file.\nsage -t --long --warn-long 62.6 src/sage/interfaces/singular.py\n**********************************************************************\nFile \"src/sage/interfaces/singular.py\", line 513, in sage.interfaces.singular.Singular._send_interrupt\nFailed example:\n    2*a\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/fbissey/build/sage-7.2.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/fbissey/build/sage-7.2.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.singular.Singular._send_interrupt[3]>\", line 1, in <module>\n        Integer(2)*a\n      File \"sage/rings/integer.pyx\", line 1785, in sage.rings.integer.Integer.__mul__ (/Users/fbissey/build/sage-7.2.beta5/src/build/cythonized/sage/rings/integer.c:12530)\n        return coercion_model.bin_op(left, right, operator.mul)\n      File \"sage/structure/coerce.pyx\", line 1063, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (/Users/fbissey/build/sage-7.2.beta5/src/build/cythonized/sage/structure/coerce.c:9153)\n        raise\n      File \"sage/structure/coerce.pyx\", line 1059, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (/Users/fbissey/build/sage-7.2.beta5/src/build/cythonized/sage/structure/coerce.c:9091)\n        return PyObject_CallObject(op, xy)\n      File \"sage/structure/element.pyx\", line 1739, in sage.structure.element.RingElement.__mul__ (/Users/fbissey/build/sage-7.2.beta5/src/build/cythonized/sage/structure/element.c:15124)\n        return (<RingElement>left)._mul_(right)\n      File \"sage/structure/element.pyx\", line 1746, in sage.structure.element.RingElement._mul_ (/Users/fbissey/build/sage-7.2.beta5/src/build/cythonized/sage/structure/element.c:15309)\n        cpdef _mul_(self, right):\n      File \"/Users/fbissey/build/sage-7.2.beta5/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 1385, in _mul_\n        return self._operation('*', right)\n      File \"/Users/fbissey/build/sage-7.2.beta5/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 1264, in _operation\n        raise TypeError(msg)\n    TypeError: Singular error:\n       ? `sage126` is not defined\n       ? error occurred in or before STDIN line 12: `def sage135=sage127 * sage126;`\n**********************************************************************\n1 item had failures:\n   1 of   5 in sage.interfaces.singular.Singular._send_interrupt\n    [388 tests, 1 failure, 2.65 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 62.6 src/sage/interfaces/singular.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 2.8 seconds\n    cpu time: 1.8 seconds\n    cumulative wall time: 2.6 seconds\n```",
    "created_at": "2016-09-11T07:26:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230185",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:465" align="right">comment:465</div>

Darn I have one failure on OS X that doesn't exist on linux

```
Mirage:sage-7.2.beta5 fbissey$ ./sage -t --long --warn-long 62.6 src/sage/interfaces/singular.py
Running doctests with ID 2016-09-11-18-06-48-8b8f2392.
Git branch: singular4
Using --optional=mpir,python2,sage
Doctesting 1 file.
sage -t --long --warn-long 62.6 src/sage/interfaces/singular.py
**********************************************************************
File "src/sage/interfaces/singular.py", line 513, in sage.interfaces.singular.Singular._send_interrupt
Failed example:
    2*a
Exception raised:
    Traceback (most recent call last):
      File "/Users/fbissey/build/sage-7.2.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/fbissey/build/sage-7.2.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.singular.Singular._send_interrupt[3]>", line 1, in <module>
        Integer(2)*a
      File "sage/rings/integer.pyx", line 1785, in sage.rings.integer.Integer.__mul__ (/Users/fbissey/build/sage-7.2.beta5/src/build/cythonized/sage/rings/integer.c:12530)
        return coercion_model.bin_op(left, right, operator.mul)
      File "sage/structure/coerce.pyx", line 1063, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (/Users/fbissey/build/sage-7.2.beta5/src/build/cythonized/sage/structure/coerce.c:9153)
        raise
      File "sage/structure/coerce.pyx", line 1059, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (/Users/fbissey/build/sage-7.2.beta5/src/build/cythonized/sage/structure/coerce.c:9091)
        return PyObject_CallObject(op, xy)
      File "sage/structure/element.pyx", line 1739, in sage.structure.element.RingElement.__mul__ (/Users/fbissey/build/sage-7.2.beta5/src/build/cythonized/sage/structure/element.c:15124)
        return (<RingElement>left)._mul_(right)
      File "sage/structure/element.pyx", line 1746, in sage.structure.element.RingElement._mul_ (/Users/fbissey/build/sage-7.2.beta5/src/build/cythonized/sage/structure/element.c:15309)
        cpdef _mul_(self, right):
      File "/Users/fbissey/build/sage-7.2.beta5/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 1385, in _mul_
        return self._operation('*', right)
      File "/Users/fbissey/build/sage-7.2.beta5/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 1264, in _operation
        raise TypeError(msg)
    TypeError: Singular error:
       ? `sage126` is not defined
       ? error occurred in or before STDIN line 12: `def sage135=sage127 * sage126;`
**********************************************************************
1 item had failures:
   1 of   5 in sage.interfaces.singular.Singular._send_interrupt
    [388 tests, 1 failure, 2.65 s]
----------------------------------------------------------------------
sage -t --long --warn-long 62.6 src/sage/interfaces/singular.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 2.8 seconds
    cpu time: 1.8 seconds
    cumulative wall time: 2.6 seconds
```



---

archive/issue_comments_230186.json:
```json
{
    "body": "<div id=\"comment:466\" align=\"right\">comment:466</div>\n\nIs it always exactly the same failure?",
    "created_at": "2016-09-11T10:56:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230186",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:466" align="right">comment:466</div>

Is it always exactly the same failure?



---

archive/issue_comments_230187.json:
```json
{
    "body": "<div id=\"comment:467\" align=\"right\">comment:467</div>\n\nyes.",
    "created_at": "2016-09-11T11:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230187",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:467" align="right">comment:467</div>

yes.



---

archive/issue_comments_230188.json:
```json
{
    "body": "<div id=\"comment:468\" align=\"right\">comment:468</div>\n\nOk, looking at the test (and the referenced Singular trac ticket), that's perhaps not too surprising, **of course** related to `pexpect`, and of course on MacOS X... 8-)\n\nCan you reproduce the issue directly in Singular?  (I.e., that a previously defined variable \"vanishes\" after pressing Ctrl-C on a following, incomplete line.) \n\n(And when did it last pass?)",
    "created_at": "2016-09-11T11:29:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230188",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:468" align="right">comment:468</div>

Ok, looking at the test (and the referenced Singular trac ticket), that's perhaps not too surprising, **of course** related to `pexpect`, and of course on MacOS X... 8-)

Can you reproduce the issue directly in Singular?  (I.e., that a previously defined variable "vanishes" after pressing Ctrl-C on a following, incomplete line.) 

(And when did it last pass?)



---

archive/issue_comments_230189.json:
```json
{
    "body": "<div id=\"comment:469\" align=\"right\">comment:469</div>\n\nI'll need instruction as I am only familiar with `singular` syntax for a few hours every other year :P when some debugging like this one seems necessary.\n\nAnd of course I won't be able to apply it before sometime after getting up - likely after I dealt with my backlog of official work.",
    "created_at": "2016-09-11T12:04:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230189",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:469" align="right">comment:469</div>

I'll need instruction as I am only familiar with `singular` syntax for a few hours every other year :P when some debugging like this one seems necessary.

And of course I won't be able to apply it before sometime after getting up - likely after I dealt with my backlog of official work.



---

archive/issue_comments_230190.json:
```json
{
    "body": "<div id=\"comment:470\" align=\"right\">comment:470</div>\n\nI guess it's the last commit:\n\nBranch: public/singular4 \\\\\nCommit: 76b7ea9ae8461b04870d329e886659b17**badb000** (7.4.beta2 + 128 commits)\n\nXD\n\n---\n\nYou could also try running the test in verbose mode (I'm not sure if your Singular got restarted), and playing with the parameters in the test and `_send_interrupt()` (alarm delay, delay before sending `^C`, time waiting for a prompt, and the number of times Sage tries to get the prompt, resending `;`).\n\nW.r.t. Singular syntax, compared to me you're presumably an expert. :-)\n\nOtherwise commands have to be terminated with a `;` (newline alone isn't sufficient), variable definitions look like `def foo=42;`, `foo;` evaluates the expression / prints the value of `foo`.\n\n\\\\\n\nHopefully Jeroen has a suited MacOS X box to investigate...",
    "created_at": "2016-09-11T12:57:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230190",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:470" align="right">comment:470</div>

I guess it's the last commit:

Branch: public/singular4 \\
Commit: 76b7ea9ae8461b04870d329e886659b17**badb000** (7.4.beta2 + 128 commits)

XD

---

You could also try running the test in verbose mode (I'm not sure if your Singular got restarted), and playing with the parameters in the test and `_send_interrupt()` (alarm delay, delay before sending `^C`, time waiting for a prompt, and the number of times Sage tries to get the prompt, resending `;`).

W.r.t. Singular syntax, compared to me you're presumably an expert. :-)

Otherwise commands have to be terminated with a `;` (newline alone isn't sufficient), variable definitions look like `def foo=42;`, `foo;` evaluates the expression / prints the value of `foo`.

\\

Hopefully Jeroen has a suited MacOS X box to investigate...



---

archive/issue_events_244077.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-11T22:27:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244077"
}
```



---

archive/issue_events_244078.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-11T22:27:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244078"
}
```



---

archive/issue_comments_230191.json:
```json
{
    "body": "<div id=\"comment:471\" align=\"right\">comment:471</div>\n\nI'm also getting this on Linux with SAGE_DEBUG=yes:\n\n```\n[sagetex-3.0] Done updating paths.\n[sagetex-3.0] Traceback (most recent call last):\n[sagetex-3.0]   File \"example.sagetex.sage.py\", line 4, in <module>\n[sagetex-3.0]     from sage.all_cmdline import *   # import sage library\n[sagetex-3.0]   File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/all_cmdline.py\", line 26, in <module>\n[sagetex-3.0]     from sage.all import *\n[sagetex-3.0]   File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/all.py\", line 103, in <module>\n[sagetex-3.0]     from sage.rings.all      import *\n[sagetex-3.0]   File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/all.py\", line 54, in <module>\n[sagetex-3.0]     from .number_field.all import *\n[sagetex-3.0]   File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/number_field/all.py\", line 9, in <module>\n[sagetex-3.0]     from .totallyreal import enumerate_totallyreal_fields_prim\n[sagetex-3.0]   File \"sage/rings/number_field/totallyreal_data.pxd\", line 12, in init sage.rings.number_field.totallyreal (build/cythonized/sage/rings/number_field/totallyreal.c:12118)\n[sagetex-3.0]   File \"sage/rings/number_field/totallyreal_data.pyx\", line 39, in init sage.rings.number_field.totallyreal_data (build/cythonized/sage/rings/number_field/totallyreal_data.c:12869)\n[sagetex-3.0]   File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py\", line 461, in PolynomialRing\n[sagetex-3.0]     R = _single_variate(base_ring, name, sparse, implementation)\n[sagetex-3.0]   File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py\", line 539, in _single_variate\n[sagetex-3.0]     R = m.PolynomialRing_integral_domain(base_ring, name, sparse, implementation)\n[sagetex-3.0]   File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py\", line 1582, in __init__\n[sagetex-3.0]     sparse=sparse, element_class=element_class, category=category)\n[sagetex-3.0]   File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py\", line 1453, in __init__\n[sagetex-3.0]     sparse=sparse, element_class=element_class, category=category)\n[sagetex-3.0]   File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py\", line 289, in __init__\n[sagetex-3.0]     from sage.matrix.matrix_space import MatrixSpace\n[sagetex-3.0]   File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py\", line 58, in <module>\n[sagetex-3.0]     from . import matrix_mpolynomial_dense\n[sagetex-3.0]   File \"sage/rings/polynomial/multi_polynomial_libsingular.pxd\", line 6, in init sage.matrix.matrix_mpolynomial_dense (build/cythonized/sage/matrix/matrix_mpolynomial_dense.cpp:9160)\n[sagetex-3.0] ImportError: /mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.so: undefined symbol: errorreported\n[sagetex-3.0] Error running Sage on example.sagetex.sage!\n```",
    "created_at": "2016-09-11T22:27:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230191",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:471" align="right">comment:471</div>

I'm also getting this on Linux with SAGE_DEBUG=yes:

```
[sagetex-3.0] Done updating paths.
[sagetex-3.0] Traceback (most recent call last):
[sagetex-3.0]   File "example.sagetex.sage.py", line 4, in <module>
[sagetex-3.0]     from sage.all_cmdline import *   # import sage library
[sagetex-3.0]   File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/all_cmdline.py", line 26, in <module>
[sagetex-3.0]     from sage.all import *
[sagetex-3.0]   File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/all.py", line 103, in <module>
[sagetex-3.0]     from sage.rings.all      import *
[sagetex-3.0]   File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/all.py", line 54, in <module>
[sagetex-3.0]     from .number_field.all import *
[sagetex-3.0]   File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/number_field/all.py", line 9, in <module>
[sagetex-3.0]     from .totallyreal import enumerate_totallyreal_fields_prim
[sagetex-3.0]   File "sage/rings/number_field/totallyreal_data.pxd", line 12, in init sage.rings.number_field.totallyreal (build/cythonized/sage/rings/number_field/totallyreal.c:12118)
[sagetex-3.0]   File "sage/rings/number_field/totallyreal_data.pyx", line 39, in init sage.rings.number_field.totallyreal_data (build/cythonized/sage/rings/number_field/totallyreal_data.c:12869)
[sagetex-3.0]   File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py", line 461, in PolynomialRing
[sagetex-3.0]     R = _single_variate(base_ring, name, sparse, implementation)
[sagetex-3.0]   File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py", line 539, in _single_variate
[sagetex-3.0]     R = m.PolynomialRing_integral_domain(base_ring, name, sparse, implementation)
[sagetex-3.0]   File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py", line 1582, in __init__
[sagetex-3.0]     sparse=sparse, element_class=element_class, category=category)
[sagetex-3.0]   File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py", line 1453, in __init__
[sagetex-3.0]     sparse=sparse, element_class=element_class, category=category)
[sagetex-3.0]   File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py", line 289, in __init__
[sagetex-3.0]     from sage.matrix.matrix_space import MatrixSpace
[sagetex-3.0]   File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py", line 58, in <module>
[sagetex-3.0]     from . import matrix_mpolynomial_dense
[sagetex-3.0]   File "sage/rings/polynomial/multi_polynomial_libsingular.pxd", line 6, in init sage.matrix.matrix_mpolynomial_dense (build/cythonized/sage/matrix/matrix_mpolynomial_dense.cpp:9160)
[sagetex-3.0] ImportError: /mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.so: undefined symbol: errorreported
[sagetex-3.0] Error running Sage on example.sagetex.sage!
```



---

archive/issue_comments_230192.json:
```json
{
    "body": "<div id=\"comment:472\" align=\"right\">comment:472</div>\n\nOK, at least that one I think I can understand. A `-D...` is probably incorrect in `Singular.pc` or the whole build system, when you build it with debugging. I have fought for a long time with `-DNDEBUG` in singular 3 because I don't add it by default in sage-on-gentoo.\n\nYou get exactly the same kind of error (in reverse).",
    "created_at": "2016-09-11T22:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230192",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:472" align="right">comment:472</div>

OK, at least that one I think I can understand. A `-D...` is probably incorrect in `Singular.pc` or the whole build system, when you build it with debugging. I have fought for a long time with `-DNDEBUG` in singular 3 because I don't add it by default in sage-on-gentoo.

You get exactly the same kind of error (in reverse).



---

archive/issue_comments_230193.json:
```json
{
    "body": "<div id=\"comment:473\" align=\"right\">comment:473</div>\n\nHum.... building from scratch I didn't seem to encounter this problem here. Access to the failed build would be needed here.",
    "created_at": "2016-09-11T23:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230193",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:473" align="right">comment:473</div>

Hum.... building from scratch I didn't seem to encounter this problem here. Access to the failed build would be needed here.



---

archive/issue_comments_230194.json:
```json
{
    "body": "<div id=\"comment:474\" align=\"right\">comment:474</div>\n\nOK, `omalloc.pc` is not produced with `SAGE_DEBUG=yes` and it didn't fail for me because the system one was eventually found (it is part of the require line in `Singular.pc`).\n\nSo this is a very real problem.",
    "created_at": "2016-09-12T00:30:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230194",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:474" align="right">comment:474</div>

OK, `omalloc.pc` is not produced with `SAGE_DEBUG=yes` and it didn't fail for me because the system one was eventually found (it is part of the require line in `Singular.pc`).

So this is a very real problem.



---

archive/issue_comments_230195.json:
```json
{
    "body": "<div id=\"comment:475\" align=\"right\">comment:475</div>\n\nThe long term solution would be to have xalloc to produce its own `omalloc.pc` and ship it. This will have to go in `spkg-src` I am surprised at the fact that there is no apparent patching in `spkg-src`, and where is the stuff from `patches/conditional` applied?",
    "created_at": "2016-09-12T02:10:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230195",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:475" align="right">comment:475</div>

The long term solution would be to have xalloc to produce its own `omalloc.pc` and ship it. This will have to go in `spkg-src` I am surprised at the fact that there is no apparent patching in `spkg-src`, and where is the stuff from `patches/conditional` applied?



---

archive/issue_comments_230196.json:
```json
{
    "body": "<div id=\"comment:476\" align=\"right\">comment:476</div>\n\nNew tarball, updated branch to follow.",
    "created_at": "2016-09-12T03:43:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230196",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:476" align="right">comment:476</div>

New tarball, updated branch to follow.



---

archive/issue_comments_230197.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n Original upstream tarball at `www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/`:  `singular-4.0.3p3` **dot** `tar` **dot** `gz`\n \n Modified tarball made with spkg-src at:\n-* http://perso.telecom-paristech.fr/~flori/singular-4.0.3p3.tar.bz2\n+* http://www.lmona.de/files/sage/singular-4.0.3p3.tar.bz2\n \n This corresponds to commit a070b84d whose message tells 4.0.3p3 and on which this branch was based:\n * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7\n``````\n",
    "created_at": "2016-09-12T03:43:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230197",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 Original upstream tarball at `www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/`:  `singular-4.0.3p3` **dot** `tar` **dot** `gz`
 
 Modified tarball made with spkg-src at:
-* http://perso.telecom-paristech.fr/~flori/singular-4.0.3p3.tar.bz2
+* http://www.lmona.de/files/sage/singular-4.0.3p3.tar.bz2
 
 This corresponds to commit a070b84d whose message tells 4.0.3p3 and on which this branch was based:
 * https://github.com/Singular/Sources/commit/a070b84d59be835a2946d1386edd3221d80f3fe7
``````




---

archive/issue_comments_230198.json:
```json
{
    "body": "<div id=\"comment:477\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/133832dcb111a89ba81bed127c666654a8c662ff\"><code>133832d</code></a></td><td><code>Merge branch 'develop' into singular4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a992952b7ec660423ca06e0aa3d3931435bf7ba\"><code>8a99295</code></a></td><td><code>Add a .pc file to xalloc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cda6a68102e494530426bbaf1ebb5b21e6bd4dba\"><code>cda6a68</code></a></td><td><code>Remove old, unused patch folder</code></td></tr></table>\n",
    "created_at": "2016-09-12T03:44:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230198",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:477"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/133832dcb111a89ba81bed127c666654a8c662ff"><code>133832d</code></a></td><td><code>Merge branch 'develop' into singular4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a992952b7ec660423ca06e0aa3d3931435bf7ba"><code>8a99295</code></a></td><td><code>Add a .pc file to xalloc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cda6a68102e494530426bbaf1ebb5b21e6bd4dba"><code>cda6a68</code></a></td><td><code>Remove old, unused patch folder</code></td></tr></table>




---

archive/issue_comments_230199.json:
```json
{
    "body": "Changed commit from **[`76b7ea9`](https://github.com/sagemath/sagetrac-mirror/commit/76b7ea9ae8461b04870d329e886659b17badb000)** to **[`cda6a68`](https://github.com/sagemath/sagetrac-mirror/commit/cda6a68102e494530426bbaf1ebb5b21e6bd4dba)**",
    "created_at": "2016-09-12T03:44:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230199",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`76b7ea9`](https://github.com/sagemath/sagetrac-mirror/commit/76b7ea9ae8461b04870d329e886659b17badb000)** to **[`cda6a68`](https://github.com/sagemath/sagetrac-mirror/commit/cda6a68102e494530426bbaf1ebb5b21e6bd4dba)**



---

archive/issue_comments_230200.json:
```json
{
    "body": "<div id=\"comment:478\" align=\"right\">comment:478</div>\n\nRemain the issue on OS X if someone has a clue and instructions on how to test for someone that doesn't know how to use singular.",
    "created_at": "2016-09-12T04:04:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230200",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:478" align="right">comment:478</div>

Remain the issue on OS X if someone has a clue and instructions on how to test for someone that doesn't know how to use singular.



---

archive/issue_comments_230201.json:
```json
{
    "body": "<div id=\"comment:479\" align=\"right\">comment:479</div>\n\nReplying to [@kiwifb](#comment%3A475):\n> The long term solution would be to have xalloc to produce its own `omalloc.pc` and ship it. This will have to go in `spkg-src` I am surprised at the fact that there is no apparent patching in `spkg-src`, and where is the stuff from `patches/conditional` applied?\n\nNope, I prefered to produce a patch for the autotools input and output files and apply it just before configuring.\nWhile we're at it, we could also update the `xalloc` patch part about `omConfig.h` to include upstream solution:\n* https://github.com/Singular/Sources/commit/bebd5a0361ed499fa0769cad9424e1bb193acd7c\n\nCan you also report the pkgconfig thing to upstream?",
    "created_at": "2016-09-12T08:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230201",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:479" align="right">comment:479</div>

Replying to [@kiwifb](#comment%3A475):
> The long term solution would be to have xalloc to produce its own `omalloc.pc` and ship it. This will have to go in `spkg-src` I am surprised at the fact that there is no apparent patching in `spkg-src`, and where is the stuff from `patches/conditional` applied?

Nope, I prefered to produce a patch for the autotools input and output files and apply it just before configuring.
While we're at it, we could also update the `xalloc` patch part about `omConfig.h` to include upstream solution:
* https://github.com/Singular/Sources/commit/bebd5a0361ed499fa0769cad9424e1bb193acd7c

Can you also report the pkgconfig thing to upstream?



---

archive/issue_comments_230202.json:
```json
{
    "body": "<div id=\"comment:480\" align=\"right\">comment:480</div>\n\n(I've reported the omalloc.pc issue.)",
    "created_at": "2016-09-12T08:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230202",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:480" align="right">comment:480</div>

(I've reported the omalloc.pc issue.)



---

archive/issue_comments_230203.json:
```json
{
    "body": "<div id=\"comment:481\" align=\"right\">comment:481</div>\n\nReplying to [@jpflori](#comment%3A479):\n> Replying to [@kiwifb](#comment%3A475):\n> > The long term solution would be to have xalloc to produce its own `omalloc.pc` and ship it. This will have to go in `spkg-src` I am surprised at the fact that there is no apparent patching in `spkg-src`, and where is the stuff from `patches/conditional` applied?\n\n> Nope, I prefered to produce a patch for the autotools input and output files and apply it just before configuring.\n> While we're at it, we could also update the `xalloc` patch part about `omConfig.h` to include upstream solution:\n> * https://github.com/Singular/Sources/commit/bebd5a0361ed499fa0769cad9424e1bb193acd7c\n> \n\nDoes that replace what I have called `src/xalloc-omconfig.patch` in my last series of push?",
    "created_at": "2016-09-12T08:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230203",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:481" align="right">comment:481</div>

Replying to [@jpflori](#comment%3A479):
> Replying to [@kiwifb](#comment%3A475):
> > The long term solution would be to have xalloc to produce its own `omalloc.pc` and ship it. This will have to go in `spkg-src` I am surprised at the fact that there is no apparent patching in `spkg-src`, and where is the stuff from `patches/conditional` applied?

> Nope, I prefered to produce a patch for the autotools input and output files and apply it just before configuring.
> While we're at it, we could also update the `xalloc` patch part about `omConfig.h` to include upstream solution:
> * https://github.com/Singular/Sources/commit/bebd5a0361ed499fa0769cad9424e1bb193acd7c
> 

Does that replace what I have called `src/xalloc-omconfig.patch` in my last series of push?



---

archive/issue_comments_230204.json:
```json
{
    "body": "<div id=\"comment:482\" align=\"right\">comment:482</div>\n\nYes, exactly.",
    "created_at": "2016-09-12T09:00:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230204",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:482" align="right">comment:482</div>

Yes, exactly.



---

archive/issue_comments_230205.json:
```json
{
    "body": "<div id=\"comment:483\" align=\"right\">comment:483</div>\n\nAnd one new tarball coming then :)",
    "created_at": "2016-09-12T09:04:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230205",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:483" align="right">comment:483</div>

And one new tarball coming then :)



---

archive/issue_comments_230206.json:
```json
{
    "body": "<div id=\"comment:484\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c8503c81299fd090ae5e1e948fcc6595fae4a88\"><code>3c8503c</code></a></td><td><code>adopt new upstream patch for xalloc. Make patching in spkg-src follow best practise.</code></td></tr></table>\n",
    "created_at": "2016-09-12T09:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230206",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:484"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c8503c81299fd090ae5e1e948fcc6595fae4a88"><code>3c8503c</code></a></td><td><code>adopt new upstream patch for xalloc. Make patching in spkg-src follow best practise.</code></td></tr></table>




---

archive/issue_comments_230207.json:
```json
{
    "body": "Changed commit from **[`cda6a68`](https://github.com/sagemath/sagetrac-mirror/commit/cda6a68102e494530426bbaf1ebb5b21e6bd4dba)** to **[`3c8503c`](https://github.com/sagemath/sagetrac-mirror/commit/3c8503c81299fd090ae5e1e948fcc6595fae4a88)**",
    "created_at": "2016-09-12T09:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230207",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cda6a68`](https://github.com/sagemath/sagetrac-mirror/commit/cda6a68102e494530426bbaf1ebb5b21e6bd4dba)** to **[`3c8503c`](https://github.com/sagemath/sagetrac-mirror/commit/3c8503c81299fd090ae5e1e948fcc6595fae4a88)**



---

archive/issue_comments_230208.json:
```json
{
    "body": "<div id=\"comment:485\" align=\"right\">comment:485</div>\n\nTarball changed in place. I could have broken upstream patch in bits triggering a rerun of autotools and the one that don't. But I preferred to keep it as one piece.",
    "created_at": "2016-09-12T09:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230208",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:485" align="right">comment:485</div>

Tarball changed in place. I could have broken upstream patch in bits triggering a rerun of autotools and the one that don't. But I preferred to keep it as one piece.



---

archive/issue_comments_230209.json:
```json
{
    "body": "<div id=\"comment:486\" align=\"right\">comment:486</div>\n\nOk, so it seems we are left with the pexpect issue on OS X.",
    "created_at": "2016-09-12T11:50:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230209",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:486" align="right">comment:486</div>

Ok, so it seems we are left with the pexpect issue on OS X.



---

archive/issue_comments_230210.json:
```json
{
    "body": "<div id=\"comment:487\" align=\"right\">comment:487</div>\n\n\n```\n 506 files changed, 11695 insertions(+), 5407 deletions(-)\n```\n\nThanks.\n\n---\n\nWith GCC 4.8.5 and `SAGE_DEBUG=yes`, I'm getting quite a lot doctest errors (I don't get without):\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/algebras/free_algebra.py  # 4 doctests failed\nsage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # 6 doctests failed\nsage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 2 doctests failed\nsage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # 10 doctests failed\nsage -t --long src/sage/rings/polynomial/plural.pyx  # Killed due to segmentation fault\nsage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed\nsage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed\nsage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\nWill investigate later.",
    "created_at": "2016-09-12T18:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230210",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:487" align="right">comment:487</div>


```
 506 files changed, 11695 insertions(+), 5407 deletions(-)
```

Thanks.

---

With GCC 4.8.5 and `SAGE_DEBUG=yes`, I'm getting quite a lot doctest errors (I don't get without):

```
----------------------------------------------------------------------
sage -t --long src/sage/algebras/free_algebra.py  # 4 doctests failed
sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # 6 doctests failed
sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 2 doctests failed
sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # 10 doctests failed
sage -t --long src/sage/rings/polynomial/plural.pyx  # Killed due to segmentation fault
sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed
sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed
sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed
----------------------------------------------------------------------
```

Will investigate later.



---

archive/issue_comments_230211.json:
```json
{
    "body": "<div id=\"comment:488\" align=\"right\">comment:488</div>\n\nP.S.:  I also noticed there still seem to be left-overs:\n\n```\n-rwxr-xr-x 1 leif leif 1590232 2016-09-03 03:02 local/lib/p_Procs_FieldZp.so\n-rwxr-xr-x 1 leif leif 2205960 2016-09-03 03:02 local/lib/p_Procs_FieldQ.so\n-rwxr-xr-x 1 leif leif  167344 2016-09-03 03:02 local/lib/p_Procs_FieldIndep.so\n-rwxr-xr-x 1 leif leif 4420816 2016-09-03 03:02 local/lib/p_Procs_FieldGeneral.so\n```",
    "created_at": "2016-09-12T20:28:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230211",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:488" align="right">comment:488</div>

P.S.:  I also noticed there still seem to be left-overs:

```
-rwxr-xr-x 1 leif leif 1590232 2016-09-03 03:02 local/lib/p_Procs_FieldZp.so
-rwxr-xr-x 1 leif leif 2205960 2016-09-03 03:02 local/lib/p_Procs_FieldQ.so
-rwxr-xr-x 1 leif leif  167344 2016-09-03 03:02 local/lib/p_Procs_FieldIndep.so
-rwxr-xr-x 1 leif leif 4420816 2016-09-03 03:02 local/lib/p_Procs_FieldGeneral.so
```



---

archive/issue_comments_230212.json:
```json
{
    "body": "<div id=\"comment:489\" align=\"right\">comment:489</div>\n\nReplying to [@nexttime](#comment%3A487):\n> With GCC 4.8.5 and `SAGE_DEBUG=yes`, I'm getting quite a lot doctest errors (I don't get without):\n> \n> ```\n> ----------------------------------------------------------------------\n> sage -t --long src/sage/algebras/free_algebra.py  # 4 doctests failed\n> sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # 6 doctests failed\n> sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 2 doctests failed\n> sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # 10 doctests failed\n> sage -t --long src/sage/rings/polynomial/plural.pyx  # Killed due to segmentation fault\n> sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed\n> sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed\n> sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed\n> ----------------------------------------------------------------------\n> ```\n> \n\nHopefully these are just different printings of singular objects.",
    "created_at": "2016-09-15T10:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230212",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:489" align="right">comment:489</div>

Replying to [@nexttime](#comment%3A487):
> With GCC 4.8.5 and `SAGE_DEBUG=yes`, I'm getting quite a lot doctest errors (I don't get without):
> 
> ```
> ----------------------------------------------------------------------
> sage -t --long src/sage/algebras/free_algebra.py  # 4 doctests failed
> sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # 6 doctests failed
> sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 2 doctests failed
> sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # 10 doctests failed
> sage -t --long src/sage/rings/polynomial/plural.pyx  # Killed due to segmentation fault
> sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed
> sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed
> sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed
> ----------------------------------------------------------------------
> ```
> 

Hopefully these are just different printings of singular objects.



---

archive/issue_comments_230213.json:
```json
{
    "body": "<div id=\"comment:490\" align=\"right\">comment:490</div>\n\nSomehow, I don't think a segfault in plural.pyx is just from different printings. :p",
    "created_at": "2016-09-15T12:38:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230213",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:490" align="right">comment:490</div>

Somehow, I don't think a segfault in plural.pyx is just from different printings. :p



---

archive/issue_comments_230214.json:
```json
{
    "body": "<div id=\"comment:491\" align=\"right\">comment:491</div>\n\nI fail to build it as is:\n\n```\nmake[2]: Entering directory '$sage-base/build/make'\nsage-logger -p 'sage-spkg singular-4.0.3p3' '$sage-base/logs/pkgs/singular-4.0.3p3.log'\n[singular-4.0.3p3] Found local metadata for singular-4.0.3p3\n[singular-4.0.3p3] Invalid checksum for cached file $sage-base/upstream/singular-4.0.3p3.tar.bz2, deleting\n[singular-4.0.3p3] Attempting to download package singular-4.0.3p3.tar.bz2 from mirrors\n[singular-4.0.3p3] http://www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/singular/singular-4.0.3p3.tar.bz2\n[singular-4.0.3p3] [......................................................................]\n[singular-4.0.3p3] Traceback (most recent call last):\n[singular-4.0.3p3]   File \"$sage-base/build/bin/sage-download-file\", line 28, in <module>\n[singular-4.0.3p3]     run_safe()\n[singular-4.0.3p3]   File \"$sage-basebuild/bin/../sage_bootstrap/download/cmdline.py\", line 118, in run_safe\n[singular-4.0.3p3]     run()\n[singular-4.0.3p3]   File \"$sage-base/build/bin/../sage_bootstrap/download/cmdline.py\", line 100, in run\n[singular-4.0.3p3]     app.download_tarball(args.url_or_tarball, args.destination)\n[singular-4.0.3p3]   File \"$sage-base/build/bin/../sage_bootstrap/download/app.py\", line 43, in download_tarball\n[singular-4.0.3p3]     tarball.download()\n[singular-4.0.3p3]   File \"$sage-base/build/bin/../sage_bootstrap/tarball.py\", line 163, in download\n[singular-4.0.3p3]     raise ChecksumError('checksum does not match')\n[singular-4.0.3p3] sage_bootstrap.tarball.ChecksumError: checksum does not match\nMakefile:2761: recipe for target '$sage-base/local/var/lib/sage/installed/singular-4.0.3p3' failed\n\n```",
    "created_at": "2016-09-16T23:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230214",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:491" align="right">comment:491</div>

I fail to build it as is:

```
make[2]: Entering directory '$sage-base/build/make'
sage-logger -p 'sage-spkg singular-4.0.3p3' '$sage-base/logs/pkgs/singular-4.0.3p3.log'
[singular-4.0.3p3] Found local metadata for singular-4.0.3p3
[singular-4.0.3p3] Invalid checksum for cached file $sage-base/upstream/singular-4.0.3p3.tar.bz2, deleting
[singular-4.0.3p3] Attempting to download package singular-4.0.3p3.tar.bz2 from mirrors
[singular-4.0.3p3] http://www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/singular/singular-4.0.3p3.tar.bz2
[singular-4.0.3p3] [......................................................................]
[singular-4.0.3p3] Traceback (most recent call last):
[singular-4.0.3p3]   File "$sage-base/build/bin/sage-download-file", line 28, in <module>
[singular-4.0.3p3]     run_safe()
[singular-4.0.3p3]   File "$sage-basebuild/bin/../sage_bootstrap/download/cmdline.py", line 118, in run_safe
[singular-4.0.3p3]     run()
[singular-4.0.3p3]   File "$sage-base/build/bin/../sage_bootstrap/download/cmdline.py", line 100, in run
[singular-4.0.3p3]     app.download_tarball(args.url_or_tarball, args.destination)
[singular-4.0.3p3]   File "$sage-base/build/bin/../sage_bootstrap/download/app.py", line 43, in download_tarball
[singular-4.0.3p3]     tarball.download()
[singular-4.0.3p3]   File "$sage-base/build/bin/../sage_bootstrap/tarball.py", line 163, in download
[singular-4.0.3p3]     raise ChecksumError('checksum does not match')
[singular-4.0.3p3] sage_bootstrap.tarball.ChecksumError: checksum does not match
Makefile:2761: recipe for target '$sage-base/local/var/lib/sage/installed/singular-4.0.3p3' failed

```



---

archive/issue_comments_230215.json:
```json
{
    "body": "<div id=\"comment:492\" align=\"right\">comment:492</div>\n\nThats because of [comment:485](#comment%3A485), changing the tarball in place will always lead to undesirable behavior.",
    "created_at": "2016-09-17T09:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230215",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:492" align="right">comment:492</div>

Thats because of [comment:485](#comment%3A485), changing the tarball in place will always lead to undesirable behavior.



---

archive/issue_comments_230216.json:
```json
{
    "body": "<div id=\"comment:493\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37fa8e7344a8d333d79f7c6a507f46daa5bea2d6\"><code>37fa8e7</code></a></td><td><code>Merge branch 'develop' into singular4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3ebc4ab79cca00a4f03080effcd8472023c540f\"><code>d3ebc4a</code></a></td><td><code>additional clean up</code></td></tr></table>\n",
    "created_at": "2016-09-19T04:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230216",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:493"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37fa8e7344a8d333d79f7c6a507f46daa5bea2d6"><code>37fa8e7</code></a></td><td><code>Merge branch 'develop' into singular4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3ebc4ab79cca00a4f03080effcd8472023c540f"><code>d3ebc4a</code></a></td><td><code>additional clean up</code></td></tr></table>




---

archive/issue_comments_230217.json:
```json
{
    "body": "Changed commit from **[`3c8503c`](https://github.com/sagemath/sagetrac-mirror/commit/3c8503c81299fd090ae5e1e948fcc6595fae4a88)** to **[`d3ebc4a`](https://github.com/sagemath/sagetrac-mirror/commit/d3ebc4ab79cca00a4f03080effcd8472023c540f)**",
    "created_at": "2016-09-19T04:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230217",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3c8503c`](https://github.com/sagemath/sagetrac-mirror/commit/3c8503c81299fd090ae5e1e948fcc6595fae4a88)** to **[`d3ebc4a`](https://github.com/sagemath/sagetrac-mirror/commit/d3ebc4ab79cca00a4f03080effcd8472023c540f)**



---

archive/issue_comments_230218.json:
```json
{
    "body": "<div id=\"comment:494\" align=\"right\">comment:494</div>\n\nJust tidying up.\n\nReplying to [@vbraun](#comment%3A492):\n> Thats because of [comment:485](#comment%3A485), changing the tarball in place will always lead to undesirable behavior.\n\nIn this instance because the tarball that Volker uploaded on the mirror for testing doesn't match the one I linked to in the description. It is not so much the \"in place\" I am guessing as it is \"same name\" (which arguably are the same from the point of view of the computer). If it helps I'll change the tarball name at the first opportunity.",
    "created_at": "2016-09-19T04:08:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230218",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:494" align="right">comment:494</div>

Just tidying up.

Replying to [@vbraun](#comment%3A492):
> Thats because of [comment:485](#comment%3A485), changing the tarball in place will always lead to undesirable behavior.

In this instance because the tarball that Volker uploaded on the mirror for testing doesn't match the one I linked to in the description. It is not so much the "in place" I am guessing as it is "same name" (which arguably are the same from the point of view of the computer). If it helps I'll change the tarball name at the first opportunity.



---

archive/issue_comments_230219.json:
```json
{
    "body": "<div id=\"comment:495\" align=\"right\">comment:495</div>\n\nThat's also why I did not patch in `spkg-src`: you can keep the same tarball.\nSure, then you have to include the autogenerated part of the patches into the patches...\nBut all that we currently do is in upstream git so should be removed for the next upgrade.",
    "created_at": "2016-09-20T06:51:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230219",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:495" align="right">comment:495</div>

That's also why I did not patch in `spkg-src`: you can keep the same tarball.
Sure, then you have to include the autogenerated part of the patches into the patches...
But all that we currently do is in upstream git so should be removed for the next upgrade.



---

archive/issue_comments_230220.json:
```json
{
    "body": "<div id=\"comment:496\" align=\"right\">comment:496</div>\n\nCould we try the latest snapshot from upstream to make a tarball so we don't have to worry about the patches?",
    "created_at": "2016-09-20T13:55:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230220",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:496" align="right">comment:496</div>

Could we try the latest snapshot from upstream to make a tarball so we don't have to worry about the patches?



---

archive/issue_comments_230221.json:
```json
{
    "body": "<div id=\"comment:497\" align=\"right\">comment:497</div>\n\nThat would be a nice idea but I guess there may still be a need for running autoconf at some point. Actually upstream instruction on using `xalloc` are\n\n```\nREADME for xalloc: a debug helper and alternative to omalloc\n\n- substitute in <topdir>/configure.ac and <topdir>/Makefile.am\n   omalloc by xalloc\n- in <topdir> run ./autogen.sh\n- run <topdir>/configure .....   in <builddir>\n- in <builddir> and <topdir>: save omalloc to omalloc.org, ln -s xalloc omalloc\n- run make in <builddir>\n```\nSo running autoconf before using `xalloc` is expected. Should we make a conditional patch to follow those instructions more closely. i.e. only apply the patch to configure{,.ac}/Makefile.{am,in} when DEBUG is enabled.",
    "created_at": "2016-09-20T21:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230221",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:497" align="right">comment:497</div>

That would be a nice idea but I guess there may still be a need for running autoconf at some point. Actually upstream instruction on using `xalloc` are

```
README for xalloc: a debug helper and alternative to omalloc

- substitute in <topdir>/configure.ac and <topdir>/Makefile.am
   omalloc by xalloc
- in <topdir> run ./autogen.sh
- run <topdir>/configure .....   in <builddir>
- in <builddir> and <topdir>: save omalloc to omalloc.org, ln -s xalloc omalloc
- run make in <builddir>
```
So running autoconf before using `xalloc` is expected. Should we make a conditional patch to follow those instructions more closely. i.e. only apply the patch to configure{,.ac}/Makefile.{am,in} when DEBUG is enabled.



---

archive/issue_comments_230222.json:
```json
{
    "body": "<div id=\"comment:498\" align=\"right\">comment:498</div>\n\nReplying to [@kiwifb](#comment%3A497):\n> That would be a nice idea but I guess there may still be a need for running autoconf at some point.\n\nSure there is.\n> Actually upstream instruction on using `xalloc` are\n> \n> ```\n> README for xalloc: a debug helper and alternative to omalloc\n> ```\n> }}}\n\nThese instructions are buggy :)\nIt is enough to `cd` to the `xalloc` dir, then `autoreconf` and if you want debug mode, then you delete the `omalloc` dir and `mv xalloc omalloc`.\n\nTo only use patch on top of the upstream `4.0.3p3` what you need to do is to autoreconf everything on your machine on a pristine tree and on a patched one and produce the patch.\nThen you ship the pristine tarball (or not so so pristine as we autoreconf it and indeed as you and I may use different autotools version the final autoreconfed dirs and patches may be different) and the patch to autotools input and output files. \nThat's what I did before.\nAnd even if we use different autotools version it's not that hard to pick up the useful part of the patches produced by `diff` by hand and remove all the crap only due to different autotools versions.",
    "created_at": "2016-09-20T21:39:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230222",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:498" align="right">comment:498</div>

Replying to [@kiwifb](#comment%3A497):
> That would be a nice idea but I guess there may still be a need for running autoconf at some point.

Sure there is.
> Actually upstream instruction on using `xalloc` are
> 
> ```
> README for xalloc: a debug helper and alternative to omalloc
> ```
> }}}

These instructions are buggy :)
It is enough to `cd` to the `xalloc` dir, then `autoreconf` and if you want debug mode, then you delete the `omalloc` dir and `mv xalloc omalloc`.

To only use patch on top of the upstream `4.0.3p3` what you need to do is to autoreconf everything on your machine on a pristine tree and on a patched one and produce the patch.
Then you ship the pristine tarball (or not so so pristine as we autoreconf it and indeed as you and I may use different autotools version the final autoreconfed dirs and patches may be different) and the patch to autotools input and output files. 
That's what I did before.
And even if we use different autotools version it's not that hard to pick up the useful part of the patches produced by `diff` by hand and remove all the crap only due to different autotools versions.



---

archive/issue_comments_230223.json:
```json
{
    "body": "<div id=\"comment:499\" align=\"right\">comment:499</div>\n\nIt is quite obvious to me that I shouldn't be making the next tarball. I just don't work that way. Jean-Pierre, do you mind to regenerate a new tarball and set of patches?",
    "created_at": "2016-09-20T22:49:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230223",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:499" align="right">comment:499</div>

It is quite obvious to me that I shouldn't be making the next tarball. I just don't work that way. Jean-Pierre, do you mind to regenerate a new tarball and set of patches?



---

archive/issue_comments_230224.json:
```json
{
    "body": "<div id=\"comment:500\" align=\"right\">comment:500</div>\n\nI have no intentions to work on this ticket, but I am curious how people manage these sets of patches? I know Debian has a clear infrastructure and workflow for this, but we don't seem to have any in Sage. Lately, for packages `scipoptsuite` and `gc` (#21474), I found it to be most convenient to just make a fork and then do `git format-patch` to get a set of patches to put into `patches/`.",
    "created_at": "2016-09-22T18:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230224",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:500" align="right">comment:500</div>

I have no intentions to work on this ticket, but I am curious how people manage these sets of patches? I know Debian has a clear infrastructure and workflow for this, but we don't seem to have any in Sage. Lately, for packages `scipoptsuite` and `gc` (#21474), I found it to be most convenient to just make a fork and then do `git format-patch` to get a set of patches to put into `patches/`.



---

archive/issue_comments_230225.json:
```json
{
    "body": "<div id=\"comment:501\" align=\"right\">comment:501</div>\n\nReplying to [@mkoeppe](#comment%3A500):\n> I have no intentions to work on this ticket, but I am curious how people manage these sets of patches? I know Debian has a clear infrastructure and workflow for this, but we don't seem to have any in Sage. Lately, for packages `scipoptsuite` and `gc` (#21474), I found it to be most convenient to just make a fork and then do `git format-patch` to get a set of patches to put into `patches/`.\n\nyes, that's how I (roughly) do this, too. I just use `git diff` rather than `git format-patch`. Is the latter any better?.",
    "created_at": "2016-09-22T20:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230225",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:501" align="right">comment:501</div>

Replying to [@mkoeppe](#comment%3A500):
> I have no intentions to work on this ticket, but I am curious how people manage these sets of patches? I know Debian has a clear infrastructure and workflow for this, but we don't seem to have any in Sage. Lately, for packages `scipoptsuite` and `gc` (#21474), I found it to be most convenient to just make a fork and then do `git format-patch` to get a set of patches to put into `patches/`.

yes, that's how I (roughly) do this, too. I just use `git diff` rather than `git format-patch`. Is the latter any better?.



---

archive/issue_comments_230226.json:
```json
{
    "body": "<div id=\"comment:502\" align=\"right\">comment:502</div>\n\nIt creates the patch file names from the summary lines of the git commits; and it includes a serial number.",
    "created_at": "2016-09-22T20:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230226",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:502" align="right">comment:502</div>

It creates the patch file names from the summary lines of the git commits; and it includes a serial number.



---

archive/issue_comments_230227.json:
```json
{
    "body": "<div id=\"comment:503\" align=\"right\">comment:503</div>\n\nThe pexpect issue seems to be:\n* www.singular.uni-kl.de:8002/trac/ticket/729\nMaybe we should pass the new 'r' value to 'cntrlc' to abort immediately.\n@jdemeyer: any thought about this?",
    "created_at": "2016-09-29T14:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230227",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:503" align="right">comment:503</div>

The pexpect issue seems to be:
* www.singular.uni-kl.de:8002/trac/ticket/729
Maybe we should pass the new 'r' value to 'cntrlc' to abort immediately.
@jdemeyer: any thought about this?



---

archive/issue_comments_230228.json:
```json
{
    "body": "<div id=\"comment:504\" align=\"right\">comment:504</div>\n\nIt seems Singular just decides to die:\n\n```\n> 1+\n. ^C\n   ? error occurred in or before _ line 47: `1+`^M\nAuf Wiedersehen.^M\n```",
    "created_at": "2016-09-29T14:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230228",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:504" align="right">comment:504</div>

It seems Singular just decides to die:

```
> 1+
. ^C
   ? error occurred in or before _ line 47: `1+`^M
Auf Wiedersehen.^M
```



---

archive/issue_comments_230229.json:
```json
{
    "body": "<div id=\"comment:505\" align=\"right\">comment:505</div>\n\nRunning `./sage -sh -c \"Singular --cntrlc=a\"` seems completely broken for `^C`.",
    "created_at": "2016-09-29T15:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230229",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:505" align="right">comment:505</div>

Running `./sage -sh -c "Singular --cntrlc=a"` seems completely broken for `^C`.



---

archive/issue_comments_230230.json:
```json
{
    "body": "<div id=\"comment:506\" align=\"right\">comment:506</div>\n\nReplying to [@jpflori](#comment%3A503):\n> The pexpect issue seems to be:\n> * www.singular.uni-kl.de:8002/trac/ticket/729\n\nI have not been following the whole discussion (this is comment 506 after all). Which issue are you talking about?",
    "created_at": "2016-09-29T15:02:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230230",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:506" align="right">comment:506</div>

Replying to [@jpflori](#comment%3A503):
> The pexpect issue seems to be:
> * www.singular.uni-kl.de:8002/trac/ticket/729

I have not been following the whole discussion (this is comment 506 after all). Which issue are you talking about?



---

archive/issue_comments_230231.json:
```json
{
    "body": "<div id=\"comment:507\" align=\"right\">comment:507</div>\n\nThat on the OS X buildbot the following test fails:\n\n```\n        The following works without restarting Singular::\n            sage: a = singular(1)\n            sage: _ = singular._expect.sendline('1+')  # unfinished input\n            sage: try:\n            ....:     alarm(0.5)\n            ....:     singular._expect_expr('>')  # interrupt this\n            ....: except KeyboardInterrupt:\n            ....:     pass\n            Control-C pressed.  Interrupting Singular. Please wait a few seconds...\n        We can still access a::\n            sage: 2*a\n            2\n```\n\nLogging singular output into a file, I see that when it gets interrupted, it decides to quit without further explanation (apart from auf wiedersehen).",
    "created_at": "2016-09-29T15:15:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230231",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:507" align="right">comment:507</div>

That on the OS X buildbot the following test fails:

```
        The following works without restarting Singular::
            sage: a = singular(1)
            sage: _ = singular._expect.sendline('1+')  # unfinished input
            sage: try:
            ....:     alarm(0.5)
            ....:     singular._expect_expr('>')  # interrupt this
            ....: except KeyboardInterrupt:
            ....:     pass
            Control-C pressed.  Interrupting Singular. Please wait a few seconds...
        We can still access a::
            sage: 2*a
            2
```

Logging singular output into a file, I see that when it gets interrupted, it decides to quit without further explanation (apart from auf wiedersehen).



---

archive/issue_comments_230232.json:
```json
{
    "body": "<div id=\"comment:508\" align=\"right\">comment:508</div>\n\nAnd on a machine where the tests passes:\n\n```\n> 1+\n. ^C\n;\n. ;\n   ? error occurred in or before STDIN line 48: `;`^M\n error at token `;`^M\n   ? abort...^M\n> def sage127=2;\n```",
    "created_at": "2016-09-30T07:32:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230232",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:508" align="right">comment:508</div>

And on a machine where the tests passes:

```
> 1+
. ^C
;
. ;
   ? error occurred in or before STDIN line 48: `;`^M
 error at token `;`^M
   ? abort...^M
> def sage127=2;
```



---

archive/issue_comments_230233.json:
```json
{
    "body": "<div id=\"comment:509\" align=\"right\">comment:509</div>\n\nAnd I cannot run Singular built in debug mode on that OS X machine.\nIt complains about not finding `[_]om_Info` wich I see in `libomalloc.dylib` in the `S` section.",
    "created_at": "2016-09-30T08:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230233",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:509" align="right">comment:509</div>

And I cannot run Singular built in debug mode on that OS X machine.
It complains about not finding `[_]om_Info` wich I see in `libomalloc.dylib` in the `S` section.



---

archive/issue_comments_230234.json:
```json
{
    "body": "<div id=\"comment:510\" align=\"right\">comment:510</div>\n\nDuring linking some Sage files I see\n`-lomalloc -lSingular -lpolys -lfactory -lresources`\nwhich does not look that right.",
    "created_at": "2016-09-30T09:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230234",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:510" align="right">comment:510</div>

During linking some Sage files I see
`-lomalloc -lSingular -lpolys -lfactory -lresources`
which does not look that right.



---

archive/issue_comments_230235.json:
```json
{
    "body": "<div id=\"comment:511\" align=\"right\">comment:511</div>\n\nAnyway, that's not the issue.\nMy executable has\n\n```\nbash-3.2$ nm local/bin/Singular |grep _Info\n                 U _om_Info\n```\nwhereas on a debug build on POWER7 it's in the `B` section.",
    "created_at": "2016-09-30T09:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230235",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:511" align="right">comment:511</div>

Anyway, that's not the issue.
My executable has

```
bash-3.2$ nm local/bin/Singular |grep _Info
                 U _om_Info
```
whereas on a debug build on POWER7 it's in the `B` section.



---

archive/issue_comments_230236.json:
```json
{
    "body": "<div id=\"comment:512\" align=\"right\">comment:512</div>\n\nWahtsoever, it seems Singular behaves better if I don't pass the `-t` (`--no-tty`) option...",
    "created_at": "2016-09-30T13:16:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230236",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:512" align="right">comment:512</div>

Wahtsoever, it seems Singular behaves better if I don't pass the `-t` (`--no-tty`) option...



---

archive/issue_comments_230237.json:
```json
{
    "body": "<div id=\"comment:513\" align=\"right\">comment:513</div>\n\nUnfortunately, OS X makes it **very hard** to debug your own programs when you don't have root access:\n\n```\ndtrace: failed to initialize dtrace: DTrace requires additional privileges\n```",
    "created_at": "2016-09-30T13:22:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230237",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:513" align="right">comment:513</div>

Unfortunately, OS X makes it **very hard** to debug your own programs when you don't have root access:

```
dtrace: failed to initialize dtrace: DTrace requires additional privileges
```



---

archive/issue_comments_230238.json:
```json
{
    "body": "<div id=\"comment:514\" align=\"right\">comment:514</div>\n\nOn OS X, when changing the Signal handler to do nothing at all:\n\n```c\nvoid sigint_handler(int sig)\n{\n  return;\n}\n```\nthe problem still remains.",
    "created_at": "2016-09-30T13:43:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230238",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:514" align="right">comment:514</div>

On OS X, when changing the Signal handler to do nothing at all:

```c
void sigint_handler(int sig)
{
  return;
}
```
the problem still remains.



---

archive/issue_comments_230239.json:
```json
{
    "body": "<div id=\"comment:515\" align=\"right\">comment:515</div>\n\nThe only difference made by the `-t` option stems from:\n\n```\nlatest/Singular/feOpt.cc:      case FE_OPT_NO_TTY:\nlatest/Singular/feOpt.cc-#if defined(HAVE_FEREAD) || defined(HAVE_READLINE)\nlatest/Singular/feOpt.cc:        if (feOptSpec[FE_OPT_NO_TTY].value)\nlatest/Singular/feOpt.cc-          fe_fgets_stdin=fe_fgets;\nlatest/Singular/feOpt.cc-#endif\nlatest/Singular/feOpt.cc-        return NULL;\n```\n\nAnyway, I cannot digup why this option is used.\nLet's try to discard it and live without it at first.",
    "created_at": "2016-09-30T13:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230239",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:515" align="right">comment:515</div>

The only difference made by the `-t` option stems from:

```
latest/Singular/feOpt.cc:      case FE_OPT_NO_TTY:
latest/Singular/feOpt.cc-#if defined(HAVE_FEREAD) || defined(HAVE_READLINE)
latest/Singular/feOpt.cc:        if (feOptSpec[FE_OPT_NO_TTY].value)
latest/Singular/feOpt.cc-          fe_fgets_stdin=fe_fgets;
latest/Singular/feOpt.cc-#endif
latest/Singular/feOpt.cc-        return NULL;
```

Anyway, I cannot digup why this option is used.
Let's try to discard it and live without it at first.



---

archive/issue_comments_230240.json:
```json
{
    "body": "<div id=\"comment:516\" align=\"right\">comment:516</div>\n\nOops, it just does not work:\n\n```\nsage: singular(1)\n<repr(<sage.interfaces.singular.SingularElement at 0x19cdc0f50>) failed: AttributeError: 'NoneType' object has no attribute 'group'>\n```",
    "created_at": "2016-09-30T13:47:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230240",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:516" align="right">comment:516</div>

Oops, it just does not work:

```
sage: singular(1)
<repr(<sage.interfaces.singular.SingularElement at 0x19cdc0f50>) failed: AttributeError: 'NoneType' object has no attribute 'group'>
```



---

archive/issue_comments_230241.json:
```json
{
    "body": "<div id=\"comment:517\" align=\"right\">comment:517</div>\n\nOK, some progress: in `si_set_signal`, there is this part:\n\n```\n  if (sig==SIGINT)\n    sigemptyset (&new_action.sa_mask);\n  else\n    new_action.sa_flags = SA_RESTART;\n```\nUnconditionally executing the last line (i.e. removing the `else`) fixes the problem.",
    "created_at": "2016-09-30T13:50:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230241",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:517" align="right">comment:517</div>

OK, some progress: in `si_set_signal`, there is this part:

```
  if (sig==SIGINT)
    sigemptyset (&new_action.sa_mask);
  else
    new_action.sa_flags = SA_RESTART;
```
Unconditionally executing the last line (i.e. removing the `else`) fixes the problem.



---

archive/issue_comments_230242.json:
```json
{
    "body": "<div id=\"comment:518\" align=\"right\">comment:518</div>\n\nTo finish rambling on my side I get the following on a linux system:\n\n```\n[jpflori@gcc1-power7 sage.git]$ ./sage -sh -c \"Singular -t --ticks-per-sec=1000 --cntrlc=a\"\n                     SINGULAR                                 /  Development\n A Computer Algebra System for Polynomial Computations       /   version 4.0.3\n                                                           0<\n by: W. Decker, G.-M. Greuel, G. Pfister, H. Schoenemann     \\   Jan 2016\nFB Mathematik der Universitaet, D-67653 Kaiserslautern        \\\n> ^C\nAuf Wiedersehen.\n[jpflori@gcc1-power7 sage.git]$ ./sage -sh -c \"Singular --ticks-per-sec=1000 --cntrlc=a\"\n                     SINGULAR                                 /  Development\n A Computer Algebra System for Polynomial Computations       /   version 4.0.3\n                                                           0<\n by: W. Decker, G.-M. Greuel, G. Pfister, H. Schoenemann     \\   Jan 2016\nFB Mathematik der Universitaet, D-67653 Kaiserslautern        \\\n> ^C\n;\n   ? abort...\n   ? error occurred in or before STDIN line 1: `;`\n> \n```",
    "created_at": "2016-09-30T13:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230242",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:518" align="right">comment:518</div>

To finish rambling on my side I get the following on a linux system:

```
[jpflori@gcc1-power7 sage.git]$ ./sage -sh -c "Singular -t --ticks-per-sec=1000 --cntrlc=a"
                     SINGULAR                                 /  Development
 A Computer Algebra System for Polynomial Computations       /   version 4.0.3
                                                           0<
 by: W. Decker, G.-M. Greuel, G. Pfister, H. Schoenemann     \   Jan 2016
FB Mathematik der Universitaet, D-67653 Kaiserslautern        \
> ^C
Auf Wiedersehen.
[jpflori@gcc1-power7 sage.git]$ ./sage -sh -c "Singular --ticks-per-sec=1000 --cntrlc=a"
                     SINGULAR                                 /  Development
 A Computer Algebra System for Polynomial Computations       /   version 4.0.3
                                                           0<
 by: W. Decker, G.-M. Greuel, G. Pfister, H. Schoenemann     \   Jan 2016
FB Mathematik der Universitaet, D-67653 Kaiserslautern        \
> ^C
;
   ? abort...
   ? error occurred in or before STDIN line 1: `;`
> 
```



---

archive/issue_comments_230243.json:
```json
{
    "body": "<div id=\"comment:519\" align=\"right\">comment:519</div>\n\nThe man page of `fgets()` reports:\n\n```\nRETURN VALUE\n\n       fgets() returns s on success, and NULL on error or when end of file occurs while no characters have been read.\n```\n\nThis is the problem: an error condition (such as an interrupt) and an EOF both give a `NULL` result for `fgets()` and Singular confuses these.",
    "created_at": "2016-09-30T14:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230243",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:519" align="right">comment:519</div>

The man page of `fgets()` reports:

```
RETURN VALUE

       fgets() returns s on success, and NULL on error or when end of file occurs while no characters have been read.
```

This is the problem: an error condition (such as an interrupt) and an EOF both give a `NULL` result for `fgets()` and Singular confuses these.



---

archive/issue_comments_230244.json:
```json
{
    "body": "<div id=\"comment:520\" align=\"right\">comment:520</div>\n\nFor the `sa_flags` part, it comes from this upstream commit:\n* https://github.com/Singular/Sources/commit/72de5f54f47f1606cf29342d26eea5c7ca054155",
    "created_at": "2016-09-30T14:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230244",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:520" align="right">comment:520</div>

For the `sa_flags` part, it comes from this upstream commit:
* https://github.com/Singular/Sources/commit/72de5f54f47f1606cf29342d26eea5c7ca054155



---

archive/issue_comments_230245.json:
```json
{
    "body": "<div id=\"comment:521\" align=\"right\">comment:521</div>\n\nReplying to [@jdemeyer](#comment%3A519):\n> The man page of `fgets()` reports:\n> \n> ```\n> RETURN VALUE\n> \n>        fgets() returns s on success, and NULL on error or when end of file occurs while no characters have been read.\n> ```\n> \n> This is the problem: an error condition (such as an interrupt) and an EOF both give a `NULL` result for `fgets()` and Singular confuses these.\n\nGreat!!!\nThanks for finding this.",
    "created_at": "2016-09-30T14:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230245",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:521" align="right">comment:521</div>

Replying to [@jdemeyer](#comment%3A519):
> The man page of `fgets()` reports:
> 
> ```
> RETURN VALUE
> 
>        fgets() returns s on success, and NULL on error or when end of file occurs while no characters have been read.
> ```
> 
> This is the problem: an error condition (such as an interrupt) and an EOF both give a `NULL` result for `fgets()` and Singular confuses these.

Great!!!
Thanks for finding this.



---

archive/issue_comments_230246.json:
```json
{
    "body": "<div id=\"comment:522\" align=\"right\">comment:522</div>\n\nI saw another problem with the installer: in the light of #20692, patches should be applied from `src`, not `src/latest`. Let me first fix that.",
    "created_at": "2016-09-30T15:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230246",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:522" align="right">comment:522</div>

I saw another problem with the installer: in the light of #20692, patches should be applied from `src`, not `src/latest`. Let me first fix that.



---

archive/issue_comments_230247.json:
```json
{
    "body": "<div id=\"comment:523\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e748300f263718bb06bcea91511685b5e35f6383\"><code>e748300</code></a></td><td><code>Apply Singular patches the usual way</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1a0dcc6c83ecac7ea4b0ebcd4638b7919047e58\"><code>f1a0dcc</code></a></td><td><code>Add Singular patch to fix interrupts</code></td></tr></table>\n",
    "created_at": "2016-09-30T15:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230247",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:523"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e748300f263718bb06bcea91511685b5e35f6383"><code>e748300</code></a></td><td><code>Apply Singular patches the usual way</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1a0dcc6c83ecac7ea4b0ebcd4638b7919047e58"><code>f1a0dcc</code></a></td><td><code>Add Singular patch to fix interrupts</code></td></tr></table>




---

archive/issue_comments_230248.json:
```json
{
    "body": "Changed commit from **[`d3ebc4a`](https://github.com/sagemath/sagetrac-mirror/commit/d3ebc4ab79cca00a4f03080effcd8472023c540f)** to **[`f1a0dcc`](https://github.com/sagemath/sagetrac-mirror/commit/f1a0dcc6c83ecac7ea4b0ebcd4638b7919047e58)**",
    "created_at": "2016-09-30T15:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230248",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d3ebc4a`](https://github.com/sagemath/sagetrac-mirror/commit/d3ebc4ab79cca00a4f03080effcd8472023c540f)** to **[`f1a0dcc`](https://github.com/sagemath/sagetrac-mirror/commit/f1a0dcc6c83ecac7ea4b0ebcd4638b7919047e58)**



---

archive/issue_events_244079.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-09-30T15:46:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244079"
}
```



---

archive/issue_events_244080.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-09-30T15:46:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244080"
}
```



---

archive/issue_comments_230249.json:
```json
{
    "body": "<div id=\"comment:525\" align=\"right\">comment:525</div>\n\nThis looks good, this was the last real issue.\nLet's give it a try on the bots.\n\nThere are some small issues left but I think they can be fixed on follow up tickets.",
    "created_at": "2016-09-30T17:18:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230249",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:525" align="right">comment:525</div>

This looks good, this was the last real issue.
Let's give it a try on the bots.

There are some small issues left but I think they can be fixed on follow up tickets.



---

archive/issue_events_244081.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-30T17:18:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244081"
}
```



---

archive/issue_events_244082.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-30T17:18:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244082"
}
```



---

archive/issue_comments_230250.json:
```json
{
    "body": "<div id=\"comment:526\" align=\"right\">comment:526</div>\n\nI've reported the fgets issue upstream.",
    "created_at": "2016-09-30T17:19:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230250",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:526" align="right">comment:526</div>

I've reported the fgets issue upstream.



---

archive/issue_comments_230251.json:
```json
{
    "body": "<div id=\"comment:527\" align=\"right\">comment:527</div>\n\nWhat could be improved later:\n* debug (with `xalloc`) build on OS X (`om_Info` gets undefined (`U`) in `Singular`, note that it is ok on linux (`B`), maybe depends on ocmpiler, linker vesions)\n* failing test in debug mode,\n* strange linking order (`omalloc` comes before `singular`!)\n* update to a further version including all patches (everything was reported upstream).",
    "created_at": "2016-09-30T17:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230251",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:527" align="right">comment:527</div>

What could be improved later:
* debug (with `xalloc`) build on OS X (`om_Info` gets undefined (`U`) in `Singular`, note that it is ok on linux (`B`), maybe depends on ocmpiler, linker vesions)
* failing test in debug mode,
* strange linking order (`omalloc` comes before `singular`!)
* update to a further version including all patches (everything was reported upstream).



---

archive/issue_comments_230252.json:
```json
{
    "body": "<div id=\"comment:528\" align=\"right\">comment:528</div>\n\nAbout interrupts: my patch is a big improvement but still not 100% robust. The problem is that `fgets()` is too high-level and doesn't give enough control. To do this really properly would involve the `pselect()` system call. I don't know to what extent upstream would accept this, since `pselect()` is POSIX-only.",
    "created_at": "2016-10-01T12:21:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230252",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:528" align="right">comment:528</div>

About interrupts: my patch is a big improvement but still not 100% robust. The problem is that `fgets()` is too high-level and doesn't give enough control. To do this really properly would involve the `pselect()` system call. I don't know to what extent upstream would accept this, since `pselect()` is POSIX-only.



---

archive/issue_events_244083.json:
```json
{
    "actor": "https://github.com/sagetrac-jakobkroeker",
    "created_at": "2016-10-01T18:08:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244083"
}
```



---

archive/issue_events_244084.json:
```json
{
    "actor": "https://github.com/sagetrac-jakobkroeker",
    "created_at": "2016-10-01T18:08:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244084"
}
```



---

archive/issue_comments_230253.json:
```json
{
    "body": "<div id=\"comment:529\" align=\"right\">comment:529</div>\n\nReplying to [@jdemeyer](#comment%3A528):\n> About interrupts: my patch is a big improvement but still not 100% robust. The problem is that `fgets()` is too high-level and doesn't give enough control. To do this really properly would involve the `pselect()` system call. I don't know to what extent upstream would accept this, since `pselect()` is POSIX-only.\n\n` `\n\n\nLet us use a robust interrupt handling in case `pselect()` is supported by the target OS and the flaky one only in remaining cases. \n\n=> Open a new ticket or change to `needs_work`?",
    "created_at": "2016-10-01T18:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230253",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:529" align="right">comment:529</div>

Replying to [@jdemeyer](#comment%3A528):
> About interrupts: my patch is a big improvement but still not 100% robust. The problem is that `fgets()` is too high-level and doesn't give enough control. To do this really properly would involve the `pselect()` system call. I don't know to what extent upstream would accept this, since `pselect()` is POSIX-only.

` `


Let us use a robust interrupt handling in case `pselect()` is supported by the target OS and the flaky one only in remaining cases. 

=> Open a new ticket or change to `needs_work`?



---

archive/issue_comments_230254.json:
```json
{
    "body": "<div id=\"comment:530\" align=\"right\">comment:530</div>\n\nopened a follow-up ticket #21619 for [comment:431](#comment%3A431)",
    "created_at": "2016-10-01T18:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230254",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:530" align="right">comment:530</div>

opened a follow-up ticket #21619 for [comment:431](#comment%3A431)



---

archive/issue_comments_230255.json:
```json
{
    "body": "<div id=\"comment:531\" align=\"right\">comment:531</div>\n\n`@`all authors and reviewers\n\nplease create follow-up tickets with known remaining issues \n(I find that is mandatory for 'positive review')",
    "created_at": "2016-10-01T18:28:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230255",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:531" align="right">comment:531</div>

`@`all authors and reviewers

please create follow-up tickets with known remaining issues 
(I find that is mandatory for 'positive review')



---

archive/issue_comments_230256.json:
```json
{
    "body": "<div id=\"comment:532\" align=\"right\">comment:532</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A529):\n> => Open a new ticket or change to `needs_work`?\n\nNew ticket obviously since the interrupt handling on this ticket is not worse than what we currently have in Singular-3-1-7.",
    "created_at": "2016-10-02T08:47:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230256",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:532" align="right">comment:532</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A529):
> => Open a new ticket or change to `needs_work`?

New ticket obviously since the interrupt handling on this ticket is not worse than what we currently have in Singular-3-1-7.



---

archive/issue_events_244085.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-02T08:47:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244085"
}
```



---

archive/issue_events_244086.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-02T08:47:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244086"
}
```



---

archive/issue_comments_230257.json:
```json
{
    "body": "<div id=\"comment:533\" align=\"right\">comment:533</div>\n\nReplying to [@sagetrac-jakobkroeker](#comment%3A529):\n> Let us use a robust interrupt handling in case `pselect()` is supported by the target OS and the flaky one only in remaining cases.\n\nDo you think that Singular upstream would be interested in this?",
    "created_at": "2016-10-02T09:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230257",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:533" align="right">comment:533</div>

Replying to [@sagetrac-jakobkroeker](#comment%3A529):
> Let us use a robust interrupt handling in case `pselect()` is supported by the target OS and the flaky one only in remaining cases.

Do you think that Singular upstream would be interested in this?



---

archive/issue_comments_230258.json:
```json
{
    "body": "<div id=\"comment:534\" align=\"right\">comment:534</div>\n\n> \n> Do you think that Singular upstream would be interested in this [robust interrupt handling using pselect()]?\n\nI don't think they care too much about this issue,\n\nbut I also think they will accept a patch/pull request if we do all the work.",
    "created_at": "2016-10-02T10:01:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230258",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:534" align="right">comment:534</div>

> 
> Do you think that Singular upstream would be interested in this [robust interrupt handling using pselect()]?

I don't think they care too much about this issue,

but I also think they will accept a patch/pull request if we do all the work.



---

archive/issue_comments_230259.json:
```json
{
    "body": "Changed author from **Jakob Kroeker, Jean-Pierre Flori, Jeroen Demeyer** to **Jakob Kroeker, Jean-Pierre Flori, Jeroen Demeyer, John Perry, Fran\u00e7ois Bissey, Leif Leonhardy, Dima Pasechnik**",
    "created_at": "2016-10-02T10:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230259",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed author from **Jakob Kroeker, Jean-Pierre Flori, Jeroen Demeyer** to **Jakob Kroeker, Jean-Pierre Flori, Jeroen Demeyer, John Perry, François Bissey, Leif Leonhardy, Dima Pasechnik**



---

archive/issue_comments_230260.json:
```json
{
    "body": "Changed reviewer from **Fran\u00e7ois Bissey, Jeroen Demeyer, Ben Hutz, Leif Leonhardy, Dima Pasechnik** to **Fran\u00e7ois Bissey, Jeroen Demeyer, Ben Hutz, Leif Leonhardy, Dima Pasechnik, Travis Scrimshaw**",
    "created_at": "2016-10-02T10:20:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230260",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Changed reviewer from **François Bissey, Jeroen Demeyer, Ben Hutz, Leif Leonhardy, Dima Pasechnik** to **François Bissey, Jeroen Demeyer, Ben Hutz, Leif Leonhardy, Dima Pasechnik, Travis Scrimshaw**



---

archive/issue_comments_230261.json:
```json
{
    "body": "<div id=\"comment:537\" align=\"right\">comment:537</div>\n\n* For debug mode: #21624\n* For linking order: #21625\n* I did not open a follow up ticket for the next upgrade for obvious reasons.",
    "created_at": "2016-10-03T10:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230261",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:537" align="right">comment:537</div>

* For debug mode: #21624
* For linking order: #21625
* I did not open a follow up ticket for the next upgrade for obvious reasons.



---

archive/issue_comments_230262.json:
```json
{
    "body": "<div id=\"comment:538\" align=\"right\">comment:538</div>\n\nReplying to [@jpflori](#comment%3A498):\n> Replying to [@kiwifb](#comment%3A497):\n> > That would be a nice idea but I guess there may still be a need for running autoconf at some point.\n\n> Sure there is.\n> > Actually upstream instruction on using `xalloc` are\n> > \n> > ```\n> > README for xalloc: a debug helper and alternative to omalloc\n> > ```\n> > }}}\n\n> These instructions are buggy :)\n> It is enough to `cd` to the `xalloc` dir, then `autoreconf` and if you want debug mode, then you delete the `omalloc` dir and `mv xalloc omalloc`.\n> \n> To only use patch on top of the upstream `4.0.3p3` what you need to do is to autoreconf everything on your machine on a pristine tree and on a patched one and produce the patch.\n\n \n\nIs it possible to change the upstream source in a way that we do not need an autoreconf for xalloc? For example, would it be sufficient to add \n\n```\nAC_CONFIG_SUBDIRS([xalloc])\n```\n\nto the `configure.ac` at upstream?\n\nWhatever is required to get rid of repackaging/autoreconf, we should do that.",
    "created_at": "2016-10-03T17:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230262",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:538" align="right">comment:538</div>

Replying to [@jpflori](#comment%3A498):
> Replying to [@kiwifb](#comment%3A497):
> > That would be a nice idea but I guess there may still be a need for running autoconf at some point.

> Sure there is.
> > Actually upstream instruction on using `xalloc` are
> > 
> > ```
> > README for xalloc: a debug helper and alternative to omalloc
> > ```
> > }}}

> These instructions are buggy :)
> It is enough to `cd` to the `xalloc` dir, then `autoreconf` and if you want debug mode, then you delete the `omalloc` dir and `mv xalloc omalloc`.
> 
> To only use patch on top of the upstream `4.0.3p3` what you need to do is to autoreconf everything on your machine on a pristine tree and on a patched one and produce the patch.

 

Is it possible to change the upstream source in a way that we do not need an autoreconf for xalloc? For example, would it be sufficient to add 

```
AC_CONFIG_SUBDIRS([xalloc])
```

to the `configure.ac` at upstream?

Whatever is required to get rid of repackaging/autoreconf, we should do that.



---

archive/issue_events_244087.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-03T17:47:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244087"
}
```



---

archive/issue_events_244088.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-03T17:47:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244088"
}
```



---

archive/issue_comments_230263.json:
```json
{
    "body": "<div id=\"comment:539\" align=\"right\">comment:539</div>\n\nThere is already a different .p3 tarball on the mirrors, so we first have to propagate an updated tarball. And the master fileserver is currently down.",
    "created_at": "2016-10-03T17:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230263",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:539" align="right">comment:539</div>

There is already a different .p3 tarball on the mirrors, so we first have to propagate an updated tarball. And the master fileserver is currently down.



---

archive/issue_comments_230264.json:
```json
{
    "body": "<div id=\"comment:540\" align=\"right\">comment:540</div>\n\nReplying to [@jpflori](#comment%3A537):\n> * For debug mode: #21624\n> * For linking order: #21625\n> * I did not open a follow up ticket for the next upgrade for obvious reasons.\n\nThere is now a metaticket #21632 to collect the remaining issues.",
    "created_at": "2016-10-03T18:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230264",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:540" align="right">comment:540</div>

Replying to [@jpflori](#comment%3A537):
> * For debug mode: #21624
> * For linking order: #21625
> * I did not open a follow up ticket for the next upgrade for obvious reasons.

There is now a metaticket #21632 to collect the remaining issues.



---

archive/issue_comments_230265.json:
```json
{
    "body": "<div id=\"comment:541\" align=\"right\">comment:541</div>\n\nI'm sorry, but since this thread is read by some Singular interface experts, \nI would like to advertise the tickets #17696, #13999, #17697, #10708, #12529. \n\nCould you have a look?",
    "created_at": "2016-10-03T20:28:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230265",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:541" align="right">comment:541</div>

I'm sorry, but since this thread is read by some Singular interface experts, 
I would like to advertise the tickets #17696, #13999, #17697, #10708, #12529. 

Could you have a look?



---

archive/issue_comments_230266.json:
```json
{
    "body": "<div id=\"comment:542\" align=\"right\">comment:542</div>\n\nnow xalloc folder should be autoconfigured upstream,\n(if I did it right);\nsee https://github.com/Singular/Sources/pull/795",
    "created_at": "2016-10-04T19:58:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230266",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:542" align="right">comment:542</div>

now xalloc folder should be autoconfigured upstream,
(if I did it right);
see https://github.com/Singular/Sources/pull/795



---

archive/issue_comments_230267.json:
```json
{
    "body": "<div id=\"comment:543\" align=\"right\">comment:543</div>\n\nI hacked into the patchbot allowing unsafe tickets and got the following:\n\n```\n> Successfully unpacked\nSha1 of singular-4.0.3p3.tar.bz2 is dd68e84ef7d0e6c35994e0fce0faa8edf38a7bb1\nTraceback (most recent call last):\n  File \"/home/jakobkroeker/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py\", line 1046, in test_a_ticket\n    self.check_spkg(spkg)\n  File \"/home/jakobkroeker/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py\", line 1227, in check_spkg\n    given_sha = open(path).read().splitlines()[1].split('=')[1]\nIOError: [Errno 2] No such file or directory: 'build/pkgs/singular/checksums.ini'\nhttp://www.lmona.de/files/sage/singular-4.0.3p3.tar.bz2 -- 26 seconds\nApply -- 7751 seconds\nhttp://www.lmona.de/files/sage/singular-4.0.3p3.tar.bz2 -- 26 seconds\n2016-10-04 21:51:04\n7777 seconds\n[2016-10-04 21:51:06] Reporting #17254 with status Spkg\nfatal: Unable to read current working directory: Datei oder Verzeichnis nicht gefunden\nTraceback (most recent call last):\n  File \"/home/jakobkroeker/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py\", line 1328, in report_ticket\n    tags = [describe_branch('patchbot/base', tag_only=True),\n  File \"/home/jakobkroeker/.local/lib/python2.7/site-packages/sage_patchbot/util.py\", line 235, in describe_branch\n    universal_newlines=True)\n  File \"/usr/lib/python2.7/subprocess.py\", line 544, in check_output\n    raise CalledProcessError(retcode, cmd, output=output)\nCalledProcessError: Command '['git', 'describe', '--tags', '--match', '[0-9].[0-9]*', 'patchbot/base']' returned non-zero exit status 128\n[2016-10-04 21:51:06] #17254: Spkg\nREPORT\n{'base': '7.4.beta6',\n 'deps': [17635],\n 'machine': ['Ubuntu',\n             '12.04',\n             'x86_64',\n             '3.2.0-70-generic',\n             'x200t-ThinkPad-X200-Tablet'],\n 'owner': 'unknown owner',\n 'patchbot_version': '2.6.3',\n 'plugins': [],\n 'spkgs': [u'http://www.lmona.de/files/sage/singular-4.0.3p3.tar.bz2'],\n 'status': 'Spkg',\n 'time': '2016-10-04 21:51:06',\n 'user': 'jakobkroeker'}\n17254: Spkg\nok (report successfully posted)\n[2016-10-04 21:51:15] Done reporting #17254\nTraceback (most recent call last):\n  File \"/home/jakobkroeker/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py\", line 1509, in main\n    patchbot.test_a_ticket(ticket)\n  File \"/home/jakobkroeker/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py\", line 1185, in test_a_ticket\n    shutil.rmtree(maybe_temp_root)\n  File \"/usr/lib/python2.7/shutil.py\", line 237, in rmtree\n    onerror(os.listdir, path, sys.exc_info())\n  File \"/usr/lib/python2.7/shutil.py\", line 235, in rmtree\n    names = os.listdir(path)\nOSError: [Errno 2] No such file or directory: '/tmp/tmp8iZiiy-sage-git-temp-17254'\n\n\n```",
    "created_at": "2016-10-04T22:17:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230267",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:543" align="right">comment:543</div>

I hacked into the patchbot allowing unsafe tickets and got the following:

```
> Successfully unpacked
Sha1 of singular-4.0.3p3.tar.bz2 is dd68e84ef7d0e6c35994e0fce0faa8edf38a7bb1
Traceback (most recent call last):
  File "/home/jakobkroeker/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py", line 1046, in test_a_ticket
    self.check_spkg(spkg)
  File "/home/jakobkroeker/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py", line 1227, in check_spkg
    given_sha = open(path).read().splitlines()[1].split('=')[1]
IOError: [Errno 2] No such file or directory: 'build/pkgs/singular/checksums.ini'
http://www.lmona.de/files/sage/singular-4.0.3p3.tar.bz2 -- 26 seconds
Apply -- 7751 seconds
http://www.lmona.de/files/sage/singular-4.0.3p3.tar.bz2 -- 26 seconds
2016-10-04 21:51:04
7777 seconds
[2016-10-04 21:51:06] Reporting #17254 with status Spkg
fatal: Unable to read current working directory: Datei oder Verzeichnis nicht gefunden
Traceback (most recent call last):
  File "/home/jakobkroeker/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py", line 1328, in report_ticket
    tags = [describe_branch('patchbot/base', tag_only=True),
  File "/home/jakobkroeker/.local/lib/python2.7/site-packages/sage_patchbot/util.py", line 235, in describe_branch
    universal_newlines=True)
  File "/usr/lib/python2.7/subprocess.py", line 544, in check_output
    raise CalledProcessError(retcode, cmd, output=output)
CalledProcessError: Command '['git', 'describe', '--tags', '--match', '[0-9].[0-9]*', 'patchbot/base']' returned non-zero exit status 128
[2016-10-04 21:51:06] #17254: Spkg
REPORT
{'base': '7.4.beta6',
 'deps': [17635],
 'machine': ['Ubuntu',
             '12.04',
             'x86_64',
             '3.2.0-70-generic',
             'x200t-ThinkPad-X200-Tablet'],
 'owner': 'unknown owner',
 'patchbot_version': '2.6.3',
 'plugins': [],
 'spkgs': [u'http://www.lmona.de/files/sage/singular-4.0.3p3.tar.bz2'],
 'status': 'Spkg',
 'time': '2016-10-04 21:51:06',
 'user': 'jakobkroeker'}
17254: Spkg
ok (report successfully posted)
[2016-10-04 21:51:15] Done reporting #17254
Traceback (most recent call last):
  File "/home/jakobkroeker/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py", line 1509, in main
    patchbot.test_a_ticket(ticket)
  File "/home/jakobkroeker/.local/lib/python2.7/site-packages/sage_patchbot/patchbot.py", line 1185, in test_a_ticket
    shutil.rmtree(maybe_temp_root)
  File "/usr/lib/python2.7/shutil.py", line 237, in rmtree
    onerror(os.listdir, path, sys.exc_info())
  File "/usr/lib/python2.7/shutil.py", line 235, in rmtree
    names = os.listdir(path)
OSError: [Errno 2] No such file or directory: '/tmp/tmp8iZiiy-sage-git-temp-17254'


```



---

archive/issue_events_244089.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-21T07:04:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244089"
}
```



---

archive/issue_events_244090.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d34fb70c1b0fc88024d9364bc5993d8549021644",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-10-21T07:04:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17254#event-244090"
}
```



---

archive/issue_comments_230268.json:
```json
{
    "body": "Changed branch from **[public/singular4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular4)** to **[`f1a0dcc`](https://github.com/sagemath/sagetrac-mirror/commit/f1a0dcc6c83ecac7ea4b0ebcd4638b7919047e58)**",
    "created_at": "2016-10-21T07:04:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230268",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/singular4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular4)** to **[`f1a0dcc`](https://github.com/sagemath/sagetrac-mirror/commit/f1a0dcc6c83ecac7ea4b0ebcd4638b7919047e58)**



---

archive/issue_comments_230269.json:
```json
{
    "body": "<div id=\"comment:545\" align=\"right\">comment:545</div>\n\nFinally! Where is the party?",
    "created_at": "2016-10-21T08:10:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230269",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:545" align="right">comment:545</div>

Finally! Where is the party?



---

archive/issue_comments_230270.json:
```json
{
    "body": "Changed commit from **[`f1a0dcc`](https://github.com/sagemath/sagetrac-mirror/commit/f1a0dcc6c83ecac7ea4b0ebcd4638b7919047e58)** to none",
    "created_at": "2016-10-21T08:10:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230270",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`f1a0dcc`](https://github.com/sagemath/sagetrac-mirror/commit/f1a0dcc6c83ecac7ea4b0ebcd4638b7919047e58)** to none



---

archive/issue_comments_230271.json:
```json
{
    "body": "<div id=\"comment:546\" align=\"right\">comment:546</div>\n\nReplying to [@jdemeyer](#comment%3A545):\n> Finally! Where is the party?\n\nI could invite you to my place but I gather it is a bit far for everyone else :) I'll be experimenting with 4.0.3p4 and ntl-10 once I have absorbed 7.5.beta0.",
    "created_at": "2016-10-21T08:41:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230271",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:546" align="right">comment:546</div>

Replying to [@jdemeyer](#comment%3A545):
> Finally! Where is the party?

I could invite you to my place but I gather it is a bit far for everyone else :) I'll be experimenting with 4.0.3p4 and ntl-10 once I have absorbed 7.5.beta0.



---

archive/issue_comments_230272.json:
```json
{
    "body": "<div id=\"comment:547\" align=\"right\">comment:547</div>\n\nIt would be nice if the debug mode (#21624) could be fixed as that is tested on the buildbot...",
    "created_at": "2016-10-21T09:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17254",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17254#issuecomment-230272",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:547" align="right">comment:547</div>

It would be nice if the debug mode (#21624) could be fixed as that is tested on the buildbot...
