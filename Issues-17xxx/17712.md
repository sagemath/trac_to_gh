# Issue 17712: Adds memoization to the branch and bound for vertex separation

archive/issues_017475.json:
```json
{
    "body": "This patch adds to the branch and bound algorithm for the vertex separation (#17647) a kind of memoization tool for storing prefixes as proposed in [CMN14]. This can significantly reduce the number of nodes of the branch-and-bound tree to consider.\n\n\nReference:\n[CMN14] D. Coudert, D. Mazauric, N. Nisse. *Experimental Evaluation of a Branch and Bound Algorithm for computing Pathwidth*. In SEA'13, LNCS vol. 8504, pp.46-58, 2014.\n\nCC:  @nathanncohen\n\nBranch/Commit: 93e9a0ab8ffae7ae695e51f8a89ca72994c3a9de\n\nReviewer: Nathann Cohen\n\nAuthor: David Coudert\n\nDependencies: #17711\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17712\n\n",
    "closed_at": "2015-02-18T23:22:42Z",
    "created_at": "2015-02-01T14:59:18Z",
    "labels": [
        "component: graph theory",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Adds memoization to the branch and bound for vertex separation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17712",
    "user": "https://github.com/dcoudert"
}
```
This patch adds to the branch and bound algorithm for the vertex separation (#17647) a kind of memoization tool for storing prefixes as proposed in [CMN14]. This can significantly reduce the number of nodes of the branch-and-bound tree to consider.


Reference:
[CMN14] D. Coudert, D. Mazauric, N. Nisse. *Experimental Evaluation of a Branch and Bound Algorithm for computing Pathwidth*. In SEA'13, LNCS vol. 8504, pp.46-58, 2014.

CC:  @nathanncohen

Branch/Commit: 93e9a0ab8ffae7ae695e51f8a89ca72994c3a9de

Reviewer: Nathann Cohen

Author: David Coudert

Dependencies: #17711

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17712





---

archive/issue_comments_307260.json:
```json
{
    "body": "Changing branch from \"\" to \"public/17112\"",
    "created_at": "2015-02-04T00:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307260",
    "user": "https://github.com/dcoudert"
}
```

Changing branch from "" to "public/17112"



---

archive/issue_comments_307261.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#17711\"",
    "created_at": "2015-02-04T00:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307261",
    "user": "https://github.com/dcoudert"
}
```

Changing dependencies from "" to "#17711"



---

archive/issue_comments_307262.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This patch adds to the branch and bound algorithm for the vertex separation (#17647) a memoization tool for storing prefixes as proposed in [CMN14]. This can significantly speed up the computation time.\n+This patch adds to the branch and bound algorithm for the vertex separation (#17647) a kind of memoization tool for storing prefixes as proposed in [CMN14]. This can significantly reduce the number of nodes of the branch-and-bound tree to consider.\n \n \n Reference:\n``````\n",
    "created_at": "2015-02-04T00:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307262",
    "user": "https://github.com/dcoudert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This patch adds to the branch and bound algorithm for the vertex separation (#17647) a memoization tool for storing prefixes as proposed in [CMN14]. This can significantly speed up the computation time.
+This patch adds to the branch and bound algorithm for the vertex separation (#17647) a kind of memoization tool for storing prefixes as proposed in [CMN14]. This can significantly reduce the number of nodes of the branch-and-bound tree to consider.
 
 
 Reference:
``````




---

archive/issue_comments_307263.json:
```json
{
    "body": "Changing commit from \"\" to \"8dd34cd88b0463af0a1c2ad47560ea77a1543bf0\"",
    "created_at": "2015-02-05T15:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307263",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "8dd34cd88b0463af0a1c2ad47560ea77a1543bf0"



---

archive/issue_comments_307264.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                          |                                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|\n|[cfc96a0](https://github.com/sagemath/sagetrac-mirror/commit/cfc96a02340514f80e325cae30d4ec4d161e59ca)|`Merge branch 'public/17647b' of git://trac.sagemath.org/sage into tmp`|\n|[8c666ae](https://github.com/sagemath/sagetrac-mirror/commit/8c666aef83a2b61f9b7754662581d0438bb796c8)|`trac#17711: expose BAB in vertex_separation`|\n|[62dd7c8](https://github.com/sagemath/sagetrac-mirror/commit/62dd7c8f7769e8d2b6ac8a5c288a6f85ed8f2a4c)|`trac#17711: Let MILP work with Graph as well`|\n|[f6f4975](https://github.com/sagemath/sagetrac-mirror/commit/f6f49752b598dc717b026d725732fea5fe0c9865)|`trac#17711: Let exp work with Graph as well`|\n|[d1b63ba](https://github.com/sagemath/sagetrac-mirror/commit/d1b63ba1057021fc91b373978e7ca7e186d0af14)|`trac#17711: Let lower_bound to work with Graph as well and clean lots of tests`|\n|[f627165](https://github.com/sagemath/sagetrac-mirror/commit/f62716539aaf4c236041d1e31dbf59bcb8bba750)|`trac#17711: adds decomposition into strongly connected components`|\n|[085a3cd](https://github.com/sagemath/sagetrac-mirror/commit/085a3cddacc561236db1fde9d42b97eaa085b764)|`trac #17711: Mostly removing trailing whitespaces`|\n|[0d9da78](https://github.com/sagemath/sagetrac-mirror/commit/0d9da78b0d3f7d7ba6caa74f5e51eec82f218302)|`trac #17711: handle connected components`|\n|[6baf83e](https://github.com/sagemath/sagetrac-mirror/commit/6baf83e733555c22f287692f107eec954e494d59)|`trac #17711: minor edit`|\n|[8dd34cd](https://github.com/sagemath/sagetrac-mirror/commit/8dd34cd88b0463af0a1c2ad47560ea77a1543bf0)|`trac #17712: add prefix storage to BAB`|",
    "created_at": "2015-02-05T15:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307264",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                          |                                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|
|[cfc96a0](https://github.com/sagemath/sagetrac-mirror/commit/cfc96a02340514f80e325cae30d4ec4d161e59ca)|`Merge branch 'public/17647b' of git://trac.sagemath.org/sage into tmp`|
|[8c666ae](https://github.com/sagemath/sagetrac-mirror/commit/8c666aef83a2b61f9b7754662581d0438bb796c8)|`trac#17711: expose BAB in vertex_separation`|
|[62dd7c8](https://github.com/sagemath/sagetrac-mirror/commit/62dd7c8f7769e8d2b6ac8a5c288a6f85ed8f2a4c)|`trac#17711: Let MILP work with Graph as well`|
|[f6f4975](https://github.com/sagemath/sagetrac-mirror/commit/f6f49752b598dc717b026d725732fea5fe0c9865)|`trac#17711: Let exp work with Graph as well`|
|[d1b63ba](https://github.com/sagemath/sagetrac-mirror/commit/d1b63ba1057021fc91b373978e7ca7e186d0af14)|`trac#17711: Let lower_bound to work with Graph as well and clean lots of tests`|
|[f627165](https://github.com/sagemath/sagetrac-mirror/commit/f62716539aaf4c236041d1e31dbf59bcb8bba750)|`trac#17711: adds decomposition into strongly connected components`|
|[085a3cd](https://github.com/sagemath/sagetrac-mirror/commit/085a3cddacc561236db1fde9d42b97eaa085b764)|`trac #17711: Mostly removing trailing whitespaces`|
|[0d9da78](https://github.com/sagemath/sagetrac-mirror/commit/0d9da78b0d3f7d7ba6caa74f5e51eec82f218302)|`trac #17711: handle connected components`|
|[6baf83e](https://github.com/sagemath/sagetrac-mirror/commit/6baf83e733555c22f287692f107eec954e494d59)|`trac #17711: minor edit`|
|[8dd34cd](https://github.com/sagemath/sagetrac-mirror/commit/8dd34cd88b0463af0a1c2ad47560ea77a1543bf0)|`trac #17712: add prefix storage to BAB`|



---

archive/issue_comments_307265.json:
```json
{
    "body": "Changing commit from \"8dd34cd88b0463af0a1c2ad47560ea77a1543bf0\" to \"1a33d044aa565ef4ea574d33d8010c634a17699a\"",
    "created_at": "2015-02-05T16:02:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307265",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8dd34cd88b0463af0a1c2ad47560ea77a1543bf0" to "1a33d044aa565ef4ea574d33d8010c634a17699a"



---

archive/issue_comments_307266.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[1a33d04](https://github.com/sagemath/sagetrac-mirror/commit/1a33d044aa565ef4ea574d33d8010c634a17699a)|`trac #17712: some cleaning`|",
    "created_at": "2015-02-05T16:02:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307266",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[1a33d04](https://github.com/sagemath/sagetrac-mirror/commit/1a33d044aa565ef4ea574d33d8010c634a17699a)|`trac #17712: some cleaning`|



---

archive/issue_comments_307267.json:
```json
{
    "body": "<a id='comment:4'></a>\nI have pushed a first draft for storing prefixes.\nWe can certainly reduce further the computation time, but I don't know how. Also, I tried to be as simple as possible.\n\nDavid.",
    "created_at": "2015-02-05T16:04:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307267",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
I have pushed a first draft for storing prefixes.
We can certainly reduce further the computation time, but I don't know how. Also, I tried to be as simple as possible.

David.



---

archive/issue_comments_307268.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-02-05T16:04:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307268",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_307269.json:
```json
{
    "body": "<a id='comment:5'></a>\nHello David,\n\nA short review before going to sleep:\n\n1) You do not seem to do anything at all with `max_prefix_number`.\n\n2) You add parameters in `path_decomposition` but you don't do\nanything with them.\n\n3) Given that you seem to only store sets of integers, I am\ntempted to think that you should prefer `FrozenBitset` objects\nover `frozenset`. They should give you a faster hash/equality\ntest.\n\n4) There are many empty docstrings in the methods of\n`PrefixStorage`. And to be honest, considering the amount of doc\nit takes to implement all of that, I wonder if it would not be\nbetter to leave it all in the code, without creating a new\nclass. \"Just a dictionary whose keys are bitsets\".\n\nIn order to not have too many things in the actual\nbranch-and-bound, it may be enough to have just a couple of\nfunctions (your update/is_known_prefix) taking a dictionary as an\nadditional argument.\n\nGood night,\n\nNathann",
    "created_at": "2015-02-05T22:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307269",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Hello David,

A short review before going to sleep:

1) You do not seem to do anything at all with `max_prefix_number`.

2) You add parameters in `path_decomposition` but you don't do
anything with them.

3) Given that you seem to only store sets of integers, I am
tempted to think that you should prefer `FrozenBitset` objects
over `frozenset`. They should give you a faster hash/equality
test.

4) There are many empty docstrings in the methods of
`PrefixStorage`. And to be honest, considering the amount of doc
it takes to implement all of that, I wonder if it would not be
better to leave it all in the code, without creating a new
class. "Just a dictionary whose keys are bitsets".

In order to not have too many things in the actual
branch-and-bound, it may be enough to have just a couple of
functions (your update/is_known_prefix) taking a dictionary as an
additional argument.

Good night,

Nathann



---

archive/issue_comments_307270.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-05T22:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307270",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_307271.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[1181090](https://github.com/sagemath/sagetrac-mirror/commit/1181090c4d48f10b1bc20daa517c5396b6d27083)|`trac #17712: improvements`|",
    "created_at": "2015-02-05T22:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[1181090](https://github.com/sagemath/sagetrac-mirror/commit/1181090c4d48f10b1bc20daa517c5396b6d27083)|`trac #17712: improvements`|



---

archive/issue_comments_307272.json:
```json
{
    "body": "Changing commit from \"1a33d044aa565ef4ea574d33d8010c634a17699a\" to \"1181090c4d48f10b1bc20daa517c5396b6d27083\"",
    "created_at": "2015-02-05T22:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307272",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1a33d044aa565ef4ea574d33d8010c634a17699a" to "1181090c4d48f10b1bc20daa517c5396b6d27083"



---

archive/issue_comments_307273.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [ncohen](#comment%3A5):\n> Hello David,\n> \n> A short review before going to sleep:\n> \n> 1) You do not seem to do anything at all with `max_prefix_number`.\n\n\nNow used. I forgot some parts. Surprizingly you are less efficient when the heating system of your building is broken during winter time...\n\nAlso I'm now only recording 1 boolean per prefix. We don't need to store the cost.\n \n> 2) You add parameters in `path_decomposition` but you don't do\n> anything with them.\n\nFixed\n  \n> 3) Given that you seem to only store sets of integers, I am\n> tempted to think that you should prefer `FrozenBitset` objects\n> over `frozenset`. They should give you a faster hash/equality\n> test.\n\nMy tests gives better performances with `frozenset`. But if you have better ideas...\n  \n> 4) There are many empty docstrings in the methods of\n> `PrefixStorage`. And to be honest, considering the amount of doc\n> it takes to implement all of that, I wonder if it would not be\n> better to leave it all in the code, without creating a new\n> class. \"Just a dictionary whose keys are bitsets\".\n> \n> In order to not have too many things in the actual\n> branch-and-bound, it may be enough to have just a couple of\n> functions (your update/is_known_prefix) taking a dictionary as an\n> additional argument.\n\nThe main advantage of the class is to hide all the parameters. It is very useful to be able to tune these parameters according the amount of memory you have. Passing the dict as parameter, we would also have to pass other parameters.\nI'm not convinced that it would really be shorter to have 2 functions instead of this class. \n\nWe could however save the `enable_prefix_storage` parameter since we can obtain the same behavior setting `max_prefix_length=0`.\n\n \n> Good night,\n> \n> Nathann\n\n\n\nIf you want to know the kind of speedup we get for a quite hard instance:\n\n```\nsage: G = graphs.MycielskiGraph(5)\nsage: %timeit vs, seq = VS.vertex_separation_BAB(G, enable_prefix_storage=True)\n1000 loops, best of 3: 1.3 ms per loop\nsage: %timeit vs, seq = VS.vertex_separation_BAB(G, enable_prefix_storage=False)\n100 loops, best of 3: 2.19 ms per loop\n\nsage: G = graphs.MycielskiGraph(6)\nsage: %timeit vs, seq = VS.vertex_separation_BAB(G, max_prefix_length=20)\n1 loops, best of 3: 1.05 s per loop\nsage: %timeit vs, seq = VS.vertex_separation_BAB(G, max_prefix_length=10)\n1 loops, best of 3: 1.84 s per loop\nsage: %timeit vs, seq = VS.vertex_separation_BAB(G, max_prefix_length=8)\n1 loops, best of 3: 12 s per loop\nsage: %timeit vs, seq = VS.vertex_separation_BAB(G, max_prefix_length=7)\n1 loops, best of 3: 40.8 s per loop\n```\n\nI have not tested `VS.vertex_separation_BAB(G, enable_prefix_storage=False)` with this version of the prefix storage. With a former version (using trees and so much more ugly code) it was around 40min, so with dict should be more than 1h\n\nDavid.",
    "created_at": "2015-02-05T23:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307273",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>
Replying to [ncohen](#comment%3A5):
> Hello David,
> 
> A short review before going to sleep:
> 
> 1) You do not seem to do anything at all with `max_prefix_number`.


Now used. I forgot some parts. Surprizingly you are less efficient when the heating system of your building is broken during winter time...

Also I'm now only recording 1 boolean per prefix. We don't need to store the cost.
 
> 2) You add parameters in `path_decomposition` but you don't do
> anything with them.

Fixed
  
> 3) Given that you seem to only store sets of integers, I am
> tempted to think that you should prefer `FrozenBitset` objects
> over `frozenset`. They should give you a faster hash/equality
> test.

My tests gives better performances with `frozenset`. But if you have better ideas...
  
> 4) There are many empty docstrings in the methods of
> `PrefixStorage`. And to be honest, considering the amount of doc
> it takes to implement all of that, I wonder if it would not be
> better to leave it all in the code, without creating a new
> class. "Just a dictionary whose keys are bitsets".
> 
> In order to not have too many things in the actual
> branch-and-bound, it may be enough to have just a couple of
> functions (your update/is_known_prefix) taking a dictionary as an
> additional argument.

The main advantage of the class is to hide all the parameters. It is very useful to be able to tune these parameters according the amount of memory you have. Passing the dict as parameter, we would also have to pass other parameters.
I'm not convinced that it would really be shorter to have 2 functions instead of this class. 

We could however save the `enable_prefix_storage` parameter since we can obtain the same behavior setting `max_prefix_length=0`.

 
> Good night,
> 
> Nathann



If you want to know the kind of speedup we get for a quite hard instance:

```
sage: G = graphs.MycielskiGraph(5)
sage: %timeit vs, seq = VS.vertex_separation_BAB(G, enable_prefix_storage=True)
1000 loops, best of 3: 1.3 ms per loop
sage: %timeit vs, seq = VS.vertex_separation_BAB(G, enable_prefix_storage=False)
100 loops, best of 3: 2.19 ms per loop

sage: G = graphs.MycielskiGraph(6)
sage: %timeit vs, seq = VS.vertex_separation_BAB(G, max_prefix_length=20)
1 loops, best of 3: 1.05 s per loop
sage: %timeit vs, seq = VS.vertex_separation_BAB(G, max_prefix_length=10)
1 loops, best of 3: 1.84 s per loop
sage: %timeit vs, seq = VS.vertex_separation_BAB(G, max_prefix_length=8)
1 loops, best of 3: 12 s per loop
sage: %timeit vs, seq = VS.vertex_separation_BAB(G, max_prefix_length=7)
1 loops, best of 3: 40.8 s per loop
```

I have not tested `VS.vertex_separation_BAB(G, enable_prefix_storage=False)` with this version of the prefix storage. With a former version (using trees and so much more ugly code) it was around 40min, so with dict should be more than 1h

David.



---

archive/issue_comments_307274.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-02-06T17:15:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307274",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_307275.json:
```json
{
    "body": "Changing commit from \"1181090c4d48f10b1bc20daa517c5396b6d27083\" to \"6e39f78fbdfcf22ca89ba23ac96ce88431feaa6e\"",
    "created_at": "2015-02-07T12:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307275",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1181090c4d48f10b1bc20daa517c5396b6d27083" to "6e39f78fbdfcf22ca89ba23ac96ce88431feaa6e"



---

archive/issue_comments_307276.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[6e39f78](https://github.com/sagemath/sagetrac-mirror/commit/6e39f78fbdfcf22ca89ba23ac96ce88431feaa6e)|`trac #17712: remove parameter enable_prefix_storage`|",
    "created_at": "2015-02-07T12:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307276",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[6e39f78](https://github.com/sagemath/sagetrac-mirror/commit/6e39f78fbdfcf22ca89ba23ac96ce88431feaa6e)|`trac #17712: remove parameter enable_prefix_storage`|



---

archive/issue_comments_307277.json:
```json
{
    "body": "<a id='comment:10'></a>\nHello again,\n\nI am working again on this patch, and I cannot say that I like this `PrefixStorage` class very much. To make it simple it is just a dictionary, in which you seem to store all values that you do not want to carry around as parameters of the `BAB_C` function.\n\nSome parameters are almost impossible to document in the `PrefixStorage` class and can only be understood if you know exactly where they are called from the inside of the `BAB_C` function.\n\nI removed some undocumented functions from `PrefixStorage` that you did not call (as well as the undocumented `__len__`). Please make sure that `sage -coverage <file>` does not return anything wrong before you submit a patch for review.\n\n....\n\nOkay, and I just noticed that you pushed a new commit on this `needs_review` patch. So now I will see whether it breaks all my modifications.\n\nToday is not a good day.\n\nNathann\n\n---\nNew commits:\n|                                                                                                                                          |                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[6e39f78](https://github.com/sagemath/sagetrac-mirror/commit/6e39f78fbdfcf22ca89ba23ac96ce88431feaa6e)|`trac #17712: remove parameter enable_prefix_storage`|",
    "created_at": "2015-02-07T12:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307277",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
Hello again,

I am working again on this patch, and I cannot say that I like this `PrefixStorage` class very much. To make it simple it is just a dictionary, in which you seem to store all values that you do not want to carry around as parameters of the `BAB_C` function.

Some parameters are almost impossible to document in the `PrefixStorage` class and can only be understood if you know exactly where they are called from the inside of the `BAB_C` function.

I removed some undocumented functions from `PrefixStorage` that you did not call (as well as the undocumented `__len__`). Please make sure that `sage -coverage <file>` does not return anything wrong before you submit a patch for review.

....

Okay, and I just noticed that you pushed a new commit on this `needs_review` patch. So now I will see whether it breaks all my modifications.

Today is not a good day.

Nathann

---
New commits:
|                                                                                                                                          |                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[6e39f78](https://github.com/sagemath/sagetrac-mirror/commit/6e39f78fbdfcf22ca89ba23ac96ce88431feaa6e)|`trac #17712: remove parameter enable_prefix_storage`|



---

archive/issue_comments_307278.json:
```json
{
    "body": "<a id='comment:11'></a>\nSorry, sorry, sorry, sorry, I removed the enable prefix storage parameter to shorten the doc. Really sorry if I breaks your edits...",
    "created_at": "2015-02-07T12:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307278",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'></a>
Sorry, sorry, sorry, sorry, I removed the enable prefix storage parameter to shorten the doc. Really sorry if I breaks your edits...



---

archive/issue_comments_307279.json:
```json
{
    "body": "<a id='comment:12'></a>\nIf you believe it is better to add extra parameters to `BAB_C` (dict, max length, max number, etc.) and to remove this class, we can try.",
    "created_at": "2015-02-07T12:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307279",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:12'></a>
If you believe it is better to add extra parameters to `BAB_C` (dict, max length, max number, etc.) and to remove this class, we can try.



---

archive/issue_comments_307280.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-07T13:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307280",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_307281.json:
```json
{
    "body": "<a id='comment:13'></a>\nHello again,\n\nThis commit does what was said above, and also rephrases the short description of the caching mechanism in the module's doc. I hope that it is clearer.\n\nAs you just removed a keyword I also wondered about the use of \"is_on\".\n\nTwo remarks:\n\n1) Right now you 'store' the size of the dictionary in an integer variable. To do this, every time you add a new element in the dictionary, you check whether the element is there already. Thus, each of the `+1` costs you a lookup, theoretically a `log(n)` operation. I have not run any timings, but I would be a bit troubled if calling `len(the_dict)` was not faster.\n\n2) I still do not understand the point of the dictionary: what are \"False\" values useful for ? Why isn't it just a set of frozensets ?\n\n3) \n\n```\n~/sage/graphs/graph_decompositions$ sage -coverage vertex_separation.pyx \n------------------------------------------------------------------------\nSCORE vertex_separation.pyx: 88.9% (8 of 9)\n\nMissing doctests:\n     * line 1663: def __init__(self, int max_prefix_length=20, int max_prefix_number=10**6)\n------------------------------------------------------------------------\n```\n\nNathann\n\nP.S. : About removing this `PrefixStorage`: let us first see what happens with this dict/set question. My intuition is that if this thing becomes a set you can already remove `cost/upper_bound/is_improved` from `update()` (and only call 'update' when appropriate) which may already simplify matters.",
    "created_at": "2015-02-07T13:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307281",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>
Hello again,

This commit does what was said above, and also rephrases the short description of the caching mechanism in the module's doc. I hope that it is clearer.

As you just removed a keyword I also wondered about the use of "is_on".

Two remarks:

1) Right now you 'store' the size of the dictionary in an integer variable. To do this, every time you add a new element in the dictionary, you check whether the element is there already. Thus, each of the `+1` costs you a lookup, theoretically a `log(n)` operation. I have not run any timings, but I would be a bit troubled if calling `len(the_dict)` was not faster.

2) I still do not understand the point of the dictionary: what are "False" values useful for ? Why isn't it just a set of frozensets ?

3) 

```
~/sage/graphs/graph_decompositions$ sage -coverage vertex_separation.pyx 
------------------------------------------------------------------------
SCORE vertex_separation.pyx: 88.9% (8 of 9)

Missing doctests:
     * line 1663: def __init__(self, int max_prefix_length=20, int max_prefix_number=10**6)
------------------------------------------------------------------------
```

Nathann

P.S. : About removing this `PrefixStorage`: let us first see what happens with this dict/set question. My intuition is that if this thing becomes a set you can already remove `cost/upper_bound/is_improved` from `update()` (and only call 'update' when appropriate) which may already simplify matters.



---

archive/issue_comments_307282.json:
```json
{
    "body": "Changing commit from \"6e39f78fbdfcf22ca89ba23ac96ce88431feaa6e\" to \"4abd2bacff0b06ae13a4fb4d046c7ecee4716d28\"",
    "created_at": "2015-02-07T13:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307282",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6e39f78fbdfcf22ca89ba23ac96ce88431feaa6e" to "4abd2bacff0b06ae13a4fb4d046c7ecee4716d28"



---

archive/issue_comments_307283.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[4abd2ba](https://github.com/sagemath/sagetrac-mirror/commit/4abd2bacff0b06ae13a4fb4d046c7ecee4716d28)|`trac #17712: Reviewer's commit`|",
    "created_at": "2015-02-07T13:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307283",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[4abd2ba](https://github.com/sagemath/sagetrac-mirror/commit/4abd2bacff0b06ae13a4fb4d046c7ecee4716d28)|`trac #17712: Reviewer's commit`|



---

archive/issue_comments_307284.json:
```json
{
    "body": "Changing branch from \"public/17112\" to \"public/17712\"",
    "created_at": "2015-02-07T13:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307284",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "public/17112" to "public/17712"



---

archive/issue_comments_307285.json:
```json
{
    "body": "<a id='comment:16'></a>\nHello Nathann,\n\nYou are right, we could use a set instead of a dictionary and add the prefix `P` to the set only if `c(P)<\\min_{L\\in{\\cal L}_P(V)} c(L)`.\n\nHowever, it is apparently faster to test if a frozenset is a key of a dictionary than if it is in a set.\n\n```\nsage: d = dict()\nsage: s = set()\nsage: for i in range(1, 11):\n....:     for z in Combinations(range(2*i), i):\n....:         d[frozenset(z)] = True\n....:         s.add(frozenset(z))\n....:         \nsage: len(d)\n250952\nsage: %timeit len(d)\n10000000 loops, best of 3: 63 ns per loop\nsage: %timeit len(s)\n10000000 loops, best of 3: 59.9 ns per loop\nsage:\nsage: elt = d.keys()[randint(0, len(d)-1)]\nsage: %timeit elt in d\n10000000 loops, best of 3: 60.9 ns per loop\nsage: %timeit elt in s\n10000000 loops, best of 3: 163 ns per loop\nsage:\nsage: elt = d.keys()[randint(0, len(d)-1)]\nsage: %timeit elt in d\n10000000 loops, best of 3: 58.8 ns per loop\nsage: %timeit elt in s\n10000000 loops, best of 3: 160 ns per loop\n```\n\n\nWhat we can do is to change `is_known_prefix` as follows:\n\n```\n        if size<1 or size>self.max_prefix_length:\n            return False\n\n        cdef int i\n        cdef frozenset my_prefix = frozenset([prefix[i] for i in range(size)])\n\n        return my_prefix in self.PT\n```\nand `update` as:\n\n```\n        cdef int i\n        if size>0 and size<=self.max_prefix_length \\\n           and not (is_improved and cost==upper_bound) \\\n           and len(self.PT)< self.max_prefix_number:\n\n            my_prefix = frozenset(prefix[i] for i in range(size))\n            self.PT[my_prefix] = True\n```\nFurthermore, if we do that inside `BAB_C`, we do only once `my_prefix = frozenset(prefix[i] for i in range(size))`.\n\nIf you agree, I will implement the changes.\n\nDavid.",
    "created_at": "2015-02-07T14:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307285",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:16'></a>
Hello Nathann,

You are right, we could use a set instead of a dictionary and add the prefix `P` to the set only if `c(P)<\min_{L\in{\cal L}_P(V)} c(L)`.

However, it is apparently faster to test if a frozenset is a key of a dictionary than if it is in a set.

```
sage: d = dict()
sage: s = set()
sage: for i in range(1, 11):
....:     for z in Combinations(range(2*i), i):
....:         d[frozenset(z)] = True
....:         s.add(frozenset(z))
....:         
sage: len(d)
250952
sage: %timeit len(d)
10000000 loops, best of 3: 63 ns per loop
sage: %timeit len(s)
10000000 loops, best of 3: 59.9 ns per loop
sage:
sage: elt = d.keys()[randint(0, len(d)-1)]
sage: %timeit elt in d
10000000 loops, best of 3: 60.9 ns per loop
sage: %timeit elt in s
10000000 loops, best of 3: 163 ns per loop
sage:
sage: elt = d.keys()[randint(0, len(d)-1)]
sage: %timeit elt in d
10000000 loops, best of 3: 58.8 ns per loop
sage: %timeit elt in s
10000000 loops, best of 3: 160 ns per loop
```


What we can do is to change `is_known_prefix` as follows:

```
        if size<1 or size>self.max_prefix_length:
            return False

        cdef int i
        cdef frozenset my_prefix = frozenset([prefix[i] for i in range(size)])

        return my_prefix in self.PT
```
and `update` as:

```
        cdef int i
        if size>0 and size<=self.max_prefix_length \
           and not (is_improved and cost==upper_bound) \
           and len(self.PT)< self.max_prefix_number:

            my_prefix = frozenset(prefix[i] for i in range(size))
            self.PT[my_prefix] = True
```
Furthermore, if we do that inside `BAB_C`, we do only once `my_prefix = frozenset(prefix[i] for i in range(size))`.

If you agree, I will implement the changes.

David.



---

archive/issue_comments_307286.json:
```json
{
    "body": "<a id='comment:17'></a>\nYo !\n\n> You are right, we could use a set instead of a dictionary and add the prefix `P` to the set only if `c(P)<\\min_{L\\in{\\cal L}_P(V)} c(L)`.\n\n\nCool. This should sipmlify both code and doc.\n\n> However, it is apparently faster to test if a frozenset is a key of a dictionary than if it is in a set.\n\n\nWHaaaaaaaaaaaaaaat ?.... `-_-`\n\nOkay. Dict with 'True' keys. Really... `-_-`\n\nI will write to sage-devel with your timings.\n\n> If you agree, I will implement the changes.\n\n+1\n\nNathann",
    "created_at": "2015-02-07T14:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307286",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:17'></a>
Yo !

> You are right, we could use a set instead of a dictionary and add the prefix `P` to the set only if `c(P)<\min_{L\in{\cal L}_P(V)} c(L)`.


Cool. This should sipmlify both code and doc.

> However, it is apparently faster to test if a frozenset is a key of a dictionary than if it is in a set.


WHaaaaaaaaaaaaaaat ?.... `-_-`

Okay. Dict with 'True' keys. Really... `-_-`

I will write to sage-devel with your timings.

> If you agree, I will implement the changes.

+1

Nathann



---

archive/issue_comments_307287.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n|[4cc8d7f](https://github.com/sagemath/sagetrac-mirror/commit/4cc8d7fc0550aba5fd9e03f3263ede4172ff9b73)|`trac #17712: remove class PrefixStorage and simplify code`|",
    "created_at": "2015-02-07T15:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307287",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
|[4cc8d7f](https://github.com/sagemath/sagetrac-mirror/commit/4cc8d7fc0550aba5fd9e03f3263ede4172ff9b73)|`trac #17712: remove class PrefixStorage and simplify code`|



---

archive/issue_comments_307288.json:
```json
{
    "body": "Changing commit from \"4abd2bacff0b06ae13a4fb4d046c7ecee4716d28\" to \"4cc8d7fc0550aba5fd9e03f3263ede4172ff9b73\"",
    "created_at": "2015-02-07T15:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307288",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4abd2bacff0b06ae13a4fb4d046c7ecee4716d28" to "4cc8d7fc0550aba5fd9e03f3263ede4172ff9b73"



---

archive/issue_comments_307289.json:
```json
{
    "body": "<a id='comment:19'></a>\nWith this modification, the code is significantly faster. Cool! I'm really happy to have this timing on my MBA, knowing that it is a hard instance for this problem.\n\n```\nsage: from sage.graphs.graph_decompositions import vertex_separation as VS\nsage: G = graphs.MycielskiGraph(6)\nsage: %timeit vs, seq = VS.vertex_separation(G)\n1 loops, best of 3: 965 ms per loop\n```\nWe can easily change from `dict` to any other relevant data structure if it is faster.\n\nDavid.",
    "created_at": "2015-02-07T15:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307289",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'></a>
With this modification, the code is significantly faster. Cool! I'm really happy to have this timing on my MBA, knowing that it is a hard instance for this problem.

```
sage: from sage.graphs.graph_decompositions import vertex_separation as VS
sage: G = graphs.MycielskiGraph(6)
sage: %timeit vs, seq = VS.vertex_separation(G)
1 loops, best of 3: 965 ms per loop
```
We can easily change from `dict` to any other relevant data structure if it is faster.

David.



---

archive/issue_comments_307290.json:
```json
{
    "body": "<a id='comment:20'></a>\nHMmmmm.. Less code, more speed. Love when it happens `:-P`\n\nNathann",
    "created_at": "2015-02-07T15:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307290",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>
HMmmmm.. Less code, more speed. Love when it happens `:-P`

Nathann



---

archive/issue_comments_307291.json:
```json
{
    "body": "<a id='comment:21'></a>\nSince we learned that \"internally sets are implemented just as dictionaries with no values\", there is no reason for using dictionary. The timing was certainly due to the order in which values were inserted in the set and in the dictionary. Moreover, we can get different results:\n\n```\nsage: L = []\nsage: for i in range(1, 11):\n....:     for z in Combinations(range(2*i), i):\n....:         L.append(frozenset(z))\n....:         \nsage: shuffle(L)\nsage: d = dict( (k, True) for k in L )\nsage: s = set(L)\nsage: elt = L[randint(0, len(L)-1)]\nsage: %timeit elt in s\n10000000 loops, best of 3: 66.8 ns per loop\nsage: %timeit elt in d\n10000000 loops, best of 3: 64.1 ns per loop\nsage: d = dict()\nsage: for i in range(1, 11):\n    for z in Combinations(range(2*i), i):\n        d[frozenset(z)] = True\n....:\nsage: %timeit elt in d\n10000000 loops, best of 3: 157 ns per loop\n```\n\nI will change to set.\n\nDavid.",
    "created_at": "2015-02-07T16:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307291",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:21'></a>
Since we learned that "internally sets are implemented just as dictionaries with no values", there is no reason for using dictionary. The timing was certainly due to the order in which values were inserted in the set and in the dictionary. Moreover, we can get different results:

```
sage: L = []
sage: for i in range(1, 11):
....:     for z in Combinations(range(2*i), i):
....:         L.append(frozenset(z))
....:         
sage: shuffle(L)
sage: d = dict( (k, True) for k in L )
sage: s = set(L)
sage: elt = L[randint(0, len(L)-1)]
sage: %timeit elt in s
10000000 loops, best of 3: 66.8 ns per loop
sage: %timeit elt in d
10000000 loops, best of 3: 64.1 ns per loop
sage: d = dict()
sage: for i in range(1, 11):
    for z in Combinations(range(2*i), i):
        d[frozenset(z)] = True
....:
sage: %timeit elt in d
10000000 loops, best of 3: 157 ns per loop
```

I will change to set.

David.



---

archive/issue_comments_307292.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[f6a71a0](https://github.com/sagemath/sagetrac-mirror/commit/f6a71a03edd5e21712ae76268e1cdd1a00b8b845)|`trac #17712: use set instead of dict to store prefixes`|",
    "created_at": "2015-02-07T16:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307292",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[f6a71a0](https://github.com/sagemath/sagetrac-mirror/commit/f6a71a03edd5e21712ae76268e1cdd1a00b8b845)|`trac #17712: use set instead of dict to store prefixes`|



---

archive/issue_comments_307293.json:
```json
{
    "body": "Changing commit from \"4cc8d7fc0550aba5fd9e03f3263ede4172ff9b73\" to \"f6a71a03edd5e21712ae76268e1cdd1a00b8b845\"",
    "created_at": "2015-02-07T16:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307293",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4cc8d7fc0550aba5fd9e03f3263ede4172ff9b73" to "f6a71a03edd5e21712ae76268e1cdd1a00b8b845"



---

archive/issue_comments_307294.json:
```json
{
    "body": "<a id='comment:23'></a>\nSame speed and bit less doc.",
    "created_at": "2015-02-07T16:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307294",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:23'></a>
Same speed and bit less doc.



---

archive/issue_comments_307295.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-02-07T16:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307295",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_307296.json:
```json
{
    "body": "Changing commit from \"f6a71a03edd5e21712ae76268e1cdd1a00b8b845\" to \"8bcfa17987a8561d459703334615dec1b7edfa3d\"",
    "created_at": "2015-02-08T11:07:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307296",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f6a71a03edd5e21712ae76268e1cdd1a00b8b845" to "8bcfa17987a8561d459703334615dec1b7edfa3d"



---

archive/issue_comments_307297.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[8bcfa17](https://github.com/sagemath/sagetrac-mirror/commit/8bcfa17987a8561d459703334615dec1b7edfa3d)|`trac #17712: store prefixes generated by greedy steps`|",
    "created_at": "2015-02-08T11:07:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307297",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[8bcfa17](https://github.com/sagemath/sagetrac-mirror/commit/8bcfa17987a8561d459703334615dec1b7edfa3d)|`trac #17712: store prefixes generated by greedy steps`|



---

archive/issue_comments_307298.json:
```json
{
    "body": "<a id='comment:25'></a>\nI have added a few lines to store the prefixes generated by the greedy steps.\nAlthough it takes some time locally, it should help reducing the total number of visited branches.",
    "created_at": "2015-02-08T11:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307298",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:25'></a>
I have added a few lines to store the prefixes generated by the greedy steps.
Although it takes some time locally, it should help reducing the total number of visited branches.



---

archive/issue_comments_307299.json:
```json
{
    "body": "Changing commit from \"8bcfa17987a8561d459703334615dec1b7edfa3d\" to \"919df3da5d54ddc1531581c225d8dfe7a21b0f76\"",
    "created_at": "2015-02-08T14:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307299",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8bcfa17987a8561d459703334615dec1b7edfa3d" to "919df3da5d54ddc1531581c225d8dfe7a21b0f76"



---

archive/issue_comments_307300.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[919df3d](https://github.com/sagemath/sagetrac-mirror/commit/919df3da5d54ddc1531581c225d8dfe7a21b0f76)|`trac #17712: move tests on prefixes`|",
    "created_at": "2015-02-08T14:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307300",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[919df3d](https://github.com/sagemath/sagetrac-mirror/commit/919df3da5d54ddc1531581c225d8dfe7a21b0f76)|`trac #17712: move tests on prefixes`|



---

archive/issue_comments_307301.json:
```json
{
    "body": "<a id='comment:27'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[93e9a0a](https://github.com/sagemath/sagetrac-mirror/commit/93e9a0ab8ffae7ae695e51f8a89ca72994c3a9de)|`trac #17712: Update doc`|",
    "created_at": "2015-02-08T18:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307301",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[93e9a0a](https://github.com/sagemath/sagetrac-mirror/commit/93e9a0ab8ffae7ae695e51f8a89ca72994c3a9de)|`trac #17712: Update doc`|



---

archive/issue_comments_307302.json:
```json
{
    "body": "Changing commit from \"919df3da5d54ddc1531581c225d8dfe7a21b0f76\" to \"93e9a0ab8ffae7ae695e51f8a89ca72994c3a9de\"",
    "created_at": "2015-02-08T18:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307302",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "919df3da5d54ddc1531581c225d8dfe7a21b0f76" to "93e9a0ab8ffae7ae695e51f8a89ca72994c3a9de"



---

archive/issue_comments_307303.json:
```json
{
    "body": "<a id='comment:28'></a>\nYoooooooooo !\n\nIf you don't see anything wrong in this last commit you can set the ticket to `positive_review`. Thanks for you work,\n\nNathann",
    "created_at": "2015-02-08T18:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307303",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:28'></a>
Yoooooooooo !

If you don't see anything wrong in this last commit you can set the ticket to `positive_review`. Thanks for you work,

Nathann



---

archive/issue_comments_307304.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Nathann Cohen\"",
    "created_at": "2015-02-08T18:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307304",
    "user": "https://github.com/nathanncohen"
}
```

Changing reviewer from "" to "Nathann Cohen"



---

archive/issue_comments_307305.json:
```json
{
    "body": "<a id='comment:29'></a>\nYouhou!!!\n\nThank you once again Nathann for your very constructive help. The final solution is very nice.\n\nBest,\nDavid.\n\nPS: I have other possible inputs for this module (algorithm for trees, pre-processing for reducing the size of input, algorithm for testing vs=1 and vs=2, heuristics, etc.), but not right now.",
    "created_at": "2015-02-08T19:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307305",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:29'></a>
Youhou!!!

Thank you once again Nathann for your very constructive help. The final solution is very nice.

Best,
David.

PS: I have other possible inputs for this module (algorithm for trees, pre-processing for reducing the size of input, algorithm for testing vs=1 and vs=2, heuristics, etc.), but not right now.



---

archive/issue_comments_307306.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-08T19:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307306",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_057641.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-18T23:22:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17712#event-57641"
}
```



---

archive/issue_comments_307307.json:
```json
{
    "body": "Changing branch from \"public/17712\" to \"93e9a0ab8ffae7ae695e51f8a89ca72994c3a9de\"",
    "created_at": "2015-02-18T23:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307307",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/17712" to "93e9a0ab8ffae7ae695e51f8a89ca72994c3a9de"



---

archive/issue_comments_307308.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-02-18T23:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17712#issuecomment-307308",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
