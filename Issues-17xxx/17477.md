# Issue 17477: "Internal" documentation of posets

archive/issues_017240.json:
```json
{
    "body": "CC:  @nathanncohen\n\nKeywords: poset\n\nPoset class should contain some lines of documentation meant mostly for developer. Basically \"A poset is a digraph with integers as elements and a list...\"\n\nDiscussion at https://groups.google.com/d/topic/sage-devel/ZXkfB5dSchs/discussion\n\nIssue created by migration from https://trac.sagemath.org/ticket/17477\n\n",
    "closed_at": "2015-01-13T01:21:51Z",
    "created_at": "2014-12-09T14:28:07Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "\"Internal\" documentation of posets",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17477",
    "user": "https://github.com/jm58660"
}
```
CC:  @nathanncohen

Keywords: poset

Poset class should contain some lines of documentation meant mostly for developer. Basically "A poset is a digraph with integers as elements and a list..."

Discussion at https://groups.google.com/d/topic/sage-devel/ZXkfB5dSchs/discussion

Issue created by migration from https://trac.sagemath.org/ticket/17477





---

archive/issue_comments_229132.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-11T10:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229132",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_050259.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-12-11T10:27:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17477#event-50259"
}
```



---

archive/issue_comments_229133.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-11T10:27:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229133",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_229134.json:
```json
{
    "body": "As there is no status \"needs_comments\" I put this to needs_review. Comments are welcome.\n\n(My native language belongs to Uralic languages... Hence maybe not best one to write documentation in English.)",
    "created_at": "2014-12-11T10:27:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229134",
    "user": "https://github.com/jm58660"
}
```

As there is no status "needs_comments" I put this to needs_review. Comments are welcome.

(My native language belongs to Uralic languages... Hence maybe not best one to write documentation in English.)



---

archive/issue_comments_229135.json:
```json
{
    "body": "Hello !\n\nI fixed a couple of things and added links toward the methods/clases you cite (branch at public/17477)\n\nAlso, I am not sure that the `Poset` contain as you claim the position of the vertices. I believe that it is computed on-the-fly when `FinitePoset.plot` is called.\n\nI set this ticket back to `needs_info` because of this last comment.\n\nNathann",
    "created_at": "2014-12-11T11:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229135",
    "user": "https://github.com/nathanncohen"
}
```

Hello !

I fixed a couple of things and added links toward the methods/clases you cite (branch at public/17477)

Also, I am not sure that the `Poset` contain as you claim the position of the vertices. I believe that it is computed on-the-fly when `FinitePoset.plot` is called.

I set this ticket back to `needs_info` because of this last comment.

Nathann



---

archive/issue_comments_229136.json:
```json
{
    "body": "Replying to [comment:4 ncohen]:\n\n> I fixed a couple of things and added links toward the methods/clases you cite (branch at public/17477)\n\n\nLooks better.\n\n> Also, I am not sure that the `Poset` contain as you claim the position of the vertices. I believe that it is computed on-the-fly when `FinitePoset.plot` is called.\n\n\nTrue. Actually docs of Hasse diagram says that `plot()` takes argument `label_font_size`. It does, but do not do anything with it -- i.e. `P._hasse_diagram.plot(label_font_size='cat-says-meow').show()` equals to `P._hasse_diagram.plot(label_font_size=100).show()`.\n\nIs this easier if you just remove paragraph \"The Internal DiGraph of the poset also contains - -\" from public/17477 and make it to branch for this repo? Maybe also we can add to last paragraph something like \"Hence for example `P.gt(x, y)` if faster after `P.lequal_matrix()`.\"",
    "created_at": "2014-12-12T07:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229136",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:4 ncohen]:

> I fixed a couple of things and added links toward the methods/clases you cite (branch at public/17477)


Looks better.

> Also, I am not sure that the `Poset` contain as you claim the position of the vertices. I believe that it is computed on-the-fly when `FinitePoset.plot` is called.


True. Actually docs of Hasse diagram says that `plot()` takes argument `label_font_size`. It does, but do not do anything with it -- i.e. `P._hasse_diagram.plot(label_font_size='cat-says-meow').show()` equals to `P._hasse_diagram.plot(label_font_size=100).show()`.

Is this easier if you just remove paragraph "The Internal DiGraph of the poset also contains - -" from public/17477 and make it to branch for this repo? Maybe also we can add to last paragraph something like "Hence for example `P.gt(x, y)` if faster after `P.lequal_matrix()`."



---

archive/issue_comments_229137.json:
```json
{
    "body": "Hello !\n\n> True. Actually docs of Hasse diagram says that `plot()` takes argument `label_font_size`. It does, but do not do anything with it -- i.e. `P._hasse_diagram.plot(label_font_size='cat-says-meow').show()` equals to `P._hasse_diagram.plot(label_font_size=100).show()`.\n\n\nOh. I see. Could you do something for that ? If you cannot, please tell me and I will. It must not be forgotten again.\n\n> Is this easier if you just remove paragraph \"The Internal DiGraph of the poset also contains - -\" from public/17477 and make it to branch for this repo? Maybe also we can add to last paragraph something like \"Hence for example `P.gt(x, y)` if faster after `P.lequal_matrix()`.\"\n\n\nWell, can you add a commit on the branch for that ? I change the ticket's branch so that we can see what is happening.\n\nNathann",
    "created_at": "2014-12-12T08:02:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229137",
    "user": "https://github.com/nathanncohen"
}
```

Hello !

> True. Actually docs of Hasse diagram says that `plot()` takes argument `label_font_size`. It does, but do not do anything with it -- i.e. `P._hasse_diagram.plot(label_font_size='cat-says-meow').show()` equals to `P._hasse_diagram.plot(label_font_size=100).show()`.


Oh. I see. Could you do something for that ? If you cannot, please tell me and I will. It must not be forgotten again.

> Is this easier if you just remove paragraph "The Internal DiGraph of the poset also contains - -" from public/17477 and make it to branch for this repo? Maybe also we can add to last paragraph something like "Hence for example `P.gt(x, y)` if faster after `P.lequal_matrix()`."


Well, can you add a commit on the branch for that ? I change the ticket's branch so that we can see what is happening.

Nathann



---

archive/issue_comments_229138.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-12-12T08:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229138",
    "user": "https://github.com/nathanncohen"
}
```

New commits:



---

archive/issue_comments_229139.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-12T08:25:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229139",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_229140.json:
```json
{
    "body": "Replying to [comment:6 ncohen]:\n\n> > True. Actually docs of Hasse diagram says that `plot()` takes argument `label_font_size`. It does, but do not do anything with it\n\n\n> Oh. I see. Could you do something for that ? If you cannot, please tell me and I will. It must not be forgotten again.\n\n\nI think that this is not about one option. Whole `plot()` should be checked: to make it possible to have non-injective relabeling and to check options. So, feel free to correct it. `:=)`\n\n> Well, can you add a commit on the branch for that ? I change the ticket's branch so that we can see what is happening.\n\n\nDone this.",
    "created_at": "2014-12-12T08:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229140",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:6 ncohen]:

> > True. Actually docs of Hasse diagram says that `plot()` takes argument `label_font_size`. It does, but do not do anything with it


> Oh. I see. Could you do something for that ? If you cannot, please tell me and I will. It must not be forgotten again.


I think that this is not about one option. Whole `plot()` should be checked: to make it possible to have non-injective relabeling and to check options. So, feel free to correct it. `:=)`

> Well, can you add a commit on the branch for that ? I change the ticket's branch so that we can see what is happening.


Done this.



---

archive/issue_comments_229141.json:
```json
{
    "body": "Hmmmm.. Now that I think of it, the function #17408 actually computes the `lequal_matrix` when computing the transitive reduction, but we throw it away...\n\nAnyway: it this ticket ready ? If you have nothing to add I guess it can go.\n\nNathann",
    "created_at": "2014-12-12T08:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229141",
    "user": "https://github.com/nathanncohen"
}
```

Hmmmm.. Now that I think of it, the function #17408 actually computes the `lequal_matrix` when computing the transitive reduction, but we throw it away...

Anyway: it this ticket ready ? If you have nothing to add I guess it can go.

Nathann



---

archive/issue_comments_229142.json:
```json
{
    "body": "> I think that this is not about one option. Whole `plot()` should be checked: to make it possible to have non-injective relabeling and to check options.\n\n\nThe problem comes from `HasseDiagram.plot`. This argument, and two others, are totally ignored. Also, it seems that this `HasseDiagram.plot` function is never used: `Poset.plot` calls `GenericGraph.plot` directly.\n\nNathann",
    "created_at": "2014-12-12T08:38:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229142",
    "user": "https://github.com/nathanncohen"
}
```

> I think that this is not about one option. Whole `plot()` should be checked: to make it possible to have non-injective relabeling and to check options.


The problem comes from `HasseDiagram.plot`. This argument, and two others, are totally ignored. Also, it seems that this `HasseDiagram.plot` function is never used: `Poset.plot` calls `GenericGraph.plot` directly.

Nathann



---

archive/issue_comments_229143.json:
```json
{
    "body": "Replying to [comment:10 ncohen]:\n\n> Hmmmm.. Now that I think of it, the function #17408 actually computes the `lequal_matrix` when computing the transitive reduction, but we throw it away...\n\n\nAha. I think that Sage could have some kind of system-level setting for memory-cpu -tradeoff. Sometimes saving, for example, le-matrix, may not be right thing to do.\n\n> Anyway: it this ticket ready ? If you have nothing to add I guess it can go.\n\n\nYes, I think this is ready. Or at least better than no documentation at all.",
    "created_at": "2014-12-12T11:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229143",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:10 ncohen]:

> Hmmmm.. Now that I think of it, the function #17408 actually computes the `lequal_matrix` when computing the transitive reduction, but we throw it away...


Aha. I think that Sage could have some kind of system-level setting for memory-cpu -tradeoff. Sometimes saving, for example, le-matrix, may not be right thing to do.

> Anyway: it this ticket ready ? If you have nothing to add I guess it can go.


Yes, I think this is ready. Or at least better than no documentation at all.



---

archive/issue_comments_229144.json:
```json
{
    "body": "> Aha. I think that Sage could have some kind of system-level setting for memory-cpu -tradeoff. Sometimes saving, for example, le-matrix, may not be right thing to do.\n\n\nAhahaha. No, I swear that in our current implementation it is *always* the right thing to do. The term 'dense matrix' may be scary, but a matrix of bits is infinitely more compact than a list of adjacences stored with pointers and stuff. Infinitely more compact that all Python objects we store for nothing.\n\nLook: the `BooleanLattice` poset on 2^11 elements seems to take 320Mb in memory (no idea why it is so expensive):\n\n```\nsage: m1 = get_memory_usage()\nsage: p = posets.BooleanLattice(11)\nsage: round(get_memory_usage()-m1)\n321.0\n```\n\nHow much does it cost to store the dense binary matrix ? Simple, you need (2<sup>11)</sup>2 bits. That means ... 4 Mb = 500kB.\n\nAnd we (still) live in a world where all posets you generate are stored forever uselessly, where you have 64-bits pointers everywhere and stuff. Really, those 4Mb are far from accounting for any of our memory problems `:-P`\n\n> Yes, I think this is ready. Or at least better than no documentation at all.\n\n\nOkay, positive review then !\n\nNathann",
    "created_at": "2014-12-12T11:31:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229144",
    "user": "https://github.com/nathanncohen"
}
```

> Aha. I think that Sage could have some kind of system-level setting for memory-cpu -tradeoff. Sometimes saving, for example, le-matrix, may not be right thing to do.


Ahahaha. No, I swear that in our current implementation it is *always* the right thing to do. The term 'dense matrix' may be scary, but a matrix of bits is infinitely more compact than a list of adjacences stored with pointers and stuff. Infinitely more compact that all Python objects we store for nothing.

Look: the `BooleanLattice` poset on 2^11 elements seems to take 320Mb in memory (no idea why it is so expensive):

```
sage: m1 = get_memory_usage()
sage: p = posets.BooleanLattice(11)
sage: round(get_memory_usage()-m1)
321.0
```

How much does it cost to store the dense binary matrix ? Simple, you need (2<sup>11)</sup>2 bits. That means ... 4 Mb = 500kB.

And we (still) live in a world where all posets you generate are stored forever uselessly, where you have 64-bits pointers everywhere and stuff. Really, those 4Mb are far from accounting for any of our memory problems `:-P`

> Yes, I think this is ready. Or at least better than no documentation at all.


Okay, positive review then !

Nathann



---

archive/issue_comments_229145.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-12T11:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229145",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_229146.json:
```json
{
    "body": "author name missing",
    "created_at": "2014-12-12T12:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229146",
    "user": "https://github.com/vbraun"
}
```

author name missing



---

archive/issue_comments_229147.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-12-12T12:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229147",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_229148.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-12T13:06:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229148",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_229149.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-12T16:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229149",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_229150.json:
```json
{
    "body": "Duh. We already have this kind of documentation on `__init__` of poset.",
    "created_at": "2014-12-14T07:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229150",
    "user": "https://github.com/jm58660"
}
```

Duh. We already have this kind of documentation on `__init__` of poset.



---

archive/issue_comments_229151.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-12-14T07:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229151",
    "user": "https://github.com/jm58660"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_229152.json:
```json
{
    "body": "Oh.. I see `-_-`\n\nThen I guess you should move what is useful in there to the documentation you added in the module, and delete what is left. Doc is no good if nobody knows it is there, and you cannot easily get the doc content of `__init__` in Sage. Plus it does not appear in the html.\n\nNathann",
    "created_at": "2014-12-14T07:53:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229152",
    "user": "https://github.com/nathanncohen"
}
```

Oh.. I see `-_-`

Then I guess you should move what is useful in there to the documentation you added in the module, and delete what is left. Doc is no good if nobody knows it is there, and you cannot easily get the doc content of `__init__` in Sage. Plus it does not appear in the html.

Nathann



---

archive/issue_comments_229153.json:
```json
{
    "body": "I opened a discussion on sage-devel about this.",
    "created_at": "2014-12-27T09:37:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229153",
    "user": "https://github.com/jm58660"
}
```

I opened a discussion on sage-devel about this.



---

archive/issue_comments_229154.json:
```json
{
    "body": "There was no clear consensus on sage-devel. Hence I mark this as positive_review and wont_fix.\n\nMaybe I'll get back to this when going throught whole documentation of posets.",
    "created_at": "2015-01-08T10:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229154",
    "user": "https://github.com/jm58660"
}
```

There was no clear consensus on sage-devel. Hence I mark this as positive_review and wont_fix.

Maybe I'll get back to this when going throught whole documentation of posets.



---

archive/issue_comments_229155.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-01-08T10:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229155",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_050260.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-01-08T10:07:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17477#event-50260"
}
```



---

archive/issue_events_050261.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-01-08T10:07:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17477#event-50261"
}
```



---

archive/issue_comments_229156.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2015-01-13T01:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17477#issuecomment-229156",
    "user": "https://github.com/vbraun"
}
```

Resolution: wontfix



---

archive/issue_events_050262.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-13T01:21:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17477",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17477#event-50262"
}
```
