# Issue 17327: Simplify computation of values of Dirichlet characters

archive/issues_017090.json:
```json
{
    "body": "The method `DirichletCharacter.values()` is rather complicated.  The goal of this ticket is to simplify it a bit, and in particular to remove the check for the trivial character.  It turns out that checking for the trivial character costs more time than is gained by the faster code for this case.  This yields a speedup of about 20% in the following example:\n\n```\nsage: %timeit -n 1 -r 1 -c [[chi.values() for chi in DirichletGroup(n)] for n in xrange(1, 100)]\n```\n\nKeywords: Dirichlet characters\n\nBranch/Commit: f9586a5756d46e9e70bec59d171de07d5b841353\n\nReviewer: Jeroen Demeyer, Peter Bruin\n\nAuthor: Peter Bruin, Jeroen Demeyer\n\nDependencies: #17317\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17327\n\n",
    "closed_at": "2015-03-17T08:33:55Z",
    "created_at": "2014-11-12T18:59:36Z",
    "labels": [
        "component: number theory",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Simplify computation of values of Dirichlet characters",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17327",
    "user": "https://github.com/pjbruin"
}
```
The method `DirichletCharacter.values()` is rather complicated.  The goal of this ticket is to simplify it a bit, and in particular to remove the check for the trivial character.  It turns out that checking for the trivial character costs more time than is gained by the faster code for this case.  This yields a speedup of about 20% in the following example:

```
sage: %timeit -n 1 -r 1 -c [[chi.values() for chi in DirichletGroup(n)] for n in xrange(1, 100)]
```

Keywords: Dirichlet characters

Branch/Commit: f9586a5756d46e9e70bec59d171de07d5b841353

Reviewer: Jeroen Demeyer, Peter Bruin

Author: Peter Bruin, Jeroen Demeyer

Dependencies: #17317

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17327





---

archive/issue_comments_226995.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-12T19:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17327#issuecomment-226995",
    "user": "https://github.com/pjbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_226996.json:
```json
{
    "body": "<a id='comment:2'></a>Unfortunately the current version gives a 50% slowdown (from 3 seconds to 4.5 seconds) for the following command:\n\n```\nsage: %timeit -n 1 -r 1 -c [[chi.values() for chi in DirichletGroup(n)]\n....:                       for n in xrange(1, 100)]\n```\nThis seems to be caused by an overdose of Python `map` and `lambda` constructions.",
    "created_at": "2014-11-12T19:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17327#issuecomment-226996",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:2'></a>Unfortunately the current version gives a 50% slowdown (from 3 seconds to 4.5 seconds) for the following command:

```
sage: %timeit -n 1 -r 1 -c [[chi.values() for chi in DirichletGroup(n)]
....:                       for n in xrange(1, 100)]
```
This seems to be caused by an overdose of Python `map` and `lambda` constructions.



---

archive/issue_comments_226997.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-11-12T19:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17327#issuecomment-226997",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_226998.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-11-12T21:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17327#issuecomment-226998",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_226999.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-11-12T21:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17327#issuecomment-226999",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_227000.json:
```json
{
    "body": "Changing type from task to enhancement.",
    "created_at": "2014-11-12T21:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17327#issuecomment-227000",
    "user": "https://github.com/pjbruin"
}
```

Changing type from task to enhancement.



---

archive/issue_comments_227001.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-18T12:54:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17327#issuecomment-227001",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_227002.json:
```json
{
    "body": "<a id='comment:7'></a>I made some further improvements...\n\n---\nNew commits:",
    "created_at": "2015-02-19T15:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17327#issuecomment-227002",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>I made some further improvements...

---
New commits:



---

archive/issue_events_050028.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-19T15:56:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17327#event-50028"
}
```



---

archive/issue_comments_227003.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-16T15:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17327#issuecomment-227003",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_227004.json:
```json
{
    "body": "<a id='comment:8'></a>The additional improvements look good to me, and all doctests pass.",
    "created_at": "2015-03-16T15:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17327#issuecomment-227004",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:8'></a>The additional improvements look good to me, and all doctests pass.



---

archive/issue_comments_227005.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-17T08:33:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17327#issuecomment-227005",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_050029.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-17T08:33:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17327",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17327#event-50029"
}
```
