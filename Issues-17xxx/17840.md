# Issue 17840: Factorization of multivariate polynomials over the integers

archive/issues_017603.json:
```json
{
    "assignees": [],
    "body": "Currently, Sage does not know how to factor multivariate polynomials over the integers:\n\n```python\nsage: R.<x,y> = ZZ[]\nsage: p = 12 * (x*y - 1) * (x + 2*y + 3)\nsage: p.factor()\nTraceback (most recent call last):\n...\nNotImplementedError: Factorization of multivariate polynomials over non-fields is not implemented.\n```\n\nI propose to implement it using the factorization over `QQ`. Of course it may not be the best possible solution, but at least it is some (temporary?) workaround. This now gives:\n\n```python\nsage: R.<x,y> = ZZ[]\nsage: p = 12 * (x*y - 1) * (x + 2*y + 3)\nsage: p.factor()\n2^2 * 3 * (x + 2*y + 3) * (x*y - 1)\n```\n\n**Keywords:** multivariate integer polynomial\n\n**Branch:** [c41d743d8733ab8ccd00aee7bde2312cb4751cbd](https://github.com/sagemath/sagetrac-mirror/commit/c41d743d8733ab8ccd00aee7bde2312cb4751cbd)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** Bruno Grenet\n\nIssue created by migration from https://trac.sagemath.org/ticket/17840\n\n",
    "closed_at": "2015-05-25T07:29:53Z",
    "created_at": "2015-02-23T14:00:17Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20factorization",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Factorization of multivariate polynomials over the integers",
    "type": "issue",
    "updated_at": "2016-04-15T07:47:03Z",
    "url": "https://github.com/sagemath/sage/issues/17840",
    "user": "https://github.com/bgrenet"
}
```
Currently, Sage does not know how to factor multivariate polynomials over the integers:

```python
sage: R.<x,y> = ZZ[]
sage: p = 12 * (x*y - 1) * (x + 2*y + 3)
sage: p.factor()
Traceback (most recent call last):
...
NotImplementedError: Factorization of multivariate polynomials over non-fields is not implemented.
```

I propose to implement it using the factorization over `QQ`. Of course it may not be the best possible solution, but at least it is some (temporary?) workaround. This now gives:

```python
sage: R.<x,y> = ZZ[]
sage: p = 12 * (x*y - 1) * (x + 2*y + 3)
sage: p.factor()
2^2 * 3 * (x + 2*y + 3) * (x*y - 1)
```

**Keywords:** multivariate integer polynomial

**Branch:** [c41d743d8733ab8ccd00aee7bde2312cb4751cbd](https://github.com/sagemath/sagetrac-mirror/commit/c41d743d8733ab8ccd00aee7bde2312cb4751cbd)

**Reviewer:** Jeroen Demeyer

**Author:** Bruno Grenet

Issue created by migration from https://trac.sagemath.org/ticket/17840





---

archive/issue_events_218092.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-23T14:00:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218092"
}
```



---

archive/issue_events_218093.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-23T14:00:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20factorization",
    "label_color": "08517b",
    "label_name": "component: factorization",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218093"
}
```



---

archive/issue_events_218094.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-23T14:00:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218094"
}
```



---

archive/issue_comments_243744.json:
```json
{
    "body": "**Branch:** [u/bruno/factorization_of_multivariate_polynomials_over_the_integers](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/factorization_of_multivariate_polynomials_over_the_integers)",
    "created_at": "2015-02-23T14:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243744",
    "user": "https://github.com/bgrenet"
}
```

**Branch:** [u/bruno/factorization_of_multivariate_polynomials_over_the_integers](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/factorization_of_multivariate_polynomials_over_the_integers)



---

archive/issue_comments_243745.json:
```json
{
    "body": "**Commit:** [60bffcb71e5220ecb07045c8870be8b84bc5d3bb](https://github.com/sagemath/sagetrac-mirror/commit/60bffcb71e5220ecb07045c8870be8b84bc5d3bb)",
    "created_at": "2015-02-23T14:10:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243745",
    "user": "https://github.com/bgrenet"
}
```

**Commit:** [60bffcb71e5220ecb07045c8870be8b84bc5d3bb](https://github.com/sagemath/sagetrac-mirror/commit/60bffcb71e5220ecb07045c8870be8b84bc5d3bb)



---

archive/issue_comments_243746.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60bffcb71e5220ecb07045c8870be8b84bc5d3bb\">60bffcb</a></td><td><code>Add factorization of multivariate polynomials over the integers</code></td></tr></table>\n",
    "created_at": "2015-02-23T14:10:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243746",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60bffcb71e5220ecb07045c8870be8b84bc5d3bb">60bffcb</a></td><td><code>Add factorization of multivariate polynomials over the integers</code></td></tr></table>




---

archive/issue_events_218095.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-23T14:10:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218095"
}
```



---

archive/issue_events_218096.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-23T14:19:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218096"
}
```



---

archive/issue_events_218097.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-23T14:19:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218097"
}
```



---

archive/issue_comments_243747.json:
```json
{
    "body": "<a id='comment:3'></a>\nAdd a doctest with a negative sign to show that signs are preserved.",
    "created_at": "2015-02-23T14:19:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243747",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
Add a doctest with a negative sign to show that signs are preserved.



---

archive/issue_comments_243748.json:
```json
{
    "body": "**Changing commit** from \"[60bffcb71e5220ecb07045c8870be8b84bc5d3bb](https://github.com/sagemath/sagetrac-mirror/commit/60bffcb71e5220ecb07045c8870be8b84bc5d3bb)\" to \"[28f89b6a73649d8c93c4ab0a5bb92f43b6ac785d](https://github.com/sagemath/sagetrac-mirror/commit/28f89b6a73649d8c93c4ab0a5bb92f43b6ac785d)\".",
    "created_at": "2015-02-23T19:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243748",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[60bffcb71e5220ecb07045c8870be8b84bc5d3bb](https://github.com/sagemath/sagetrac-mirror/commit/60bffcb71e5220ecb07045c8870be8b84bc5d3bb)" to "[28f89b6a73649d8c93c4ab0a5bb92f43b6ac785d](https://github.com/sagemath/sagetrac-mirror/commit/28f89b6a73649d8c93c4ab0a5bb92f43b6ac785d)".



---

archive/issue_comments_243749.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28f89b6a73649d8c93c4ab0a5bb92f43b6ac785d\">28f89b6</a></td><td><code>Sign are now preserved + improvements</code></td></tr></table>\n",
    "created_at": "2015-02-23T19:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243749",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28f89b6a73649d8c93c4ab0a5bb92f43b6ac785d">28f89b6</a></td><td><code>Sign are now preserved + improvements</code></td></tr></table>




---

archive/issue_comments_243750.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [@jdemeyer](#comment%3A3):\n> Add a doctest with a negative sign to show that signs are preserved.\n\nThey were not! Thanks for spotting this `:-)`.",
    "created_at": "2015-02-23T19:34:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243750",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:5'></a>
Replying to [@jdemeyer](#comment%3A3):
> Add a doctest with a negative sign to show that signs are preserved.

They were not! Thanks for spotting this `:-)`.



---

archive/issue_events_218098.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-23T19:34:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218098"
}
```



---

archive/issue_events_218099.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-23T19:34:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218099"
}
```



---

archive/issue_comments_243751.json:
```json
{
    "body": "<a id='comment:6'></a>\nI have a question: Since the computation for non-fields is enclosed inside a `try`/`except` construction, if a computation is long and interrupted with `Ctrl+c`, a `KeyboardInterrupt` exception is raised and caught by the `except` to raise a `NotImplementedError` exception.\n\nWhat is a correct solution so that it does not return `NotImplementedError`? \n\n* Should the `KeyboardInterrupt` exception be filtered?\n* Should the `try`/`except` be enclosed in `sig_on()`/`sig_off()`?\n* Something else?",
    "created_at": "2015-02-23T20:35:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243751",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:6'></a>
I have a question: Since the computation for non-fields is enclosed inside a `try`/`except` construction, if a computation is long and interrupted with `Ctrl+c`, a `KeyboardInterrupt` exception is raised and caught by the `except` to raise a `NotImplementedError` exception.

What is a correct solution so that it does not return `NotImplementedError`? 

* Should the `KeyboardInterrupt` exception be filtered?
* Should the `try`/`except` be enclosed in `sig_on()`/`sig_off()`?
* Something else?



---

archive/issue_events_218100.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-24T09:40:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218100"
}
```



---

archive/issue_events_218101.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-24T09:40:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218101"
}
```



---

archive/issue_comments_243752.json:
```json
{
    "body": "<a id='comment:7'></a>\nUse `except Exception:` instead of a bare `except:`",
    "created_at": "2015-02-24T09:40:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243752",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
Use `except Exception:` instead of a bare `except:`



---

archive/issue_comments_243753.json:
```json
{
    "body": "**Changing commit** from \"[28f89b6a73649d8c93c4ab0a5bb92f43b6ac785d](https://github.com/sagemath/sagetrac-mirror/commit/28f89b6a73649d8c93c4ab0a5bb92f43b6ac785d)\" to \"[2f1962e623f4ab8ae305e05306579dfd0b4c2ce8](https://github.com/sagemath/sagetrac-mirror/commit/2f1962e623f4ab8ae305e05306579dfd0b4c2ce8)\".",
    "created_at": "2015-02-24T09:55:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243753",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[28f89b6a73649d8c93c4ab0a5bb92f43b6ac785d](https://github.com/sagemath/sagetrac-mirror/commit/28f89b6a73649d8c93c4ab0a5bb92f43b6ac785d)" to "[2f1962e623f4ab8ae305e05306579dfd0b4c2ce8](https://github.com/sagemath/sagetrac-mirror/commit/2f1962e623f4ab8ae305e05306579dfd0b4c2ce8)".



---

archive/issue_comments_243754.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f1962e623f4ab8ae305e05306579dfd0b4c2ce8\">2f1962e</a></td><td><code>Exception better handled</code></td></tr></table>\n",
    "created_at": "2015-02-24T09:55:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243754",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f1962e623f4ab8ae305e05306579dfd0b4c2ce8">2f1962e</a></td><td><code>Exception better handled</code></td></tr></table>




---

archive/issue_comments_243755.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [@jdemeyer](#comment%3A7):\n> Use `except Exception:` instead of a bare `except:`\n\nThank you!",
    "created_at": "2015-02-24T09:55:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243755",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:9'></a>
Replying to [@jdemeyer](#comment%3A7):
> Use `except Exception:` instead of a bare `except:`

Thank you!



---

archive/issue_events_218102.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-24T09:55:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218102"
}
```



---

archive/issue_events_218103.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-24T09:55:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218103"
}
```



---

archive/issue_comments_243756.json:
```json
{
    "body": "<a id='comment:10'></a>\nYou should add an example where the factorisation currently fails (say, over the ring of integers of some number field).",
    "created_at": "2015-02-24T14:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243756",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
You should add an example where the factorisation currently fails (say, over the ring of integers of some number field).



---

archive/issue_events_218104.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-24T14:09:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218104"
}
```



---

archive/issue_events_218105.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-24T14:09:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218105"
}
```



---

archive/issue_comments_243757.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [@jdemeyer](#comment%3A10):\n> You should add an example where the factorisation currently fails (say, over the ring of integers of some number field).\n\nActually, polynomials over the ring of integers of a number field belong to the class `MPolynomial_polydict` (defined in `multi_polynomial_element.py`) and not to `MPolynomial_libsingular` (defined in `multi_polynomial_libsingular.pyx`). So it does not make sense to test this in this file.\u00b9\n\nIt would be interesting to have such an example of a non-working case. Though I do not know for which ring(s) do the polynomials belong to the class `MPolynomial_libsingular`.\n\n\u00b9 One may do the same thing for rings of integers of a number field to obtain a factorization algorithm. The point is that the returned factors are not in the rings of integers in this case, so we have to reconstruct them. It's a bit more work than in the current case.",
    "created_at": "2015-02-24T14:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243757",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:12'></a>
Replying to [@jdemeyer](#comment%3A10):
> You should add an example where the factorisation currently fails (say, over the ring of integers of some number field).

Actually, polynomials over the ring of integers of a number field belong to the class `MPolynomial_polydict` (defined in `multi_polynomial_element.py`) and not to `MPolynomial_libsingular` (defined in `multi_polynomial_libsingular.pyx`). So it does not make sense to test this in this file.¹

It would be interesting to have such an example of a non-working case. Though I do not know for which ring(s) do the polynomials belong to the class `MPolynomial_libsingular`.

¹ One may do the same thing for rings of integers of a number field to obtain a factorization algorithm. The point is that the returned factors are not in the rings of integers in this case, so we have to reconstruct them. It's a bit more work than in the current case.



---

archive/issue_comments_243758.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e773f480e56b1b6496ab99f0a9d34623c364998\">0e773f4</a></td><td><code>Doctest ZZ/nZZ</code></td></tr></table>\n",
    "created_at": "2015-02-27T10:25:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243758",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e773f480e56b1b6496ab99f0a9d34623c364998">0e773f4</a></td><td><code>Doctest ZZ/nZZ</code></td></tr></table>




---

archive/issue_comments_243759.json:
```json
{
    "body": "**Changing commit** from \"[2f1962e623f4ab8ae305e05306579dfd0b4c2ce8](https://github.com/sagemath/sagetrac-mirror/commit/2f1962e623f4ab8ae305e05306579dfd0b4c2ce8)\" to \"[0e773f480e56b1b6496ab99f0a9d34623c364998](https://github.com/sagemath/sagetrac-mirror/commit/0e773f480e56b1b6496ab99f0a9d34623c364998)\".",
    "created_at": "2015-02-27T10:25:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243759",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[2f1962e623f4ab8ae305e05306579dfd0b4c2ce8](https://github.com/sagemath/sagetrac-mirror/commit/2f1962e623f4ab8ae305e05306579dfd0b4c2ce8)" to "[0e773f480e56b1b6496ab99f0a9d34623c364998](https://github.com/sagemath/sagetrac-mirror/commit/0e773f480e56b1b6496ab99f0a9d34623c364998)".



---

archive/issue_comments_243760.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [@bgrenet](#comment%3A12):\n> It would be interesting to have such an example of a non-working case. Though I do not know for which ring(s) do the polynomials belong to the class `MPolynomial_libsingular`.\n\nI haven't been able to find a non-field integral domain `D`, different from `ZZ`, such that `D['x','y']` belongs to `MPolynomial_libsingular`. So I add a doctest for `Zmod(4)['x','y']` for which the factorization indeed fails.",
    "created_at": "2015-02-27T10:29:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243760",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:14'></a>
Replying to [@bgrenet](#comment%3A12):
> It would be interesting to have such an example of a non-working case. Though I do not know for which ring(s) do the polynomials belong to the class `MPolynomial_libsingular`.

I haven't been able to find a non-field integral domain `D`, different from `ZZ`, such that `D['x','y']` belongs to `MPolynomial_libsingular`. So I add a doctest for `Zmod(4)['x','y']` for which the factorization indeed fails.



---

archive/issue_events_218106.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-27T10:29:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218106"
}
```



---

archive/issue_events_218107.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-27T10:29:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218107"
}
```



---

archive/issue_events_218108.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-23T18:45:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218108"
}
```



---

archive/issue_events_218109.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-23T18:45:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218109"
}
```



---

archive/issue_comments_243761.json:
```json
{
    "body": "<a id='comment:15'></a>\nSome comments:\n\n1. Replace `raise Exception, \"Message.\"` by `raise Exception(\"message\")`.\n\n2. Is the check for integral domain really needed? If it's not an integral domain, it will be caught by the branch below.\n\n3. Why did you add the check for symbolic ring? If it's needed, there should also be a doctest added for this case.\n\n4. The message `Factorization of multivariate polynomials over Symbolic Ring is not implemented. Consider using multivariate polynomial rings instead.` is confusing, it essentially says \"factorization of multivariate polynomials is not supported, use multivariate polynomials instead\".",
    "created_at": "2015-03-23T18:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243761",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Some comments:

1. Replace `raise Exception, "Message."` by `raise Exception("message")`.

2. Is the check for integral domain really needed? If it's not an integral domain, it will be caught by the branch below.

3. Why did you add the check for symbolic ring? If it's needed, there should also be a doctest added for this case.

4. The message `Factorization of multivariate polynomials over Symbolic Ring is not implemented. Consider using multivariate polynomial rings instead.` is confusing, it essentially says "factorization of multivariate polynomials is not supported, use multivariate polynomials instead".



---

archive/issue_comments_243762.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2015-03-23T18:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243762",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_comments_243763.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ffe8f4578766dc50cf648e94b7274dce2425318d\">ffe8f45</a></td><td><code>Remove useless (?) tests</code></td></tr></table>\n",
    "created_at": "2015-03-25T14:18:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243763",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ffe8f4578766dc50cf648e94b7274dce2425318d">ffe8f45</a></td><td><code>Remove useless (?) tests</code></td></tr></table>




---

archive/issue_comments_243764.json:
```json
{
    "body": "**Changing commit** from \"[0e773f480e56b1b6496ab99f0a9d34623c364998](https://github.com/sagemath/sagetrac-mirror/commit/0e773f480e56b1b6496ab99f0a9d34623c364998)\" to \"[ffe8f4578766dc50cf648e94b7274dce2425318d](https://github.com/sagemath/sagetrac-mirror/commit/ffe8f4578766dc50cf648e94b7274dce2425318d)\".",
    "created_at": "2015-03-25T14:18:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243764",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[0e773f480e56b1b6496ab99f0a9d34623c364998](https://github.com/sagemath/sagetrac-mirror/commit/0e773f480e56b1b6496ab99f0a9d34623c364998)" to "[ffe8f4578766dc50cf648e94b7274dce2425318d](https://github.com/sagemath/sagetrac-mirror/commit/ffe8f4578766dc50cf648e94b7274dce2425318d)".



---

archive/issue_events_218110.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-03-25T14:27:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218110"
}
```



---

archive/issue_events_218111.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-03-25T14:27:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218111"
}
```



---

archive/issue_comments_243765.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [@jdemeyer](#comment%3A15):\n\n> 1. Replace `raise Exception, \"Message.\"` by `raise Exception(\"message\")`.\n\nDone.\n\n> 2. Is the check for integral domain really needed? If it's not an integral domain, it will be caught by the branch below.\n> 3. Why did you add the check for symbolic ring? If it's needed, there should also be a doctest added for this case.\n\nThese both tests were not really needed. I added them in order to give more meaningful error messages. Now, the error message for the `SymbolicRing` is kind of weird, but the test I added was probably not the right place where to correct this.\u00b9 \n\nFor non-integral domains, you know have that `multivariate factorization over Ring of integers modulo 4 is not implemented` (for instance) while with the previous version it said that the factorization over non-integral rings is not implemented. I personally find the previous message more informative, but that is a matter of taste and I am also fine with the current message.\n\n\n> 4. The message `Factorization of multivariate polynomials over Symbolic Ring is not implemented. Consider using multivariate polynomial rings instead.` is confusing, it essentially says \"factorization of multivariate polynomials is not supported, use multivariate polynomials instead\".\n\nNot relevant anymore, though I agree with the confusing aspect of this message!\n\n\u00b9 The main problem is that the `SymbolicRing` has no `is_finite()` method. Thus we get a `NotImplementedError` which is not very informative. See #18054.",
    "created_at": "2015-03-25T14:27:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243765",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:17'></a>
Replying to [@jdemeyer](#comment%3A15):

> 1. Replace `raise Exception, "Message."` by `raise Exception("message")`.

Done.

> 2. Is the check for integral domain really needed? If it's not an integral domain, it will be caught by the branch below.
> 3. Why did you add the check for symbolic ring? If it's needed, there should also be a doctest added for this case.

These both tests were not really needed. I added them in order to give more meaningful error messages. Now, the error message for the `SymbolicRing` is kind of weird, but the test I added was probably not the right place where to correct this.¹ 

For non-integral domains, you know have that `multivariate factorization over Ring of integers modulo 4 is not implemented` (for instance) while with the previous version it said that the factorization over non-integral rings is not implemented. I personally find the previous message more informative, but that is a matter of taste and I am also fine with the current message.


> 4. The message `Factorization of multivariate polynomials over Symbolic Ring is not implemented. Consider using multivariate polynomial rings instead.` is confusing, it essentially says "factorization of multivariate polynomials is not supported, use multivariate polynomials instead".

Not relevant anymore, though I agree with the confusing aspect of this message!

¹ The main problem is that the `SymbolicRing` has no `is_finite()` method. Thus we get a `NotImplementedError` which is not very informative. See #18054.



---

archive/issue_comments_243766.json:
```json
{
    "body": "<a id='comment:18'></a>\nRelated: #2179",
    "created_at": "2015-04-13T16:23:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243766",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:18'></a>
Related: #2179



---

archive/issue_comments_243767.json:
```json
{
    "body": "<a id='comment:19'></a>\nIt seems that the code proposed in #2179 is not in its current form ready to use (based on his author's comments). There was supposed to be some improved version, but since it is already 7 years old, we should maybe ignore it for now?",
    "created_at": "2015-04-22T13:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243767",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:19'></a>
It seems that the code proposed in #2179 is not in its current form ready to use (based on his author's comments). There was supposed to be some improved version, but since it is already 7 years old, we should maybe ignore it for now?



---

archive/issue_comments_243768.json:
```json
{
    "body": "<a id='comment:20'></a>\nYes, probably, I was only pointing out the other ticket just in case there was something relevant there.",
    "created_at": "2015-04-22T15:10:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243768",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:20'></a>
Yes, probably, I was only pointing out the other ticket just in case there was something relevant there.



---

archive/issue_comments_243769.json:
```json
{
    "body": "**Changing branch** from \"[u/bruno/factorization_of_multivariate_polynomials_over_the_integers](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/factorization_of_multivariate_polynomials_over_the_integers)\" to \"[u/jdemeyer/factorization_of_multivariate_polynomials_over_the_integers](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/factorization_of_multivariate_polynomials_over_the_integers)\".",
    "created_at": "2015-05-24T09:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243769",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/bruno/factorization_of_multivariate_polynomials_over_the_integers](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/factorization_of_multivariate_polynomials_over_the_integers)" to "[u/jdemeyer/factorization_of_multivariate_polynomials_over_the_integers](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/factorization_of_multivariate_polynomials_over_the_integers)".



---

archive/issue_events_218112.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-24T09:47:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218112"
}
```



---

archive/issue_events_218113.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-24T09:47:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218113"
}
```



---

archive/issue_comments_243770.json:
```json
{
    "body": "**Changing commit** from \"[ffe8f4578766dc50cf648e94b7274dce2425318d](https://github.com/sagemath/sagetrac-mirror/commit/ffe8f4578766dc50cf648e94b7274dce2425318d)\" to \"[c41d743d8733ab8ccd00aee7bde2312cb4751cbd](https://github.com/sagemath/sagetrac-mirror/commit/c41d743d8733ab8ccd00aee7bde2312cb4751cbd)\".",
    "created_at": "2015-05-24T09:47:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243770",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[ffe8f4578766dc50cf648e94b7274dce2425318d](https://github.com/sagemath/sagetrac-mirror/commit/ffe8f4578766dc50cf648e94b7274dce2425318d)" to "[c41d743d8733ab8ccd00aee7bde2312cb4751cbd](https://github.com/sagemath/sagetrac-mirror/commit/c41d743d8733ab8ccd00aee7bde2312cb4751cbd)".



---

archive/issue_comments_243771.json:
```json
{
    "body": "<a id='comment:22'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c41d743d8733ab8ccd00aee7bde2312cb4751cbd\">c41d743</a></td><td><code>Minor review changes</code></td></tr></table>\n",
    "created_at": "2015-05-24T09:47:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243771",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c41d743d8733ab8ccd00aee7bde2312cb4751cbd">c41d743</a></td><td><code>Minor review changes</code></td></tr></table>




---

archive/issue_comments_243772.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/factorization_of_multivariate_polynomials_over_the_integers](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/factorization_of_multivariate_polynomials_over_the_integers)\" to \"[c41d743d8733ab8ccd00aee7bde2312cb4751cbd](https://github.com/sagemath/sagetrac-mirror/commit/c41d743d8733ab8ccd00aee7bde2312cb4751cbd)\".",
    "created_at": "2015-05-25T07:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243772",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/factorization_of_multivariate_polynomials_over_the_integers](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/factorization_of_multivariate_polynomials_over_the_integers)" to "[c41d743d8733ab8ccd00aee7bde2312cb4751cbd](https://github.com/sagemath/sagetrac-mirror/commit/c41d743d8733ab8ccd00aee7bde2312cb4751cbd)".



---

archive/issue_events_218114.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-25T07:29:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218114"
}
```



---

archive/issue_events_218115.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "52dced6cebade18cb8dd46491aed95484525e6d8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-05-25T07:29:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17840#event-218115"
}
```



---

archive/issue_comments_243773.json:
```json
{
    "body": "**Changing commit** from \"[c41d743d8733ab8ccd00aee7bde2312cb4751cbd](https://github.com/sagemath/sagetrac-mirror/commit/c41d743d8733ab8ccd00aee7bde2312cb4751cbd)\" to \"\".",
    "created_at": "2016-04-15T07:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243773",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[c41d743d8733ab8ccd00aee7bde2312cb4751cbd](https://github.com/sagemath/sagetrac-mirror/commit/c41d743d8733ab8ccd00aee7bde2312cb4751cbd)" to "".



---

archive/issue_comments_243774.json:
```json
{
    "body": "<a id='comment:24'></a>\nsee #20435 for something going wrong",
    "created_at": "2016-04-15T07:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17840#issuecomment-243774",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>
see #20435 for something going wrong
