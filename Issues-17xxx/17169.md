# Issue 17169: Upgrade to GCC 4.9.1

archive/issues_016932.json:
```json
{
    "body": "ftp://ftp.mirrorservice.org/sites/sourceware.org/pub/gcc/releases/gcc-4.9.1/gcc-4.9.1.tar.bz2\n\nCC:  jpflori\n\nKeywords: yosemite\n\nUpstream: Reported upstream. No feedback yet.\n\nReviewer: R. Andrew Ohana, Jeroen Demeyer, Fran\u00e7ois Bissey\n\nAuthor: Volker Braun\n\nBranch: e16d2ae38370fe22f7ade18a8317c3840261a971\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17169\n\n",
    "closed_at": "2014-10-30T09:45:51Z",
    "created_at": "2014-10-17T17:21:12Z",
    "labels": [
        "component: packages: standard",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Upgrade to GCC 4.9.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17169",
    "user": "https://github.com/vbraun"
}
```
ftp://ftp.mirrorservice.org/sites/sourceware.org/pub/gcc/releases/gcc-4.9.1/gcc-4.9.1.tar.bz2

CC:  jpflori

Keywords: yosemite

Upstream: Reported upstream. No feedback yet.

Reviewer: R. Andrew Ohana, Jeroen Demeyer, Fran√ßois Bissey

Author: Volker Braun

Branch: e16d2ae38370fe22f7ade18a8317c3840261a971

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17169





---

archive/issue_comments_238659.json:
```json
{
    "body": "<a id='comment:2'></a>\n```\nComparing stages 2 and 3\nwarning: gcc/cc1-checksum.o differs\nwarning: gcc/cc1obj-checksum.o differs\nwarning: gcc/cc1plus-checksum.o differs\nBootstrap comparison failure!\ngcc/asan.o differs\ngcc/c/c-decl.o differs\ngcc/cfg.o differs\ngcc/coverage.o differs\ngcc/cp/class.o differs\ngcc/cp/semantics.o differs\ngcc/cp/tree.o differs\ngcc/dse.o differs\ngcc/java/jcf-io.o differs\ngcc/objc/objc-act.o differs\ngcc/tree-ssa-ccp.o differs\ngcc/tree-ssa-coalesce.o differs\ngcc/tree-ssa-pre.o differs\ngcc/tree-ssa-threadupdate.o differs\ngcc/valtrack.o differs\nmake[5]: *** [compare] Error 1\nmake[4]: *** [stage3-bubble] Error 2\nmake[3]: *** [all] Error 2\n```\n\nThe files are indeed different, but after I strip them then they are identical. So its something wonky in the debug info...\n\n---\nNew commits:",
    "created_at": "2014-10-17T19:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238659",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>
```
Comparing stages 2 and 3
warning: gcc/cc1-checksum.o differs
warning: gcc/cc1obj-checksum.o differs
warning: gcc/cc1plus-checksum.o differs
Bootstrap comparison failure!
gcc/asan.o differs
gcc/c/c-decl.o differs
gcc/cfg.o differs
gcc/coverage.o differs
gcc/cp/class.o differs
gcc/cp/semantics.o differs
gcc/cp/tree.o differs
gcc/dse.o differs
gcc/java/jcf-io.o differs
gcc/objc/objc-act.o differs
gcc/tree-ssa-ccp.o differs
gcc/tree-ssa-coalesce.o differs
gcc/tree-ssa-pre.o differs
gcc/tree-ssa-threadupdate.o differs
gcc/valtrack.o differs
make[5]: *** [compare] Error 1
make[4]: *** [stage3-bubble] Error 2
make[3]: *** [all] Error 2
```

The files are indeed different, but after I strip them then they are identical. So its something wonky in the debug info...

---
New commits:



---

archive/issue_comments_238660.json:
```json
{
    "body": "<a id='comment:3'></a>Fails just the same way on 10.9 so it is not the OS version at fault. The only thing I can think of is that the requirement for building gcc 4.8+ have been raised (that's not hypothetical, it is a fact) but I would be surprised if \n* the clang shipped was insufficient. That would be a well known problem\n* surely it would break before stage 3",
    "created_at": "2014-10-18T01:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238660",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'></a>Fails just the same way on 10.9 so it is not the OS version at fault. The only thing I can think of is that the requirement for building gcc 4.8+ have been raised (that's not hypothetical, it is a fact) but I would be surprised if 
* the clang shipped was insufficient. That would be a well known problem
* surely it would break before stage 3



---

archive/issue_comments_238661.json:
```json
{
    "body": "<a id='comment:4'></a>So I bootstrapped this with gcc 4.7.3 from sage 6.4.beta5 and it worked so\nReplying to [comment:3 fbissey]:\n> Fails just the same way on 10.9 so it is not the OS version at fault. The only thing I can think of is that the requirement for building gcc 4.8+ have been raised (that's not hypothetical, it is a fact) but I would be surprised if \n> * the clang shipped was insufficient. That would be a well known problem\n\n\nApparently that's the case.\n\n>  * surely it would break before stage 3\n\n\nWhat do I know?",
    "created_at": "2014-10-18T03:07:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238661",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>So I bootstrapped this with gcc 4.7.3 from sage 6.4.beta5 and it worked so
Replying to [comment:3 fbissey]:
> Fails just the same way on 10.9 so it is not the OS version at fault. The only thing I can think of is that the requirement for building gcc 4.8+ have been raised (that's not hypothetical, it is a fact) but I would be surprised if 
> * the clang shipped was insufficient. That would be a well known problem


Apparently that's the case.

>  * surely it would break before stage 3


What do I know?



---

archive/issue_comments_238662.json:
```json
{
    "body": "<a id='comment:5'></a>What happens is that GCC builds stage 2 with debug symbols, stage 3 without debug symbols. Then GCC checks that the code is identical using some tools from binutils. This checks are indeed broken on some systems.\n\nThe line in `spkg-install`\n\n```\n# Disable bootstrap-debug, since it doesn't work on an OS X 10.4 PPC\n# machine, nor on some Solaris machine. bootstrap-debug only does\n# additional checks during the build, so it is safe not to use it.\nMAKE=\"$MAKE BUILD_CONFIG=\"\n```\nis supposed to disable that, but apparently this disabling no longer works.",
    "created_at": "2014-10-18T04:48:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238662",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>What happens is that GCC builds stage 2 with debug symbols, stage 3 without debug symbols. Then GCC checks that the code is identical using some tools from binutils. This checks are indeed broken on some systems.

The line in `spkg-install`

```
# Disable bootstrap-debug, since it doesn't work on an OS X 10.4 PPC
# machine, nor on some Solaris machine. bootstrap-debug only does
# additional checks during the build, so it is safe not to use it.
MAKE="$MAKE BUILD_CONFIG="
```
is supposed to disable that, but apparently this disabling no longer works.



---

archive/issue_comments_238663.json:
```json
{
    "body": "<a id='comment:6'></a>GCC 4.8 requires a C++ compiler, so this ticket needs changes to the installation guide, to `build/install` and to `$SAGE_ROOT/configure.ac`.",
    "created_at": "2014-10-18T04:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238663",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>GCC 4.8 requires a C++ compiler, so this ticket needs changes to the installation guide, to `build/install` and to `$SAGE_ROOT/configure.ac`.



---

archive/issue_comments_238664.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:5 jdemeyer]:\n> The line in `spkg-install`\n> ...\n> is supposed to disable that, but apparently this disabling no longer works.\n\nIt seems that this line is the culprit in this case, somehow disabling bootstrap-debug (if this is still actually disabling it) is now breaking the build.",
    "created_at": "2014-10-18T05:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238664",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:7'></a>Replying to [comment:5 jdemeyer]:
> The line in `spkg-install`
> ...
> is supposed to disable that, but apparently this disabling no longer works.

It seems that this line is the culprit in this case, somehow disabling bootstrap-debug (if this is still actually disabling it) is now breaking the build.



---

archive/issue_comments_238665.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:5 jdemeyer]:\n> What happens is that GCC builds stage 2 with debug symbols, stage 3 without debug symbols.\n\n\nThe object files from stage 2 and 3 have the same size for me. That is, before stripping the size is the same, after stripping the size is the same, but stripping reduces the size. They compare identical after stripping. The difference is not in something that is human-readable (at least not to me ;-)",
    "created_at": "2014-10-18T09:37:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238665",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>Replying to [comment:5 jdemeyer]:
> What happens is that GCC builds stage 2 with debug symbols, stage 3 without debug symbols.


The object files from stage 2 and 3 have the same size for me. That is, before stripping the size is the same, after stripping the size is the same, but stripping reduces the size. They compare identical after stripping. The difference is not in something that is human-readable (at least not to me ;-)



---

archive/issue_comments_238666.json:
```json
{
    "body": "<a id='comment:9'></a>Confirmed. I tried a few things but I completely missed that line. That takes my number 2 spot in the \"configuration option that leads to a build of gcc to fail\" [my number one spot can be summarised with \"it fails in stage 1 when I change the installation prefix (yes I mean --prefix=...)\"].\n\nI am relieved that clang++ is enough to build gcc 4.8+.",
    "created_at": "2014-10-18T09:38:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238666",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'></a>Confirmed. I tried a few things but I completely missed that line. That takes my number 2 spot in the "configuration option that leads to a build of gcc to fail" [my number one spot can be summarised with "it fails in stage 1 when I change the installation prefix (yes I mean --prefix=...)"].

I am relieved that clang++ is enough to build gcc 4.8+.



---

archive/issue_comments_238667.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-ftp://ftp.mirrorservice.org/sites/sourceware.org/pub/gcc/releases/gcc-4.8.3/gcc-4.8.3.tar.bz2\n+ftp://ftp.mirrorservice.org/sites/sourceware.org/pub/gcc/releases/gcc-4.9.1/gcc-4.9.1.tar.bz2\n \n Comment: 1\n \n``````\n",
    "created_at": "2014-10-18T10:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238667",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-ftp://ftp.mirrorservice.org/sites/sourceware.org/pub/gcc/releases/gcc-4.8.3/gcc-4.8.3.tar.bz2
+ftp://ftp.mirrorservice.org/sites/sourceware.org/pub/gcc/releases/gcc-4.9.1/gcc-4.9.1.tar.bz2
 
 Comment: 1
 
``````




---

archive/issue_comments_238668.json:
```json
{
    "body": "<a id='comment:10'></a>I can build gcc 4.9.1 so I suggest we go for that. I'm using it on my desktop daily (Fedora 21 alpha)",
    "created_at": "2014-10-18T10:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238668",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>I can build gcc 4.9.1 so I suggest we go for that. I'm using it on my desktop daily (Fedora 21 alpha)



---

archive/issue_comments_238669.json:
```json
{
    "body": "<a id='comment:12'></a>Why not going to 4.9.x was one of the question I had when first seeing the ticket. For reference the bug for building on yosemite on gcc's bugzilla. The fix is merged in trunk along with a couple of other stuff that we probably don't care much about, but it will be in 4.9.2 and 5.0. I think this is ready for review.\n\n---\nNew commits:",
    "created_at": "2014-10-18T11:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238669",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'></a>Why not going to 4.9.x was one of the question I had when first seeing the ticket. For reference the bug for building on yosemite on gcc's bugzilla. The fix is merged in trunk along with a couple of other stuff that we probably don't care much about, but it will be in 4.9.2 and 5.0. I think this is ready for review.

---
New commits:



---

archive/issue_comments_238670.json:
```json
{
    "body": "Changing keywords from \"\" to \"yosemite\".",
    "created_at": "2014-10-18T12:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238670",
    "user": "https://github.com/vbraun"
}
```

Changing keywords from "" to "yosemite".



---

archive/issue_comments_238671.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-18T13:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238671",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_238672.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-18T19:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_238673.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                          |                                              |\n> |------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n> |[2fc95e7](http://git.sagemath.org/sage.git/commit/?id=2fc95e7a09606596d378d3cd91f4bf6c80b54d99)|`Evil workaround for broken OSX system header`|\n\n\nI think you forgot a bit in that commit. A destination file.",
    "created_at": "2014-10-18T19:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238673",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'></a>Replying to [comment:15 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                          |                                              |
> |------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
> |[2fc95e7](http://git.sagemath.org/sage.git/commit/?id=2fc95e7a09606596d378d3cd91f4bf6c80b54d99)|`Evil workaround for broken OSX system header`|


I think you forgot a bit in that commit. A destination file.



---

archive/issue_comments_238674.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-18T19:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_238675.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-18T19:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_238676.json:
```json
{
    "body": "<a id='comment:19'></a>On a related note, the default git pager on OSX just truncates lines. No of course I don't want to see the ends of long lines...",
    "created_at": "2014-10-18T19:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238676",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:19'></a>On a related note, the default git pager on OSX just truncates lines. No of course I don't want to see the ends of long lines...



---

archive/issue_comments_238677.json:
```json
{
    "body": "<a id='comment:20'></a>That lets me compile Sage, but it then segfaults on startup (i.e. when it gets to `conway_polyonmials`)",
    "created_at": "2014-10-18T21:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238677",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>That lets me compile Sage, but it then segfaults on startup (i.e. when it gets to `conway_polyonmials`)



---

archive/issue_comments_238678.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:20 vbraun]:\n> That lets me compile Sage, but it then segfaults on startup (i.e. when it gets to `conway_polyonmials`)\n\n\nEverything seems all right with 10.9. I would be interested in the back trace you have. I am upgrading to 10.10 sometimes tomorrow I may be able to experience it first hand. Not sure I want to upgrade, my wife did and it looks a bit like the \"fisher-price\" interface that iOS has become. Beurk.",
    "created_at": "2014-10-19T05:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238678",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:21'></a>Replying to [comment:20 vbraun]:
> That lets me compile Sage, but it then segfaults on startup (i.e. when it gets to `conway_polyonmials`)


Everything seems all right with 10.9. I would be interested in the back trace you have. I am upgrading to 10.10 sometimes tomorrow I may be able to experience it first hand. Not sure I want to upgrade, my wife did and it looks a bit like the "fisher-price" interface that iOS has become. Beurk.



---

archive/issue_comments_238679.json:
```json
{
    "body": "<a id='comment:22'></a>Can't get a backtrace, apparently gdb doesn't pass through `DYLD_LIBRARY_PATH`. And lldb is useless.",
    "created_at": "2014-10-19T11:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238679",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>Can't get a backtrace, apparently gdb doesn't pass through `DYLD_LIBRARY_PATH`. And lldb is useless.



---

archive/issue_comments_238680.json:
```json
{
    "body": "<a id='comment:23'></a>PS: Adventures in using gdb will be chronicled at #17176",
    "created_at": "2014-10-19T11:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238680",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'></a>PS: Adventures in using gdb will be chronicled at #17176



---

archive/issue_comments_238681.json:
```json
{
    "body": "<a id='comment:24'></a>backtrace:\n\n```\nProgram received signal SIGSEGV, Segmentation fault.\n0x0000000103d3529b in get_adjusted_ptr(std::type_info const*, std::type_info const*, void**) ()\n   from /Users/vbraun/Sage/local/lib/libstdc++.6.dylib\n(gdb) bt\nPython Exception <type 'exceptions.ImportError'> No module named gdb.frames: \n#0  0x0000000103d3529b in get_adjusted_ptr(std::type_info const*, std::type_info const*, void**) ()\n   from /Users/vbraun/Sage/local/lib/libstdc++.6.dylib\n#1  0x0000000103d35b49 in __gxx_personality_v0 () from /Users/vbraun/Sage/local/lib/libstdc++.6.dylib\n#2  0x00007fff8e81b951 in _Unwind_RaiseException () from /usr/lib/system/libunwind.dylib\n#3  0x0000000103d362d9 in __cxa_rethrow () from /Users/vbraun/Sage/local/lib/libstdc++.6.dylib\n#4  0x000000010d411005 in __pyx_f_4sage_8symbolic_8function_15BuiltinFunction__is_registered(__pyx_obj_4sage_8symbolic_8function_BuiltinFunction*) () from /Users/vbraun/Sage/local/lib/python2.7/site-packages/sage/symbolic/function.so\n#5  0x000000010d400f47 in __pyx_pw_4sage_8symbolic_8function_8Function_1__init__(_object*, _object*, _object*) ()\n   from /Users/vbraun/Sage/local/lib/python2.7/site-packages/sage/symbolic/function.so\n#6  0x000000010008eeec in wrap_init () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib\n#7  0x0000000100016b43 in PyObject_Call () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib\n#8  0x00000001000e2737 in PyEval_CallObjectWithKeywords () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib\n#9  0x000000010003ac00 in wrapperdescr_call () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib\n#10 0x000000010d403d40 in __pyx_pw_4sage_8symbolic_8function_15BuiltinFunction_1__init__(_object*, _object*, _object*) ()\n   from /Users/vbraun/Sage/local/lib/python2.7/site-packages/sage/symbolic/function.so\n#11 0x000000010008eeec in wrap_init () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib\n#12 0x0000000100016b43 in PyObject_Call () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib\n#13 0x00000001000e2737 in PyEval_CallObjectWithKeywords () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib\n#14 0x000000010003ac00 in wrapperdescr_call () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib\n#15 0x0000000100016b43 in PyObject_Call () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib\n```",
    "created_at": "2014-10-19T11:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238681",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:24'></a>backtrace:

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000103d3529b in get_adjusted_ptr(std::type_info const*, std::type_info const*, void**) ()
   from /Users/vbraun/Sage/local/lib/libstdc++.6.dylib
(gdb) bt
Python Exception <type 'exceptions.ImportError'> No module named gdb.frames: 
#0  0x0000000103d3529b in get_adjusted_ptr(std::type_info const*, std::type_info const*, void**) ()
   from /Users/vbraun/Sage/local/lib/libstdc++.6.dylib
#1  0x0000000103d35b49 in __gxx_personality_v0 () from /Users/vbraun/Sage/local/lib/libstdc++.6.dylib
#2  0x00007fff8e81b951 in _Unwind_RaiseException () from /usr/lib/system/libunwind.dylib
#3  0x0000000103d362d9 in __cxa_rethrow () from /Users/vbraun/Sage/local/lib/libstdc++.6.dylib
#4  0x000000010d411005 in __pyx_f_4sage_8symbolic_8function_15BuiltinFunction__is_registered(__pyx_obj_4sage_8symbolic_8function_BuiltinFunction*) () from /Users/vbraun/Sage/local/lib/python2.7/site-packages/sage/symbolic/function.so
#5  0x000000010d400f47 in __pyx_pw_4sage_8symbolic_8function_8Function_1__init__(_object*, _object*, _object*) ()
   from /Users/vbraun/Sage/local/lib/python2.7/site-packages/sage/symbolic/function.so
#6  0x000000010008eeec in wrap_init () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib
#7  0x0000000100016b43 in PyObject_Call () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib
#8  0x00000001000e2737 in PyEval_CallObjectWithKeywords () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib
#9  0x000000010003ac00 in wrapperdescr_call () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib
#10 0x000000010d403d40 in __pyx_pw_4sage_8symbolic_8function_15BuiltinFunction_1__init__(_object*, _object*, _object*) ()
   from /Users/vbraun/Sage/local/lib/python2.7/site-packages/sage/symbolic/function.so
#11 0x000000010008eeec in wrap_init () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib
#12 0x0000000100016b43 in PyObject_Call () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib
#13 0x00000001000e2737 in PyEval_CallObjectWithKeywords () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib
#14 0x000000010003ac00 in wrapperdescr_call () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib
#15 0x0000000100016b43 in PyObject_Call () from /Users/vbraun/Sage/local/lib/libpython2.7.dylib
```



---

archive/issue_comments_238682.json:
```json
{
    "body": "<a id='comment:25'></a>When building with `SAGE_CHECK=yes` I start getting segfaults in the mpir testsuite:\n\n```\n$ ./gdb /Users/vbraun/Sage/local/var/tmp/sage/build/mpir-2.6.0.p4/src/tests/.libs/t-popc \n[...]\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007fff86172432 in __block_descriptor_tmp227 () from /usr/lib/system/libdyld.dylib\n(gdb) bt\nPython Exception <type 'exceptions.ImportError'> No module named gdb.frames: \n#0  0x00007fff86172432 in __block_descriptor_tmp227 () from /usr/lib/system/libdyld.dylib\n#1  0x00007fff5fbffa80 in ?? ()\n#2  0x00000001000ca0d0 in ?? () from /Users/vbraun/Sage/local/lib/libmpir.11.dylib\n#3  0x000000000000011d in ?? ()\n#4  0x00000001000223c1 in __gmp_randget_mt (rstate=0x7fff5fbffb60, dest=0x7fff5fbffab0, nbits=32) at randmt.c:256\n#5  0x000000010006d81d in ?? () from /Users/vbraun/Sage/local/lib/libmpir.11.dylib\n#6  0x000000010006d71c in ?? () from /Users/vbraun/Sage/local/lib/libmpir.11.dylib\n#7  0x0000000100000f8c in main () at t-popc.c:60\n```\nThe `__block_descriptor_tmp` stuff is part of the Objective-C implementation, might be that the evil hack is too evil... Does anybody know what the `/usr/include/dispatch` stuff is for?",
    "created_at": "2014-10-19T15:34:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238682",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>When building with `SAGE_CHECK=yes` I start getting segfaults in the mpir testsuite:

```
$ ./gdb /Users/vbraun/Sage/local/var/tmp/sage/build/mpir-2.6.0.p4/src/tests/.libs/t-popc 
[...]
Program received signal SIGSEGV, Segmentation fault.
0x00007fff86172432 in __block_descriptor_tmp227 () from /usr/lib/system/libdyld.dylib
(gdb) bt
Python Exception <type 'exceptions.ImportError'> No module named gdb.frames: 
#0  0x00007fff86172432 in __block_descriptor_tmp227 () from /usr/lib/system/libdyld.dylib
#1  0x00007fff5fbffa80 in ?? ()
#2  0x00000001000ca0d0 in ?? () from /Users/vbraun/Sage/local/lib/libmpir.11.dylib
#3  0x000000000000011d in ?? ()
#4  0x00000001000223c1 in __gmp_randget_mt (rstate=0x7fff5fbffb60, dest=0x7fff5fbffab0, nbits=32) at randmt.c:256
#5  0x000000010006d81d in ?? () from /Users/vbraun/Sage/local/lib/libmpir.11.dylib
#6  0x000000010006d71c in ?? () from /Users/vbraun/Sage/local/lib/libmpir.11.dylib
#7  0x0000000100000f8c in main () at t-popc.c:60
```
The `__block_descriptor_tmp` stuff is part of the Objective-C implementation, might be that the evil hack is too evil... Does anybody know what the `/usr/include/dispatch` stuff is for?



---

archive/issue_comments_238683.json:
```json
{
    "body": "<a id='comment:26'></a>MPIR testsuite also fails without the evil hack...",
    "created_at": "2014-10-19T16:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238683",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'></a>MPIR testsuite also fails without the evil hack...



---

archive/issue_comments_238684.json:
```json
{
    "body": "<a id='comment:27'></a>And after my fresh update. BOOM gcc doesn't patch\n\n```\ngcc-4.9.1\n====================================================\nSetting up build directory for gcc-4.9.1\nFinished set up\n****************************************************\nHost system:\nDarwin Mirage.local 14.0.0 Darwin Kernel Version 14.0.0: Fri Sep 19 00:26:44 PDT 2014; root:xnu-2782.1.97~2/RELEASE_X86_64 x86_64\n****************************************************\nC compiler: /usr/bin/clang\nC compiler version:\nApple LLVM version 6.0 (clang-600.0.51) (based on LLVM 3.5svn)\nTarget: x86_64-apple-darwin14.0.0\nThread model: posix\n****************************************************\nApplying patches...\nUsing ../patches/min_version_10_10.patch\npatching file gcc/config/darwin-c.c\npatching file gcc/config/darwin-driver.c\nsed: /usr/include/dispatch/object.h: No such file or directory\n```\nSo it looks like this is installed by something else. Could I have missed an xcode update or something?  The app store doesn't see any more updates available.\n\nI note this is the dispatch stuff that makes you scratch your head.",
    "created_at": "2014-10-19T22:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238684",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:27'></a>And after my fresh update. BOOM gcc doesn't patch

```
gcc-4.9.1
====================================================
Setting up build directory for gcc-4.9.1
Finished set up
****************************************************
Host system:
Darwin Mirage.local 14.0.0 Darwin Kernel Version 14.0.0: Fri Sep 19 00:26:44 PDT 2014; root:xnu-2782.1.97~2/RELEASE_X86_64 x86_64
****************************************************
C compiler: /usr/bin/clang
C compiler version:
Apple LLVM version 6.0 (clang-600.0.51) (based on LLVM 3.5svn)
Target: x86_64-apple-darwin14.0.0
Thread model: posix
****************************************************
Applying patches...
Using ../patches/min_version_10_10.patch
patching file gcc/config/darwin-c.c
patching file gcc/config/darwin-driver.c
sed: /usr/include/dispatch/object.h: No such file or directory
```
So it looks like this is installed by something else. Could I have missed an xcode update or something?  The app store doesn't see any more updates available.

I note this is the dispatch stuff that makes you scratch your head.



---

archive/issue_comments_238685.json:
```json
{
    "body": "<a id='comment:28'></a>Yeah, xcode 6.1 is up on their developer website, but it doesn't seem to be up on the app store yet (supposedly it will be \"available shortly\").",
    "created_at": "2014-10-19T23:18:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238685",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:28'></a>Yeah, xcode 6.1 is up on their developer website, but it doesn't seem to be up on the app store yet (supposedly it will be "available shortly").



---

archive/issue_comments_238686.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:25 vbraun]:\n> When building with `SAGE_CHECK=yes` I start getting segfaults in the mpir testsuite:\n\nWhen using Homebrew's gcc, the test suite is passing for me.\n\n> Does anybody know what the `/usr/include/dispatch` stuff is for?\n\nI presume it is related to libdispatch (brand name \"Grand Central Dispatch\"). I can't imagine that python is actually using it at all. (Also, I think we should move the ugly hack to the python spkg, since that seems to be the affected package.)",
    "created_at": "2014-10-19T23:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238686",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:29'></a>Replying to [comment:25 vbraun]:
> When building with `SAGE_CHECK=yes` I start getting segfaults in the mpir testsuite:

When using Homebrew's gcc, the test suite is passing for me.

> Does anybody know what the `/usr/include/dispatch` stuff is for?

I presume it is related to libdispatch (brand name "Grand Central Dispatch"). I can't imagine that python is actually using it at all. (Also, I think we should move the ugly hack to the python spkg, since that seems to be the affected package.)



---

archive/issue_comments_238687.json:
```json
{
    "body": "<a id='comment:30'></a>I had xcode 6 CLT, which supposedly supports 10.10.\n\nR also trips over the dispatch header, its not just python.",
    "created_at": "2014-10-19T23:44:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238687",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>I had xcode 6 CLT, which supposedly supports 10.10.

R also trips over the dispatch header, its not just python.



---

archive/issue_comments_238688.json:
```json
{
    "body": "<a id='comment:32'></a>What about providing different GCC versions (in gcc-4.x dirs, and the standard one being a symlink from gcc to gcc-4.9)?\nIs that too much to maintain?",
    "created_at": "2014-10-20T08:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238688",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:32'></a>What about providing different GCC versions (in gcc-4.x dirs, and the standard one being a symlink from gcc to gcc-4.9)?
Is that too much to maintain?



---

archive/issue_comments_238689.json:
```json
{
    "body": "<a id='comment:33'></a>Jean-Pierre: I'm not going to maintain multiple gcc versions, but if you want to commit to it then be my guest.\n\nStill no Xcode 6.1...\n\nAndrew, is the Homebrew gcc compiled on OSX 10.10 or on the previous version?\n\nI noticed that, if you open Firefox on OSX 10.10, a notification pops up: \"Try the new Safari\". Really, Apple?",
    "created_at": "2014-10-20T10:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238689",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>Jean-Pierre: I'm not going to maintain multiple gcc versions, but if you want to commit to it then be my guest.

Still no Xcode 6.1...

Andrew, is the Homebrew gcc compiled on OSX 10.10 or on the previous version?

I noticed that, if you open Firefox on OSX 10.10, a notification pops up: "Try the new Safari". Really, Apple?



---

archive/issue_comments_238690.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [comment:33 vbraun]:\n> Andrew, is the Homebrew gcc compiled on OSX 10.10 or on the previous version?\n\nCompiled on 10.10. I'm running through the rest of the sage build with `SAGE_CHECK=yes` right now and we'll see what fails.",
    "created_at": "2014-10-20T18:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238690",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:34'></a>Replying to [comment:33 vbraun]:
> Andrew, is the Homebrew gcc compiled on OSX 10.10 or on the previous version?

Compiled on 10.10. I'm running through the rest of the sage build with `SAGE_CHECK=yes` right now and we'll see what fails.



---

archive/issue_comments_238691.json:
```json
{
    "body": "<a id='comment:35'></a>I had `SAGE_DEBUG=yes`, which implies `-O0` when compiling MPIR. Without it, the MPIR testsuite works. For once **disabling** optimization causes a bug ;-)",
    "created_at": "2014-10-20T20:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238691",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:35'></a>I had `SAGE_DEBUG=yes`, which implies `-O0` when compiling MPIR. Without it, the MPIR testsuite works. For once **disabling** optimization causes a bug ;-)



---

archive/issue_comments_238692.json:
```json
{
    "body": "<a id='comment:36'></a>Compiling MPIR with `CFLAGS=-O1` also fails the testsuite, but `CFLAGS=-O2` works.",
    "created_at": "2014-10-20T22:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238692",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:36'></a>Compiling MPIR with `CFLAGS=-O1` also fails the testsuite, but `CFLAGS=-O2` works.



---

archive/issue_comments_238693.json:
```json
{
    "body": "<a id='comment:37'></a>What about no flags and let mpir decides for itself?",
    "created_at": "2014-10-20T22:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238693",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:37'></a>What about no flags and let mpir decides for itself?



---

archive/issue_comments_238694.json:
```json
{
    "body": "<a id='comment:38'></a>No flags works, too. \n\nAndrew, does MPIR also fail with -O0 on your GCC? If so then I'll open an upstream ticket.",
    "created_at": "2014-10-20T23:00:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238694",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:38'></a>No flags works, too. 

Andrew, does MPIR also fail with -O0 on your GCC? If so then I'll open an upstream ticket.



---

archive/issue_comments_238695.json:
```json
{
    "body": "<a id='comment:39'></a>Yes, MPIR fails with -O0. I'm also getting a couple segfaults in pari's test suite as well as a segfault in m4rie's test suite, so it doesn't seem isolated to MPIR, something funky is going on.",
    "created_at": "2014-10-21T00:06:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238695",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:39'></a>Yes, MPIR fails with -O0. I'm also getting a couple segfaults in pari's test suite as well as a segfault in m4rie's test suite, so it doesn't seem isolated to MPIR, something funky is going on.



---

archive/issue_comments_238696.json:
```json
{
    "body": "<a id='comment:40'></a>My opinion is that we shouldn't pass any CFLAGS to MPIR. It is supposed to choose itself and make a better job at it than we would 99% of the time.",
    "created_at": "2014-10-21T00:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238696",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:40'></a>My opinion is that we shouldn't pass any CFLAGS to MPIR. It is supposed to choose itself and make a better job at it than we would 99% of the time.



---

archive/issue_comments_238697.json:
```json
{
    "body": "<a id='comment:41'></a>Unless you want to debug what goes wrong, of course.",
    "created_at": "2014-10-21T12:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238697",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:41'></a>Unless you want to debug what goes wrong, of course.



---

archive/issue_comments_238698.json:
```json
{
    "body": "<a id='comment:42'></a>More testing reveals that this is because we configure MPIR with `--enable-cxx`. If I take that out then the testsuite passes even with `-O0`.",
    "created_at": "2014-10-21T14:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238698",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:42'></a>More testing reveals that this is because we configure MPIR with `--enable-cxx`. If I take that out then the testsuite passes even with `-O0`.



---

archive/issue_comments_238699.json:
```json
{
    "body": "<a id='comment:43'></a>Upstream bug: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63610",
    "created_at": "2014-10-21T18:40:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238699",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:43'></a>Upstream bug: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63610



---

archive/issue_comments_238700.json:
```json
{
    "body": "<a id='comment:44'></a>This is due to libtool picking the wrong linker flags as it misinterprets the 10.10 version number... We are probably up a shit creek here ;-)\n\nhttps://gmplib.org/list-archives/gmp-bugs/2014-September/003534.html\n\nLibtool upstream patch:\n\nhttp://lists.gnu.org/archive/html/libtool-patches/2014-09/msg00002.html\n\nOn the plus side the gcc package is not to blame.",
    "created_at": "2014-10-23T13:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238700",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:44'></a>This is due to libtool picking the wrong linker flags as it misinterprets the 10.10 version number... We are probably up a shit creek here ;-)

https://gmplib.org/list-archives/gmp-bugs/2014-September/003534.html

Libtool upstream patch:

http://lists.gnu.org/archive/html/libtool-patches/2014-09/msg00002.html

On the plus side the gcc package is not to blame.



---

archive/issue_comments_238701.json:
```json
{
    "body": "<a id='comment:45'></a>New ticket for the libtool issue at #17204",
    "created_at": "2014-10-23T14:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238701",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:45'></a>New ticket for the libtool issue at #17204



---

archive/issue_comments_238702.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-10-23T14:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238702",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_238703.json:
```json
{
    "body": "<a id='comment:46'></a>This builds successfully for me on OS X 10.9 and 10.10. I don't think I'm qualified to review all of the changes, though.",
    "created_at": "2014-10-26T00:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238703",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:46'></a>This builds successfully for me on OS X 10.9 and 10.10. I don't think I'm qualified to review all of the changes, though.



---

archive/issue_comments_238704.json:
```json
{
    "body": "<a id='comment:47'></a>My only comment is that I would prefer the hack around the broken header to be moved out of a conditionally built package, otherwise everything looks fine to me.",
    "created_at": "2014-10-26T02:21:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238704",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:47'></a>My only comment is that I would prefer the hack around the broken header to be moved out of a conditionally built package, otherwise everything looks fine to me.



---

archive/issue_comments_238705.json:
```json
{
    "body": "<a id='comment:49'></a>Since GCC is the package really suffering from Apple's broken C headers I don't really see a reason for moving the fix elsewhere. Presumably Apple Clang is non-compliant so that it accepts the invalid C headers (haven't tried though). In any case, you are welcome to work on a different framework for fixing Apple's continualy broken SDK on a separate ticket.",
    "created_at": "2014-10-26T10:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238705",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:49'></a>Since GCC is the package really suffering from Apple's broken C headers I don't really see a reason for moving the fix elsewhere. Presumably Apple Clang is non-compliant so that it accepts the invalid C headers (haven't tried though). In any case, you are welcome to work on a different framework for fixing Apple's continualy broken SDK on a separate ticket.



---

archive/issue_comments_238706.json:
```json
{
    "body": "<a id='comment:50'></a>Given that this is about a *patched* version GCC 4.9.1, shouldn't the `package-version.txt` be `4.9.1.p0`?\n\nVolker, has this ticket already been fully tested on the buildbot?",
    "created_at": "2014-10-27T21:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238706",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:50'></a>Given that this is about a *patched* version GCC 4.9.1, shouldn't the `package-version.txt` be `4.9.1.p0`?

Volker, has this ticket already been fully tested on the buildbot?



---

archive/issue_comments_238707.json:
```json
{
    "body": "<a id='comment:51'></a>What's the reason to remove\n\n```\n# Use conservative CFLAGS for stage 1 and for the \"build\" executables\n# (these are simple programs needed only internally for the build process).\nMAKE=\"$MAKE CFLAGS_FOR_BUILD=-O0 STAGE1_CFLAGS=-O0\"\n```",
    "created_at": "2014-10-27T21:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238707",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:51'></a>What's the reason to remove

```
# Use conservative CFLAGS for stage 1 and for the "build" executables
# (these are simple programs needed only internally for the build process).
MAKE="$MAKE CFLAGS_FOR_BUILD=-O0 STAGE1_CFLAGS=-O0"
```



---

archive/issue_comments_238708.json:
```json
{
    "body": "<a id='comment:52'></a>About the changes to documentation: to build GCC, you really need a C and C++ compiler (unless the prerequisites for GCC can all be built using just a C++ compiler).",
    "created_at": "2014-10-27T21:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238708",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:52'></a>About the changes to documentation: to build GCC, you really need a C and C++ compiler (unless the prerequisites for GCC can all be built using just a C++ compiler).



---

archive/issue_comments_238709.json:
```json
{
    "body": "<a id='comment:53'></a>With the `-O0` I get stage 2/3 comparison failures. Its also somewhat off the beaten path, and less tested = less likely to work.\n\nThere is no patch applied, the tarball is 100% vanilla.\n\nI tested it on the mac in my office, which happens to be the only osx buildbot that we have.\n\nAs far as I know you only need a C++ compiler, but then I don't even know of a C++ compiler that not also supports C. Certainly none that can bootstrap GCC.",
    "created_at": "2014-10-27T22:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238709",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:53'></a>With the `-O0` I get stage 2/3 comparison failures. Its also somewhat off the beaten path, and less tested = less likely to work.

There is no patch applied, the tarball is 100% vanilla.

I tested it on the mac in my office, which happens to be the only osx buildbot that we have.

As far as I know you only need a C++ compiler, but then I don't even know of a C++ compiler that not also supports C. Certainly none that can bootstrap GCC.



---

archive/issue_comments_238710.json:
```json
{
    "body": "<a id='comment:54'></a>Replying to [comment:53 vbraun]:\n> As far as I know you only need a C++ compiler, but then I don't even know of a C++ compiler that not also supports C.\n\nSure, but I don't know if autotools even looks for `g++` when looking for a C compiler.",
    "created_at": "2014-10-28T08:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238710",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:54'></a>Replying to [comment:53 vbraun]:
> As far as I know you only need a C++ compiler, but then I don't even know of a C++ compiler that not also supports C.

Sure, but I don't know if autotools even looks for `g++` when looking for a C compiler.



---

archive/issue_comments_238711.json:
```json
{
    "body": "<a id='comment:55'></a>Replying to [comment:53 vbraun]:\n> With the `-O0` I get stage 2/3 comparison failures. Its also somewhat off the beaten path, and less tested = less likely to work.\n\nI do remember it was needed for some exotic system, but I don't recall precisely...",
    "created_at": "2014-10-28T08:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238711",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'></a>Replying to [comment:53 vbraun]:
> With the `-O0` I get stage 2/3 comparison failures. Its also somewhat off the beaten path, and less tested = less likely to work.

I do remember it was needed for some exotic system, but I don't recall precisely...



---

archive/issue_comments_238712.json:
```json
{
    "body": "<a id='comment:56'></a>Since there is no system out there with a C++ but not C compiler I think its definitely not tested to bootstrap with such a combination. In any case, its nothing that I worry about. The empty set has every property, if you want do describe it further in the documentation be my guest.\n\nAlso, gcc 4.7.3 bugs were probably closed, then reopened, and then closed again in the meantime..",
    "created_at": "2014-10-28T10:37:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238712",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:56'></a>Since there is no system out there with a C++ but not C compiler I think its definitely not tested to bootstrap with such a combination. In any case, its nothing that I worry about. The empty set has every property, if you want do describe it further in the documentation be my guest.

Also, gcc 4.7.3 bugs were probably closed, then reopened, and then closed again in the meantime..



---

archive/issue_comments_238713.json:
```json
{
    "body": "<a id='comment:57'></a>Replying to [comment:56 vbraun]:\n> Since there is no system out there with a C++ but not C compiler I think its definitely not tested to bootstrap with such a combination.\n\nThat's exactly my point: assume and document a priori that C and C++ compilers are needed.",
    "created_at": "2014-10-28T11:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238713",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:57'></a>Replying to [comment:56 vbraun]:
> Since there is no system out there with a C++ but not C compiler I think its definitely not tested to bootstrap with such a combination.

That's exactly my point: assume and document a priori that C and C++ compilers are needed.



---

archive/issue_comments_238714.json:
```json
{
    "body": "<a id='comment:58'></a>https://gcc.gnu.org/install/prerequisites.html says you need a C++ compiler, and does not mention a C compiler. You want me to change our docs to contradict upstream docs?",
    "created_at": "2014-10-28T11:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238714",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:58'></a>https://gcc.gnu.org/install/prerequisites.html says you need a C++ compiler, and does not mention a C compiler. You want me to change our docs to contradict upstream docs?



---

archive/issue_comments_238715.json:
```json
{
    "body": "<a id='comment:59'></a>Our docs are not just about GCC, but about GCC + its prerequisites.",
    "created_at": "2014-10-28T12:46:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238715",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:59'></a>Our docs are not just about GCC, but about GCC + its prerequisites.



---

archive/issue_comments_238716.json:
```json
{
    "body": "<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-28T13:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238716",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_238717.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2014-10-29T08:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238717",
    "user": "https://github.com/vbraun"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_238718.json:
```json
{
    "body": "<a id='comment:62'></a>OK I now have xcode 6.1 [Version 6.1 (6A1052d)]. And still no /usr/include/dispatch/object.h\n\n```\nApplying patches...\nUsing ../patches/min_version_10_10.patch\npatching file gcc/config/darwin-c.c\npatching file gcc/config/darwin-driver.c\nsed: /usr/include/dispatch/object.h: No such file or directory\n\nreal\t0m0.053s\nuser\t0m0.023s\nsys\t0m0.025s\n************************************************************************\nError installing package gcc-4.9.1\n```",
    "created_at": "2014-10-29T08:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238718",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:62'></a>OK I now have xcode 6.1 [Version 6.1 (6A1052d)]. And still no /usr/include/dispatch/object.h

```
Applying patches...
Using ../patches/min_version_10_10.patch
patching file gcc/config/darwin-c.c
patching file gcc/config/darwin-driver.c
sed: /usr/include/dispatch/object.h: No such file or directory

real	0m0.053s
user	0m0.023s
sys	0m0.025s
************************************************************************
Error installing package gcc-4.9.1
```



---

archive/issue_comments_238719.json:
```json
{
    "body": "<a id='comment:63'></a>You have the command line tools installed right? Not: the gui xcode. Whats the output of `xcode-select --install`",
    "created_at": "2014-10-29T10:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238719",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:63'></a>You have the command line tools installed right? Not: the gui xcode. Whats the output of `xcode-select --install`



---

archive/issue_comments_238720.json:
```json
{
    "body": "<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-29T10:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238720",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_238721.json:
```json
{
    "body": "<a id='comment:65'></a>Replying to [comment:63 vbraun]:\n> You have the command line tools installed right? Not: the gui xcode. Whats the output of `xcode-select --install`\n\n\n<rant> Dear apple store, if I have the command line tools already, why don't you update them with the rest of xcode? </rant>\nToo late for it today. But the check is a nice touch.",
    "created_at": "2014-10-29T11:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238721",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:65'></a>Replying to [comment:63 vbraun]:
> You have the command line tools installed right? Not: the gui xcode. Whats the output of `xcode-select --install`


<rant> Dear apple store, if I have the command line tools already, why don't you update them with the rest of xcode? </rant>
Too late for it today. But the check is a nice touch.



---

archive/issue_comments_238722.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-10-29T12:15:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238722",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_238723.json:
```json
{
    "body": "<a id='comment:66'></a>Either use `spkg-src` or remove it (in the latter case, motivate why).",
    "created_at": "2014-10-29T12:15:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238723",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:66'></a>Either use `spkg-src` or remove it (in the latter case, motivate why).



---

archive/issue_comments_238724.json:
```json
{
    "body": "<a id='comment:67'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-29T14:11:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238724",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:67'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_238725.json:
```json
{
    "body": "<a id='comment:68'></a>Done. IMHO my time is more valuable than a one-time ~50MB download.",
    "created_at": "2014-10-29T14:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238725",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:68'></a>Done. IMHO my time is more valuable than a one-time ~50MB download.



---

archive/issue_comments_238726.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-10-29T14:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238726",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_238727.json:
```json
{
    "body": "<a id='comment:70'></a>Replying to [comment:68 vbraun]:\n> Done. IMHO my time is more valuable than a one-time ~50MB download.\n  \nIt's not just about your time, also about not building unneeded stuff. Instead of building `gcc`, `g++` and `gfortran`, you end up building a lot more programs and libraries with more chances of breakage.",
    "created_at": "2014-10-29T14:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238727",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:70'></a>Replying to [comment:68 vbraun]:
> Done. IMHO my time is more valuable than a one-time ~50MB download.
  
It's not just about your time, also about not building unneeded stuff. Instead of building `gcc`, `g++` and `gfortran`, you end up building a lot more programs and libraries with more chances of breakage.



---

archive/issue_comments_238728.json:
```json
{
    "body": "<a id='comment:71'></a>I agree with Jeroen.\nAnd in my souvenir, they'll actually make GCC build break on some systems.",
    "created_at": "2014-10-29T14:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238728",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:71'></a>I agree with Jeroen.
And in my souvenir, they'll actually make GCC build break on some systems.



---

archive/issue_comments_238729.json:
```json
{
    "body": "<a id='comment:72'></a>Did you also open an upstream bug in your souvenir, or are we just going to never fix that and forever repackage gcc?",
    "created_at": "2014-10-29T14:24:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238729",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:72'></a>Did you also open an upstream bug in your souvenir, or are we just going to never fix that and forever repackage gcc?



---

archive/issue_comments_238730.json:
```json
{
    "body": "<a id='comment:73'></a>Also note that on slow systems building all of GCC takes a long time.\nAnd I don't fix it will get any better soon.",
    "created_at": "2014-10-29T14:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238730",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:73'></a>Also note that on slow systems building all of GCC takes a long time.
And I don't fix it will get any better soon.



---

archive/issue_comments_238731.json:
```json
{
    "body": "<a id='comment:74'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-29T14:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238731",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:74'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_238732.json:
```json
{
    "body": "<a id='comment:75'></a>There is a configure option for that",
    "created_at": "2014-10-29T14:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238732",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:75'></a>There is a configure option for that



---

archive/issue_comments_238733.json:
```json
{
    "body": "<a id='comment:77'></a>To choose which languages to support sure, but I remember we also removed other things.\nDon't have time for looking into that now.\n\nI've put a stripped down tarball at:\n* http://boxen.math.washington.edu/home/jpflori/upstream/gcc-4.9.1.tar.bz2\n \n---\nNew commits:",
    "created_at": "2014-10-29T15:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238733",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:77'></a>To choose which languages to support sure, but I remember we also removed other things.
Don't have time for looking into that now.

I've put a stripped down tarball at:
* http://boxen.math.washington.edu/home/jpflori/upstream/gcc-4.9.1.tar.bz2
 
---
New commits:



---

archive/issue_comments_238734.json:
```json
{
    "body": "<a id='comment:78'></a>Presumably the checksum is different",
    "created_at": "2014-10-29T15:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238734",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:78'></a>Presumably the checksum is different



---

archive/issue_comments_238735.json:
```json
{
    "body": "<a id='comment:79'></a>Hopefully yes, and if it gets used, the spkg-src script should be put back.",
    "created_at": "2014-10-29T15:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238735",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:79'></a>Hopefully yes, and if it gets used, the spkg-src script should be put back.



---

archive/issue_comments_238736.json:
```json
{
    "body": "<a id='comment:80'></a>IMHO this is not a \"lets also beautify this script\" ticket, right now Sage is broken on one of the main supported platforms. This ticket fixes it. If you want further changes feel free to open another ticket.",
    "created_at": "2014-10-29T16:09:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238736",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:80'></a>IMHO this is not a "lets also beautify this script" ticket, right now Sage is broken on one of the main supported platforms. This ticket fixes it. If you want further changes feel free to open another ticket.



---

archive/issue_comments_238737.json:
```json
{
    "body": "<a id='comment:81'></a>Replying to [comment:80 vbraun]:\n> IMHO this is not a \"lets also beautify this script\" ticket, right now Sage is broken on one of the main supported platforms. This ticket fixes it. If you want further changes feel free to open another ticket.\n\nIt's not about beautifying any script, just about the decision whether or not to use it.",
    "created_at": "2014-10-29T16:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238737",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:81'></a>Replying to [comment:80 vbraun]:
> IMHO this is not a "lets also beautify this script" ticket, right now Sage is broken on one of the main supported platforms. This ticket fixes it. If you want further changes feel free to open another ticket.

It's not about beautifying any script, just about the decision whether or not to use it.



---

archive/issue_comments_238738.json:
```json
{
    "body": "<a id='comment:82'></a>If you want to do things different then go ahead. I just don't think that pushing a broken branch in hopes that somedbody else will fix it for you is a good way to making progress here.",
    "created_at": "2014-10-29T16:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238738",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:82'></a>If you want to do things different then go ahead. I just don't think that pushing a broken branch in hopes that somedbody else will fix it for you is a good way to making progress here.



---

archive/issue_comments_238739.json:
```json
{
    "body": "<a id='comment:83'></a>I'm confused. Are you refering to the removal of `sage_fortran`? Technically, that should be a new ticket, but it's a totally trivial/obvious thing so I thought you wouldn't mind.",
    "created_at": "2014-10-29T16:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238739",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:83'></a>I'm confused. Are you refering to the removal of `sage_fortran`? Technically, that should be a new ticket, but it's a totally trivial/obvious thing so I thought you wouldn't mind.



---

archive/issue_comments_238740.json:
```json
{
    "body": "<a id='comment:84'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-29T16:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238740",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:84'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_238741.json:
```json
{
    "body": "<a id='comment:85'></a>No, I'm referring to JP changing the package-version.txt to 4.9.1.p0 without updating checksums or even naming the hand-crafted tarball correctly.",
    "created_at": "2014-10-29T16:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238741",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:85'></a>No, I'm referring to JP changing the package-version.txt to 4.9.1.p0 without updating checksums or even naming the hand-crafted tarball correctly.



---

archive/issue_comments_238742.json:
```json
{
    "body": "<a id='comment:86'></a>Oh no you committed that, Jeroen ;-)",
    "created_at": "2014-10-29T16:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238742",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:86'></a>Oh no you committed that, Jeroen ;-)



---

archive/issue_comments_238743.json:
```json
{
    "body": "<a id='comment:87'></a>I just put a stripped-down tarball on the web, using the name pattern we usually use for such stripped-down tarball, that is just including the upstream version number without any patch level...\nThe only exception is IIRC that we add ugly date to the version number when we actually add non upstream stuff within the tarball we distribute.\nDidn't push anything to the git repo.\nIt's just in case you want a more lightweight Sage.",
    "created_at": "2014-10-29T16:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238743",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:87'></a>I just put a stripped-down tarball on the web, using the name pattern we usually use for such stripped-down tarball, that is just including the upstream version number without any patch level...
The only exception is IIRC that we add ugly date to the version number when we actually add non upstream stuff within the tarball we distribute.
Didn't push anything to the git repo.
It's just in case you want a more lightweight Sage.



---

archive/issue_comments_238744.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-10-29T21:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238744",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_238745.json:
```json
{
    "body": "<a id='comment:88'></a>OK the compiler now compiles and seem to work so far for me. I haven't needed to import the other yosemite tickets yet and I am at maxima. Make that ntl now.",
    "created_at": "2014-10-29T21:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238745",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:88'></a>OK the compiler now compiles and seem to work so far for me. I haven't needed to import the other yosemite tickets yet and I am at maxima. Make that ntl now.



---

archive/issue_comments_238746.json:
```json
{
    "body": "<a id='comment:89'></a>You don't need other tickets for compiling if you don't have `SAGE_CHECK=yes`. \n\nJeroen: whats with 4.9.1.p0 now, you want to upload a modified tarball and add the checksum or should I revert that?",
    "created_at": "2014-10-29T21:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238746",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:89'></a>You don't need other tickets for compiling if you don't have `SAGE_CHECK=yes`. 

Jeroen: whats with 4.9.1.p0 now, you want to upload a modified tarball and add the checksum or should I revert that?



---

archive/issue_comments_238747.json:
```json
{
    "body": "<a id='comment:90'></a>Replying to [comment:89 vbraun]:\n> you want to upload a modified tarball and add the checksum or should I revert that?\n\nFor me it's fine as it is... in any case with the new configure options the difference between the vanilla tarball and the stripped down tarball is not very significant. It's essentially a choice between ease-of-maintaining and download size.",
    "created_at": "2014-10-29T22:02:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238747",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:90'></a>Replying to [comment:89 vbraun]:
> you want to upload a modified tarball and add the checksum or should I revert that?

For me it's fine as it is... in any case with the new configure options the difference between the vanilla tarball and the stripped down tarball is not very significant. It's essentially a choice between ease-of-maintaining and download size.



---

archive/issue_comments_238748.json:
```json
{
    "body": "<a id='comment:91'></a>I added `.p0` just because it's a patched version, not completely vanilla.",
    "created_at": "2014-10-29T22:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238748",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:91'></a>I added `.p0` just because it's a patched version, not completely vanilla.



---

archive/issue_comments_238749.json:
```json
{
    "body": "<a id='comment:92'></a>And now I am at the conway_polynomial segfault which I think started everything.",
    "created_at": "2014-10-29T22:59:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238749",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:92'></a>And now I am at the conway_polynomial segfault which I think started everything.



---

archive/issue_comments_238750.json:
```json
{
    "body": "<a id='comment:93'></a>Oh, that is because you didn't apply #17204. Forgot about that one since I merged it a while ago.",
    "created_at": "2014-10-29T23:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238750",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:93'></a>Oh, that is because you didn't apply #17204. Forgot about that one since I merged it a while ago.



---

archive/issue_comments_238751.json:
```json
{
    "body": "<a id='comment:94'></a>Replying to [comment:93 vbraun]:\n> Oh, that is because you didn't apply #17204. Forgot about that one since I merged it a while ago.\n\n\nIndeed. All compiled now.",
    "created_at": "2014-10-30T02:41:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238751",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:94'></a>Replying to [comment:93 vbraun]:
> Oh, that is because you didn't apply #17204. Forgot about that one since I merged it a while ago.


Indeed. All compiled now.



---

archive/issue_comments_238752.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-10-30T09:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238752",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_049781.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-30T09:45:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17169#event-49781"
}
```



---

archive/issue_comments_238753.json:
```json
{
    "body": "<a id='comment:96'></a>Aaaand 4.9.2 was just released ;-)",
    "created_at": "2014-10-30T11:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238753",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:96'></a>Aaaand 4.9.2 was just released ;-)



---

archive/issue_comments_238754.json:
```json
{
    "body": "<a id='comment:97'></a>Next is #17262",
    "created_at": "2014-10-30T16:42:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17169#issuecomment-238754",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:97'></a>Next is #17262
