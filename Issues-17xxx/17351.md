# Issue 17351: Sage Learn_sat AttributeError

archive/issues_017114.json:
```json
{
    "body": "Don't fail in `sage.sat.boolean_polynomials.learn_sat` when nothing was learnt. \n\nFor example, this code should not fail:\n\n```\nsage: P.<a,b,c> = BooleanPolynomialRing()\nsage: F = [a*c + a + b*c + c + 1,  a*b + a*c + a + c + 1,  a*b + a*c + a + b*c + 1]\nsage: from sage.sat.boolean_polynomials import learn as learn_sat\nsage: learn_sat(F, s_maxrestarts=0, interreduction=True)\n```\n\nCC:  @malb\n\nBranch/Commit: 9c90cba7cda5ef313084bdf68c5eb7cf29ad1555\n\nReviewer: Vincent Delecroix\n\nAuthor: Martin Albrecht\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17351\n\n",
    "closed_at": "2015-02-17T20:50:26Z",
    "created_at": "2014-11-15T16:04:52Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Sage Learn_sat AttributeError",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17351",
    "user": "https://trac.sagemath.org/admin/accounts/users/ounidjoo"
}
```
Don't fail in `sage.sat.boolean_polynomials.learn_sat` when nothing was learnt. 

For example, this code should not fail:

```
sage: P.<a,b,c> = BooleanPolynomialRing()
sage: F = [a*c + a + b*c + c + 1,  a*b + a*c + a + c + 1,  a*b + a*c + a + b*c + 1]
sage: from sage.sat.boolean_polynomials import learn as learn_sat
sage: learn_sat(F, s_maxrestarts=0, interreduction=True)
```

CC:  @malb

Branch/Commit: 9c90cba7cda5ef313084bdf68c5eb7cf29ad1555

Reviewer: Vincent Delecroix

Author: Martin Albrecht

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17351





---

archive/issue_comments_227216.json:
```json
{
    "body": "<a id='comment:1'></a>It might be related to the failing optional cryptominisat doc-tests.",
    "created_at": "2014-11-30T21:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227216",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:1'></a>It might be related to the failing optional cryptominisat doc-tests.



---

archive/issue_comments_227217.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2014-12-01T11:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227217",
    "user": "https://github.com/malb"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_227218.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2014-12-01T11:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227218",
    "user": "https://github.com/malb"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_227219.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-01T11:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227219",
    "user": "https://github.com/malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_227220.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: optional.",
    "created_at": "2014-12-01T11:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227220",
    "user": "https://github.com/malb"
}
```

Changing component from PLEASE CHANGE to packages: optional.



---

archive/issue_comments_227221.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-01-31T14:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227221",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_227222.json:
```json
{
    "body": "<a id='comment:4'></a>Hello,\n\nWhat is the point of modifying the random seed of cryptominisat?\n\nVincent",
    "created_at": "2015-01-31T14:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227222",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>Hello,

What is the point of modifying the random seed of cryptominisat?

Vincent



---

archive/issue_comments_227223.json:
```json
{
    "body": "<a id='comment:5'></a>And please, update the description of the ticket to something that actually describes what was the problem and how it was solved...",
    "created_at": "2015-01-31T14:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227223",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>And please, update the description of the ticket to something that actually describes what was the problem and how it was solved...



---

archive/issue_comments_227224.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 vdelecroix]:\n> And please, update the description of the ticket to something that actually describes what was the problem and how it was solved...\n\n\nThere was an exception and now this is fixed as doctested. The random seed was changed because the test in question by design only works for some inputs. It has nothing to do with CryptoMiniSat, but relates to the small AES generator.",
    "created_at": "2015-01-31T20:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227224",
    "user": "https://github.com/malb"
}
```

<a id='comment:6'></a>Replying to [comment:5 vdelecroix]:
> And please, update the description of the ticket to something that actually describes what was the problem and how it was solved...


There was an exception and now this is fixed as doctested. The random seed was changed because the test in question by design only works for some inputs. It has nothing to do with CryptoMiniSat, but relates to the small AES generator.



---

archive/issue_comments_227225.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 malb]:\n> Replying to [comment:5 vdelecroix]:\n> > And please, update the description of the ticket to something that actually describes what was the problem and how it was solved...\n\n> \n> There was an exception and now this is fixed as doctested. The random seed was changed because the test in question by design only works for some inputs. It has nothing to do with CryptoMiniSat, but relates to the small AES generator.\n\n\nFine. Please update the description of the ticket...\n\nWhy `Sequence` is still used in some place?",
    "created_at": "2015-02-04T20:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227225",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>Replying to [comment:6 malb]:
> Replying to [comment:5 vdelecroix]:
> > And please, update the description of the ticket to something that actually describes what was the problem and how it was solved...

> 
> There was an exception and now this is fixed as doctested. The random seed was changed because the test in question by design only works for some inputs. It has nothing to do with CryptoMiniSat, but relates to the small AES generator.


Fine. Please update the description of the ticket...

Why `Sequence` is still used in some place?



---

archive/issue_comments_227226.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 vdelecroix]:\n> Fine. Please update the description of the ticket...\n\n\nSorry, but I don't see why. Somebody posted a bug. I fixed it and provide a doctest that it is fixed.\n \n> Why `Sequence` is still used in some place?\n\n\n`Sequence` in general is fine. In this particular instance it might get passed an empty set when it cannot determine that it really should construct a `PolynomialSequence`.",
    "created_at": "2015-02-04T23:14:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227226",
    "user": "https://github.com/malb"
}
```

<a id='comment:8'></a>Replying to [comment:7 vdelecroix]:
> Fine. Please update the description of the ticket...


Sorry, but I don't see why. Somebody posted a bug. I fixed it and provide a doctest that it is fixed.
 
> Why `Sequence` is still used in some place?


`Sequence` in general is fine. In this particular instance it might get passed an empty set when it cannot determine that it really should construct a `PolynomialSequence`.



---

archive/issue_comments_227227.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 malb]:\n> Replying to [comment:7 vdelecroix]:\n> > Fine. Please update the description of the ticket...\n  \n> \n> Sorry, but I don't see why. Somebody posted a bug. I fixed it and provide a doctest that it is fixed.\n\n\nThe ticket description relates a bug but does not describe the changes you provide. Moreover this description will appear in the git history of Sage and there is no place for \"hello\" or \"could you help me\".\n\n> > Why `Sequence` is still used in some place?\n\n> \n> `Sequence` in general is fine. In this particular instance it might get passed an empty set when it cannot determine that it really should construct a `PolynomialSequence`.\n\n\nFrom my naive point of view, it would be less `import` at the beginning of the file if we replace all `Sequence` by `PolynomialSequence`. Would it be worse that way?",
    "created_at": "2015-02-04T23:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227227",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>Replying to [comment:8 malb]:
> Replying to [comment:7 vdelecroix]:
> > Fine. Please update the description of the ticket...
  
> 
> Sorry, but I don't see why. Somebody posted a bug. I fixed it and provide a doctest that it is fixed.


The ticket description relates a bug but does not describe the changes you provide. Moreover this description will appear in the git history of Sage and there is no place for "hello" or "could you help me".

> > Why `Sequence` is still used in some place?

> 
> `Sequence` in general is fine. In this particular instance it might get passed an empty set when it cannot determine that it really should construct a `PolynomialSequence`.


From my naive point of view, it would be less `import` at the beginning of the file if we replace all `Sequence` by `PolynomialSequence`. Would it be worse that way?



---

archive/issue_comments_227228.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-05T10:25:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227228",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_227229.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:9 vdelecroix]:\n> Replying to [comment:8 malb]:\n> > Replying to [comment:7 vdelecroix]:\n> > > Fine. Please update the description of the ticket...\n  \n> > \n> > Sorry, but I don't see why. Somebody posted a bug. I fixed it and provide a doctest that it is fixed.\n\n> \n> The ticket description relates a bug but does not describe the changes you provide. Moreover this description will appear in the git history of Sage and there is no place for \"hello\" or \"could you help me\".\n> \n> > > Why `Sequence` is still used in some place?\n\n> > \n> > `Sequence` in general is fine. In this particular instance it might get passed an empty set when it cannot determine that it really should construct a `PolynomialSequence`.\n\n> \n> From my naive point of view, it would be less `import` at the beginning of the file if we replace all `Sequence` by `PolynomialSequence`. Would it be worse that way?\n\n\nThanks for explaining. I did both.",
    "created_at": "2015-02-05T10:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227229",
    "user": "https://github.com/malb"
}
```

<a id='comment:14'></a>Replying to [comment:9 vdelecroix]:
> Replying to [comment:8 malb]:
> > Replying to [comment:7 vdelecroix]:
> > > Fine. Please update the description of the ticket...
  
> > 
> > Sorry, but I don't see why. Somebody posted a bug. I fixed it and provide a doctest that it is fixed.

> 
> The ticket description relates a bug but does not describe the changes you provide. Moreover this description will appear in the git history of Sage and there is no place for "hello" or "could you help me".
> 
> > > Why `Sequence` is still used in some place?

> > 
> > `Sequence` in general is fine. In this particular instance it might get passed an empty set when it cannot determine that it really should construct a `PolynomialSequence`.

> 
> From my naive point of view, it would be less `import` at the beginning of the file if we replace all `Sequence` by `PolynomialSequence`. Would it be worse that way?


Thanks for explaining. I did both.



---

archive/issue_comments_227230.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-02-05T10:26:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227230",
    "user": "https://github.com/malb"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_227231.json:
```json
{
    "body": "<a id='comment:16'></a>Hello,\n\nRunning `sage -t --long -optional=sage,cryptominisat` I got a failing doctest\n\n```\nsage -t --long solvers/cryptominisat/cryptominisat.pyx\n**********************************************************************\nFile \"solvers/cryptominisat/cryptominisat.pyx\", line 362, in sage.sat.solvers.cryptominisat.cryptominisat.CryptoMiniSat.conflict_clause\nFailed example:\n    cms.conflict_clause()                               # optional - cryptominisat\nExpected:\n    (-119, -118, -117, -116, -114, -113, -112, -110, -109, -100, -98, -97, -96, -94, -93, -92, -91, -76, -75, -71, -70, -69)\nGot:\n    (-119, -118, -117, -116, -115, -114, -112, -111, -110, -104, -103, -101, -100, -99, -98, -96, -95, -94, -90, -89, -84, -83, -82, -80, -79, -78, -74, -73, -72, -71, -69)\n```\nDo you have an idea where does it come from?",
    "created_at": "2015-02-05T13:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227231",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'></a>Hello,

Running `sage -t --long -optional=sage,cryptominisat` I got a failing doctest

```
sage -t --long solvers/cryptominisat/cryptominisat.pyx
**********************************************************************
File "solvers/cryptominisat/cryptominisat.pyx", line 362, in sage.sat.solvers.cryptominisat.cryptominisat.CryptoMiniSat.conflict_clause
Failed example:
    cms.conflict_clause()                               # optional - cryptominisat
Expected:
    (-119, -118, -117, -116, -114, -113, -112, -110, -109, -100, -98, -97, -96, -94, -93, -92, -91, -76, -75, -71, -70, -69)
Got:
    (-119, -118, -117, -116, -115, -114, -112, -111, -110, -104, -103, -101, -100, -99, -98, -96, -95, -94, -90, -89, -84, -83, -82, -80, -79, -78, -74, -73, -72, -71, -69)
```
Do you have an idea where does it come from?



---

archive/issue_comments_227232.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-05T18:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227232",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_227233.json:
```json
{
    "body": "<a id='comment:18'></a>The test instances are generated randomly and it seems something changed since this was last tested. I've updated the doctest.",
    "created_at": "2015-02-05T18:59:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227233",
    "user": "https://github.com/malb"
}
```

<a id='comment:18'></a>The test instances are generated randomly and it seems something changed since this was last tested. I've updated the doctest.



---

archive/issue_comments_227234.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-05T19:19:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227234",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_227235.json:
```json
{
    "body": "<a id='comment:19'></a>Great.",
    "created_at": "2015-02-05T19:19:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227235",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>Great.



---

archive/issue_events_050058.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-17T20:50:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17351#event-50058"
}
```



---

archive/issue_comments_227236.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-02-17T20:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17351#issuecomment-227236",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
