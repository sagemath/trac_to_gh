# Issue 17283: Check consistency when constructing Dirichlet characters

archive/issues_017046.json:
```json
{
    "body": "It is too easy to construct Dirichlet characters with inconsistent values:\n\n```\nsage: k.<i> = CyclotomicField(4)\nsage: G = DirichletGroup(192)\nsage: chi = G([i,-1,-1]); chi  # should raise an error since 127 only has order 2\nDirichlet character modulo 192 of conductor 48 mapping 127 |--> zeta16^4, 133 |--> -1, 65 |--> -1\nsage: chi(133)  # no surprise that this gives an inconsistent answer\n1\n```\nThe `check` option (`True` by default) should verify that the images of the generators have the correct orders.\n\nKeywords: dirichlet character\n\nReviewer: Jean-Pierre Flori\n\nAuthor: Peter Bruin\n\nBranch: 8ff4302876c1d46f0a6b8e27625e34a118f7895c\n\nDependencies: #17317\n\nCommit: 8ff4302876c1d46f0a6b8e27625e34a118f7895c\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17283\n\n",
    "closed_at": "2015-05-20T22:28:19Z",
    "created_at": "2014-11-03T18:04:46Z",
    "labels": [
        "component: modular forms",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Check consistency when constructing Dirichlet characters",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17283",
    "user": "https://github.com/pjbruin"
}
```
It is too easy to construct Dirichlet characters with inconsistent values:

```
sage: k.<i> = CyclotomicField(4)
sage: G = DirichletGroup(192)
sage: chi = G([i,-1,-1]); chi  # should raise an error since 127 only has order 2
Dirichlet character modulo 192 of conductor 48 mapping 127 |--> zeta16^4, 133 |--> -1, 65 |--> -1
sage: chi(133)  # no surprise that this gives an inconsistent answer
1
```
The `check` option (`True` by default) should verify that the images of the generators have the correct orders.

Keywords: dirichlet character

Reviewer: Jean-Pierre Flori

Author: Peter Bruin

Branch: 8ff4302876c1d46f0a6b8e27625e34a118f7895c

Dependencies: #17317

Commit: 8ff4302876c1d46f0a6b8e27625e34a118f7895c

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17283





---

archive/issue_comments_226359.json:
```json
{
    "body": "Changing keywords from \"modular symbols dimension\" to \"modular symbols dirichlet character\".",
    "created_at": "2014-11-04T20:52:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226359",
    "user": "https://github.com/pjbruin"
}
```

Changing keywords from "modular symbols dimension" to "modular symbols dirichlet character".



---

archive/issue_comments_226360.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2014-11-04T21:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226360",
    "user": "https://github.com/pjbruin"
}
```

Changing priority from major to critical.



---

archive/issue_comments_226361.json:
```json
{
    "body": "Changing priority from critical to minor.",
    "created_at": "2014-11-11T21:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226361",
    "user": "https://github.com/pjbruin"
}
```

Changing priority from critical to minor.



---

archive/issue_comments_226362.json:
```json
{
    "body": "Changing keywords from \"modular symbols dirichlet character\" to \"dirichlet character\".",
    "created_at": "2014-11-11T21:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226362",
    "user": "https://github.com/pjbruin"
}
```

Changing keywords from "modular symbols dirichlet character" to "dirichlet character".



---

archive/issue_comments_226363.json:
```json
{
    "body": "<a id='comment:4'></a>The previous inconsistencies reported on this ticket were just because there does not exist a Dirichlet character with the values as in the example...",
    "created_at": "2014-11-11T21:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226363",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:4'></a>The previous inconsistencies reported on this ticket were just because there does not exist a Dirichlet character with the values as in the example...



---

archive/issue_comments_226364.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-12T00:43:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226364",
    "user": "https://github.com/pjbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_226365.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-12T09:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226365",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_226366.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-12T15:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226366",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_226367.json:
```json
{
    "body": "<a id='comment:8'></a>Just a little remark, we could fail faster in case the list of images does not have the right length (in case the orders are not automatically precomputed when Z/nZ is created, I don't remember).\nAnd that does not really matters anyway as feeding it with wrong length of images is just asking for trouble.",
    "created_at": "2015-05-18T20:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226367",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:8'></a>Just a little remark, we could fail faster in case the list of images does not have the right length (in case the orders are not automatically precomputed when Z/nZ is created, I don't remember).
And that does not really matters anyway as feeding it with wrong length of images is just asking for trouble.



---

archive/issue_comments_226368.json:
```json
{
    "body": "<a id='comment:9'></a>Could you add a little more about the necessary orders either in the INPUT section or in the TESTS one (that is say more than the orders are not admissible).\n\nThe current error string formulation also kind of make it feel like the orders must be exactly the one stated.",
    "created_at": "2015-05-18T20:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226368",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>Could you add a little more about the necessary orders either in the INPUT section or in the TESTS one (that is say more than the orders are not admissible).

The current error string formulation also kind of make it feel like the orders must be exactly the one stated.



---

archive/issue_comments_226369.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-18T20:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226369",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_226370.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:8 jpflori]:\n> Just a little remark, we could fail faster in case the list of images does not have the right length (in case the orders are not automatically precomputed when Z/nZ is created, I don't remember).\n\nThe unit group of Z/nZ is computed (generators and orders) when the Dirichlet group is constructed.\n> And that does not really matters anyway as feeding it with wrong length of images is just asking for trouble.\n\nIndeed, it is better to optimise for the case where the input is valid.",
    "created_at": "2015-05-19T11:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226370",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:10'></a>Replying to [comment:8 jpflori]:
> Just a little remark, we could fail faster in case the list of images does not have the right length (in case the orders are not automatically precomputed when Z/nZ is created, I don't remember).

The unit group of Z/nZ is computed (generators and orders) when the Dirichlet group is constructed.
> And that does not really matters anyway as feeding it with wrong length of images is just asking for trouble.

Indeed, it is better to optimise for the case where the input is valid.



---

archive/issue_comments_226371.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-19T12:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226371",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_226372.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-19T12:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226372",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_049967.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-05-19T21:47:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17283#event-49967"
}
```



---

archive/issue_comments_226373.json:
```json
{
    "body": "<a id='comment:13'></a>I hope the error messages and documentation are better after the last commit.",
    "created_at": "2015-05-19T21:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226373",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:13'></a>I hope the error messages and documentation are better after the last commit.



---

archive/issue_comments_226374.json:
```json
{
    "body": "<a id='comment:14'></a>Yes it is, just did not have a minute to look at it :)\nAnd the web interface to git is down:\n\n```\nInternal Server Error\n...\n```\nFortunately I've access to a working git repo again!",
    "created_at": "2015-05-20T07:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226374",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:14'></a>Yes it is, just did not have a minute to look at it :)
And the web interface to git is down:

```
Internal Server Error
...
```
Fortunately I've access to a working git repo again!



---

archive/issue_comments_226375.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-20T07:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226375",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_049968.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-20T22:28:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17283#event-49968"
}
```



---

archive/issue_comments_226376.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-20T22:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17283#issuecomment-226376",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
