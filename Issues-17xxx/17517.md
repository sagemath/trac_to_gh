# Issue 17517: Implement roots of polynomials over SR

archive/issues_017280.json:
```json
{
    "body": "The following should work:\n\n```\nsage: R.<x> = QQ[]\nsage: (x^2 + 2).roots(SR)\n[-sqrt(-2), sqrt(-2)]\n```\n\nThis could easily be done by first finding the roots in `QQbar` and then converting to `SR`.\n\nCC:  @gagern\n\nReviewer: Ralf Stephan\n\nAuthor: Martin von Gagern\n\nBranch: 472c754f6b833011877484e0ce944a5d2ad9d3e0\n\nCommit: 472c754f6b833011877484e0ce944a5d2ad9d3e0\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17517\n\n",
    "closed_at": "2015-01-23T23:40:41Z",
    "created_at": "2014-12-16T22:07:01Z",
    "labels": [
        "component: number theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Implement roots of polynomials over SR",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17517",
    "user": "https://github.com/jdemeyer"
}
```
The following should work:

```
sage: R.<x> = QQ[]
sage: (x^2 + 2).roots(SR)
[-sqrt(-2), sqrt(-2)]
```

This could easily be done by first finding the roots in `QQbar` and then converting to `SR`.

CC:  @gagern

Reviewer: Ralf Stephan

Author: Martin von Gagern

Branch: 472c754f6b833011877484e0ce944a5d2ad9d3e0

Commit: 472c754f6b833011877484e0ce944a5d2ad9d3e0

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17517





---

archive/issue_comments_229801.json:
```json
{
    "body": "<a id='comment:2'></a>I'm not sure that converting roots to `QQbar` first makes much sense. As it is now, conversion from `QQbar` to `SR` works by first finding *all* radical symbolic roots and then identifying the matching one. For this use case here, we wouldn't have to worry about that matching step. And we could avoid the computation for root isolation as well. Therefore, unless something changes dramatically in how these things work, I'd rather implement this conversion directly, and then perhaps have the radical expressions for algebraic numbers call that. If you agree, feel free to remove the dependency on #14239.",
    "created_at": "2014-12-17T00:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17517#issuecomment-229801",
    "user": "https://github.com/gagern"
}
```

<a id='comment:2'></a>I'm not sure that converting roots to `QQbar` first makes much sense. As it is now, conversion from `QQbar` to `SR` works by first finding *all* radical symbolic roots and then identifying the matching one. For this use case here, we wouldn't have to worry about that matching step. And we could avoid the computation for root isolation as well. Therefore, unless something changes dramatically in how these things work, I'd rather implement this conversion directly, and then perhaps have the radical expressions for algebraic numbers call that. If you agree, feel free to remove the dependency on #14239.



---

archive/issue_comments_229802.json:
```json
{
    "body": "<a id='comment:4'></a>I decided to implement this without waiting on #17516. We can always add an extra code path for that later on. I consider this method the canonical place to compute radical expressions for polynomials, so I've adapted the approach via `Expression.solve` I've been using in other places as well. If this gets accepted quickly, I might even change #14239 to make use of this.\n\nThere is one situation I just thought of: if the coefficients are from `AA` or `QQbar`, then my current implementation will fail. In that situation your original suggestion, of computing roots in `QQbar` and then turning them into symbolic expressions, starts to make a lot of sense. But I'd rather handle that in a separate ticket, since such polynomials are much rarer and that code really would depend on #14239 which, as I just suggested, could benefit from depending on this implementation here.\n\n---\nNew commits:",
    "created_at": "2015-01-08T14:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17517#issuecomment-229802",
    "user": "https://github.com/gagern"
}
```

<a id='comment:4'></a>I decided to implement this without waiting on #17516. We can always add an extra code path for that later on. I consider this method the canonical place to compute radical expressions for polynomials, so I've adapted the approach via `Expression.solve` I've been using in other places as well. If this gets accepted quickly, I might even change #14239 to make use of this.

There is one situation I just thought of: if the coefficients are from `AA` or `QQbar`, then my current implementation will fail. In that situation your original suggestion, of computing roots in `QQbar` and then turning them into symbolic expressions, starts to make a lot of sense. But I'd rather handle that in a separate ticket, since such polynomials are much rarer and that code really would depend on #14239 which, as I just suggested, could benefit from depending on this implementation here.

---
New commits:



---

archive/issue_comments_229803.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-01-08T14:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17517#issuecomment-229803",
    "user": "https://github.com/gagern"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_229804.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-01-17T07:38:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17517#issuecomment-229804",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_229805.json:
```json
{
    "body": "<a id='comment:5'></a>Easy ticket, passes `make ptestlong`.",
    "created_at": "2015-01-17T07:38:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17517#issuecomment-229805",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>Easy ticket, passes `make ptestlong`.



---

archive/issue_comments_229806.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-01-23T23:40:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17517#issuecomment-229806",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_050349.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-23T23:40:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17517",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17517#event-50349"
}
```
