# Issue 17296: Update autotools to 20141105

archive/issues_017059.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nSome included software was updated since our last update.\nIn particular the new libtool 2.4.3 needs specific care as it uses pieces from gnulib.\n\nTexinfo is NOT updated to 5.x as these new versions errors out when building old software.\n\nTarball at:\n* http://boxen.math.washington.edu/home/jpflori/upstream/autotools-20141105.tar.bz2\n\nCC:  @jdemeyer\n\nComponent: **packages: optional**\n\nAuthor: **Jean-Pierre Flori**\n\nBranch/Commit: **[`25f1bea`](https://github.com/sagemath/sagetrac-mirror/commit/25f1beac186598f14532fdbe7a3f8c2ac8db621a)**\n\nReviewer: **Jeroen Demeyer, Volker Braun**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17296_\n\n",
    "closed_at": "2014-11-23T19:59:53Z",
    "created_at": "2014-11-05T16:22:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update autotools to 20141105",
    "type": "issue",
    "updated_at": "2014-11-23T19:59:53Z",
    "url": "https://github.com/sagemath/sage/issues/17296",
    "user": "https://github.com/jpflori"
}
```
<div id="comment:0"></div>

Some included software was updated since our last update.
In particular the new libtool 2.4.3 needs specific care as it uses pieces from gnulib.

Texinfo is NOT updated to 5.x as these new versions errors out when building old software.

Tarball at:
* http://boxen.math.washington.edu/home/jpflori/upstream/autotools-20141105.tar.bz2

CC:  @jdemeyer

Component: **packages: optional**

Author: **Jean-Pierre Flori**

Branch/Commit: **[`25f1bea`](https://github.com/sagemath/sagetrac-mirror/commit/25f1beac186598f14532fdbe7a3f8c2ac8db621a)**

Reviewer: **Jeroen Demeyer, Volker Braun**

_Issue created by migration from https://trac.sagemath.org/ticket/17296_





---

archive/issue_events_244598.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-11-05T16:22:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244598"
}
```



---

archive/issue_events_244599.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-11-05T16:22:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "0000b0",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244599"
}
```



---

archive/issue_events_244600.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-11-05T16:22:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244600"
}
```



---

archive/issue_events_244601.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-11-05T16:22:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244601"
}
```



---

archive/issue_comments_231028.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,5 @@\n \n Texinfo is NOT updated to 5.x as these new versions errors out when building old software.\n \n-\n+Tarball at:\n+* http://boxen/math.washington.edu/home/jpflori/upstream/autotools-20141105.tar.bz2\n``````\n",
    "created_at": "2014-11-05T16:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231028",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,5 @@
 
 Texinfo is NOT updated to 5.x as these new versions errors out when building old software.
 
-
+Tarball at:
+* http://boxen/math.washington.edu/home/jpflori/upstream/autotools-20141105.tar.bz2
``````




---

archive/issue_comments_231029.json:
```json
{
    "body": "Commit: **[`8457b4f`](https://github.com/sagemath/sagetrac-mirror/commit/8457b4fb3b1212b104b4b5897f872bbddf40596b)**",
    "created_at": "2014-11-05T16:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231029",
    "user": "https://github.com/jpflori"
}
```

Commit: **[`8457b4f`](https://github.com/sagemath/sagetrac-mirror/commit/8457b4fb3b1212b104b4b5897f872bbddf40596b)**



---

archive/issue_events_244602.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-11-05T16:30:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244602"
}
```



---

archive/issue_comments_231030.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8457b4fb3b1212b104b4b5897f872bbddf40596b\"><code>8457b4f</code></a></td><td><code>Update autotools to 20141105.</code></td></tr></table>\n",
    "created_at": "2014-11-05T16:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231030",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8457b4fb3b1212b104b4b5897f872bbddf40596b"><code>8457b4f</code></a></td><td><code>Update autotools to 20141105.</code></td></tr></table>




---

archive/issue_comments_231031.json:
```json
{
    "body": "Branch: **[u/jpflori/ticket/17296](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17296)**",
    "created_at": "2014-11-05T16:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231031",
    "user": "https://github.com/jpflori"
}
```

Branch: **[u/jpflori/ticket/17296](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17296)**



---

archive/issue_comments_231032.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n Texinfo is NOT updated to 5.x as these new versions errors out when building old software.\n \n Tarball at:\n-* http://boxen/math.washington.edu/home/jpflori/upstream/autotools-20141105.tar.bz2\n+* http://boxen.math.washington.edu/home/jpflori/upstream/autotools-20141105.tar.bz2\n``````\n",
    "created_at": "2014-11-05T16:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231032",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 Texinfo is NOT updated to 5.x as these new versions errors out when building old software.
 
 Tarball at:
-* http://boxen/math.washington.edu/home/jpflori/upstream/autotools-20141105.tar.bz2
+* http://boxen.math.washington.edu/home/jpflori/upstream/autotools-20141105.tar.bz2
``````




---

archive/issue_comments_231033.json:
```json
{
    "body": "Changed commit from **[`8457b4f`](https://github.com/sagemath/sagetrac-mirror/commit/8457b4fb3b1212b104b4b5897f872bbddf40596b)** to **[`0374027`](https://github.com/sagemath/sagetrac-mirror/commit/0374027516eec24a0e7d4c512b09396ebe13ee1a)**",
    "created_at": "2014-11-05T16:42:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231033",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8457b4f`](https://github.com/sagemath/sagetrac-mirror/commit/8457b4fb3b1212b104b4b5897f872bbddf40596b)** to **[`0374027`](https://github.com/sagemath/sagetrac-mirror/commit/0374027516eec24a0e7d4c512b09396ebe13ee1a)**



---

archive/issue_comments_231034.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0374027516eec24a0e7d4c512b09396ebe13ee1a\"><code>0374027</code></a></td><td><code>Update autotools to 20141105.</code></td></tr></table>\n",
    "created_at": "2014-11-05T16:42:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231034",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0374027516eec24a0e7d4c512b09396ebe13ee1a"><code>0374027</code></a></td><td><code>Update autotools to 20141105.</code></td></tr></table>




---

archive/issue_comments_231035.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWhat is the reason for changing\n\n```\nsource bootstrap.sh\n```\nto\n\n```\n./bootstrap.sh\n```\n\nAnd did you manually change the make rules for `$(SAGE_LOCAL)/automake-1.11.3`? The line continuations looks different.",
    "created_at": "2014-11-05T19:18:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231035",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

What is the reason for changing

```
source bootstrap.sh
```
to

```
./bootstrap.sh
```

And did you manually change the make rules for `$(SAGE_LOCAL)/automake-1.11.3`? The line continuations looks different.



---

archive/issue_comments_231036.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2014-11-05T19:18:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231036",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_244603.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-05T19:18:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244603"
}
```



---

archive/issue_events_244604.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-05T19:18:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244604"
}
```



---

archive/issue_comments_231037.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@jdemeyer](#comment%3A4):\n> What is the reason for changing\n> \n> ```\n> source bootstrap.sh\n> ```\n> to\n> \n> ```\n> ./bootstrap.sh\n> ```\n\nMy bad, i was playing around and ending up with half broken versions of Sage's autotools and that was a temporary fix for me to use system wide stuff.\nI'll put the `source` version back in.\n> \n> And did you manually change the make rules for `$(SAGE_LOCAL)/automake-1.11.3`? The line continuations looks different.\n\nI don't think so.\nI'll regenerate everything anyway.",
    "created_at": "2014-11-06T10:07:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231037",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@jdemeyer](#comment%3A4):
> What is the reason for changing
> 
> ```
> source bootstrap.sh
> ```
> to
> 
> ```
> ./bootstrap.sh
> ```

My bad, i was playing around and ending up with half broken versions of Sage's autotools and that was a temporary fix for me to use system wide stuff.
I'll put the `source` version back in.
> 
> And did you manually change the make rules for `$(SAGE_LOCAL)/automake-1.11.3`? The line continuations looks different.

I don't think so.
I'll regenerate everything anyway.



---

archive/issue_comments_231038.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI'm also wondering why you made this change:\n\n```diff\n-if ! env \"AUTOCONF_VERSION=2.62\" autoconf --version | grep >/dev/null '2[.]62'; then\n+if ! env \"AUTOCONF_VERSION=2.59\" autoconf --version | grep >/dev/null '2[.]59'; then\n```\n\nThe number \"2.62\" was specifically chosen as being a \"rare\" version, not many operating systems come with that version by default. The version 2.59 is much more widely used, leading to more chances of a false positive.",
    "created_at": "2014-11-06T10:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231038",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

I'm also wondering why you made this change:

```diff
-if ! env "AUTOCONF_VERSION=2.62" autoconf --version | grep >/dev/null '2[.]62'; then
+if ! env "AUTOCONF_VERSION=2.59" autoconf --version | grep >/dev/null '2[.]59'; then
```

The number "2.62" was specifically chosen as being a "rare" version, not many operating systems come with that version by default. The version 2.59 is much more widely used, leading to more chances of a false positive.



---

archive/issue_comments_231039.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@jdemeyer](#comment%3A6):\n> I'm also wondering why you made this change:\n> \n> ```diff\n> -if ! env \"AUTOCONF_VERSION=2.62\" autoconf --version | grep >/dev/null '2[.]62'; then\n> +if ! env \"AUTOCONF_VERSION=2.59\" autoconf --version | grep >/dev/null '2[.]59'; then\n> ```\n> \n> The number \"2.62\" was specifically chosen as being a \"rare\" version, not many operating systems come with that version by default. The version 2.59 is much more widely used, leading to more chances of a false positive.\n\nOh, I thought I went the other way around and changed 59 by 62 for my own testing...\nI'll fix that as well.\nI must admit I did not have the time to check the full diff myself yet.",
    "created_at": "2014-11-06T10:32:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231039",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@jdemeyer](#comment%3A6):
> I'm also wondering why you made this change:
> 
> ```diff
> -if ! env "AUTOCONF_VERSION=2.62" autoconf --version | grep >/dev/null '2[.]62'; then
> +if ! env "AUTOCONF_VERSION=2.59" autoconf --version | grep >/dev/null '2[.]59'; then
> ```
> 
> The number "2.62" was specifically chosen as being a "rare" version, not many operating systems come with that version by default. The version 2.59 is much more widely used, leading to more chances of a false positive.

Oh, I thought I went the other way around and changed 59 by 62 for my own testing...
I'll fix that as well.
I must admit I did not have the time to check the full diff myself yet.



---

archive/issue_comments_231040.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nJust to satisfy my curiosity, I'm counting the `autoconf` version numbers of all `configure` files in all Sage packages:\n\n```\n2.13: 7\n2.50: 0\n2.51: 0\n2.52: 3\n2.53: 0\n2.54: 0\n2.55: 0\n2.56: 0\n2.57: 1\n2.58: 0\n2.59: 5\n2.60: 0\n2.61: 3\n2.62: 0\n2.63: 4\n2.64: 30\n2.65: 0\n2.66: 0\n2.67: 1\n2.68: 25\n2.69: 37\n```\n\nThis should give a very rough idea how popular various `autoconf` versions are.",
    "created_at": "2014-11-06T10:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231040",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Just to satisfy my curiosity, I'm counting the `autoconf` version numbers of all `configure` files in all Sage packages:

```
2.13: 7
2.50: 0
2.51: 0
2.52: 3
2.53: 0
2.54: 0
2.55: 0
2.56: 0
2.57: 1
2.58: 0
2.59: 5
2.60: 0
2.61: 3
2.62: 0
2.63: 4
2.64: 30
2.65: 0
2.66: 0
2.67: 1
2.68: 25
2.69: 37
```

This should give a very rough idea how popular various `autoconf` versions are.



---

archive/issue_comments_231041.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAlso note that I fear that the latest libtool bootstrap script must connect to the internet by default to clone the gnulib directory.\nI'll try to check if that can be avoided...",
    "created_at": "2014-11-06T10:47:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231041",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:9" align="right">comment:9</div>

Also note that I fear that the latest libtool bootstrap script must connect to the internet by default to clone the gnulib directory.
I'll try to check if that can be avoided...



---

archive/issue_comments_231042.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n(Hopefully copying the gnulib repo cloned by spkg-src into the libtool build dir may be enough, that's just wishful thinking at the moment as I did not test it.)",
    "created_at": "2014-11-06T10:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231042",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:10" align="right">comment:10</div>

(Hopefully copying the gnulib repo cloned by spkg-src into the libtool build dir may be enough, that's just wishful thinking at the moment as I did not test it.)



---

archive/issue_comments_231043.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI guess we have\n\n```\n    opt_gnulib_srcdir=$GNULIB_SRCDIR\n    opt_skip_git=false\n```\nto play with.",
    "created_at": "2014-11-06T10:58:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231043",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:11" align="right">comment:11</div>

I guess we have

```
    opt_gnulib_srcdir=$GNULIB_SRCDIR
    opt_skip_git=false
```
to play with.



---

archive/issue_comments_231044.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOk, now I remember why I removed the source thing.\nThe libtool 2.4.3 bootstrap script needs libtoolize, wand with source it points to the not yet available libtool 2.4.3.",
    "created_at": "2014-11-06T13:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231044",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:12" align="right">comment:12</div>

Ok, now I remember why I removed the source thing.
The libtool 2.4.3 bootstrap script needs libtoolize, wand with source it points to the not yet available libtool 2.4.3.



---

archive/issue_comments_231045.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOk we have an issue with `gnulib` and using `source`:\n\n```\n# Override the default configuration, if necessary.\n# Make sure that bootstrap.conf is sourced from the current directory\n# if we were invoked as \"sh bootstrap\".\ncase $0 in\n  */*) test -r \"$0.conf\" && . \"$0.conf\" ;;\n  *) test -r \"$0.conf\" && . ./\"$0.conf\" ;;\nesac\n```\nNote that if `source` is used `$0` is `/bin/bash`.\n\nAnyway, is using `source` really mandatory?\nAll needed vars should be exported, aren't they?",
    "created_at": "2014-11-06T16:19:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231045",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:13" align="right">comment:13</div>

Ok we have an issue with `gnulib` and using `source`:

```
# Override the default configuration, if necessary.
# Make sure that bootstrap.conf is sourced from the current directory
# if we were invoked as "sh bootstrap".
case $0 in
  */*) test -r "$0.conf" && . "$0.conf" ;;
  *) test -r "$0.conf" && . ./"$0.conf" ;;
esac
```
Note that if `source` is used `$0` is `/bin/bash`.

Anyway, is using `source` really mandatory?
All needed vars should be exported, aren't they?



---

archive/issue_comments_231046.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThe reason for `source` is the `set -e`. Older `bootstrap` scripts sometimes fail ungracefully if `set -e` is not given, braking stuff badly.",
    "created_at": "2014-11-06T16:32:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231046",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

The reason for `source` is the `set -e`. Older `bootstrap` scripts sometimes fail ungracefully if `set -e` is not given, braking stuff badly.



---

archive/issue_comments_231047.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nOk, then I'll leave `source` in if using some heuristic it does not seem `gnulib` is used.",
    "created_at": "2014-11-06T16:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231047",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:15" align="right">comment:15</div>

Ok, then I'll leave `source` in if using some heuristic it does not seem `gnulib` is used.



---

archive/issue_comments_231048.json:
```json
{
    "body": "Changed commit from **[`0374027`](https://github.com/sagemath/sagetrac-mirror/commit/0374027516eec24a0e7d4c512b09396ebe13ee1a)** to **[`391f4e9`](https://github.com/sagemath/sagetrac-mirror/commit/391f4e9a86f96bf8f8b97c654d5c6a0f2b4bc1c4)**",
    "created_at": "2014-11-06T16:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231048",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0374027`](https://github.com/sagemath/sagetrac-mirror/commit/0374027516eec24a0e7d4c512b09396ebe13ee1a)** to **[`391f4e9`](https://github.com/sagemath/sagetrac-mirror/commit/391f4e9a86f96bf8f8b97c654d5c6a0f2b4bc1c4)**



---

archive/issue_comments_231049.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/391f4e9a86f96bf8f8b97c654d5c6a0f2b4bc1c4\"><code>391f4e9</code></a></td><td><code>Update autotools to 20141105.</code></td></tr></table>\n",
    "created_at": "2014-11-06T16:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231049",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/391f4e9a86f96bf8f8b97c654d5c6a0f2b4bc1c4"><code>391f4e9</code></a></td><td><code>Update autotools to 20141105.</code></td></tr></table>




---

archive/issue_events_244605.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-11-06T16:54:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244605"
}
```



---

archive/issue_events_244606.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-11-06T16:54:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244606"
}
```



---

archive/issue_events_244607.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-11T11:25:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244607"
}
```



---

archive/issue_events_244608.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-11T11:25:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244608"
}
```



---

archive/issue_comments_231050.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI dislike the `bootstrap_launch`/`bootstrap_opts` solution. I would much rather prefer something like\n\n```sh\n# Figure out how to bootstrap\nif [ -f configure ]; then\n    bootstrap=\nelif [ -d gnulib ]; then\n    bootstrap=\"bash bootstrap --skip-git --skip-po --gnulib-srcdir=../../src/gnulib && \"\nelif [ -f bootstrap.sh ]; then\n    bootstrap=\"bash -c 'set -e; source bootstrap.sh' && \"\nelif [ -f bootstrap ]; then\n    bootstrap=\"bash -c 'set -e; source bootstrap' && \"\nelse\n    bootstrap=\"autoreconf -i -I m4 && \"\nfi\n```",
    "created_at": "2014-11-11T11:25:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231050",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

I dislike the `bootstrap_launch`/`bootstrap_opts` solution. I would much rather prefer something like

```sh
# Figure out how to bootstrap
if [ -f configure ]; then
    bootstrap=
elif [ -d gnulib ]; then
    bootstrap="bash bootstrap --skip-git --skip-po --gnulib-srcdir=../../src/gnulib && "
elif [ -f bootstrap.sh ]; then
    bootstrap="bash -c 'set -e; source bootstrap.sh' && "
elif [ -f bootstrap ]; then
    bootstrap="bash -c 'set -e; source bootstrap' && "
else
    bootstrap="autoreconf -i -I m4 && "
fi
```



---

archive/issue_comments_231051.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nIf you really want to keep the `bootstrap_launch` logic, the whole string `bash -c 'set -e; source ` should all be part of `bootstrap_launch`.",
    "created_at": "2014-11-11T11:26:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231051",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

If you really want to keep the `bootstrap_launch` logic, the whole string `bash -c 'set -e; source ` should all be part of `bootstrap_launch`.



---

archive/issue_comments_231052.json:
```json
{
    "body": "Changed commit from **[`391f4e9`](https://github.com/sagemath/sagetrac-mirror/commit/391f4e9a86f96bf8f8b97c654d5c6a0f2b4bc1c4)** to **[`25f1bea`](https://github.com/sagemath/sagetrac-mirror/commit/25f1beac186598f14532fdbe7a3f8c2ac8db621a)**",
    "created_at": "2014-11-12T00:16:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231052",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`391f4e9`](https://github.com/sagemath/sagetrac-mirror/commit/391f4e9a86f96bf8f8b97c654d5c6a0f2b4bc1c4)** to **[`25f1bea`](https://github.com/sagemath/sagetrac-mirror/commit/25f1beac186598f14532fdbe7a3f8c2ac8db621a)**



---

archive/issue_comments_231053.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25f1beac186598f14532fdbe7a3f8c2ac8db621a\"><code>25f1bea</code></a></td><td><code>Change handling of how bootstrap scripts are run.</code></td></tr></table>\n",
    "created_at": "2014-11-12T00:16:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231053",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25f1beac186598f14532fdbe7a3f8c2ac8db621a"><code>25f1bea</code></a></td><td><code>Change handling of how bootstrap scripts are run.</code></td></tr></table>




---

archive/issue_events_244609.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-11-12T00:17:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244609"
}
```



---

archive/issue_events_244610.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-11-12T00:17:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244610"
}
```



---

archive/issue_comments_231054.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nWhile running `spkg-src` I get\n\n```\nCloning into 'gnulib'...\nfatal: unable to connect to git.sv.gnu.org:\ngit.sv.gnu.org[0: 140.186.70.72]: errno=Connection refused\n```\n\nI assume this is a temporary problem, I still would like to try it so I'll wait a while and try again.",
    "created_at": "2014-11-12T22:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231054",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

While running `spkg-src` I get

```
Cloning into 'gnulib'...
fatal: unable to connect to git.sv.gnu.org:
git.sv.gnu.org[0: 140.186.70.72]: errno=Connection refused
```

I assume this is a temporary problem, I still would like to try it so I'll wait a while and try again.



---

archive/issue_comments_231055.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe diff looks good now by the way, so it's just a matter of testing the package.\n\nDo you know of anything which requires libtool 2.4.3?",
    "created_at": "2014-11-12T22:04:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231055",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

The diff looks good now by the way, so it's just a matter of testing the package.

Do you know of anything which requires libtool 2.4.3?



---

archive/issue_comments_231056.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@jdemeyer](#comment%3A23):\n> The diff looks good now by the way, so it's just a matter of testing the package.\n> \n> Do you know of anything which requires libtool 2.4.3?\n\nNot really, actually I wanted this for autoreconfiguring GLPK using your scripts, but it seems GLPK used an obscure revision of libtool between 2.4.2 and 2.4.3.",
    "created_at": "2014-11-13T09:14:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231056",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@jdemeyer](#comment%3A23):
> The diff looks good now by the way, so it's just a matter of testing the package.
> 
> Do you know of anything which requires libtool 2.4.3?

Not really, actually I wanted this for autoreconfiguring GLPK using your scripts, but it seems GLPK used an obscure revision of libtool between 2.4.2 and 2.4.3.



---

archive/issue_events_244611.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-21T22:29:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244611"
}
```



---

archive/issue_events_244612.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-21T22:29:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244612"
}
```



---

archive/issue_comments_231057.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Volker Braun**",
    "created_at": "2014-11-21T22:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231057",
    "user": "https://github.com/vbraun"
}
```

Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Volker Braun**



---

archive/issue_comments_231058.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nOSX 10.10 needs libtool 2.4.3... I'm going to set this to positive review before the 2.4.4 release in a few days.",
    "created_at": "2014-11-21T22:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231058",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

OSX 10.10 needs libtool 2.4.3... I'm going to set this to positive review before the 2.4.4 release in a few days.



---

archive/issue_events_244613.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-23T19:59:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244613"
}
```



---

archive/issue_events_244614.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e6d05f74c5e04551f0e53a04c1f4cf34e6822273",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-11-23T19:59:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17296#event-244614"
}
```



---

archive/issue_comments_231059.json:
```json
{
    "body": "Changed branch from **[u/jpflori/ticket/17296](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17296)** to **[`25f1bea`](https://github.com/sagemath/sagetrac-mirror/commit/25f1beac186598f14532fdbe7a3f8c2ac8db621a)**",
    "created_at": "2014-11-23T19:59:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17296#issuecomment-231059",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jpflori/ticket/17296](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17296)** to **[`25f1bea`](https://github.com/sagemath/sagetrac-mirror/commit/25f1beac186598f14532fdbe7a3f8c2ac8db621a)**
