# Issue 17280: Notebook commandline argparse

archive/issues_017043.json:
```json
{
    "body": "* Do not require quotes in `sage --notebook sagenb foo=bar`\n\n* Handle `--` to finish options: `sage --notebook -- foo=bar` only passes `foo=bar` to sagenb and does not treat it as the value for `--notebook`\n\nBranch/Commit: 4a0fc71154e247533353b77ce09aefe8a0c5d1bb\n\nReviewer: Clemens Heuberger, Karl-Dieter Crisman\n\nAuthor: Volker Braun\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17280\n\n",
    "closed_at": "2014-11-07T16:15:15Z",
    "created_at": "2014-11-03T14:40:38Z",
    "labels": [
        "component: scripts",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Notebook commandline argparse",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17280",
    "user": "https://github.com/vbraun"
}
```
* Do not require quotes in `sage --notebook sagenb foo=bar`

* Handle `--` to finish options: `sage --notebook -- foo=bar` only passes `foo=bar` to sagenb and does not treat it as the value for `--notebook`

Branch/Commit: 4a0fc71154e247533353b77ce09aefe8a0c5d1bb

Reviewer: Clemens Heuberger, Karl-Dieter Crisman

Author: Volker Braun

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17280





---

archive/issue_comments_241052.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2014-11-03T14:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241052",
    "user": "https://github.com/vbraun"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_241053.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to scripts.",
    "created_at": "2014-11-03T14:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241053",
    "user": "https://github.com/vbraun"
}
```

Changing component from PLEASE CHANGE to scripts.



---

archive/issue_comments_241054.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-03T14:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241054",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241055.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-03T14:59:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241055",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_241056.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n+* Do not require quotes in \\`sage --notebook sagenb foo=bar\\`\n \n+* Handle \\`--\\` to finish options: \\`sage --notebook -- foo=bar\\` only passes \\`foo=bar\\` to sagenb and does not treat it as the value for \\`--notebook\\`\n \n Type: PLEASE CHANGE\n \n```\n",
    "created_at": "2014-11-03T15:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241056",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
+* Do not require quotes in \`sage --notebook sagenb foo=bar\`
 
+* Handle \`--\` to finish options: \`sage --notebook -- foo=bar\` only passes \`foo=bar\` to sagenb and does not treat it as the value for \`--notebook\`
 
 Type: PLEASE CHANGE
 
```




---

archive/issue_comments_241057.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2014-11-03T15:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241057",
    "user": "https://github.com/vbraun"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_241058.json:
```json
{
    "body": "<a id='comment:7'></a>Is there a way to doctest this parsing?  If not, it's okay, just asking.  Thanks for opening this.",
    "created_at": "2014-11-03T17:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241058",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'></a>Is there a way to doctest this parsing?  If not, it's okay, just asking.  Thanks for opening this.



---

archive/issue_comments_241059.json:
```json
{
    "body": "<a id='comment:8'></a>The doctesting framework doesn't look into `src/bin/`...",
    "created_at": "2014-11-03T17:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241059",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>The doctesting framework doesn't look into `src/bin/`...



---

archive/issue_comments_241060.json:
```json
{
    "body": "<a id='comment:9'></a>Oh, I meant in another file, perhaps in the notebook (though that is also hard to change quickly, sigh for it being this separate project...)",
    "created_at": "2014-11-03T17:42:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241060",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:9'></a>Oh, I meant in another file, perhaps in the notebook (though that is also hard to change quickly, sigh for it being this separate project...)



---

archive/issue_comments_241061.json:
```json
{
    "body": "<a id='comment:10'></a>You can start a bunch of notebook servers with different options, but imho thats dog slow. The right way to do it is to look at doctests in `src/bin` scripts.",
    "created_at": "2014-11-03T17:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241061",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>You can start a bunch of notebook servers with different options, but imho thats dog slow. The right way to do it is to look at doctests in `src/bin` scripts.



---

archive/issue_comments_241062.json:
```json
{
    "body": "<a id='comment:11'></a>That may be true.\n\nBut what I meant was just something that tested the *parsing* of the options, as a guard against when someone someday changes that to deal with another special case.  That presumably is something that could be done, but maybe not without testing the scripts.  Anyway, if it's not easy I don't want to hold this up - my apologies that I can't test it right now.",
    "created_at": "2014-11-03T19:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241062",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>That may be true.

But what I meant was just something that tested the *parsing* of the options, as a guard against when someone someday changes that to deal with another special case.  That presumably is something that could be done, but maybe not without testing the scripts.  Anyway, if it's not easy I don't want to hold this up - my apologies that I can't test it right now.



---

archive/issue_comments_241063.json:
```json
{
    "body": "<a id='comment:12'></a>Once more: Not with the current doctest framework. Sure, there are all kinds of ugly hacks that one could do. But there is only one way to do it right, and we aren't set up for it.",
    "created_at": "2014-11-03T19:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241063",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>Once more: Not with the current doctest framework. Sure, there are all kinds of ugly hacks that one could do. But there is only one way to do it right, and we aren't set up for it.



---

archive/issue_comments_241064.json:
```json
{
    "body": "<a id='comment:13'></a>From sage-release, a suggestion to get this finalized:\n\n---\n\n> - whether the option --notebook-dir is documented in ./sage -h (or --advanced); \n>   IMHO it should be \n\n\nIt is not, and that points us to\n\n```\n$ ./sage --notebook --help\nusage: sage-notebook [-h] [--log LOG] [--notebook [NOTEBOOK]]\n\nThe Sage notebook launcher is used to start the notebook, and allows you to\nchoose between different implementations. Any further command line options are\npassed to the respective notebook.\n\noptional arguments:\n  -h, --help            show this help message and exit. Can be combined with\n                        \"--notebook=[...]\" to see notebook-specific options\n  --log LOG             one of [DEBUG, INFO, ERROR, WARNING, CRITICAL]\n  --notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]\n                        The notebook to run [one of: default, ipython,\n                        sagenb]. Default is sagenb\n```\nwhich also doesn't help, while that points us to\n\n```\n$ ./sage --notebook=sagenb --help\n```\nwhich unfortunately just gives the notebook? commands but doesn't tell how to use them with the notebook-specific options.\n\n> - on whether the old behaviour \"-n directory=sage.sagenb\" is documented \n>   somewhere and whether this documentation has been adapted to the new \n>   situation. \n\n\nIt was documented in the following way, in `sage --advanced`\n\n```\n  -n, -notebook [...] -- start the Sage notebook (options are the same\n                         as for the notebook command in Sage)\n```\nSo I would say that since I *do* agree that anyone using this option probably is savvy enough to actually read the help, perhaps documenting exactly how the options are to be called in `sage --advanced` and/or `sage --notebook --help`  would be enough to resolve this issue.  (Changing `sage --notebook=sagenb --help` would require more annoyance than worth.)  This should be pretty easy to do in the script itself, and given that we never said exactly how to *call* the options before I think that as long as we clearly document this (not necessarily with zillions of examples, but maybe two) then this would work okay.\n\nOne could at the same time add the info about the default directory, incidentally.",
    "created_at": "2014-11-06T13:22:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241064",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'></a>From sage-release, a suggestion to get this finalized:

---

> - whether the option --notebook-dir is documented in ./sage -h (or --advanced); 
>   IMHO it should be 


It is not, and that points us to

```
$ ./sage --notebook --help
usage: sage-notebook [-h] [--log LOG] [--notebook [NOTEBOOK]]

The Sage notebook launcher is used to start the notebook, and allows you to
choose between different implementations. Any further command line options are
passed to the respective notebook.

optional arguments:
  -h, --help            show this help message and exit. Can be combined with
                        "--notebook=[...]" to see notebook-specific options
  --log LOG             one of [DEBUG, INFO, ERROR, WARNING, CRITICAL]
  --notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]
                        The notebook to run [one of: default, ipython,
                        sagenb]. Default is sagenb
```
which also doesn't help, while that points us to

```
$ ./sage --notebook=sagenb --help
```
which unfortunately just gives the notebook? commands but doesn't tell how to use them with the notebook-specific options.

> - on whether the old behaviour "-n directory=sage.sagenb" is documented 
>   somewhere and whether this documentation has been adapted to the new 
>   situation. 


It was documented in the following way, in `sage --advanced`

```
  -n, -notebook [...] -- start the Sage notebook (options are the same
                         as for the notebook command in Sage)
```
So I would say that since I *do* agree that anyone using this option probably is savvy enough to actually read the help, perhaps documenting exactly how the options are to be called in `sage --advanced` and/or `sage --notebook --help`  would be enough to resolve this issue.  (Changing `sage --notebook=sagenb --help` would require more annoyance than worth.)  This should be pretty easy to do in the script itself, and given that we never said exactly how to *call* the options before I think that as long as we clearly document this (not necessarily with zillions of examples, but maybe two) then this would work okay.

One could at the same time add the info about the default directory, incidentally.



---

archive/issue_comments_241065.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 kcrisman]:\n> which unfortunately just gives the notebook? commands but doesn't tell how to use them with the notebook-specific options.\n\n\nWhich part of \"Any further command line options are passed to the respective notebook\" is unclear?\n\nIf you want to add to the online-help then just post a commit. IMHO it is clear and concise. There is always a tradeoff between longer and buried in a text wall.",
    "created_at": "2014-11-06T13:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241065",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>Replying to [comment:13 kcrisman]:
> which unfortunately just gives the notebook? commands but doesn't tell how to use them with the notebook-specific options.


Which part of "Any further command line options are passed to the respective notebook" is unclear?

If you want to add to the online-help then just post a commit. IMHO it is clear and concise. There is always a tradeoff between longer and buried in a text wall.



---

archive/issue_comments_241066.json:
```json
{
    "body": "<a id='comment:15'></a>> > which unfortunately just gives the notebook? commands but doesn't tell how to use them with the notebook-specific options.\n\n> \n> Which part of \"Any further command line options are passed to the respective notebook\" is unclear?\n\n\nBecause user X will know to read help, but may NOT understand the arcane syntax for doing so!  Namely, I would think this continues to allow\n\n```\nsage --notebook foo=bar\n```\nbecause I had never even heard of the `sage --notebook -- foo=bar` syntax.  Yes, I'm stupid and uneducated.  Well, so will many users be.  Especially since I was wrong - I said\n> It was documented in the following way,\n\nbut it still *is* documented this way.\n\n> If you want to add to the online-help then just post a commit. IMHO it is clear and concise. There is always a tradeoff between longer and buried in a text wall. \n\nYes, of course.  Though Let me see if I can cook something up; my concern is that I will make a stupid mistake, while you speak this syntax natively, as it were.  For instance, is this a way to spice this up *correctly*?\n\n```\nusage: sage-notebook [-h] [--log LOG] [--notebook [NOTEBOOK]] [--option=foo ...]\n\nThe Sage notebook launcher is used to start the notebook, and allows you to\nchoose between different implementations. Any further command line options are\npassed to the respective notebook.\n\noptional arguments:\n  -h, --help            show this help message and exit. Can be combined with\n                        \"--notebook=[...]\" to see notebook-specific options\n  --log LOG             one of [DEBUG, INFO, ERROR, WARNING, CRITICAL]\n  --notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]\n                        The notebook to run [one of: default, ipython,\n                        sagenb]. Default is sagenb}}}\n   --option=foo       Additional options to be sent to the notebook can\n                               be added using this syntax\n```",
    "created_at": "2014-11-06T14:03:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241066",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:15'></a>> > which unfortunately just gives the notebook? commands but doesn't tell how to use them with the notebook-specific options.

> 
> Which part of "Any further command line options are passed to the respective notebook" is unclear?


Because user X will know to read help, but may NOT understand the arcane syntax for doing so!  Namely, I would think this continues to allow

```
sage --notebook foo=bar
```
because I had never even heard of the `sage --notebook -- foo=bar` syntax.  Yes, I'm stupid and uneducated.  Well, so will many users be.  Especially since I was wrong - I said
> It was documented in the following way,

but it still *is* documented this way.

> If you want to add to the online-help then just post a commit. IMHO it is clear and concise. There is always a tradeoff between longer and buried in a text wall. 

Yes, of course.  Though Let me see if I can cook something up; my concern is that I will make a stupid mistake, while you speak this syntax natively, as it were.  For instance, is this a way to spice this up *correctly*?

```
usage: sage-notebook [-h] [--log LOG] [--notebook [NOTEBOOK]] [--option=foo ...]

The Sage notebook launcher is used to start the notebook, and allows you to
choose between different implementations. Any further command line options are
passed to the respective notebook.

optional arguments:
  -h, --help            show this help message and exit. Can be combined with
                        "--notebook=[...]" to see notebook-specific options
  --log LOG             one of [DEBUG, INFO, ERROR, WARNING, CRITICAL]
  --notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]
                        The notebook to run [one of: default, ipython,
                        sagenb]. Default is sagenb}}}
   --option=foo       Additional options to be sent to the notebook can
                               be added using this syntax
```



---

archive/issue_comments_241067.json:
```json
{
    "body": "<a id='comment:16'></a>Argparse auto-generates the help from the available options, you can't make options appear in the online help without handling them.",
    "created_at": "2014-11-06T14:08:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241067",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>Argparse auto-generates the help from the available options, you can't make options appear in the online help without handling them.



---

archive/issue_comments_241068.json:
```json
{
    "body": "<a id='comment:17'></a>Oh.\n\nBUT we do have\n\n```\nusage_advanced() {\n....\n}\n```\nand at the very least \n\n```\n    echo \"  -n, -notebook [...] -- start the Sage notebook (options are the same\"\n    echo \"                         as for the notebook command in Sage)\"\n```\ncould be fixed somehow.  From looking at `src/bin/sage` it looks like this only runs the default notebook.\n\nAnd would this be acceptable?\n\n```\ndescription = \\\n\"\"\"\nThe Sage notebook launcher is used to start the notebook, and allows\nyou to choose between different implementations. Any further command\nline options, in the form `--option=foo`, are passed to the respective notebook.\n\"\"\"\n```",
    "created_at": "2014-11-06T14:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241068",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:17'></a>Oh.

BUT we do have

```
usage_advanced() {
....
}
```
and at the very least 

```
    echo "  -n, -notebook [...] -- start the Sage notebook (options are the same"
    echo "                         as for the notebook command in Sage)"
```
could be fixed somehow.  From looking at `src/bin/sage` it looks like this only runs the default notebook.

And would this be acceptable?

```
description = \
"""
The Sage notebook launcher is used to start the notebook, and allows
you to choose between different implementations. Any further command
line options, in the form `--option=foo`, are passed to the respective notebook.
"""
```



---

archive/issue_comments_241069.json:
```json
{
    "body": "<a id='comment:18'></a>Yes, you can put anything in the description.",
    "created_at": "2014-11-06T14:56:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241069",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>Yes, you can put anything in the description.



---

archive/issue_comments_241070.json:
```json
{
    "body": "<a id='comment:19'></a>> Yes, you can put anything in the description.\n\nOkay, I'll do that.  But is it *correct*?  That's what I meant, sorry.  I'll do that and `sage --advanced` and that should resolve the last bit here, assuming someone looks at and tests your actual change.",
    "created_at": "2014-11-06T14:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241070",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'></a>> Yes, you can put anything in the description.

Okay, I'll do that.  But is it *correct*?  That's what I meant, sorry.  I'll do that and `sage --advanced` and that should resolve the last bit here, assuming someone looks at and tests your actual change.



---

archive/issue_comments_241071.json:
```json
{
    "body": "<a id='comment:20'></a>It doesn't have to have the form `--option=foo`, anything else is passed to the notebook. E.g. `port=666` without dashes. How about just giving two examples\n\n```\nsage -n default port=1234                              # pass port=1234 to default notebook\nsage --notebook=ipython --notebook-dir=/home/foo/bar   # ipython notebook in custom dir\n```",
    "created_at": "2014-11-06T15:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241071",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>It doesn't have to have the form `--option=foo`, anything else is passed to the notebook. E.g. `port=666` without dashes. How about just giving two examples

```
sage -n default port=1234                              # pass port=1234 to default notebook
sage --notebook=ipython --notebook-dir=/home/foo/bar   # ipython notebook in custom dir
```



---

archive/issue_comments_241072.json:
```json
{
    "body": "<a id='comment:21'></a>Thanks, I'll do something along those lines (was working on it but then was interrupted by something high-priority).  I think the point was that one needed `--option=foo` if one didn't say which type of notebook, right?",
    "created_at": "2014-11-06T15:38:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241072",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'></a>Thanks, I'll do something along those lines (was working on it but then was interrupted by something high-priority).  I think the point was that one needed `--option=foo` if one didn't say which type of notebook, right?



---

archive/issue_comments_241073.json:
```json
{
    "body": "<a id='comment:22'></a>I don't want to commit until I'm sure I'm following standards for man-type help... here is a potential commit.\n\n```diff\ndiff --git a/src/bin/sage b/src/bin/sage\nindex 06dfef8..f3551d5 100755\n--- a/src/bin/sage\n+++ b/src/bin/sage\n@@ -72,14 +72,17 @@ usage_advanced() {\n     ####  1.......................26..................................................78\n     ####  |.....................--.|...................................................|\n     echo \"Running the notebook:\"\n-    echo \"  --notebook=[...]    -- start the Sage notebook (valid options are\"\n-    echo \"                         'default', 'sagenb', and 'ipython'). See the output\"\n-    echo \"                         'of sage --notebook --help for more details\"\n+    echo \"  --notebook[=default] [...] -- start the Sage notebook (valid options are\"\n+    echo \"                         'default', 'sagenb', and 'ipython'). Notebook-specific\"\n+    echo \"                         options are passed on; if notebook is not specified, they\"\n+    echo \"                         must be in the form '--option=foo' or '-- option=foo'.\"\n+    echo \"                         See sage --notebook --help for more details\"\n     echo \"  -bn, -build-and-notebook [...] -- build the Sage library then start\"\n     echo \"                         the Sage notebook\"\n     echo \"  -inotebook [...]    -- start the *insecure* Sage notebook (deprecated)\"\n-    echo \"  -n, -notebook [...] -- start the Sage notebook (options are the same\"\n-    echo \"                         as for the notebook command in Sage)\"\n+    echo \"  -n, -notebook [...] -- start the default Sage notebook.  (Options are the same\"\n+    echo \"                         as for the notebook command in Sage, passed in the form\"\n+    echo \"                         'option=foo'.)\"\n \n     echo\n     ####  1.......................26..................................................78\ndiff --git a/src/bin/sage-notebook b/src/bin/sage-notebook\nindex d2a6c93..042b72f 100755\n--- a/src/bin/sage-notebook\n+++ b/src/bin/sage-notebook\n@@ -77,6 +77,11 @@ description = \\\n The Sage notebook launcher is used to start the notebook, and allows\n you to choose between different implementations. Any further command\n line options are passed to the respective notebook.\n+\n+Examples:\n+\n+sage -n default port=1234                              # pass port=1234 to default notebook\n+sage --notebook=ipython --notebook-dir=/home/foo/bar   # ipython notebook in custom dir\n \"\"\"\n \n help_help = \\\n```",
    "created_at": "2014-11-06T15:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241073",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:22'></a>I don't want to commit until I'm sure I'm following standards for man-type help... here is a potential commit.

```diff
diff --git a/src/bin/sage b/src/bin/sage
index 06dfef8..f3551d5 100755
--- a/src/bin/sage
+++ b/src/bin/sage
@@ -72,14 +72,17 @@ usage_advanced() {
     ####  1.......................26..................................................78
     ####  |.....................--.|...................................................|
     echo "Running the notebook:"
-    echo "  --notebook=[...]    -- start the Sage notebook (valid options are"
-    echo "                         'default', 'sagenb', and 'ipython'). See the output"
-    echo "                         'of sage --notebook --help for more details"
+    echo "  --notebook[=default] [...] -- start the Sage notebook (valid options are"
+    echo "                         'default', 'sagenb', and 'ipython'). Notebook-specific"
+    echo "                         options are passed on; if notebook is not specified, they"
+    echo "                         must be in the form '--option=foo' or '-- option=foo'."
+    echo "                         See sage --notebook --help for more details"
     echo "  -bn, -build-and-notebook [...] -- build the Sage library then start"
     echo "                         the Sage notebook"
     echo "  -inotebook [...]    -- start the *insecure* Sage notebook (deprecated)"
-    echo "  -n, -notebook [...] -- start the Sage notebook (options are the same"
-    echo "                         as for the notebook command in Sage)"
+    echo "  -n, -notebook [...] -- start the default Sage notebook.  (Options are the same"
+    echo "                         as for the notebook command in Sage, passed in the form"
+    echo "                         'option=foo'.)"
 
     echo
     ####  1.......................26..................................................78
diff --git a/src/bin/sage-notebook b/src/bin/sage-notebook
index d2a6c93..042b72f 100755
--- a/src/bin/sage-notebook
+++ b/src/bin/sage-notebook
@@ -77,6 +77,11 @@ description = \
 The Sage notebook launcher is used to start the notebook, and allows
 you to choose between different implementations. Any further command
 line options are passed to the respective notebook.
+
+Examples:
+
+sage -n default port=1234                              # pass port=1234 to default notebook
+sage --notebook=ipython --notebook-dir=/home/foo/bar   # ipython notebook in custom dir
 """
 
 help_help = \
```



---

archive/issue_comments_241074.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-11-07T06:08:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241074",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_241075.json:
```json
{
    "body": "<a id='comment:23'></a>I tested a few things.\n\nDoes **not** work as expected:\n\n* Directory with slashes\n\n```\n./sage -n default directory=/tmp/test\nTraceback (most recent call last):\n...\n  File \"/local/sage/sage-6.4.rc1/local/lib/python/ast.py\", line 37, in parse\n    return compile(source, filename, mode, PyCF_ONLY_AST)\n  File \"<unknown>\", line 1\n    /tmp/test\n    ^\nSyntaxError: invalid syntax\n```\n  This worked in 6.3:\n\n```\n/local/sage/sage-6.3/sage -n directory=/tmp/test\n```\n\n\nWork as expected:\n\n```\n./sage -n\n./sage -n default\n./sage -n -- directory=test\n./sage -n default directory=test.sagenb\n./sage -n sagenb \"directory='/tmp/test'\"\n./sage -n -- \"directory='/tmp/test'\"\n./sage -n default port=1234\n./sage -n -- port=1234\n```\n\nReplying to [comment:21 kcrisman]:\n> I think the point was that one needed `--option=foo` if one didn't say which type of notebook, right?\n\n\nI do not see what you mean here; I could not get any of `--directory=test` or `--option=directory=test` to work, but I did not really expect it previously; but as I said, I do not see what you mean with `--option=foo`.",
    "created_at": "2014-11-07T06:08:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241075",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:23'></a>I tested a few things.

Does **not** work as expected:

* Directory with slashes

```
./sage -n default directory=/tmp/test
Traceback (most recent call last):
...
  File "/local/sage/sage-6.4.rc1/local/lib/python/ast.py", line 37, in parse
    return compile(source, filename, mode, PyCF_ONLY_AST)
  File "<unknown>", line 1
    /tmp/test
    ^
SyntaxError: invalid syntax
```
  This worked in 6.3:

```
/local/sage/sage-6.3/sage -n directory=/tmp/test
```


Work as expected:

```
./sage -n
./sage -n default
./sage -n -- directory=test
./sage -n default directory=test.sagenb
./sage -n sagenb "directory='/tmp/test'"
./sage -n -- "directory='/tmp/test'"
./sage -n default port=1234
./sage -n -- port=1234
```

Replying to [comment:21 kcrisman]:
> I think the point was that one needed `--option=foo` if one didn't say which type of notebook, right?


I do not see what you mean here; I could not get any of `--directory=test` or `--option=directory=test` to work, but I did not really expect it previously; but as I said, I do not see what you mean with `--option=foo`.



---

archive/issue_comments_241076.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-07T10:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241076",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241077.json:
```json
{
    "body": "<a id='comment:25'></a>Thanks, fixed. I also added the examples:\n\n```\n$ ./sage -n -h\nusage: sage-notebook [-h] [--log LOG] [--notebook [NOTEBOOK]]\n\nThe Sage notebook launcher is used to start the notebook, and allows\nyou to choose between different implementations. Any further command\nline options are passed to the respective notebook.\n\noptional arguments:\n  -h, --help            show this help message and exit. Can be combined with\n                        \"--notebook=[...]\" to see notebook-specific options\n  --log LOG             one of [DEBUG, INFO, ERROR, WARNING, CRITICAL]\n  --notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]\n                        The notebook to run [one of: default, ipython,\n                        sagenb]. Default is sagenb\n\nEXAMPLES: \n\n* Run default notebook on port 1234. Note that the first argument\n  after \"-n\" will be interpreted as notebook name unless you stop\n  processing with \"--\":\n\n      sage -n default port=1234\n      sage -n -- port=1234      # equivalent\n      sage -n port=1234         # ERROR: invalid notebook name\n\n* Run IPython notebook in custom directory:\n\n      sage --notebook=ipython --notebook-dir=/home/foo/bar\n```",
    "created_at": "2014-11-07T10:03:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241077",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>Thanks, fixed. I also added the examples:

```
$ ./sage -n -h
usage: sage-notebook [-h] [--log LOG] [--notebook [NOTEBOOK]]

The Sage notebook launcher is used to start the notebook, and allows
you to choose between different implementations. Any further command
line options are passed to the respective notebook.

optional arguments:
  -h, --help            show this help message and exit. Can be combined with
                        "--notebook=[...]" to see notebook-specific options
  --log LOG             one of [DEBUG, INFO, ERROR, WARNING, CRITICAL]
  --notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]
                        The notebook to run [one of: default, ipython,
                        sagenb]. Default is sagenb

EXAMPLES: 

* Run default notebook on port 1234. Note that the first argument
  after "-n" will be interpreted as notebook name unless you stop
  processing with "--":

      sage -n default port=1234
      sage -n -- port=1234      # equivalent
      sage -n port=1234         # ERROR: invalid notebook name

* Run IPython notebook in custom directory:

      sage --notebook=ipython --notebook-dir=/home/foo/bar
```



---

archive/issue_comments_241078.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-11-07T14:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241078",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_241079.json:
```json
{
    "body": "<a id='comment:26'></a>Thanks for the feedback, Clemens, that's very helpful.  I checked that this fixed it, and it certainly shouldn't break anything.\n\nVolker - oh, that makes great sense, and I like the way you did it.  I hope the following reviewer patch is acceptable for `src/bin/sage`.\n\n---\nNew commits:",
    "created_at": "2014-11-07T14:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241079",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:26'></a>Thanks for the feedback, Clemens, that's very helpful.  I checked that this fixed it, and it certainly shouldn't break anything.

Volker - oh, that makes great sense, and I like the way you did it.  I hope the following reviewer patch is acceptable for `src/bin/sage`.

---
New commits:



---

archive/issue_comments_241080.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-07T14:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241080",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_049959.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-07T16:15:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17280#event-49959"
}
```



---

archive/issue_comments_241081.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-07T16:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17280#issuecomment-241081",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
