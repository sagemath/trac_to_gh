# Issue 17695: Slightly fasten is_cyclotomic()

archive/issues_017458.json:
```json
{
    "assignees": [],
    "body": "In `src/sage/rings/polynomial/polynomial_element.pyx`, the method `is_cyclotomic()` begins by checking the irreducibility of the input polynomial, and then checks the leading and constant coefficients. I simply propose to invert those tests to fasten a bit the test for polynomials that are not monic or whose constant coefficient is not `1`. \n\nCC:  @fchapoton\n\nKeywords: **cyclotomic polynomials**\n\nBranch/Commit: **[`a2a6f02`](https://github.com/sagemath/sagetrac-mirror/commit/a2a6f026794fb12e1d557d8ca6738c45d5ed937f)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Bruno Grenet**\n\nComponent: **number theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17695_\n\n",
    "closed_at": "2015-02-18T08:53:14Z",
    "created_at": "2015-01-30T10:55:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Slightly fasten is_cyclotomic()",
    "type": "issue",
    "updated_at": "2015-02-18T08:53:14Z",
    "url": "https://github.com/sagemath/sage/issues/17695",
    "user": "https://github.com/bgrenet"
}
```
In `src/sage/rings/polynomial/polynomial_element.pyx`, the method `is_cyclotomic()` begins by checking the irreducibility of the input polynomial, and then checks the leading and constant coefficients. I simply propose to invert those tests to fasten a bit the test for polynomials that are not monic or whose constant coefficient is not `1`. 

CC:  @fchapoton

Keywords: **cyclotomic polynomials**

Branch/Commit: **[`a2a6f02`](https://github.com/sagemath/sagetrac-mirror/commit/a2a6f026794fb12e1d557d8ca6738c45d5ed937f)**

Reviewer: **Frédéric Chapoton**

Author: **Bruno Grenet**

Component: **number theory**

_Issue created by migration from https://trac.sagemath.org/ticket/17695_





---

archive/issue_events_252159.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-01-30T10:55:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252159"
}
```



---

archive/issue_events_252160.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-01-30T10:55:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252160"
}
```



---

archive/issue_events_252161.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-01-30T10:55:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252161"
}
```



---

archive/issue_events_252162.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-01-30T10:55:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252162"
}
```



---

archive/issue_comments_239028.json:
```json
{
    "body": "Branch: **[u/bruno/slightly_fasten_is_cyclotomic__](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/slightly_fasten_is_cyclotomic__)**",
    "created_at": "2015-01-30T13:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239028",
    "user": "https://github.com/bgrenet"
}
```

Branch: **[u/bruno/slightly_fasten_is_cyclotomic__](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/slightly_fasten_is_cyclotomic__)**



---

archive/issue_comments_239029.json:
```json
{
    "body": "Commit: **[`f79eeaa`](https://github.com/sagemath/sagetrac-mirror/commit/f79eeaaa630b1bd966a25a2f7b0f7a5f1dda3378)**",
    "created_at": "2015-01-30T13:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239029",
    "user": "https://github.com/bgrenet"
}
```

Commit: **[`f79eeaa`](https://github.com/sagemath/sagetrac-mirror/commit/f79eeaaa630b1bd966a25a2f7b0f7a5f1dda3378)**



---

archive/issue_comments_239030.json:
```json
{
    "body": "Changed keywords from none to **cyclotomic polynomials**",
    "created_at": "2015-01-30T13:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239030",
    "user": "https://github.com/bgrenet"
}
```

Changed keywords from none to **cyclotomic polynomials**



---

archive/issue_comments_239031.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-In `src/sage/rings/polynomial/polynomial_element.pyx`, the method `is_cyclotomic()` begins with checking the irreducibility of the input polynomial, and then checks the leading and constant coefficients. I simply propose to invert those tests to fasten a bit the test for polynomials that are not monic or whose constant coefficient is not `1`. \n+In `src/sage/rings/polynomial/polynomial_element.pyx`, the method `is_cyclotomic()` begins by checking the irreducibility of the input polynomial, and then checks the leading and constant coefficients. I simply propose to invert those tests to fasten a bit the test for polynomials that are not monic or whose constant coefficient is not `1`. \n``````\n",
    "created_at": "2015-01-30T13:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239031",
    "user": "https://github.com/bgrenet"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-In `src/sage/rings/polynomial/polynomial_element.pyx`, the method `is_cyclotomic()` begins with checking the irreducibility of the input polynomial, and then checks the leading and constant coefficients. I simply propose to invert those tests to fasten a bit the test for polynomials that are not monic or whose constant coefficient is not `1`. 
+In `src/sage/rings/polynomial/polynomial_element.pyx`, the method `is_cyclotomic()` begins by checking the irreducibility of the input polynomial, and then checks the leading and constant coefficients. I simply propose to invert those tests to fasten a bit the test for polynomials that are not monic or whose constant coefficient is not `1`. 
``````




---

archive/issue_events_252163.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-01-30T13:38:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252163"
}
```



---

archive/issue_comments_239032.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHello Bruno,\n\nActually, I discussed this with Karim Belabas in Bordeaux few weeks ago. We should either call Pari or stick to their implementation. It is much faster:\n\n```\nsage: p = cyclotomic_polynomial(150)\nsage: pp = p._gp_()\nsage: timeit(\"pp.poliscyclo()\")\n625 loops, best of 3: 697 \u00b5s per loop\nsage: timeit(\"p.is_cyclotomic()\")\n125 loops, best of 3: 2.78 ms per loop\n```\nMoreover they do have the function `poliscycloprod` that checks if all roots are roots of unity (which is even faster).\n\nVincent",
    "created_at": "2015-01-30T15:56:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239032",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Hello Bruno,

Actually, I discussed this with Karim Belabas in Bordeaux few weeks ago. We should either call Pari or stick to their implementation. It is much faster:

```
sage: p = cyclotomic_polynomial(150)
sage: pp = p._gp_()
sage: timeit("pp.poliscyclo()")
625 loops, best of 3: 697 µs per loop
sage: timeit("p.is_cyclotomic()")
125 loops, best of 3: 2.78 ms per loop
```
Moreover they do have the function `poliscycloprod` that checks if all roots are roots of unity (which is even faster).

Vincent



---

archive/issue_comments_239033.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@videlec](#comment:3):\n> Hello Bruno,\n> \n> Actually, I discussed this with Karim Belabas in Bordeaux few weeks ago. We should either call Pari or stick to their implementation. It is much faster:\n> \n> ```\n> sage: p = cyclotomic_polynomial(150)\n> sage: pp = p._gp_()\n> sage: timeit(\"pp.poliscyclo()\")\n> 625 loops, best of 3: 697 \u00b5s per loop\n> sage: timeit(\"p.is_cyclotomic()\")\n> 125 loops, best of 3: 2.78 ms per loop\n> ```\n> Moreover they do have the function `poliscycloprod` that checks if all roots are roots of unity (which is even faster).\n> \n> Vincent\n\nIt is not surprising indeed that Pari is faster for this. I don't understand what you mean by\n> either call Pari or stick to their implementation.\n\nDo you mean there are two ways to use Pari's implementation?",
    "created_at": "2015-01-31T13:29:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239033",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@videlec](#comment:3):
> Hello Bruno,
> 
> Actually, I discussed this with Karim Belabas in Bordeaux few weeks ago. We should either call Pari or stick to their implementation. It is much faster:
> 
> ```
> sage: p = cyclotomic_polynomial(150)
> sage: pp = p._gp_()
> sage: timeit("pp.poliscyclo()")
> 625 loops, best of 3: 697 µs per loop
> sage: timeit("p.is_cyclotomic()")
> 125 loops, best of 3: 2.78 ms per loop
> ```
> Moreover they do have the function `poliscycloprod` that checks if all roots are roots of unity (which is even faster).
> 
> Vincent

It is not surprising indeed that Pari is faster for this. I don't understand what you mean by
> either call Pari or stick to their implementation.

Do you mean there are two ways to use Pari's implementation?



---

archive/issue_comments_239034.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@bgrenet](#comment:5):\n> Replying to [@videlec](#comment:3):\n> It is not surprising indeed that Pari is faster for this. I don't understand what you mean by\n> > either call Pari or stick to their implementation.\n\n> Do you mean there are two ways to use Pari's implementation? \n\nNope. Either we should copy their implementation within Sage (I do not think this is justified) or just call Pari.\n\nAnd by the way there are two ways of using pari. Either with `gp` (this is a pexpect interface with a lot of latency in communication) and with `libpari` (which is very efficient in C). But sadly there is not yet `poliscyclo` and `poliscycloprod` in the libpari interface (i.e. in the file `libs/pari/gen.pyx`). I guess that we should wait for #17631 and not modify `gen.pyx` directly.\n\nVincent",
    "created_at": "2015-01-31T14:20:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239034",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@bgrenet](#comment:5):
> Replying to [@videlec](#comment:3):
> It is not surprising indeed that Pari is faster for this. I don't understand what you mean by
> > either call Pari or stick to their implementation.

> Do you mean there are two ways to use Pari's implementation? 

Nope. Either we should copy their implementation within Sage (I do not think this is justified) or just call Pari.

And by the way there are two ways of using pari. Either with `gp` (this is a pexpect interface with a lot of latency in communication) and with `libpari` (which is very efficient in C). But sadly there is not yet `poliscyclo` and `poliscycloprod` in the libpari interface (i.e. in the file `libs/pari/gen.pyx`). I guess that we should wait for #17631 and not modify `gen.pyx` directly.

Vincent



---

archive/issue_comments_239035.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nA side remark:\n\nI would like to have a certificate (something like : this is the cyclotomic polynomial Phi_20)\n\nIs this allowed by the pari function ?",
    "created_at": "2015-02-02T13:49:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239035",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

A side remark:

I would like to have a certificate (something like : this is the cyclotomic polynomial Phi_20)

Is this allowed by the pari function ?



---

archive/issue_comments_239036.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@fchapoton](#comment:7):\n> A side remark:\n> \n> I would like to have a certificate (something like : this is the cyclotomic polynomial Phi_20)\n> \n> Is this allowed by the pari function ?\n\nOf course ;-) From pari documentation\n\n```\npoliscyclo(f): returns 0 if f is not a cyclotomic polynomial,\n               and n > 0 if f = Phi_n, the n-th cyclotomic polynomial.\n```\n\nand you can already use it\n\n```\nsage: R.<x> = ZZ[]\nsage: (x^2+x+1)._gp_().poliscyclo()\n3\nsage: (x^2-1)._gp_().poliscyclo()\n0\n```\n\nVincent",
    "created_at": "2015-02-04T13:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239036",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@fchapoton](#comment:7):
> A side remark:
> 
> I would like to have a certificate (something like : this is the cyclotomic polynomial Phi_20)
> 
> Is this allowed by the pari function ?

Of course ;-) From pari documentation

```
poliscyclo(f): returns 0 if f is not a cyclotomic polynomial,
               and n > 0 if f = Phi_n, the n-th cyclotomic polynomial.
```

and you can already use it

```
sage: R.<x> = ZZ[]
sage: (x^2+x+1)._gp_().poliscyclo()
3
sage: (x^2-1)._gp_().poliscyclo()
0
```

Vincent



---

archive/issue_comments_239037.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@videlec](#comment:6):\n> Replying to [@bgrenet](#comment:5):\n> > Replying to [@videlec](#comment:3):\n> > It is not surprising indeed that Pari is faster for this. I don't understand what you mean by\n> > > either call Pari or stick to their implementation.\n\n> > Do you mean there are two ways to use Pari's implementation? \n\n> \n> Nope. Either we should copy their implementation within Sage (I do not think this is justified) or just call Pari.\n> \n> And by the way there are two ways of using pari. Either with `gp` (this is a pexpect interface with a lot of latency in communication) and with `libpari` (which is very efficient in C). But sadly there is not yet `poliscyclo` and `poliscycloprod` in the libpari interface (i.e. in the file `libs/pari/gen.pyx`). I guess that we should wait for #17631 and not modify `gen.pyx` directly.\n> \n> Vincent\n\n\nFor concreteness, what do you propose to do now? If I understand correctly, you propose to wait for #17631 and then make `is_cyclotomic()` directly call the pari functions, and not introduce the tiny change I made? I am fine with that, just wanted to be sure!",
    "created_at": "2015-02-04T13:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239037",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@videlec](#comment:6):
> Replying to [@bgrenet](#comment:5):
> > Replying to [@videlec](#comment:3):
> > It is not surprising indeed that Pari is faster for this. I don't understand what you mean by
> > > either call Pari or stick to their implementation.

> > Do you mean there are two ways to use Pari's implementation? 

> 
> Nope. Either we should copy their implementation within Sage (I do not think this is justified) or just call Pari.
> 
> And by the way there are two ways of using pari. Either with `gp` (this is a pexpect interface with a lot of latency in communication) and with `libpari` (which is very efficient in C). But sadly there is not yet `poliscyclo` and `poliscycloprod` in the libpari interface (i.e. in the file `libs/pari/gen.pyx`). I guess that we should wait for #17631 and not modify `gen.pyx` directly.
> 
> Vincent


For concreteness, what do you propose to do now? If I understand correctly, you propose to wait for #17631 and then make `is_cyclotomic()` directly call the pari functions, and not introduce the tiny change I made? I am fine with that, just wanted to be sure!



---

archive/issue_comments_239038.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@bgrenet](#comment:9):\n> For concreteness, what do you propose to do now? If I understand correctly, you propose to wait for #17631 and then make `is_cyclotomic()` directly call the pari functions, and not introduce the tiny change I made? I am fine with that, just wanted to be sure!\n\nFor now, we can already do the thing I proposed with the gp interface (and return the certificate instead of `True`/`False`). And we can also add a `TODO` section in the documentation saying that we should move to the pari interface as soon as #17631 is ready.\n\nVincent",
    "created_at": "2015-02-04T14:17:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239038",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@bgrenet](#comment:9):
> For concreteness, what do you propose to do now? If I understand correctly, you propose to wait for #17631 and then make `is_cyclotomic()` directly call the pari functions, and not introduce the tiny change I made? I am fine with that, just wanted to be sure!

For now, we can already do the thing I proposed with the gp interface (and return the certificate instead of `True`/`False`). And we can also add a `TODO` section in the documentation saying that we should move to the pari interface as soon as #17631 is ready.

Vincent



---

archive/issue_comments_239039.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@videlec](#comment:10):\n> Replying to [@bgrenet](#comment:9):\n> > For concreteness, what do you propose to do now? If I understand correctly, you propose to wait for #17631 and then make `is_cyclotomic()` directly call the pari functions, and not introduce the tiny change I made? I am fine with that, just wanted to be sure!\n\n> \n> For now, we can already do the thing I proposed with the gp interface (and return the certificate instead of `True`/`False`). And we can also add a `TODO` section in the documentation saying that we should move to the pari interface as soon as #17631 is ready.\n\nI am not sure to agree since it actually makes the function slower:\n\n```python\nsage: p = cyclotomic_polynomial(150)\nsage: %timeit p.is_cyclotomic()\n100 loops, best of 3: 2.75 ms per loop\nsage: %timeit p._gp_().poliscyclo()\n100 loops, best of 3: 3.96 ms per loop\n```\n\nAs an aside, isn't it a problem for a method named `is_cyclotomic()` to return an integer rather than a boolean? Of course, the certificate is interesting to have, and one can still test with `is_cyclotomic()` as before. It is just that I expect a method `is_...()` to return a boolean. Maybe I am wrong...",
    "created_at": "2015-02-04T14:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239039",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@videlec](#comment:10):
> Replying to [@bgrenet](#comment:9):
> > For concreteness, what do you propose to do now? If I understand correctly, you propose to wait for #17631 and then make `is_cyclotomic()` directly call the pari functions, and not introduce the tiny change I made? I am fine with that, just wanted to be sure!

> 
> For now, we can already do the thing I proposed with the gp interface (and return the certificate instead of `True`/`False`). And we can also add a `TODO` section in the documentation saying that we should move to the pari interface as soon as #17631 is ready.

I am not sure to agree since it actually makes the function slower:

```python
sage: p = cyclotomic_polynomial(150)
sage: %timeit p.is_cyclotomic()
100 loops, best of 3: 2.75 ms per loop
sage: %timeit p._gp_().poliscyclo()
100 loops, best of 3: 3.96 ms per loop
```

As an aside, isn't it a problem for a method named `is_cyclotomic()` to return an integer rather than a boolean? Of course, the certificate is interesting to have, and one can still test with `is_cyclotomic()` as before. It is just that I expect a method `is_...()` to return a boolean. Maybe I am wrong...



---

archive/issue_comments_239040.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@bgrenet](#comment:11):\n> Replying to [@videlec](#comment:10):\n> > Replying to [@bgrenet](#comment:9):\n> > > For concreteness, what do you propose to do now? If I understand correctly, you propose to wait for #17631 and then make `is_cyclotomic()` directly call the pari functions, and not introduce the tiny change I made? I am fine with that, just wanted to be sure!\n\n> > \n> > For now, we can already do the thing I proposed with the gp interface (and return the certificate instead of `True`/`False`). And we can also add a `TODO` section in the documentation saying that we should move to the pari interface as soon as #17631 is ready.\n\n> \n> I am not sure to agree since it actually makes the function slower:\n> \n> ```python\n> sage: p = cyclotomic_polynomial(150)\n> sage: %timeit p.is_cyclotomic()\n> 100 loops, best of 3: 2.75 ms per loop\n> sage: %timeit p._gp_().poliscyclo()\n> 100 loops, best of 3: 3.96 ms per loop\n> ```\n\nRight. Most of the time seems to be lost in the conversion\n\n```\nsage: l = [cyclotomic_polynomial(i) for i in range(2,50)]\nsage: timeit(\"for p in l: _ = p.is_cyclotomic()\")\n5 loops, best of 3: 51.7 ms per loop\nsage: timeit(\"for p in l: _ = p._gp_().poliscyclo()\")\n5 loops, best of 3: 303 ms per loop\nsage: lgp = [p._gp_() for p in l]\nsage: timeit(\"for p in lgp: _ = p.poliscyclo()\")\n25 loops, best of 3: 34.8 ms per loop\n```\n\n> As an aside, isn't it a problem for a method named `is_cyclotomic()` to return an integer rather than a boolean? Of course, the certificate is interesting to have, and one can still test with `is_cyclotomic()` as before. It is just that I expect a method `is_...()` to return a boolean. Maybe I am wrong...\n\nYou are right. The best option would be:\n\n```\ndef is_cyclotomic(self, certificate=False):\n    ...\n    return ans if certificate else bool(ans)\n```\n\n\nA compromise can be:\n- add the keyword `certificate` (if it is `True` we use `self._gp_().polisyclco()`)\n- do your initial suggested change\n- add a `TODO` to the documentation to switch from gp to pari (and open a ticket for it). We will then consider the fact of making it the default.\n\nVincent",
    "created_at": "2015-02-04T15:42:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239040",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@bgrenet](#comment:11):
> Replying to [@videlec](#comment:10):
> > Replying to [@bgrenet](#comment:9):
> > > For concreteness, what do you propose to do now? If I understand correctly, you propose to wait for #17631 and then make `is_cyclotomic()` directly call the pari functions, and not introduce the tiny change I made? I am fine with that, just wanted to be sure!

> > 
> > For now, we can already do the thing I proposed with the gp interface (and return the certificate instead of `True`/`False`). And we can also add a `TODO` section in the documentation saying that we should move to the pari interface as soon as #17631 is ready.

> 
> I am not sure to agree since it actually makes the function slower:
> 
> ```python
> sage: p = cyclotomic_polynomial(150)
> sage: %timeit p.is_cyclotomic()
> 100 loops, best of 3: 2.75 ms per loop
> sage: %timeit p._gp_().poliscyclo()
> 100 loops, best of 3: 3.96 ms per loop
> ```

Right. Most of the time seems to be lost in the conversion

```
sage: l = [cyclotomic_polynomial(i) for i in range(2,50)]
sage: timeit("for p in l: _ = p.is_cyclotomic()")
5 loops, best of 3: 51.7 ms per loop
sage: timeit("for p in l: _ = p._gp_().poliscyclo()")
5 loops, best of 3: 303 ms per loop
sage: lgp = [p._gp_() for p in l]
sage: timeit("for p in lgp: _ = p.poliscyclo()")
25 loops, best of 3: 34.8 ms per loop
```

> As an aside, isn't it a problem for a method named `is_cyclotomic()` to return an integer rather than a boolean? Of course, the certificate is interesting to have, and one can still test with `is_cyclotomic()` as before. It is just that I expect a method `is_...()` to return a boolean. Maybe I am wrong...

You are right. The best option would be:

```
def is_cyclotomic(self, certificate=False):
    ...
    return ans if certificate else bool(ans)
```


A compromise can be:
- add the keyword `certificate` (if it is `True` we use `self._gp_().polisyclco()`)
- do your initial suggested change
- add a `TODO` to the documentation to switch from gp to pari (and open a ticket for it). We will then consider the fact of making it the default.

Vincent



---

archive/issue_comments_239041.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@videlec](#comment:12):\n> A compromise can be:\n> - add the keyword `certificate` (if it is `True` we use `self._gp_().polisyclco()`)\n> - do your initial suggested change\n> - add a `TODO` to the documentation to switch from gp to pari (and open a ticket for it). We will then consider the fact of making it the default.\n\nI like this proposition, I'll do it.",
    "created_at": "2015-02-04T15:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239041",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@videlec](#comment:12):
> A compromise can be:
> - add the keyword `certificate` (if it is `True` we use `self._gp_().polisyclco()`)
> - do your initial suggested change
> - add a `TODO` to the documentation to switch from gp to pari (and open a ticket for it). We will then consider the fact of making it the default.

I like this proposition, I'll do it.



---

archive/issue_comments_239042.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/053a30cc574fb122ec8527c53849419ccf871e68\"><code>053a30c</code></a></td><td><code>Add certificate keyword</code></td></tr></table>\n",
    "created_at": "2015-02-04T21:06:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239042",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/053a30cc574fb122ec8527c53849419ccf871e68"><code>053a30c</code></a></td><td><code>Add certificate keyword</code></td></tr></table>




---

archive/issue_comments_239043.json:
```json
{
    "body": "Changed commit from **[`f79eeaa`](https://github.com/sagemath/sagetrac-mirror/commit/f79eeaaa630b1bd966a25a2f7b0f7a5f1dda3378)** to **[`053a30c`](https://github.com/sagemath/sagetrac-mirror/commit/053a30cc574fb122ec8527c53849419ccf871e68)**",
    "created_at": "2015-02-04T21:06:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239043",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f79eeaa`](https://github.com/sagemath/sagetrac-mirror/commit/f79eeaaa630b1bd966a25a2f7b0f7a5f1dda3378)** to **[`053a30c`](https://github.com/sagemath/sagetrac-mirror/commit/053a30cc574fb122ec8527c53849419ccf871e68)**



---

archive/issue_events_252164.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-04T21:13:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252164"
}
```



---

archive/issue_events_252165.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-04T21:13:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252165"
}
```



---

archive/issue_comments_239044.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nJust typographical comment. The `TODO` block must be indented. In other words\n\n```\n.. TODO::\n\n    As soon as #XYZ is finished we should do blih and blah.\n```\nHave a look to [Docstring section of the developer manual](http://sagemath.org/doc/developer/coding_basics.html#docstring-markup-with-rest-and-sphinx).\n\nIt is `_gp_()` and not `__gp__()` (i.e. one underscore).\n\nI would move the `._gp_().poliscyclo()` below the tests for characteristic.\n\nVincent",
    "created_at": "2015-02-04T21:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239044",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Just typographical comment. The `TODO` block must be indented. In other words

```
.. TODO::

    As soon as #XYZ is finished we should do blih and blah.
```
Have a look to [Docstring section of the developer manual](http://sagemath.org/doc/developer/coding_basics.html#docstring-markup-with-rest-and-sphinx).

It is `_gp_()` and not `__gp__()` (i.e. one underscore).

I would move the `._gp_().poliscyclo()` below the tests for characteristic.

Vincent



---

archive/issue_comments_239045.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI pushed too fast, and noticed my mistake on `__gp__()`. Actually, there are other ones. I'm correcting this.\n\nThanks anyway for the feedback, and especially for the documentation!",
    "created_at": "2015-02-04T21:16:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239045",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:16" align="right">comment:16</div>

I pushed too fast, and noticed my mistake on `__gp__()`. Actually, there are other ones. I'm correcting this.

Thanks anyway for the feedback, and especially for the documentation!



---

archive/issue_comments_239046.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7b5f6861c5bbabadd9a9e68cdc8c6d7a5673c50\"><code>c7b5f68</code></a></td><td><code>Correcting mistakes + docstring formatting</code></td></tr></table>\n",
    "created_at": "2015-02-04T21:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239046",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7b5f6861c5bbabadd9a9e68cdc8c6d7a5673c50"><code>c7b5f68</code></a></td><td><code>Correcting mistakes + docstring formatting</code></td></tr></table>




---

archive/issue_comments_239047.json:
```json
{
    "body": "Changed commit from **[`053a30c`](https://github.com/sagemath/sagetrac-mirror/commit/053a30cc574fb122ec8527c53849419ccf871e68)** to **[`c7b5f68`](https://github.com/sagemath/sagetrac-mirror/commit/c7b5f6861c5bbabadd9a9e68cdc8c6d7a5673c50)**",
    "created_at": "2015-02-04T21:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239047",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`053a30c`](https://github.com/sagemath/sagetrac-mirror/commit/053a30cc574fb122ec8527c53849419ccf871e68)** to **[`c7b5f68`](https://github.com/sagemath/sagetrac-mirror/commit/c7b5f6861c5bbabadd9a9e68cdc8c6d7a5673c50)**



---

archive/issue_events_252166.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-04T21:41:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252166"
}
```



---

archive/issue_events_252167.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-04T21:41:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252167"
}
```



---

archive/issue_comments_239048.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nOne more thing for the doc: for trac tickets you should use <code>:trac:\\`17730\\`</code>. That will create automatically a link in the compiled documentation.\n\nMore seriously, we definitely do **not** want to test irreducibility at the beginning. You can possibly add this test in between step 2 and 3. That would prevent some useless factorization. But if you do so, I want to see some benchmarks first.\n\nVincent",
    "created_at": "2015-02-04T22:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239048",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

One more thing for the doc: for trac tickets you should use <code>:trac:\`17730\`</code>. That will create automatically a link in the compiled documentation.

More seriously, we definitely do **not** want to test irreducibility at the beginning. You can possibly add this test in between step 2 and 3. That would prevent some useless factorization. But if you do so, I want to see some benchmarks first.

Vincent



---

archive/issue_events_252168.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-04T22:02:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252168"
}
```



---

archive/issue_events_252169.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-04T22:02:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252169"
}
```



---

archive/issue_comments_239049.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@videlec](#comment:19):\n> One more thing for the doc: for trac tickets you should use <code>:trac:\\`17730\\`</code>. That will create automatically a link in the compiled documentation.\n\nOK.\n \n> More seriously, we definitely do **not** want to test irreducibility at the beginning. You can possibly add this test in between step 2 and 3. That would prevent some useless factorization. But if you do so, I want to see some benchmarks first.\n\nI do not understand your remark: irreducibility was tested as the first step before, and moving this test later is precisely the purpose of my ticket.",
    "created_at": "2015-02-04T22:14:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239049",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@videlec](#comment:19):
> One more thing for the doc: for trac tickets you should use <code>:trac:\`17730\`</code>. That will create automatically a link in the compiled documentation.

OK.
 
> More seriously, we definitely do **not** want to test irreducibility at the beginning. You can possibly add this test in between step 2 and 3. That would prevent some useless factorization. But if you do so, I want to see some benchmarks first.

I do not understand your remark: irreducibility was tested as the first step before, and moving this test later is precisely the purpose of my ticket.



---

archive/issue_comments_239050.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@bgrenet](#comment:21):\n> > More seriously, we definitely do **not** want to test irreducibility at the beginning. You can possibly add this test in between step 2 and 3. That would prevent some useless factorization. But if you do so, I want to see some benchmarks first.\n\n> \n> I do not understand your remark: irreducibility was tested as the first step before, and moving this test later is precisely the purpose of my ticket.\n\nRight ;-) I will try a bit more optimization on my side.",
    "created_at": "2015-02-04T22:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239050",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@bgrenet](#comment:21):
> > More seriously, we definitely do **not** want to test irreducibility at the beginning. You can possibly add this test in between step 2 and 3. That would prevent some useless factorization. But if you do so, I want to see some benchmarks first.

> 
> I do not understand your remark: irreducibility was tested as the first step before, and moving this test later is precisely the purpose of my ticket.

Right ;-) I will try a bit more optimization on my side.



---

archive/issue_comments_239051.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b01fad201f72a254845e763cf8b072d28cde8b8\"><code>1b01fad</code></a></td><td><code>improved formatting (trac ticket)</code></td></tr></table>\n",
    "created_at": "2015-02-04T22:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239051",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b01fad201f72a254845e763cf8b072d28cde8b8"><code>1b01fad</code></a></td><td><code>improved formatting (trac ticket)</code></td></tr></table>




---

archive/issue_comments_239052.json:
```json
{
    "body": "Changed commit from **[`c7b5f68`](https://github.com/sagemath/sagetrac-mirror/commit/c7b5f6861c5bbabadd9a9e68cdc8c6d7a5673c50)** to **[`1b01fad`](https://github.com/sagemath/sagetrac-mirror/commit/1b01fad201f72a254845e763cf8b072d28cde8b8)**",
    "created_at": "2015-02-04T22:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239052",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c7b5f68`](https://github.com/sagemath/sagetrac-mirror/commit/c7b5f6861c5bbabadd9a9e68cdc8c6d7a5673c50)** to **[`1b01fad`](https://github.com/sagemath/sagetrac-mirror/commit/1b01fad201f72a254845e763cf8b072d28cde8b8)**



---

archive/issue_events_252170.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-04T22:25:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252170"
}
```



---

archive/issue_events_252171.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-02-04T22:25:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252171"
}
```



---

archive/issue_comments_239053.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nActually, the factor at the end is overkill as we only want a square root. I did have a look at the method `.is_square()` and it was dirty enough to be slow. So I just make it simpler/clearer. The speedup is very small and concerns mostly positive cases.\n\nI am happy with your commits. Just review mine.\n\nVincent\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90ac73a342710459415a32442d418751e3560be6\"><code>90ac73a</code></a></td><td><code>trac #17695: simplify factor step + faster .sqrt()</code></td></tr></table>\n",
    "created_at": "2015-02-04T23:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239053",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

Actually, the factor at the end is overkill as we only want a square root. I did have a look at the method `.is_square()` and it was dirty enough to be slow. So I just make it simpler/clearer. The speedup is very small and concerns mostly positive cases.

I am happy with your commits. Just review mine.

Vincent

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90ac73a342710459415a32442d418751e3560be6"><code>90ac73a</code></a></td><td><code>trac #17695: simplify factor step + faster .sqrt()</code></td></tr></table>




---

archive/issue_comments_239054.json:
```json
{
    "body": "Changed branch from **[u/bruno/slightly_fasten_is_cyclotomic__](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/slightly_fasten_is_cyclotomic__)** to **[u/vdelecroix/17695](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/17695)**",
    "created_at": "2015-02-04T23:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239054",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/bruno/slightly_fasten_is_cyclotomic__](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/slightly_fasten_is_cyclotomic__)** to **[u/vdelecroix/17695](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/17695)**



---

archive/issue_comments_239055.json:
```json
{
    "body": "Changed commit from **[`1b01fad`](https://github.com/sagemath/sagetrac-mirror/commit/1b01fad201f72a254845e763cf8b072d28cde8b8)** to **[`90ac73a`](https://github.com/sagemath/sagetrac-mirror/commit/90ac73a342710459415a32442d418751e3560be6)**",
    "created_at": "2015-02-04T23:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239055",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`1b01fad`](https://github.com/sagemath/sagetrac-mirror/commit/1b01fad201f72a254845e763cf8b072d28cde8b8)** to **[`90ac73a`](https://github.com/sagemath/sagetrac-mirror/commit/90ac73a342710459415a32442d418751e3560be6)**



---

archive/issue_comments_239056.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/17695](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/17695)** to **[u/bruno/17695](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/17695)**",
    "created_at": "2015-02-06T12:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239056",
    "user": "https://github.com/bgrenet"
}
```

Changed branch from **[u/vdelecroix/17695](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/17695)** to **[u/bruno/17695](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/17695)**



---

archive/issue_comments_239057.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@videlec](#comment:25):\n> Actually, the factor at the end is overkill as we only want a square root. I did have a look at the method `.is_square()` and it was dirty enough to be slow. So I just make it simpler/clearer. The speedup is very small and concerns mostly positive cases.\n> \n> I am happy with your commits. Just review mine.\n\nI am fine with your commit too, but for one typo that I've corrected in the docstring of `is_square()`:\n\n```diff\n def is_square(self, root=False):\n\"\"\"\nReturns whether or not polynomial is square. If the optional\n- argument ``root`` is set to ``True, then also returns the square root\n+ argument ``root`` is set to ``True``, then also returns the square root\n(or ``None``, if the polynomial is not square).\n```\n\nI do not know whether it is acceptable for me to set \"positive review\". I let you do so if you consider everything's OK. Thanks for the patient feedback!\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85d8ffcdd69d911dcc042e4dd3ab8374f90e4d56\"><code>85d8ffc</code></a></td><td><code>Review commit</code></td></tr></table>\n",
    "created_at": "2015-02-06T13:08:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239057",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@videlec](#comment:25):
> Actually, the factor at the end is overkill as we only want a square root. I did have a look at the method `.is_square()` and it was dirty enough to be slow. So I just make it simpler/clearer. The speedup is very small and concerns mostly positive cases.
> 
> I am happy with your commits. Just review mine.

I am fine with your commit too, but for one typo that I've corrected in the docstring of `is_square()`:

```diff
 def is_square(self, root=False):
"""
Returns whether or not polynomial is square. If the optional
- argument ``root`` is set to ``True, then also returns the square root
+ argument ``root`` is set to ``True``, then also returns the square root
(or ``None``, if the polynomial is not square).
```

I do not know whether it is acceptable for me to set "positive review". I let you do so if you consider everything's OK. Thanks for the patient feedback!

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85d8ffcdd69d911dcc042e4dd3ab8374f90e4d56"><code>85d8ffc</code></a></td><td><code>Review commit</code></td></tr></table>




---

archive/issue_comments_239058.json:
```json
{
    "body": "Changed commit from **[`90ac73a`](https://github.com/sagemath/sagetrac-mirror/commit/90ac73a342710459415a32442d418751e3560be6)** to **[`85d8ffc`](https://github.com/sagemath/sagetrac-mirror/commit/85d8ffcdd69d911dcc042e4dd3ab8374f90e4d56)**",
    "created_at": "2015-02-06T13:08:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239058",
    "user": "https://github.com/bgrenet"
}
```

Changed commit from **[`90ac73a`](https://github.com/sagemath/sagetrac-mirror/commit/90ac73a342710459415a32442d418751e3560be6)** to **[`85d8ffc`](https://github.com/sagemath/sagetrac-mirror/commit/85d8ffcdd69d911dcc042e4dd3ab8374f90e4d56)**



---

archive/issue_comments_239059.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nLooks good to me. I have just made a few typographical changes, so I allow myself to put this into positive review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2a6f026794fb12e1d557d8ca6738c45d5ed937f\"><code>a2a6f02</code></a></td><td><code>trac #17695 some doc and code formatting details</code></td></tr></table>\n",
    "created_at": "2015-02-06T20:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239059",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:28" align="right">comment:28</div>

Looks good to me. I have just made a few typographical changes, so I allow myself to put this into positive review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2a6f026794fb12e1d557d8ca6738c45d5ed937f"><code>a2a6f02</code></a></td><td><code>trac #17695 some doc and code formatting details</code></td></tr></table>




---

archive/issue_events_252172.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-02-06T20:26:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252172"
}
```



---

archive/issue_events_252173.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-02-06T20:26:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252173"
}
```



---

archive/issue_comments_239060.json:
```json
{
    "body": "Changed commit from **[`85d8ffc`](https://github.com/sagemath/sagetrac-mirror/commit/85d8ffcdd69d911dcc042e4dd3ab8374f90e4d56)** to **[`a2a6f02`](https://github.com/sagemath/sagetrac-mirror/commit/a2a6f026794fb12e1d557d8ca6738c45d5ed937f)**",
    "created_at": "2015-02-06T20:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239060",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`85d8ffc`](https://github.com/sagemath/sagetrac-mirror/commit/85d8ffcdd69d911dcc042e4dd3ab8374f90e4d56)** to **[`a2a6f02`](https://github.com/sagemath/sagetrac-mirror/commit/a2a6f026794fb12e1d557d8ca6738c45d5ed937f)**



---

archive/issue_comments_239061.json:
```json
{
    "body": "Changed branch from **[u/bruno/17695](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/17695)** to **[public/ticket/17695](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17695)**",
    "created_at": "2015-02-06T20:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239061",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/bruno/17695](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/17695)** to **[public/ticket/17695](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17695)**



---

archive/issue_comments_239062.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nHo great! Nice catch!\n\nVincent",
    "created_at": "2015-02-06T20:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239062",
    "user": "https://github.com/videlec"
}
```

<div id="comment:29" align="right">comment:29</div>

Ho great! Nice catch!

Vincent



---

archive/issue_comments_239063.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2015-02-07T12:50:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239063",
    "user": "https://github.com/mezzarobba"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_events_252174.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-18T08:53:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252174"
}
```



---

archive/issue_events_252175.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0b960bef9af1ba035d823d9776615305c345ec28",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-02-18T08:53:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17695#event-252175"
}
```



---

archive/issue_comments_239064.json:
```json
{
    "body": "Changed branch from **[public/ticket/17695](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17695)** to **[`a2a6f02`](https://github.com/sagemath/sagetrac-mirror/commit/a2a6f026794fb12e1d557d8ca6738c45d5ed937f)**",
    "created_at": "2015-02-18T08:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17695",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17695#issuecomment-239064",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ticket/17695](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17695)** to **[`a2a6f02`](https://github.com/sagemath/sagetrac-mirror/commit/a2a6f026794fb12e1d557d8ca6738c45d5ed937f)**
