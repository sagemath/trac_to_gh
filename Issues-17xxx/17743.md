# Issue 17743: Plots are not shown in the notebook using server_pool option

archive/issues_017506.json:
```json
{
    "assignees": [],
    "body": "See #17755.\n\nReviewer: **Jeroen Demeyer, Volker Braun**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17743_\n\n",
    "closed_at": "2015-02-10T11:33:19Z",
    "created_at": "2015-02-07T00:57:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20notebook",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Plots are not shown in the notebook using server_pool option",
    "type": "issue",
    "updated_at": "2015-02-11T20:29:46Z",
    "url": "https://github.com/sagemath/sage/issues/17743",
    "user": "https://github.com/novoselt"
}
```
See #17755.

Reviewer: **Jeroen Demeyer, Volker Braun**

_Issue created by migration from https://trac.sagemath.org/ticket/17743_





---

archive/issue_events_235078.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2015-02-07T00:57:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235078"
}
```



---

archive/issue_events_235079.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2015-02-07T00:57:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20notebook",
    "label_color": "000080",
    "label_name": "component: notebook",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235079"
}
```



---

archive/issue_events_235080.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2015-02-07T00:57:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235080"
}
```



---

archive/issue_events_235081.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2015-02-07T00:57:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235081"
}
```



---

archive/issue_comments_242207.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nIn case it helps: I had a similar issue upgrading to Sage-6.4 in SageCell. The solution was https://github.com/novoselt/sage/commit/6b47f2e388a7e7b23243862a314313abe1344ed3",
    "created_at": "2015-02-07T00:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242207",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:1" align="right">Comment 1</div>

In case it helps: I had a similar issue upgrading to Sage-6.4 in SageCell. The solution was https://github.com/novoselt/sage/commit/6b47f2e388a7e7b23243862a314313abe1344ed3



---

archive/issue_comments_242208.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nworks for me...\n\nare you using vanilla Sage 6.5.rc0?",
    "created_at": "2015-02-07T09:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242208",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">Comment 2</div>

works for me...

are you using vanilla Sage 6.5.rc0?



---

archive/issue_comments_242209.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nIn any case, you should test with #17645.",
    "created_at": "2015-02-07T09:21:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242209",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">Comment 3</div>

In any case, you should test with #17645.



---

archive/issue_comments_242210.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nworks for me, too.",
    "created_at": "2015-02-08T09:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242210",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">Comment 4</div>

works for me, too.



---

archive/issue_events_235082.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-08T10:06:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235082"
}
```



---

archive/issue_events_235083.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-08T10:06:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235083"
}
```



---

archive/issue_events_235084.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-08T10:06:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235084"
}
```



---

archive/issue_events_235085.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-08T10:06:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235085"
}
```



---

archive/issue_comments_242211.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer, Volker Braun**",
    "created_at": "2015-02-08T10:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242211",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer, Volker Braun**



---

archive/issue_events_235086.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-08T10:06:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235086"
}
```



---

archive/issue_events_235087.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-08T10:06:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235087"
}
```



---

archive/issue_events_235088.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-08T15:26:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235088"
}
```



---

archive/issue_events_235089.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-08T15:26:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235089"
}
```



---

archive/issue_events_235090.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-08T15:26:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/worksforme",
    "label_color": "a6a6a6",
    "label_name": "worksforme",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235090"
}
```



---

archive/issue_comments_242212.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nI have observed it on my installation with a separate worker account. After `make distclean` and recompiling I still see this, while on a local machine everything works fine.\n\nCan someone test it with multiple accounts?",
    "created_at": "2015-02-08T17:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242212",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:8" align="right">Comment 8</div>

I have observed it on my installation with a separate worker account. After `make distclean` and recompiling I still see this, while on a local machine everything works fine.

Can someone test it with multiple accounts?



---

archive/issue_comments_242213.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nMultiple accounts or `server_pool`? I tried both and they both work. Do you get any log on the commandline?",
    "created_at": "2015-02-09T00:09:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242213",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">Comment 9</div>

Multiple accounts or `server_pool`? I tried both and they both work. Do you get any log on the commandline?



---

archive/issue_comments_242214.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nYes!\n\n```\n2015-02-08 17:13:19-0700 [HTTPChannel,5,192.168.122.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpeF7EjV/sage0.png'\n```\nThis is after executing a command that should show a plot, but does not. The file has 0600 permissions. It seems that commands with explicit `show` do not create these files, they are served from somewhere else (or perhaps moved?).",
    "created_at": "2015-02-09T00:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242214",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:10" align="right">Comment 10</div>

Yes!

```
2015-02-08 17:13:19-0700 [HTTPChannel,5,192.168.122.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpeF7EjV/sage0.png'
```
This is after executing a command that should show a plot, but does not. The file has 0600 permissions. It seems that commands with explicit `show` do not create these files, they are served from somewhere else (or perhaps moved?).



---

archive/issue_comments_242215.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,20 @@\n-In Sage-6.5.rc0 entering\n+In Sage-6.5.rc1, running a notebook using:\n+\n+```\n+$ env SAGENB_TMPDIR=/tmp/sagenbtmp ./sage\n+```\n+Then starting the notebook with\n+\n+```\n+sage: notebook(server_pool=[\"guest@localhost\"])\n+```\n+and then entering in a notebook cell\n \n ```\n plot(sin(x))\n ```\n-into a cell and evaluating it produces nothing, while a plot has to be shown without necessity to add show command explicitly.\n+no plot is shown, but the following error appears in the Sage session:\n+\n+```\n+2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/sagenbtmp/tmpJKDXnp/sage0.png'\n+```\n``````\n",
    "created_at": "2015-02-09T09:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242215",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,20 @@
-In Sage-6.5.rc0 entering
+In Sage-6.5.rc1, running a notebook using:
+
+```
+$ env SAGENB_TMPDIR=/tmp/sagenbtmp ./sage
+```
+Then starting the notebook with
+
+```
+sage: notebook(server_pool=["guest@localhost"])
+```
+and then entering in a notebook cell
 
 ```
 plot(sin(x))
 ```
-into a cell and evaluating it produces nothing, while a plot has to be shown without necessity to add show command explicitly.
+no plot is shown, but the following error appears in the Sage session:
+
+```
+2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/sagenbtmp/tmpJKDXnp/sage0.png'
+```
``````




---

archive/issue_comments_242216.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nConfirmed with `server_pool`!\n\nI think this bug should be reopened as Sage 6.5 blocker.",
    "created_at": "2015-02-09T09:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242216",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">Comment 11</div>

Confirmed with `server_pool`!

I think this bug should be reopened as Sage 6.5 blocker.



---

archive/issue_events_235091.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-09T09:27:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235091"
}
```



---

archive/issue_events_235092.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-09T09:27:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "title_is": "Plots are not shown in the notebook using `server_pool` option",
    "title_was": "Plots are not shown in the notebook without show",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235092"
}
```



---

archive/issue_events_235093.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-09T09:28:12Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "title_is": "Plots are not shown in the notebook using server_pool option",
    "title_was": "Plots are not shown in the notebook using `server_pool` option",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235093"
}
```



---

archive/issue_comments_242217.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nThats a configuration issue, the worker process needs to set a umask (in `.bashrc`, for example) that allows the server to read the temporary files.",
    "created_at": "2015-02-09T09:53:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242217",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:13" align="right">Comment 13</div>

Thats a configuration issue, the worker process needs to set a umask (in `.bashrc`, for example) that allows the server to read the temporary files.



---

archive/issue_comments_242218.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-In Sage-6.5.rc1, running a notebook using:\n+In Sage 6.4.1 or 6.5.rc1, running a notebook using:\n \n ```\n $ env SAGENB_TMPDIR=/tmp/sagenbtmp ./sage\n``````\n",
    "created_at": "2015-02-09T12:52:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242218",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-In Sage-6.5.rc1, running a notebook using:
+In Sage 6.4.1 or 6.5.rc1, running a notebook using:
 
 ```
 $ env SAGENB_TMPDIR=/tmp/sagenbtmp ./sage
``````




---

archive/issue_comments_242219.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nIt's not purely a configuration issue, as Sage 6.3 does not have this problem.\n\n6.4 and 6.4.1 *do* have the problem.",
    "created_at": "2015-02-09T12:52:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242219",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">Comment 14</div>

It's not purely a configuration issue, as Sage 6.3 does not have this problem.

6.4 and 6.4.1 *do* have the problem.



---

archive/issue_comments_242220.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-In Sage 6.4.1 or 6.5.rc1, running a notebook using:\n+In Sage 6.4 or 6.4.1 or 6.5.rc1, running a notebook using:\n \n ```\n $ env SAGENB_TMPDIR=/tmp/sagenbtmp ./sage\n``````\n",
    "created_at": "2015-02-09T14:01:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242220",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-In Sage 6.4.1 or 6.5.rc1, running a notebook using:
+In Sage 6.4 or 6.4.1 or 6.5.rc1, running a notebook using:
 
 ```
 $ env SAGENB_TMPDIR=/tmp/sagenbtmp ./sage
``````




---

archive/issue_comments_242221.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,20 +1,18 @@\n-In Sage 6.4 or 6.4.1 or 6.5.rc1, running a notebook using:\n+The following got broken between Sage 6.3 and 6.4.\n \n-```\n-$ env SAGENB_TMPDIR=/tmp/sagenbtmp ./sage\n-```\n-Then starting the notebook with\n+Start a notebook server with\n \n ```\n sage: notebook(server_pool=[\"guest@localhost\"])\n ```\n-and then entering in a notebook cell\n+and then enter in a notebook cell\n \n ```\n plot(sin(x))\n ```\n-no plot is shown, but the following error appears in the Sage session:\n+\n+No plot is shown, but the following error appears in the Sage session:\n \n ```\n-2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/sagenbtmp/tmpJKDXnp/sage0.png'\n+2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'\n ```\n``````\n",
    "created_at": "2015-02-09T14:08:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242221",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,20 +1,18 @@
-In Sage 6.4 or 6.4.1 or 6.5.rc1, running a notebook using:
+The following got broken between Sage 6.3 and 6.4.
 
-```
-$ env SAGENB_TMPDIR=/tmp/sagenbtmp ./sage
-```
-Then starting the notebook with
+Start a notebook server with
 
 ```
 sage: notebook(server_pool=["guest@localhost"])
 ```
-and then entering in a notebook cell
+and then enter in a notebook cell
 
 ```
 plot(sin(x))
 ```
-no plot is shown, but the following error appears in the Sage session:
+
+No plot is shown, but the following error appears in the Sage session:
 
 ```
-2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/sagenbtmp/tmpJKDXnp/sage0.png'
+2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'
 ```
``````




---

archive/issue_comments_242222.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The following got broken between Sage 6.3 and 6.4.\n+The following got broken between Sage 6.4.beta4 and 6.4.\n \n Start a notebook server with\n \n``````\n",
    "created_at": "2015-02-09T15:33:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242222",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The following got broken between Sage 6.3 and 6.4.
+The following got broken between Sage 6.4.beta4 and 6.4.
 
 Start a notebook server with
 
``````




---

archive/issue_comments_242223.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nThat seems to be about the time the new display hook was brought into play, maybe?",
    "created_at": "2015-02-09T15:56:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242223",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:18" align="right">Comment 18</div>

That seems to be about the time the new display hook was brought into play, maybe?



---

archive/issue_comments_242224.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nThere are a number of other permission issues, e.g. by default `server_pool` doesn't work on my machine because my home directory is 0x700 so the worker can't start my Sage installation.\n\nIMHO its a stupid design to send data back in temp files, the results should be serialized properly and sent though a pipe or socket. See also: Make Sage usable as a library (https://groups.google.com/d/msg/sage-devel/87Rlenvcfrs/-vOyTkZ_FGYJ)",
    "created_at": "2015-02-09T15:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242224",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">Comment 19</div>

There are a number of other permission issues, e.g. by default `server_pool` doesn't work on my machine because my home directory is 0x700 so the worker can't start my Sage installation.

IMHO its a stupid design to send data back in temp files, the results should be serialized properly and sent though a pipe or socket. See also: Make Sage usable as a library (https://groups.google.com/d/msg/sage-devel/87Rlenvcfrs/-vOyTkZ_FGYJ)



---

archive/issue_comments_242225.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@vbraun](#comment%3A19):\n> There are a number of other permission issues, e.g. by default `server_pool` doesn't work on my machine because my home directory is 0x700 so the worker can't start my Sage installation.\n\nYou mean you install Sage in your unaccessible home directory? Now **that's** a configuration problem, not a Sage issue.\n\n> IMHO its a stupid design to send data back in temp files\n\nPerhaps, but that's not the point of this ticket.",
    "created_at": "2015-02-09T16:04:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242225",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@vbraun](#comment%3A19):
> There are a number of other permission issues, e.g. by default `server_pool` doesn't work on my machine because my home directory is 0x700 so the worker can't start my Sage installation.

You mean you install Sage in your unaccessible home directory? Now **that's** a configuration problem, not a Sage issue.

> IMHO its a stupid design to send data back in temp files

Perhaps, but that's not the point of this ticket.



---

archive/issue_comments_242226.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\n> Perhaps, but that's not the point of this ticket.\n\nExactly - what we have is a subtle but important regression that appears under certain conditions, which perhaps has a relatively easy fix. \"Configuration problem\" is when nothing works at all and there are some indications to what is wrong. Here, a fix would be to set group readable permissions somewhere where those files are created, instead of relying on UMASK (or perhaps set/improve UMASK at the start of Sage to be what is necessary). I am also curious why these files are treated differently than those created with explicit show command...",
    "created_at": "2015-02-09T16:32:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242226",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:21" align="right">Comment 21</div>

> Perhaps, but that's not the point of this ticket.

Exactly - what we have is a subtle but important regression that appears under certain conditions, which perhaps has a relatively easy fix. "Configuration problem" is when nothing works at all and there are some indications to what is wrong. Here, a fix would be to set group readable permissions somewhere where those files are created, instead of relying on UMASK (or perhaps set/improve UMASK at the start of Sage to be what is necessary). I am also curious why these files are treated differently than those created with explicit show command...



---

archive/issue_comments_242227.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@jdemeyer](#comment%3A20):\n> You mean you install Sage in your unaccessible home directory? Now **that's** a configuration problem, not a Sage issue.\n\nBut every new distro defaults to private home directories, and you have to guess from a rather obscure error message that this is the issue.",
    "created_at": "2015-02-09T16:37:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242227",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@jdemeyer](#comment%3A20):
> You mean you install Sage in your unaccessible home directory? Now **that's** a configuration problem, not a Sage issue.

But every new distro defaults to private home directories, and you have to guess from a rather obscure error message that this is the issue.



---

archive/issue_comments_242228.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,3 @@\n-The following got broken between Sage 6.4.beta4 and 6.4.\n-\n Start a notebook server with\n \n ```\n@@ -11,8 +9,14 @@\n plot(sin(x))\n ```\n \n-No plot is shown, but the following error appears in the Sage session:\n+In **Sage 6.4.beta4**, this works as it should.\n+\n+In **Sage 6.4.beta6**, this returns `None` and does not show the plot.\n+\n+In **Sage 6.4** and later, no plot is shown and the following error appears in the Sage session:\n \n ```\n 2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'\n ```\n+\n+With \n``````\n",
    "created_at": "2015-02-09T16:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242228",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,3 @@
-The following got broken between Sage 6.4.beta4 and 6.4.
-
 Start a notebook server with
 
 ```
@@ -11,8 +9,14 @@
 plot(sin(x))
 ```
 
-No plot is shown, but the following error appears in the Sage session:
+In **Sage 6.4.beta4**, this works as it should.
+
+In **Sage 6.4.beta6**, this returns `None` and does not show the plot.
+
+In **Sage 6.4** and later, no plot is shown and the following error appears in the Sage session:
 
 ```
 2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'
 ```
+
+With 
``````




---

archive/issue_comments_242229.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@vbraun](#comment%3A22):\n> But every new distro defaults to private home directories, and you have to guess from a rather obscure error message that this is the issue.\n\nIn any case, that's also not what this ticket is about.",
    "created_at": "2015-02-09T16:38:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242229",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@vbraun](#comment%3A22):
> But every new distro defaults to private home directories, and you have to guess from a rather obscure error message that this is the issue.

In any case, that's also not what this ticket is about.



---

archive/issue_comments_242230.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,5 +18,3 @@\n ```\n 2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'\n ```\n-\n-With \n``````\n",
    "created_at": "2015-02-09T16:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242230",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,5 +18,3 @@
 ```
 2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'
 ```
-
-With 
``````




---

archive/issue_comments_242231.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n+The following got broken between Sage 6.4.beta4 and 6.4.\n+\n Start a notebook server with\n \n ```\n@@ -9,11 +11,7 @@\n plot(sin(x))\n ```\n \n-In **Sage 6.4.beta4**, this works as it should.\n-\n-In **Sage 6.4.beta6**, this returns `None` and does not show the plot.\n-\n-In **Sage 6.4** and later, no plot is shown and the following error appears in the Sage session:\n+No plot is shown, but the following error appears in the Sage session:\n \n ```\n 2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'\n``````\n",
    "created_at": "2015-02-09T16:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242231",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
+The following got broken between Sage 6.4.beta4 and 6.4.
+
 Start a notebook server with
 
 ```
@@ -9,11 +11,7 @@
 plot(sin(x))
 ```
 
-In **Sage 6.4.beta4**, this works as it should.
-
-In **Sage 6.4.beta6**, this returns `None` and does not show the plot.
-
-In **Sage 6.4** and later, no plot is shown and the following error appears in the Sage session:
+No plot is shown, but the following error appears in the Sage session:
 
 ```
 2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'
``````




---

archive/issue_comments_242232.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nAlso, temporary files **should** be private, so I tend to see it as an improvement ;-)\n\nI guess its time for yet another place to weaken security for sagenb wrapped in a if EMBEDDED_MODE...",
    "created_at": "2015-02-09T16:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242232",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">Comment 26</div>

Also, temporary files **should** be private, so I tend to see it as an improvement ;-)

I guess its time for yet another place to weaken security for sagenb wrapped in a if EMBEDDED_MODE...



---

archive/issue_comments_242233.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,3 @@\n-The following got broken between Sage 6.4.beta4 and 6.4.\n-\n Start a notebook server with\n \n ```\n@@ -11,7 +9,11 @@\n plot(sin(x))\n ```\n \n-No plot is shown, but the following error appears in the Sage session:\n+In **Sage 6.4.beta4**, this works as it should.\n+\n+In **Sage 6.4.beta6**, this returns `None` and does not show the plot.\n+\n+In **Sage 6.4** and later, no plot is shown and the following error appears in the Sage session:\n \n ```\n 2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'\n``````\n",
    "created_at": "2015-02-09T17:37:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242233",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,3 @@
-The following got broken between Sage 6.4.beta4 and 6.4.
-
 Start a notebook server with
 
 ```
@@ -11,7 +9,11 @@
 plot(sin(x))
 ```
 
-No plot is shown, but the following error appears in the Sage session:
+In **Sage 6.4.beta4**, this works as it should.
+
+In **Sage 6.4.beta6**, this returns `None` and does not show the plot.
+
+In **Sage 6.4** and later, no plot is shown and the following error appears in the Sage session:
 
 ```
 2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'
``````




---

archive/issue_comments_242234.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,7 +13,7 @@\n \n In **Sage 6.4.beta6**, this returns `None` and does not show the plot.\n \n-In **Sage 6.4** and later, no plot is shown and the following error appears in the Sage session:\n+In **Sage 6.4.rc0** and later, no plot is shown and the following error appears in the Sage session:\n \n ```\n 2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'\n``````\n",
    "created_at": "2015-02-09T18:26:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242234",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,7 +13,7 @@
 
 In **Sage 6.4.beta6**, this returns `None` and does not show the plot.
 
-In **Sage 6.4** and later, no plot is shown and the following error appears in the Sage session:
+In **Sage 6.4.rc0** and later, no plot is shown and the following error appears in the Sage session:
 
 ```
 2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'
``````




---

archive/issue_comments_242235.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,7 +9,7 @@\n plot(sin(x))\n ```\n \n-In **Sage 6.4.beta4**, this works as it should.\n+In **Sage 6.4.beta5**, this works as it should.\n \n In **Sage 6.4.beta6**, this returns `None` and does not show the plot.\n \n``````\n",
    "created_at": "2015-02-09T19:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242235",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,7 +9,7 @@
 plot(sin(x))
 ```
 
-In **Sage 6.4.beta4**, this works as it should.
+In **Sage 6.4.beta5**, this works as it should.
 
 In **Sage 6.4.beta6**, this returns `None` and does not show the plot.
 
``````




---

archive/issue_comments_242236.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nVolker, could you please reopen the ticket...",
    "created_at": "2015-02-09T19:29:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242236",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">Comment 30</div>

Volker, could you please reopen the ticket...



---

archive/issue_comments_242237.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nSee #17755 for a one-line patch.",
    "created_at": "2015-02-09T21:09:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242237",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">Comment 31</div>

See #17755 for a one-line patch.



---

archive/issue_events_235094.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-10T01:14:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/worksforme",
    "label_color": "a6a6a6",
    "label_name": "worksforme",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235094"
}
```



---

archive/issue_events_235095.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-10T01:16:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235095"
}
```



---

archive/issue_comments_242238.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nDuplicate?",
    "created_at": "2015-02-10T01:16:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242238",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:33" align="right">Comment 33</div>

Duplicate?



---

archive/issue_comments_242239.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nApparently the `server_pool` feature works by making directories on the sagenb side world-writable, so the worker (or anybody else) can write into them. And I thought making the worker files world-readable would be bad...",
    "created_at": "2015-02-10T02:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242239",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:34" align="right">Comment 34</div>

Apparently the `server_pool` feature works by making directories on the sagenb side world-writable, so the worker (or anybody else) can write into them. And I thought making the worker files world-readable would be bad...



---

archive/issue_comments_242240.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,20 +1 @@\n-Start a notebook server with\n-\n-```\n-sage: notebook(server_pool=[\"guest@localhost\"])\n-```\n-and then enter in a notebook cell\n-\n-```\n-plot(sin(x))\n-```\n-\n-In **Sage 6.4.beta5**, this works as it should.\n-\n-In **Sage 6.4.beta6**, this returns `None` and does not show the plot.\n-\n-In **Sage 6.4.rc0** and later, no plot is shown and the following error appears in the Sage session:\n-\n-```\n-2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'\n-```\n+See #17755.\n``````\n",
    "created_at": "2015-02-10T08:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242240",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,20 +1 @@
-Start a notebook server with
-
-```
-sage: notebook(server_pool=["guest@localhost"])
-```
-and then enter in a notebook cell
-
-```
-plot(sin(x))
-```
-
-In **Sage 6.4.beta5**, this works as it should.
-
-In **Sage 6.4.beta6**, this returns `None` and does not show the plot.
-
-In **Sage 6.4.rc0** and later, no plot is shown and the following error appears in the Sage session:
-
-```
-2015-02-09 10:23:17+0100 [HTTPChannel,0,127.0.0.1] Error copying file from worksheet process: [Errno 13] Permission denied: '/tmp/tmpJKDXnp/sage0.png'
-```
+See #17755.
``````




---

archive/issue_events_235096.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-10T08:55:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235096"
}
```



---

archive/issue_events_235097.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-10T08:55:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235097"
}
```



---

archive/issue_events_235098.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-10T08:55:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235098"
}
```



---

archive/issue_comments_242241.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nReplying to [@vbraun](#comment%3A34):\n> Apparently the `server_pool` feature works by making directories on the sagenb side world-writable, so the worker (or anybody else) can write into them. And I thought making the worker files world-readable would be bad... \n\nThere is some protection possible by creating all temporary directories inside a common temporary directory (set by the `SAGENB_TMPDIR` environment variable) and setting that directory with `0711` permissions.",
    "created_at": "2015-02-10T08:57:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242241",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">Comment 37</div>

Replying to [@vbraun](#comment%3A34):
> Apparently the `server_pool` feature works by making directories on the sagenb side world-writable, so the worker (or anybody else) can write into them. And I thought making the worker files world-readable would be bad... 

There is some protection possible by creating all temporary directories inside a common temporary directory (set by the `SAGENB_TMPDIR` environment variable) and setting that directory with `0711` permissions.



---

archive/issue_comments_242242.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nSagenb will set `SAGENB_TMPDIR` to 0777 on startup. Not that I would want to base my safety on the secrecy of a temp dir name anyways...",
    "created_at": "2015-02-10T11:32:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242242",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:38" align="right">Comment 38</div>

Sagenb will set `SAGENB_TMPDIR` to 0777 on startup. Not that I would want to base my safety on the secrecy of a temp dir name anyways...



---

archive/issue_events_235099.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-10T11:33:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235099"
}
```



---

archive/issue_events_235100.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-10T11:33:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235100"
}
```



---

archive/issue_events_235101.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-10T11:33:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17743#event-235101"
}
```



---

archive/issue_comments_242243.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@vbraun](#comment%3A38):\n> Not that I would want to base my safety on the secrecy of a temp dir name anyways...\n\nI agree, but it should protect against \"script kiddies\".",
    "created_at": "2015-02-10T13:02:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242243",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@vbraun](#comment%3A38):
> Not that I would want to base my safety on the secrecy of a temp dir name anyways...

I agree, but it should protect against "script kiddies".



---

archive/issue_comments_242244.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nReplying to [@vbraun](#comment%3A38):\n> Sagenb will set `SAGENB_TMPDIR` to 0777 on startup.\n\nAre you sure? I cannot reproduce this with Sage 6.5.rc1.",
    "created_at": "2015-02-10T13:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242244",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">Comment 41</div>

Replying to [@vbraun](#comment%3A38):
> Sagenb will set `SAGENB_TMPDIR` to 0777 on startup.

Are you sure? I cannot reproduce this with Sage 6.5.rc1.



---

archive/issue_comments_242245.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nAgree, doesn't change `SAGENB_TMPDIR` permissions. Misremembered that. But it does change the `DOT_SAGE/sage_notebook.sagenb/home/admin/0/data` to 0777, which even has a pretty much predictable name.",
    "created_at": "2015-02-10T22:13:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242245",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:42" align="right">Comment 42</div>

Agree, doesn't change `SAGENB_TMPDIR` permissions. Misremembered that. But it does change the `DOT_SAGE/sage_notebook.sagenb/home/admin/0/data` to 0777, which even has a pretty much predictable name.



---

archive/issue_comments_242246.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nReplying to [@vbraun](#comment%3A42):\n> Agree, doesn't change `SAGENB_TMPDIR` permissions. Misremembered that. But it does change the `DOT_SAGE/sage_notebook.sagenb/home/admin/0/data` to 0777, which even has a pretty much predictable name.\n\nOn the other hand, the permissions of `DOT_SAGE` are changed to `0700`, so that would even be pointless.",
    "created_at": "2015-02-11T10:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242246",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">Comment 43</div>

Replying to [@vbraun](#comment%3A42):
> Agree, doesn't change `SAGENB_TMPDIR` permissions. Misremembered that. But it does change the `DOT_SAGE/sage_notebook.sagenb/home/admin/0/data` to 0777, which even has a pretty much predictable name.

On the other hand, the permissions of `DOT_SAGE` are changed to `0700`, so that would even be pointless.



---

archive/issue_comments_242247.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nReplying to [@vbraun](#comment%3A42):\n> But it does change the `DOT_SAGE/sage_notebook.sagenb/home/admin/0/data` to 0777\n\nIn my `DOT_SAGE` folder, all `data` directories have permission either `0700` or `0755`...",
    "created_at": "2015-02-11T10:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242247",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:44" align="right">Comment 44</div>

Replying to [@vbraun](#comment%3A42):
> But it does change the `DOT_SAGE/sage_notebook.sagenb/home/admin/0/data` to 0777

In my `DOT_SAGE` folder, all `data` directories have permission either `0700` or `0755`...



---

archive/issue_comments_242248.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nThe permission of the data directory is changed to 0777 after the first evaluation. Its changed to 0700 if you shut down the notebook server normally.",
    "created_at": "2015-02-11T20:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17743#issuecomment-242248",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:45" align="right">Comment 45</div>

The permission of the data directory is changed to 0777 after the first evaluation. Its changed to 0700 if you shut down the notebook server normally.
