# Issue 17678: special values of Bessel functions

archive/issues_017441.json:
```json
{
    "assignees": [],
    "body": "At the moment everything Bessel is sent to mpmath and returns floating point but I<sub>n</sub>(0) and J<sub>n</sub>(0) are in (0,1). Also all I/J/K/Y<sub>n</sub>(x) with n in (-1/2,1/2) is a simple expression.\n\nFor the latter see p.10 of\nhttp://www.math.psu.edu/papikian/Kreh.pdf\n\nThis allows exact computation of series:\n\n```\nsage: bessel_I(2,x).series(x,10)\n1/8*x^2 + 1/96*x^4 + 1/3072*x^6 + 1/184320*x^8 + Order(x^10)\n```\n\n\nCC:  @fchapoton @fredrik-johansson\n\nBranch/Commit: **[`362c02d`](https://github.com/sagemath/sagetrac-mirror/commit/362c02d3d8a94a259c50d543281faadbb48631f7)**\n\nReviewer: **Karl-Dieter Crisman, Ralf Stephan, Armin Straub**\n\nAuthor: **Ralf Stephan, Armin Straub**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17678_\n\n",
    "closed_at": "2016-08-13T22:51:15Z",
    "created_at": "2015-01-27T17:14:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "special values of Bessel functions",
    "type": "issue",
    "updated_at": "2016-08-13T22:51:15Z",
    "url": "https://github.com/sagemath/sage/issues/17678",
    "user": "https://github.com/rwst"
}
```
At the moment everything Bessel is sent to mpmath and returns floating point but I<sub>n</sub>(0) and J<sub>n</sub>(0) are in (0,1). Also all I/J/K/Y<sub>n</sub>(x) with n in (-1/2,1/2) is a simple expression.

For the latter see p.10 of
http://www.math.psu.edu/papikian/Kreh.pdf

This allows exact computation of series:

```
sage: bessel_I(2,x).series(x,10)
1/8*x^2 + 1/96*x^4 + 1/3072*x^6 + 1/184320*x^8 + Order(x^10)
```


CC:  @fchapoton @fredrik-johansson

Branch/Commit: **[`362c02d`](https://github.com/sagemath/sagetrac-mirror/commit/362c02d3d8a94a259c50d543281faadbb48631f7)**

Reviewer: **Karl-Dieter Crisman, Ralf Stephan, Armin Straub**

Author: **Ralf Stephan, Armin Straub**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/17678_





---

archive/issue_events_253040.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-27T17:14:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253040"
}
```



---

archive/issue_events_253041.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-27T17:14:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253041"
}
```



---

archive/issue_events_253042.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-27T17:14:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253042"
}
```



---

archive/issue_events_253043.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-27T17:14:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253043"
}
```



---

archive/issue_comments_238545.json:
```json
{
    "body": "Branch: **[u/rws/special_values_of_bessel_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/special_values_of_bessel_functions)**",
    "created_at": "2015-01-28T08:39:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238545",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/special_values_of_bessel_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/special_values_of_bessel_functions)**



---

archive/issue_events_253044.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-01-28T08:43:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253044"
}
```



---

archive/issue_comments_238546.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2015-01-28T08:43:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238546",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_238547.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/191ca289d3c26813e0244251a983a62f2057347a\"><code>191ca28</code></a></td><td><code>17678: special values of Bessel functions</code></td></tr></table>\n",
    "created_at": "2015-01-28T08:43:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238547",
    "user": "https://github.com/rwst"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/191ca289d3c26813e0244251a983a62f2057347a"><code>191ca28</code></a></td><td><code>17678: special values of Bessel functions</code></td></tr></table>




---

archive/issue_comments_238548.json:
```json
{
    "body": "Commit: **[`191ca28`](https://github.com/sagemath/sagetrac-mirror/commit/191ca289d3c26813e0244251a983a62f2057347a)**",
    "created_at": "2015-01-28T08:43:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238548",
    "user": "https://github.com/rwst"
}
```

Commit: **[`191ca28`](https://github.com/sagemath/sagetrac-mirror/commit/191ca289d3c26813e0244251a983a62f2057347a)**



---

archive/issue_comments_238549.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,11 @@\n \n For the latter see p.10 of\n http://www.math.psu.edu/papikian/Kreh.pdf\n+\n+This allows exact computation of series:\n+\n+```\n+sage: bessel_I(2,x).series(x,10)\n+1/8*x^2 + 1/96*x^4 + 1/3072*x^6 + 1/184320*x^8 + Order(x^10)\n+```\n+\n``````\n",
    "created_at": "2015-01-28T08:43:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238549",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,11 @@
 
 For the latter see p.10 of
 http://www.math.psu.edu/papikian/Kreh.pdf
+
+This allows exact computation of series:
+
+```
+sage: bessel_I(2,x).series(x,10)
+1/8*x^2 + 1/96*x^4 + 1/3072*x^6 + 1/184320*x^8 + Order(x^10)
+```
+
``````




---

archive/issue_comments_238550.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI like the general idea of this ticket!  What happens in the following scenario\n\n```\n+        if x == 0:\n+            if n == 0:\n+                return ZZ(1)\n```\nfor \n\n```\nsage: bessel_J(0.0, 0.0)\n1\n```\nshould it instead return `1.0`? I feel like we have a lot of code in Sage doing type conversions of this kind smartly - sadly, I was not the one gifted to write it.  Maybe something like saving the parents of the input and if one is inexact then so is the output, something along those lines... we had some issues with `sin(0)` versus `sin(0.0)` even, I think; currently\n\n```\nsage: sin(0)\n0\nsage: sin(0.0)\n0.000000000000000\nsage: sin(float(0))\n0.0\nsage: sin(RDF(0))\n0.0\nsage: sin(complex(0))\n0j\n```",
    "created_at": "2015-02-03T03:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238550",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:3" align="right">comment:3</div>

I like the general idea of this ticket!  What happens in the following scenario

```
+        if x == 0:
+            if n == 0:
+                return ZZ(1)
```
for 

```
sage: bessel_J(0.0, 0.0)
1
```
should it instead return `1.0`? I feel like we have a lot of code in Sage doing type conversions of this kind smartly - sadly, I was not the one gifted to write it.  Maybe something like saving the parents of the input and if one is inexact then so is the output, something along those lines... we had some issues with `sin(0)` versus `sin(0.0)` even, I think; currently

```
sage: sin(0)
0
sage: sin(0.0)
0.000000000000000
sage: sin(float(0))
0.0
sage: sin(RDF(0))
0.0
sage: sin(complex(0))
0j
```



---

archive/issue_comments_238551.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@kcrisman](#comment:3):\n> What happens in the following scenario\n> \n> ```\n> +        if x == 0:\n> +            if n == 0:\n> +                return ZZ(1)\n> ```\n> for \n> \n> ```\n> sage: bessel_J(0.0, 0.0)\n> 1\n> ```\n> should it instead return `1.0`?\n\nIt does.\n\nIn #17130 Jeroen automatized handling of type in `BuiltinFunction`.",
    "created_at": "2015-02-03T07:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238551",
    "user": "https://github.com/rwst"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@kcrisman](#comment:3):
> What happens in the following scenario
> 
> ```
> +        if x == 0:
> +            if n == 0:
> +                return ZZ(1)
> ```
> for 
> 
> ```
> sage: bessel_J(0.0, 0.0)
> 1
> ```
> should it instead return `1.0`?

It does.

In #17130 Jeroen automatized handling of type in `BuiltinFunction`.



---

archive/issue_comments_238552.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI guess I didn't internalize that it would fix all future problems with this, very nice.",
    "created_at": "2015-02-03T13:49:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238552",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

I guess I didn't internalize that it would fix all future problems with this, very nice.



---

archive/issue_comments_238553.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThese identities are also available (or derivable) from Wikipedia and Mathworld, so we are in good shape.\n\nQuestion: [W|A claims](http://www.wolframalpha.com/input/?i=besselj%28-5%2F2%2C0%29) that one has the complex infinity, not positive infinity, for some of the negative ones like `bessel_J(-5/2, 0)` or for `bessel_I`.  I don't know what to make of that, though.  Also, does `bessel_Y` have an analogous special value for x=0, negative n?\n\nOtherwise looks good.",
    "created_at": "2015-02-03T15:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238553",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

These identities are also available (or derivable) from Wikipedia and Mathworld, so we are in good shape.

Question: [W|A claims](http://www.wolframalpha.com/input/?i=besselj%28-5%2F2%2C0%29) that one has the complex infinity, not positive infinity, for some of the negative ones like `bessel_J(-5/2, 0)` or for `bessel_I`.  I don't know what to make of that, though.  Also, does `bessel_Y` have an analogous special value for x=0, negative n?

Otherwise looks good.



---

archive/issue_comments_238554.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@kcrisman](#comment:6):\n> Question: [W|A claims](http://www.wolframalpha.com/input/?i=besselj%28-5%2F2%2C0%29) that one has the complex infinity, not positive infinity, for some of the negative ones like `bessel_J(-5/2, 0)` or for `bessel_I`.  I don't know what to make of that, though.\n\nI got those values from mpmath and just tried to post about that to the mpmath group, but not yet approved.\n> Also, does `bessel_Y` have an analogous special value for x=0, negative n?\n\nAh, I missed that. It should be easily derived from `Bessel_J` with Y<sub>n</sub>(z)=(J<sub>n</sub>(z)*cos(n*pi)-J<sub>-n</sub>(z))/sin(n*pi) (Abramowitz and Stegun 1972, p. 358).",
    "created_at": "2015-02-04T09:25:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238554",
    "user": "https://github.com/rwst"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@kcrisman](#comment:6):
> Question: [W|A claims](http://www.wolframalpha.com/input/?i=besselj%28-5%2F2%2C0%29) that one has the complex infinity, not positive infinity, for some of the negative ones like `bessel_J(-5/2, 0)` or for `bessel_I`.  I don't know what to make of that, though.

I got those values from mpmath and just tried to post about that to the mpmath group, but not yet approved.
> Also, does `bessel_Y` have an analogous special value for x=0, negative n?

Ah, I missed that. It should be easily derived from `Bessel_J` with Y<sub>n</sub>(z)=(J<sub>n</sub>(z)*cos(n*pi)-J<sub>-n</sub>(z))/sin(n*pi) (Abramowitz and Stegun 1972, p. 358).



---

archive/issue_events_253045.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-02-12T04:21:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253045"
}
```



---

archive/issue_events_253046.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-02-12T04:21:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253046"
}
```



---

archive/issue_comments_238555.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n> Ah, I missed that. It should be easily derived from\n\nYes, I figured - but should it be included?  Sorry for not being clear.\n\nDid you hear back from Fredrik/mpmath?",
    "created_at": "2015-02-12T04:21:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238555",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:8" align="right">comment:8</div>

> Ah, I missed that. It should be easily derived from

Yes, I figured - but should it be included?  Sorry for not being clear.

Did you hear back from Fredrik/mpmath?



---

archive/issue_comments_238556.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@kcrisman](#comment:8):\n> > Ah, I missed that. It should be easily derived from\n\n> Yes, I figured - but should it be included?\n\nOf course!\n> Did you hear back from Fredrik/mpmath?\n\nhttps://groups.google.com/forum/?hl=en#!topic/mpmath/FJqtBMNhYFo\nSo, IMO the mpmath behaviour fits its numerical requirements but we should use \"zoo\" because it's more symbolically correct, and because we have it.",
    "created_at": "2015-02-12T06:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238556",
    "user": "https://github.com/rwst"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@kcrisman](#comment:8):
> > Ah, I missed that. It should be easily derived from

> Yes, I figured - but should it be included?

Of course!
> Did you hear back from Fredrik/mpmath?

https://groups.google.com/forum/?hl=en#!topic/mpmath/FJqtBMNhYFo
So, IMO the mpmath behaviour fits its numerical requirements but we should use "zoo" because it's more symbolically correct, and because we have it.



---

archive/issue_comments_238557.json:
```json
{
    "body": "Changed commit from **[`191ca28`](https://github.com/sagemath/sagetrac-mirror/commit/191ca289d3c26813e0244251a983a62f2057347a)** to **[`1d27cb1`](https://github.com/sagemath/sagetrac-mirror/commit/1d27cb1e1d45289b2d27a9e7b3b49ef1cda3ba33)**",
    "created_at": "2015-02-13T17:14:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238557",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`191ca28`](https://github.com/sagemath/sagetrac-mirror/commit/191ca289d3c26813e0244251a983a62f2057347a)** to **[`1d27cb1`](https://github.com/sagemath/sagetrac-mirror/commit/1d27cb1e1d45289b2d27a9e7b3b49ef1cda3ba33)**



---

archive/issue_comments_238558.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c729ed95c372d36a27052d843b2fc045ffbf635a\"><code>c729ed9</code></a></td><td><code>Merge branch 'develop' into t/17678/special_values_of_bessel_functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d27cb1e1d45289b2d27a9e7b3b49ef1cda3ba33\"><code>1d27cb1</code></a></td><td><code>17678: return unsigned_infinity as special value; additions and fixes</code></td></tr></table>\n",
    "created_at": "2015-02-13T17:14:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238558",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c729ed95c372d36a27052d843b2fc045ffbf635a"><code>c729ed9</code></a></td><td><code>Merge branch 'develop' into t/17678/special_values_of_bessel_functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d27cb1e1d45289b2d27a9e7b3b49ef1cda3ba33"><code>1d27cb1</code></a></td><td><code>17678: return unsigned_infinity as special value; additions and fixes</code></td></tr></table>




---

archive/issue_comments_238559.json:
```json
{
    "body": "Dependencies: **#17777**",
    "created_at": "2015-02-13T17:16:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238559",
    "user": "https://github.com/rwst"
}
```

Dependencies: **#17777**



---

archive/issue_comments_238560.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThis uncovered a bug so we depend on #17777 as soon as it is resolved.",
    "created_at": "2015-02-13T17:16:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238560",
    "user": "https://github.com/rwst"
}
```

<div id="comment:11" align="right">comment:11</div>

This uncovered a bug so we depend on #17777 as soon as it is resolved.



---

archive/issue_events_253047.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-13T17:16:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253047"
}
```



---

archive/issue_events_253048.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-13T17:16:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253048"
}
```



---

archive/issue_comments_238561.json:
```json
{
    "body": "Changed commit from **[`1d27cb1`](https://github.com/sagemath/sagetrac-mirror/commit/1d27cb1e1d45289b2d27a9e7b3b49ef1cda3ba33)** to **[`c5f9994`](https://github.com/sagemath/sagetrac-mirror/commit/c5f9994a07f76ece8a7b3ae2ed2a7df9fdcbbce6)**",
    "created_at": "2015-02-14T08:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238561",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1d27cb1`](https://github.com/sagemath/sagetrac-mirror/commit/1d27cb1e1d45289b2d27a9e7b3b49ef1cda3ba33)** to **[`c5f9994`](https://github.com/sagemath/sagetrac-mirror/commit/c5f9994a07f76ece8a7b3ae2ed2a7df9fdcbbce6)**



---

archive/issue_comments_238562.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17d1aa13d11212f2c1e0b1485c7dc094c20fae0c\"><code>17d1aa1</code></a></td><td><code>17777: coerce unsigned infinity into SR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8025cd07f9645f8b20ff43aaa9e4af6451021e47\"><code>8025cd0</code></a></td><td><code>Merge branch 'u/rws/unsigned_infinity_cannot_be_coerced_into_sr' of trac.sagemath.org:sage into t/17678/special_values_of_bessel_functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5f9994a07f76ece8a7b3ae2ed2a7df9fdcbbce6\"><code>c5f9994</code></a></td><td><code>17678: last fix</code></td></tr></table>\n",
    "created_at": "2015-02-14T08:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238562",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17d1aa13d11212f2c1e0b1485c7dc094c20fae0c"><code>17d1aa1</code></a></td><td><code>17777: coerce unsigned infinity into SR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8025cd07f9645f8b20ff43aaa9e4af6451021e47"><code>8025cd0</code></a></td><td><code>Merge branch 'u/rws/unsigned_infinity_cannot_be_coerced_into_sr' of trac.sagemath.org:sage into t/17678/special_values_of_bessel_functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5f9994a07f76ece8a7b3ae2ed2a7df9fdcbbce6"><code>c5f9994</code></a></td><td><code>17678: last fix</code></td></tr></table>




---

archive/issue_events_253049.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-26T09:37:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253049"
}
```



---

archive/issue_events_253050.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-26T09:37:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253050"
}
```



---

archive/issue_comments_238563.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThere is a doctest fail in french_book that is not from #17777.",
    "created_at": "2015-02-26T09:37:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238563",
    "user": "https://github.com/rwst"
}
```

<div id="comment:13" align="right">comment:13</div>

There is a doctest fail in french_book that is not from #17777.



---

archive/issue_comments_238564.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd4373e5ba0cfc6c01495f3c041d8cb694bc8e42\"><code>dd4373e</code></a></td><td><code>Merge branch 'develop' into t/17678/special_values_of_bessel_functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f395febb5403aa304409d4bda4247b7de8e013f1\"><code>f395feb</code></a></td><td><code>Merge branch 'develop' into t/17678/special_values_of_bessel_functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d05dd2364323ad1caf0119eeb545943a41df357\"><code>0d05dd2</code></a></td><td><code>Merge branch 'develop' into t/17777/unsigned_infinity_cannot_be_coerced_into_sr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3330a2f639fa0e9231d938bfb0a151bb436b641c\"><code>3330a2f</code></a></td><td><code>Merge branch 'develop' into t/17777/unsigned_infinity_cannot_be_coerced_into_sr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5609e513405ba231b522ff68d8f88fe9cf0caeff\"><code>5609e51</code></a></td><td><code>17777: fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e0216ed99cac5bda2172b91270aab9afa830f67\"><code>9e0216e</code></a></td><td><code>Merge branch 'u/rws/unsigned_infinity_cannot_be_coerced_into_sr' of trac.sagemath.org:sage into t/17678/special_values_of_bessel_functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/882731883aa71630c6915cae75eafbc4777ec078\"><code>8827318</code></a></td><td><code>17678: doctest fixes</code></td></tr></table>\n",
    "created_at": "2015-03-05T07:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238564",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd4373e5ba0cfc6c01495f3c041d8cb694bc8e42"><code>dd4373e</code></a></td><td><code>Merge branch 'develop' into t/17678/special_values_of_bessel_functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f395febb5403aa304409d4bda4247b7de8e013f1"><code>f395feb</code></a></td><td><code>Merge branch 'develop' into t/17678/special_values_of_bessel_functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d05dd2364323ad1caf0119eeb545943a41df357"><code>0d05dd2</code></a></td><td><code>Merge branch 'develop' into t/17777/unsigned_infinity_cannot_be_coerced_into_sr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3330a2f639fa0e9231d938bfb0a151bb436b641c"><code>3330a2f</code></a></td><td><code>Merge branch 'develop' into t/17777/unsigned_infinity_cannot_be_coerced_into_sr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5609e513405ba231b522ff68d8f88fe9cf0caeff"><code>5609e51</code></a></td><td><code>17777: fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e0216ed99cac5bda2172b91270aab9afa830f67"><code>9e0216e</code></a></td><td><code>Merge branch 'u/rws/unsigned_infinity_cannot_be_coerced_into_sr' of trac.sagemath.org:sage into t/17678/special_values_of_bessel_functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/882731883aa71630c6915cae75eafbc4777ec078"><code>8827318</code></a></td><td><code>17678: doctest fixes</code></td></tr></table>




---

archive/issue_comments_238565.json:
```json
{
    "body": "Changed commit from **[`c5f9994`](https://github.com/sagemath/sagetrac-mirror/commit/c5f9994a07f76ece8a7b3ae2ed2a7df9fdcbbce6)** to **[`8827318`](https://github.com/sagemath/sagetrac-mirror/commit/882731883aa71630c6915cae75eafbc4777ec078)**",
    "created_at": "2015-03-05T07:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238565",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c5f9994`](https://github.com/sagemath/sagetrac-mirror/commit/c5f9994a07f76ece8a7b3ae2ed2a7df9fdcbbce6)** to **[`8827318`](https://github.com/sagemath/sagetrac-mirror/commit/882731883aa71630c6915cae75eafbc4777ec078)**



---

archive/issue_comments_238566.json:
```json
{
    "body": "Changed branch from **[u/rws/special_values_of_bessel_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/special_values_of_bessel_functions)** to **[u/rws/17678](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17678)**",
    "created_at": "2015-03-05T07:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238566",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/special_values_of_bessel_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/special_values_of_bessel_functions)** to **[u/rws/17678](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17678)**



---

archive/issue_events_253051.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-05T07:36:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253051"
}
```



---

archive/issue_events_253052.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-05T07:36:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253052"
}
```



---

archive/issue_comments_238567.json:
```json
{
    "body": "Changed commit from **[`8827318`](https://github.com/sagemath/sagetrac-mirror/commit/882731883aa71630c6915cae75eafbc4777ec078)** to **[`a215d3b`](https://github.com/sagemath/sagetrac-mirror/commit/a215d3bc25cf6a9008e9807ed71f79d663c00236)**",
    "created_at": "2015-03-05T07:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238567",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`8827318`](https://github.com/sagemath/sagetrac-mirror/commit/882731883aa71630c6915cae75eafbc4777ec078)** to **[`a215d3b`](https://github.com/sagemath/sagetrac-mirror/commit/a215d3bc25cf6a9008e9807ed71f79d663c00236)**



---

archive/issue_comments_238568.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nSquashed it all into one commit.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a215d3bc25cf6a9008e9807ed71f79d663c00236\"><code>a215d3b</code></a></td><td><code>17678: special values of Bessel functions</code></td></tr></table>\n",
    "created_at": "2015-03-05T07:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238568",
    "user": "https://github.com/rwst"
}
```

<div id="comment:16" align="right">comment:16</div>

Squashed it all into one commit.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a215d3bc25cf6a9008e9807ed71f79d663c00236"><code>a215d3b</code></a></td><td><code>17678: special values of Bessel functions</code></td></tr></table>




---

archive/issue_events_253053.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-05T07:36:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253053"
}
```



---

archive/issue_events_253054.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-05T07:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253054"
}
```



---

archive/issue_events_253055.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-05T07:36:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253055"
}
```



---

archive/issue_events_253056.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-05T07:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253056"
}
```



---

archive/issue_comments_238569.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n> > Also, does `bessel_Y` have an analogous special value for x=0, negative n?\n\n> Ah, I missed that. It should be easily derived from `Bessel_J` with Y<sub>n</sub>(z)=(J<sub>n</sub>(z)*cos(n*pi)-J<sub>-n</sub>(z))/sin(n*pi) (Abramowitz and Stegun 1972, p. 358).\n\nI didn't see anything about this in the many commits here, haven't looked at the 'squashed' one but assume it's not there either.  Otherwise this just requires (from my point of view) some testing.",
    "created_at": "2015-05-21T16:43:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238569",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:17" align="right">comment:17</div>

> > Also, does `bessel_Y` have an analogous special value for x=0, negative n?

> Ah, I missed that. It should be easily derived from `Bessel_J` with Y<sub>n</sub>(z)=(J<sub>n</sub>(z)*cos(n*pi)-J<sub>-n</sub>(z))/sin(n*pi) (Abramowitz and Stegun 1972, p. 358).

I didn't see anything about this in the many commits here, haven't looked at the 'squashed' one but assume it's not there either.  Otherwise this just requires (from my point of view) some testing.



---

archive/issue_comments_238570.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@kcrisman](#comment:17):\n> > > Also, does `bessel_Y` have an analogous special value for x=0, negative n?\n\n> > Ah, I missed that. It should be easily derived from `Bessel_J` with Y<sub>n</sub>(z)=(J<sub>n</sub>(z)*cos(n*pi)-J<sub>-n</sub>(z))/sin(n*pi) (Abramowitz and Stegun 1972, p. 358).\n\nAlso:\n\n```\nsage: bessel_J(-5./2,0.)\n+infinity\nsage: type(_)\n<type 'sage.rings.real_mpfr.RealNumber'>\n```\nI'm not sure what the \"right\" resolution is here, since MPFR may not have an unsigned infinity.\n\nPatchbot is happy and I don't expect my own last test run to go bad, so these two things are all that remains to resolve, perhaps they are even non-issues?",
    "created_at": "2015-05-21T19:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238570",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@kcrisman](#comment:17):
> > > Also, does `bessel_Y` have an analogous special value for x=0, negative n?

> > Ah, I missed that. It should be easily derived from `Bessel_J` with Y<sub>n</sub>(z)=(J<sub>n</sub>(z)*cos(n*pi)-J<sub>-n</sub>(z))/sin(n*pi) (Abramowitz and Stegun 1972, p. 358).

Also:

```
sage: bessel_J(-5./2,0.)
+infinity
sage: type(_)
<type 'sage.rings.real_mpfr.RealNumber'>
```
I'm not sure what the "right" resolution is here, since MPFR may not have an unsigned infinity.

Patchbot is happy and I don't expect my own last test run to go bad, so these two things are all that remains to resolve, perhaps they are even non-issues?



---

archive/issue_comments_238571.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2015-05-21T19:26:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238571",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_events_253057.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-05-21T19:26:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253057"
}
```



---

archive/issue_events_253058.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-05-21T19:26:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253058"
}
```



---

archive/issue_events_253059.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-05-24T15:24:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253059"
}
```



---

archive/issue_events_253060.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-05-24T15:24:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253060"
}
```



---

archive/issue_comments_238572.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@kcrisman](#comment:18):\n> \n> ```\n> sage: bessel_J(-5./2,0.)\n> +infinity\n> sage: type(_)\n> <type 'sage.rings.real_mpfr.RealNumber'>\n> ```\n> I'm not sure what the \"right\" resolution is here, since MPFR may not have an unsigned infinity.\n\nThis appears to be widespread, e.g. I just found `polylog(1.,1.)` vs. `polylog(1,1)` which is due to `zeta(1.)` vs. `zeta(1)`.",
    "created_at": "2015-05-25T16:27:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238572",
    "user": "https://github.com/rwst"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@kcrisman](#comment:18):
> 
> ```
> sage: bessel_J(-5./2,0.)
> +infinity
> sage: type(_)
> <type 'sage.rings.real_mpfr.RealNumber'>
> ```
> I'm not sure what the "right" resolution is here, since MPFR may not have an unsigned infinity.

This appears to be widespread, e.g. I just found `polylog(1.,1.)` vs. `polylog(1,1)` which is due to `zeta(1.)` vs. `zeta(1)`.



---

archive/issue_comments_238573.json:
```json
{
    "body": "Changed branch from **[u/rws/17678](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17678)** to **[u/rws/17678-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17678-1)**",
    "created_at": "2015-10-20T12:50:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238573",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/17678](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17678)** to **[u/rws/17678-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17678-1)**



---

archive/issue_comments_238574.json:
```json
{
    "body": "Changed commit from **[`a215d3b`](https://github.com/sagemath/sagetrac-mirror/commit/a215d3bc25cf6a9008e9807ed71f79d663c00236)** to **[`8267479`](https://github.com/sagemath/sagetrac-mirror/commit/8267479effcda361511e0b3c50dc2e86bbe94a54)**",
    "created_at": "2015-10-20T12:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238574",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`a215d3b`](https://github.com/sagemath/sagetrac-mirror/commit/a215d3bc25cf6a9008e9807ed71f79d663c00236)** to **[`8267479`](https://github.com/sagemath/sagetrac-mirror/commit/8267479effcda361511e0b3c50dc2e86bbe94a54)**



---

archive/issue_events_253061.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-20T12:52:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253061"
}
```



---

archive/issue_events_253062.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-20T12:52:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253062"
}
```



---

archive/issue_events_253063.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-20T12:52:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253063"
}
```



---

archive/issue_events_253064.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-20T12:52:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253064"
}
```



---

archive/issue_comments_238575.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe infinity inconsistency is handled by #19439. Please review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8267479effcda361511e0b3c50dc2e86bbe94a54\"><code>8267479</code></a></td><td><code>Merge branch 'u/rws/17678' of trac.sagemath.org:sage into tmp11</code></td></tr></table>\n",
    "created_at": "2015-10-20T12:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238575",
    "user": "https://github.com/rwst"
}
```

<div id="comment:23" align="right">comment:23</div>

The infinity inconsistency is handled by #19439. Please review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8267479effcda361511e0b3c50dc2e86bbe94a54"><code>8267479</code></a></td><td><code>Merge branch 'u/rws/17678' of trac.sagemath.org:sage into tmp11</code></td></tr></table>




---

archive/issue_comments_238576.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThanks for opening that ticket, that is fine for that issue.\n\nStill a problem here:\n\n```\nsage: bessel_Y(-3,0)\nInfinity\nsage: bessel_Y(3,0)\nInfinity\nsage: bessel_Y(3.1,0)\n-infinity\nsage: bessel_Y(3.2,0)\n-infinity\nsage: bessel_Y(-3.2,0)\n+infinity\nsage: bessel_Y(-3.3,0)\n+infinity\nsage: bessel_Y(-33/10,0)\nInfinity\n```\n\n\nExtra `var('n')`?\n\n```\n+    def _eval_(self, n, x):\n+        \"\"\"\n+        EXAMPLES::\n+\n+            sage: n = var('n')\n+            sage: bessel_Y(1, 0)\n+            Infinity\n+            sage: bessel_Y(1/2, x)\n+            -sqrt(2)*sqrt(1/(pi*x))*cos(x)\n+            sage: bessel_Y(-1/2, x)\n+            sqrt(2)*sqrt(1/(pi*x))*sin(x)\n+        \"\"\"\n```",
    "created_at": "2015-10-20T13:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238576",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

Thanks for opening that ticket, that is fine for that issue.

Still a problem here:

```
sage: bessel_Y(-3,0)
Infinity
sage: bessel_Y(3,0)
Infinity
sage: bessel_Y(3.1,0)
-infinity
sage: bessel_Y(3.2,0)
-infinity
sage: bessel_Y(-3.2,0)
+infinity
sage: bessel_Y(-3.3,0)
+infinity
sage: bessel_Y(-33/10,0)
Infinity
```


Extra `var('n')`?

```
+    def _eval_(self, n, x):
+        """
+        EXAMPLES::
+
+            sage: n = var('n')
+            sage: bessel_Y(1, 0)
+            Infinity
+            sage: bessel_Y(1/2, x)
+            -sqrt(2)*sqrt(1/(pi*x))*cos(x)
+            sage: bessel_Y(-1/2, x)
+            sqrt(2)*sqrt(1/(pi*x))*sin(x)
+        """
```



---

archive/issue_events_253065.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-06-12T08:38:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253065"
}
```



---

archive/issue_events_253066.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-06-12T08:38:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253066"
}
```



---

archive/issue_comments_238577.json:
```json
{
    "body": "Changed branch from **[u/rws/17678-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17678-1)** to **[u/arminstraub/17678-1](https://github.com/sagemath/sagetrac-mirror/tree/u/arminstraub/17678-1)**",
    "created_at": "2016-08-08T11:37:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238577",
    "user": "https://github.com/arminstraub"
}
```

Changed branch from **[u/rws/17678-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/17678-1)** to **[u/arminstraub/17678-1](https://github.com/sagemath/sagetrac-mirror/tree/u/arminstraub/17678-1)**



---

archive/issue_events_253067.json:
```json
{
    "actor": "https://github.com/arminstraub",
    "created_at": "2016-08-08T11:42:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253067"
}
```



---

archive/issue_events_253068.json:
```json
{
    "actor": "https://github.com/arminstraub",
    "created_at": "2016-08-08T11:42:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253068"
}
```



---

archive/issue_events_253069.json:
```json
{
    "actor": "https://github.com/arminstraub",
    "created_at": "2016-08-08T11:42:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253069"
}
```



---

archive/issue_events_253070.json:
```json
{
    "actor": "https://github.com/arminstraub",
    "created_at": "2016-08-08T11:42:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253070"
}
```



---

archive/issue_comments_238578.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nWe stumpled across the issue that `bessel_J(0,x).series(x,3)` didn't have the expected result during a summer school on special functions, in which I was advertising Sage.  It would be nice to report back to the students that the next version of Sage has this fixed :)\n\nThis is my first attempt at using git and I haven't used the trac server in many years, so please let me know if I messed something up or didn't follow best practices.  The branch I pushed is supposed to be a merge with the most recent version of Sage, with the following additional changes:\n\n* Removed the extra `var('n')` as noticed by Karl-Dieter.\n* In `Function_Bessel_J._eval_`, I replaced `n > 0` with `n.real() > 0`.  I also changed the behaviour to only return `unsigned_infinity` if the real part of `n` is negative.  The reason for these changes is that `bessel_J(i, 0)` should not be evaluated as `0`, as it previously was, nor should it be evaluated as infinite.  (Mathematica evaluates this value as `Indeterminate`.)\n* Likewise for `bessel_I`, for which the situation is equivalent.\n* Similarly, I changed `Function_Bessel_Y._eval_` so that indeterminate values like `bessel_Y(I,0)` are not evaluated.\n* Likewise for `bessel_K`.\n\nDoctesting the 5 involved files didn't reveal any troubles.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02cb5f5de31599a34bbf0f5d32e2d1d5061aaafb\"><code>02cb5f5</code></a></td><td><code>Merge branch 'u/rws/17678-1' of git://trac.sagemath.org/sage into test_avoid_recompilation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bdd972f6df2379729bc6caef0102974ef197a52c\"><code>bdd972f</code></a></td><td><code>17678: adjust values at 0</code></td></tr></table>\n",
    "created_at": "2016-08-08T11:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238578",
    "user": "https://github.com/arminstraub"
}
```

<div id="comment:27" align="right">comment:27</div>

We stumpled across the issue that `bessel_J(0,x).series(x,3)` didn't have the expected result during a summer school on special functions, in which I was advertising Sage.  It would be nice to report back to the students that the next version of Sage has this fixed :)

This is my first attempt at using git and I haven't used the trac server in many years, so please let me know if I messed something up or didn't follow best practices.  The branch I pushed is supposed to be a merge with the most recent version of Sage, with the following additional changes:

* Removed the extra `var('n')` as noticed by Karl-Dieter.
* In `Function_Bessel_J._eval_`, I replaced `n > 0` with `n.real() > 0`.  I also changed the behaviour to only return `unsigned_infinity` if the real part of `n` is negative.  The reason for these changes is that `bessel_J(i, 0)` should not be evaluated as `0`, as it previously was, nor should it be evaluated as infinite.  (Mathematica evaluates this value as `Indeterminate`.)
* Likewise for `bessel_I`, for which the situation is equivalent.
* Similarly, I changed `Function_Bessel_Y._eval_` so that indeterminate values like `bessel_Y(I,0)` are not evaluated.
* Likewise for `bessel_K`.

Doctesting the 5 involved files didn't reveal any troubles.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02cb5f5de31599a34bbf0f5d32e2d1d5061aaafb"><code>02cb5f5</code></a></td><td><code>Merge branch 'u/rws/17678-1' of git://trac.sagemath.org/sage into test_avoid_recompilation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bdd972f6df2379729bc6caef0102974ef197a52c"><code>bdd972f</code></a></td><td><code>17678: adjust values at 0</code></td></tr></table>




---

archive/issue_comments_238579.json:
```json
{
    "body": "Changed author from **Ralf Stephan** to **Ralf Stephan, Armin Straub**",
    "created_at": "2016-08-08T11:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238579",
    "user": "https://github.com/arminstraub"
}
```

Changed author from **Ralf Stephan** to **Ralf Stephan, Armin Straub**



---

archive/issue_comments_238580.json:
```json
{
    "body": "Changed commit from **[`8267479`](https://github.com/sagemath/sagetrac-mirror/commit/8267479effcda361511e0b3c50dc2e86bbe94a54)** to **[`bdd972f`](https://github.com/sagemath/sagetrac-mirror/commit/bdd972f6df2379729bc6caef0102974ef197a52c)**",
    "created_at": "2016-08-08T11:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238580",
    "user": "https://github.com/arminstraub"
}
```

Changed commit from **[`8267479`](https://github.com/sagemath/sagetrac-mirror/commit/8267479effcda361511e0b3c50dc2e86bbe94a54)** to **[`bdd972f`](https://github.com/sagemath/sagetrac-mirror/commit/bdd972f6df2379729bc6caef0102974ef197a52c)**



---

archive/issue_comments_238581.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@kcrisman](#comment:24):\n> Still a problem here:\n> \n> ```\n> sage: bessel_Y(-3,0)\n> Infinity\n> sage: bessel_Y(3,0)\n> Infinity\n> sage: bessel_Y(3.1,0)\n> -infinity\n> sage: bessel_Y(3.2,0)\n> -infinity\n> sage: bessel_Y(-3.2,0)\n> +infinity\n> sage: bessel_Y(-3.3,0)\n> +infinity\n> sage: bessel_Y(-33/10,0)\n> Infinity\n> ```\n\nIndeed, the behaviour for values of Bessel functions at zero is not consistent between symbolic and numeric input.  The symbolic evaluations as provided by this ticket seem appropriate to me (and, as far as I have tested, also agree with the values that Mathematica produces).\n\nOn the other hand, the numerical evaluation of Bessel functions is currently outsourced to `mpmath`.  I don't know about the conventions that `mpmath` is using when reporting the corresponding values for numeric `x` (for instance, for `bessel_Y(1/2,x) == -sqrt(2)*sqrt(1/(pi*x))*cos(x)` mpmath produces `mpmath.bessely(0.5,0) == mpf('-inf')`, which results in `bessel_Y(0.5,0) == -infinity`, which is clearly not the limiting value when x approaches zero on the imaginary axis).  To achieve perfect consistency, one could modify the `_evalf_` function to not let `mpmath` handle these cases.  This seems, however, not like an ideal solution.\n\nI would suggest that resolving this inconsistency is better suited for a different ticket (or, if desired, changing the behaviour within `mpmath` itself).",
    "created_at": "2016-08-08T11:47:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238581",
    "user": "https://github.com/arminstraub"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@kcrisman](#comment:24):
> Still a problem here:
> 
> ```
> sage: bessel_Y(-3,0)
> Infinity
> sage: bessel_Y(3,0)
> Infinity
> sage: bessel_Y(3.1,0)
> -infinity
> sage: bessel_Y(3.2,0)
> -infinity
> sage: bessel_Y(-3.2,0)
> +infinity
> sage: bessel_Y(-3.3,0)
> +infinity
> sage: bessel_Y(-33/10,0)
> Infinity
> ```

Indeed, the behaviour for values of Bessel functions at zero is not consistent between symbolic and numeric input.  The symbolic evaluations as provided by this ticket seem appropriate to me (and, as far as I have tested, also agree with the values that Mathematica produces).

On the other hand, the numerical evaluation of Bessel functions is currently outsourced to `mpmath`.  I don't know about the conventions that `mpmath` is using when reporting the corresponding values for numeric `x` (for instance, for `bessel_Y(1/2,x) == -sqrt(2)*sqrt(1/(pi*x))*cos(x)` mpmath produces `mpmath.bessely(0.5,0) == mpf('-inf')`, which results in `bessel_Y(0.5,0) == -infinity`, which is clearly not the limiting value when x approaches zero on the imaginary axis).  To achieve perfect consistency, one could modify the `_evalf_` function to not let `mpmath` handle these cases.  This seems, however, not like an ideal solution.

I would suggest that resolving this inconsistency is better suited for a different ticket (or, if desired, changing the behaviour within `mpmath` itself).



---

archive/issue_comments_238582.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nBy the way, what is the preferred approach of Sage to the following?\n\nWhen the index of the Bessel functions is a half-integer, they can be written in terms of elementary functions.  This is currently implemented for indices 1/2 and -1/2 only.  Would it be desirable to likewise implement the case of general half-integer indices?  Or, would it be better to leave, say, `bessel_J(21/2, x)` unevaluated and wait for the user to, somehow (how?), explicitly ask for a simplification?",
    "created_at": "2016-08-08T11:52:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238582",
    "user": "https://github.com/arminstraub"
}
```

<div id="comment:29" align="right">comment:29</div>

By the way, what is the preferred approach of Sage to the following?

When the index of the Bessel functions is a half-integer, they can be written in terms of elementary functions.  This is currently implemented for indices 1/2 and -1/2 only.  Would it be desirable to likewise implement the case of general half-integer indices?  Or, would it be better to leave, say, `bessel_J(21/2, x)` unevaluated and wait for the user to, somehow (how?), explicitly ask for a simplification?



---

archive/issue_comments_238583.json:
```json
{
    "body": "Changed reviewer from **Karl-Dieter Crisman** to **Karl-Dieter Crisman, Ralf Stephan**",
    "created_at": "2016-08-09T07:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238583",
    "user": "https://github.com/rwst"
}
```

Changed reviewer from **Karl-Dieter Crisman** to **Karl-Dieter Crisman, Ralf Stephan**



---

archive/issue_comments_238584.json:
```json
{
    "body": "Changed dependencies from **#17777** to none",
    "created_at": "2016-08-09T07:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238584",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **#17777** to none



---

archive/issue_comments_238585.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@arminstraub](#comment:29):\n>  It would be nice to report back to the students that the next version of Sage has this fixed :)\n\nIndeed, but the discussion focused a bit on the dependency on #17777, which I agree however does not exist, i.e. both issues are mutually independent.\n\nYour additions look fine, consider them reviewed. There is one failing doctest due to simplification in `src/sage/interfaces/maxima_lib.py`. A minor caveat is also in my previous branch, all the comparisons `n,x == 0` should rather read `n,x.is_trivial_zero()` because any nonnumerical symbolic expression will trigger the expensive proof machinery in `Expression.__nonzero__()`. So if you could please change these two minor issues you can set positive yourself. Thanks for your work.\n\n> By the way, what is the preferred approach of Sage to the following?\n> \n> When the index of the Bessel functions is a half-integer, they can be written in terms of elementary functions.  This is currently implemented for indices 1/2 and -1/2 only.  Would it be desirable to likewise implement the case of general half-integer indices?  Or, would it be better to leave, say, `bessel_J(21/2, x)` unevaluated and wait for the user to, somehow (how?), explicitly ask for a simplification?\n\nThis was not formalized up to now, the general behaviour was to give such conversions if the result is both more elementary and not very complicated. Full implementation can be done in a `Expression.expand_bessel()` function which would then, at some time later, be part of a general `rewrite()` tool (#10137). So to your question, automatic expansion yes, as long as the output doesn't exceed---say one line, and in a dedicated expand function always welcome.",
    "created_at": "2016-08-09T07:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238585",
    "user": "https://github.com/rwst"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@arminstraub](#comment:29):
>  It would be nice to report back to the students that the next version of Sage has this fixed :)

Indeed, but the discussion focused a bit on the dependency on #17777, which I agree however does not exist, i.e. both issues are mutually independent.

Your additions look fine, consider them reviewed. There is one failing doctest due to simplification in `src/sage/interfaces/maxima_lib.py`. A minor caveat is also in my previous branch, all the comparisons `n,x == 0` should rather read `n,x.is_trivial_zero()` because any nonnumerical symbolic expression will trigger the expensive proof machinery in `Expression.__nonzero__()`. So if you could please change these two minor issues you can set positive yourself. Thanks for your work.

> By the way, what is the preferred approach of Sage to the following?
> 
> When the index of the Bessel functions is a half-integer, they can be written in terms of elementary functions.  This is currently implemented for indices 1/2 and -1/2 only.  Would it be desirable to likewise implement the case of general half-integer indices?  Or, would it be better to leave, say, `bessel_J(21/2, x)` unevaluated and wait for the user to, somehow (how?), explicitly ask for a simplification?

This was not formalized up to now, the general behaviour was to give such conversions if the result is both more elementary and not very complicated. Full implementation can be done in a `Expression.expand_bessel()` function which would then, at some time later, be part of a general `rewrite()` tool (#10137). So to your question, automatic expansion yes, as long as the output doesn't exceed---say one line, and in a dedicated expand function always welcome.



---

archive/issue_comments_238586.json:
```json
{
    "body": "Changed commit from **[`bdd972f`](https://github.com/sagemath/sagetrac-mirror/commit/bdd972f6df2379729bc6caef0102974ef197a52c)** to **[`376ac2e`](https://github.com/sagemath/sagetrac-mirror/commit/376ac2e646c7d27cc2bd10f3833a8a3eeb94a818)**",
    "created_at": "2016-08-09T20:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238586",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bdd972f`](https://github.com/sagemath/sagetrac-mirror/commit/bdd972f6df2379729bc6caef0102974ef197a52c)** to **[`376ac2e`](https://github.com/sagemath/sagetrac-mirror/commit/376ac2e646c7d27cc2bd10f3833a8a3eeb94a818)**



---

archive/issue_comments_238587.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/376ac2e646c7d27cc2bd10f3833a8a3eeb94a818\"><code>376ac2e</code></a></td><td><code>17678: fixed one doctest; avoid calling maxima for testing x==0</code></td></tr></table>\n",
    "created_at": "2016-08-09T20:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238587",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/376ac2e646c7d27cc2bd10f3833a8a3eeb94a818"><code>376ac2e</code></a></td><td><code>17678: fixed one doctest; avoid calling maxima for testing x==0</code></td></tr></table>




---

archive/issue_comments_238588.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThanks for your swift and helpful feedback!\n\nI have fixed the failing doctest (the entire example needed to be replaced).\n\nYou also mentioned to use `sth.is_trivial_zero()` instead of `sth == 0`, and the reasoning makes perfect sense.  A minor trouble is that when calling, say, `sage: bessel_J(5/2, 0)`, then `x` and `n` are not expressions and so don't have the property `is_trivial_zero`.  One workaround would be to use `(isinstance(sth, Expression) and sth.is_trivial_zero()) or sth == 0` but that doesn't feel natural to me.  Another workaround would be `SR(sth).is_trivial_zero()` but that also doesn't feel right (and I couldn't find this being used in other Sage code).  After some more looking, I found that the code for hypergeometric functions uses things like `if not isinstance(z, Expression) and z == 0:` a couple of times.  For now, that's what I used also (only for `x` because the index `n` shouldn't usually be a complicated expression, and because other functions distinguish similarly).\n\nSince there was some choices to be made, I haven't set the ticket to positive review myself.  Could you please have a quick look!",
    "created_at": "2016-08-09T20:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238588",
    "user": "https://github.com/arminstraub"
}
```

<div id="comment:32" align="right">comment:32</div>

Thanks for your swift and helpful feedback!

I have fixed the failing doctest (the entire example needed to be replaced).

You also mentioned to use `sth.is_trivial_zero()` instead of `sth == 0`, and the reasoning makes perfect sense.  A minor trouble is that when calling, say, `sage: bessel_J(5/2, 0)`, then `x` and `n` are not expressions and so don't have the property `is_trivial_zero`.  One workaround would be to use `(isinstance(sth, Expression) and sth.is_trivial_zero()) or sth == 0` but that doesn't feel natural to me.  Another workaround would be `SR(sth).is_trivial_zero()` but that also doesn't feel right (and I couldn't find this being used in other Sage code).  After some more looking, I found that the code for hypergeometric functions uses things like `if not isinstance(z, Expression) and z == 0:` a couple of times.  For now, that's what I used also (only for `x` because the index `n` shouldn't usually be a complicated expression, and because other functions distinguish similarly).

Since there was some choices to be made, I haven't set the ticket to positive review myself.  Could you please have a quick look!



---

archive/issue_comments_238589.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nOn the other hand, wouldn't it be convenient to have a global function `is_trivial_zero` for the purpose of comparing with zero, without working too hard to simplify?\n\n```\ndef is_trivial_zero(x):\n    try: return x.is_trivial_zero()\n    except AttributeError: return x == 0\n```\n\nOne place for such a function could be `sage/misc/functional.py` which already contains things like `is_even` (which I used as a blueprint here).\n\nDo you think it would be a good idea to have something like that?  If so, should a ticket be opened for that?",
    "created_at": "2016-08-09T20:43:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238589",
    "user": "https://github.com/arminstraub"
}
```

<div id="comment:33" align="right">comment:33</div>

On the other hand, wouldn't it be convenient to have a global function `is_trivial_zero` for the purpose of comparing with zero, without working too hard to simplify?

```
def is_trivial_zero(x):
    try: return x.is_trivial_zero()
    except AttributeError: return x == 0
```

One place for such a function could be `sage/misc/functional.py` which already contains things like `is_even` (which I used as a blueprint here).

Do you think it would be a good idea to have something like that?  If so, should a ticket be opened for that?



---

archive/issue_comments_238590.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@arminstraub](#comment:32):\n> ... to use `(isinstance(sth, Expression) and sth.is_trivial_zero()) or sth == 0` \n\nNo, that calls `__nonzero__` after `is_trivial_zero()` returned `False`. You need `(isinstance(sth, Expression) and sth.is_trivial_zero()) or (not isinstance(sth, Expression) and sth == 0)`.\n\n> After some more looking, I found that the code for hypergeometric functions uses things like `if not isinstance(z, Expression) and z == 0:` a couple of times.  For now, that's what I used also (only for `x` because the index `n` shouldn't usually be a complicated expression, and because other functions distinguish similarly).\n\nWell that misses the `SR(0)` case and looks buggy.\n\n> On the other hand, wouldn't it be convenient to have a global function `is_trivial_zero`...\n\nTry opening a ticket, but see also #17158",
    "created_at": "2016-08-10T07:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238590",
    "user": "https://github.com/rwst"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@arminstraub](#comment:32):
> ... to use `(isinstance(sth, Expression) and sth.is_trivial_zero()) or sth == 0` 

No, that calls `__nonzero__` after `is_trivial_zero()` returned `False`. You need `(isinstance(sth, Expression) and sth.is_trivial_zero()) or (not isinstance(sth, Expression) and sth == 0)`.

> After some more looking, I found that the code for hypergeometric functions uses things like `if not isinstance(z, Expression) and z == 0:` a couple of times.  For now, that's what I used also (only for `x` because the index `n` shouldn't usually be a complicated expression, and because other functions distinguish similarly).

Well that misses the `SR(0)` case and looks buggy.

> On the other hand, wouldn't it be convenient to have a global function `is_trivial_zero`...

Try opening a ticket, but see also #17158



---

archive/issue_comments_238591.json:
```json
{
    "body": "Changed branch from **[u/arminstraub/17678-1](https://github.com/sagemath/sagetrac-mirror/tree/u/arminstraub/17678-1)** to **[public/17678](https://github.com/sagemath/sagetrac-mirror/tree/public/17678)**",
    "created_at": "2016-08-10T08:19:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238591",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/arminstraub/17678-1](https://github.com/sagemath/sagetrac-mirror/tree/u/arminstraub/17678-1)** to **[public/17678](https://github.com/sagemath/sagetrac-mirror/tree/public/17678)**



---

archive/issue_comments_238592.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\n> Well that misses the `SR(0)` case and looks buggy.\n\nNo, that actually works. What's odd is that I get now an error in `src/sage/tests/french_book/recequadiff.py` that only happens with `sage -tp`. As it is spurious I changed the test. As your work is reviewed someone still needs to look at my commit. Could you please do that and then set positive?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/362c02d3d8a94a259c50d543281faadbb48631f7\"><code>362c02d</code></a></td><td><code>17678: fix spurious doctest</code></td></tr></table>\n",
    "created_at": "2016-08-10T08:21:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238592",
    "user": "https://github.com/rwst"
}
```

<div id="comment:36" align="right">comment:36</div>

> Well that misses the `SR(0)` case and looks buggy.

No, that actually works. What's odd is that I get now an error in `src/sage/tests/french_book/recequadiff.py` that only happens with `sage -tp`. As it is spurious I changed the test. As your work is reviewed someone still needs to look at my commit. Could you please do that and then set positive?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/362c02d3d8a94a259c50d543281faadbb48631f7"><code>362c02d</code></a></td><td><code>17678: fix spurious doctest</code></td></tr></table>




---

archive/issue_comments_238593.json:
```json
{
    "body": "Changed commit from **[`376ac2e`](https://github.com/sagemath/sagetrac-mirror/commit/376ac2e646c7d27cc2bd10f3833a8a3eeb94a818)** to **[`362c02d`](https://github.com/sagemath/sagetrac-mirror/commit/362c02d3d8a94a259c50d543281faadbb48631f7)**",
    "created_at": "2016-08-10T08:21:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238593",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`376ac2e`](https://github.com/sagemath/sagetrac-mirror/commit/376ac2e646c7d27cc2bd10f3833a8a3eeb94a818)** to **[`362c02d`](https://github.com/sagemath/sagetrac-mirror/commit/362c02d3d8a94a259c50d543281faadbb48631f7)**



---

archive/issue_comments_238594.json:
```json
{
    "body": "Changed reviewer from **Karl-Dieter Crisman, Ralf Stephan** to **Karl-Dieter Crisman, Ralf Stephan, Armin Straub**",
    "created_at": "2016-08-10T11:41:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238594",
    "user": "https://github.com/arminstraub"
}
```

Changed reviewer from **Karl-Dieter Crisman, Ralf Stephan** to **Karl-Dieter Crisman, Ralf Stephan, Armin Straub**



---

archive/issue_events_253071.json:
```json
{
    "actor": "https://github.com/arminstraub",
    "created_at": "2016-08-10T11:41:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253071"
}
```



---

archive/issue_events_253072.json:
```json
{
    "actor": "https://github.com/arminstraub",
    "created_at": "2016-08-10T11:41:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253072"
}
```



---

archive/issue_comments_238595.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nLooks good! Set to positive review.\n\nReplying to [@rwst](#comment:36):\n> > Well that misses the `SR(0)` case and looks buggy.\n\n> No, that actually works.\n\nYes, I was initially worried about that, too, when following the hypergeometric implementation.\n\n> What's odd is that I get now an error in `src/sage/tests/french_book/recequadiff.py` that only happens with `sage -tp`. As it is spurious I changed the test.\n\nYour solution seems fine.  I am seeing the same spurious behavior when running the test versus running the code in a notebook.\n\n> You need `(isinstance(sth, Expression) and sth.is_trivial_zero()) or (not isinstance(sth, Expression) and sth == 0)`.\n\nOops, you are right!  Definitely not a brief and convenient substitute for `sth == 0`.  I'll open a ticket suggesting a global `is_trivial_zero` function.",
    "created_at": "2016-08-10T11:41:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238595",
    "user": "https://github.com/arminstraub"
}
```

<div id="comment:37" align="right">comment:37</div>

Looks good! Set to positive review.

Replying to [@rwst](#comment:36):
> > Well that misses the `SR(0)` case and looks buggy.

> No, that actually works.

Yes, I was initially worried about that, too, when following the hypergeometric implementation.

> What's odd is that I get now an error in `src/sage/tests/french_book/recequadiff.py` that only happens with `sage -tp`. As it is spurious I changed the test.

Your solution seems fine.  I am seeing the same spurious behavior when running the test versus running the code in a notebook.

> You need `(isinstance(sth, Expression) and sth.is_trivial_zero()) or (not isinstance(sth, Expression) and sth == 0)`.

Oops, you are right!  Definitely not a brief and convenient substitute for `sth == 0`.  I'll open a ticket suggesting a global `is_trivial_zero` function.



---

archive/issue_comments_238596.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@rwst](#comment:34):\n> > On the other hand, wouldn't it be convenient to have a global function `is_trivial_zero`...\n\n> Try opening a ticket, but see also #17158\n\nPosted as #21201.",
    "created_at": "2016-08-10T12:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238596",
    "user": "https://github.com/arminstraub"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@rwst](#comment:34):
> > On the other hand, wouldn't it be convenient to have a global function `is_trivial_zero`...

> Try opening a ticket, but see also #17158

Posted as #21201.



---

archive/issue_comments_238597.json:
```json
{
    "body": "Changed branch from **[public/17678](https://github.com/sagemath/sagetrac-mirror/tree/public/17678)** to **[`362c02d`](https://github.com/sagemath/sagetrac-mirror/commit/362c02d3d8a94a259c50d543281faadbb48631f7)**",
    "created_at": "2016-08-13T22:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17678#issuecomment-238597",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/17678](https://github.com/sagemath/sagetrac-mirror/tree/public/17678)** to **[`362c02d`](https://github.com/sagemath/sagetrac-mirror/commit/362c02d3d8a94a259c50d543281faadbb48631f7)**



---

archive/issue_events_253073.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-13T22:51:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253073"
}
```



---

archive/issue_events_253074.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6eb9a9a0ef0a0524fba742c573bbba949d2d903d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-08-13T22:51:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17678",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17678#event-253074"
}
```
