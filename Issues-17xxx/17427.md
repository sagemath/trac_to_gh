# Issue 17427: x==y while hash(x)!=hash(y) with SchemeMorphism_point_projective_field

archive/issues_017190.json:
```json
{
    "assignees": [
        "https://github.com/bhutz"
    ],
    "body": "As reported on sage-devel [1], but I do not know these objects at all.\n\nThere is also some code in the report to build such objects.\n\nNathann\n\n[1] https://groups.google.com/forum/#!topic/sage-devel/xaW-qj-79PY\n\nDepends on #17433\n\nCC:  @vbraun @bhutz\n\nBranch/Commit: **[`067e325`](https://github.com/sagemath/sagetrac-mirror/commit/067e3256e38168f98b772a7308b79021e0f8dfd8)**\n\nReviewer: **Joao Alberto de Faria**\n\nAuthor: **Ben Hutz**\n\nComponent: **algebraic geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17427_\n\n",
    "closed_at": "2015-01-23T23:40:43Z",
    "created_at": "2014-12-01T18:23:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "x==y while hash(x)!=hash(y) with SchemeMorphism_point_projective_field",
    "type": "issue",
    "updated_at": "2015-01-23T23:40:43Z",
    "url": "https://github.com/sagemath/sage/issues/17427",
    "user": "https://github.com/nathanncohen"
}
```
As reported on sage-devel [1], but I do not know these objects at all.

There is also some code in the report to build such objects.

Nathann

[1] https://groups.google.com/forum/#!topic/sage-devel/xaW-qj-79PY

Depends on #17433

CC:  @vbraun @bhutz

Branch/Commit: **[`067e325`](https://github.com/sagemath/sagetrac-mirror/commit/067e3256e38168f98b772a7308b79021e0f8dfd8)**

Reviewer: **Joao Alberto de Faria**

Author: **Ben Hutz**

Component: **algebraic geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/17427_





---

archive/issue_events_249598.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-12-01T18:23:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249598"
}
```



---

archive/issue_events_249599.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-12-01T18:23:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249599"
}
```



---

archive/issue_events_249600.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-12-01T18:23:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249600"
}
```



---

archive/issue_events_249601.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-12-01T18:24:31Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "title_is": "x==y while hash(x)!=hash(y) with SchemeMorphism_point_projective_field",
    "title_was": "x==y while hash(x)!=hash(y) with DIfferent SchemeMorphism_point_projective_field",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249601"
}
```



---

archive/issue_comments_233026.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThese are actually quite easy to build\n\n```\nP.<x,y>=ProjectiveSpace(ZZ,1)\np1=P(1,1)\np2=P(2,2)\np1==p2, hash(p1)==hash(p2)\n```\n\nAlthough, I'm not sure why this is bad.",
    "created_at": "2014-12-02T13:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233026",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:3" align="right">comment:3</div>

These are actually quite easy to build

```
P.<x,y>=ProjectiveSpace(ZZ,1)
p1=P(1,1)
p2=P(2,2)
p1==p2, hash(p1)==hash(p2)
```

Although, I'm not sure why this is bad.



---

archive/issue_comments_233027.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@bhutz](#comment:3):\n> Although, I'm not sure why this is bad.\n\nIt's against contract. It will make behaviour unpredictable if you use these objects as keys in a dictionary. Python will initially select a place in the dictionary based on some bits in the hash value, but if that spot is taken, python will test if the keys agree by testing for equality. So whether\n\n```\n{P(1,1):1, P(n,n):2}\n```\nleads to a dictionary with one or two elements will depend on the value of n. It's really hard to force hash collisions in python so the behaviour is very rare, which makes it even more dangerous.\n\nWithout`a==b` implies `hash(a)==hash(b)` a hash is useless (it's the only property a hash MUST have)",
    "created_at": "2014-12-02T16:24:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233027",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@bhutz](#comment:3):
> Although, I'm not sure why this is bad.

It's against contract. It will make behaviour unpredictable if you use these objects as keys in a dictionary. Python will initially select a place in the dictionary based on some bits in the hash value, but if that spot is taken, python will test if the keys agree by testing for equality. So whether

```
{P(1,1):1, P(n,n):2}
```
leads to a dictionary with one or two elements will depend on the value of n. It's really hard to force hash collisions in python so the behaviour is very rare, which makes it even more dangerous.

Without`a==b` implies `hash(a)==hash(b)` a hash is useless (it's the only property a hash MUST have)



---

archive/issue_comments_233028.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nNotice that the sage developers guide says the following about hash:\n\n'\u201cThe only required property is that objects which compare equal have the same hash value.\u201d This is an assumption made by the Python language, which in Sage we simply cannot make!'\n\nNow, I'm not saying that we don't want to do everything reasonable we can to make the implication work, I have to ask if maybe this is one of those cases where it is not reasonable. Sure, the ZZ example was trivial, but for rings without GCDs, there are less trivial examples:\n\n```\nR.<x>=PolynomialRing(QQ)\nK.<w>=NumberField(x^2+3)\nO=K.maximal_order()\nP.<x,y>=ProjectiveSpace(O,1)\nQ1=P([1+w,2])\nQ2=P([2,1-w])\nQ1==Q2\n```\n\nIs there a way to assign Q1 and Q2 the same hash value without searching through the list of previously made hash values for an == and then assigning the Q2 hash value to that value?",
    "created_at": "2014-12-02T17:56:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233028",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:5" align="right">comment:5</div>

Notice that the sage developers guide says the following about hash:

'“The only required property is that objects which compare equal have the same hash value.” This is an assumption made by the Python language, which in Sage we simply cannot make!'

Now, I'm not saying that we don't want to do everything reasonable we can to make the implication work, I have to ask if maybe this is one of those cases where it is not reasonable. Sure, the ZZ example was trivial, but for rings without GCDs, there are less trivial examples:

```
R.<x>=PolynomialRing(QQ)
K.<w>=NumberField(x^2+3)
O=K.maximal_order()
P.<x,y>=ProjectiveSpace(O,1)
Q1=P([1+w,2])
Q2=P([2,1-w])
Q1==Q2
```

Is there a way to assign Q1 and Q2 the same hash value without searching through the list of previously made hash values for an == and then assigning the Q2 hash value to that value?



---

archive/issue_comments_233029.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@bhutz](#comment:5):\n> Notice that the sage developers guide says the following about hash:\n> \n> '\u201cThe only required property is that objects which compare equal have the same hash value.\u201d This is an assumption made by the Python language, which in Sage we simply cannot make!'\n\nThat's just because the use of non-injective coercion maps means that equality testing in sage isn't transitive when allowing elements from multiple parents:\n\n```\nsage: 1 == GF(5)(1)\nTrue\nsage: GF(5)(1) == 6\nTrue\nsage: 1 == 6\nFalse\n```\nwhich indeed means that you shouldn't have a dictionary where you use both integers and finite field elements as keys. But at least there's an easy rule there: If you use sage objects as keys in a dict, make sure they all have the same parent, or make sure that you really know what you're doing.\n\nIf you can't even have a hash that works properly between elements of the same parent then you shouldn't make those elements hashable. The hash will be useless and it's misleading to have. This happened to p-adics, where `==` was chosen to be too permissive to be transitive (they were considered equal if their associated disks had non-empty intersection), and indeed they are slated to lose their hash (see #11895)\n\n```\nsage: 1+O(k(9)) == 1+O(k(3))\nTrue\nsage: 1+O(k(3)) == 4+O(k(9))\nTrue\nsage: 1+O(k(9)) == 4+O(k(9))\nFalse\n```\n(note it's the same issue as with ZZ and finite fields, but now inside the same parent)\n\nAs long as you're taking projective space over integral domains with a constructible field of fractions, you can just normalize a non-zero coordinate to 1 and hash that (provided the implementation of the field of fractions has an appropriate hash (fields that are a finite extension of a FoF of a PID should be OK, if implemented correctly, and Noether Normalization gives us that basically all fields we'll meet in sage are of that type)). Yes, hashing is hard :-).\n\nIf you want to take projective space over non-integral domains, I think you'll have bigger problems elsewhere.",
    "created_at": "2014-12-02T19:13:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233029",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@bhutz](#comment:5):
> Notice that the sage developers guide says the following about hash:
> 
> '“The only required property is that objects which compare equal have the same hash value.” This is an assumption made by the Python language, which in Sage we simply cannot make!'

That's just because the use of non-injective coercion maps means that equality testing in sage isn't transitive when allowing elements from multiple parents:

```
sage: 1 == GF(5)(1)
True
sage: GF(5)(1) == 6
True
sage: 1 == 6
False
```
which indeed means that you shouldn't have a dictionary where you use both integers and finite field elements as keys. But at least there's an easy rule there: If you use sage objects as keys in a dict, make sure they all have the same parent, or make sure that you really know what you're doing.

If you can't even have a hash that works properly between elements of the same parent then you shouldn't make those elements hashable. The hash will be useless and it's misleading to have. This happened to p-adics, where `==` was chosen to be too permissive to be transitive (they were considered equal if their associated disks had non-empty intersection), and indeed they are slated to lose their hash (see #11895)

```
sage: 1+O(k(9)) == 1+O(k(3))
True
sage: 1+O(k(3)) == 4+O(k(9))
True
sage: 1+O(k(9)) == 4+O(k(9))
False
```
(note it's the same issue as with ZZ and finite fields, but now inside the same parent)

As long as you're taking projective space over integral domains with a constructible field of fractions, you can just normalize a non-zero coordinate to 1 and hash that (provided the implementation of the field of fractions has an appropriate hash (fields that are a finite extension of a FoF of a PID should be OK, if implemented correctly, and Noether Normalization gives us that basically all fields we'll meet in sage are of that type)). Yes, hashing is hard :-).

If you want to take projective space over non-integral domains, I think you'll have bigger problems elsewhere.



---

archive/issue_comments_233030.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYes, I agree hashing over fields can just normalize the point before hashing. For rings with 'nice' field of fractions, it could be coerced to the FF, normalized, and then hashed. Over general rings (such as p-adics), it sounds like you are proposing making projective points unhashable (as is happening to p-adic numbers) instead of having a hash that doesn't behave like a hash.\n\nI'd have to experiment a little with that set-up to see if it causes any additional issues. For example the points defined over the ring and the fraction field with the same coordinates would then hash to the same value. At the moment those points would be != since there is not yet a coercion model for projective points and morphisms.\n\nOverall, it seems like an ok proposal to me.",
    "created_at": "2014-12-02T19:32:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233030",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:7" align="right">comment:7</div>

Yes, I agree hashing over fields can just normalize the point before hashing. For rings with 'nice' field of fractions, it could be coerced to the FF, normalized, and then hashed. Over general rings (such as p-adics), it sounds like you are proposing making projective points unhashable (as is happening to p-adic numbers) instead of having a hash that doesn't behave like a hash.

I'd have to experiment a little with that set-up to see if it causes any additional issues. For example the points defined over the ring and the fraction field with the same coordinates would then hash to the same value. At the moment those points would be != since there is not yet a coercion model for projective points and morphisms.

Overall, it seems like an ok proposal to me.



---

archive/issue_comments_233031.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@bhutz](#comment:7):\n> I'd have to experiment a little with that set-up to see if it causes any additional issues. For example the points defined over the ring and the fraction field with the same coordinates would then hash to the same value. At the moment those points would be != since there is not yet a coercion model for projective points and morphisms.\n\nEquality of hash values is never a correctness problem, only a source of performance problems. The constant function would be a legitimate hash function.",
    "created_at": "2014-12-02T20:23:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233031",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@bhutz](#comment:7):
> I'd have to experiment a little with that set-up to see if it causes any additional issues. For example the points defined over the ring and the fraction field with the same coordinates would then hash to the same value. At the moment those points would be != since there is not yet a coercion model for projective points and morphisms.

Equality of hash values is never a correctness problem, only a source of performance problems. The constant function would be a legitimate hash function.



---

archive/issue_comments_233032.json:
```json
{
    "body": "Branch: **[u/bhutz/ticket/17427](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/ticket/17427)**",
    "created_at": "2014-12-05T16:00:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233032",
    "user": "https://github.com/bhutz"
}
```

Branch: **[u/bhutz/ticket/17427](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/ticket/17427)**



---

archive/issue_events_249602.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2014-12-05T16:05:12Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "subject": "https://github.com/bhutz",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249602"
}
```



---

archive/issue_comments_233033.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nWell here is an initial version. As discussed, for rings it tries to normalize in the fraction. If its not an integral domain it returns a constant value (hash of the parent). For fields, it ensures that the point is normalized first. Please comment on possible issues or improvements.\n\nHowever, there is a doctest in elliptic curves that fails with this. My initial diagnosis is that it is uncovering a problem related to points over quotient rings. I'll fix that issue in ticket #17433 as it is a related problem.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0eebe9015c55f3f5a349a1605e3cafa070f17014\"><code>0eebe90</code></a></td><td><code>17427: improve hash for projective points</code></td></tr></table>\n",
    "created_at": "2014-12-05T16:05:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233033",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:10" align="right">comment:10</div>

Well here is an initial version. As discussed, for rings it tries to normalize in the fraction. If its not an integral domain it returns a constant value (hash of the parent). For fields, it ensures that the point is normalized first. Please comment on possible issues or improvements.

However, there is a doctest in elliptic curves that fails with this. My initial diagnosis is that it is uncovering a problem related to points over quotient rings. I'll fix that issue in ticket #17433 as it is a related problem.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0eebe9015c55f3f5a349a1605e3cafa070f17014"><code>0eebe90</code></a></td><td><code>17427: improve hash for projective points</code></td></tr></table>




---

archive/issue_comments_233034.json:
```json
{
    "body": "Commit: **[`0eebe90`](https://github.com/sagemath/sagetrac-mirror/commit/0eebe9015c55f3f5a349a1605e3cafa070f17014)**",
    "created_at": "2014-12-05T16:05:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233034",
    "user": "https://github.com/bhutz"
}
```

Commit: **[`0eebe90`](https://github.com/sagemath/sagetrac-mirror/commit/0eebe9015c55f3f5a349a1605e3cafa070f17014)**



---

archive/issue_events_249603.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2014-12-05T16:05:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249603"
}
```



---

archive/issue_comments_233035.json:
```json
{
    "body": "Changed commit from **[`0eebe90`](https://github.com/sagemath/sagetrac-mirror/commit/0eebe9015c55f3f5a349a1605e3cafa070f17014)** to **[`4d6c87e`](https://github.com/sagemath/sagetrac-mirror/commit/4d6c87e5d2ba91cb16156f0dfb266180e0af9e2f)**",
    "created_at": "2014-12-08T18:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233035",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0eebe90`](https://github.com/sagemath/sagetrac-mirror/commit/0eebe9015c55f3f5a349a1605e3cafa070f17014)** to **[`4d6c87e`](https://github.com/sagemath/sagetrac-mirror/commit/4d6c87e5d2ba91cb16156f0dfb266180e0af9e2f)**



---

archive/issue_comments_233036.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d6c87e5d2ba91cb16156f0dfb266180e0af9e2f\"><code>4d6c87e</code></a></td><td><code>17427: adjusted formatting and added comments</code></td></tr></table>\n",
    "created_at": "2014-12-08T18:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233036",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d6c87e5d2ba91cb16156f0dfb266180e0af9e2f"><code>4d6c87e</code></a></td><td><code>17427: adjusted formatting and added comments</code></td></tr></table>




---

archive/issue_comments_233037.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThere is a doctest in elliptic curves that fails until #17433 is fixed.",
    "created_at": "2014-12-08T18:57:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233037",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:12" align="right">comment:12</div>

There is a doctest in elliptic curves that fails until #17433 is fixed.



---

archive/issue_comments_233038.json:
```json
{
    "body": "Dependencies: **#17433**",
    "created_at": "2014-12-08T18:57:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233038",
    "user": "https://github.com/bhutz"
}
```

Dependencies: **#17433**



---

archive/issue_events_249604.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2014-12-08T18:57:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249604"
}
```



---

archive/issue_events_249605.json:
```json
{
    "actor": "https://github.com/sagetrac-jdefaria",
    "created_at": "2014-12-12T13:32:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249605"
}
```



---

archive/issue_events_249606.json:
```json
{
    "actor": "https://github.com/sagetrac-jdefaria",
    "created_at": "2014-12-12T13:32:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249606"
}
```



---

archive/issue_comments_233039.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nLooks good to me, setting to positive review",
    "created_at": "2014-12-12T13:32:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233039",
    "user": "https://github.com/sagetrac-jdefaria"
}
```

<div id="comment:13" align="right">comment:13</div>

Looks good to me, setting to positive review



---

archive/issue_comments_233040.json:
```json
{
    "body": "Reviewer: **Joao Alberto de Faria**",
    "created_at": "2014-12-12T13:32:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233040",
    "user": "https://github.com/sagetrac-jdefaria"
}
```

Reviewer: **Joao Alberto de Faria**



---

archive/issue_events_249607.json:
```json
{
    "actor": "https://github.com/sagetrac-jdefaria",
    "created_at": "2014-12-12T13:32:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249607"
}
```



---

archive/issue_events_249608.json:
```json
{
    "actor": "https://github.com/sagetrac-jdefaria",
    "created_at": "2014-12-12T13:32:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249608"
}
```



---

archive/issue_events_249609.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-02T15:48:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249609"
}
```



---

archive/issue_events_249610.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-02T15:48:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249610"
}
```



---

archive/issue_comments_233041.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAuthor name missing",
    "created_at": "2015-01-02T15:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233041",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:15" align="right">comment:15</div>

Author name missing



---

archive/issue_events_249611.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2015-01-02T16:08:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249611"
}
```



---

archive/issue_events_249612.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2015-01-02T16:08:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249612"
}
```



---

archive/issue_comments_233042.json:
```json
{
    "body": "Author: **Ben Hutz**",
    "created_at": "2015-01-02T16:08:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233042",
    "user": "https://github.com/bhutz"
}
```

Author: **Ben Hutz**



---

archive/issue_comments_233043.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nOn 32-bit:\n\n```\nsage -t --long src/sage/schemes/projective/projective_point.py\n**********************************************************************\nFile \"src/sage/schemes/projective/projective_point.py\", line 374, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_ring.__hash__\nFailed example:\n    hash(P([1,1]))\nExpected nothing\nGot:\n    1265304440\n**********************************************************************\nFile \"src/sage/schemes/projective/projective_point.py\", line 376, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_ring.__hash__\nFailed example:\n    hash(P.point([2,2], False))\nExpected nothing\nGot:\n    1265304440\n**********************************************************************\nFile \"src/sage/schemes/projective/projective_point.py\", line 385, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_ring.__hash__\nFailed example:\n    hash(P([1+w, 2]))\nExpected nothing\nGot:\n    -609701421\n**********************************************************************\nFile \"src/sage/schemes/projective/projective_point.py\", line 387, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_ring.__hash__\nFailed example:\n    hash(P([2, 1-w]))\nExpected nothing\nGot:\n    -609701421\n**********************************************************************\nFile \"src/sage/schemes/projective/projective_point.py\", line 393, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_ring.__hash__\nFailed example:\n    hash(P([2,5]))\nExpected nothing\nGot:\n    -479010389\n**********************************************************************\nFile \"src/sage/schemes/projective/projective_point.py\", line 1140, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_field.__hash__\nFailed example:\n    hash(P([1/2, 1]))\nExpected nothing\nGot:\n    -1741117121\n**********************************************************************\nFile \"src/sage/schemes/projective/projective_point.py\", line 1142, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_field.__hash__\nFailed example:\n    hash(P.point([1, 2], False))\nExpected nothing\nGot:\n    -1741117121\n**********************************************************************\n2 items had failures:\n   2 of   4 in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_field.__hash__\n   5 of  12 in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_ring.__hash__\n    [302 tests, 7 failures, 0.60 s]\n```",
    "created_at": "2015-01-04T10:22:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233043",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:17" align="right">comment:17</div>

On 32-bit:

```
sage -t --long src/sage/schemes/projective/projective_point.py
**********************************************************************
File "src/sage/schemes/projective/projective_point.py", line 374, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_ring.__hash__
Failed example:
    hash(P([1,1]))
Expected nothing
Got:
    1265304440
**********************************************************************
File "src/sage/schemes/projective/projective_point.py", line 376, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_ring.__hash__
Failed example:
    hash(P.point([2,2], False))
Expected nothing
Got:
    1265304440
**********************************************************************
File "src/sage/schemes/projective/projective_point.py", line 385, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_ring.__hash__
Failed example:
    hash(P([1+w, 2]))
Expected nothing
Got:
    -609701421
**********************************************************************
File "src/sage/schemes/projective/projective_point.py", line 387, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_ring.__hash__
Failed example:
    hash(P([2, 1-w]))
Expected nothing
Got:
    -609701421
**********************************************************************
File "src/sage/schemes/projective/projective_point.py", line 393, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_ring.__hash__
Failed example:
    hash(P([2,5]))
Expected nothing
Got:
    -479010389
**********************************************************************
File "src/sage/schemes/projective/projective_point.py", line 1140, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_field.__hash__
Failed example:
    hash(P([1/2, 1]))
Expected nothing
Got:
    -1741117121
**********************************************************************
File "src/sage/schemes/projective/projective_point.py", line 1142, in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_field.__hash__
Failed example:
    hash(P.point([1, 2], False))
Expected nothing
Got:
    -1741117121
**********************************************************************
2 items had failures:
   2 of   4 in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_field.__hash__
   5 of  12 in sage.schemes.projective.projective_point.SchemeMorphism_point_projective_ring.__hash__
    [302 tests, 7 failures, 0.60 s]
```



---

archive/issue_events_249613.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-04T10:22:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249613"
}
```



---

archive/issue_events_249614.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-04T10:22:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249614"
}
```



---

archive/issue_comments_233044.json:
```json
{
    "body": "Changed commit from **[`4d6c87e`](https://github.com/sagemath/sagetrac-mirror/commit/4d6c87e5d2ba91cb16156f0dfb266180e0af9e2f)** to **[`067e325`](https://github.com/sagemath/sagetrac-mirror/commit/067e3256e38168f98b772a7308b79021e0f8dfd8)**",
    "created_at": "2015-01-04T15:22:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233044",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4d6c87e`](https://github.com/sagemath/sagetrac-mirror/commit/4d6c87e5d2ba91cb16156f0dfb266180e0af9e2f)** to **[`067e325`](https://github.com/sagemath/sagetrac-mirror/commit/067e3256e38168f98b772a7308b79021e0f8dfd8)**



---

archive/issue_comments_233045.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/067e3256e38168f98b772a7308b79021e0f8dfd8\"><code>067e325</code></a></td><td><code>17427: fixed 32-bit doctests</code></td></tr></table>\n",
    "created_at": "2015-01-04T15:22:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233045",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/067e3256e38168f98b772a7308b79021e0f8dfd8"><code>067e325</code></a></td><td><code>17427: fixed 32-bit doctests</code></td></tr></table>




---

archive/issue_events_249615.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2015-01-04T15:23:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249615"
}
```



---

archive/issue_events_249616.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2015-01-04T15:23:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249616"
}
```



---

archive/issue_events_249617.json:
```json
{
    "actor": "https://github.com/sagetrac-jdefaria",
    "created_at": "2015-01-16T18:09:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249617"
}
```



---

archive/issue_events_249618.json:
```json
{
    "actor": "https://github.com/sagetrac-jdefaria",
    "created_at": "2015-01-16T18:09:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249618"
}
```



---

archive/issue_comments_233046.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nEverything looks good on my end, setting to positive review",
    "created_at": "2015-01-16T18:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233046",
    "user": "https://github.com/sagetrac-jdefaria"
}
```

<div id="comment:20" align="right">comment:20</div>

Everything looks good on my end, setting to positive review



---

archive/issue_comments_233047.json:
```json
{
    "body": "Changed branch from **[u/bhutz/ticket/17427](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/ticket/17427)** to **[`067e325`](https://github.com/sagemath/sagetrac-mirror/commit/067e3256e38168f98b772a7308b79021e0f8dfd8)**",
    "created_at": "2015-01-23T23:40:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17427#issuecomment-233047",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/bhutz/ticket/17427](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/ticket/17427)** to **[`067e325`](https://github.com/sagemath/sagetrac-mirror/commit/067e3256e38168f98b772a7308b79021e0f8dfd8)**



---

archive/issue_events_249619.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-23T23:40:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249619"
}
```



---

archive/issue_events_249620.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e020064ca91c47749ee3af9594a7c7b2007b4f38",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-01-23T23:40:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17427",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17427#event-249620"
}
```
