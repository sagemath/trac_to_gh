# Issue 17631: Auto-generate gen.pyx -- part 1

archive/issues_017394.json:
```json
{
    "body": "The files `src/sage/libs/pari/gen.pyx` and `src/sage/libs/pari/pari_instance.pyx` can be mostly auto-generated.\n\nThis first ticket introduces the infrastructure (except for documentation) and removes the manually-defined functions from `gen.pyx` and `pari_instance.pyx` only in trivial cases (function does the same thing and no documentation gets lost).\n\nFollow-up: #17860\n\nCC:  @videlec\n\nReviewer: Vincent Delecroix\n\nAuthor: Jeroen Demeyer\n\nBranch: b880274653c46f0f7ee6baa46d6d00a0eec0496a\n\nDependencies: #16997\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17631\n\n",
    "closed_at": "2015-03-19T03:17:33Z",
    "created_at": "2015-01-14T12:45:43Z",
    "labels": [
        "component: interfaces"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Auto-generate gen.pyx -- part 1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17631",
    "user": "https://github.com/jdemeyer"
}
```
The files `src/sage/libs/pari/gen.pyx` and `src/sage/libs/pari/pari_instance.pyx` can be mostly auto-generated.

This first ticket introduces the infrastructure (except for documentation) and removes the manually-defined functions from `gen.pyx` and `pari_instance.pyx` only in trivial cases (function does the same thing and no documentation gets lost).

Follow-up: #17860

CC:  @videlec

Reviewer: Vincent Delecroix

Author: Jeroen Demeyer

Branch: b880274653c46f0f7ee6baa46d6d00a0eec0496a

Dependencies: #16997

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17631





---

archive/issue_comments_300942.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#16997\"",
    "created_at": "2015-01-14T12:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300942",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#16997"



---

archive/issue_comments_300943.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/ticket/17631\"",
    "created_at": "2015-01-19T20:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300943",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/ticket/17631"



---

archive/issue_comments_300944.json:
```json
{
    "body": "Changing commit from \"\" to \"a18d97fbe8c4a469c470eac06c143fc2a2deca41\"",
    "created_at": "2015-01-20T06:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300944",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "a18d97fbe8c4a469c470eac06c143fc2a2deca41"



---

archive/issue_comments_300945.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[a18d97f](http://git.sagemath.org/sage.git/commit/?id=a18d97fbe8c4a469c470eac06c143fc2a2deca41)|`Auto-generate parts of gen.pyx and pari_instance.pyx`|",
    "created_at": "2015-01-20T06:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300945",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[a18d97f](http://git.sagemath.org/sage.git/commit/?id=a18d97fbe8c4a469c470eac06c143fc2a2deca41)|`Auto-generate parts of gen.pyx and pari_instance.pyx`|



---

archive/issue_comments_300946.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+The files `src/sage/libs/pari/gen.pyx` and `src/sage/libs/pari/pari_instance.pyx` can be mostly auto-generated.\n \n+This first ticket introduces the infrastructure (except for documentation) and removes the manually-defined functions from `gen.pyx` and `pari_instance.pyx` only in trivial cases (function does the same thing and no documentation gets lost).\n``````\n",
    "created_at": "2015-01-20T07:00:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300946",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+The files `src/sage/libs/pari/gen.pyx` and `src/sage/libs/pari/pari_instance.pyx` can be mostly auto-generated.
 
+This first ticket introduces the infrastructure (except for documentation) and removes the manually-defined functions from `gen.pyx` and `pari_instance.pyx` only in trivial cases (function does the same thing and no documentation gets lost).
``````




---

archive/issue_comments_300947.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[58af466](http://git.sagemath.org/sage.git/commit/?id=58af466e7c33917b3fdcbf45449a918a1f0df761)|`Auto-generate parts of gen.pyx and pari_instance.pyx`|",
    "created_at": "2015-01-20T13:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[58af466](http://git.sagemath.org/sage.git/commit/?id=58af466e7c33917b3fdcbf45449a918a1f0df761)|`Auto-generate parts of gen.pyx and pari_instance.pyx`|



---

archive/issue_comments_300948.json:
```json
{
    "body": "Changing commit from \"a18d97fbe8c4a469c470eac06c143fc2a2deca41\" to \"58af466e7c33917b3fdcbf45449a918a1f0df761\"",
    "created_at": "2015-01-20T13:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a18d97fbe8c4a469c470eac06c143fc2a2deca41" to "58af466e7c33917b3fdcbf45449a918a1f0df761"



---

archive/issue_comments_300949.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[ade4f75](http://git.sagemath.org/sage.git/commit/?id=ade4f7521ad77c03e9791bc3768d9a9e3a2daca4)|`Upgrade PARI to git master`|\n|[fd9074f](http://git.sagemath.org/sage.git/commit/?id=fd9074ffb0b8ddd94170bdb0ff652b0764dd9a81)|`Auto-generate parts of gen.pyx and pari_instance.pyx`|",
    "created_at": "2015-02-26T10:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300949",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[ade4f75](http://git.sagemath.org/sage.git/commit/?id=ade4f7521ad77c03e9791bc3768d9a9e3a2daca4)|`Upgrade PARI to git master`|
|[fd9074f](http://git.sagemath.org/sage.git/commit/?id=fd9074ffb0b8ddd94170bdb0ff652b0764dd9a81)|`Auto-generate parts of gen.pyx and pari_instance.pyx`|



---

archive/issue_comments_300950.json:
```json
{
    "body": "Changing commit from \"58af466e7c33917b3fdcbf45449a918a1f0df761\" to \"fd9074ffb0b8ddd94170bdb0ff652b0764dd9a81\"",
    "created_at": "2015-02-26T10:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300950",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "58af466e7c33917b3fdcbf45449a918a1f0df761" to "fd9074ffb0b8ddd94170bdb0ff652b0764dd9a81"



---

archive/issue_comments_300951.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-02-26T10:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300951",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_300952.json:
```json
{
    "body": "<a id='comment:9'></a>\nIs it on purpose that `decl.pxi` and `declinl.pxi` not automatically generated as well from 'paridecl.h'? It seems that we even have a `parisage.h` in between! Is the following in `parisage.h` still true\n\n```\n#undef coeff  /* Conflicts with NTL */\n```\n\nI made some review commits. You can cherry-pick the one you want:\n\n- commit 1 and 4 are trivial\n\n- Don't we want to keep the order of the `pari.desc` file? It would be enough to make `read_pari_desc` an iterator and avoid the `sorted` in `PariFunctionGenerator.__call__`. (see commit 3)\n\n- It is not very nice to hardcode the path of `pari.desc` since some distro might want to build with their own `pari`. The solution is not perfect but at least the pari source is only hardcoded in one place. (see commit 2)",
    "created_at": "2015-02-26T20:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300952",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
Is it on purpose that `decl.pxi` and `declinl.pxi` not automatically generated as well from 'paridecl.h'? It seems that we even have a `parisage.h` in between! Is the following in `parisage.h` still true

```
#undef coeff  /* Conflicts with NTL */
```

I made some review commits. You can cherry-pick the one you want:

- commit 1 and 4 are trivial

- Don't we want to keep the order of the `pari.desc` file? It would be enough to make `read_pari_desc` an iterator and avoid the `sorted` in `PariFunctionGenerator.__call__`. (see commit 3)

- It is not very nice to hardcode the path of `pari.desc` since some distro might want to build with their own `pari`. The solution is not perfect but at least the pari source is only hardcoded in one place. (see commit 2)



---

archive/issue_comments_300953.json:
```json
{
    "body": "<a id='comment:10'></a>\nWhere are the review commits?",
    "created_at": "2015-02-26T21:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300953",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Where are the review commits?



---

archive/issue_comments_300954.json:
```json
{
    "body": "Changing commit from \"fd9074ffb0b8ddd94170bdb0ff652b0764dd9a81\" to \"\"",
    "created_at": "2015-02-26T22:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300954",
    "user": "https://github.com/videlec"
}
```

Changing commit from "fd9074ffb0b8ddd94170bdb0ff652b0764dd9a81" to ""



---

archive/issue_comments_300955.json:
```json
{
    "body": "<a id='comment:11'></a>\nhere they are",
    "created_at": "2015-02-26T22:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300955",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'></a>
here they are



---

archive/issue_comments_300956.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/ticket/17631\" to \"u/uvdelecroix/17631\"",
    "created_at": "2015-02-26T22:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300956",
    "user": "https://github.com/videlec"
}
```

Changing branch from "u/jdemeyer/ticket/17631" to "u/uvdelecroix/17631"



---

archive/issue_comments_300957.json:
```json
{
    "body": "<a id='comment:12'></a>\nNew commits:\n|                                                                                                                                          |                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[ade4f75](http://git.sagemath.org/sage.git/commit/?id=ade4f7521ad77c03e9791bc3768d9a9e3a2daca4)|`Upgrade PARI to git master`|\n|[fd9074f](http://git.sagemath.org/sage.git/commit/?id=fd9074ffb0b8ddd94170bdb0ff652b0764dd9a81)|`Auto-generate parts of gen.pyx and pari_instance.pyx`|\n|[82a67fc](http://git.sagemath.org/sage.git/commit/?id=82a67fc5d375bc5a5a3cd182aa60940f48e79414)|`trac #17631 (reviewer commit 1): add a force argument`|\n|[8da123a](http://git.sagemath.org/sage.git/commit/?id=8da123ad8c935f26573712f34784a5b4ecebce0a)|`trac #17631 (reviewer commit 2): pari_src function`|\n|[eb5a737](http://git.sagemath.org/sage.git/commit/?id=eb5a7371a005ea4a3cc541f280f3a1631dc224c9)|`trac #17631 (reviewer commit 3): make read_pari_desc an iterator`|\n|[5123666](http://git.sagemath.org/sage.git/commit/?id=51236663e6488db63506102850bc69628a16764a)|`trac #17631 (reviewer commit 3): simpler read_decl`|",
    "created_at": "2015-02-26T22:14:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300957",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'></a>
New commits:
|                                                                                                                                          |                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[ade4f75](http://git.sagemath.org/sage.git/commit/?id=ade4f7521ad77c03e9791bc3768d9a9e3a2daca4)|`Upgrade PARI to git master`|
|[fd9074f](http://git.sagemath.org/sage.git/commit/?id=fd9074ffb0b8ddd94170bdb0ff652b0764dd9a81)|`Auto-generate parts of gen.pyx and pari_instance.pyx`|
|[82a67fc](http://git.sagemath.org/sage.git/commit/?id=82a67fc5d375bc5a5a3cd182aa60940f48e79414)|`trac #17631 (reviewer commit 1): add a force argument`|
|[8da123a](http://git.sagemath.org/sage.git/commit/?id=8da123ad8c935f26573712f34784a5b4ecebce0a)|`trac #17631 (reviewer commit 2): pari_src function`|
|[eb5a737](http://git.sagemath.org/sage.git/commit/?id=eb5a7371a005ea4a3cc541f280f3a1631dc224c9)|`trac #17631 (reviewer commit 3): make read_pari_desc an iterator`|
|[5123666](http://git.sagemath.org/sage.git/commit/?id=51236663e6488db63506102850bc69628a16764a)|`trac #17631 (reviewer commit 3): simpler read_decl`|



---

archive/issue_comments_300958.json:
```json
{
    "body": "Changing branch from \"u/uvdelecroix/17631\" to \"u/vdelecroix/17631\"",
    "created_at": "2015-02-26T22:14:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300958",
    "user": "https://github.com/videlec"
}
```

Changing branch from "u/uvdelecroix/17631" to "u/vdelecroix/17631"



---

archive/issue_comments_300959.json:
```json
{
    "body": "Changing commit from \"\" to \"51236663e6488db63506102850bc69628a16764a\"",
    "created_at": "2015-02-26T22:14:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300959",
    "user": "https://github.com/videlec"
}
```

Changing commit from "" to "51236663e6488db63506102850bc69628a16764a"



---

archive/issue_comments_300960.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [vdelecroix](#comment%3A9):\n> - Don't we want to keep the order of the `pari.desc` file? It would be enough to make `read_pari_desc` an iterator and avoid the `sorted` in `PariFunctionGenerator.__call__`. (see commit 3)\n \nI don't think the order really matters. When developing this code, I did find it nice that I could do `D[\"bnfinit\"]`. So I prefer to not make this change.\n\nI agree (modulo a few details) with the other commits.",
    "created_at": "2015-02-27T07:28:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300960",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Replying to [vdelecroix](#comment%3A9):
> - Don't we want to keep the order of the `pari.desc` file? It would be enough to make `read_pari_desc` an iterator and avoid the `sorted` in `PariFunctionGenerator.__call__`. (see commit 3)
 
I don't think the order really matters. When developing this code, I did find it nice that I could do `D["bnfinit"]`. So I prefer to not make this change.

I agree (modulo a few details) with the other commits.



---

archive/issue_comments_300961.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/17631\" to \"u/jdemeyer/17631\"",
    "created_at": "2015-02-27T09:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300961",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "u/vdelecroix/17631" to "u/jdemeyer/17631"



---

archive/issue_comments_300962.json:
```json
{
    "body": "<a id='comment:15'></a>\nNew commits:\n|                                                                                                                                          |                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[b1b29eb](http://git.sagemath.org/sage.git/commit/?id=b1b29ebb9e9b54e929cdd04dabe3693541123f0c)|`trac #17631 (reviewer commit 3): simpler read_decl`|\n|[98022fd](http://git.sagemath.org/sage.git/commit/?id=98022fd94d8483a4b7f2b19af598bc8c1d3eb1dc)|`Rename pari_src() to pari_share()`|",
    "created_at": "2015-02-27T09:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300962",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
New commits:
|                                                                                                                                          |                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[b1b29eb](http://git.sagemath.org/sage.git/commit/?id=b1b29ebb9e9b54e929cdd04dabe3693541123f0c)|`trac #17631 (reviewer commit 3): simpler read_decl`|
|[98022fd](http://git.sagemath.org/sage.git/commit/?id=98022fd94d8483a4b7f2b19af598bc8c1d3eb1dc)|`Rename pari_src() to pari_share()`|



---

archive/issue_comments_300963.json:
```json
{
    "body": "Changing commit from \"51236663e6488db63506102850bc69628a16764a\" to \"98022fd94d8483a4b7f2b19af598bc8c1d3eb1dc\"",
    "created_at": "2015-02-27T09:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300963",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "51236663e6488db63506102850bc69628a16764a" to "98022fd94d8483a4b7f2b19af598bc8c1d3eb1dc"



---

archive/issue_comments_300964.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2015-02-27T09:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300964",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_300965.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [vdelecroix](#comment%3A9):\n> Is it on purpose that `decl.pxi` and `declinl.pxi` not automatically generated as well from 'paridecl.h'?\n\nDoing that would be hard. Not impossible, but a highly non-trivial project.\n\n> It seems that we even have a `parisage.h` in between! Is the following in `parisage.h` still true\n> \n> ```\n> #undef coeff  /* Conflicts with NTL */\n> ```\n\nYes, we should leave that.",
    "created_at": "2015-02-27T16:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300965",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Replying to [vdelecroix](#comment%3A9):
> Is it on purpose that `decl.pxi` and `declinl.pxi` not automatically generated as well from 'paridecl.h'?

Doing that would be hard. Not impossible, but a highly non-trivial project.

> It seems that we even have a `parisage.h` in between! Is the following in `parisage.h` still true
> 
> ```
> #undef coeff  /* Conflicts with NTL */
> ```

Yes, we should leave that.



---

archive/issue_comments_300966.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n The files `src/sage/libs/pari/gen.pyx` and `src/sage/libs/pari/pari_instance.pyx` can be mostly auto-generated.\n \n This first ticket introduces the infrastructure (except for documentation) and removes the manually-defined functions from `gen.pyx` and `pari_instance.pyx` only in trivial cases (function does the same thing and no documentation gets lost).\n+\n+Follow-up: #17860\n``````\n",
    "created_at": "2015-03-05T09:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300966",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 The files `src/sage/libs/pari/gen.pyx` and `src/sage/libs/pari/pari_instance.pyx` can be mostly auto-generated.
 
 This first ticket introduces the infrastructure (except for documentation) and removes the manually-defined functions from `gen.pyx` and `pari_instance.pyx` only in trivial cases (function does the same thing and no documentation gets lost).
+
+Follow-up: #17860
``````




---

archive/issue_comments_300967.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[a5a6b25](http://git.sagemath.org/sage.git/commit/?id=a5a6b25ad3c322c03cec85b6c85da4fcb5508cdf)|`Merge tag '6.6.beta4' into t/17631/17631`|",
    "created_at": "2015-03-13T11:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300967",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[a5a6b25](http://git.sagemath.org/sage.git/commit/?id=a5a6b25ad3c322c03cec85b6c85da4fcb5508cdf)|`Merge tag '6.6.beta4' into t/17631/17631`|



---

archive/issue_comments_300968.json:
```json
{
    "body": "Changing commit from \"98022fd94d8483a4b7f2b19af598bc8c1d3eb1dc\" to \"a5a6b25ad3c322c03cec85b6c85da4fcb5508cdf\"",
    "created_at": "2015-03-13T11:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300968",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "98022fd94d8483a4b7f2b19af598bc8c1d3eb1dc" to "a5a6b25ad3c322c03cec85b6c85da4fcb5508cdf"



---

archive/issue_comments_300969.json:
```json
{
    "body": "<a id='comment:19'></a>\nI am a bit worried since the auto generated files do not get any doctest in them...\n\nWhat is that in `src/sage/libs/pari/pari_instance.pyx`?\n\n```\n+            #from sage.misc.superseded import deprecation\n+            #deprecation(XXXXX, 'passing -1 as PARI variable is deprecated, use None instead')\n```\n\nWhy did you keep so much methods in the `gen` class in `gen.pyx` (such as `List`, `Mat`, `sign`, `vecmin`, `vecmax`, etc)?\n\nWhere can I found the implementation and/or documentation of `pari_catch_sig_on` and co?",
    "created_at": "2015-03-14T22:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300969",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>
I am a bit worried since the auto generated files do not get any doctest in them...

What is that in `src/sage/libs/pari/pari_instance.pyx`?

```
+            #from sage.misc.superseded import deprecation
+            #deprecation(XXXXX, 'passing -1 as PARI variable is deprecated, use None instead')
```

Why did you keep so much methods in the `gen` class in `gen.pyx` (such as `List`, `Mat`, `sign`, `vecmin`, `vecmax`, etc)?

Where can I found the implementation and/or documentation of `pari_catch_sig_on` and co?



---

archive/issue_comments_300970.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-03-14T22:07:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300970",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_300971.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [vdelecroix](#comment%3A19):\n> I am a bit worried since the auto generated files do not get any doctest in them...\n\nThat's true. On the other hand, I did not *remove* any doctests either, so it's a least status quo. PARI itself has quite an extensive test suite (run if you install PARI with `SAGE_CHECK=yes` or with `./sage -i -c pari`).\n\n> What is that in `src/sage/libs/pari/pari_instance.pyx`?\n> \n> ```\n> +            #from sage.misc.superseded import deprecation\n> +            #deprecation(XXXXX, 'passing -1 as PARI variable is deprecated, use None instead')\n> ```\n\nIt's basically a reminder to myself that this really should be deprecated.\n\n> Why did you keep so much methods in the `gen` class in `gen.pyx` (such as `List`, `Mat`, `sign`, `vecmin`, `vecmax`, etc)?\n\nIn any case, I didn't want to remove any doctests. I also didn't check very carefully which methods could be removed.\n\n> Where can I found the implementation and/or documentation of `pari_catch_sig_on` and co?\n\nSee `src/sage/libs/pari/pari_err.pxi`. But `pari_catch_sig_on()` and `pari_catch_sig_off` are just `sig_on()` and `sig_off`. This used to be different before we had #14894.\n\nMost of your comments are indeed good comments, but my first priority was to get the general framework (i.e. this ticket) reviewed, we can still improve things later. I prefer to split tickets in smaller pieces, I dislike these huge tickets which do everything.",
    "created_at": "2015-03-15T08:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300971",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>
Replying to [vdelecroix](#comment%3A19):
> I am a bit worried since the auto generated files do not get any doctest in them...

That's true. On the other hand, I did not *remove* any doctests either, so it's a least status quo. PARI itself has quite an extensive test suite (run if you install PARI with `SAGE_CHECK=yes` or with `./sage -i -c pari`).

> What is that in `src/sage/libs/pari/pari_instance.pyx`?
> 
> ```
> +            #from sage.misc.superseded import deprecation
> +            #deprecation(XXXXX, 'passing -1 as PARI variable is deprecated, use None instead')
> ```

It's basically a reminder to myself that this really should be deprecated.

> Why did you keep so much methods in the `gen` class in `gen.pyx` (such as `List`, `Mat`, `sign`, `vecmin`, `vecmax`, etc)?

In any case, I didn't want to remove any doctests. I also didn't check very carefully which methods could be removed.

> Where can I found the implementation and/or documentation of `pari_catch_sig_on` and co?

See `src/sage/libs/pari/pari_err.pxi`. But `pari_catch_sig_on()` and `pari_catch_sig_off` are just `sig_on()` and `sig_off`. This used to be different before we had #14894.

Most of your comments are indeed good comments, but my first priority was to get the general framework (i.e. this ticket) reviewed, we can still improve things later. I prefer to split tickets in smaller pieces, I dislike these huge tickets which do everything.



---

archive/issue_comments_300972.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [jdemeyer](#comment%3A21):\n> Replying to [vdelecroix](#comment%3A19):\n> > What is that in `src/sage/libs/pari/pari_instance.pyx`?\n> > \n> > ```\n> > +            #from sage.misc.superseded import deprecation\n> > +            #deprecation(XXXXX, 'passing -1 as PARI variable is deprecated, use None instead')\n> > ```\n\n> It's basically a reminder to myself that this really should be deprecated.\n\nThe point is that if this ticket gets merged but not the follow-up (because you might stop doing Sage development or anything) we will end up with these two very strange lines.\n\nCould you at least start with a comment\n\n```\n+            # # we should deprecate this because XYZ.\n+            #from sage.misc.superseded import deprecation\n+            #deprecation(XXXXX, 'passing -1 as PARI variable is deprecated, use None \n```\n\n> > Why did you keep so much methods in the `gen` class in `gen.pyx` (such as `List`, `Mat`, `sign`, `vecmin`, `vecmax`, etc)?\n\n> In any case, I didn't want to remove any doctests. I also didn't check very carefully which methods could be removed.\n\nRight. Doctest are indeed important! What is your long term goal with those methods?\n\n> > Where can I found the implementation and/or documentation of `pari_catch_sig_on` and co?\n\n> See `src/sage/libs/pari/pari_err.pxi`. But `pari_catch_sig_on()` and `pari_catch_sig_off` are just `sig_on()` and `sig_off`. This used to be different before we had #14894.\n\nJust for precision: is `pari_catch_sig_on` just an equivalent to `sig_on`? If so I really do not understand why there is so much `pari_catch_sig_on` without any `pari_catch_sig_off`!\n\n> Most of your comments are indeed good comments, but my first priority was to get the general framework (i.e. this ticket) reviewed, we can still improve things later. I prefer to split tickets in smaller pieces, I dislike these huge tickets which do everything.\n\n\nBut I, as a reviewer, do not have your vision of the larger project. I just see one ticket (actually there is also the part 2 #17860).",
    "created_at": "2015-03-15T09:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300972",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'></a>
Replying to [jdemeyer](#comment%3A21):
> Replying to [vdelecroix](#comment%3A19):
> > What is that in `src/sage/libs/pari/pari_instance.pyx`?
> > 
> > ```
> > +            #from sage.misc.superseded import deprecation
> > +            #deprecation(XXXXX, 'passing -1 as PARI variable is deprecated, use None instead')
> > ```

> It's basically a reminder to myself that this really should be deprecated.

The point is that if this ticket gets merged but not the follow-up (because you might stop doing Sage development or anything) we will end up with these two very strange lines.

Could you at least start with a comment

```
+            # # we should deprecate this because XYZ.
+            #from sage.misc.superseded import deprecation
+            #deprecation(XXXXX, 'passing -1 as PARI variable is deprecated, use None 
```

> > Why did you keep so much methods in the `gen` class in `gen.pyx` (such as `List`, `Mat`, `sign`, `vecmin`, `vecmax`, etc)?

> In any case, I didn't want to remove any doctests. I also didn't check very carefully which methods could be removed.

Right. Doctest are indeed important! What is your long term goal with those methods?

> > Where can I found the implementation and/or documentation of `pari_catch_sig_on` and co?

> See `src/sage/libs/pari/pari_err.pxi`. But `pari_catch_sig_on()` and `pari_catch_sig_off` are just `sig_on()` and `sig_off`. This used to be different before we had #14894.

Just for precision: is `pari_catch_sig_on` just an equivalent to `sig_on`? If so I really do not understand why there is so much `pari_catch_sig_on` without any `pari_catch_sig_off`!

> Most of your comments are indeed good comments, but my first priority was to get the general framework (i.e. this ticket) reviewed, we can still improve things later. I prefer to split tickets in smaller pieces, I dislike these huge tickets which do everything.


But I, as a reviewer, do not have your vision of the larger project. I just see one ticket (actually there is also the part 2 #17860).



---

archive/issue_comments_300973.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [vdelecroix](#comment%3A22):\n> > > Why did you keep so much methods in the `gen` class in `gen.pyx` (such as `List`, `Mat`, `sign`, `vecmin`, `vecmax`, etc)?\n\n> > In any case, I didn't want to remove any doctests. I also didn't check very carefully which methods could be removed.\n> \n> Right. Doctest are indeed important! What is your long term goal with those methods?\n  \nIn the end, I think it's probably best to store all extra documentation and doctests in a separate file (I haven't thought about the exact mechanism). Then that extra documentation will be put together with the PARI documentation in the auto-generated file.\n\n> Just for precision: is `pari_catch_sig_on` just an equivalent to `sig_on`?\n\nYes (although you're recommended to use `pari_catch_sig_on` in PARI code in case we want to change this).\n\n> I really do not understand why there is so much `pari_catch_sig_on` without any `pari_catch_sig_off`!\n\nBecause the `new_gen()` method runs `pari_catch_sig_off()`.",
    "created_at": "2015-03-15T09:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300973",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
Replying to [vdelecroix](#comment%3A22):
> > > Why did you keep so much methods in the `gen` class in `gen.pyx` (such as `List`, `Mat`, `sign`, `vecmin`, `vecmax`, etc)?

> > In any case, I didn't want to remove any doctests. I also didn't check very carefully which methods could be removed.
> 
> Right. Doctest are indeed important! What is your long term goal with those methods?
  
In the end, I think it's probably best to store all extra documentation and doctests in a separate file (I haven't thought about the exact mechanism). Then that extra documentation will be put together with the PARI documentation in the auto-generated file.

> Just for precision: is `pari_catch_sig_on` just an equivalent to `sig_on`?

Yes (although you're recommended to use `pari_catch_sig_on` in PARI code in case we want to change this).

> I really do not understand why there is so much `pari_catch_sig_on` without any `pari_catch_sig_off`!

Because the `new_gen()` method runs `pari_catch_sig_off()`.



---

archive/issue_comments_300974.json:
```json
{
    "body": "<a id='comment:24'></a>\nAbout `vecmin` and `vecmax`: those have a pointer argument (a `&` in the prototype) which is currently not supported.",
    "created_at": "2015-03-16T20:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300974",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
About `vecmin` and `vecmax`: those have a pointer argument (a `&` in the prototype) which is currently not supported.



---

archive/issue_comments_300975.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[b880274](http://git.sagemath.org/sage.git/commit/?id=b880274653c46f0f7ee6baa46d6d00a0eec0496a)|`Remove commented deprecation`|",
    "created_at": "2015-03-16T20:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300975",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                              |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[b880274](http://git.sagemath.org/sage.git/commit/?id=b880274653c46f0f7ee6baa46d6d00a0eec0496a)|`Remove commented deprecation`|



---

archive/issue_comments_300976.json:
```json
{
    "body": "Changing commit from \"a5a6b25ad3c322c03cec85b6c85da4fcb5508cdf\" to \"b880274653c46f0f7ee6baa46d6d00a0eec0496a\"",
    "created_at": "2015-03-16T20:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300976",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a5a6b25ad3c322c03cec85b6c85da4fcb5508cdf" to "b880274653c46f0f7ee6baa46d6d00a0eec0496a"



---

archive/issue_comments_300977.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-03-16T20:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300977",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_300978.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-16T21:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300978",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_300979.json:
```json
{
    "body": "<a id='comment:27'></a>\nLet it go and use it!",
    "created_at": "2015-03-16T21:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300979",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'></a>
Let it go and use it!



---

archive/issue_comments_300980.json:
```json
{
    "body": "<a id='comment:28'></a>\nThanks for the review!",
    "created_at": "2015-03-17T08:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300980",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
Thanks for the review!



---

archive/issue_events_050508.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-19T03:17:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17631#event-50508"
}
```



---

archive/issue_comments_300981.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/17631\" to \"b880274653c46f0f7ee6baa46d6d00a0eec0496a\"",
    "created_at": "2015-03-19T03:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300981",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/17631" to "b880274653c46f0f7ee6baa46d6d00a0eec0496a"



---

archive/issue_comments_300982.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-19T03:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300982",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_300983.json:
```json
{
    "body": "<a id='comment:30'></a>\nWow, I'm a little worried about doctests.  However, this whole approach is a major step forward!  Great work!!",
    "created_at": "2015-03-21T23:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300983",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:30'></a>
Wow, I'm a little worried about doctests.  However, this whole approach is a major step forward!  Great work!!



---

archive/issue_comments_300984.json:
```json
{
    "body": "Changing commit from \"b880274653c46f0f7ee6baa46d6d00a0eec0496a\" to \"\"",
    "created_at": "2015-03-21T23:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300984",
    "user": "https://github.com/williamstein"
}
```

Changing commit from "b880274653c46f0f7ee6baa46d6d00a0eec0496a" to ""



---

archive/issue_comments_300985.json:
```json
{
    "body": "<a id='comment:31'></a>\nAbout the doctests: this ticket is about a very direct interface with upstream PARI. That interface itself is doctested.\n\nThe wrapped functions indeed lack doctests, but PARI has quite an extensive test suite (which is run by Sage when installing with `SAGE_CHECK=yes`).",
    "created_at": "2015-03-22T08:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17631#issuecomment-300985",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
About the doctests: this ticket is about a very direct interface with upstream PARI. That interface itself is doctested.

The wrapped functions indeed lack doctests, but PARI has quite an extensive test suite (which is run by Sage when installing with `SAGE_CHECK=yes`).
