# Issue 17592: rephrase "LaTeX formating" and "Writing doctests"

archive/issues_017355.json:
```json
{
    "assignees": [],
    "body": "With this, the explanations about latex formatting are a bit clearer, and we finally have a section that says what doctests should test. I may not have thought of everything.\n\nNathann\n\nDepends on #17589\n\nCC:  @kcrisman @videlec @sagetrac-tmonteil\n\nComponent: **documentation**\n\nAuthor: **Nathann Cohen**\n\nBranch/Commit: **[`dba4110`](https://github.com/sagemath/sagetrac-mirror/commit/dba41109f7fbaef35968be531494e0c387668f30)**\n\nReviewer: **John Palmieri**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17592_\n\n",
    "closed_at": "2015-01-13T01:11:32Z",
    "created_at": "2015-01-06T15:42:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20documentation",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "rephrase \"LaTeX formating\" and \"Writing doctests\"",
    "type": "issue",
    "updated_at": "2015-01-13T01:11:32Z",
    "url": "https://github.com/sagemath/sage/issues/17592",
    "user": "https://github.com/nathanncohen"
}
```
With this, the explanations about latex formatting are a bit clearer, and we finally have a section that says what doctests should test. I may not have thought of everything.

Nathann

Depends on #17589

CC:  @kcrisman @videlec @sagetrac-tmonteil

Component: **documentation**

Author: **Nathann Cohen**

Branch/Commit: **[`dba4110`](https://github.com/sagemath/sagetrac-mirror/commit/dba41109f7fbaef35968be531494e0c387668f30)**

Reviewer: **John Palmieri**

_Issue created by migration from https://trac.sagemath.org/ticket/17592_





---

archive/issue_events_248392.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-01-06T15:42:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248392"
}
```



---

archive/issue_events_248393.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-01-06T15:42:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "c: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248393"
}
```



---

archive/issue_events_248394.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-01-06T15:42:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248394"
}
```



---

archive/issue_events_248395.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-01-06T15:42:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248395"
}
```



---

archive/issue_comments_236267.json:
```json
{
    "body": "Branch: **[public/17592](https://github.com/sagemath/sagetrac-mirror/tree/public/17592)**",
    "created_at": "2015-01-06T15:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236267",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[public/17592](https://github.com/sagemath/sagetrac-mirror/tree/public/17592)**



---

archive/issue_comments_236268.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49ab0bfde612e284685535e1d9387b2a1849559e\"><code>49ab0bf</code></a></td><td><code>trac #17555: Remove the dev scripts' documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40220f712f59ca51491ad1a427f2db34e839e83b\"><code>40220f7</code></a></td><td><code>trac #17555: Some other references to the doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdc52e9d62ea0002dc7d6d32bddcf827555d5503\"><code>fdc52e9</code></a></td><td><code>trac #17555: Merged with #17534</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c37a78c3b5b1491bf4de7a5ca447364c076f09c\"><code>5c37a78</code></a></td><td><code>trac #17555: remove mention of the dev scripts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/805ea9a77031e19a2941f5d5579ddb014245b038\"><code>805ea9a</code></a></td><td><code>trac #17555: Merged with 6.5.beta5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5212473c776529dca597c2bcc38efe15cbdb14b4\"><code>5212473</code></a></td><td><code>trac #17589: Small changes in the developer's manual table of contents</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/216eb972fcb5c224243db440fa0a43c1ec85498c\"><code>216eb97</code></a></td><td><code>trac #17592: rephrase \"LaTeX formating\" and \"Writing doctests\"</code></td></tr></table>\n",
    "created_at": "2015-01-06T15:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236268",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49ab0bfde612e284685535e1d9387b2a1849559e"><code>49ab0bf</code></a></td><td><code>trac #17555: Remove the dev scripts' documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40220f712f59ca51491ad1a427f2db34e839e83b"><code>40220f7</code></a></td><td><code>trac #17555: Some other references to the doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdc52e9d62ea0002dc7d6d32bddcf827555d5503"><code>fdc52e9</code></a></td><td><code>trac #17555: Merged with #17534</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c37a78c3b5b1491bf4de7a5ca447364c076f09c"><code>5c37a78</code></a></td><td><code>trac #17555: remove mention of the dev scripts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/805ea9a77031e19a2941f5d5579ddb014245b038"><code>805ea9a</code></a></td><td><code>trac #17555: Merged with 6.5.beta5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5212473c776529dca597c2bcc38efe15cbdb14b4"><code>5212473</code></a></td><td><code>trac #17589: Small changes in the developer's manual table of contents</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/216eb972fcb5c224243db440fa0a43c1ec85498c"><code>216eb97</code></a></td><td><code>trac #17592: rephrase "LaTeX formating" and "Writing doctests"</code></td></tr></table>




---

archive/issue_comments_236269.json:
```json
{
    "body": "Commit: **[`216eb97`](https://github.com/sagemath/sagetrac-mirror/commit/216eb972fcb5c224243db440fa0a43c1ec85498c)**",
    "created_at": "2015-01-06T15:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236269",
    "user": "https://github.com/nathanncohen"
}
```

Commit: **[`216eb97`](https://github.com/sagemath/sagetrac-mirror/commit/216eb972fcb5c224243db440fa0a43c1ec85498c)**



---

archive/issue_events_248396.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-01-06T15:43:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248396"
}
```



---

archive/issue_comments_236270.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nRe your change in the `LaTeX Typesetting` section from\n\n```\nIn ReST documentation, you use backticks \\` to mark LaTeX code to be\ntypeset. In Sage docstrings, you may also use dollar signs instead.\n```\nto\n\n```\nIn ReST documentation LaTeX code is allowed, and is marked with **backticks or\ndollar signs**:\n```\nThis is not entirely accurate: in ReST documentation, you can't use dollar signs; those are only available in Sage's documentation. Maybe say \"In Sage's ReST documentation ...\"?\n\nI would also point out that `$$math expression$$` is old-fashioned and deprecated in LaTeX; `\\[math expression]\\]$` is much preferred. \n\nWhy remove the instructions about `:nowrap:`? Is the warning about it no longer accurate?",
    "created_at": "2015-01-06T16:27:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236270",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">comment:2</div>

Re your change in the `LaTeX Typesetting` section from

```
In ReST documentation, you use backticks \` to mark LaTeX code to be
typeset. In Sage docstrings, you may also use dollar signs instead.
```
to

```
In ReST documentation LaTeX code is allowed, and is marked with **backticks or
dollar signs**:
```
This is not entirely accurate: in ReST documentation, you can't use dollar signs; those are only available in Sage's documentation. Maybe say "In Sage's ReST documentation ..."?

I would also point out that `$$math expression$$` is old-fashioned and deprecated in LaTeX; `\[math expression]\]$` is much preferred. 

Why remove the instructions about `:nowrap:`? Is the warning about it no longer accurate?



---

archive/issue_comments_236271.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHello John !\n\nFirst, let me say that I have absolutely nothing against seeing this patch reviewed very soon, but it has a dependency that must be reviewed first otherwise we are sure to have conflict between the two of them. So if you have some time to review a doc ticket, could you start with #17589 ? It is very short !\n\n> This is not entirely accurate: in ReST documentation, you can't use dollar signs; those are only available in Sage's documentation. Maybe say \"In Sage's ReST documentation ...\"?\n\nI see. We may also not mention those dollar signs as we try always use backticks anyway nowadays ?...\n\n> I would also point out that `$$math expression$$` is old-fashioned and deprecated in LaTeX; `\\[math expression]\\]$` is much preferred. \n\nI never used that, but I can make the change. To me all about LaTeX is old-fashioned and deprecated. This thing cannot detect a syntax error properly.\n\n> Why remove the instructions about `:nowrap:`? Is the warning about it no longer accurate?\n\nIt just does not seem to work. I first wanted to add an illustration of this nowrap as I did for the examples above, and it had no effect. Then I looked for \":nowrap:\" in Sage's source code and found out that it was used only once.... and that it had no effect either.\n\nNathann",
    "created_at": "2015-01-06T16:33:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236271",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

Hello John !

First, let me say that I have absolutely nothing against seeing this patch reviewed very soon, but it has a dependency that must be reviewed first otherwise we are sure to have conflict between the two of them. So if you have some time to review a doc ticket, could you start with #17589 ? It is very short !

> This is not entirely accurate: in ReST documentation, you can't use dollar signs; those are only available in Sage's documentation. Maybe say "In Sage's ReST documentation ..."?

I see. We may also not mention those dollar signs as we try always use backticks anyway nowadays ?...

> I would also point out that `$$math expression$$` is old-fashioned and deprecated in LaTeX; `\[math expression]\]$` is much preferred. 

I never used that, but I can make the change. To me all about LaTeX is old-fashioned and deprecated. This thing cannot detect a syntax error properly.

> Why remove the instructions about `:nowrap:`? Is the warning about it no longer accurate?

It just does not seem to work. I first wanted to add an illustration of this nowrap as I did for the examples above, and it had no effect. Then I looked for ":nowrap:" in Sage's source code and found out that it was used only once.... and that it had no effect either.

Nathann



---

archive/issue_comments_236272.json:
```json
{
    "body": "Changed commit from **[`216eb97`](https://github.com/sagemath/sagetrac-mirror/commit/216eb972fcb5c224243db440fa0a43c1ec85498c)** to **[`467d02d`](https://github.com/sagemath/sagetrac-mirror/commit/467d02db83994ac80d4edfebfbece9c9aae2bcdc)**",
    "created_at": "2015-01-06T16:39:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236272",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`216eb97`](https://github.com/sagemath/sagetrac-mirror/commit/216eb972fcb5c224243db440fa0a43c1ec85498c)** to **[`467d02d`](https://github.com/sagemath/sagetrac-mirror/commit/467d02db83994ac80d4edfebfbece9c9aae2bcdc)**



---

archive/issue_comments_236273.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/467d02db83994ac80d4edfebfbece9c9aae2bcdc\"><code>467d02d</code></a></td><td><code>trac #17592: Review</code></td></tr></table>\n",
    "created_at": "2015-01-06T16:39:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236273",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/467d02db83994ac80d4edfebfbece9c9aae2bcdc"><code>467d02d</code></a></td><td><code>trac #17592: Review</code></td></tr></table>




---

archive/issue_comments_236274.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIf I make the change\n\n```diff\ndiff --git a/src/sage/graphs/graph_decompositions/vertex_separation.pyx b/src/sage/graphs/graph_dec\nindex d1efc0e..0ac8a56 100644\n--- a/src/sage/graphs/graph_decompositions/vertex_separation.pyx\n+++ b/src/sage/graphs/graph_decompositions/vertex_separation.pyx\n@@ -146,8 +146,6 @@ sets such that an ordering `v_1, ..., v_n` of the vertices correspond to\n **MILP formulation:**\n \n .. MATH::\n-    :nowrap:\n-\n     \\begin{alignat}{2}\n     \\text{Minimize:}\n     &z&\\\\\n```\nthen `make doc-pdf` fails for me. So I think `:nowrap:` is important for the PDF documentation.",
    "created_at": "2015-01-06T18:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236274",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

If I make the change

```diff
diff --git a/src/sage/graphs/graph_decompositions/vertex_separation.pyx b/src/sage/graphs/graph_dec
index d1efc0e..0ac8a56 100644
--- a/src/sage/graphs/graph_decompositions/vertex_separation.pyx
+++ b/src/sage/graphs/graph_decompositions/vertex_separation.pyx
@@ -146,8 +146,6 @@ sets such that an ordering `v_1, ..., v_n` of the vertices correspond to
 **MILP formulation:**
 
 .. MATH::
-    :nowrap:
-
     \begin{alignat}{2}
     \text{Minimize:}
     &z&\\
```
then `make doc-pdf` fails for me. So I think `:nowrap:` is important for the PDF documentation.



---

archive/issue_comments_236275.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSame result on my computer...\n\nHow should it be documented, though ? \"Makes no difference in the html doc but one example of our doc would not compile otherwise\" ? `:-/`\n\nNathann",
    "created_at": "2015-01-07T03:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236275",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

Same result on my computer...

How should it be documented, though ? "Makes no difference in the html doc but one example of our doc would not compile otherwise" ? `:-/`

Nathann



---

archive/issue_comments_236276.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84a8b233a6602a644eb63541d4846aa832e2d22b\"><code>84a8b23</code></a></td><td><code>trac #17592: :nowrap: again</code></td></tr></table>\n",
    "created_at": "2015-01-07T03:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236276",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84a8b233a6602a644eb63541d4846aa832e2d22b"><code>84a8b23</code></a></td><td><code>trac #17592: :nowrap: again</code></td></tr></table>




---

archive/issue_comments_236277.json:
```json
{
    "body": "Changed commit from **[`467d02d`](https://github.com/sagemath/sagetrac-mirror/commit/467d02db83994ac80d4edfebfbece9c9aae2bcdc)** to **[`84a8b23`](https://github.com/sagemath/sagetrac-mirror/commit/84a8b233a6602a644eb63541d4846aa832e2d22b)**",
    "created_at": "2015-01-07T03:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236277",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`467d02d`](https://github.com/sagemath/sagetrac-mirror/commit/467d02db83994ac80d4edfebfbece9c9aae2bcdc)** to **[`84a8b23`](https://github.com/sagemath/sagetrac-mirror/commit/84a8b233a6602a644eb63541d4846aa832e2d22b)**



---

archive/issue_comments_236278.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHere it is ! I made some further attempts at understanding the behaviour: no difference at all for html [1], but the pdf compiles.\n\nNathann\n\n[1] in particular the example currently in the manual resuts in a \"This is now plain text so I can do things like\" written in math mode",
    "created_at": "2015-01-07T03:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236278",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

Here it is ! I made some further attempts at understanding the behaviour: no difference at all for html [1], but the pdf compiles.

Nathann

[1] in particular the example currently in the manual resuts in a "This is now plain text so I can do things like" written in math mode



---

archive/issue_comments_236279.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI propose the following wording:\n\n```diff\ndiff --git a/src/doc/en/developer/coding_basics.rst b/src/doc/en/developer/coding_basics.rst\nindex abeb127..298af06 100644\n--- a/src/doc/en/developer/coding_basics.rst\n+++ b/src/doc/en/developer/coding_basics.rst\n@@ -517,7 +517,7 @@ the following are valid::\n         Return $\\sin(x)$.\n         \"\"\"\n \n-**MATH block:** It is similar to LaTeX' syntax ``\\[<math expression>\\]`` (or\n+**MATH block:** This is similar to the LaTeX syntax ``\\[<math expression>\\]`` (or\n ``$$<math expression>$$``). For instance::\n \n     .. MATH::\n@@ -548,8 +548,12 @@ The **aligned** environment works as it does in LaTeX::\n      g(x) & = x^x - f(x - 2)\n     \\end{aligned}\n \n-For **non-math** LaTeX environments (like ``align``), the pdf documentation\n-will not compile unless you add a **:nowrap:** flag to the MATH mode::\n+When building the PDF documentation, everything is translated to LaTeX\n+and each MATH block is automatically wrapped in a math environment --\n+in particular, it is turned into ``\\begin{gather} expression\n+\\end{gather}``.  So if you want to use a LaTeX environment (like\n+``align``) which in ordinary LaTeX would not be wrapped like this, you\n+must add a **:nowrap:** flag to the MATH mode::\n \n     .. MATH::\n        :nowrap:\n```\nI can commit this to the branch if you want, or I can try to review more and see if there are other changes I want to make first, so we don't have as many commits.",
    "created_at": "2015-01-07T05:16:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236279",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

I propose the following wording:

```diff
diff --git a/src/doc/en/developer/coding_basics.rst b/src/doc/en/developer/coding_basics.rst
index abeb127..298af06 100644
--- a/src/doc/en/developer/coding_basics.rst
+++ b/src/doc/en/developer/coding_basics.rst
@@ -517,7 +517,7 @@ the following are valid::
         Return $\sin(x)$.
         """
 
-**MATH block:** It is similar to LaTeX' syntax ``\[<math expression>\]`` (or
+**MATH block:** This is similar to the LaTeX syntax ``\[<math expression>\]`` (or
 ``$$<math expression>$$``). For instance::
 
     .. MATH::
@@ -548,8 +548,12 @@ The **aligned** environment works as it does in LaTeX::
      g(x) & = x^x - f(x - 2)
     \end{aligned}
 
-For **non-math** LaTeX environments (like ``align``), the pdf documentation
-will not compile unless you add a **:nowrap:** flag to the MATH mode::
+When building the PDF documentation, everything is translated to LaTeX
+and each MATH block is automatically wrapped in a math environment --
+in particular, it is turned into ``\begin{gather} expression
+\end{gather}``.  So if you want to use a LaTeX environment (like
+``align``) which in ordinary LaTeX would not be wrapped like this, you
+must add a **:nowrap:** flag to the MATH mode::
 
     .. MATH::
        :nowrap:
```
I can commit this to the branch if you want, or I can try to review more and see if there are other changes I want to make first, so we don't have as many commits.



---

archive/issue_comments_236280.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHello John !\n\nNo problem for your first modification. As for the second, I had dropped on purpose the explanation about 'wrapping' as it made no sense that it applied only to pdf and not to html. ALso, I did not want to go in such depth about something which is very very very marginally useful to us (one instance in all of Sage's code!) and really seems to be a bug more than anything else. What would you think of only keeping your second sentence ? Something like:\n\n```diff\n+ When building the PDF documentation, a LaTeX environment \n+ which should not appear in math mode (e.g. ``align``) may\n+ become a problem. In order to use them, you will have to \n+ add a `:nowrap:` flag::\n```\n\nWhile I prefer a short sentence like that, I will be okay with whatever you decide on this respect. My only aim is to make it easy to read and to use, and I often worry about not dragging people into reading things that are of no interest to them (which explains the bold words I add everywhere).\n\nIf you can take the time to do a full review of this branch this will probably make my life easier; fixing everything at once is much less work.\n\nThanks,\n\nNathann",
    "created_at": "2015-01-07T05:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236280",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

Hello John !

No problem for your first modification. As for the second, I had dropped on purpose the explanation about 'wrapping' as it made no sense that it applied only to pdf and not to html. ALso, I did not want to go in such depth about something which is very very very marginally useful to us (one instance in all of Sage's code!) and really seems to be a bug more than anything else. What would you think of only keeping your second sentence ? Something like:

```diff
+ When building the PDF documentation, a LaTeX environment 
+ which should not appear in math mode (e.g. ``align``) may
+ become a problem. In order to use them, you will have to 
+ add a `:nowrap:` flag::
```

While I prefer a short sentence like that, I will be okay with whatever you decide on this respect. My only aim is to make it easy to read and to use, and I often worry about not dragging people into reading things that are of no interest to them (which explains the bold words I add everywhere).

If you can take the time to do a full review of this branch this will probably make my life easier; fixing everything at once is much less work.

Thanks,

Nathann



---

archive/issue_comments_236281.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI think I would prefer to leave more detail: some users will be familiar with LaTeX and will want to know what's going on, and some will wonder about the \"nowrap\" name. An extra sentence seems okay in this case, but several paragraphs about it would definitely be overkill.",
    "created_at": "2015-01-07T06:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236281",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

I think I would prefer to leave more detail: some users will be familiar with LaTeX and will want to know what's going on, and some will wonder about the "nowrap" name. An extra sentence seems okay in this case, but several paragraphs about it would definitely be overkill.



---

archive/issue_comments_236282.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n> I think I would prefer to leave more detail: some users will be familiar with LaTeX and will want to know what's going on, and some will wonder about the \"nowrap\" name. An extra sentence seems okay in this case, but several paragraphs about it would definitely be overkill.\n\nOkay. We can also add a link toward the original Sphinx documentation if you believe that it might interest some readers: http://sphinx-doc.org/latest/ext/math.html?highlight=nowrap#directive-math\n\nNathann",
    "created_at": "2015-01-07T06:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236282",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:12" align="right">comment:12</div>

> I think I would prefer to leave more detail: some users will be familiar with LaTeX and will want to know what's going on, and some will wonder about the "nowrap" name. An extra sentence seems okay in this case, but several paragraphs about it would definitely be overkill.

Okay. We can also add a link toward the original Sphinx documentation if you believe that it might interest some readers: http://sphinx-doc.org/latest/ext/math.html?highlight=nowrap#directive-math

Nathann



---

archive/issue_comments_236283.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI'm in the middle of reviewing this. You say \"Random of systematic tests\". Should I change \"of\" to \"or\", delete \"of\" altogether, or make some other change? What did you intend?",
    "created_at": "2015-01-09T21:30:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236283",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:13" align="right">comment:13</div>

I'm in the middle of reviewing this. You say "Random of systematic tests". Should I change "of" to "or", delete "of" altogether, or make some other change? What did you intend?



---

archive/issue_comments_236284.json:
```json
{
    "body": "Changed commit from **[`84a8b23`](https://github.com/sagemath/sagetrac-mirror/commit/84a8b233a6602a644eb63541d4846aa832e2d22b)** to **[`e40fe19`](https://github.com/sagemath/sagetrac-mirror/commit/e40fe19cf613d6f64072a487371a933095b5a0da)**",
    "created_at": "2015-01-10T04:37:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236284",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`84a8b23`](https://github.com/sagemath/sagetrac-mirror/commit/84a8b233a6602a644eb63541d4846aa832e2d22b)** to **[`e40fe19`](https://github.com/sagemath/sagetrac-mirror/commit/e40fe19cf613d6f64072a487371a933095b5a0da)**



---

archive/issue_comments_236285.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e40fe19cf613d6f64072a487371a933095b5a0da\"><code>e40fe19</code></a></td><td><code>trac #17592: Typo/Rephrase</code></td></tr></table>\n",
    "created_at": "2015-01-10T04:37:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236285",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e40fe19cf613d6f64072a487371a933095b5a0da"><code>e40fe19</code></a></td><td><code>trac #17592: Typo/Rephrase</code></td></tr></table>




---

archive/issue_comments_236286.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHello !\n\n> I'm in the middle of reviewing this. You say \"Random of systematic tests\". Should I change \"of\" to \"or\", delete \"of\" altogether, or make some other change? What did you intend?\n\nIt was a 'or', but sentence was a bit unclear so I rephrased it.\n\nWe are in the worst timezones to work on something it seems `^^;`\n\nNathann",
    "created_at": "2015-01-10T04:38:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236286",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

Hello !

> I'm in the middle of reviewing this. You say "Random of systematic tests". Should I change "of" to "or", delete "of" altogether, or make some other change? What did you intend?

It was a 'or', but sentence was a bit unclear so I rephrased it.

We are in the worst timezones to work on something it seems `^^;`

Nathann



---

archive/issue_comments_236287.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHere are some minor changes, mostly rewordings. The centered text was different from the style in the rest of the document, so I removed it.",
    "created_at": "2015-01-10T05:45:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236287",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

Here are some minor changes, mostly rewordings. The centered text was different from the style in the rest of the document, so I removed it.



---

archive/issue_comments_236288.json:
```json
{
    "body": "Changed commit from **[`e40fe19`](https://github.com/sagemath/sagetrac-mirror/commit/e40fe19cf613d6f64072a487371a933095b5a0da)** to **[`fb4a680`](https://github.com/sagemath/sagetrac-mirror/commit/fb4a68048d5acd303154311b6c58027aa63bf962)**",
    "created_at": "2015-01-10T05:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236288",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e40fe19`](https://github.com/sagemath/sagetrac-mirror/commit/e40fe19cf613d6f64072a487371a933095b5a0da)** to **[`fb4a680`](https://github.com/sagemath/sagetrac-mirror/commit/fb4a68048d5acd303154311b6c58027aa63bf962)**



---

archive/issue_comments_236289.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb4a68048d5acd303154311b6c58027aa63bf962\"><code>fb4a680</code></a></td><td><code>#17592: referee fixes</code></td></tr></table>\n",
    "created_at": "2015-01-10T05:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236289",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb4a68048d5acd303154311b6c58027aa63bf962"><code>fb4a680</code></a></td><td><code>#17592: referee fixes</code></td></tr></table>




---

archive/issue_comments_236290.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n> Here are some minor changes, mostly rewordings.\n\nOkay.\n\n> The centered text was different from the style in the rest of the document, so I removed it.\n\nHMmm... Well, that was the only way I found to split the lists, as there is already a lot of bold text in there.. Hmmm....\n\nWell, I really prefer it centered but... Well, perhaps it is not so bad `:-/`\n\nNathann",
    "created_at": "2015-01-10T05:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236290",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

> Here are some minor changes, mostly rewordings.

Okay.

> The centered text was different from the style in the rest of the document, so I removed it.

HMmm... Well, that was the only way I found to split the lists, as there is already a lot of bold text in there.. Hmmm....

Well, I really prefer it centered but... Well, perhaps it is not so bad `:-/`

Nathann



---

archive/issue_comments_236291.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nIs there anything else that you want to change in this patch, or can I switch it to `positive review` ?\n\nNathann",
    "created_at": "2015-01-10T05:59:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236291",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:19" align="right">comment:19</div>

Is there anything else that you want to change in this patch, or can I switch it to `positive review` ?

Nathann



---

archive/issue_events_248397.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-01-10T06:56:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248397"
}
```



---

archive/issue_events_248398.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-01-10T06:56:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248398"
}
```



---

archive/issue_comments_236292.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2015-01-10T06:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236292",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_236293.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI think it's ready.",
    "created_at": "2015-01-10T06:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236293",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:20" align="right">comment:20</div>

I think it's ready.



---

archive/issue_comments_236294.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThanks !\n\nNathann",
    "created_at": "2015-01-10T06:59:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236294",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

Thanks !

Nathann



---

archive/issue_comments_236295.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nConflicts, probably with #17589",
    "created_at": "2015-01-12T09:48:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236295",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">comment:22</div>

Conflicts, probably with #17589



---

archive/issue_events_248399.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-12T09:48:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248399"
}
```



---

archive/issue_events_248400.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-12T09:48:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248400"
}
```



---

archive/issue_comments_236296.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a2a4194483f2bdbd370ec441a3fc87a20a29695\"><code>6a2a419</code></a></td><td><code>#17589: trivial fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dba41109f7fbaef35968be531494e0c387668f30\"><code>dba4110</code></a></td><td><code>trac #17592: Merged with updated #17589</code></td></tr></table>\n",
    "created_at": "2015-01-12T09:55:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236296",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a2a4194483f2bdbd370ec441a3fc87a20a29695"><code>6a2a419</code></a></td><td><code>#17589: trivial fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dba41109f7fbaef35968be531494e0c387668f30"><code>dba4110</code></a></td><td><code>trac #17592: Merged with updated #17589</code></td></tr></table>




---

archive/issue_comments_236297.json:
```json
{
    "body": "Changed commit from **[`fb4a680`](https://github.com/sagemath/sagetrac-mirror/commit/fb4a68048d5acd303154311b6c58027aa63bf962)** to **[`dba4110`](https://github.com/sagemath/sagetrac-mirror/commit/dba41109f7fbaef35968be531494e0c387668f30)**",
    "created_at": "2015-01-12T09:55:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236297",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fb4a680`](https://github.com/sagemath/sagetrac-mirror/commit/fb4a68048d5acd303154311b6c58027aa63bf962)** to **[`dba4110`](https://github.com/sagemath/sagetrac-mirror/commit/dba41109f7fbaef35968be531494e0c387668f30)**



---

archive/issue_events_248401.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-01-12T09:57:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248401"
}
```



---

archive/issue_events_248402.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-01-12T09:57:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248402"
}
```



---

archive/issue_comments_236298.json:
```json
{
    "body": "Changed branch from **[public/17592](https://github.com/sagemath/sagetrac-mirror/tree/public/17592)** to **[`dba4110`](https://github.com/sagemath/sagetrac-mirror/commit/dba41109f7fbaef35968be531494e0c387668f30)**",
    "created_at": "2015-01-13T01:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17592#issuecomment-236298",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/17592](https://github.com/sagemath/sagetrac-mirror/tree/public/17592)** to **[`dba4110`](https://github.com/sagemath/sagetrac-mirror/commit/dba41109f7fbaef35968be531494e0c387668f30)**



---

archive/issue_events_248403.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-13T01:11:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248403"
}
```



---

archive/issue_events_248404.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "048b23a535dbb4ea589daf8cd589d24e1d0befab",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-01-13T01:11:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17592",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17592#event-248404"
}
```
