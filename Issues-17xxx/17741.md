# Issue 17741: Polynomial __div__ override redundant with coercion.

archive/issues_017504.json:
```json
{
    "body": "We no longer need to special case this now that #17740 is fixed.\n\n**Branch:** [public/17741](https://github.com/sagemath/sagetrac-mirror/tree/public/17741)\n\n**Commit:** [f5a59a3400508531d6d19803dc277c01e896f8d8](https://github.com/sagemath/sagetrac-mirror/commit/f5a59a3400508531d6d19803dc277c01e896f8d8)\n\n**Author:** Robert Bradshaw\n\n**Dependencies:** #17740\n\nIssue created by migration from https://trac.sagemath.org/ticket/17741\n\n",
    "created_at": "2015-02-06T18:25:07Z",
    "labels": [
        "component: coercion",
        "enhancement",
        "needs work"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Polynomial __div__ override redundant with coercion.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17741",
    "user": "https://github.com/robertwb"
}
```
We no longer need to special case this now that #17740 is fixed.

**Branch:** [public/17741](https://github.com/sagemath/sagetrac-mirror/tree/public/17741)

**Commit:** [f5a59a3400508531d6d19803dc277c01e896f8d8](https://github.com/sagemath/sagetrac-mirror/commit/f5a59a3400508531d6d19803dc277c01e896f8d8)

**Author:** Robert Bradshaw

**Dependencies:** #17740

Issue created by migration from https://trac.sagemath.org/ticket/17741





---

archive/issue_comments_243717.json:
```json
{
    "body": "**Branch:** [u/robertwb/poly-div](https://github.com/sagemath/sagetrac-mirror/tree/u/robertwb/poly-div)",
    "created_at": "2015-02-06T18:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243717",
    "user": "https://github.com/robertwb"
}
```

**Branch:** [u/robertwb/poly-div](https://github.com/sagemath/sagetrac-mirror/tree/u/robertwb/poly-div)



---

archive/issue_comments_243718.json:
```json
{
    "body": "**Commit:** [69962b6b5428e1c7935c2c6becfa639d57246dc7](https://github.com/sagemath/sagetrac-mirror/commit/69962b6b5428e1c7935c2c6becfa639d57246dc7)",
    "created_at": "2015-02-06T18:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243718",
    "user": "https://github.com/robertwb"
}
```

**Commit:** [69962b6b5428e1c7935c2c6becfa639d57246dc7](https://github.com/sagemath/sagetrac-mirror/commit/69962b6b5428e1c7935c2c6becfa639d57246dc7)



---

archive/issue_events_162442.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2015-02-06T18:26:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162442"
}
```



---

archive/issue_events_162443.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-07T15:06:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162443"
}
```



---

archive/issue_events_162444.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-07T15:06:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162444"
}
```



---

archive/issue_comments_243719.json:
```json
{
    "body": "<a id='comment:3'></a>\n(I didn't try #17740 separately.)\n\n```\nFile \"src/sage/rings/polynomial/padics/polynomial_padic.py\", line 84, in sage.rings.polynomial.padics.polynomial_padic.Polynomial_padic.factor\nFailed example:\n    for p,e in pol.factor(): print e, p\nException raised:\n    Traceback (most recent call last):\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 488, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 850, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.polynomial.padics.polynomial_padic.Polynomial_padic.factor[2]>\", line 1, in <module>\n        for p,e in pol.factor(): print e, p\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/padics/polynomial_padic.py\", line 158, in factor\n        absprec = min([x.precision_absolute() for x in self_normal])\n    TypeError: 'FractionFieldElement_1poly_field' object is not iterable\n```\n\n```\nFile \"src/sage/rings/padics/padic_generic.py\", line 465, in sage.rings.padics.padic_generic.pAdicGeneric.extension\nFailed example:\n    F = list(Qp(19)['x'](cyclotomic_polynomial(5)).factor())[0][0]\nException raised:\n    Traceback (most recent call last):\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 488, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 850, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.padics.padic_generic.pAdicGeneric.extension[3]>\", line 1, in <module>\n        F = list(Qp(Integer(19))['x'](cyclotomic_polynomial(Integer(5))).factor())[Integer(0)][Integer(0)]\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/padics/polynomial_padic.py\", line 158, in factor\n        absprec = min([x.precision_absolute() for x in self_normal])\n    TypeError: 'FractionFieldElement_1poly_field' object is not iterable\n```\n\n```\nFile \"src/sage/rings/multi_power_series_ring_element.py\", line 2024, in sage.rings.multi_power_series_ring_element.MPowerSeries.log\nFailed example:\n    log(1+a)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 488, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 850, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.multi_power_series_ring_element.MPowerSeries.log[10]>\", line 1, in <module>\n        log(Integer(1)+a)\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/functions/log.py\", line 313, in __call__\n        return GinacFunction.__call__(self, *args, **kwds)\n      File \"sage/symbolic/function.pyx\", line 843, in sage.symbolic.function.GinacFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:9047)\n        res = super(GinacFunction, self).__call__(*args, **kwds)\n      File \"sage/symbolic/function.pyx\", line 983, in sage.symbolic.function.BuiltinFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:10379)\n        res = method()\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/rings/multi_power_series_ring_element.py\", line 2059, in log\n        return R(result_bg, prec=prec)\n      File \"sage/structure/parent.pyx\", line 1096, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9486)\n        return mor._call_with_args(x, args, kwds)\n      File \"sage/structure/coerce_maps.pyx\", line 129, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (build/cythonized/sage/structure/coerce_maps.c:4817)\n        raise\n      File \"sage/structure/coerce_maps.pyx\", line 119, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (build/cythonized/sage/structure/coerce_maps.c:4641)\n        return C._element_constructor(x, **kwds)\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/rings/multi_power_series_ring.py\", line 791, in _element_constructor_\n        return self.element_class(parent=self, x=f, prec=prec)\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/rings/multi_power_series_ring_element.py\", line 378, in __init__\n        self._bg_value = parent._send_to_bg(x).add_bigoh(prec)\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/rings/multi_power_series_ring.py\", line 1025, in _send_to_bg\n        raise TypeError(\"Cannot coerce input to polynomial ring.\")\n    TypeError: Cannot coerce input to polynomial ring.\n```\n\n```\nFile \"src/sage/rings/polynomial/multi_polynomial_libsingular.pyx\", line 2350, in sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular._div_\nFailed example:\n    x/3\nExpected:\n    Traceback (most recent call last):\n    ...\n    TypeError: self must be an integral domain.\nGot:\n    -341*x\n```",
    "created_at": "2015-02-07T15:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243719",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:3'></a>
(I didn't try #17740 separately.)

```
File "src/sage/rings/polynomial/padics/polynomial_padic.py", line 84, in sage.rings.polynomial.padics.polynomial_padic.Polynomial_padic.factor
Failed example:
    for p,e in pol.factor(): print e, p
Exception raised:
    Traceback (most recent call last):
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 850, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.polynomial.padics.polynomial_padic.Polynomial_padic.factor[2]>", line 1, in <module>
        for p,e in pol.factor(): print e, p
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/padics/polynomial_padic.py", line 158, in factor
        absprec = min([x.precision_absolute() for x in self_normal])
    TypeError: 'FractionFieldElement_1poly_field' object is not iterable
```

```
File "src/sage/rings/padics/padic_generic.py", line 465, in sage.rings.padics.padic_generic.pAdicGeneric.extension
Failed example:
    F = list(Qp(19)['x'](cyclotomic_polynomial(5)).factor())[0][0]
Exception raised:
    Traceback (most recent call last):
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 850, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.padics.padic_generic.pAdicGeneric.extension[3]>", line 1, in <module>
        F = list(Qp(Integer(19))['x'](cyclotomic_polynomial(Integer(5))).factor())[Integer(0)][Integer(0)]
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/padics/polynomial_padic.py", line 158, in factor
        absprec = min([x.precision_absolute() for x in self_normal])
    TypeError: 'FractionFieldElement_1poly_field' object is not iterable
```

```
File "src/sage/rings/multi_power_series_ring_element.py", line 2024, in sage.rings.multi_power_series_ring_element.MPowerSeries.log
Failed example:
    log(1+a)
Exception raised:
    Traceback (most recent call last):
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 850, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.multi_power_series_ring_element.MPowerSeries.log[10]>", line 1, in <module>
        log(Integer(1)+a)
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/functions/log.py", line 313, in __call__
        return GinacFunction.__call__(self, *args, **kwds)
      File "sage/symbolic/function.pyx", line 843, in sage.symbolic.function.GinacFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:9047)
        res = super(GinacFunction, self).__call__(*args, **kwds)
      File "sage/symbolic/function.pyx", line 983, in sage.symbolic.function.BuiltinFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:10379)
        res = method()
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/rings/multi_power_series_ring_element.py", line 2059, in log
        return R(result_bg, prec=prec)
      File "sage/structure/parent.pyx", line 1096, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9486)
        return mor._call_with_args(x, args, kwds)
      File "sage/structure/coerce_maps.pyx", line 129, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (build/cythonized/sage/structure/coerce_maps.c:4817)
        raise
      File "sage/structure/coerce_maps.pyx", line 119, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (build/cythonized/sage/structure/coerce_maps.c:4641)
        return C._element_constructor(x, **kwds)
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/rings/multi_power_series_ring.py", line 791, in _element_constructor_
        return self.element_class(parent=self, x=f, prec=prec)
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/rings/multi_power_series_ring_element.py", line 378, in __init__
        self._bg_value = parent._send_to_bg(x).add_bigoh(prec)
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/rings/multi_power_series_ring.py", line 1025, in _send_to_bg
        raise TypeError("Cannot coerce input to polynomial ring.")
    TypeError: Cannot coerce input to polynomial ring.
```

```
File "src/sage/rings/polynomial/multi_polynomial_libsingular.pyx", line 2350, in sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular._div_
Failed example:
    x/3
Expected:
    Traceback (most recent call last):
    ...
    TypeError: self must be an integral domain.
Got:
    -341*x
```



---

archive/issue_comments_243720.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7744207c040e7bbb9b4abd7c637b46832fe486d4\">7744207</a></td><td><code>Better behavior for polynomial division.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e88c72687b89713e3ca79e435c509c0d99bece2\">1e88c72</a></td><td><code>Another polynomial division action test.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fd72c756b671b42176ae98e77b18aad6fb9e4b0\">7fd72c7</a></td><td><code>Merge branch 'coerce-div' into poly-div</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2372d53d149a02b6d421b5a469f573126eb52a11\">2372d53</a></td><td><code>Fix a couple of tests.</code></td></tr></table>\n",
    "created_at": "2015-02-08T09:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243720",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7744207c040e7bbb9b4abd7c637b46832fe486d4">7744207</a></td><td><code>Better behavior for polynomial division.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e88c72687b89713e3ca79e435c509c0d99bece2">1e88c72</a></td><td><code>Another polynomial division action test.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fd72c756b671b42176ae98e77b18aad6fb9e4b0">7fd72c7</a></td><td><code>Merge branch 'coerce-div' into poly-div</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2372d53d149a02b6d421b5a469f573126eb52a11">2372d53</a></td><td><code>Fix a couple of tests.</code></td></tr></table>




---

archive/issue_comments_243721.json:
```json
{
    "body": "**Changing commit** from \"[69962b6b5428e1c7935c2c6becfa639d57246dc7](https://github.com/sagemath/sagetrac-mirror/commit/69962b6b5428e1c7935c2c6becfa639d57246dc7)\" to \"[2372d53d149a02b6d421b5a469f573126eb52a11](https://github.com/sagemath/sagetrac-mirror/commit/2372d53d149a02b6d421b5a469f573126eb52a11)\".",
    "created_at": "2015-02-08T09:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[69962b6b5428e1c7935c2c6becfa639d57246dc7](https://github.com/sagemath/sagetrac-mirror/commit/69962b6b5428e1c7935c2c6becfa639d57246dc7)" to "[2372d53d149a02b6d421b5a469f573126eb52a11](https://github.com/sagemath/sagetrac-mirror/commit/2372d53d149a02b6d421b5a469f573126eb52a11)".



---

archive/issue_events_162445.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2015-02-08T09:20:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162445"
}
```



---

archive/issue_events_162446.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2015-02-08T09:20:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162446"
}
```



---

archive/issue_comments_243722.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a60134cdb45ad44725efb637f6b4fec74077197f\">a60134c</a></td><td><code>trac #17740: review 1 (documentation)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/728811d3f2f1d46750775b2e9ac203c08ef6db82\">728811d</a></td><td><code>trac #17740: review 2 (clean Errors)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96c1a0348964c4edbd42f3fc52e93b9e76f26156\">96c1a03</a></td><td><code>trac #17740: review 3 (less in try/except block)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cb51c095e0e3375dead95c194febd5873ba5e06\">2cb51c0</a></td><td><code>Re-introduce action of fraction field as fallback for division action.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b63e8f8d841a6386a822f8531ae9eb633c5fe3b5\">b63e8f8</a></td><td><code>Merge branch 'coerce-div' into 17741-poly-div</code></td></tr></table>\n",
    "created_at": "2015-02-11T05:15:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a60134cdb45ad44725efb637f6b4fec74077197f">a60134c</a></td><td><code>trac #17740: review 1 (documentation)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/728811d3f2f1d46750775b2e9ac203c08ef6db82">728811d</a></td><td><code>trac #17740: review 2 (clean Errors)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96c1a0348964c4edbd42f3fc52e93b9e76f26156">96c1a03</a></td><td><code>trac #17740: review 3 (less in try/except block)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cb51c095e0e3375dead95c194febd5873ba5e06">2cb51c0</a></td><td><code>Re-introduce action of fraction field as fallback for division action.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b63e8f8d841a6386a822f8531ae9eb633c5fe3b5">b63e8f8</a></td><td><code>Merge branch 'coerce-div' into 17741-poly-div</code></td></tr></table>




---

archive/issue_comments_243723.json:
```json
{
    "body": "**Changing commit** from \"[2372d53d149a02b6d421b5a469f573126eb52a11](https://github.com/sagemath/sagetrac-mirror/commit/2372d53d149a02b6d421b5a469f573126eb52a11)\" to \"[b63e8f8d841a6386a822f8531ae9eb633c5fe3b5](https://github.com/sagemath/sagetrac-mirror/commit/b63e8f8d841a6386a822f8531ae9eb633c5fe3b5)\".",
    "created_at": "2015-02-11T05:15:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2372d53d149a02b6d421b5a469f573126eb52a11](https://github.com/sagemath/sagetrac-mirror/commit/2372d53d149a02b6d421b5a469f573126eb52a11)" to "[b63e8f8d841a6386a822f8531ae9eb633c5fe3b5](https://github.com/sagemath/sagetrac-mirror/commit/b63e8f8d841a6386a822f8531ae9eb633c5fe3b5)".



---

archive/issue_comments_243724.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bff474b33f681de5d51ebf1be5c95dc7ac7f2f03\">bff474b</a></td><td><code>Better _pseudo_fraction_field default implementation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/830460a4767e467087d0ed76d14232cdc7da635f\">830460a</a></td><td><code>Merge branch '17740-coerce-div' into 17741-poly-div</code></td></tr></table>\n",
    "created_at": "2015-02-17T04:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243724",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bff474b33f681de5d51ebf1be5c95dc7ac7f2f03">bff474b</a></td><td><code>Better _pseudo_fraction_field default implementation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/830460a4767e467087d0ed76d14232cdc7da635f">830460a</a></td><td><code>Merge branch '17740-coerce-div' into 17741-poly-div</code></td></tr></table>




---

archive/issue_comments_243725.json:
```json
{
    "body": "**Changing commit** from \"[b63e8f8d841a6386a822f8531ae9eb633c5fe3b5](https://github.com/sagemath/sagetrac-mirror/commit/b63e8f8d841a6386a822f8531ae9eb633c5fe3b5)\" to \"[830460a4767e467087d0ed76d14232cdc7da635f](https://github.com/sagemath/sagetrac-mirror/commit/830460a4767e467087d0ed76d14232cdc7da635f)\".",
    "created_at": "2015-02-17T04:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243725",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b63e8f8d841a6386a822f8531ae9eb633c5fe3b5](https://github.com/sagemath/sagetrac-mirror/commit/b63e8f8d841a6386a822f8531ae9eb633c5fe3b5)" to "[830460a4767e467087d0ed76d14232cdc7da635f](https://github.com/sagemath/sagetrac-mirror/commit/830460a4767e467087d0ed76d14232cdc7da635f)".



---

archive/issue_events_162447.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-17T22:36:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162447"
}
```



---

archive/issue_events_162448.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-17T22:36:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162448"
}
```



---

archive/issue_comments_243726.json:
```json
{
    "body": "<a id='comment:8'></a>\nGot one doctest failing\n\n```\nsage -t --long src/sage/rings/finite_rings/integer_mod_ring.py\n**********************************************************************\nFile \"src/sage/rings/finite_rings/integer_mod_ring.py\", line 807, in sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic._pseudo_fraction_field\nFailed example:\n    (x+5)/2\nException raised:\n    Traceback (most recent call last)\n    ...\nsage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic._pseudo_fraction_field[3]>\", line 1, in <module>\n        (x+Integer(5))/Integer(2)\n      File \"sage/structure/element.pyx\", line 1973, in sage.structure.element.RingElement.__div__ (build/cythonized/sage/structure/element.c:18228)\n        return coercion_model.bin_op(self, right, div)\n      File \"sage/structure/coerce.pyx\", line 802, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:7201)\n        raise\n      File \"sage/structure/coerce.pyx\", line 798, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:7148)\n        return PyObject_CallObject(op, xy)\n      File \"sage/structure/element.pyx\", line 1971, in sage.structure.element.RingElement.__div__ (build/cythonized/sage/structure/element.c:18210)\n        return (<RingElement>self)._div_(<RingElement>right)\n      File \"sage/structure/element.pyx\", line 1981, in sage.structure.element.RingElement._div_ (build/cythonized/sage/structure/element.c:18365)\n        return self._parent.fraction_field()(self, right)\n      File \"sage/rings/ring.pyx\", line 1226, in sage.rings.ring.CommutativeRing.fraction_field (build/cythonized/sage/rings/ring.c:10158)\n    TypeError: self must be an integral domain.\n```",
    "created_at": "2015-02-17T22:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243726",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>
Got one doctest failing

```
sage -t --long src/sage/rings/finite_rings/integer_mod_ring.py
**********************************************************************
File "src/sage/rings/finite_rings/integer_mod_ring.py", line 807, in sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic._pseudo_fraction_field
Failed example:
    (x+5)/2
Exception raised:
    Traceback (most recent call last)
    ...
sage.rings.finite_rings.integer_mod_ring.IntegerModRing_generic._pseudo_fraction_field[3]>", line 1, in <module>
        (x+Integer(5))/Integer(2)
      File "sage/structure/element.pyx", line 1973, in sage.structure.element.RingElement.__div__ (build/cythonized/sage/structure/element.c:18228)
        return coercion_model.bin_op(self, right, div)
      File "sage/structure/coerce.pyx", line 802, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:7201)
        raise
      File "sage/structure/coerce.pyx", line 798, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:7148)
        return PyObject_CallObject(op, xy)
      File "sage/structure/element.pyx", line 1971, in sage.structure.element.RingElement.__div__ (build/cythonized/sage/structure/element.c:18210)
        return (<RingElement>self)._div_(<RingElement>right)
      File "sage/structure/element.pyx", line 1981, in sage.structure.element.RingElement._div_ (build/cythonized/sage/structure/element.c:18365)
        return self._parent.fraction_field()(self, right)
      File "sage/rings/ring.pyx", line 1226, in sage.rings.ring.CommutativeRing.fraction_field (build/cythonized/sage/rings/ring.c:10158)
    TypeError: self must be an integral domain.
```



---

archive/issue_comments_243727.json:
```json
{
    "body": "<a id='comment:9'></a>\nrebased on sage-6.9.beta1\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f88dd380b88cb236c8421c286e966e285afe9fe7\">f88dd38</a></td><td><code>Remove redundant `__div__` operator.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5a59a3400508531d6d19803dc277c01e896f8d8\">f5a59a3</a></td><td><code>Fix a couple of tests for padics.</code></td></tr></table>\n",
    "created_at": "2015-08-11T22:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243727",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
rebased on sage-6.9.beta1

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f88dd380b88cb236c8421c286e966e285afe9fe7">f88dd38</a></td><td><code>Remove redundant `__div__` operator.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5a59a3400508531d6d19803dc277c01e896f8d8">f5a59a3</a></td><td><code>Fix a couple of tests for padics.</code></td></tr></table>




---

archive/issue_comments_243728.json:
```json
{
    "body": "**Changing branch** from \"[u/robertwb/poly-div](https://github.com/sagemath/sagetrac-mirror/tree/u/robertwb/poly-div)\" to \"[public/17741](https://github.com/sagemath/sagetrac-mirror/tree/public/17741)\".",
    "created_at": "2015-08-11T22:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243728",
    "user": "https://github.com/videlec"
}
```

**Changing branch** from "[u/robertwb/poly-div](https://github.com/sagemath/sagetrac-mirror/tree/u/robertwb/poly-div)" to "[public/17741](https://github.com/sagemath/sagetrac-mirror/tree/public/17741)".



---

archive/issue_events_162449.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-11T22:25:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162449"
}
```



---

archive/issue_events_162450.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-11T22:25:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162450"
}
```



---

archive/issue_events_162451.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-11T22:25:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162451"
}
```



---

archive/issue_events_162452.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-11T22:25:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162452"
}
```



---

archive/issue_comments_243729.json:
```json
{
    "body": "**Changing commit** from \"[830460a4767e467087d0ed76d14232cdc7da635f](https://github.com/sagemath/sagetrac-mirror/commit/830460a4767e467087d0ed76d14232cdc7da635f)\" to \"[f5a59a3400508531d6d19803dc277c01e896f8d8](https://github.com/sagemath/sagetrac-mirror/commit/f5a59a3400508531d6d19803dc277c01e896f8d8)\".",
    "created_at": "2015-08-11T22:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243729",
    "user": "https://github.com/videlec"
}
```

**Changing commit** from "[830460a4767e467087d0ed76d14232cdc7da635f](https://github.com/sagemath/sagetrac-mirror/commit/830460a4767e467087d0ed76d14232cdc7da635f)" to "[f5a59a3400508531d6d19803dc277c01e896f8d8](https://github.com/sagemath/sagetrac-mirror/commit/f5a59a3400508531d6d19803dc277c01e896f8d8)".



---

archive/issue_events_162453.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-11T22:57:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162453"
}
```



---

archive/issue_events_162454.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-11T22:57:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17741#event-162454"
}
```



---

archive/issue_comments_243730.json:
```json
{
    "body": "<a id='comment:10'></a>\nI still get the error as in [comment:8]. Though the following works well\n\n```\nsage: R.<x> = Integers(15)[]\nsage: (x+5) / R.base_ring()(2)\n8*x + 10\n```\nand one can check\n\n```\nsage: cm = get_coercion_model()\nsage: R.<x> = Integers(15)[]\nsage: a = cm.get_action(R, R.base_ring(), operator.div)\nsage: a(x+5,2)\n8*x + 10\n```\n\nThe problem is when we divide by an integer\n\n```\nsage: cm.get_action(R, ZZ, operator.div)\n<NOTHING>\n```\nThe above fails because the following does\n\n```\nsage: cm = get_coercion_model()\nsage: R.<x> = Integers(15)[]\nsage: right_mul = cm.get_action(R, ZZ, operator.mul)\nsage: action = ~right_mul\nTraceback (most recent call last):\n...\nCoercionException: x (=Ring of integers modulo 15) is not in Category of integral domains\n```",
    "created_at": "2015-08-11T22:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17741#issuecomment-243730",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>
I still get the error as in [comment:8]. Though the following works well

```
sage: R.<x> = Integers(15)[]
sage: (x+5) / R.base_ring()(2)
8*x + 10
```
and one can check

```
sage: cm = get_coercion_model()
sage: R.<x> = Integers(15)[]
sage: a = cm.get_action(R, R.base_ring(), operator.div)
sage: a(x+5,2)
8*x + 10
```

The problem is when we divide by an integer

```
sage: cm.get_action(R, ZZ, operator.div)
<NOTHING>
```
The above fails because the following does

```
sage: cm = get_coercion_model()
sage: R.<x> = Integers(15)[]
sage: right_mul = cm.get_action(R, ZZ, operator.mul)
sage: action = ~right_mul
Traceback (most recent call last):
...
CoercionException: x (=Ring of integers modulo 15) is not in Category of integral domains
```
