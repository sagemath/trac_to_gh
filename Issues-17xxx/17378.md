# Issue 17378: Preparser gets lost with iterated ellipsis_range

archive/issues_017141.json:
```json
{
    "assignees": [],
    "body": "Here is a bug reported during a workshop at Villetaneuse today:\n\n```\nsage: [1..10]\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nsage: len([1..10])\n10\nsage: [1..len([1..10])]\n[1, 2, 3]\n```\n\nAfter a quick look, it seems that there is a preparsing problem, `[1..len([1..10])]` should be preparsed as something like:\n\n```\n(ellipsis_range(Integer(1),Ellipsis,len(ellipsis_range(Integer(1),Ellipsis,Integer(10)))))\n```\n\nbut it is currently preparsed as:\n\n```\nsage: preparse('[1..len([1..10])]')\n'(ellipsis_range(Integer(1),Ellipsis,len([Integer(1),Ellipsis,Integer(10)])))'\n```\n\n(the second `ellipsis_range` disappeared).\n\n\nBranch/Commit: **[`7748c7c`](https://github.com/sagemath/sagetrac-mirror/commit/7748c7c62cdd946fbcec5647faeec9ded0db8573)**\n\nReviewer: **Thierry Monteil, Marc Mezzarobba**\n\nAuthor: **Nils Bruin**\n\nComponent: **user interface**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17378_\n\n",
    "closed_at": "2015-02-08T15:26:22Z",
    "created_at": "2014-11-21T18:31:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Preparser gets lost with iterated ellipsis_range",
    "type": "issue",
    "updated_at": "2015-02-08T15:26:22Z",
    "url": "https://github.com/sagemath/sage/issues/17378",
    "user": "https://github.com/sagetrac-tmonteil"
}
```
Here is a bug reported during a workshop at Villetaneuse today:

```
sage: [1..10]
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
sage: len([1..10])
10
sage: [1..len([1..10])]
[1, 2, 3]
```

After a quick look, it seems that there is a preparsing problem, `[1..len([1..10])]` should be preparsed as something like:

```
(ellipsis_range(Integer(1),Ellipsis,len(ellipsis_range(Integer(1),Ellipsis,Integer(10)))))
```

but it is currently preparsed as:

```
sage: preparse('[1..len([1..10])]')
'(ellipsis_range(Integer(1),Ellipsis,len([Integer(1),Ellipsis,Integer(10)])))'
```

(the second `ellipsis_range` disappeared).


Branch/Commit: **[`7748c7c`](https://github.com/sagemath/sagetrac-mirror/commit/7748c7c62cdd946fbcec5647faeec9ded0db8573)**

Reviewer: **Thierry Monteil, Marc Mezzarobba**

Author: **Nils Bruin**

Component: **user interface**

_Issue created by migration from https://trac.sagemath.org/ticket/17378_





---

archive/issue_events_247762.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-11-21T18:31:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247762"
}
```



---

archive/issue_events_247763.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-11-21T18:31:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "000080",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247763"
}
```



---

archive/issue_events_247764.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-11-21T18:31:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247764"
}
```



---

archive/issue_events_247765.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-11-21T18:31:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247765"
}
```



---

archive/issue_comments_232304.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI think we're really out of our depth here. `ellipsis_range` can actually take multiple `..` in its arguments, so we need to distinguish between\n\n```\n[1,2..10,12..20]\n```\nand\n\n```\n[1,2..len([10,12..20])]\n```\nThe code in question is presently (see sage.misc.preparser line 520)\n\n```\n    ix = code.find('..')\n    while ix != -1:\n        if ix == 0:\n            raise SyntaxError(\"Cannot start line with ellipsis.\")\n        elif code[ix-1]=='.':\n            # '...' be valid Python in index slices\n            code = code[:ix-1] + \"Ellipsis\" + code[ix+2:]\n        elif len(code) >= ix+3 and code[ix+2]=='.':\n            # '...' be valid Python in index slices\n            code = code[:ix] + \"Ellipsis\" + code[ix+3:]\n        else:\n            start_list, end_list = containing_block(code, ix, ['()','[]'])\n(*)         arguments = code[start_list+1:end_list-1].replace('...', ',Ellipsis,').replace('..', ',Ellipsis,')\n            arguments = re.sub(r',\\s*,', ',', arguments)\n            if preparse_step:\n                arguments = arguments.replace(';', ', step=')\n            range_or_iter = 'range' if code[start_list]=='[' else 'iter'\n            code = \"%s(ellipsis_%s(%s))%s\" %  (code[:start_list],\n                                               range_or_iter,\n                                               arguments,\n                                               code[end_list:])\n        ix = code.find('..')\n```\nThe problem is in the line marked (*). It really does need to be prepared to make multiple substitutions, but it should leave \"..\" that are enclosed in some kind of bracket for later substitutions.\n\nThis is really one of those cases where string-substitutions aren't really powerful enough. It we'd start with a '..' that has a containing block that isn't properly contained in a containing block of any other '..', rather than the first '..' we find, then we'd be ok. (because inside that containing block all the '..' do belong to the same `ellipsis_range`).\n\nI'm a little worried about cost with that approach: what happens if a whole \".sage\" file gets preparsed that has a whole lot of '..' in it? does this routine then execute on that huge string? execution time quadratic (or worse) in the number of '..' might be problematic.\n\n*EDIT:* correction: what we should do is: after we have found our initial `ix` and our `start_list,end_list`, we should do\n\n```\n    while True:\n        new_ix = code.find('..',ix+1,end_list)\n        if new_ix == -1:\n            break #EXIT HERE if there are no other '..' to consider\n        else:\n            ix = new_ix\n        new_start_list,new_end_list = containing_block(code,ix,['(),'[]'])\n        if (new_start_list != start_list) or (new_end_list != end_list):\n            start_list = new_start_list\n            end_list = new_end_list\n```\nThis should be pretty quick because it simply zooms in on the block that's under consideration. Those blocks should be pretty small, even in a big file.\n\nThis code should probably be edited a bit because there are apparently some occurrences of '...' that need to be treated differently and I'm not doing that here at the moment.",
    "created_at": "2014-11-21T20:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232304",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:1" align="right">comment:1</div>

I think we're really out of our depth here. `ellipsis_range` can actually take multiple `..` in its arguments, so we need to distinguish between

```
[1,2..10,12..20]
```
and

```
[1,2..len([10,12..20])]
```
The code in question is presently (see sage.misc.preparser line 520)

```
    ix = code.find('..')
    while ix != -1:
        if ix == 0:
            raise SyntaxError("Cannot start line with ellipsis.")
        elif code[ix-1]=='.':
            # '...' be valid Python in index slices
            code = code[:ix-1] + "Ellipsis" + code[ix+2:]
        elif len(code) >= ix+3 and code[ix+2]=='.':
            # '...' be valid Python in index slices
            code = code[:ix] + "Ellipsis" + code[ix+3:]
        else:
            start_list, end_list = containing_block(code, ix, ['()','[]'])
(*)         arguments = code[start_list+1:end_list-1].replace('...', ',Ellipsis,').replace('..', ',Ellipsis,')
            arguments = re.sub(r',\s*,', ',', arguments)
            if preparse_step:
                arguments = arguments.replace(';', ', step=')
            range_or_iter = 'range' if code[start_list]=='[' else 'iter'
            code = "%s(ellipsis_%s(%s))%s" %  (code[:start_list],
                                               range_or_iter,
                                               arguments,
                                               code[end_list:])
        ix = code.find('..')
```
The problem is in the line marked (*). It really does need to be prepared to make multiple substitutions, but it should leave ".." that are enclosed in some kind of bracket for later substitutions.

This is really one of those cases where string-substitutions aren't really powerful enough. It we'd start with a '..' that has a containing block that isn't properly contained in a containing block of any other '..', rather than the first '..' we find, then we'd be ok. (because inside that containing block all the '..' do belong to the same `ellipsis_range`).

I'm a little worried about cost with that approach: what happens if a whole ".sage" file gets preparsed that has a whole lot of '..' in it? does this routine then execute on that huge string? execution time quadratic (or worse) in the number of '..' might be problematic.

*EDIT:* correction: what we should do is: after we have found our initial `ix` and our `start_list,end_list`, we should do

```
    while True:
        new_ix = code.find('..',ix+1,end_list)
        if new_ix == -1:
            break #EXIT HERE if there are no other '..' to consider
        else:
            ix = new_ix
        new_start_list,new_end_list = containing_block(code,ix,['(),'[]'])
        if (new_start_list != start_list) or (new_end_list != end_list):
            start_list = new_start_list
            end_list = new_end_list
```
This should be pretty quick because it simply zooms in on the block that's under consideration. Those blocks should be pretty small, even in a big file.

This code should probably be edited a bit because there are apparently some occurrences of '...' that need to be treated differently and I'm not doing that here at the moment.



---

archive/issue_comments_232305.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIncidentally, the comma handling is perhaps a little too permissive:\n\n```\nsage: [1,,2..3]\n[1, 2, 3]\nsage: [1,,2,3]\n```\nRunning preparse_ellipsis has the side effect for turning something that *should* be a syntax error into valid code.",
    "created_at": "2014-11-21T21:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232305",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:2" align="right">comment:2</div>

Incidentally, the comma handling is perhaps a little too permissive:

```
sage: [1,,2..3]
[1, 2, 3]
sage: [1,,2,3]
```
Running preparse_ellipsis has the side effect for turning something that *should* be a syntax error into valid code.



---

archive/issue_comments_232306.json:
```json
{
    "body": "Branch: **[u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range)**",
    "created_at": "2014-11-22T00:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232306",
    "user": "https://github.com/nbruin"
}
```

Branch: **[u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range)**



---

archive/issue_comments_232307.json:
```json
{
    "body": "Commit: **[`0c0ddd9`](https://github.com/sagemath/sagetrac-mirror/commit/0c0ddd9935c9907906c7627e9d20538f443c6b23)**",
    "created_at": "2014-11-22T00:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232307",
    "user": "https://github.com/nbruin"
}
```

Commit: **[`0c0ddd9`](https://github.com/sagemath/sagetrac-mirror/commit/0c0ddd9935c9907906c7627e9d20538f443c6b23)**



---

archive/issue_comments_232308.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOK, I did not deal with the extra comma replacements (which seem relatively harmless). i think the \"...\" detection is simply a matter that those \"...\" can be replaced by `Ellipsis` but should not trigger the generation of an `ellipsis_range`/`ellipsis_iter`. That's my current interpretation.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c0ddd9935c9907906c7627e9d20538f443c6b23\"><code>0c0ddd9</code></a></td><td><code>trac 17378: make sure preparse_ellipsis deals with nested ranges properly</code></td></tr></table>\n",
    "created_at": "2014-11-22T00:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232308",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:4" align="right">comment:4</div>

OK, I did not deal with the extra comma replacements (which seem relatively harmless). i think the "..." detection is simply a matter that those "..." can be replaced by `Ellipsis` but should not trigger the generation of an `ellipsis_range`/`ellipsis_iter`. That's my current interpretation.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c0ddd9935c9907906c7627e9d20538f443c6b23"><code>0c0ddd9</code></a></td><td><code>trac 17378: make sure preparse_ellipsis deals with nested ranges properly</code></td></tr></table>




---

archive/issue_events_247766.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2014-11-22T00:55:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247766"
}
```



---

archive/issue_comments_232309.json:
```json
{
    "body": "Author: **nbruin**",
    "created_at": "2014-11-22T00:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232309",
    "user": "https://github.com/nbruin"
}
```

Author: **nbruin**



---

archive/issue_comments_232310.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b4b9ec8d1df91b7c4659deb1d3d5fc8901ce339\"><code>7b4b9ec</code></a></td><td><code>trac 17378: make sure preparse_ellipsis deals with nested ranges properly</code></td></tr></table>\n",
    "created_at": "2014-11-22T07:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232310",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b4b9ec8d1df91b7c4659deb1d3d5fc8901ce339"><code>7b4b9ec</code></a></td><td><code>trac 17378: make sure preparse_ellipsis deals with nested ranges properly</code></td></tr></table>




---

archive/issue_comments_232311.json:
```json
{
    "body": "Changed commit from **[`0c0ddd9`](https://github.com/sagemath/sagetrac-mirror/commit/0c0ddd9935c9907906c7627e9d20538f443c6b23)** to **[`7b4b9ec`](https://github.com/sagemath/sagetrac-mirror/commit/7b4b9ec8d1df91b7c4659deb1d3d5fc8901ce339)**",
    "created_at": "2014-11-22T07:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232311",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0c0ddd9`](https://github.com/sagemath/sagetrac-mirror/commit/0c0ddd9935c9907906c7627e9d20538f443c6b23)** to **[`7b4b9ec`](https://github.com/sagemath/sagetrac-mirror/commit/7b4b9ec8d1df91b7c4659deb1d3d5fc8901ce339)**



---

archive/issue_comments_232312.json:
```json
{
    "body": "Changed commit from **[`7b4b9ec`](https://github.com/sagemath/sagetrac-mirror/commit/7b4b9ec8d1df91b7c4659deb1d3d5fc8901ce339)** to **[`a0f5dae`](https://github.com/sagemath/sagetrac-mirror/commit/a0f5daec2c09514cb9981479d93018a353d3d6a4)**",
    "created_at": "2014-11-22T07:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232312",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7b4b9ec`](https://github.com/sagemath/sagetrac-mirror/commit/7b4b9ec8d1df91b7c4659deb1d3d5fc8901ce339)** to **[`a0f5dae`](https://github.com/sagemath/sagetrac-mirror/commit/a0f5daec2c09514cb9981479d93018a353d3d6a4)**



---

archive/issue_comments_232313.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0f5daec2c09514cb9981479d93018a353d3d6a4\"><code>a0f5dae</code></a></td><td><code>trac 17378: make sure preparse_ellipsis deals with nested ranges properly</code></td></tr></table>\n",
    "created_at": "2014-11-22T07:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232313",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0f5daec2c09514cb9981479d93018a353d3d6a4"><code>a0f5dae</code></a></td><td><code>trac 17378: make sure preparse_ellipsis deals with nested ranges properly</code></td></tr></table>




---

archive/issue_events_247767.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-12-08T13:07:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247767"
}
```



---

archive/issue_events_247768.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-12-08T13:07:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247768"
}
```



---

archive/issue_comments_232314.json:
```json
{
    "body": "Reviewer: **Thierry Monteil**",
    "created_at": "2014-12-08T13:07:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232314",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Reviewer: **Thierry Monteil**



---

archive/issue_comments_232315.json:
```json
{
    "body": "Changed author from **nbruin** to **Nils Bruin**",
    "created_at": "2014-12-08T13:07:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232315",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Changed author from **nbruin** to **Nils Bruin**



---

archive/issue_comments_232316.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis makes sense and fixes the problem.\n\nCould you just replace `#17378` by <code>:trac:\\`17378\\`</code> in the doctest so that sphinx can handle it ?",
    "created_at": "2014-12-08T13:07:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232316",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:8" align="right">comment:8</div>

This makes sense and fixes the problem.

Could you just replace `#17378` by <code>:trac:\`17378\`</code> in the doctest so that sphinx can handle it ?



---

archive/issue_comments_232317.json:
```json
{
    "body": "Changed branch from **[u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range)** to **[u/tmonteil/preparser_gets_lost_with_iterated_ellipsis_range](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/preparser_gets_lost_with_iterated_ellipsis_range)**",
    "created_at": "2015-01-07T18:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232317",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Changed branch from **[u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range)** to **[u/tmonteil/preparser_gets_lost_with_iterated_ellipsis_range](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/preparser_gets_lost_with_iterated_ellipsis_range)**



---

archive/issue_comments_232318.json:
```json
{
    "body": "Changed commit from **[`a0f5dae`](https://github.com/sagemath/sagetrac-mirror/commit/a0f5daec2c09514cb9981479d93018a353d3d6a4)** to **[`0f8764f`](https://github.com/sagemath/sagetrac-mirror/commit/0f8764fc79a47000fea74e01736a4728a0e895a1)**",
    "created_at": "2015-01-07T18:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232318",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Changed commit from **[`a0f5dae`](https://github.com/sagemath/sagetrac-mirror/commit/a0f5daec2c09514cb9981479d93018a353d3d6a4)** to **[`0f8764f`](https://github.com/sagemath/sagetrac-mirror/commit/0f8764fc79a47000fea74e01736a4728a0e895a1)**



---

archive/issue_comments_232319.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f8764fc79a47000fea74e01736a4728a0e895a1\"><code>0f8764f</code></a></td><td><code>#17378 let sphinx know about trac ticket (reviewer commit).</code></td></tr></table>\n",
    "created_at": "2015-01-07T18:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232319",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:10"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f8764fc79a47000fea74e01736a4728a0e895a1"><code>0f8764f</code></a></td><td><code>#17378 let sphinx know about trac ticket (reviewer commit).</code></td></tr></table>




---

archive/issue_events_247769.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2015-01-07T18:29:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247769"
}
```



---

archive/issue_events_247770.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2015-01-07T18:29:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247770"
}
```



---

archive/issue_events_247771.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-12T09:45:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247771"
}
```



---

archive/issue_events_247772.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-12T09:45:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247772"
}
```



---

archive/issue_comments_232320.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nConflicts with #17396",
    "created_at": "2015-01-12T09:45:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232320",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:11" align="right">comment:11</div>

Conflicts with #17396



---

archive/issue_comments_232321.json:
```json
{
    "body": "Changed branch from **[u/tmonteil/preparser_gets_lost_with_iterated_ellipsis_range](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/preparser_gets_lost_with_iterated_ellipsis_range)** to **[u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range)**",
    "created_at": "2015-01-12T21:08:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232321",
    "user": "https://github.com/nbruin"
}
```

Changed branch from **[u/tmonteil/preparser_gets_lost_with_iterated_ellipsis_range](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/preparser_gets_lost_with_iterated_ellipsis_range)** to **[u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range)**



---

archive/issue_comments_232322.json:
```json
{
    "body": "Changed commit from **[`0f8764f`](https://github.com/sagemath/sagetrac-mirror/commit/0f8764fc79a47000fea74e01736a4728a0e895a1)** to **[`7748c7c`](https://github.com/sagemath/sagetrac-mirror/commit/7748c7c62cdd946fbcec5647faeec9ded0db8573)**",
    "created_at": "2015-01-12T21:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232322",
    "user": "https://github.com/nbruin"
}
```

Changed commit from **[`0f8764f`](https://github.com/sagemath/sagetrac-mirror/commit/0f8764fc79a47000fea74e01736a4728a0e895a1)** to **[`7748c7c`](https://github.com/sagemath/sagetrac-mirror/commit/7748c7c62cdd946fbcec5647faeec9ded0db8573)**



---

archive/issue_events_247773.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-01-12T21:09:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247773"
}
```



---

archive/issue_events_247774.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-01-12T21:09:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247774"
}
```



---

archive/issue_comments_232323.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nhard rebase to resolve conflict\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7748c7c62cdd946fbcec5647faeec9ded0db8573\"><code>7748c7c</code></a></td><td><code>trac 17378: make sure preparse_ellipsis deals with nested ranges properly</code></td></tr></table>\n",
    "created_at": "2015-01-12T21:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232323",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:13" align="right">comment:13</div>

hard rebase to resolve conflict

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7748c7c62cdd946fbcec5647faeec9ded0db8573"><code>7748c7c</code></a></td><td><code>trac 17378: make sure preparse_ellipsis deals with nested ranges properly</code></td></tr></table>




---

archive/issue_comments_232324.json:
```json
{
    "body": "Changed reviewer from **Thierry Monteil** to **Thierry Monteil, Marc Mezzarobba**",
    "created_at": "2015-02-05T10:37:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232324",
    "user": "https://github.com/mezzarobba"
}
```

Changed reviewer from **Thierry Monteil** to **Thierry Monteil, Marc Mezzarobba**



---

archive/issue_events_247775.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-05T10:37:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247775"
}
```



---

archive/issue_events_247776.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-05T10:37:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247776"
}
```



---

archive/issue_events_247777.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-08T15:26:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247777"
}
```



---

archive/issue_events_247778.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "024d1310e8ad33fb5fbdac461ba7c14ce406e171",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-02-08T15:26:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17378#event-247778"
}
```



---

archive/issue_comments_232325.json:
```json
{
    "body": "Changed branch from **[u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range)** to **[`7748c7c`](https://github.com/sagemath/sagetrac-mirror/commit/7748c7c62cdd946fbcec5647faeec9ded0db8573)**",
    "created_at": "2015-02-08T15:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17378#issuecomment-232325",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/preparser_gets_lost_with_iterated_ellipsis_range)** to **[`7748c7c`](https://github.com/sagemath/sagetrac-mirror/commit/7748c7c62cdd946fbcec5647faeec9ded0db8573)**
