# Issue 17531: allow algorithm keyword when calling BuiltinFunction

archive/issues_017294.json:
```json
{
    "body": "As per http://trac.sagemath.org/ticket/17489#comment:17 and http://trac.sagemath.org/ticket/17489#comment:23, the ticket should improve the `BuiltinFunction` class, such that subclassed function classes that have an `algorithm=...` keyword given via function call will automatically have this keyword inserted into any `__evalf__` member function call.\n\nThis means the following should be possible without changes to `subclassedfunction.__call__`:\n\n```\nsage: from sage.symbolic.function import BuiltinFunction\nsage: class MyFunction(BuiltinFunction):\n....:    def __init__(self):\n....:        BuiltinFunction.__init__(self, 'test', nargs=1)\n....:    def _evalf_(self, x, **kwds):\n....:        algorithm = kwds.get('algorithm', None)\n....:        if algorithm == 'algoA':\n....:            return 1.0\n....:        else:\n....:            return 0.0\n....:    def _eval_(self, x):\n....:         return self._evalf_try_(x)\nsage: f = MyFunction()\nsage: f(0.0, algorithm='algoA')\n1.00000000000000\nsage: f(0.0)\n0.000000000000000\n```\nAt the moment, as with all(?) symbolic functions we get\n\n```\nsage: f(x, algorithm='algoB')\nTypeError: __call__() got an unexpected keyword argument 'algorithm'\nsage: sin(x, algorithm='algoB')\nTypeError: __call__() got an unexpected keyword argument 'algorithm'\n```\nSo the ticket should also give a better error message for existing functions.\n\n#16812 and #17489 depend on this.\n\nCC:  @jdemeyer\n\nKeywords: symbolic functions\n\nAuthor: Ralf Stephan\n\nBranch: u/rws/17531-1\n\nCommit: b7e88d4ec6f74aa43f9fb5c8d9c54218492cba35\n\nResolution: wontfix\n\nIssue created by migration from https://trac.sagemath.org/ticket/17531\n\n",
    "closed_at": "2018-05-18T17:16:26Z",
    "created_at": "2014-12-20T14:31:03Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "allow algorithm keyword when calling BuiltinFunction",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17531",
    "user": "https://github.com/rwst"
}
```
As per http://trac.sagemath.org/ticket/17489#comment:17 and http://trac.sagemath.org/ticket/17489#comment:23, the ticket should improve the `BuiltinFunction` class, such that subclassed function classes that have an `algorithm=...` keyword given via function call will automatically have this keyword inserted into any `__evalf__` member function call.

This means the following should be possible without changes to `subclassedfunction.__call__`:

```
sage: from sage.symbolic.function import BuiltinFunction
sage: class MyFunction(BuiltinFunction):
....:    def __init__(self):
....:        BuiltinFunction.__init__(self, 'test', nargs=1)
....:    def _evalf_(self, x, **kwds):
....:        algorithm = kwds.get('algorithm', None)
....:        if algorithm == 'algoA':
....:            return 1.0
....:        else:
....:            return 0.0
....:    def _eval_(self, x):
....:         return self._evalf_try_(x)
sage: f = MyFunction()
sage: f(0.0, algorithm='algoA')
1.00000000000000
sage: f(0.0)
0.000000000000000
```
At the moment, as with all(?) symbolic functions we get

```
sage: f(x, algorithm='algoB')
TypeError: __call__() got an unexpected keyword argument 'algorithm'
sage: sin(x, algorithm='algoB')
TypeError: __call__() got an unexpected keyword argument 'algorithm'
```
So the ticket should also give a better error message for existing functions.

#16812 and #17489 depend on this.

CC:  @jdemeyer

Keywords: symbolic functions

Author: Ralf Stephan

Branch: u/rws/17531-1

Commit: b7e88d4ec6f74aa43f9fb5c8d9c54218492cba35

Resolution: wontfix

Issue created by migration from https://trac.sagemath.org/ticket/17531





---

archive/issue_comments_244878.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -5,17 +5,17 @@\n ```\n sage: from sage.symbolic.function import BuiltinFunction                               \n sage: class MyFunction(BuiltinFunction):                               \n-    def evalf(self, *args, **kwds):                                                    \n-        algorithm = kwds.get('algorithm', 'algoA')\n-        if algorithm == 'algoA':\n-            return 1\n-        else:\n-            return 0\n+....:    def __evalf__(self, *args, **kwds):                                                    \n+....:        algorithm = kwds.get('algorithm', 'algoA')\n+....:        if algorithm == 'algoA':\n+....:            return 1\n+....:        else:\n+....:            return 0\n ....:         \n sage: f = MyFunction\n-sage: f(x)\n+sage: f(x).n()\n 1\n-sage: f(x, algorithm='algoB')\n+sage: f(x, algorithm='algoB').n()\n 0\n ```\n At the moment, as with all(?) symbolic functions we get\n@@ -28,6 +28,7 @@\n ```\n So the ticket should also give a better error message for existing functions.\n \n+\n Summary: allow algorithm keyword when _call_()ing BuiltinFunction\n \n Comment: 1\n```\n",
    "created_at": "2014-12-20T14:36:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244878",
    "user": "https://github.com/rwst"
}
```

Description changed:
```diff
--- 
+++ 
@@ -5,17 +5,17 @@
 ```
 sage: from sage.symbolic.function import BuiltinFunction                               
 sage: class MyFunction(BuiltinFunction):                               
-    def evalf(self, *args, **kwds):                                                    
-        algorithm = kwds.get('algorithm', 'algoA')
-        if algorithm == 'algoA':
-            return 1
-        else:
-            return 0
+....:    def __evalf__(self, *args, **kwds):                                                    
+....:        algorithm = kwds.get('algorithm', 'algoA')
+....:        if algorithm == 'algoA':
+....:            return 1
+....:        else:
+....:            return 0
 ....:         
 sage: f = MyFunction
-sage: f(x)
+sage: f(x).n()
 1
-sage: f(x, algorithm='algoB')
+sage: f(x, algorithm='algoB').n()
 0
 ```
 At the moment, as with all(?) symbolic functions we get
@@ -28,6 +28,7 @@
 ```
 So the ticket should also give a better error message for existing functions.
 
+
 Summary: allow algorithm keyword when _call_()ing BuiltinFunction
 
 Comment: 1
```




---

archive/issue_comments_244879.json:
```json
{
    "body": "<a id='comment:2'></a>Is there something missing in the example?\n\n```\nsage: f(x)\nTraceback (most recent call last):\n  File \"<ipython-input-10-963bfc488912>\", line 1, in <module>\n    f(x)\n  File \"sage/symbolic/function.pyx\", line 942, in sage.symbolic.function.BuiltinFunction.__init__ (build/cythonized/sage/symbolic/function.cpp:9902)\n    Function.__init__(self, name, nargs, latex_name, conversions,\n  File \"sage/symbolic/function.pyx\", line 110, in sage.symbolic.function.Function.__init__ (build/cythonized/sage/symbolic/function.cpp:3655)\n    if not self._is_registered():\n  File \"sage/symbolic/function.pyx\", line 1042, in sage.symbolic.function.BuiltinFunction._is_registered (build/cythonized/sage/symbolic/function.cpp:10966)\n    try:\nTypeError: expected string or Unicode object, sage.symbolic.expression.Expression found\n```",
    "created_at": "2014-12-20T14:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244879",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>Is there something missing in the example?

```
sage: f(x)
Traceback (most recent call last):
  File "<ipython-input-10-963bfc488912>", line 1, in <module>
    f(x)
  File "sage/symbolic/function.pyx", line 942, in sage.symbolic.function.BuiltinFunction.__init__ (build/cythonized/sage/symbolic/function.cpp:9902)
    Function.__init__(self, name, nargs, latex_name, conversions,
  File "sage/symbolic/function.pyx", line 110, in sage.symbolic.function.Function.__init__ (build/cythonized/sage/symbolic/function.cpp:3655)
    if not self._is_registered():
  File "sage/symbolic/function.pyx", line 1042, in sage.symbolic.function.BuiltinFunction._is_registered (build/cythonized/sage/symbolic/function.cpp:10966)
    try:
TypeError: expected string or Unicode object, sage.symbolic.expression.Expression found
```



---

archive/issue_comments_244880.json:
```json
{
    "body": "<a id='comment:3'></a>\n```\nf = MyFunction()\n```\ninstead of\n\n```\nf = MyFunction\n```\n\nAlso, `__evalf__` should be `_evalf_`.",
    "created_at": "2014-12-20T15:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244880",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
```
f = MyFunction()
```
instead of

```
f = MyFunction
```

Also, `__evalf__` should be `_evalf_`.



---

archive/issue_comments_244881.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,32 @@\n+As per http://trac.sagemath.org/ticket/17489#comment:17 and http://trac.sagemath.org/ticket/17489#comment:23, the ticket should improve the `BuiltinFunction` class, such that subclassed function classes that have an `algorithm=...` keyword given via function call will automatically have this keyword inserted into any `__evalf__` member function call.\n+\n+This means the following should be possible without changes to `Function.__call__`:\n+\n+```\n+sage: from sage.symbolic.function import BuiltinFunction                               \n+sage: class MyFunction(BuiltinFunction):                               \n+....:    def _evalf_(self, *args, **kwds):                                                    \n+....:        algorithm = kwds.get('algorithm', 'algoA')\n+....:        if algorithm == 'algoA':\n+....:            return 1\n+....:        else:\n+....:            return 0\n+....:         \n+sage: f = MyFunction()\n+sage: f(x).n()\n+1\n+sage: f(x, algorithm='algoB').n()\n+0\n+```\n+At the moment, as with all(?) symbolic functions we get\n+\n+```\n+sage: f(x, algorithm='algoB')\n+TypeError: __call__() got an unexpected keyword argument 'algorithm'\n+sage: sin(x, algorithm='algoB')\n+TypeError: __call__() got an unexpected keyword argument 'algorithm'\n+```\n+So the ticket should also give a better error message for existing functions.\n \n \n Summary: allow algorithm keyword when _call_()ing BuiltinFunction\n```\n",
    "created_at": "2014-12-20T15:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244881",
    "user": "https://github.com/rwst"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,32 @@
+As per http://trac.sagemath.org/ticket/17489#comment:17 and http://trac.sagemath.org/ticket/17489#comment:23, the ticket should improve the `BuiltinFunction` class, such that subclassed function classes that have an `algorithm=...` keyword given via function call will automatically have this keyword inserted into any `__evalf__` member function call.
+
+This means the following should be possible without changes to `Function.__call__`:
+
+```
+sage: from sage.symbolic.function import BuiltinFunction                               
+sage: class MyFunction(BuiltinFunction):                               
+....:    def _evalf_(self, *args, **kwds):                                                    
+....:        algorithm = kwds.get('algorithm', 'algoA')
+....:        if algorithm == 'algoA':
+....:            return 1
+....:        else:
+....:            return 0
+....:         
+sage: f = MyFunction()
+sage: f(x).n()
+1
+sage: f(x, algorithm='algoB').n()
+0
+```
+At the moment, as with all(?) symbolic functions we get
+
+```
+sage: f(x, algorithm='algoB')
+TypeError: __call__() got an unexpected keyword argument 'algorithm'
+sage: sin(x, algorithm='algoB')
+TypeError: __call__() got an unexpected keyword argument 'algorithm'
+```
+So the ticket should also give a better error message for existing functions.
 
 
 Summary: allow algorithm keyword when _call_()ing BuiltinFunction
```




---

archive/issue_comments_244882.json:
```json
{
    "body": "<a id='comment:5'></a>Isn't this a bug? Hold as no effect:\n\n```\nsage: from sage.symbolic.function import BuiltinFunction\nsage: class MyFunction(BuiltinFunction):\n....:    def __init__(self, name):\n....:        BuiltinFunction.__init__(self, name, nargs=1)\n....:    def _evalf_(self, x, parent=None, algorithm=None):\n....:        print algorithm\n....:        return x\nsage: f = MyFunction('f')\nsage: ex = f(0.0, algorithm='algoA', hold=True); ex\nalgoA\n0.000000000000000\n\nsage: sin(0.0, hold=True)\nsin(0.000000000000000)\n```",
    "created_at": "2014-12-21T14:24:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244882",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>Isn't this a bug? Hold as no effect:

```
sage: from sage.symbolic.function import BuiltinFunction
sage: class MyFunction(BuiltinFunction):
....:    def __init__(self, name):
....:        BuiltinFunction.__init__(self, name, nargs=1)
....:    def _evalf_(self, x, parent=None, algorithm=None):
....:        print algorithm
....:        return x
sage: f = MyFunction('f')
sage: ex = f(0.0, algorithm='algoA', hold=True); ex
algoA
0.000000000000000

sage: sin(0.0, hold=True)
sin(0.000000000000000)
```



---

archive/issue_comments_244883.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,35 @@\n+As per http://trac.sagemath.org/ticket/17489#comment:17 and http://trac.sagemath.org/ticket/17489#comment:23, the ticket should improve the `BuiltinFunction` class, such that subclassed function classes that have an `algorithm=...` keyword given via function call will automatically have this keyword inserted into any `__evalf__` member function call.\n+\n+This means the following should be possible without changes to `subclassedfunction.__call__`:\n+\n+```\n+sage: from sage.symbolic.function import BuiltinFunction\n+sage: class MyFunction(BuiltinFunction):\n+....:    def __init__(self):\n+....:        BuiltinFunction.__init__(self, 'test', nargs=1)\n+....:    def _evalf_(self, x, **kwds):\n+....:        algorithm = kwds.get('algorithm', None)\n+....:        if algorithm == 'algoA':\n+....:            return 1.0\n+....:        else:\n+....:            return 0.0\n+....:    def _eval_(self, x):\n+....:         return self._evalf_try_(x)\n+sage: f = MyFunction()\n+sage: f(0.0, algorithm='algoA')\n+1.00000000000000\n+sage: f(0.0)\n+0.000000000000000\n+```\n+At the moment, as with all(?) symbolic functions we get\n+\n+```\n+sage: f(x, algorithm='algoB')\n+TypeError: __call__() got an unexpected keyword argument 'algorithm'\n+sage: sin(x, algorithm='algoB')\n+TypeError: __call__() got an unexpected keyword argument 'algorithm'\n+```\n+So the ticket should also give a better error message for existing functions.\n \n \n Summary: allow algorithm keyword when _call_()ing BuiltinFunction\n```\n",
    "created_at": "2014-12-22T09:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244883",
    "user": "https://github.com/rwst"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,35 @@
+As per http://trac.sagemath.org/ticket/17489#comment:17 and http://trac.sagemath.org/ticket/17489#comment:23, the ticket should improve the `BuiltinFunction` class, such that subclassed function classes that have an `algorithm=...` keyword given via function call will automatically have this keyword inserted into any `__evalf__` member function call.
+
+This means the following should be possible without changes to `subclassedfunction.__call__`:
+
+```
+sage: from sage.symbolic.function import BuiltinFunction
+sage: class MyFunction(BuiltinFunction):
+....:    def __init__(self):
+....:        BuiltinFunction.__init__(self, 'test', nargs=1)
+....:    def _evalf_(self, x, **kwds):
+....:        algorithm = kwds.get('algorithm', None)
+....:        if algorithm == 'algoA':
+....:            return 1.0
+....:        else:
+....:            return 0.0
+....:    def _eval_(self, x):
+....:         return self._evalf_try_(x)
+sage: f = MyFunction()
+sage: f(0.0, algorithm='algoA')
+1.00000000000000
+sage: f(0.0)
+0.000000000000000
+```
+At the moment, as with all(?) symbolic functions we get
+
+```
+sage: f(x, algorithm='algoB')
+TypeError: __call__() got an unexpected keyword argument 'algorithm'
+sage: sin(x, algorithm='algoB')
+TypeError: __call__() got an unexpected keyword argument 'algorithm'
+```
+So the ticket should also give a better error message for existing functions.
 
 
 Summary: allow algorithm keyword when _call_()ing BuiltinFunction
```




---

archive/issue_comments_244884.json:
```json
{
    "body": "<a id='comment:8'></a>New commits:",
    "created_at": "2014-12-22T09:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244884",
    "user": "https://github.com/rwst"
}
```

<a id='comment:8'></a>New commits:



---

archive/issue_comments_244885.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-22T09:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244885",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_244886.json:
```json
{
    "body": "<a id='comment:9'></a>This means that any function now accepts the `algorithm` keyword which is better than any error message IMHO.\n\n```\nsage: sin(x, algorithm='algoB')\nsin(x)\n```",
    "created_at": "2014-12-22T09:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244886",
    "user": "https://github.com/rwst"
}
```

<a id='comment:9'></a>This means that any function now accepts the `algorithm` keyword which is better than any error message IMHO.

```
sage: sin(x, algorithm='algoB')
sin(x)
```



---

archive/issue_comments_244887.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:5 rws]:\n> Isn't this a bug? Hold as no effect:\n\nI'll include a fix for this in #17489.",
    "created_at": "2014-12-22T17:05:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244887",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'></a>Replying to [comment:5 rws]:
> Isn't this a bug? Hold as no effect:

I'll include a fix for this in #17489.



---

archive/issue_comments_244888.json:
```json
{
    "body": "<a id='comment:11'></a>\n```\nsage: sin(x, algorithm='algoB')\nsin(x)\n```\nGeneral Sage behavior is to raise some sort of not implemented error or something \"unknown algorithm\" - we do this in a number of contexts.",
    "created_at": "2014-12-22T20:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244888",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>
```
sage: sin(x, algorithm='algoB')
sin(x)
```
General Sage behavior is to raise some sort of not implemented error or something "unknown algorithm" - we do this in a number of contexts.



---

archive/issue_comments_244889.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 kcrisman]:\n> {{{\n> sage: sin(x, algorithm='algoB')\n> sin(x)\n> }}}\n> General Sage behavior is to raise some sort of not implemented error or something \"unknown algorithm\" - we do this in a number of contexts.\n\nActually, the `sin` function has no behaviour specified for the `algorithm` keyword and so, the outcome is undefined, meaning it could be either way. Certainly no such convention exists in the documentation. Pragmatically, it would be overkill to implement an algorithm registry for this reason.",
    "created_at": "2014-12-23T07:26:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244889",
    "user": "https://github.com/rwst"
}
```

<a id='comment:12'></a>Replying to [comment:11 kcrisman]:
> {{{
> sage: sin(x, algorithm='algoB')
> sin(x)
> }}}
> General Sage behavior is to raise some sort of not implemented error or something "unknown algorithm" - we do this in a number of contexts.

Actually, the `sin` function has no behaviour specified for the `algorithm` keyword and so, the outcome is undefined, meaning it could be either way. Certainly no such convention exists in the documentation. Pragmatically, it would be overkill to implement an algorithm registry for this reason.



---

archive/issue_comments_244890.json:
```json
{
    "body": "<a id='comment:13'></a>Well, right, in this case it should just say \"undefined keyword\" or something!",
    "created_at": "2014-12-24T02:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244890",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'></a>Well, right, in this case it should just say "undefined keyword" or something!



---

archive/issue_comments_244891.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 kcrisman]:\n> Well, right, in this case it should just say \"undefined keyword\" or something!\n\nIf you so insist, please help with the following design decision. We could\n* A) add a dictionary to the base class (`Function`) containing names of algorithms. The user (who writes subclasses of `Function`) may register names through subclass initialization. Unregistered names given in a `__call__` argument result in error.\n* B) make available the algorithm keyword only in a specific subclass of `Function`. The user would inherit from this subclass. Other existing classes retain their previous behaviour. The user is responsible to give an error in his class for unknown algorithms.\n* C) disallow the algorithm keyword completely from any `__call__` method of `Function` or its subclasses. This means that the end user cannot say `factorial(10^6, algorithm=...)` but should be able to say `f(10^6, hold=True).n(algorithm=...)`. The function creator is responsible to give an error in his class for unknown algorithms.\n\nGranted, C does make some sense in that all numeric issues are moved into `_evalf_`, and it works around shortfalls of A or B. But the end user will hate it. With A, there is additional code (clutter) in `Function` and the subclass must register its algorithm names. With B, it's not a general `Function`-wide solution.\n\nEDIT: C does not make sense with functions returning int or polynomials and having different algorithms, unless the meaning of `f` in `evalf` or 'numerical approximation' is stretched beyond repair.\n\nSee also #15200 where Jeroen argues for hardcoding a few backend choices.\n\n#17489 depends on this.",
    "created_at": "2014-12-25T07:51:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244891",
    "user": "https://github.com/rwst"
}
```

<a id='comment:14'></a>Replying to [comment:13 kcrisman]:
> Well, right, in this case it should just say "undefined keyword" or something!

If you so insist, please help with the following design decision. We could
* A) add a dictionary to the base class (`Function`) containing names of algorithms. The user (who writes subclasses of `Function`) may register names through subclass initialization. Unregistered names given in a `__call__` argument result in error.
* B) make available the algorithm keyword only in a specific subclass of `Function`. The user would inherit from this subclass. Other existing classes retain their previous behaviour. The user is responsible to give an error in his class for unknown algorithms.
* C) disallow the algorithm keyword completely from any `__call__` method of `Function` or its subclasses. This means that the end user cannot say `factorial(10^6, algorithm=...)` but should be able to say `f(10^6, hold=True).n(algorithm=...)`. The function creator is responsible to give an error in his class for unknown algorithms.

Granted, C does make some sense in that all numeric issues are moved into `_evalf_`, and it works around shortfalls of A or B. But the end user will hate it. With A, there is additional code (clutter) in `Function` and the subclass must register its algorithm names. With B, it's not a general `Function`-wide solution.

EDIT: C does not make sense with functions returning int or polynomials and having different algorithms, unless the meaning of `f` in `evalf` or 'numerical approximation' is stretched beyond repair.

See also #15200 where Jeroen argues for hardcoding a few backend choices.

#17489 depends on this.



---

archive/issue_comments_244892.json:
```json
{
    "body": "<a id='comment:15'></a>> EDIT: C does not make sense with functions returning int or polynomials and having different algorithms, unless the meaning of `f` in `evalf` or 'numerical approximation' is stretched beyond repair.\n\nNevertheless, C seems best.",
    "created_at": "2015-02-02T17:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244892",
    "user": "https://github.com/rwst"
}
```

<a id='comment:15'></a>> EDIT: C does not make sense with functions returning int or polynomials and having different algorithms, unless the meaning of `f` in `evalf` or 'numerical approximation' is stretched beyond repair.

Nevertheless, C seems best.



---

archive/issue_comments_244893.json:
```json
{
    "body": "<a id='comment:16'></a>> If you so insist, please help with the following design decision.\n\n\nHmm.  I do kind of like A), actually.  We already have the dictionary of conversions to other systems (Maxima, Mma, etc.), right?  This seems very analogous.  But it sounds like you have some concrete examples of some shortcomings.  I do agree that the end user might not like C).",
    "created_at": "2015-02-03T03:37:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244893",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'></a>> If you so insist, please help with the following design decision.


Hmm.  I do kind of like A), actually.  We already have the dictionary of conversions to other systems (Maxima, Mma, etc.), right?  This seems very analogous.  But it sounds like you have some concrete examples of some shortcomings.  I do agree that the end user might not like C).



---

archive/issue_comments_244894.json:
```json
{
    "body": "<a id='comment:17'></a>Though maybe if all our other functions have C), as a little browsing suggests, maybe it is okay.  For instance, in #17489 I'm not sure Jeroen is suggesting we *must* do this, just that it should be consistent.",
    "created_at": "2015-02-03T03:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244894",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:17'></a>Though maybe if all our other functions have C), as a little browsing suggests, maybe it is okay.  For instance, in #17489 I'm not sure Jeroen is suggesting we *must* do this, just that it should be consistent.



---

archive/issue_comments_244895.json:
```json
{
    "body": "<a id='comment:18'></a>I would propose D:\n\nD) accept any `algorithm` in `__call__`, pass `algorithm` to `_evalf_` (and possibly other methods) and do error handling \"downstream\". For example, the end of `Function.__call__` uses Ginac, so there you could add\n\n```\nif algorithm is not None and algorithm != \"ginac\":\n    raise ValueError(\"unknown algorithm %r for %s\"%(algorithm,self))\n```",
    "created_at": "2015-02-04T16:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244895",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>I would propose D:

D) accept any `algorithm` in `__call__`, pass `algorithm` to `_evalf_` (and possibly other methods) and do error handling "downstream". For example, the end of `Function.__call__` uses Ginac, so there you could add

```
if algorithm is not None and algorithm != "ginac":
    raise ValueError("unknown algorithm %r for %s"%(algorithm,self))
```



---

archive/issue_comments_244896.json:
```json
{
    "body": "<a id='comment:19'></a>Ah OK. This can go into `GinacFunction.__call__`. Maybe I did not consider this solution because `factorial`, which needs to inherit from `GinacFunction` (because of #17547), needs the `algorithm` keyword. But this can be easily and naturally resolved by providing `IntegerGinacFunction` in #17489 with its own `__call__`.",
    "created_at": "2015-02-05T09:34:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244896",
    "user": "https://github.com/rwst"
}
```

<a id='comment:19'></a>Ah OK. This can go into `GinacFunction.__call__`. Maybe I did not consider this solution because `factorial`, which needs to inherit from `GinacFunction` (because of #17547), needs the `algorithm` keyword. But this can be easily and naturally resolved by providing `IntegerGinacFunction` in #17489 with its own `__call__`.



---

archive/issue_comments_244897.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-05T09:36:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244897",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244898.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-05T09:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244898",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_244899.json:
```json
{
    "body": "<a id='comment:21'></a>I really don't like this:\n\n```\nself._algorithm = algorithm\n```",
    "created_at": "2015-02-05T09:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244899",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>I really don't like this:

```
self._algorithm = algorithm
```



---

archive/issue_comments_244900.json:
```json
{
    "body": "<a id='comment:22'></a>I would put this\n\n```\nalgorithm = kwds.get('algorithm')\nif algorithm is not None and algorithm != \"ginac\":\n    raise ValueError(\"unknown algorithm %r for %s\"%(algorithm,self))\n```\nright before calling Ginac (towards the end of `Function.__call__`).",
    "created_at": "2015-02-05T09:52:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244900",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>I would put this

```
algorithm = kwds.get('algorithm')
if algorithm is not None and algorithm != "ginac":
    raise ValueError("unknown algorithm %r for %s"%(algorithm,self))
```
right before calling Ginac (towards the end of `Function.__call__`).



---

archive/issue_comments_244901.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:22 jdemeyer]:\n> I would put this\n> \n> ```\n> algorithm = kwds.get('algorithm')\n> if algorithm is not None and algorithm != \"ginac\":\n>     raise ValueError(\"unknown algorithm %r for %s\"%(algorithm,self))\n> ```\n> right before calling Ginac (towards the end of `Function.__call__`).\n\nBut when you do `sin(x,algorithm='foo')` the `Function.__call__` doesn't even get called (EDIT: because `BuiltinFunction.__call__` doesn't call super) so no error is thrown.",
    "created_at": "2015-02-05T10:10:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244901",
    "user": "https://github.com/rwst"
}
```

<a id='comment:23'></a>Replying to [comment:22 jdemeyer]:
> I would put this
> 
> ```
> algorithm = kwds.get('algorithm')
> if algorithm is not None and algorithm != "ginac":
>     raise ValueError("unknown algorithm %r for %s"%(algorithm,self))
> ```
> right before calling Ginac (towards the end of `Function.__call__`).

But when you do `sin(x,algorithm='foo')` the `Function.__call__` doesn't even get called (EDIT: because `BuiltinFunction.__call__` doesn't call super) so no error is thrown.



---

archive/issue_comments_244902.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-05T14:07:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244902",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244903.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:21 jdemeyer]:\n> I really don't like this:\n> \n> ```\n> self._algorithm = algorithm\n> ```\n\nIndeed, I don't need a class field for this, thanks for the hint. I don't see a better solution for the other issue mentioned, however.",
    "created_at": "2015-02-05T14:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244903",
    "user": "https://github.com/rwst"
}
```

<a id='comment:25'></a>Replying to [comment:21 jdemeyer]:
> I really don't like this:
> 
> ```
> self._algorithm = algorithm
> ```

Indeed, I don't need a class field for this, thanks for the hint. I don't see a better solution for the other issue mentioned, however.



---

archive/issue_comments_244904.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-02-09T06:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244904",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_244905.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:23 rws]:\n> But when you do `sin(x,algorithm='foo')` the `Function.__call__` doesn't even get called (EDIT: because `BuiltinFunction.__call__` doesn't call super) so no error is thrown.\n\n\nIn any case, the place where the exception is raised now isn't correct.",
    "created_at": "2015-02-13T09:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244905",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>Replying to [comment:23 rws]:
> But when you do `sin(x,algorithm='foo')` the `Function.__call__` doesn't even get called (EDIT: because `BuiltinFunction.__call__` doesn't call super) so no error is thrown.


In any case, the place where the exception is raised now isn't correct.



---

archive/issue_comments_244906.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-13T09:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244906",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_244907.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:27 jdemeyer]:\n> In any case, the place where the exception is raised now isn't correct.\n\nPlease be more verbose. It concerns `GinacFunction`s so I think it's placed right, and it obviously works. So I'm probably missing something that you know, and I don't want to fiddle with your `BuiltinFunction` code.",
    "created_at": "2015-02-14T08:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244907",
    "user": "https://github.com/rwst"
}
```

<a id='comment:28'></a>Replying to [comment:27 jdemeyer]:
> In any case, the place where the exception is raised now isn't correct.

Please be more verbose. It concerns `GinacFunction`s so I think it's placed right, and it obviously works. So I'm probably missing something that you know, and I don't want to fiddle with your `BuiltinFunction` code.



---

archive/issue_comments_244908.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2015-04-12T14:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244908",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_244909.json:
```json
{
    "body": "<a id='comment:30'></a>#16812 depends on this.",
    "created_at": "2015-04-12T15:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244909",
    "user": "https://github.com/rwst"
}
```

<a id='comment:30'></a>#16812 depends on this.



---

archive/issue_comments_244910.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-18T08:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244910",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244911.json:
```json
{
    "body": "<a id='comment:32'></a>Let's recap. What I missed is that while `sin(x)` and `sin(1.1)` do not call `Function.__call__` `sin(0)` does. Regarding `sin(1.1)` `BuiltinFunction::__call__` calls `sage.rings.real_mpfr.RealLiteral.sin` directly so any check for 'ginac' would be nonsense. Should we check for any other algorithm keyword there?",
    "created_at": "2015-06-18T08:41:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244911",
    "user": "https://github.com/rwst"
}
```

<a id='comment:32'></a>Let's recap. What I missed is that while `sin(x)` and `sin(1.1)` do not call `Function.__call__` `sin(0)` does. Regarding `sin(1.1)` `BuiltinFunction::__call__` calls `sage.rings.real_mpfr.RealLiteral.sin` directly so any check for 'ginac' would be nonsense. Should we check for any other algorithm keyword there?



---

archive/issue_events_050363.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-06-18T08:41:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17531#event-50363"
}
```



---

archive/issue_comments_244912.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-06-18T08:41:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244912",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_244913.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,37 @@\n+As per http://trac.sagemath.org/ticket/17489#comment:17 and http://trac.sagemath.org/ticket/17489#comment:23, the ticket should improve the `BuiltinFunction` class, such that subclassed function classes that have an `algorithm=...` keyword given via function call will automatically have this keyword inserted into any `__evalf__` member function call.\n \n+This means the following should be possible without changes to `subclassedfunction.__call__`:\n+\n+```\n+sage: from sage.symbolic.function import BuiltinFunction\n+sage: class MyFunction(BuiltinFunction):\n+....:    def __init__(self):\n+....:        BuiltinFunction.__init__(self, 'test', nargs=1)\n+....:    def _evalf_(self, x, **kwds):\n+....:        algorithm = kwds.get('algorithm', None)\n+....:        if algorithm == 'algoA':\n+....:            return 1.0\n+....:        else:\n+....:            return 0.0\n+....:    def _eval_(self, x):\n+....:         return self._evalf_try_(x)\n+sage: f = MyFunction()\n+sage: f(0.0, algorithm='algoA')\n+1.00000000000000\n+sage: f(0.0)\n+0.000000000000000\n+```\n+At the moment, as with all(?) symbolic functions we get\n+\n+```\n+sage: f(x, algorithm='algoB')\n+TypeError: __call__() got an unexpected keyword argument 'algorithm'\n+sage: sin(x, algorithm='algoB')\n+TypeError: __call__() got an unexpected keyword argument 'algorithm'\n+```\n+So the ticket should also give a better error message for existing functions.\n+\n+#16812 and #17489 depend on this.\n \n Summary: allow algorithm keyword when _call_()ing BuiltinFunction\n \n```\n",
    "created_at": "2015-07-09T07:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244913",
    "user": "https://github.com/rwst"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,37 @@
+As per http://trac.sagemath.org/ticket/17489#comment:17 and http://trac.sagemath.org/ticket/17489#comment:23, the ticket should improve the `BuiltinFunction` class, such that subclassed function classes that have an `algorithm=...` keyword given via function call will automatically have this keyword inserted into any `__evalf__` member function call.
 
+This means the following should be possible without changes to `subclassedfunction.__call__`:
+
+```
+sage: from sage.symbolic.function import BuiltinFunction
+sage: class MyFunction(BuiltinFunction):
+....:    def __init__(self):
+....:        BuiltinFunction.__init__(self, 'test', nargs=1)
+....:    def _evalf_(self, x, **kwds):
+....:        algorithm = kwds.get('algorithm', None)
+....:        if algorithm == 'algoA':
+....:            return 1.0
+....:        else:
+....:            return 0.0
+....:    def _eval_(self, x):
+....:         return self._evalf_try_(x)
+sage: f = MyFunction()
+sage: f(0.0, algorithm='algoA')
+1.00000000000000
+sage: f(0.0)
+0.000000000000000
+```
+At the moment, as with all(?) symbolic functions we get
+
+```
+sage: f(x, algorithm='algoB')
+TypeError: __call__() got an unexpected keyword argument 'algorithm'
+sage: sin(x, algorithm='algoB')
+TypeError: __call__() got an unexpected keyword argument 'algorithm'
+```
+So the ticket should also give a better error message for existing functions.
+
+#16812 and #17489 depend on this.
 
 Summary: allow algorithm keyword when _call_()ing BuiltinFunction
 
```




---

archive/issue_events_050364.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-20T12:54:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17531#event-50364"
}
```



---

archive/issue_events_050365.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-20T12:54:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17531#event-50365"
}
```



---

archive/issue_comments_244914.json:
```json
{
    "body": "<a id='comment:34'></a>Ping?",
    "created_at": "2015-10-20T12:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244914",
    "user": "https://github.com/rwst"
}
```

<a id='comment:34'></a>Ping?



---

archive/issue_comments_244915.json:
```json
{
    "body": "<a id='comment:36'></a>Seems the recent `gamma_inc` changes trigger test failures.\n\n---\nNew commits:",
    "created_at": "2016-08-05T07:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244915",
    "user": "https://github.com/rwst"
}
```

<a id='comment:36'></a>Seems the recent `gamma_inc` changes trigger test failures.

---
New commits:



---

archive/issue_comments_244916.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-08-05T07:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244916",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_244917.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-22T08:08:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244917",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244918.json:
```json
{
    "body": "<a id='comment:38'></a>\n```\n**********************************************************************\nFile \"src/sage/functions/other.py\", line 1020, in sage.functions.other.Function_gamma_inc.__init__\nFailed example:\n    gamma_inc(CDF(0,1), 3)\nExpected:\n    0.0032085749933691158 + 0.012406185811871568*I\nGot:\n    0.003208574993369116 + 0.012406185811871567*I\n**********************************************************************\nFile \"src/sage/functions/other.py\", line 1117, in sage.functions.other.Function_gamma_inc._evalf_\nFailed example:\n    gamma_inc(float(-1), float(-1))\nExpected:\n    (-0.8231640121031085+3.141592653589793j)\nGot:\n    (-0.8231640121031085-3.141592653589793j)\n**********************************************************************\nFile \"src/sage/functions/other.py\", line 1119, in sage.functions.other.Function_gamma_inc._evalf_\nFailed example:\n    gamma_inc(RR(-1), RR(-1))\nExpected:\n    -0.823164012103109 + 3.14159265358979*I\nGot:\n    -0.823164012103109 - 3.14159265358979*I\n**********************************************************************\nFile \"src/sage/functions/other.py\", line 1126, in sage.functions.other.Function_gamma_inc._evalf_\nFailed example:\n    r = gamma_inc(float(0), float(1)); r\nExpected:\n    0.21938393439552029\nGot:\n    0.21938393439552026\n```",
    "created_at": "2016-09-22T08:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244918",
    "user": "https://github.com/rwst"
}
```

<a id='comment:38'></a>
```
**********************************************************************
File "src/sage/functions/other.py", line 1020, in sage.functions.other.Function_gamma_inc.__init__
Failed example:
    gamma_inc(CDF(0,1), 3)
Expected:
    0.0032085749933691158 + 0.012406185811871568*I
Got:
    0.003208574993369116 + 0.012406185811871567*I
**********************************************************************
File "src/sage/functions/other.py", line 1117, in sage.functions.other.Function_gamma_inc._evalf_
Failed example:
    gamma_inc(float(-1), float(-1))
Expected:
    (-0.8231640121031085+3.141592653589793j)
Got:
    (-0.8231640121031085-3.141592653589793j)
**********************************************************************
File "src/sage/functions/other.py", line 1119, in sage.functions.other.Function_gamma_inc._evalf_
Failed example:
    gamma_inc(RR(-1), RR(-1))
Expected:
    -0.823164012103109 + 3.14159265358979*I
Got:
    -0.823164012103109 - 3.14159265358979*I
**********************************************************************
File "src/sage/functions/other.py", line 1126, in sage.functions.other.Function_gamma_inc._evalf_
Failed example:
    r = gamma_inc(float(0), float(1)); r
Expected:
    0.21938393439552029
Got:
    0.21938393439552026
```



---

archive/issue_comments_244919.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-22T08:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244919",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244920.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-09-22T08:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244920",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_244921.json:
```json
{
    "body": "<a id='comment:41'></a>I'll close this as wontfix, my argument is in #17489#comment:48",
    "created_at": "2018-03-03T16:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244921",
    "user": "https://github.com/rwst"
}
```

<a id='comment:41'></a>I'll close this as wontfix, my argument is in #17489#comment:48



---

archive/issue_events_050366.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2018-03-03T16:15:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17531#event-50366"
}
```



---

archive/issue_events_050367.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2018-03-03T16:15:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17531#event-50367"
}
```



---

archive/issue_comments_244922.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-03-03T16:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244922",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_244923.json:
```json
{
    "body": "<a id='comment:42'></a>closing positively reviewed duplicates",
    "created_at": "2018-05-18T17:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244923",
    "user": "https://github.com/videlec"
}
```

<a id='comment:42'></a>closing positively reviewed duplicates



---

archive/issue_events_050368.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-18T17:16:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17531#event-50368"
}
```



---

archive/issue_comments_244924.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2018-05-18T17:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17531#issuecomment-244924",
    "user": "https://github.com/videlec"
}
```

Resolution: wontfix
