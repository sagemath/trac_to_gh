# Issue 17045: Poset directed_subset() doesn't check for 2. argument

archive/issues_016808.json:
```json
{
    "body": "\n```\nPoset({0:[1]}).directed_subset([1], 'cat-says-meow')\n```\n\ndoes not give error message. Only 'up' and 'down' should be accepted.\n\n\n**Branch/Commit:** [b2ad1980a0fc795728b0781a7270f8e0b26f04d9](https://github.com/sagemath/sagetrac-mirror/commit/b2ad1980a0fc795728b0781a7270f8e0b26f04d9)\n\n**Reviewer:** Nathann Cohen\n\n**Author:** Jori M\u00e4ntysalo\n\nIssue created by migration from https://trac.sagemath.org/ticket/17045\n\n",
    "closed_at": "2014-09-27T12:56:56Z",
    "created_at": "2014-09-26T09:32:40Z",
    "labels": [
        "component: combinatorics",
        "trivial",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Poset directed_subset() doesn't check for 2. argument",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17045",
    "user": "https://github.com/jm58660"
}
```

```
Poset({0:[1]}).directed_subset([1], 'cat-says-meow')
```

does not give error message. Only 'up' and 'down' should be accepted.


**Branch/Commit:** [b2ad1980a0fc795728b0781a7270f8e0b26f04d9](https://github.com/sagemath/sagetrac-mirror/commit/b2ad1980a0fc795728b0781a7270f8e0b26f04d9)

**Reviewer:** Nathann Cohen

**Author:** Jori Mäntysalo

Issue created by migration from https://trac.sagemath.org/ticket/17045





---

archive/issue_comments_274755.json:
```json
{
    "body": "**Branch:** [u/jmantysalo/poset_directed_subset___doesn_t_check_for_2__argument](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/poset_directed_subset___doesn_t_check_for_2__argument)",
    "created_at": "2014-09-26T09:46:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274755",
    "user": "https://github.com/jm58660"
}
```

**Branch:** [u/jmantysalo/poset_directed_subset___doesn_t_check_for_2__argument](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/poset_directed_subset___doesn_t_check_for_2__argument)



---

archive/issue_comments_274756.json:
```json
{
    "body": "**Commit:** [a9336b45a7212825411ad37ac82cc3ec34df7db6](https://github.com/sagemath/sagetrac-mirror/commit/a9336b45a7212825411ad37ac82cc3ec34df7db6)",
    "created_at": "2014-09-26T09:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274756",
    "user": "https://github.com/jm58660"
}
```

**Commit:** [a9336b45a7212825411ad37ac82cc3ec34df7db6](https://github.com/sagemath/sagetrac-mirror/commit/a9336b45a7212825411ad37ac82cc3ec34df7db6)



---

archive/issue_comments_274757.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2014-09-26T09:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274757",
    "user": "https://github.com/jm58660"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_274758.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9336b45a7212825411ad37ac82cc3ec34df7db6\">a9336b4</a></td><td><code>Added check: direction must be 'up' or 'down'.</code></td></tr></table>\n",
    "created_at": "2014-09-26T09:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274758",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9336b45a7212825411ad37ac82cc3ec34df7db6">a9336b4</a></td><td><code>Added check: direction must be 'up' or 'down'.</code></td></tr></table>




---

archive/issue_comments_274759.json:
```json
{
    "body": "**Author:** Jori M\u00e4ntysalo",
    "created_at": "2014-09-26T11:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274759",
    "user": "https://github.com/jm58660"
}
```

**Author:** Jori Mäntysalo



---

archive/issue_comments_274760.json:
```json
{
    "body": "<a id='comment:4'></a>\nCould you close #17046 and make all modifications in this ticket ?\n\nNathann",
    "created_at": "2014-09-26T11:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274760",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
Could you close #17046 and make all modifications in this ticket ?

Nathann



---

archive/issue_comments_274761.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [ncohen](#comment%3A4):\n> Could you close #17046 and make all modifications in this ticket ?\n\n\nYes. Or at least try, let's see if it works.",
    "created_at": "2014-09-26T12:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274761",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:5'></a>
Replying to [ncohen](#comment%3A4):
> Could you close #17046 and make all modifications in this ticket ?


Yes. Or at least try, let's see if it works.



---

archive/issue_comments_274762.json:
```json
{
    "body": "**Changing commit** from \"[a9336b45a7212825411ad37ac82cc3ec34df7db6](https://github.com/sagemath/sagetrac-mirror/commit/a9336b45a7212825411ad37ac82cc3ec34df7db6)\" to \"[37af4841c07479f7b628f3560f745f81b6858eca](https://github.com/sagemath/sagetrac-mirror/commit/37af4841c07479f7b628f3560f745f81b6858eca)\".",
    "created_at": "2014-09-26T12:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274762",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a9336b45a7212825411ad37ac82cc3ec34df7db6](https://github.com/sagemath/sagetrac-mirror/commit/a9336b45a7212825411ad37ac82cc3ec34df7db6)" to "[37af4841c07479f7b628f3560f745f81b6858eca](https://github.com/sagemath/sagetrac-mirror/commit/37af4841c07479f7b628f3560f745f81b6858eca)".



---

archive/issue_comments_274763.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37af4841c07479f7b628f3560f745f81b6858eca\">37af484</a></td><td><code>Merge #17046, i.e. same check for directed_subset() to this one.</code></td></tr></table>\n",
    "created_at": "2014-09-26T12:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274763",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37af4841c07479f7b628f3560f745f81b6858eca">37af484</a></td><td><code>Merge #17046, i.e. same check for directed_subset() to this one.</code></td></tr></table>




---

archive/issue_comments_274764.json:
```json
{
    "body": "<a id='comment:7'></a>\nThank you for merging them ! Usually we split tickets when they are very big and/or hard to review, or when they do very unrelated things, but in this case it's all very simple and it is less work for the release manager (who checks ALL of Sage's tests for every ticket, i.e. a LOT of computations).\n\nLet me finish a ticket I am writing and I will review that immediately after.\n\nNathann",
    "created_at": "2014-09-26T12:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274764",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>
Thank you for merging them ! Usually we split tickets when they are very big and/or hard to review, or when they do very unrelated things, but in this case it's all very simple and it is less work for the release manager (who checks ALL of Sage's tests for every ticket, i.e. a LOT of computations).

Let me finish a ticket I am writing and I will review that immediately after.

Nathann



---

archive/issue_comments_274765.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [ncohen](#comment%3A7):\n \n> Let me finish a ticket I am writing and I will review that immediately after.\n\n\nNo hurry. This one would have \"extremely trivial\" priority if we would have it.\n\nIn future I'll try to make slightly bigger chunks when correcting minor things like this one.",
    "created_at": "2014-09-26T12:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274765",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:8'></a>
Replying to [ncohen](#comment%3A7):
 
> Let me finish a ticket I am writing and I will review that immediately after.


No hurry. This one would have "extremely trivial" priority if we would have it.

In future I'll try to make slightly bigger chunks when correcting minor things like this one.



---

archive/issue_comments_274766.json:
```json
{
    "body": "<a id='comment:9'></a>\nHello again !\n\nTwo comments:\n\n1) I'm sorry to say that if you write `raise ValueError, message` the same guys who complained about your \"x <> y\" last time will come and tell you that it is not \"PEP-<whatever>\". Could you change it into `raise ValueError(\"message\")` ?\n\n2) I do not believe that you need to modify `finite_poset` at all. Indeed, one function calls the other, so if there is anything wrong with respect to `direction` an exception will be raised anyway. What do you think ?\n\nNathann",
    "created_at": "2014-09-26T12:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274766",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>
Hello again !

Two comments:

1) I'm sorry to say that if you write `raise ValueError, message` the same guys who complained about your "x <> y" last time will come and tell you that it is not "PEP-<whatever>". Could you change it into `raise ValueError("message")` ?

2) I do not believe that you need to modify `finite_poset` at all. Indeed, one function calls the other, so if there is anything wrong with respect to `direction` an exception will be raised anyway. What do you think ?

Nathann



---

archive/issue_comments_274767.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2014-09-26T12:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274767",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_274768.json:
```json
{
    "body": "**Changing commit** from \"[37af4841c07479f7b628f3560f745f81b6858eca](https://github.com/sagemath/sagetrac-mirror/commit/37af4841c07479f7b628f3560f745f81b6858eca)\" to \"[b2ad1980a0fc795728b0781a7270f8e0b26f04d9](https://github.com/sagemath/sagetrac-mirror/commit/b2ad1980a0fc795728b0781a7270f8e0b26f04d9)\".",
    "created_at": "2014-09-26T12:54:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274768",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[37af4841c07479f7b628f3560f745f81b6858eca](https://github.com/sagemath/sagetrac-mirror/commit/37af4841c07479f7b628f3560f745f81b6858eca)" to "[b2ad1980a0fc795728b0781a7270f8e0b26f04d9](https://github.com/sagemath/sagetrac-mirror/commit/b2ad1980a0fc795728b0781a7270f8e0b26f04d9)".



---

archive/issue_comments_274769.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2ad1980a0fc795728b0781a7270f8e0b26f04d9\">b2ad198</a></td><td><code>Changed \"raise type, text\" to \"raise type(text)\".</code></td></tr></table>\n",
    "created_at": "2014-09-26T12:54:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274769",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2ad1980a0fc795728b0781a7270f8e0b26f04d9">b2ad198</a></td><td><code>Changed "raise type, text" to "raise type(text)".</code></td></tr></table>




---

archive/issue_comments_274770.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [ncohen](#comment%3A9):\n\n> 1) I'm sorry to say that if you write `raise ValueError, message` the same guys who complained about your \"x <> y\" last time will come and tell you that it is not \"PEP-<whatever>\". Could you change it into `raise ValueError(\"message\")` ?\n\n\nDone this. Good to obey PEP-rules, nothing to be sorry about.\n\n> 2) I do not believe that you need to modify `finite_poset` at all. Indeed, one function calls the other, so if there is anything wrong with respect to `direction` an exception will be raised anyway. What do you think ?\n\n\nI don't like the idea. `directed_subsets()` return a function. Hence error message would be seen only after using it.",
    "created_at": "2014-09-26T12:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274770",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:11'></a>
Replying to [ncohen](#comment%3A9):

> 1) I'm sorry to say that if you write `raise ValueError, message` the same guys who complained about your "x <> y" last time will come and tell you that it is not "PEP-<whatever>". Could you change it into `raise ValueError("message")` ?


Done this. Good to obey PEP-rules, nothing to be sorry about.

> 2) I do not believe that you need to modify `finite_poset` at all. Indeed, one function calls the other, so if there is anything wrong with respect to `direction` an exception will be raised anyway. What do you think ?


I don't like the idea. `directed_subsets()` return a function. Hence error message would be seen only after using it.



---

archive/issue_comments_274771.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2014-09-26T12:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274771",
    "user": "https://github.com/jm58660"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_274772.json:
```json
{
    "body": "<a id='comment:12'></a>\n> I don't like the idea. `directed_subsets()` return a function. Hence error message would be seen only after using it.\n\n\nMy mistake, I had not noticed.\n\nNathann",
    "created_at": "2014-09-26T13:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274772",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>
> I don't like the idea. `directed_subsets()` return a function. Hence error message would be seen only after using it.


My mistake, I had not noticed.

Nathann



---

archive/issue_comments_274773.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2014-09-26T13:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274773",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_274774.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2014-09-26T13:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274774",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_comments_274775.json:
```json
{
    "body": "<a id='comment:13'></a>\nThennnnnnnn it's good to go !\n\nThank you very much for taking the time to clean this code, by the way.\n\nNathann",
    "created_at": "2014-09-26T13:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274775",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>
Thennnnnnnn it's good to go !

Thank you very much for taking the time to clean this code, by the way.

Nathann



---

archive/issue_comments_274776.json:
```json
{
    "body": "**Changing reviewer** from \"Nathann Cohen\" to \"\".",
    "created_at": "2014-09-26T13:05:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274776",
    "user": "https://github.com/jm58660"
}
```

**Changing reviewer** from "Nathann Cohen" to "".



---

archive/issue_comments_274777.json:
```json
{
    "body": "<a id='comment:14'></a>\nBtw, if `raise type, text` is against some PEP, then also http://www.sagemath.org/doc/thematic_tutorials/tutorial-programming-python.html#control-structures should be changed.\n\nAlso at least on `graphs/graph_plot.py` function `layout_tree` should be changed, see parameter `orientation`. I left that for now.",
    "created_at": "2014-09-26T13:05:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274777",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:14'></a>
Btw, if `raise type, text` is against some PEP, then also http://www.sagemath.org/doc/thematic_tutorials/tutorial-programming-python.html#control-structures should be changed.

Also at least on `graphs/graph_plot.py` function `layout_tree` should be changed, see parameter `orientation`. I left that for now.



---

archive/issue_comments_274778.json:
```json
{
    "body": "<a id='comment:15'></a>\nWell, change it if you like but as far as I am concerned this can all be changed automatically if we want to. Though apparently people also fear big change sets like that.\n\nI just don't care much either way `:-P`\n\nNathann",
    "created_at": "2014-09-26T13:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274778",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>
Well, change it if you like but as far as I am concerned this can all be changed automatically if we want to. Though apparently people also fear big change sets like that.

I just don't care much either way `:-P`

Nathann



---

archive/issue_comments_274779.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2014-09-26T13:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274779",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_events_056641.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-27T12:56:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17045#event-56641"
}
```



---

archive/issue_comments_274780.json:
```json
{
    "body": "**Changing branch** from \"[u/jmantysalo/poset_directed_subset___doesn_t_check_for_2__argument](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/poset_directed_subset___doesn_t_check_for_2__argument)\" to \"[b2ad1980a0fc795728b0781a7270f8e0b26f04d9](https://github.com/sagemath/sagetrac-mirror/commit/b2ad1980a0fc795728b0781a7270f8e0b26f04d9)\".",
    "created_at": "2014-09-27T12:56:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17045#issuecomment-274780",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jmantysalo/poset_directed_subset___doesn_t_check_for_2__argument](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/poset_directed_subset___doesn_t_check_for_2__argument)" to "[b2ad1980a0fc795728b0781a7270f8e0b26f04d9](https://github.com/sagemath/sagetrac-mirror/commit/b2ad1980a0fc795728b0781a7270f8e0b26f04d9)".
