# Issue 17671: gcd and xgcd over fields, PID and UFD

archive/issues_017434.json:
```json
{
    "assignees": [],
    "body": "As reported on [sage-support](https://groups.google.com/forum/#!topic/sage-support/AYDqdxy5fTw), gcd and xgcd disagree on fraction fields\n\n```\nsage: gcd(6/1,2/1)\n2\nsage: xgcd(6/1,2/1)\n(1, 1/6, 0)\n```\n\nIn this ticket we:\n1. Ensure that `gcd` and `xgcd` are compatible over quotient fields by implementing the `xgcd` in the appropriate place. In particular, with that branch we have\n\n  ```\n  sage: xgcd(6/1,2/1)\n  (2, 0, 1)\n  sage: xgcd(5/2, 3/4)\n  (1/4, -1/2, 2)\n   ```\n2. We fix the `xgcd` for trivial cases in `rings.polynomial.polynomial_element_generic.Polynomial_generic_field` in order that `gcd` and `xgcd` agree for them.\n3. We introduce a generic test `_test_gcd_vs_xgcd` in the category `PrincipalIdealDomains` to ensure the compatibility of `gcd` and `xgcd`.\n4. Modify the previous behavior for real numbers\n\n  ```\n  sage: gcd(2.0, 4.0)\n  2\n  sage: gcd(2.0, 4.0).parent()\n  Integer Ring\n   ```\n   The only difference is that now, Sage returns floating point with the same parent\n\n  ```\n  sage: gcd(2.0, 4.0)\n  2.00000000000000\n  sage: gcd(2.0, 4.0).parent()\n  Real Field with 53 bits of precision\n   ```\n   And the same kind of behavior will also hold for lcm and xgcd.\n\nNote:\n\nThere is a method `xgcd` implemented for univariate polynomial over ZZ. ~~This is not a proper name since it has nothing to do with `gcd`~~ This might not be the best name since the first term is not the gcd in general (see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/JV8fCPUqTzo) and #17674)\n\nDepends on #17675\n\n**Branch/Commit:** [2e0d79e1c767b471dc143ab55cd5490de342bae0](https://github.com/sagemath/sagetrac-mirror/commit/2e0d79e1c767b471dc143ab55cd5490de342bae0)\n\n**Reviewer:** Bruno Grenet\n\n**Author:** Vincent Delecroix\n\nIssue created by migration from https://trac.sagemath.org/ticket/17671\n\n",
    "closed_at": "2015-01-29T22:41:52Z",
    "created_at": "2015-01-25T19:31:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "gcd and xgcd over fields, PID and UFD",
    "type": "issue",
    "updated_at": "2015-01-29T22:41:52Z",
    "url": "https://github.com/sagemath/sage/issues/17671",
    "user": "https://github.com/videlec"
}
```
As reported on [sage-support](https://groups.google.com/forum/#!topic/sage-support/AYDqdxy5fTw), gcd and xgcd disagree on fraction fields

```
sage: gcd(6/1,2/1)
2
sage: xgcd(6/1,2/1)
(1, 1/6, 0)
```

In this ticket we:
1. Ensure that `gcd` and `xgcd` are compatible over quotient fields by implementing the `xgcd` in the appropriate place. In particular, with that branch we have

  ```
  sage: xgcd(6/1,2/1)
  (2, 0, 1)
  sage: xgcd(5/2, 3/4)
  (1/4, -1/2, 2)
   ```
2. We fix the `xgcd` for trivial cases in `rings.polynomial.polynomial_element_generic.Polynomial_generic_field` in order that `gcd` and `xgcd` agree for them.
3. We introduce a generic test `_test_gcd_vs_xgcd` in the category `PrincipalIdealDomains` to ensure the compatibility of `gcd` and `xgcd`.
4. Modify the previous behavior for real numbers

  ```
  sage: gcd(2.0, 4.0)
  2
  sage: gcd(2.0, 4.0).parent()
  Integer Ring
   ```
   The only difference is that now, Sage returns floating point with the same parent

  ```
  sage: gcd(2.0, 4.0)
  2.00000000000000
  sage: gcd(2.0, 4.0).parent()
  Real Field with 53 bits of precision
   ```
   And the same kind of behavior will also hold for lcm and xgcd.

Note:

There is a method `xgcd` implemented for univariate polynomial over ZZ. ~~This is not a proper name since it has nothing to do with `gcd`~~ This might not be the best name since the first term is not the gcd in general (see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/JV8fCPUqTzo) and #17674)

Depends on #17675

**Branch/Commit:** [2e0d79e1c767b471dc143ab55cd5490de342bae0](https://github.com/sagemath/sagetrac-mirror/commit/2e0d79e1c767b471dc143ab55cd5490de342bae0)

**Reviewer:** Bruno Grenet

**Author:** Vincent Delecroix

Issue created by migration from https://trac.sagemath.org/ticket/17671





---

archive/issue_events_216147.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-25T19:31:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17671#event-216147"
}
```



---

archive/issue_events_216148.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-25T19:31:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
    "label_color": "08517b",
    "label_name": "component: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17671#event-216148"
}
```



---

archive/issue_events_216149.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-25T19:31:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17671#event-216149"
}
```



---

archive/issue_comments_240936.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nI am annoyed with the current implementation... it is written in the generic `gcd` of `categories.fields` that\n\n```\nFor fields of characteristic zero (i.e., containing the\nintegers as a sub-ring), evaluation in the integer ring is\nattempted. This is for backwards compatibility.::\n    sage: gcd(6.0,8); gcd(6.0,8).parent()\n    2\n    Integer Ring\n```\nThis is completely crazy! And moreover different from what is in gcd!!",
    "created_at": "2015-01-25T20:21:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240936",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'>**Comment 1:**</a>
I am annoyed with the current implementation... it is written in the generic `gcd` of `categories.fields` that

```
For fields of characteristic zero (i.e., containing the
integers as a sub-ring), evaluation in the integer ring is
attempted. This is for backwards compatibility.::
    sage: gcd(6.0,8); gcd(6.0,8).parent()
    2
    Integer Ring
```
This is completely crazy! And moreover different from what is in gcd!!



---

archive/issue_comments_240937.json:
```json
{
    "body": "**Dependencies:** #17673",
    "created_at": "2015-01-25T22:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240937",
    "user": "https://github.com/videlec"
}
```

**Dependencies:** #17673



---

archive/issue_events_216150.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-25T23:43:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17671#event-216150"
}
```



---

archive/issue_comments_240938.json:
```json
{
    "body": "**Commit:** [d8a03d7fa1dd0e401adbae8e2a16ccbfb1902392](https://github.com/sagemath/sagetrac-mirror/commit/d8a03d7fa1dd0e401adbae8e2a16ccbfb1902392)",
    "created_at": "2015-01-25T23:43:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240938",
    "user": "https://github.com/videlec"
}
```

**Commit:** [d8a03d7fa1dd0e401adbae8e2a16ccbfb1902392](https://github.com/sagemath/sagetrac-mirror/commit/d8a03d7fa1dd0e401adbae8e2a16ccbfb1902392)



---

archive/issue_comments_240939.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d2009c7539cb638e492e0518f4dc11cc7f1d34c\">7d2009c</a></td><td><code>trac #17673: __module__/__name__ for coerce_binop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16d942dbe9a8ff28e5762fcb3e8f98b6ab8bdb90\">16d942d</a></td><td><code>trac #17671: compatibility of gcd and xgcd</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8a03d7fa1dd0e401adbae8e2a16ccbfb1902392\">d8a03d7</a></td><td><code>trac #17671: fix doctests</code></td></tr></table>\n",
    "created_at": "2015-01-25T23:43:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240939",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'>**Comment 3:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d2009c7539cb638e492e0518f4dc11cc7f1d34c">7d2009c</a></td><td><code>trac #17673: __module__/__name__ for coerce_binop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16d942dbe9a8ff28e5762fcb3e8f98b6ab8bdb90">16d942d</a></td><td><code>trac #17671: compatibility of gcd and xgcd</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8a03d7fa1dd0e401adbae8e2a16ccbfb1902392">d8a03d7</a></td><td><code>trac #17671: fix doctests</code></td></tr></table>




---

archive/issue_comments_240940.json:
```json
{
    "body": "**Branch:** [u/vdelecroix/17671](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/17671)",
    "created_at": "2015-01-25T23:43:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240940",
    "user": "https://github.com/videlec"
}
```

**Branch:** [u/vdelecroix/17671](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/17671)



---

archive/issue_comments_240941.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,4 +7,26 @@\n (1, 1/6, 0)\n ```\n \n-We implement a `xgcd` for the `QuotientFields` category in order to fix that (there was a `gcd` here without a `xgcd`).\n+We implement a `xgcd` for the `QuotientFields` category in order to fix that (there was a `gcd` here without a `xgcd`). We also check that for PID the `gcd` and `xgcd` agree by implementing a `_test_gcd_vs_xgcd`. With that branch\n+\n+```\n+sage: xgcd(6/1,2/1)\n+(2, 0, 1)\n+sage: xgcd(5/2, 3/4)\n+(1/4, -1/2, 2)\n+```\n+which is consistent with `gcd`.\n+\n+QUESTIONS:\n+\n+1. In the previous implementation of gcd in `sage.categories.fields` there is a backward compatibility weirdness\n+\n+  ```\n+  sage: gcd(2.0, 4.0)\n+  2\n+  sage: gcd(2.0, 4.0).parent()\n+  Integer Ring\n+   ```\n+   For the moment, I propagated this to `lcm` and `xgcd`.\n+\n+2. There is a method `xgcd` implemented for univariate polynomial over ZZ. This is not a proper name since it has nothing to do with `gcd` (see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/JV8fCPUqTzo))\n``````\n",
    "created_at": "2015-01-25T23:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240941",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,4 +7,26 @@
 (1, 1/6, 0)
 ```
 
-We implement a `xgcd` for the `QuotientFields` category in order to fix that (there was a `gcd` here without a `xgcd`).
+We implement a `xgcd` for the `QuotientFields` category in order to fix that (there was a `gcd` here without a `xgcd`). We also check that for PID the `gcd` and `xgcd` agree by implementing a `_test_gcd_vs_xgcd`. With that branch
+
+```
+sage: xgcd(6/1,2/1)
+(2, 0, 1)
+sage: xgcd(5/2, 3/4)
+(1/4, -1/2, 2)
+```
+which is consistent with `gcd`.
+
+QUESTIONS:
+
+1. In the previous implementation of gcd in `sage.categories.fields` there is a backward compatibility weirdness
+
+  ```
+  sage: gcd(2.0, 4.0)
+  2
+  sage: gcd(2.0, 4.0).parent()
+  Integer Ring
+   ```
+   For the moment, I propagated this to `lcm` and `xgcd`.
+
+2. There is a method `xgcd` implemented for univariate polynomial over ZZ. This is not a proper name since it has nothing to do with `gcd` (see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/JV8fCPUqTzo))
``````




---

archive/issue_events_216151.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-25T23:51:18Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "rename": {
        "from": "Implement gcd for fraction fields",
        "to": "Implement xgcd for fraction fields"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17671#event-216151"
}
```



---

archive/issue_comments_240942.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nIn `src/sage/categories/quotient_fields.py`, lines 262-270:\n\n```python\n            except (AttributeError, NotImplementedError, TypeError, ValueError):\n                zero = self.parent.zero()\n                one  = self.parent.one()\n                if self == zero:\n                    return (other, zero, one)\n                elif other == zero:\n                    return (self, one, zero)\n                else:\n                    return (zero, zero, zero)\n```\n\nI would have returned `one` as soon as one of `self` and `other` is nonzero, and `zero` only when none is nonzero. The current code is not consistent (if I am not mistaken) with the implementation of `gcd` (lines 125-128).",
    "created_at": "2015-01-26T13:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240942",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:6'>**Comment 6:**</a>
In `src/sage/categories/quotient_fields.py`, lines 262-270:

```python
            except (AttributeError, NotImplementedError, TypeError, ValueError):
                zero = self.parent.zero()
                one  = self.parent.one()
                if self == zero:
                    return (other, zero, one)
                elif other == zero:
                    return (self, one, zero)
                else:
                    return (zero, zero, zero)
```

I would have returned `one` as soon as one of `self` and `other` is nonzero, and `zero` only when none is nonzero. The current code is not consistent (if I am not mistaken) with the implementation of `gcd` (lines 125-128).



---

archive/issue_comments_240943.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nReplying to [@bgrenet](#comment%3A6):\n> In `src/sage/categories/quotient_fields.py`, lines 262-270:\n> ...\n> I would have returned `one` as soon as one of `self` and `other` is nonzero, and `zero` only when none is nonzero.\n\nYou are totally right! Thanks!\n\nVincent",
    "created_at": "2015-01-26T13:45:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240943",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'>**Comment 7:**</a>
Replying to [@bgrenet](#comment%3A6):
> In `src/sage/categories/quotient_fields.py`, lines 262-270:
> ...
> I would have returned `one` as soon as one of `self` and `other` is nonzero, and `zero` only when none is nonzero.

You are totally right! Thanks!

Vincent



---

archive/issue_comments_240944.json:
```json
{
    "body": "**Changing commit** from \"[d8a03d7fa1dd0e401adbae8e2a16ccbfb1902392](https://github.com/sagemath/sagetrac-mirror/commit/d8a03d7fa1dd0e401adbae8e2a16ccbfb1902392)\" to \"[401193ce270c603dc80ebc1028ff46d0eb662c6c](https://github.com/sagemath/sagetrac-mirror/commit/401193ce270c603dc80ebc1028ff46d0eb662c6c)\".",
    "created_at": "2015-01-26T15:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240944",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[d8a03d7fa1dd0e401adbae8e2a16ccbfb1902392](https://github.com/sagemath/sagetrac-mirror/commit/d8a03d7fa1dd0e401adbae8e2a16ccbfb1902392)" to "[401193ce270c603dc80ebc1028ff46d0eb662c6c](https://github.com/sagemath/sagetrac-mirror/commit/401193ce270c603dc80ebc1028ff46d0eb662c6c)".



---

archive/issue_comments_240945.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f22ac97d0f1a45f8c23cf8b9064c0f652b6e6b30\">f22ac97</a></td><td><code>trac #17671: (review) fix gcd/xgcd in QuotientFields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/401193ce270c603dc80ebc1028ff46d0eb662c6c\">401193c</a></td><td><code>trac #17671: fix xgcd of polynomial_field_generic</code></td></tr></table>\n",
    "created_at": "2015-01-26T15:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240945",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>**Comment 8:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f22ac97d0f1a45f8c23cf8b9064c0f652b6e6b30">f22ac97</a></td><td><code>trac #17671: (review) fix gcd/xgcd in QuotientFields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/401193ce270c603dc80ebc1028ff46d0eb662c6c">401193c</a></td><td><code>trac #17671: fix xgcd of polynomial_field_generic</code></td></tr></table>




---

archive/issue_comments_240946.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\n* In `src/sage/rings/arith.py`, lines 1901-1910, the introducing sentence should to my mind be: `Here is an example of a xgcd for two polynomials over the integers, where the linear combination is not the gcd but the gcd multiplied by the resultant::`. \n\n```python\n\n    Here is an example of a xgcd for two polynomials over the integers, where the linear\n    combination is not the gcd but the resultant::\n\n        sage: R.<x> = ZZ[]\n        sage: gcd(2*x*(x-1), x^2)\n        x\n        sage: xgcd(2*x*(x-1), x^2)\n        (2*x, -1, 2)\n        sage: (2*(x-1)).resultant(x)\n        2\n```\n\n\n* I do not understand exactly what you want to do with your function `_test_gcd_vs_xgcd()`: As discussed, it is not clear that the results should always be the same. \n\n* To answer your questions: \n  1. As I've said on sage-devel, I am clearly in favor of `gcd(RR(6), RR(3)).parent()` to return `Real Field with 53 bits of precision` rather than `Integer Ring`. \n  2. I would keep the name `xgcd` though, with a clear documentation.\n \n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f22ac97d0f1a45f8c23cf8b9064c0f652b6e6b30\">f22ac97</a></td><td><code>trac #17671: (review) fix gcd/xgcd in QuotientFields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/401193ce270c603dc80ebc1028ff46d0eb662c6c\">401193c</a></td><td><code>trac #17671: fix xgcd of polynomial_field_generic</code></td></tr></table>\n",
    "created_at": "2015-01-26T15:21:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240946",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:9'>**Comment 9:**</a>
* In `src/sage/rings/arith.py`, lines 1901-1910, the introducing sentence should to my mind be: `Here is an example of a xgcd for two polynomials over the integers, where the linear combination is not the gcd but the gcd multiplied by the resultant::`. 

```python

    Here is an example of a xgcd for two polynomials over the integers, where the linear
    combination is not the gcd but the resultant::

        sage: R.<x> = ZZ[]
        sage: gcd(2*x*(x-1), x^2)
        x
        sage: xgcd(2*x*(x-1), x^2)
        (2*x, -1, 2)
        sage: (2*(x-1)).resultant(x)
        2
```


* I do not understand exactly what you want to do with your function `_test_gcd_vs_xgcd()`: As discussed, it is not clear that the results should always be the same. 

* To answer your questions: 
  1. As I've said on sage-devel, I am clearly in favor of `gcd(RR(6), RR(3)).parent()` to return `Real Field with 53 bits of precision` rather than `Integer Ring`. 
  2. I would keep the name `xgcd` though, with a clear documentation.
 
---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f22ac97d0f1a45f8c23cf8b9064c0f652b6e6b30">f22ac97</a></td><td><code>trac #17671: (review) fix gcd/xgcd in QuotientFields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/401193ce270c603dc80ebc1028ff46d0eb662c6c">401193c</a></td><td><code>trac #17671: fix xgcd of polynomial_field_generic</code></td></tr></table>




---

archive/issue_comments_240947.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nReplying to [@bgrenet](#comment%3A9):\n> * In `src/sage/rings/arith.py`, lines 1901-1910, the introducing sentence should to my mind be:\n\nright\n\n> * I do not understand exactly what you want to do with your function `_test_gcd_vs_xgcd()`: As discussed, it is not clear that the results should always be the same. \n\nThe test is **only** for principal ideal domains. Up to now I encountered two cases where the convention are a bit special:\n- quotient fields: the gcd/xgcd is compatible with the ring (managed by the category)\n- polynomial over fields: the gcd/xgcd always return monic polynomials (managed by the methods in `rings.polynomial.polynomial_element_generic`)\nIf there is an example of a PID where gcd and xgcd **must** be different I would be happy to remove my test.\n\nVincent",
    "created_at": "2015-01-26T15:33:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240947",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'>**Comment 10:**</a>
Replying to [@bgrenet](#comment%3A9):
> * In `src/sage/rings/arith.py`, lines 1901-1910, the introducing sentence should to my mind be:

right

> * I do not understand exactly what you want to do with your function `_test_gcd_vs_xgcd()`: As discussed, it is not clear that the results should always be the same. 

The test is **only** for principal ideal domains. Up to now I encountered two cases where the convention are a bit special:
- quotient fields: the gcd/xgcd is compatible with the ring (managed by the category)
- polynomial over fields: the gcd/xgcd always return monic polynomials (managed by the methods in `rings.polynomial.polynomial_element_generic`)
If there is an example of a PID where gcd and xgcd **must** be different I would be happy to remove my test.

Vincent



---

archive/issue_comments_240948.json:
```json
{
    "body": "**Changing commit** from \"[401193ce270c603dc80ebc1028ff46d0eb662c6c](https://github.com/sagemath/sagetrac-mirror/commit/401193ce270c603dc80ebc1028ff46d0eb662c6c)\" to \"[1d84c4a9160533338cb19a8df2351cd0fc9d79d0](https://github.com/sagemath/sagetrac-mirror/commit/1d84c4a9160533338cb19a8df2351cd0fc9d79d0)\".",
    "created_at": "2015-01-26T15:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240948",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[401193ce270c603dc80ebc1028ff46d0eb662c6c](https://github.com/sagemath/sagetrac-mirror/commit/401193ce270c603dc80ebc1028ff46d0eb662c6c)" to "[1d84c4a9160533338cb19a8df2351cd0fc9d79d0](https://github.com/sagemath/sagetrac-mirror/commit/1d84c4a9160533338cb19a8df2351cd0fc9d79d0)".



---

archive/issue_comments_240949.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d84c4a9160533338cb19a8df2351cd0fc9d79d0\">1d84c4a</a></td><td><code>trac #17671: (review) clearer doc in rings.arith.xgcd</code></td></tr></table>\n",
    "created_at": "2015-01-26T15:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240949",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>**Comment 11:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d84c4a9160533338cb19a8df2351cd0fc9d79d0">1d84c4a</a></td><td><code>trac #17671: (review) clearer doc in rings.arith.xgcd</code></td></tr></table>




---

archive/issue_comments_240950.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,15 +7,17 @@\n (1, 1/6, 0)\n ```\n \n-We implement a `xgcd` for the `QuotientFields` category in order to fix that (there was a `gcd` here without a `xgcd`). We also check that for PID the `gcd` and `xgcd` agree by implementing a `_test_gcd_vs_xgcd`. With that branch\n+In this ticket we:\n+1. Ensure that `gcd` and `xgcd` are compatible over quotient fields by implementing the `xgcd` in the appropriate place. In particular, with that branch we have\n \n-```\n-sage: xgcd(6/1,2/1)\n-(2, 0, 1)\n-sage: xgcd(5/2, 3/4)\n-(1/4, -1/2, 2)\n-```\n-which is consistent with `gcd`.\n+  ```\n+  sage: xgcd(6/1,2/1)\n+  (2, 0, 1)\n+  sage: xgcd(5/2, 3/4)\n+  (1/4, -1/2, 2)\n+   ```\n+2. We fix the `xgcd` for trivial cases in `rings.polynomial.polynomial_element_generic.Polynomial_generic_field` in order that `gcd` and `xgcd` agree for them.\n+3. We introduce a generic test `_test_gcd_vs_xgcd` in the category `PrincipalIdealDomains` to ensure the compatibility of `gcd` and `xgcd`.\n \n QUESTIONS:\n \n@@ -29,4 +31,4 @@\n    ```\n    For the moment, I propagated this to `lcm` and `xgcd`.\n \n-2. There is a method `xgcd` implemented for univariate polynomial over ZZ. This is not a proper name since it has nothing to do with `gcd` (see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/JV8fCPUqTzo))\n+2. There is a method `xgcd` implemented for univariate polynomial over ZZ. ~~This is not a proper name since it has nothing to do with `gcd`~~ This might not be the best name since the first term is not the gcd in general (see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/JV8fCPUqTzo))\n``````\n",
    "created_at": "2015-01-26T15:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240950",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,15 +7,17 @@
 (1, 1/6, 0)
 ```
 
-We implement a `xgcd` for the `QuotientFields` category in order to fix that (there was a `gcd` here without a `xgcd`). We also check that for PID the `gcd` and `xgcd` agree by implementing a `_test_gcd_vs_xgcd`. With that branch
+In this ticket we:
+1. Ensure that `gcd` and `xgcd` are compatible over quotient fields by implementing the `xgcd` in the appropriate place. In particular, with that branch we have
 
-```
-sage: xgcd(6/1,2/1)
-(2, 0, 1)
-sage: xgcd(5/2, 3/4)
-(1/4, -1/2, 2)
-```
-which is consistent with `gcd`.
+  ```
+  sage: xgcd(6/1,2/1)
+  (2, 0, 1)
+  sage: xgcd(5/2, 3/4)
+  (1/4, -1/2, 2)
+   ```
+2. We fix the `xgcd` for trivial cases in `rings.polynomial.polynomial_element_generic.Polynomial_generic_field` in order that `gcd` and `xgcd` agree for them.
+3. We introduce a generic test `_test_gcd_vs_xgcd` in the category `PrincipalIdealDomains` to ensure the compatibility of `gcd` and `xgcd`.
 
 QUESTIONS:
 
@@ -29,4 +31,4 @@
    ```
    For the moment, I propagated this to `lcm` and `xgcd`.
 
-2. There is a method `xgcd` implemented for univariate polynomial over ZZ. This is not a proper name since it has nothing to do with `gcd` (see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/JV8fCPUqTzo))
+2. There is a method `xgcd` implemented for univariate polynomial over ZZ. ~~This is not a proper name since it has nothing to do with `gcd`~~ This might not be the best name since the first term is not the gcd in general (see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/JV8fCPUqTzo))
``````




---

archive/issue_events_216152.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-26T15:41:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "rename": {
        "from": "Implement xgcd for fraction fields",
        "to": "gcd and xgcd over fields, PID and UFD"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17671#event-216152"
}
```



---

archive/issue_comments_240951.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nReplying to [@videlec](#comment%3A10):\n> > * I do not understand exactly what you want to do with your function `_test_gcd_vs_xgcd()`: As discussed, it is not clear that the results should always be the same. \n\n> \n> The test is **only** for principal ideal domains. \n\nOh, right! Then I agree with your test.\n\nEverything you've committed so far looks good to me (and passes the tests). There are two things left:\n1. The parent of `gcd(3.0,6.0)`: This ticket seems the right one to change this.\n2. The name of `xgcd` for polynomials over UFD: There does not seem to be a consensus yet, so I would be in favor of letting this question to a later ticket so that this ticket can get a positive review soon.",
    "created_at": "2015-01-26T15:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240951",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:13'>**Comment 13:**</a>
Replying to [@videlec](#comment%3A10):
> > * I do not understand exactly what you want to do with your function `_test_gcd_vs_xgcd()`: As discussed, it is not clear that the results should always be the same. 

> 
> The test is **only** for principal ideal domains. 

Oh, right! Then I agree with your test.

Everything you've committed so far looks good to me (and passes the tests). There are two things left:
1. The parent of `gcd(3.0,6.0)`: This ticket seems the right one to change this.
2. The name of `xgcd` for polynomials over UFD: There does not seem to be a consensus yet, so I would be in favor of letting this question to a later ticket so that this ticket can get a positive review soon.



---

archive/issue_comments_240952.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nNope. There seems to be a regression with respect to timings (at least I do not understand what is happening). If I run the doctest on the file `coercion_and_categories.rst` in `$SAGE_ROOT/src/doc/en/thematic_tutorials/` then I end up with an incredibly long `TestSuite(P).run()`. If I instead replace it with `TestSuite(P).run(skip='_test_gcd_vs_xgcd')` everything looks fine.\n\nMoreover, in `sage.rings.function_field.function_field.py`, line 62, the test\n\n```\nTestSuite(M).run(skip = '_test_gcd_vs_xgcd')  # long time (52s on sage.math, 2012)\n```\nis much longer for me. And if I remove the `skip` then it is even longer!\n\nThis is a critical issue.",
    "created_at": "2015-01-26T15:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240952",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'>**Comment 14:**</a>
Nope. There seems to be a regression with respect to timings (at least I do not understand what is happening). If I run the doctest on the file `coercion_and_categories.rst` in `$SAGE_ROOT/src/doc/en/thematic_tutorials/` then I end up with an incredibly long `TestSuite(P).run()`. If I instead replace it with `TestSuite(P).run(skip='_test_gcd_vs_xgcd')` everything looks fine.

Moreover, in `sage.rings.function_field.function_field.py`, line 62, the test

```
TestSuite(M).run(skip = '_test_gcd_vs_xgcd')  # long time (52s on sage.math, 2012)
```
is much longer for me. And if I remove the `skip` then it is even longer!

This is a critical issue.



---

archive/issue_comments_240953.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nI finally find out the problem in the tests:\n\n- in `function_field.py` the timings are similar to what is here in sage-6.5.beta6. This is bad but at least not because of me\n- in `coercions_and_categories.rst` the problem comes from xgcd over `ZZ['x']` (see #17675)\n\nI will add a small commit to fix some doctests.",
    "created_at": "2015-01-27T01:45:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240953",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'>**Comment 15:**</a>
I finally find out the problem in the tests:

- in `function_field.py` the timings are similar to what is here in sage-6.5.beta6. This is bad but at least not because of me
- in `coercions_and_categories.rst` the problem comes from xgcd over `ZZ['x']` (see #17675)

I will add a small commit to fix some doctests.



---

archive/issue_comments_240954.json:
```json
{
    "body": "**Changing dependencies** from \"#17673\" to \"#17673, #17675\".",
    "created_at": "2015-01-27T01:45:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240954",
    "user": "https://github.com/videlec"
}
```

**Changing dependencies** from "#17673" to "#17673, #17675".



---

archive/issue_comments_240955.json:
```json
{
    "body": "**Changing commit** from \"[1d84c4a9160533338cb19a8df2351cd0fc9d79d0](https://github.com/sagemath/sagetrac-mirror/commit/1d84c4a9160533338cb19a8df2351cd0fc9d79d0)\" to \"[af1f7c61c4dbcf5aa79e95e1c7b62f75b0e18f3f](https://github.com/sagemath/sagetrac-mirror/commit/af1f7c61c4dbcf5aa79e95e1c7b62f75b0e18f3f)\".",
    "created_at": "2015-01-27T01:50:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240955",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[1d84c4a9160533338cb19a8df2351cd0fc9d79d0](https://github.com/sagemath/sagetrac-mirror/commit/1d84c4a9160533338cb19a8df2351cd0fc9d79d0)" to "[af1f7c61c4dbcf5aa79e95e1c7b62f75b0e18f3f](https://github.com/sagemath/sagetrac-mirror/commit/af1f7c61c4dbcf5aa79e95e1c7b62f75b0e18f3f)".



---

archive/issue_comments_240956.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f84c0117d09251d588cedcd04e02f9d46500e11\">1f84c01</a></td><td><code>trac #17671: revert changes in function_field.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af1f7c61c4dbcf5aa79e95e1c7b62f75b0e18f3f\">af1f7c6</a></td><td><code>trac #17671: fix doctest in coercion_and_categories.rst</code></td></tr></table>\n",
    "created_at": "2015-01-27T01:50:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240956",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>**Comment 16:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f84c0117d09251d588cedcd04e02f9d46500e11">1f84c01</a></td><td><code>trac #17671: revert changes in function_field.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af1f7c61c4dbcf5aa79e95e1c7b62f75b0e18f3f">af1f7c6</a></td><td><code>trac #17671: fix doctest in coercion_and_categories.rst</code></td></tr></table>




---

archive/issue_comments_240957.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc32b2b692a77a87cd69fe328f8ed525bf368020\">cc32b2b</a></td><td><code>trac #17671: gcd(2.0, 6.0) is now 1.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d05ac70434cafd7986e5e01671e1982e7fc8ffdc\">d05ac70</a></td><td><code>trac #17675: fix xgcd of constant integer polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0d7ca3a02d79b66820aad2289ba5d0809ec9c3e\">f0d7ca3</a></td><td><code>trac #17675: doc typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf9d62b6b0961ece59ae1e3cfdff6becc8da5b57\">cf9d62b</a></td><td><code>17675: reviewer's patch: fix typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/089b629587282d451fb6e57145f766851764e872\">089b629</a></td><td><code>merge #17675</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91222b24213a57124325238078fbe7f83c663123\">91222b2</a></td><td><code>trac #16761: force the parent of gcd/lcm/xgcd</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3275f3dd6e3322b6a7e14f006fa832ebbffd622f\">3275f3d</a></td><td><code>trac #16761: fix typo in doc</code></td></tr></table>\n",
    "created_at": "2015-01-28T12:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240957",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>**Comment 17:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc32b2b692a77a87cd69fe328f8ed525bf368020">cc32b2b</a></td><td><code>trac #17671: gcd(2.0, 6.0) is now 1.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d05ac70434cafd7986e5e01671e1982e7fc8ffdc">d05ac70</a></td><td><code>trac #17675: fix xgcd of constant integer polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0d7ca3a02d79b66820aad2289ba5d0809ec9c3e">f0d7ca3</a></td><td><code>trac #17675: doc typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf9d62b6b0961ece59ae1e3cfdff6becc8da5b57">cf9d62b</a></td><td><code>17675: reviewer's patch: fix typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/089b629587282d451fb6e57145f766851764e872">089b629</a></td><td><code>merge #17675</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91222b24213a57124325238078fbe7f83c663123">91222b2</a></td><td><code>trac #16761: force the parent of gcd/lcm/xgcd</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3275f3dd6e3322b6a7e14f006fa832ebbffd622f">3275f3d</a></td><td><code>trac #16761: fix typo in doc</code></td></tr></table>




---

archive/issue_comments_240958.json:
```json
{
    "body": "**Changing commit** from \"[af1f7c61c4dbcf5aa79e95e1c7b62f75b0e18f3f](https://github.com/sagemath/sagetrac-mirror/commit/af1f7c61c4dbcf5aa79e95e1c7b62f75b0e18f3f)\" to \"[3275f3dd6e3322b6a7e14f006fa832ebbffd622f](https://github.com/sagemath/sagetrac-mirror/commit/3275f3dd6e3322b6a7e14f006fa832ebbffd622f)\".",
    "created_at": "2015-01-28T12:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240958",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[af1f7c61c4dbcf5aa79e95e1c7b62f75b0e18f3f](https://github.com/sagemath/sagetrac-mirror/commit/af1f7c61c4dbcf5aa79e95e1c7b62f75b0e18f3f)" to "[3275f3dd6e3322b6a7e14f006fa832ebbffd622f](https://github.com/sagemath/sagetrac-mirror/commit/3275f3dd6e3322b6a7e14f006fa832ebbffd622f)".



---

archive/issue_comments_240959.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02462bbd672dc2c74e3b54f2bd7e55db59eefbef\">02462bb</a></td><td><code>trac #17671: force the parent of gcd/lcm/xgcd</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6db5f832b23d29026019de5306472a25e591279\">c6db5f8</a></td><td><code>trac #17671: fix typo in doc</code></td></tr></table>\n",
    "created_at": "2015-01-28T12:43:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240959",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>**Comment 18:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02462bbd672dc2c74e3b54f2bd7e55db59eefbef">02462bb</a></td><td><code>trac #17671: force the parent of gcd/lcm/xgcd</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6db5f832b23d29026019de5306472a25e591279">c6db5f8</a></td><td><code>trac #17671: fix typo in doc</code></td></tr></table>




---

archive/issue_comments_240960.json:
```json
{
    "body": "**Changing commit** from \"[3275f3dd6e3322b6a7e14f006fa832ebbffd622f](https://github.com/sagemath/sagetrac-mirror/commit/3275f3dd6e3322b6a7e14f006fa832ebbffd622f)\" to \"[c6db5f832b23d29026019de5306472a25e591279](https://github.com/sagemath/sagetrac-mirror/commit/c6db5f832b23d29026019de5306472a25e591279)\".",
    "created_at": "2015-01-28T12:43:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240960",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[3275f3dd6e3322b6a7e14f006fa832ebbffd622f](https://github.com/sagemath/sagetrac-mirror/commit/3275f3dd6e3322b6a7e14f006fa832ebbffd622f)" to "[c6db5f832b23d29026019de5306472a25e591279](https://github.com/sagemath/sagetrac-mirror/commit/c6db5f832b23d29026019de5306472a25e591279)".



---

archive/issue_comments_240961.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nSalut Bruno,\n\nSorry I had a typo in the two last commit messages so I had to do a forced push.\n\nNow everything looks all right. Note that before setting this one to positive review, we need to wait for the trivial #17673 to be in positive review (!hint!). Thanks to Ralf #17675 is already in positive review.\n\nIn the last commits:\n- I changed the behavior for real numbers as you and I wanted (nobody answered on the [sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/37TjI2fZfLM)).\n- I made one change to `_test_gcd_vs_xgcd` in order to check whether the parent of gcd is really what we expect and not an element of another ring.\n\nVincent",
    "created_at": "2015-01-28T12:48:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240961",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'>**Comment 19:**</a>
Salut Bruno,

Sorry I had a typo in the two last commit messages so I had to do a forced push.

Now everything looks all right. Note that before setting this one to positive review, we need to wait for the trivial #17673 to be in positive review (!hint!). Thanks to Ralf #17675 is already in positive review.

In the last commits:
- I changed the behavior for real numbers as you and I wanted (nobody answered on the [sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/37TjI2fZfLM)).
- I made one change to `_test_gcd_vs_xgcd` in order to check whether the parent of gcd is really what we expect and not an element of another ring.

Vincent



---

archive/issue_comments_240962.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,10 +18,7 @@\n    ```\n 2. We fix the `xgcd` for trivial cases in `rings.polynomial.polynomial_element_generic.Polynomial_generic_field` in order that `gcd` and `xgcd` agree for them.\n 3. We introduce a generic test `_test_gcd_vs_xgcd` in the category `PrincipalIdealDomains` to ensure the compatibility of `gcd` and `xgcd`.\n-\n-QUESTIONS:\n-\n-1. In the previous implementation of gcd in `sage.categories.fields` there is a backward compatibility weirdness\n+4. Modify the previous behavior for real numbers (which was present because of mysterious backward compatibility reasons)\n \n   ```\n   sage: gcd(2.0, 4.0)\n@@ -29,6 +26,16 @@\n   sage: gcd(2.0, 4.0).parent()\n   Integer Ring\n    ```\n-   For the moment, I propagated this to `lcm` and `xgcd`.\n+   Now we have\n \n-2. There is a method `xgcd` implemented for univariate polynomial over ZZ. ~~This is not a proper name since it has nothing to do with `gcd`~~ This might not be the best name since the first term is not the gcd in general (see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/JV8fCPUqTzo))\n+  ```\n+  sage: gcd(2.0, 4.0)\n+  1.00000000000000\n+  sage: gcd(2.0, 4.0).parent()\n+  Real Field with 53 bits of precision\n+   ```\n+\n+\n+Note:\n+\n+There is a method `xgcd` implemented for univariate polynomial over ZZ. ~~This is not a proper name since it has nothing to do with `gcd`~~ This might not be the best name since the first term is not the gcd in general (see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/JV8fCPUqTzo) and #17674)\n``````\n",
    "created_at": "2015-01-28T12:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240962",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,10 +18,7 @@
    ```
 2. We fix the `xgcd` for trivial cases in `rings.polynomial.polynomial_element_generic.Polynomial_generic_field` in order that `gcd` and `xgcd` agree for them.
 3. We introduce a generic test `_test_gcd_vs_xgcd` in the category `PrincipalIdealDomains` to ensure the compatibility of `gcd` and `xgcd`.
-
-QUESTIONS:
-
-1. In the previous implementation of gcd in `sage.categories.fields` there is a backward compatibility weirdness
+4. Modify the previous behavior for real numbers (which was present because of mysterious backward compatibility reasons)
 
   ```
   sage: gcd(2.0, 4.0)
@@ -29,6 +26,16 @@
   sage: gcd(2.0, 4.0).parent()
   Integer Ring
    ```
-   For the moment, I propagated this to `lcm` and `xgcd`.
+   Now we have
 
-2. There is a method `xgcd` implemented for univariate polynomial over ZZ. ~~This is not a proper name since it has nothing to do with `gcd`~~ This might not be the best name since the first term is not the gcd in general (see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/JV8fCPUqTzo))
+  ```
+  sage: gcd(2.0, 4.0)
+  1.00000000000000
+  sage: gcd(2.0, 4.0).parent()
+  Real Field with 53 bits of precision
+   ```
+
+
+Note:
+
+There is a method `xgcd` implemented for univariate polynomial over ZZ. ~~This is not a proper name since it has nothing to do with `gcd`~~ This might not be the best name since the first term is not the gcd in general (see [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/JV8fCPUqTzo) and #17674)
``````




---

archive/issue_comments_240963.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nSalut Vincent,\n\nI looked at #17673, but I am unable to review it since it goes beyond my knowledge in Sage... Or at least it will take some time for me to understand it and then review.\n\nConcerning the real number, I would have thought of an implementation acting as follows:\n\n```python\nsage: gcd(2.0,6.0)\n2.00000000000000\n```\nI do not know if this makes sense.",
    "created_at": "2015-01-28T13:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240963",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:21'>**Comment 21:**</a>
Salut Vincent,

I looked at #17673, but I am unable to review it since it goes beyond my knowledge in Sage... Or at least it will take some time for me to understand it and then review.

Concerning the real number, I would have thought of an implementation acting as follows:

```python
sage: gcd(2.0,6.0)
2.00000000000000
```
I do not know if this makes sense.



---

archive/issue_comments_240964.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nReplying to [@bgrenet](#comment%3A21):\n> Salut Vincent,\n> \n> I looked at #17673, but I am unable to review it since it goes beyond my knowledge in Sage... Or at least it will take some time for me to understand it and then review.\n> \n> Concerning the real number, I would have thought of an implementation acting as follows:\n> \n> ```python\n> sage: gcd(2.0,6.0)\n> 2.00000000000000\n> ```\n\nWhy? Would you like it to be nice only over ZZ and not over QQ? And this is where it becomes impossible. Within Sage any floating point can be converted to QQ...\n\n```\nsage: QQ(1.1231938951)\n155072989/138064309\n```\nSo the only way I would agree with your proposition is to have also\n\n```\nsage: gcd(RR(5/2), RR(3/2)) == RR(gcd(5/2, 3/2))\n```\nwhich is currently False as well.\n\nAnyway mixing algebraic functions (like gcd) with floating point number is often a bad idea. So at least the proposed implementation tells you that something is wrong.\n\nVincent",
    "created_at": "2015-01-28T14:32:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240964",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'>**Comment 22:**</a>
Replying to [@bgrenet](#comment%3A21):
> Salut Vincent,
> 
> I looked at #17673, but I am unable to review it since it goes beyond my knowledge in Sage... Or at least it will take some time for me to understand it and then review.
> 
> Concerning the real number, I would have thought of an implementation acting as follows:
> 
> ```python
> sage: gcd(2.0,6.0)
> 2.00000000000000
> ```

Why? Would you like it to be nice only over ZZ and not over QQ? And this is where it becomes impossible. Within Sage any floating point can be converted to QQ...

```
sage: QQ(1.1231938951)
155072989/138064309
```
So the only way I would agree with your proposition is to have also

```
sage: gcd(RR(5/2), RR(3/2)) == RR(gcd(5/2, 3/2))
```
which is currently False as well.

Anyway mixing algebraic functions (like gcd) with floating point number is often a bad idea. So at least the proposed implementation tells you that something is wrong.

Vincent



---

archive/issue_comments_240965.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nReplying to [@videlec](#comment%3A22):\n> Why? Would you like it to be nice only over ZZ and not over QQ? And this is where it becomes impossible.\n\nFirst of all, your current solution is mathematically perfectly correct and I am quite fine with it. This said, let me expose the reasons of my suggestion. \n\nWith my suggestion, \"integral floating point numbers\" are treated differently than other floating point numbers. Reasons:\n1. The `gcd` function coincide with the mathematical GCD function for integers only;\n2. Every floating point number can be seen as a rational, while not every floating point number can be seen as an integer.\n\nAlso, `RR` and `QQ` are treated differently. Reasons: \n1. For inputs in `QQ`, we know that they are rational numbers, so we deviate from the mathematical definition to give a more meaningful answer and the definition we use \"lives\" in `QQ`;\n2. For inputs in `RR` that are \"integral\", we make an assumption (the floating point numbers we have at hand represent integers) and then use the standard mathematical definition; \n3. For inputs in `RR` that are not \"integral\", not returning `1.0000000` requires to make an assumption AND to deviate from the mathematical definition: that is, we would need to \"move\" from `RR` to `QQ` and then to use a non-standard definition.\n\nFinally, if a user asks for the GCD of two \"integral floating point numbers\", I have no difficulty to understand what s/he means (since the GCD of the integers they represent is a well-defined mathematical function). It is much more difficult to me to interpret the will of a user that asks for the GCD of two \"rational floating point numbers\", and this (also) justifies to treat differently the two situations.\n\n\n> Anyway mixing algebraic functions (like gcd) with floating point number is often a bad idea. So at least the proposed implementation tells you that something is wrong.\n\nI agree with that.",
    "created_at": "2015-01-28T15:50:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240965",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:23'>**Comment 23:**</a>
Replying to [@videlec](#comment%3A22):
> Why? Would you like it to be nice only over ZZ and not over QQ? And this is where it becomes impossible.

First of all, your current solution is mathematically perfectly correct and I am quite fine with it. This said, let me expose the reasons of my suggestion. 

With my suggestion, "integral floating point numbers" are treated differently than other floating point numbers. Reasons:
1. The `gcd` function coincide with the mathematical GCD function for integers only;
2. Every floating point number can be seen as a rational, while not every floating point number can be seen as an integer.

Also, `RR` and `QQ` are treated differently. Reasons: 
1. For inputs in `QQ`, we know that they are rational numbers, so we deviate from the mathematical definition to give a more meaningful answer and the definition we use "lives" in `QQ`;
2. For inputs in `RR` that are "integral", we make an assumption (the floating point numbers we have at hand represent integers) and then use the standard mathematical definition; 
3. For inputs in `RR` that are not "integral", not returning `1.0000000` requires to make an assumption AND to deviate from the mathematical definition: that is, we would need to "move" from `RR` to `QQ` and then to use a non-standard definition.

Finally, if a user asks for the GCD of two "integral floating point numbers", I have no difficulty to understand what s/he means (since the GCD of the integers they represent is a well-defined mathematical function). It is much more difficult to me to interpret the will of a user that asks for the GCD of two "rational floating point numbers", and this (also) justifies to treat differently the two situations.


> Anyway mixing algebraic functions (like gcd) with floating point number is often a bad idea. So at least the proposed implementation tells you that something is wrong.

I agree with that.



---

archive/issue_comments_240966.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nAll right. Let us do it your way.\n\n(actually mine would be to not define floating point as a field ;-)",
    "created_at": "2015-01-28T16:05:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240966",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'>**Comment 24:**</a>
All right. Let us do it your way.

(actually mine would be to not define floating point as a field ;-)



---

archive/issue_comments_240967.json:
```json
{
    "body": "**Changing commit** from \"[c6db5f832b23d29026019de5306472a25e591279](https://github.com/sagemath/sagetrac-mirror/commit/c6db5f832b23d29026019de5306472a25e591279)\" to \"[0f536c92b61f088375410417bc790fee6de8dc10](https://github.com/sagemath/sagetrac-mirror/commit/0f536c92b61f088375410417bc790fee6de8dc10)\".",
    "created_at": "2015-01-28T16:21:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240967",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[c6db5f832b23d29026019de5306472a25e591279](https://github.com/sagemath/sagetrac-mirror/commit/c6db5f832b23d29026019de5306472a25e591279)" to "[0f536c92b61f088375410417bc790fee6de8dc10](https://github.com/sagemath/sagetrac-mirror/commit/0f536c92b61f088375410417bc790fee6de8dc10)".



---

archive/issue_comments_240968.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db90fdd5c99c7ea114df053862d6ef003f8afde7\">db90fdd</a></td><td><code>trac #17671: (review) fix gcd/xgcd in QuotientFields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/673bca90a344348fdc26375e7ed6f8bd9ca0fd7e\">673bca9</a></td><td><code>trac #17671: fix xgcd of polynomial_field_generic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd86cb7c97f203507bddef3e684ea2f6659a25dc\">dd86cb7</a></td><td><code>trac #17671: (review) clearer doc in rings.arith.xgcd</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bc48055470b3a552f7888eaf2f953bcd70c6fd8\">5bc4805</a></td><td><code>trac #17671: revert changes in function_field.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/994196f906ef97dfcc4ac88d96912d04bb3163f0\">994196f</a></td><td><code>trac #17671: fix doctest in coercion_and_categories.rst</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c073eb93d21ce149495ebf0a38cb364a0a959902\">c073eb9</a></td><td><code>trac #17671: gcd(2.0, 6.0) is now 1.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9714f6a6609a4c52896c917d40d3c5a5c4a9f0a4\">9714f6a</a></td><td><code>trac #17671: force the parent of gcd/lcm/xgcd</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9bbb25c8a7050af0b99e8556d48255894b11f57d\">9bbb25c</a></td><td><code>trac #17671: fix typo in doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d9f8d26f8c7edd64027c24e60cc60604874b63a\">5d9f8d2</a></td><td><code>trac #17671: merge #17675</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f536c92b61f088375410417bc790fee6de8dc10\">0f536c9</a></td><td><code>trac #17671: fix float definition of gcd/lcm/xgcd</code></td></tr></table>\n",
    "created_at": "2015-01-28T16:21:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240968",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:25'>**Comment 25:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db90fdd5c99c7ea114df053862d6ef003f8afde7">db90fdd</a></td><td><code>trac #17671: (review) fix gcd/xgcd in QuotientFields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/673bca90a344348fdc26375e7ed6f8bd9ca0fd7e">673bca9</a></td><td><code>trac #17671: fix xgcd of polynomial_field_generic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd86cb7c97f203507bddef3e684ea2f6659a25dc">dd86cb7</a></td><td><code>trac #17671: (review) clearer doc in rings.arith.xgcd</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bc48055470b3a552f7888eaf2f953bcd70c6fd8">5bc4805</a></td><td><code>trac #17671: revert changes in function_field.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/994196f906ef97dfcc4ac88d96912d04bb3163f0">994196f</a></td><td><code>trac #17671: fix doctest in coercion_and_categories.rst</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c073eb93d21ce149495ebf0a38cb364a0a959902">c073eb9</a></td><td><code>trac #17671: gcd(2.0, 6.0) is now 1.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9714f6a6609a4c52896c917d40d3c5a5c4a9f0a4">9714f6a</a></td><td><code>trac #17671: force the parent of gcd/lcm/xgcd</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9bbb25c8a7050af0b99e8556d48255894b11f57d">9bbb25c</a></td><td><code>trac #17671: fix typo in doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d9f8d26f8c7edd64027c24e60cc60604874b63a">5d9f8d2</a></td><td><code>trac #17671: merge #17675</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f536c92b61f088375410417bc790fee6de8dc10">0f536c9</a></td><td><code>trac #17671: fix float definition of gcd/lcm/xgcd</code></td></tr></table>




---

archive/issue_comments_240969.json:
```json
{
    "body": "**Changing dependencies** from \"#17673, #17675\" to \"#17675\".",
    "created_at": "2015-01-28T16:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240969",
    "user": "https://github.com/videlec"
}
```

**Changing dependencies** from "#17673, #17675" to "#17675".



---

archive/issue_comments_240970.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nI removed #17673 from the dependencies... I had to do a forced push to remove the commit coming from that branch.\n\nVincent",
    "created_at": "2015-01-28T16:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240970",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'>**Comment 26:**</a>
I removed #17673 from the dependencies... I had to do a forced push to remove the commit coming from that branch.

Vincent



---

archive/issue_comments_240971.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nIt seems that I get the same problem you had in #17673, thus the tests in `src/sage/rings/polynomial/polynomial_quotient_ring.py` don't pass. From line 281, there is a test that looks like the following (I removed irrelevant parts):\n\n```python\nsage: P.<x> = QQ[]\nsage: Q = P.quotient(x^2+2)\nsage: Q in Fields()\nTrue\nsage: Q.an_element().gcd._module_\n'sage.categories.fields'\n```\nbut the test doesn't pass, and I get `AttributeError: 'sage.structure.element.NamedBinopMethod' object has no attribute '__module__'` instead of `'sage.categories.fields'`.",
    "created_at": "2015-01-28T17:20:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240971",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:27'>**Comment 27:**</a>
It seems that I get the same problem you had in #17673, thus the tests in `src/sage/rings/polynomial/polynomial_quotient_ring.py` don't pass. From line 281, there is a test that looks like the following (I removed irrelevant parts):

```python
sage: P.<x> = QQ[]
sage: Q = P.quotient(x^2+2)
sage: Q in Fields()
True
sage: Q.an_element().gcd._module_
'sage.categories.fields'
```
but the test doesn't pass, and I get `AttributeError: 'sage.structure.element.NamedBinopMethod' object has no attribute '__module__'` instead of `'sage.categories.fields'`.



---

archive/issue_comments_240972.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nYep. I forgot to change that. And the modification of gcd/lcm for floating point also causes some trouble for the symbolic ring. A commit is comming.\n\nVincent",
    "created_at": "2015-01-28T17:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240972",
    "user": "https://github.com/videlec"
}
```

<a id='comment:28'>**Comment 28:**</a>
Yep. I forgot to change that. And the modification of gcd/lcm for floating point also causes some trouble for the symbolic ring. A commit is comming.

Vincent



---

archive/issue_comments_240973.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e0d79e1c767b471dc143ab55cd5490de342bae0\">2e0d79e</a></td><td><code>trac #17671: fix two doctests</code></td></tr></table>\n",
    "created_at": "2015-01-28T17:36:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240973",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:29'>**Comment 29:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e0d79e1c767b471dc143ab55cd5490de342bae0">2e0d79e</a></td><td><code>trac #17671: fix two doctests</code></td></tr></table>




---

archive/issue_comments_240974.json:
```json
{
    "body": "**Changing commit** from \"[0f536c92b61f088375410417bc790fee6de8dc10](https://github.com/sagemath/sagetrac-mirror/commit/0f536c92b61f088375410417bc790fee6de8dc10)\" to \"[2e0d79e1c767b471dc143ab55cd5490de342bae0](https://github.com/sagemath/sagetrac-mirror/commit/2e0d79e1c767b471dc143ab55cd5490de342bae0)\".",
    "created_at": "2015-01-28T17:36:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240974",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[0f536c92b61f088375410417bc790fee6de8dc10](https://github.com/sagemath/sagetrac-mirror/commit/0f536c92b61f088375410417bc790fee6de8dc10)" to "[2e0d79e1c767b471dc143ab55cd5490de342bae0](https://github.com/sagemath/sagetrac-mirror/commit/2e0d79e1c767b471dc143ab55cd5490de342bae0)".



---

archive/issue_comments_240975.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,7 +18,7 @@\n    ```\n 2. We fix the `xgcd` for trivial cases in `rings.polynomial.polynomial_element_generic.Polynomial_generic_field` in order that `gcd` and `xgcd` agree for them.\n 3. We introduce a generic test `_test_gcd_vs_xgcd` in the category `PrincipalIdealDomains` to ensure the compatibility of `gcd` and `xgcd`.\n-4. Modify the previous behavior for real numbers (which was present because of mysterious backward compatibility reasons)\n+4. Modify the previous behavior for real numbers\n \n   ```\n   sage: gcd(2.0, 4.0)\n@@ -26,15 +26,15 @@\n   sage: gcd(2.0, 4.0).parent()\n   Integer Ring\n    ```\n-   Now we have\n+   The only difference is that now, Sage returns floating point with the same parent\n \n   ```\n   sage: gcd(2.0, 4.0)\n-  1.00000000000000\n+  2.00000000000000\n   sage: gcd(2.0, 4.0).parent()\n   Real Field with 53 bits of precision\n    ```\n-\n+   And the same kind of behavior will also hold for lcm and xgcd.\n \n Note:\n \n``````\n",
    "created_at": "2015-01-28T18:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240975",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,7 +18,7 @@
    ```
 2. We fix the `xgcd` for trivial cases in `rings.polynomial.polynomial_element_generic.Polynomial_generic_field` in order that `gcd` and `xgcd` agree for them.
 3. We introduce a generic test `_test_gcd_vs_xgcd` in the category `PrincipalIdealDomains` to ensure the compatibility of `gcd` and `xgcd`.
-4. Modify the previous behavior for real numbers (which was present because of mysterious backward compatibility reasons)
+4. Modify the previous behavior for real numbers
 
   ```
   sage: gcd(2.0, 4.0)
@@ -26,15 +26,15 @@
   sage: gcd(2.0, 4.0).parent()
   Integer Ring
    ```
-   Now we have
+   The only difference is that now, Sage returns floating point with the same parent
 
   ```
   sage: gcd(2.0, 4.0)
-  1.00000000000000
+  2.00000000000000
   sage: gcd(2.0, 4.0).parent()
   Real Field with 53 bits of precision
    ```
-
+   And the same kind of behavior will also hold for lcm and xgcd.
 
 Note:
 
``````




---

archive/issue_events_216153.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-01-29T12:55:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17671#event-216153"
}
```



---

archive/issue_events_216154.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-01-29T12:55:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17671#event-216154"
}
```



---

archive/issue_comments_240976.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nAll tests pass! LGTM.",
    "created_at": "2015-01-29T12:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240976",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:31'>**Comment 31:**</a>
All tests pass! LGTM.



---

archive/issue_comments_240977.json:
```json
{
    "body": "**Reviewer:** Bruno Grenet",
    "created_at": "2015-01-29T12:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240977",
    "user": "https://github.com/bgrenet"
}
```

**Reviewer:** Bruno Grenet



---

archive/issue_comments_240978.json:
```json
{
    "body": "<a id='comment:32'>**Comment 32:**</a>\nCool! Thanks for the review.",
    "created_at": "2015-01-29T14:54:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240978",
    "user": "https://github.com/videlec"
}
```

<a id='comment:32'>**Comment 32:**</a>
Cool! Thanks for the review.



---

archive/issue_events_216155.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-29T22:41:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17671#event-216155"
}
```



---

archive/issue_events_216156.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0792516a22ce58ee6e5f0068991396da834c6dfd",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-01-29T22:41:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17671#event-216156"
}
```



---

archive/issue_comments_240979.json:
```json
{
    "body": "**Changing branch** from \"[u/vdelecroix/17671](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/17671)\" to \"[2e0d79e1c767b471dc143ab55cd5490de342bae0](https://github.com/sagemath/sagetrac-mirror/commit/2e0d79e1c767b471dc143ab55cd5490de342bae0)\".",
    "created_at": "2015-01-29T22:41:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17671#issuecomment-240979",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/vdelecroix/17671](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/17671)" to "[2e0d79e1c767b471dc143ab55cd5490de342bae0](https://github.com/sagemath/sagetrac-mirror/commit/2e0d79e1c767b471dc143ab55cd5490de342bae0)".
