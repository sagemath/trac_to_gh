# Issue 17774: Random failure building Singular

archive/issues_017537.json:
```json
{
    "body": "There is still a race in the Singular build system, sometimes (rarely) it fails with\n\n```\n[...]\ng++ -O2 -g  -fPIC -I.. -I/mnt/disk/home/release/Sage/local -pipe -fno-implicit-templates -I.. -I/mnt/disk/home/release/Sage/local -I. -I.. -I/mnt/disk/home/release/Sage/local -I/mnt/disk/home/release/Sage/local/include -I/mnt/disk/home/release/Sage/local/include -I/mnt/disk/home/release/Sage/local/include   -I/mnt/disk/home/release/Sage/local/include -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H -c s_buff.cc\nattrib.cc: In function 'BOOLEAN atATTRIB2(leftv, leftv, leftv)':\nattrib.cc:305:55: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\n     res->data=(void *)(rField_is_Ring((ring)v->Data()));\n                                                       ^\ng++ -O2 -g  -fPIC -I.. -I/mnt/disk/home/release/Sage/local -pipe -fno-implicit-templates -I.. -I/mnt/disk/home/release/Sage/local -I. -I.. -I/mnt/disk/home/release/Sage/local -I/mnt/disk/home/release/Sage/local/include -I/mnt/disk/home/release/Sage/local/include -I/mnt/disk/home/release/Sage/local/include   -I/mnt/disk/home/release/Sage/local/include -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H -c subexpr.cc\nIn file included from silink.cc:19:0:\n../kernel/febase.h:284:31: error: 'FALSE' was not declared in this scope\n```\nThis is on my 6-core (12 threads) Haswell-E i7 desktop.\n\nKeywords: random_fail\n\nReviewer: Volker Braun\n\nAuthor: Jeroen Demeyer\n\nBranch: be295080c79acda411ddec33cf529d2d841d3ce6\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17774\n\n",
    "closed_at": "2015-03-19T23:39:47Z",
    "created_at": "2015-02-12T23:30:29Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Random failure building Singular",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17774",
    "user": "https://github.com/vbraun"
}
```
There is still a race in the Singular build system, sometimes (rarely) it fails with

```
[...]
g++ -O2 -g  -fPIC -I.. -I/mnt/disk/home/release/Sage/local -pipe -fno-implicit-templates -I.. -I/mnt/disk/home/release/Sage/local -I. -I.. -I/mnt/disk/home/release/Sage/local -I/mnt/disk/home/release/Sage/local/include -I/mnt/disk/home/release/Sage/local/include -I/mnt/disk/home/release/Sage/local/include   -I/mnt/disk/home/release/Sage/local/include -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H -c s_buff.cc
attrib.cc: In function 'BOOLEAN atATTRIB2(leftv, leftv, leftv)':
attrib.cc:305:55: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
     res->data=(void *)(rField_is_Ring((ring)v->Data()));
                                                       ^
g++ -O2 -g  -fPIC -I.. -I/mnt/disk/home/release/Sage/local -pipe -fno-implicit-templates -I.. -I/mnt/disk/home/release/Sage/local -I. -I.. -I/mnt/disk/home/release/Sage/local -I/mnt/disk/home/release/Sage/local/include -I/mnt/disk/home/release/Sage/local/include -I/mnt/disk/home/release/Sage/local/include   -I/mnt/disk/home/release/Sage/local/include -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H -c subexpr.cc
In file included from silink.cc:19:0:
../kernel/febase.h:284:31: error: 'FALSE' was not declared in this scope
```
This is on my 6-core (12 threads) Haswell-E i7 desktop.

Keywords: random_fail

Reviewer: Volker Braun

Author: Jeroen Demeyer

Branch: be295080c79acda411ddec33cf529d2d841d3ce6

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17774





---

archive/issue_comments_300211.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/random_failure_building_singular\"",
    "created_at": "2015-03-19T16:19:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17774#issuecomment-300211",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/random_failure_building_singular"



---

archive/issue_comments_300212.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[be29508](https://github.com/sagemath/sagetrac-mirror/commit/be295080c79acda411ddec33cf529d2d841d3ce6)|`Build Singular serially`|",
    "created_at": "2015-03-19T16:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17774#issuecomment-300212",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[be29508](https://github.com/sagemath/sagetrac-mirror/commit/be295080c79acda411ddec33cf529d2d841d3ce6)|`Build Singular serially`|



---

archive/issue_events_065525.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-19T16:28:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17774#event-65525"
}
```



---

archive/issue_comments_300213.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-19T16:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17774#issuecomment-300213",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_300214.json:
```json
{
    "body": "Changing commit from \"\" to \"be295080c79acda411ddec33cf529d2d841d3ce6\"",
    "created_at": "2015-03-19T16:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17774#issuecomment-300214",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "be295080c79acda411ddec33cf529d2d841d3ce6"



---

archive/issue_comments_300215.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2015-03-19T16:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17774#issuecomment-300215",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_300216.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2015-03-19T16:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17774#issuecomment-300216",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_300217.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-19T16:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17774#issuecomment-300217",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_300218.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-19T23:39:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17774#issuecomment-300218",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_065526.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-19T23:39:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17774#event-65526"
}
```



---

archive/issue_comments_300219.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/random_failure_building_singular\" to \"be295080c79acda411ddec33cf529d2d841d3ce6\"",
    "created_at": "2015-03-19T23:39:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17774#issuecomment-300219",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/random_failure_building_singular" to "be295080c79acda411ddec33cf529d2d841d3ce6"



---

archive/issue_comments_300220.json:
```json
{
    "body": "<a id='comment:5'></a>\nAnd nobody reported this upstream?!?!1?\n\n(We spent weeks fixing race conditions in Singular's build system not that long ago to let it build in parallel for good reason, now apparently all in vain.)",
    "created_at": "2015-12-13T12:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17774#issuecomment-300220",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:5'></a>
And nobody reported this upstream?!?!1?

(We spent weeks fixing race conditions in Singular's build system not that long ago to let it build in parallel for good reason, now apparently all in vain.)



---

archive/issue_comments_300221.json:
```json
{
    "body": "Changing commit from \"be295080c79acda411ddec33cf529d2d841d3ce6\" to \"\"",
    "created_at": "2015-12-13T12:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17774#issuecomment-300221",
    "user": "https://github.com/nexttime"
}
```

Changing commit from "be295080c79acda411ddec33cf529d2d841d3ce6" to ""
