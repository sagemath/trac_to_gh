# Issue 17505: implement symbolic product

archive/issues_017268.json:
```json
{
    "body": "The symbolic product is currently broken in Sage :\n* It cannot be created in Sage :\n\n```\nsage: var(\"j,p\", domain=\"integer\")\nsage: X,Y=function(\"X,Y\")\nsage: prod(X(j),j,1,p)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-5-85e69544cbe9> in <module>()\n----> 1 prod(X(j),j,Integer(1),p)\n\n/usr/local/sage-8/src/sage/misc/misc_c.pyx in sage.misc.misc_c.prod (/usr/local/sage-8/src/build/cythonized/sage/misc/misc_c.c:1596)()\n     69 \n     70 \n---> 71 def prod(x, z=None, Py_ssize_t recursion_cutoff=5):\n     72     \"\"\"\n     73     Return the product of the elements in the list x.\n\nTypeError: prod() takes at most 3 positional arguments (4 given)\nsage: product(X(j),j,1,p)\n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n<ipython-input-6-4d04d74c7489> in <module>()\n----> 1 product(X(j),j,Integer(1),p)\n\nNameError: name 'product' is not defined\n```\n\nAt the moment anonymous functions named `product` can be created via the Maxima `pexpect` interface and they even behave as products in specific cases:\n\n```\nsage: maxima(\"prod(X(j),j,1,p)\").sage().log().log_expand()\nsum(log(X(j)), j, 1, p)\n```\n\nThe present ticket aims at creating a Sage function/method either evaluating the sum, or correctly creating a unevaluted symbolic product object.\n\nFor evaluation the ticket would have to decide which of (Maxima,SymPy) would be used as default for this. \n\n```\nsage: import sympy\nsage: x = sympy.Symbol('x')\nsage: n = sympy.Symbol('n')\nsage: sympy.product(x, (x, 1, n))\nfactorial(n)\nsage: sympy.product(sin(x), (x, 1, n))\nProduct(sin(x), (x, 1, n))\n```\n\nCreating products by casting a Maxima expression via the library interface gives nonsense, see #17502.\n\n\nCC:  @EmmanuelCharpentier\n\nReviewer: Emmanuel Charpentier\n\nAuthor: Ralf Stephan\n\nBranch: u/rws/implement_symbolic_product\n\nCommit: 5779423aac340d1d7dc415da287b9af5e0e1f381\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17505\n\n",
    "closed_at": "2017-05-13T10:34:26Z",
    "created_at": "2014-12-15T07:20:23Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "implement symbolic product",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17505",
    "user": "https://github.com/rwst"
}
```
The symbolic product is currently broken in Sage :
* It cannot be created in Sage :

```
sage: var("j,p", domain="integer")
sage: X,Y=function("X,Y")
sage: prod(X(j),j,1,p)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-5-85e69544cbe9> in <module>()
----> 1 prod(X(j),j,Integer(1),p)

/usr/local/sage-8/src/sage/misc/misc_c.pyx in sage.misc.misc_c.prod (/usr/local/sage-8/src/build/cythonized/sage/misc/misc_c.c:1596)()
     69 
     70 
---> 71 def prod(x, z=None, Py_ssize_t recursion_cutoff=5):
     72     """
     73     Return the product of the elements in the list x.

TypeError: prod() takes at most 3 positional arguments (4 given)
sage: product(X(j),j,1,p)
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-6-4d04d74c7489> in <module>()
----> 1 product(X(j),j,Integer(1),p)

NameError: name 'product' is not defined
```

At the moment anonymous functions named `product` can be created via the Maxima `pexpect` interface and they even behave as products in specific cases:

```
sage: maxima("prod(X(j),j,1,p)").sage().log().log_expand()
sum(log(X(j)), j, 1, p)
```

The present ticket aims at creating a Sage function/method either evaluating the sum, or correctly creating a unevaluted symbolic product object.

For evaluation the ticket would have to decide which of (Maxima,SymPy) would be used as default for this. 

```
sage: import sympy
sage: x = sympy.Symbol('x')
sage: n = sympy.Symbol('n')
sage: sympy.product(x, (x, 1, n))
factorial(n)
sage: sympy.product(sin(x), (x, 1, n))
Product(sin(x), (x, 1, n))
```

Creating products by casting a Maxima expression via the library interface gives nonsense, see #17502.


CC:  @EmmanuelCharpentier

Reviewer: Emmanuel Charpentier

Author: Ralf Stephan

Branch: u/rws/implement_symbolic_product

Commit: 5779423aac340d1d7dc415da287b9af5e0e1f381

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17505





---

archive/issue_comments_297767.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,8 @@\n sage: n = sympy.Symbol('n')\n sage: sympy.product(x, (x, 1, n))\n factorial(n)\n+sage: sympy.product(sin(x), (x, 1, n))\n+Product(sin(x), (x, 1, n))\n ```\n \n Any Maxima implementation likely depends on #17502.\n``````\n",
    "created_at": "2014-12-15T07:22:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297767",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,8 @@
 sage: n = sympy.Symbol('n')
 sage: sympy.product(x, (x, 1, n))
 factorial(n)
+sage: sympy.product(sin(x), (x, 1, n))
+Product(sin(x), (x, 1, n))
 ```
 
 Any Maxima implementation likely depends on #17502.
``````




---

archive/issue_events_050309.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-17T13:48:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "milestone": "sage-wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17505#event-50309"
}
```



---

archive/issue_comments_297768.json:
```json
{
    "body": "<a id='comment:3'></a>Note that if #20179 is implemented it has to be adapted when symbolic products are made available.",
    "created_at": "2017-02-22T14:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297768",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>Note that if #20179 is implemented it has to be adapted when symbolic products are made available.



---

archive/issue_comments_297769.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,55 @@\n+The symbolic product is currently broken in Sage :\n+* It cannot be created in Sage :\n+\n+```\n+sage: var(\"j,p\", domain=\"integer\")\n+sage: X,Y=function(\"X,Y\")\n+sage: prod(X(j),j,1,p)\n+---------------------------------------------------------------------------\n+TypeError                                 Traceback (most recent call last)\n+<ipython-input-5-85e69544cbe9> in <module>()\n+----> 1 prod(X(j),j,Integer(1),p)\n+\n+/usr/local/sage-8/src/sage/misc/misc_c.pyx in sage.misc.misc_c.prod (/usr/local/sage-8/src/build/cythonized/sage/misc/misc_c.c:1596)()\n+     69 \n+     70 \n+---> 71 def prod(x, z=None, Py_ssize_t recursion_cutoff=5):\n+     72     \"\"\"\n+     73     Return the product of the elements in the list x.\n+\n+TypeError: prod() takes at most 3 positional arguments (4 given)\n+sage: product(X(j),j,1,p)\n+---------------------------------------------------------------------------\n+NameError                                 Traceback (most recent call last)\n+<ipython-input-6-4d04d74c7489> in <module>()\n+----> 1 product(X(j),j,Integer(1),p)\n+\n+NameError: name 'product' is not defined\n+```\n+* Creatnig it it by casting a Maxima expression via the library interface gives nonsense :\n+\n+```\n+sage: X(j).maxima_methods().prod(j,1,p)\n+X(j)^p\n+sage: X(j).maxima_methods().product(j,1,p)\n+X(j)^p\n+```\n+(Note : similar nonsense also happens with sums :\n+\n+```\n+sage: X(j).maxima_methods().sum(j,1,p)\n+p*X(j)\n+```\n+)\n+* But something (what ?) can be created via the Maxima `pexpect` interface :\n+\n+```\n+sage: maxima(\"prod(X(j),j,1,p)\").sage().log().log_expand()\n+sum(log(X(j)), j, 1, p)\n+```\n+\n+The part of the problem bound to the Maxima library interface is the object of #22920. The present ticket aims at creating a Sage function/method correctly creating a symbolic product object.\n+\n The ticket would have to decide which of (Maxima,SymPy) would be used as default for this. \n \n ```\n``````\n",
    "created_at": "2017-05-02T06:41:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297769",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,55 @@
+The symbolic product is currently broken in Sage :
+* It cannot be created in Sage :
+
+```
+sage: var("j,p", domain="integer")
+sage: X,Y=function("X,Y")
+sage: prod(X(j),j,1,p)
+---------------------------------------------------------------------------
+TypeError                                 Traceback (most recent call last)
+<ipython-input-5-85e69544cbe9> in <module>()
+----> 1 prod(X(j),j,Integer(1),p)
+
+/usr/local/sage-8/src/sage/misc/misc_c.pyx in sage.misc.misc_c.prod (/usr/local/sage-8/src/build/cythonized/sage/misc/misc_c.c:1596)()
+     69 
+     70 
+---> 71 def prod(x, z=None, Py_ssize_t recursion_cutoff=5):
+     72     """
+     73     Return the product of the elements in the list x.
+
+TypeError: prod() takes at most 3 positional arguments (4 given)
+sage: product(X(j),j,1,p)
+---------------------------------------------------------------------------
+NameError                                 Traceback (most recent call last)
+<ipython-input-6-4d04d74c7489> in <module>()
+----> 1 product(X(j),j,Integer(1),p)
+
+NameError: name 'product' is not defined
+```
+* Creatnig it it by casting a Maxima expression via the library interface gives nonsense :
+
+```
+sage: X(j).maxima_methods().prod(j,1,p)
+X(j)^p
+sage: X(j).maxima_methods().product(j,1,p)
+X(j)^p
+```
+(Note : similar nonsense also happens with sums :
+
+```
+sage: X(j).maxima_methods().sum(j,1,p)
+p*X(j)
+```
+)
+* But something (what ?) can be created via the Maxima `pexpect` interface :
+
+```
+sage: maxima("prod(X(j),j,1,p)").sage().log().log_expand()
+sum(log(X(j)), j, 1, p)
+```
+
+The part of the problem bound to the Maxima library interface is the object of #22920. The present ticket aims at creating a Sage function/method correctly creating a symbolic product object.
+
 The ticket would have to decide which of (Maxima,SymPy) would be used as default for this. 
 
 ```
``````




---

archive/issue_comments_297770.json:
```json
{
    "body": "<a id='comment:5'></a>Cut'n paste of the description of #22914 (duplicate ticket), at the request of the present ticket's author.\n\nNote : Couldn't we cut'n'paste the recent code for symbolic sums (#21645) ?",
    "created_at": "2017-05-02T06:41:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297770",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:5'></a>Cut'n paste of the description of #22914 (duplicate ticket), at the request of the present ticket's author.

Note : Couldn't we cut'n'paste the recent code for symbolic sums (#21645) ?



---

archive/issue_comments_297771.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 charpent]:\n> Note : Couldn't we cut'n'paste the recent code for symbolic sums (#21645) ?\n\n\nYes, but as you can see with #22844 it may not work 100%.",
    "created_at": "2017-05-02T07:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297771",
    "user": "https://github.com/rwst"
}
```

<a id='comment:6'></a>Replying to [comment:5 charpent]:
> Note : Couldn't we cut'n'paste the recent code for symbolic sums (#21645) ?


Yes, but as you can see with #22844 it may not work 100%.



---

archive/issue_comments_297772.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -26,31 +26,17 @@\n \n NameError: name 'product' is not defined\n ```\n-* Creatnig it it by casting a Maxima expression via the library interface gives nonsense :\n \n-```\n-sage: X(j).maxima_methods().prod(j,1,p)\n-X(j)^p\n-sage: X(j).maxima_methods().product(j,1,p)\n-X(j)^p\n-```\n-(Note : similar nonsense also happens with sums :\n-\n-```\n-sage: X(j).maxima_methods().sum(j,1,p)\n-p*X(j)\n-```\n-)\n-* But something (what ?) can be created via the Maxima `pexpect` interface :\n+At the moment anonymous functions named `product` can be created via the Maxima `pexpect` interface and they even behave as products in specific cases:\n \n ```\n sage: maxima(\"prod(X(j),j,1,p)\").sage().log().log_expand()\n sum(log(X(j)), j, 1, p)\n ```\n \n-The part of the problem bound to the Maxima library interface is the object of #22920. The present ticket aims at creating a Sage function/method correctly creating a symbolic product object.\n+The present ticket aims at creating a Sage function/method either evaluating the sum, or correctly creating a unevaluted symbolic product object.\n \n-The ticket would have to decide which of (Maxima,SymPy) would be used as default for this. \n+For evaluation the ticket would have to decide which of (Maxima,SymPy) would be used as default for this. \n \n ```\n sage: import sympy\n@@ -62,4 +48,5 @@\n Product(sin(x), (x, 1, n))\n ```\n \n-Any Maxima implementation likely depends on #17502.\n+Creating products by casting a Maxima expression via the library interface gives nonsense, see #17502.\n+\n``````\n",
    "created_at": "2017-05-05T07:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297772",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -26,31 +26,17 @@
 
 NameError: name 'product' is not defined
 ```
-* Creatnig it it by casting a Maxima expression via the library interface gives nonsense :
 
-```
-sage: X(j).maxima_methods().prod(j,1,p)
-X(j)^p
-sage: X(j).maxima_methods().product(j,1,p)
-X(j)^p
-```
-(Note : similar nonsense also happens with sums :
-
-```
-sage: X(j).maxima_methods().sum(j,1,p)
-p*X(j)
-```
-)
-* But something (what ?) can be created via the Maxima `pexpect` interface :
+At the moment anonymous functions named `product` can be created via the Maxima `pexpect` interface and they even behave as products in specific cases:
 
 ```
 sage: maxima("prod(X(j),j,1,p)").sage().log().log_expand()
 sum(log(X(j)), j, 1, p)
 ```
 
-The part of the problem bound to the Maxima library interface is the object of #22920. The present ticket aims at creating a Sage function/method correctly creating a symbolic product object.
+The present ticket aims at creating a Sage function/method either evaluating the sum, or correctly creating a unevaluted symbolic product object.
 
-The ticket would have to decide which of (Maxima,SymPy) would be used as default for this. 
+For evaluation the ticket would have to decide which of (Maxima,SymPy) would be used as default for this. 
 
 ```
 sage: import sympy
@@ -62,4 +48,5 @@
 Product(sin(x), (x, 1, n))
 ```
 
-Any Maxima implementation likely depends on #17502.
+Creating products by casting a Maxima expression via the library interface gives nonsense, see #17502.
+
``````




---

archive/issue_events_050310.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-05-05T07:19:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "milestone": "sage-wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17505#event-50310"
}
```



---

archive/issue_events_050311.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-05-05T07:19:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17505#event-50311"
}
```



---

archive/issue_comments_297773.json:
```json
{
    "body": "Changing branch from \"\" to \"u/rws/implement_symbolic_product\"",
    "created_at": "2017-05-05T08:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297773",
    "user": "https://github.com/rwst"
}
```

Changing branch from "" to "u/rws/implement_symbolic_product"



---

archive/issue_comments_297774.json:
```json
{
    "body": "<a id='comment:9'></a>do you mind adding `giac='product'` ? \n\nsince:\n\n```\nsage: giac('product(x, x, 1, n)')\nn!\nsage: _.sage()\nfactorial(n)\n```\n\n---\nNew commits:",
    "created_at": "2017-05-07T09:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297774",
    "user": "https://github.com/mforets"
}
```

<a id='comment:9'></a>do you mind adding `giac='product'` ? 

since:

```
sage: giac('product(x, x, 1, n)')
n!
sage: _.sage()
factorial(n)
```

---
New commits:



---

archive/issue_comments_297775.json:
```json
{
    "body": "Changing commit from \"\" to \"647ff396cc17c8acb59043dad905ab882834017b\"",
    "created_at": "2017-05-07T09:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297775",
    "user": "https://github.com/mforets"
}
```

Changing commit from "" to "647ff396cc17c8acb59043dad905ab882834017b"



---

archive/issue_comments_297776.json:
```json
{
    "body": "Changing commit from \"647ff396cc17c8acb59043dad905ab882834017b\" to \"e4769b5524ae5629db4189d06684646b22781efb\"",
    "created_at": "2017-05-08T08:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297776",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "647ff396cc17c8acb59043dad905ab882834017b" to "e4769b5524ae5629db4189d06684646b22781efb"



---

archive/issue_comments_297777.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-08T08:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297777",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_297778.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-08T08:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297778",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_297779.json:
```json
{
    "body": "<a id='comment:11'></a>This doesn't have the `prod` interface (other ticket) and some docs are missing but everything should work. Question: where does SymPy differ from Maxima?",
    "created_at": "2017-05-08T08:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297779",
    "user": "https://github.com/rwst"
}
```

<a id='comment:11'></a>This doesn't have the `prod` interface (other ticket) and some docs are missing but everything should work. Question: where does SymPy differ from Maxima?



---

archive/issue_comments_297780.json:
```json
{
    "body": "Changing author from \"\" to \"Ralf Stephan\"",
    "created_at": "2017-05-08T08:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297780",
    "user": "https://github.com/rwst"
}
```

Changing author from "" to "Ralf Stephan"



---

archive/issue_comments_297781.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-05-08T13:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297781",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_297782.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 rws]:\n> This doesn't have the `prod` interface (other ticket) and some docs are missing but everything should work. Question: where does SymPy differ from Maxima?\n\n\nFirst of all, thank you very much for this addition, which should enhance Sage's usefulness fo high-school/undergrad levels.\n\nHowever, `ptestlong` gives three failures :\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/calculus/calculus.py  # 5 doctests failed\nsage -t --long src/sage/combinat/posets/posets.py  # 1 doctest failed\nsage -t --long src/sage/homology/simplicial_complex.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\nThe second and third ones have been [reported](https://groups.google.com/d/msg/sage-release/UdllnAJFufA/-e8ArqwFBAAJ) for 8.0.beta4 and are seen again in 8.0beta5. Nothing new here, so probably not related.\n\nThe third one is new :\n\n```\ncharpent@asus16-ec:/usr/local/sage-8$ sage -t --long src/sage/calculus/calculus.py\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2017-05-08-14-44-39-93705f01.\nGit branch: t/17505/implement_symbolic_product\nUsing --optional=database_gap,giacpy_sage,git_trac,mpir,python2,sage\nDoctesting 1 file.\nsage -t --long src/sage/calculus/calculus.py\n**********************************************************************\nFile \"src/sage/calculus/calculus.py\", line 843, in sage.calculus.calculus.symbolic_prod\nFailed example:\n    symbolic_prod(x + i*(i+1)/2, i, 1, 4)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 509, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 872, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.calculus.calculus.symbolic_prod[3]>\", line 1, in <module>\n        symbolic_prod(x + i*(i+Integer(1))/Integer(2), i, Integer(1), Integer(4))\n      File \"/usr/local/sage-8/local/lib/python2.7/site-packages/sage/calculus/calculus.py\", line 860, in symbolic_prod\n        raise TypeError(\"need a multiplication variable\")\n    TypeError: need a multiplication variable\n**********************************************************************\nFile \"src/sage/calculus/calculus.py\", line 845, in sage.calculus.calculus.symbolic_prod\nFailed example:\n    symbolic_prod(i^2, i, 1, 7)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 509, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 872, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.calculus.calculus.symbolic_prod[4]>\", line 1, in <module>\n        symbolic_prod(i**Integer(2), i, Integer(1), Integer(7))\n      File \"/usr/local/sage-8/local/lib/python2.7/site-packages/sage/calculus/calculus.py\", line 860, in symbolic_prod\n        raise TypeError(\"need a multiplication variable\")\n    TypeError: need a multiplication variable\n**********************************************************************\nFile \"src/sage/calculus/calculus.py\", line 848, in sage.calculus.calculus.symbolic_prod\nFailed example:\n    symbolic_prod(f(i), i, 1, 7)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 509, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 872, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.calculus.calculus.symbolic_prod[6]>\", line 1, in <module>\n        symbolic_prod(f(i), i, Integer(1), Integer(7))\n      File \"/usr/local/sage-8/local/lib/python2.7/site-packages/sage/calculus/calculus.py\", line 860, in symbolic_prod\n        raise TypeError(\"need a multiplication variable\")\n    TypeError: need a multiplication variable\n**********************************************************************\nFile \"src/sage/calculus/calculus.py\", line 850, in sage.calculus.calculus.symbolic_prod\nFailed example:\n    symbolic_prod(f(i), i, 1, n)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 509, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 872, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.calculus.calculus.symbolic_prod[7]>\", line 1, in <module>\n        symbolic_prod(f(i), i, Integer(1), n)\n      File \"/usr/local/sage-8/local/lib/python2.7/site-packages/sage/calculus/calculus.py\", line 860, in symbolic_prod\n        raise TypeError(\"need a multiplication variable\")\n    TypeError: need a multiplication variable\n**********************************************************************\nFile \"src/sage/calculus/calculus.py\", line 1489, in sage.calculus.calculus.laplace\nFailed example:\n    laplace(t^n, t, s, algorithm='giac')\nExpected:\n    Traceback (most recent call last):\n    ...\n    NotImplementedError: Unable to parse Giac output: integrate(t^n*exp(-s*t),t,0,+infinity)\nGot:\n    integration(t^n*e^(-s*t), t, 0, +Infinity)\n**********************************************************************\n2 items had failures:\n   1 of  39 in sage.calculus.calculus.laplace\n   4 of  11 in sage.calculus.calculus.symbolic_prod\n    [429 tests, 5 failures, 9.57 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/calculus/calculus.py  # 5 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 9.6 seconds\n    cpu time: 9.1 seconds\n    cumulative wall time: 9.6 seconds\n```\n\nThe last one is identical to one already seen in 8.0.beta4 and 8.0.beta5 ; again, nothing new, else probably not related. The four first ones seem identical : aren't they related to an undeclared variable ?\n\n- A couple suggestions, of varying importance :\n\n    1. (major) the interface methods (\"symbolic_expression.prod\" (or product)) and function(s) (\"symbolic_product\", parallelling \"symbolic_sum\") are necessary for easy use of this new functionality.\n\n    2. (minor) for aesthetics and consistency, could we have for sage.functions.other.symbolic_sum (aka Function_sum) (almost) the same _print_latex_ function you defined in sage.functions.other.symbolic_product (aka Function_prod) ?\n\n    3. ((very) minor) consider a \"mathematica\" method, parallelling tye one in symbolic_sum (necessary for would-be Mathematica users, since mathematica.Sum(X(j), [j,1,p]) give utter nonsense currently).\n\n- A question : can #22937 depend on this ?\n\n- And a possible doctest, demonstrating that this formal mayhem has a mathematical sense :\n\n```\nsage: var(\"j,p\", domain=\"integer\")\n(j, p)\nsage: X=function(\"X\")\nsage: sage.functions.other.symbolic_product(X(j),j,1,p).log().log_expand()\nsum(log(X(j)), j, 1, p)\n```\n\n==>`needs_work`",
    "created_at": "2017-05-08T13:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297782",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:12'></a>Replying to [comment:11 rws]:
> This doesn't have the `prod` interface (other ticket) and some docs are missing but everything should work. Question: where does SymPy differ from Maxima?


First of all, thank you very much for this addition, which should enhance Sage's usefulness fo high-school/undergrad levels.

However, `ptestlong` gives three failures :

```
----------------------------------------------------------------------
sage -t --long src/sage/calculus/calculus.py  # 5 doctests failed
sage -t --long src/sage/combinat/posets/posets.py  # 1 doctest failed
sage -t --long src/sage/homology/simplicial_complex.py  # 1 doctest failed
----------------------------------------------------------------------
```

The second and third ones have been [reported](https://groups.google.com/d/msg/sage-release/UdllnAJFufA/-e8ArqwFBAAJ) for 8.0.beta4 and are seen again in 8.0beta5. Nothing new here, so probably not related.

The third one is new :

```
charpent@asus16-ec:/usr/local/sage-8$ sage -t --long src/sage/calculus/calculus.py
too many failed tests, not using stored timings
Running doctests with ID 2017-05-08-14-44-39-93705f01.
Git branch: t/17505/implement_symbolic_product
Using --optional=database_gap,giacpy_sage,git_trac,mpir,python2,sage
Doctesting 1 file.
sage -t --long src/sage/calculus/calculus.py
**********************************************************************
File "src/sage/calculus/calculus.py", line 843, in sage.calculus.calculus.symbolic_prod
Failed example:
    symbolic_prod(x + i*(i+1)/2, i, 1, 4)
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 509, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 872, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.calculus.calculus.symbolic_prod[3]>", line 1, in <module>
        symbolic_prod(x + i*(i+Integer(1))/Integer(2), i, Integer(1), Integer(4))
      File "/usr/local/sage-8/local/lib/python2.7/site-packages/sage/calculus/calculus.py", line 860, in symbolic_prod
        raise TypeError("need a multiplication variable")
    TypeError: need a multiplication variable
**********************************************************************
File "src/sage/calculus/calculus.py", line 845, in sage.calculus.calculus.symbolic_prod
Failed example:
    symbolic_prod(i^2, i, 1, 7)
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 509, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 872, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.calculus.calculus.symbolic_prod[4]>", line 1, in <module>
        symbolic_prod(i**Integer(2), i, Integer(1), Integer(7))
      File "/usr/local/sage-8/local/lib/python2.7/site-packages/sage/calculus/calculus.py", line 860, in symbolic_prod
        raise TypeError("need a multiplication variable")
    TypeError: need a multiplication variable
**********************************************************************
File "src/sage/calculus/calculus.py", line 848, in sage.calculus.calculus.symbolic_prod
Failed example:
    symbolic_prod(f(i), i, 1, 7)
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 509, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 872, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.calculus.calculus.symbolic_prod[6]>", line 1, in <module>
        symbolic_prod(f(i), i, Integer(1), Integer(7))
      File "/usr/local/sage-8/local/lib/python2.7/site-packages/sage/calculus/calculus.py", line 860, in symbolic_prod
        raise TypeError("need a multiplication variable")
    TypeError: need a multiplication variable
**********************************************************************
File "src/sage/calculus/calculus.py", line 850, in sage.calculus.calculus.symbolic_prod
Failed example:
    symbolic_prod(f(i), i, 1, n)
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 509, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/sage-8/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 872, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.calculus.calculus.symbolic_prod[7]>", line 1, in <module>
        symbolic_prod(f(i), i, Integer(1), n)
      File "/usr/local/sage-8/local/lib/python2.7/site-packages/sage/calculus/calculus.py", line 860, in symbolic_prod
        raise TypeError("need a multiplication variable")
    TypeError: need a multiplication variable
**********************************************************************
File "src/sage/calculus/calculus.py", line 1489, in sage.calculus.calculus.laplace
Failed example:
    laplace(t^n, t, s, algorithm='giac')
Expected:
    Traceback (most recent call last):
    ...
    NotImplementedError: Unable to parse Giac output: integrate(t^n*exp(-s*t),t,0,+infinity)
Got:
    integration(t^n*e^(-s*t), t, 0, +Infinity)
**********************************************************************
2 items had failures:
   1 of  39 in sage.calculus.calculus.laplace
   4 of  11 in sage.calculus.calculus.symbolic_prod
    [429 tests, 5 failures, 9.57 s]
----------------------------------------------------------------------
sage -t --long src/sage/calculus/calculus.py  # 5 doctests failed
----------------------------------------------------------------------
Total time for all tests: 9.6 seconds
    cpu time: 9.1 seconds
    cumulative wall time: 9.6 seconds
```

The last one is identical to one already seen in 8.0.beta4 and 8.0.beta5 ; again, nothing new, else probably not related. The four first ones seem identical : aren't they related to an undeclared variable ?

- A couple suggestions, of varying importance :

    1. (major) the interface methods ("symbolic_expression.prod" (or product)) and function(s) ("symbolic_product", parallelling "symbolic_sum") are necessary for easy use of this new functionality.

    2. (minor) for aesthetics and consistency, could we have for sage.functions.other.symbolic_sum (aka Function_sum) (almost) the same _print_latex_ function you defined in sage.functions.other.symbolic_product (aka Function_prod) ?

    3. ((very) minor) consider a "mathematica" method, parallelling tye one in symbolic_sum (necessary for would-be Mathematica users, since mathematica.Sum(X(j), [j,1,p]) give utter nonsense currently).

- A question : can #22937 depend on this ?

- And a possible doctest, demonstrating that this formal mayhem has a mathematical sense :

```
sage: var("j,p", domain="integer")
(j, p)
sage: X=function("X")
sage: sage.functions.other.symbolic_product(X(j),j,1,p).log().log_expand()
sum(log(X(j)), j, 1, p)
```

==>`needs_work`



---

archive/issue_comments_297783.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-11T06:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297783",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_297784.json:
```json
{
    "body": "Changing commit from \"e4769b5524ae5629db4189d06684646b22781efb\" to \"58119b0df21bcfbb89fc58e108493fde90ac733f\"",
    "created_at": "2017-05-11T06:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297784",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e4769b5524ae5629db4189d06684646b22781efb" to "58119b0df21bcfbb89fc58e108493fde90ac733f"



---

archive/issue_comments_297785.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-11T06:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297785",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_297786.json:
```json
{
    "body": "<a id='comment:15'></a>Ah sorry just a moment, I'll address your other issues ASAP.",
    "created_at": "2017-05-11T06:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297786",
    "user": "https://github.com/rwst"
}
```

<a id='comment:15'></a>Ah sorry just a moment, I'll address your other issues ASAP.



---

archive/issue_comments_297787.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 rws]:\n> Ah sorry just a moment, I'll address your other issues ASAP.\n\n\nThose were just //suggestions//, not //requests// ;-)\n\nUnless you have other suggestions, I'll implement the \"symbolic product of product\" case in #22937 ASAP, and depend on the present ticket.",
    "created_at": "2017-05-11T07:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297787",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:16'></a>Replying to [comment:15 rws]:
> Ah sorry just a moment, I'll address your other issues ASAP.


Those were just //suggestions//, not //requests// ;-)

Unless you have other suggestions, I'll implement the "symbolic product of product" case in #22937 ASAP, and depend on the present ticket.



---

archive/issue_comments_297788.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:12 charpent]:\n>     1. (major) the interface methods (\"symbolic_expression.prod\" (or product))\n\n\nYes, but in a different ticket.\n\n> - A question : can #22937 depend on this ?\n\n\nYes you can state the dependency in the ticket form, but please wait with merging this branch, as I'll change the branch probably.\n\nAgree to everything else.",
    "created_at": "2017-05-11T07:38:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297788",
    "user": "https://github.com/rwst"
}
```

<a id='comment:17'></a>Replying to [comment:12 charpent]:
>     1. (major) the interface methods ("symbolic_expression.prod" (or product))


Yes, but in a different ticket.

> - A question : can #22937 depend on this ?


Yes you can state the dependency in the ticket form, but please wait with merging this branch, as I'll change the branch probably.

Agree to everything else.



---

archive/issue_comments_297789.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:17 rws]:\n> Replying to [comment:12 charpent]:\n> >     1. (major) the interface methods (\"symbolic_expression.prod\" (or product))\n  \n> \n> Yes, but in a different ticket.\n\n\nOkay. I'll take that in mind when implementing (and doctesting) #22937.\n\n> \n> > - A question : can #22937 depend on this ?\n \n> \n> Yes you can state the dependency in the ticket form, but please wait with merging this branch, as I'll change the branch probably.\n\n\nOkay also : I'll marl the dependency before starting the implementation of the multiplicative case. Should I wait your say so before reviewing the ticket ? Or should I review it in its current state ?\n\nSuggestion : mark it as `needs_work` before reworkiong it and `needs_review` when satisfied with (a step of) your work.\n \n> Agree to everything else.\n\n\nThanks !",
    "created_at": "2017-05-11T08:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297789",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:18'></a>Replying to [comment:17 rws]:
> Replying to [comment:12 charpent]:
> >     1. (major) the interface methods ("symbolic_expression.prod" (or product))
  
> 
> Yes, but in a different ticket.


Okay. I'll take that in mind when implementing (and doctesting) #22937.

> 
> > - A question : can #22937 depend on this ?
 
> 
> Yes you can state the dependency in the ticket form, but please wait with merging this branch, as I'll change the branch probably.


Okay also : I'll marl the dependency before starting the implementation of the multiplicative case. Should I wait your say so before reviewing the ticket ? Or should I review it in its current state ?

Suggestion : mark it as `needs_work` before reworkiong it and `needs_review` when satisfied with (a step of) your work.
 
> Agree to everything else.


Thanks !



---

archive/issue_comments_297790.json:
```json
{
    "body": "Changing commit from \"58119b0df21bcfbb89fc58e108493fde90ac733f\" to \"7a56004ca73a73e04b0b6a7bdbe6b528c0358bb3\"",
    "created_at": "2017-05-11T08:16:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297790",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "58119b0df21bcfbb89fc58e108493fde90ac733f" to "7a56004ca73a73e04b0b6a7bdbe6b528c0358bb3"



---

archive/issue_comments_297791.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-11T08:16:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297791",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_297792.json:
```json
{
    "body": "<a id='comment:20'></a>OK, which doctests are still missing?",
    "created_at": "2017-05-11T08:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297792",
    "user": "https://github.com/rwst"
}
```

<a id='comment:20'></a>OK, which doctests are still missing?



---

archive/issue_comments_297793.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:18 charpent]:\n> Should I wait your say so before reviewing the ticket ? Or should I review it in its current state ?\n\n\nPlease review now, there may only be some doctests missing.",
    "created_at": "2017-05-11T08:19:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297793",
    "user": "https://github.com/rwst"
}
```

<a id='comment:21'></a>Replying to [comment:18 charpent]:
> Should I wait your say so before reviewing the ticket ? Or should I review it in its current state ?


Please review now, there may only be some doctests missing.



---

archive/issue_comments_297794.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:21 rws]:\n> Replying to [comment:18 charpent]:\n> > Should I wait your say so before reviewing the ticket ? Or should I review it in its current state ?\n\n> \n> Please review now, there may only be some doctests missing.\n\n\nBuilds OK on top of my `distribute` branch. `ptestlon` running (needs about 1 hour : stay tuned...).",
    "created_at": "2017-05-11T08:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297794",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:22'></a>Replying to [comment:21 rws]:
> Replying to [comment:18 charpent]:
> > Should I wait your say so before reviewing the ticket ? Or should I review it in its current state ?

> 
> Please review now, there may only be some doctests missing.


Builds OK on top of my `distribute` branch. `ptestlon` running (needs about 1 hour : stay tuned...).



---

archive/issue_comments_297795.json:
```json
{
    "body": "<a id='comment:23'></a>Passes `ptestlong` with the same failures already reported for 8.0.beta4 and not yet fixed.\n\n===> `positive review`\n\nWaiting your say-so to merge into #22937...",
    "created_at": "2017-05-11T10:27:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297795",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:23'></a>Passes `ptestlong` with the same failures already reported for 8.0.beta4 and not yet fixed.

===> `positive review`

Waiting your say-so to merge into #22937...



---

archive/issue_comments_297796.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-11T10:27:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297796",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_297797.json:
```json
{
    "body": "<a id='comment:24'></a>Thanks.\n\nReplying to [comment:23 charpent]:\n> Waiting your say-so to merge into #22937...\n\n\nPlease go ahead.",
    "created_at": "2017-05-11T13:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297797",
    "user": "https://github.com/rwst"
}
```

<a id='comment:24'></a>Thanks.

Replying to [comment:23 charpent]:
> Waiting your say-so to merge into #22937...


Please go ahead.



---

archive/issue_comments_297798.json:
```json
{
    "body": "<a id='comment:25'></a>Your real name in the Reviewer field is missing, please add.,",
    "created_at": "2017-05-11T13:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297798",
    "user": "https://github.com/rwst"
}
```

<a id='comment:25'></a>Your real name in the Reviewer field is missing, please add.,



---

archive/issue_comments_297799.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Emmanuel Charpentier\"",
    "created_at": "2017-05-11T13:27:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297799",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing reviewer from "" to "Emmanuel Charpentier"



---

archive/issue_comments_297800.json:
```json
{
    "body": "<a id='comment:26'></a>Wups !\n\nDone...",
    "created_at": "2017-05-11T13:27:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297800",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:26'></a>Wups !

Done...



---

archive/issue_comments_297801.json:
```json
{
    "body": "<a id='comment:27'></a>Slight issue :\n\n```\nsage: var(\"j,p\", domain=\"integer\")\n(j, p)\nsage: X=function(\"X\")\nsage: latex(maxima(\"product(X(j),j,1,p)\").sage()^2)\n\\prod_{j=1}^{p} X(j)^{2}\n```\nwhich prints //wrong// (it should be `{\\prod_{j=1}^{p} X(j)}^{2`} in order to position the exponent over the whole sum, not the \"productand\"). The same is true for `sum`.\n\nCare to fix it here or should I open a new ticket (depending on this one) ?",
    "created_at": "2017-05-12T07:07:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297801",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:27'></a>Slight issue :

```
sage: var("j,p", domain="integer")
(j, p)
sage: X=function("X")
sage: latex(maxima("product(X(j),j,1,p)").sage()^2)
\prod_{j=1}^{p} X(j)^{2}
```
which prints //wrong// (it should be `{\prod_{j=1}^{p} X(j)}^{2`} in order to position the exponent over the whole sum, not the "productand"). The same is true for `sum`.

Care to fix it here or should I open a new ticket (depending on this one) ?



---

archive/issue_comments_297802.json:
```json
{
    "body": "<a id='comment:28'></a>I'll fix it immediately.",
    "created_at": "2017-05-12T07:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297802",
    "user": "https://github.com/rwst"
}
```

<a id='comment:28'></a>I'll fix it immediately.



---

archive/issue_comments_297803.json:
```json
{
    "body": "Changing commit from \"7a56004ca73a73e04b0b6a7bdbe6b528c0358bb3\" to \"d420ec4ab00a322f97bd05326741ec7de3e3d65a\"",
    "created_at": "2017-05-12T07:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297803",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7a56004ca73a73e04b0b6a7bdbe6b528c0358bb3" to "d420ec4ab00a322f97bd05326741ec7de3e3d65a"



---

archive/issue_comments_297804.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2017-05-12T07:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297804",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_297805.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-05-12T07:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297805",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_297806.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:27 charpent]:\n> which prints //wrong// (it should be `{\\prod_{j=1}^{p} X(j)}^{2`} in order to position the exponent over the whole sum, not the \"productand\"). The same is true for `sum`.\n\n\nHowever, isn't it the duty of power to make the braces?",
    "created_at": "2017-05-12T07:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297806",
    "user": "https://github.com/rwst"
}
```

<a id='comment:30'></a>Replying to [comment:27 charpent]:
> which prints //wrong// (it should be `{\prod_{j=1}^{p} X(j)}^{2`} in order to position the exponent over the whole sum, not the "productand"). The same is true for `sum`.


However, isn't it the duty of power to make the braces?



---

archive/issue_comments_297807.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:30 rws]:\n> Replying to [comment:27 charpent]:\n> > which prints //wrong// (it should be `{\\prod_{j=1}^{p} X(j)}^{2`} in order to position the exponent over the whole sum, not the \"productand\"). The same is true for `sum`.\n\n> \n> However, isn't it the duty of power to make the braces?\n\n\nNot necessarily. `\\sum_{j=1}^p X(j)^2` is mathematically wrong ; however, `{X_{j}}^2` is correct but ugly, whereas `X_{j}^2` is also ((almost) unambiguously) correct and much more pleasant.\n\nThere is still an ambiguity, that does not concern us there : tensors. But that's another whole can of worms.\n\nYour patch looks good. `ptestlong` is running and should terminate in about an hour.",
    "created_at": "2017-05-12T08:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297807",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:31'></a>Replying to [comment:30 rws]:
> Replying to [comment:27 charpent]:
> > which prints //wrong// (it should be `{\prod_{j=1}^{p} X(j)}^{2`} in order to position the exponent over the whole sum, not the "productand"). The same is true for `sum`.

> 
> However, isn't it the duty of power to make the braces?


Not necessarily. `\sum_{j=1}^p X(j)^2` is mathematically wrong ; however, `{X_{j}}^2` is correct but ugly, whereas `X_{j}^2` is also ((almost) unambiguously) correct and much more pleasant.

There is still an ambiguity, that does not concern us there : tensors. But that's another whole can of worms.

Your patch looks good. `ptestlong` is running and should terminate in about an hour.



---

archive/issue_comments_297808.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-05-12T09:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297808",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_297809.json:
```json
{
    "body": "<a id='comment:32'></a>Two new failures :\n\n```\nsage -t --long src/sage/functions/other.py\n**********************************************************************\nFile \"src/sage/functions/other.py\", line 2617, in sage.functions.other.Function_\nsum._print_latex_\nFailed example:\n    latex(ssum(x^2, x, 1, 10))\nExpected:\n    \\sum_{x=1}^{10} x^2\nGot:\n    {\\sum_{x=1}^{10} x^2}\n**********************************************************************\nFile \"src/sage/functions/other.py\", line 2664, in sage.functions.other.Function_prod._print_latex_\nFailed example:\n    latex(sprod(x^2, x, 1, 10))\nExpected:\n    \\prod_{x=1}^{10} x^2\nGot:\n    {\\prod_{x=1}^{10} x^2}\n**********************************************************************\n2 items had failures:\n   1 of   3 in sage.functions.other.Function_prod._print_latex_\n   1 of   3 in sage.functions.other.Function_sum._print_latex_\n    [580 tests, 2 failures, 7.13 s]\n```\n\nIt seems that you forgot to upate your doctests... ;-)\n\n==> `needs work` (pro forma)",
    "created_at": "2017-05-12T09:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297809",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:32'></a>Two new failures :

```
sage -t --long src/sage/functions/other.py
**********************************************************************
File "src/sage/functions/other.py", line 2617, in sage.functions.other.Function_
sum._print_latex_
Failed example:
    latex(ssum(x^2, x, 1, 10))
Expected:
    \sum_{x=1}^{10} x^2
Got:
    {\sum_{x=1}^{10} x^2}
**********************************************************************
File "src/sage/functions/other.py", line 2664, in sage.functions.other.Function_prod._print_latex_
Failed example:
    latex(sprod(x^2, x, 1, 10))
Expected:
    \prod_{x=1}^{10} x^2
Got:
    {\prod_{x=1}^{10} x^2}
**********************************************************************
2 items had failures:
   1 of   3 in sage.functions.other.Function_prod._print_latex_
   1 of   3 in sage.functions.other.Function_sum._print_latex_
    [580 tests, 2 failures, 7.13 s]
```

It seems that you forgot to upate your doctests... ;-)

==> `needs work` (pro forma)



---

archive/issue_comments_297810.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-12T12:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297810",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_297811.json:
```json
{
    "body": "Changing commit from \"d420ec4ab00a322f97bd05326741ec7de3e3d65a\" to \"5779423aac340d1d7dc415da287b9af5e0e1f381\"",
    "created_at": "2017-05-12T12:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297811",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d420ec4ab00a322f97bd05326741ec7de3e3d65a" to "5779423aac340d1d7dc415da287b9af5e0e1f381"



---

archive/issue_comments_297812.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-12T12:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297812",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_297813.json:
```json
{
    "body": "<a id='comment:34'></a>Hopefully my reviewers keep their patience. Thanks.",
    "created_at": "2017-05-12T12:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297813",
    "user": "https://github.com/rwst"
}
```

<a id='comment:34'></a>Hopefully my reviewers keep their patience. Thanks.



---

archive/issue_comments_297814.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:34 rws]:\n> Hopefully my reviewers keep their patience. Thanks.\n\n\n`sage -t --long src/sage/symbolic/expression.pyx` passes with no error. `ptestlong` underway (again, //pro forma//). Stay tuned.",
    "created_at": "2017-05-12T13:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297814",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:35'></a>Replying to [comment:34 rws]:
> Hopefully my reviewers keep their patience. Thanks.


`sage -t --long src/sage/symbolic/expression.pyx` passes with no error. `ptestlong` underway (again, //pro forma//). Stay tuned.



---

archive/issue_comments_297815.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-12T14:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297815",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_297816.json:
```json
{
    "body": "<a id='comment:36'></a>`ptestlong` passes with the known, supposed unrelated failure ; no whoopee cushions.\n\n==>`positive_review`\n\nSince this was tested on top of #22937, the latter is also ready for re-review. Would you mind ?",
    "created_at": "2017-05-12T14:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297816",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:36'></a>`ptestlong` passes with the known, supposed unrelated failure ; no whoopee cushions.

==>`positive_review`

Since this was tested on top of #22937, the latter is also ready for re-review. Would you mind ?



---

archive/issue_comments_297817.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-05-12T14:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297817",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_297818.json:
```json
{
    "body": "<a id='comment:37'></a>`sr_prod` is missing a doctest.",
    "created_at": "2017-05-12T14:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297818",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:37'></a>`sr_prod` is missing a doctest.



---

archive/issue_events_050312.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-05-13T06:01:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17505#event-50312"
}
```



---

archive/issue_events_050313.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-05-13T06:01:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17505#event-50313"
}
```



---

archive/issue_comments_297819.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-05-13T06:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297819",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_297820.json:
```json
{
    "body": "<a id='comment:38'></a>The ticket was merged up to a point. I'll close it and put the branch with the remaining issues in another ticket. See #22989.",
    "created_at": "2017-05-13T06:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297820",
    "user": "https://github.com/rwst"
}
```

<a id='comment:38'></a>The ticket was merged up to a point. I'll close it and put the branch with the remaining issues in another ticket. See #22989.



---

archive/issue_comments_297821.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:38 rws]:\n> The ticket was merged up to a point.\n\nYou mean in #22937, I suppose ?\n> I'll close it and put the branch with the remaining issues in another ticket. See #22989.\nHmm... Unles I'm mistaken, there are two consequences :\n- #22937 should no longer depend on #17505\n- #22989 should depend on #22937\nAm I right ?",
    "created_at": "2017-05-13T06:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297821",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:39'></a>Replying to [comment:38 rws]:
> The ticket was merged up to a point.

You mean in #22937, I suppose ?
> I'll close it and put the branch with the remaining issues in another ticket. See #22989.
Hmm... Unles I'm mistaken, there are two consequences :
- #22937 should no longer depend on #17505
- #22989 should depend on #22937
Am I right ?



---

archive/issue_comments_297822.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-13T10:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297822",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_050314.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-13T10:34:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17505#event-50314"
}
```



---

archive/issue_comments_297823.json:
```json
{
    "body": "<a id='comment:40'></a>Sorry, forgot to close this ticket. Move your new commits to a new ticket.",
    "created_at": "2017-05-13T10:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17505",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17505#issuecomment-297823",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:40'></a>Sorry, forgot to close this ticket. Move your new commits to a new ticket.
