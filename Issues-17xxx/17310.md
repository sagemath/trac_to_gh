# Issue 17310: improvement to StrongTableaux to_transposition algorithm

archive/issues_017073.json:
```json
{
    "body": "In discussions after #17252, Jennifer Morse pointed out that the algorithm to convert a strong marked column strict tableau to a sequence of transpositions could be made more efficient by always choosing the largest rightmost marking as the end point.  The previous version of this algorithm scanned the potential marked column strict tableaux from right to left and pulled off markings if applying a transposition lowered the length of the core by one.  This version will test fewer potential marked ribbons.\n\nCC:  @anneschilling @tscrim\n\nKeywords: tableaux\n\nReviewer: Travis Scrimshaw, Anne Schilling\n\nAuthor: Mike Zabrocki\n\nBranch: b87a7366fe35b3164a60f0f788ffc96d32071377\n\nCommit: b87a7366fe35b3164a60f0f788ffc96d32071377\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17310\n\n",
    "closed_at": "2014-11-15T16:16:44Z",
    "created_at": "2014-11-08T20:56:09Z",
    "labels": [
        "component: combinatorics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "improvement to StrongTableaux to_transposition algorithm",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17310",
    "user": "https://github.com/zabrocki"
}
```
In discussions after #17252, Jennifer Morse pointed out that the algorithm to convert a strong marked column strict tableau to a sequence of transpositions could be made more efficient by always choosing the largest rightmost marking as the end point.  The previous version of this algorithm scanned the potential marked column strict tableaux from right to left and pulled off markings if applying a transposition lowered the length of the core by one.  This version will test fewer potential marked ribbons.

CC:  @anneschilling @tscrim

Keywords: tableaux

Reviewer: Travis Scrimshaw, Anne Schilling

Author: Mike Zabrocki

Branch: b87a7366fe35b3164a60f0f788ffc96d32071377

Commit: b87a7366fe35b3164a60f0f788ffc96d32071377

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17310





---

archive/issue_comments_226805.json:
```json
{
    "body": "<a id='comment:1'></a>I will continue to run a few tests to make sure, but I think that this version shaves a few seconds off of the tests of k_tableau.py\n\n---\nNew commits:",
    "created_at": "2014-11-09T13:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17310#issuecomment-226805",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:1'></a>I will continue to run a few tests to make sure, but I think that this version shaves a few seconds off of the tests of k_tableau.py

---
New commits:



---

archive/issue_comments_226806.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2014-11-09T14:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17310#issuecomment-226806",
    "user": "https://github.com/zabrocki"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_226807.json:
```json
{
    "body": "<a id='comment:2'></a>This version seems to be slightly faster in practice.  On my laptop I see around 24-25 seconds with the patch, 24-26 without.",
    "created_at": "2014-11-09T14:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17310#issuecomment-226807",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:2'></a>This version seems to be slightly faster in practice.  On my laptop I see around 24-25 seconds with the patch, 24-26 without.



---

archive/issue_comments_226808.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-09T14:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17310#issuecomment-226808",
    "user": "https://github.com/zabrocki"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_226809.json:
```json
{
    "body": "<a id='comment:3'></a>So I've made some changes and massaged out some more speed. My timings are below. I've also marked two tests as long because the file takes some 110s to run on mine (each were about 9s). However I'll let someone else (Anne) do the final review on the math portion.\n\n---\n\nOriginal timings:\n\n```\nsage: CST_to_trans = StrongTableaux.marked_CST_to_transposition_sequence\nsage: %timeit CST_to_trans([[-1, -1, -1], [1]], 2)\n100 loops, best of 3: 8.32 ms per loop\nsage: %timeit CST_to_trans([[-1, -2, -2, -2, -2], [-2, 2], [2]], 3)\n10 loops, best of 3: 21.1 ms per loop\nsage: %timeit CST_to_trans([[-1, -2, -5, 5, -5, 5, -5], [-3, -4, 5, 5], [5]],3)\n10 loops, best of 3: 104 ms per loop\nsage: %timeit CST_to_trans([[-1, -2, -3, 4, -7], [-4, -6], [-5, 6]],3)\n10 loops, best of 3: 29.7 ms per loop\nsage: %timeit CST_to_trans([], 2)\n100000 loops, best of 3: 2.46 \u00b5s per loop\n```\nWithout my changes:\n\n```\nsage: CST_to_trans = StrongTableaux.marked_CST_to_transposition_sequence\nsage: %timeit CST_to_trans([[-1, -1, -1], [1]], 2)\n100 loops, best of 3: 8.29 ms per loop\nsage: %timeit CST_to_trans([[-1, -2, -2, -2, -2], [-2, 2], [2]], 3)\n10 loops, best of 3: 21 ms per loop\nsage: %timeit CST_to_trans([[-1, -2, -5, 5, -5, 5, -5], [-3, -4, 5, 5], [5]],3)\n10 loops, best of 3: 48 ms per loop\nsage: %timeit CST_to_trans([[-1, -2, -3, 4, -7], [-4, -6], [-5, 6]],3)\n10 loops, best of 3: 29.3 ms per loop\nsage: %timeit CST_to_trans([], 2)\n100000 loops, best of 3: 2.4 \u00b5s per loop\n```\nWith my changes:\n\n```\nsage: CST_to_trans = StrongTableaux.marked_CST_to_transposition_sequence\nsage: %timeit CST_to_trans([[-1, -1, -1], [1]], 2)\n100 loops, best of 3: 7.7 ms per loop\nsage: %timeit CST_to_trans([[-1, -2, -2, -2, -2], [-2, 2], [2]], 3)\n10 loops, best of 3: 18.3 ms per loop\nsage: %timeit CST_to_trans([[-1, -2, -5, 5, -5, 5, -5], [-3, -4, 5, 5], [5]],3)\n10 loops, best of 3: 43.3 ms per loop\nsage: %timeit CST_to_trans([[-1, -2, -3, 4, -7], [-4, -6], [-5, 6]],3)\n10 loops, best of 3: 26.1 ms per loop\nsage: %timeit CST_to_trans([], 2)\n100000 loops, best of 3: 2 \u00b5s per loop\n```\n\n---\nNew commits:",
    "created_at": "2014-11-09T20:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17310#issuecomment-226809",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>So I've made some changes and massaged out some more speed. My timings are below. I've also marked two tests as long because the file takes some 110s to run on mine (each were about 9s). However I'll let someone else (Anne) do the final review on the math portion.

---

Original timings:

```
sage: CST_to_trans = StrongTableaux.marked_CST_to_transposition_sequence
sage: %timeit CST_to_trans([[-1, -1, -1], [1]], 2)
100 loops, best of 3: 8.32 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -2, -2, -2], [-2, 2], [2]], 3)
10 loops, best of 3: 21.1 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -5, 5, -5, 5, -5], [-3, -4, 5, 5], [5]],3)
10 loops, best of 3: 104 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -3, 4, -7], [-4, -6], [-5, 6]],3)
10 loops, best of 3: 29.7 ms per loop
sage: %timeit CST_to_trans([], 2)
100000 loops, best of 3: 2.46 µs per loop
```
Without my changes:

```
sage: CST_to_trans = StrongTableaux.marked_CST_to_transposition_sequence
sage: %timeit CST_to_trans([[-1, -1, -1], [1]], 2)
100 loops, best of 3: 8.29 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -2, -2, -2], [-2, 2], [2]], 3)
10 loops, best of 3: 21 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -5, 5, -5, 5, -5], [-3, -4, 5, 5], [5]],3)
10 loops, best of 3: 48 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -3, 4, -7], [-4, -6], [-5, 6]],3)
10 loops, best of 3: 29.3 ms per loop
sage: %timeit CST_to_trans([], 2)
100000 loops, best of 3: 2.4 µs per loop
```
With my changes:

```
sage: CST_to_trans = StrongTableaux.marked_CST_to_transposition_sequence
sage: %timeit CST_to_trans([[-1, -1, -1], [1]], 2)
100 loops, best of 3: 7.7 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -2, -2, -2], [-2, 2], [2]], 3)
10 loops, best of 3: 18.3 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -5, 5, -5, 5, -5], [-3, -4, 5, 5], [5]],3)
10 loops, best of 3: 43.3 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -3, 4, -7], [-4, -6], [-5, 6]],3)
10 loops, best of 3: 26.1 ms per loop
sage: %timeit CST_to_trans([], 2)
100000 loops, best of 3: 2 µs per loop
```

---
New commits:



---

archive/issue_comments_226810.json:
```json
{
    "body": "<a id='comment:4'></a>Hi Mike, thanks for implementing this! Looks good to me. Anne",
    "created_at": "2014-11-10T00:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17310#issuecomment-226810",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:4'></a>Hi Mike, thanks for implementing this! Looks good to me. Anne



---

archive/issue_comments_226811.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-10T00:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17310#issuecomment-226811",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_226812.json:
```json
{
    "body": "<a id='comment:6'></a>I've been calculating larger examples to make sure going from and to transposition sequences are consistent and have found no faults.\n\nThanks Travis and Anne.",
    "created_at": "2014-11-10T12:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17310#issuecomment-226812",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:6'></a>I've been calculating larger examples to make sure going from and to transposition sequences are consistent and have found no faults.

Thanks Travis and Anne.



---

archive/issue_comments_226813.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-15T16:16:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17310#issuecomment-226813",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_050004.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-15T16:16:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17310",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17310#event-50004"
}
```
