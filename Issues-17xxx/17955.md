# Issue 17955: LaurentSeriesRing and series_precision

archive/issues_017718.json:
```json
{
    "body": "Currently, `LaurentSeriesRing` caches without replacing the default `default_prec=None` to the global series precision obtainable by `sage.default.series_precision()` . This leads to the following behavior:\n\n```\nsage: set_series_precision(5)\nsage: R.<x> = LaurentSeriesRing(ZZ)\nsage: 1/(1-x)\n1 + x + x^2 + x^3 + x^4 + O(x^5)\nsage: set_series_precision(3)\nsage: R.<x> = LaurentSeriesRing(ZZ)\nsage: 1/(1-x)\n1 + x + x^2 + x^3 + x^4 + O(x^5)\n```\nInstead, the (second) output should be\n\n```\nsage: 1/(1-x)\n1 + x + x^2 + O(x^3)\n```\n\nThis is fixed by setting `default_prec` to the corresponding global series precision *before* caching the parent.\n\n**Keywords:** series_precision, asymptotics\n\n**Branch/Commit:** [13b1867998e2f1f172ffd9cb576e3ba4e8298735](https://github.com/sagemath/sagetrac-mirror/commit/13b1867998e2f1f172ffd9cb576e3ba4e8298735)\n\n**Reviewer:** Ralf Stephan\n\n**Author:** Benjamin Hackl\n\nIssue created by migration from https://trac.sagemath.org/ticket/17955\n\n",
    "closed_at": "2015-03-17T08:33:52Z",
    "created_at": "2015-03-14T13:14:48Z",
    "labels": [
        "component: commutative algebra",
        "trivial",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "LaurentSeriesRing and series_precision",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17955",
    "user": "https://github.com/behackl"
}
```
Currently, `LaurentSeriesRing` caches without replacing the default `default_prec=None` to the global series precision obtainable by `sage.default.series_precision()` . This leads to the following behavior:

```
sage: set_series_precision(5)
sage: R.<x> = LaurentSeriesRing(ZZ)
sage: 1/(1-x)
1 + x + x^2 + x^3 + x^4 + O(x^5)
sage: set_series_precision(3)
sage: R.<x> = LaurentSeriesRing(ZZ)
sage: 1/(1-x)
1 + x + x^2 + x^3 + x^4 + O(x^5)
```
Instead, the (second) output should be

```
sage: 1/(1-x)
1 + x + x^2 + O(x^3)
```

This is fixed by setting `default_prec` to the corresponding global series precision *before* caching the parent.

**Keywords:** series_precision, asymptotics

**Branch/Commit:** [13b1867998e2f1f172ffd9cb576e3ba4e8298735](https://github.com/sagemath/sagetrac-mirror/commit/13b1867998e2f1f172ffd9cb576e3ba4e8298735)

**Reviewer:** Ralf Stephan

**Author:** Benjamin Hackl

Issue created by migration from https://trac.sagemath.org/ticket/17955





---

archive/issue_events_164325.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2015-03-14T13:28:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17955#event-164325"
}
```



---

archive/issue_comments_247445.json:
```json
{
    "body": "**Commit:** [13b1867998e2f1f172ffd9cb576e3ba4e8298735](https://github.com/sagemath/sagetrac-mirror/commit/13b1867998e2f1f172ffd9cb576e3ba4e8298735)",
    "created_at": "2015-03-14T13:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17955#issuecomment-247445",
    "user": "https://github.com/behackl"
}
```

**Commit:** [13b1867998e2f1f172ffd9cb576e3ba4e8298735](https://github.com/sagemath/sagetrac-mirror/commit/13b1867998e2f1f172ffd9cb576e3ba4e8298735)



---

archive/issue_comments_247446.json:
```json
{
    "body": "**Author:** Benjamin Hackl",
    "created_at": "2015-03-14T13:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17955#issuecomment-247446",
    "user": "https://github.com/behackl"
}
```

**Author:** Benjamin Hackl



---

archive/issue_events_164326.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2015-03-14T13:28:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "label": "trivial",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17955#event-164326"
}
```



---

archive/issue_comments_247447.json:
```json
{
    "body": "**Branch:** [u/behackl/laurent_series_precision](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/laurent_series_precision)",
    "created_at": "2015-03-14T13:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17955#issuecomment-247447",
    "user": "https://github.com/behackl"
}
```

**Branch:** [u/behackl/laurent_series_precision](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/laurent_series_precision)



---

archive/issue_comments_247448.json:
```json
{
    "body": "**Reviewer:** Ralf Stephan",
    "created_at": "2015-03-14T14:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17955#issuecomment-247448",
    "user": "https://github.com/rwst"
}
```

**Reviewer:** Ralf Stephan



---

archive/issue_events_164327.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-14T14:10:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "label": "component: symbolics",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17955#event-164327"
}
```



---

archive/issue_events_164328.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-14T14:10:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "label": "component: commutative algebra",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17955#event-164328"
}
```



---

archive/issue_events_164329.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-14T14:10:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17955#event-164329"
}
```



---

archive/issue_events_164330.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-14T14:10:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17955#event-164330"
}
```



---

archive/issue_comments_247449.json:
```json
{
    "body": "<a id='comment:2'></a>\nIs fine and passes all tests in `rings/` and `doc/`. Thanks for spotting this.",
    "created_at": "2015-03-14T14:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17955#issuecomment-247449",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>
Is fine and passes all tests in `rings/` and `doc/`. Thanks for spotting this.



---

archive/issue_events_164331.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-17T08:33:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17955#event-164331"
}
```



---

archive/issue_events_164332.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-17T08:33:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17955#event-164332"
}
```



---

archive/issue_comments_247450.json:
```json
{
    "body": "**Changing branch** from \"[u/behackl/laurent_series_precision](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/laurent_series_precision)\" to \"[13b1867998e2f1f172ffd9cb576e3ba4e8298735](https://github.com/sagemath/sagetrac-mirror/commit/13b1867998e2f1f172ffd9cb576e3ba4e8298735)\".",
    "created_at": "2015-03-17T08:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17955#issuecomment-247450",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/behackl/laurent_series_precision](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/laurent_series_precision)" to "[13b1867998e2f1f172ffd9cb576e3ba4e8298735](https://github.com/sagemath/sagetrac-mirror/commit/13b1867998e2f1f172ffd9cb576e3ba4e8298735)".
