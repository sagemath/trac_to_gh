# Issue 17955: LaurentSeriesRing and series_precision

archive/issues_017718.json:
```json
{
    "assignees": [],
    "body": "Currently, `LaurentSeriesRing` caches without replacing the default `default_prec=None` to the global series precision obtainable by `sage.default.series_precision()` . This leads to the following behavior:\n\n```\nsage: set_series_precision(5)\nsage: R.<x> = LaurentSeriesRing(ZZ)\nsage: 1/(1-x)\n1 + x + x^2 + x^3 + x^4 + O(x^5)\nsage: set_series_precision(3)\nsage: R.<x> = LaurentSeriesRing(ZZ)\nsage: 1/(1-x)\n1 + x + x^2 + x^3 + x^4 + O(x^5)\n```\nInstead, the (second) output should be\n\n```\nsage: 1/(1-x)\n1 + x + x^2 + O(x^3)\n```\n\nThis is fixed by setting `default_prec` to the corresponding global series precision *before* caching the parent.\n\nKeywords: **series_precision, asymptotics**\n\nBranch/Commit: **[13b1867](https://github.com/sagemath/sagetrac-mirror/commit/13b1867998e2f1f172ffd9cb576e3ba4e8298735)**\n\nReviewer: **Ralf Stephan**\n\nAuthor: **Benjamin Hackl**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17955_\n\n",
    "closed_at": "2015-03-17T08:33:52Z",
    "created_at": "2015-03-14T13:14:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p5%20%E2%80%93%20trivial",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "LaurentSeriesRing and series_precision",
    "type": "issue",
    "updated_at": "2015-03-17T08:33:52Z",
    "url": "https://github.com/sagemath/sage/issues/17955",
    "user": "https://github.com/behackl"
}
```
Currently, `LaurentSeriesRing` caches without replacing the default `default_prec=None` to the global series precision obtainable by `sage.default.series_precision()` . This leads to the following behavior:

```
sage: set_series_precision(5)
sage: R.<x> = LaurentSeriesRing(ZZ)
sage: 1/(1-x)
1 + x + x^2 + x^3 + x^4 + O(x^5)
sage: set_series_precision(3)
sage: R.<x> = LaurentSeriesRing(ZZ)
sage: 1/(1-x)
1 + x + x^2 + x^3 + x^4 + O(x^5)
```
Instead, the (second) output should be

```
sage: 1/(1-x)
1 + x + x^2 + O(x^3)
```

This is fixed by setting `default_prec` to the corresponding global series precision *before* caching the parent.

Keywords: **series_precision, asymptotics**

Branch/Commit: **[13b1867](https://github.com/sagemath/sagetrac-mirror/commit/13b1867998e2f1f172ffd9cb576e3ba4e8298735)**

Reviewer: **Ralf Stephan**

Author: **Benjamin Hackl**

_Issue created by migration from https://trac.sagemath.org/ticket/17955_





---

archive/issue_events_229193.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2015-03-14T13:14:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229193"
}
```



---

archive/issue_events_229194.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2015-03-14T13:14:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229194"
}
```



---

archive/issue_events_229195.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2015-03-14T13:14:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229195"
}
```



---

archive/issue_events_229196.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2015-03-14T13:14:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229196"
}
```



---

archive/issue_events_229197.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2015-03-14T13:28:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229197"
}
```



---

archive/issue_comments_245920.json:
```json
{
    "body": "Commit: **[13b1867](https://github.com/sagemath/sagetrac-mirror/commit/13b1867998e2f1f172ffd9cb576e3ba4e8298735)**",
    "created_at": "2015-03-14T13:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17955#issuecomment-245920",
    "user": "https://github.com/behackl"
}
```

Commit: **[13b1867](https://github.com/sagemath/sagetrac-mirror/commit/13b1867998e2f1f172ffd9cb576e3ba4e8298735)**



---

archive/issue_comments_245921.json:
```json
{
    "body": "Author: **Benjamin Hackl**",
    "created_at": "2015-03-14T13:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17955#issuecomment-245921",
    "user": "https://github.com/behackl"
}
```

Author: **Benjamin Hackl**



---

archive/issue_events_229198.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2015-03-14T13:28:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229198"
}
```



---

archive/issue_events_229199.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2015-03-14T13:28:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "label": "https://github.com/sagemath/sage/labels/p5%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229199"
}
```



---

archive/issue_comments_245922.json:
```json
{
    "body": "Branch: **[u/behackl/laurent_series_precision](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/laurent_series_precision)**",
    "created_at": "2015-03-14T13:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17955#issuecomment-245922",
    "user": "https://github.com/behackl"
}
```

Branch: **[u/behackl/laurent_series_precision](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/laurent_series_precision)**



---

archive/issue_comments_245923.json:
```json
{
    "body": "Reviewer: **Ralf Stephan**",
    "created_at": "2015-03-14T14:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17955#issuecomment-245923",
    "user": "https://github.com/rwst"
}
```

Reviewer: **Ralf Stephan**



---

archive/issue_events_229200.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-14T14:10:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229200"
}
```



---

archive/issue_events_229201.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-14T14:10:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "component: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229201"
}
```



---

archive/issue_events_229202.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-14T14:10:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229202"
}
```



---

archive/issue_events_229203.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-14T14:10:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229203"
}
```



---

archive/issue_comments_245924.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nIs fine and passes all tests in `rings/` and `doc/`. Thanks for spotting this.",
    "created_at": "2015-03-14T14:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17955#issuecomment-245924",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'>Comment 2:</a>
Is fine and passes all tests in `rings/` and `doc/`. Thanks for spotting this.



---

archive/issue_events_229204.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-17T08:33:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229204"
}
```



---

archive/issue_events_229205.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "59e8d947d869182596d5a25b0ed17dcf017c4d42",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-03-17T08:33:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17955#event-229205"
}
```



---

archive/issue_comments_245925.json:
```json
{
    "body": "Changed branch from **[u/behackl/laurent_series_precision](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/laurent_series_precision)** to **[13b1867](https://github.com/sagemath/sagetrac-mirror/commit/13b1867998e2f1f172ffd9cb576e3ba4e8298735)**",
    "created_at": "2015-03-17T08:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17955#issuecomment-245925",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/behackl/laurent_series_precision](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/laurent_series_precision)** to **[13b1867](https://github.com/sagemath/sagetrac-mirror/commit/13b1867998e2f1f172ffd9cb576e3ba4e8298735)**
