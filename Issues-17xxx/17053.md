# Issue 17053: Add function for disjoint union and ordinal sum of posets

archive/issues_016816.json:
```json
{
    "assignees": [],
    "body": "Sage has no function for disjoint union (or *direct sum*) of posets, neither for ordinal sum. These are mostly matter of wrapping right function of graph + writing documentation.\n\nAt same time maybe parameter name for `disjoint_union` on Graphs should be changed.\n\n\nCC:  @nathanncohen\n\nBranch/Commit: **[`b097c88`](https://github.com/sagemath/sagetrac-mirror/commit/b097c8893dae7cd96f8f7064d0179842cc4aeaec)**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **Jori M\u00e4ntysalo**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17053_\n\n",
    "closed_at": "2014-11-15T16:22:29Z",
    "created_at": "2014-09-27T14:41:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add function for disjoint union and ordinal sum of posets",
    "type": "issue",
    "updated_at": "2014-11-15T16:22:29Z",
    "url": "https://github.com/sagemath/sage/issues/17053",
    "user": "https://github.com/jm58660"
}
```
Sage has no function for disjoint union (or *direct sum*) of posets, neither for ordinal sum. These are mostly matter of wrapping right function of graph + writing documentation.

At same time maybe parameter name for `disjoint_union` on Graphs should be changed.


CC:  @nathanncohen

Branch/Commit: **[`b097c88`](https://github.com/sagemath/sagetrac-mirror/commit/b097c8893dae7cd96f8f7064d0179842cc4aeaec)**

Reviewer: **Nathann Cohen**

Author: **Jori Mäntysalo**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/17053_





---

archive/issue_events_244817.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-09-27T14:41:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244817"
}
```



---

archive/issue_events_244818.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-09-27T14:41:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244818"
}
```



---

archive/issue_events_244819.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-09-27T14:41:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244819"
}
```



---

archive/issue_events_244820.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-09-27T14:41:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244820"
}
```



---

archive/issue_comments_225848.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nSomething like this:\n\n```\ndef sum_of_posets(self, other, labeling=None):\n    if not hasattr(other,'hasse_diagram'):\n        raise ValueError('The input is not a finite poset.')\n    if labeling==None:\n        # Check for duplicates. Slow, just for an example.\n        for i in self.list():\n            for j in other.list():\n                if i==j:\n                    raise ValueError('What should be type of this error?')\n        elements=self.list()+other.list()\n        coverings=self.cover_relations()+other.cover_relations()\n        return Poset( (elements, coverings) )\n    if labeling=='linear':\n        return sum_of_posets(self.canonical_label(), other.canonical_label().relabel(lambda x: x+self.cardinality()))\n    if type(labeling) is tuple and len(labeling)==2:\n        return Poset( ([(labeling[0],x) for x in self.list()]+[(labeling[1],x) for x in other.list()], [[(labeling[0],x[0]),(labeling[0],x[1])] for x in self.cover_relations()]+[[(labeling[1],x[0]),(labeling[1],x[1])] for x in other.cover_relations()]) )\n    raise ValueError(\"Labeling must be 'linear' or tuple of two elements\")\n```\n\nFor testing try for example\n\n```\nP1=Posets.PentagonPoset(facade=True).relabel(lambda x: x+10)\nP2=Poset({0:[1,2],1:[3,4]})\n\nsum_of_posets(P1, P2, labeling=('a', 'b')).show(figsize=4, vertex_size=1000)\nsum_of_posets(P1, P2, labeling='linear').show(figsize=4, vertex_size=1000)\nsum_of_posets(P1, P2).show(figsize=4, vertex_size=1000)\nsum_of_posets(P1, P1)\n```\n\nAnother question: should ordinal sum be part of same function with keyword like `type='ordinal'` or distinct function?",
    "created_at": "2014-09-27T17:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225848",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:1" align="right">comment:1</div>

Something like this:

```
def sum_of_posets(self, other, labeling=None):
    if not hasattr(other,'hasse_diagram'):
        raise ValueError('The input is not a finite poset.')
    if labeling==None:
        # Check for duplicates. Slow, just for an example.
        for i in self.list():
            for j in other.list():
                if i==j:
                    raise ValueError('What should be type of this error?')
        elements=self.list()+other.list()
        coverings=self.cover_relations()+other.cover_relations()
        return Poset( (elements, coverings) )
    if labeling=='linear':
        return sum_of_posets(self.canonical_label(), other.canonical_label().relabel(lambda x: x+self.cardinality()))
    if type(labeling) is tuple and len(labeling)==2:
        return Poset( ([(labeling[0],x) for x in self.list()]+[(labeling[1],x) for x in other.list()], [[(labeling[0],x[0]),(labeling[0],x[1])] for x in self.cover_relations()]+[[(labeling[1],x[0]),(labeling[1],x[1])] for x in other.cover_relations()]) )
    raise ValueError("Labeling must be 'linear' or tuple of two elements")
```

For testing try for example

```
P1=Posets.PentagonPoset(facade=True).relabel(lambda x: x+10)
P2=Poset({0:[1,2],1:[3,4]})

sum_of_posets(P1, P2, labeling=('a', 'b')).show(figsize=4, vertex_size=1000)
sum_of_posets(P1, P2, labeling='linear').show(figsize=4, vertex_size=1000)
sum_of_posets(P1, P2).show(figsize=4, vertex_size=1000)
sum_of_posets(P1, P1)
```

Another question: should ordinal sum be part of same function with keyword like `type='ordinal'` or distinct function?



---

archive/issue_comments_225849.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHello !\n\nWe already have a `Graph.disjoint_union` that accepts this kind of parameter. If you want to have a similar feature at `Poset` level I suggest that you only expose this function. The code would just be :\n\n```\nreturn Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram()))\n```\n\nThen, if you want to have more ways to tune the result through the points' name, the best would be to change the Graph function itself, which would consequently give the same feature to the Poset function.\n\nNathann",
    "created_at": "2014-09-29T08:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225849",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

Hello !

We already have a `Graph.disjoint_union` that accepts this kind of parameter. If you want to have a similar feature at `Poset` level I suggest that you only expose this function. The code would just be :

```
return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram()))
```

Then, if you want to have more ways to tune the result through the points' name, the best would be to change the Graph function itself, which would consequently give the same feature to the Poset function.

Nathann



---

archive/issue_comments_225850.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@nathanncohen](#comment:3):\n\n> Then, if you want to have more ways to tune the result through the points' name, the best would be to change the Graph function itself, which would consequently give the same feature to the Poset function.\n\nTrue. I must learn functions provided by (di)graphs and expand them if necessary.\n\n> We already have a `Graph.disjoint_union` that accepts this kind of parameter. If you want to have a similar feature at `Poset` level I suggest that you only expose this function. The code would just be :\n> \n> ```\n> return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram()))\n> ```\n\nThis breaks at least with\n\n```\nP1=Posets.PentagonPoset(facade=True)\nP1=Posets.PentagonPoset(facade=False)\nP=Poset(P1.hasse_diagram().disjoint_union(P2.hasse_diagram()))\nP.show()\n```\n\nBut I'll add checks as necessary. I guess it is OK to simply refuce summing up facade and non-facade poset.",
    "created_at": "2014-09-29T08:45:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225850",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@nathanncohen](#comment:3):

> Then, if you want to have more ways to tune the result through the points' name, the best would be to change the Graph function itself, which would consequently give the same feature to the Poset function.

True. I must learn functions provided by (di)graphs and expand them if necessary.

> We already have a `Graph.disjoint_union` that accepts this kind of parameter. If you want to have a similar feature at `Poset` level I suggest that you only expose this function. The code would just be :
> 
> ```
> return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram()))
> ```

This breaks at least with

```
P1=Posets.PentagonPoset(facade=True)
P1=Posets.PentagonPoset(facade=False)
P=Poset(P1.hasse_diagram().disjoint_union(P2.hasse_diagram()))
P.show()
```

But I'll add checks as necessary. I guess it is OK to simply refuce summing up facade and non-facade poset.



---

archive/issue_comments_225851.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYo !\n\n> This breaks at least with\n> \n> ```\n> P1=Posets.PentagonPoset(facade=True)\n> P1=Posets.PentagonPoset(facade=False)\n> P=Poset(P1.hasse_diagram().disjoint_union(P2.hasse_diagram()))\n> P.show()\n> ```\n> \n> But I'll add checks as necessary. I guess it is OK to simply refuce summing up facade and non-facade poset.\n\nIt works on my computer: beware, in your code both posets are named P1. So P2 is defined only on your computer.\n\nNathann",
    "created_at": "2014-09-29T08:47:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225851",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Yo !

> This breaks at least with
> 
> ```
> P1=Posets.PentagonPoset(facade=True)
> P1=Posets.PentagonPoset(facade=False)
> P=Poset(P1.hasse_diagram().disjoint_union(P2.hasse_diagram()))
> P.show()
> ```
> 
> But I'll add checks as necessary. I guess it is OK to simply refuce summing up facade and non-facade poset.

It works on my computer: beware, in your code both posets are named P1. So P2 is defined only on your computer.

Nathann



---

archive/issue_comments_225852.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nFunction could then be something like\n\n```\ndef direct_sum(self, other, relabel=None):\n    if not hasattr(other, 'hasse_diagram'):\n        raise ValueError('The input is not a finite poset.')\n    if relabel == None:\n        elements=self.list()+other.list()\n        if len(elements) != len(set(elements)):\n            raise ValueError(\"Posets contain equal elements. Try relabel='pairs' or relabel='linear'.\")\n        return Poset(self.hasse_diagram().union(other.hasse_diagram()))\n    if relabel == 'pairs':\n        return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram()))\n    if relabel == 'linear':\n        return Poset(self._hasse_diagram.disjoint_union(other.hasse_diagram(), verbose_relabel=False))\n```\n\n1) Why I must say `other.hasse_diagram()` on last line, `other._hasse_diagram` should work. Again some copy-immutable -thing?\n\n2) What should be the name of parameter and values for it? `verbose_relabel` to be consistent with graphs? Default value for it?",
    "created_at": "2014-09-29T10:52:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225852",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:6" align="right">comment:6</div>

Function could then be something like

```
def direct_sum(self, other, relabel=None):
    if not hasattr(other, 'hasse_diagram'):
        raise ValueError('The input is not a finite poset.')
    if relabel == None:
        elements=self.list()+other.list()
        if len(elements) != len(set(elements)):
            raise ValueError("Posets contain equal elements. Try relabel='pairs' or relabel='linear'.")
        return Poset(self.hasse_diagram().union(other.hasse_diagram()))
    if relabel == 'pairs':
        return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram()))
    if relabel == 'linear':
        return Poset(self._hasse_diagram.disjoint_union(other.hasse_diagram(), verbose_relabel=False))
```

1) Why I must say `other.hasse_diagram()` on last line, `other._hasse_diagram` should work. Again some copy-immutable -thing?

2) What should be the name of parameter and values for it? `verbose_relabel` to be consistent with graphs? Default value for it?



---

archive/issue_comments_225853.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHello !\n\n> Function could then be something like\n\n1) Besides checking that `other` is a !Poset, I do not understand why this function should do anything else than calling the graph routine. And it would be that routine's job to check that the input is correct.\n\n2) I believe that the default behaviour should be \"pairs\", because it is the behaviour that keeps the most information. And people can force `relabel=\"integers\"` if they like.\n\n> 1) Why I must say `other.hasse_diagram()` on last line, `other._hasse_diagram` should work. Again some copy-immutable -thing?\n\nBecause of that:\n\n```\nsage: Poset(DiGraph({\"a\":[\"b\"]})).hasse_diagram().vertices()\n['a', 'b']\nsage: Poset(DiGraph({\"a\":[\"b\"]}))._hasse_diagram.vertices()  \n[0, 1]\n```\n\n> 2) What should be the name of parameter and values for it? `verbose_relabel` to be consistent with graphs? Default value for it?\n\nI don't really know... `verbose_relabel` in the !Graph function is not a very good name, so perhaps we should change it. What about `Poset.relabel(labels=\"pairs\")` by default, and `labels=\"integers\"` otherwise ? And we could update the graph function with it. That also involves deprecating the old parameter name.\n\nNathann",
    "created_at": "2014-09-29T11:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225853",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

Hello !

> Function could then be something like

1) Besides checking that `other` is a !Poset, I do not understand why this function should do anything else than calling the graph routine. And it would be that routine's job to check that the input is correct.

2) I believe that the default behaviour should be "pairs", because it is the behaviour that keeps the most information. And people can force `relabel="integers"` if they like.

> 1) Why I must say `other.hasse_diagram()` on last line, `other._hasse_diagram` should work. Again some copy-immutable -thing?

Because of that:

```
sage: Poset(DiGraph({"a":["b"]})).hasse_diagram().vertices()
['a', 'b']
sage: Poset(DiGraph({"a":["b"]}))._hasse_diagram.vertices()  
[0, 1]
```

> 2) What should be the name of parameter and values for it? `verbose_relabel` to be consistent with graphs? Default value for it?

I don't really know... `verbose_relabel` in the !Graph function is not a very good name, so perhaps we should change it. What about `Poset.relabel(labels="pairs")` by default, and `labels="integers"` otherwise ? And we could update the graph function with it. That also involves deprecating the old parameter name.

Nathann



---

archive/issue_comments_225854.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThen it would be like\n\n```\ndef direct_sum(self, other, labels='pairs'):\n    \"\"\"\n    Docs here...\n    \n    Examples: ...\n\n    Now we want literally direct sum with elements untouched:\n    sage: P1=Poset({'a':['b']})\n    sage: P2=Poset({'c':['d']})\n    sage: P=P1.direct_sum(P2).relabel(lambda x: x[1])\n    sage: P.list()\n    ['a', 'b', 'c', 'd']\n    \"\"\"\n    if not hasattr(other, 'hasse_diagram'):\n        raise ValueError('The input is not a finite poset.')\n    if labels == 'pairs':\n        return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram()))\n    if labels == 'integers':\n        return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram(), verbose_relabel=False))\n```\n\nE: And of course throw ValueError if labels not in ['pairs', 'integers']",
    "created_at": "2014-09-29T12:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225854",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:8" align="right">comment:8</div>

Then it would be like

```
def direct_sum(self, other, labels='pairs'):
    """
    Docs here...
    
    Examples: ...

    Now we want literally direct sum with elements untouched:
    sage: P1=Poset({'a':['b']})
    sage: P2=Poset({'c':['d']})
    sage: P=P1.direct_sum(P2).relabel(lambda x: x[1])
    sage: P.list()
    ['a', 'b', 'c', 'd']
    """
    if not hasattr(other, 'hasse_diagram'):
        raise ValueError('The input is not a finite poset.')
    if labels == 'pairs':
        return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram()))
    if labels == 'integers':
        return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram(), verbose_relabel=False))
```

E: And of course throw ValueError if labels not in ['pairs', 'integers']



---

archive/issue_comments_225855.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIt could even be \n\n```\ndef direct_sum(self, other, labels='pairs'):\n    if not hasattr(other, 'hasse_diagram'):\n        raise ValueError('The input is not a finite poset.')\n    return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram(), labels=labels))\n```\n\nOf course right now `Graph.disjoint_union` has no `labels` argument, but we have something called `sage.misc.decorators.rename_keyword` precisely for this reason (to change the name of an argument and handle the deprecation warnings). And then the graph function would understand this labels argument as it is clearer anyway.\n\nThe thing is that checking the value of the keyword should be done only once. Preferably in the graph method.\n\nNathann",
    "created_at": "2014-09-29T13:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225855",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">comment:9</div>

It could even be 

```
def direct_sum(self, other, labels='pairs'):
    if not hasattr(other, 'hasse_diagram'):
        raise ValueError('The input is not a finite poset.')
    return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram(), labels=labels))
```

Of course right now `Graph.disjoint_union` has no `labels` argument, but we have something called `sage.misc.decorators.rename_keyword` precisely for this reason (to change the name of an argument and handle the deprecation warnings). And then the graph function would understand this labels argument as it is clearer anyway.

The thing is that checking the value of the keyword should be done only once. Preferably in the graph method.

Nathann



---

archive/issue_comments_225856.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,24 +1,4 @@\n-Sage has no function for direct sum of posets. What kind of function it should be?\n+Sage has no function for disjoint union (or *direct sum*) of posets, neither for ordinal sum. These are mostly matter of wrapping right function of graph + writing documentation.\n \n-Let's say that poset `P` has elements `a` and `b`, `Q` has elements `c` and `d`. Then sum on P and Q could have elements\n+At same time maybe parameter name for `disjoint_union` on Graphs should be changed.\n \n-1) a,b,c,d. Function would check that there are no common elements.\n-2) (1,a),(1,b),(2,c),(2,c). Optional parameter would change first element of tuples.\n-3) 0,1,2,3. Function would just make poset isomorphic to P+Q with integer elements.\n-\n-Now, it would be nice to have also sum of arbitrary number of posets. So function could be something like\n-\n-`P.direct_sum(Q)` (case 1 as default?)\n-\n-`P.direct_sum(Q, labeling='default')` (case 2 / default)\n-\n-`P.direct_sum(Q, labeling=lambda n: chr(ord('a')+n))` (case 2 / non-default)\n-\n-`P.direct_sum(Q, labeling='plain')` (case 3)\n-\n-and if possible, accept something like\n-\n-`P1.direct_sum(P2, P3, P4, labeling=...)`\n-\n-Does this sound reasonable?\n-\n``````\n",
    "created_at": "2014-09-29T14:32:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225856",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,24 +1,4 @@
-Sage has no function for direct sum of posets. What kind of function it should be?
+Sage has no function for disjoint union (or *direct sum*) of posets, neither for ordinal sum. These are mostly matter of wrapping right function of graph + writing documentation.
 
-Let's say that poset `P` has elements `a` and `b`, `Q` has elements `c` and `d`. Then sum on P and Q could have elements
+At same time maybe parameter name for `disjoint_union` on Graphs should be changed.
 
-1) a,b,c,d. Function would check that there are no common elements.
-2) (1,a),(1,b),(2,c),(2,c). Optional parameter would change first element of tuples.
-3) 0,1,2,3. Function would just make poset isomorphic to P+Q with integer elements.
-
-Now, it would be nice to have also sum of arbitrary number of posets. So function could be something like
-
-`P.direct_sum(Q)` (case 1 as default?)
-
-`P.direct_sum(Q, labeling='default')` (case 2 / default)
-
-`P.direct_sum(Q, labeling=lambda n: chr(ord('a')+n))` (case 2 / non-default)
-
-`P.direct_sum(Q, labeling='plain')` (case 3)
-
-and if possible, accept something like
-
-`P1.direct_sum(P2, P3, P4, labeling=...)`
-
-Does this sound reasonable?
-
``````




---

archive/issue_events_244821.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-09-29T14:32:03Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "title_is": "Add function for disjoint union and ordinal sum of posets",
    "title_was": "Add function for direct sum of posets",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244821"
}
```



---

archive/issue_comments_225857.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@nathanncohen](#comment:9):\n\n> It could even be \n> \n> ```\n> def direct_sum(self, other, labels='pairs'):\n>     if not hasattr(other, 'hasse_diagram'):\n>         raise ValueError('The input is not a finite poset.')\n>     return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram(), labels=labels))\n> ```\n> \n> Of course right now `Graph.disjoint_union` has no `labels` argument, but we have something called `sage.misc.decorators.rename_keyword` precisely for this reason (to change the name of an argument and handle the deprecation warnings). And then the graph function would understand this labels argument as it is clearer anyway.\n\nBut on documentation it seems that `rename_keyword` is only able to change name of argument. Here we should also change value from `True` to `pairs` and from `False` to `integers`.\n\n\n> The thing is that checking the value of the keyword should be done only once. Preferably in the graph method.\n\nSounds reasonable.\n\nOther things: Enumerative Combinatorics by Richard P. Stanley uses \"disjoint union\" as preferable name. It is also used on graphs, so it is probably best to use here also.\n\nI'll make some kind of commit just to show what I'm now thinking.",
    "created_at": "2014-09-29T14:32:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225857",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@nathanncohen](#comment:9):

> It could even be 
> 
> ```
> def direct_sum(self, other, labels='pairs'):
>     if not hasattr(other, 'hasse_diagram'):
>         raise ValueError('The input is not a finite poset.')
>     return Poset(self.hasse_diagram().disjoint_union(other.hasse_diagram(), labels=labels))
> ```
> 
> Of course right now `Graph.disjoint_union` has no `labels` argument, but we have something called `sage.misc.decorators.rename_keyword` precisely for this reason (to change the name of an argument and handle the deprecation warnings). And then the graph function would understand this labels argument as it is clearer anyway.

But on documentation it seems that `rename_keyword` is only able to change name of argument. Here we should also change value from `True` to `pairs` and from `False` to `integers`.


> The thing is that checking the value of the keyword should be done only once. Preferably in the graph method.

Sounds reasonable.

Other things: Enumerative Combinatorics by Richard P. Stanley uses "disjoint union" as preferable name. It is also used on graphs, so it is probably best to use here also.

I'll make some kind of commit just to show what I'm now thinking.



---

archive/issue_comments_225858.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nYo !\n\n> But on documentation it seems that `rename_keyword` is only able to change name of argument. Here we should also change value from `True` to `pairs` and from `False` to `integers`.\n\nOh. That's right. Then the deprecation will have to be done manually `^^;`\n\n> Other things: Enumerative Combinatorics by Richard P. Stanley uses \"disjoint union\" as preferable name. It is also used on graphs, so it is probably best to use here also.\n\n+1\n\nNathann",
    "created_at": "2014-09-29T14:34:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225858",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

Yo !

> But on documentation it seems that `rename_keyword` is only able to change name of argument. Here we should also change value from `True` to `pairs` and from `False` to `integers`.

Oh. That's right. Then the deprecation will have to be done manually `^^;`

> Other things: Enumerative Combinatorics by Richard P. Stanley uses "disjoint union" as preferable name. It is also used on graphs, so it is probably best to use here also.

+1

Nathann



---

archive/issue_comments_225859.json:
```json
{
    "body": "Branch: **[u/jmantysalo/add_function_for_direct_sum_of_posets](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/add_function_for_direct_sum_of_posets)**",
    "created_at": "2014-09-29T14:40:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225859",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/add_function_for_direct_sum_of_posets](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/add_function_for_direct_sum_of_posets)**



---

archive/issue_comments_225860.json:
```json
{
    "body": "Commit: **[`57d243c`](https://github.com/sagemath/sagetrac-mirror/commit/57d243c0c43488259eb065a7ec9d6bc3c2ecac82)**",
    "created_at": "2014-09-29T14:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225860",
    "user": "https://github.com/jm58660"
}
```

Commit: **[`57d243c`](https://github.com/sagemath/sagetrac-mirror/commit/57d243c0c43488259eb065a7ec9d6bc3c2ecac82)**



---

archive/issue_comments_225861.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@nathanncohen](#comment:11):\n\n> > But on documentation it seems that `rename_keyword` is only able to change name of argument. Here we should also change value from `True` to `pairs` and from `False` to `integers`.\n\n> \n> Oh. That's right. Then the deprecation will have to be done manually `^^;`\n\nHow? http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation does not tell.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57d243c0c43488259eb065a7ec9d6bc3c2ecac82\"><code>57d243c</code></a></td><td><code>Added functions for disjoint union and ordinal sum. Needs more work.</code></td></tr></table>\n",
    "created_at": "2014-09-29T14:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225861",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@nathanncohen](#comment:11):

> > But on documentation it seems that `rename_keyword` is only able to change name of argument. Here we should also change value from `True` to `pairs` and from `False` to `integers`.

> 
> Oh. That's right. Then the deprecation will have to be done manually `^^;`

How? http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation does not tell.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57d243c0c43488259eb065a7ec9d6bc3c2ecac82"><code>57d243c</code></a></td><td><code>Added functions for disjoint union and ordinal sum. Needs more work.</code></td></tr></table>




---

archive/issue_comments_225862.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n> How? http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation does not tell.\n\nWelll...\n\n```\ndef disjoint_union(self,other,labels=\"pairs\",verbose_relabel=None)\n    if verbose_relabel is not None:\n        deprecation(ticket_number, message)\n        if verbose_relabel:\n            labels=\"pairs\"\n        else:\n            labels=\"integers\"\n    <do whatever you want considering 'labels' only>    \n```\n\nNathann",
    "created_at": "2014-09-29T15:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225862",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

> How? http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation does not tell.

Welll...

```
def disjoint_union(self,other,labels="pairs",verbose_relabel=None)
    if verbose_relabel is not None:
        deprecation(ticket_number, message)
        if verbose_relabel:
            labels="pairs"
        else:
            labels="integers"
    <do whatever you want considering 'labels' only>    
```

Nathann



---

archive/issue_comments_225863.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/abf4bbd3c4f3f8210684abe44c6c824a1e7a914b\"><code>abf4bbd</code></a></td><td><code>Changed parameter of disjoint_union on generic graphs from</code></td></tr></table>\n",
    "created_at": "2014-09-29T19:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225863",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/abf4bbd3c4f3f8210684abe44c6c824a1e7a914b"><code>abf4bbd</code></a></td><td><code>Changed parameter of disjoint_union on generic graphs from</code></td></tr></table>




---

archive/issue_comments_225864.json:
```json
{
    "body": "Changed commit from **[`57d243c`](https://github.com/sagemath/sagetrac-mirror/commit/57d243c0c43488259eb065a7ec9d6bc3c2ecac82)** to **[`abf4bbd`](https://github.com/sagemath/sagetrac-mirror/commit/abf4bbd3c4f3f8210684abe44c6c824a1e7a914b)**",
    "created_at": "2014-09-29T19:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225864",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`57d243c`](https://github.com/sagemath/sagetrac-mirror/commit/57d243c0c43488259eb065a7ec9d6bc3c2ecac82)** to **[`abf4bbd`](https://github.com/sagemath/sagetrac-mirror/commit/abf4bbd3c4f3f8210684abe44c6c824a1e7a914b)**



---

archive/issue_comments_225865.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nDone deprecation. (But `ordinal_sum` is not ready.)\n\nThere is a (mostly theoretical, i hope) problem. What if somebody says just `.disjoint_union(G, False)`?",
    "created_at": "2014-09-29T19:44:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225865",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:16" align="right">comment:16</div>

Done deprecation. (But `ordinal_sum` is not ready.)

There is a (mostly theoretical, i hope) problem. What if somebody says just `.disjoint_union(G, False)`?



---

archive/issue_comments_225866.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a13ab545a6424a74a4ad6edc1ec54544e3c2a2b\"><code>4a13ab5</code></a></td><td><code>Doing functions disjoint_union ordinal_sum.</code></td></tr></table>\n",
    "created_at": "2014-09-30T06:40:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225866",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a13ab545a6424a74a4ad6edc1ec54544e3c2a2b"><code>4a13ab5</code></a></td><td><code>Doing functions disjoint_union ordinal_sum.</code></td></tr></table>




---

archive/issue_comments_225867.json:
```json
{
    "body": "Changed commit from **[`abf4bbd`](https://github.com/sagemath/sagetrac-mirror/commit/abf4bbd3c4f3f8210684abe44c6c824a1e7a914b)** to **[`4a13ab5`](https://github.com/sagemath/sagetrac-mirror/commit/4a13ab545a6424a74a4ad6edc1ec54544e3c2a2b)**",
    "created_at": "2014-09-30T06:40:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225867",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`abf4bbd`](https://github.com/sagemath/sagetrac-mirror/commit/abf4bbd3c4f3f8210684abe44c6c824a1e7a914b)** to **[`4a13ab5`](https://github.com/sagemath/sagetrac-mirror/commit/4a13ab545a6424a74a4ad6edc1ec54544e3c2a2b)**



---

archive/issue_comments_225868.json:
```json
{
    "body": "Changed commit from **[`4a13ab5`](https://github.com/sagemath/sagetrac-mirror/commit/4a13ab545a6424a74a4ad6edc1ec54544e3c2a2b)** to **[`7a801e8`](https://github.com/sagemath/sagetrac-mirror/commit/7a801e8d3045ef87d8a35d8491ed2e76b18d30a3)**",
    "created_at": "2014-09-30T07:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225868",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4a13ab5`](https://github.com/sagemath/sagetrac-mirror/commit/4a13ab545a6424a74a4ad6edc1ec54544e3c2a2b)** to **[`7a801e8`](https://github.com/sagemath/sagetrac-mirror/commit/7a801e8d3045ef87d8a35d8491ed2e76b18d30a3)**



---

archive/issue_comments_225869.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a801e8d3045ef87d8a35d8491ed2e76b18d30a3\"><code>7a801e8</code></a></td><td><code>Corrections to documentation.</code></td></tr></table>\n",
    "created_at": "2014-09-30T07:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225869",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a801e8d3045ef87d8a35d8491ed2e76b18d30a3"><code>7a801e8</code></a></td><td><code>Corrections to documentation.</code></td></tr></table>




---

archive/issue_events_244822.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-09-30T07:57:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244822"
}
```



---

archive/issue_comments_225870.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nWorks. But how to check if class of P is meet- or join-semilattice without ugly code like this?",
    "created_at": "2014-09-30T07:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225870",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:19" align="right">comment:19</div>

Works. But how to check if class of P is meet- or join-semilattice without ugly code like this?



---

archive/issue_comments_225871.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nYo !\n> Done deprecation.\n\nThanks.\n\n> There is a (mostly theoretical, i hope) problem. What if somebody says just `.disjoint_union(G, False)`?\n\nIf that worries you, just add the new keyword *after* the old one in the function's definition.\n\nNathann",
    "created_at": "2014-09-30T08:45:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225871",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:20" align="right">comment:20</div>

Yo !
> Done deprecation.

Thanks.

> There is a (mostly theoretical, i hope) problem. What if somebody says just `.disjoint_union(G, False)`?

If that worries you, just add the new keyword *after* the old one in the function's definition.

Nathann



---

archive/issue_comments_225872.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n> Works. But how to check if class of P is meet- or join-semilattice without ugly code like this?\n\nI am not sure that you can. The way you do it is wrong, however, for when you do `type(other) == type(MeetSemilattice({}))` you create a semilattice object for nothing. What you need is the 'isinstance' Python function.\n\nThen you will probably have to do something like that:\n\n```\nif isinstance(self, LatticePoset) and isinstance(other, LatticePoset):\n   return a_lattice\nelif isinstance(self, MeetSemilattice) and isinstance(other, MeetSemilattice):\n   return a_join_semilattice\nelif isinstance(self, JoinSemilattice) and isinstance(other, JoinSemilattice):\n   return a_join_semilattice\nelse:\n   return a_poset\n```\n\nThe 'if' will execute a bit more code than in your layout, but considering the operations involved here we do not care at all, the speed loss is nonexistent. And it is *much* clearer to read.\n\nNathann",
    "created_at": "2014-09-30T08:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225872",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

> Works. But how to check if class of P is meet- or join-semilattice without ugly code like this?

I am not sure that you can. The way you do it is wrong, however, for when you do `type(other) == type(MeetSemilattice({}))` you create a semilattice object for nothing. What you need is the 'isinstance' Python function.

Then you will probably have to do something like that:

```
if isinstance(self, LatticePoset) and isinstance(other, LatticePoset):
   return a_lattice
elif isinstance(self, MeetSemilattice) and isinstance(other, MeetSemilattice):
   return a_join_semilattice
elif isinstance(self, JoinSemilattice) and isinstance(other, JoinSemilattice):
   return a_join_semilattice
else:
   return a_poset
```

The 'if' will execute a bit more code than in your layout, but considering the operations involved here we do not care at all, the speed loss is nonexistent. And it is *much* clearer to read.

Nathann



---

archive/issue_comments_225873.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2014-09-30T09:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225873",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_events_244823.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-09-30T09:16:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244823"
}
```



---

archive/issue_events_244824.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-09-30T09:16:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244824"
}
```



---

archive/issue_comments_225874.json:
```json
{
    "body": "Author: **Jori M\u00e4ntysalo**",
    "created_at": "2014-09-30T09:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225874",
    "user": "https://github.com/nathanncohen"
}
```

Author: **Jori Mäntysalo**



---

archive/issue_comments_225875.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReview of your branch in its current state:\n\n1) Lines are 100 characters long: we try to keep it 80characters max\n\n2) It may not be visible to you with the text editor you use, but the lines you skipped are actually filled with spaces.\nhttp://programmers.stackexchange.com/questions/121555/why-is-trailing-whitespace-a-big-deal\n\n3) Please remove those `\\` at the end of the lines in the documentation. If the doc does not build properly, it is because this is incorrect\n\n```\nINPUT:\n\n    - a very long\n    line of doc\n```\n\nBut this will work:\n\n```\nINPUT:\n\n    - a very long\n      line of doc\n```\n\nSphinx (the software that builds the doc) is not very pleasant software to work with.\n\n3) I usually write <code>If \\`\\`labels='pairs'\\`\\`</code> instead of `If labels='pairs'` in the doc because it is actual Python code, but it is probably up to you. Same for mathematical things like <code>\\`(0,x)\\`</code>.\n\n4) The doc of ordinal sum claims that it returns a lattice. It does not.\n\n5) What about an \"elif\" ?\n\n```\n        else:\n            if labels != 'pairs':\n```\n\n6) please use `isinstance` instead of `type` or `in LatticePosets()`. The latter is related to categories: it is probably safe to use by itself but it is a bit weird to see some calls to 'type' and then category queries.\n\n7) It is a bit weird to see that the elements labelled with 1 are smaller than the elements labelled with 0:\n\n```\nsage: p1=posets.ChainPoset(1)                            \nsage: p1.ordinal_sum(p1).is_greater_than((0,0),(1,0))\nTrue\nsage: p1.ordinal_sum(p1).is_greater_than((1,0),(0,0))\nFalse\n```\n\n8) The description of \"labels\" is written in a slightly incorrect english `^^;`\n\nNathann",
    "created_at": "2014-09-30T09:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225875",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:22" align="right">comment:22</div>

Review of your branch in its current state:

1) Lines are 100 characters long: we try to keep it 80characters max

2) It may not be visible to you with the text editor you use, but the lines you skipped are actually filled with spaces.
http://programmers.stackexchange.com/questions/121555/why-is-trailing-whitespace-a-big-deal

3) Please remove those `\` at the end of the lines in the documentation. If the doc does not build properly, it is because this is incorrect

```
INPUT:

    - a very long
    line of doc
```

But this will work:

```
INPUT:

    - a very long
      line of doc
```

Sphinx (the software that builds the doc) is not very pleasant software to work with.

3) I usually write <code>If \`\`labels='pairs'\`\`</code> instead of `If labels='pairs'` in the doc because it is actual Python code, but it is probably up to you. Same for mathematical things like <code>\`(0,x)\`</code>.

4) The doc of ordinal sum claims that it returns a lattice. It does not.

5) What about an "elif" ?

```
        else:
            if labels != 'pairs':
```

6) please use `isinstance` instead of `type` or `in LatticePosets()`. The latter is related to categories: it is probably safe to use by itself but it is a bit weird to see some calls to 'type' and then category queries.

7) It is a bit weird to see that the elements labelled with 1 are smaller than the elements labelled with 0:

```
sage: p1=posets.ChainPoset(1)                            
sage: p1.ordinal_sum(p1).is_greater_than((0,0),(1,0))
True
sage: p1.ordinal_sum(p1).is_greater_than((1,0),(0,0))
False
```

8) The description of "labels" is written in a slightly incorrect english `^^;`

Nathann



---

archive/issue_comments_225876.json:
```json
{
    "body": "Changed reviewer from **Nathann Cohen** to none",
    "created_at": "2014-09-30T09:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225876",
    "user": "https://github.com/jm58660"
}
```

Changed reviewer from **Nathann Cohen** to none



---

archive/issue_comments_225877.json:
```json
{
    "body": "Changed author from **Jori M\u00e4ntysalo** to none",
    "created_at": "2014-09-30T09:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225877",
    "user": "https://github.com/jm58660"
}
```

Changed author from **Jori Mäntysalo** to none



---

archive/issue_comments_225878.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@nathanncohen](#comment:20):\n\n> > There is a (mostly theoretical, i hope) problem. What if somebody says just `.disjoint_union(G, False)`?\n\n> \n> If that worries you, just add the new keyword *after* the old one in the function's definition.\n\nBut then one cannot say `.disjoint_union(G, 'integers')`. Maybe I don't worry that much.\n\nAs for another post: After `x=42` for example `isinstance(x, LatticePosets)` says `False`, but `isinstance(x, LatticePoset)` gives error message.",
    "created_at": "2014-09-30T09:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225878",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@nathanncohen](#comment:20):

> > There is a (mostly theoretical, i hope) problem. What if somebody says just `.disjoint_union(G, False)`?

> 
> If that worries you, just add the new keyword *after* the old one in the function's definition.

But then one cannot say `.disjoint_union(G, 'integers')`. Maybe I don't worry that much.

As for another post: After `x=42` for example `isinstance(x, LatticePosets)` says `False`, but `isinstance(x, LatticePoset)` gives error message.



---

archive/issue_comments_225879.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n> But then one cannot say `.disjoint_union(G, 'integers')`. Maybe I don't worry that much.\n\nI think you worry too much, but if you just need to be soothed then I would say that it is better this way: some people may be expected to already use `.disjoint_union(G,True)` while nobody is using `.disjoint_union(G,'pairs')` are you are creating the syntax.\n\n> As for another post: After `x=42` for example `isinstance(x, LatticePosets)` says `False`, but `isinstance(x, LatticePoset)` gives error message.\n\nThat's because the combinat guys cannot be trusted to implement anything reliably.\n\nThe error message tells you that `LatticePoset` is not a class, and indeed it is a function. `LatticePoset??` tells you that it returns `FiniteLatticePoset` objects, and if you want to know where to find this class, it is defined there:\n\n```\nsage: import_statements(\"FiniteLatticePoset\")\nfrom sage.combinat.posets.lattices import FiniteLatticePoset\n```\n\nthen:\n\n```\nsage: from sage.combinat.posets.lattices import FiniteLatticePoset\nsage: x=42\nsage: isinstance(x,FiniteLatticePoset)                                         \nFalse\n```\n\nNathann",
    "created_at": "2014-09-30T09:26:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225879",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:24" align="right">comment:24</div>

> But then one cannot say `.disjoint_union(G, 'integers')`. Maybe I don't worry that much.

I think you worry too much, but if you just need to be soothed then I would say that it is better this way: some people may be expected to already use `.disjoint_union(G,True)` while nobody is using `.disjoint_union(G,'pairs')` are you are creating the syntax.

> As for another post: After `x=42` for example `isinstance(x, LatticePosets)` says `False`, but `isinstance(x, LatticePoset)` gives error message.

That's because the combinat guys cannot be trusted to implement anything reliably.

The error message tells you that `LatticePoset` is not a class, and indeed it is a function. `LatticePoset??` tells you that it returns `FiniteLatticePoset` objects, and if you want to know where to find this class, it is defined there:

```
sage: import_statements("FiniteLatticePoset")
from sage.combinat.posets.lattices import FiniteLatticePoset
```

then:

```
sage: from sage.combinat.posets.lattices import FiniteLatticePoset
sage: x=42
sage: isinstance(x,FiniteLatticePoset)                                         
False
```

Nathann



---

archive/issue_comments_225880.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b35a5413d0d18e075783484ff8079034e828d51\"><code>4b35a54</code></a></td><td><code>From 'is' to 'isinstance'. Code reformatted slightly.</code></td></tr></table>\n",
    "created_at": "2014-09-30T10:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225880",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b35a5413d0d18e075783484ff8079034e828d51"><code>4b35a54</code></a></td><td><code>From 'is' to 'isinstance'. Code reformatted slightly.</code></td></tr></table>




---

archive/issue_comments_225881.json:
```json
{
    "body": "Changed commit from **[`7a801e8`](https://github.com/sagemath/sagetrac-mirror/commit/7a801e8d3045ef87d8a35d8491ed2e76b18d30a3)** to **[`4b35a54`](https://github.com/sagemath/sagetrac-mirror/commit/4b35a5413d0d18e075783484ff8079034e828d51)**",
    "created_at": "2014-09-30T10:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225881",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7a801e8`](https://github.com/sagemath/sagetrac-mirror/commit/7a801e8d3045ef87d8a35d8491ed2e76b18d30a3)** to **[`4b35a54`](https://github.com/sagemath/sagetrac-mirror/commit/4b35a5413d0d18e075783484ff8079034e828d51)**



---

archive/issue_comments_225882.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n1-3a: Done `egrep '.{80}'` and `egrep ' $'`, corrected.\n\n3b, 5-6) I did as you suggested. I'll unite style when doing The Grand Poset Documentation Polishing.\n\n4) I don't understand. If you input lattices to ordinal sum, you get lattices.\n\n7) Which one is logical for A.ordinal_sum(B): to have \"A up and B down\" or \"B up\"? I don't know.\n\n8) I'm quite sure about that. But how?",
    "created_at": "2014-09-30T10:41:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225882",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:26" align="right">comment:26</div>

1-3a: Done `egrep '.{80}'` and `egrep ' $'`, corrected.

3b, 5-6) I did as you suggested. I'll unite style when doing The Grand Poset Documentation Polishing.

4) I don't understand. If you input lattices to ordinal sum, you get lattices.

7) Which one is logical for A.ordinal_sum(B): to have "A up and B down" or "B up"? I don't know.

8) I'm quite sure about that. But how?



---

archive/issue_comments_225883.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nHello !\n\n> 4) I don't understand. If you input lattices to ordinal sum, you get lattices.\n\nI am an idiot, sorry. I misread the doc.\n\n> 7) Which one is logical for A.ordinal_sum(B): to have \"A up and B down\" or \"B up\"? I don't know.\n\nThis I do not know. But I would have expected the set of points `(1,x)` to be greater than the ones labelled with `(0,x)`\n\n> 8) I'm quite sure about that. But how?\n\nAsk the guy in your office (if any) to read it, and if not I will do it before setting the branch to `positive_review`.\n\nNathann",
    "created_at": "2014-09-30T11:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225883",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:27" align="right">comment:27</div>

Hello !

> 4) I don't understand. If you input lattices to ordinal sum, you get lattices.

I am an idiot, sorry. I misread the doc.

> 7) Which one is logical for A.ordinal_sum(B): to have "A up and B down" or "B up"? I don't know.

This I do not know. But I would have expected the set of points `(1,x)` to be greater than the ones labelled with `(0,x)`

> 8) I'm quite sure about that. But how?

Ask the guy in your office (if any) to read it, and if not I will do it before setting the branch to `positive_review`.

Nathann



---

archive/issue_comments_225884.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@nathanncohen](#comment:27):\n\n> > 7) Which one is logical for A.ordinal_sum(B): to have \"A up and B down\" or \"B up\"? I don't know.\n\n> \n> This I do not know. But I would have expected the set of points `(1,x)` to be greater than the ones labelled with `(0,x)`\n\nYou are right on that. On the other hand, somehow for `A.something(B)` it sounds natural to have `(0,x)` be element of A and `(1,y)` be element of B. From that I can deduce that `A.ordinal_sum(B)` should have elements of B of on \"up\" and elements of A on \"down\".\n\n> > 8) I'm quite sure about that. But how?\n\n> \n> Ask the guy in your office (if any) to read it, and if not I will do it before setting the branch to `positive_review`.\n\nDone this. I'll continue when he replies.",
    "created_at": "2014-09-30T13:20:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225884",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@nathanncohen](#comment:27):

> > 7) Which one is logical for A.ordinal_sum(B): to have "A up and B down" or "B up"? I don't know.

> 
> This I do not know. But I would have expected the set of points `(1,x)` to be greater than the ones labelled with `(0,x)`

You are right on that. On the other hand, somehow for `A.something(B)` it sounds natural to have `(0,x)` be element of A and `(1,y)` be element of B. From that I can deduce that `A.ordinal_sum(B)` should have elements of B of on "up" and elements of A on "down".

> > 8) I'm quite sure about that. But how?

> 
> Ask the guy in your office (if any) to read it, and if not I will do it before setting the branch to `positive_review`.

Done this. I'll continue when he replies.



---

archive/issue_comments_225885.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c8cf87e90acdf4f956df024678c6d07203fe9b8\"><code>5c8cf87</code></a></td><td><code>Docs; Now x<y if x \\in P and y \\in Q for P.ordinal_sum(Q).</code></td></tr></table>\n",
    "created_at": "2014-10-01T07:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225885",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c8cf87e90acdf4f956df024678c6d07203fe9b8"><code>5c8cf87</code></a></td><td><code>Docs; Now x<y if x \in P and y \in Q for P.ordinal_sum(Q).</code></td></tr></table>




---

archive/issue_comments_225886.json:
```json
{
    "body": "Changed commit from **[`4b35a54`](https://github.com/sagemath/sagetrac-mirror/commit/4b35a5413d0d18e075783484ff8079034e828d51)** to **[`5c8cf87`](https://github.com/sagemath/sagetrac-mirror/commit/5c8cf87e90acdf4f956df024678c6d07203fe9b8)**",
    "created_at": "2014-10-01T07:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225886",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4b35a54`](https://github.com/sagemath/sagetrac-mirror/commit/4b35a5413d0d18e075783484ff8079034e828d51)** to **[`5c8cf87`](https://github.com/sagemath/sagetrac-mirror/commit/5c8cf87e90acdf4f956df024678c6d07203fe9b8)**



---

archive/issue_comments_225887.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nProofreader didn't found problems, so I copied explanation from graphs. Also changed order of ordinal_sum.",
    "created_at": "2014-10-01T07:27:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225887",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:30" align="right">comment:30</div>

Proofreader didn't found problems, so I copied explanation from graphs. Also changed order of ordinal_sum.



---

archive/issue_events_244825.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-01T07:27:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244825"
}
```



---

archive/issue_events_244826.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-01T07:27:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244826"
}
```



---

archive/issue_comments_225888.json:
```json
{
    "body": "Changed commit from **[`5c8cf87`](https://github.com/sagemath/sagetrac-mirror/commit/5c8cf87e90acdf4f956df024678c6d07203fe9b8)** to **[`3ce3c89`](https://github.com/sagemath/sagetrac-mirror/commit/3ce3c89b99ffe05dbab370c853e1b926b2fed6f3)**",
    "created_at": "2014-10-01T08:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225888",
    "user": "https://github.com/nathanncohen"
}
```

Changed commit from **[`5c8cf87`](https://github.com/sagemath/sagetrac-mirror/commit/5c8cf87e90acdf4f956df024678c6d07203fe9b8)** to **[`3ce3c89`](https://github.com/sagemath/sagetrac-mirror/commit/3ce3c89b99ffe05dbab370c853e1b926b2fed6f3)**



---

archive/issue_comments_225889.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/add_function_for_direct_sum_of_posets](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/add_function_for_direct_sum_of_posets)** to **[public/17053](https://github.com/sagemath/sagetrac-mirror/tree/public/17053)**",
    "created_at": "2014-10-01T08:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225889",
    "user": "https://github.com/nathanncohen"
}
```

Changed branch from **[u/jmantysalo/add_function_for_direct_sum_of_posets](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/add_function_for_direct_sum_of_posets)** to **[public/17053](https://github.com/sagemath/sagetrac-mirror/tree/public/17053)**



---

archive/issue_comments_225890.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nHellooooo !\n\nHere is a commit on top of yours. Set the ticket to `positive_review` if you agree with it:\n\n1) some english (has->have) and some commas\n2) Rewrote '0,v' as <code>\\`\\`(0,v)\\`\\`</code> so that it appears as code in the doc. As you also wrote 'integers', it may have led to believe that '0,v' is a string.\n3) Changes like that\n\n```diff\n-        if isinstance(self, FiniteMeetSemilattice) and \\\n-        isinstance(other, FiniteMeetSemilattice):\n+        if (isinstance(self, FiniteMeetSemilattice) and\n+            isinstance(other, FiniteMeetSemilattice)):\n```\n  code is easier to read when everything is aligned vertically.\n\n4) Entries in the INPUT section should appear in the same order as the arguments that the function accepts. So I reversed the order of `verbose_relabel` and `labels`.\n\n5) The tests did not pass in the graph/ folder because of function `join`. So I did to it what you had already done to `disjoint_union` and deprecated the old flag.\n\nNathann\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ce3c89b99ffe05dbab370c853e1b926b2fed6f3\"><code>3ce3c89</code></a></td><td><code>trac #17053: Review</code></td></tr></table>\n",
    "created_at": "2014-10-01T08:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225890",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:31" align="right">comment:31</div>

Hellooooo !

Here is a commit on top of yours. Set the ticket to `positive_review` if you agree with it:

1) some english (has->have) and some commas
2) Rewrote '0,v' as <code>\`\`(0,v)\`\`</code> so that it appears as code in the doc. As you also wrote 'integers', it may have led to believe that '0,v' is a string.
3) Changes like that

```diff
-        if isinstance(self, FiniteMeetSemilattice) and \
-        isinstance(other, FiniteMeetSemilattice):
+        if (isinstance(self, FiniteMeetSemilattice) and
+            isinstance(other, FiniteMeetSemilattice)):
```
  code is easier to read when everything is aligned vertically.

4) Entries in the INPUT section should appear in the same order as the arguments that the function accepts. So I reversed the order of `verbose_relabel` and `labels`.

5) The tests did not pass in the graph/ folder because of function `join`. So I did to it what you had already done to `disjoint_union` and deprecated the old flag.

Nathann

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ce3c89b99ffe05dbab370c853e1b926b2fed6f3"><code>3ce3c89</code></a></td><td><code>trac #17053: Review</code></td></tr></table>




---

archive/issue_events_244827.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-01T10:01:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244827"
}
```



---

archive/issue_events_244828.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-01T10:01:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244828"
}
```



---

archive/issue_comments_225891.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nSeems good.",
    "created_at": "2014-10-01T10:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225891",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:32" align="right">comment:32</div>

Seems good.



---

archive/issue_events_244829.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-15T04:46:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244829"
}
```



---

archive/issue_events_244830.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-15T04:46:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244830"
}
```



---

archive/issue_comments_225892.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nauthor, reviewer name",
    "created_at": "2014-10-15T11:57:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225892",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:34" align="right">comment:34</div>

author, reviewer name



---

archive/issue_events_244831.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-15T11:57:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244831"
}
```



---

archive/issue_events_244832.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-15T11:57:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244832"
}
```



---

archive/issue_comments_225893.json:
```json
{
    "body": "Author: **Jori M\u00e4ntysalo**",
    "created_at": "2014-10-15T12:00:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225893",
    "user": "https://github.com/nathanncohen"
}
```

Author: **Jori Mäntysalo**



---

archive/issue_comments_225894.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2014-10-15T12:00:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225894",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_events_244833.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-10-15T12:00:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244833"
}
```



---

archive/issue_events_244834.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-10-15T12:00:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244834"
}
```



---

archive/issue_events_244835.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-15T18:15:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244835"
}
```



---

archive/issue_events_244836.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-15T18:15:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244836"
}
```



---

archive/issue_comments_225895.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nMerge conflict, probably with #16998",
    "created_at": "2014-10-15T18:15:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225895",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:36" align="right">comment:36</div>

Merge conflict, probably with #16998



---

archive/issue_comments_225896.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nStupid question, but how to see the conflict, and how to resolve? Checkout newest beta, make changes, and then try committing again?",
    "created_at": "2014-10-16T15:40:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225896",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:37" align="right">comment:37</div>

Stupid question, but how to see the conflict, and how to resolve? Checkout newest beta, make changes, and then try committing again?



---

archive/issue_comments_225897.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\n#16998 is not in any released beta. The easiest solution is to wait for 6.4.beta7. You can also merge #16998 into your own branch and fix the conflict there.",
    "created_at": "2014-10-16T15:47:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225897",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:38" align="right">comment:38</div>

#16998 is not in any released beta. The easiest solution is to wait for 6.4.beta7. You can also merge #16998 into your own branch and fix the conflict there.



---

archive/issue_comments_225898.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c73dcc7ab52ec00634fb1f3f7ca23560c8c39b2\"><code>7c73dcc</code></a></td><td><code>Merge branch 'sum_of_posets' into poset_sum</code></td></tr></table>\n",
    "created_at": "2014-11-04T14:16:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225898",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c73dcc7ab52ec00634fb1f3f7ca23560c8c39b2"><code>7c73dcc</code></a></td><td><code>Merge branch 'sum_of_posets' into poset_sum</code></td></tr></table>




---

archive/issue_comments_225899.json:
```json
{
    "body": "Changed commit from **[`3ce3c89`](https://github.com/sagemath/sagetrac-mirror/commit/3ce3c89b99ffe05dbab370c853e1b926b2fed6f3)** to **[`7c73dcc`](https://github.com/sagemath/sagetrac-mirror/commit/7c73dcc7ab52ec00634fb1f3f7ca23560c8c39b2)**",
    "created_at": "2014-11-04T14:16:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225899",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3ce3c89`](https://github.com/sagemath/sagetrac-mirror/commit/3ce3c89b99ffe05dbab370c853e1b926b2fed6f3)** to **[`7c73dcc`](https://github.com/sagemath/sagetrac-mirror/commit/7c73dcc7ab52ec00634fb1f3f7ca23560c8c39b2)**



---

archive/issue_comments_225900.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5582b7de06d5b3516cc98b7742a0bdea35e52ea\"><code>e5582b7</code></a></td><td><code>Added sorted() to doctests.</code></td></tr></table>\n",
    "created_at": "2014-11-04T14:47:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225900",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5582b7de06d5b3516cc98b7742a0bdea35e52ea"><code>e5582b7</code></a></td><td><code>Added sorted() to doctests.</code></td></tr></table>




---

archive/issue_comments_225901.json:
```json
{
    "body": "Changed commit from **[`7c73dcc`](https://github.com/sagemath/sagetrac-mirror/commit/7c73dcc7ab52ec00634fb1f3f7ca23560c8c39b2)** to **[`e5582b7`](https://github.com/sagemath/sagetrac-mirror/commit/e5582b7de06d5b3516cc98b7742a0bdea35e52ea)**",
    "created_at": "2014-11-04T14:47:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225901",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7c73dcc`](https://github.com/sagemath/sagetrac-mirror/commit/7c73dcc7ab52ec00634fb1f3f7ca23560c8c39b2)** to **[`e5582b7`](https://github.com/sagemath/sagetrac-mirror/commit/e5582b7de06d5b3516cc98b7742a0bdea35e52ea)**



---

archive/issue_comments_225902.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nNow it seems to work.",
    "created_at": "2014-11-04T14:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225902",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:41" align="right">comment:41</div>

Now it seems to work.



---

archive/issue_events_244837.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-11-04T14:47:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244837"
}
```



---

archive/issue_events_244838.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-11-04T14:47:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244838"
}
```



---

archive/issue_comments_225903.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nSome doctests are broken\n\n```\nsage -t --long src/sage/combinat/cluster_algebra_quiver/quiver.py  # 1 doctest failed\nsage -t --long src/sage/combinat/cluster_algebra_quiver/cluster_seed.py  # 1 doctest failed\nsage -t --long src/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.py  # 1 doctest failed\n```\n\nIt is a bit painful to work on those classes because they are used in unexpected places and you don't know where unless you test all of Sage `:-/`\n\nNathann",
    "created_at": "2014-11-04T15:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225903",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:42" align="right">comment:42</div>

Some doctests are broken

```
sage -t --long src/sage/combinat/cluster_algebra_quiver/quiver.py  # 1 doctest failed
sage -t --long src/sage/combinat/cluster_algebra_quiver/cluster_seed.py  # 1 doctest failed
sage -t --long src/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.py  # 1 doctest failed
```

It is a bit painful to work on those classes because they are used in unexpected places and you don't know where unless you test all of Sage `:-/`

Nathann



---

archive/issue_comments_225904.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b097c8893dae7cd96f8f7064d0179842cc4aeaec\"><code>b097c88</code></a></td><td><code>trac #17053 correct doctests in cluster stuff</code></td></tr></table>\n",
    "created_at": "2014-11-04T20:42:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225904",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b097c8893dae7cd96f8f7064d0179842cc4aeaec"><code>b097c88</code></a></td><td><code>trac #17053 correct doctests in cluster stuff</code></td></tr></table>




---

archive/issue_comments_225905.json:
```json
{
    "body": "Changed commit from **[`e5582b7`](https://github.com/sagemath/sagetrac-mirror/commit/e5582b7de06d5b3516cc98b7742a0bdea35e52ea)** to **[`b097c88`](https://github.com/sagemath/sagetrac-mirror/commit/b097c8893dae7cd96f8f7064d0179842cc4aeaec)**",
    "created_at": "2014-11-04T20:42:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225905",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e5582b7`](https://github.com/sagemath/sagetrac-mirror/commit/e5582b7de06d5b3516cc98b7742a0bdea35e52ea)** to **[`b097c88`](https://github.com/sagemath/sagetrac-mirror/commit/b097c8893dae7cd96f8f7064d0179842cc4aeaec)**



---

archive/issue_comments_225906.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nGoooooooooooooooooood to go !\n\nNathann",
    "created_at": "2014-11-04T22:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225906",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:44" align="right">comment:44</div>

Goooooooooooooooooood to go !

Nathann



---

archive/issue_events_244839.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-11-04T22:05:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244839"
}
```



---

archive/issue_events_244840.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-11-04T22:05:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244840"
}
```



---

archive/issue_events_244841.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-15T16:22:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244841"
}
```



---

archive/issue_events_244842.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e58163925fe2025d993a3cd3db82aaea96ee7746",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-11-15T16:22:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17053#event-244842"
}
```



---

archive/issue_comments_225907.json:
```json
{
    "body": "Changed branch from **[public/17053](https://github.com/sagemath/sagetrac-mirror/tree/public/17053)** to **[`b097c88`](https://github.com/sagemath/sagetrac-mirror/commit/b097c8893dae7cd96f8f7064d0179842cc4aeaec)**",
    "created_at": "2014-11-15T16:22:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17053#issuecomment-225907",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/17053](https://github.com/sagemath/sagetrac-mirror/tree/public/17053)** to **[`b097c88`](https://github.com/sagemath/sagetrac-mirror/commit/b097c8893dae7cd96f8f7064d0179842cc4aeaec)**
