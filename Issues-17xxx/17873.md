# Issue 17873: Segfault in iFUB

archive/issues_017636.json:
```json
{
    "body": "This patch resolve a segfault occuring in `iFUB` for graphs of order 1. It was due to an uninitialized variable in `diameter_lower_bound_multi_sweep`.\n\n**CC:**  @nathanncohen\n\n**Branch/Commit:** [fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34](https://github.com/sagemath/sagetrac-mirror/commit/fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34)\n\n**Reviewer:** Nathann Cohen\n\n**Author:** David Coudert\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17873\n\n",
    "closed_at": "2015-03-03T00:25:09Z",
    "created_at": "2015-02-28T09:04:05Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Segfault in iFUB",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17873",
    "user": "https://github.com/dcoudert"
}
```
This patch resolve a segfault occuring in `iFUB` for graphs of order 1. It was due to an uninitialized variable in `diameter_lower_bound_multi_sweep`.

**CC:**  @nathanncohen

**Branch/Commit:** [fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34](https://github.com/sagemath/sagetrac-mirror/commit/fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34)

**Reviewer:** Nathann Cohen

**Author:** David Coudert

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/17873





---

archive/issue_comments_310670.json:
```json
{
    "body": "**Branch:** [public/17873](https://github.com/sagemath/sagetrac-mirror/tree/public/17873)",
    "created_at": "2015-02-28T09:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310670",
    "user": "https://github.com/dcoudert"
}
```

**Branch:** [public/17873](https://github.com/sagemath/sagetrac-mirror/tree/public/17873)



---

archive/issue_comments_310671.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa969aa33c8aeb6889f207e2fad6671b1b0436b5\">fa969aa</a></td><td><code>trac #17873: resolve segfault in iFUB</code></td></tr></table>\n",
    "created_at": "2015-02-28T09:14:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310671",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa969aa33c8aeb6889f207e2fad6671b1b0436b5">fa969aa</a></td><td><code>trac #17873: resolve segfault in iFUB</code></td></tr></table>




---

archive/issue_comments_310672.json:
```json
{
    "body": "**Commit:** [fa969aa33c8aeb6889f207e2fad6671b1b0436b5](https://github.com/sagemath/sagetrac-mirror/commit/fa969aa33c8aeb6889f207e2fad6671b1b0436b5)",
    "created_at": "2015-02-28T09:14:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [fa969aa33c8aeb6889f207e2fad6671b1b0436b5](https://github.com/sagemath/sagetrac-mirror/commit/fa969aa33c8aeb6889f207e2fad6671b1b0436b5)



---

archive/issue_comments_310673.json:
```json
{
    "body": "<a id='comment:3'></a>\nThere is something weird in my commit and I don't understand why.\nI have not modified the `generic_graph.py` file but the commit contains code from it O_o\nI'm sure I have created this branch starting from the `develop` branch (after a git trac checkout develop; git trac pull; git branch ifub; git checkout ifub; fix ifub problems and do test and docbuild; git commit...; git trac push 17873).\nAny idea on how to resolve this?\n\nDavid.",
    "created_at": "2015-02-28T09:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310673",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>
There is something weird in my commit and I don't understand why.
I have not modified the `generic_graph.py` file but the commit contains code from it O_o
I'm sure I have created this branch starting from the `develop` branch (after a git trac checkout develop; git trac pull; git branch ifub; git checkout ifub; fix ifub problems and do test and docbuild; git commit...; git trac push 17873).
Any idea on how to resolve this?

David.



---

archive/issue_comments_310674.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-02-28T09:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310674",
    "user": "https://github.com/dcoudert"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_310675.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-This patch resolve a segfault occuring in ``iFUB`` for graphs of order 1. It was due to an uninitialized variable in ``diameter_lower_bound_multi_sweep``.\n+This patch resolve a segfault occuring in `iFUB` for graphs of order 1. It was due to an uninitialized variable in `diameter_lower_bound_multi_sweep`.\n``````\n",
    "created_at": "2015-02-28T09:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310675",
    "user": "https://github.com/dcoudert"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-This patch resolve a segfault occuring in ``iFUB`` for graphs of order 1. It was due to an uninitialized variable in ``diameter_lower_bound_multi_sweep``.
+This patch resolve a segfault occuring in `iFUB` for graphs of order 1. It was due to an uninitialized variable in `diameter_lower_bound_multi_sweep`.
``````




---

archive/issue_comments_310676.json:
```json
{
    "body": "<a id='comment:4'></a>\nHello !\n\n> Any idea on how to resolve this?\n\n\nWell, I do not understand hwo you got there either. Your branch seems based on the latest develop indeed, but your must have had some changes in `generic_graph` when you ran this 'pull'. Either way none of that is really a problem. Here is what you should do:\n\n1) \"Break\" your last commit. Its content will become unstaged changes\n\n```\nsage reset HEAD~1}}} \n\n2) At this moment you can do a `git checkout generic_graph.py`. This will discard any change in `generic_graph.py`. In particular there are `<<<<<<<` and `>>>>>>>` in there that probably come from a failed merge.\n\n3) When you are satisfied with the result, create the commit again in the usual way\n\n4) As you modified a commit, technically you rewrote history. When you push your commit again you will have to use a `-f` flag.\n\nIn general, if you call 'tig' more frequently to look at your commits and diff you should have less troubles with git.\n\nI am in the train right now, a bit after Avignon. God, it feels good to see this warm sunlight everywhere. It feels more like home than any other place.\n\nNathann",
    "created_at": "2015-02-28T09:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310676",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
Hello !

> Any idea on how to resolve this?


Well, I do not understand hwo you got there either. Your branch seems based on the latest develop indeed, but your must have had some changes in `generic_graph` when you ran this 'pull'. Either way none of that is really a problem. Here is what you should do:

1) "Break" your last commit. Its content will become unstaged changes

```
sage reset HEAD~1}}} 

2) At this moment you can do a `git checkout generic_graph.py`. This will discard any change in `generic_graph.py`. In particular there are `<<<<<<<` and `>>>>>>>` in there that probably come from a failed merge.

3) When you are satisfied with the result, create the commit again in the usual way

4) As you modified a commit, technically you rewrote history. When you push your commit again you will have to use a `-f` flag.

In general, if you call 'tig' more frequently to look at your commits and diff you should have less troubles with git.

I am in the train right now, a bit after Avignon. God, it feels good to see this warm sunlight everywhere. It feels more like home than any other place.

Nathann



---

archive/issue_comments_310677.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34\">fe533dd</a></td><td><code>trac #17873: fix bug in iFUB</code></td></tr></table>\n",
    "created_at": "2015-02-28T09:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310677",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34">fe533dd</a></td><td><code>trac #17873: fix bug in iFUB</code></td></tr></table>




---

archive/issue_comments_310678.json:
```json
{
    "body": "**Changing commit** from \"[fa969aa33c8aeb6889f207e2fad6671b1b0436b5](https://github.com/sagemath/sagetrac-mirror/commit/fa969aa33c8aeb6889f207e2fad6671b1b0436b5)\" to \"[fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34](https://github.com/sagemath/sagetrac-mirror/commit/fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34)\".",
    "created_at": "2015-02-28T09:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fa969aa33c8aeb6889f207e2fad6671b1b0436b5](https://github.com/sagemath/sagetrac-mirror/commit/fa969aa33c8aeb6889f207e2fad6671b1b0436b5)" to "[fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34](https://github.com/sagemath/sagetrac-mirror/commit/fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34)".



---

archive/issue_comments_310679.json:
```json
{
    "body": "<a id='comment:6'></a>\nTHANKS A LOT !!!\n\nSo the patch is ready to be reviewed. Note that I have not changed the first test of the diameter method from `if n==0` to `if n<=1`, but we can do it as well to save time.\n\nDavid.\nPS: current weather in Nice is not so perfect, we have some clouds ;)",
    "created_at": "2015-02-28T10:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310679",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>
THANKS A LOT !!!

So the patch is ready to be reviewed. Note that I have not changed the first test of the diameter method from `if n==0` to `if n<=1`, but we can do it as well to save time.

David.
PS: current weather in Nice is not so perfect, we have some clouds ;)



---

archive/issue_comments_310680.json:
```json
{
    "body": "<a id='comment:7'></a>\nWell. Saving time for instances of size 0 is cool, but I seriously hope that it will not be the bottleneck anywhere. This fix is good, as the lowest level method does not rely on some assumption made by the function which calls it. Good to go, thanks !\n\nNathann",
    "created_at": "2015-03-01T18:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310680",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>
Well. Saving time for instances of size 0 is cool, but I seriously hope that it will not be the bottleneck anywhere. This fix is good, as the lowest level method does not rely on some assumption made by the function which calls it. Good to go, thanks !

Nathann



---

archive/issue_comments_310681.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2015-03-01T18:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310681",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_comments_310682.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2015-03-01T18:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310682",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_310683.json:
```json
{
    "body": "**Changing branch** from \"[public/17873](https://github.com/sagemath/sagetrac-mirror/tree/public/17873)\" to \"[fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34](https://github.com/sagemath/sagetrac-mirror/commit/fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34)\".",
    "created_at": "2015-03-03T00:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310683",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/17873](https://github.com/sagemath/sagetrac-mirror/tree/public/17873)" to "[fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34](https://github.com/sagemath/sagetrac-mirror/commit/fe533ddc3b8533dc0c4c746ebc2a1fe0115b9e34)".



---

archive/issue_events_057925.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-03T00:25:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17873#event-57925"
}
```



---

archive/issue_comments_310684.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2015-03-03T00:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17873#issuecomment-310684",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed
