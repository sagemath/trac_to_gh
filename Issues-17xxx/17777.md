# Issue 17777: unsigned infinity cannot be coerced into SR

archive/issues_017540.json:
```json
{
    "assignees": [],
    "body": "This is needed e.g. by `BuiltinFunction`s returning that value (#17678).\n\n```\nsage: from sage.rings.infinity import infinity, unsigned_infinity\nsage: SR.coerce(infinity)\n+Infinity\nsage: SR.coerce(unsigned_infinity)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-5-164e151d39b6> in <module>()\n----> 1 SR.coerce(unsigned_infinity)\n\n/home/ralf/sage/src/sage/structure/parent.pyx in sage.structure.parent.Parent.coerce (build/cythonized/sage/structure/parent.c:10777)()\n   1290             return False\n   1291 \n-> 1292     cpdef coerce(self, x):\n   1293         \"\"\"\n   1294         Return x as an element of self, if and only if there is a canonical\n\n/home/ralf/sage/src/sage/structure/parent.pyx in sage.structure.parent.Parent.coerce (build/cythonized/sage/structure/parent.c:10711)()\n   1317                 except Exception:\n   1318                     _record_exception()\n-> 1319             raise TypeError(\"no canonical coercion from %s to %s\" % (parent_c(x), self))\n   1320         else:\n   1321             return (<map.Map>mor)._call_(x)\n\nTypeError: no canonical coercion from The Unsigned Infinity Ring to Symbolic Ring\n```\n\nBranch/Commit: **[u/mmezzarobba/17777-infinity_to_SR](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/17777-infinity_to_SR) @ [`3a3fd02`](https://github.com/sagemath/sagetrac-mirror/commit/3a3fd027c33f1bab636ac761caf636ce8fe8bfad)**\n\nReviewer: **Karl-Dieter Crisman, Marc Mezzarobba**\n\nAuthor: **Ralf Stephan**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17777_\n\n",
    "created_at": "2015-02-13T17:13:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "unsigned infinity cannot be coerced into SR",
    "type": "issue",
    "updated_at": "2022-12-29T01:35:57Z",
    "url": "https://github.com/sagemath/sage/issues/17777",
    "user": "https://github.com/rwst"
}
```
This is needed e.g. by `BuiltinFunction`s returning that value (#17678).

```
sage: from sage.rings.infinity import infinity, unsigned_infinity
sage: SR.coerce(infinity)
+Infinity
sage: SR.coerce(unsigned_infinity)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-5-164e151d39b6> in <module>()
----> 1 SR.coerce(unsigned_infinity)

/home/ralf/sage/src/sage/structure/parent.pyx in sage.structure.parent.Parent.coerce (build/cythonized/sage/structure/parent.c:10777)()
   1290             return False
   1291 
-> 1292     cpdef coerce(self, x):
   1293         """
   1294         Return x as an element of self, if and only if there is a canonical

/home/ralf/sage/src/sage/structure/parent.pyx in sage.structure.parent.Parent.coerce (build/cythonized/sage/structure/parent.c:10711)()
   1317                 except Exception:
   1318                     _record_exception()
-> 1319             raise TypeError("no canonical coercion from %s to %s" % (parent_c(x), self))
   1320         else:
   1321             return (<map.Map>mor)._call_(x)

TypeError: no canonical coercion from The Unsigned Infinity Ring to Symbolic Ring
```

Branch/Commit: **[u/mmezzarobba/17777-infinity_to_SR](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/17777-infinity_to_SR) @ [`3a3fd02`](https://github.com/sagemath/sagetrac-mirror/commit/3a3fd027c33f1bab636ac761caf636ce8fe8bfad)**

Reviewer: **Karl-Dieter Crisman, Marc Mezzarobba**

Author: **Ralf Stephan**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/17777_





---

archive/issue_events_254314.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-13T17:13:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254314"
}
```



---

archive/issue_events_254315.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-13T17:13:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254315"
}
```



---

archive/issue_events_254316.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-13T17:13:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254316"
}
```



---

archive/issue_events_254317.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-13T17:13:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254317"
}
```



---

archive/issue_comments_240031.json:
```json
{
    "body": "Branch: **[u/rws/unsigned_infinity_cannot_be_coerced_into_sr](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/unsigned_infinity_cannot_be_coerced_into_sr)**",
    "created_at": "2015-02-14T07:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240031",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/unsigned_infinity_cannot_be_coerced_into_sr](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/unsigned_infinity_cannot_be_coerced_into_sr)**



---

archive/issue_events_254318.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-14T07:51:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254318"
}
```



---

archive/issue_events_254319.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-14T07:51:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254319"
}
```



---

archive/issue_comments_240032.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIs that all? That would be easier than thought.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17d1aa13d11212f2c1e0b1485c7dc094c20fae0c\"><code>17d1aa1</code></a></td><td><code>17777: coerce unsigned infinity into SR</code></td></tr></table>\n",
    "created_at": "2015-02-14T07:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240032",
    "user": "https://github.com/rwst"
}
```

<div id="comment:2" align="right">comment:2</div>

Is that all? That would be easier than thought.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17d1aa13d11212f2c1e0b1485c7dc094c20fae0c"><code>17d1aa1</code></a></td><td><code>17777: coerce unsigned infinity into SR</code></td></tr></table>




---

archive/issue_events_254320.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-14T07:51:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254320"
}
```



---

archive/issue_comments_240033.json:
```json
{
    "body": "Commit: **[`17d1aa1`](https://github.com/sagemath/sagetrac-mirror/commit/17d1aa13d11212f2c1e0b1485c7dc094c20fae0c)**",
    "created_at": "2015-02-14T07:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240033",
    "user": "https://github.com/rwst"
}
```

Commit: **[`17d1aa1`](https://github.com/sagemath/sagetrac-mirror/commit/17d1aa13d11212f2c1e0b1485c7dc094c20fae0c)**



---

archive/issue_comments_240034.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2015-02-14T07:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240034",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_240035.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n\n```\nsage -t --long src/sage/symbolic/expression.pyx  # 1 doctest failed\nsage -t --long src/sage/rings/infinity.py  # 1 doctest failed\nsage -t --long src/sage/doctest/control.py  # 2 doctests failed\n```",
    "created_at": "2015-02-26T09:34:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240035",
    "user": "https://github.com/rwst"
}
```

<div id="comment:3" align="right">comment:3</div>


```
sage -t --long src/sage/symbolic/expression.pyx  # 1 doctest failed
sage -t --long src/sage/rings/infinity.py  # 1 doctest failed
sage -t --long src/sage/doctest/control.py  # 2 doctests failed
```



---

archive/issue_events_254321.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-26T09:34:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254321"
}
```



---

archive/issue_events_254322.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-02-26T09:34:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254322"
}
```



---

archive/issue_comments_240036.json:
```json
{
    "body": "Changed commit from **[`17d1aa1`](https://github.com/sagemath/sagetrac-mirror/commit/17d1aa13d11212f2c1e0b1485c7dc094c20fae0c)** to **[`5609e51`](https://github.com/sagemath/sagetrac-mirror/commit/5609e513405ba231b522ff68d8f88fe9cf0caeff)**",
    "created_at": "2015-03-04T17:26:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240036",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`17d1aa1`](https://github.com/sagemath/sagetrac-mirror/commit/17d1aa13d11212f2c1e0b1485c7dc094c20fae0c)** to **[`5609e51`](https://github.com/sagemath/sagetrac-mirror/commit/5609e513405ba231b522ff68d8f88fe9cf0caeff)**



---

archive/issue_comments_240037.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d05dd2364323ad1caf0119eeb545943a41df357\"><code>0d05dd2</code></a></td><td><code>Merge branch 'develop' into t/17777/unsigned_infinity_cannot_be_coerced_into_sr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3330a2f639fa0e9231d938bfb0a151bb436b641c\"><code>3330a2f</code></a></td><td><code>Merge branch 'develop' into t/17777/unsigned_infinity_cannot_be_coerced_into_sr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5609e513405ba231b522ff68d8f88fe9cf0caeff\"><code>5609e51</code></a></td><td><code>17777: fix doctests</code></td></tr></table>\n",
    "created_at": "2015-03-04T17:26:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240037",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d05dd2364323ad1caf0119eeb545943a41df357"><code>0d05dd2</code></a></td><td><code>Merge branch 'develop' into t/17777/unsigned_infinity_cannot_be_coerced_into_sr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3330a2f639fa0e9231d938bfb0a151bb436b641c"><code>3330a2f</code></a></td><td><code>Merge branch 'develop' into t/17777/unsigned_infinity_cannot_be_coerced_into_sr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5609e513405ba231b522ff68d8f88fe9cf0caeff"><code>5609e51</code></a></td><td><code>17777: fix doctests</code></td></tr></table>




---

archive/issue_events_254323.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-04T17:26:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254323"
}
```



---

archive/issue_events_254324.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-04T17:26:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254324"
}
```



---

archive/issue_events_254325.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-04T17:26:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254325"
}
```



---

archive/issue_events_254326.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-04T17:26:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254326"
}
```



---

archive/issue_comments_240038.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe docstring of `sage.rings.infinity` states that:\n\n  The rules for arithmetic are that the unsigned infinity ring does not canonically coerce to any other ring, and all other rings canonically coerce to the unsigned infinity ring, sending all elements to the single element \"a number less than infinity\" of the unsigned infinity ring. Arithmetic and comparisons then take place in the unsigned infinity ring, where all arithmetic operations that are well-defined are defined.\n\n  [...]\n\n  Any ordered ring coerces to the infinity ring in the obvious way.\n\nSo if I understand correctly `SR` already didn't respect this specification. But this makes me wonder if your patch won't make comparisons with infinities even more inconsistent. If you understand the issues at hand better than I do, can you explain how this is all supposed to work?",
    "created_at": "2015-03-12T15:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240038",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:6" align="right">comment:6</div>

The docstring of `sage.rings.infinity` states that:

  The rules for arithmetic are that the unsigned infinity ring does not canonically coerce to any other ring, and all other rings canonically coerce to the unsigned infinity ring, sending all elements to the single element "a number less than infinity" of the unsigned infinity ring. Arithmetic and comparisons then take place in the unsigned infinity ring, where all arithmetic operations that are well-defined are defined.

  [...]

  Any ordered ring coerces to the infinity ring in the obvious way.

So if I understand correctly `SR` already didn't respect this specification. But this makes me wonder if your patch won't make comparisons with infinities even more inconsistent. If you understand the issues at hand better than I do, can you explain how this is all supposed to work?



---

archive/issue_comments_240039.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI think the issue is that `SR` is even more special (see e.g. https://groups.google.com/d/topic/sage-devel/Oip2hzvjFZQ/discussion the posting by Volker). Everything coerces to it.",
    "created_at": "2015-03-12T15:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240039",
    "user": "https://github.com/rwst"
}
```

<div id="comment:7" align="right">comment:7</div>

I think the issue is that `SR` is even more special (see e.g. https://groups.google.com/d/topic/sage-devel/Oip2hzvjFZQ/discussion the posting by Volker). Everything coerces to it.



---

archive/issue_comments_240040.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis blocks #17678.",
    "created_at": "2015-05-12T15:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240040",
    "user": "https://github.com/rwst"
}
```

<div id="comment:8" align="right">comment:8</div>

This blocks #17678.



---

archive/issue_comments_240041.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nSo... I'm not sure I understand the question of the last two comments.   I don't have any objections to this but don't want to step on anyone's toes, and it (obviously) helps #17678.",
    "created_at": "2015-05-21T16:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240041",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:9" align="right">comment:9</div>

So... I'm not sure I understand the question of the last two comments.   I don't have any objections to this but don't want to step on anyone's toes, and it (obviously) helps #17678.



---

archive/issue_comments_240042.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThe cited \"The rules for arithmetic are that the unsigned infinity ring does not canonically coerce to any other ring, and all other rings canonically coerce to the unsigned infinity ring...\" is obviously wrong because the symbolic ring already has this notion. Example: `SR` could have a constant `aleph2` which the infinity rings are unable to handle right now, but `SR` can handle everything thrown at it. My guess is that the cited documentation simply ignored `SR` because it's not a typical algebraic object and doesn't fit the algebraists' concepts. Tough luck.",
    "created_at": "2015-05-24T15:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240042",
    "user": "https://github.com/rwst"
}
```

<div id="comment:10" align="right">comment:10</div>

The cited "The rules for arithmetic are that the unsigned infinity ring does not canonically coerce to any other ring, and all other rings canonically coerce to the unsigned infinity ring..." is obviously wrong because the symbolic ring already has this notion. Example: `SR` could have a constant `aleph2` which the infinity rings are unable to handle right now, but `SR` can handle everything thrown at it. My guess is that the cited documentation simply ignored `SR` because it's not a typical algebraic object and doesn't fit the algebraists' concepts. Tough luck.



---

archive/issue_comments_240043.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nYeah, I agree that the symbolic ring isn't a ring in the ordinary sense.  Maybe this ticket could upgrade that documentation as well with a brief note?  (mmezzarobba, would that satisfy your concerns?)",
    "created_at": "2015-05-28T15:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240043",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:11" align="right">comment:11</div>

Yeah, I agree that the symbolic ring isn't a ring in the ordinary sense.  Maybe this ticket could upgrade that documentation as well with a brief note?  (mmezzarobba, would that satisfy your concerns?)



---

archive/issue_comments_240044.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@kcrisman](#comment:11):\n> Yeah, I agree that the symbolic ring isn't a ring in the ordinary sense.  Maybe this ticket could upgrade that documentation as well with a brief note?  (mmezzarobba, would that satisfy your concerns?)\n\nI have no strong opinion regarding whether there should be a coercion from SR to infinity rings, from infinity rings to SR, or neither. I was just pointing out that the proposed change would contradict the documentation. And yes, I guess improving that documentation is a good idea in any case!",
    "created_at": "2015-05-28T16:17:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240044",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@kcrisman](#comment:11):
> Yeah, I agree that the symbolic ring isn't a ring in the ordinary sense.  Maybe this ticket could upgrade that documentation as well with a brief note?  (mmezzarobba, would that satisfy your concerns?)

I have no strong opinion regarding whether there should be a coercion from SR to infinity rings, from infinity rings to SR, or neither. I was just pointing out that the proposed change would contradict the documentation. And yes, I guess improving that documentation is a good idea in any case!



---

archive/issue_events_254327.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-05-28T17:22:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254327"
}
```



---

archive/issue_events_254328.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-05-28T17:22:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254328"
}
```



---

archive/issue_comments_240045.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOkay, let's just make sure it's clear, then.",
    "created_at": "2015-05-28T17:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240045",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:13" align="right">comment:13</div>

Okay, let's just make sure it's clear, then.



---

archive/issue_comments_240046.json:
```json
{
    "body": "Work Issues: **improve doc to make clear SR isn't a ring**",
    "created_at": "2015-05-28T17:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240046",
    "user": "https://github.com/kcrisman"
}
```

Work Issues: **improve doc to make clear SR isn't a ring**



---

archive/issue_comments_240047.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0bcc32c8064f64838ea761163e7e8cb070b25b3\"><code>a0bcc32</code></a></td><td><code>Merge branch 'develop' into t/17777/unsigned_infinity_cannot_be_coerced_into_sr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f19e9c4f9eb5e07a7d37d77847daf6b8b9fba82\"><code>0f19e9c</code></a></td><td><code>17777: add note to make documentation consistent with ticket</code></td></tr></table>\n",
    "created_at": "2015-06-10T15:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240047",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0bcc32c8064f64838ea761163e7e8cb070b25b3"><code>a0bcc32</code></a></td><td><code>Merge branch 'develop' into t/17777/unsigned_infinity_cannot_be_coerced_into_sr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f19e9c4f9eb5e07a7d37d77847daf6b8b9fba82"><code>0f19e9c</code></a></td><td><code>17777: add note to make documentation consistent with ticket</code></td></tr></table>




---

archive/issue_comments_240048.json:
```json
{
    "body": "Changed commit from **[`5609e51`](https://github.com/sagemath/sagetrac-mirror/commit/5609e513405ba231b522ff68d8f88fe9cf0caeff)** to **[`0f19e9c`](https://github.com/sagemath/sagetrac-mirror/commit/0f19e9c4f9eb5e07a7d37d77847daf6b8b9fba82)**",
    "created_at": "2015-06-10T15:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240048",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5609e51`](https://github.com/sagemath/sagetrac-mirror/commit/5609e513405ba231b522ff68d8f88fe9cf0caeff)** to **[`0f19e9c`](https://github.com/sagemath/sagetrac-mirror/commit/0f19e9c4f9eb5e07a7d37d77847daf6b8b9fba82)**



---

archive/issue_events_254329.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-06-10T15:31:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254329"
}
```



---

archive/issue_events_254330.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-06-10T15:31:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254330"
}
```



---

archive/issue_comments_240049.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI like it but I think maybe it belongs in the first part of the paragraph [comment:6](#comment:6) mentions.\n\n> The rules for arithmetic are that the unsigned infinity ring does not canonically coerce to any other ring, and all other rings canonically coerce to the unsigned infinity ring, sending all elements to the single element \"a number less than infinity\" of the unsigned infinity ring. Arithmetic and comparisons then take place in the unsigned infinity ring, where all arithmetic operations that are well-defined are defined\n\nmmezz... would this doc change satisfy you?",
    "created_at": "2015-06-10T19:10:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240049",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:16" align="right">comment:16</div>

I like it but I think maybe it belongs in the first part of the paragraph [comment:6](#comment:6) mentions.

> The rules for arithmetic are that the unsigned infinity ring does not canonically coerce to any other ring, and all other rings canonically coerce to the unsigned infinity ring, sending all elements to the single element "a number less than infinity" of the unsigned infinity ring. Arithmetic and comparisons then take place in the unsigned infinity ring, where all arithmetic operations that are well-defined are defined

mmezz... would this doc change satisfy you?



---

archive/issue_comments_240050.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nping?",
    "created_at": "2015-10-20T12:42:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240050",
    "user": "https://github.com/rwst"
}
```

<div id="comment:17" align="right">comment:17</div>

ping?



---

archive/issue_comments_240051.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@kcrisman](#comment:16):\n> I like it but I think maybe it belongs in the first part of the paragraph [comment:6](#comment:6) mentions.\n> \n> > The rules for arithmetic are that the unsigned infinity ring does not canonically coerce to any other ring, and all other rings canonically coerce to the unsigned infinity ring, sending all elements to the single element \"a number less than infinity\" of the unsigned infinity ring. Arithmetic and comparisons then take place in the unsigned infinity ring, where all arithmetic operations that are well-defined are defined\n\n> \n> mmezz... would this doc change satisfy you?\n\nSure. And my apologies for taking so long to reply, I somehow missed your question or forgot about it until Ralph's ping.",
    "created_at": "2015-10-22T13:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240051",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@kcrisman](#comment:16):
> I like it but I think maybe it belongs in the first part of the paragraph [comment:6](#comment:6) mentions.
> 
> > The rules for arithmetic are that the unsigned infinity ring does not canonically coerce to any other ring, and all other rings canonically coerce to the unsigned infinity ring, sending all elements to the single element "a number less than infinity" of the unsigned infinity ring. Arithmetic and comparisons then take place in the unsigned infinity ring, where all arithmetic operations that are well-defined are defined

> 
> mmezz... would this doc change satisfy you?

Sure. And my apologies for taking so long to reply, I somehow missed your question or forgot about it until Ralph's ping.



---

archive/issue_comments_240052.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman, Marc Mezzarobba**",
    "created_at": "2016-03-27T10:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240052",
    "user": "https://github.com/mezzarobba"
}
```

Reviewer: **Karl-Dieter Crisman, Marc Mezzarobba**



---

archive/issue_comments_240053.json:
```json
{
    "body": "Changed commit from **[`0f19e9c`](https://github.com/sagemath/sagetrac-mirror/commit/0f19e9c4f9eb5e07a7d37d77847daf6b8b9fba82)** to **[`3a3fd02`](https://github.com/sagemath/sagetrac-mirror/commit/3a3fd027c33f1bab636ac761caf636ce8fe8bfad)**",
    "created_at": "2016-03-27T10:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240053",
    "user": "https://github.com/mezzarobba"
}
```

Changed commit from **[`0f19e9c`](https://github.com/sagemath/sagetrac-mirror/commit/0f19e9c4f9eb5e07a7d37d77847daf6b8b9fba82)** to **[`3a3fd02`](https://github.com/sagemath/sagetrac-mirror/commit/3a3fd027c33f1bab636ac761caf636ce8fe8bfad)**



---

archive/issue_comments_240054.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI made (essentially) the change discussed in the last few comments. Please feel free to set the ticket to positive review if you agree with the last commit.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a3fd027c33f1bab636ac761caf636ce8fe8bfad\"><code>3a3fd02</code></a></td><td><code>#17777 improve description of coercions from/to UnsignedInfinityRing</code></td></tr></table>\n",
    "created_at": "2016-03-27T10:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240054",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:19" align="right">comment:19</div>

I made (essentially) the change discussed in the last few comments. Please feel free to set the ticket to positive review if you agree with the last commit.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a3fd027c33f1bab636ac761caf636ce8fe8bfad"><code>3a3fd02</code></a></td><td><code>#17777 improve description of coercions from/to UnsignedInfinityRing</code></td></tr></table>




---

archive/issue_events_254331.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-03-27T10:22:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254331"
}
```



---

archive/issue_events_254332.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-03-27T10:22:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254332"
}
```



---

archive/issue_comments_240055.json:
```json
{
    "body": "Changed branch from **[u/rws/unsigned_infinity_cannot_be_coerced_into_sr](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/unsigned_infinity_cannot_be_coerced_into_sr)** to **[u/mmezzarobba/17777-infinity_to_SR](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/17777-infinity_to_SR)**",
    "created_at": "2016-03-27T10:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240055",
    "user": "https://github.com/mezzarobba"
}
```

Changed branch from **[u/rws/unsigned_infinity_cannot_be_coerced_into_sr](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/unsigned_infinity_cannot_be_coerced_into_sr)** to **[u/mmezzarobba/17777-infinity_to_SR](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/17777-infinity_to_SR)**



---

archive/issue_comments_240056.json:
```json
{
    "body": "Changed work issues from **improve doc to make clear SR isn't a ring** to none",
    "created_at": "2016-03-27T10:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240056",
    "user": "https://github.com/mezzarobba"
}
```

Changed work issues from **improve doc to make clear SR isn't a ring** to none



---

archive/issue_events_254333.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-03-27T12:13:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254333"
}
```



---

archive/issue_events_254334.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-03-27T12:13:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254334"
}
```



---

archive/issue_comments_240057.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nWait: with this change, lots rings would coerce into `SR` both directly and through `InfinityRing`, with different results. But coercions are supposed to form a commutative diagram. I understand that both the infinity ring and the symbolic ring are a bit special, and that, with the current coercion discovery algorithm, things probably will work fine even if that assumption is broken... but still, I really don't like the idea of breaking it if that can be avoided.\n\nIs there really no other way to make infinities and symbolic expression play well together? For example, what about having `SR` coerce into the infinity ring (and making the global identifier `infinity` refer to `SR(infinity)`?) Or, perhaps better, adding an intermediate \u201csymbolic infinity ring\u201d that would coerce into both `SR` and `InfinityRing`, but have no ingoing coercions?",
    "created_at": "2016-03-27T12:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240057",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:20" align="right">comment:20</div>

Wait: with this change, lots rings would coerce into `SR` both directly and through `InfinityRing`, with different results. But coercions are supposed to form a commutative diagram. I understand that both the infinity ring and the symbolic ring are a bit special, and that, with the current coercion discovery algorithm, things probably will work fine even if that assumption is broken... but still, I really don't like the idea of breaking it if that can be avoided.

Is there really no other way to make infinities and symbolic expression play well together? For example, what about having `SR` coerce into the infinity ring (and making the global identifier `infinity` refer to `SR(infinity)`?) Or, perhaps better, adding an intermediate “symbolic infinity ring” that would coerce into both `SR` and `InfinityRing`, but have no ingoing coercions?



---

archive/issue_comments_240058.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@mezzarobba](#comment:20):\n> Is there really no other way to make infinities and symbolic expression play well together? For example, what about having `SR` coerce into the infinity ring (and making the global identifier `infinity` refer to `SR(infinity)`?) Or, perhaps better, adding an intermediate \u201csymbolic infinity ring\u201d that would coerce into both `SR` and `InfinityRing`, but have no ingoing coercions?\n\nThat sounds feasible, since SR can have subrings now.",
    "created_at": "2016-03-27T12:41:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240058",
    "user": "https://github.com/rwst"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@mezzarobba](#comment:20):
> Is there really no other way to make infinities and symbolic expression play well together? For example, what about having `SR` coerce into the infinity ring (and making the global identifier `infinity` refer to `SR(infinity)`?) Or, perhaps better, adding an intermediate “symbolic infinity ring” that would coerce into both `SR` and `InfinityRing`, but have no ingoing coercions?

That sounds feasible, since SR can have subrings now.



---

archive/issue_comments_240059.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nActually, I'm wondering if *all* symbolic constants shouldn't be part of a special parent, say the \u201cset of symbolic constants\u201d, with no operations at all defined on it (so that they can be used only after being coerced to something else). That would make it easy to support operations like `pi + 1.0`, `exp(infinity)`... with no artificial coercions from `SR`.",
    "created_at": "2016-03-27T12:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240059",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:22" align="right">comment:22</div>

Actually, I'm wondering if *all* symbolic constants shouldn't be part of a special parent, say the “set of symbolic constants”, with no operations at all defined on it (so that they can be used only after being coerced to something else). That would make it easy to support operations like `pi + 1.0`, `exp(infinity)`... with no artificial coercions from `SR`.



---

archive/issue_comments_240060.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nSee also #19439.",
    "created_at": "2016-07-19T07:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17777#issuecomment-240060",
    "user": "https://github.com/rwst"
}
```

<div id="comment:23" align="right">comment:23</div>

See also #19439.



---

archive/issue_events_254335.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:35:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17777",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17777#event-254335"
}
```
