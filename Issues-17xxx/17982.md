# Issue 17982: Ambient space root poset is broken

archive/issues_017745.json:
```json
{
    "body": "The ambient space for the root system of type A causes a bug in the method root_poset().  In particular, the following code causes an error.\n\n```\n  sage: RootSystem(['A', 2]).ambient_space().root_poset()\n  Error in lines 2-2\n  KeyError: 3\n```\nI fixed this bug by redefining the dimension to be the number of simple roots.  \"I\" also fixed some formatting conventions.\n\nCC:  @nthiery\n\nKeywords: root poset, days64\n\nBranch/Commit: 4cb9eb1ca74ea760991eaa5c0e45be788efe7ee5\n\nReviewer: Franco Saliola\n\nAuthor: Nathan Williams\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17982\n\n",
    "closed_at": "2015-03-21T09:32:04Z",
    "created_at": "2015-03-18T00:01:53Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Ambient space root poset is broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17982",
    "user": "https://trac.sagemath.org/admin/accounts/users/nathanwilliams"
}
```
The ambient space for the root system of type A causes a bug in the method root_poset().  In particular, the following code causes an error.

```
  sage: RootSystem(['A', 2]).ambient_space().root_poset()
  Error in lines 2-2
  KeyError: 3
```
I fixed this bug by redefining the dimension to be the number of simple roots.  "I" also fixed some formatting conventions.

CC:  @nthiery

Keywords: root poset, days64

Branch/Commit: 4cb9eb1ca74ea760991eaa5c0e45be788efe7ee5

Reviewer: Franco Saliola

Author: Nathan Williams

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17982





---

archive/issue_comments_252908.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-18T00:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252908",
    "user": "https://trac.sagemath.org/admin/accounts/users/nathanwilliams"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_252909.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,18 @@\n-The ambient space for the root system of type A causes a bug in the method root_poset().\n+The ambient space for the root system of type A causes a bug in the method root_poset().  In particular, the following code causes an error.\n+\n+  sage: RootSystem(['A', 2]).ambient_space().root_poset()\n+  Error in lines 2-2\n+Traceback (most recent call last):\n+  File \"/projects/35ffe4a3-aac4-4456-85aa-5c0ad4b5e2d1/.sagemathcloud/sage_server.py\", line 875, in execute\n+    exec compile(block+'\\n', '', 'single') in namespace, locals\n+  File \"\", line 1, in <module>\n+  File \"/usr/local/sage/sage-6.5/local/lib/python2.7/site-packages/sage/combinat/root_system/root_lattice_realizations.py\", line 1050, in root_poset\n+    root_cover = root + simple_roots[i]\n+  File \"/usr/local/sage/sage-6.5/local/lib/python2.7/site-packages/sage/sets/family.py\", line 718, in __getitem__\n+    return self._dictionary.__getitem__(i)\n+KeyError: 3\n+\n+I fixed this bug by redefining the dimension to be the number of simple roots.\n \n Reviewer: Nicolas M. Thi\u00e9ry\n \n```\n",
    "created_at": "2015-03-18T01:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252909",
    "user": "https://trac.sagemath.org/admin/accounts/users/nathanwilliams"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,18 @@
-The ambient space for the root system of type A causes a bug in the method root_poset().
+The ambient space for the root system of type A causes a bug in the method root_poset().  In particular, the following code causes an error.
+
+  sage: RootSystem(['A', 2]).ambient_space().root_poset()
+  Error in lines 2-2
+Traceback (most recent call last):
+  File "/projects/35ffe4a3-aac4-4456-85aa-5c0ad4b5e2d1/.sagemathcloud/sage_server.py", line 875, in execute
+    exec compile(block+'\n', '', 'single') in namespace, locals
+  File "", line 1, in <module>
+  File "/usr/local/sage/sage-6.5/local/lib/python2.7/site-packages/sage/combinat/root_system/root_lattice_realizations.py", line 1050, in root_poset
+    root_cover = root + simple_roots[i]
+  File "/usr/local/sage/sage-6.5/local/lib/python2.7/site-packages/sage/sets/family.py", line 718, in __getitem__
+    return self._dictionary.__getitem__(i)
+KeyError: 3
+
+I fixed this bug by redefining the dimension to be the number of simple roots.
 
 Reviewer: Nicolas M. Thiéry
 
```




---

archive/issue_comments_252910.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+The ambient space for the root system of type A causes a bug in the method root_poset().  In particular, the following code causes an error.\n \n+  sage: RootSystem(['A', 2]).ambient_space().root_poset()\n+  Error in lines 2-2\n+  KeyError: 3\n+\n+I fixed this bug by redefining the dimension to be the number of simple roots.\n \n Reviewer: Nicolas M. Thi\u00e9ry\n \n```\n",
    "created_at": "2015-03-18T01:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252910",
    "user": "https://trac.sagemath.org/admin/accounts/users/nathanwilliams"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,10 @@
+The ambient space for the root system of type A causes a bug in the method root_poset().  In particular, the following code causes an error.
 
+  sage: RootSystem(['A', 2]).ambient_space().root_poset()
+  Error in lines 2-2
+  KeyError: 3
+
+I fixed this bug by redefining the dimension to be the number of simple roots.
 
 Reviewer: Nicolas M. Thiéry
 
```




---

archive/issue_comments_252911.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+The ambient space for the root system of type A causes a bug in the method root_poset().  In particular, the following code causes an error.\n \n+  sage: RootSystem(['A', 2]).ambient_space().root_poset()\n+  Error in lines 2-2\n+  KeyError: 3\n+\n+I fixed this bug by redefining the dimension to be the number of simple roots.  \"I\" also fixed some formatting conventions.\n \n Reviewer: Nicolas M. Thi\u00e9ry\n \n```\n",
    "created_at": "2015-03-18T01:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252911",
    "user": "https://trac.sagemath.org/admin/accounts/users/nathanwilliams"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,10 @@
+The ambient space for the root system of type A causes a bug in the method root_poset().  In particular, the following code causes an error.
 
+  sage: RootSystem(['A', 2]).ambient_space().root_poset()
+  Error in lines 2-2
+  KeyError: 3
+
+I fixed this bug by redefining the dimension to be the number of simple roots.  "I" also fixed some formatting conventions.
 
 Reviewer: Nicolas M. Thiéry
 
```




---

archive/issue_comments_252912.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,11 @@\n+The ambient space for the root system of type A causes a bug in the method root_poset().  In particular, the following code causes an error.\n \n+\\`\\`\\`\n+  sage: RootSystem(['A', 2]).ambient_space().root_poset()\n+  Error in lines 2-2\n+  KeyError: 3\n+\\`\\`\\`\n+I fixed this bug by redefining the dimension to be the number of simple roots.  \"I\" also fixed some formatting conventions.\n \n Reviewer: Nicolas M. Thi\u00e9ry\n \n```\n",
    "created_at": "2015-03-18T01:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252912",
    "user": "https://github.com/saliola"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,11 @@
+The ambient space for the root system of type A causes a bug in the method root_poset().  In particular, the following code causes an error.
 
+\`\`\`
+  sage: RootSystem(['A', 2]).ambient_space().root_poset()
+  Error in lines 2-2
+  KeyError: 3
+\`\`\`
+I fixed this bug by redefining the dimension to be the number of simple roots.  "I" also fixed some formatting conventions.
 
 Reviewer: Nicolas M. Thiéry
 
```




---

archive/issue_comments_252913.json:
```json
{
    "body": "<a id='comment:7'></a>Looks good to me. All doctests pass.",
    "created_at": "2015-03-18T01:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252913",
    "user": "https://github.com/saliola"
}
```

<a id='comment:7'></a>Looks good to me. All doctests pass.



---

archive/issue_comments_252914.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-18T01:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252914",
    "user": "https://github.com/saliola"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_252915.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2015-03-18T01:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252915",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_252916.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2015-03-18T01:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252916",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_252917.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-18T01:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252917",
    "user": "https://github.com/saliola"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_252918.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-03-18T05:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252918",
    "user": "https://github.com/nthiery"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_252919.json:
```json
{
    "body": "<a id='comment:11'></a>We discussed with Nathan, and the change is not yet enough",
    "created_at": "2015-03-18T05:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252919",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:11'></a>We discussed with Nathan, and the change is not yet enough



---

archive/issue_comments_252920.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-19T23:44:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252921.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-03-19T23:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252921",
    "user": "https://trac.sagemath.org/admin/accounts/users/nathanwilliams"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_252922.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-20T00:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252922",
    "user": "https://github.com/saliola"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_252923.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-21T09:32:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17982#issuecomment-252923",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_051125.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-21T09:32:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17982",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17982#event-51125"
}
```
