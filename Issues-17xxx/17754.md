# Issue 17754: stopgap enhancement

archive/issues_017517.json:
```json
{
    "body": "Karl-Dieter Crisman commented about stopgaps that he would find it inappropriate, if *everytime* sage is restarted, a user will get warnings when using routines which return incorrect results; see discussion at http://trac.sagemath.org/ticket/17183\n\nSo one could imagine following enhancement:\n\n- Show a `stopgap` only once per installation per user per sage-version \n\nIn case a user wants a different behaviour, `stopgap` could be made configurable\ne.g. in a way that a stopgap is shown in case of a hit once every time sage is executed.\n\nAlso I could imagine to warn greenhorns about bugs in CAS by showing at start a message that mathematical software may contain bugs leading to wrong results, with a link to [Mathematically wrong answer](http://trac.sagemath.org/report/79) list and to [bug list](http://trac.sagemath.org/query?status=new&status=needs_work&status=needs_review&status=needs_info&status=positive_review&type=defect&max=0&order=id)\n\n\n**CC:**  @williamstein @roed314 @jbalakrishnan @kcrisman @nathanncohen\n\n**Status:** new\n\nIssue created by migration from https://trac.sagemath.org/ticket/17754\n\n",
    "created_at": "2015-02-09T17:37:54Z",
    "labels": [
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "stopgap enhancement",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17754",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```
Karl-Dieter Crisman commented about stopgaps that he would find it inappropriate, if *everytime* sage is restarted, a user will get warnings when using routines which return incorrect results; see discussion at http://trac.sagemath.org/ticket/17183

So one could imagine following enhancement:

- Show a `stopgap` only once per installation per user per sage-version 

In case a user wants a different behaviour, `stopgap` could be made configurable
e.g. in a way that a stopgap is shown in case of a hit once every time sage is executed.

Also I could imagine to warn greenhorns about bugs in CAS by showing at start a message that mathematical software may contain bugs leading to wrong results, with a link to [Mathematically wrong answer](http://trac.sagemath.org/report/79) list and to [bug list](http://trac.sagemath.org/query?status=new&status=needs_work&status=needs_review&status=needs_info&status=positive_review&type=defect&max=0&order=id)


**CC:**  @williamstein @roed314 @jbalakrishnan @kcrisman @nathanncohen

**Status:** new

Issue created by migration from https://trac.sagemath.org/ticket/17754





---

archive/issue_comments_291797.json:
```json
{
    "body": "<a id='comment:1'></a>\nsome data points:\n\n- In practice I have never once heard of any complaints from anybody about not being able to turn off a stopgap message.  Never -- not once.  So this isn't a problem in practice.\n\n- If abs_integrate really is completely broken and full of bugs, then I would want a stopgap whenever it is first used in a session.  Doesn't that make sense?   And why are we using it if it is so broken -- it should require an explicit flag to use at all.  Sage is supposed to **default** to correct answers unless you otherwise explicitly request otherwise, unlike say PARI which has the opposite design.  \n\n- We could nonetheless add a message to the stopgap output that says: \"to hide this stopgap message so you don't see it anymore, type hide_stopgap('some-hash-of-message').  Then locally for that user (in ~/.sage) we could have a file ~/.sage/hide-stopgaps, with lines corresponding to hashes of stopgap messages.   The stopgap function would load and consult this file before displaying a stopgap message.  This gives each individual user very clear control over the stopgap functionality.   To be even clearer, we could even just put hide_stopgap('name-of-stopgap') or even hide_stop('exact stopgap message'), rather than a hash, so the user can clearly see what they are ignoring by consulting ~/.sage/hide-stopgaps.  I.e., no hashes at all.",
    "created_at": "2015-02-09T18:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17754#issuecomment-291797",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>
some data points:

- In practice I have never once heard of any complaints from anybody about not being able to turn off a stopgap message.  Never -- not once.  So this isn't a problem in practice.

- If abs_integrate really is completely broken and full of bugs, then I would want a stopgap whenever it is first used in a session.  Doesn't that make sense?   And why are we using it if it is so broken -- it should require an explicit flag to use at all.  Sage is supposed to **default** to correct answers unless you otherwise explicitly request otherwise, unlike say PARI which has the opposite design.  

- We could nonetheless add a message to the stopgap output that says: "to hide this stopgap message so you don't see it anymore, type hide_stopgap('some-hash-of-message').  Then locally for that user (in ~/.sage) we could have a file ~/.sage/hide-stopgaps, with lines corresponding to hashes of stopgap messages.   The stopgap function would load and consult this file before displaying a stopgap message.  This gives each individual user very clear control over the stopgap functionality.   To be even clearer, we could even just put hide_stopgap('name-of-stopgap') or even hide_stop('exact stopgap message'), rather than a hash, so the user can clearly see what they are ignoring by consulting ~/.sage/hide-stopgaps.  I.e., no hashes at all.



---

archive/issue_comments_291798.json:
```json
{
    "body": "<a id='comment:2'></a>\n`@`William\n\nGee, calm down ;-). This is a half-baked enhancement suggestion, not criticism.\n.\n\n> add hide_stopgap('some-hash-of-message')\n\n\nThat would be fine right now. At a later time point when the stopgap list will be huge \n(no worries, I will work on that soon *g ) that might be no longer sufficient.\n.\n\n>In practice I have never once heard of any complaints from anybody about not being able to turn off a stopgap message. Never -- not once.\n\n\nPeople usually do not complain, they work around issues. We have to acitvely ask for reports \n(as I had e.g. to for [Singular bug 694](http://www.singular.uni-kl.de:8002/trac/ticket/694) by Dino Lorenzini; or for #17697 - my office colleague dit hit it,...) \n.\n\n>Never -- not once.  So this isn't a problem in practice. \n\nnow once : #17183 *g. If a feature is not perfect, users might not accept it (reread #17183). The question here is, if we should care or not.\n.\n>If abs_integrate really is completely broken and full of bugs, then I would want a stopgap whenever it is first used in a session. Doesn't that make sense?\n\n\nAbsolutely, that makes sense... for most of us. Why not add some tolerance for users/developers with a different point of view?",
    "created_at": "2015-02-09T18:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17754#issuecomment-291798",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

<a id='comment:2'></a>
`@`William

Gee, calm down ;-). This is a half-baked enhancement suggestion, not criticism.
.

> add hide_stopgap('some-hash-of-message')


That would be fine right now. At a later time point when the stopgap list will be huge 
(no worries, I will work on that soon *g ) that might be no longer sufficient.
.

>In practice I have never once heard of any complaints from anybody about not being able to turn off a stopgap message. Never -- not once.


People usually do not complain, they work around issues. We have to acitvely ask for reports 
(as I had e.g. to for [Singular bug 694](http://www.singular.uni-kl.de:8002/trac/ticket/694) by Dino Lorenzini; or for #17697 - my office colleague dit hit it,...) 
.

>Never -- not once.  So this isn't a problem in practice. 

now once : #17183 *g. If a feature is not perfect, users might not accept it (reread #17183). The question here is, if we should care or not.
.
>If abs_integrate really is completely broken and full of bugs, then I would want a stopgap whenever it is first used in a session. Doesn't that make sense?


Absolutely, that makes sense... for most of us. Why not add some tolerance for users/developers with a different point of view?



---

archive/issue_comments_291799.json:
```json
{
    "body": "Replying to [ticket:17754 jakobkroeker]:\n>    - Show a `stopgap` only once per installation per user per sage-version \n\n\nThat would be pretty much pointless. It's so easy to miss a warning the first time. I think it would be essentially equivalent to removing stopgaps completely.",
    "created_at": "2015-02-09T18:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17754#issuecomment-291799",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:17754 jakobkroeker]:
>    - Show a `stopgap` only once per installation per user per sage-version 


That would be pretty much pointless. It's so easy to miss a warning the first time. I think it would be essentially equivalent to removing stopgaps completely.



---

archive/issue_comments_291800.json:
```json
{
    "body": "<a id='comment:4'></a>\nOn a more technical note, for the Notebook you certainly don't want to do this. Showing a warning once would mean that only one notebook of one user would see the message.",
    "created_at": "2015-02-09T19:07:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17754#issuecomment-291800",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
On a more technical note, for the Notebook you certainly don't want to do this. Showing a warning once would mean that only one notebook of one user would see the message.



---

archive/issue_comments_291801.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [jakobkroeker](#comment%3A2):\n> Gee, calm down ;-). This is a half-baked enhancement suggestion, not criticism.\n> .\n\n\nSorry -- I worry a huge amount about how to effectively decide to spend time.  Mistakenly spending time on things that aren't big problems is a huge danger, so I'm particularly careful about it.\n\nI'm worried not due to criticism but because this suggestion is dangerous as is... as Jereon says.\n\n> > add hide_stopgap('some-hash-of-message')\n\n> \n> That would be fine right now. At a later time point when the stopgap list will be huge \n> (no worries, I will work on that soon *g ) that might be no longer sufficient.\n> .\n> \n> >In practice I have never once heard of any complaints from anybody about not being able to turn off a stopgap message. Never -- not once.\n\n> \n> People usually do not complain, they work around issues. We have to acitvely ask for reports \n> (as I had e.g. to for [Singular bug 694](http://www.singular.uni-kl.de:8002/trac/ticket/694) by Dino Lorenzini; or for #17697 - my office colleague dit hit it,...) \n> .\n\n\nPeople complain a lot to me...\n\n> Absolutely, that makes sense... for most of us. Why not add some tolerance for users/developers with a different point of view?\n\n\nI agree; that's why I also included some ideas for how to do this.   \n\nI think my suggested approach addresses jdmeyer's very valid concerns (which I also have).   Instead of showing the message once, make the user have to very explicitly turn off the warning. \n\nThat said, I don't think this should be a high priority.\n\n -- William",
    "created_at": "2015-02-09T19:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17754#issuecomment-291801",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:5'></a>
Replying to [jakobkroeker](#comment%3A2):
> Gee, calm down ;-). This is a half-baked enhancement suggestion, not criticism.
> .


Sorry -- I worry a huge amount about how to effectively decide to spend time.  Mistakenly spending time on things that aren't big problems is a huge danger, so I'm particularly careful about it.

I'm worried not due to criticism but because this suggestion is dangerous as is... as Jereon says.

> > add hide_stopgap('some-hash-of-message')

> 
> That would be fine right now. At a later time point when the stopgap list will be huge 
> (no worries, I will work on that soon *g ) that might be no longer sufficient.
> .
> 
> >In practice I have never once heard of any complaints from anybody about not being able to turn off a stopgap message. Never -- not once.

> 
> People usually do not complain, they work around issues. We have to acitvely ask for reports 
> (as I had e.g. to for [Singular bug 694](http://www.singular.uni-kl.de:8002/trac/ticket/694) by Dino Lorenzini; or for #17697 - my office colleague dit hit it,...) 
> .


People complain a lot to me...

> Absolutely, that makes sense... for most of us. Why not add some tolerance for users/developers with a different point of view?


I agree; that's why I also included some ideas for how to do this.   

I think my suggested approach addresses jdmeyer's very valid concerns (which I also have).   Instead of showing the message once, make the user have to very explicitly turn off the warning. 

That said, I don't think this should be a high priority.

 -- William



---

archive/issue_comments_291802.json:
```json
{
    "body": "<a id='comment:6'></a>\n> That said, I don't think this should be a high priority.\n\n\nIndeed. I opened the ticket as 'minor'.",
    "created_at": "2015-02-09T19:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17754#issuecomment-291802",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

<a id='comment:6'></a>
> That said, I don't think this should be a high priority.


Indeed. I opened the ticket as 'minor'.



---

archive/issue_comments_291803.json:
```json
{
    "body": "<a id='comment:7'></a>\nFor the record, if I knew a way to do this easily for `abs_integrate` I would do it today.  See #12371 - maybe [comment:11](#comment%3A11):ticket:12371 is the closest to something we could do.  The problem is that it gives a lot of very good enhancements.\n\nThat is not really a comment about this ticket, but now you know where to look for that.",
    "created_at": "2015-02-09T22:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17754#issuecomment-291803",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'></a>
For the record, if I knew a way to do this easily for `abs_integrate` I would do it today.  See #12371 - maybe [comment:11](#comment%3A11):ticket:12371 is the closest to something we could do.  The problem is that it gives a lot of very good enhancements.

That is not really a comment about this ticket, but now you know where to look for that.



---

archive/issue_comments_291804.json:
```json
{
    "body": "<a id='comment:8'></a>\n> See #12371\n\n\ntypo? I guess it should be #12731",
    "created_at": "2015-02-09T23:53:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17754#issuecomment-291804",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

<a id='comment:8'></a>
> See #12371


typo? I guess it should be #12731



---

archive/issue_comments_291805.json:
```json
{
    "body": "<a id='comment:9'></a>\n> > See #12371\n\n> typo? I guess it should be #12731\nYes, I was in a big hurry to just get that comment off, sorry.  So the comment [comment:11:ticket:12731 here] as well.",
    "created_at": "2015-02-10T01:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17754#issuecomment-291805",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:9'></a>
> > See #12371

> typo? I guess it should be #12731
Yes, I was in a big hurry to just get that comment off, sorry.  So the comment [comment:11:ticket:12731 here] as well.
