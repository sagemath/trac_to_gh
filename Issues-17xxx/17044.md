# Issue 17044: fix pexpect interfaces with a system-wide sage install

archive/issues_016807.json:
```json
{
    "assignees": [],
    "body": "If you install Sage system-wide (e.g., in /usr/local) for all users on your system, most of the pexpect interfaces for optional packages will be completely massively broken.  For example, on a system which doesn't have scilab installed:\n\n```\nsage: scilab('2+3')\n---------------------------------------------------------------------------\nOSError                                   Traceback (most recent call last)\n<ipython-input-1-c7d52e4ba13e> in <module>()\n----> 1 scilab('2+3')\n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, x, name)\n    197 \n    198         if isinstance(x, basestring):\n--> 199             return cls(self, x, name=name)\n    200         try:\n    201             return self._coerce_from_special_method(x)\n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in __init__(self, parent, value, is_name, name)\n   1310         else:\n   1311             try:\n-> 1312                 self._name = parent._create(value, name=name)\n   1313             # Convert ValueError and RuntimeError to TypeError for\n   1314             # coercion to work properly.\n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in _create(self, value, name)\n    387     def _create(self, value, name=None):\n    388         name = self._next_var_name() if name is None else name\n--> 389         self.set(name, value)\n    390         return name\n    391 \n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/scilab.pyc in set(self, var, value)\n    307         \"\"\"\n    308         cmd = '%s=%s;'%(var,value)\n--> 309         out = self.eval(cmd)\n    310         if out.find(\"error\") != -1:\n    311             raise TypeError(\"Error executing code in Scilab\\nCODE:\\n\\t%s\\nScilab ERROR:\\n\\t%s\"%(cmd, out))\n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/scilab.pyc in eval(self, command, *args, **kwds)\n    274             'd  =\\n \\n    44.'\n    275         \"\"\"\n--> 276         s = Expect.eval(self, command, **kwds).replace(\"\\x1b[?1l\\x1b>\",\"\").strip()\n    277         return s\n    278 \n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)                                                                                                                                                                       \n   1227                 elif split_lines:\n   1228                     return '\\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)\n-> 1229                                         for L in code.split('\\n') if L != ''])\n   1230                 else:                                                                                                                                           \n   1231                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)\n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed)\n    821         try:\n    822             if self._expect is None:\n--> 823                 self._start()\n    824             E = self._expect\n    825             try:\n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/scilab.pyc in _start(self)\n    261             sage: scilab._start()                       # optional - scilab\n    262         \"\"\"\n--> 263         Expect._start(self)\n    264         self.eval(\"mode(0)\")\n    265 \n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in _start(self, alt_message, block_during_init)\n    389         current_path = os.path.abspath('.')\n    390         dir = self.__path\n--> 391         sage_makedirs(dir)\n    392         os.chdir(dir)\n    393 \n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/misc/misc.pyc in sage_makedirs(dir)\n     79     \"\"\"\n     80     try:\n---> 81         os.makedirs(dir)\n     82     except OSError:\n     83         if not os.path.isdir(dir):\n\n/usr/local/src/sage-git/local/lib/python/os.pyc in makedirs(name, mode)\n    148     if head and tail and not path.exists(head):\n    149         try:\n--> 150             makedirs(head, mode)\n    151         except OSError, e:\n    152             # be happy if someone already created the path\n\n/usr/local/src/sage-git/local/lib/python/os.pyc in makedirs(name, mode)\n    155         if tail == curdir:           # xxx/newdir/. exists if xxx/newdir exists\n    156             return\n--> 157     mkdir(name, mode)\n    158 \n    159 def removedirs(name):\n\nOSError: [Errno 13] Permission denied: '/usr/local/src/sage-git/local/share/sage/ext/scilab'\n```\n\nCC:  @novoselt\n\nBranch/Commit: **[`00fb8e9`](https://github.com/sagemath/sagetrac-mirror/commit/00fb8e97511ac881279cf5bc5c59eb7d85407126)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Jeroen Demeyer**\n\nComponent: **interfaces**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17044_\n\n",
    "closed_at": "2014-10-02T16:21:49Z",
    "created_at": "2014-09-25T23:34:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "fix pexpect interfaces with a system-wide sage install",
    "type": "issue",
    "updated_at": "2014-10-02T16:21:49Z",
    "url": "https://github.com/sagemath/sage/issues/17044",
    "user": "https://github.com/williamstein"
}
```
If you install Sage system-wide (e.g., in /usr/local) for all users on your system, most of the pexpect interfaces for optional packages will be completely massively broken.  For example, on a system which doesn't have scilab installed:

```
sage: scilab('2+3')
---------------------------------------------------------------------------
OSError                                   Traceback (most recent call last)
<ipython-input-1-c7d52e4ba13e> in <module>()
----> 1 scilab('2+3')

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, x, name)
    197 
    198         if isinstance(x, basestring):
--> 199             return cls(self, x, name=name)
    200         try:
    201             return self._coerce_from_special_method(x)

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in __init__(self, parent, value, is_name, name)
   1310         else:
   1311             try:
-> 1312                 self._name = parent._create(value, name=name)
   1313             # Convert ValueError and RuntimeError to TypeError for
   1314             # coercion to work properly.

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in _create(self, value, name)
    387     def _create(self, value, name=None):
    388         name = self._next_var_name() if name is None else name
--> 389         self.set(name, value)
    390         return name
    391 

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/scilab.pyc in set(self, var, value)
    307         """
    308         cmd = '%s=%s;'%(var,value)
--> 309         out = self.eval(cmd)
    310         if out.find("error") != -1:
    311             raise TypeError("Error executing code in Scilab\nCODE:\n\t%s\nScilab ERROR:\n\t%s"%(cmd, out))

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/scilab.pyc in eval(self, command, *args, **kwds)
    274             'd  =\n \n    44.'
    275         """
--> 276         s = Expect.eval(self, command, **kwds).replace("\x1b[?1l\x1b>","").strip()
    277         return s
    278 

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)                                                                                                                                                                       
   1227                 elif split_lines:
   1228                     return '\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)
-> 1229                                         for L in code.split('\n') if L != ''])
   1230                 else:                                                                                                                                           
   1231                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed)
    821         try:
    822             if self._expect is None:
--> 823                 self._start()
    824             E = self._expect
    825             try:

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/scilab.pyc in _start(self)
    261             sage: scilab._start()                       # optional - scilab
    262         """
--> 263         Expect._start(self)
    264         self.eval("mode(0)")
    265 

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in _start(self, alt_message, block_during_init)
    389         current_path = os.path.abspath('.')
    390         dir = self.__path
--> 391         sage_makedirs(dir)
    392         os.chdir(dir)
    393 

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/misc/misc.pyc in sage_makedirs(dir)
     79     """
     80     try:
---> 81         os.makedirs(dir)
     82     except OSError:
     83         if not os.path.isdir(dir):

/usr/local/src/sage-git/local/lib/python/os.pyc in makedirs(name, mode)
    148     if head and tail and not path.exists(head):
    149         try:
--> 150             makedirs(head, mode)
    151         except OSError, e:
    152             # be happy if someone already created the path

/usr/local/src/sage-git/local/lib/python/os.pyc in makedirs(name, mode)
    155         if tail == curdir:           # xxx/newdir/. exists if xxx/newdir exists
    156             return
--> 157     mkdir(name, mode)
    158 
    159 def removedirs(name):

OSError: [Errno 13] Permission denied: '/usr/local/src/sage-git/local/share/sage/ext/scilab'
```

CC:  @novoselt

Branch/Commit: **[`00fb8e9`](https://github.com/sagemath/sagetrac-mirror/commit/00fb8e97511ac881279cf5bc5c59eb7d85407126)**

Reviewer: **Frédéric Chapoton**

Author: **Jeroen Demeyer**

Component: **interfaces**

_Issue created by migration from https://trac.sagemath.org/ticket/17044_





---

archive/issue_events_241345.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2014-09-25T23:34:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241345"
}
```



---

archive/issue_events_241346.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2014-09-25T23:34:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241346"
}
```



---

archive/issue_events_241347.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2014-09-25T23:34:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241347"
}
```



---

archive/issue_events_241348.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2014-09-25T23:34:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241348"
}
```



---

archive/issue_comments_225716.json:
```json
{
    "body": "Commit: **[`33e6ec3`](https://github.com/sagemath/sagetrac-mirror/commit/33e6ec3d8d907d3cc04cd90a60db29d414c64a6b)**",
    "created_at": "2014-09-26T07:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225716",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`33e6ec3`](https://github.com/sagemath/sagetrac-mirror/commit/33e6ec3d8d907d3cc04cd90a60db29d414c64a6b)**



---

archive/issue_comments_225717.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2014-09-26T07:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225717",
    "user": "https://github.com/fchapoton"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_comments_225718.json:
```json
{
    "body": "Branch: **[u/chapoton/17044](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17044)**",
    "created_at": "2014-09-26T07:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225718",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/17044](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17044)**



---

archive/issue_comments_225719.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nDone\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33e6ec3d8d907d3cc04cd90a60db29d414c64a6b\"><code>33e6ec3</code></a></td><td><code>trac #17044 fix to pexpect interface, as required by wstein</code></td></tr></table>\n",
    "created_at": "2014-09-26T07:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225719",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">comment:1</div>

Done

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33e6ec3d8d907d3cc04cd90a60db29d414c64a6b"><code>33e6ec3</code></a></td><td><code>trac #17044 fix to pexpect interface, as required by wstein</code></td></tr></table>




---

archive/issue_events_241349.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-09-26T07:38:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241349"
}
```



---

archive/issue_comments_225720.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI would like to understand the problem better. So William, could you please\n1) say which version of Sage this refers to\n2) describe the actual input and error you are getting\n3) if any doctests fail in your setup (without this patch)\n\nI am asking because you're certainly not the first person ever to install Sage system-wide but it is the first time I see this problem reported. So the problem is probably more subtle than you think.",
    "created_at": "2014-09-26T07:52:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225720",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

I would like to understand the problem better. So William, could you please
1) say which version of Sage this refers to
2) describe the actual input and error you are getting
3) if any doctests fail in your setup (without this patch)

I am asking because you're certainly not the first person ever to install Sage system-wide but it is the first time I see this problem reported. So the problem is probably more subtle than you think.



---

archive/issue_comments_225721.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@jdemeyer](#comment:2):\n> I would like to understand the problem better. So William, could you please\n> 1) say which version of Sage this refers to\n\nAt least any Sage-6.x.\n\n> 2) describe the actual input and error you are getting\n\nInstall Sage system-wide, then try to do anything with *some* of the pexpect-based interfaces as a normal user who doesn't own the sage install, especially ones that use optional software.  E.g., \n\n sage: scilab('2+3')\n\n> 3) if any doctests fail in your setup (without this patch)\n\nNope.  We don't do doctesting that tests permissions, since doctesting is always run as the user that owns the Sage install.  \n\n> \n> I am asking because you're certainly not the first person ever to install Sage system-wide but it is the first time I see this problem reported. \n\nThis problem has popped on the mailing lists, and basically got ignored, probably because for the most part our Sage developers usually own their own Sage installs.   However, with SageMathCloud, which has now 7000 *active users* per week all using a system-wide Sage install, this problem comes up more.  I had dome some horrible hacks to try to get around it, e.g., pointing SAGE_ROOT/local/share at something world writeable, but even this fails miserable if *two* regular users use the same interface -- one creates the user directory as their own, and the other then can't write to it. \n\nI think much of this boils down to a stupid coding mistake (surely made by me) involving `=\"\"` versus `=None`.\n\n> So the problem is probably more subtle than you think.\n\nIt probably is.  I wouldn't be surprised at all if this small patch is not the whole story, and there are similar bugs still lurking, since any classes that derive from the base Expect class (in expect.py) could cause their own related trouble...",
    "created_at": "2014-09-26T15:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225721",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@jdemeyer](#comment:2):
> I would like to understand the problem better. So William, could you please
> 1) say which version of Sage this refers to

At least any Sage-6.x.

> 2) describe the actual input and error you are getting

Install Sage system-wide, then try to do anything with *some* of the pexpect-based interfaces as a normal user who doesn't own the sage install, especially ones that use optional software.  E.g., 

 sage: scilab('2+3')

> 3) if any doctests fail in your setup (without this patch)

Nope.  We don't do doctesting that tests permissions, since doctesting is always run as the user that owns the Sage install.  

> 
> I am asking because you're certainly not the first person ever to install Sage system-wide but it is the first time I see this problem reported. 

This problem has popped on the mailing lists, and basically got ignored, probably because for the most part our Sage developers usually own their own Sage installs.   However, with SageMathCloud, which has now 7000 *active users* per week all using a system-wide Sage install, this problem comes up more.  I had dome some horrible hacks to try to get around it, e.g., pointing SAGE_ROOT/local/share at something world writeable, but even this fails miserable if *two* regular users use the same interface -- one creates the user directory as their own, and the other then can't write to it. 

I think much of this boils down to a stupid coding mistake (surely made by me) involving `=""` versus `=None`.

> So the problem is probably more subtle than you think.

It probably is.  I wouldn't be surprised at all if this small patch is not the whole story, and there are similar bugs still lurking, since any classes that derive from the base Expect class (in expect.py) could cause their own related trouble...



---

archive/issue_comments_225722.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@williamstein](#comment:3):\n> > 3) if any doctests fail in your setup (without this patch)\n\n> \n> Nope.  We don't do doctesting that tests permissions, since doctesting is always run as the user that owns the Sage install.  \n\nI meant: do any doctests fail when running doctests as the user who *doesn't* own the Sage install? That should work (see #5155), although I don't know if this is still tested on a regular basis (I did it as part of my release management scripts, I have no idea if Volker does it).",
    "created_at": "2014-09-26T16:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225722",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@williamstein](#comment:3):
> > 3) if any doctests fail in your setup (without this patch)

> 
> Nope.  We don't do doctesting that tests permissions, since doctesting is always run as the user that owns the Sage install.  

I meant: do any doctests fail when running doctests as the user who *doesn't* own the Sage install? That should work (see #5155), although I don't know if this is still tested on a regular basis (I did it as part of my release management scripts, I have no idea if Volker does it).



---

archive/issue_comments_225723.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,28 +1,95 @@\n-If you install Sage system-wide (e.g., in /usr/local) for all users on your system, most of the pexpect interfaces will be completely massively broken.  The bug is big, but the fix is pretty trivial:\n+If you install Sage system-wide (e.g., in /usr/local) for all users on your system, most of the pexpect interfaces for optional packages will be completely massively broken.  For example, on a system which doesn't have scilab installed:\n \n ```\n-diff --git a/src/sage/interfaces/expect.py b/src/sage/interfaces/expect.py\n-index 4e47d54..ef8a4e1 100644\n---- a/src/sage/interfaces/expect.py\n-+++ b/src/sage/interfaces/expect.py\n-@@ -127,7 +127,7 @@ class Expect(Interface):\n-     \"\"\"\n-     def __init__(self, name, prompt, command=None, server=None, server_tmpdir=None,\n-                  ulimit = None, maxread=100000,\n--                 script_subdirectory=\"\", restart_on_ctrlc=False,\n-+                 script_subdirectory=None, restart_on_ctrlc=False,\n-                  verbose_start=False, init_code=[], max_startup_time=None,\n-                  logfile = None, eval_using_file_cutoff=0,\n-                  do_cleaner=True, remote_cleaner=False, path=None,\n+sage: scilab('2+3')\n+---------------------------------------------------------------------------\n+OSError                                   Traceback (most recent call last)\n+<ipython-input-1-c7d52e4ba13e> in <module>()\n+----> 1 scilab('2+3')\n+\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, x, name)\n+    197 \n+    198         if isinstance(x, basestring):\n+--> 199             return cls(self, x, name=name)\n+    200         try:\n+    201             return self._coerce_from_special_method(x)\n+\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in __init__(self, parent, value, is_name, name)\n+   1310         else:\n+   1311             try:\n+-> 1312                 self._name = parent._create(value, name=name)\n+   1313             # Convert ValueError and RuntimeError to TypeError for\n+   1314             # coercion to work properly.\n+\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in _create(self, value, name)\n+    387     def _create(self, value, name=None):\n+    388         name = self._next_var_name() if name is None else name\n+--> 389         self.set(name, value)\n+    390         return name\n+    391 \n+\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/scilab.pyc in set(self, var, value)\n+    307         \"\"\"\n+    308         cmd = '%s=%s;'%(var,value)\n+--> 309         out = self.eval(cmd)\n+    310         if out.find(\"error\") != -1:\n+    311             raise TypeError(\"Error executing code in Scilab\\nCODE:\\n\\t%s\\nScilab ERROR:\\n\\t%s\"%(cmd, out))\n+\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/scilab.pyc in eval(self, command, *args, **kwds)\n+    274             'd  =\\n \\n    44.'\n+    275         \"\"\"\n+--> 276         s = Expect.eval(self, command, **kwds).replace(\"\\x1b[?1l\\x1b>\",\"\").strip()\n+    277         return s\n+    278 \n+\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)                                                                                                                                                                       \n+   1227                 elif split_lines:\n+   1228                     return '\\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)\n+-> 1229                                         for L in code.split('\\n') if L != ''])\n+   1230                 else:                                                                                                                                           \n+   1231                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)\n+\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed)\n+    821         try:\n+    822             if self._expect is None:\n+--> 823                 self._start()\n+    824             E = self._expect\n+    825             try:\n+\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/scilab.pyc in _start(self)\n+    261             sage: scilab._start()                       # optional - scilab\n+    262         \"\"\"\n+--> 263         Expect._start(self)\n+    264         self.eval(\"mode(0)\")\n+    265 \n+\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in _start(self, alt_message, block_during_init)\n+    389         current_path = os.path.abspath('.')\n+    390         dir = self.__path\n+--> 391         sage_makedirs(dir)\n+    392         os.chdir(dir)\n+    393 \n+\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/misc/misc.pyc in sage_makedirs(dir)\n+     79     \"\"\"\n+     80     try:\n+---> 81         os.makedirs(dir)\n+     82     except OSError:\n+     83         if not os.path.isdir(dir):\n+\n+/usr/local/src/sage-git/local/lib/python/os.pyc in makedirs(name, mode)\n+    148     if head and tail and not path.exists(head):\n+    149         try:\n+--> 150             makedirs(head, mode)\n+    151         except OSError, e:\n+    152             # be happy if someone already created the path\n+\n+/usr/local/src/sage-git/local/lib/python/os.pyc in makedirs(name, mode)\n+    155         if tail == curdir:           # xxx/newdir/. exists if xxx/newdir exists\n+    156             return\n+--> 157     mkdir(name, mode)\n+    158 \n+    159 def removedirs(name):\n+\n+OSError: [Errno 13] Permission denied: '/usr/local/src/sage-git/local/share/sage/ext/scilab'\n ```\n-\n-The problem is that elsewhere in the code there is an \n-\n-```\n-if script_subdirectory is None\n-```\n-rather than a\n-\n-```\n-if script_subdirectory\n-```\n``````\n",
    "created_at": "2014-09-26T16:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225723",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,28 +1,95 @@
-If you install Sage system-wide (e.g., in /usr/local) for all users on your system, most of the pexpect interfaces will be completely massively broken.  The bug is big, but the fix is pretty trivial:
+If you install Sage system-wide (e.g., in /usr/local) for all users on your system, most of the pexpect interfaces for optional packages will be completely massively broken.  For example, on a system which doesn't have scilab installed:
 
 ```
-diff --git a/src/sage/interfaces/expect.py b/src/sage/interfaces/expect.py
-index 4e47d54..ef8a4e1 100644
---- a/src/sage/interfaces/expect.py
-+++ b/src/sage/interfaces/expect.py
-@@ -127,7 +127,7 @@ class Expect(Interface):
-     """
-     def __init__(self, name, prompt, command=None, server=None, server_tmpdir=None,
-                  ulimit = None, maxread=100000,
--                 script_subdirectory="", restart_on_ctrlc=False,
-+                 script_subdirectory=None, restart_on_ctrlc=False,
-                  verbose_start=False, init_code=[], max_startup_time=None,
-                  logfile = None, eval_using_file_cutoff=0,
-                  do_cleaner=True, remote_cleaner=False, path=None,
+sage: scilab('2+3')
+---------------------------------------------------------------------------
+OSError                                   Traceback (most recent call last)
+<ipython-input-1-c7d52e4ba13e> in <module>()
+----> 1 scilab('2+3')
+
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, x, name)
+    197 
+    198         if isinstance(x, basestring):
+--> 199             return cls(self, x, name=name)
+    200         try:
+    201             return self._coerce_from_special_method(x)
+
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in __init__(self, parent, value, is_name, name)
+   1310         else:
+   1311             try:
+-> 1312                 self._name = parent._create(value, name=name)
+   1313             # Convert ValueError and RuntimeError to TypeError for
+   1314             # coercion to work properly.
+
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in _create(self, value, name)
+    387     def _create(self, value, name=None):
+    388         name = self._next_var_name() if name is None else name
+--> 389         self.set(name, value)
+    390         return name
+    391 
+
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/scilab.pyc in set(self, var, value)
+    307         """
+    308         cmd = '%s=%s;'%(var,value)
+--> 309         out = self.eval(cmd)
+    310         if out.find("error") != -1:
+    311             raise TypeError("Error executing code in Scilab\nCODE:\n\t%s\nScilab ERROR:\n\t%s"%(cmd, out))
+
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/scilab.pyc in eval(self, command, *args, **kwds)
+    274             'd  =\n \n    44.'
+    275         """
+--> 276         s = Expect.eval(self, command, **kwds).replace("\x1b[?1l\x1b>","").strip()
+    277         return s
+    278 
+
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)                                                                                                                                                                       
+   1227                 elif split_lines:
+   1228                     return '\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)
+-> 1229                                         for L in code.split('\n') if L != ''])
+   1230                 else:                                                                                                                                           
+   1231                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)
+
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed)
+    821         try:
+    822             if self._expect is None:
+--> 823                 self._start()
+    824             E = self._expect
+    825             try:
+
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/scilab.pyc in _start(self)
+    261             sage: scilab._start()                       # optional - scilab
+    262         """
+--> 263         Expect._start(self)
+    264         self.eval("mode(0)")
+    265 
+
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in _start(self, alt_message, block_during_init)
+    389         current_path = os.path.abspath('.')
+    390         dir = self.__path
+--> 391         sage_makedirs(dir)
+    392         os.chdir(dir)
+    393 
+
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/misc/misc.pyc in sage_makedirs(dir)
+     79     """
+     80     try:
+---> 81         os.makedirs(dir)
+     82     except OSError:
+     83         if not os.path.isdir(dir):
+
+/usr/local/src/sage-git/local/lib/python/os.pyc in makedirs(name, mode)
+    148     if head and tail and not path.exists(head):
+    149         try:
+--> 150             makedirs(head, mode)
+    151         except OSError, e:
+    152             # be happy if someone already created the path
+
+/usr/local/src/sage-git/local/lib/python/os.pyc in makedirs(name, mode)
+    155         if tail == curdir:           # xxx/newdir/. exists if xxx/newdir exists
+    156             return
+--> 157     mkdir(name, mode)
+    158 
+    159 def removedirs(name):
+
+OSError: [Errno 13] Permission denied: '/usr/local/src/sage-git/local/share/sage/ext/scilab'
 ```
-
-The problem is that elsewhere in the code there is an 
-
-```
-if script_subdirectory is None
-```
-rather than a
-
-```
-if script_subdirectory
-```
``````




---

archive/issue_comments_225724.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nPatch doesn't solve the issue.",
    "created_at": "2014-09-26T18:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225724",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Patch doesn't solve the issue.



---

archive/issue_events_241350.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-26T18:15:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241350"
}
```



---

archive/issue_events_241351.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-26T18:15:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241351"
}
```



---

archive/issue_comments_225725.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2014-09-26T18:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225725",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_225726.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nMy proposal to fix this ticket would be to get rid completely of the \"script_subdirectory\" argument, it's a broken design.",
    "created_at": "2014-09-26T18:20:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225726",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

My proposal to fix this ticket would be to get rid completely of the "script_subdirectory" argument, it's a broken design.



---

archive/issue_comments_225727.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOK, perhaps not get rid of \"script_directory\" completely, but only use it for scripts which are known to be shipped with Sage, e.g. some PARI/GP scripts.",
    "created_at": "2014-09-26T18:26:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225727",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

OK, perhaps not get rid of "script_directory" completely, but only use it for scripts which are known to be shipped with Sage, e.g. some PARI/GP scripts.



---

archive/issue_comments_225728.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2014-09-26T18:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225728",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Jeroen Demeyer** to **Frédéric Chapoton**



---

archive/issue_comments_225729.json:
```json
{
    "body": "Changed author from **Fr\u00e9d\u00e9ric Chapoton** to **Jeroen Demeyer**",
    "created_at": "2014-09-26T18:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225729",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Frédéric Chapoton** to **Jeroen Demeyer**



---

archive/issue_comments_225730.json:
```json
{
    "body": "Changed branch from **[u/chapoton/17044](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17044)** to **[u/jdemeyer/ticket/17044](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17044)**",
    "created_at": "2014-09-26T19:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225730",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/chapoton/17044](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17044)** to **[u/jdemeyer/ticket/17044](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17044)**



---

archive/issue_comments_225731.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85f489ceac24da6e79484ca2d4abc8d6c47ce801\"><code>85f489c</code></a></td><td><code>Only use script_directory for existing directories</code></td></tr></table>\n",
    "created_at": "2014-09-26T19:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225731",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85f489ceac24da6e79484ca2d4abc8d6c47ce801"><code>85f489c</code></a></td><td><code>Only use script_directory for existing directories</code></td></tr></table>




---

archive/issue_comments_225732.json:
```json
{
    "body": "Changed commit from **[`33e6ec3`](https://github.com/sagemath/sagetrac-mirror/commit/33e6ec3d8d907d3cc04cd90a60db29d414c64a6b)** to **[`85f489c`](https://github.com/sagemath/sagetrac-mirror/commit/85f489ceac24da6e79484ca2d4abc8d6c47ce801)**",
    "created_at": "2014-09-26T19:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225732",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`33e6ec3`](https://github.com/sagemath/sagetrac-mirror/commit/33e6ec3d8d907d3cc04cd90a60db29d414c64a6b)** to **[`85f489c`](https://github.com/sagemath/sagetrac-mirror/commit/85f489ceac24da6e79484ca2d4abc8d6c47ce801)**



---

archive/issue_events_241352.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-26T19:50:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241352"
}
```



---

archive/issue_events_241353.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-26T19:50:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241353"
}
```



---

archive/issue_comments_225733.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThis fixes the bug, but I still have to run doctests.",
    "created_at": "2014-09-26T19:50:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225733",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

This fixes the bug, but I still have to run doctests.



---

archive/issue_events_241354.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-27T09:53:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241354"
}
```



---

archive/issue_events_241355.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-27T09:53:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241355"
}
```



---

archive/issue_comments_225734.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nDoctests pass.",
    "created_at": "2014-09-27T09:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225734",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Doctests pass.



---

archive/issue_events_241356.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-27T09:53:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241356"
}
```



---

archive/issue_events_241357.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-27T09:53:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241357"
}
```



---

archive/issue_comments_225735.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/17044](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17044)** to **[public/ticket/17044](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17044)**",
    "created_at": "2014-09-30T15:15:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225735",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/jdemeyer/ticket/17044](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17044)** to **[public/ticket/17044](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17044)**



---

archive/issue_comments_225736.json:
```json
{
    "body": "Changed commit from **[`85f489c`](https://github.com/sagemath/sagetrac-mirror/commit/85f489ceac24da6e79484ca2d4abc8d6c47ce801)** to none",
    "created_at": "2014-09-30T15:15:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225736",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`85f489c`](https://github.com/sagemath/sagetrac-mirror/commit/85f489ceac24da6e79484ca2d4abc8d6c47ce801)** to none



---

archive/issue_comments_225737.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHello,\n\nI am not sure at all to be competent to review this ticket. As far as I can tell, this looks good.\n\nI allowed myself to remove a few unused imports (except one which is in fact used in an indirect way) and one unused variable.\n\nJeroen, you can set this to positive review if you want.",
    "created_at": "2014-09-30T15:15:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225737",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:16" align="right">comment:16</div>

Hello,

I am not sure at all to be competent to review this ticket. As far as I can tell, this looks good.

I allowed myself to remove a few unused imports (except one which is in fact used in an indirect way) and one unused variable.

Jeroen, you can set this to positive review if you want.



---

archive/issue_comments_225738.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33e6ec3d8d907d3cc04cd90a60db29d414c64a6b\"><code>33e6ec3</code></a></td><td><code>trac #17044 fix to pexpect interface, as required by wstein</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85f489ceac24da6e79484ca2d4abc8d6c47ce801\"><code>85f489c</code></a></td><td><code>Only use script_directory for existing directories</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f76959772aca6edf852abe8a02d81eb9eddba51\"><code>3f76959</code></a></td><td><code>Merge with 6.4.beta4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99651821dae8bed7b220c9cd2d517df90bae5921\"><code>9965182</code></a></td><td><code>trac #17004 remove a few unused imports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00fb8e97511ac881279cf5bc5c59eb7d85407126\"><code>00fb8e9</code></a></td><td><code>trac #17004 putting one import back</code></td></tr></table>\n",
    "created_at": "2014-09-30T15:16:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225738",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33e6ec3d8d907d3cc04cd90a60db29d414c64a6b"><code>33e6ec3</code></a></td><td><code>trac #17044 fix to pexpect interface, as required by wstein</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85f489ceac24da6e79484ca2d4abc8d6c47ce801"><code>85f489c</code></a></td><td><code>Only use script_directory for existing directories</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f76959772aca6edf852abe8a02d81eb9eddba51"><code>3f76959</code></a></td><td><code>Merge with 6.4.beta4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99651821dae8bed7b220c9cd2d517df90bae5921"><code>9965182</code></a></td><td><code>trac #17004 remove a few unused imports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00fb8e97511ac881279cf5bc5c59eb7d85407126"><code>00fb8e9</code></a></td><td><code>trac #17004 putting one import back</code></td></tr></table>




---

archive/issue_comments_225739.json:
```json
{
    "body": "Commit: **[`00fb8e9`](https://github.com/sagemath/sagetrac-mirror/commit/00fb8e97511ac881279cf5bc5c59eb7d85407126)**",
    "created_at": "2014-09-30T15:16:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225739",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`00fb8e9`](https://github.com/sagemath/sagetrac-mirror/commit/00fb8e97511ac881279cf5bc5c59eb7d85407126)**



---

archive/issue_events_241358.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-30T15:20:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241358"
}
```



---

archive/issue_events_241359.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-30T15:20:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241359"
}
```



---

archive/issue_events_241360.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-02T16:21:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241360"
}
```



---

archive/issue_events_241361.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8adba82290a86dab42797fcceca52decebab2ae9",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-10-02T16:21:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17044#event-241361"
}
```



---

archive/issue_comments_225740.json:
```json
{
    "body": "Changed branch from **[public/ticket/17044](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17044)** to **[`00fb8e9`](https://github.com/sagemath/sagetrac-mirror/commit/00fb8e97511ac881279cf5bc5c59eb7d85407126)**",
    "created_at": "2014-10-02T16:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17044#issuecomment-225740",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ticket/17044](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17044)** to **[`00fb8e9`](https://github.com/sagemath/sagetrac-mirror/commit/00fb8e97511ac881279cf5bc5c59eb7d85407126)**
