# Issue 17331: Numerical noise is back in src/sage/matrix/matrix_double_dense.pyx

archive/issues_017094.json:
```json
{
    "body": "\n```\nsage -t src/sage/matrix/matrix_double_dense.pyx\n**********************************************************************\nFile \"src/sage/matrix/matrix_double_dense.pyx\", line 1012, in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values\nFailed example:\n    A.singular_values(eps=None)  # abs tol 5e-16\nExpected:\n    [1.7953720595619975, 0.38027524595503703, 0.04473854875218107, 0.0037223122378911614, 0.0002330890890217751, 1.116335748323284e-05, 4.082376110397296e-07, 1.1228610675717613e-08, 2.2519645713496478e-10, 3.1113486853814003e-12, 2.6500422260778388e-14, 9.87312834948426e-17]\nGot:\n    [1.7953720595619969,\n     0.3802752459550371,\n     0.04473854875218114,\n     0.003722312237891189,\n     0.00023308908902178912,\n     1.1163357483229223e-05,\n     4.0823761103637633e-07,\n     1.1228610665566416e-08,\n     2.251964510803022e-10,\n     3.1113474636612192e-12,\n     2.6497213779939672e-14,\n     1.048419319427735e-16]\nTolerance exceeded in 1 of 12:\n    1.7953720595619975 vs 1.7953720595619969, tolerance 6e-16 > 5e-16\n**********************************************************************\nFile \"src/sage/matrix/matrix_double_dense.pyx\", line 1014, in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values\nFailed example:\n    A.singular_values(eps='auto')  # abs tol 5e-16\nExpected:\n    [1.7953720595619975, 0.38027524595503703, 0.04473854875218107, 0.0037223122378911614, 0.0002330890890217751, 1.116335748323284e-05, 4.082376110397296e-07, 1.1228610675717613e-08, 2.2519645713496478e-10, 3.1113486853814003e-12, 2.6500422260778388e-14, 0.0]\nGot:\n    [1.7953720595619969,\n     0.3802752459550371,\n     0.04473854875218114,\n     0.003722312237891189,\n     0.00023308908902178912,\n     1.1163357483229223e-05,\n     4.0823761103637633e-07,\n     1.1228610665566416e-08,\n     2.251964510803022e-10,\n     3.1113474636612192e-12,\n     2.6497213779939672e-14,\n     0.0]\nTolerance exceeded in 1 of 12:\n    1.7953720595619975 vs 1.7953720595619969, tolerance 6e-16 > 5e-16\n**********************************************************************\nFile \"src/sage/matrix/matrix_double_dense.pyx\", line 1016, in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values\nFailed example:\n    A.singular_values(eps=1e-4)  # abs tol 5e-16\nExpected:\n    [1.7953720595619975, 0.38027524595503703, 0.04473854875218107, 0.0037223122378911614, 0.0002330890890217751, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]\nGot:\n    [1.7953720595619969,\n     0.3802752459550371,\n     0.04473854875218114,\n     0.003722312237891189,\n     0.00023308908902178912,\n     0.0,\n     0.0,\n     0.0,\n     0.0,\n     0.0,\n     0.0,\n     0.0]\nTolerance exceeded in 1 of 12:\n    1.7953720595619975 vs 1.7953720595619969, tolerance 6e-16 > 5e-16\n**********************************************************************\n1 item had failures:\n   3 of  31 in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values\n    [642 tests, 3 failures, 1.54 s]\n```\nThis is on a virtualized Ubuntu\n\n```\ndarij@travis-virtualbox:~/gitsage$ uname -s -r -v\nLinux 3.2.0-70-generic #105-Ubuntu SMP Wed Sep 24 19:49:46 UTC 2014\n```\non a Win7 64bit host.\n\nCC:  @vbraun @jdemeyer\n\nKeywords: numerical noise, doctest failure\n\nBranch/Commit: 1cd2a9b1a7bae6dc696c3aef8acf66a4139ec607\n\nReviewer: Volker Braun\n\nAuthor: Darij Grinberg\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17331\n\n",
    "closed_at": "2014-11-14T12:08:13Z",
    "created_at": "2014-11-13T04:31:21Z",
    "labels": [
        "component: linear algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Numerical noise is back in src/sage/matrix/matrix_double_dense.pyx",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17331",
    "user": "https://github.com/darijgr"
}
```

```
sage -t src/sage/matrix/matrix_double_dense.pyx
**********************************************************************
File "src/sage/matrix/matrix_double_dense.pyx", line 1012, in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values
Failed example:
    A.singular_values(eps=None)  # abs tol 5e-16
Expected:
    [1.7953720595619975, 0.38027524595503703, 0.04473854875218107, 0.0037223122378911614, 0.0002330890890217751, 1.116335748323284e-05, 4.082376110397296e-07, 1.1228610675717613e-08, 2.2519645713496478e-10, 3.1113486853814003e-12, 2.6500422260778388e-14, 9.87312834948426e-17]
Got:
    [1.7953720595619969,
     0.3802752459550371,
     0.04473854875218114,
     0.003722312237891189,
     0.00023308908902178912,
     1.1163357483229223e-05,
     4.0823761103637633e-07,
     1.1228610665566416e-08,
     2.251964510803022e-10,
     3.1113474636612192e-12,
     2.6497213779939672e-14,
     1.048419319427735e-16]
Tolerance exceeded in 1 of 12:
    1.7953720595619975 vs 1.7953720595619969, tolerance 6e-16 > 5e-16
**********************************************************************
File "src/sage/matrix/matrix_double_dense.pyx", line 1014, in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values
Failed example:
    A.singular_values(eps='auto')  # abs tol 5e-16
Expected:
    [1.7953720595619975, 0.38027524595503703, 0.04473854875218107, 0.0037223122378911614, 0.0002330890890217751, 1.116335748323284e-05, 4.082376110397296e-07, 1.1228610675717613e-08, 2.2519645713496478e-10, 3.1113486853814003e-12, 2.6500422260778388e-14, 0.0]
Got:
    [1.7953720595619969,
     0.3802752459550371,
     0.04473854875218114,
     0.003722312237891189,
     0.00023308908902178912,
     1.1163357483229223e-05,
     4.0823761103637633e-07,
     1.1228610665566416e-08,
     2.251964510803022e-10,
     3.1113474636612192e-12,
     2.6497213779939672e-14,
     0.0]
Tolerance exceeded in 1 of 12:
    1.7953720595619975 vs 1.7953720595619969, tolerance 6e-16 > 5e-16
**********************************************************************
File "src/sage/matrix/matrix_double_dense.pyx", line 1016, in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values
Failed example:
    A.singular_values(eps=1e-4)  # abs tol 5e-16
Expected:
    [1.7953720595619975, 0.38027524595503703, 0.04473854875218107, 0.0037223122378911614, 0.0002330890890217751, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
Got:
    [1.7953720595619969,
     0.3802752459550371,
     0.04473854875218114,
     0.003722312237891189,
     0.00023308908902178912,
     0.0,
     0.0,
     0.0,
     0.0,
     0.0,
     0.0,
     0.0]
Tolerance exceeded in 1 of 12:
    1.7953720595619975 vs 1.7953720595619969, tolerance 6e-16 > 5e-16
**********************************************************************
1 item had failures:
   3 of  31 in sage.matrix.matrix_double_dense.Matrix_double_dense.singular_values
    [642 tests, 3 failures, 1.54 s]
```
This is on a virtualized Ubuntu

```
darij@travis-virtualbox:~/gitsage$ uname -s -r -v
Linux 3.2.0-70-generic #105-Ubuntu SMP Wed Sep 24 19:49:46 UTC 2014
```
on a Win7 64bit host.

CC:  @vbraun @jdemeyer

Keywords: numerical noise, doctest failure

Branch/Commit: 1cd2a9b1a7bae6dc696c3aef8acf66a4139ec607

Reviewer: Volker Braun

Author: Darij Grinberg

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17331





---

archive/issue_comments_298164.json:
```json
{
    "body": "<a id='comment:1'></a>\nCan you post a patch that increases the tolerance suitably?",
    "created_at": "2014-11-13T14:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-298164",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>
Can you post a patch that increases the tolerance suitably?



---

archive/issue_comments_298165.json:
```json
{
    "body": "Changing commit from \"\" to \"1cd2a9b1a7bae6dc696c3aef8acf66a4139ec607\"",
    "created_at": "2014-11-13T18:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-298165",
    "user": "https://github.com/darijgr"
}
```

Changing commit from "" to "1cd2a9b1a7bae6dc696c3aef8acf66a4139ec607"



---

archive/issue_comments_298166.json:
```json
{
    "body": "<a id='comment:2'></a>\nOK, done. But is this really the right thing to do, or could it be that there is an actual lack of precision that the failing doctests expose?\n\n---\nNew commits:\n|                                                                                                                                          |                                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|\n|[1cd2a9b](https://github.com/sagemath/sagetrac-mirror/commit/1cd2a9b1a7bae6dc696c3aef8acf66a4139ec607)|`larger tolerance for errors in src/sage/matrix/matrix_double_dense.pyx`|",
    "created_at": "2014-11-13T18:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-298166",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:2'></a>
OK, done. But is this really the right thing to do, or could it be that there is an actual lack of precision that the failing doctests expose?

---
New commits:
|                                                                                                                                          |                                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
|[1cd2a9b](https://github.com/sagemath/sagetrac-mirror/commit/1cd2a9b1a7bae6dc696c3aef8acf66a4139ec607)|`larger tolerance for errors in src/sage/matrix/matrix_double_dense.pyx`|



---

archive/issue_comments_298167.json:
```json
{
    "body": "Changing branch from \"\" to \"u/darij/numnoise\"",
    "created_at": "2014-11-13T18:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-298167",
    "user": "https://github.com/darijgr"
}
```

Changing branch from "" to "u/darij/numnoise"



---

archive/issue_comments_298168.json:
```json
{
    "body": "Changing author from \"\" to \"Darij Grinberg\"",
    "created_at": "2014-11-13T18:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-298168",
    "user": "https://github.com/darijgr"
}
```

Changing author from "" to "Darij Grinberg"



---

archive/issue_comments_298169.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-13T18:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-298169",
    "user": "https://github.com/darijgr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_298170.json:
```json
{
    "body": "<a id='comment:3'></a>\nThis is just fallout from printing more digits #16858, nothing serious.",
    "created_at": "2014-11-13T18:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-298170",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>
This is just fallout from printing more digits #16858, nothing serious.



---

archive/issue_comments_298171.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-13T18:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-298171",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_298172.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2014-11-13T18:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-298172",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_298173.json:
```json
{
    "body": "<a id='comment:5'></a>\nThank you!",
    "created_at": "2014-11-13T19:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-298173",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:5'></a>
Thank you!



---

archive/issue_comments_298174.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-14T12:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-298174",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_298175.json:
```json
{
    "body": "Changing branch from \"u/darij/numnoise\" to \"1cd2a9b1a7bae6dc696c3aef8acf66a4139ec607\"",
    "created_at": "2014-11-14T12:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-298175",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/darij/numnoise" to "1cd2a9b1a7bae6dc696c3aef8acf66a4139ec607"



---

archive/issue_events_056904.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-14T12:08:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17331#event-56904"
}
```
