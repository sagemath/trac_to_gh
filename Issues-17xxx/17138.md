# Issue 17138: LatticePoset: complements() is broken

archive/issues_016901.json:
```json
{
    "assignees": [],
    "body": "Complement of an element of lattice, if it exists, is not necessarily unique. Hence returning an array from `complements()` seems to be totally wrong. Right way is to return a dict of lists if called without arguments and a list if called with one element as argument.\n\nTo clarify what is wrong in all possible meanings for a function called \"complements\":\n\n```\nsage: Posets.PentagonPoset().complements()\n[4, 3, 1, 1, 0]\nsage: LatticePoset({'a':'b'}).complements()\n[1, 0]\n```\n\n\nCC:  @nathanncohen\n\nBranch/Commit: **[cf4f729](https://github.com/sagemath/sagetrac-mirror/commit/cf4f72988a9910e9e64bbef4653524b59af5c67b)**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **Jori M\u00e4ntysalo**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17138_\n\n",
    "closed_at": "2014-10-15T18:12:32Z",
    "created_at": "2014-10-12T12:02:32Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "LatticePoset: complements() is broken",
    "type": "issue",
    "updated_at": "2014-10-15T18:12:32Z",
    "url": "https://github.com/sagemath/sage/issues/17138",
    "user": "https://github.com/jm58660"
}
```
Complement of an element of lattice, if it exists, is not necessarily unique. Hence returning an array from `complements()` seems to be totally wrong. Right way is to return a dict of lists if called without arguments and a list if called with one element as argument.

To clarify what is wrong in all possible meanings for a function called "complements":

```
sage: Posets.PentagonPoset().complements()
[4, 3, 1, 1, 0]
sage: LatticePoset({'a':'b'}).complements()
[1, 0]
```


CC:  @nathanncohen

Branch/Commit: **[cf4f729](https://github.com/sagemath/sagetrac-mirror/commit/cf4f72988a9910e9e64bbef4653524b59af5c67b)**

Reviewer: **Nathann Cohen**

Author: **Jori Mäntysalo**

_Issue created by migration from https://trac.sagemath.org/ticket/17138_





---

archive/issue_events_218929.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-12T12:02:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218929"
}
```



---

archive/issue_events_218930.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-12T12:02:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218930"
}
```



---

archive/issue_events_218931.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-12T12:02:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218931"
}
```



---

archive/issue_events_218932.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-12T12:02:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218932"
}
```



---

archive/issue_comments_229866.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,11 @@\n Complement of an element of lattice, if it exists, is not necessarily unique. Hence returning an array from `complements()` seems to be totally wrong. Right way is to return a dict of lists if called without arguments and a list if called with one element as argument.\n \n+To clarify what is wrong in all possible meanings for a function called \"complements\":\n+\n+```\n+sage: Posets.PentagonPoset().complements()\n+[4, 3, 1, 1, 0]\n+sage: LatticePoset({'a':'b'}).complements()\n+[1, 0]\n+```\n+\n``````\n",
    "created_at": "2014-10-13T04:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229866",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,11 @@
 Complement of an element of lattice, if it exists, is not necessarily unique. Hence returning an array from `complements()` seems to be totally wrong. Right way is to return a dict of lists if called without arguments and a list if called with one element as argument.
 
+To clarify what is wrong in all possible meanings for a function called "complements":
+
+```
+sage: Posets.PentagonPoset().complements()
+[4, 3, 1, 1, 0]
+sage: LatticePoset({'a':'b'}).complements()
+[1, 0]
+```
+
``````




---

archive/issue_comments_229867.json:
```json
{
    "body": "Branch: **[u/jmantysalo/latticeposet__complements___is_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/latticeposet__complements___is_broken)**",
    "created_at": "2014-10-13T08:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229867",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/latticeposet__complements___is_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/latticeposet__complements___is_broken)**



---

archive/issue_comments_229868.json:
```json
{
    "body": "Commit: **[36dd2f3](https://github.com/sagemath/sagetrac-mirror/commit/36dd2f336b1b22690a0e292147db26ccadc4a5ac)**",
    "created_at": "2014-10-13T08:28:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229868",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[36dd2f3](https://github.com/sagemath/sagetrac-mirror/commit/36dd2f336b1b22690a0e292147db26ccadc4a5ac)**



---

archive/issue_comments_229869.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36dd2f336b1b22690a0e292147db26ccadc4a5ac\">36dd2f3</a></td><td><code>Added check for empty lattice.</code></td></tr></table>\n",
    "created_at": "2014-10-13T08:28:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229869",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>Comment 3:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36dd2f336b1b22690a0e292147db26ccadc4a5ac">36dd2f3</a></td><td><code>Added check for empty lattice.</code></td></tr></table>




---

archive/issue_comments_229870.json:
```json
{
    "body": "Author: **Jori M\u00e4ntysalo**",
    "created_at": "2014-10-13T08:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229870",
    "user": "https://github.com/jm58660"
}
```

Author: **Jori Mäntysalo**



---

archive/issue_comments_229871.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBecause `complements()` make sense for lattices, not for posets in general, I think that function can be removed from `hasse_diagram.py`. Otherwise I didn't even think about good algorithm etc.",
    "created_at": "2014-10-13T08:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229871",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:4'>Comment 4:</a>
Because `complements()` make sense for lattices, not for posets in general, I think that function can be removed from `hasse_diagram.py`. Otherwise I didn't even think about good algorithm etc.



---

archive/issue_events_218933.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-13T08:30:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218933"
}
```



---

archive/issue_comments_229872.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nHello !\n\n- depreceated -> deprecated\n\n- `Use FiniteLattices::complements()` -- this is not C++ ! Plus the message should probably be \"complements() is only defined on LatticePoset\" or something. I mean, an error message telling the user that he should change the poset's type itself.\n\n- Given how broken that function is, perhaps it is better to raise an exception rather than a warning.. What do you think ? Besides, that function is defined in `HasseDiagram` which are not really meant to be used directly anyway.\n\n- (Do as you like but) the \"comps\" loop could have been rewritten as\n\n```\nreturn {self._vertex_to_element(u):map(self._vertex_to_element,l)\n        for u,l in c.iteritems()\n        if l}\n```\n\n- Why do you test `cardinality==0` instead of `if x not in self` ?\n\n- `for x in self.list()` can also be written `for x in self`\n\nNathann",
    "created_at": "2014-10-13T09:04:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229872",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'>Comment 5:</a>
Hello !

- depreceated -> deprecated

- `Use FiniteLattices::complements()` -- this is not C++ ! Plus the message should probably be "complements() is only defined on LatticePoset" or something. I mean, an error message telling the user that he should change the poset's type itself.

- Given how broken that function is, perhaps it is better to raise an exception rather than a warning.. What do you think ? Besides, that function is defined in `HasseDiagram` which are not really meant to be used directly anyway.

- (Do as you like but) the "comps" loop could have been rewritten as

```
return {self._vertex_to_element(u):map(self._vertex_to_element,l)
        for u,l in c.iteritems()
        if l}
```

- Why do you test `cardinality==0` instead of `if x not in self` ?

- `for x in self.list()` can also be written `for x in self`

Nathann



---

archive/issue_comments_229873.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@nathanncohen](#comment%3A5):\n\n> - depreceated -> deprecated\n> - `for x in self.list()` can also be written `for x in self`\n\nDone this.\n\n> - (Do as you like but) the \"comps\" loop could have been rewritten as - -\n\nThis says `AttributeError: 'list' object has no attribute 'iteritems'`.\n\n> - Why do you test `cardinality==0` instead of `if x not in self` ?\n\nRunning `meet()` or `join()` will check that element belongs to the lattice, the only exception is empty lattice. (Well, partly because of that the code is non-optimal. But at least it works.)\n\n> - `Use FiniteLattices::complements()` -- this is not C++ ! Plus the message should probably be \"complements() is only defined on LatticePoset\" or something. I mean, an error message telling the user that he should change the poset's type itself.\n> \n> - Given how broken that function is, perhaps it is better to raise an exception rather than a warning.. What do you think ? Besides, that function is defined in `HasseDiagram` which are not really meant to be used directly anyway.\n\nI don't know. Can function from `HasseDiagram` be directly deleted without deprecating it first? For now I changed phrasing in the message.",
    "created_at": "2014-10-13T13:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229873",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@nathanncohen](#comment%3A5):

> - depreceated -> deprecated
> - `for x in self.list()` can also be written `for x in self`

Done this.

> - (Do as you like but) the "comps" loop could have been rewritten as - -

This says `AttributeError: 'list' object has no attribute 'iteritems'`.

> - Why do you test `cardinality==0` instead of `if x not in self` ?

Running `meet()` or `join()` will check that element belongs to the lattice, the only exception is empty lattice. (Well, partly because of that the code is non-optimal. But at least it works.)

> - `Use FiniteLattices::complements()` -- this is not C++ ! Plus the message should probably be "complements() is only defined on LatticePoset" or something. I mean, an error message telling the user that he should change the poset's type itself.
> 
> - Given how broken that function is, perhaps it is better to raise an exception rather than a warning.. What do you think ? Besides, that function is defined in `HasseDiagram` which are not really meant to be used directly anyway.

I don't know. Can function from `HasseDiagram` be directly deleted without deprecating it first? For now I changed phrasing in the message.



---

archive/issue_comments_229874.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30eb2c633a5ee5f47c49e74dfdf8f99cc075ca7c\">30eb2c6</a></td><td><code>Some corrections.</code></td></tr></table>\n",
    "created_at": "2014-10-13T13:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229874",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30eb2c633a5ee5f47c49e74dfdf8f99cc075ca7c">30eb2c6</a></td><td><code>Some corrections.</code></td></tr></table>




---

archive/issue_comments_229875.json:
```json
{
    "body": "Changed commit from **[36dd2f3](https://github.com/sagemath/sagetrac-mirror/commit/36dd2f336b1b22690a0e292147db26ccadc4a5ac)** to **[30eb2c6](https://github.com/sagemath/sagetrac-mirror/commit/30eb2c633a5ee5f47c49e74dfdf8f99cc075ca7c)**",
    "created_at": "2014-10-13T13:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229875",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[36dd2f3](https://github.com/sagemath/sagetrac-mirror/commit/36dd2f336b1b22690a0e292147db26ccadc4a5ac)** to **[30eb2c6](https://github.com/sagemath/sagetrac-mirror/commit/30eb2c633a5ee5f47c49e74dfdf8f99cc075ca7c)**



---

archive/issue_comments_229876.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nYo !\n\n> > - (Do as you like but) the \"comps\" loop could have been rewritten as - -\n\n> \n> This says `AttributeError: 'list' object has no attribute 'iteritems'`.\n\n`O_o`\n\n`comps` seems to be a dictionary in your code, not a list `O_o`\n\n> Running `meet()` or `join()` will check that element belongs to the lattice, the only exception is empty lattice. (Well, partly because of that the code is non-optimal. But at least it works.)\n\n`O_o`\n\nWell, it would still be clearer to check 'element in self' rather than the cardinality `O_o`\n\n> I don't know. Can function from `HasseDiagram` be directly deleted without deprecating it first? For now I changed phrasing in the message.\n\nWe can keep it like that, it does not matter much. One year from now we will remove it, no harm done I guess.\n\nNathann",
    "created_at": "2014-10-13T13:15:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229876",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'>Comment 8:</a>
Yo !

> > - (Do as you like but) the "comps" loop could have been rewritten as - -

> 
> This says `AttributeError: 'list' object has no attribute 'iteritems'`.

`O_o`

`comps` seems to be a dictionary in your code, not a list `O_o`

> Running `meet()` or `join()` will check that element belongs to the lattice, the only exception is empty lattice. (Well, partly because of that the code is non-optimal. But at least it works.)

`O_o`

Well, it would still be clearer to check 'element in self' rather than the cardinality `O_o`

> I don't know. Can function from `HasseDiagram` be directly deleted without deprecating it first? For now I changed phrasing in the message.

We can keep it like that, it does not matter much. One year from now we will remove it, no harm done I guess.

Nathann



---

archive/issue_comments_229877.json:
```json
{
    "body": "Changed commit from **[30eb2c6](https://github.com/sagemath/sagetrac-mirror/commit/30eb2c633a5ee5f47c49e74dfdf8f99cc075ca7c)** to **[8b46683](https://github.com/sagemath/sagetrac-mirror/commit/8b4668325a50621a579d59477ef792590304fb44)**",
    "created_at": "2014-10-13T13:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229877",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[30eb2c6](https://github.com/sagemath/sagetrac-mirror/commit/30eb2c633a5ee5f47c49e74dfdf8f99cc075ca7c)** to **[8b46683](https://github.com/sagemath/sagetrac-mirror/commit/8b4668325a50621a579d59477ef792590304fb44)**



---

archive/issue_comments_229878.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b4668325a50621a579d59477ef792590304fb44\">8b46683</a></td><td><code>One more change.</code></td></tr></table>\n",
    "created_at": "2014-10-13T13:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229878",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b4668325a50621a579d59477ef792590304fb44">8b46683</a></td><td><code>One more change.</code></td></tr></table>




---

archive/issue_comments_229879.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nAll tests pass !\n\nThanks,\n\nNathann",
    "created_at": "2014-10-13T22:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229879",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'>Comment 10:</a>
All tests pass !

Thanks,

Nathann



---

archive/issue_comments_229880.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2014-10-13T22:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229880",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_events_218934.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-10-13T22:10:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218934"
}
```



---

archive/issue_events_218935.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-10-13T22:10:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218935"
}
```



---

archive/issue_events_218936.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-14T21:38:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218936"
}
```



---

archive/issue_events_218937.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-14T21:38:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218937"
}
```



---

archive/issue_comments_229881.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nInt/string have no stable sort order:\n\n```\nsage -t --long src/sage/combinat/posets/lattices.py\n**********************************************************************\nFile \"src/sage/combinat/posets/lattices.py\", line 433, in sage.combinat.posets.lattices.FiniteLatticePoset.complements\nFailed example:\n    L.complements()\nExpected:\n    {0: [1], 1: [0], 'a': ['b', 'c'], 'b': ['c', 'a'], 'c': ['b', 'a']}\nGot:\n    {'a': ['b', 'c'], 'b': ['c', 'a'], 'c': ['b', 'a'], 0: [1], 1: [0]}\n**********************************************************************\n```",
    "created_at": "2014-10-14T21:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229881",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'>Comment 11:</a>
Int/string have no stable sort order:

```
sage -t --long src/sage/combinat/posets/lattices.py
**********************************************************************
File "src/sage/combinat/posets/lattices.py", line 433, in sage.combinat.posets.lattices.FiniteLatticePoset.complements
Failed example:
    L.complements()
Expected:
    {0: [1], 1: [0], 'a': ['b', 'c'], 'b': ['c', 'a'], 'c': ['b', 'a']}
Got:
    {'a': ['b', 'c'], 'b': ['c', 'a'], 'c': ['b', 'a'], 0: [1], 1: [0]}
**********************************************************************
```



---

archive/issue_comments_229882.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ced56742d8a04bab461a632d658768394508c533\">ced5674</a></td><td><code>Added 'random' to doctest because python dict does not preserve order.</code></td></tr></table>\n",
    "created_at": "2014-10-15T04:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229882",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ced56742d8a04bab461a632d658768394508c533">ced5674</a></td><td><code>Added 'random' to doctest because python dict does not preserve order.</code></td></tr></table>




---

archive/issue_comments_229883.json:
```json
{
    "body": "Changed commit from **[8b46683](https://github.com/sagemath/sagetrac-mirror/commit/8b4668325a50621a579d59477ef792590304fb44)** to **[ced5674](https://github.com/sagemath/sagetrac-mirror/commit/ced56742d8a04bab461a632d658768394508c533)**",
    "created_at": "2014-10-15T04:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229883",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8b46683](https://github.com/sagemath/sagetrac-mirror/commit/8b4668325a50621a579d59477ef792590304fb44)** to **[ced5674](https://github.com/sagemath/sagetrac-mirror/commit/ced56742d8a04bab461a632d658768394508c533)**



---

archive/issue_comments_229884.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nAddedd \"# random\" to doctest.",
    "created_at": "2014-10-15T04:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229884",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:13'>Comment 13:</a>
Addedd "# random" to doctest.



---

archive/issue_events_218938.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-15T04:45:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218938"
}
```



---

archive/issue_events_218939.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-15T04:45:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218939"
}
```



---

archive/issue_comments_229885.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nHmmmmmm.... The problem with 'random' flags is that it basically means that the output is not tested. Could you write a real doctest in a \"TEST\" section ? Something that tests that what the output claims to be complements indeed yield the top as their meet and the bottom as their join ?\n\nOtherwise this function actually is not tested.\n\nNathann",
    "created_at": "2014-10-15T07:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229885",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'>Comment 14:</a>
Hmmmmmm.... The problem with 'random' flags is that it basically means that the output is not tested. Could you write a real doctest in a "TEST" section ? Something that tests that what the output claims to be complements indeed yield the top as their meet and the bottom as their join ?

Otherwise this function actually is not tested.

Nathann



---

archive/issue_events_218940.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-15T07:58:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218940"
}
```



---

archive/issue_events_218941.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-15T07:58:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218941"
}
```



---

archive/issue_comments_229886.json:
```json
{
    "body": "Changed commit from **[ced5674](https://github.com/sagemath/sagetrac-mirror/commit/ced56742d8a04bab461a632d658768394508c533)** to **[96c9515](https://github.com/sagemath/sagetrac-mirror/commit/96c951514a8acca854f812a9225af0b864e3aa41)**",
    "created_at": "2014-10-15T08:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229886",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ced5674](https://github.com/sagemath/sagetrac-mirror/commit/ced56742d8a04bab461a632d658768394508c533)** to **[96c9515](https://github.com/sagemath/sagetrac-mirror/commit/96c951514a8acca854f812a9225af0b864e3aa41)**



---

archive/issue_comments_229887.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96c951514a8acca854f812a9225af0b864e3aa41\">96c9515</a></td><td><code>Added test section.</code></td></tr></table>\n",
    "created_at": "2014-10-15T08:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229887",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96c951514a8acca854f812a9225af0b864e3aa41">96c9515</a></td><td><code>Added test section.</code></td></tr></table>




---

archive/issue_comments_229888.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nSomething like this?",
    "created_at": "2014-10-15T08:18:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229888",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:17'>Comment 17:</a>
Something like this?



---

archive/issue_events_218942.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-10-15T08:39:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218942"
}
```



---

archive/issue_events_218943.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-10-15T08:39:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218943"
}
```



---

archive/issue_comments_229889.json:
```json
{
    "body": "Changed commit from **[96c9515](https://github.com/sagemath/sagetrac-mirror/commit/96c951514a8acca854f812a9225af0b864e3aa41)** to **[cf4f729](https://github.com/sagemath/sagetrac-mirror/commit/cf4f72988a9910e9e64bbef4653524b59af5c67b)**",
    "created_at": "2014-10-15T08:39:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229889",
    "user": "https://github.com/nathanncohen"
}
```

Changed commit from **[96c9515](https://github.com/sagemath/sagetrac-mirror/commit/96c951514a8acca854f812a9225af0b864e3aa41)** to **[cf4f729](https://github.com/sagemath/sagetrac-mirror/commit/cf4f72988a9910e9e64bbef4653524b59af5c67b)**



---

archive/issue_comments_229890.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/latticeposet__complements___is_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/latticeposet__complements___is_broken)** to **[public/latticeposet__complements___is_broken](https://github.com/sagemath/sagetrac-mirror/tree/public/latticeposet__complements___is_broken)**",
    "created_at": "2014-10-15T08:39:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229890",
    "user": "https://github.com/nathanncohen"
}
```

Changed branch from **[u/jmantysalo/latticeposet__complements___is_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/latticeposet__complements___is_broken)** to **[public/latticeposet__complements___is_broken](https://github.com/sagemath/sagetrac-mirror/tree/public/latticeposet__complements___is_broken)**



---

archive/issue_comments_229891.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nNo, that would not work. Here is the reason:\n\n1) The order in which elements are listed when you iterate upon the elements of a dictionary is architecture-dependent. If you write a doctest that just 'displays' the content of a dictionary, it will break on some machines. The problem is not only the order of the lists of complements.\n\n2) Actually, there is in Sage a 'hack' that reorders the entry of a dictionary before they are displayed. I expect that it uses a 'sort' or something, which works fine if you have only integers or only strings as keys to your dictionary. On the other hand, Volker says that comparing int and strings can be architecture dependent, as it is probably done according to the memory locations\n\n3) I believe that \"random order\" should be just \"random\"\n\nI added a commit which does some non-architecture-dependent checks on the output of the function. Tell me what you think, and you can set the ticket to `positive_review` if you agree with it !\n\nThanks,\n\nNathann\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf4f72988a9910e9e64bbef4653524b59af5c67b\">cf4f729</a></td><td><code>trac #17138: Dangerous doctest</code></td></tr></table>\n",
    "created_at": "2014-10-15T08:39:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229891",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'>Comment 18:</a>
No, that would not work. Here is the reason:

1) The order in which elements are listed when you iterate upon the elements of a dictionary is architecture-dependent. If you write a doctest that just 'displays' the content of a dictionary, it will break on some machines. The problem is not only the order of the lists of complements.

2) Actually, there is in Sage a 'hack' that reorders the entry of a dictionary before they are displayed. I expect that it uses a 'sort' or something, which works fine if you have only integers or only strings as keys to your dictionary. On the other hand, Volker says that comparing int and strings can be architecture dependent, as it is probably done according to the memory locations

3) I believe that "random order" should be just "random"

I added a commit which does some non-architecture-dependent checks on the output of the function. Tell me what you think, and you can set the ticket to `positive_review` if you agree with it !

Thanks,

Nathann

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf4f72988a9910e9e64bbef4653524b59af5c67b">cf4f729</a></td><td><code>trac #17138: Dangerous doctest</code></td></tr></table>




---

archive/issue_comments_229892.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@nathanncohen](#comment%3A18):\n\n> 1) The order in which elements are listed when you iterate upon the elements of a dictionary is architecture-dependent. If you write a doctest that just 'displays' the content of a dictionary, it will break on some machines. The problem is not only the order of the lists of complements.\n\nWhat??? Is `sorted('a', 42)` architecture-dependent? I understand that `print {'a':'b', 42:43}` is, but that is different thing.\n\n> 2) Actually, there is in Sage a 'hack' that reorders the entry of a dictionary before they are displayed.\n\nOK, I understand the basic idea behind it. Maybe Volker will tell the actual code doing this.\n\n> 3) I believe that \"random order\" should be just \"random\"\n\nDocumentation says if comment *contains* strgin \"random\", then it will not be tested. So one could write for example \"Slightly random due numerical approximations\". But not an important thing.\n\n> I added a commit which does some non-architecture-dependent checks on the output of the function. Tell me what you think, and you can set the ticket to `positive_review` if you agree with it !\n\nWorks. Thanks.\n\n(Actually I think posets might have real test suite. Maybe later...)",
    "created_at": "2014-10-15T08:51:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229892",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@nathanncohen](#comment%3A18):

> 1) The order in which elements are listed when you iterate upon the elements of a dictionary is architecture-dependent. If you write a doctest that just 'displays' the content of a dictionary, it will break on some machines. The problem is not only the order of the lists of complements.

What??? Is `sorted('a', 42)` architecture-dependent? I understand that `print {'a':'b', 42:43}` is, but that is different thing.

> 2) Actually, there is in Sage a 'hack' that reorders the entry of a dictionary before they are displayed.

OK, I understand the basic idea behind it. Maybe Volker will tell the actual code doing this.

> 3) I believe that "random order" should be just "random"

Documentation says if comment *contains* strgin "random", then it will not be tested. So one could write for example "Slightly random due numerical approximations". But not an important thing.

> I added a commit which does some non-architecture-dependent checks on the output of the function. Tell me what you think, and you can set the ticket to `positive_review` if you agree with it !

Works. Thanks.

(Actually I think posets might have real test suite. Maybe later...)



---

archive/issue_events_218944.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-15T08:51:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218944"
}
```



---

archive/issue_events_218945.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-15T08:51:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218945"
}
```



---

archive/issue_comments_229893.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nYo !\n\n> What??? Is `sorted('a', 42)` architecture-dependent? I understand that `print {'a':'b', 42:43}` is, but that is different thing.\n\nOh sorry, perhaps not architecture dependent but 'unreliable'. It may even change on the same computer I guess, but I have no idea. Volker will know. In Sage, however, I was told that dictionaries output is sorted first, so that should be equivalent as far as doctests are concerned.\n\n> Documentation says if comment *contains* strgin \"random\", then it will not be tested. So one could write for example \"Slightly random due numerical approximations\". But not an important thing.\n\nYeah but then people come and say that you should not put too many words there, because your 'random order' doctest will also be tested if you do --optional=order\n\nNathann",
    "created_at": "2014-10-15T08:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229893",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'>Comment 20:</a>
Yo !

> What??? Is `sorted('a', 42)` architecture-dependent? I understand that `print {'a':'b', 42:43}` is, but that is different thing.

Oh sorry, perhaps not architecture dependent but 'unreliable'. It may even change on the same computer I guess, but I have no idea. Volker will know. In Sage, however, I was told that dictionaries output is sorted first, so that should be equivalent as far as doctests are concerned.

> Documentation says if comment *contains* strgin "random", then it will not be tested. So one could write for example "Slightly random due numerical approximations". But not an important thing.

Yeah but then people come and say that you should not put too many words there, because your 'random order' doctest will also be tested if you do --optional=order

Nathann



---

archive/issue_comments_229894.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nOK, comments from Nathann read and understood.",
    "created_at": "2014-10-15T10:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229894",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:21'>Comment 21:</a>
OK, comments from Nathann read and understood.



---

archive/issue_comments_229895.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nThe order in `sorted(['a', 42])` is random (depends on memory location). `sorted(['a', '42'])` is not. Dictionaries are sorted by key in the displayhook, so if you don't mix strings and ints as keys then they are always printed he same. \n\nPossible solutions \n* don't mix string and int as keys\n* Doctest equality of dicts `L.complements() == {...}` instead of the dict repr",
    "created_at": "2014-10-15T10:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229895",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'>Comment 22:</a>
The order in `sorted(['a', 42])` is random (depends on memory location). `sorted(['a', '42'])` is not. Dictionaries are sorted by key in the displayhook, so if you don't mix strings and ints as keys then they are always printed he same. 

Possible solutions 
* don't mix string and int as keys
* Doctest equality of dicts `L.complements() == {...}` instead of the dict repr



---

archive/issue_comments_229896.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nThanks Volker. From the user perspective I think that `do_something() --> some_output` is much better example than `do_something()==some_output --> True`.\n\nI was thinking about usual convention of having `0` and `1` as bottom and top element of a lattice. Maybe `'0'` instead of `0` is better. I will think this later (but polishind documentation on posets will go before lattices). For now this can be as it is.",
    "created_at": "2014-10-15T10:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229896",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:23'>Comment 23:</a>
Thanks Volker. From the user perspective I think that `do_something() --> some_output` is much better example than `do_something()==some_output --> True`.

I was thinking about usual convention of having `0` and `1` as bottom and top element of a lattice. Maybe `'0'` instead of `0` is better. I will think this later (but polishind documentation on posets will go before lattices). For now this can be as it is.



---

archive/issue_comments_229897.json:
```json
{
    "body": "Changed branch from **[public/latticeposet__complements___is_broken](https://github.com/sagemath/sagetrac-mirror/tree/public/latticeposet__complements___is_broken)** to **[cf4f729](https://github.com/sagemath/sagetrac-mirror/commit/cf4f72988a9910e9e64bbef4653524b59af5c67b)**",
    "created_at": "2014-10-15T18:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17138#issuecomment-229897",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/latticeposet__complements___is_broken](https://github.com/sagemath/sagetrac-mirror/tree/public/latticeposet__complements___is_broken)** to **[cf4f729](https://github.com/sagemath/sagetrac-mirror/commit/cf4f72988a9910e9e64bbef4653524b59af5c67b)**



---

archive/issue_events_218946.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-15T18:12:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218946"
}
```



---

archive/issue_events_218947.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "bb85e229daaecc086e2babccfeeb276688865604",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-10-15T18:12:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17138",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17138#event-218947"
}
```
