# Issue 17540: Poset.dimension

archive/issues_017303.json:
```json
{
    "body": "With this code, Sage at last can compute the dimension of a Poset.\n\nhttp://en.wikipedia.org/wiki/Order_dimension\n\n\n\nNathann\n\nSee https://groups.google.com/d/topic/sage-devel/qEE9YUAPA4g/discussion\n\nCC:  @miguelmarco @dimpase @videlec tmonteil @jm58660\n\nBranch/Commit: ffe181b536ce832a68620f1c7063807315d370a6\n\nReviewer: Dima Pasechnik\n\nAuthor: Nathann Cohen\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17540\n\n",
    "closed_at": "2015-04-15T13:58:22Z",
    "created_at": "2014-12-23T11:45:54Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "Poset.dimension",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17540",
    "user": "https://github.com/nathanncohen"
}
```
With this code, Sage at last can compute the dimension of a Poset.

http://en.wikipedia.org/wiki/Order_dimension



Nathann

See https://groups.google.com/d/topic/sage-devel/qEE9YUAPA4g/discussion

CC:  @miguelmarco @dimpase @videlec tmonteil @jm58660

Branch/Commit: ffe181b536ce832a68620f1c7063807315d370a6

Reviewer: Dima Pasechnik

Author: Nathann Cohen

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17540





---

archive/issue_comments_298506.json:
```json
{
    "body": "Changing branch from \"\" to \"u/ncohen/17540\"",
    "created_at": "2014-12-23T11:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298506",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "" to "u/ncohen/17540"



---

archive/issue_comments_298507.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-23T11:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298507",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_298508.json:
```json
{
    "body": "Changing commit from \"\" to \"216d59efca2e03ebce6e9fd76f150abb32e369d5\"",
    "created_at": "2014-12-23T11:47:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "216d59efca2e03ebce6e9fd76f150abb32e369d5"



---

archive/issue_comments_298509.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-23T11:47:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298510.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n http://en.wikipedia.org/wiki/Order_dimension\n \n-Turns out that we couldn't.\n+Turns out that we were not able to.\n \n Nathann\n \n``````\n",
    "created_at": "2014-12-23T13:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298510",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 http://en.wikipedia.org/wiki/Order_dimension
 
-Turns out that we couldn't.
+Turns out that we were not able to.
 
 Nathann
 
``````




---

archive/issue_comments_298511.json:
```json
{
    "body": "<a id='comment:4'></a>Is the ticket description wrong? I can't review code that is not supposed to work :-)",
    "created_at": "2014-12-23T13:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298511",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>Is the ticket description wrong? I can't review code that is not supposed to work :-)



---

archive/issue_comments_298512.json:
```json
{
    "body": "<a id='comment:5'></a>> Is the ticket description wrong? I can't review code that is not supposed to work :-)\n\n\nDon't get it. You talk about the missing () to dimension ?",
    "created_at": "2014-12-23T13:56:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298512",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>> Is the ticket description wrong? I can't review code that is not supposed to work :-)


Don't get it. You talk about the missing () to dimension ?



---

archive/issue_comments_298513.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [ncohen](#comment%3A5):\n> > Is the ticket description wrong? I can't review code that is not supposed to work :-)\n\n> \n> Don't get it. You talk about the missing () to dimension ?\n\n{{{\nWith this code, Sage can compute the dimension of a Poset.\n\u200bhttp://en.wikipedia.org/wiki/Order_dimension\nTurns out that we were not able to.\n}}}\n**we are not able to**",
    "created_at": "2014-12-23T14:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298513",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>Replying to [ncohen](#comment%3A5):
> > Is the ticket description wrong? I can't review code that is not supposed to work :-)

> 
> Don't get it. You talk about the missing () to dimension ?

{{{
With this code, Sage can compute the dimension of a Poset.
â€‹http://en.wikipedia.org/wiki/Order_dimension
Turns out that we were not able to.
}}}
**we are not able to**



---

archive/issue_comments_298514.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n http://en.wikipedia.org/wiki/Order_dimension\n \n-Turns out that we were not able to.\n+Turns out that we are not able to.\n \n Nathann\n \n``````\n",
    "created_at": "2014-12-23T14:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298514",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 http://en.wikipedia.org/wiki/Order_dimension
 
-Turns out that we were not able to.
+Turns out that we are not able to.
 
 Nathann
 
``````




---

archive/issue_comments_298515.json:
```json
{
    "body": "<a id='comment:7'></a>I am glad to see this very confusing typo corrected. Thank you for bringing it to my attention.",
    "created_at": "2014-12-23T14:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298515",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>I am glad to see this very confusing typo corrected. Thank you for bringing it to my attention.



---

archive/issue_comments_298516.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n-With this code, Sage can compute the dimension of a Poset.\n+With this code, Sage at last can compute the dimension of a Poset.\n \n http://en.wikipedia.org/wiki/Order_dimension\n \n-Turns out that we are not able to.\n+\n \n Nathann\n \n``````\n",
    "created_at": "2014-12-23T15:30:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298516",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
-With this code, Sage can compute the dimension of a Poset.
+With this code, Sage at last can compute the dimension of a Poset.
 
 http://en.wikipedia.org/wiki/Order_dimension
 
-Turns out that we are not able to.
+
 
 Nathann
 
``````




---

archive/issue_comments_298517.json:
```json
{
    "body": "<a id='comment:8'></a>IMHO there should be a separate function to compute the chromatic number of a hypergraph.",
    "created_at": "2014-12-23T15:30:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298517",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>IMHO there should be a separate function to compute the chromatic number of a hypergraph.



---

archive/issue_comments_298518.json:
```json
{
    "body": "<a id='comment:9'></a>> IMHO there should be a separate function to compute the chromatic number of a hypergraph.\n\n\nIt is true, but we could not call it from here. The reason why this code is so long is that we avoid building the LP from the start every time we need to add a constraint. It is only re-built when we notice that the new hypergraph is not k-colorable anymore.\n\nNathann\n\nP.S. : Actually I will write a LP for that. I will surely need it some day.",
    "created_at": "2014-12-23T15:33:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298518",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>> IMHO there should be a separate function to compute the chromatic number of a hypergraph.


It is true, but we could not call it from here. The reason why this code is so long is that we avoid building the LP from the start every time we need to add a constraint. It is only re-built when we notice that the new hypergraph is not k-colorable anymore.

Nathann

P.S. : Actually I will write a LP for that. I will surely need it some day.



---

archive/issue_comments_298519.json:
```json
{
    "body": "<a id='comment:10'></a>> P.S. : Actually I will write a LP for that. I will surely need it some day.\n  \nDone at #17542.\n\nNathann",
    "created_at": "2014-12-23T16:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298519",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>> P.S. : Actually I will write a LP for that. I will surely need it some day.
  
Done at #17542.

Nathann



---

archive/issue_comments_298520.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [ncohen](#comment%3A9):\n> > IMHO there should be a separate function to compute the chromatic number of a hypergraph.\n\n> \n> It is true, but we could not call it from here. The reason why this code is so long is that we avoid building the LP from the start every time we need to add a constraint. It is only re-built when we notice that the new hypergraph is not k-colorable anymore.\n\n\nHmm, why do you need to rebuild the hypergraph? The latter is fixed. What is not fixed is the number of colours you need, and you don't want to rebuild the ILP from scratch for this.  Why is this poset-specific?",
    "created_at": "2014-12-23T16:12:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298520",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>Replying to [ncohen](#comment%3A9):
> > IMHO there should be a separate function to compute the chromatic number of a hypergraph.

> 
> It is true, but we could not call it from here. The reason why this code is so long is that we avoid building the LP from the start every time we need to add a constraint. It is only re-built when we notice that the new hypergraph is not k-colorable anymore.


Hmm, why do you need to rebuild the hypergraph? The latter is fixed. What is not fixed is the number of colours you need, and you don't want to rebuild the ILP from scratch for this.  Why is this poset-specific?



---

archive/issue_comments_298521.json:
```json
{
    "body": "<a id='comment:12'></a>> Hmm, why do you need to rebuild the hypergraph? The latter is fixed. What is not fixed is the number of colours you need, and you don't want to rebuild the ILP from scratch for this.  Why is this poset-specific?\n\n\nOn the paper, the hypergraph is very well defined and you have to compute its chromatic number. In practice, you cannot build the hypergraph because the list of its edges is too huge (I would not know how to do that anyway). So what we do is start with *some* of the edges in the hypergraph, and find a coloring.\n\nWhen we have a coloring, we can check that it is valid by building the corresponding graphs --> if all are acyclic that's fine and we are done.\n\nIf one is not acyclic, however, we have found a cycle --> a new set to add to our hypergraph. And so we re-color this thing again.\n\nThis being said, when you find a new set in your hypergraph, you only have to add one constraint and then you can call `.solve` again. If we called `.coloring()` each time, we would in fact be building a new LP and solve it from scratch every time we add a constraint, and that's a waste of computations that this branch avoids.\n\nNathann",
    "created_at": "2014-12-23T16:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298521",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>> Hmm, why do you need to rebuild the hypergraph? The latter is fixed. What is not fixed is the number of colours you need, and you don't want to rebuild the ILP from scratch for this.  Why is this poset-specific?


On the paper, the hypergraph is very well defined and you have to compute its chromatic number. In practice, you cannot build the hypergraph because the list of its edges is too huge (I would not know how to do that anyway). So what we do is start with *some* of the edges in the hypergraph, and find a coloring.

When we have a coloring, we can check that it is valid by building the corresponding graphs --> if all are acyclic that's fine and we are done.

If one is not acyclic, however, we have found a cycle --> a new set to add to our hypergraph. And so we re-color this thing again.

This being said, when you find a new set in your hypergraph, you only have to add one constraint and then you can call `.solve` again. If we called `.coloring()` each time, we would in fact be building a new LP and solve it from scratch every time we add a constraint, and that's a waste of computations that this branch avoids.

Nathann



---

archive/issue_comments_298522.json:
```json
{
    "body": "<a id='comment:13'></a>according to [FT00], instead of the hypergraph on `inc(P)`, it suffices to restrict to the induced subhypergraph of the critical incomparable pairs (see Lemma 3.3 in [loc.cit.]),  and then do the same chromatic number computation.",
    "created_at": "2014-12-23T18:00:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298522",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>according to [FT00], instead of the hypergraph on `inc(P)`, it suffices to restrict to the induced subhypergraph of the critical incomparable pairs (see Lemma 3.3 in [loc.cit.]),  and then do the same chromatic number computation.



---

archive/issue_comments_298523.json:
```json
{
    "body": "<a id='comment:14'></a>Concerning the `certificate`, it looks like a half-certificate ; is the algorithm able to provide an evidence that no smaller set of linear ordering can generate the poset by intersection ?\n\nAlso, the \"just to be sure\" section at the end of the code should be run only if some `check` option is set to `True` since the algorithm is supposed to work without this ?\n\nBy the way, in the `INPUT` section, it seems more common to write ```certificate`` - boolean (default: ``False``)` than to write the default at the end of the description (i first thought the information was missing).",
    "created_at": "2014-12-23T18:05:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298523",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:14'></a>Concerning the `certificate`, it looks like a half-certificate ; is the algorithm able to provide an evidence that no smaller set of linear ordering can generate the poset by intersection ?

Also, the "just to be sure" section at the end of the code should be run only if some `check` option is set to `True` since the algorithm is supposed to work without this ?

By the way, in the `INPUT` section, it seems more common to write ```certificate`` - boolean (default: ``False``)` than to write the default at the end of the description (i first thought the information was missing).



---

archive/issue_comments_298524.json:
```json
{
    "body": "<a id='comment:15'></a>> according to [FT00], instead of the hypergraph on `inc(P)`, it suffices to restrict to the induced subhypergraph of the critical incomparable pairs (see Lemma 3.3 in [loc.cit.]),  and then do the same chromatic number computation.\n\n\nI do not see how that would change anything. You are just telling me that only a subset of points  of the hypergraph matters, but that does not give me the set of edges that only involve critical pairs.\n\nNathann",
    "created_at": "2014-12-23T18:08:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298524",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>> according to [FT00], instead of the hypergraph on `inc(P)`, it suffices to restrict to the induced subhypergraph of the critical incomparable pairs (see Lemma 3.3 in [loc.cit.]),  and then do the same chromatic number computation.


I do not see how that would change anything. You are just telling me that only a subset of points  of the hypergraph matters, but that does not give me the set of edges that only involve critical pairs.

Nathann



---

archive/issue_comments_298525.json:
```json
{
    "body": "<a id='comment:16'></a>> Concerning the `certificate`, it looks like a half-certificate ; is the algorithm able to provide an evidence that no smaller set of linear ordering can generate the poset by intersection ?\n\n\nNo it cannot. The problem is NP, so there is a certificate for a 'yes' answer, but it is not co-NP so there is no certificate for the other side. (Insert 'polynomial' wherever it fits in the sentence, and assume P!=NP)\n\n> Also, the \"just to be sure\" section at the end of the code should be run only if some `check` option is set to `True` since the algorithm is supposed to work without this ?\n\n\nI do not think that it should, considering the running time of the algorithm. That's almost for free comparatively, so I don't see the need to make it optional.\n\n> By the way, in the `INPUT` section, it seems more common to write ```certificate`` - boolean (default: ``False``)` than to write the default at the end of the description (i first thought the information was missing).\n\n\nWell I usually write it the way it is written. If you want to change it you are welcome to add a commit, but if it is just about enforcing the coding style you like I will not code it for you `:-P`\n\nNathann",
    "created_at": "2014-12-23T18:11:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298525",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>> Concerning the `certificate`, it looks like a half-certificate ; is the algorithm able to provide an evidence that no smaller set of linear ordering can generate the poset by intersection ?


No it cannot. The problem is NP, so there is a certificate for a 'yes' answer, but it is not co-NP so there is no certificate for the other side. (Insert 'polynomial' wherever it fits in the sentence, and assume P!=NP)

> Also, the "just to be sure" section at the end of the code should be run only if some `check` option is set to `True` since the algorithm is supposed to work without this ?


I do not think that it should, considering the running time of the algorithm. That's almost for free comparatively, so I don't see the need to make it optional.

> By the way, in the `INPUT` section, it seems more common to write ```certificate`` - boolean (default: ``False``)` than to write the default at the end of the description (i first thought the information was missing).


Well I usually write it the way it is written. If you want to change it you are welcome to add a commit, but if it is just about enforcing the coding style you like I will not code it for you `:-P`

Nathann



---

archive/issue_comments_298526.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [ncohen](#comment%3A16):\n > > By the way, in the `INPUT` section, it seems more common to write ```certificate`` - boolean (default: ``False``)` than to write the default at the end of the description (i first thought the information was missing).\n> \n> Well I usually write it the way it is written. If you want to change it you are welcome to add a commit, but if it is just about enforcing the coding style you like I will not code it for you `:-P`\n> \n\n\nThis is not the coding style i like, it is about coding conventions, a feature that allow various people to collectively work on some source code, see http://sagemath.org/doc/developer/coding_basics.html#documentation-strings",
    "created_at": "2014-12-23T18:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298526",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:17'></a>Replying to [ncohen](#comment%3A16):
 > > By the way, in the `INPUT` section, it seems more common to write ```certificate`` - boolean (default: ``False``)` than to write the default at the end of the description (i first thought the information was missing).
> 
> Well I usually write it the way it is written. If you want to change it you are welcome to add a commit, but if it is just about enforcing the coding style you like I will not code it for you `:-P`
> 


This is not the coding style i like, it is about coding conventions, a feature that allow various people to collectively work on some source code, see http://sagemath.org/doc/developer/coding_basics.html#documentation-strings



---

archive/issue_comments_298527.json:
```json
{
    "body": "<a id='comment:18'></a>There seems to be no check for argument, i.e. `certificate='cat-says-meow'` does not raise an error. Should it?\n\nOne-line explanation on TOC should end with dot.\n\nDoes this work with empty poset? Checking just now, but compiling is slooow with this machine.",
    "created_at": "2014-12-23T22:00:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298527",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:18'></a>There seems to be no check for argument, i.e. `certificate='cat-says-meow'` does not raise an error. Should it?

One-line explanation on TOC should end with dot.

Does this work with empty poset? Checking just now, but compiling is slooow with this machine.



---

archive/issue_comments_298528.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [ncohen](#comment%3A15):\n> > according to [FT00], instead of the hypergraph on `inc(P)`, it suffices to restrict to the induced subhypergraph of the critical incomparable pairs (see Lemma 3.3 in [loc.cit.]),  and then do the same chromatic number computation.\n\n> \n> I do not see how that would change anything. You are just telling me that only a subset of points  of the hypergraph matters, but that does not give me the set of edges that only involve critical pairs.\n\n\nIt seems that you get a smaller ILP; you run your acyclicity test and compute cycles just as you do, but only leave critical pairs there (i.e. you take the subhypergraph induced on the critical pairs --- the edges get intersected with the subset of critical pairs).",
    "created_at": "2014-12-23T22:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298528",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>Replying to [ncohen](#comment%3A15):
> > according to [FT00], instead of the hypergraph on `inc(P)`, it suffices to restrict to the induced subhypergraph of the critical incomparable pairs (see Lemma 3.3 in [loc.cit.]),  and then do the same chromatic number computation.

> 
> I do not see how that would change anything. You are just telling me that only a subset of points  of the hypergraph matters, but that does not give me the set of edges that only involve critical pairs.


It seems that you get a smaller ILP; you run your acyclicity test and compute cycles just as you do, but only leave critical pairs there (i.e. you take the subhypergraph induced on the critical pairs --- the edges get intersected with the subset of critical pairs).



---

archive/issue_comments_298529.json:
```json
{
    "body": "<a id='comment:20'></a>> This is not the coding style i like, it is about coding conventions, a feature that allow various people to collectively work on some source code, see http://sagemath.org/doc/developer/coding_basics.html#documentation-strings\n\n\nIf the fact that I wrote the defaut value at the end of the sentence instead of the beginning is a problem for you, add a commit. You will find many other such instances in the same document.\n\nNathann",
    "created_at": "2014-12-24T02:44:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298529",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>> This is not the coding style i like, it is about coding conventions, a feature that allow various people to collectively work on some source code, see http://sagemath.org/doc/developer/coding_basics.html#documentation-strings


If the fact that I wrote the defaut value at the end of the sentence instead of the beginning is a problem for you, add a commit. You will find many other such instances in the same document.

Nathann



---

archive/issue_comments_298530.json:
```json
{
    "body": "<a id='comment:21'></a>> There seems to be no check for argument, i.e. `certificate='cat-says-meow'` does not raise an error. Should it?\n\n\nI do not think that there should, especially when the argument is boolean (not even a string) and when it does not produce any bug whatever happens. Chekking this kind of stuff is useful when a string is expected, but really if we begin to check every single arguments of every function like that, then half of the python code we have in Sage will be checking the type of input because Python does not do it instead.\n\n> One-line explanation on TOC should end with dot.\n\n\nDone\n\n> Does this work with empty poset? Checking just now, but compiling is slooow with this machine.\n\n\nDone (Jori: we have a 4h30 difference in our timezones)\n\nNathann",
    "created_at": "2014-12-24T03:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298530",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'></a>> There seems to be no check for argument, i.e. `certificate='cat-says-meow'` does not raise an error. Should it?


I do not think that there should, especially when the argument is boolean (not even a string) and when it does not produce any bug whatever happens. Chekking this kind of stuff is useful when a string is expected, but really if we begin to check every single arguments of every function like that, then half of the python code we have in Sage will be checking the type of input because Python does not do it instead.

> One-line explanation on TOC should end with dot.


Done

> Does this work with empty poset? Checking just now, but compiling is slooow with this machine.


Done (Jori: we have a 4h30 difference in our timezones)

Nathann



---

archive/issue_comments_298531.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-24T03:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298532.json:
```json
{
    "body": "Changing commit from \"216d59efca2e03ebce6e9fd76f150abb32e369d5\" to \"59f0435008dccc2f06d46c2b1293258c694487fa\"",
    "created_at": "2014-12-24T03:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "216d59efca2e03ebce6e9fd76f150abb32e369d5" to "59f0435008dccc2f06d46c2b1293258c694487fa"



---

archive/issue_comments_298533.json:
```json
{
    "body": "<a id='comment:23'></a>> It seems that you get a smaller ILP; you run your acyclicity test and compute cycles just as you do, but only leave critical pairs there (i.e. you take the subhypergraph induced on the critical pairs --- the edges get intersected with the subset of critical pairs).\n\n\nI see. Well, I am not very eager to dig into that in order to see how I could list all those critical pairs, then add this to this already non-trivial code, given that I am not very convinced that it will make any difference in the runtimes `:-P`\n\nNathann",
    "created_at": "2014-12-24T03:23:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298533",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'></a>> It seems that you get a smaller ILP; you run your acyclicity test and compute cycles just as you do, but only leave critical pairs there (i.e. you take the subhypergraph induced on the critical pairs --- the edges get intersected with the subset of critical pairs).


I see. Well, I am not very eager to dig into that in order to see how I could list all those critical pairs, then add this to this already non-trivial code, given that I am not very convinced that it will make any difference in the runtimes `:-P`

Nathann



---

archive/issue_comments_298534.json:
```json
{
    "body": "<a id='comment:24'></a>Ping ?...",
    "created_at": "2015-02-06T09:29:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298534",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>Ping ?...



---

archive/issue_comments_298535.json:
```json
{
    "body": "<a id='comment:25'></a>Piiiiing ?...",
    "created_at": "2015-03-11T12:40:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298535",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:25'></a>Piiiiing ?...



---

archive/issue_comments_298536.json:
```json
{
    "body": "<a id='comment:26'></a>Piiiiiiiiiiiiiiiiiing ?...",
    "created_at": "2015-04-14T14:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298536",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:26'></a>Piiiiiiiiiiiiiiiiiing ?...



---

archive/issue_comments_298537.json:
```json
{
    "body": "<a id='comment:27'></a>OK, OK, just a bit of patience...",
    "created_at": "2015-04-14T14:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298537",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'></a>OK, OK, just a bit of patience...



---

archive/issue_comments_298538.json:
```json
{
    "body": "<a id='comment:28'></a>what is your default LP solver (on which that was tested)?\nFor me \n\n```\nsage: G = graphs.CompleteBipartiteGraph(3,3)\nsage: P = Poset(DiGraph({(u,v):[u,v] for u,v,_ in G.edges()}))\nsage: P.dimension()\n```\nruns, and runs, and runs (that's with GLPK).",
    "created_at": "2015-04-14T15:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298538",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>what is your default LP solver (on which that was tested)?
For me 

```
sage: G = graphs.CompleteBipartiteGraph(3,3)
sage: P = Poset(DiGraph({(u,v):[u,v] for u,v,_ in G.edges()}))
sage: P.dimension()
```
runs, and runs, and runs (that's with GLPK).



---

archive/issue_comments_298539.json:
```json
{
    "body": "<a id='comment:29'></a>sigh... That's CPLEX `:-/`",
    "created_at": "2015-04-14T15:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298539",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:29'></a>sigh... That's CPLEX `:-/`



---

archive/issue_comments_298540.json:
```json
{
    "body": "<a id='comment:30'></a>With GLPK for `G=K_{2,3}` it returns 3 in 2.5s\n\n```\nsage: %time P.dimension()\nCPU times: user 2.58 s, sys: 4 ms, total: 2.59 s\nWall time: 2.58 s\n3\n```\n\nWith CPLEX it takes 252ms. And for `G=K_{3,3}` it returns 4 in 6s.\n\nNathann",
    "created_at": "2015-04-14T15:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298540",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:30'></a>With GLPK for `G=K_{2,3}` it returns 3 in 2.5s

```
sage: %time P.dimension()
CPU times: user 2.58 s, sys: 4 ms, total: 2.59 s
Wall time: 2.58 s
3
```

With CPLEX it takes 252ms. And for `G=K_{3,3}` it returns 4 in 6s.

Nathann



---

archive/issue_comments_298541.json:
```json
{
    "body": "<a id='comment:31'></a>for G=K33 and with GLPK your code seems to be looping forever. In the code you call `init_LP` in the loop, rather than doing a warm restart. This seems to defeat the purpose of constraint generation.\n\nPS. OK, I see, you increase k every time it goes up. Anyhow, one gets stuck on some LP at k=3 here...",
    "created_at": "2015-04-14T15:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298541",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>for G=K33 and with GLPK your code seems to be looping forever. In the code you call `init_LP` in the loop, rather than doing a warm restart. This seems to defeat the purpose of constraint generation.

PS. OK, I see, you increase k every time it goes up. Anyhow, one gets stuck on some LP at k=3 here...



---

archive/issue_comments_298542.json:
```json
{
    "body": "<a id='comment:32'></a>> PS. OK, I see, you increase k every time it goes up.\n\n\nIndeed.\n\n> Anyhow, one gets stuck on some LP at k=3 here...\n\n\nWell, it depends on the graph. And of course it depends on the solver `:-P`",
    "created_at": "2015-04-14T15:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298542",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:32'></a>> PS. OK, I see, you increase k every time it goes up.


Indeed.

> Anyhow, one gets stuck on some LP at k=3 here...


Well, it depends on the graph. And of course it depends on the solver `:-P`



---

archive/issue_comments_298543.json:
```json
{
    "body": "<a id='comment:33'></a>OK, tried this with GUROBI, it did work for K33. Trying for Petersen graph now :-)\n\ntypo:\n\n```\n+            # We check that all color class induce an acyclic graph, and add a\n+            # constraint otherwise.\n```\ndo you mean `classes` ?",
    "created_at": "2015-04-14T16:15:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298543",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>OK, tried this with GUROBI, it did work for K33. Trying for Petersen graph now :-)

typo:

```
+            # We check that all color class induce an acyclic graph, and add a
+            # constraint otherwise.
```
do you mean `classes` ?



---

archive/issue_comments_298544.json:
```json
{
    "body": "<a id='comment:34'></a>Yes. Tell me when you are done with the review and I will fix everything at once.",
    "created_at": "2015-04-14T16:24:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298544",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:34'></a>Yes. Tell me when you are done with the review and I will fix everything at once.



---

archive/issue_comments_298545.json:
```json
{
    "body": "<a id='comment:35'></a>I also notice that there is no objective function in LP. Sometimes specifying some more or less random  non-symmetric function helps to speed things up.",
    "created_at": "2015-04-14T16:24:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298545",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'></a>I also notice that there is no objective function in LP. Sometimes specifying some more or less random  non-symmetric function helps to speed things up.



---

archive/issue_comments_298546.json:
```json
{
    "body": "<a id='comment:36'></a>OK, fix that typo, and I'll set it to positive review, even though the code is very slow...",
    "created_at": "2015-04-14T19:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298546",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:36'></a>OK, fix that typo, and I'll set it to positive review, even though the code is very slow...



---

archive/issue_comments_298547.json:
```json
{
    "body": "<a id='comment:37'></a>The Wikipedia article you refer says that this is sometimes also called \"Dushnik\u2013Miller dimension\". Is this common name for dimension? If so, it should be mentioned somewhere, so that user googling \"Dushnik\u2013Miller sagemath\" will found this.",
    "created_at": "2015-04-14T19:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298547",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:37'></a>The Wikipedia article you refer says that this is sometimes also called "Dushnikâ€“Miller dimension". Is this common name for dimension? If so, it should be mentioned somewhere, so that user googling "Dushnikâ€“Miller sagemath" will found this.



---

archive/issue_comments_298548.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-15T08:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298549.json:
```json
{
    "body": "Changing commit from \"59f0435008dccc2f06d46c2b1293258c694487fa\" to \"ffe181b536ce832a68620f1c7063807315d370a6\"",
    "created_at": "2015-04-15T08:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "59f0435008dccc2f06d46c2b1293258c694487fa" to "ffe181b536ce832a68620f1c7063807315d370a6"



---

archive/issue_comments_298550.json:
```json
{
    "body": "<a id='comment:39'></a>Here it is!\n\nNathann",
    "created_at": "2015-04-15T08:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298550",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:39'></a>Here it is!

Nathann



---

archive/issue_comments_298551.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-04-15T08:55:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298551",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_298552.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2015-04-15T08:55:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298552",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_events_050380.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-04-15T08:55:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "milestone": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17540#event-50380"
}
```



---

archive/issue_comments_298553.json:
```json
{
    "body": "<a id='comment:41'></a>Thaaaaaaaaaaaaaanks ! `;-)`\n\nNathann",
    "created_at": "2015-04-15T09:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298553",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:41'></a>Thaaaaaaaaaaaaaanks ! `;-)`

Nathann



---

archive/issue_comments_298554.json:
```json
{
    "body": "Changing branch from \"u/ncohen/17540\" to \"ffe181b536ce832a68620f1c7063807315d370a6\"",
    "created_at": "2015-04-15T13:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298554",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/ncohen/17540" to "ffe181b536ce832a68620f1c7063807315d370a6"



---

archive/issue_comments_298555.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-04-15T13:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17540#issuecomment-298555",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_050381.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-15T13:58:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17540",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17540#event-50381"
}
```
