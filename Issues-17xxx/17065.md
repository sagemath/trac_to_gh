# Issue 17065: use Maxima's trigrat() in symbolic simplify

archive/issues_016828.json:
```json
{
    "assignees": [],
    "body": "The ask page\nhttp://ask.sagemath.org/question/11365/simplify-trigonometric-expression/\nshowed that trigrat() is not used. What a waste. \n\nKeywords: **maxima, simplification, trigonometric**\n\nBranch/Commit: **[u/rws/use_maxima_s_trigrat___in_symbolic_simplify](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/use_maxima_s_trigrat___in_symbolic_simplify) @ [`3db6f89`](https://github.com/sagemath/sagetrac-mirror/commit/3db6f899c380523dc6d6e940650eede5984a37fa)**\n\nUpstream: **Fixed upstream, but not in a stable release.**\n\nAuthor: **Ralf Stephan**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17065_\n\n",
    "created_at": "2014-09-29T08:50:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "use Maxima's trigrat() in symbolic simplify",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/17065",
    "user": "https://github.com/rwst"
}
```
The ask page
http://ask.sagemath.org/question/11365/simplify-trigonometric-expression/
showed that trigrat() is not used. What a waste. 

Keywords: **maxima, simplification, trigonometric**

Branch/Commit: **[u/rws/use_maxima_s_trigrat___in_symbolic_simplify](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/use_maxima_s_trigrat___in_symbolic_simplify) @ [`3db6f89`](https://github.com/sagemath/sagetrac-mirror/commit/3db6f899c380523dc6d6e940650eede5984a37fa)**

Upstream: **Fixed upstream, but not in a stable release.**

Author: **Ralf Stephan**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/17065_





---

archive/issue_events_244993.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-09-29T08:50:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17065#event-244993"
}
```



---

archive/issue_events_244994.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-09-29T08:50:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17065#event-244994"
}
```



---

archive/issue_events_244995.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-09-29T08:50:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17065#event-244995"
}
```



---

archive/issue_events_244996.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-09-29T08:50:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17065#event-244996"
}
```



---

archive/issue_comments_226061.json:
```json
{
    "body": "Branch: **[u/rws/use_maxima_s_trigrat___in_symbolic_simplify](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/use_maxima_s_trigrat___in_symbolic_simplify)**",
    "created_at": "2014-09-30T13:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226061",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/use_maxima_s_trigrat___in_symbolic_simplify](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/use_maxima_s_trigrat___in_symbolic_simplify)**



---

archive/issue_comments_226062.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nPlease review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3db6f899c380523dc6d6e940650eede5984a37fa\"><code>3db6f89</code></a></td><td><code>17065: do trigrat after trigexpand; doctest</code></td></tr></table>\n",
    "created_at": "2014-09-30T13:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226062",
    "user": "https://github.com/rwst"
}
```

<div id="comment:2" align="right">comment:2</div>

Please review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3db6f899c380523dc6d6e940650eede5984a37fa"><code>3db6f89</code></a></td><td><code>17065: do trigrat after trigexpand; doctest</code></td></tr></table>




---

archive/issue_events_244997.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-09-30T13:50:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17065#event-244997"
}
```



---

archive/issue_comments_226063.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2014-09-30T13:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226063",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_226064.json:
```json
{
    "body": "Commit: **[`3db6f89`](https://github.com/sagemath/sagetrac-mirror/commit/3db6f899c380523dc6d6e940650eede5984a37fa)**",
    "created_at": "2014-09-30T13:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226064",
    "user": "https://github.com/rwst"
}
```

Commit: **[`3db6f89`](https://github.com/sagemath/sagetrac-mirror/commit/3db6f899c380523dc6d6e940650eede5984a37fa)**



---

archive/issue_comments_226065.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nQuite some doctest failures on the buildbot. Some of them are probably not due this particular change, but others most probably are. A few are simply *better* answers now (that's just a matter of changing the expected output), but there are also some that are much *worse*. So the change is not uniformly an improvement.\n\nratsimp claims \"canonical form\", so that's definitely attractive. However, do we know if its rewrites always apply across the whole domain? We'd have to document if it deviates.",
    "created_at": "2014-09-30T17:54:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226065",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:3" align="right">comment:3</div>

Quite some doctest failures on the buildbot. Some of them are probably not due this particular change, but others most probably are. A few are simply *better* answers now (that's just a matter of changing the expected output), but there are also some that are much *worse*. So the change is not uniformly an improvement.

ratsimp claims "canonical form", so that's definitely attractive. However, do we know if its rewrites always apply across the whole domain? We'd have to document if it deviates.



---

archive/issue_events_244998.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2014-09-30T17:54:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17065#event-244998"
}
```



---

archive/issue_events_244999.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2014-09-30T17:54:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17065#event-244999"
}
```



---

archive/issue_comments_226066.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSince setting \"needs_work\" makes the buildbot link disappear, and I'm too stupid to find the results otherwise (I tried), I cannot sort this out without help, sorry.",
    "created_at": "2014-10-02T09:29:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226066",
    "user": "https://github.com/rwst"
}
```

<div id="comment:4" align="right">comment:4</div>

Since setting "needs_work" makes the buildbot link disappear, and I'm too stupid to find the results otherwise (I tried), I cannot sort this out without help, sorry.



---

archive/issue_comments_226067.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThis can even lead to disaster, I think:\n\n```\nsage: F = (4*cos(9*pi/180)^2 - 3)*(4*cos(27*pi/180)^2 - 3)\nsage: F.maxima_methods().trigrat()\nsqrt(5) + 2*cos(7/10*pi) - 2*cos(1/10*pi) - 2*I*sin(3/5*pi) +\n2*I*sin(2/5*pi) + 1\n```\nI really am not interested in seeing `I` turn up in such a simplification, regardless of the \"correct\" answer.",
    "created_at": "2014-10-02T16:02:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226067",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

This can even lead to disaster, I think:

```
sage: F = (4*cos(9*pi/180)^2 - 3)*(4*cos(27*pi/180)^2 - 3)
sage: F.maxima_methods().trigrat()
sqrt(5) + 2*cos(7/10*pi) - 2*cos(1/10*pi) - 2*I*sin(3/5*pi) +
2*I*sin(2/5*pi) + 1
```
I really am not interested in seeing `I` turn up in such a simplification, regardless of the "correct" answer.



---

archive/issue_events_245000.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2014-10-03T15:02:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17065#event-245000"
}
```



---

archive/issue_events_245001.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2014-10-03T15:02:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17065#event-245001"
}
```



---

archive/issue_comments_226068.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@rwst](#comment:4):\n> Since setting \"needs_work\" makes the buildbot link disappear, and I'm too stupid to find the results otherwise (I tried), I cannot sort this out without help, sorry.\n\nOh, that's silly. I'm setting it back to \"needs review\" to make the report visible for now. Hopefully we can have this fixed.",
    "created_at": "2014-10-03T15:02:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226068",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@rwst](#comment:4):
> Since setting "needs_work" makes the buildbot link disappear, and I'm too stupid to find the results otherwise (I tried), I cannot sort this out without help, sorry.

Oh, that's silly. I'm setting it back to "needs review" to make the report visible for now. Hopefully we can have this fixed.



---

archive/issue_events_245002.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-10-03T16:07:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17065#event-245002"
}
```



---

archive/issue_events_245003.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-10-03T16:07:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17065#event-245003"
}
```



---

archive/issue_comments_226069.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThanks, the link is now here: http://build.sagedev.org/trac/builders/trac_builder/builds/1046\nso the ticket can be set to the right status.",
    "created_at": "2014-10-03T16:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226069",
    "user": "https://github.com/rwst"
}
```

<div id="comment:7" align="right">comment:7</div>

Thanks, the link is now here: http://build.sagedev.org/trac/builders/trac_builder/builds/1046
so the ticket can be set to the right status.



---

archive/issue_comments_226070.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@kcrisman](#comment:5):\n> This can even lead to disaster, I think:\n> \n> ```\n> sage: F = (4*cos(9*pi/180)^2 - 3)*(4*cos(27*pi/180)^2 - 3)\n> sage: F.maxima_methods().trigrat()\n> sqrt(5) + 2*cos(7/10*pi) - 2*cos(1/10*pi) - 2*I*sin(3/5*pi) +\n> 2*I*sin(2/5*pi) + 1\n> ```\n> I really am not interested in seeing `I` turn up in such a simplification, regardless of the \"correct\" answer.\n\nWhile this one could be resolved by adding a `trigreduce` to the queue:\n\n```\nsage: F = (4*cos(9*pi/180)^2 - 3)*(4*cos(27*pi/180)^2 - 3)\nsage: F.maxima_methods().trigrat()\nsqrt(5) + 2*cos(7/10*pi) - 2*cos(1/10*pi) - 2*I*sin(3/5*pi) +\n2*I*sin(2/5*pi) + 1\nsage: _.maxima_methods().trigreduce()\nsqrt(5) - 2*cos(3/10*pi) - 2*cos(1/10*pi) + 1\n```\nI cannot see how to fix the doctest failure:\n\n```\nFile \"src/doc/de/thematische_anleitungen/sage_gymnasium.rst\", line 394, in doc.de.thematische_anleitungen.sage_gymnasium\nFailed example:\n    (sin(x + y)/(log(x) + log(y))).simplify_full()\nExpected:\n    (cos(y)*sin(x) + cos(x)*sin(y))/log(x*y)\nGot:\n    ((-I*arctan2(0, x) - I*arctan2(0, y))*sin(x + y) + log(abs(x)*abs(y))*sin(x + y))/(arctan2(0, x)^2 + 2*arctan2(0, x)*arctan2(0, y) + arctan2(0, y)^2 + log(abs(x))^2 + 2*log(abs(x))*log(abs(y)) + log(abs(y))^2)\n```\nthe minimal case being\n\n```\nsage: log(x).maxima_methods().trigrat()\nI*arctan2(0, x) + log(abs(x))\n```",
    "created_at": "2014-10-04T13:34:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226070",
    "user": "https://github.com/rwst"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@kcrisman](#comment:5):
> This can even lead to disaster, I think:
> 
> ```
> sage: F = (4*cos(9*pi/180)^2 - 3)*(4*cos(27*pi/180)^2 - 3)
> sage: F.maxima_methods().trigrat()
> sqrt(5) + 2*cos(7/10*pi) - 2*cos(1/10*pi) - 2*I*sin(3/5*pi) +
> 2*I*sin(2/5*pi) + 1
> ```
> I really am not interested in seeing `I` turn up in such a simplification, regardless of the "correct" answer.

While this one could be resolved by adding a `trigreduce` to the queue:

```
sage: F = (4*cos(9*pi/180)^2 - 3)*(4*cos(27*pi/180)^2 - 3)
sage: F.maxima_methods().trigrat()
sqrt(5) + 2*cos(7/10*pi) - 2*cos(1/10*pi) - 2*I*sin(3/5*pi) +
2*I*sin(2/5*pi) + 1
sage: _.maxima_methods().trigreduce()
sqrt(5) - 2*cos(3/10*pi) - 2*cos(1/10*pi) + 1
```
I cannot see how to fix the doctest failure:

```
File "src/doc/de/thematische_anleitungen/sage_gymnasium.rst", line 394, in doc.de.thematische_anleitungen.sage_gymnasium
Failed example:
    (sin(x + y)/(log(x) + log(y))).simplify_full()
Expected:
    (cos(y)*sin(x) + cos(x)*sin(y))/log(x*y)
Got:
    ((-I*arctan2(0, x) - I*arctan2(0, y))*sin(x + y) + log(abs(x)*abs(y))*sin(x + y))/(arctan2(0, x)^2 + 2*arctan2(0, x)*arctan2(0, y) + arctan2(0, y)^2 + log(abs(x))^2 + 2*log(abs(x))*log(abs(y)) + log(abs(y))^2)
```
the minimal case being

```
sage: log(x).maxima_methods().trigrat()
I*arctan2(0, x) + log(abs(x))
```



---

archive/issue_comments_226071.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOn the other hand, replacing `trigrat` with `trigsimp/trigexpand/trigreduce` will fail in this case:\n\n```\nsage: sin(1/8*pi)*sin(3/8*pi)*sin(5/8*pi)*sin(7/8*pi)\nsin(7/8*pi)*sin(5/8*pi)*sin(3/8*pi)*sin(1/8*pi)\nsage: _.maxima_methods().trigreduce()\nTypeError                                 Traceback (most recent call last)\n/home/ralf/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __init__(self, parent, value, is_name, name)\n    624                 self._name = parent._create(value, name=name)\n    625             except (TypeError, RuntimeError, ValueError) as x:\n--> 626                 raise TypeError(x)\n    627 \n    628     def _latex_(self):\n\nTypeError: ECL says: Unrecognised output from sp1sintcos.\n```",
    "created_at": "2014-10-04T13:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226071",
    "user": "https://github.com/rwst"
}
```

<div id="comment:9" align="right">comment:9</div>

On the other hand, replacing `trigrat` with `trigsimp/trigexpand/trigreduce` will fail in this case:

```
sage: sin(1/8*pi)*sin(3/8*pi)*sin(5/8*pi)*sin(7/8*pi)
sin(7/8*pi)*sin(5/8*pi)*sin(3/8*pi)*sin(1/8*pi)
sage: _.maxima_methods().trigreduce()
TypeError                                 Traceback (most recent call last)
/home/ralf/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __init__(self, parent, value, is_name, name)
    624                 self._name = parent._create(value, name=name)
    625             except (TypeError, RuntimeError, ValueError) as x:
--> 626                 raise TypeError(x)
    627 
    628     def _latex_(self):

TypeError: ECL says: Unrecognised output from sp1sintcos.
```



---

archive/issue_comments_226072.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@rwst](#comment:9):\n> On the other hand, replacing `trigrat` with `trigsimp/trigexpand/trigreduce` will fail in this case:\n> [...]\n\nYes, I noticed that one too. I have confirmed that the same problem arises in Maxima 5.34.1 on SBCL, so it's probably a maxima problem. This is now:\n[https://sourceforge.net/p/maxima/bugs/2818/](https://sourceforge.net/p/maxima/bugs/2818/)",
    "created_at": "2014-10-05T18:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226072",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@rwst](#comment:9):
> On the other hand, replacing `trigrat` with `trigsimp/trigexpand/trigreduce` will fail in this case:
> [...]

Yes, I noticed that one too. I have confirmed that the same problem arises in Maxima 5.34.1 on SBCL, so it's probably a maxima problem. This is now:
[https://sourceforge.net/p/maxima/bugs/2818/](https://sourceforge.net/p/maxima/bugs/2818/)



---

archive/issue_comments_226073.json:
```json
{
    "body": "Upstream: **Fixed upstream, but not in a stable release.**",
    "created_at": "2014-10-31T16:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226073",
    "user": "https://github.com/rwst"
}
```

Upstream: **Fixed upstream, but not in a stable release.**



---

archive/issue_comments_226074.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nWhile some of the mentioned problems have been fixed in recent Maxima, this no longer works:\n> \n> ```\n> sage: F = (4*cos(9*pi/180)^2 - 3)*(4*cos(27*pi/180)^2 - 3)\n> sage: F.maxima_methods().trigrat()\n> sqrt(5) + 2*cos(7/10*pi) - 2*cos(1/10*pi) - 2*I*sin(3/5*pi) +\n> 2*I*sin(2/5*pi) + 1\n> sage: _.maxima_methods().trigreduce()\n> sqrt(5) - 2*cos(3/10*pi) - 2*cos(1/10*pi) + 1\n> ```",
    "created_at": "2015-02-11T15:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17065#issuecomment-226074",
    "user": "https://github.com/rwst"
}
```

<div id="comment:12" align="right">comment:12</div>

While some of the mentioned problems have been fixed in recent Maxima, this no longer works:
> 
> ```
> sage: F = (4*cos(9*pi/180)^2 - 3)*(4*cos(27*pi/180)^2 - 3)
> sage: F.maxima_methods().trigrat()
> sqrt(5) + 2*cos(7/10*pi) - 2*cos(1/10*pi) - 2*I*sin(3/5*pi) +
> 2*I*sin(2/5*pi) + 1
> sage: _.maxima_methods().trigreduce()
> sqrt(5) - 2*cos(3/10*pi) - 2*cos(1/10*pi) + 1
> ```



---

archive/issue_events_245004.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17065",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17065#event-245004"
}
```
