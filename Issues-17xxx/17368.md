# Issue 17368: Make pip a standard package

archive/issues_017131.json:
```json
{
    "assignees": [],
    "body": "Though this package is less than 1 year old, there seems to be a large consensus about this, see the following thread:\n\nhttps://groups.google.com/forum/#!msg/sage-devel/e48IruDu7Kg/bKf_RL4SNk8J\nhttp://thread.gmane.org/gmane.comp.mathematics.sage.devel/71580\n\n\nBranch/Commit: **[7380e00](https://github.com/sagemath/sagetrac-mirror/commit/7380e00fcfecfc5d563b82ba5383cdea9b8f8ba7)**\n\nReviewer: **Andrey Novoseltsev, Jeroen Demeyer**\n\nAuthor: **Thierry Monteil**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17368_\n\n",
    "closed_at": "2014-12-16T13:57:19Z",
    "created_at": "2014-11-19T14:43:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make pip a standard package",
    "type": "issue",
    "updated_at": "2014-12-16T13:57:19Z",
    "url": "https://github.com/sagemath/sage/issues/17368",
    "user": "https://github.com/a-andre"
}
```
Though this package is less than 1 year old, there seems to be a large consensus about this, see the following thread:

https://groups.google.com/forum/#!msg/sage-devel/e48IruDu7Kg/bKf_RL4SNk8J
http://thread.gmane.org/gmane.comp.mathematics.sage.devel/71580


Branch/Commit: **[7380e00](https://github.com/sagemath/sagetrac-mirror/commit/7380e00fcfecfc5d563b82ba5383cdea9b8f8ba7)**

Reviewer: **Andrey Novoseltsev, Jeroen Demeyer**

Author: **Thierry Monteil**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/17368_





---

archive/issue_events_247674.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-11-19T14:43:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247674"
}
```



---

archive/issue_events_247675.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-11-19T14:43:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247675"
}
```



---

archive/issue_events_247676.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-11-19T14:43:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247676"
}
```



---

archive/issue_events_247677.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-11-19T14:43:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247677"
}
```



---

archive/issue_comments_232206.json:
```json
{
    "body": "Branch: **[u/tmonteil/make_pip_a_standard_package](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/make_pip_a_standard_package)**",
    "created_at": "2014-11-19T23:48:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232206",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Branch: **[u/tmonteil/make_pip_a_standard_package](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/make_pip_a_standard_package)**



---

archive/issue_comments_232207.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/107e511f3857ccef93a01d2c22a6caa51b9ecf23\">107e511</a></td><td><code>#17368 forgot to modify install script.</code></td></tr></table>\n",
    "created_at": "2014-11-22T14:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232207",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/107e511f3857ccef93a01d2c22a6caa51b9ecf23">107e511</a></td><td><code>#17368 forgot to modify install script.</code></td></tr></table>




---

archive/issue_comments_232208.json:
```json
{
    "body": "Commit: **[107e511](https://github.com/sagemath/sagetrac-mirror/commit/107e511f3857ccef93a01d2c22a6caa51b9ecf23)**",
    "created_at": "2014-11-22T14:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232208",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[107e511](https://github.com/sagemath/sagetrac-mirror/commit/107e511f3857ccef93a01d2c22a6caa51b9ecf23)**



---

archive/issue_comments_232209.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n+Though this package is less than 1 year old, there seems to be a large consensus about this, see the following thread:\n \n+https://groups.google.com/forum/#!msg/sage-devel/e48IruDu7Kg/bKf_RL4SNk8J\n+http://osdir.com/ml/sage-devel/2014-04/msg00394.html\n+\n``````\n",
    "created_at": "2014-11-22T14:13:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232209",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
+Though this package is less than 1 year old, there seems to be a large consensus about this, see the following thread:
 
+https://groups.google.com/forum/#!msg/sage-devel/e48IruDu7Kg/bKf_RL4SNk8J
+http://osdir.com/ml/sage-devel/2014-04/msg00394.html
+
``````




---

archive/issue_events_247678.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-11-22T14:13:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247678"
}
```



---

archive/issue_comments_232210.json:
```json
{
    "body": "Author: **Thierry Monteil**",
    "created_at": "2014-11-22T14:13:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232210",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Author: **Thierry Monteil**



---

archive/issue_comments_232211.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/013e2e27978d4b48dd38ee3a00825f385286b0ba\">013e2e2</a></td><td><code>#17368 remove a test related to pip being optional.</code></td></tr></table>\n",
    "created_at": "2014-11-22T14:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232211",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/013e2e27978d4b48dd38ee3a00825f385286b0ba">013e2e2</a></td><td><code>#17368 remove a test related to pip being optional.</code></td></tr></table>




---

archive/issue_comments_232212.json:
```json
{
    "body": "Changed commit from **[107e511](https://github.com/sagemath/sagetrac-mirror/commit/107e511f3857ccef93a01d2c22a6caa51b9ecf23)** to **[013e2e2](https://github.com/sagemath/sagetrac-mirror/commit/013e2e27978d4b48dd38ee3a00825f385286b0ba)**",
    "created_at": "2014-11-22T14:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232212",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[107e511](https://github.com/sagemath/sagetrac-mirror/commit/107e511f3857ccef93a01d2c22a6caa51b9ecf23)** to **[013e2e2](https://github.com/sagemath/sagetrac-mirror/commit/013e2e27978d4b48dd38ee3a00825f385286b0ba)**



---

archive/issue_events_247679.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2014-12-01T23:43:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247679"
}
```



---

archive/issue_events_247680.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2014-12-01T23:43:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247680"
}
```



---

archive/issue_comments_232213.json:
```json
{
    "body": "Reviewer: **Andrey Novoseltsev**",
    "created_at": "2014-12-01T23:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232213",
    "user": "https://github.com/novoselt"
}
```

Reviewer: **Andrey Novoseltsev**



---

archive/issue_comments_232214.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n\n```\npip-1.5.6\n====================================================\nSetting up build directory for pip-1.5.6\nFinished set up\n****************************************************\nHost system:\nLinux tamiyo 3.7.10-gentoo #4 SMP PREEMPT Thu Oct 31 21:23:56 CET 2013 x86_64 Intel(R) Core(TM) i7-2640M CPU @ 2.80GHz GenuineIntel GNU/Linux\n****************************************************\nC compiler: gcc\nC compiler version:\nUsing built-in specs.\nCOLLECT_GCC=/usr/x86_64-pc-linux-gnu/gcc-bin/4.6.4/gcc\nCOLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-pc-linux-gnu/4.6.4/lto-wrapper\nTarget: x86_64-pc-linux-gnu\nConfigured with: /var/tmp/portage/sys-devel/gcc-4.6.4/work/gcc-4.6.4/configure --host=x86_64-pc-linux-gnu --build=x86_64-pc-linux-gnu --prefix=/usr --bindir=/usr/x86_64-pc-linux-gnu/gcc-bin/4.6.4 --includedir=/usr/lib/gcc/x86_64-pc-linux-gnu/4.6.4/include --datadir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.6.4 --mandir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.6.4/man --infodir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.6.4/info --with-gxx-include-dir=/usr/lib/gcc/x86_64-pc-linux-gnu/4.6.4/include/g++-v4 --with-python-dir=/share/gcc-data/x86_64-pc-linux-gnu/4.6.4/python --enable-languages=c,c++,fortran --enable-obsolete --enable-secureplt --disable-werror --with-system-zlib --enable-nls --without-included-gettext --enable-checking=release --with-bugurl=https://bugs.gentoo.org/ --with-pkgversion='Gentoo 4.6.4 p1.2, pie-0.5.2' --enable-libstdcxx-time --enable-shared --enable-threads=posix --enable-__cxa_atexit --enable-clocale=gnu --enable-multilib --disable-altivec --disable-fixed-point --enable-targets=all --disable-libgcj --enable-libgomp --disable-libmudflap --disable-libssp --enable-lto --without-cloog --without-ppl\nThread model: posix\ngcc version 4.6.4 (Gentoo 4.6.4 p1.2, pie-0.5.2) \n****************************************************\nTraceback (most recent call last):\n  File \"setup.py\", line 6, in <module>\n    from setuptools import setup, find_packages\nImportError: No module named setuptools\n```",
    "created_at": "2014-12-02T09:18:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232214",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>


```
pip-1.5.6
====================================================
Setting up build directory for pip-1.5.6
Finished set up
****************************************************
Host system:
Linux tamiyo 3.7.10-gentoo #4 SMP PREEMPT Thu Oct 31 21:23:56 CET 2013 x86_64 Intel(R) Core(TM) i7-2640M CPU @ 2.80GHz GenuineIntel GNU/Linux
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=/usr/x86_64-pc-linux-gnu/gcc-bin/4.6.4/gcc
COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-pc-linux-gnu/4.6.4/lto-wrapper
Target: x86_64-pc-linux-gnu
Configured with: /var/tmp/portage/sys-devel/gcc-4.6.4/work/gcc-4.6.4/configure --host=x86_64-pc-linux-gnu --build=x86_64-pc-linux-gnu --prefix=/usr --bindir=/usr/x86_64-pc-linux-gnu/gcc-bin/4.6.4 --includedir=/usr/lib/gcc/x86_64-pc-linux-gnu/4.6.4/include --datadir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.6.4 --mandir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.6.4/man --infodir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.6.4/info --with-gxx-include-dir=/usr/lib/gcc/x86_64-pc-linux-gnu/4.6.4/include/g++-v4 --with-python-dir=/share/gcc-data/x86_64-pc-linux-gnu/4.6.4/python --enable-languages=c,c++,fortran --enable-obsolete --enable-secureplt --disable-werror --with-system-zlib --enable-nls --without-included-gettext --enable-checking=release --with-bugurl=https://bugs.gentoo.org/ --with-pkgversion='Gentoo 4.6.4 p1.2, pie-0.5.2' --enable-libstdcxx-time --enable-shared --enable-threads=posix --enable-__cxa_atexit --enable-clocale=gnu --enable-multilib --disable-altivec --disable-fixed-point --enable-targets=all --disable-libgcj --enable-libgomp --disable-libmudflap --disable-libssp --enable-lto --without-cloog --without-ppl
Thread model: posix
gcc version 4.6.4 (Gentoo 4.6.4 p1.2, pie-0.5.2) 
****************************************************
Traceback (most recent call last):
  File "setup.py", line 6, in <module>
    from setuptools import setup, find_packages
ImportError: No module named setuptools
```



---

archive/issue_events_247681.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-02T09:18:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247681"
}
```



---

archive/issue_events_247682.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-02T09:18:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247682"
}
```



---

archive/issue_comments_232215.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nNote that for pip to work, python must be built with OpenSSL support. Otherwise one gets\n\n```\nImportError: cannot import name HTTPSHandler\n```\nSo if we make pip a standard package, we would have to make OpenSSL a requirement for sage again (and/or use the openssl package for sage)",
    "created_at": "2014-12-03T09:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232215",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:7" align="right">comment:7</div>

Note that for pip to work, python must be built with OpenSSL support. Otherwise one gets

```
ImportError: cannot import name HTTPSHandler
```
So if we make pip a standard package, we would have to make OpenSSL a requirement for sage again (and/or use the openssl package for sage)



---

archive/issue_comments_232216.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@jdemeyer](#comment:6):\n> pip-1.5.6\n> [...]\n> ImportError: No module named setuptools\n\nThanks for noticing, it worked for me and `setuptools` was not indicated as a dependency in `SPKG.txt`. I will fix this soon (but i am working on another branch from another version right now).",
    "created_at": "2014-12-03T09:10:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232216",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@jdemeyer](#comment:6):
> pip-1.5.6
> [...]
> ImportError: No module named setuptools

Thanks for noticing, it worked for me and `setuptools` was not indicated as a dependency in `SPKG.txt`. I will fix this soon (but i am working on another branch from another version right now).



---

archive/issue_comments_232217.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@nbruin](#comment:7):\n> Note that for pip to work, python must be built with OpenSSL support. Otherwise one gets\n> \n> ```\n> ImportError: cannot import name HTTPSHandler\n> ```\n> So if we make pip a standard package, we would have to make OpenSSL a requirement for sage again (and/or use the openssl package for sage)\n\nThis is a more serious issue, since IIRC, `openssl` can not be a standard package because of licensing stuff (which i do not understand well). Do you know if `HTTPSHandler` works with other SSL implementations (e.g. gnuTLS) ?",
    "created_at": "2014-12-03T09:15:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232217",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@nbruin](#comment:7):
> Note that for pip to work, python must be built with OpenSSL support. Otherwise one gets
> 
> ```
> ImportError: cannot import name HTTPSHandler
> ```
> So if we make pip a standard package, we would have to make OpenSSL a requirement for sage again (and/or use the openssl package for sage)

This is a more serious issue, since IIRC, `openssl` can not be a standard package because of licensing stuff (which i do not understand well). Do you know if `HTTPSHandler` works with other SSL implementations (e.g. gnuTLS) ?



---

archive/issue_comments_232218.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@sagetrac-tmonteil](#comment:9):\n> This is a more serious issue, since IIRC, `openssl` can not be a standard package because of licensing stuff (which i do not understand well). Do you know if `HTTPSHandler` works with other SSL implementations (e.g. gnuTLS) ?\n\nIt depends on whether python's standard \"Lib/ssl.py\" module can be made to work with another implementation. As far as I can tell, `Modules/_ssl.c` is the real implementation underneath and that file looks like it's wired into `openssl` (it imports its headers unconditionally without alternatives listed). There may exist drop-in replacements? It's the kind of module you do not want to take any chances with because of security.\n\nSolution I see:\n- pip is not *essential* for basic sage functionality, so while it's standard, its functioning can be conditional on recommended dependencies (rather than making them hard dependencies).\n- these dependencies can be met by a system-wide openssl install or by `sage -i openssl; make`\n\nThe big problem would probably be how we ship binaries, where \"remaking\" isn't an option. Can we just build WITH system openssl support and not include the shared library? Hopefully that would only lead to a fail at `import ssl`.",
    "created_at": "2014-12-03T16:34:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232218",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@sagetrac-tmonteil](#comment:9):
> This is a more serious issue, since IIRC, `openssl` can not be a standard package because of licensing stuff (which i do not understand well). Do you know if `HTTPSHandler` works with other SSL implementations (e.g. gnuTLS) ?

It depends on whether python's standard "Lib/ssl.py" module can be made to work with another implementation. As far as I can tell, `Modules/_ssl.c` is the real implementation underneath and that file looks like it's wired into `openssl` (it imports its headers unconditionally without alternatives listed). There may exist drop-in replacements? It's the kind of module you do not want to take any chances with because of security.

Solution I see:
- pip is not *essential* for basic sage functionality, so while it's standard, its functioning can be conditional on recommended dependencies (rather than making them hard dependencies).
- these dependencies can be met by a system-wide openssl install or by `sage -i openssl; make`

The big problem would probably be how we ship binaries, where "remaking" isn't an option. Can we just build WITH system openssl support and not include the shared library? Hopefully that would only lead to a fail at `import ssl`.



---

archive/issue_comments_232219.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf375679641dcd174babbc95f883551f3349b627\">bf37567</a></td><td><code>#17368 : add setuptools as a dependency.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7380e00fcfecfc5d563b82ba5383cdea9b8f8ba7\">7380e00</a></td><td><code>#17368 add pip to COPYING.txt</code></td></tr></table>\n",
    "created_at": "2014-12-08T13:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232219",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf375679641dcd174babbc95f883551f3349b627">bf37567</a></td><td><code>#17368 : add setuptools as a dependency.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7380e00fcfecfc5d563b82ba5383cdea9b8f8ba7">7380e00</a></td><td><code>#17368 add pip to COPYING.txt</code></td></tr></table>




---

archive/issue_comments_232220.json:
```json
{
    "body": "Changed commit from **[013e2e2](https://github.com/sagemath/sagetrac-mirror/commit/013e2e27978d4b48dd38ee3a00825f385286b0ba)** to **[7380e00](https://github.com/sagemath/sagetrac-mirror/commit/7380e00fcfecfc5d563b82ba5383cdea9b8f8ba7)**",
    "created_at": "2014-12-08T13:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232220",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[013e2e2](https://github.com/sagemath/sagetrac-mirror/commit/013e2e27978d4b48dd38ee3a00825f385286b0ba)** to **[7380e00](https://github.com/sagemath/sagetrac-mirror/commit/7380e00fcfecfc5d563b82ba5383cdea9b8f8ba7)**



---

archive/issue_comments_232221.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Though this package is less than 1 year old, there seems to be a large consensus about this, see the following thread:\n \n https://groups.google.com/forum/#!msg/sage-devel/e48IruDu7Kg/bKf_RL4SNk8J\n-http://osdir.com/ml/sage-devel/2014-04/msg00394.html\n+http://thread.gmane.org/gmane.comp.mathematics.sage.devel/71580\n \n``````\n",
    "created_at": "2014-12-09T17:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232221",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Though this package is less than 1 year old, there seems to be a large consensus about this, see the following thread:
 
 https://groups.google.com/forum/#!msg/sage-devel/e48IruDu7Kg/bKf_RL4SNk8J
-http://osdir.com/ml/sage-devel/2014-04/msg00394.html
+http://thread.gmane.org/gmane.comp.mathematics.sage.devel/71580
 
``````




---

archive/issue_comments_232222.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@nbruin](#comment:10):\n> The big problem would probably be how we ship binaries, where \"remaking\" isn't an option. Can we just build WITH system openssl support and not include the shared library? Hopefully that would only lead to a fail at `import ssl`.\n\nIf i understand correctly, official Sage binaries are built with the system's libssl-dev, so there should not be a problem for those (the user only have to install the libssl package from her distro to have it working).\n\nIt seems also that a similar dependency problem happens for ipython notebook:\nhttps://groups.google.com/forum/#!topic/sage-release/1teX_pCj8w0\nhttp://article.gmane.org/gmane.comp.mathematics.sage.release/2310",
    "created_at": "2014-12-09T17:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232222",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@nbruin](#comment:10):
> The big problem would probably be how we ship binaries, where "remaking" isn't an option. Can we just build WITH system openssl support and not include the shared library? Hopefully that would only lead to a fail at `import ssl`.

If i understand correctly, official Sage binaries are built with the system's libssl-dev, so there should not be a problem for those (the user only have to install the libssl package from her distro to have it working).

It seems also that a similar dependency problem happens for ipython notebook:
https://groups.google.com/forum/#!topic/sage-release/1teX_pCj8w0
http://article.gmane.org/gmane.comp.mathematics.sage.release/2310



---

archive/issue_events_247683.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-12-09T17:36:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247683"
}
```



---

archive/issue_events_247684.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-12-09T17:36:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247684"
}
```



---

archive/issue_comments_232223.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@nbruin](#comment:10):\n> - pip is not *essential* for basic sage functionality, so while it's standard, its functioning can be conditional on recommended dependencies (rather than making them hard dependencies).\n\nThis is true for the moment, but we have to ensure that this remains true, that we never use `pip` to install a standard package.",
    "created_at": "2014-12-09T18:02:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232223",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@nbruin](#comment:10):
> - pip is not *essential* for basic sage functionality, so while it's standard, its functioning can be conditional on recommended dependencies (rather than making them hard dependencies).

This is true for the moment, but we have to ensure that this remains true, that we never use `pip` to install a standard package.



---

archive/issue_comments_232224.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nBut part of the argument for having pip as standard is precisely to use it to install some of the packages, isn't it? Maybe openssl has to be made into a standard dependency. Both sagenb and ipython notebooks have issues without it already.",
    "created_at": "2014-12-11T21:57:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232224",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:14" align="right">comment:14</div>

But part of the argument for having pip as standard is precisely to use it to install some of the packages, isn't it? Maybe openssl has to be made into a standard dependency. Both sagenb and ipython notebooks have issues without it already.



---

archive/issue_comments_232225.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@novoselt](#comment:14):\n> But part of the argument for having pip as standard is precisely to use it to install some of the packages, isn't it?\n\nI'm not so sure it is. I certainly don't think it's desirable that building sage from a pre-downloaded tarball would need internet access to download further components. For one thing it would make it possible to get \"failure to build sage due to inavailability of www.pypi.org\", (or whatever error would result in if that were to happen).",
    "created_at": "2014-12-12T01:39:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232225",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@novoselt](#comment:14):
> But part of the argument for having pip as standard is precisely to use it to install some of the packages, isn't it?

I'm not so sure it is. I certainly don't think it's desirable that building sage from a pre-downloaded tarball would need internet access to download further components. For one thing it would make it possible to get "failure to build sage due to inavailability of www.pypi.org", (or whatever error would result in if that were to happen).



---

archive/issue_comments_232226.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt has functionality to install pre-downloaded packages. Perhaps there will be no need for security library for this use.",
    "created_at": "2014-12-12T01:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232226",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:16" align="right">comment:16</div>

It has functionality to install pre-downloaded packages. Perhaps there will be no need for security library for this use.



---

archive/issue_comments_232227.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@novoselt](#comment:16):\n> It has functionality to install pre-downloaded packages.\n\nOn the other hand, for pre-downloaded Python packages, usually a simple `python setup.py install` works, so there is no real gain from using `pip`. For standard packages, we already have a build system which works.\n\nI thought the main motivation for `pip` was to be able to easily install *optional* packages.",
    "created_at": "2014-12-12T09:48:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232227",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@novoselt](#comment:16):
> It has functionality to install pre-downloaded packages.

On the other hand, for pre-downloaded Python packages, usually a simple `python setup.py install` works, so there is no real gain from using `pip`. For standard packages, we already have a build system which works.

I thought the main motivation for `pip` was to be able to easily install *optional* packages.



---

archive/issue_comments_232228.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@sagetrac-tmonteil](#comment:12):\n> If i understand correctly, official Sage binaries are built with the system's libssl-dev, so there should not be a problem for those (the user only have to install the libssl package from her distro to have it working).\n\nYet it is surprisingly easy to miss that dependency. My system (fedora) ended up having a system python where openssl works, but sage-python builds without its support. I would not have minded if the build would have warned me at the start that openssl support isn't present and/or offered to download the openssl.spkg.",
    "created_at": "2014-12-12T11:27:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232228",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@sagetrac-tmonteil](#comment:12):
> If i understand correctly, official Sage binaries are built with the system's libssl-dev, so there should not be a problem for those (the user only have to install the libssl package from her distro to have it working).

Yet it is surprisingly easy to miss that dependency. My system (fedora) ended up having a system python where openssl works, but sage-python builds without its support. I would not have minded if the build would have warned me at the start that openssl support isn't present and/or offered to download the openssl.spkg.



---

archive/issue_comments_232229.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@nbruin](#comment:18):\n> I would not have minded if the build would have warned me at the start that openssl support isn't present and/or offered to download the openssl.spkg.\n\nI would mind since I don't care about OpenSSL.\n\nAnyway, back to the ticket: I'm testing the build now and if that works, it can be set back to positive_review.",
    "created_at": "2014-12-13T08:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232229",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@nbruin](#comment:18):
> I would not have minded if the build would have warned me at the start that openssl support isn't present and/or offered to download the openssl.spkg.

I would mind since I don't care about OpenSSL.

Anyway, back to the ticket: I'm testing the build now and if that works, it can be set back to positive_review.



---

archive/issue_events_247685.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-13T08:12:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247685"
}
```



---

archive/issue_events_247686.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-13T08:12:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247686"
}
```



---

archive/issue_comments_232230.json:
```json
{
    "body": "Changed reviewer from **Andrey Novoseltsev** to **Andrey Novoseltsev, Jeroen Demeyer**",
    "created_at": "2014-12-13T08:12:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232230",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Andrey Novoseltsev** to **Andrey Novoseltsev, Jeroen Demeyer**



---

archive/issue_comments_232231.json:
```json
{
    "body": "Changed branch from **[u/tmonteil/make_pip_a_standard_package](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/make_pip_a_standard_package)** to **[7380e00](https://github.com/sagemath/sagetrac-mirror/commit/7380e00fcfecfc5d563b82ba5383cdea9b8f8ba7)**",
    "created_at": "2014-12-16T13:57:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17368#issuecomment-232231",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/tmonteil/make_pip_a_standard_package](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/make_pip_a_standard_package)** to **[7380e00](https://github.com/sagemath/sagetrac-mirror/commit/7380e00fcfecfc5d563b82ba5383cdea9b8f8ba7)**



---

archive/issue_events_247687.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-16T13:57:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247687"
}
```



---

archive/issue_events_247688.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b419b3ca5ec4ee9ec000671e3883daeddcb0cf87",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-12-16T13:57:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17368",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17368#event-247688"
}
```
