# Issue 17436: fix bug with leading zeros in Necklaces

archive/issues_017199.json:
```json
{
    "body": "Leading zeros in the input are not currently handled properly in `Necklaces`.  This was already corrected in `LyndonWords` in #12997 which calls the code in necklace.py and removes leading zeros.\n\nThe documentation in necklace.py should also be cleaned up to current standards and some small trivial speedups done.\n\nCC:  @tscrim\n\nKeywords: necklace, Lyndon words\n\nBranch/Commit: 0329a5afced3c0e20c665c663d6d36824ab1c966\n\nReviewer: Travis Scrimshaw\n\nAuthor: Mike Zabrocki\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17436\n\n",
    "closed_at": "2014-12-04T16:12:04Z",
    "created_at": "2014-12-03T02:06:35Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "fix bug with leading zeros in Necklaces",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17436",
    "user": "https://github.com/zabrocki"
}
```
Leading zeros in the input are not currently handled properly in `Necklaces`.  This was already corrected in `LyndonWords` in #12997 which calls the code in necklace.py and removes leading zeros.

The documentation in necklace.py should also be cleaned up to current standards and some small trivial speedups done.

CC:  @tscrim

Keywords: necklace, Lyndon words

Branch/Commit: 0329a5afced3c0e20c665c663d6d36824ab1c966

Reviewer: Travis Scrimshaw

Author: Mike Zabrocki

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17436





---

archive/issue_comments_296149.json:
```json
{
    "body": "<a id='comment:1'></a>There seem to be minor bugs that one would not necessarily pick up on except by reading the code closely.  For example:\n\n```\nsage: Necklaces([1,0,1]).list()[0]\n[1, 3]\nsage: Necklaces([1,1]).list()[0] in Necklaces([1,1])\nTrue\nsage: Necklaces([1,0,1]).list()[0] in Necklaces([1,0,1])\nFalse\n```\nThe reason is that implicitly the code is assuming that there are no zeros in the content/evaluation vector and it checks if the value of the entries in the necklace smaller or equal to the size of the necklace.  If that check fails it returns False.",
    "created_at": "2014-12-03T02:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296149",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:1'></a>There seem to be minor bugs that one would not necessarily pick up on except by reading the code closely.  For example:

```
sage: Necklaces([1,0,1]).list()[0]
[1, 3]
sage: Necklaces([1,1]).list()[0] in Necklaces([1,1])
True
sage: Necklaces([1,0,1]).list()[0] in Necklaces([1,0,1])
False
```
The reason is that implicitly the code is assuming that there are no zeros in the content/evaluation vector and it checks if the value of the entries in the necklace smaller or equal to the size of the necklace.  If that check fails it returns False.



---

archive/issue_comments_296150.json:
```json
{
    "body": "Changing author from \"\" to \"Mike Zabrocki\"",
    "created_at": "2014-12-03T15:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296150",
    "user": "https://github.com/zabrocki"
}
```

Changing author from "" to "Mike Zabrocki"



---

archive/issue_comments_296151.json:
```json
{
    "body": "Changing branch from \"\" to \"refs/heads/public/ticket/17436/zabrocki/necklaces\"",
    "created_at": "2014-12-03T15:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296151",
    "user": "https://github.com/zabrocki"
}
```

Changing branch from "" to "refs/heads/public/ticket/17436/zabrocki/necklaces"



---

archive/issue_comments_296152.json:
```json
{
    "body": "Changing commit from \"\" to \"b0fc6565335c87b7020f487382c574bd38fba215\"",
    "created_at": "2014-12-03T15:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296152",
    "user": "https://github.com/zabrocki"
}
```

Changing commit from "" to "b0fc6565335c87b7020f487382c574bd38fba215"



---

archive/issue_comments_296153.json:
```json
{
    "body": "Changing branch from \"refs/heads/public/ticket/17436/zabrocki/necklaces\" to \"public/ticket/17436/zabrocki/necklaces\"",
    "created_at": "2014-12-03T15:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296153",
    "user": "https://github.com/zabrocki"
}
```

Changing branch from "refs/heads/public/ticket/17436/zabrocki/necklaces" to "public/ticket/17436/zabrocki/necklaces"



---

archive/issue_comments_296154.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2014-12-03T15:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296154",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_296155.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-03T15:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296155",
    "user": "https://github.com/zabrocki"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_296156.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-03T15:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296156",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_296157.json:
```json
{
    "body": "Changing commit from \"b0fc6565335c87b7020f487382c574bd38fba215\" to \"f6fd71690bfe05bd1e4a127d7b062941275070bf\"",
    "created_at": "2014-12-03T15:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296157",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b0fc6565335c87b7020f487382c574bd38fba215" to "f6fd71690bfe05bd1e4a127d7b062941275070bf"



---

archive/issue_comments_296158.json:
```json
{
    "body": "<a id='comment:6'></a>Looks good overall. I made some additional doc tweaks and some (micro-)optimizations:\n\n```\nsage: x = 0\nsage: %timeit if not x: pass\n10000000 loops, best of 3: 105 ns per loop\nsage: %timeit if x: pass\n10000000 loops, best of 3: 89.7 ns per loop\nsage: %timeit if x == 0: pass\n1000000 loops, best of 3: 429 ns per loop\nsage: %timeit if x != 0: pass\n1000000 loops, best of 3: 418 ns per loop\nsage: x = int(0)\nsage: %timeit if not x: pass\n10000000 loops, best of 3: 105 ns per loop\nsage: %timeit if x: pass\n10000000 loops, best of 3: 89.7 ns per loop\nsage: y = int(0)\nsage: %timeit if x != y: pass\n10000000 loops, best of 3: 141 ns per loop\nsage: %timeit if x == y: pass\n10000000 loops, best of 3: 158 ns per loop\n```\n(similar timings for the list comparisons). Most importantly, I deprecated the `e` attribute and changed `content` into a method calling `_content` attribute (since it is suppose to be immutable). If you're happy with my changes, then positive review.\n\n---\nNew commits:",
    "created_at": "2014-12-04T00:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296158",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>Looks good overall. I made some additional doc tweaks and some (micro-)optimizations:

```
sage: x = 0
sage: %timeit if not x: pass
10000000 loops, best of 3: 105 ns per loop
sage: %timeit if x: pass
10000000 loops, best of 3: 89.7 ns per loop
sage: %timeit if x == 0: pass
1000000 loops, best of 3: 429 ns per loop
sage: %timeit if x != 0: pass
1000000 loops, best of 3: 418 ns per loop
sage: x = int(0)
sage: %timeit if not x: pass
10000000 loops, best of 3: 105 ns per loop
sage: %timeit if x: pass
10000000 loops, best of 3: 89.7 ns per loop
sage: y = int(0)
sage: %timeit if x != y: pass
10000000 loops, best of 3: 141 ns per loop
sage: %timeit if x == y: pass
10000000 loops, best of 3: 158 ns per loop
```
(similar timings for the list comparisons). Most importantly, I deprecated the `e` attribute and changed `content` into a method calling `_content` attribute (since it is suppose to be immutable). If you're happy with my changes, then positive review.

---
New commits:



---

archive/issue_comments_296159.json:
```json
{
    "body": "Changing branch from \"public/ticket/17436/zabrocki/necklaces\" to \"public/ticket/17436/tscrim/necklaces\"",
    "created_at": "2014-12-04T00:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296159",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "public/ticket/17436/zabrocki/necklaces" to "public/ticket/17436/tscrim/necklaces"



---

archive/issue_comments_296160.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n Leading zeros in the input are not currently handled properly in `Necklaces`.  This was already corrected in `LyndonWords` in #12997 which calls the code in necklace.py and removes leading zeros.\n \n-The documentation in necklace.py should also be cleaned up to current standards.\n+The documentation in necklace.py should also be cleaned up to current standards and some small trivial speedups done.\n``````\n",
    "created_at": "2014-12-04T00:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296160",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 Leading zeros in the input are not currently handled properly in `Necklaces`.  This was already corrected in `LyndonWords` in #12997 which calls the code in necklace.py and removes leading zeros.
 
-The documentation in necklace.py should also be cleaned up to current standards.
+The documentation in necklace.py should also be cleaned up to current standards and some small trivial speedups done.
``````




---

archive/issue_comments_296161.json:
```json
{
    "body": "Changing commit from \"f6fd71690bfe05bd1e4a127d7b062941275070bf\" to \"0329a5afced3c0e20c665c663d6d36824ab1c966\"",
    "created_at": "2014-12-04T00:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296161",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "f6fd71690bfe05bd1e4a127d7b062941275070bf" to "0329a5afced3c0e20c665c663d6d36824ab1c966"



---

archive/issue_comments_296162.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2014-12-04T00:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296162",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_296163.json:
```json
{
    "body": "<a id='comment:7'></a>I didn't even think of deprecating `e`.  Thats covering your bases.  I think your changes look great.  Thanks for the review/cleanup.",
    "created_at": "2014-12-04T00:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296163",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:7'></a>I didn't even think of deprecating `e`.  Thats covering your bases.  I think your changes look great.  Thanks for the review/cleanup.



---

archive/issue_comments_296164.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-04T00:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296164",
    "user": "https://github.com/zabrocki"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_050175.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-04T16:12:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17436#event-50175"
}
```



---

archive/issue_comments_296165.json:
```json
{
    "body": "Changing branch from \"public/ticket/17436/tscrim/necklaces\" to \"0329a5afced3c0e20c665c663d6d36824ab1c966\"",
    "created_at": "2014-12-04T16:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296165",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/ticket/17436/tscrim/necklaces" to "0329a5afced3c0e20c665c663d6d36824ab1c966"



---

archive/issue_comments_296166.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-12-04T16:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17436#issuecomment-296166",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
