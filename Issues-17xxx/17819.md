# Issue 17819: Use unsigned long for Integer.divisors

archive/issues_017582.json:
```json
{
    "assignees": [],
    "body": "The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `unsigned long` for this. One advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`. This will also be faster for small inputs on 32-bit systems. On 64-bit systems, there should be no speed difference (except perhaps a small speed-up due to skipping the `mpz_longlong` overhead and the fact that we use 64 instead of 63 bits).\n\nDepends on #17794\nDepends on #10257\n\nComponent: **c_lib**\n\nAuthor: **Jeroen Demeyer**\n\nBranch/Commit: **[`1194cb7`](https://github.com/sagemath/sagetrac-mirror/commit/1194cb75acb96340b16f9a256aa55e0a3c2eb38c)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17819_\n\n",
    "closed_at": "2015-03-03T00:25:07Z",
    "created_at": "2015-02-20T19:27:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20c%20lib",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Use unsigned long for Integer.divisors",
    "type": "issue",
    "updated_at": "2015-03-03T00:25:07Z",
    "url": "https://github.com/sagemath/sage/issues/17819",
    "user": "https://github.com/jdemeyer"
}
```
The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `unsigned long` for this. One advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`. This will also be faster for small inputs on 32-bit systems. On 64-bit systems, there should be no speed difference (except perhaps a small speed-up due to skipping the `mpz_longlong` overhead and the fact that we use 64 instead of 63 bits).

Depends on #17794
Depends on #10257

Component: **c_lib**

Author: **Jeroen Demeyer**

Branch/Commit: **[`1194cb7`](https://github.com/sagemath/sagetrac-mirror/commit/1194cb75acb96340b16f9a256aa55e0a3c2eb38c)**

Reviewer: **Fran√ßois Bissey**

_Issue created by migration from https://trac.sagemath.org/ticket/17819_





---

archive/issue_events_251365.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-20T19:27:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251365"
}
```



---

archive/issue_events_251366.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-20T19:27:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20c%20lib",
    "label_color": "0000b0",
    "label_name": "c: c lib",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251366"
}
```



---

archive/issue_events_251367.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-20T19:27:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251367"
}
```



---

archive/issue_events_251368.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-20T19:27:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251368"
}
```



---

archive/issue_comments_240846.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `uintmax_t` for this, which is at least as large as `long long`. Another advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`.\n+The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `uintmax_t` for this, which is at least as large as `long long`. Another advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`. Instead we can use the standard MPIR function `mpz_set_ux`.\n``````\n",
    "created_at": "2015-02-20T19:44:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240846",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `uintmax_t` for this, which is at least as large as `long long`. Another advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`.
+The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `uintmax_t` for this, which is at least as large as `long long`. Another advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`. Instead we can use the standard MPIR function `mpz_set_ux`.
``````




---

archive/issue_comments_240847.json:
```json
{
    "body": "Branch: **[u/jdemeyer/ticket/17819](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17819)**",
    "created_at": "2015-02-20T21:14:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240847",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/ticket/17819](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17819)**



---

archive/issue_events_251369.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-20T21:14:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251369"
}
```



---

archive/issue_comments_240848.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fae8cecadc86555f7962a903bb686f2727ff2f58\"><code>fae8cec</code></a></td><td><code>Use uintmax_t for Integer.divisors</code></td></tr></table>\n",
    "created_at": "2015-02-20T21:14:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240848",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fae8cecadc86555f7962a903bb686f2727ff2f58"><code>fae8cec</code></a></td><td><code>Use uintmax_t for Integer.divisors</code></td></tr></table>




---

archive/issue_comments_240849.json:
```json
{
    "body": "Commit: **[`fae8cec`](https://github.com/sagemath/sagetrac-mirror/commit/fae8cecadc86555f7962a903bb686f2727ff2f58)**",
    "created_at": "2015-02-20T21:14:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240849",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`fae8cec`](https://github.com/sagemath/sagetrac-mirror/commit/fae8cecadc86555f7962a903bb686f2727ff2f58)**



---

archive/issue_comments_240850.json:
```json
{
    "body": "Changed commit from **[`fae8cec`](https://github.com/sagemath/sagetrac-mirror/commit/fae8cecadc86555f7962a903bb686f2727ff2f58)** to **[`6f851b9`](https://github.com/sagemath/sagetrac-mirror/commit/6f851b9eb96f73930aa265673679434eecfac6a6)**",
    "created_at": "2015-02-21T10:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240850",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fae8cec`](https://github.com/sagemath/sagetrac-mirror/commit/fae8cecadc86555f7962a903bb686f2727ff2f58)** to **[`6f851b9`](https://github.com/sagemath/sagetrac-mirror/commit/6f851b9eb96f73930aa265673679434eecfac6a6)**



---

archive/issue_comments_240851.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ba47f0ef294af2b0ac5736a36144a5f77bb6c36\"><code>6ba47f0</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/10257</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/307e5264e155ccb72fd3cc28d08013a8b9ce647b\"><code>307e526</code></a></td><td><code>Revert raise MemoryError changes from #12212</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd8407bcf29c42dadade7bed183cc68ebf310b69\"><code>cd8407b</code></a></td><td><code>Merge branch 'ticket/12212_revert_raise' into ticket/10257</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa0612d0a7ad58cc403f157b42877d29ba0371fa\"><code>fa0612d</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/10257</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c561e2e05851c55a4bddd9045768d0559a456fa5\"><code>c561e2e</code></a></td><td><code>Fix check_allocarray() failure doctest on OS X</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6650ca79a28bd96cd66d3dc3b3b917bd91c415e5\"><code>6650ca7</code></a></td><td><code>Add csage dependencies in Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c37e933111f3cc5ccd4c3e673806782c32bbfd74\"><code>c37e933</code></a></td><td><code>Merge ticket/17794 into ticket/10257</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/352ffb830e05b0935dfe2e6ca26554d5bc388f10\"><code>352ffb8</code></a></td><td><code>Remove check for -1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e3901d5e6f6cf4e9341cc54edd55de5863ff654\"><code>5e3901d</code></a></td><td><code>Merge ticket/10257 into ticket/17819</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f851b9eb96f73930aa265673679434eecfac6a6\"><code>6f851b9</code></a></td><td><code>Use check_allocarray() to allocate array</code></td></tr></table>\n",
    "created_at": "2015-02-21T10:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240851",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ba47f0ef294af2b0ac5736a36144a5f77bb6c36"><code>6ba47f0</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/10257</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/307e5264e155ccb72fd3cc28d08013a8b9ce647b"><code>307e526</code></a></td><td><code>Revert raise MemoryError changes from #12212</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd8407bcf29c42dadade7bed183cc68ebf310b69"><code>cd8407b</code></a></td><td><code>Merge branch 'ticket/12212_revert_raise' into ticket/10257</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa0612d0a7ad58cc403f157b42877d29ba0371fa"><code>fa0612d</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/10257</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c561e2e05851c55a4bddd9045768d0559a456fa5"><code>c561e2e</code></a></td><td><code>Fix check_allocarray() failure doctest on OS X</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6650ca79a28bd96cd66d3dc3b3b917bd91c415e5"><code>6650ca7</code></a></td><td><code>Add csage dependencies in Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c37e933111f3cc5ccd4c3e673806782c32bbfd74"><code>c37e933</code></a></td><td><code>Merge ticket/17794 into ticket/10257</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/352ffb830e05b0935dfe2e6ca26554d5bc388f10"><code>352ffb8</code></a></td><td><code>Remove check for -1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e3901d5e6f6cf4e9341cc54edd55de5863ff654"><code>5e3901d</code></a></td><td><code>Merge ticket/10257 into ticket/17819</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f851b9eb96f73930aa265673679434eecfac6a6"><code>6f851b9</code></a></td><td><code>Use check_allocarray() to allocate array</code></td></tr></table>




---

archive/issue_comments_240852.json:
```json
{
    "body": "Dependencies: **#17794, #10257**",
    "created_at": "2015-02-21T10:35:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240852",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#17794, #10257**



---

archive/issue_comments_240853.json:
```json
{
    "body": "Changed commit from **[`6f851b9`](https://github.com/sagemath/sagetrac-mirror/commit/6f851b9eb96f73930aa265673679434eecfac6a6)** to **[`3bc79b7`](https://github.com/sagemath/sagetrac-mirror/commit/3bc79b71b49aa37b7307174f29e228a6c2bc81f6)**",
    "created_at": "2015-02-22T09:35:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240853",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6f851b9`](https://github.com/sagemath/sagetrac-mirror/commit/6f851b9eb96f73930aa265673679434eecfac6a6)** to **[`3bc79b7`](https://github.com/sagemath/sagetrac-mirror/commit/3bc79b71b49aa37b7307174f29e228a6c2bc81f6)**



---

archive/issue_comments_240854.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3bc79b71b49aa37b7307174f29e228a6c2bc81f6\"><code>3bc79b7</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/17819_</code></td></tr></table>\n",
    "created_at": "2015-02-22T09:35:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240854",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3bc79b71b49aa37b7307174f29e228a6c2bc81f6"><code>3bc79b7</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/17819_</code></td></tr></table>




---

archive/issue_comments_240855.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThat sucks. mpz_set_ux isn't in gmp - at least gmp 5.1.3, if you know it is in 6.0.0+ I at least can force an upgrade in sage-on-gentoo. But right now it is a major headache for sage-on-distro (much more so than pari git master).",
    "created_at": "2015-02-26T21:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240855",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

That sucks. mpz_set_ux isn't in gmp - at least gmp 5.1.3, if you know it is in 6.0.0+ I at least can force an upgrade in sage-on-gentoo. But right now it is a major headache for sage-on-distro (much more so than pari git master).



---

archive/issue_comments_240856.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIndeed, those functions seem MPIR-specific. For me personally, that's not an issue (we do use MPIR after all in Sage).",
    "created_at": "2015-02-26T21:30:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240856",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Indeed, those functions seem MPIR-specific. For me personally, that's not an issue (we do use MPIR after all in Sage).



---

archive/issue_comments_240857.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI know it would be less of an issue if other gmp using code had moved to using mpir directly one way or another (flint being the only one) rather than just saying \"you can do that if mpir is installed with gmp-compat\". I think I can do an ugly hack for that one.",
    "created_at": "2015-02-26T21:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240857",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

I know it would be less of an issue if other gmp using code had moved to using mpir directly one way or another (flint being the only one) rather than just saying "you can do that if mpir is installed with gmp-compat". I think I can do an ugly hack for that one.



---

archive/issue_comments_240858.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nYou mean there would be *less* an issue if *more* code relied on MPIR?",
    "created_at": "2015-02-26T21:42:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240858",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

You mean there would be *less* an issue if *more* code relied on MPIR?



---

archive/issue_comments_240859.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jdemeyer](#comment%3A10):\n> You mean there would be *less* an issue if *more* code relied on MPIR?\n\nWell that would force the hand. \n\nWhat I mean is take pari. You can compile it with mpir by using the gmp compatibility layer. You cannot tell pari to compile directly against mpir, using mpir headers and libmpir. \n\nIf all the packages in the sage stack could do that. It would be easy, install mpir and build everything against it. Reality is everything apart from flint is using gmp and expect gmp. And only use mpir if it is masquerading itself as gmp. \n\nIn a distro where gmp is already installed because of gcc it won't happen unless you can convince the toolchain team of the distro to switch to mpir. Tough job.",
    "created_at": "2015-02-26T21:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240859",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jdemeyer](#comment%3A10):
> You mean there would be *less* an issue if *more* code relied on MPIR?

Well that would force the hand. 

What I mean is take pari. You can compile it with mpir by using the gmp compatibility layer. You cannot tell pari to compile directly against mpir, using mpir headers and libmpir. 

If all the packages in the sage stack could do that. It would be easy, install mpir and build everything against it. Reality is everything apart from flint is using gmp and expect gmp. And only use mpir if it is masquerading itself as gmp. 

In a distro where gmp is already installed because of gcc it won't happen unless you can convince the toolchain team of the distro to switch to mpir. Tough job.



---

archive/issue_comments_240860.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nWe could also replace `uintmax_t` by `unsigned long` which is usually the same on 64-bit systems and which doesn't have portability issues.",
    "created_at": "2015-02-26T21:49:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240860",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

We could also replace `uintmax_t` by `unsigned long` which is usually the same on 64-bit systems and which doesn't have portability issues.



---

archive/issue_comments_240861.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@jdemeyer](#comment%3A12):\n> We could also replace `uintmax_t` by `unsigned long` which is usually the same on 64-bit systems and which doesn't have portability issues.\n\nI guess that would be handy but what happens on 32 bits systems? We are still dealing with them for the foreseeable future.\n\nI am trying a hack where integer.pyx and mpz.pxd explicitly use mpir. But not anything else.\n\nI am guessing if mpir is a complete superset of gmp I could switch the whole sage library to explicit mpir. A bit of linking madness but it would work.",
    "created_at": "2015-02-26T21:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240861",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@jdemeyer](#comment%3A12):
> We could also replace `uintmax_t` by `unsigned long` which is usually the same on 64-bit systems and which doesn't have portability issues.

I guess that would be handy but what happens on 32 bits systems? We are still dealing with them for the foreseeable future.

I am trying a hack where integer.pyx and mpz.pxd explicitly use mpir. But not anything else.

I am guessing if mpir is a complete superset of gmp I could switch the whole sage library to explicit mpir. A bit of linking madness but it would work.



---

archive/issue_comments_240862.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@kiwifb](#comment%3A13):\n> Replying to [@jdemeyer](#comment%3A12):\n> > We could also replace `uintmax_t` by `unsigned long` which is usually the same on 64-bit systems and which doesn't have portability issues.\n\n> \n> I guess that would be handy but what happens on 32 bits systems?\n\nWhen using `unsigned long`, stuff would become slower for 32-bit systems. It's really a matter of what do you prefer? It's a classical pick 2 out of 3: clean code, fast code, portable code.",
    "created_at": "2015-02-26T22:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240862",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@kiwifb](#comment%3A13):
> Replying to [@jdemeyer](#comment%3A12):
> > We could also replace `uintmax_t` by `unsigned long` which is usually the same on 64-bit systems and which doesn't have portability issues.

> 
> I guess that would be handy but what happens on 32 bits systems?

When using `unsigned long`, stuff would become slower for 32-bit systems. It's really a matter of what do you prefer? It's a classical pick 2 out of 3: clean code, fast code, portable code.



---

archive/issue_comments_240863.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nNew hurdle, my hack didn't work because I have mpir 2.6.0 installed, I am guessing the symbol is in 2.7.0. I would have to update mpir as well to make it work.\n\nYes classic! And it would be nice if it was completed by 6.6 release. Portable gets sage-on-distro out of the hole for this time but it may not go on forever. At some point mpir and gmp may diverge enough that flint or sage will want to do something that is mpir only. That day I think the best thing to do will be to make mpir explicit, at least where it is needed, rather than faking gmp. And pray that linker do their job properly.",
    "created_at": "2015-02-26T22:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240863",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

New hurdle, my hack didn't work because I have mpir 2.6.0 installed, I am guessing the symbol is in 2.7.0. I would have to update mpir as well to make it work.

Yes classic! And it would be nice if it was completed by 6.6 release. Portable gets sage-on-distro out of the hole for this time but it may not go on forever. At some point mpir and gmp may diverge enough that flint or sage will want to do something that is mpir only. That day I think the best thing to do will be to make mpir explicit, at least where it is needed, rather than faking gmp. And pray that linker do their job properly.



---

archive/issue_comments_240864.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nUpgraded mpir but it still fails. Inspecting libmpir with\n\n```\nnm -D /usr/lib64/libmpir.so.16 | grep mpz_set_ux\n000000000002ea6e T __gmpz_set_ux\n```\nAnd I get the same thing with mpir built in vanilla sage (and the gmp in sage) everything seems to be prefixed with `__g`. Do you have an idea what is going on?",
    "created_at": "2015-02-27T00:14:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240864",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

Upgraded mpir but it still fails. Inspecting libmpir with

```
nm -D /usr/lib64/libmpir.so.16 | grep mpz_set_ux
000000000002ea6e T __gmpz_set_ux
```
And I get the same thing with mpir built in vanilla sage (and the gmp in sage) everything seems to be prefixed with `__g`. Do you have an idea what is going on?



---

archive/issue_comments_240865.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\ngot it working by replacing every instances of gmp.h by mpir.h in sage/libs/gmp and replacing all gmp/gmpxx by mpir/mpirxx in module_list.py. Because c_lib, pari, ntl and friends are still linked to gmp I have linking to both gmp and mpir when inspecting with ldd, but readelf on the extension will only show mpir since it is the only one it is directly linked against.\n\nChanging the headers in sage/libs/gmp wasn't enough in that it spread symbol problems in other places. \n\nNow to run full doctest on the monster.",
    "created_at": "2015-02-27T01:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240865",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">comment:17</div>

got it working by replacing every instances of gmp.h by mpir.h in sage/libs/gmp and replacing all gmp/gmpxx by mpir/mpirxx in module_list.py. Because c_lib, pari, ntl and friends are still linked to gmp I have linking to both gmp and mpir when inspecting with ldd, but readelf on the extension will only show mpir since it is the only one it is directly linked against.

Changing the headers in sage/libs/gmp wasn't enough in that it spread symbol problems in other places. 

Now to run full doctest on the monster.



---

archive/issue_comments_240866.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\ndoctest run as normally as expected for sage-on-gentoo on my machine. I was more or less expecting failures in the places where there are gmp(xx) headers outside of sage/libs/gmp but those seem to be more robust.\n\nI would favor portability but that may be a discussion we need to have on sage-devel.",
    "created_at": "2015-02-27T03:56:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240866",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:18" align="right">comment:18</div>

doctest run as normally as expected for sage-on-gentoo on my machine. I was more or less expecting failures in the places where there are gmp(xx) headers outside of sage/libs/gmp but those seem to be more robust.

I would favor portability but that may be a discussion we need to have on sage-devel.



---

archive/issue_comments_240867.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@kiwifb](#comment%3A18):\n> I would favor portability but that may be a discussion we need to have on sage-devel.\n\nWhat do you think of my proposal to use `unsigned long`? That would be portable and clean. On 64-bit there would be no difference.\n\nFor small inputs, using `unsigned long` will even be faster on 32-bit systems, since the compiler wouldn't need to emulate 64-bit `long long` operations. For larger inputs, there might be a slow-down but it might not be so bad given that there are no native 64-bit operations anyway.",
    "created_at": "2015-02-28T11:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240867",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@kiwifb](#comment%3A18):
> I would favor portability but that may be a discussion we need to have on sage-devel.

What do you think of my proposal to use `unsigned long`? That would be portable and clean. On 64-bit there would be no difference.

For small inputs, using `unsigned long` will even be faster on 32-bit systems, since the compiler wouldn't need to emulate 64-bit `long long` operations. For larger inputs, there might be a slow-down but it might not be so bad given that there are no native 64-bit operations anyway.



---

archive/issue_comments_240868.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jdemeyer](#comment%3A19):\n> Replying to [@kiwifb](#comment%3A18):\n> > I would favor portability but that may be a discussion we need to have on sage-devel.\n\n> What do you think of my proposal to use `unsigned long`? That would be portable and clean. On 64-bit there would be no difference.\n> \n> For small inputs, using `unsigned long` will even be faster on 32-bit systems, since the compiler wouldn't need to emulate 64-bit `long long` operations. For larger inputs, there might be a slow-down but it might not be so bad given that there are no native 64-bit operations anyway.\n\n\nI am OK with using `unsigned long` but it all gave me food for thought.",
    "created_at": "2015-02-28T11:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240868",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jdemeyer](#comment%3A19):
> Replying to [@kiwifb](#comment%3A18):
> > I would favor portability but that may be a discussion we need to have on sage-devel.

> What do you think of my proposal to use `unsigned long`? That would be portable and clean. On 64-bit there would be no difference.
> 
> For small inputs, using `unsigned long` will even be faster on 32-bit systems, since the compiler wouldn't need to emulate 64-bit `long long` operations. For larger inputs, there might be a slow-down but it might not be so bad given that there are no native 64-bit operations anyway.


I am OK with using `unsigned long` but it all gave me food for thought.



---

archive/issue_comments_240869.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `uintmax_t` for this, which is at least as large as `long long`. Another advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`. Instead we can use the standard MPIR function `mpz_set_ux`.\n+The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `unsigned long` for this. One advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`. This will also be faster for small inputs on 32-bit systems.\n``````\n",
    "created_at": "2015-03-01T09:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240869",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `uintmax_t` for this, which is at least as large as `long long`. Another advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`. Instead we can use the standard MPIR function `mpz_set_ux`.
+The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `unsigned long` for this. One advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`. This will also be faster for small inputs on 32-bit systems.
``````




---

archive/issue_events_251370.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-01T09:42:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251370"
}
```



---

archive/issue_events_251371.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-01T09:42:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251371"
}
```



---

archive/issue_events_251372.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-01T09:42:25Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "title_is": "Use unsigned long for Integer.divisors",
    "title_was": "Use uintmax_t for Integer.divisors",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251372"
}
```



---

archive/issue_comments_240870.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `unsigned long` for this. One advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`. This will also be faster for small inputs on 32-bit systems.\n+The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `unsigned long` for this. One advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`. This will also be faster for small inputs on 32-bit systems. On 64-bit systems, there should be no speed difference (except perhaps a small speed-up due to skipping the `mpz_longlong` overhead and the fact that we use 64 instead of 63 bits).\n``````\n",
    "created_at": "2015-03-01T09:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240870",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `unsigned long` for this. One advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`. This will also be faster for small inputs on 32-bit systems.
+The `divisors` method of `Integer` is implemented using `long long` if possible. However, it would be better to use `unsigned long` for this. One advantage is that we no longer need the `mpz_set_longlong()` functions from `c_lib`. This will also be faster for small inputs on 32-bit systems. On 64-bit systems, there should be no speed difference (except perhaps a small speed-up due to skipping the `mpz_longlong` overhead and the fact that we use 64 instead of 63 bits).
``````




---

archive/issue_comments_240871.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1194cb75acb96340b16f9a256aa55e0a3c2eb38c\"><code>1194cb7</code></a></td><td><code>Use unsigned long instead of uintmax_t for divisors()</code></td></tr></table>\n",
    "created_at": "2015-03-01T11:55:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240871",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1194cb75acb96340b16f9a256aa55e0a3c2eb38c"><code>1194cb7</code></a></td><td><code>Use unsigned long instead of uintmax_t for divisors()</code></td></tr></table>




---

archive/issue_comments_240872.json:
```json
{
    "body": "Changed commit from **[`3bc79b7`](https://github.com/sagemath/sagetrac-mirror/commit/3bc79b71b49aa37b7307174f29e228a6c2bc81f6)** to **[`1194cb7`](https://github.com/sagemath/sagetrac-mirror/commit/1194cb75acb96340b16f9a256aa55e0a3c2eb38c)**",
    "created_at": "2015-03-01T11:55:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240872",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3bc79b7`](https://github.com/sagemath/sagetrac-mirror/commit/3bc79b71b49aa37b7307174f29e228a6c2bc81f6)** to **[`1194cb7`](https://github.com/sagemath/sagetrac-mirror/commit/1194cb75acb96340b16f9a256aa55e0a3c2eb38c)**



---

archive/issue_events_251373.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-01T11:57:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251373"
}
```



---

archive/issue_events_251374.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-01T11:57:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251374"
}
```



---

archive/issue_comments_240873.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nmpz_set_ux is still in that patch but it looks like it links ok ok against gmp. Rebuilding and testing, but it should be good.",
    "created_at": "2015-03-01T20:27:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240873",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">comment:25</div>

mpz_set_ux is still in that patch but it looks like it links ok ok against gmp. Rebuilding and testing, but it should be good.



---

archive/issue_comments_240874.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@kiwifb](#comment%3A25):\n> mpz_set_ux is still in that patch but it looks like it links ok ok against gmp. Rebuilding and testing, but it should be good.\n\nI left the declaration indeed, but it doesn't hurt...",
    "created_at": "2015-03-01T20:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240874",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@kiwifb](#comment%3A25):
> mpz_set_ux is still in that patch but it looks like it links ok ok against gmp. Rebuilding and testing, but it should be good.

I left the declaration indeed, but it doesn't hurt...



---

archive/issue_comments_240875.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nDefinitely doesn't, good to go.",
    "created_at": "2015-03-01T20:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240875",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

Definitely doesn't, good to go.



---

archive/issue_events_251375.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-03-01T20:57:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251375"
}
```



---

archive/issue_events_251376.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-03-01T20:57:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251376"
}
```



---

archive/issue_comments_240876.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2015-03-01T20:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240876",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_events_251377.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-03T00:25:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251377"
}
```



---

archive/issue_events_251378.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8fe759475fc89b19f8d0ce035efc95fc6e270ab7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-03-03T00:25:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17819#event-251378"
}
```



---

archive/issue_comments_240877.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/17819](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17819)** to **[`1194cb7`](https://github.com/sagemath/sagetrac-mirror/commit/1194cb75acb96340b16f9a256aa55e0a3c2eb38c)**",
    "created_at": "2015-03-03T00:25:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17819#issuecomment-240877",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/17819](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17819)** to **[`1194cb7`](https://github.com/sagemath/sagetrac-mirror/commit/1194cb75acb96340b16f9a256aa55e0a3c2eb38c)**
