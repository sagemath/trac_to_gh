# Issue 17798: Create a class for Coxeter matrices and types

archive/issues_017561.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-sage-combinat"
    ],
    "body": "This is a partial step towards #16126, but carries the necessary information to speed up #16630 when the input is given as a finite !Cartan/Coxeter type.\n\nIt is possible to input numbers c<= -1 in the matrix to represent an infinite label, but with a different value in the bilinear form of the Tits representation.\n\nThe current implementation recognizes finite and affine types\n\nPossible follow-up:\n-create an abstract class for Coxeter matrices and Cartan matrices?\n-Maybe change the name of CoxeterType.py could to type_coxeter.py\n-Recognize more types\n\n\n\nDepends on #17990\nDepends on #18152\nDepends on #18743\n\nCC:  @sagetrac-sage-combinat @darijgr @fchapoton @jplab @sagetrac-vripoll @sagetrac-jmichel @nthiery @kevindilks\n\nKeywords: **Coxeter groups, matrices, types, days64**\n\nBranch: **[5d188d4](https://github.com/sagemath/sagetrac-mirror/commit/5d188d4a0beb0022ad072068932222c6e23920ad)**\n\nReviewer: **Jean-Philippe Labb\u00e9, Travis Scrimshaw**\n\nAuthor: **Travis Scrimshaw, Jean-Philippe Labb\u00e9**\n\nComponent: **group theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17798_\n\n",
    "closed_at": "2015-10-24T10:22:21Z",
    "created_at": "2015-02-18T03:16:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20group%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Create a class for Coxeter matrices and types",
    "type": "issue",
    "updated_at": "2015-11-02T14:05:57Z",
    "url": "https://github.com/sagemath/sage/issues/17798",
    "user": "https://github.com/tscrim"
}
```
This is a partial step towards #16126, but carries the necessary information to speed up #16630 when the input is given as a finite !Cartan/Coxeter type.

It is possible to input numbers c<= -1 in the matrix to represent an infinite label, but with a different value in the bilinear form of the Tits representation.

The current implementation recognizes finite and affine types

Possible follow-up:
-create an abstract class for Coxeter matrices and Cartan matrices?
-Maybe change the name of CoxeterType.py could to type_coxeter.py
-Recognize more types



Depends on #17990
Depends on #18152
Depends on #18743

CC:  @sagetrac-sage-combinat @darijgr @fchapoton @jplab @sagetrac-vripoll @sagetrac-jmichel @nthiery @kevindilks

Keywords: **Coxeter groups, matrices, types, days64**

Branch: **[5d188d4](https://github.com/sagemath/sagetrac-mirror/commit/5d188d4a0beb0022ad072068932222c6e23920ad)**

Reviewer: **Jean-Philippe Labbé, Travis Scrimshaw**

Author: **Travis Scrimshaw, Jean-Philippe Labbé**

Component: **group theory**

_Issue created by migration from https://trac.sagemath.org/ticket/17798_





---

archive/issue_events_253410.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-02-18T03:16:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253410"
}
```



---

archive/issue_events_253411.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-02-18T03:16:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20group%20theory",
    "label_color": "0000ff",
    "label_name": "c: group theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253411"
}
```



---

archive/issue_events_253412.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-02-18T03:16:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253412"
}
```



---

archive/issue_events_253413.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-02-18T03:16:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253413"
}
```



---

archive/issue_events_253414.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2015-02-18T03:16:50Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "subject": "https://github.com/tscrim",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253414"
}
```



---

archive/issue_comments_240373.json:
```json
{
    "body": "Author: **Travis Scrimshaw**",
    "created_at": "2015-02-27T02:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240373",
    "user": "https://github.com/tscrim"
}
```

Author: **Travis Scrimshaw**



---

archive/issue_events_253415.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-02-27T02:51:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253415"
}
```



---

archive/issue_comments_240374.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-This is a partial step towards #16126, but carries the necessary information to speed up #16630 when the input is given as a finite Cartan/Coxeter type.\n+This is a partial step towards #16126, but carries the necessary information to speed up #16630 when the input is given as a finite !Cartan/Coxeter type.\n``````\n",
    "created_at": "2015-02-27T02:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240374",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-This is a partial step towards #16126, but carries the necessary information to speed up #16630 when the input is given as a finite Cartan/Coxeter type.
+This is a partial step towards #16126, but carries the necessary information to speed up #16630 when the input is given as a finite !Cartan/Coxeter type.
``````




---

archive/issue_comments_240375.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nHere's a working version that implements a class `CoxeterMatrix` and a generic `CoxeterType` coming from a `CartanType`. I also removed some deprecated code.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d31d2863d06743075069dd3d027f9afd34b68bc0\">d31d286</a></td><td><code>Merge branch 'public/ticket/16630' of trac.sagemath.org:sage into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1dddd2087f0a69a5f0ca874dad5d738316b6293d\">1dddd20</a></td><td><code>Initial creation of the files.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1aadfbe3a93da9485ea2782252a66e8ea0ae2651\">1aadfbe</a></td><td><code>Merge branch 'develop' into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7fd3ac80c252305c15acec3cb47807bba010ad9\">f7fd3ac</a></td><td><code>Merge branch 'develop' into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5484c5d6077138d6ed79d5d19af38c1f1da120ea\">5484c5d</a></td><td><code>Making all doctests pass and removing some deprecated code.</code></td></tr></table>\n",
    "created_at": "2015-02-27T02:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240375",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:1" align="right">comment:1</div>

Here's a working version that implements a class `CoxeterMatrix` and a generic `CoxeterType` coming from a `CartanType`. I also removed some deprecated code.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d31d2863d06743075069dd3d027f9afd34b68bc0">d31d286</a></td><td><code>Merge branch 'public/ticket/16630' of trac.sagemath.org:sage into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1dddd2087f0a69a5f0ca874dad5d738316b6293d">1dddd20</a></td><td><code>Initial creation of the files.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1aadfbe3a93da9485ea2782252a66e8ea0ae2651">1aadfbe</a></td><td><code>Merge branch 'develop' into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7fd3ac80c252305c15acec3cb47807bba010ad9">f7fd3ac</a></td><td><code>Merge branch 'develop' into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5484c5d6077138d6ed79d5d19af38c1f1da120ea">5484c5d</a></td><td><code>Making all doctests pass and removing some deprecated code.</code></td></tr></table>




---

archive/issue_comments_240376.json:
```json
{
    "body": "Branch: **[public/combinat/coxeter_matrices-17798](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/coxeter_matrices-17798)**",
    "created_at": "2015-02-27T02:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240376",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/combinat/coxeter_matrices-17798](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/coxeter_matrices-17798)**



---

archive/issue_comments_240377.json:
```json
{
    "body": "Commit: **[5484c5d](https://github.com/sagemath/sagetrac-mirror/commit/5484c5d6077138d6ed79d5d19af38c1f1da120ea)**",
    "created_at": "2015-02-27T02:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240377",
    "user": "https://github.com/tscrim"
}
```

Commit: **[5484c5d](https://github.com/sagemath/sagetrac-mirror/commit/5484c5d6077138d6ed79d5d19af38c1f1da120ea)**



---

archive/issue_comments_240378.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nSome armchair reviewing (I am not sure if I am up to the actual job): You replaced the `coxeter_matrix` method on `CartanType_abstract` by a call to the `CoxeterMatrix` constructor, which is heavily ducktyped; you also removed the caching. Have you checked for speed regressions? I am also unhappy with the ducktyping since it is hard to debug. Does it makes sense to build a custom `from_cartan_type` constructor for `CoxeterMatrix` that bypasses most of the duckery?",
    "created_at": "2015-03-02T05:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240378",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:2" align="right">comment:2</div>

Some armchair reviewing (I am not sure if I am up to the actual job): You replaced the `coxeter_matrix` method on `CartanType_abstract` by a call to the `CoxeterMatrix` constructor, which is heavily ducktyped; you also removed the caching. Have you checked for speed regressions? I am also unhappy with the ducktyping since it is hard to debug. Does it makes sense to build a custom `from_cartan_type` constructor for `CoxeterMatrix` that bypasses most of the duckery?



---

archive/issue_comments_240379.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nActually, I will re-enable that caching; there was a time when I was considering the `CoxeterMatrix` to be a `UniqueRepresentation`, but it was easier to make it a usual class. However, for (better or) worse, pythonic code is ducktyped code since it is a weakly-typed language. Yet I tried to make case-by-case as much as possible (following what I did for `CartanMatrix`). There is some indirection done in `CoxeterMatrix` by converting the Cartan type to a Coxeter type, but I felt this was the best way to do things (at least with the current implementation). Yet this part isn't ducktyped. So what my long-winded reply is saying is I'm open to suggestions, but this is the local optimal code I'm at.",
    "created_at": "2015-03-02T06:57:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240379",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

Actually, I will re-enable that caching; there was a time when I was considering the `CoxeterMatrix` to be a `UniqueRepresentation`, but it was easier to make it a usual class. However, for (better or) worse, pythonic code is ducktyped code since it is a weakly-typed language. Yet I tried to make case-by-case as much as possible (following what I did for `CartanMatrix`). There is some indirection done in `CoxeterMatrix` by converting the Cartan type to a Coxeter type, but I felt this was the best way to do things (at least with the current implementation). Yet this part isn't ducktyped. So what my long-winded reply is saying is I'm open to suggestions, but this is the local optimal code I'm at.



---

archive/issue_comments_240380.json:
```json
{
    "body": "Changed commit from **[5484c5d](https://github.com/sagemath/sagetrac-mirror/commit/5484c5d6077138d6ed79d5d19af38c1f1da120ea)** to **[311eb18](https://github.com/sagemath/sagetrac-mirror/commit/311eb184e6c37b7bfa0090468d79ca13509a63da)**",
    "created_at": "2015-03-02T07:20:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240380",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5484c5d](https://github.com/sagemath/sagetrac-mirror/commit/5484c5d6077138d6ed79d5d19af38c1f1da120ea)** to **[311eb18](https://github.com/sagemath/sagetrac-mirror/commit/311eb184e6c37b7bfa0090468d79ca13509a63da)**



---

archive/issue_comments_240381.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/311eb184e6c37b7bfa0090468d79ca13509a63da\">311eb18</a></td><td><code>Fixing a pickling issue and some easy doctest failures.</code></td></tr></table>\n",
    "created_at": "2015-03-02T07:20:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240381",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/311eb184e6c37b7bfa0090468d79ca13509a63da">311eb18</a></td><td><code>Fixing a pickling issue and some easy doctest failures.</code></td></tr></table>




---

archive/issue_comments_240382.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ef21f0ae15293f7f458aecc209b4ab5419b8db6\">2ef21f0</a></td><td><code>Re-enable cache of coxeter_matrix() for CartanType_abstract.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e61a4f3927c1d096f8ece1138ed33abbd928594d\">e61a4f3</a></td><td><code>Fixed import of numpy via UCF.</code></td></tr></table>\n",
    "created_at": "2015-03-02T07:39:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240382",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ef21f0ae15293f7f458aecc209b4ab5419b8db6">2ef21f0</a></td><td><code>Re-enable cache of coxeter_matrix() for CartanType_abstract.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e61a4f3927c1d096f8ece1138ed33abbd928594d">e61a4f3</a></td><td><code>Fixed import of numpy via UCF.</code></td></tr></table>




---

archive/issue_comments_240383.json:
```json
{
    "body": "Changed commit from **[311eb18](https://github.com/sagemath/sagetrac-mirror/commit/311eb184e6c37b7bfa0090468d79ca13509a63da)** to **[e61a4f3](https://github.com/sagemath/sagetrac-mirror/commit/e61a4f3927c1d096f8ece1138ed33abbd928594d)**",
    "created_at": "2015-03-02T07:39:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240383",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[311eb18](https://github.com/sagemath/sagetrac-mirror/commit/311eb184e6c37b7bfa0090468d79ca13509a63da)** to **[e61a4f3](https://github.com/sagemath/sagetrac-mirror/commit/e61a4f3927c1d096f8ece1138ed33abbd928594d)**



---

archive/issue_comments_240384.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI fear I cannot be of much help with this ticket, as I don't even know the difference between a Coxeter and a Cartan type... But please simplify that `CoxeterMatrix.__init__`. It is so complicated it is not pythonic in any good sense of this word. Python's the weak type system should not keep us from writing constructors (e.g., `from_cartan_type`) tailored to specific input data. I have no idea why catch-all constructors have become a standard in Sage, but this kind of programming gave us #17124 and probably some more ugliness I don't remember.",
    "created_at": "2015-03-09T18:52:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240384",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:6" align="right">comment:6</div>

I fear I cannot be of much help with this ticket, as I don't even know the difference between a Coxeter and a Cartan type... But please simplify that `CoxeterMatrix.__init__`. It is so complicated it is not pythonic in any good sense of this word. Python's the weak type system should not keep us from writing constructors (e.g., `from_cartan_type`) tailored to specific input data. I have no idea why catch-all constructors have become a standard in Sage, but this kind of programming gave us #17124 and probably some more ugliness I don't remember.



---

archive/issue_comments_240385.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIn view of the tickets #15703, #16126, tt would be very good to include the possibility to have \"generalized\" Coxeter matrices.\n\nThe \"generalized\" means that for the infinite labels, we can put a real number <= -1 in the matrix.\n\nOf course, this may be not so natural to have Coxeter matrices with such entries, but this will make life much much easier for the other tickets: being able to start with a matrix which encodes the \"geometry\" behind the matrix.\n\nTicket #16126 should be kind of parallel to this one.\n\nIf you think it is a good idea, I would try take the patch from here and make it possible to into such values.",
    "created_at": "2015-03-17T22:47:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240385",
    "user": "https://github.com/jplab"
}
```

<div id="comment:8" align="right">comment:8</div>

In view of the tickets #15703, #16126, tt would be very good to include the possibility to have "generalized" Coxeter matrices.

The "generalized" means that for the infinite labels, we can put a real number <= -1 in the matrix.

Of course, this may be not so natural to have Coxeter matrices with such entries, but this will make life much much easier for the other tickets: being able to start with a matrix which encodes the "geometry" behind the matrix.

Ticket #16126 should be kind of parallel to this one.

If you think it is a good idea, I would try take the patch from here and make it possible to into such values.



---

archive/issue_comments_240386.json:
```json
{
    "body": "Dependencies: **#17990**",
    "created_at": "2015-03-19T14:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240386",
    "user": "https://github.com/jplab"
}
```

Dependencies: **#17990**



---

archive/issue_comments_240387.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nYou can work around #17990 by explicitly specifying the base ring, but they only ring which has `oo` and the integers is the symbolic ring AFAIK. I think the best/long-term fix for allowing matrices with say `ZZ[oo]` is to construct a general parent for the *ordered set* `R[oo]` where `R` is any other ring (well ordered set where all things become less than infinity). Actually...you could probably use `TropicalSemiring(ZZ)` which does this (plus a bit more structure):\n\n```\nsage: T.zero()\n+infinity\nsage: T(2) < T.zero()\nTrue\nsage: T(2) > T.zero()\nFalse\n```\nBut the matrix space constructor requires a proper ring...which is where the real trouble probably is... I'm done rambling now.",
    "created_at": "2015-03-19T19:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240387",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

You can work around #17990 by explicitly specifying the base ring, but they only ring which has `oo` and the integers is the symbolic ring AFAIK. I think the best/long-term fix for allowing matrices with say `ZZ[oo]` is to construct a general parent for the *ordered set* `R[oo]` where `R` is any other ring (well ordered set where all things become less than infinity). Actually...you could probably use `TropicalSemiring(ZZ)` which does this (plus a bit more structure):

```
sage: T.zero()
+infinity
sage: T(2) < T.zero()
True
sage: T(2) > T.zero()
False
```
But the matrix space constructor requires a proper ring...which is where the real trouble probably is... I'm done rambling now.



---

archive/issue_comments_240388.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bdcd7a5dbfde7746a3e50a0d6e5d68fbbb05c2de\">bdcd7a5</a></td><td><code>Dirty version added possible entry <=-1 and affine types recognition</code></td></tr></table>\n",
    "created_at": "2015-03-20T00:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240388",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bdcd7a5dbfde7746a3e50a0d6e5d68fbbb05c2de">bdcd7a5</a></td><td><code>Dirty version added possible entry <=-1 and affine types recognition</code></td></tr></table>




---

archive/issue_comments_240389.json:
```json
{
    "body": "Changed commit from **[e61a4f3](https://github.com/sagemath/sagetrac-mirror/commit/e61a4f3927c1d096f8ece1138ed33abbd928594d)** to **[bdcd7a5](https://github.com/sagemath/sagetrac-mirror/commit/bdcd7a5dbfde7746a3e50a0d6e5d68fbbb05c2de)**",
    "created_at": "2015-03-20T00:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240389",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e61a4f3](https://github.com/sagemath/sagetrac-mirror/commit/e61a4f3927c1d096f8ece1138ed33abbd928594d)** to **[bdcd7a5](https://github.com/sagemath/sagetrac-mirror/commit/bdcd7a5dbfde7746a3e50a0d6e5d68fbbb05c2de)**



---

archive/issue_comments_240390.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThis is a dirty version so that you may have a look.\n\nIt includes now a classification of the affine types. I do not know exactly if this recognition algorithm was coded before. Anyways, I wrote it, it was a good exercise.\n\nThe code should be a cleaned and fully tested. Therefore I change the status to \"needs_work\".\n\nIf you have any suggestions, comments, I'm totally open!",
    "created_at": "2015-03-20T00:59:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240390",
    "user": "https://github.com/jplab"
}
```

<div id="comment:13" align="right">comment:13</div>

This is a dirty version so that you may have a look.

It includes now a classification of the affine types. I do not know exactly if this recognition algorithm was coded before. Anyways, I wrote it, it was a good exercise.

The code should be a cleaned and fully tested. Therefore I change the status to "needs_work".

If you have any suggestions, comments, I'm totally open!



---

archive/issue_events_253416.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-03-20T00:59:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253416"
}
```



---

archive/issue_events_253417.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-03-20T00:59:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253417"
}
```



---

archive/issue_comments_240391.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86b2d78d02683fee74b77742fee3ffd45ffb2e29\">86b2d78</a></td><td><code>Merge branch 'develop=6.6.b5' into t/17798/public/combinat/coxeter_matrices-17798</code></td></tr></table>\n",
    "created_at": "2015-03-20T18:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240391",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86b2d78d02683fee74b77742fee3ffd45ffb2e29">86b2d78</a></td><td><code>Merge branch 'develop=6.6.b5' into t/17798/public/combinat/coxeter_matrices-17798</code></td></tr></table>




---

archive/issue_comments_240392.json:
```json
{
    "body": "Changed commit from **[bdcd7a5](https://github.com/sagemath/sagetrac-mirror/commit/bdcd7a5dbfde7746a3e50a0d6e5d68fbbb05c2de)** to **[86b2d78](https://github.com/sagemath/sagetrac-mirror/commit/86b2d78d02683fee74b77742fee3ffd45ffb2e29)**",
    "created_at": "2015-03-20T18:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240392",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bdcd7a5](https://github.com/sagemath/sagetrac-mirror/commit/bdcd7a5dbfde7746a3e50a0d6e5d68fbbb05c2de)** to **[86b2d78](https://github.com/sagemath/sagetrac-mirror/commit/86b2d78d02683fee74b77742fee3ffd45ffb2e29)**



---

archive/issue_comments_240393.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,16 @@\n This is a partial step towards #16126, but carries the necessary information to speed up #16630 when the input is given as a finite !Cartan/Coxeter type.\n+\n+There are a few things TO DO in the current patch:\n+\n+- Subdivided the init into smaller methods\n+- Maybe change the name of CoxeterType.py to type_coxeter?\n+- Added doctests\n+- Add a `__getitem__` method using the index_set\n+- Remove the inheritance from matrix_generic_dense\n+- add `_matrix_` method \n+- put is_finite, is_affine in attributes\n+- put samples in Coxetertype\n+- improve the check_coxeter_type code\n+\n+\n+Eventually, maybe create an abstract class for Coxeter matrices and Cartan matrices?\n``````\n",
    "created_at": "2015-03-21T01:50:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240393",
    "user": "https://github.com/jplab"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,16 @@
 This is a partial step towards #16126, but carries the necessary information to speed up #16630 when the input is given as a finite !Cartan/Coxeter type.
+
+There are a few things TO DO in the current patch:
+
+- Subdivided the init into smaller methods
+- Maybe change the name of CoxeterType.py to type_coxeter?
+- Added doctests
+- Add a `__getitem__` method using the index_set
+- Remove the inheritance from matrix_generic_dense
+- add `_matrix_` method 
+- put is_finite, is_affine in attributes
+- put samples in Coxetertype
+- improve the check_coxeter_type code
+
+
+Eventually, maybe create an abstract class for Coxeter matrices and Cartan matrices?
``````




---

archive/issue_comments_240394.json:
```json
{
    "body": "Changed author from **Travis Scrimshaw** to **Travis Scrimshaw, Jean-Philippe Labb\u00e9**",
    "created_at": "2015-03-21T01:50:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240394",
    "user": "https://github.com/jplab"
}
```

Changed author from **Travis Scrimshaw** to **Travis Scrimshaw, Jean-Philippe Labbé**



---

archive/issue_comments_240395.json:
```json
{
    "body": "Changed keywords from **Coxeter, groups, matrices, types** to **Coxeter, groups, matrices, types, days64**",
    "created_at": "2015-03-21T01:50:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240395",
    "user": "https://github.com/jplab"
}
```

Changed keywords from **Coxeter, groups, matrices, types** to **Coxeter, groups, matrices, types, days64**



---

archive/issue_comments_240396.json:
```json
{
    "body": "Changed commit from **[86b2d78](https://github.com/sagemath/sagetrac-mirror/commit/86b2d78d02683fee74b77742fee3ffd45ffb2e29)** to **[f44e52f](https://github.com/sagemath/sagetrac-mirror/commit/f44e52fb40292424c439d90e29ddf0d3c0256b9f)**",
    "created_at": "2015-03-21T04:46:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240396",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[86b2d78](https://github.com/sagemath/sagetrac-mirror/commit/86b2d78d02683fee74b77742fee3ffd45ffb2e29)** to **[f44e52f](https://github.com/sagemath/sagetrac-mirror/commit/f44e52fb40292424c439d90e29ddf0d3c0256b9f)**



---

archive/issue_comments_240397.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77189dda033a4bf2bfec212de8c9f987bd078a88\">77189dd</a></td><td><code>Corrected base ring of the Coxeter matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f135c2e42d8aaf70385795f480b8f64089243a67\">f135c2e</a></td><td><code>Corrected the bilinear form method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f44e52fb40292424c439d90e29ddf0d3c0256b9f\">f44e52f</a></td><td><code>Now asks for a coercion map from base ring in bilinear form</code></td></tr></table>\n",
    "created_at": "2015-03-21T04:46:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240397",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77189dda033a4bf2bfec212de8c9f987bd078a88">77189dd</a></td><td><code>Corrected base ring of the Coxeter matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f135c2e42d8aaf70385795f480b8f64089243a67">f135c2e</a></td><td><code>Corrected the bilinear form method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f44e52fb40292424c439d90e29ddf0d3c0256b9f">f44e52f</a></td><td><code>Now asks for a coercion map from base ring in bilinear form</code></td></tr></table>




---

archive/issue_comments_240398.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSince we are now wrapping a matrix, I think instead we should just make this either a list of lists or a dict of `(i,j): val` (where undefined entries are 2). That way we don't have to worry about the base ring or anything like that and we can (easily in the former case) pass that to the matrix constructor for those that want to do matrix operations. I'm actually leaning towards doing the dict method since most entires of a Coxeter matrix that people will use are 2 (at least, that's my current imagination). Thoughts?",
    "created_at": "2015-03-21T15:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240398",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

Since we are now wrapping a matrix, I think instead we should just make this either a list of lists or a dict of `(i,j): val` (where undefined entries are 2). That way we don't have to worry about the base ring or anything like that and we can (easily in the former case) pass that to the matrix constructor for those that want to do matrix operations. I'm actually leaning towards doing the dict method since most entires of a Coxeter matrix that people will use are 2 (at least, that's my current imagination). Thoughts?



---

archive/issue_comments_240399.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nProbably a dictionary would be good. Though, we would have to write an appropriate string representation, this is not a big deal.\n\nAdding a matrix method to Coxeter matrix may sound a bit absurd, but since the CoxeterMatrix are more or less only to stock data, I believe it is ok. We may also make it cached...",
    "created_at": "2015-03-21T16:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240399",
    "user": "https://github.com/jplab"
}
```

<div id="comment:18" align="right">comment:18</div>

Probably a dictionary would be good. Though, we would have to write an appropriate string representation, this is not a big deal.

Adding a matrix method to Coxeter matrix may sound a bit absurd, but since the CoxeterMatrix are more or less only to stock data, I believe it is ok. We may also make it cached...



---

archive/issue_comments_240400.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI doubt it's worth it to cache it...\n\nAnyways, the string representation would probably be something like this (untested):\n\n```\ndef _repr_(self):\n    w = max(len(str(v)) for row in self for v in row)\n    fstr = '{:>' + str(w) + '}' # should result in something like '{:>30}'\n    return '\\n'.join('[' + ' '.join(fstr.format(v) for v in row) + ']' for row in self)\n```",
    "created_at": "2015-03-21T17:11:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240400",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

I doubt it's worth it to cache it...

Anyways, the string representation would probably be something like this (untested):

```
def _repr_(self):
    w = max(len(str(v)) for row in self for v in row)
    fstr = '{:>' + str(w) + '}' # should result in something like '{:>30}'
    return '\n'.join('[' + ' '.join(fstr.format(v) for v in row) + ']' for row in self)
```



---

archive/issue_comments_240401.json:
```json
{
    "body": "Changed commit from **[f44e52f](https://github.com/sagemath/sagetrac-mirror/commit/f44e52fb40292424c439d90e29ddf0d3c0256b9f)** to **[d0932c3](https://github.com/sagemath/sagetrac-mirror/commit/d0932c325ede70e04db1b659bcfbf86a7b691e06)**",
    "created_at": "2015-03-30T12:54:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240401",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f44e52f](https://github.com/sagemath/sagetrac-mirror/commit/f44e52fb40292424c439d90e29ddf0d3c0256b9f)** to **[d0932c3](https://github.com/sagemath/sagetrac-mirror/commit/d0932c325ede70e04db1b659bcfbf86a7b691e06)**



---

archive/issue_comments_240402.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0932c325ede70e04db1b659bcfbf86a7b691e06\">d0932c3</a></td><td><code>Removed inheritance from matrix, added methods and attributes</code></td></tr></table>\n",
    "created_at": "2015-03-30T12:54:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240402",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0932c325ede70e04db1b659bcfbf86a7b691e06">d0932c3</a></td><td><code>Removed inheritance from matrix, added methods and attributes</code></td></tr></table>




---

archive/issue_comments_240403.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,9 +5,9 @@\n - Subdivided the init into smaller methods\n - Maybe change the name of CoxeterType.py to type_coxeter?\n - Added doctests\n-- Add a `__getitem__` method using the index_set\n-- Remove the inheritance from matrix_generic_dense\n-- add `_matrix_` method \n+- Add a `__getitem__` method using the index_set [X]\n+- Remove the inheritance from matrix_generic_dense [X]\n+- add `_matrix_` method [X]\n - put is_finite, is_affine in attributes\n - put samples in Coxetertype\n - improve the check_coxeter_type code\n``````\n",
    "created_at": "2015-03-30T12:56:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240403",
    "user": "https://github.com/jplab"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,9 +5,9 @@
 - Subdivided the init into smaller methods
 - Maybe change the name of CoxeterType.py to type_coxeter?
 - Added doctests
-- Add a `__getitem__` method using the index_set
-- Remove the inheritance from matrix_generic_dense
-- add `_matrix_` method 
+- Add a `__getitem__` method using the index_set [X]
+- Remove the inheritance from matrix_generic_dense [X]
+- add `_matrix_` method [X]
 - put is_finite, is_affine in attributes
 - put samples in Coxetertype
 - improve the check_coxeter_type code
``````




---

archive/issue_comments_240404.json:
```json
{
    "body": "Changed keywords from **Coxeter, groups, matrices, types, days64** to **Coxeter groups, matrices, types, days64**",
    "created_at": "2015-03-30T12:56:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240404",
    "user": "https://github.com/jplab"
}
```

Changed keywords from **Coxeter, groups, matrices, types, days64** to **Coxeter groups, matrices, types, days64**



---

archive/issue_comments_240405.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHi,\n\nWhile having a look at the diff of the current patch, I saw that in CoxeterMatrixGroup the method coxeter_graph is renamed by coxeter_diagram.\n\nI'm having thoughts about this for a while.\n\nI would be tempted to have a clear distinction between dynkin diagram and coxeter graphs. Especially considering #16126 coming.\n\nI guess eventually, there could be a common class on top of dynkin diagrams and coxeter graphs from which they inherit. But right now, it makes more sense to me to try to keep the convention coxeter graph vs dynkin diagram.\n\nWhat do you think?",
    "created_at": "2015-04-13T13:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240405",
    "user": "https://github.com/jplab"
}
```

<div id="comment:22" align="right">comment:22</div>

Hi,

While having a look at the diff of the current patch, I saw that in CoxeterMatrixGroup the method coxeter_graph is renamed by coxeter_diagram.

I'm having thoughts about this for a while.

I would be tempted to have a clear distinction between dynkin diagram and coxeter graphs. Especially considering #16126 coming.

I guess eventually, there could be a common class on top of dynkin diagrams and coxeter graphs from which they inherit. But right now, it makes more sense to me to try to keep the convention coxeter graph vs dynkin diagram.

What do you think?



---

archive/issue_comments_240406.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThere's some danger with calling it a Coxeter graph, as this was the first entry I got when Googling: http://en.wikipedia.org/wiki/Coxeter_graph. I don't believe this is what we want, and I believe the more common terminology is Coxeter diagram. This was my mistake in calling that method Coxeter graph, which I did without thinking/looking too much because it returns a `Graph` instance.\n\n+1 for refactoring out common code between Coxeter and Dynkin diagrams, but IMO it doesn't need to be done here as we have #16126.",
    "created_at": "2015-04-13T14:12:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240406",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:23" align="right">comment:23</div>

There's some danger with calling it a Coxeter graph, as this was the first entry I got when Googling: http://en.wikipedia.org/wiki/Coxeter_graph. I don't believe this is what we want, and I believe the more common terminology is Coxeter diagram. This was my mistake in calling that method Coxeter graph, which I did without thinking/looking too much because it returns a `Graph` instance.

+1 for refactoring out common code between Coxeter and Dynkin diagrams, but IMO it doesn't need to be done here as we have #16126.



---

archive/issue_comments_240407.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nYes... It is a bummer that Coxeter does have a graph with its actual name tagged to it!\n\nIn the end, it is just a name, I guess we should try to be consistent in the naming convention since we are at it, and I'd like to know how to proceed...\n\nAs far as I know, Humphreys is careful not to give the graphs a name. On p.1 of Bjoerner&Brenti, they call it a \"Coxeter graph (or Coxeter diagram)\".\n\nI would vote for Coxeter graph and Dynkin diagram since it emphasizes the difference between the two structures. About the confusion with the actual Coxeter graph, I believe it is not a so dreadful danger of confusion.\n\nI think that the Coxeter graph is not so commonly used as to need it directly from the sage prompt, right?\n\nAgreed with refactor common code later.",
    "created_at": "2015-04-13T14:38:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240407",
    "user": "https://github.com/jplab"
}
```

<div id="comment:24" align="right">comment:24</div>

Yes... It is a bummer that Coxeter does have a graph with its actual name tagged to it!

In the end, it is just a name, I guess we should try to be consistent in the naming convention since we are at it, and I'd like to know how to proceed...

As far as I know, Humphreys is careful not to give the graphs a name. On p.1 of Bjoerner&Brenti, they call it a "Coxeter graph (or Coxeter diagram)".

I would vote for Coxeter graph and Dynkin diagram since it emphasizes the difference between the two structures. About the confusion with the actual Coxeter graph, I believe it is not a so dreadful danger of confusion.

I think that the Coxeter graph is not so commonly used as to need it directly from the sage prompt, right?

Agreed with refactor common code later.



---

archive/issue_comments_240408.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df3c69a3c52ab1977327f5e9a6ddbc80c02ecc44\">df3c69a</a></td><td><code>Merge branch 6.7.beta3 into cox_matrices_trac</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/764667e818ac2d0a4b188bf1d8bb09ec4a2acd97\">764667e</a></td><td><code>Corrected coding conventions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f830a53d086c76b9cc2d43cd9d9fb9cb3ef663e8\">f830a53</a></td><td><code>Made is_finite and is_affine attributes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/823c8f2ab1e70e518ede0a92b42be32b48e838f6\">823c8f2</a></td><td><code>Added the rank as an attribute</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5afb94f1d29337d307e4dde1b42d198d39cdf5f\">a5afb94</a></td><td><code>Subdivided the init (from matrix, graph, coxeter type)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3526392209128a21ee631666e406dd8fc74f631\">d352639</a></td><td><code>Added some tests</code></td></tr></table>\n",
    "created_at": "2015-04-30T14:03:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240408",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df3c69a3c52ab1977327f5e9a6ddbc80c02ecc44">df3c69a</a></td><td><code>Merge branch 6.7.beta3 into cox_matrices_trac</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/764667e818ac2d0a4b188bf1d8bb09ec4a2acd97">764667e</a></td><td><code>Corrected coding conventions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f830a53d086c76b9cc2d43cd9d9fb9cb3ef663e8">f830a53</a></td><td><code>Made is_finite and is_affine attributes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/823c8f2ab1e70e518ede0a92b42be32b48e838f6">823c8f2</a></td><td><code>Added the rank as an attribute</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5afb94f1d29337d307e4dde1b42d198d39cdf5f">a5afb94</a></td><td><code>Subdivided the init (from matrix, graph, coxeter type)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3526392209128a21ee631666e406dd8fc74f631">d352639</a></td><td><code>Added some tests</code></td></tr></table>




---

archive/issue_comments_240409.json:
```json
{
    "body": "Changed commit from **[d0932c3](https://github.com/sagemath/sagetrac-mirror/commit/d0932c325ede70e04db1b659bcfbf86a7b691e06)** to **[d352639](https://github.com/sagemath/sagetrac-mirror/commit/d3526392209128a21ee631666e406dd8fc74f631)**",
    "created_at": "2015-04-30T14:03:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240409",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d0932c3](https://github.com/sagemath/sagetrac-mirror/commit/d0932c325ede70e04db1b659bcfbf86a7b691e06)** to **[d352639](https://github.com/sagemath/sagetrac-mirror/commit/d3526392209128a21ee631666e406dd8fc74f631)**



---

archive/issue_comments_240410.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,15 +2,16 @@\n \n There are a few things TO DO in the current patch:\n \n-- Subdivided the init into smaller methods\n+- Subdivided the init into smaller methods [X]\n - Maybe change the name of CoxeterType.py to type_coxeter?\n - Added doctests\n - Add a `__getitem__` method using the index_set [X]\n+- Check that the getitem method works\n+- Add a __ eq __ method to CoxeterType\n - Remove the inheritance from matrix_generic_dense [X]\n - add `_matrix_` method [X]\n-- put is_finite, is_affine in attributes\n+- put is_finite, is_affine in attributes [X]\n - put samples in Coxetertype\n - improve the check_coxeter_type code\n \n-\n Eventually, maybe create an abstract class for Coxeter matrices and Cartan matrices?\n``````\n",
    "created_at": "2015-04-30T14:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240410",
    "user": "https://github.com/jplab"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,15 +2,16 @@
 
 There are a few things TO DO in the current patch:
 
-- Subdivided the init into smaller methods
+- Subdivided the init into smaller methods [X]
 - Maybe change the name of CoxeterType.py to type_coxeter?
 - Added doctests
 - Add a `__getitem__` method using the index_set [X]
+- Check that the getitem method works
+- Add a __ eq __ method to CoxeterType
 - Remove the inheritance from matrix_generic_dense [X]
 - add `_matrix_` method [X]
-- put is_finite, is_affine in attributes
+- put is_finite, is_affine in attributes [X]
 - put samples in Coxetertype
 - improve the check_coxeter_type code
 
-
 Eventually, maybe create an abstract class for Coxeter matrices and Cartan matrices?
``````




---

archive/issue_comments_240411.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nHi,\n\nSo I pushed some commits I did today.\n\nThere is still a lot to do, but it's progressing.\n\nI tested the files and there were many tests that failed. I noticed that many of them fail because we removed the inheritance from matrices that was providing with equality tests.\n\nI continue the coding... Don't hesitated if you have comments or suggestions!",
    "created_at": "2015-04-30T14:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240411",
    "user": "https://github.com/jplab"
}
```

<div id="comment:26" align="right">comment:26</div>

Hi,

So I pushed some commits I did today.

There is still a lot to do, but it's progressing.

I tested the files and there were many tests that failed. I noticed that many of them fail because we removed the inheritance from matrices that was providing with equality tests.

I continue the coding... Don't hesitated if you have comments or suggestions!



---

archive/issue_comments_240412.json:
```json
{
    "body": "Changed dependencies from **#17990** to **#17990, #18152**",
    "created_at": "2015-04-30T14:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240412",
    "user": "https://github.com/jplab"
}
```

Changed dependencies from **#17990** to **#17990, #18152**



---

archive/issue_comments_240413.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nHi,\n\nWhere should the function samples be placed?\n\nIf I put it in the abstract class CoxeterType, it complains that it should be called on an instance.\n\nJP",
    "created_at": "2015-04-30T15:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240413",
    "user": "https://github.com/jplab"
}
```

<div id="comment:27" align="right">comment:27</div>

Hi,

Where should the function samples be placed?

If I put it in the abstract class CoxeterType, it complains that it should be called on an instance.

JP



---

archive/issue_comments_240414.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@jplab](#comment:27):\n> Where should the function samples be placed?\n> \n> If I put it in the abstract class CoxeterType, it complains that it should be called on an instance.\n\nIt should be a `staticmethod` or `classmethod`..",
    "created_at": "2015-04-30T16:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240414",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@jplab](#comment:27):
> Where should the function samples be placed?
> 
> If I put it in the abstract class CoxeterType, it complains that it should be called on an instance.

It should be a `staticmethod` or `classmethod`..



---

archive/issue_comments_240415.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25a6f54cbb04c5946a155f2e7e4280727c04ab20\">25a6f54</a></td><td><code>Added some values in the dictionnary of the matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03b24b442010925104c5e34968fdda16bce32a76\">03b24b4</a></td><td><code>Edited the check coxeter type function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/532afda11e1e2c5854b650745358296c04b9b725\">532afda</a></td><td><code>Added a samples method to CoxeterType</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d018e28cab80aa27c4a907b59d83c50db7a74a06\">d018e28</a></td><td><code>Added samples and made many tests pass</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb77b786305566dff1200521cc8330cee7e6ec5b\">fb77b78</a></td><td><code>PEP8 conventions</code></td></tr></table>\n",
    "created_at": "2015-05-07T14:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240415",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25a6f54cbb04c5946a155f2e7e4280727c04ab20">25a6f54</a></td><td><code>Added some values in the dictionnary of the matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03b24b442010925104c5e34968fdda16bce32a76">03b24b4</a></td><td><code>Edited the check coxeter type function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/532afda11e1e2c5854b650745358296c04b9b725">532afda</a></td><td><code>Added a samples method to CoxeterType</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d018e28cab80aa27c4a907b59d83c50db7a74a06">d018e28</a></td><td><code>Added samples and made many tests pass</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb77b786305566dff1200521cc8330cee7e6ec5b">fb77b78</a></td><td><code>PEP8 conventions</code></td></tr></table>




---

archive/issue_comments_240416.json:
```json
{
    "body": "Changed commit from **[d352639](https://github.com/sagemath/sagetrac-mirror/commit/d3526392209128a21ee631666e406dd8fc74f631)** to **[fb77b78](https://github.com/sagemath/sagetrac-mirror/commit/fb77b786305566dff1200521cc8330cee7e6ec5b)**",
    "created_at": "2015-05-07T14:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240416",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d352639](https://github.com/sagemath/sagetrac-mirror/commit/d3526392209128a21ee631666e406dd8fc74f631)** to **[fb77b78](https://github.com/sagemath/sagetrac-mirror/commit/fb77b786305566dff1200521cc8330cee7e6ec5b)**



---

archive/issue_comments_240417.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nHi,\n\nNow all test passes on the file coxeter_matrix, not on coxeter_type (3 failure caused by the old UCF implementation, I did not bother trying to correct them because of the new implementation in #18152). When it is going to be merged in a beta, I'll verify again.\n\nThe sample is supposed to contain all finite and affine coxeter types plus some more infinite types which are not affine.\n\nI believe now the next step would be to go through the methods to double check that tests verify well the code.\n\nAbout the renaming of the CoxeterType file to type_coxeter, I believe it is better to keep it as it is now since it is similar to cartan_type.py",
    "created_at": "2015-05-07T14:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240417",
    "user": "https://github.com/jplab"
}
```

<div id="comment:30" align="right">comment:30</div>

Hi,

Now all test passes on the file coxeter_matrix, not on coxeter_type (3 failure caused by the old UCF implementation, I did not bother trying to correct them because of the new implementation in #18152). When it is going to be merged in a beta, I'll verify again.

The sample is supposed to contain all finite and affine coxeter types plus some more infinite types which are not affine.

I believe now the next step would be to go through the methods to double check that tests verify well the code.

About the renaming of the CoxeterType file to type_coxeter, I believe it is better to keep it as it is now since it is similar to cartan_type.py



---

archive/issue_comments_240418.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,13 +5,14 @@\n - Subdivided the init into smaller methods [X]\n - Maybe change the name of CoxeterType.py to type_coxeter?\n - Added doctests\n-- Add a `__getitem__` method using the index_set [X]\n-- Check that the getitem method works\n-- Add a __ eq __ method to CoxeterType\n+- Add a getitem method using the index_set [X]\n+- Check that the getitem method works [X]\n+- Add a eq method to CoxeterMatrix [X]\n - Remove the inheritance from matrix_generic_dense [X]\n - add `_matrix_` method [X]\n - put is_finite, is_affine in attributes [X]\n-- put samples in Coxetertype\n-- improve the check_coxeter_type code\n+- put samples in Coxetertype and CoxeterMatrix [X]\n+- improve the check_coxeter_type code [X]\n \n-Eventually, maybe create an abstract class for Coxeter matrices and Cartan matrices?\n+Possible follow-up:\n+-create an abstract class for Coxeter matrices and Cartan matrices?\n``````\n",
    "created_at": "2015-05-07T14:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240418",
    "user": "https://github.com/jplab"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,13 +5,14 @@
 - Subdivided the init into smaller methods [X]
 - Maybe change the name of CoxeterType.py to type_coxeter?
 - Added doctests
-- Add a `__getitem__` method using the index_set [X]
-- Check that the getitem method works
-- Add a __ eq __ method to CoxeterType
+- Add a getitem method using the index_set [X]
+- Check that the getitem method works [X]
+- Add a eq method to CoxeterMatrix [X]
 - Remove the inheritance from matrix_generic_dense [X]
 - add `_matrix_` method [X]
 - put is_finite, is_affine in attributes [X]
-- put samples in Coxetertype
-- improve the check_coxeter_type code
+- put samples in Coxetertype and CoxeterMatrix [X]
+- improve the check_coxeter_type code [X]
 
-Eventually, maybe create an abstract class for Coxeter matrices and Cartan matrices?
+Possible follow-up:
+-create an abstract class for Coxeter matrices and Cartan matrices?
``````




---

archive/issue_comments_240419.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3262e4300df3e199f0db66136b4ad51d166490a0\">3262e43</a></td><td><code>Added tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3c76fa7a6e91ee834bc678b9c0b83d39e53f552\">a3c76fa</a></td><td><code>Merge branch 'sage-6.8.beta2' into cox_matrices_trac</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2be73c3bdf6c76518e1899ee2753d8447ab58bf\">f2be73c</a></td><td><code>Made tests pass in coxeter_type</code></td></tr></table>\n",
    "created_at": "2015-06-04T15:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240419",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3262e4300df3e199f0db66136b4ad51d166490a0">3262e43</a></td><td><code>Added tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3c76fa7a6e91ee834bc678b9c0b83d39e53f552">a3c76fa</a></td><td><code>Merge branch 'sage-6.8.beta2' into cox_matrices_trac</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2be73c3bdf6c76518e1899ee2753d8447ab58bf">f2be73c</a></td><td><code>Made tests pass in coxeter_type</code></td></tr></table>




---

archive/issue_comments_240420.json:
```json
{
    "body": "Changed commit from **[fb77b78](https://github.com/sagemath/sagetrac-mirror/commit/fb77b786305566dff1200521cc8330cee7e6ec5b)** to **[f2be73c](https://github.com/sagemath/sagetrac-mirror/commit/f2be73c3bdf6c76518e1899ee2753d8447ab58bf)**",
    "created_at": "2015-06-04T15:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240420",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fb77b78](https://github.com/sagemath/sagetrac-mirror/commit/fb77b786305566dff1200521cc8330cee7e6ec5b)** to **[f2be73c](https://github.com/sagemath/sagetrac-mirror/commit/f2be73c3bdf6c76518e1899ee2753d8447ab58bf)**



---

archive/issue_comments_240421.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,18 +1,12 @@\n This is a partial step towards #16126, but carries the necessary information to speed up #16630 when the input is given as a finite !Cartan/Coxeter type.\n \n-There are a few things TO DO in the current patch:\n+It is possible to input numbers c<= -1 in the matrix to represent an infinite label, but with a different value in the bilinear form of the Tits representation.\n \n-- Subdivided the init into smaller methods [X]\n-- Maybe change the name of CoxeterType.py to type_coxeter?\n-- Added doctests\n-- Add a getitem method using the index_set [X]\n-- Check that the getitem method works [X]\n-- Add a eq method to CoxeterMatrix [X]\n-- Remove the inheritance from matrix_generic_dense [X]\n-- add `_matrix_` method [X]\n-- put is_finite, is_affine in attributes [X]\n-- put samples in Coxetertype and CoxeterMatrix [X]\n-- improve the check_coxeter_type code [X]\n+The current implementation recognizes finite and affine types\n \n Possible follow-up:\n -create an abstract class for Coxeter matrices and Cartan matrices?\n+-Maybe change the name of CoxeterType.py could to type_coxeter.py\n+-Recognize more types\n+\n+\n``````\n",
    "created_at": "2015-06-04T15:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240421",
    "user": "https://github.com/jplab"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,18 +1,12 @@
 This is a partial step towards #16126, but carries the necessary information to speed up #16630 when the input is given as a finite !Cartan/Coxeter type.
 
-There are a few things TO DO in the current patch:
+It is possible to input numbers c<= -1 in the matrix to represent an infinite label, but with a different value in the bilinear form of the Tits representation.
 
-- Subdivided the init into smaller methods [X]
-- Maybe change the name of CoxeterType.py to type_coxeter?
-- Added doctests
-- Add a getitem method using the index_set [X]
-- Check that the getitem method works [X]
-- Add a eq method to CoxeterMatrix [X]
-- Remove the inheritance from matrix_generic_dense [X]
-- add `_matrix_` method [X]
-- put is_finite, is_affine in attributes [X]
-- put samples in Coxetertype and CoxeterMatrix [X]
-- improve the check_coxeter_type code [X]
+The current implementation recognizes finite and affine types
 
 Possible follow-up:
 -create an abstract class for Coxeter matrices and Cartan matrices?
+-Maybe change the name of CoxeterType.py could to type_coxeter.py
+-Recognize more types
+
+
``````




---

archive/issue_comments_240422.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nAll tests pass on sage-6.8.beta2.\n\nI would say that this version is ready for review.",
    "created_at": "2015-06-04T15:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240422",
    "user": "https://github.com/jplab"
}
```

<div id="comment:32" align="right">comment:32</div>

All tests pass on sage-6.8.beta2.

I would say that this version is ready for review.



---

archive/issue_events_253418.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-06-04T15:45:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253418"
}
```



---

archive/issue_events_253419.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-06-04T15:45:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253419"
}
```



---

archive/issue_comments_240423.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nTest fails in /sage/src/sage/groups/matrix_gps/coxeter_group.py",
    "created_at": "2015-06-04T15:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240423",
    "user": "https://github.com/jplab"
}
```

<div id="comment:33" align="right">comment:33</div>

Test fails in /sage/src/sage/groups/matrix_gps/coxeter_group.py



---

archive/issue_events_253420.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-06-04T15:55:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253420"
}
```



---

archive/issue_events_253421.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-06-04T15:55:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253421"
}
```



---

archive/issue_comments_240424.json:
```json
{
    "body": "Changed commit from **[f2be73c](https://github.com/sagemath/sagetrac-mirror/commit/f2be73c3bdf6c76518e1899ee2753d8447ab58bf)** to **[3d73c0b](https://github.com/sagemath/sagetrac-mirror/commit/3d73c0b3e3cb85394ec21a3d24867072fc6b6e86)**",
    "created_at": "2015-06-04T17:06:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240424",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f2be73c](https://github.com/sagemath/sagetrac-mirror/commit/f2be73c3bdf6c76518e1899ee2753d8447ab58bf)** to **[3d73c0b](https://github.com/sagemath/sagetrac-mirror/commit/3d73c0b3e3cb85394ec21a3d24867072fc6b6e86)**



---

archive/issue_comments_240425.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d73c0b3e3cb85394ec21a3d24867072fc6b6e86\">3d73c0b</a></td><td><code>Made tests pass in matrixcoxetergroup</code></td></tr></table>\n",
    "created_at": "2015-06-04T17:06:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240425",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d73c0b3e3cb85394ec21a3d24867072fc6b6e86">3d73c0b</a></td><td><code>Made tests pass in matrixcoxetergroup</code></td></tr></table>




---

archive/issue_comments_240426.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThere were some failing tests in the Coxeter groups as Matrix groups. They are solved now.",
    "created_at": "2015-06-04T17:08:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240426",
    "user": "https://github.com/jplab"
}
```

<div id="comment:35" align="right">comment:35</div>

There were some failing tests in the Coxeter groups as Matrix groups. They are solved now.



---

archive/issue_events_253422.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-06-04T17:08:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253422"
}
```



---

archive/issue_events_253423.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-06-04T17:08:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253423"
}
```



---

archive/issue_events_253424.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-06-05T07:42:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253424"
}
```



---

archive/issue_events_253425.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-06-05T07:42:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253425"
}
```



---

archive/issue_comments_240427.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\ndoc does not build\n\nmaybe because you need to use `r\"\"\"` when using latex command such as `\\infty` or `\\ZZ`",
    "created_at": "2015-06-05T07:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240427",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:36" align="right">comment:36</div>

doc does not build

maybe because you need to use `r"""` when using latex command such as `\infty` or `\ZZ`



---

archive/issue_comments_240428.json:
```json
{
    "body": "Changed commit from **[3d73c0b](https://github.com/sagemath/sagetrac-mirror/commit/3d73c0b3e3cb85394ec21a3d24867072fc6b6e86)** to **[19846a0](https://github.com/sagemath/sagetrac-mirror/commit/19846a08c352ce041a3d5a8f2a6bf0757a91aae9)**",
    "created_at": "2015-06-07T08:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240428",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3d73c0b](https://github.com/sagemath/sagetrac-mirror/commit/3d73c0b3e3cb85394ec21a3d24867072fc6b6e86)** to **[19846a0](https://github.com/sagemath/sagetrac-mirror/commit/19846a08c352ce041a3d5a8f2a6bf0757a91aae9)**



---

archive/issue_comments_240429.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19846a08c352ce041a3d5a8f2a6bf0757a91aae9\">19846a0</a></td><td><code>Fixed documentation</code></td></tr></table>\n",
    "created_at": "2015-06-07T08:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240429",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19846a08c352ce041a3d5a8f2a6bf0757a91aae9">19846a0</a></td><td><code>Fixed documentation</code></td></tr></table>




---

archive/issue_events_253426.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-06-07T08:53:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253426"
}
```



---

archive/issue_events_253427.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-06-07T08:53:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253427"
}
```



---

archive/issue_comments_240430.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nShould be fine now...",
    "created_at": "2015-06-07T08:53:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240430",
    "user": "https://github.com/jplab"
}
```

<div id="comment:38" align="right">comment:38</div>

Should be fine now...



---

archive/issue_comments_240431.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThere seems to be a test failing in the Coxeter group Category. I'll take care of that.",
    "created_at": "2015-06-07T10:46:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240431",
    "user": "https://github.com/jplab"
}
```

<div id="comment:39" align="right">comment:39</div>

There seems to be a test failing in the Coxeter group Category. I'll take care of that.



---

archive/issue_comments_240432.json:
```json
{
    "body": "Changed commit from **[19846a0](https://github.com/sagemath/sagetrac-mirror/commit/19846a08c352ce041a3d5a8f2a6bf0757a91aae9)** to **[32f2168](https://github.com/sagemath/sagetrac-mirror/commit/32f216883758c1416d6f680b7dd3b571f8ad1a61)**",
    "created_at": "2015-06-07T11:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240432",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[19846a0](https://github.com/sagemath/sagetrac-mirror/commit/19846a08c352ce041a3d5a8f2a6bf0757a91aae9)** to **[32f2168](https://github.com/sagemath/sagetrac-mirror/commit/32f216883758c1416d6f680b7dd3b571f8ad1a61)**



---

archive/issue_comments_240433.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32f216883758c1416d6f680b7dd3b571f8ad1a61\">32f2168</a></td><td><code>Made test pass in Category of Coxeter groups</code></td></tr></table>\n",
    "created_at": "2015-06-07T11:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240433",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32f216883758c1416d6f680b7dd3b571f8ad1a61">32f2168</a></td><td><code>Made test pass in Category of Coxeter groups</code></td></tr></table>




---

archive/issue_comments_240434.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/522f9a4cc0c316553b1e9d34c74776223494d865\">522f9a4</a></td><td><code>Added doctest coverage to __repr__</code></td></tr></table>\n",
    "created_at": "2015-06-07T13:08:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240434",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/522f9a4cc0c316553b1e9d34c74776223494d865">522f9a4</a></td><td><code>Added doctest coverage to __repr__</code></td></tr></table>




---

archive/issue_comments_240435.json:
```json
{
    "body": "Changed commit from **[32f2168](https://github.com/sagemath/sagetrac-mirror/commit/32f216883758c1416d6f680b7dd3b571f8ad1a61)** to **[522f9a4](https://github.com/sagemath/sagetrac-mirror/commit/522f9a4cc0c316553b1e9d34c74776223494d865)**",
    "created_at": "2015-06-07T13:08:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240435",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[32f2168](https://github.com/sagemath/sagetrac-mirror/commit/32f216883758c1416d6f680b7dd3b571f8ad1a61)** to **[522f9a4](https://github.com/sagemath/sagetrac-mirror/commit/522f9a4cc0c316553b1e9d34c74776223494d865)**



---

archive/issue_comments_240436.json:
```json
{
    "body": "Changed commit from **[522f9a4](https://github.com/sagemath/sagetrac-mirror/commit/522f9a4cc0c316553b1e9d34c74776223494d865)** to **[df35a43](https://github.com/sagemath/sagetrac-mirror/commit/df35a439d6b5b7f184f0d72647d1f5ae86e324aa)**",
    "created_at": "2015-06-19T22:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240436",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[522f9a4](https://github.com/sagemath/sagetrac-mirror/commit/522f9a4cc0c316553b1e9d34c74776223494d865)** to **[df35a43](https://github.com/sagemath/sagetrac-mirror/commit/df35a439d6b5b7f184f0d72647d1f5ae86e324aa)**



---

archive/issue_comments_240437.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9afb736248d08e630ffe1135cbe2fa720d0ef77f\">9afb736</a></td><td><code>Merge branch 'public/combinat/coxeter_matrices-17798' of trac.sagemath.org:sage into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df35a439d6b5b7f184f0d72647d1f5ae86e324aa\">df35a43</a></td><td><code>Implement a better API for pickling/classcall for Cartan/Coxeter matrices.</code></td></tr></table>\n",
    "created_at": "2015-06-19T22:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240437",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9afb736248d08e630ffe1135cbe2fa720d0ef77f">9afb736</a></td><td><code>Merge branch 'public/combinat/coxeter_matrices-17798' of trac.sagemath.org:sage into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df35a439d6b5b7f184f0d72647d1f5ae86e324aa">df35a43</a></td><td><code>Implement a better API for pickling/classcall for Cartan/Coxeter matrices.</code></td></tr></table>




---

archive/issue_comments_240438.json:
```json
{
    "body": "Changed commit from **[df35a43](https://github.com/sagemath/sagetrac-mirror/commit/df35a439d6b5b7f184f0d72647d1f5ae86e324aa)** to **[eab7426](https://github.com/sagemath/sagetrac-mirror/commit/eab7426aa7b98be3c11cce1bba68e035c9bf4b0c)**",
    "created_at": "2015-06-19T23:04:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240438",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[df35a43](https://github.com/sagemath/sagetrac-mirror/commit/df35a439d6b5b7f184f0d72647d1f5ae86e324aa)** to **[eab7426](https://github.com/sagemath/sagetrac-mirror/commit/eab7426aa7b98be3c11cce1bba68e035c9bf4b0c)**



---

archive/issue_comments_240439.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20bd15dd22b857e41bbe50244112f6128c8082bb\">20bd15d</a></td><td><code>Added support for _repr_option('ascii_art').</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56307d7ca5c2a5a5614d02e09cf83e1ef2d73117\">56307d7</a></td><td><code>Merge branch 'public/interfaces/repr_option_ascii_art-18743' into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eab7426aa7b98be3c11cce1bba68e035c9bf4b0c\">eab7426</a></td><td><code>Fixing doctest from #18743.</code></td></tr></table>\n",
    "created_at": "2015-06-19T23:04:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240439",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20bd15dd22b857e41bbe50244112f6128c8082bb">20bd15d</a></td><td><code>Added support for _repr_option('ascii_art').</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56307d7ca5c2a5a5614d02e09cf83e1ef2d73117">56307d7</a></td><td><code>Merge branch 'public/interfaces/repr_option_ascii_art-18743' into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eab7426aa7b98be3c11cce1bba68e035c9bf4b0c">eab7426</a></td><td><code>Fixing doctest from #18743.</code></td></tr></table>




---

archive/issue_comments_240440.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI've made my round of changes. If your happy with my changes, then we can set a positive review (since we've done a cross-review, unless of course someone has any objections).",
    "created_at": "2015-06-19T23:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240440",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:44" align="right">comment:44</div>

I've made my round of changes. If your happy with my changes, then we can set a positive review (since we've done a cross-review, unless of course someone has any objections).



---

archive/issue_comments_240441.json:
```json
{
    "body": "Changed dependencies from **#17990, #18152** to **#17990, #18152, #18743**",
    "created_at": "2015-06-19T23:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240441",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **#17990, #18152** to **#17990, #18152, #18743**



---

archive/issue_comments_240442.json:
```json
{
    "body": "Reviewer: **Jean-Philippe Labb\u00e9, Travis Scrimshaw**",
    "created_at": "2015-06-19T23:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240442",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Jean-Philippe Labbé, Travis Scrimshaw**



---

archive/issue_comments_240443.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nHi Travis,\n\nThanks for the recent changes! They look good to me.\n\nThe patchbot should check if everything is ok and then we could set it to positive review.",
    "created_at": "2015-06-25T13:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240443",
    "user": "https://github.com/jplab"
}
```

<div id="comment:45" align="right">comment:45</div>

Hi Travis,

Thanks for the recent changes! They look good to me.

The patchbot should check if everything is ok and then we could set it to positive review.



---

archive/issue_comments_240444.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nHi,\n\nI have difficulty reading what the failure in \"startup-module\" really is.\n\nWhat is wrong?",
    "created_at": "2015-06-28T09:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240444",
    "user": "https://github.com/jplab"
}
```

<div id="comment:46" align="right">comment:46</div>

Hi,

I have difficulty reading what the failure in "startup-module" really is.

What is wrong?



---

archive/issue_comments_240445.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nSo it is saying that we are importing 5 new modules at startup. I think we should lazily import the `coxeter_matrix` and `coxeter_type`. The other option is to change this to a lazy import: `from sage.graphs.generators.basic import CycleGraph`.\n\nAlso the test failures in `src/sage/interfaces/psage.py` are due to an old version of #18743, but we have to figure why the `CoxeterGroup` element doesn't work properly. It might be an issue with comparisons, but it might be with the pickling...",
    "created_at": "2015-06-28T14:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240445",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:47" align="right">comment:47</div>

So it is saying that we are importing 5 new modules at startup. I think we should lazily import the `coxeter_matrix` and `coxeter_type`. The other option is to change this to a lazy import: `from sage.graphs.generators.basic import CycleGraph`.

Also the test failures in `src/sage/interfaces/psage.py` are due to an old version of #18743, but we have to figure why the `CoxeterGroup` element doesn't work properly. It might be an issue with comparisons, but it might be with the pickling...



---

archive/issue_comments_240446.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nSo the problem is that the type recognition does not support relabelings:\n\n```\nsage: M = CoxeterMatrix([[1,3,2],[3,1,6],[2,6,1]])\nsage: M\n[1 3 2]\n[3 1 6]\n[2 6 1]\nsage: M.coxeter_type()\nCoxeter type of ['G', 2, 1]\nsage: loads(dumps(M))\n[1 2 3]\n[2 1 6]\n[3 6 1]\n```\nThe type should be relabeled to (1, 2, 3) and does not necessarily correspond to (0, 1, 2).",
    "created_at": "2015-07-05T07:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240446",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">comment:48</div>

So the problem is that the type recognition does not support relabelings:

```
sage: M = CoxeterMatrix([[1,3,2],[3,1,6],[2,6,1]])
sage: M
[1 3 2]
[3 1 6]
[2 6 1]
sage: M.coxeter_type()
Coxeter type of ['G', 2, 1]
sage: loads(dumps(M))
[1 2 3]
[2 1 6]
[3 6 1]
```
The type should be relabeled to (1, 2, 3) and does not necessarily correspond to (0, 1, 2).



---

archive/issue_events_253428.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-07-05T07:28:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253428"
}
```



---

archive/issue_events_253429.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-07-05T07:28:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253429"
}
```



---

archive/issue_comments_240447.json:
```json
{
    "body": "Changed commit from **[eab7426](https://github.com/sagemath/sagetrac-mirror/commit/eab7426aa7b98be3c11cce1bba68e035c9bf4b0c)** to **[c9125e1](https://github.com/sagemath/sagetrac-mirror/commit/c9125e118a46737c51400bbae469a6aa62b3014b)**",
    "created_at": "2015-07-13T04:13:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240447",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[eab7426](https://github.com/sagemath/sagetrac-mirror/commit/eab7426aa7b98be3c11cce1bba68e035c9bf4b0c)** to **[c9125e1](https://github.com/sagemath/sagetrac-mirror/commit/c9125e118a46737c51400bbae469a6aa62b3014b)**



---

archive/issue_comments_240448.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0ee04a50fb68af2cde8587a7ea04b52fc688361\">f0ee04a</a></td><td><code>Merge branch 'public/combinat/coxeter_matrices-17798' of trac.sagemath.org:sage into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/628515042ee978503660028042ffa303c092db95\">6285150</a></td><td><code>Merge branch 'public/interfaces/repr_option_ascii_art-18743' of trac.sagemath.org:sage into public/interfaces/repr_option_ascii_art-18743</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bc49f55af4b8758616f75855037387b89410b92\">7bc49f5</a></td><td><code>Adding `_repr_option` to the interface element to avoid __getattr__.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27a2847e33ccce5f92f62b50c76de39572ed1390\">27a2847</a></td><td><code>Merge branch 'public/interfaces/repr_option_ascii_art-18743' of trac.sagemath.org:sage into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9125e118a46737c51400bbae469a6aa62b3014b\">c9125e1</a></td><td><code>Implement better type recognition using (di)graph isomorphism testing.</code></td></tr></table>\n",
    "created_at": "2015-07-13T04:13:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240448",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0ee04a50fb68af2cde8587a7ea04b52fc688361">f0ee04a</a></td><td><code>Merge branch 'public/combinat/coxeter_matrices-17798' of trac.sagemath.org:sage into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/628515042ee978503660028042ffa303c092db95">6285150</a></td><td><code>Merge branch 'public/interfaces/repr_option_ascii_art-18743' of trac.sagemath.org:sage into public/interfaces/repr_option_ascii_art-18743</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bc49f55af4b8758616f75855037387b89410b92">7bc49f5</a></td><td><code>Adding `_repr_option` to the interface element to avoid __getattr__.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27a2847e33ccce5f92f62b50c76de39572ed1390">27a2847</a></td><td><code>Merge branch 'public/interfaces/repr_option_ascii_art-18743' of trac.sagemath.org:sage into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9125e118a46737c51400bbae469a6aa62b3014b">c9125e1</a></td><td><code>Implement better type recognition using (di)graph isomorphism testing.</code></td></tr></table>




---

archive/issue_events_253430.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-07-13T04:17:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253430"
}
```



---

archive/issue_events_253431.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-07-13T04:17:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253431"
}
```



---

archive/issue_comments_240449.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nAs per my discussion with Jean-Philippe at FPSAC, I've implemented type-checking using graph isomorphism testing, which fixes the relabeling issue (it feels more efficient). Just needs a quick check (and the remaining dependency should be a trivial review, but it needs a reviewer).",
    "created_at": "2015-07-13T04:17:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240449",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:50" align="right">comment:50</div>

As per my discussion with Jean-Philippe at FPSAC, I've implemented type-checking using graph isomorphism testing, which fixes the relabeling issue (it feels more efficient). Just needs a quick check (and the remaining dependency should be a trivial review, but it needs a reviewer).



---

archive/issue_events_253432.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-07-13T04:17:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253432"
}
```



---

archive/issue_events_253433.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-07-13T04:17:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253433"
}
```



---

archive/issue_comments_240450.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nIt seems that there was an error when building sage.\n\nI looked at the crash report and there is an ImportError:\n\n\"ImportError: No module named inherit_comparison\"\n\nWhich seems to be the source of the problem.\n\nAny idea?",
    "created_at": "2015-07-14T15:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240450",
    "user": "https://github.com/jplab"
}
```

<div id="comment:51" align="right">comment:51</div>

It seems that there was an error when building sage.

I looked at the crash report and there is an ImportError:

"ImportError: No module named inherit_comparison"

Which seems to be the source of the problem.

Any idea?



---

archive/issue_comments_240451.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nI don't get this error, and I have no idea what's going on with your build (the error occurs before startup, right?). You only get it with this patch? What is the output of `git diff --name-status develop`?",
    "created_at": "2015-07-15T01:11:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240451",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:52" align="right">comment:52</div>

I don't get this error, and I have no idea what's going on with your build (the error occurs before startup, right?). You only get it with this patch? What is the output of `git diff --name-status develop`?



---

archive/issue_comments_240452.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI pulled the latest version of develop and it compiled fine. (make distclean && make). Then, I checked out the branch and pulled the latest changes and then built.\n\nThe output of git diff --name-status develop gives my a relatively long list of (python, rst, txt, etc.) files. Are you looking for something in particular? It may be difficult to track.\n\nI'll just make distclean and compile again.\n\nI'll report about the latest changes in the ticket then.",
    "created_at": "2015-07-15T08:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240452",
    "user": "https://github.com/jplab"
}
```

<div id="comment:53" align="right">comment:53</div>

I pulled the latest version of develop and it compiled fine. (make distclean && make). Then, I checked out the branch and pulled the latest changes and then built.

The output of git diff --name-status develop gives my a relatively long list of (python, rst, txt, etc.) files. Are you looking for something in particular? It may be difficult to track.

I'll just make distclean and compile again.

I'll report about the latest changes in the ticket then.



---

archive/issue_comments_240453.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\n`git diff --name-status develop` shows the files which are different compared to `develop`, so assuming you have merged in the latest `develop` to both branches, it should give a comprehensive list of changes.\n\nHowever I'm not quite sure what you're saying. Did you already merge in the latest `develop` and tested this branch on top of that and it didn't work?",
    "created_at": "2015-07-15T12:04:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240453",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:54" align="right">comment:54</div>

`git diff --name-status develop` shows the files which are different compared to `develop`, so assuming you have merged in the latest `develop` to both branches, it should give a comprehensive list of changes.

However I'm not quite sure what you're saying. Did you already merge in the latest `develop` and tested this branch on top of that and it didn't work?



---

archive/issue_comments_240454.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI just went directly on the branch (without merging the very latest version of develop) and compiled. Now I get an error in building the doc, because some folder does not exist.\n\nI will just do a merge with the latest develop and compile again. This seems to be a reasonable option now.",
    "created_at": "2015-07-15T13:26:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240454",
    "user": "https://github.com/jplab"
}
```

<div id="comment:55" align="right">comment:55</div>

I just went directly on the branch (without merging the very latest version of develop) and compiled. Now I get an error in building the doc, because some folder does not exist.

I will just do a merge with the latest develop and compile again. This seems to be a reasonable option now.



---

archive/issue_comments_240455.json:
```json
{
    "body": "Changed commit from **[c9125e1](https://github.com/sagemath/sagetrac-mirror/commit/c9125e118a46737c51400bbae469a6aa62b3014b)** to **[cd7d946](https://github.com/sagemath/sagetrac-mirror/commit/cd7d946d88e4345de062c2e7d1c8f700adb7f1a6)**",
    "created_at": "2015-07-20T12:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240455",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c9125e1](https://github.com/sagemath/sagetrac-mirror/commit/c9125e118a46737c51400bbae469a6aa62b3014b)** to **[cd7d946](https://github.com/sagemath/sagetrac-mirror/commit/cd7d946d88e4345de062c2e7d1c8f700adb7f1a6)**



---

archive/issue_comments_240456.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd7d946d88e4345de062c2e7d1c8f700adb7f1a6\">cd7d946</a></td><td><code>Merge branch 'sage6.8.rc0' into cox_matrices_trac</code></td></tr></table>\n",
    "created_at": "2015-07-20T12:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240456",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd7d946d88e4345de062c2e7d1c8f700adb7f1a6">cd7d946</a></td><td><code>Merge branch 'sage6.8.rc0' into cox_matrices_trac</code></td></tr></table>




---

archive/issue_comments_240457.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nAll test passed on sage6.8.rc0\n\nIf the bot is happy I would set the patch to positive review. I am satisfied with the changes in the type recognition algorithm.",
    "created_at": "2015-07-20T12:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240457",
    "user": "https://github.com/jplab"
}
```

<div id="comment:57" align="right">comment:57</div>

All test passed on sage6.8.rc0

If the bot is happy I would set the patch to positive review. I am satisfied with the changes in the type recognition algorithm.



---

archive/issue_comments_240458.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nThank you for your work on this. The bot seems to be down for the time being, but it did pass on the previous version. Do you think you could also give a quick review of the dependency too?\n\nLet me know when the followups are ready for review.",
    "created_at": "2015-07-20T12:58:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240458",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:58" align="right">comment:58</div>

Thank you for your work on this. The bot seems to be down for the time being, but it did pass on the previous version. Do you think you could also give a quick review of the dependency too?

Let me know when the followups are ready for review.



---

archive/issue_events_253434.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-07-28T18:41:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253434"
}
```



---

archive/issue_events_253435.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-07-28T18:41:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253435"
}
```



---

archive/issue_comments_240459.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nPatchbot says this code now causes some sort of infinite recursion on crystals.",
    "created_at": "2015-10-12T00:51:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240459",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:60" align="right">comment:60</div>

Patchbot says this code now causes some sort of infinite recursion on crystals.



---

archive/issue_comments_240460.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nDear Kevin,\n\nCould you give some minimal not-working example of the problem?",
    "created_at": "2015-10-12T14:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240460",
    "user": "https://github.com/jplab"
}
```

<div id="comment:61" align="right">comment:61</div>

Dear Kevin,

Could you give some minimal not-working example of the problem?



---

archive/issue_comments_240461.json:
```json
{
    "body": "Changed commit from **[cd7d946](https://github.com/sagemath/sagetrac-mirror/commit/cd7d946d88e4345de062c2e7d1c8f700adb7f1a6)** to **[e2ad156](https://github.com/sagemath/sagetrac-mirror/commit/e2ad1561bd6d9ef31b53abaaac3681df99035745)**",
    "created_at": "2015-10-12T14:55:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240461",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cd7d946](https://github.com/sagemath/sagetrac-mirror/commit/cd7d946d88e4345de062c2e7d1c8f700adb7f1a6)** to **[e2ad156](https://github.com/sagemath/sagetrac-mirror/commit/e2ad1561bd6d9ef31b53abaaac3681df99035745)**



---

archive/issue_comments_240462.json:
```json
{
    "body": "<div id=\"comment:63\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86a3c7338d54b5f4adea8dd75811dd7e0f7664af\">86a3c73</a></td><td><code>Merge branch 'public/combinat/coxeter_matrices-17798' of trac.sagemath.org:sage into ticket17798</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2ad1561bd6d9ef31b53abaaac3681df99035745\">e2ad156</a></td><td><code>Made two tests pass</code></td></tr></table>\n",
    "created_at": "2015-10-12T14:55:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240462",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86a3c7338d54b5f4adea8dd75811dd7e0f7664af">86a3c73</a></td><td><code>Merge branch 'public/combinat/coxeter_matrices-17798' of trac.sagemath.org:sage into ticket17798</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2ad1561bd6d9ef31b53abaaac3681df99035745">e2ad156</a></td><td><code>Made two tests pass</code></td></tr></table>




---

archive/issue_comments_240463.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nKevin and I tried it out and couldn't reproduce the patchbot results.",
    "created_at": "2015-10-12T15:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240463",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:64" align="right">comment:64</div>

Kevin and I tried it out and couldn't reproduce the patchbot results.



---

archive/issue_comments_240464.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nAll tests seem to pass on sage-6.9 on my computer right now...\n\nThere were two tests failing on 6.9 that I fixed in the last commit.",
    "created_at": "2015-10-12T15:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240464",
    "user": "https://github.com/jplab"
}
```

<div id="comment:65" align="right">comment:65</div>

All tests seem to pass on sage-6.9 on my computer right now...

There were two tests failing on 6.9 that I fixed in the last commit.



---

archive/issue_comments_240465.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nTests on the files you changed pass, but it's causing some sort of infinite recursion on crystals. It's also causing some doctests to fail in `cluster_seed()`.\n\n```\nsage -t --long src/sage/combinat/rigged_configurations/kr_tableaux.py  # 5 doctests failed\nsage -t --long src/sage/combinat/rigged_configurations/rigged_configurations.py  # 7 doctests failed\nsage -t --long src/sage/combinat/crystals/littelmann_path.py  # 3 doctests failed\nsage -t --long src/sage/combinat/crystals/kirillov_reshetikhin.py  # 34 doctests failed\nsage -t --long src/sage/combinat/cluster_algebra_quiver/cluster_seed.py  # 3 doctests failed\nsage -t --long src/sage/combinat/rigged_configurations/rigged_configuration_element.py  # 1 doctest failed\nsage -t --long src/sage/combinat/crystals/kyoto_path_model.py  # 3 doctests failed\nsage -t --long src/sage/combinat/crystals/tensor_product.py  # 6 doctests failed\nsage -t --long src/doc/en/thematic_tutorials/lie/affine_finite_crystals.rst  # 9 doctests failed\nsage -t --long src/sage/combinat/root_system/cartan_type.py  # 1 doctest failed\nsage -t --long src/sage/combinat/root_system/dynkin_diagram.py  # 1 doctest failed\nsage -t --long src/sage/combinat/crystals/subcrystal.py  # 2 doctests failed\nsage -t --long src/sage/combinat/crystals/virtual_crystal.py  # 4 doctests failed\n```\n\nYou can ignore two failing doctests in root system, since I believe you just fixed those.",
    "created_at": "2015-10-12T16:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240465",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:66" align="right">comment:66</div>

Tests on the files you changed pass, but it's causing some sort of infinite recursion on crystals. It's also causing some doctests to fail in `cluster_seed()`.

```
sage -t --long src/sage/combinat/rigged_configurations/kr_tableaux.py  # 5 doctests failed
sage -t --long src/sage/combinat/rigged_configurations/rigged_configurations.py  # 7 doctests failed
sage -t --long src/sage/combinat/crystals/littelmann_path.py  # 3 doctests failed
sage -t --long src/sage/combinat/crystals/kirillov_reshetikhin.py  # 34 doctests failed
sage -t --long src/sage/combinat/cluster_algebra_quiver/cluster_seed.py  # 3 doctests failed
sage -t --long src/sage/combinat/rigged_configurations/rigged_configuration_element.py  # 1 doctest failed
sage -t --long src/sage/combinat/crystals/kyoto_path_model.py  # 3 doctests failed
sage -t --long src/sage/combinat/crystals/tensor_product.py  # 6 doctests failed
sage -t --long src/doc/en/thematic_tutorials/lie/affine_finite_crystals.rst  # 9 doctests failed
sage -t --long src/sage/combinat/root_system/cartan_type.py  # 1 doctest failed
sage -t --long src/sage/combinat/root_system/dynkin_diagram.py  # 1 doctest failed
sage -t --long src/sage/combinat/crystals/subcrystal.py  # 2 doctests failed
sage -t --long src/sage/combinat/crystals/virtual_crystal.py  # 4 doctests failed
```

You can ignore two failing doctests in root system, since I believe you just fixed those.



---

archive/issue_comments_240466.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nExcellent! On it...!",
    "created_at": "2015-10-12T16:22:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240466",
    "user": "https://github.com/jplab"
}
```

<div id="comment:67" align="right">comment:67</div>

Excellent! On it...!



---

archive/issue_comments_240467.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nTravis is working on the issue with crystals now.\n\nThe tests that are failing in `cluster_seed.py` are under `universal_extension()`, which mentions that it gets the almost positive co-roots in a non-elegant way and non-standard order, so it may have to be rewritten.",
    "created_at": "2015-10-12T16:27:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240467",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:68" align="right">comment:68</div>

Travis is working on the issue with crystals now.

The tests that are failing in `cluster_seed.py` are under `universal_extension()`, which mentions that it gets the almost positive co-roots in a non-elegant way and non-standard order, so it may have to be rewritten.



---

archive/issue_comments_240468.json:
```json
{
    "body": "<div id=\"comment:69\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6971e72338766abeda78fbaecd3be863a4041e9\">e6971e7</a></td><td><code>Make sure that indexing sets are passed along by subtype.</code></td></tr></table>\n",
    "created_at": "2015-10-12T16:34:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240468",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:69"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6971e72338766abeda78fbaecd3be863a4041e9">e6971e7</a></td><td><code>Make sure that indexing sets are passed along by subtype.</code></td></tr></table>




---

archive/issue_comments_240469.json:
```json
{
    "body": "Changed commit from **[e2ad156](https://github.com/sagemath/sagetrac-mirror/commit/e2ad1561bd6d9ef31b53abaaac3681df99035745)** to **[e6971e7](https://github.com/sagemath/sagetrac-mirror/commit/e6971e72338766abeda78fbaecd3be863a4041e9)**",
    "created_at": "2015-10-12T16:34:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240469",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e2ad156](https://github.com/sagemath/sagetrac-mirror/commit/e2ad1561bd6d9ef31b53abaaac3681df99035745)** to **[e6971e7](https://github.com/sagemath/sagetrac-mirror/commit/e6971e72338766abeda78fbaecd3be863a4041e9)**



---

archive/issue_comments_240470.json:
```json
{
    "body": "Changed commit from **[e6971e7](https://github.com/sagemath/sagetrac-mirror/commit/e6971e72338766abeda78fbaecd3be863a4041e9)** to **[4ca4345](https://github.com/sagemath/sagetrac-mirror/commit/4ca434574be9cfc2412a90113cf98968ae347247)**",
    "created_at": "2015-10-12T16:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240470",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e6971e7](https://github.com/sagemath/sagetrac-mirror/commit/e6971e72338766abeda78fbaecd3be863a4041e9)** to **[4ca4345](https://github.com/sagemath/sagetrac-mirror/commit/4ca434574be9cfc2412a90113cf98968ae347247)**



---

archive/issue_comments_240471.json:
```json
{
    "body": "<div id=\"comment:70\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ca434574be9cfc2412a90113cf98968ae347247\">4ca4345</a></td><td><code>Making KR crystals more robust against relabeling.</code></td></tr></table>\n",
    "created_at": "2015-10-12T16:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240471",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ca434574be9cfc2412a90113cf98968ae347247">4ca4345</a></td><td><code>Making KR crystals more robust against relabeling.</code></td></tr></table>




---

archive/issue_comments_240472.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nOkay, so the issue which caused the crystals to infinitely recurse is that the type recognition via `subtype()` did not pass along the appropriate labels (I'm not 100% sure what was calling `subtype()`...). In particular, classical types got relabeled by `[0, 1, ...]`, and KR crystals were sensitive to the labellings. I fixed this (which was indicated by the fact that we now had to add the relabel to the `subtype` test) and in a separate commit I made the KR crystals less sensitive to relabellings (but fixing them altogether is an entirely different issue and would deserve a separate ticket). What had changed from our previous version was that our type recognition system did not support relabelling, but now using Dynkin diagrams it does.\n\nUnfortunately this did not fix the issue for cluster seeds.",
    "created_at": "2015-10-12T16:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240472",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:71" align="right">comment:71</div>

Okay, so the issue which caused the crystals to infinitely recurse is that the type recognition via `subtype()` did not pass along the appropriate labels (I'm not 100% sure what was calling `subtype()`...). In particular, classical types got relabeled by `[0, 1, ...]`, and KR crystals were sensitive to the labellings. I fixed this (which was indicated by the fact that we now had to add the relabel to the `subtype` test) and in a separate commit I made the KR crystals less sensitive to relabellings (but fixing them altogether is an entirely different issue and would deserve a separate ticket). What had changed from our previous version was that our type recognition system did not support relabelling, but now using Dynkin diagrams it does.

Unfortunately this did not fix the issue for cluster seeds.



---

archive/issue_comments_240473.json:
```json
{
    "body": "<div id=\"comment:72\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/226f47a20a662f387b74b03941a55962db3c68e6\">226f47a</a></td><td><code>Making KR crystals more robust against relabeling.</code></td></tr></table>\n",
    "created_at": "2015-10-12T16:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240473",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:72"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/226f47a20a662f387b74b03941a55962db3c68e6">226f47a</a></td><td><code>Making KR crystals more robust against relabeling.</code></td></tr></table>




---

archive/issue_comments_240474.json:
```json
{
    "body": "Changed commit from **[4ca4345](https://github.com/sagemath/sagetrac-mirror/commit/4ca434574be9cfc2412a90113cf98968ae347247)** to **[226f47a](https://github.com/sagemath/sagetrac-mirror/commit/226f47a20a662f387b74b03941a55962db3c68e6)**",
    "created_at": "2015-10-12T16:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240474",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4ca4345](https://github.com/sagemath/sagetrac-mirror/commit/4ca434574be9cfc2412a90113cf98968ae347247)** to **[226f47a](https://github.com/sagemath/sagetrac-mirror/commit/226f47a20a662f387b74b03941a55962db3c68e6)**



---

archive/issue_comments_240475.json:
```json
{
    "body": "Changed commit from **[226f47a](https://github.com/sagemath/sagetrac-mirror/commit/226f47a20a662f387b74b03941a55962db3c68e6)** to **[fe2e01f](https://github.com/sagemath/sagetrac-mirror/commit/fe2e01fd1061c8675215050bcc120dd93dd83a5e)**",
    "created_at": "2015-10-12T20:29:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240475",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[226f47a](https://github.com/sagemath/sagetrac-mirror/commit/226f47a20a662f387b74b03941a55962db3c68e6)** to **[fe2e01f](https://github.com/sagemath/sagetrac-mirror/commit/fe2e01fd1061c8675215050bcc120dd93dd83a5e)**



---

archive/issue_comments_240476.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe2e01fd1061c8675215050bcc120dd93dd83a5e\">fe2e01f</a></td><td><code>Fixed cluster seed not expicitly specifying an indexing set.</code></td></tr></table>\n",
    "created_at": "2015-10-12T20:29:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240476",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe2e01fd1061c8675215050bcc120dd93dd83a5e">fe2e01f</a></td><td><code>Fixed cluster seed not expicitly specifying an indexing set.</code></td></tr></table>




---

archive/issue_comments_240477.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nThe fix was that the cluster seed code was assuming the indexing set of a Cartan matrix constructed from a matrix that was of finite type had the standard finite type indexing set of `[1, 2, ..., n]`. I fixed this by explicitly specifying this to be the index set of the Cartan matrix.\n\nThis brings up a point that might need a discussion: Should the index set of a matrix representing a finite type Cartan matrix be by default 1-based or 0-based? The argument for being 1-based is above, a natural assumption on index sets of finite type. Why we should have 0-based is consistency with the rest for default labellings and it agrees with the indexing set of the given matrix (and everything in python is 0-based). Thoughts?",
    "created_at": "2015-10-12T20:33:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240477",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:74" align="right">comment:74</div>

The fix was that the cluster seed code was assuming the indexing set of a Cartan matrix constructed from a matrix that was of finite type had the standard finite type indexing set of `[1, 2, ..., n]`. I fixed this by explicitly specifying this to be the index set of the Cartan matrix.

This brings up a point that might need a discussion: Should the index set of a matrix representing a finite type Cartan matrix be by default 1-based or 0-based? The argument for being 1-based is above, a natural assumption on index sets of finite type. Why we should have 0-based is consistency with the rest for default labellings and it agrees with the indexing set of the given matrix (and everything in python is 0-based). Thoughts?



---

archive/issue_comments_240478.json:
```json
{
    "body": "Changed commit from **[fe2e01f](https://github.com/sagemath/sagetrac-mirror/commit/fe2e01fd1061c8675215050bcc120dd93dd83a5e)** to **[e659186](https://github.com/sagemath/sagetrac-mirror/commit/e659186e20bbb4b4a942008dff32901659e42503)**",
    "created_at": "2015-10-12T22:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240478",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fe2e01f](https://github.com/sagemath/sagetrac-mirror/commit/fe2e01fd1061c8675215050bcc120dd93dd83a5e)** to **[e659186](https://github.com/sagemath/sagetrac-mirror/commit/e659186e20bbb4b4a942008dff32901659e42503)**



---

archive/issue_comments_240479.json:
```json
{
    "body": "<div id=\"comment:75\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e659186e20bbb4b4a942008dff32901659e42503\">e659186</a></td><td><code>Some pyflakes cleanup.</code></td></tr></table>\n",
    "created_at": "2015-10-12T22:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240479",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:75"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e659186e20bbb4b4a942008dff32901659e42503">e659186</a></td><td><code>Some pyflakes cleanup.</code></td></tr></table>




---

archive/issue_comments_240480.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nThis should at least get rid of the startup imports of the graph generators stuff.",
    "created_at": "2015-10-12T22:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240480",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:76" align="right">comment:76</div>

This should at least get rid of the startup imports of the graph generators stuff.



---

archive/issue_comments_240481.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nReplying to [@tscrim](#comment:74):\n> The fix was that the cluster seed code was assuming the indexing set of a Cartan matrix constructed from a matrix that was of finite type had the standard finite type indexing set of `[1, 2, ..., n]`. I fixed this by explicitly specifying this to be the index set of the Cartan matrix.\n\nIs my last edition to make test pass consistent with this change?\n\n> \n> This brings up a point that might need a discussion: Should the index set of a matrix representing a finite type Cartan matrix be by default 1-based or 0-based? The argument for being 1-based is above, a natural assumption on index sets of finite type. Why we should have 0-based is consistency with the rest for default labellings and it agrees with the indexing set of the given matrix (and everything in python is 0-based). Thoughts?\n\nI would say 1-based for finite type since they probably have a labeling hardcoded when dealing with them through Cartan matrices and Coxeter Types.\n\nI would say 0-based whenever there is no labels specified and it comes through a CoxeterMatrix type, eventhough the type is finite.\n\nBut this probably causes trouble?\n\nIn a sense, having a \"relabel\" method somehow means that we have a canonical way of doing and then whenever it is not that one, it means that it was relabeled.\n\nDoes that make sense?",
    "created_at": "2015-10-13T08:00:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240481",
    "user": "https://github.com/jplab"
}
```

<div id="comment:77" align="right">comment:77</div>

Replying to [@tscrim](#comment:74):
> The fix was that the cluster seed code was assuming the indexing set of a Cartan matrix constructed from a matrix that was of finite type had the standard finite type indexing set of `[1, 2, ..., n]`. I fixed this by explicitly specifying this to be the index set of the Cartan matrix.

Is my last edition to make test pass consistent with this change?

> 
> This brings up a point that might need a discussion: Should the index set of a matrix representing a finite type Cartan matrix be by default 1-based or 0-based? The argument for being 1-based is above, a natural assumption on index sets of finite type. Why we should have 0-based is consistency with the rest for default labellings and it agrees with the indexing set of the given matrix (and everything in python is 0-based). Thoughts?

I would say 1-based for finite type since they probably have a labeling hardcoded when dealing with them through Cartan matrices and Coxeter Types.

I would say 0-based whenever there is no labels specified and it comes through a CoxeterMatrix type, eventhough the type is finite.

But this probably causes trouble?

In a sense, having a "relabel" method somehow means that we have a canonical way of doing and then whenever it is not that one, it means that it was relabeled.

Does that make sense?



---

archive/issue_events_253436.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-13T13:08:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253436"
}
```



---

archive/issue_events_253437.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-13T13:08:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253437"
}
```



---

archive/issue_comments_240482.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@jplab](#comment:77):\n> Replying to [@tscrim](#comment:74):\n> > The fix was that the cluster seed code was assuming the indexing set of a Cartan matrix constructed from a matrix that was of finite type had the standard finite type indexing set of `[1, 2, ..., n]`. I fixed this by explicitly specifying this to be the index set of the Cartan matrix.\n\n> \n> Is my last edition to make test pass consistent with this change?\n\nOne of the trivial doctest failures because of `subtype` actually was the one indicating the problem, but that was because I wasn't passing the indexing set as I should have been. We should check for `CoxeterMatrix` and `CoxeterType` that labelings work as they should.\n\n> > This brings up a point that might need a discussion: Should the index set of a matrix representing a finite type Cartan matrix be by default 1-based or 0-based? The argument for being 1-based is above, a natural assumption on index sets of finite type. Why we should have 0-based is consistency with the rest for default labellings and it agrees with the indexing set of the given matrix (and everything in python is 0-based). Thoughts?\n\n> \n> I would say 1-based for finite type since they probably have a labeling hardcoded when dealing with them through Cartan matrices and Coxeter Types.\n> \n> I would say 0-based whenever there is no labels specified and it comes through a CoxeterMatrix type, eventhough the type is finite.\n> \n> But this probably causes trouble?\n\nI was talking about when no labels are given, and it sounds like we are in agreement. However there is some code that doesn't use the indexing set, but instead a range under the assumption that the indexing set is `(1, 2, ..., n)`. I'm still partially debating whether or not to change the cluster seed code as well to help make it robust (although it is somewhat moot because we now specify the indexing set).\n\nIn short, it causes trouble for people's code that had made an assumption about the indexing set before.\n\n> In a sense, having a \"relabel\" method somehow means that we have a canonical way of doing and then whenever it is not that one, it means that it was relabeled.\n> \n> Does that make sense?\n\nYes it makes sense. In a way, I agree with you. However, we must define a canonical way of labeling in order to implement the database of Cartan types. Also we can relabel relabeled types.",
    "created_at": "2015-10-13T13:08:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240482",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@jplab](#comment:77):
> Replying to [@tscrim](#comment:74):
> > The fix was that the cluster seed code was assuming the indexing set of a Cartan matrix constructed from a matrix that was of finite type had the standard finite type indexing set of `[1, 2, ..., n]`. I fixed this by explicitly specifying this to be the index set of the Cartan matrix.

> 
> Is my last edition to make test pass consistent with this change?

One of the trivial doctest failures because of `subtype` actually was the one indicating the problem, but that was because I wasn't passing the indexing set as I should have been. We should check for `CoxeterMatrix` and `CoxeterType` that labelings work as they should.

> > This brings up a point that might need a discussion: Should the index set of a matrix representing a finite type Cartan matrix be by default 1-based or 0-based? The argument for being 1-based is above, a natural assumption on index sets of finite type. Why we should have 0-based is consistency with the rest for default labellings and it agrees with the indexing set of the given matrix (and everything in python is 0-based). Thoughts?

> 
> I would say 1-based for finite type since they probably have a labeling hardcoded when dealing with them through Cartan matrices and Coxeter Types.
> 
> I would say 0-based whenever there is no labels specified and it comes through a CoxeterMatrix type, eventhough the type is finite.
> 
> But this probably causes trouble?

I was talking about when no labels are given, and it sounds like we are in agreement. However there is some code that doesn't use the indexing set, but instead a range under the assumption that the indexing set is `(1, 2, ..., n)`. I'm still partially debating whether or not to change the cluster seed code as well to help make it robust (although it is somewhat moot because we now specify the indexing set).

In short, it causes trouble for people's code that had made an assumption about the indexing set before.

> In a sense, having a "relabel" method somehow means that we have a canonical way of doing and then whenever it is not that one, it means that it was relabeled.
> 
> Does that make sense?

Yes it makes sense. In a way, I agree with you. However, we must define a canonical way of labeling in order to implement the database of Cartan types. Also we can relabel relabeled types.



---

archive/issue_comments_240483.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nFor whatever it's worth, the strategy I followed in the root system\ncode was to never make any assumption on the indexing set `I`.\n\nFor Cartan matrices, the situation is similar with that of matrices of\nmodule morphisms. Ideally they would be indexed by I; however we don't\nreally have yet a good matrix class supporting arbitrary indexing (or\ndo we? Panda's DataFrame class [1] could be an interesting starting\npoint!). That's in particular why I avoided using the Cartan matrix as\nmuch as possible in computations, preferring instead the Dynkin\ndiagram.\n\nUntil we have a class for matrices with arbitrary indexing, I believe\nwe should stick to what has been done so far: index the matrix by\n`0,...,|I|-1` with row/column i corresponding to the i-th element of\nthe indexing set `I` (following Python's convention: i=0 gives the\nfirst element).\n\nCheers,\n                              Nicolas\n\n[1] http://www.gregreda.com/2013/10/26/working-with-pandas-dataframes/",
    "created_at": "2015-10-14T11:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240483",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:79" align="right">comment:79</div>

For whatever it's worth, the strategy I followed in the root system
code was to never make any assumption on the indexing set `I`.

For Cartan matrices, the situation is similar with that of matrices of
module morphisms. Ideally they would be indexed by I; however we don't
really have yet a good matrix class supporting arbitrary indexing (or
do we? Panda's DataFrame class [1] could be an interesting starting
point!). That's in particular why I avoided using the Cartan matrix as
much as possible in computations, preferring instead the Dynkin
diagram.

Until we have a class for matrices with arbitrary indexing, I believe
we should stick to what has been done so far: index the matrix by
`0,...,|I|-1` with row/column i corresponding to the i-th element of
the indexing set `I` (following Python's convention: i=0 gives the
first element).

Cheers,
                              Nicolas

[1] http://www.gregreda.com/2013/10/26/working-with-pandas-dataframes/



---

archive/issue_comments_240484.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@nthiery](#comment:79):\n> Until we have a class for matrices with arbitrary indexing, I believe\n> we should stick to what has been done so far: index the matrix by\n> `0,...,|I|-1` with row/column i corresponding to the i-th element of\n> the indexing set `I` (following Python's convention: i=0 gives the\n> first element).\n\nSo my takeaway from what you're saying is that you also agree that the default indexing set for Cartan matrices should be `0, 1, ..., |I|-1`. Is that correct? We aren't changing the actual `__getitem__` in this ticket (which always uses `0, 1, ...., |I|-1`). The failures in cluster seed was caused by the root system having the \"wrong\" indexing set.",
    "created_at": "2015-10-15T19:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240484",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@nthiery](#comment:79):
> Until we have a class for matrices with arbitrary indexing, I believe
> we should stick to what has been done so far: index the matrix by
> `0,...,|I|-1` with row/column i corresponding to the i-th element of
> the indexing set `I` (following Python's convention: i=0 gives the
> first element).

So my takeaway from what you're saying is that you also agree that the default indexing set for Cartan matrices should be `0, 1, ..., |I|-1`. Is that correct? We aren't changing the actual `__getitem__` in this ticket (which always uses `0, 1, ...., |I|-1`). The failures in cluster seed was caused by the root system having the "wrong" indexing set.



---

archive/issue_comments_240485.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nAll tests now pass on my sage-6.9 version (root_system, rigged_configuration, cluster_algebra_quiver, crystals folders)\n\nNow, what is this startup module error in the patchbot??",
    "created_at": "2015-10-21T13:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240485",
    "user": "https://github.com/jplab"
}
```

<div id="comment:81" align="right">comment:81</div>

All tests now pass on my sage-6.9 version (root_system, rigged_configuration, cluster_algebra_quiver, crystals folders)

Now, what is this startup module error in the patchbot??



---

archive/issue_comments_240486.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [@jplab](#comment:81):\n> All tests now pass on my sage-6.9 version (root_system, rigged_configuration, cluster_algebra_quiver, crystals folders)\n\nThat's good.\n\n> Now, what is this startup module error in the patchbot??\n\nIt is because we have an extra module (the one for Coxeter matices) that gets imported when Sage starts. This is there as a very mild warning to try to not increase statup time, but it's somewhat of a necessary (very small) evil for us to do here.",
    "created_at": "2015-10-21T14:54:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240486",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [@jplab](#comment:81):
> All tests now pass on my sage-6.9 version (root_system, rigged_configuration, cluster_algebra_quiver, crystals folders)

That's good.

> Now, what is this startup module error in the patchbot??

It is because we have an extra module (the one for Coxeter matices) that gets imported when Sage starts. This is there as a very mild warning to try to not increase statup time, but it's somewhat of a necessary (very small) evil for us to do here.



---

archive/issue_events_253438.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-10-22T16:34:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253438"
}
```



---

archive/issue_events_253439.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-10-22T16:34:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253439"
}
```



---

archive/issue_comments_240487.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nAs all tests are passed and the labeling issues were solved, I set the ticket to positive review.",
    "created_at": "2015-10-22T16:34:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240487",
    "user": "https://github.com/jplab"
}
```

<div id="comment:83" align="right">comment:83</div>

As all tests are passed and the labeling issues were solved, I set the ticket to positive review.



---

archive/issue_comments_240488.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nThank you for your work on this.",
    "created_at": "2015-10-22T16:56:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240488",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:84" align="right">comment:84</div>

Thank you for your work on this.



---

archive/issue_events_253440.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-23T08:12:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253440"
}
```



---

archive/issue_events_253441.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-23T08:12:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253441"
}
```



---

archive/issue_comments_240489.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nPDF docs don't build",
    "created_at": "2015-10-23T08:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240489",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:85" align="right">comment:85</div>

PDF docs don't build



---

archive/issue_comments_240490.json:
```json
{
    "body": "<div id=\"comment:86\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f8a93243475064a321b17251a7489e2dbb714bc\">6f8a932</a></td><td><code>Merge branch 'develop' into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a44d0718a3b3ae36861950a6092c018c955b2877\">a44d071</a></td><td><code>Merge branch 'develop' into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d188d4a0beb0022ad072068932222c6e23920ad\">5d188d4</a></td><td><code>Fixing pdf build.</code></td></tr></table>\n",
    "created_at": "2015-10-23T15:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240490",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:86"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f8a93243475064a321b17251a7489e2dbb714bc">6f8a932</a></td><td><code>Merge branch 'develop' into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a44d0718a3b3ae36861950a6092c018c955b2877">a44d071</a></td><td><code>Merge branch 'develop' into public/combinat/coxeter_matrices-17798</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d188d4a0beb0022ad072068932222c6e23920ad">5d188d4</a></td><td><code>Fixing pdf build.</code></td></tr></table>




---

archive/issue_comments_240491.json:
```json
{
    "body": "Changed commit from **[e659186](https://github.com/sagemath/sagetrac-mirror/commit/e659186e20bbb4b4a942008dff32901659e42503)** to **[5d188d4](https://github.com/sagemath/sagetrac-mirror/commit/5d188d4a0beb0022ad072068932222c6e23920ad)**",
    "created_at": "2015-10-23T15:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240491",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e659186](https://github.com/sagemath/sagetrac-mirror/commit/e659186e20bbb4b4a942008dff32901659e42503)** to **[5d188d4](https://github.com/sagemath/sagetrac-mirror/commit/5d188d4a0beb0022ad072068932222c6e23920ad)**



---

archive/issue_events_253442.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-23T15:04:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253442"
}
```



---

archive/issue_events_253443.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-23T15:04:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253443"
}
```



---

archive/issue_events_253444.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-24T10:22:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253444"
}
```



---

archive/issue_events_253445.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "44584a19ac62e9d41e108e7de95e713a7ffe6dca",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-10-24T10:22:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17798#event-253445"
}
```



---

archive/issue_comments_240492.json:
```json
{
    "body": "Changed branch from **[public/combinat/coxeter_matrices-17798](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/coxeter_matrices-17798)** to **[5d188d4](https://github.com/sagemath/sagetrac-mirror/commit/5d188d4a0beb0022ad072068932222c6e23920ad)**",
    "created_at": "2015-10-24T10:22:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240492",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/combinat/coxeter_matrices-17798](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/coxeter_matrices-17798)** to **[5d188d4](https://github.com/sagemath/sagetrac-mirror/commit/5d188d4a0beb0022ad072068932222c6e23920ad)**



---

archive/issue_comments_240493.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nReplying to [@jplab](#comment:81): \n> Now, what is this startup module error in the patchbot??\n\nIt is because the new imports in the sage namespaces done in the file `# file /src/sage/combinat/root_system/all.py` :\n\n```\nfrom coxeter_matrix import CoxeterMatrix\nfrom coxeter_type import CoxeterType\n```\n\nwhich automatically loads all this from `src/sage/combinat/root_system/coxeter_matrix.py` file:\n\n```\n+from sage.misc.cachefunc import cached_method\n+from sage.matrix.constructor import matrix\n+from sage.matrix.matrix_space import MatrixSpace\n+from sage.misc.classcall_metaclass import ClasscallMetaclass, typecall\n+from sage.matrix.matrix_generic_dense import Matrix_generic_dense\n+from sage.graphs.graph import Graph\n+from sage.rings.all import ZZ, QQ, RR\n+from sage.rings.infinity import infinity\n+from sage.combinat.root_system.cartan_type import CartanType\n+from sage.combinat.root_system.coxeter_type import CoxeterType\n```\n\nand this from `src/sage/combinat/root_system/coxeter_type.py` file:\n\n```\n+from sage.misc.abstract_method import abstract_method\n+from sage.misc.cachefunc import cached_method\n+from sage.misc.classcall_metaclass import ClasscallMetaclass\n+from sage.combinat.root_system.cartan_type import CartanType\n+from sage.matrix.all import MatrixSpace\n+from sage.symbolic.ring import SR\n+from sage.structure.unique_representation import UniqueRepresentation\n+from sage.structure.sage_object import SageObject\n```\n\nwhich explains why the patchbot was saying that Sage now takes 6 seconds instead of 5 to start. You may think about the following questions:\n\n- Do all of these imports really need to be done at the top level of those two modules?\n- Do you really need to import `CoxeterMatrix` and `CoxeterType` in the Sage namespace? I mean, it is usefull for you, for me. But, maybe that 99% of people will not use those two things while using Sage. So I think you do not have to import them in the global Sage namespace.\n\nAnyhow, since this ticket is closed, this discussion should be moved to another ticket if it is worthwhile to continue that discussion.",
    "created_at": "2015-11-01T19:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240493",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:89" align="right">comment:89</div>

Replying to [@jplab](#comment:81): 
> Now, what is this startup module error in the patchbot??

It is because the new imports in the sage namespaces done in the file `# file /src/sage/combinat/root_system/all.py` :

```
from coxeter_matrix import CoxeterMatrix
from coxeter_type import CoxeterType
```

which automatically loads all this from `src/sage/combinat/root_system/coxeter_matrix.py` file:

```
+from sage.misc.cachefunc import cached_method
+from sage.matrix.constructor import matrix
+from sage.matrix.matrix_space import MatrixSpace
+from sage.misc.classcall_metaclass import ClasscallMetaclass, typecall
+from sage.matrix.matrix_generic_dense import Matrix_generic_dense
+from sage.graphs.graph import Graph
+from sage.rings.all import ZZ, QQ, RR
+from sage.rings.infinity import infinity
+from sage.combinat.root_system.cartan_type import CartanType
+from sage.combinat.root_system.coxeter_type import CoxeterType
```

and this from `src/sage/combinat/root_system/coxeter_type.py` file:

```
+from sage.misc.abstract_method import abstract_method
+from sage.misc.cachefunc import cached_method
+from sage.misc.classcall_metaclass import ClasscallMetaclass
+from sage.combinat.root_system.cartan_type import CartanType
+from sage.matrix.all import MatrixSpace
+from sage.symbolic.ring import SR
+from sage.structure.unique_representation import UniqueRepresentation
+from sage.structure.sage_object import SageObject
```

which explains why the patchbot was saying that Sage now takes 6 seconds instead of 5 to start. You may think about the following questions:

- Do all of these imports really need to be done at the top level of those two modules?
- Do you really need to import `CoxeterMatrix` and `CoxeterType` in the Sage namespace? I mean, it is usefull for you, for me. But, maybe that 99% of people will not use those two things while using Sage. So I think you do not have to import them in the global Sage namespace.

Anyhow, since this ticket is closed, this discussion should be moved to another ticket if it is worthwhile to continue that discussion.



---

archive/issue_comments_240494.json:
```json
{
    "body": "Changed commit from **[5d188d4](https://github.com/sagemath/sagetrac-mirror/commit/5d188d4a0beb0022ad072068932222c6e23920ad)** to none",
    "created_at": "2015-11-01T19:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240494",
    "user": "https://github.com/seblabbe"
}
```

Changed commit from **[5d188d4](https://github.com/sagemath/sagetrac-mirror/commit/5d188d4a0beb0022ad072068932222c6e23920ad)** to none



---

archive/issue_comments_240495.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nYou are not being fair. All of those are already imported, so they contribute so marginally to startup time that they are essentially non-existent. This can be seen by the startup time plugin which says there *might* have been a 1.6 millisecond increase in startup time out of 2.6 second average startup.\n\nAlso, how many things in the Sage namespace are really useful to most users of Sage? Most of the things that are there are not useful to 99% of the users. So let's advocate removing them from the global namespace, and then nothing except basic calculus will be easily discoverable.\n\nI agree that we do need to be somewhat careful about startup time. However to do that, we need better resolution of lazy imports and large chunks of combinat to be changed to be lazily imported (see #15293). But let us keep this in perspective.",
    "created_at": "2015-11-01T19:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240495",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:90" align="right">comment:90</div>

You are not being fair. All of those are already imported, so they contribute so marginally to startup time that they are essentially non-existent. This can be seen by the startup time plugin which says there *might* have been a 1.6 millisecond increase in startup time out of 2.6 second average startup.

Also, how many things in the Sage namespace are really useful to most users of Sage? Most of the things that are there are not useful to 99% of the users. So let's advocate removing them from the global namespace, and then nothing except basic calculus will be easily discoverable.

I agree that we do need to be somewhat careful about startup time. However to do that, we need better resolution of lazy imports and large chunks of combinat to be changed to be lazily imported (see #15293). But let us keep this in perspective.



---

archive/issue_comments_240496.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [@tscrim](#comment:90):\n> This can be seen by the startup time plugin which says there *might* have been a 1.6 millisecond increase in startup time out of 2.6 second average startup.\n\nSorry, I think the 5->6 seconds was only the time being spent by the plugin itself. Where do you read the \"1.6 ms\" information?",
    "created_at": "2015-11-02T10:48:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240496",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [@tscrim](#comment:90):
> This can be seen by the startup time plugin which says there *might* have been a 1.6 millisecond increase in startup time out of 2.6 second average startup.

Sorry, I think the 5->6 seconds was only the time being spent by the plugin itself. Where do you read the "1.6 ms" information?



---

archive/issue_comments_240497.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nReplying to [@seblabbe](#comment:91):\n> Replying to [@tscrim](#comment:90):\n> > This can be seen by the startup time plugin which says there *might* have been a 1.6 millisecond increase in startup time out of 2.6 second average startup.\n\n> \n> Sorry, I think the 5->6 seconds was only the time being spent by the plugin itself. Where do you read the \"1.6 ms\" information?\n\nSee the `plugins.startup_time` link in the patchbot report.",
    "created_at": "2015-11-02T14:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17798",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17798#issuecomment-240497",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:92" align="right">comment:92</div>

Replying to [@seblabbe](#comment:91):
> Replying to [@tscrim](#comment:90):
> > This can be seen by the startup time plugin which says there *might* have been a 1.6 millisecond increase in startup time out of 2.6 second average startup.

> 
> Sorry, I think the 5->6 seconds was only the time being spent by the plugin itself. Where do you read the "1.6 ms" information?

See the `plugins.startup_time` link in the patchbot report.
