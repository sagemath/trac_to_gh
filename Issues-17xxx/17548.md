# Issue 17548: Partitions() is buggy

archive/issues_017311.json:
```json
{
    "body": "There are various bugs in `Partitions`/`Compositions`, especially when many constraints are combined:\n\n```\nsage: C = Partitions(10, min_part=2, max_slope=-1)\nsage: [5,3,2] in C\nTrue\nsage: C.list()\n[[10], [8, 2], [7, 3], [6, 4]]\n```\n\n```\nsage: C = Compositions(5, max_part=2, min_slope=1, inner=[2])\nsage: [2,1,2] in C\nFalse\nsage: C.list()\n[[2, 1, 2]]\n```\n\nWhen slopes are equal, things often go wrong:\n\n```\nsage: C = Compositions(4, min_slope=0, max_slope=0)\nsage: [1,1,1,1] in C\nTrue\nsage: C.list()\n[[4], [2, 2]]\n```\n\n```\nsage: C = Partitions(6, min_slope=-1, max_slope=-1)\nsage: [3,2,1] in C\nTrue\nsage: C.list()\n[[6]]\n```\n\nContradictory length bounds still give results:\n\n```\nsage: C = Compositions(6, min_length=3, max_length=2)\nsage: [4,1,1] in C\nFalse\nsage: C.list()[0]\n[4, 1, 1]\n```\n\n```\nsage: C = Compositions(3, max_length=2, inner=[1,1,1])\nsage: [1,1,1] in C\nFalse\nsage: C.list()\n[[1, 1, 1]]\n```\n\n```\nsage: C = Compositions(10, outer=[4], inner=[1,1])\nsage: [4,6] in C\nFalse\nsage: C.list()\n[[4, 6], [3, 7], [2, 8], [1, 9]]\n```\n\n`max_part` is not respected:\n\n```\nsage: C = Compositions(4, max_part=2, min_slope=1)\nsage: [1,3] in C\nFalse\nsage: C.list()\n[[1, 3]]\n```\n\nThis is horribly wrong:\n\n```\nsage: Compositions(7, max_part=4, inner=[1], min_slope=1).list()\n[[3, 5], [1, 3, 4]]\n```\n\nThe following command hangs:\n\n```\nsage: Compositions(4, inner=[2], outer=[2,2], min_slope=0).list()\n...\n```\n\nStrange exception which really shouldn't be an exception:\n\n```\nsage: Compositions(10, inner=[1,1], max_slope=-1)\n...\nValueError: floor does not satisfy the max slope condition\n```\n\nOne possible fix is given by #17920.\n\nAssignee: ferriszorro\n\nCC:  jakobkroeker @anneschilling\n\nKeywords: Partitions\n\nStopgaps: #17637, #17956\n\nReviewer: Jeroen Demeyer\n\nBranch: public/combinat/equal_min_max_slope_fix\n\nCommit: 44d1cfb45c137d7d8ac6eb481bf6145ec57c12e4\n\nResolution: duplicate\n\nIssue created by migration from https://trac.sagemath.org/ticket/17548\n\n",
    "closed_at": "2015-04-13T17:47:22Z",
    "created_at": "2014-12-25T05:21:54Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Partitions() is buggy",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17548",
    "user": "https://trac.sagemath.org/admin/accounts/users/ferriszorro"
}
```
There are various bugs in `Partitions`/`Compositions`, especially when many constraints are combined:

```
sage: C = Partitions(10, min_part=2, max_slope=-1)
sage: [5,3,2] in C
True
sage: C.list()
[[10], [8, 2], [7, 3], [6, 4]]
```

```
sage: C = Compositions(5, max_part=2, min_slope=1, inner=[2])
sage: [2,1,2] in C
False
sage: C.list()
[[2, 1, 2]]
```

When slopes are equal, things often go wrong:

```
sage: C = Compositions(4, min_slope=0, max_slope=0)
sage: [1,1,1,1] in C
True
sage: C.list()
[[4], [2, 2]]
```

```
sage: C = Partitions(6, min_slope=-1, max_slope=-1)
sage: [3,2,1] in C
True
sage: C.list()
[[6]]
```

Contradictory length bounds still give results:

```
sage: C = Compositions(6, min_length=3, max_length=2)
sage: [4,1,1] in C
False
sage: C.list()[0]
[4, 1, 1]
```

```
sage: C = Compositions(3, max_length=2, inner=[1,1,1])
sage: [1,1,1] in C
False
sage: C.list()
[[1, 1, 1]]
```

```
sage: C = Compositions(10, outer=[4], inner=[1,1])
sage: [4,6] in C
False
sage: C.list()
[[4, 6], [3, 7], [2, 8], [1, 9]]
```

`max_part` is not respected:

```
sage: C = Compositions(4, max_part=2, min_slope=1)
sage: [1,3] in C
False
sage: C.list()
[[1, 3]]
```

This is horribly wrong:

```
sage: Compositions(7, max_part=4, inner=[1], min_slope=1).list()
[[3, 5], [1, 3, 4]]
```

The following command hangs:

```
sage: Compositions(4, inner=[2], outer=[2,2], min_slope=0).list()
...
```

Strange exception which really shouldn't be an exception:

```
sage: Compositions(10, inner=[1,1], max_slope=-1)
...
ValueError: floor does not satisfy the max slope condition
```

One possible fix is given by #17920.

Assignee: ferriszorro

CC:  jakobkroeker @anneschilling

Keywords: Partitions

Stopgaps: #17637, #17956

Reviewer: Jeroen Demeyer

Branch: public/combinat/equal_min_max_slope_fix

Commit: 44d1cfb45c137d7d8ac6eb481bf6145ec57c12e4

Resolution: duplicate

Issue created by migration from https://trac.sagemath.org/ticket/17548





---

archive/issue_comments_298668.json:
```json
{
    "body": "<a id='comment:1'></a>\nPartitions error",
    "created_at": "2014-12-25T05:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298668",
    "user": "https://trac.sagemath.org/admin/accounts/users/ferriszorro"
}
```

<a id='comment:1'></a>
Partitions error



---

archive/issue_comments_298669.json:
```json
{
    "body": "Changing assignee from z to ferriszorro.",
    "created_at": "2014-12-25T05:24:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298669",
    "user": "https://trac.sagemath.org/admin/accounts/users/ferriszorro"
}
```

Changing assignee from z to ferriszorro.



---

archive/issue_comments_298670.json:
```json
{
    "body": "` #!diff # HG changeset patch # Date 1300721936 0 foo  diff --git a/bar b/bar --- a/bar +++ b/bar `@``@` -1,2 +1,3 `@``@`  baz  quux +xyzzy `",
    "created_at": "2014-12-25T05:27:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298670",
    "user": "https://trac.sagemath.org/admin/accounts/users/ferriszorro"
}
```

` #!diff # HG changeset patch # Date 1300721936 0 foo  diff --git a/bar b/bar --- a/bar +++ b/bar `@``@` -1,2 +1,3 `@``@`  baz  quux +xyzzy `



---

archive/issue_comments_298671.json:
```json
{
    "body": "Changing branch from \"v5.7\" to \"\"",
    "created_at": "2014-12-25T08:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298671",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "v5.7" to ""



---

archive/issue_comments_298672.json:
```json
{
    "body": "<a id='comment:3'></a>\nAttachment [patch](tarball://root/attachments/some-uuid/ticket17548/patch) by @fchapoton created at 2014-12-25 08:43:22",
    "created_at": "2014-12-25T08:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298672",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
Attachment [patch](tarball://root/attachments/some-uuid/ticket17548/patch) by @fchapoton created at 2014-12-25 08:43:22



---

archive/issue_comments_298673.json:
```json
{
    "body": "Changing dependencies from \"sage 5.7\" to \"\"",
    "created_at": "2014-12-25T08:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298673",
    "user": "https://github.com/fchapoton"
}
```

Changing dependencies from "sage 5.7" to ""



---

archive/issue_events_050390.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-12-25T08:43:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17548#event-50390"
}
```



---

archive/issue_comments_298674.json:
```json
{
    "body": "Changing author from \"z\" to \"\"",
    "created_at": "2014-12-25T08:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298674",
    "user": "https://github.com/fchapoton"
}
```

Changing author from "z" to ""



---

archive/issue_comments_298675.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-25T08:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298675",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_298676.json:
```json
{
    "body": "Changing reviewer from \"f\" to \"\"",
    "created_at": "2014-12-25T08:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298676",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "f" to ""



---

archive/issue_comments_298677.json:
```json
{
    "body": "Changing merged from \"sage5.7\" to \"\"",
    "created_at": "2014-12-25T08:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298677",
    "user": "https://github.com/fchapoton"
}
```

Changing merged from "sage5.7" to ""



---

archive/issue_comments_298678.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-25T08:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298678",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_298679.json:
```json
{
    "body": "<a id='comment:4'></a>\nFr\u00e9d\u00e9ric: the wontfix tickets should be set to 'positive review', otherwise Volker will not see them.\n\n\"Merry Christmas\",\n\nNathann",
    "created_at": "2014-12-25T08:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298679",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
Frédéric: the wontfix tickets should be set to 'positive review', otherwise Volker will not see them.

"Merry Christmas",

Nathann



---

archive/issue_comments_298680.json:
```json
{
    "body": "<a id='comment:5'></a>\nThis being said this bug report is a real bug report `O_o`",
    "created_at": "2014-12-25T08:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298680",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
This being said this bug report is a real bug report `O_o`



---

archive/issue_comments_298681.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-12-25T17:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298681",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_events_050391.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/tmonteil",
    "created_at": "2014-12-25T17:31:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17548#event-50391"
}
```



---

archive/issue_events_050392.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/tmonteil",
    "created_at": "2014-12-25T17:31:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17548#event-50392"
}
```



---

archive/issue_comments_298682.json:
```json
{
    "body": "<a id='comment:6'></a>\nI was very puzzled when i saw this ticket, since my Turing tests were not able to conclude (unless we just reached the singularity). I propose to reopen the ticket since the report is correct.\n\nBy the way, i am not sure the following is a correct behaviour:\n\n```\nsage: P = Partitions(5, min_slope=2)\nsage: Q = Partitions(5)\nsage: Q[0] \n[5]\nsage: Q[0] in P\nFalse\n```",
    "created_at": "2014-12-25T17:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298682",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:6'></a>
I was very puzzled when i saw this ticket, since my Turing tests were not able to conclude (unless we just reached the singularity). I propose to reopen the ticket since the report is correct.

By the way, i am not sure the following is a correct behaviour:

```
sage: P = Partitions(5, min_slope=2)
sage: Q = Partitions(5)
sage: Q[0] 
[5]
sage: Q[0] in P
False
```



---

archive/issue_comments_298683.json:
```json
{
    "body": "Changing component from number theory to combinatorics.",
    "created_at": "2014-12-25T17:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298683",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing component from number theory to combinatorics.



---

archive/issue_comments_298684.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,17 @@\n-sage: Partitions(5,min_slope=1).list()\n-[[5], [2, 4]]\n+The following bug was reported by an humanoid:\n+\n+```\n+sage: Partitions(5, min_slope=1).list()\n+ValueError: [2, 4] is not a valid partition\n+```\n+\n+Even worse (since silent):\n+\n+```\n+sage: Partitions(5, min_slope=2).list()\n+[[5]]\n+```\n+\n+Or\n+\n+\n``````\n",
    "created_at": "2014-12-25T17:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298684",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,17 @@
-sage: Partitions(5,min_slope=1).list()
-[[5], [2, 4]]
+The following bug was reported by an humanoid:
+
+```
+sage: Partitions(5, min_slope=1).list()
+ValueError: [2, 4] is not a valid partition
+```
+
+Even worse (since silent):
+
+```
+sage: Partitions(5, min_slope=2).list()
+[[5]]
+```
+
+Or
+
+
``````




---

archive/issue_comments_298685.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-26T19:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298685",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_298686.json:
```json
{
    "body": "<a id='comment:7'></a>\nThis is actually bad input: the slopes should be negative (to be useful for partitions). From the documentation of `Partitions`:\n\n```\n- ``min_slope=k`` specifies that the partitions have slope at least\n  `k`; the slope is the difference between successive parts.\n```\nThe second input is actually correct, that is the only partition of 5 with a positive slope (provided you don't count trailing 0's, which is how Sage currently behaves). With that being said, the internal assumptions of `IntegerListsLex` are also being broken with `min_slope > max_slope == 0`, so it's no surprise bad data is being returned. So this should be a wontfix.",
    "created_at": "2014-12-26T19:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298686",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
This is actually bad input: the slopes should be negative (to be useful for partitions). From the documentation of `Partitions`:

```
- ``min_slope=k`` specifies that the partitions have slope at least
  `k`; the slope is the difference between successive parts.
```
The second input is actually correct, that is the only partition of 5 with a positive slope (provided you don't count trailing 0's, which is how Sage currently behaves). With that being said, the internal assumptions of `IntegerListsLex` are also being broken with `min_slope > max_slope == 0`, so it's no surprise bad data is being returned. So this should be a wontfix.



---

archive/issue_events_050393.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-12-26T19:18:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17548#event-50393"
}
```



---

archive/issue_events_050394.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-12-26T19:18:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17548#event-50394"
}
```



---

archive/issue_comments_298687.json:
```json
{
    "body": "<a id='comment:8'></a>\nDoes this also qualify as bad input ?\n\n```\nsage: list(Partitions(5,length=4,min_slope=0))\n...\nValueError: [1, 1, 1, 2] is not a valid partition\n```\n\nNathann",
    "created_at": "2014-12-27T02:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298687",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
Does this also qualify as bad input ?

```
sage: list(Partitions(5,length=4,min_slope=0))
...
ValueError: [1, 1, 1, 2] is not a valid partition
```

Nathann



---

archive/issue_comments_298688.json:
```json
{
    "body": "<a id='comment:9'></a>\nCurrently yes. From the doc of `IntegerListsLex` (which is the underlying class):\n\n```\n   Note: Caveat: with the current implementation, the constraints\n     should satisfy the following conditions:\n\n     * The upper and lower bounds themselves should satisfy the\n       slope constraints.\n\n     * The maximal and minimal slopes values should not be equal.\n\n     * The maximal and minimal part values should not be equal.\n```",
    "created_at": "2014-12-27T03:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298688",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
Currently yes. From the doc of `IntegerListsLex` (which is the underlying class):

```
   Note: Caveat: with the current implementation, the constraints
     should satisfy the following conditions:

     * The upper and lower bounds themselves should satisfy the
       slope constraints.

     * The maximal and minimal slopes values should not be equal.

     * The maximal and minimal part values should not be equal.
```



---

archive/issue_comments_298689.json:
```json
{
    "body": "<a id='comment:10'></a>\n> Currently yes. From the doc of `IntegerListsLex` (which is the underlying class):\n\n\nCool. So the strategy is to close as wontfix the attempts to change that because, after all, it is not a bug ?\n\nNathann",
    "created_at": "2014-12-27T03:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298689",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
> Currently yes. From the doc of `IntegerListsLex` (which is the underlying class):


Cool. So the strategy is to close as wontfix the attempts to change that because, after all, it is not a bug ?

Nathann



---

archive/issue_comments_298690.json:
```json
{
    "body": "<a id='comment:11'></a>\nThe other option would be to recycle this ticket to use for rewriting `IntegerListsLex`, but in terms of historical documentation, I think this would best done on a new ticket.",
    "created_at": "2014-12-27T04:08:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298690",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
The other option would be to recycle this ticket to use for rewriting `IntegerListsLex`, but in terms of historical documentation, I think this would best done on a new ticket.



---

archive/issue_comments_298691.json:
```json
{
    "body": "<a id='comment:12'></a>\nOK, this ticket should be closed",
    "created_at": "2014-12-27T07:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298691",
    "user": "https://trac.sagemath.org/admin/accounts/users/ferriszorro"
}
```

<a id='comment:12'></a>
OK, this ticket should be closed



---

archive/issue_comments_298692.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [tscrim](#comment%3A7):\n> This is actually bad input: the slopes should be negative (to be useful for partitions). From the documentation of `Partitions`:\n> \n> ```\n> - ``min_slope=k`` specifies that the partitions have slope at least\n>   `k`; the slope is the difference between successive parts.\n> ```\n\n\nThis is confusing: the difference between `a` and `b` is `a-b` and not `b-a`. But hopefully, it is clear in the doctest.",
    "created_at": "2014-12-28T11:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298692",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>
Replying to [tscrim](#comment%3A7):
> This is actually bad input: the slopes should be negative (to be useful for partitions). From the documentation of `Partitions`:
> 
> ```
> - ``min_slope=k`` specifies that the partitions have slope at least
>   `k`; the slope is the difference between successive parts.
> ```


This is confusing: the difference between `a` and `b` is `a-b` and not `b-a`. But hopefully, it is clear in the doctest.



---

archive/issue_events_050395.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-01-15T12:46:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17548#event-50395"
}
```



---

archive/issue_events_050396.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-01-15T12:46:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17548#event-50396"
}
```



---

archive/issue_comments_298693.json:
```json
{
    "body": "Changing author from \"\" to \"Nathann Cohen\"",
    "created_at": "2015-01-15T12:46:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298693",
    "user": "https://github.com/nathanncohen"
}
```

Changing author from "" to "Nathann Cohen"



---

archive/issue_comments_298694.json:
```json
{
    "body": "Changing branch from \"\" to \"u/ncohen/17548\"",
    "created_at": "2015-01-15T12:46:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298694",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "" to "u/ncohen/17548"



---

archive/issue_comments_298695.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[87fb103](http://git.sagemath.org/sage.git/commit/?id=87fb1030cd271861aafe2fb42e58ab03df87e34a)|`17507: change error msg, add doctest`|\n|[cd71e2b](http://git.sagemath.org/sage.git/commit/?id=cd71e2b56165de90ef0021e406e07a009878171d)|`Merge branch 'u/rws/minor_error_with_integral_n__' of trac.sagemath.org:sage into tmp`|\n|[2edddbb](http://git.sagemath.org/sage.git/commit/?id=2edddbb2212b7c617576dcd35f1437fdaa26f834)|`trac #17548: Partitions() involving min_slope argument is buggy`|",
    "created_at": "2015-01-15T12:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298695",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[87fb103](http://git.sagemath.org/sage.git/commit/?id=87fb1030cd271861aafe2fb42e58ab03df87e34a)|`17507: change error msg, add doctest`|
|[cd71e2b](http://git.sagemath.org/sage.git/commit/?id=cd71e2b56165de90ef0021e406e07a009878171d)|`Merge branch 'u/rws/minor_error_with_integral_n__' of trac.sagemath.org:sage into tmp`|
|[2edddbb](http://git.sagemath.org/sage.git/commit/?id=2edddbb2212b7c617576dcd35f1437fdaa26f834)|`trac #17548: Partitions() involving min_slope argument is buggy`|



---

archive/issue_comments_298696.json:
```json
{
    "body": "Changing commit from \"\" to \"2edddbb2212b7c617576dcd35f1437fdaa26f834\"",
    "created_at": "2015-01-15T12:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298696",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "2edddbb2212b7c617576dcd35f1437fdaa26f834"



---

archive/issue_comments_298697.json:
```json
{
    "body": "Changing commit from \"2edddbb2212b7c617576dcd35f1437fdaa26f834\" to \"0919653ddd6b387f9fc7e409dac55dfc3a5128ce\"",
    "created_at": "2015-01-15T12:47:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298697",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2edddbb2212b7c617576dcd35f1437fdaa26f834" to "0919653ddd6b387f9fc7e409dac55dfc3a5128ce"



---

archive/issue_comments_298698.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|\n|[0919653](http://git.sagemath.org/sage.git/commit/?id=0919653ddd6b387f9fc7e409dac55dfc3a5128ce)|`trac #17548: Partitions() involving min_slope argument is buggy`|",
    "created_at": "2015-01-15T12:47:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
|[0919653](http://git.sagemath.org/sage.git/commit/?id=0919653ddd6b387f9fc7e409dac55dfc3a5128ce)|`trac #17548: Partitions() involving min_slope argument is buggy`|



---

archive/issue_comments_298699.json:
```json
{
    "body": "<a id='comment:17'></a>\nAahahahahah.\n\nOkay, I spent the last 2h30 hours writing all the equations needed to ensure that there is a solution, and with all possibilities that there are I give up.\n\nI will add a stopgap for this feature as it returns wrong results.\n\nNathann",
    "created_at": "2015-01-15T15:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298699",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:17'></a>
Aahahahahah.

Okay, I spent the last 2h30 hours writing all the equations needed to ensure that there is a solution, and with all possibilities that there are I give up.

I will add a stopgap for this feature as it returns wrong results.

Nathann



---

archive/issue_comments_298700.json:
```json
{
    "body": "<a id='comment:18'></a>\nStopgap created at #17637.\n\nNathann",
    "created_at": "2015-01-15T15:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298700",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'></a>
Stopgap created at #17637.

Nathann



---

archive/issue_comments_298701.json:
```json
{
    "body": "Changing stopgaps from \"\" to \"#17637\"",
    "created_at": "2015-01-15T15:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298701",
    "user": "https://github.com/nathanncohen"
}
```

Changing stopgaps from "" to "#17637"



---

archive/issue_comments_298702.json:
```json
{
    "body": "<a id='comment:19'></a>\nIt's not a wrong result, it's invalid input because it violates the assumptions.",
    "created_at": "2015-01-15T16:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298702",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>
It's not a wrong result, it's invalid input because it violates the assumptions.



---

archive/issue_comments_298703.json:
```json
{
    "body": "Changing branch from \"u/ncohen/17548\" to \"\"",
    "created_at": "2015-01-16T04:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298703",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "u/ncohen/17548" to ""



---

archive/issue_comments_298704.json:
```json
{
    "body": "Changing commit from \"0919653ddd6b387f9fc7e409dac55dfc3a5128ce\" to \"\"",
    "created_at": "2015-01-16T04:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298704",
    "user": "https://github.com/nathanncohen"
}
```

Changing commit from "0919653ddd6b387f9fc7e409dac55dfc3a5128ce" to ""



---

archive/issue_comments_298705.json:
```json
{
    "body": "<a id='comment:20'></a>\n(the branch does not actually contain useful code. Switching this to `needs_work`)\n\n> It's not a wrong result, it's invalid input because it violates the assumptions.\n\n\nI was not able to write a patch that checks all assumptions and returns an exception in this case. If these assumptions are so complicated to check we cannot ask the users to check them for themselves before calling the function. Some of them are probably calling this function on bad input, and they are taking a big risk.\n\nNathann",
    "created_at": "2015-01-16T04:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298705",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>
(the branch does not actually contain useful code. Switching this to `needs_work`)

> It's not a wrong result, it's invalid input because it violates the assumptions.


I was not able to write a patch that checks all assumptions and returns an exception in this case. If these assumptions are so complicated to check we cannot ask the users to check them for themselves before calling the function. Some of them are probably calling this function on bad input, and they are taking a big risk.

Nathann



---

archive/issue_comments_298706.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-01-21T09:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298706",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_298707.json:
```json
{
    "body": "<a id='comment:21'></a>\n(there is nothing to review here)",
    "created_at": "2015-01-21T09:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298707",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'></a>
(there is nothing to review here)



---

archive/issue_comments_298708.json:
```json
{
    "body": "Changing author from \"Nathann Cohen\" to \"\"",
    "created_at": "2015-01-21T09:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298708",
    "user": "https://github.com/nathanncohen"
}
```

Changing author from "Nathann Cohen" to ""



---

archive/issue_comments_298709.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,7 +11,3 @@\n sage: Partitions(5, min_slope=2).list()\n [[5]]\n ```\n-\n-Or\n-\n-\n``````\n",
    "created_at": "2015-02-07T16:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298709",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,7 +11,3 @@
 sage: Partitions(5, min_slope=2).list()
 [[5]]
 ```
-
-Or
-
-
``````




---

archive/issue_comments_298710.json:
```json
{
    "body": "<a id='comment:25'></a>\nHello,\n\nTwo bug-feature report.\n\n1. Depending on the input, the floor is sometimes `0` and sometimes `1`:\n\n```python\nsage: IntegerListsLex(5, length=3).list()               # ok: it is 0\n[[5, 0, 0],\n [4, 1, 0],\n [4, 0, 1],\n...\n [0, 2, 3],\n [0, 1, 4],\n [0, 0, 5]]\nsage: IntegerListsLex(5, length=3, max_slope=0).list()   # ok: it is 0\n[[5, 0, 0], [4, 1, 0], [3, 2, 0], [3, 1, 1], [2, 2, 1]]\nsage: IntegerListsLex(5, max_slope=0).list()             # now it is 1\n[[5], [4, 1], [3, 2], [3, 1, 1], [2, 2, 1], [2, 1, 1, 1], [1, 1, 1, 1, 1]]\n```\n\n2. The iterator is sometimes completely wrong when the set is infinite:\n\n```python\nsage: it = iter(IntegerListsLex(5))\nsage: for _ in range(10): print it.next()\n[5]\n[4, 1]\n[4, 0, 1]\n[4, 0, 0, 1]\n[4, 0, 0, 0, 1]\n[4, 0, 0, 0, 0, 1]\n[4, 0, 0, 0, 0, 0, 1]\n[4, 0, 0, 0, 0, 0, 0, 1]\n[4, 0, 0, 0, 0, 0, 0, 0, 1]\n[4, 0, 0, 0, 0, 0, 0, 0, 0, 1]\n```",
    "created_at": "2015-02-22T10:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298710",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'></a>
Hello,

Two bug-feature report.

1. Depending on the input, the floor is sometimes `0` and sometimes `1`:

```python
sage: IntegerListsLex(5, length=3).list()               # ok: it is 0
[[5, 0, 0],
 [4, 1, 0],
 [4, 0, 1],
...
 [0, 2, 3],
 [0, 1, 4],
 [0, 0, 5]]
sage: IntegerListsLex(5, length=3, max_slope=0).list()   # ok: it is 0
[[5, 0, 0], [4, 1, 0], [3, 2, 0], [3, 1, 1], [2, 2, 1]]
sage: IntegerListsLex(5, max_slope=0).list()             # now it is 1
[[5], [4, 1], [3, 2], [3, 1, 1], [2, 2, 1], [2, 1, 1, 1], [1, 1, 1, 1, 1]]
```

2. The iterator is sometimes completely wrong when the set is infinite:

```python
sage: it = iter(IntegerListsLex(5))
sage: for _ in range(10): print it.next()
[5]
[4, 1]
[4, 0, 1]
[4, 0, 0, 1]
[4, 0, 0, 0, 1]
[4, 0, 0, 0, 0, 1]
[4, 0, 0, 0, 0, 0, 1]
[4, 0, 0, 0, 0, 0, 0, 1]
[4, 0, 0, 0, 0, 0, 0, 0, 1]
[4, 0, 0, 0, 0, 0, 0, 0, 0, 1]
```



---

archive/issue_comments_298711.json:
```json
{
    "body": "<a id='comment:26'></a>\nThis function should be replaced by smaller, more dedicated functions. Making it all fit in something so general makes it very hard to manage.\n\nAnd wrong, too.\n\nNathann",
    "created_at": "2015-02-22T17:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298711",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:26'></a>
This function should be replaced by smaller, more dedicated functions. Making it all fit in something so general makes it very hard to manage.

And wrong, too.

Nathann



---

archive/issue_comments_298712.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [vdelecroix](#comment%3A25):\n> 1. Depending on the input, the floor is sometimes `0` and sometimes `1`:\n> \n> ```\n> #!python\n> sage: IntegerListsLex(5, length=3).list()               # ok: it is 0\n> [[5, 0, 0],\n>  [4, 1, 0],\n>  [4, 0, 1],\n> ...\n>  [0, 2, 3],\n>  [0, 1, 4],\n>  [0, 0, 5]]\n> sage: IntegerListsLex(5, length=3, max_slope=0).list()   # ok: it is 0\n> [[5, 0, 0], [4, 1, 0], [3, 2, 0], [3, 1, 1], [2, 2, 1]]\n> sage: IntegerListsLex(5, max_slope=0).list()             # now it is 1\n> [[5], [4, 1], [3, 2], [3, 1, 1], [2, 2, 1], [2, 1, 1, 1], [1, 1, 1, 1, 1]]\n> ```\n\n\nThis is not a bug because this has trailing 0's and there is no way to have a non-trailing 0 in the last output. See this part of the documentation:\n\n```\nTwo valid integer lists are considered equivalent if they only\ndiffer by trailing zeroes. In this case, only the list with the\nleast number of trailing zeroes will be produced.\n```\nIt's subtle, but again, not a bug.\n\n> 2. The iterator is sometimes completely wrong when the set is infinite:\n> \n> ```\n> #!python\n> sage: it = iter(IntegerListsLex(5))\n> sage: for _ in range(10): print it.next()\n> [5]\n> [4, 1]\n> [4, 0, 1]\n> [4, 0, 0, 1]\n> [4, 0, 0, 0, 1]\n> [4, 0, 0, 0, 0, 1]\n> [4, 0, 0, 0, 0, 0, 1]\n> [4, 0, 0, 0, 0, 0, 0, 1]\n> [4, 0, 0, 0, 0, 0, 0, 0, 1]\n> [4, 0, 0, 0, 0, 0, 0, 0, 0, 1]\n> ```\n\n\nThis is also not a bug because there are no other conditions on the lists and each of these are the next in lex ordering.",
    "created_at": "2015-03-04T23:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298712",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>
Replying to [vdelecroix](#comment%3A25):
> 1. Depending on the input, the floor is sometimes `0` and sometimes `1`:
> 
> ```
> #!python
> sage: IntegerListsLex(5, length=3).list()               # ok: it is 0
> [[5, 0, 0],
>  [4, 1, 0],
>  [4, 0, 1],
> ...
>  [0, 2, 3],
>  [0, 1, 4],
>  [0, 0, 5]]
> sage: IntegerListsLex(5, length=3, max_slope=0).list()   # ok: it is 0
> [[5, 0, 0], [4, 1, 0], [3, 2, 0], [3, 1, 1], [2, 2, 1]]
> sage: IntegerListsLex(5, max_slope=0).list()             # now it is 1
> [[5], [4, 1], [3, 2], [3, 1, 1], [2, 2, 1], [2, 1, 1, 1], [1, 1, 1, 1, 1]]
> ```


This is not a bug because this has trailing 0's and there is no way to have a non-trailing 0 in the last output. See this part of the documentation:

```
Two valid integer lists are considered equivalent if they only
differ by trailing zeroes. In this case, only the list with the
least number of trailing zeroes will be produced.
```
It's subtle, but again, not a bug.

> 2. The iterator is sometimes completely wrong when the set is infinite:
> 
> ```
> #!python
> sage: it = iter(IntegerListsLex(5))
> sage: for _ in range(10): print it.next()
> [5]
> [4, 1]
> [4, 0, 1]
> [4, 0, 0, 1]
> [4, 0, 0, 0, 1]
> [4, 0, 0, 0, 0, 1]
> [4, 0, 0, 0, 0, 0, 1]
> [4, 0, 0, 0, 0, 0, 0, 1]
> [4, 0, 0, 0, 0, 0, 0, 0, 1]
> [4, 0, 0, 0, 0, 0, 0, 0, 0, 1]
> ```


This is also not a bug because there are no other conditions on the lists and each of these are the next in lex ordering.



---

archive/issue_comments_298713.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [tscrim](#comment%3A27):\n> > 2. The iterator is sometimes completely wrong when the set is infinite:\n> > \n> > ```\n> > #!python\n> > sage: it = iter(IntegerListsLex(5))\n> > sage: for _ in range(10): print it.next()\n> > [5]\n> > [4, 1]\n> > [4, 0, 1]\n> > [4, 0, 0, 1]\n> > [4, 0, 0, 0, 1]\n> > [4, 0, 0, 0, 0, 1]\n> > [4, 0, 0, 0, 0, 0, 1]\n> > [4, 0, 0, 0, 0, 0, 0, 1]\n> > [4, 0, 0, 0, 0, 0, 0, 0, 1]\n> > [4, 0, 0, 0, 0, 0, 0, 0, 0, 1]\n> > ```\n\n> \n> This is also not a bug because there are no other conditions on the lists and each of these are the next in lex ordering.\n\n\nThis is a bug! An iterator (finite or infinite) must eventually return every element of the set.",
    "created_at": "2015-03-05T12:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298713",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>
Replying to [tscrim](#comment%3A27):
> > 2. The iterator is sometimes completely wrong when the set is infinite:
> > 
> > ```
> > #!python
> > sage: it = iter(IntegerListsLex(5))
> > sage: for _ in range(10): print it.next()
> > [5]
> > [4, 1]
> > [4, 0, 1]
> > [4, 0, 0, 1]
> > [4, 0, 0, 0, 1]
> > [4, 0, 0, 0, 0, 1]
> > [4, 0, 0, 0, 0, 0, 1]
> > [4, 0, 0, 0, 0, 0, 0, 1]
> > [4, 0, 0, 0, 0, 0, 0, 0, 1]
> > [4, 0, 0, 0, 0, 0, 0, 0, 0, 1]
> > ```

> 
> This is also not a bug because there are no other conditions on the lists and each of these are the next in lex ordering.


This is a bug! An iterator (finite or infinite) must eventually return every element of the set.



---

archive/issue_comments_298714.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [jdemeyer](#comment%3A29):\n> > This is also not a bug because there are no other conditions on the lists and each of these are the next in lex ordering.\n\n> \n> This is a bug! An iterator (finite or infinite) must eventually return every element of the set.\n\n\nIt does, but it is doing it by lex ordering, which is different than by length-then-lex ordering. Its the same as doing a Cartesian product of `{1,2} x NN` and getting `[1, 0]`, `[1, 1]`, `[1, 2]`, ... Is that a bug to you then too?",
    "created_at": "2015-03-05T17:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298714",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:30'></a>
Replying to [jdemeyer](#comment%3A29):
> > This is also not a bug because there are no other conditions on the lists and each of these are the next in lex ordering.

> 
> This is a bug! An iterator (finite or infinite) must eventually return every element of the set.


It does, but it is doing it by lex ordering, which is different than by length-then-lex ordering. Its the same as doing a Cartesian product of `{1,2} x NN` and getting `[1, 0]`, `[1, 1]`, `[1, 2]`, ... Is that a bug to you then too?



---

archive/issue_comments_298715.json:
```json
{
    "body": "<a id='comment:31'></a>\n> Is that a bug to you then too?\n\n\nformally not, but the design is unfortunate.\nI suggest to change the behaviour.\n\n\nJakob",
    "created_at": "2015-03-05T17:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298715",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

<a id='comment:31'></a>
> Is that a bug to you then too?


formally not, but the design is unfortunate.
I suggest to change the behaviour.


Jakob



---

archive/issue_comments_298716.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [tscrim](#comment%3A30):\n> It does, but it is doing it by lex ordering, which is different than by length-then-lex ordering.\n\nOK, listing all elements in lex ordering might not be possible. Fine, then **raise an exception** instead of returning a wrong answer.\n\n> Its the same as doing a Cartesian product of `{1,2} x NN` and getting `[1, 0]`, `[1, 1]`, `[1, 2]`, ... Is that a bug to you then too?\n\nOf course that's a bug.",
    "created_at": "2015-03-06T08:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298716",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>
Replying to [tscrim](#comment%3A30):
> It does, but it is doing it by lex ordering, which is different than by length-then-lex ordering.

OK, listing all elements in lex ordering might not be possible. Fine, then **raise an exception** instead of returning a wrong answer.

> Its the same as doing a Cartesian product of `{1,2} x NN` and getting `[1, 0]`, `[1, 1]`, `[1, 2]`, ... Is that a bug to you then too?

Of course that's a bug.



---

archive/issue_comments_298717.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,21 @@\n-The following bug was reported by an humanoid:\n+There are various bugs in `Partitions`/`Compositions`, especially when many constraints are combined:\n \n ```\n sage: Partitions(5, min_slope=1).list()\n ValueError: [2, 4] is not a valid partition\n ```\n \n-Even worse (since silent):\n+```\n+sage: Partitions(6, outer=[4,2], inner=[3,3]).list()\n+[[3, 3]]\n+```\n \n ```\n-sage: Partitions(5, min_slope=2).list()\n-[[5]]\n+sage: Compositions(4, length=3, min_slope=1).list()\n+[[1, 2, 4]]\n ```\n+\n+```\n+sage: Compositions(6, max_part=3, max_slope=-1).list()\n+[[3, 3], [3, 2, 1]]\n+```\n``````\n",
    "created_at": "2015-03-09T14:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298717",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,21 @@
-The following bug was reported by an humanoid:
+There are various bugs in `Partitions`/`Compositions`, especially when many constraints are combined:
 
 ```
 sage: Partitions(5, min_slope=1).list()
 ValueError: [2, 4] is not a valid partition
 ```
 
-Even worse (since silent):
+```
+sage: Partitions(6, outer=[4,2], inner=[3,3]).list()
+[[3, 3]]
+```
 
 ```
-sage: Partitions(5, min_slope=2).list()
-[[5]]
+sage: Compositions(4, length=3, min_slope=1).list()
+[[1, 2, 4]]
 ```
+
+```
+sage: Compositions(6, max_part=3, max_slope=-1).list()
+[[3, 3], [3, 2, 1]]
+```
``````




---

archive/issue_comments_298718.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [jdemeyer](#comment%3A32):\n> Replying to [tscrim](#comment%3A30):\n> > It does, but it is doing it by lex ordering, which is different than by length-then-lex ordering.\n\n> OK, listing all elements in lex ordering might not be possible. Fine, then **raise an exception** instead of returning a wrong answer.\n> \n> > Its the same as doing a Cartesian product of `{1,2} x NN` and getting `[1, 0]`, `[1, 1]`, `[1, 2]`, ... Is that a bug to you then too?\n\n> Of course that's a bug.\n\n+1 -- It is a reasonable basic principle that when iterating over a set S, for every x in S the iterator must eventually return x, as (Jereon said above).  If this is impossible due to constraints on the order of iteration, there should be an error...",
    "created_at": "2015-03-09T14:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298718",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:34'></a>
Replying to [jdemeyer](#comment%3A32):
> Replying to [tscrim](#comment%3A30):
> > It does, but it is doing it by lex ordering, which is different than by length-then-lex ordering.

> OK, listing all elements in lex ordering might not be possible. Fine, then **raise an exception** instead of returning a wrong answer.
> 
> > Its the same as doing a Cartesian product of `{1,2} x NN` and getting `[1, 0]`, `[1, 1]`, `[1, 2]`, ... Is that a bug to you then too?

> Of course that's a bug.

+1 -- It is a reasonable basic principle that when iterating over a set S, for every x in S the iterator must eventually return x, as (Jereon said above).  If this is impossible due to constraints on the order of iteration, there should be an error...



---

archive/issue_comments_298719.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,3 +19,8 @@\n sage: Compositions(6, max_part=3, max_slope=-1).list()\n [[3, 3], [3, 2, 1]]\n ```\n+\n+```\n+sage: Partitions(6, max_part=3, max_slope=-4).list()\n+[[5, 1]]\n+```\n``````\n",
    "created_at": "2015-03-09T17:00:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298719",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,3 +19,8 @@
 sage: Compositions(6, max_part=3, max_slope=-1).list()
 [[3, 3], [3, 2, 1]]
 ```
+
+```
+sage: Partitions(6, max_part=3, max_slope=-4).list()
+[[5, 1]]
+```
``````




---

archive/issue_comments_298720.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,26 +1,33 @@\n There are various bugs in `Partitions`/`Compositions`, especially when many constraints are combined:\n \n ```\n-sage: Partitions(5, min_slope=1).list()\n-ValueError: [2, 4] is not a valid partition\n+sage: C = Partitions(10, min_part=2, max_slope=-1)\n+sage: [5,3,2] in C\n+True\n+sage: C.list()\n+[[10], [8, 2], [7, 3], [6, 4]]\n ```\n \n ```\n-sage: Partitions(6, outer=[4,2], inner=[3,3]).list()\n-[[3, 3]]\n+sage: C = Compositions(4, min_slope=0, max_slope=0)\n+sage: [1,1,1,1] in C\n+True\n+sage: C.list()\n+[[4], [2, 2]]\n ```\n \n ```\n-sage: Compositions(4, length=3, min_slope=1).list()\n-[[1, 2, 4]]\n+sage: C = Compositions(6, min_length=3, max_length=2)\n+sage: [4,1,1] in C\n+False\n+sage: C.list()[0]\n+[4, 1, 1]\n ```\n \n ```\n-sage: Compositions(6, max_part=3, max_slope=-1).list()\n-[[3, 3], [3, 2, 1]]\n+sage: C = Compositions(4, max_part=2, min_slope=1)\n+sage: [1,3] in C\n+False\n+sage: C.list()\n+[[1, 3]]\n ```\n-\n-```\n-sage: Partitions(6, max_part=3, max_slope=-4).list()\n-[[5, 1]]\n-```\n``````\n",
    "created_at": "2015-03-14T13:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298720",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,26 +1,33 @@
 There are various bugs in `Partitions`/`Compositions`, especially when many constraints are combined:
 
 ```
-sage: Partitions(5, min_slope=1).list()
-ValueError: [2, 4] is not a valid partition
+sage: C = Partitions(10, min_part=2, max_slope=-1)
+sage: [5,3,2] in C
+True
+sage: C.list()
+[[10], [8, 2], [7, 3], [6, 4]]
 ```
 
 ```
-sage: Partitions(6, outer=[4,2], inner=[3,3]).list()
-[[3, 3]]
+sage: C = Compositions(4, min_slope=0, max_slope=0)
+sage: [1,1,1,1] in C
+True
+sage: C.list()
+[[4], [2, 2]]
 ```
 
 ```
-sage: Compositions(4, length=3, min_slope=1).list()
-[[1, 2, 4]]
+sage: C = Compositions(6, min_length=3, max_length=2)
+sage: [4,1,1] in C
+False
+sage: C.list()[0]
+[4, 1, 1]
 ```
 
 ```
-sage: Compositions(6, max_part=3, max_slope=-1).list()
-[[3, 3], [3, 2, 1]]
+sage: C = Compositions(4, max_part=2, min_slope=1)
+sage: [1,3] in C
+False
+sage: C.list()
+[[1, 3]]
 ```
-
-```
-sage: Partitions(6, max_part=3, max_slope=-4).list()
-[[5, 1]]
-```
``````




---

archive/issue_comments_298721.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,8 @@\n [[10], [8, 2], [7, 3], [6, 4]]\n ```\n \n+When slopes are equal, things often go wrong:\n+\n ```\n sage: C = Compositions(4, min_slope=0, max_slope=0)\n sage: [1,1,1,1] in C\n@@ -15,6 +17,8 @@\n sage: C.list()\n [[4], [2, 2]]\n ```\n+\n+Contradictory length bounds still give results:\n \n ```\n sage: C = Compositions(6, min_length=3, max_length=2)\n@@ -24,6 +28,8 @@\n [4, 1, 1]\n ```\n \n+`max_part` is not respected:\n+\n ```\n sage: C = Compositions(4, max_part=2, min_slope=1)\n sage: [1,3] in C\n@@ -31,3 +37,11 @@\n sage: C.list()\n [[1, 3]]\n ```\n+\n+Strange exception which really shouldn't be an exception:\n+\n+```\n+sage: Compositions(10, inner=[1,1], max_slope=-1)\n+...\n+ValueError: floor does not satisfy the max slope condition\n+```\n``````\n",
    "created_at": "2015-03-14T13:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298721",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,8 @@
 [[10], [8, 2], [7, 3], [6, 4]]
 ```
 
+When slopes are equal, things often go wrong:
+
 ```
 sage: C = Compositions(4, min_slope=0, max_slope=0)
 sage: [1,1,1,1] in C
@@ -15,6 +17,8 @@
 sage: C.list()
 [[4], [2, 2]]
 ```
+
+Contradictory length bounds still give results:
 
 ```
 sage: C = Compositions(6, min_length=3, max_length=2)
@@ -24,6 +28,8 @@
 [4, 1, 1]
 ```
 
+`max_part` is not respected:
+
 ```
 sage: C = Compositions(4, max_part=2, min_slope=1)
 sage: [1,3] in C
@@ -31,3 +37,11 @@
 sage: C.list()
 [[1, 3]]
 ```
+
+Strange exception which really shouldn't be an exception:
+
+```
+sage: Compositions(10, inner=[1,1], max_slope=-1)
+...
+ValueError: floor does not satisfy the max slope condition
+```
``````




---

archive/issue_comments_298722.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,14 @@\n True\n sage: C.list()\n [[10], [8, 2], [7, 3], [6, 4]]\n+```\n+\n+```\n+sage: C = Compositions(5, max_part=2, min_slope=1, inner=[2])\n+sage: [2,1,2] in C\n+False\n+sage: C.list()\n+[[2, 1, 2]]\n ```\n \n When slopes are equal, things often go wrong:\n@@ -28,6 +36,14 @@\n [4, 1, 1]\n ```\n \n+```\n+sage: C = Compositions(3, max_length=2, inner=[1,1,1])\n+sage: [1,1,1] in C\n+False\n+sage: C.list()\n+[[1, 1, 1]]\n+```\n+\n `max_part` is not respected:\n \n ```\n``````\n",
    "created_at": "2015-03-14T13:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298722",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,14 @@
 True
 sage: C.list()
 [[10], [8, 2], [7, 3], [6, 4]]
+```
+
+```
+sage: C = Compositions(5, max_part=2, min_slope=1, inner=[2])
+sage: [2,1,2] in C
+False
+sage: C.list()
+[[2, 1, 2]]
 ```
 
 When slopes are equal, things often go wrong:
@@ -28,6 +36,14 @@
 [4, 1, 1]
 ```
 
+```
+sage: C = Compositions(3, max_length=2, inner=[1,1,1])
+sage: [1,1,1] in C
+False
+sage: C.list()
+[[1, 1, 1]]
+```
+
 `max_part` is not respected:
 
 ```
``````




---

archive/issue_comments_298723.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -54,6 +54,13 @@\n [[1, 3]]\n ```\n \n+This is horribly wrong:\n+\n+```\n+sage: Compositions(7, max_part=4, inner=[1], min_slope=1).list()\n+[[3, 5], [1, 3, 4]]\n+```\n+\n Strange exception which really shouldn't be an exception:\n \n ```\n``````\n",
    "created_at": "2015-03-14T14:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298723",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -54,6 +54,13 @@
 [[1, 3]]
 ```
 
+This is horribly wrong:
+
+```
+sage: Compositions(7, max_part=4, inner=[1], min_slope=1).list()
+[[3, 5], [1, 3, 4]]
+```
+
 Strange exception which really shouldn't be an exception:
 
 ```
``````




---

archive/issue_comments_298724.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,6 +24,14 @@\n True\n sage: C.list()\n [[4], [2, 2]]\n+```\n+\n+```\n+sage: C = Partitions(6, min_slope=-1, max_slope=-1)\n+sage: [3,2,1] in C\n+True\n+sage: C.list()\n+[[6]]\n ```\n \n Contradictory length bounds still give results:\n``````\n",
    "created_at": "2015-03-14T14:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298724",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,6 +24,14 @@
 True
 sage: C.list()
 [[4], [2, 2]]
+```
+
+```
+sage: C = Partitions(6, min_slope=-1, max_slope=-1)
+sage: [3,2,1] in C
+True
+sage: C.list()
+[[6]]
 ```
 
 Contradictory length bounds still give results:
``````




---

archive/issue_comments_298725.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -52,6 +52,14 @@\n [[1, 1, 1]]\n ```\n \n+```\n+sage: C = Compositions(10, outer=[4], inner=[1,1])\n+sage: [4,6] in C\n+False\n+sage: C.list()\n+[[4, 6], [3, 7], [2, 8], [1, 9]]\n+```\n+\n `max_part` is not respected:\n \n ```\n``````\n",
    "created_at": "2015-03-14T14:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298725",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -52,6 +52,14 @@
 [[1, 1, 1]]
 ```
 
+```
+sage: C = Compositions(10, outer=[4], inner=[1,1])
+sage: [4,6] in C
+False
+sage: C.list()
+[[4, 6], [3, 7], [2, 8], [1, 9]]
+```
+
 `max_part` is not respected:
 
 ```
``````




---

archive/issue_comments_298726.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -77,6 +77,13 @@\n [[3, 5], [1, 3, 4]]\n ```\n \n+The following command hangs:\n+\n+```\n+sage: Compositions(4, inner=[2], outer=[2,2], min_slope=0).list()\n+...\n+```\n+\n Strange exception which really shouldn't be an exception:\n \n ```\n``````\n",
    "created_at": "2015-03-14T14:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298726",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -77,6 +77,13 @@
 [[3, 5], [1, 3, 4]]
 ```
 
+The following command hangs:
+
+```
+sage: Compositions(4, inner=[2], outer=[2,2], min_slope=0).list()
+...
+```
+
 Strange exception which really shouldn't be an exception:
 
 ```
``````




---

archive/issue_comments_298727.json:
```json
{
    "body": "Changing stopgaps from \"#17637\" to \"#17637, #17956\"",
    "created_at": "2015-03-14T14:40:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298727",
    "user": "https://github.com/jdemeyer"
}
```

Changing stopgaps from "#17637" to "#17637, #17956"



---

archive/issue_comments_298728.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -91,3 +91,5 @@\n ...\n ValueError: floor does not satisfy the max slope condition\n ```\n+\n+One possible fix is given by #17920.\n``````\n",
    "created_at": "2015-03-15T15:32:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298728",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -91,3 +91,5 @@
 ...
 ValueError: floor does not satisfy the max slope condition
 ```
+
+One possible fix is given by #17920.
``````




---

archive/issue_comments_298729.json:
```json
{
    "body": "Changing branch from \"\" to \"public/combinat/equal_min_max_slope_fix\"",
    "created_at": "2015-03-16T05:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298729",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "" to "public/combinat/equal_min_max_slope_fix"



---

archive/issue_comments_298730.json:
```json
{
    "body": "Changing commit from \"\" to \"52db42b01c1b86c752652a09533e50dd0d899ab3\"",
    "created_at": "2015-03-16T05:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298730",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "" to "52db42b01c1b86c752652a09533e50dd0d899ab3"



---

archive/issue_comments_298731.json:
```json
{
    "body": "<a id='comment:45'></a>\nThe branch I've attached fixes the length bounds and when `min_slope == max_slope`. However these violate the internal assumptions:\n\n```\nsage: C = Compositions(4, max_part=2, min_slope=1)\nsage: Compositions(7, max_part=4, inner=[1], min_slope=1)\n```\nsince the ceiling defaults to `max_part`, which is always 2/4 and has a slope of 0 and violates the `min_slope` condition (i.e., the ceiling must be increasing).\n\nAlso FTR, the last one in the description is the error message that was wanted (precisely because it violates the conditions).",
    "created_at": "2015-03-16T05:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298731",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:45'></a>
The branch I've attached fixes the length bounds and when `min_slope == max_slope`. However these violate the internal assumptions:

```
sage: C = Compositions(4, max_part=2, min_slope=1)
sage: Compositions(7, max_part=4, inner=[1], min_slope=1)
```
since the ceiling defaults to `max_part`, which is always 2/4 and has a slope of 0 and violates the `min_slope` condition (i.e., the ceiling must be increasing).

Also FTR, the last one in the description is the error message that was wanted (precisely because it violates the conditions).



---

archive/issue_comments_298732.json:
```json
{
    "body": "<a id='comment:46'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[44d1cfb](http://git.sagemath.org/sage.git/commit/?id=44d1cfb45c137d7d8ac6eb481bf6145ec57c12e4)|`Fixes for min_slope == max_slope and length conditions.`|",
    "created_at": "2015-03-16T05:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298732",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[44d1cfb](http://git.sagemath.org/sage.git/commit/?id=44d1cfb45c137d7d8ac6eb481bf6145ec57c12e4)|`Fixes for min_slope == max_slope and length conditions.`|



---

archive/issue_comments_298733.json:
```json
{
    "body": "Changing commit from \"52db42b01c1b86c752652a09533e50dd0d899ab3\" to \"44d1cfb45c137d7d8ac6eb481bf6145ec57c12e4\"",
    "created_at": "2015-03-16T05:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298733",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "52db42b01c1b86c752652a09533e50dd0d899ab3" to "44d1cfb45c137d7d8ac6eb481bf6145ec57c12e4"



---

archive/issue_comments_298734.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [tscrim](#comment%3A45):\n> the last one in the description is the error message that was wanted (precisely because it violates the conditions).\n\n\nMy point with the last one is that it should simply be allowed input. There is no fundamental reason why\n\n```\nsage: Compositions(10, inner=[1,1], max_slope=-1)\n```\nshouldn't \"just work\".",
    "created_at": "2015-03-16T07:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298734",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:47'></a>
Replying to [tscrim](#comment%3A45):
> the last one in the description is the error message that was wanted (precisely because it violates the conditions).


My point with the last one is that it should simply be allowed input. There is no fundamental reason why

```
sage: Compositions(10, inner=[1,1], max_slope=-1)
```
shouldn't "just work".



---

archive/issue_comments_298735.json:
```json
{
    "body": "<a id='comment:48'></a>\nReplying to [tscrim](#comment%3A45):\n> These violate the internal assumptions\n\nThen you really should add checks in the code raising an exception if the condition is not satisfied. If you do add such checks, make sure to add them to `IntegerListsLex` and not the `Partitions`/`Compositions` front-ends.\n\nBut even better would be to just allow such input.",
    "created_at": "2015-03-16T07:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298735",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:48'></a>
Replying to [tscrim](#comment%3A45):
> These violate the internal assumptions

Then you really should add checks in the code raising an exception if the condition is not satisfied. If you do add such checks, make sure to add them to `IntegerListsLex` and not the `Partitions`/`Compositions` front-ends.

But even better would be to just allow such input.



---

archive/issue_comments_298736.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [jdemeyer](#comment%3A48):\n> Replying to [tscrim](#comment%3A45):\n> > These violate the internal assumptions\n\n> Then you really should add checks in the code raising an exception if the condition is not satisfied. If you do add such checks, make sure to add them to `IntegerListsLex` and not the `Partitions`/`Compositions` front-ends.\n> \n> But even better would be to just allow such input.\n\n\nIn principle, all these bugs should now be fixed with #17979. Please check!",
    "created_at": "2015-03-24T03:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298736",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:49'></a>
Replying to [jdemeyer](#comment%3A48):
> Replying to [tscrim](#comment%3A45):
> > These violate the internal assumptions

> Then you really should add checks in the code raising an exception if the condition is not satisfied. If you do add such checks, make sure to add them to `IntegerListsLex` and not the `Partitions`/`Compositions` front-ends.
> 
> But even better would be to just allow such input.


In principle, all these bugs should now be fixed with #17979. Please check!



---

archive/issue_comments_298737.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-04-13T12:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298737",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_050397.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-04-13T12:47:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17548#event-50397"
}
```



---

archive/issue_events_050398.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-04-13T12:47:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17548#event-50398"
}
```



---

archive/issue_comments_298738.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2015-04-13T12:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298738",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_events_050399.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-13T17:47:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17548#event-50399"
}
```



---

archive/issue_comments_298739.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2015-04-13T17:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17548#issuecomment-298739",
    "user": "https://github.com/vbraun"
}
```

Resolution: duplicate
