# Issue 17630: Further clean up of ATLAS (or equivalent BLAS) linking

archive/issues_017393.json:
```json
{
    "assignees": [],
    "body": "Different pkgs find ATLAS (or equivalent libs e.g. on OS X and Cygwin) libs in different ways.\nIn particular the situation is broken on Cygwin.\n\nThe one we tweak ourselves are:\n* ATLAS when we pass SAGE_ATLAS_LIB to decide what to copy/symlink\n* fflas-ffpack\n* iml\n* R\n* the Sage library through SAGE_BLAS and module_list.py and its BLAS/BLAS2 madness\nThe ones we hack ourselves:\n* cvxopt (we patch and hardcode in setup.py).\nOther pkgs depend on a BLAS implem but are autonomous(?):\n* gsl,\n* scipy (envvars are unset...),\n* numpy (same same as scipy).\n\nMy proposal before a pkgconfig solution gets available at #17075 is that when ATLAS spkg-install script is run it decides what should be used once and for all and other packages use this information (like used to be done a little bit when the linbox spkg-install script wrote `echo $LINBOX_BLAS > $SAGE_LOCAL/share/cblas_config`)\n\nCC:  @jdemeyer @vbraun @kiwifb\n\nAuthor: **Jean-Pierre Flori, Fran\u00e7ois Bissey**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17630_\n\n",
    "closed_at": "2017-07-13T07:54:31Z",
    "created_at": "2015-01-13T18:13:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Further clean up of ATLAS (or equivalent BLAS) linking",
    "type": "issue",
    "updated_at": "2017-07-13T07:54:31Z",
    "url": "https://github.com/sagemath/sage/issues/17630",
    "user": "https://github.com/jpflori"
}
```
Different pkgs find ATLAS (or equivalent libs e.g. on OS X and Cygwin) libs in different ways.
In particular the situation is broken on Cygwin.

The one we tweak ourselves are:
* ATLAS when we pass SAGE_ATLAS_LIB to decide what to copy/symlink
* fflas-ffpack
* iml
* R
* the Sage library through SAGE_BLAS and module_list.py and its BLAS/BLAS2 madness
The ones we hack ourselves:
* cvxopt (we patch and hardcode in setup.py).
Other pkgs depend on a BLAS implem but are autonomous(?):
* gsl,
* scipy (envvars are unset...),
* numpy (same same as scipy).

My proposal before a pkgconfig solution gets available at #17075 is that when ATLAS spkg-install script is run it decides what should be used once and for all and other packages use this information (like used to be done a little bit when the linbox spkg-install script wrote `echo $LINBOX_BLAS > $SAGE_LOCAL/share/cblas_config`)

CC:  @jdemeyer @vbraun @kiwifb

Author: **Jean-Pierre Flori, François Bissey**

_Issue created by migration from https://trac.sagemath.org/ticket/17630_





---

archive/issue_events_233447.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2015-01-13T18:13:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233447"
}
```



---

archive/issue_events_233448.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2015-01-13T18:13:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233448"
}
```



---

archive/issue_events_233449.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2015-01-13T18:13:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233449"
}
```



---

archive/issue_events_233450.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2015-01-13T18:13:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233450"
}
```



---

archive/issue_comments_239719.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,6 +5,7 @@\n * ATLAS when we pass SAGE_ATLAS_LIB to decide what to copy/symlink\n * fflas-ffpack\n * iml\n+* R\n * the Sage library through SAGE_BLAS and module_list.py and its BLAS/BLAS2 madness\n Other pkgs depend on a BLAS implem but are autonomous.\n \n``````\n",
    "created_at": "2015-01-13T18:15:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239719",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,6 +5,7 @@
 * ATLAS when we pass SAGE_ATLAS_LIB to decide what to copy/symlink
 * fflas-ffpack
 * iml
+* R
 * the Sage library through SAGE_BLAS and module_list.py and its BLAS/BLAS2 madness
 Other pkgs depend on a BLAS implem but are autonomous.
 
``````




---

archive/issue_comments_239720.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,6 +7,11 @@\n * iml\n * R\n * the Sage library through SAGE_BLAS and module_list.py and its BLAS/BLAS2 madness\n-Other pkgs depend on a BLAS implem but are autonomous.\n+The ones we hack ourselves:\n+* cvxopt (we patch and hardcode in setup.py).\n+Other pkgs depend on a BLAS implem but are autonomous(?):\n+* gsl,\n+* scipy (envvars are unset...),\n+* numpy (same same as scipy).\n \n My proposal before a pkgconfig solution gets available at #17075 is that when ATLAS spkg-install script is run it decides what should be used once and for all and other packages use this information (like used to be done a little bit when the linbox spkg-install script wrote `echo $LINBOX_BLAS > $SAGE_LOCAL/share/cblas_config`)\n``````\n",
    "created_at": "2015-01-14T16:24:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239720",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,6 +7,11 @@
 * iml
 * R
 * the Sage library through SAGE_BLAS and module_list.py and its BLAS/BLAS2 madness
-Other pkgs depend on a BLAS implem but are autonomous.
+The ones we hack ourselves:
+* cvxopt (we patch and hardcode in setup.py).
+Other pkgs depend on a BLAS implem but are autonomous(?):
+* gsl,
+* scipy (envvars are unset...),
+* numpy (same same as scipy).
 
 My proposal before a pkgconfig solution gets available at #17075 is that when ATLAS spkg-install script is run it decides what should be used once and for all and other packages use this information (like used to be done a little bit when the linbox spkg-install script wrote `echo $LINBOX_BLAS > $SAGE_LOCAL/share/cblas_config`)
``````




---

archive/issue_comments_239721.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nInfo for scipy/numpy:\nhttp://www.scipy.org/scipylib/building/linux.html",
    "created_at": "2015-01-14T17:00:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239721",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:3" align="right">Comment 3</div>

Info for scipy/numpy:
http://www.scipy.org/scipylib/building/linux.html



---

archive/issue_comments_239722.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nFot cvxopt:\nhttp://cvxopt.org/install/",
    "created_at": "2015-01-14T17:04:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239722",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:4" align="right">Comment 4</div>

Fot cvxopt:
http://cvxopt.org/install/



---

archive/issue_comments_239723.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nYes definitely of interest. I think cvxopt 1.1.7 is better at handling things with environment variables so we shouldn't patch anymore, I should update the cvxopt ebuild for gentoo. From cvxopt setup.py\n\n```\nBLAS_NOUNDERSCORES = int(os.environ.get(\"CVXOPT_BLAS_NOUNDERSCORES\",BLAS_NOUNDERSCORES)) == True\nBLAS_LIB = os.environ.get(\"CVXOPT_BLAS_LIB\",BLAS_LIB)\nLAPACK_LIB = os.environ.get(\"CVXOPT_LAPACK_LIB\",LAPACK_LIB)\nBLAS_LIB_DIR = os.environ.get(\"CVXOPT_BLAS_LIB_DIR\",BLAS_LIB_DIR)\nBLAS_EXTRA_LINK_ARGS = os.environ.get(\"CVXOPT_BLAS_EXTRA_LINK_ARGS\",BLAS_EXTRA_LINK_ARGS)\nif type(BLAS_LIB) is str: BLAS_LIB = BLAS_LIB.strip().split(',')\nif type(LAPACK_LIB) is str: LAPACK_LIB = LAPACK_LIB.strip().split(',')\nif type(BLAS_EXTRA_LINK_ARGS) is str: BLAS_EXTRA_LINK_ARGS = BLAS_EXTRA_LINK_ARGS.strip().split(',')\nBUILD_GSL = int(os.environ.get(\"CVXOPT_BUILD_GSL\",BUILD_GSL))\nGSL_LIB_DIR = os.environ.get(\"CVXOPT_GSL_LIB_DIR\",GSL_LIB_DIR)\nGSL_INC_DIR = os.environ.get(\"CVXOPT_GSL_INC_DIR\",GSL_INC_DIR)\nBUILD_FFTW = int(os.environ.get(\"CVXOPT_BUILD_FFTW\",BUILD_FFTW))\nFFTW_LIB_DIR = os.environ.get(\"CVXOPT_FFTW_LIB_DIR\",FFTW_LIB_DIR)\nFFTW_INC_DIR = os.environ.get(\"CVXOPT_FFTW_INC_DIR\",FFTW_INC_DIR)\nBUILD_GLPK = int(os.environ.get(\"CVXOPT_BUILD_GLPK\",BUILD_GLPK))\nGLPK_LIB_DIR = os.environ.get(\"CVXOPT_GLPK_LIB_DIR\",GLPK_LIB_DIR)\nGLPK_INC_DIR = os.environ.get(\"CVXOPT_GLPK_INC_DIR\",GLPK_INC_DIR)\nBUILD_DSDP = int(os.environ.get(\"CVXOPT_BUILD_DSDP\",BUILD_DSDP))\nDSDP_LIB_DIR = os.environ.get(\"CVXOPT_DSDP_LIB_DIR\",DSDP_LIB_DIR)\nDSDP_INC_DIR = os.environ.get(\"CVXOPT_DSDP_INC_DIR\",DSDP_INC_DIR)\n```\n\ngsl makes its own cblas (but no fortran blas) and by default libgsl is not linked with any cblas, you are supposed to link with a cblas when you use the library.\nSetting blas/lapack in numpy/scipy makes me crazy half the time. Environment variable or setup.cfg can be used to change the default (currently looking for MKL, ATLAS, netlib and netlib source in that order if I am not mistaken).\nMaking a setup.cfg from pkg-config is hard\n\n```\npc_incdir() {\n\t$(tc-getPKG_CONFIG) --cflags-only-I $@ | \\\n\t\tsed -e 's/^-I//' -e 's/[ ]*-I/:/g' -e 's/[ ]*$//' -e 's|^:||'\n}\n\npc_libdir() {\n\t$(tc-getPKG_CONFIG) --libs-only-L $@ | \\\n\t\tsed -e 's/^-L//' -e 's/[ ]*-L/:/g' -e 's/[ ]*$//' -e 's|^:||'\n}\n\npc_libs() {\n\t$(tc-getPKG_CONFIG) --libs-only-l $@ | \\\n\t\tsed -e 's/[ ]-l*\\(pthread\\|m\\)\\([ ]\\|$\\)//g' \\\n\t\t-e 's/^-l//' -e 's/[ ]*-l/,/g' -e 's/[ ]*$//' \\\n\t\t| tr ',' '\\n' | sort -u | tr '\\n' ',' | sed -e 's|,$||'\n}\n\n\t\tlocal libdir=\"${EPREFIX}\"/usr/$(get_libdir) # local tree\n\t\t# make sure _dotblas.so gets built\n\t\tsed -i -e '/NO_ATLAS_INFO/,+1d' numpy/core/setup.py || die\n\t\tcat >> site.cfg <<-EOF\n\t\t\t[blas]\n\t\t\tinclude_dirs = $(pc_incdir cblas)\n\t\t\tlibrary_dirs = $(pc_libdir cblas blas):${libdir}\n\t\t\tblas_libs = $(pc_libs cblas blas)\n\t\t\t[lapack]\n\t\t\tlibrary_dirs = $(pc_libdir lapack):${libdir}\n\t\t\tlapack_libs = $(pc_libs lapack)\n\t\tEOF\n```\n but with the python binding it should be easier.",
    "created_at": "2015-01-15T22:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239723",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">Comment 5</div>

Yes definitely of interest. I think cvxopt 1.1.7 is better at handling things with environment variables so we shouldn't patch anymore, I should update the cvxopt ebuild for gentoo. From cvxopt setup.py

```
BLAS_NOUNDERSCORES = int(os.environ.get("CVXOPT_BLAS_NOUNDERSCORES",BLAS_NOUNDERSCORES)) == True
BLAS_LIB = os.environ.get("CVXOPT_BLAS_LIB",BLAS_LIB)
LAPACK_LIB = os.environ.get("CVXOPT_LAPACK_LIB",LAPACK_LIB)
BLAS_LIB_DIR = os.environ.get("CVXOPT_BLAS_LIB_DIR",BLAS_LIB_DIR)
BLAS_EXTRA_LINK_ARGS = os.environ.get("CVXOPT_BLAS_EXTRA_LINK_ARGS",BLAS_EXTRA_LINK_ARGS)
if type(BLAS_LIB) is str: BLAS_LIB = BLAS_LIB.strip().split(',')
if type(LAPACK_LIB) is str: LAPACK_LIB = LAPACK_LIB.strip().split(',')
if type(BLAS_EXTRA_LINK_ARGS) is str: BLAS_EXTRA_LINK_ARGS = BLAS_EXTRA_LINK_ARGS.strip().split(',')
BUILD_GSL = int(os.environ.get("CVXOPT_BUILD_GSL",BUILD_GSL))
GSL_LIB_DIR = os.environ.get("CVXOPT_GSL_LIB_DIR",GSL_LIB_DIR)
GSL_INC_DIR = os.environ.get("CVXOPT_GSL_INC_DIR",GSL_INC_DIR)
BUILD_FFTW = int(os.environ.get("CVXOPT_BUILD_FFTW",BUILD_FFTW))
FFTW_LIB_DIR = os.environ.get("CVXOPT_FFTW_LIB_DIR",FFTW_LIB_DIR)
FFTW_INC_DIR = os.environ.get("CVXOPT_FFTW_INC_DIR",FFTW_INC_DIR)
BUILD_GLPK = int(os.environ.get("CVXOPT_BUILD_GLPK",BUILD_GLPK))
GLPK_LIB_DIR = os.environ.get("CVXOPT_GLPK_LIB_DIR",GLPK_LIB_DIR)
GLPK_INC_DIR = os.environ.get("CVXOPT_GLPK_INC_DIR",GLPK_INC_DIR)
BUILD_DSDP = int(os.environ.get("CVXOPT_BUILD_DSDP",BUILD_DSDP))
DSDP_LIB_DIR = os.environ.get("CVXOPT_DSDP_LIB_DIR",DSDP_LIB_DIR)
DSDP_INC_DIR = os.environ.get("CVXOPT_DSDP_INC_DIR",DSDP_INC_DIR)
```

gsl makes its own cblas (but no fortran blas) and by default libgsl is not linked with any cblas, you are supposed to link with a cblas when you use the library.
Setting blas/lapack in numpy/scipy makes me crazy half the time. Environment variable or setup.cfg can be used to change the default (currently looking for MKL, ATLAS, netlib and netlib source in that order if I am not mistaken).
Making a setup.cfg from pkg-config is hard

```
pc_incdir() {
	$(tc-getPKG_CONFIG) --cflags-only-I $@ | \
		sed -e 's/^-I//' -e 's/[ ]*-I/:/g' -e 's/[ ]*$//' -e 's|^:||'
}

pc_libdir() {
	$(tc-getPKG_CONFIG) --libs-only-L $@ | \
		sed -e 's/^-L//' -e 's/[ ]*-L/:/g' -e 's/[ ]*$//' -e 's|^:||'
}

pc_libs() {
	$(tc-getPKG_CONFIG) --libs-only-l $@ | \
		sed -e 's/[ ]-l*\(pthread\|m\)\([ ]\|$\)//g' \
		-e 's/^-l//' -e 's/[ ]*-l/,/g' -e 's/[ ]*$//' \
		| tr ',' '\n' | sort -u | tr '\n' ',' | sed -e 's|,$||'
}

		local libdir="${EPREFIX}"/usr/$(get_libdir) # local tree
		# make sure _dotblas.so gets built
		sed -i -e '/NO_ATLAS_INFO/,+1d' numpy/core/setup.py || die
		cat >> site.cfg <<-EOF
			[blas]
			include_dirs = $(pc_incdir cblas)
			library_dirs = $(pc_libdir cblas blas):${libdir}
			blas_libs = $(pc_libs cblas blas)
			[lapack]
			library_dirs = $(pc_libdir lapack):${libdir}
			lapack_libs = $(pc_libs lapack)
		EOF
```
 but with the python binding it should be easier.



---

archive/issue_comments_239724.json:
```json
{
    "body": "Commit: **[b02e159](https://github.com/sagemath/sagetrac-mirror/commit/b02e1593daa51b92401eed7746efcdc665b31388)**",
    "created_at": "2015-01-17T18:44:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239724",
    "user": "https://github.com/jpflori"
}
```

Commit: **[b02e159](https://github.com/sagemath/sagetrac-mirror/commit/b02e1593daa51b92401eed7746efcdc665b31388)**



---

archive/issue_comments_239725.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nThis is definitely not really needs_reviex, in particular, OS X surely needs further tweaking, not sure that passing `-lblas` or `lcblas` would always work, or if one sometines needs to pass the `-framework` stuff...\nI've basically tested it on Linux and Cygwin and it looks ok.\n\nAnyway, I won't be able to do anything for at leasr one month, so here is the current state of affair.\nFeel free to finalize and merge it!\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79c712c9a807c01048afceadf461e91e9d6aa5ea\">79c712c</a></td><td><code>Simplify BLAS/LAPACK config for IML.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/030b90bea83b1abbc0a503fa18d90b4b52d6fd6d\">030b90b</a></td><td><code>Simplify BLAS/LAPACK config for numpy.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a14692c1a0a49efc4c54f6a52d29f9eaf7f7352\">2a14692</a></td><td><code>Simplify BLAS/LAPACK config for Sage library.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/355fff8d9fab14fda3cd1c92e130a88f46a2b24a\">355fff8</a></td><td><code>Let ATLAS install script write cblas_config.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14675a5558cd36e837d1036d9f5753d8d88e6f69\">14675a5</a></td><td><code>Remove SAGE_CBLAS documentation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf79fc30c7710af88cf832d0812c2bbb223f1249\">cf79fc3</a></td><td><code>First try to simplify BLAS/LAPACK configuration for cvxopt.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/534ec94bdc065c8c330c1848838fb65c2fbe28ec\">534ec94</a></td><td><code>Fix cblas_config mechanism.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09e8128480fdd4ffbec4c9db3e751d088a5ada36\">09e8128</a></td><td><code>Further modifications to numpy/scipy build systems.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37abe376db742dadbbaf208c2f799b7520c19147\">37abe37</a></td><td><code>Slight cleanup of cvxopt directory.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b02e1593daa51b92401eed7746efcdc665b31388\">b02e159</a></td><td><code>Fixes for cleaner BLAS config.</code></td></tr></table>\n",
    "created_at": "2015-01-17T18:44:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239725",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:6" align="right">Comment 6</div>

This is definitely not really needs_reviex, in particular, OS X surely needs further tweaking, not sure that passing `-lblas` or `lcblas` would always work, or if one sometines needs to pass the `-framework` stuff...
I've basically tested it on Linux and Cygwin and it looks ok.

Anyway, I won't be able to do anything for at leasr one month, so here is the current state of affair.
Feel free to finalize and merge it!

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79c712c9a807c01048afceadf461e91e9d6aa5ea">79c712c</a></td><td><code>Simplify BLAS/LAPACK config for IML.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/030b90bea83b1abbc0a503fa18d90b4b52d6fd6d">030b90b</a></td><td><code>Simplify BLAS/LAPACK config for numpy.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a14692c1a0a49efc4c54f6a52d29f9eaf7f7352">2a14692</a></td><td><code>Simplify BLAS/LAPACK config for Sage library.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/355fff8d9fab14fda3cd1c92e130a88f46a2b24a">355fff8</a></td><td><code>Let ATLAS install script write cblas_config.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14675a5558cd36e837d1036d9f5753d8d88e6f69">14675a5</a></td><td><code>Remove SAGE_CBLAS documentation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf79fc30c7710af88cf832d0812c2bbb223f1249">cf79fc3</a></td><td><code>First try to simplify BLAS/LAPACK configuration for cvxopt.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/534ec94bdc065c8c330c1848838fb65c2fbe28ec">534ec94</a></td><td><code>Fix cblas_config mechanism.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09e8128480fdd4ffbec4c9db3e751d088a5ada36">09e8128</a></td><td><code>Further modifications to numpy/scipy build systems.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37abe376db742dadbbaf208c2f799b7520c19147">37abe37</a></td><td><code>Slight cleanup of cvxopt directory.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b02e1593daa51b92401eed7746efcdc665b31388">b02e159</a></td><td><code>Fixes for cleaner BLAS config.</code></td></tr></table>




---

archive/issue_comments_239726.json:
```json
{
    "body": "Branch: **[u/jpflori/ticket/17630](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17630)**",
    "created_at": "2015-01-17T18:44:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239726",
    "user": "https://github.com/jpflori"
}
```

Branch: **[u/jpflori/ticket/17630](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17630)**



---

archive/issue_comments_239727.json:
```json
{
    "body": "Author: **Jean-Pierre Flori**",
    "created_at": "2015-01-17T18:44:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239727",
    "user": "https://github.com/jpflori"
}
```

Author: **Jean-Pierre Flori**



---

archive/issue_events_233451.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2015-01-17T18:44:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233451"
}
```



---

archive/issue_comments_239728.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nAlso note that part of the changes here have been shamelessly stolen from sage-on-gentoo patches posted on #17075.",
    "created_at": "2015-01-17T18:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239728",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:7" align="right">Comment 7</div>

Also note that part of the changes here have been shamelessly stolen from sage-on-gentoo patches posted on #17075.



---

archive/issue_comments_239729.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@jpflori](#comment%3A7):\n> Also note that part of the changes here have been shamelessly stolen from sage-on-gentoo patches posted on #17075.\n\nYou didn't go all the way with libdir, but you certainly stole the spirit of it. The libdir part is important if we use an external blas that is not in a standard directory. Hum.... may be I should add a runpath for that case, at the very least LD_LIBRARY_PATH or its equivalent needs to be set.",
    "created_at": "2015-01-17T22:06:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239729",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@jpflori](#comment%3A7):
> Also note that part of the changes here have been shamelessly stolen from sage-on-gentoo patches posted on #17075.

You didn't go all the way with libdir, but you certainly stole the spirit of it. The libdir part is important if we use an external blas that is not in a standard directory. Hum.... may be I should add a runpath for that case, at the very least LD_LIBRARY_PATH or its equivalent needs to be set.



---

archive/issue_comments_239730.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nPlease note that the idea here is just to clean up how we use our default (and unique) BLAS.\nWe should not try to do everything at once!",
    "created_at": "2015-01-17T22:17:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239730",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:9" align="right">Comment 9</div>

Please note that the idea here is just to clean up how we use our default (and unique) BLAS.
We should not try to do everything at once!



---

archive/issue_comments_239731.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nWell, I'd still like to include libdir as forward thinking - that and it makes my life easier sage-on-gentoo side - of course lots of things land in sage that make my life ugly but I'd like to minimize it if I can.",
    "created_at": "2015-01-17T23:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239731",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">Comment 10</div>

Well, I'd still like to include libdir as forward thinking - that and it makes my life easier sage-on-gentoo side - of course lots of things land in sage that make my life ugly but I'd like to minimize it if I can.



---

archive/issue_comments_239732.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nAny chance to get this merged and go on working in a follow up ticket?",
    "created_at": "2015-02-26T13:19:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239732",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:11" align="right">Comment 11</div>

Any chance to get this merged and go on working in a follow up ticket?



---

archive/issue_comments_239733.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nMissed that. Probably to late for 6.6 but we should be able to rebase for early inclusion in 6.7.",
    "created_at": "2015-03-29T01:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239733",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">Comment 12</div>

Missed that. Probably to late for 6.6 but we should be able to rebase for early inclusion in 6.7.



---

archive/issue_comments_239734.json:
```json
{
    "body": "Changed commit from **[b02e159](https://github.com/sagemath/sagetrac-mirror/commit/b02e1593daa51b92401eed7746efcdc665b31388)** to **[091e941](https://github.com/sagemath/sagetrac-mirror/commit/091e941e88d7509f6fffe44785136ae27287aab2)**",
    "created_at": "2015-04-17T09:38:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239734",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b02e159](https://github.com/sagemath/sagetrac-mirror/commit/b02e1593daa51b92401eed7746efcdc665b31388)** to **[091e941](https://github.com/sagemath/sagetrac-mirror/commit/091e941e88d7509f6fffe44785136ae27287aab2)**



---

archive/issue_comments_239735.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/091e941e88d7509f6fffe44785136ae27287aab2\">091e941</a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/17630</code></td></tr></table>\n",
    "created_at": "2015-04-17T09:38:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239735",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13" align="right">Comment 13</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/091e941e88d7509f6fffe44785136ae27287aab2">091e941</a></td><td><code>Merge remote-tracking branch 'trac/develop' into ticket/17630</code></td></tr></table>




---

archive/issue_comments_239736.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nHere is what is happening when you try to use Accelerate in R on OS X\n\n```\ngcc -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names  -undefined dynamic_lookup -single_module -multiply_defined suppress -L../../../lib -L/Users/fbissey/build/sage-6.5.beta1/local/lib/  -o internet.so Rhttpd.o Rsock.o internet.o nanoftp.o nanohttp.o sock.o sockconn.o -lR   -Wl,-framework -Wl,CoreFoundation\nmkdir /Users/fbissey/build/sage-6.5.beta1/local/var/tmp/sage/build/r-3.1.2.p0/src/modules\nmaking Lapack.d from Lapack.c\nmaking vecLibg95c.d from vecLibg95c.c\n<built-in>: warning: subframework include vecLib/vecLib.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/vecLibTypes.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/vBasicOps.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/vBigNum.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/vectorOps.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/vfp.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/vDSP.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/cblas.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/clapack.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/LinearAlgebra/LinearAlgebra.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/LinearAlgebra/base.h conflicts with framework include\nIn file included from /usr/include/os/object.h:27:0,\n                 from /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/Headers/LinearAlgebra/base.h:6,\n                 from /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/Headers/LinearAlgebra/LinearAlgebra.h:10,\n                 from /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/Headers/vecLib.h:65,\n                 from /System/Library/Frameworks/Accelerate.framework/Headers/Accelerate.h:20,\n                 from vecLibg95c.c:8:\n/usr/include/os/base.h:113:20: error: missing binary operator before token \"(\"\n #if __has_extension(attribute_overloadable)\n                    ^\n/usr/include/os/base.h:119:54: error: missing binary operator before token \"(\"\n #if __has_feature(objc_fixed_enum) || __has_extension(cxx_strong_enums)\n                                                      ^\n<built-in>: warning: subframework include vecLib/LinearAlgebra/object.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/LinearAlgebra/matrix.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/LinearAlgebra/vector.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/LinearAlgebra/splat.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/LinearAlgebra/arithmetic.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/LinearAlgebra/linear_systems.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/LinearAlgebra/norms.h conflicts with framework include\n<built-in>: warning: subframework include vecLib/vForce.h conflicts with framework include\nmake[3]: *** [vecLibg95c.d] Error 1\nmake[2]: *** [make.lapack] Error 2\nmake[1]: *** [R] Error 1\nmake: *** [R] Error 1\nError building R.\n```\n\nBOOOM!",
    "created_at": "2015-04-17T10:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239736",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">Comment 14</div>

Here is what is happening when you try to use Accelerate in R on OS X

```
gcc -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names  -undefined dynamic_lookup -single_module -multiply_defined suppress -L../../../lib -L/Users/fbissey/build/sage-6.5.beta1/local/lib/  -o internet.so Rhttpd.o Rsock.o internet.o nanoftp.o nanohttp.o sock.o sockconn.o -lR   -Wl,-framework -Wl,CoreFoundation
mkdir /Users/fbissey/build/sage-6.5.beta1/local/var/tmp/sage/build/r-3.1.2.p0/src/modules
making Lapack.d from Lapack.c
making vecLibg95c.d from vecLibg95c.c
<built-in>: warning: subframework include vecLib/vecLib.h conflicts with framework include
<built-in>: warning: subframework include vecLib/vecLibTypes.h conflicts with framework include
<built-in>: warning: subframework include vecLib/vBasicOps.h conflicts with framework include
<built-in>: warning: subframework include vecLib/vBigNum.h conflicts with framework include
<built-in>: warning: subframework include vecLib/vectorOps.h conflicts with framework include
<built-in>: warning: subframework include vecLib/vfp.h conflicts with framework include
<built-in>: warning: subframework include vecLib/vDSP.h conflicts with framework include
<built-in>: warning: subframework include vecLib/cblas.h conflicts with framework include
<built-in>: warning: subframework include vecLib/clapack.h conflicts with framework include
<built-in>: warning: subframework include vecLib/LinearAlgebra/LinearAlgebra.h conflicts with framework include
<built-in>: warning: subframework include vecLib/LinearAlgebra/base.h conflicts with framework include
In file included from /usr/include/os/object.h:27:0,
                 from /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/Headers/LinearAlgebra/base.h:6,
                 from /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/Headers/LinearAlgebra/LinearAlgebra.h:10,
                 from /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/Headers/vecLib.h:65,
                 from /System/Library/Frameworks/Accelerate.framework/Headers/Accelerate.h:20,
                 from vecLibg95c.c:8:
/usr/include/os/base.h:113:20: error: missing binary operator before token "("
 #if __has_extension(attribute_overloadable)
                    ^
/usr/include/os/base.h:119:54: error: missing binary operator before token "("
 #if __has_feature(objc_fixed_enum) || __has_extension(cxx_strong_enums)
                                                      ^
<built-in>: warning: subframework include vecLib/LinearAlgebra/object.h conflicts with framework include
<built-in>: warning: subframework include vecLib/LinearAlgebra/matrix.h conflicts with framework include
<built-in>: warning: subframework include vecLib/LinearAlgebra/vector.h conflicts with framework include
<built-in>: warning: subframework include vecLib/LinearAlgebra/splat.h conflicts with framework include
<built-in>: warning: subframework include vecLib/LinearAlgebra/arithmetic.h conflicts with framework include
<built-in>: warning: subframework include vecLib/LinearAlgebra/linear_systems.h conflicts with framework include
<built-in>: warning: subframework include vecLib/LinearAlgebra/norms.h conflicts with framework include
<built-in>: warning: subframework include vecLib/vForce.h conflicts with framework include
make[3]: *** [vecLibg95c.d] Error 1
make[2]: *** [make.lapack] Error 2
make[1]: *** [R] Error 1
make: *** [R] Error 1
Error building R.
```

BOOOM!



---

archive/issue_comments_239737.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nOk, so let's not use it.",
    "created_at": "2015-04-17T10:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239737",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:15" align="right">Comment 15</div>

Ok, so let's not use it.



---

archive/issue_comments_239738.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nIf you want to add the \"libdir\" stuff, I'll happily review it.",
    "created_at": "2015-04-17T10:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239738",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:16" align="right">Comment 16</div>

If you want to add the "libdir" stuff, I'll happily review it.



---

archive/issue_comments_239739.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nOther than that little details:\n* I would prefer cblas (C) and blas (f77) to be stored separately.\n* Do you really want to enable lapack in fflas-ffpack/linbox? Is there a real point to it?\n \nI would like to add the libdir stuff that would make my life easier thank you.\n\nThe point about accelerate on OS X is there was a question in the spkg-install so I set out to find the answer.",
    "created_at": "2015-04-17T10:23:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239739",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">Comment 17</div>

Other than that little details:
* I would prefer cblas (C) and blas (f77) to be stored separately.
* Do you really want to enable lapack in fflas-ffpack/linbox? Is there a real point to it?
 
I would like to add the libdir stuff that would make my life easier thank you.

The point about accelerate on OS X is there was a question in the spkg-install so I set out to find the answer.



---

archive/issue_comments_239740.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@kiwifb](#comment%3A17):\n> Other than that little details:\n> * I would prefer cblas (C) and blas (f77) to be stored separately.\n\nSure, that makes sense.\n> * Do you really want to enable lapack in fflas-ffpack/linbox? Is there a real point to it?\n\nIn linbox itself it is not used.\nI don't remember about the fflas-ffpack part...\n\n>  \n> I would like to add the libdir stuff that would make my life easier thank you.\n> \n> The point about accelerate on OS X is there was a question in the spkg-install so I set out to find the answer.\n\nAh, thanks!",
    "created_at": "2015-04-17T10:26:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239740",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@kiwifb](#comment%3A17):
> Other than that little details:
> * I would prefer cblas (C) and blas (f77) to be stored separately.

Sure, that makes sense.
> * Do you really want to enable lapack in fflas-ffpack/linbox? Is there a real point to it?

In linbox itself it is not used.
I don't remember about the fflas-ffpack part...

>  
> I would like to add the libdir stuff that would make my life easier thank you.
> 
> The point about accelerate on OS X is there was a question in the spkg-install so I set out to find the answer.

Ah, thanks!



---

archive/issue_comments_239741.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nWell, you added lapack to fflas-ffpack and added lapack for linbox in module_list.py. If that doesn't enable any extra functionality or anything we should do away with it.",
    "created_at": "2015-04-17T10:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239741",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">Comment 19</div>

Well, you added lapack to fflas-ffpack and added lapack for linbox in module_list.py. If that doesn't enable any extra functionality or anything we should do away with it.



---

archive/issue_comments_239742.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nIt might enhance performance, I did not check.\nI only know for sure that fflas-ffpack can be configure to (potentially) use LAPACK.\nIf you don't feel safe with this, we can postpone such an inclusion and deal with it in #14390.",
    "created_at": "2015-04-17T10:37:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239742",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:20" align="right">Comment 20</div>

It might enhance performance, I did not check.
I only know for sure that fflas-ffpack can be configure to (potentially) use LAPACK.
If you don't feel safe with this, we can postpone such an inclusion and deal with it in #14390.



---

archive/issue_comments_239743.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nI would postpone the fflas-ffpack stuff, don't you have a series of ticket for givaro/fflas-ffpack/linbox update? We could also do that when we get around it.",
    "created_at": "2015-04-17T10:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239743",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:21" align="right">Comment 21</div>

I would postpone the fflas-ffpack stuff, don't you have a series of ticket for givaro/fflas-ffpack/linbox update? We could also do that when we get around it.



---

archive/issue_comments_239744.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@kiwifb](#comment%3A21):\n> I would postpone the fflas-ffpack stuff, don't you have a series of ticket for givaro/fflas-ffpack/linbox update? We could also do that when we get around it.\n\nYes: #17635 and friends.\nNote we'll have to wait for a fflas-ffpack 2.1 release and linbox x.y release as the current versions of the three libs are not compatible.\nThey should have come out in march, but didn't and Cl\u00e9ment did not answer my latest mail.",
    "created_at": "2015-04-17T11:17:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239744",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@kiwifb](#comment%3A21):
> I would postpone the fflas-ffpack stuff, don't you have a series of ticket for givaro/fflas-ffpack/linbox update? We could also do that when we get around it.

Yes: #17635 and friends.
Note we'll have to wait for a fflas-ffpack 2.1 release and linbox x.y release as the current versions of the three libs are not compatible.
They should have come out in march, but didn't and Clément did not answer my latest mail.



---

archive/issue_comments_239745.json:
```json
{
    "body": "Changed commit from **[091e941](https://github.com/sagemath/sagetrac-mirror/commit/091e941e88d7509f6fffe44785136ae27287aab2)** to **[882d720](https://github.com/sagemath/sagetrac-mirror/commit/882d72030492da6519301fc8fcadd36093251af4)**",
    "created_at": "2015-04-17T11:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239745",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[091e941](https://github.com/sagemath/sagetrac-mirror/commit/091e941e88d7509f6fffe44785136ae27287aab2)** to **[882d720](https://github.com/sagemath/sagetrac-mirror/commit/882d72030492da6519301fc8fcadd36093251af4)**



---

archive/issue_comments_239746.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/882d72030492da6519301fc8fcadd36093251af4\">882d720</a></td><td><code>Wrong conflict resolution for numpy.</code></td></tr></table>\n",
    "created_at": "2015-04-17T11:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239746",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23" align="right">Comment 23</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/882d72030492da6519301fc8fcadd36093251af4">882d720</a></td><td><code>Wrong conflict resolution for numpy.</code></td></tr></table>




---

archive/issue_comments_239747.json:
```json
{
    "body": "Changed commit from **[882d720](https://github.com/sagemath/sagetrac-mirror/commit/882d72030492da6519301fc8fcadd36093251af4)** to **[73a21a9](https://github.com/sagemath/sagetrac-mirror/commit/73a21a99499891e5b21552888da9cfa611e53061)**",
    "created_at": "2015-04-17T11:32:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239747",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[882d720](https://github.com/sagemath/sagetrac-mirror/commit/882d72030492da6519301fc8fcadd36093251af4)** to **[73a21a9](https://github.com/sagemath/sagetrac-mirror/commit/73a21a99499891e5b21552888da9cfa611e53061)**



---

archive/issue_comments_239748.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73a21a99499891e5b21552888da9cfa611e53061\">73a21a9</a></td><td><code>Second try for numpy fixing.</code></td></tr></table>\n",
    "created_at": "2015-04-17T11:32:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239748",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24" align="right">Comment 24</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73a21a99499891e5b21552888da9cfa611e53061">73a21a9</a></td><td><code>Second try for numpy fixing.</code></td></tr></table>




---

archive/issue_comments_239749.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9d2dcf1344c005d6796ec288181451447124718\">a9d2dcf</a></td><td><code>And final fixes.</code></td></tr></table>\n",
    "created_at": "2015-04-17T11:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239749",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25" align="right">Comment 25</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9d2dcf1344c005d6796ec288181451447124718">a9d2dcf</a></td><td><code>And final fixes.</code></td></tr></table>




---

archive/issue_comments_239750.json:
```json
{
    "body": "Changed commit from **[73a21a9](https://github.com/sagemath/sagetrac-mirror/commit/73a21a99499891e5b21552888da9cfa611e53061)** to **[a9d2dcf](https://github.com/sagemath/sagetrac-mirror/commit/a9d2dcf1344c005d6796ec288181451447124718)**",
    "created_at": "2015-04-17T11:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239750",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[73a21a9](https://github.com/sagemath/sagetrac-mirror/commit/73a21a99499891e5b21552888da9cfa611e53061)** to **[a9d2dcf](https://github.com/sagemath/sagetrac-mirror/commit/a9d2dcf1344c005d6796ec288181451447124718)**



---

archive/issue_comments_239751.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nDo you have further things to commit or should I start putting my own comments into action?",
    "created_at": "2015-04-20T21:48:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239751",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">Comment 26</div>

Do you have further things to commit or should I start putting my own comments into action?



---

archive/issue_comments_239752.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/045266e53354e7f3badb2e2b7dcd4f2c0cea2fa2\">045266e</a></td><td><code>Final fix for a correct conflict resolution.</code></td></tr></table>\n",
    "created_at": "2015-04-21T07:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239752",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27" align="right">Comment 27</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/045266e53354e7f3badb2e2b7dcd4f2c0cea2fa2">045266e</a></td><td><code>Final fix for a correct conflict resolution.</code></td></tr></table>




---

archive/issue_comments_239753.json:
```json
{
    "body": "Changed commit from **[a9d2dcf](https://github.com/sagemath/sagetrac-mirror/commit/a9d2dcf1344c005d6796ec288181451447124718)** to **[045266e](https://github.com/sagemath/sagetrac-mirror/commit/045266e53354e7f3badb2e2b7dcd4f2c0cea2fa2)**",
    "created_at": "2015-04-21T07:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239753",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a9d2dcf](https://github.com/sagemath/sagetrac-mirror/commit/a9d2dcf1344c005d6796ec288181451447124718)** to **[045266e](https://github.com/sagemath/sagetrac-mirror/commit/045266e53354e7f3badb2e2b7dcd4f2c0cea2fa2)**



---

archive/issue_comments_239754.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nI think I've sanitized the situation after my miserable failure to correctly resolve the conflict for numpy `spkg-install` script between this ticket and #18142.\n\nPlease go ahead.",
    "created_at": "2015-04-21T07:29:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239754",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:28" align="right">Comment 28</div>

I think I've sanitized the situation after my miserable failure to correctly resolve the conflict for numpy `spkg-install` script between this ticket and #18142.

Please go ahead.



---

archive/issue_comments_239755.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nIs this ticket really `needs_review` or are further changes planned (in the latter case, set the status to `needs_work` please).",
    "created_at": "2015-04-22T09:44:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239755",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">Comment 29</div>

Is this ticket really `needs_review` or are further changes planned (in the latter case, set the status to `needs_work` please).



---

archive/issue_events_233452.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-04-22T09:49:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233452"
}
```



---

archive/issue_events_233453.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-04-22T09:49:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233453"
}
```



---

archive/issue_comments_239756.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nThere are a couple more changes we are/ I am planning. I should have put it back to \"needs_work\" earlier. I should be able to further work on this ticket tomorrow.",
    "created_at": "2015-04-22T09:49:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239756",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">Comment 30</div>

There are a couple more changes we are/ I am planning. I should have put it back to "needs_work" earlier. I should be able to further work on this ticket tomorrow.



---

archive/issue_comments_239757.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nWhen you think you're done with this ticket, you should really ask Volker to test it on the buildbots.",
    "created_at": "2015-04-22T09:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239757",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">Comment 31</div>

When you think you're done with this ticket, you should really ask Volker to test it on the buildbots.



---

archive/issue_comments_239758.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nOh, yes indeed.",
    "created_at": "2015-04-22T10:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239758",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:32" align="right">Comment 32</div>

Oh, yes indeed.



---

archive/issue_comments_239759.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nFYI: this will conflict with #18450.",
    "created_at": "2015-05-20T10:05:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239759",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">Comment 33</div>

FYI: this will conflict with #18450.



---

archive/issue_comments_239760.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nI think it will be better to rebase on top of #18450 I will have to rebase the corresponding sage-on-gentoo patch anyway and it will be less patching in the end.",
    "created_at": "2015-05-20T10:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239760",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:34" align="right">Comment 34</div>

I think it will be better to rebase on top of #18450 I will have to rebase the corresponding sage-on-gentoo patch anyway and it will be less patching in the end.



---

archive/issue_comments_239761.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nFran\u00e7ois, any progress on that front?",
    "created_at": "2015-06-22T23:20:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239761",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:35" align="right">Comment 35</div>

François, any progress on that front?



---

archive/issue_comments_239762.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nSorry but no, I have got side-tracked by the upgrade of matplotlib ticket #17618 and I was thinking bumping numpy to 1.9.2 at #17642 would be trivial but it isn't and I am kind of stuck on it. Working on this ticket could actually be useful distraction but I am busy right now trying to get something scheduling properly on an AIX cluster.",
    "created_at": "2015-06-22T23:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239762",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:36" align="right">Comment 36</div>

Sorry but no, I have got side-tracked by the upgrade of matplotlib ticket #17618 and I was thinking bumping numpy to 1.9.2 at #17642 would be trivial but it isn't and I am kind of stuck on it. Working on this ticket could actually be useful distraction but I am busy right now trying to get something scheduling properly on an AIX cluster.



---

archive/issue_comments_239763.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nWhenever you work on this ticket, please do it in the spirit of #18450: it is better to define libraries in the `.pxd` files of the libraries if possible.",
    "created_at": "2015-06-23T06:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239763",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">Comment 37</div>

Whenever you work on this ticket, please do it in the spirit of #18450: it is better to define libraries in the `.pxd` files of the libraries if possible.



---

archive/issue_comments_239764.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nReplying to [@jdemeyer](#comment%3A37):\n> Whenever you work on this ticket, please do it in the spirit of #18450: it is better to define libraries in the `.pxd` files of the libraries if possible.\n\nJust so I am sure I understand correctly:\n\n```\n# distutils: libraries = gmp pari\n```\nfor example will add \"-lgmp -lpari\" to the linking line (possibly not in that order since it could break)? Is it possible to read the correct library or import from another file? I am asking because our forward thinking is to move the definition of the blas/lapack stuff to `.pc` files and be able to choose between several implementations that won't all have the same name.",
    "created_at": "2015-06-23T21:54:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239764",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:38" align="right">Comment 38</div>

Replying to [@jdemeyer](#comment%3A37):
> Whenever you work on this ticket, please do it in the spirit of #18450: it is better to define libraries in the `.pxd` files of the libraries if possible.

Just so I am sure I understand correctly:

```
# distutils: libraries = gmp pari
```
for example will add "-lgmp -lpari" to the linking line (possibly not in that order since it could break)? Is it possible to read the correct library or import from another file? I am asking because our forward thinking is to move the definition of the blas/lapack stuff to `.pc` files and be able to choose between several implementations that won't all have the same name.



---

archive/issue_comments_239765.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nReplying to [@kiwifb](#comment%3A38):\n> Just so I am sure I understand correctly:\n> \n> ```\n> # distutils: libraries = gmp pari\n> ```\n> for example will add \"-lgmp -lpari\" to the linking line\n\nYes indeed.\n\n> possibly not in that order since it could break\n\nThere is a global order `library_order_list` defined in `src/module_list.py`. Libraries are sorted according to that order, so the order given in the `# distutils` declaration is not relevant (unless the library is *not* listed in `library_order_list`).\n\n> Is it possible to read the correct library or import from another file?\n\nYes, see the `aliases` variable in `src/module_list.py`\n\nJust define whatever you need in that variable and then use the alias name in the `# distutils` declaration.",
    "created_at": "2015-06-24T07:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239765",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">Comment 39</div>

Replying to [@kiwifb](#comment%3A38):
> Just so I am sure I understand correctly:
> 
> ```
> # distutils: libraries = gmp pari
> ```
> for example will add "-lgmp -lpari" to the linking line

Yes indeed.

> possibly not in that order since it could break

There is a global order `library_order_list` defined in `src/module_list.py`. Libraries are sorted according to that order, so the order given in the `# distutils` declaration is not relevant (unless the library is *not* listed in `library_order_list`).

> Is it possible to read the correct library or import from another file?

Yes, see the `aliases` variable in `src/module_list.py`

Just define whatever you need in that variable and then use the alias name in the `# distutils` declaration.



---

archive/issue_comments_239766.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nAs far as I know, nothing in Sage *directly* uses BLAS, it is only used through external libraries (linbox, numpy, ...)\n\nSo it's a mystery why some extensions in `src/module_list.py` list the BLAS libraries without any other library. And indeed, on my Linux box, Sage still works after the following change:\n\n```diff\ndiff --git a/src/module_list.py b/src/module_list.py\nindex e01cd4b..7d818d6 100755\n--- a/src/module_list.py\n+++ b/src/module_list.py\n@@ -1024,8 +1024,7 @@ ext_modules = [\n               sources = ['sage/matrix/echelon_matrix.pyx']),\n \n     Extension('sage.matrix.change_ring',\n-              sources = ['sage/matrix/change_ring.pyx'],\n-              libraries=[BLAS, BLAS2]),\n+              sources = ['sage/matrix/change_ring.pyx']),\n \n     Extension('sage.matrix.matrix',\n               sources = ['sage/matrix/matrix.pyx']),\n@@ -1040,8 +1039,7 @@ ext_modules = [\n               sources = ['sage/matrix/matrix2.pyx']),\n \n     Extension('sage.matrix.matrix_complex_double_dense',\n-              sources = ['sage/matrix/matrix_complex_double_dense.pyx'],\n-              libraries=[BLAS, BLAS2]),\n+              sources = ['sage/matrix/matrix_complex_double_dense.pyx']),\n \n     Extension('sage.matrix.matrix_cyclo_dense',\n               sources = ['sage/matrix/matrix_cyclo_dense.pyx'],\n@@ -1052,8 +1050,7 @@ ext_modules = [\n               sources = ['sage/matrix/matrix_dense.pyx']),\n \n     Extension('sage.matrix.matrix_double_dense',\n-              sources = ['sage/matrix/matrix_double_dense.pyx'],\n-              libraries=[BLAS, BLAS2]),\n+              sources = ['sage/matrix/matrix_double_dense.pyx']),\n \n     Extension('sage.matrix.matrix_generic_dense',\n               sources = ['sage/matrix/matrix_generic_dense.pyx']),\n@@ -1116,8 +1113,7 @@ ext_modules = [\n               sources = ['sage/matrix/matrix_rational_sparse.pyx']),\n \n     Extension('sage.matrix.matrix_real_double_dense',\n-              sources = ['sage/matrix/matrix_real_double_dense.pyx'],\n-              libraries=[BLAS, BLAS2]),\n+              sources = ['sage/matrix/matrix_real_double_dense.pyx']),\n \n     Extension('sage.matrix.matrix_sparse',\n               sources = ['sage/matrix/matrix_sparse.pyx']),\n@@ -1254,12 +1250,10 @@ ext_modules = [\n               sources = ['sage/modules/module.pyx']),\n \n     Extension('sage.modules.vector_complex_double_dense',\n-              ['sage/modules/vector_complex_double_dense.pyx'],\n-              libraries = [BLAS, BLAS2]),\n+              ['sage/modules/vector_complex_double_dense.pyx']),\n \n     Extension('sage.modules.vector_double_dense',\n-              ['sage/modules/vector_double_dense.pyx'],\n-              libraries = [BLAS, BLAS2]),\n+              ['sage/modules/vector_double_dense.pyx']),\n \n     Extension('sage.modules.vector_integer_dense',\n               sources = ['sage/modules/vector_integer_dense.pyx']),\n@@ -1278,8 +1272,7 @@ ext_modules = [\n               sources = ['sage/modules/vector_rational_dense.pyx']),\n \n     Extension('sage.modules.vector_real_double_dense',\n-              ['sage/modules/vector_real_double_dense.pyx'],\n-              libraries = [BLAS, BLAS2]),\n+              ['sage/modules/vector_real_double_dense.pyx']),\n \n     ################################\n     ##\n```\n\nPerhaps those libraries are needed for some reason (I know Linux in particular is very flexible with defining libraries) but it's something to be investigated...",
    "created_at": "2015-06-24T08:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239766",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">Comment 40</div>

As far as I know, nothing in Sage *directly* uses BLAS, it is only used through external libraries (linbox, numpy, ...)

So it's a mystery why some extensions in `src/module_list.py` list the BLAS libraries without any other library. And indeed, on my Linux box, Sage still works after the following change:

```diff
diff --git a/src/module_list.py b/src/module_list.py
index e01cd4b..7d818d6 100755
--- a/src/module_list.py
+++ b/src/module_list.py
@@ -1024,8 +1024,7 @@ ext_modules = [
               sources = ['sage/matrix/echelon_matrix.pyx']),
 
     Extension('sage.matrix.change_ring',
-              sources = ['sage/matrix/change_ring.pyx'],
-              libraries=[BLAS, BLAS2]),
+              sources = ['sage/matrix/change_ring.pyx']),
 
     Extension('sage.matrix.matrix',
               sources = ['sage/matrix/matrix.pyx']),
@@ -1040,8 +1039,7 @@ ext_modules = [
               sources = ['sage/matrix/matrix2.pyx']),
 
     Extension('sage.matrix.matrix_complex_double_dense',
-              sources = ['sage/matrix/matrix_complex_double_dense.pyx'],
-              libraries=[BLAS, BLAS2]),
+              sources = ['sage/matrix/matrix_complex_double_dense.pyx']),
 
     Extension('sage.matrix.matrix_cyclo_dense',
               sources = ['sage/matrix/matrix_cyclo_dense.pyx'],
@@ -1052,8 +1050,7 @@ ext_modules = [
               sources = ['sage/matrix/matrix_dense.pyx']),
 
     Extension('sage.matrix.matrix_double_dense',
-              sources = ['sage/matrix/matrix_double_dense.pyx'],
-              libraries=[BLAS, BLAS2]),
+              sources = ['sage/matrix/matrix_double_dense.pyx']),
 
     Extension('sage.matrix.matrix_generic_dense',
               sources = ['sage/matrix/matrix_generic_dense.pyx']),
@@ -1116,8 +1113,7 @@ ext_modules = [
               sources = ['sage/matrix/matrix_rational_sparse.pyx']),
 
     Extension('sage.matrix.matrix_real_double_dense',
-              sources = ['sage/matrix/matrix_real_double_dense.pyx'],
-              libraries=[BLAS, BLAS2]),
+              sources = ['sage/matrix/matrix_real_double_dense.pyx']),
 
     Extension('sage.matrix.matrix_sparse',
               sources = ['sage/matrix/matrix_sparse.pyx']),
@@ -1254,12 +1250,10 @@ ext_modules = [
               sources = ['sage/modules/module.pyx']),
 
     Extension('sage.modules.vector_complex_double_dense',
-              ['sage/modules/vector_complex_double_dense.pyx'],
-              libraries = [BLAS, BLAS2]),
+              ['sage/modules/vector_complex_double_dense.pyx']),
 
     Extension('sage.modules.vector_double_dense',
-              ['sage/modules/vector_double_dense.pyx'],
-              libraries = [BLAS, BLAS2]),
+              ['sage/modules/vector_double_dense.pyx']),
 
     Extension('sage.modules.vector_integer_dense',
               sources = ['sage/modules/vector_integer_dense.pyx']),
@@ -1278,8 +1272,7 @@ ext_modules = [
               sources = ['sage/modules/vector_rational_dense.pyx']),
 
     Extension('sage.modules.vector_real_double_dense',
-              ['sage/modules/vector_real_double_dense.pyx'],
-              libraries = [BLAS, BLAS2]),
+              ['sage/modules/vector_real_double_dense.pyx']),
 
     ################################
     ##
```

Perhaps those libraries are needed for some reason (I know Linux in particular is very flexible with defining libraries) but it's something to be investigated...



---

archive/issue_comments_239767.json:
```json
{
    "body": "Dependencies: **#18777**",
    "created_at": "2015-06-24T08:46:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239767",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#18777**



---

archive/issue_comments_239768.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nSee #18777.",
    "created_at": "2015-06-24T08:46:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239768",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">Comment 41</div>

See #18777.



---

archive/issue_comments_239769.json:
```json
{
    "body": "Changed dependencies from **#18777** to **#18777, #18778**",
    "created_at": "2015-06-24T10:35:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239769",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#18777** to **#18777, #18778**



---

archive/issue_comments_239770.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nI did a serious clean-up of the Cython interface to GSL, see #18778.",
    "created_at": "2015-06-24T10:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239770",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">Comment 43</div>

I did a serious clean-up of the Cython interface to GSL, see #18778.



---

archive/issue_comments_239771.json:
```json
{
    "body": "Changed commit from **[045266e](https://github.com/sagemath/sagetrac-mirror/commit/045266e53354e7f3badb2e2b7dcd4f2c0cea2fa2)** to **[217c051](https://github.com/sagemath/sagetrac-mirror/commit/217c051edd4d06957cf82893f5c4d97e9ac1c654)**",
    "created_at": "2015-06-26T10:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239771",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[045266e](https://github.com/sagemath/sagetrac-mirror/commit/045266e53354e7f3badb2e2b7dcd4f2c0cea2fa2)** to **[217c051](https://github.com/sagemath/sagetrac-mirror/commit/217c051edd4d06957cf82893f5c4d97e9ac1c654)**



---

archive/issue_comments_239772.json:
```json
{
    "body": "Changed branch from **[u/jpflori/ticket/17630](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17630)** to **[u/fbissey/blas](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/blas)**",
    "created_at": "2015-06-26T10:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239772",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/jpflori/ticket/17630](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/17630)** to **[u/fbissey/blas](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/blas)**



---

archive/issue_comments_239773.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nThis is just merging the previous work of Jean-Pierre into 6.8.beta5 and solving the conflict. There are a couple more things I want to do. Then I should explore transferring libraries to `.pxd` files.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/217c051edd4d06957cf82893f5c4d97e9ac1c654\">217c051</a></td><td><code>Merge branch 'develop' into blas</code></td></tr></table>\n",
    "created_at": "2015-06-26T10:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239773",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:44" align="right">Comment 44</div>

This is just merging the previous work of Jean-Pierre into 6.8.beta5 and solving the conflict. There are a couple more things I want to do. Then I should explore transferring libraries to `.pxd` files.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/217c051edd4d06957cf82893f5c4d97e9ac1c654">217c051</a></td><td><code>Merge branch 'develop' into blas</code></td></tr></table>




---

archive/issue_comments_239774.json:
```json
{
    "body": "Changed commit from **[217c051](https://github.com/sagemath/sagetrac-mirror/commit/217c051edd4d06957cf82893f5c4d97e9ac1c654)** to **[d448831](https://github.com/sagemath/sagetrac-mirror/commit/d448831b044c43b1190ece92ac6c4b60eb332d7c)**",
    "created_at": "2015-06-26T10:24:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239774",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[217c051](https://github.com/sagemath/sagetrac-mirror/commit/217c051edd4d06957cf82893f5c4d97e9ac1c654)** to **[d448831](https://github.com/sagemath/sagetrac-mirror/commit/d448831b044c43b1190ece92ac6c4b60eb332d7c)**



---

archive/issue_comments_239775.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d448831b044c43b1190ece92ac6c4b60eb332d7c\">d448831</a></td><td><code>Forgot a very important \"+\" in module_list.py</code></td></tr></table>\n",
    "created_at": "2015-06-26T10:24:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239775",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45" align="right">Comment 45</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d448831b044c43b1190ece92ac6c4b60eb332d7c">d448831</a></td><td><code>Forgot a very important "+" in module_list.py</code></td></tr></table>




---

archive/issue_comments_239776.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nI would move `cblas_libs()` to `sage/env.py`, analogous to `sage_include_directories()`.\n\nAnd this\n\n```\nf = open(os.path.join(SAGE_LOCAL, 'share/cblas_config'), 'r')\nlibs = f.readline().split()\nf.close()\nreturn libs\n```\ncan be written as\n\n```\nwith open(os.path.join(SAGE_SHARE, 'cblas_config')) as f:\n    return f.readline().split()\n```",
    "created_at": "2015-06-26T11:19:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239776",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:46" align="right">Comment 46</div>

I would move `cblas_libs()` to `sage/env.py`, analogous to `sage_include_directories()`.

And this

```
f = open(os.path.join(SAGE_LOCAL, 'share/cblas_config'), 'r')
libs = f.readline().split()
f.close()
return libs
```
can be written as

```
with open(os.path.join(SAGE_SHARE, 'cblas_config')) as f:
    return f.readline().split()
```



---

archive/issue_comments_239777.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nThat's good suggestions. I will do that once I finished my current round of nitpicking.",
    "created_at": "2015-06-26T11:27:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239777",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:47" align="right">Comment 47</div>

That's good suggestions. I will do that once I finished my current round of nitpicking.



---

archive/issue_comments_239778.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nOne more nitpicking: replace\n\n```\ncat x | sed ...\n```\nby\n\n```\nsed ... x\n```",
    "created_at": "2015-06-26T11:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239778",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:48" align="right">Comment 48</div>

One more nitpicking: replace

```
cat x | sed ...
```
by

```
sed ... x
```



---

archive/issue_comments_239779.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nI would also like to know the justification for this in `sage-env`:\n\n```diff\n-if [ \"$LDFLAGS\" = \"\" ]; then\n- LDFLAGS=\"\" && export LDFLAGS\n+if [ -z \"$LDFLAGS\" ]; then\n+ unset LDFLAGS\n fi\n```",
    "created_at": "2015-06-26T11:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239779",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:49" align="right">Comment 49</div>

I would also like to know the justification for this in `sage-env`:

```diff
-if [ "$LDFLAGS" = "" ]; then
- LDFLAGS="" && export LDFLAGS
+if [ -z "$LDFLAGS" ]; then
+ unset LDFLAGS
 fi
```



---

archive/issue_comments_239780.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nReplying to [@jdemeyer](#comment%3A49):\n> I would also like to know the justification for this in `sage-env`:\n> \n> ```diff\n> -if [ \"$LDFLAGS\" = \"\" ]; then\n> - LDFLAGS=\"\" && export LDFLAGS\n> +if [ -z \"$LDFLAGS\" ]; then\n> + unset LDFLAGS\n>  fi\n> ```\n\nThat must have come from one of Jean-Pierre's commit. Difference is very subtle and I am not sure it matters but I am wondering about the whole point of the test.",
    "created_at": "2015-06-26T11:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239780",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:50" align="right">Comment 50</div>

Replying to [@jdemeyer](#comment%3A49):
> I would also like to know the justification for this in `sage-env`:
> 
> ```diff
> -if [ "$LDFLAGS" = "" ]; then
> - LDFLAGS="" && export LDFLAGS
> +if [ -z "$LDFLAGS" ]; then
> + unset LDFLAGS
>  fi
> ```

That must have come from one of Jean-Pierre's commit. Difference is very subtle and I am not sure it matters but I am wondering about the whole point of the test.



---

archive/issue_comments_239781.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nInstead of\n\n```sh\nIML_BLAS=--with-cblas=\"$cblas_libs\"\n\n./configure \"$IML_BLAS\"\n```\nwith awkward quoting, why not simply\n\n```\n./configure --with-cblas=\"$cblas_libs\"\n```\n(same for `FFLAS_FFPACK_BLAS`)",
    "created_at": "2015-06-26T11:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239781",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">Comment 51</div>

Instead of

```sh
IML_BLAS=--with-cblas="$cblas_libs"

./configure "$IML_BLAS"
```
with awkward quoting, why not simply

```
./configure --with-cblas="$cblas_libs"
```
(same for `FFLAS_FFPACK_BLAS`)



---

archive/issue_comments_239782.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nAlso please use `$IML_CONFIGURE` instead of `\"$IML_CONFIGURE\"` (such variables are usually not quoted).",
    "created_at": "2015-06-26T11:54:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239782",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:52" align="right">Comment 52</div>

Also please use `$IML_CONFIGURE` instead of `"$IML_CONFIGURE"` (such variables are usually not quoted).



---

archive/issue_comments_239783.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nI would also like to know the justification for the removal of\n\n```\nbuild/pkgs/numpy/patches/cygwin-lapack_lite-setup.py.diff\n```",
    "created_at": "2015-06-26T11:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239783",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:53" align="right">Comment 53</div>

I would also like to know the justification for the removal of

```
build/pkgs/numpy/patches/cygwin-lapack_lite-setup.py.diff
```



---

archive/issue_comments_239784.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nReplying to [@jdemeyer](#comment%3A49):\n> I would also like to know the justification for this in `sage-env`:\n> \n> ```diff\n> -if [ \"$LDFLAGS\" = \"\" ]; then\n> - LDFLAGS=\"\" && export LDFLAGS\n> +if [ -z \"$LDFLAGS\" ]; then\n> + unset LDFLAGS\n>  fi\n> ```\n\nBecause this does not do the same thing :).\nIIRC the first option exports `LDFLAGS = \"\"` when LDFLAGS is not set.\nOr something in this spirit.\nThis can cause trouble later on (and I thing I was hit by that).\n\nWhatsoever IIRC once again, the \"new\" treatment for LDFLAGS is similar to the one for CFLAGS and CPPFLAGS.",
    "created_at": "2015-06-26T11:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239784",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:54" align="right">Comment 54</div>

Replying to [@jdemeyer](#comment%3A49):
> I would also like to know the justification for this in `sage-env`:
> 
> ```diff
> -if [ "$LDFLAGS" = "" ]; then
> - LDFLAGS="" && export LDFLAGS
> +if [ -z "$LDFLAGS" ]; then
> + unset LDFLAGS
>  fi
> ```

Because this does not do the same thing :).
IIRC the first option exports `LDFLAGS = ""` when LDFLAGS is not set.
Or something in this spirit.
This can cause trouble later on (and I thing I was hit by that).

Whatsoever IIRC once again, the "new" treatment for LDFLAGS is similar to the one for CFLAGS and CPPFLAGS.



---

archive/issue_comments_239785.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nReplying to [@jdemeyer](#comment%3A51):\n> Instead of\n> \n> ```sh\n> IML_BLAS=--with-cblas=\"$cblas_libs\"\n> \n> ./configure \"$IML_BLAS\"\n> ```\n> with awkward quoting, why not simply\n> \n> ```\n> ./configure --with-cblas=\"$cblas_libs\"\n> ```\n> (same for `FFLAS_FFPACK_BLAS`)\n\nI don't really remember, but both might work as well.\nIIRC FFLAS-FFPACK configure scripts is very sensitive to quoting and spaces and it was a nightmare to make it accept multiple libraries to be linked separated by spaces.",
    "created_at": "2015-06-26T12:00:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239785",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:55" align="right">Comment 55</div>

Replying to [@jdemeyer](#comment%3A51):
> Instead of
> 
> ```sh
> IML_BLAS=--with-cblas="$cblas_libs"
> 
> ./configure "$IML_BLAS"
> ```
> with awkward quoting, why not simply
> 
> ```
> ./configure --with-cblas="$cblas_libs"
> ```
> (same for `FFLAS_FFPACK_BLAS`)

I don't really remember, but both might work as well.
IIRC FFLAS-FFPACK configure scripts is very sensitive to quoting and spaces and it was a nightmare to make it accept multiple libraries to be linked separated by spaces.



---

archive/issue_comments_239786.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nSame for the removal of\n\n```\nbuild/pkgs/cvxopt/patches/setup.py.patch\n```\n\nIt's not at all clear whether these changes are related to BLAS setup. Perhaps all non-BLAS-related changes should be factored out to a different ticket, that would make reviewing easier.",
    "created_at": "2015-06-26T12:01:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239786",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:56" align="right">Comment 56</div>

Same for the removal of

```
build/pkgs/cvxopt/patches/setup.py.patch
```

It's not at all clear whether these changes are related to BLAS setup. Perhaps all non-BLAS-related changes should be factored out to a different ticket, that would make reviewing easier.



---

archive/issue_comments_239787.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nReplying to [@jpflori](#comment%3A54):\n> Because this does not do the same thing :).\n\nThat's exactly why such changes shouldn't be smuggled inside a ticket dealing with BLAS.",
    "created_at": "2015-06-26T12:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239787",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:57" align="right">Comment 57</div>

Replying to [@jpflori](#comment%3A54):
> Because this does not do the same thing :).

That's exactly why such changes shouldn't be smuggled inside a ticket dealing with BLAS.



---

archive/issue_comments_239788.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nReplying to [@jdemeyer](#comment%3A56):\n> Same for the removal of\n> \n> ```\n> build/pkgs/cvxopt/patches/setup.py.patch\n> ```\n> \n> It's not at all clear whether these changes are related to BLAS setup.\n\nThis patch is a dirty hack to configure cvxopt to use BLAS related stuff.\n\n> Perhaps all non-BLAS-related changes should be factored out to a different ticket, that would make\n> reviewing easier.\n\nSure that would be the best way to go.",
    "created_at": "2015-06-26T12:05:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239788",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:58" align="right">Comment 58</div>

Replying to [@jdemeyer](#comment%3A56):
> Same for the removal of
> 
> ```
> build/pkgs/cvxopt/patches/setup.py.patch
> ```
> 
> It's not at all clear whether these changes are related to BLAS setup.

This patch is a dirty hack to configure cvxopt to use BLAS related stuff.

> Perhaps all non-BLAS-related changes should be factored out to a different ticket, that would make
> reviewing easier.

Sure that would be the best way to go.



---

archive/issue_comments_239789.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nReplying to [@jdemeyer](#comment%3A53):\n> I would also like to know the justification for the removal of\n> \n> ```\n> build/pkgs/numpy/patches/cygwin-lapack_lite-setup.py.diff\n> ```\n\nI just remember this patch looked fishy and useless and I had no problem not applying it.",
    "created_at": "2015-06-26T12:06:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239789",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:59" align="right">Comment 59</div>

Replying to [@jdemeyer](#comment%3A53):
> I would also like to know the justification for the removal of
> 
> ```
> build/pkgs/numpy/patches/cygwin-lapack_lite-setup.py.diff
> ```

I just remember this patch looked fishy and useless and I had no problem not applying it.



---

archive/issue_comments_239790.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nReplying to [@jpflori](#comment%3A58):\n> Replying to [@jdemeyer](#comment%3A56):\n> > Same for the removal of\n> > \n> > ```\n> > build/pkgs/cvxopt/patches/setup.py.patch\n> > ```\n> > \n> > It's not at all clear whether these changes are related to BLAS setup.\n\n> This patch is a dirty hack to configure cvxopt to use BLAS related stuff.\n\nThere is also GSL-related stuff in that patch.",
    "created_at": "2015-06-26T12:15:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239790",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:60" align="right">Comment 60</div>

Replying to [@jpflori](#comment%3A58):
> Replying to [@jdemeyer](#comment%3A56):
> > Same for the removal of
> > 
> > ```
> > build/pkgs/cvxopt/patches/setup.py.patch
> > ```
> > 
> > It's not at all clear whether these changes are related to BLAS setup.

> This patch is a dirty hack to configure cvxopt to use BLAS related stuff.

There is also GSL-related stuff in that patch.



---

archive/issue_comments_239791.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\nI guess we can split some of the cvxopt stuff to make things clearer. Prior to 1.1.7 it was difficult to set any library properly without patching. `setup.py` was requiring manual edit before installation unless you setup was closely matching the author. 1.1.7 introduced some mechanism to pass library settings from the environment and we just decided to do that at the same time. But a separate ticket is no problem.",
    "created_at": "2015-06-26T12:45:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239791",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:61" align="right">Comment 61</div>

I guess we can split some of the cvxopt stuff to make things clearer. Prior to 1.1.7 it was difficult to set any library properly without patching. `setup.py` was requiring manual edit before installation unless you setup was closely matching the author. 1.1.7 introduced some mechanism to pass library settings from the environment and we just decided to do that at the same time. But a separate ticket is no problem.



---

archive/issue_comments_239792.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nNow that you explain the `cvxopt` thing, it's clearer.",
    "created_at": "2015-06-26T12:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239792",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:62" align="right">Comment 62</div>

Now that you explain the `cvxopt` thing, it's clearer.



---

archive/issue_comments_239793.json:
```json
{
    "body": "Changed commit from **[d448831](https://github.com/sagemath/sagetrac-mirror/commit/d448831b044c43b1190ece92ac6c4b60eb332d7c)** to **[5c9e7a5](https://github.com/sagemath/sagetrac-mirror/commit/5c9e7a50cbc9b97db2c560e18d08294b33b768e7)**",
    "created_at": "2015-06-26T13:07:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239793",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d448831](https://github.com/sagemath/sagetrac-mirror/commit/d448831b044c43b1190ece92ac6c4b60eb332d7c)** to **[5c9e7a5](https://github.com/sagemath/sagetrac-mirror/commit/5c9e7a50cbc9b97db2c560e18d08294b33b768e7)**



---

archive/issue_comments_239794.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c9e7a50cbc9b97db2c560e18d08294b33b768e7\">5c9e7a5</a></td><td><code>Proper insertion in library_order</code></td></tr></table>\n",
    "created_at": "2015-06-26T13:07:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239794",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63" align="right">Comment 63</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c9e7a50cbc9b97db2c560e18d08294b33b768e7">5c9e7a5</a></td><td><code>Proper insertion in library_order</code></td></tr></table>




---

archive/issue_comments_239795.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">Comment 64</div>\n\nI'll do some more work over the week end, the last commit is just so that sage with that branch is in a building state.",
    "created_at": "2015-06-26T13:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239795",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:64" align="right">Comment 64</div>

I'll do some more work over the week end, the last commit is just so that sage with that branch is in a building state.



---

archive/issue_comments_239796.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\nFor this to work properly, you will need to increase the patchlevel of the ATLAS package, forcing it to be rebuilt. For the other packages, I don't think it's needed if they depend on ATLAS.",
    "created_at": "2015-06-26T21:06:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239796",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">Comment 65</div>

For this to work properly, you will need to increase the patchlevel of the ATLAS package, forcing it to be rebuilt. For the other packages, I don't think it's needed if they depend on ATLAS.



---

archive/issue_comments_239797.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">Comment 66</div>\n\nReplying to [@jdemeyer](#comment%3A62):\n> Now that you explain the `cvxopt` thing, it's clearer.\n\nDo you still want a separate ticket?",
    "created_at": "2015-06-27T10:22:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239797",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:66" align="right">Comment 66</div>

Replying to [@jdemeyer](#comment%3A62):
> Now that you explain the `cvxopt` thing, it's clearer.

Do you still want a separate ticket?



---

archive/issue_comments_239798.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">Comment 67</div>\n\nReplying to [@jpflori](#comment%3A55):\n> Replying to [@jdemeyer](#comment%3A51):\n> > Instead of\n> > \n> > ```sh\n> > IML_BLAS=--with-cblas=\"$cblas_libs\"\n> > \n> > ./configure \"$IML_BLAS\"\n> > ```\n> > with awkward quoting, why not simply\n> > \n> > ```\n> > ./configure --with-cblas=\"$cblas_libs\"\n> > ```\n> > (same for `FFLAS_FFPACK_BLAS`)\n\n> I don't really remember, but both might work as well.\n> IIRC FFLAS-FFPACK configure scripts is very sensitive to quoting and spaces and it was a nightmare to make it accept multiple libraries to be linked separated by spaces.\n\nIn both case the variable is only defined on cygwin/darwin and we rely on autodetection in other cases. I guess we could throw the autodetection throw the window and put the stuff in every case. In fact if we want to be able to use something else than ATLAS in the future it is prudent to do so. So I will throw the particular cases out. If there is a strong case to still keep something for cygwin I am all ears.",
    "created_at": "2015-06-27T10:29:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239798",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:67" align="right">Comment 67</div>

Replying to [@jpflori](#comment%3A55):
> Replying to [@jdemeyer](#comment%3A51):
> > Instead of
> > 
> > ```sh
> > IML_BLAS=--with-cblas="$cblas_libs"
> > 
> > ./configure "$IML_BLAS"
> > ```
> > with awkward quoting, why not simply
> > 
> > ```
> > ./configure --with-cblas="$cblas_libs"
> > ```
> > (same for `FFLAS_FFPACK_BLAS`)

> I don't really remember, but both might work as well.
> IIRC FFLAS-FFPACK configure scripts is very sensitive to quoting and spaces and it was a nightmare to make it accept multiple libraries to be linked separated by spaces.

In both case the variable is only defined on cygwin/darwin and we rely on autodetection in other cases. I guess we could throw the autodetection throw the window and put the stuff in every case. In fact if we want to be able to use something else than ATLAS in the future it is prudent to do so. So I will throw the particular cases out. If there is a strong case to still keep something for cygwin I am all ears.



---

archive/issue_comments_239799.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">Comment 68</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc5fefccdd5afb8fef93aa89e9f1a6317da830f4\">cc5fefc</a></td><td><code>Introduce a finer grain of configuration between blas/cblas/lapack. In the future we want to move to .pc file and the configuration will have the same granularity.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57cbf6f5eda1b6315c05789710010ee6930645b7\">57cbf6f</a></td><td><code>Clean up spkg-install of all packages affected by the changes in the ATLAS spkg. The new model in anticipation of future changes is to not rely on autodetection of</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eda2eb638d7c10f36053aa43474bb2fd21cd4db2\">eda2eb6</a></td><td><code>Centralize the reading of SAGE_SHARE/*_config files in sage/env.py where it can be accessed by setup.py/module_list.py and sage/misc/cython.py.</code></td></tr></table>\n",
    "created_at": "2015-06-27T11:03:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239799",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68" align="right">Comment 68</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc5fefccdd5afb8fef93aa89e9f1a6317da830f4">cc5fefc</a></td><td><code>Introduce a finer grain of configuration between blas/cblas/lapack. In the future we want to move to .pc file and the configuration will have the same granularity.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57cbf6f5eda1b6315c05789710010ee6930645b7">57cbf6f</a></td><td><code>Clean up spkg-install of all packages affected by the changes in the ATLAS spkg. The new model in anticipation of future changes is to not rely on autodetection of</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eda2eb638d7c10f36053aa43474bb2fd21cd4db2">eda2eb6</a></td><td><code>Centralize the reading of SAGE_SHARE/*_config files in sage/env.py where it can be accessed by setup.py/module_list.py and sage/misc/cython.py.</code></td></tr></table>




---

archive/issue_comments_239800.json:
```json
{
    "body": "Changed commit from **[5c9e7a5](https://github.com/sagemath/sagetrac-mirror/commit/5c9e7a50cbc9b97db2c560e18d08294b33b768e7)** to **[eda2eb6](https://github.com/sagemath/sagetrac-mirror/commit/eda2eb638d7c10f36053aa43474bb2fd21cd4db2)**",
    "created_at": "2015-06-27T11:03:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239800",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5c9e7a5](https://github.com/sagemath/sagetrac-mirror/commit/5c9e7a50cbc9b97db2c560e18d08294b33b768e7)** to **[eda2eb6](https://github.com/sagemath/sagetrac-mirror/commit/eda2eb638d7c10f36053aa43474bb2fd21cd4db2)**



---

archive/issue_comments_239801.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">Comment 69</div>\n\nI'll happily field comments on the new changes but I will otherwise start moving libraries to the `.pxd` files. After Jeroen clean up of the other tickets that's a total of 5 files (plus one optional file) so not a big job but I'll probably end with some redundancies on my first go (i.e. stuff that's not needed thanks to other declarations in `.pxd`).",
    "created_at": "2015-06-27T11:08:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239801",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:69" align="right">Comment 69</div>

I'll happily field comments on the new changes but I will otherwise start moving libraries to the `.pxd` files. After Jeroen clean up of the other tickets that's a total of 5 files (plus one optional file) so not a big job but I'll probably end with some redundancies on my first go (i.e. stuff that's not needed thanks to other declarations in `.pxd`).



---

archive/issue_comments_239802.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">Comment 70</div>\n\nReplying to [@kiwifb](#comment%3A69):\n> I'll happily field comments on the new changes but I will otherwise start moving libraries to the `.pxd` files.\n\nI'd do that in a new ticket. There is already a lot of stuff on this ticket and I wouldn't add anything more.\n\nI might not have much time these days to look at this ticket, so you can just go ahead. I am still very suspicious about the change to `LDFLAGS` in `sage-env`: it's a seemingly innocent change but with so much potential to break stuff. For handling `CFLAGS`, `LDFLAGS`,... in Sage we have always treated \"unset\" and \"set to empty\" equivalently. So such a change shouldn't be made lightly.\n\nTwo other small things I noticed now: there is some strange indentation in `atlas/spkg-install`, be sure to use mutiples of 4 spaces everywhere. And of course `get_libs_config()` needs a doctest.",
    "created_at": "2015-06-28T07:57:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239802",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:70" align="right">Comment 70</div>

Replying to [@kiwifb](#comment%3A69):
> I'll happily field comments on the new changes but I will otherwise start moving libraries to the `.pxd` files.

I'd do that in a new ticket. There is already a lot of stuff on this ticket and I wouldn't add anything more.

I might not have much time these days to look at this ticket, so you can just go ahead. I am still very suspicious about the change to `LDFLAGS` in `sage-env`: it's a seemingly innocent change but with so much potential to break stuff. For handling `CFLAGS`, `LDFLAGS`,... in Sage we have always treated "unset" and "set to empty" equivalently. So such a change shouldn't be made lightly.

Two other small things I noticed now: there is some strange indentation in `atlas/spkg-install`, be sure to use mutiples of 4 spaces everywhere. And of course `get_libs_config()` needs a doctest.



---

archive/issue_comments_239803.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">Comment 71</div>\n\nReplying to [@jdemeyer](#comment%3A70):\n> Replying to [@kiwifb](#comment%3A69):\n> > I'll happily field comments on the new changes but I will otherwise start moving libraries to the `.pxd` files.\n\n> I'd do that in a new ticket. There is already a lot of stuff on this ticket and I wouldn't add anything more.\n\nThat's a fair comment we touched things all over the place and some more will need to be \"aligned\" eventually. \n\n> \n> I might not have much time these days to look at this ticket, so you can just go ahead. I am still very suspicious about the change to `LDFLAGS` in `sage-env`: it's a seemingly innocent change but with so much potential to break stuff. For handling `CFLAGS`, `LDFLAGS`,... in Sage we have always treated \"unset\" and \"set to empty\" equivalently. So such a change shouldn't be made lightly.\n> \n\nI am a bit concerned that there is even a need for these tests and setting/unsetting. It just feel wrong so I am probably not the best person to pass a judgement on that particular change, my own reaction is to make the whole thing disappear.\n\n> Two other small things I noticed now: there is some strange indentation in `atlas/spkg-install`, be sure to use mutiples of 4 spaces everywhere. And of course `get_libs_config()` needs a doctest.\n\nI will check the indent ASAP and I was afraid you would ask for that doctest, but I know what to do.\n\n`@`Jean-Pierre, any comments on the last few commits? As can be surmised by comments we'll eventually touch again some packages using `blas/cblas/lapack` to enforce settings in the future. But as Jeroen says there is enough here already.",
    "created_at": "2015-06-28T10:10:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239803",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:71" align="right">Comment 71</div>

Replying to [@jdemeyer](#comment%3A70):
> Replying to [@kiwifb](#comment%3A69):
> > I'll happily field comments on the new changes but I will otherwise start moving libraries to the `.pxd` files.

> I'd do that in a new ticket. There is already a lot of stuff on this ticket and I wouldn't add anything more.

That's a fair comment we touched things all over the place and some more will need to be "aligned" eventually. 

> 
> I might not have much time these days to look at this ticket, so you can just go ahead. I am still very suspicious about the change to `LDFLAGS` in `sage-env`: it's a seemingly innocent change but with so much potential to break stuff. For handling `CFLAGS`, `LDFLAGS`,... in Sage we have always treated "unset" and "set to empty" equivalently. So such a change shouldn't be made lightly.
> 

I am a bit concerned that there is even a need for these tests and setting/unsetting. It just feel wrong so I am probably not the best person to pass a judgement on that particular change, my own reaction is to make the whole thing disappear.

> Two other small things I noticed now: there is some strange indentation in `atlas/spkg-install`, be sure to use mutiples of 4 spaces everywhere. And of course `get_libs_config()` needs a doctest.

I will check the indent ASAP and I was afraid you would ask for that doctest, but I know what to do.

`@`Jean-Pierre, any comments on the last few commits? As can be surmised by comments we'll eventually touch again some packages using `blas/cblas/lapack` to enforce settings in the future. But as Jeroen says there is enough here already.



---

archive/issue_comments_239804.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">Comment 72</div>\n\nReplying to [@kiwifb](#comment%3A71):\n> Replying to [@jdemeyer](#comment%3A70):\n> > Replying to [@kiwifb](#comment%3A69):\n> > > I'll happily field comments on the new changes but I will otherwise start moving libraries to the `.pxd` files.\n\n> > I'd do that in a new ticket. There is already a lot of stuff on this ticket and I wouldn't add anything more.\n\n> \n> That's a fair comment we touched things all over the place and some more will need to be \"aligned\" eventually. \n> \n> > \n> > I might not have much time these days to look at this ticket, so you can just go ahead. I am still very suspicious about the change to `LDFLAGS` in `sage-env`: it's a seemingly innocent change but with so much potential to break stuff. For handling `CFLAGS`, `LDFLAGS`,... in Sage we have always treated \"unset\" and \"set to empty\" equivalently. So such a change shouldn't be made lightly.\n> > \n\n> \n> I am a bit concerned that there is even a need for these tests and setting/unsetting. It just feel wrong so I am probably not the best person to pass a judgement on that particular change, my own reaction is to make the whole thing disappear.\n\n>\n\nMy only point is that now `LDFLAGS` just follows what `CFLAGS` does and gave me a better behavior.\nSo I don't agree that we've always treated LDFLAGS and CFLAGS (and CXXFLAGS) in the same way when they are unset and empty.\n\nThe problem with the current behavior of  LDFLAGS, is that if `LDFLAGS` is not set, then whe get `LDFLAGS=\"\"`.\nAnd some packages won't touch LDFLAGS if `LFDLAGS=\"\"`.\nIf you feel worried about this, then just remove this change.\n\nFor the current behavior of CFLAGS, what you get is that if CFLAGS is empty, then it's unset, that might not be the best behavior as well...\n\n> > Two other small things I noticed now: there is some strange indentation in `atlas/spkg-install`, be sure to use mutiples of 4 spaces everywhere. And of course `get_libs_config()` needs a doctest.\n\n> \n> I will check the indent ASAP and I was afraid you would ask for that doctest, but I know what to do.\n> \n> `@`Jean-Pierre, any comments on the last few commits? As can be surmised by comments we'll eventually touch again some packages using `blas/cblas/lapack` to enforce settings in the future. But as Jeroen says there is enough here already.\n\nYeah I generally agree with going step by step even if the current solution is not perfect.\n\nI also spotted a few indentation issues in `atlas/spkg-install` and `src/sage/env.py`",
    "created_at": "2015-06-28T14:20:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239804",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:72" align="right">Comment 72</div>

Replying to [@kiwifb](#comment%3A71):
> Replying to [@jdemeyer](#comment%3A70):
> > Replying to [@kiwifb](#comment%3A69):
> > > I'll happily field comments on the new changes but I will otherwise start moving libraries to the `.pxd` files.

> > I'd do that in a new ticket. There is already a lot of stuff on this ticket and I wouldn't add anything more.

> 
> That's a fair comment we touched things all over the place and some more will need to be "aligned" eventually. 
> 
> > 
> > I might not have much time these days to look at this ticket, so you can just go ahead. I am still very suspicious about the change to `LDFLAGS` in `sage-env`: it's a seemingly innocent change but with so much potential to break stuff. For handling `CFLAGS`, `LDFLAGS`,... in Sage we have always treated "unset" and "set to empty" equivalently. So such a change shouldn't be made lightly.
> > 

> 
> I am a bit concerned that there is even a need for these tests and setting/unsetting. It just feel wrong so I am probably not the best person to pass a judgement on that particular change, my own reaction is to make the whole thing disappear.

>

My only point is that now `LDFLAGS` just follows what `CFLAGS` does and gave me a better behavior.
So I don't agree that we've always treated LDFLAGS and CFLAGS (and CXXFLAGS) in the same way when they are unset and empty.

The problem with the current behavior of  LDFLAGS, is that if `LDFLAGS` is not set, then whe get `LDFLAGS=""`.
And some packages won't touch LDFLAGS if `LFDLAGS=""`.
If you feel worried about this, then just remove this change.

For the current behavior of CFLAGS, what you get is that if CFLAGS is empty, then it's unset, that might not be the best behavior as well...

> > Two other small things I noticed now: there is some strange indentation in `atlas/spkg-install`, be sure to use mutiples of 4 spaces everywhere. And of course `get_libs_config()` needs a doctest.

> 
> I will check the indent ASAP and I was afraid you would ask for that doctest, but I know what to do.
> 
> `@`Jean-Pierre, any comments on the last few commits? As can be surmised by comments we'll eventually touch again some packages using `blas/cblas/lapack` to enforce settings in the future. But as Jeroen says there is enough here already.

Yeah I generally agree with going step by step even if the current solution is not perfect.

I also spotted a few indentation issues in `atlas/spkg-install` and `src/sage/env.py`



---

archive/issue_comments_239805.json:
```json
{
    "body": "Changed commit from **[eda2eb6](https://github.com/sagemath/sagetrac-mirror/commit/eda2eb638d7c10f36053aa43474bb2fd21cd4db2)** to **[83fbfcf](https://github.com/sagemath/sagetrac-mirror/commit/83fbfcf79a435d04c1bc7c90b1ad7ff4510797db)**",
    "created_at": "2015-06-29T09:02:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239805",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[eda2eb6](https://github.com/sagemath/sagetrac-mirror/commit/eda2eb638d7c10f36053aa43474bb2fd21cd4db2)** to **[83fbfcf](https://github.com/sagemath/sagetrac-mirror/commit/83fbfcf79a435d04c1bc7c90b1ad7ff4510797db)**



---

archive/issue_comments_239806.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">Comment 73</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83fbfcf79a435d04c1bc7c90b1ad7ff4510797db\">83fbfcf</a></td><td><code>Fix indent in ATLAS spkg-install, add a doctest for get_libs_config.</code></td></tr></table>\n",
    "created_at": "2015-06-29T09:02:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239806",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73" align="right">Comment 73</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83fbfcf79a435d04c1bc7c90b1ad7ff4510797db">83fbfcf</a></td><td><code>Fix indent in ATLAS spkg-install, add a doctest for get_libs_config.</code></td></tr></table>




---

archive/issue_events_233454.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-06-29T09:11:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233454"
}
```



---

archive/issue_events_233455.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-06-29T09:11:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233455"
}
```



---

archive/issue_comments_239807.json:
```json
{
    "body": "Changed author from **Jean-Pierre Flori** to **Jean-Pierre Flori, Fran\u00e7ois Bissey**",
    "created_at": "2015-06-29T09:11:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239807",
    "user": "https://github.com/kiwifb"
}
```

Changed author from **Jean-Pierre Flori** to **Jean-Pierre Flori, François Bissey**



---

archive/issue_comments_239808.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">Comment 74</div>\n\nReplying to [@jpflori](#comment%3A72):\n> I also spotted a few indentation issues in `atlas/spkg-install` and `src/sage/env.py`\n\nFound some stuff in `spkg-install` but cannot see anything in `env.py`, if there is something you'll have to provide a line number. I am putting this for review now.",
    "created_at": "2015-06-29T09:11:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239808",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:74" align="right">Comment 74</div>

Replying to [@jpflori](#comment%3A72):
> I also spotted a few indentation issues in `atlas/spkg-install` and `src/sage/env.py`

Found some stuff in `spkg-install` but cannot see anything in `env.py`, if there is something you'll have to provide a line number. I am putting this for review now.



---

archive/issue_comments_239809.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">Comment 75</div>\n\n[comment:49] hasn't been addressed.",
    "created_at": "2015-06-29T09:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239809",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:75" align="right">Comment 75</div>

[comment:49] hasn't been addressed.



---

archive/issue_events_233456.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-29T09:43:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233456"
}
```



---

archive/issue_events_233457.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-29T09:43:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233457"
}
```



---

archive/issue_comments_239810.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">Comment 76</div>\n\nReplying to [@jdemeyer](#comment%3A75):\n> [comment:49] hasn't been addressed.\n\nWhile I find the argument that `LDFLAGS` should be treated just the same as `{C,CXX}FLAGS` persuasive, I'll surrender to the fact that it belongs to another ticket that I'll happily review positively. Waiting for my OS X build to finish before committing that change.",
    "created_at": "2015-06-29T09:51:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239810",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:76" align="right">Comment 76</div>

Replying to [@jdemeyer](#comment%3A75):
> [comment:49] hasn't been addressed.

While I find the argument that `LDFLAGS` should be treated just the same as `{C,CXX}FLAGS` persuasive, I'll surrender to the fact that it belongs to another ticket that I'll happily review positively. Waiting for my OS X build to finish before committing that change.



---

archive/issue_comments_239811.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">Comment 77</div>\n\nYeah, just postpone it to another ticket (but also make sure that our treatment of LDFLAGS does not break CVXOPT or other package linking to BLAS which need to be fed stuff through LDFLAGS).",
    "created_at": "2015-06-29T10:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239811",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:77" align="right">Comment 77</div>

Yeah, just postpone it to another ticket (but also make sure that our treatment of LDFLAGS does not break CVXOPT or other package linking to BLAS which need to be fed stuff through LDFLAGS).



---

archive/issue_comments_239812.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">Comment 78</div>\n\nReplying to [@kiwifb](#comment%3A76):\n> While I find the argument that `LDFLAGS` should be treated just the same as `{C,CXX}FLAGS` persuasive\n\nThe treating of `{C,CXX}FLAGS` changed recently in #16149 and I don't understand why that change was needed.\n\nPersonally, I would prefer to not treat empty and non-empty `FOOFLAGS` fundamentally different (i.e. I would revert #16149 and leave `LDFLAGS` as they are).",
    "created_at": "2015-06-29T11:30:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239812",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:78" align="right">Comment 78</div>

Replying to [@kiwifb](#comment%3A76):
> While I find the argument that `LDFLAGS` should be treated just the same as `{C,CXX}FLAGS` persuasive

The treating of `{C,CXX}FLAGS` changed recently in #16149 and I don't understand why that change was needed.

Personally, I would prefer to not treat empty and non-empty `FOOFLAGS` fundamentally different (i.e. I would revert #16149 and leave `LDFLAGS` as they are).



---

archive/issue_comments_239813.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">Comment 79</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e780270799ebe985039590431189dd5f3bde730\">2e78027</a></td><td><code>typo in atlas spkg-install, manifest itself on OS X</code></td></tr></table>\n",
    "created_at": "2015-06-29T12:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239813",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:79" align="right">Comment 79</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e780270799ebe985039590431189dd5f3bde730">2e78027</a></td><td><code>typo in atlas spkg-install, manifest itself on OS X</code></td></tr></table>




---

archive/issue_comments_239814.json:
```json
{
    "body": "Changed commit from **[83fbfcf](https://github.com/sagemath/sagetrac-mirror/commit/83fbfcf79a435d04c1bc7c90b1ad7ff4510797db)** to **[2e78027](https://github.com/sagemath/sagetrac-mirror/commit/2e780270799ebe985039590431189dd5f3bde730)**",
    "created_at": "2015-06-29T12:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239814",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[83fbfcf](https://github.com/sagemath/sagetrac-mirror/commit/83fbfcf79a435d04c1bc7c90b1ad7ff4510797db)** to **[2e78027](https://github.com/sagemath/sagetrac-mirror/commit/2e780270799ebe985039590431189dd5f3bde730)**



---

archive/issue_comments_239815.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">Comment 80</div>\n\nReplying to [@jdemeyer](#comment%3A78):\n> Replying to [@kiwifb](#comment%3A76):\n> > While I find the argument that `LDFLAGS` should be treated just the same as `{C,CXX}FLAGS` persuasive\n\n> \n> The treating of `{C,CXX}FLAGS` changed recently in #16149 and I don't understand why that change was needed.\n> \n> Personally, I would prefer to not treat empty and non-empty `FOOFLAGS` fundamentally different (i.e. I would revert #16149 and leave `LDFLAGS` as they are).\n\nHaving `*FLAGS` empty or unset are two different things.\nMaybe it should be the same, but some libraries deal with it differently.\nE.g. when it's unset it means do whatever you want with `*FLAGS` and if it is empty, it means leave it empty.\nOf course, this is not a universal truth and different libraries behaves differently.\nSo as far as I'm concerned, I would just not touch `*FLAGS` at all.",
    "created_at": "2015-06-29T14:08:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239815",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:80" align="right">Comment 80</div>

Replying to [@jdemeyer](#comment%3A78):
> Replying to [@kiwifb](#comment%3A76):
> > While I find the argument that `LDFLAGS` should be treated just the same as `{C,CXX}FLAGS` persuasive

> 
> The treating of `{C,CXX}FLAGS` changed recently in #16149 and I don't understand why that change was needed.
> 
> Personally, I would prefer to not treat empty and non-empty `FOOFLAGS` fundamentally different (i.e. I would revert #16149 and leave `LDFLAGS` as they are).

Having `*FLAGS` empty or unset are two different things.
Maybe it should be the same, but some libraries deal with it differently.
E.g. when it's unset it means do whatever you want with `*FLAGS` and if it is empty, it means leave it empty.
Of course, this is not a universal truth and different libraries behaves differently.
So as far as I'm concerned, I would just not touch `*FLAGS` at all.



---

archive/issue_comments_239816.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">Comment 81</div>\n\nReplying to [@jpflori](#comment%3A80):\n> Having `*FLAGS` empty or unset are two different things.\n\nI know and understand that, but my point is that it shouldn't be two different things.",
    "created_at": "2015-06-29T16:02:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239816",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:81" align="right">Comment 81</div>

Replying to [@jpflori](#comment%3A80):
> Having `*FLAGS` empty or unset are two different things.

I know and understand that, but my point is that it shouldn't be two different things.



---

archive/issue_comments_239817.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">Comment 82</div>\n\nIn any case, can we please *in this ticket* remove the changes to `sage-env` and discuss this somewhere else?",
    "created_at": "2015-06-29T18:45:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239817",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:82" align="right">Comment 82</div>

In any case, can we please *in this ticket* remove the changes to `sage-env` and discuss this somewhere else?



---

archive/issue_comments_239818.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">Comment 83</div>\n\nTicket causes problems on OS X, so not ready yet.",
    "created_at": "2015-06-30T05:11:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239818",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:83" align="right">Comment 83</div>

Ticket causes problems on OS X, so not ready yet.



---

archive/issue_comments_239819.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">Comment 84</div>\n\nThe `sed` command is not doing its job\n\n```\nMirage:sage-6.8.beta5 fbissey$ cat local/share/blas_config|sed 's/\\([^ ]\\+\\)/-l\\1/g'\nblas\n```",
    "created_at": "2015-06-30T06:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239819",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:84" align="right">Comment 84</div>

The `sed` command is not doing its job

```
Mirage:sage-6.8.beta5 fbissey$ cat local/share/blas_config|sed 's/\([^ ]\+\)/-l\1/g'
blas
```



---

archive/issue_comments_239820.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">Comment 85</div>\n\nI believe that `\\+` in `sed` regexps for \"match 1 or more times\" is not portable. But you can replace `X\\+` by `XX*` for any value of `X`.",
    "created_at": "2015-06-30T07:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239820",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:85" align="right">Comment 85</div>

I believe that `\+` in `sed` regexps for "match 1 or more times" is not portable. But you can replace `X\+` by `XX*` for any value of `X`.



---

archive/issue_comments_239821.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">Comment 86</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/beeb264e9929e335f64975028c95bc03cc4b7d81\">beeb264</a></td><td><code>Revert changes to sage-env</code></td></tr></table>\n",
    "created_at": "2015-06-30T08:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239821",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:86" align="right">Comment 86</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/beeb264e9929e335f64975028c95bc03cc4b7d81">beeb264</a></td><td><code>Revert changes to sage-env</code></td></tr></table>




---

archive/issue_comments_239822.json:
```json
{
    "body": "Changed commit from **[2e78027](https://github.com/sagemath/sagetrac-mirror/commit/2e780270799ebe985039590431189dd5f3bde730)** to **[beeb264](https://github.com/sagemath/sagetrac-mirror/commit/beeb264e9929e335f64975028c95bc03cc4b7d81)**",
    "created_at": "2015-06-30T08:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239822",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2e78027](https://github.com/sagemath/sagetrac-mirror/commit/2e780270799ebe985039590431189dd5f3bde730)** to **[beeb264](https://github.com/sagemath/sagetrac-mirror/commit/beeb264e9929e335f64975028c95bc03cc4b7d81)**



---

archive/issue_comments_239823.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">Comment 87</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2495dd4d55a4392e0d8224764e6eb7d5bc96f71\">b2495dd</a></td><td><code>Improve portability of sed script so that it works on OS X.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/764c3b574a438ef36b3a8a29552a7691514a37fb\">764c3b5</a></td><td><code>Forgot to close the conditional when reversing LDFLAGS changes in sage-env</code></td></tr></table>\n",
    "created_at": "2015-06-30T09:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239823",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:87" align="right">Comment 87</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2495dd4d55a4392e0d8224764e6eb7d5bc96f71">b2495dd</a></td><td><code>Improve portability of sed script so that it works on OS X.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/764c3b574a438ef36b3a8a29552a7691514a37fb">764c3b5</a></td><td><code>Forgot to close the conditional when reversing LDFLAGS changes in sage-env</code></td></tr></table>




---

archive/issue_comments_239824.json:
```json
{
    "body": "Changed commit from **[beeb264](https://github.com/sagemath/sagetrac-mirror/commit/beeb264e9929e335f64975028c95bc03cc4b7d81)** to **[764c3b5](https://github.com/sagemath/sagetrac-mirror/commit/764c3b574a438ef36b3a8a29552a7691514a37fb)**",
    "created_at": "2015-06-30T09:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239824",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[beeb264](https://github.com/sagemath/sagetrac-mirror/commit/beeb264e9929e335f64975028c95bc03cc4b7d81)** to **[764c3b5](https://github.com/sagemath/sagetrac-mirror/commit/764c3b574a438ef36b3a8a29552a7691514a37fb)**



---

archive/issue_comments_239825.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">Comment 88</div>\n\nThanks for the portability tip Jeroen, that got me through the stuff using autotools. OS X stuff has been compromised in `numpy` and very likely `scipy`, working on that.",
    "created_at": "2015-06-30T10:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239825",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:88" align="right">Comment 88</div>

Thanks for the portability tip Jeroen, that got me through the stuff using autotools. OS X stuff has been compromised in `numpy` and very likely `scipy`, working on that.



---

archive/issue_comments_239826.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">Comment 89</div>\n\nI just got an idea: why aren't we using a `pkgconfig` file instead of `local/share/blas_config`? I seems like `pkgconfig` is exactly meant to solve the problems we're having on this ticket.\n\nA typical file looks like\n\n```\n$ cat local/lib/pkgconfig/m4ri.pc \nSAGE_ROOT=/usr/local/src/sage-config\nprefix=${SAGE_ROOT}/local\nexec_prefix=${prefix}\nlibdir=${SAGE_ROOT}/local/lib\nincludedir=${prefix}/include\n\nName: M4RI\nDescription: Dense linear algebra over GF(2).\nVersion: 20140914\nLibs: -L${libdir} -lm4ri -lm\nCflags: -I${includedir}/m4ri  -I${SAGE_ROOT}/local/include -g -fPIC -Wall -pedantic -O2  -mmmx -msse -msse2 -msse3 \n```\n\nI am sure we can make a `blas.pc` file using this format.\n\nFrom the shell, you can do for example\n\n```\n(sage-sh) $ pkgconf --libs m4ri\n-lm4ri -lm  \n```\nwhich would replace the ugly `sed` script.\n\nThere is also a Python interface:\n\n```\nsage: import pkgconfig\nsage: pkgconfig.libs(\"m4ri\")\nu'-L/usr/local/src/sage-config/local/lib -lm4ri -lm'\n```",
    "created_at": "2015-06-30T15:57:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239826",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:89" align="right">Comment 89</div>

I just got an idea: why aren't we using a `pkgconfig` file instead of `local/share/blas_config`? I seems like `pkgconfig` is exactly meant to solve the problems we're having on this ticket.

A typical file looks like

```
$ cat local/lib/pkgconfig/m4ri.pc 
SAGE_ROOT=/usr/local/src/sage-config
prefix=${SAGE_ROOT}/local
exec_prefix=${prefix}
libdir=${SAGE_ROOT}/local/lib
includedir=${prefix}/include

Name: M4RI
Description: Dense linear algebra over GF(2).
Version: 20140914
Libs: -L${libdir} -lm4ri -lm
Cflags: -I${includedir}/m4ri  -I${SAGE_ROOT}/local/include -g -fPIC -Wall -pedantic -O2  -mmmx -msse -msse2 -msse3 
```

I am sure we can make a `blas.pc` file using this format.

From the shell, you can do for example

```
(sage-sh) $ pkgconf --libs m4ri
-lm4ri -lm  
```
which would replace the ugly `sed` script.

There is also a Python interface:

```
sage: import pkgconfig
sage: pkgconfig.libs("m4ri")
u'-L/usr/local/src/sage-config/local/lib -lm4ri -lm'
```



---

archive/issue_comments_239827.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">Comment 90</div>\n\nUsing `pkgconfig` is actually the final destination.\nThis ticket was just a cleanup ticket before #17075.",
    "created_at": "2015-06-30T16:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239827",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:90" align="right">Comment 90</div>

Using `pkgconfig` is actually the final destination.
This ticket was just a cleanup ticket before #17075.



---

archive/issue_comments_239828.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">Comment 91</div>\n\nWhat you're doing here on this ticket with `$SAGE_SHARE/blas_config` is very close to `pkgconfig`. So why not just use `pkgconfig` instead?",
    "created_at": "2015-06-30T17:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239828",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:91" align="right">Comment 91</div>

What you're doing here on this ticket with `$SAGE_SHARE/blas_config` is very close to `pkgconfig`. So why not just use `pkgconfig` instead?



---

archive/issue_comments_239829.json:
```json
{
    "body": "Changed dependencies from **#18777, #18778** to none",
    "created_at": "2015-06-30T17:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239829",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#18777, #18778** to none



---

archive/issue_comments_239830.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">Comment 93</div>\n\nI guess that at the time this ticket was opened, pkgconfig was not standard though I could not swear it.",
    "created_at": "2015-06-30T21:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239830",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:93" align="right">Comment 93</div>

I guess that at the time this ticket was opened, pkgconfig was not standard though I could not swear it.



---

archive/issue_comments_239831.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">Comment 94</div>\n\nWhen I started talking about #17075 and associated work to be able to use any `blas/lapack` our goal was to use `pkgconfig` and `https://github.com/matze/pkgconfig` as a python interface to it. This is what `sage-on-gentoo` is currently using. The fact that the python interface was also standard escaped me.\n\nWe included `pkgconfig` in sage when we upgraded to `matplotlib-1.3.x` after I determined that it was the only to build it on OS X while reviewing that ticket. That would have been after #17075 but I am not sure if it was before this ticket.\n\nFor reference this is the current sage-on-gentoo patch for 6.8.beta6 https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage/files/sage-6.8-blas-r1.patch\n\nThe librarydir part is for dealing with BLAS/LAPACK installed in less standard location (`/opt`) where they may be out of the library search path when linking. It still relies on said path to be in `ld.so.config` or equivalent. Typical cases are intel MKL and AMD acml. The ability to compile against MKL is one of the key motivation here.\n\nSince we have all the elements, going `.pc` all the way is fine. I'll rewrite the whole thing.\n\nAs mentioned before I spent some time working on OS X and that's also one of my motivation to rewrite some stuff. That's an interesting little story that touch `sage-env` (surprise)....\n\nSo Jean-Pierre put this in `numpy` and `scipy`\n\n```\nif [ -n \"${LDFLAGS+set}\" ]; then\n    if [ \"$UNAME\" != \"Darwin\" ]; then\n        export LDFLAGS=\"-bundle -undefined dynamic_lookup $LDFLAGS\"\n        export CPPFLAGS=\"-D__ACCELERATE__ $CPPFLAGS\"\n    else\n        export LDFLAGS=\"-shared $LDFLAGS\"\n    fi\nfi\n```\nWhich definitely looked wrong on first glance but I trusted Jean-Pierre. Well it is wrong and compilation will fail on OS X because somehow you'll have `-bundle` and `-shared` in `LDFLAGS` at the same time. Unless you include Jean-Pierre changes to `sage-env` in which case `numpy` at least compile. I'll hazard that the change to `sage-env` enable compilation under linux as well somehow.\n\nSo there we are the change to `sage-env` was allowing wrong stuff in `numpy` and `scipy` (not on OS X) to work to some extent.\n\nMy local branch is in a bit of a mess and I think I pushed too much stuff on trac so I'll get a clean branch in.",
    "created_at": "2015-07-01T11:10:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239831",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:94" align="right">Comment 94</div>

When I started talking about #17075 and associated work to be able to use any `blas/lapack` our goal was to use `pkgconfig` and `https://github.com/matze/pkgconfig` as a python interface to it. This is what `sage-on-gentoo` is currently using. The fact that the python interface was also standard escaped me.

We included `pkgconfig` in sage when we upgraded to `matplotlib-1.3.x` after I determined that it was the only to build it on OS X while reviewing that ticket. That would have been after #17075 but I am not sure if it was before this ticket.

For reference this is the current sage-on-gentoo patch for 6.8.beta6 https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage/files/sage-6.8-blas-r1.patch

The librarydir part is for dealing with BLAS/LAPACK installed in less standard location (`/opt`) where they may be out of the library search path when linking. It still relies on said path to be in `ld.so.config` or equivalent. Typical cases are intel MKL and AMD acml. The ability to compile against MKL is one of the key motivation here.

Since we have all the elements, going `.pc` all the way is fine. I'll rewrite the whole thing.

As mentioned before I spent some time working on OS X and that's also one of my motivation to rewrite some stuff. That's an interesting little story that touch `sage-env` (surprise)....

So Jean-Pierre put this in `numpy` and `scipy`

```
if [ -n "${LDFLAGS+set}" ]; then
    if [ "$UNAME" != "Darwin" ]; then
        export LDFLAGS="-bundle -undefined dynamic_lookup $LDFLAGS"
        export CPPFLAGS="-D__ACCELERATE__ $CPPFLAGS"
    else
        export LDFLAGS="-shared $LDFLAGS"
    fi
fi
```
Which definitely looked wrong on first glance but I trusted Jean-Pierre. Well it is wrong and compilation will fail on OS X because somehow you'll have `-bundle` and `-shared` in `LDFLAGS` at the same time. Unless you include Jean-Pierre changes to `sage-env` in which case `numpy` at least compile. I'll hazard that the change to `sage-env` enable compilation under linux as well somehow.

So there we are the change to `sage-env` was allowing wrong stuff in `numpy` and `scipy` (not on OS X) to work to some extent.

My local branch is in a bit of a mess and I think I pushed too much stuff on trac so I'll get a clean branch in.



---

archive/issue_comments_239832.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">Comment 95</div>\n\nReplying to [@kiwifb](#comment%3A94):\n> When I started talking about #17075 and associated work to be able to use any `blas/lapack` our goal was to use `pkgconfig` and `https://github.com/matze/pkgconfig` as a python interface to it. This is what `sage-on-gentoo` is currently using. The fact that the python interface was also standard escaped me.\n> \n> We included `pkgconfig` in sage when we upgraded to `matplotlib-1.3.x` after I determined that it was the only to build it on OS X while reviewing that ticket. That would have been after #17075 but I am not sure if it was before this ticket.\n> \n> For reference this is the current sage-on-gentoo patch for 6.8.beta6 https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage/files/sage-6.8-blas-r1.patch\n> \n> The librarydir part is for dealing with BLAS/LAPACK installed in less standard location (`/opt`) where they may be out of the library search path when linking. It still relies on said path to be in `ld.so.config` or equivalent. Typical cases are intel MKL and AMD acml. The ability to compile against MKL is one of the key motivation here.\n> \n> Since we have all the elements, going `.pc` all the way is fine. I'll rewrite the whole thing.\n> \n> As mentioned before I spent some time working on OS X and that's also one of my motivation to rewrite some stuff. That's an interesting little story that touch `sage-env` (surprise)....\n> \n> So Jean-Pierre put this in `numpy` and `scipy`\n> \n> ```\n> if [ -n \"${LDFLAGS+set}\" ]; then\n>     if [ \"$UNAME\" != \"Darwin\" ]; then\n>         export LDFLAGS=\"-bundle -undefined dynamic_lookup $LDFLAGS\"\n>         export CPPFLAGS=\"-D__ACCELERATE__ $CPPFLAGS\"\n>     else\n>         export LDFLAGS=\"-shared $LDFLAGS\"\n>     fi\n> fi\n> ```\n> Which definitely looked wrong on first glance but I trusted Jean-Pierre.\n\nI wouldn't it definitely looks wrong on non-OS Xes :)\nRead the comment above this part of code.\nIf `LDFLAGS` is set, you need to add `-shared` yourself.\nThis is exactly what is done here.\nAnd yes you are right, this must be the reason for my changes to `sage-env`, as if `LDFLAGS` is set but empty, then `shared` won't be added and the compilation will fail.\nThe easy solution is to unconditionnally add `-shared` to `LDFLAGS` on non-OS X.\n\nAs far as OS X is concerned, I guess I got this from \"the web\" as I don't have access to any OS X machine and cried for testing here before.",
    "created_at": "2015-07-01T12:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239832",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:95" align="right">Comment 95</div>

Replying to [@kiwifb](#comment%3A94):
> When I started talking about #17075 and associated work to be able to use any `blas/lapack` our goal was to use `pkgconfig` and `https://github.com/matze/pkgconfig` as a python interface to it. This is what `sage-on-gentoo` is currently using. The fact that the python interface was also standard escaped me.
> 
> We included `pkgconfig` in sage when we upgraded to `matplotlib-1.3.x` after I determined that it was the only to build it on OS X while reviewing that ticket. That would have been after #17075 but I am not sure if it was before this ticket.
> 
> For reference this is the current sage-on-gentoo patch for 6.8.beta6 https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage/files/sage-6.8-blas-r1.patch
> 
> The librarydir part is for dealing with BLAS/LAPACK installed in less standard location (`/opt`) where they may be out of the library search path when linking. It still relies on said path to be in `ld.so.config` or equivalent. Typical cases are intel MKL and AMD acml. The ability to compile against MKL is one of the key motivation here.
> 
> Since we have all the elements, going `.pc` all the way is fine. I'll rewrite the whole thing.
> 
> As mentioned before I spent some time working on OS X and that's also one of my motivation to rewrite some stuff. That's an interesting little story that touch `sage-env` (surprise)....
> 
> So Jean-Pierre put this in `numpy` and `scipy`
> 
> ```
> if [ -n "${LDFLAGS+set}" ]; then
>     if [ "$UNAME" != "Darwin" ]; then
>         export LDFLAGS="-bundle -undefined dynamic_lookup $LDFLAGS"
>         export CPPFLAGS="-D__ACCELERATE__ $CPPFLAGS"
>     else
>         export LDFLAGS="-shared $LDFLAGS"
>     fi
> fi
> ```
> Which definitely looked wrong on first glance but I trusted Jean-Pierre.

I wouldn't it definitely looks wrong on non-OS Xes :)
Read the comment above this part of code.
If `LDFLAGS` is set, you need to add `-shared` yourself.
This is exactly what is done here.
And yes you are right, this must be the reason for my changes to `sage-env`, as if `LDFLAGS` is set but empty, then `shared` won't be added and the compilation will fail.
The easy solution is to unconditionnally add `-shared` to `LDFLAGS` on non-OS X.

As far as OS X is concerned, I guess I got this from "the web" as I don't have access to any OS X machine and cried for testing here before.



---

archive/issue_comments_239833.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">Comment 96</div>\n\nIn fact the OS X stuff comes from the previous scipy `spkg-install`.\n\nIf think that my idea to test whether `LDFLAGS` is set and only modify it if it is not (differently on OS X and non-OS Xes), is that if `LDFLAGS` is set then the user did it and knows what he did and will know how to fix it if compilation fails.",
    "created_at": "2015-07-01T12:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239833",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:96" align="right">Comment 96</div>

In fact the OS X stuff comes from the previous scipy `spkg-install`.

If think that my idea to test whether `LDFLAGS` is set and only modify it if it is not (differently on OS X and non-OS Xes), is that if `LDFLAGS` is set then the user did it and knows what he did and will know how to fix it if compilation fails.



---

archive/issue_comments_239834.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">Comment 97</div>\n\nJust a suggestion, feel free to ignore:\n\ndo we really need to change *all* packages using BLAS at the same time? In order to get something in Sage more quickly, could we for example just change ATLAS and the Sage library in this ticket and postpone the other packages to a new ticket?",
    "created_at": "2015-07-02T09:00:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239834",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:97" align="right">Comment 97</div>

Just a suggestion, feel free to ignore:

do we really need to change *all* packages using BLAS at the same time? In order to get something in Sage more quickly, could we for example just change ATLAS and the Sage library in this ticket and postpone the other packages to a new ticket?



---

archive/issue_comments_239835.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">Comment 98</div>\n\nI approve the motion and that will enable me to move a bit faster and not to deal with the `R` bump. I would very much like to deal with  #17642 next. That and making `cython()` use `distutils` as talked about in #18825",
    "created_at": "2015-07-02T09:27:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239835",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:98" align="right">Comment 98</div>

I approve the motion and that will enable me to move a bit faster and not to deal with the `R` bump. I would very much like to deal with  #17642 next. That and making `cython()` use `distutils` as talked about in #18825



---

archive/issue_comments_239836.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">Comment 99</div>\n\nIf possible, let's modularize (though I won't personally have time to do anything serious before the 16th or 20th :( ).\nI think we could even make this ticket a task and:\n* write pkgconfig files for ATLAS in #17075,\n* clean up packages using BLAS in dedicated tickets.\n\nAlso note that the new LinBox/FFLAS-FFPACK/Givaro compatible versions should be out very soon (only LinBox 2.x is missing but there is currently a workshop taking place in Grenoble from what I understood).",
    "created_at": "2015-07-02T12:18:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239836",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:99" align="right">Comment 99</div>

If possible, let's modularize (though I won't personally have time to do anything serious before the 16th or 20th :( ).
I think we could even make this ticket a task and:
* write pkgconfig files for ATLAS in #17075,
* clean up packages using BLAS in dedicated tickets.

Also note that the new LinBox/FFLAS-FFPACK/Givaro compatible versions should be out very soon (only LinBox 2.x is missing but there is currently a workshop taking place in Grenoble from what I understood).



---

archive/issue_comments_239837.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nI have, I believe, finished the rewrite of ATLAS' `spkg-install` to create `.pc` files. I can push it first thing after breakfast to the right ticket.",
    "created_at": "2015-07-02T12:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239837",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:0" align="right">Comment 0</div>

I have, I believe, finished the rewrite of ATLAS' `spkg-install` to create `.pc` files. I can push it first thing after breakfast to the right ticket.



---

archive/issue_comments_239838.json:
```json
{
    "body": "Dependencies: **#17075**",
    "created_at": "2015-09-16T09:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239838",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#17075**



---

archive/issue_comments_239839.json:
```json
{
    "body": "Changed dependencies from **#17075** to none",
    "created_at": "2016-05-09T12:08:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239839",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#17075** to none



---

archive/issue_comments_239840.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nIs this ticket still relevant now that we have #17075?",
    "created_at": "2016-05-09T12:08:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239840",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">Comment 2</div>

Is this ticket still relevant now that we have #17075?



---

archive/issue_comments_239841.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nI think we can close this one.",
    "created_at": "2017-05-17T09:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239841",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:3" align="right">Comment 3</div>

I think we can close this one.



---

archive/issue_comments_239842.json:
```json
{
    "body": "Changed branch from **[u/fbissey/blas](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/blas)** to none",
    "created_at": "2017-05-17T09:36:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239842",
    "user": "https://github.com/jpflori"
}
```

Changed branch from **[u/fbissey/blas](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/blas)** to none



---

archive/issue_comments_239843.json:
```json
{
    "body": "Changed commit from **[764c3b5](https://github.com/sagemath/sagetrac-mirror/commit/764c3b574a438ef36b3a8a29552a7691514a37fb)** to none",
    "created_at": "2017-05-17T09:36:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239843",
    "user": "https://github.com/jpflori"
}
```

Changed commit from **[764c3b5](https://github.com/sagemath/sagetrac-mirror/commit/764c3b574a438ef36b3a8a29552a7691514a37fb)** to none



---

archive/issue_events_233458.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-17T09:36:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233458"
}
```



---

archive/issue_events_233459.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-17T09:36:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233459"
}
```



---

archive/issue_events_233460.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-17T09:36:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233460"
}
```



---

archive/issue_events_233461.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-17T09:36:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233461"
}
```



---

archive/issue_events_233462.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-17T09:36:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233462"
}
```



---

archive/issue_events_233463.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-13T07:54:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "a6a6a6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233463"
}
```



---

archive/issue_comments_239844.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nClosing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).",
    "created_at": "2017-07-13T07:54:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17630#issuecomment-239844",
    "user": "https://github.com/embray"
}
```

<div id="comment:5" align="right">Comment 5</div>

Closing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).



---

archive/issue_events_233464.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-13T07:54:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233464"
}
```



---

archive/issue_events_233465.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-13T07:54:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17630",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17630#event-233465"
}
```
