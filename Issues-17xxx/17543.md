# Issue 17543: Move the last few module classes from Module_old to Module

archive/issues_017306.json:
```json
{
    "assignees": [],
    "body": "After #10513, only the following module classes still inherit from `Module_old`, which is being deprecated:\n1. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`\n2. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`\n3. `sage.structure.formal_sum.FormalSums`\nThe goal of this ticket is to make these classes inherit from `Module` instead, to make them use the new coercion model, and to add a deprecation warning to `Module_old`.\n\nDepends on #10513\n\nCC:  @jpflori @simon-king-jena\n\nComponent: **commutative algebra**\n\nKeywords: **module coercion**\n\nAuthor: **Peter Bruin**\n\nBranch/Commit: **[`c3356eb`](https://github.com/sagemath/sagetrac-mirror/commit/c3356ebb98b93142a5a06720b66dfff14dd5f294)**\n\nReviewer: **Vincent Delecroix, Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17543_\n\n",
    "closed_at": "2015-05-02T14:22:28Z",
    "created_at": "2014-12-23T17:35:29Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/c%3A%20coercion"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Move the last few module classes from Module_old to Module",
    "type": "issue",
    "updated_at": "2015-05-02T14:22:28Z",
    "url": "https://github.com/sagemath/sage/issues/17543",
    "user": "https://github.com/pjbruin"
}
```
After #10513, only the following module classes still inherit from `Module_old`, which is being deprecated:
1. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
2. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
3. `sage.structure.formal_sum.FormalSums`
The goal of this ticket is to make these classes inherit from `Module` instead, to make them use the new coercion model, and to add a deprecation warning to `Module_old`.

Depends on #10513

CC:  @jpflori @simon-king-jena

Component: **commutative algebra**

Keywords: **module coercion**

Author: **Peter Bruin**

Branch/Commit: **[`c3356eb`](https://github.com/sagemath/sagetrac-mirror/commit/c3356ebb98b93142a5a06720b66dfff14dd5f294)**

Reviewer: **Vincent Delecroix, Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/17543_





---

archive/issue_events_247738.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-23T17:35:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247738"
}
```



---

archive/issue_events_247739.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-23T17:35:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "c: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247739"
}
```



---

archive/issue_events_247740.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-23T17:35:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247740"
}
```



---

archive/issue_comments_235294.json:
```json
{
    "body": "Dependencies: **#10513**",
    "created_at": "2014-12-23T20:12:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235294",
    "user": "https://github.com/pjbruin"
}
```

Dependencies: **#10513**



---

archive/issue_comments_235295.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n 1. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`\n 2. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`\n 3. `sage.structure.formal_sum.FormalSums`\n-The goal of this ticket is to make these inherit from `Module` instead.\n+The goal of this ticket is to make these classes inherit from `Module` instead, to make them use the new coercion model, and to add a deprecation warning to `Module_old`.\n``````\n",
    "created_at": "2014-12-30T11:50:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235295",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 1. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
 2. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
 3. `sage.structure.formal_sum.FormalSums`
-The goal of this ticket is to make these inherit from `Module` instead.
+The goal of this ticket is to make these classes inherit from `Module` instead, to make them use the new coercion model, and to add a deprecation warning to `Module_old`.
``````




---

archive/issue_comments_235296.json:
```json
{
    "body": "Branch: **[u/pbruin/17543-Module_old](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/17543-Module_old)**",
    "created_at": "2014-12-30T11:50:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235296",
    "user": "https://github.com/pjbruin"
}
```

Branch: **[u/pbruin/17543-Module_old](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/17543-Module_old)**



---

archive/issue_comments_235297.json:
```json
{
    "body": "Author: **Peter Bruin**",
    "created_at": "2014-12-30T11:50:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235297",
    "user": "https://github.com/pjbruin"
}
```

Author: **Peter Bruin**



---

archive/issue_comments_235298.json:
```json
{
    "body": "Commit: **[`d6b5edb`](https://github.com/sagemath/sagetrac-mirror/commit/d6b5edb6436c920b87afd814878e0ecc8933eb2b)**",
    "created_at": "2014-12-30T11:50:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235298",
    "user": "https://github.com/pjbruin"
}
```

Commit: **[`d6b5edb`](https://github.com/sagemath/sagetrac-mirror/commit/d6b5edb6436c920b87afd814878e0ecc8933eb2b)**



---

archive/issue_comments_235299.json:
```json
{
    "body": "Changed keywords from **module** to **module coercion**",
    "created_at": "2014-12-30T11:50:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235299",
    "user": "https://github.com/pjbruin"
}
```

Changed keywords from **module** to **module coercion**



---

archive/issue_events_247741.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-30T11:50:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247741"
}
```



---

archive/issue_events_247742.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-30T11:50:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247742"
}
```



---

archive/issue_comments_235300.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nMany conflicts on the last beta that I was not able to deal with completely. Moreover, I guess that it would also be safer to rebase over #17585 and #17850 that should be in sage-6.6.beta2. I am willing to review it if you find time to do the rebase after sage-6.6.beta2 is out.\n\nVincent",
    "created_at": "2015-02-28T19:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235300",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Many conflicts on the last beta that I was not able to deal with completely. Moreover, I guess that it would also be safer to rebase over #17585 and #17850 that should be in sage-6.6.beta2. I am willing to review it if you find time to do the rebase after sage-6.6.beta2 is out.

Vincent



---

archive/issue_events_247743.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-28T19:09:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247743"
}
```



---

archive/issue_events_247744.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-02-28T19:09:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247744"
}
```



---

archive/issue_comments_235301.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@videlec](#comment%3A3):\n> Many conflicts on the last beta that I was not able to deal with completely. Moreover, I guess that it would also be safer to rebase over #17585 and #17850 that should be in sage-6.6.beta2. I am willing to review it if you find time to do the rebase after sage-6.6.beta2 is out.\n\nI think it is best to wait until #10513 is merged.",
    "created_at": "2015-02-28T21:59:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235301",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@videlec](#comment%3A3):
> Many conflicts on the last beta that I was not able to deal with completely. Moreover, I guess that it would also be safer to rebase over #17585 and #17850 that should be in sage-6.6.beta2. I am willing to review it if you find time to do the rebase after sage-6.6.beta2 is out.

I think it is best to wait until #10513 is merged.



---

archive/issue_comments_235302.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab\"><code>b1287e7</code></a></td><td><code>Merge branch 'ticket/17561' into ticket/10513</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0957f0ab545bab9d405fadbe1fdffdbd9e39380\"><code>f0957f0</code></a></td><td><code>Trac 10513: use FreeModules(base_ring.category()) instead of FreeModules(base_ring)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b\"><code>6b63026</code></a></td><td><code>Trac 10513: method FreeModule_generic.list() to replace FiniteEnumeratedSets magic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d5aaa146b24ce0af273d1449ad7568ad383b1a2\"><code>6d5aaa1</code></a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1db7ea795c2b79cd7df250a2e7e005ac2375caf\"><code>d1db7ea</code></a></td><td><code>Trac 10513: construct coerce_map as default conversion map instead of matrix morphism</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b09742f58b3d96f4cf0f6573d166bdca3207c1b\"><code>7b09742</code></a></td><td><code>Trac 10513: checking if element_class is a method is no longer necessary</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac685ec9aeb5f89dce2c6e6bcd97e795cffa0ba6\"><code>ac685ec</code></a></td><td><code>Trac 10513: update doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a\"><code>ac70986</code></a></td><td><code>Trac 10513: small documentation improvement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd93dea032ac09046c7ed6e30a15ac9e66648dde\"><code>dd93dea</code></a></td><td><code>Merge branch 'ticket/10513-coercion_and_categories_for_modules' into ticket/17543-Module_old</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f8a5de6931f2af8e5bafadd7ebcc2d5d9f25ded\"><code>7f8a5de</code></a></td><td><code>Trac 17543: remove unnecessary check</code></td></tr></table>\n",
    "created_at": "2015-03-20T23:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235302",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab"><code>b1287e7</code></a></td><td><code>Merge branch 'ticket/17561' into ticket/10513</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0957f0ab545bab9d405fadbe1fdffdbd9e39380"><code>f0957f0</code></a></td><td><code>Trac 10513: use FreeModules(base_ring.category()) instead of FreeModules(base_ring)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b"><code>6b63026</code></a></td><td><code>Trac 10513: method FreeModule_generic.list() to replace FiniteEnumeratedSets magic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d5aaa146b24ce0af273d1449ad7568ad383b1a2"><code>6d5aaa1</code></a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1db7ea795c2b79cd7df250a2e7e005ac2375caf"><code>d1db7ea</code></a></td><td><code>Trac 10513: construct coerce_map as default conversion map instead of matrix morphism</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b09742f58b3d96f4cf0f6573d166bdca3207c1b"><code>7b09742</code></a></td><td><code>Trac 10513: checking if element_class is a method is no longer necessary</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac685ec9aeb5f89dce2c6e6bcd97e795cffa0ba6"><code>ac685ec</code></a></td><td><code>Trac 10513: update doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a"><code>ac70986</code></a></td><td><code>Trac 10513: small documentation improvement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd93dea032ac09046c7ed6e30a15ac9e66648dde"><code>dd93dea</code></a></td><td><code>Merge branch 'ticket/10513-coercion_and_categories_for_modules' into ticket/17543-Module_old</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f8a5de6931f2af8e5bafadd7ebcc2d5d9f25ded"><code>7f8a5de</code></a></td><td><code>Trac 17543: remove unnecessary check</code></td></tr></table>




---

archive/issue_comments_235303.json:
```json
{
    "body": "Changed commit from **[`d6b5edb`](https://github.com/sagemath/sagetrac-mirror/commit/d6b5edb6436c920b87afd814878e0ecc8933eb2b)** to **[`7f8a5de`](https://github.com/sagemath/sagetrac-mirror/commit/7f8a5de6931f2af8e5bafadd7ebcc2d5d9f25ded)**",
    "created_at": "2015-03-20T23:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235303",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d6b5edb`](https://github.com/sagemath/sagetrac-mirror/commit/d6b5edb6436c920b87afd814878e0ecc8933eb2b)** to **[`7f8a5de`](https://github.com/sagemath/sagetrac-mirror/commit/7f8a5de6931f2af8e5bafadd7ebcc2d5d9f25ded)**



---

archive/issue_events_247745.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-20T23:12:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247745"
}
```



---

archive/issue_events_247746.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-20T23:12:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247746"
}
```



---

archive/issue_comments_235304.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAfter resolving the merge conflicts for #10513 there was only one left on this ticket.",
    "created_at": "2015-03-20T23:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235304",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:6" align="right">comment:6</div>

After resolving the merge conflicts for #10513 there was only one left on this ticket.



---

archive/issue_comments_235305.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHi Peter,\n\nI do only have very minor points.\n\nThis error message is not very nice\n\n```\n\"x does not define an element of self\"\n```\nI would rather be more explicit\n\n```\n\"x (={}) does not define an element of {}\".format(x, self)\n```\n(I notice that you are not responsible for that)\n\nWhy did you create the method `generator_orders`? Why not instead replace the code in `abelian_iterator`?\n\n```diff\ndiff --git a/src/sage/structure/gens_py.py b/src/sage/structure/gens_py.py\nindex c272503..e22a8a2 100644\n--- a/src/sage/structure/gens_py.py\n+++ b/src/sage/structure/gens_py.py\n@@ -52,7 +52,7 @@ def abelian_iterator(M):\n         yield M(0)\n         return\n \n-    stop = list(M.generator_orders())\n+    stop = [g.additive_order() for g in G]\n     for i in range(len(stop)):\n         if stop[i] is infinity:\n             raise ArithmeticError(\"%s is not finite.\"%M)\n```\n\n## not for this ticket\n\nDo you know why `FormalSums` is in `sage.structure`? It makes no sense to me. It should rather be in `sage.modules`. Moreover it intersects very much with the combinatorial free modules\n\n```\nsage: C = CombinatorialFreeModule(ZZ,GF(7))\nsage: C.an_element()\n2*B[0] + 2*B[1] + 3*B[2]\n```\nWhat do you think? \n\nwhat `gens_py.py` is doing in `sage.structure`?! I would rather put it in `sage.combinat` or `sage.misc.`",
    "created_at": "2015-04-26T14:12:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235305",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>

Hi Peter,

I do only have very minor points.

This error message is not very nice

```
"x does not define an element of self"
```
I would rather be more explicit

```
"x (={}) does not define an element of {}".format(x, self)
```
(I notice that you are not responsible for that)

Why did you create the method `generator_orders`? Why not instead replace the code in `abelian_iterator`?

```diff
diff --git a/src/sage/structure/gens_py.py b/src/sage/structure/gens_py.py
index c272503..e22a8a2 100644
--- a/src/sage/structure/gens_py.py
+++ b/src/sage/structure/gens_py.py
@@ -52,7 +52,7 @@ def abelian_iterator(M):
         yield M(0)
         return
 
-    stop = list(M.generator_orders())
+    stop = [g.additive_order() for g in G]
     for i in range(len(stop)):
         if stop[i] is infinity:
             raise ArithmeticError("%s is not finite."%M)
```

## not for this ticket

Do you know why `FormalSums` is in `sage.structure`? It makes no sense to me. It should rather be in `sage.modules`. Moreover it intersects very much with the combinatorial free modules

```
sage: C = CombinatorialFreeModule(ZZ,GF(7))
sage: C.an_element()
2*B[0] + 2*B[1] + 3*B[2]
```
What do you think? 

what `gens_py.py` is doing in `sage.structure`?! I would rather put it in `sage.combinat` or `sage.misc.`



---

archive/issue_events_247747.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-26T14:12:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247747"
}
```



---

archive/issue_events_247748.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-26T14:12:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247748"
}
```



---

archive/issue_comments_235306.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@videlec](#comment%3A7):\n> \n> ```\n> \"x (={}) does not define an element of {}\".format(x, self)\n> ```\n\nEven better: `\"{!r} does not define an element of {}\".format(x, self)`",
    "created_at": "2015-04-26T15:50:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235306",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@videlec](#comment%3A7):
> 
> ```
> "x (={}) does not define an element of {}".format(x, self)
> ```

Even better: `"{!r} does not define an element of {}".format(x, self)`



---

archive/issue_comments_235307.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/256df27b7063df421aea65472a8a1816f9956661\"><code>256df27</code></a></td><td><code>Trac 17543: reviewer comments</code></td></tr></table>\n",
    "created_at": "2015-04-27T22:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235307",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/256df27b7063df421aea65472a8a1816f9956661"><code>256df27</code></a></td><td><code>Trac 17543: reviewer comments</code></td></tr></table>




---

archive/issue_comments_235308.json:
```json
{
    "body": "Changed commit from **[`7f8a5de`](https://github.com/sagemath/sagetrac-mirror/commit/7f8a5de6931f2af8e5bafadd7ebcc2d5d9f25ded)** to **[`256df27`](https://github.com/sagemath/sagetrac-mirror/commit/256df27b7063df421aea65472a8a1816f9956661)**",
    "created_at": "2015-04-27T22:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235308",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7f8a5de`](https://github.com/sagemath/sagetrac-mirror/commit/7f8a5de6931f2af8e5bafadd7ebcc2d5d9f25ded)** to **[`256df27`](https://github.com/sagemath/sagetrac-mirror/commit/256df27b7063df421aea65472a8a1816f9956661)**



---

archive/issue_comments_235309.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@videlec](#comment%3A7):\n> This error message is not very nice\n> \n> ```\n> \"x does not define an element of self\"\n> ```\n\nI changed to `\"cannot convert {!r} into {}\".format(x, self)` (also because it sounds nicer: perhaps the user passes an object that makes mathematical sense but for which conversion does not work for some reason).\n> Why did you create the method `generator_orders`? Why not instead replace the code in `abelian_iterator`?\n\nGood idea; I changed this as you suggested.  Maybe `generator_orders()` can be regarded as belonging to the obsolete `ParentWithAdditiveAbelianGens`.\n\n> ## not for this ticket\n> \n> Do you know why `FormalSums` is in `sage.structure`? It makes no sense to me. It should rather be in `sage.modules`.\n\nYes, it would certainly makes more sense for it to be there.\n> what `gens_py.py` is doing in `sage.structure`?! I would rather put it in `sage.combinat` or `sage.misc.`\n\nProbably because it is only used in `sage.structure.parent_gens`...",
    "created_at": "2015-04-27T23:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235309",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@videlec](#comment%3A7):
> This error message is not very nice
> 
> ```
> "x does not define an element of self"
> ```

I changed to `"cannot convert {!r} into {}".format(x, self)` (also because it sounds nicer: perhaps the user passes an object that makes mathematical sense but for which conversion does not work for some reason).
> Why did you create the method `generator_orders`? Why not instead replace the code in `abelian_iterator`?

Good idea; I changed this as you suggested.  Maybe `generator_orders()` can be regarded as belonging to the obsolete `ParentWithAdditiveAbelianGens`.

> ## not for this ticket
> 
> Do you know why `FormalSums` is in `sage.structure`? It makes no sense to me. It should rather be in `sage.modules`.

Yes, it would certainly makes more sense for it to be there.
> what `gens_py.py` is doing in `sage.structure`?! I would rather put it in `sage.combinat` or `sage.misc.`

Probably because it is only used in `sage.structure.parent_gens`...



---

archive/issue_events_247749.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-04-27T23:01:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247749"
}
```



---

archive/issue_events_247750.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-04-27T23:01:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247750"
}
```



---

archive/issue_comments_235310.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@pjbruin](#comment%3A11):\n> I changed to `\"cannot convert {!r} into {}\".format(x, self)` (also because it sounds nicer: perhaps the user passes an object that makes mathematical sense but for which conversion does not work for some reason).\n\nCaveat: In Python, exception paths can end up being pretty common. For instance, the coercion framework will frequently use \"leap before you look\", relying on catching the exception if that happens. With the line above you can end up with expensive strings processing in a situation where the string never gets displayed. I haven't checked whether that's actually the case for this string and it's a reason to be conservative with constructing complicated error strings. An alternative (if it's necessary) is to use \"lazy\" strings, where the string reps of the constituents are only asked if the \"lazy string\" itself is asked for its representation.\n\n(mind you, our current object for this, `LazyFormat`, is only faster when used with rather complicated parameters, but if we ever find that error message construction is a bottleneck, we could probably optimize `LazyFormat` to really become competitive)",
    "created_at": "2015-04-28T04:21:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235310",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@pjbruin](#comment%3A11):
> I changed to `"cannot convert {!r} into {}".format(x, self)` (also because it sounds nicer: perhaps the user passes an object that makes mathematical sense but for which conversion does not work for some reason).

Caveat: In Python, exception paths can end up being pretty common. For instance, the coercion framework will frequently use "leap before you look", relying on catching the exception if that happens. With the line above you can end up with expensive strings processing in a situation where the string never gets displayed. I haven't checked whether that's actually the case for this string and it's a reason to be conservative with constructing complicated error strings. An alternative (if it's necessary) is to use "lazy" strings, where the string reps of the constituents are only asked if the "lazy string" itself is asked for its representation.

(mind you, our current object for this, `LazyFormat`, is only faster when used with rather complicated parameters, but if we ever find that error message construction is a bottleneck, we could probably optimize `LazyFormat` to really become competitive)



---

archive/issue_comments_235311.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nTwo patchbots are not happy but for no serious reason. The strangely failing doctest on eddy is perfectly fine on my computer.\n\nGood to go!\n\nVincent",
    "created_at": "2015-04-28T06:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235311",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">comment:14</div>

Two patchbots are not happy but for no serious reason. The strangely failing doctest on eddy is perfectly fine on my computer.

Good to go!

Vincent



---

archive/issue_comments_235312.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2015-04-28T06:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235312",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_247751.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-28T06:10:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247751"
}
```



---

archive/issue_events_247752.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-28T06:10:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247752"
}
```



---

archive/issue_comments_235313.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@nbruin](#comment%3A13):\n> Replying to [@pjbruin](#comment%3A11):\n> > I changed to `\"cannot convert {!r} into {}\".format(x, self)` (also because it sounds nicer: perhaps the user passes an object that makes mathematical sense but for which conversion does not work for some reason).\n\n> \n> Caveat: In Python, exception paths can end up being pretty common. For instance, the coercion framework will frequently use \"leap before you look\", relying on catching the exception if that happens. With the line above you can end up with expensive strings processing in a situation where the string never gets displayed. I haven't checked whether that's actually the case for this string and it's a reason to be conservative with constructing complicated error strings. An alternative (if it's necessary) is to use \"lazy\" strings, where the string reps of the constituents are only asked if the \"lazy string\" itself is asked for its representation.\n> \n> (mind you, our current object for this, `LazyFormat`, is only faster when used with rather complicated parameters, but if we ever find that error message construction is a bottleneck, we could probably optimize `LazyFormat` to really become competitive)\n\nWould be cool that string formatting to be fast and uniformized in errors. Why Python does not have a native solution for that?! Right now, I do prefer clear error messages instead of potentially faster coercion discovery.\n\nVincent",
    "created_at": "2015-04-28T06:12:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235313",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@nbruin](#comment%3A13):
> Replying to [@pjbruin](#comment%3A11):
> > I changed to `"cannot convert {!r} into {}".format(x, self)` (also because it sounds nicer: perhaps the user passes an object that makes mathematical sense but for which conversion does not work for some reason).

> 
> Caveat: In Python, exception paths can end up being pretty common. For instance, the coercion framework will frequently use "leap before you look", relying on catching the exception if that happens. With the line above you can end up with expensive strings processing in a situation where the string never gets displayed. I haven't checked whether that's actually the case for this string and it's a reason to be conservative with constructing complicated error strings. An alternative (if it's necessary) is to use "lazy" strings, where the string reps of the constituents are only asked if the "lazy string" itself is asked for its representation.
> 
> (mind you, our current object for this, `LazyFormat`, is only faster when used with rather complicated parameters, but if we ever find that error message construction is a bottleneck, we could probably optimize `LazyFormat` to really become competitive)

Would be cool that string formatting to be fast and uniformized in errors. Why Python does not have a native solution for that?! Right now, I do prefer clear error messages instead of potentially faster coercion discovery.

Vincent



---

archive/issue_comments_235314.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@videlec](#comment%3A15):\n> Would be cool that string formatting to be fast and uniformized in errors. Why Python does not have a native solution for that?! Right now, I do prefer clear error messages instead of potentially faster coercion discovery.\n\nI was wrong in my timing. The difference is considerable even here. Taking one of the examples from the documentation:\n\n```\nsage: from sage.misc.lazy_format import LazyFormat\nsage: J = J0(23)\nsage: G = J.torsion_subgroup(11)\nsage: G(J.torsion_subgroup(3).0)\nsage: self=G\nsage: x=J.torsion_subgroup(3).0\nsage: %timeit \"cannot convert {!r} into {}\".format(x, self)\n10000 loops, best of 3: 38.4 \u00b5s per loop\nsage: %timeit \"TypeError: cannot convert %s into %s\"%(x,self)\n10000 loops, best of 3: 33.2 \u00b5s per loop\nsage: %timeit LazyFormat(\"TypeError: cannot convert %s into %s\")%(x,self)\n100000 loops, best of 3: 1.74 \u00b5s per loop\n```\n\nI think you should consider putting LazyFormat in the error messages (it's basically a drop-in replacement) or argue that the relevant error messages are only constructed with really cheap arguments in time-critical situations, or that these error messages never get raised in time-critical situations.",
    "created_at": "2015-04-28T06:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235314",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@videlec](#comment%3A15):
> Would be cool that string formatting to be fast and uniformized in errors. Why Python does not have a native solution for that?! Right now, I do prefer clear error messages instead of potentially faster coercion discovery.

I was wrong in my timing. The difference is considerable even here. Taking one of the examples from the documentation:

```
sage: from sage.misc.lazy_format import LazyFormat
sage: J = J0(23)
sage: G = J.torsion_subgroup(11)
sage: G(J.torsion_subgroup(3).0)
sage: self=G
sage: x=J.torsion_subgroup(3).0
sage: %timeit "cannot convert {!r} into {}".format(x, self)
10000 loops, best of 3: 38.4 µs per loop
sage: %timeit "TypeError: cannot convert %s into %s"%(x,self)
10000 loops, best of 3: 33.2 µs per loop
sage: %timeit LazyFormat("TypeError: cannot convert %s into %s")%(x,self)
100000 loops, best of 3: 1.74 µs per loop
```

I think you should consider putting LazyFormat in the error messages (it's basically a drop-in replacement) or argue that the relevant error messages are only constructed with really cheap arguments in time-critical situations, or that these error messages never get raised in time-critical situations.



---

archive/issue_events_247753.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-04-28T06:30:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247753"
}
```



---

archive/issue_events_247754.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-04-28T06:30:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247754"
}
```



---

archive/issue_comments_235315.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nNote that a few years ago I introduced a lazy attribute error to be used in `sage.structure...`, that had a surprising impact on the performance of \"real\" computations. One of the tricks was to have precisely one instance of the lazy error message; so, one doesn't even lose time to create a new instance for each error being raised (it is only needed to set some cdef attribute of the lazy error message object).\n\nWe did some experiments whether lazy strings could achieve the same, but they couldn't compete. However, what we did there was restricted to attribute errors.\n\nIn any case, I agree that lazy error messages would be an improvment in the current situation.",
    "created_at": "2015-04-28T06:59:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235315",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:17" align="right">comment:17</div>

Note that a few years ago I introduced a lazy attribute error to be used in `sage.structure...`, that had a surprising impact on the performance of "real" computations. One of the tricks was to have precisely one instance of the lazy error message; so, one doesn't even lose time to create a new instance for each error being raised (it is only needed to set some cdef attribute of the lazy error message object).

We did some experiments whether lazy strings could achieve the same, but they couldn't compete. However, what we did there was restricted to attribute errors.

In any case, I agree that lazy error messages would be an improvment in the current situation.



---

archive/issue_comments_235316.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@simon-king-jena](#comment%3A17):\n> We did some experiments whether lazy strings could achieve the same, but they couldn't compete. However, what we did there was restricted to attribute errors.\n\nI'd imagine that's faster, but it also has different semantics: if you have a traceback in which several such error messages occur, you'd have inaccurate information. The `LazyFormat` on the other hand is basically a drop-in replacement and, if used properly (i.e., fresh object every time rather than copying) it's probably quite acceptable (see #14585 for improvements though).",
    "created_at": "2015-04-28T07:49:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235316",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@simon-king-jena](#comment%3A17):
> We did some experiments whether lazy strings could achieve the same, but they couldn't compete. However, what we did there was restricted to attribute errors.

I'd imagine that's faster, but it also has different semantics: if you have a traceback in which several such error messages occur, you'd have inaccurate information. The `LazyFormat` on the other hand is basically a drop-in replacement and, if used properly (i.e., fresh object every time rather than copying) it's probably quite acceptable (see #14585 for improvements though).



---

archive/issue_comments_235317.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI ran all doctests in `sage.modular` after doing\n\n```diff\n--- a/src/sage/modular/abvar/finite_subgroup.py\n+++ b/src/sage/modular/abvar/finite_subgroup.py\n@@ -651,6 +651,7 @@ class FiniteSubgroup(Module):\n             z = self.abelian_variety().vector_space()(x, check=check)\n             if z in self.lattice():\n                 return self.element_class(self, z, check=False)\n+        print('raising complicated error')\n         raise TypeError(\"cannot convert {!r} into {}\".format(x, self))\n \n \n```\nThis shows that the error is only thrown in the doctest of `_element_constructor_()` (this method) and in `__contains__()`, which is implemented in a non-standard way.  Hence I do not suspect string formatting is something we should worry about too much in this case.",
    "created_at": "2015-04-28T08:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235317",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:19" align="right">comment:19</div>

I ran all doctests in `sage.modular` after doing

```diff
--- a/src/sage/modular/abvar/finite_subgroup.py
+++ b/src/sage/modular/abvar/finite_subgroup.py
@@ -651,6 +651,7 @@ class FiniteSubgroup(Module):
             z = self.abelian_variety().vector_space()(x, check=check)
             if z in self.lattice():
                 return self.element_class(self, z, check=False)
+        print('raising complicated error')
         raise TypeError("cannot convert {!r} into {}".format(x, self))
 
 
```
This shows that the error is only thrown in the doctest of `_element_constructor_()` (this method) and in `__contains__()`, which is implemented in a non-standard way.  Hence I do not suspect string formatting is something we should worry about too much in this case.



---

archive/issue_comments_235318.json:
```json
{
    "body": "Changed commit from **[`256df27`](https://github.com/sagemath/sagetrac-mirror/commit/256df27b7063df421aea65472a8a1816f9956661)** to **[`ddbf101`](https://github.com/sagemath/sagetrac-mirror/commit/ddbf10189c1d49587e95ea410ce3dd6e3a3ecd3e)**",
    "created_at": "2015-04-28T12:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235318",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`256df27`](https://github.com/sagemath/sagetrac-mirror/commit/256df27b7063df421aea65472a8a1816f9956661)** to **[`ddbf101`](https://github.com/sagemath/sagetrac-mirror/commit/ddbf10189c1d49587e95ea410ce3dd6e3a3ecd3e)**



---

archive/issue_comments_235319.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddbf10189c1d49587e95ea410ce3dd6e3a3ecd3e\"><code>ddbf101</code></a></td><td><code>Trac 17543: simplify FiniteSubgroup._element_constructor_()</code></td></tr></table>\n",
    "created_at": "2015-04-28T12:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235319",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddbf10189c1d49587e95ea410ce3dd6e3a3ecd3e"><code>ddbf101</code></a></td><td><code>Trac 17543: simplify FiniteSubgroup._element_constructor_()</code></td></tr></table>




---

archive/issue_comments_235320.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe latest commit simplifies `FiniteSubgroup._element_constructor_()`.  The new version does not generate a formatted error message itself; the step of converting `x` into the lattice may still do this, as one of the doctests shows.",
    "created_at": "2015-04-28T12:09:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235320",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:21" align="right">comment:21</div>

The latest commit simplifies `FiniteSubgroup._element_constructor_()`.  The new version does not generate a formatted error message itself; the step of converting `x` into the lattice may still do this, as one of the doctests shows.



---

archive/issue_events_247755.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-04-28T12:09:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247755"
}
```



---

archive/issue_events_247756.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-04-28T12:09:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247756"
}
```



---

archive/issue_comments_235321.json:
```json
{
    "body": "Changed commit from **[`ddbf101`](https://github.com/sagemath/sagetrac-mirror/commit/ddbf10189c1d49587e95ea410ce3dd6e3a3ecd3e)** to **[`c3356eb`](https://github.com/sagemath/sagetrac-mirror/commit/c3356ebb98b93142a5a06720b66dfff14dd5f294)**",
    "created_at": "2015-05-01T02:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235321",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`ddbf101`](https://github.com/sagemath/sagetrac-mirror/commit/ddbf10189c1d49587e95ea410ce3dd6e3a3ecd3e)** to **[`c3356eb`](https://github.com/sagemath/sagetrac-mirror/commit/c3356ebb98b93142a5a06720b66dfff14dd5f294)**



---

archive/issue_comments_235322.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI'm okay with your latest round of changes. I moved some of the documentation around and added some extra (long) doctests. I'd be happy setting this to positive review as it currently stands (up to someone checking my changes).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e78e9820969b56435118de21f8d3a3ff798680a\"><code>4e78e98</code></a></td><td><code>Merge branch 'u/pbruin/17543-Module_old' of trac.sagemath.org:sage into u/tscrim/module_old-17543</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3356ebb98b93142a5a06720b66dfff14dd5f294\"><code>c3356eb</code></a></td><td><code>Added some doctests.</code></td></tr></table>\n",
    "created_at": "2015-05-01T02:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235322",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

I'm okay with your latest round of changes. I moved some of the documentation around and added some extra (long) doctests. I'd be happy setting this to positive review as it currently stands (up to someone checking my changes).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e78e9820969b56435118de21f8d3a3ff798680a"><code>4e78e98</code></a></td><td><code>Merge branch 'u/pbruin/17543-Module_old' of trac.sagemath.org:sage into u/tscrim/module_old-17543</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3356ebb98b93142a5a06720b66dfff14dd5f294"><code>c3356eb</code></a></td><td><code>Added some doctests.</code></td></tr></table>




---

archive/issue_comments_235323.json:
```json
{
    "body": "Changed reviewer from **Vincent Delecroix** to **Vincent Delecroix, Travis Scrimshaw**",
    "created_at": "2015-05-01T02:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235323",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Vincent Delecroix** to **Vincent Delecroix, Travis Scrimshaw**



---

archive/issue_comments_235324.json:
```json
{
    "body": "Changed branch from **[u/pbruin/17543-Module_old](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/17543-Module_old)** to **[u/tscrim/module_old-17543](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/module_old-17543)**",
    "created_at": "2015-05-01T02:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235324",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/pbruin/17543-Module_old](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/17543-Module_old)** to **[u/tscrim/module_old-17543](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/module_old-17543)**



---

archive/issue_comments_235325.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@tscrim](#comment%3A22):\n> I'm okay with your latest round of changes. I moved some of the documentation around and added some extra (long) doctests. I'd be happy setting this to positive review as it currently stands (up to someone checking my changes).\n\nOK, thanks!",
    "created_at": "2015-05-01T10:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235325",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@tscrim](#comment%3A22):
> I'm okay with your latest round of changes. I moved some of the documentation around and added some extra (long) doctests. I'd be happy setting this to positive review as it currently stands (up to someone checking my changes).

OK, thanks!



---

archive/issue_events_247757.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-05-01T10:59:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247757"
}
```



---

archive/issue_events_247758.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-05-01T10:59:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247758"
}
```



---

archive/issue_events_247759.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-02T14:22:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247759"
}
```



---

archive/issue_events_247760.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a799f5f53af3dd9aade59bf8c5e17a593f2e702f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-05-02T14:22:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17543#event-247760"
}
```



---

archive/issue_comments_235326.json:
```json
{
    "body": "Changed branch from **[u/tscrim/module_old-17543](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/module_old-17543)** to **[`c3356eb`](https://github.com/sagemath/sagetrac-mirror/commit/c3356ebb98b93142a5a06720b66dfff14dd5f294)**",
    "created_at": "2015-05-02T14:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17543#issuecomment-235326",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/tscrim/module_old-17543](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/module_old-17543)** to **[`c3356eb`](https://github.com/sagemath/sagetrac-mirror/commit/c3356ebb98b93142a5a06720b66dfff14dd5f294)**
