# Issue 17543: Move the last few module classes from Module_old to Module

archive/issues_017306.json:
```json
{
    "body": "After #10513, only the following module classes still inherit from `Module_old`, which is being deprecated:\n1. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`\n2. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`\n3. `sage.structure.formal_sum.FormalSums`\nThe goal of this ticket is to make these classes inherit from `Module` instead, to make them use the new coercion model, and to add a deprecation warning to `Module_old`.\n\nCC:  jpflori simonking\n\nKeywords: module coercion\n\nBranch/Commit: [c3356ebb98b93142a5a06720b66dfff14dd5f294](https://github.com/sagemath/sagetrac-mirror/commit/c3356ebb98b93142a5a06720b66dfff14dd5f294)\n\nReviewer: Vincent Delecroix, Travis Scrimshaw\n\nAuthor: Peter Bruin\n\nDependencies: #10513\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17543\n\n",
    "closed_at": "2015-05-02T14:22:28Z",
    "created_at": "2014-12-23T17:35:29Z",
    "labels": [
        "component: commutative algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Move the last few module classes from Module_old to Module",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17543",
    "user": "https://github.com/pjbruin"
}
```
After #10513, only the following module classes still inherit from `Module_old`, which is being deprecated:
1. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
2. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
3. `sage.structure.formal_sum.FormalSums`
The goal of this ticket is to make these classes inherit from `Module` instead, to make them use the new coercion model, and to add a deprecation warning to `Module_old`.

CC:  jpflori simonking

Keywords: module coercion

Branch/Commit: [c3356ebb98b93142a5a06720b66dfff14dd5f294](https://github.com/sagemath/sagetrac-mirror/commit/c3356ebb98b93142a5a06720b66dfff14dd5f294)

Reviewer: Vincent Delecroix, Travis Scrimshaw

Author: Peter Bruin

Dependencies: #10513

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17543





---

archive/issue_comments_302695.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#10513\"",
    "created_at": "2014-12-23T20:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302695",
    "user": "https://github.com/pjbruin"
}
```

Changing dependencies from "" to "#10513"



---

archive/issue_comments_302696.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n 1. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`\n 2. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`\n 3. `sage.structure.formal_sum.FormalSums`\n-The goal of this ticket is to make these inherit from `Module` instead.\n+The goal of this ticket is to make these classes inherit from `Module` instead, to make them use the new coercion model, and to add a deprecation warning to `Module_old`.\n``````\n",
    "created_at": "2014-12-30T11:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302696",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 1. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
 2. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
 3. `sage.structure.formal_sum.FormalSums`
-The goal of this ticket is to make these inherit from `Module` instead.
+The goal of this ticket is to make these classes inherit from `Module` instead, to make them use the new coercion model, and to add a deprecation warning to `Module_old`.
``````




---

archive/issue_comments_302697.json:
```json
{
    "body": "Changing branch from \"\" to \"u/pbruin/17543-Module_old\"",
    "created_at": "2014-12-30T11:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302697",
    "user": "https://github.com/pjbruin"
}
```

Changing branch from "" to "u/pbruin/17543-Module_old"



---

archive/issue_comments_302698.json:
```json
{
    "body": "Changing author from \"\" to \"Peter Bruin\"",
    "created_at": "2014-12-30T11:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302698",
    "user": "https://github.com/pjbruin"
}
```

Changing author from "" to "Peter Bruin"



---

archive/issue_comments_302699.json:
```json
{
    "body": "Changing commit from \"\" to \"d6b5edb6436c920b87afd814878e0ecc8933eb2b\"",
    "created_at": "2014-12-30T11:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302699",
    "user": "https://github.com/pjbruin"
}
```

Changing commit from "" to "d6b5edb6436c920b87afd814878e0ecc8933eb2b"



---

archive/issue_comments_302700.json:
```json
{
    "body": "Changing keywords from \"module\" to \"module coercion\".",
    "created_at": "2014-12-30T11:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302700",
    "user": "https://github.com/pjbruin"
}
```

Changing keywords from "module" to "module coercion".



---

archive/issue_comments_302701.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-30T11:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302701",
    "user": "https://github.com/pjbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_302702.json:
```json
{
    "body": "<a id='comment:3'></a>\nMany conflicts on the last beta that I was not able to deal with completely. Moreover, I guess that it would also be safer to rebase over #17585 and #17850 that should be in sage-6.6.beta2. I am willing to review it if you find time to do the rebase after sage-6.6.beta2 is out.\n\nVincent",
    "created_at": "2015-02-28T19:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302702",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>
Many conflicts on the last beta that I was not able to deal with completely. Moreover, I guess that it would also be safer to rebase over #17585 and #17850 that should be in sage-6.6.beta2. I am willing to review it if you find time to do the rebase after sage-6.6.beta2 is out.

Vincent



---

archive/issue_comments_302703.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-28T19:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302703",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_302704.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [vdelecroix](#comment%3A3):\n> Many conflicts on the last beta that I was not able to deal with completely. Moreover, I guess that it would also be safer to rebase over #17585 and #17850 that should be in sage-6.6.beta2. I am willing to review it if you find time to do the rebase after sage-6.6.beta2 is out.\n\nI think it is best to wait until #10513 is merged.",
    "created_at": "2015-02-28T21:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302704",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:4'></a>
Replying to [vdelecroix](#comment%3A3):
> Many conflicts on the last beta that I was not able to deal with completely. Moreover, I guess that it would also be safer to rebase over #17585 and #17850 that should be in sage-6.6.beta2. I am willing to review it if you find time to do the rebase after sage-6.6.beta2 is out.

I think it is best to wait until #10513 is merged.



---

archive/issue_comments_302705.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                          |                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[b1287e7](https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab)|`Merge branch 'ticket/17561' into ticket/10513`|\n|[f0957f0](https://github.com/sagemath/sagetrac-mirror/commit/f0957f0ab545bab9d405fadbe1fdffdbd9e39380)|`Trac 10513: use FreeModules(base_ring.category()) instead of FreeModules(base_ring)`|\n|[6b63026](https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b)|`Trac 10513: method FreeModule_generic.list() to replace FiniteEnumeratedSets magic`|\n|[6d5aaa1](https://github.com/sagemath/sagetrac-mirror/commit/6d5aaa146b24ce0af273d1449ad7568ad383b1a2)|`Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules`|\n|[d1db7ea](https://github.com/sagemath/sagetrac-mirror/commit/d1db7ea795c2b79cd7df250a2e7e005ac2375caf)|`Trac 10513: construct coerce_map as default conversion map instead of matrix morphism`|\n|[7b09742](https://github.com/sagemath/sagetrac-mirror/commit/7b09742f58b3d96f4cf0f6573d166bdca3207c1b)|`Trac 10513: checking if element_class is a method is no longer necessary`|\n|[ac685ec](https://github.com/sagemath/sagetrac-mirror/commit/ac685ec9aeb5f89dce2c6e6bcd97e795cffa0ba6)|`Trac 10513: update doctests`|\n|[ac70986](https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a)|`Trac 10513: small documentation improvement`|\n|[dd93dea](https://github.com/sagemath/sagetrac-mirror/commit/dd93dea032ac09046c7ed6e30a15ac9e66648dde)|`Merge branch 'ticket/10513-coercion_and_categories_for_modules' into ticket/17543-Module_old`|\n|[7f8a5de](https://github.com/sagemath/sagetrac-mirror/commit/7f8a5de6931f2af8e5bafadd7ebcc2d5d9f25ded)|`Trac 17543: remove unnecessary check`|",
    "created_at": "2015-03-20T23:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302705",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                          |                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[b1287e7](https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab)|`Merge branch 'ticket/17561' into ticket/10513`|
|[f0957f0](https://github.com/sagemath/sagetrac-mirror/commit/f0957f0ab545bab9d405fadbe1fdffdbd9e39380)|`Trac 10513: use FreeModules(base_ring.category()) instead of FreeModules(base_ring)`|
|[6b63026](https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b)|`Trac 10513: method FreeModule_generic.list() to replace FiniteEnumeratedSets magic`|
|[6d5aaa1](https://github.com/sagemath/sagetrac-mirror/commit/6d5aaa146b24ce0af273d1449ad7568ad383b1a2)|`Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules`|
|[d1db7ea](https://github.com/sagemath/sagetrac-mirror/commit/d1db7ea795c2b79cd7df250a2e7e005ac2375caf)|`Trac 10513: construct coerce_map as default conversion map instead of matrix morphism`|
|[7b09742](https://github.com/sagemath/sagetrac-mirror/commit/7b09742f58b3d96f4cf0f6573d166bdca3207c1b)|`Trac 10513: checking if element_class is a method is no longer necessary`|
|[ac685ec](https://github.com/sagemath/sagetrac-mirror/commit/ac685ec9aeb5f89dce2c6e6bcd97e795cffa0ba6)|`Trac 10513: update doctests`|
|[ac70986](https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a)|`Trac 10513: small documentation improvement`|
|[dd93dea](https://github.com/sagemath/sagetrac-mirror/commit/dd93dea032ac09046c7ed6e30a15ac9e66648dde)|`Merge branch 'ticket/10513-coercion_and_categories_for_modules' into ticket/17543-Module_old`|
|[7f8a5de](https://github.com/sagemath/sagetrac-mirror/commit/7f8a5de6931f2af8e5bafadd7ebcc2d5d9f25ded)|`Trac 17543: remove unnecessary check`|



---

archive/issue_comments_302706.json:
```json
{
    "body": "Changing commit from \"d6b5edb6436c920b87afd814878e0ecc8933eb2b\" to \"7f8a5de6931f2af8e5bafadd7ebcc2d5d9f25ded\"",
    "created_at": "2015-03-20T23:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302706",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d6b5edb6436c920b87afd814878e0ecc8933eb2b" to "7f8a5de6931f2af8e5bafadd7ebcc2d5d9f25ded"



---

archive/issue_comments_302707.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-03-20T23:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302707",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302708.json:
```json
{
    "body": "<a id='comment:6'></a>\nAfter resolving the merge conflicts for #10513 there was only one left on this ticket.",
    "created_at": "2015-03-20T23:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302708",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:6'></a>
After resolving the merge conflicts for #10513 there was only one left on this ticket.



---

archive/issue_comments_302709.json:
```json
{
    "body": "<a id='comment:7'></a>\nHi Peter,\n\nI do only have very minor points.\n\nThis error message is not very nice\n\n```\n\"x does not define an element of self\"\n```\nI would rather be more explicit\n\n```\n\"x (={}) does not define an element of {}\".format(x, self)\n```\n(I notice that you are not responsible for that)\n\nWhy did you create the method `generator_orders`? Why not instead replace the code in `abelian_iterator`?\n\n```diff\ndiff --git a/src/sage/structure/gens_py.py b/src/sage/structure/gens_py.py\nindex c272503..e22a8a2 100644\n--- a/src/sage/structure/gens_py.py\n+++ b/src/sage/structure/gens_py.py\n@@ -52,7 +52,7 @@ def abelian_iterator(M):\n         yield M(0)\n         return\n \n-    stop = list(M.generator_orders())\n+    stop = [g.additive_order() for g in G]\n     for i in range(len(stop)):\n         if stop[i] is infinity:\n             raise ArithmeticError(\"%s is not finite.\"%M)\n```\n\n## not for this ticket\n\nDo you know why `FormalSums` is in `sage.structure`? It makes no sense to me. It should rather be in `sage.modules`. Moreover it intersects very much with the combinatorial free modules\n\n```\nsage: C = CombinatorialFreeModule(ZZ,GF(7))\nsage: C.an_element()\n2*B[0] + 2*B[1] + 3*B[2]\n```\nWhat do you think? \n\nwhat `gens_py.py` is doing in `sage.structure`?! I would rather put it in `sage.combinat` or `sage.misc.`",
    "created_at": "2015-04-26T14:12:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302709",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>
Hi Peter,

I do only have very minor points.

This error message is not very nice

```
"x does not define an element of self"
```
I would rather be more explicit

```
"x (={}) does not define an element of {}".format(x, self)
```
(I notice that you are not responsible for that)

Why did you create the method `generator_orders`? Why not instead replace the code in `abelian_iterator`?

```diff
diff --git a/src/sage/structure/gens_py.py b/src/sage/structure/gens_py.py
index c272503..e22a8a2 100644
--- a/src/sage/structure/gens_py.py
+++ b/src/sage/structure/gens_py.py
@@ -52,7 +52,7 @@ def abelian_iterator(M):
         yield M(0)
         return
 
-    stop = list(M.generator_orders())
+    stop = [g.additive_order() for g in G]
     for i in range(len(stop)):
         if stop[i] is infinity:
             raise ArithmeticError("%s is not finite."%M)
```

## not for this ticket

Do you know why `FormalSums` is in `sage.structure`? It makes no sense to me. It should rather be in `sage.modules`. Moreover it intersects very much with the combinatorial free modules

```
sage: C = CombinatorialFreeModule(ZZ,GF(7))
sage: C.an_element()
2*B[0] + 2*B[1] + 3*B[2]
```
What do you think? 

what `gens_py.py` is doing in `sage.structure`?! I would rather put it in `sage.combinat` or `sage.misc.`



---

archive/issue_comments_302710.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-04-26T14:12:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302710",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_302711.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [vdelecroix](#comment%3A7):\n> {{{\n> \"x (={}) does not define an element of {}\".format(x, self)\n> }}}\n\n\nEven better: `\"{!r} does not define an element of {}\".format(x, self)`",
    "created_at": "2015-04-26T15:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302711",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
Replying to [vdelecroix](#comment%3A7):
> {{{
> "x (={}) does not define an element of {}".format(x, self)
> }}}


Even better: `"{!r} does not define an element of {}".format(x, self)`



---

archive/issue_comments_302712.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[256df27](https://github.com/sagemath/sagetrac-mirror/commit/256df27b7063df421aea65472a8a1816f9956661)|`Trac 17543: reviewer comments`|",
    "created_at": "2015-04-27T22:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302712",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[256df27](https://github.com/sagemath/sagetrac-mirror/commit/256df27b7063df421aea65472a8a1816f9956661)|`Trac 17543: reviewer comments`|



---

archive/issue_comments_302713.json:
```json
{
    "body": "Changing commit from \"7f8a5de6931f2af8e5bafadd7ebcc2d5d9f25ded\" to \"256df27b7063df421aea65472a8a1816f9956661\"",
    "created_at": "2015-04-27T22:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302713",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7f8a5de6931f2af8e5bafadd7ebcc2d5d9f25ded" to "256df27b7063df421aea65472a8a1816f9956661"



---

archive/issue_comments_302714.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [vdelecroix](#comment%3A7):\n> This error message is not very nice\n> \n> ```\n> \"x does not define an element of self\"\n> ```\n\nI changed to `\"cannot convert {!r} into {}\".format(x, self)` (also because it sounds nicer: perhaps the user passes an object that makes mathematical sense but for which conversion does not work for some reason).\n> Why did you create the method `generator_orders`? Why not instead replace the code in `abelian_iterator`?\n\nGood idea; I changed this as you suggested.  Maybe `generator_orders()` can be regarded as belonging to the obsolete `ParentWithAdditiveAbelianGens`.\n\n> == not for this ticket ==\n> \n> Do you know why `FormalSums` is in `sage.structure`? It makes no sense to me. It should rather be in `sage.modules`.\n\nYes, it would certainly makes more sense for it to be there.\n> what `gens_py.py` is doing in `sage.structure`?! I would rather put it in `sage.combinat` or `sage.misc.`\n\nProbably because it is only used in `sage.structure.parent_gens`...",
    "created_at": "2015-04-27T23:00:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302714",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:11'></a>
Replying to [vdelecroix](#comment%3A7):
> This error message is not very nice
> 
> ```
> "x does not define an element of self"
> ```

I changed to `"cannot convert {!r} into {}".format(x, self)` (also because it sounds nicer: perhaps the user passes an object that makes mathematical sense but for which conversion does not work for some reason).
> Why did you create the method `generator_orders`? Why not instead replace the code in `abelian_iterator`?

Good idea; I changed this as you suggested.  Maybe `generator_orders()` can be regarded as belonging to the obsolete `ParentWithAdditiveAbelianGens`.

> == not for this ticket ==
> 
> Do you know why `FormalSums` is in `sage.structure`? It makes no sense to me. It should rather be in `sage.modules`.

Yes, it would certainly makes more sense for it to be there.
> what `gens_py.py` is doing in `sage.structure`?! I would rather put it in `sage.combinat` or `sage.misc.`

Probably because it is only used in `sage.structure.parent_gens`...



---

archive/issue_comments_302715.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-04-27T23:01:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302715",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_302716.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [pbruin](#comment%3A11):\n> I changed to `\"cannot convert {!r} into {}\".format(x, self)` (also because it sounds nicer: perhaps the user passes an object that makes mathematical sense but for which conversion does not work for some reason).\n\n\nCaveat: In Python, exception paths can end up being pretty common. For instance, the coercion framework will frequently use \"leap before you look\", relying on catching the exception if that happens. With the line above you can end up with expensive strings processing in a situation where the string never gets displayed. I haven't checked whether that's actually the case for this string and it's a reason to be conservative with constructing complicated error strings. An alternative (if it's necessary) is to use \"lazy\" strings, where the string reps of the constituents are only asked if the \"lazy string\" itself is asked for its representation.\n\n(mind you, our current object for this, `LazyFormat`, is only faster when used with rather complicated parameters, but if we ever find that error message construction is a bottleneck, we could probably optimize `LazyFormat` to really become competitive)",
    "created_at": "2015-04-28T04:21:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302716",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:13'></a>
Replying to [pbruin](#comment%3A11):
> I changed to `"cannot convert {!r} into {}".format(x, self)` (also because it sounds nicer: perhaps the user passes an object that makes mathematical sense but for which conversion does not work for some reason).


Caveat: In Python, exception paths can end up being pretty common. For instance, the coercion framework will frequently use "leap before you look", relying on catching the exception if that happens. With the line above you can end up with expensive strings processing in a situation where the string never gets displayed. I haven't checked whether that's actually the case for this string and it's a reason to be conservative with constructing complicated error strings. An alternative (if it's necessary) is to use "lazy" strings, where the string reps of the constituents are only asked if the "lazy string" itself is asked for its representation.

(mind you, our current object for this, `LazyFormat`, is only faster when used with rather complicated parameters, but if we ever find that error message construction is a bottleneck, we could probably optimize `LazyFormat` to really become competitive)



---

archive/issue_comments_302717.json:
```json
{
    "body": "<a id='comment:14'></a>\nTwo patchbots are not happy but for no serious reason. The strangely failing doctest on eddy is perfectly fine on my computer.\n\nGood to go!\n\nVincent",
    "created_at": "2015-04-28T06:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302717",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'></a>
Two patchbots are not happy but for no serious reason. The strangely failing doctest on eddy is perfectly fine on my computer.

Good to go!

Vincent



---

archive/issue_comments_302718.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2015-04-28T06:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302718",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_302719.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-04-28T06:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302719",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_302720.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [nbruin](#comment%3A13):\n> Replying to [pbruin](#comment%3A11):\n> > I changed to `\"cannot convert {!r} into {}\".format(x, self)` (also because it sounds nicer: perhaps the user passes an object that makes mathematical sense but for which conversion does not work for some reason).\n\n> \n> Caveat: In Python, exception paths can end up being pretty common. For instance, the coercion framework will frequently use \"leap before you look\", relying on catching the exception if that happens. With the line above you can end up with expensive strings processing in a situation where the string never gets displayed. I haven't checked whether that's actually the case for this string and it's a reason to be conservative with constructing complicated error strings. An alternative (if it's necessary) is to use \"lazy\" strings, where the string reps of the constituents are only asked if the \"lazy string\" itself is asked for its representation.\n> \n> (mind you, our current object for this, `LazyFormat`, is only faster when used with rather complicated parameters, but if we ever find that error message construction is a bottleneck, we could probably optimize `LazyFormat` to really become competitive)\n\n\nWould be cool that string formatting to be fast and uniformized in errors. Why Python does not have a native solution for that?! Right now, I do prefer clear error messages instead of potentially faster coercion discovery.\n\nVincent",
    "created_at": "2015-04-28T06:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302720",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>
Replying to [nbruin](#comment%3A13):
> Replying to [pbruin](#comment%3A11):
> > I changed to `"cannot convert {!r} into {}".format(x, self)` (also because it sounds nicer: perhaps the user passes an object that makes mathematical sense but for which conversion does not work for some reason).

> 
> Caveat: In Python, exception paths can end up being pretty common. For instance, the coercion framework will frequently use "leap before you look", relying on catching the exception if that happens. With the line above you can end up with expensive strings processing in a situation where the string never gets displayed. I haven't checked whether that's actually the case for this string and it's a reason to be conservative with constructing complicated error strings. An alternative (if it's necessary) is to use "lazy" strings, where the string reps of the constituents are only asked if the "lazy string" itself is asked for its representation.
> 
> (mind you, our current object for this, `LazyFormat`, is only faster when used with rather complicated parameters, but if we ever find that error message construction is a bottleneck, we could probably optimize `LazyFormat` to really become competitive)


Would be cool that string formatting to be fast and uniformized in errors. Why Python does not have a native solution for that?! Right now, I do prefer clear error messages instead of potentially faster coercion discovery.

Vincent



---

archive/issue_comments_302721.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [vdelecroix](#comment%3A15):\n> Would be cool that string formatting to be fast and uniformized in errors. Why Python does not have a native solution for that?! Right now, I do prefer clear error messages instead of potentially faster coercion discovery.\n\n\nI was wrong in my timing. The difference is considerable even here. Taking one of the examples from the documentation:\n\n```\nsage: from sage.misc.lazy_format import LazyFormat\nsage: J = J0(23)\nsage: G = J.torsion_subgroup(11)\nsage: G(J.torsion_subgroup(3).0)\nsage: self=G\nsage: x=J.torsion_subgroup(3).0\nsage: %timeit \"cannot convert {!r} into {}\".format(x, self)\n10000 loops, best of 3: 38.4 \u00b5s per loop\nsage: %timeit \"TypeError: cannot convert %s into %s\"%(x,self)\n10000 loops, best of 3: 33.2 \u00b5s per loop\nsage: %timeit LazyFormat(\"TypeError: cannot convert %s into %s\")%(x,self)\n100000 loops, best of 3: 1.74 \u00b5s per loop\n```\n\nI think you should consider putting LazyFormat in the error messages (it's basically a drop-in replacement) or argue that the relevant error messages are only constructed with really cheap arguments in time-critical situations, or that these error messages never get raised in time-critical situations.",
    "created_at": "2015-04-28T06:30:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302721",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:16'></a>
Replying to [vdelecroix](#comment%3A15):
> Would be cool that string formatting to be fast and uniformized in errors. Why Python does not have a native solution for that?! Right now, I do prefer clear error messages instead of potentially faster coercion discovery.


I was wrong in my timing. The difference is considerable even here. Taking one of the examples from the documentation:

```
sage: from sage.misc.lazy_format import LazyFormat
sage: J = J0(23)
sage: G = J.torsion_subgroup(11)
sage: G(J.torsion_subgroup(3).0)
sage: self=G
sage: x=J.torsion_subgroup(3).0
sage: %timeit "cannot convert {!r} into {}".format(x, self)
10000 loops, best of 3: 38.4 µs per loop
sage: %timeit "TypeError: cannot convert %s into %s"%(x,self)
10000 loops, best of 3: 33.2 µs per loop
sage: %timeit LazyFormat("TypeError: cannot convert %s into %s")%(x,self)
100000 loops, best of 3: 1.74 µs per loop
```

I think you should consider putting LazyFormat in the error messages (it's basically a drop-in replacement) or argue that the relevant error messages are only constructed with really cheap arguments in time-critical situations, or that these error messages never get raised in time-critical situations.



---

archive/issue_comments_302722.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2015-04-28T06:30:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302722",
    "user": "https://github.com/nbruin"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_302723.json:
```json
{
    "body": "<a id='comment:17'></a>\nNote that a few years ago I introduced a lazy attribute error to be used in `sage.structure...`, that had a surprising impact on the performance of \"real\" computations. One of the tricks was to have precisely one instance of the lazy error message; so, one doesn't even lose time to create a new instance for each error being raised (it is only needed to set some cdef attribute of the lazy error message object).\n\nWe did some experiments whether lazy strings could achieve the same, but they couldn't compete. However, what we did there was restricted to attribute errors.\n\nIn any case, I agree that lazy error messages would be an improvment in the current situation.",
    "created_at": "2015-04-28T06:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302723",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:17'></a>
Note that a few years ago I introduced a lazy attribute error to be used in `sage.structure...`, that had a surprising impact on the performance of "real" computations. One of the tricks was to have precisely one instance of the lazy error message; so, one doesn't even lose time to create a new instance for each error being raised (it is only needed to set some cdef attribute of the lazy error message object).

We did some experiments whether lazy strings could achieve the same, but they couldn't compete. However, what we did there was restricted to attribute errors.

In any case, I agree that lazy error messages would be an improvment in the current situation.



---

archive/issue_comments_302724.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [SimonKing](#comment%3A17):\n> We did some experiments whether lazy strings could achieve the same, but they couldn't compete. However, what we did there was restricted to attribute errors.\n\nI'd imagine that's faster, but it also has different semantics: if you have a traceback in which several such error messages occur, you'd have inaccurate information. The `LazyFormat` on the other hand is basically a drop-in replacement and, if used properly (i.e., fresh object every time rather than copying) it's probably quite acceptable (see #14585 for improvements though).",
    "created_at": "2015-04-28T07:49:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302724",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:18'></a>
Replying to [SimonKing](#comment%3A17):
> We did some experiments whether lazy strings could achieve the same, but they couldn't compete. However, what we did there was restricted to attribute errors.

I'd imagine that's faster, but it also has different semantics: if you have a traceback in which several such error messages occur, you'd have inaccurate information. The `LazyFormat` on the other hand is basically a drop-in replacement and, if used properly (i.e., fresh object every time rather than copying) it's probably quite acceptable (see #14585 for improvements though).



---

archive/issue_comments_302725.json:
```json
{
    "body": "<a id='comment:19'></a>\nI ran all doctests in `sage.modular` after doing\n\n```diff\n--- a/src/sage/modular/abvar/finite_subgroup.py\n+++ b/src/sage/modular/abvar/finite_subgroup.py\n@@ -651,6 +651,7 @@ class FiniteSubgroup(Module):\n             z = self.abelian_variety().vector_space()(x, check=check)\n             if z in self.lattice():\n                 return self.element_class(self, z, check=False)\n+        print('raising complicated error')\n         raise TypeError(\"cannot convert {!r} into {}\".format(x, self))\n \n \n```\nThis shows that the error is only thrown in the doctest of `_element_constructor_()` (this method) and in `__contains__()`, which is implemented in a non-standard way.  Hence I do not suspect string formatting is something we should worry about too much in this case.",
    "created_at": "2015-04-28T08:57:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302725",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:19'></a>
I ran all doctests in `sage.modular` after doing

```diff
--- a/src/sage/modular/abvar/finite_subgroup.py
+++ b/src/sage/modular/abvar/finite_subgroup.py
@@ -651,6 +651,7 @@ class FiniteSubgroup(Module):
             z = self.abelian_variety().vector_space()(x, check=check)
             if z in self.lattice():
                 return self.element_class(self, z, check=False)
+        print('raising complicated error')
         raise TypeError("cannot convert {!r} into {}".format(x, self))
 
 
```
This shows that the error is only thrown in the doctest of `_element_constructor_()` (this method) and in `__contains__()`, which is implemented in a non-standard way.  Hence I do not suspect string formatting is something we should worry about too much in this case.



---

archive/issue_comments_302726.json:
```json
{
    "body": "Changing commit from \"256df27b7063df421aea65472a8a1816f9956661\" to \"ddbf10189c1d49587e95ea410ce3dd6e3a3ecd3e\"",
    "created_at": "2015-04-28T12:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302726",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "256df27b7063df421aea65472a8a1816f9956661" to "ddbf10189c1d49587e95ea410ce3dd6e3a3ecd3e"



---

archive/issue_comments_302727.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|\n|[ddbf101](https://github.com/sagemath/sagetrac-mirror/commit/ddbf10189c1d49587e95ea410ce3dd6e3a3ecd3e)|`Trac 17543: simplify FiniteSubgroup._element_constructor_()`|",
    "created_at": "2015-04-28T12:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
|[ddbf101](https://github.com/sagemath/sagetrac-mirror/commit/ddbf10189c1d49587e95ea410ce3dd6e3a3ecd3e)|`Trac 17543: simplify FiniteSubgroup._element_constructor_()`|



---

archive/issue_comments_302728.json:
```json
{
    "body": "<a id='comment:21'></a>\nThe latest commit simplifies `FiniteSubgroup._element_constructor_()`.  The new version does not generate a formatted error message itself; the step of converting `x` into the lattice may still do this, as one of the doctests shows.",
    "created_at": "2015-04-28T12:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302728",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:21'></a>
The latest commit simplifies `FiniteSubgroup._element_constructor_()`.  The new version does not generate a formatted error message itself; the step of converting `x` into the lattice may still do this, as one of the doctests shows.



---

archive/issue_comments_302729.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-04-28T12:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302729",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_302730.json:
```json
{
    "body": "Changing commit from \"ddbf10189c1d49587e95ea410ce3dd6e3a3ecd3e\" to \"c3356ebb98b93142a5a06720b66dfff14dd5f294\"",
    "created_at": "2015-05-01T02:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302730",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "ddbf10189c1d49587e95ea410ce3dd6e3a3ecd3e" to "c3356ebb98b93142a5a06720b66dfff14dd5f294"



---

archive/issue_comments_302731.json:
```json
{
    "body": "<a id='comment:22'></a>\nI'm okay with your latest round of changes. I moved some of the documentation around and added some extra (long) doctests. I'd be happy setting this to positive review as it currently stands (up to someone checking my changes).\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|\n|[4e78e98](https://github.com/sagemath/sagetrac-mirror/commit/4e78e9820969b56435118de21f8d3a3ff798680a)|`Merge branch 'u/pbruin/17543-Module_old' of trac.sagemath.org:sage into u/tscrim/module_old-17543`|\n|[c3356eb](https://github.com/sagemath/sagetrac-mirror/commit/c3356ebb98b93142a5a06720b66dfff14dd5f294)|`Added some doctests.`|",
    "created_at": "2015-05-01T02:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302731",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>
I'm okay with your latest round of changes. I moved some of the documentation around and added some extra (long) doctests. I'd be happy setting this to positive review as it currently stands (up to someone checking my changes).

---
New commits:
|                                                                                                                                          |                                                                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
|[4e78e98](https://github.com/sagemath/sagetrac-mirror/commit/4e78e9820969b56435118de21f8d3a3ff798680a)|`Merge branch 'u/pbruin/17543-Module_old' of trac.sagemath.org:sage into u/tscrim/module_old-17543`|
|[c3356eb](https://github.com/sagemath/sagetrac-mirror/commit/c3356ebb98b93142a5a06720b66dfff14dd5f294)|`Added some doctests.`|



---

archive/issue_comments_302732.json:
```json
{
    "body": "Changing reviewer from \"Vincent Delecroix\" to \"Vincent Delecroix, Travis Scrimshaw\"",
    "created_at": "2015-05-01T02:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302732",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "Vincent Delecroix" to "Vincent Delecroix, Travis Scrimshaw"



---

archive/issue_comments_302733.json:
```json
{
    "body": "Changing branch from \"u/pbruin/17543-Module_old\" to \"u/tscrim/module_old-17543\"",
    "created_at": "2015-05-01T02:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302733",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "u/pbruin/17543-Module_old" to "u/tscrim/module_old-17543"



---

archive/issue_comments_302734.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [tscrim](#comment%3A22):\n> I'm okay with your latest round of changes. I moved some of the documentation around and added some extra (long) doctests. I'd be happy setting this to positive review as it currently stands (up to someone checking my changes).\n\nOK, thanks!",
    "created_at": "2015-05-01T10:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302734",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:23'></a>
Replying to [tscrim](#comment%3A22):
> I'm okay with your latest round of changes. I moved some of the documentation around and added some extra (long) doctests. I'd be happy setting this to positive review as it currently stands (up to someone checking my changes).

OK, thanks!



---

archive/issue_comments_302735.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-01T10:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302735",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_302736.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-02T14:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302736",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_057294.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-02T14:22:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17543#event-57294"
}
```



---

archive/issue_comments_302737.json:
```json
{
    "body": "Changing branch from \"u/tscrim/module_old-17543\" to \"c3356ebb98b93142a5a06720b66dfff14dd5f294\"",
    "created_at": "2015-05-02T14:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17543#issuecomment-302737",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/tscrim/module_old-17543" to "c3356ebb98b93142a5a06720b66dfff14dd5f294"
