# Issue 17560: Implement (quantum) Mobius algebras

archive/issues_017323.json:
```json
{
    "assignees": [],
    "body": "Based on *The Kazhdan-Lusztig polynomial of a matroid* by Ben Elias, Nicholas Proudfoot, and Max Wakefield by recently posted to the arXiv (1412.7408), this implements their results for general graded lattices. In particular, this implements the Mobius algebra, and it's q-deformation (which I've coined as the quantum Mobius algebra). This also implements KL polynomials for general graded posets.\n\nIn particular, you can use #14786 and recover the KL polynomials. However the code in its current state is quite slow (most of the time is spent constructing the digraphs for the posets), but faster implementations can be done on followup tickets.\n\n\nAssignee: **sage-combinat**\n\nCC:  sage-combinat\n\nKeywords: **posets, mobius algebra**\n\nBranch/Commit: **[461c314](https://github.com/sagemath/sagetrac-mirror/commit/461c314c31439b56b829bf7a439d781507bb6da2)**\n\nReviewer: **Kevin Dilks**\n\nAuthor: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17560_\n\n",
    "closed_at": "2015-10-18T19:11:28Z",
    "created_at": "2014-12-28T04:49:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement (quantum) Mobius algebras",
    "type": "issue",
    "updated_at": "2015-10-18T19:11:28Z",
    "url": "https://github.com/sagemath/sage/issues/17560",
    "user": "https://github.com/tscrim"
}
```
Based on *The Kazhdan-Lusztig polynomial of a matroid* by Ben Elias, Nicholas Proudfoot, and Max Wakefield by recently posted to the arXiv (1412.7408), this implements their results for general graded lattices. In particular, this implements the Mobius algebra, and it's q-deformation (which I've coined as the quantum Mobius algebra). This also implements KL polynomials for general graded posets.

In particular, you can use #14786 and recover the KL polynomials. However the code in its current state is quite slow (most of the time is spent constructing the digraphs for the posets), but faster implementations can be done on followup tickets.


Assignee: **sage-combinat**

CC:  sage-combinat

Keywords: **posets, mobius algebra**

Branch/Commit: **[461c314](https://github.com/sagemath/sagetrac-mirror/commit/461c314c31439b56b829bf7a439d781507bb6da2)**

Reviewer: **Kevin Dilks**

Author: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/17560_





---

archive/issue_events_232585.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-12-28T04:49:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232585"
}
```



---

archive/issue_events_232586.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-12-28T04:49:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232586"
}
```



---

archive/issue_events_232587.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-12-28T04:49:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232587"
}
```



---

archive/issue_events_232588.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-12-28T04:49:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232588"
}
```



---

archive/issue_events_232589.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-12-28T04:50:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232589"
}
```



---

archive/issue_comments_238201.json:
```json
{
    "body": "Branch: **[public/combinat/mobius_algebras-17560](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/mobius_algebras-17560)**",
    "created_at": "2014-12-28T04:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238201",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/combinat/mobius_algebras-17560](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/mobius_algebras-17560)**



---

archive/issue_comments_238202.json:
```json
{
    "body": "Commit: **[65af64e](https://github.com/sagemath/sagetrac-mirror/commit/65af64ebcf0012a5cb5dfdb2bdacff93464deccc)**",
    "created_at": "2014-12-28T04:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238202",
    "user": "https://github.com/tscrim"
}
```

Commit: **[65af64e](https://github.com/sagemath/sagetrac-mirror/commit/65af64ebcf0012a5cb5dfdb2bdacff93464deccc)**



---

archive/issue_comments_238203.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65af64ebcf0012a5cb5dfdb2bdacff93464deccc\">65af64e</a></td><td><code>Added (quantum) Mobius algebras and KL polynomials of posets.</code></td></tr></table>\n",
    "created_at": "2014-12-28T04:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238203",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65af64ebcf0012a5cb5dfdb2bdacff93464deccc">65af64e</a></td><td><code>Added (quantum) Mobius algebras and KL polynomials of posets.</code></td></tr></table>




---

archive/issue_comments_238204.json:
```json
{
    "body": "Changed commit from **[65af64e](https://github.com/sagemath/sagetrac-mirror/commit/65af64ebcf0012a5cb5dfdb2bdacff93464deccc)** to **[852fc7b](https://github.com/sagemath/sagetrac-mirror/commit/852fc7b91ce687cfe2e92fb501f9a034170c47cc)**",
    "created_at": "2015-05-01T03:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238204",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[65af64e](https://github.com/sagemath/sagetrac-mirror/commit/65af64ebcf0012a5cb5dfdb2bdacff93464deccc)** to **[852fc7b](https://github.com/sagemath/sagetrac-mirror/commit/852fc7b91ce687cfe2e92fb501f9a034170c47cc)**



---

archive/issue_comments_238205.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2dd8333ed6ba20574dfbfcbc94b703dce3614163\">2dd8333</a></td><td><code>Merge branch 'public/combinat/mobius_algebras-17560' of trac.sagemath.org:sage into public/combinat/mobius_algebras-17560</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/852fc7b91ce687cfe2e92fb501f9a034170c47cc\">852fc7b</a></td><td><code>Adding to the catalog and fixing bad mergeing.</code></td></tr></table>\n",
    "created_at": "2015-05-01T03:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238205",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>Comment 2:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2dd8333ed6ba20574dfbfcbc94b703dce3614163">2dd8333</a></td><td><code>Merge branch 'public/combinat/mobius_algebras-17560' of trac.sagemath.org:sage into public/combinat/mobius_algebras-17560</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/852fc7b91ce687cfe2e92fb501f9a034170c47cc">852fc7b</a></td><td><code>Adding to the catalog and fixing bad mergeing.</code></td></tr></table>




---

archive/issue_events_232590.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-08-09T12:23:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232590"
}
```



---

archive/issue_events_232591.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-08-09T12:23:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232591"
}
```



---

archive/issue_comments_238206.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nneeds rebase, does not apply",
    "created_at": "2015-08-09T12:23:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238206",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'>Comment 3:</a>
needs rebase, does not apply



---

archive/issue_comments_238207.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d534612a521d26d7f040f955bfcbfcc02487453\">7d53461</a></td><td><code>Merge branch 'public/combinat/mobius_algebras-17560' of git://trac.sagemath.org/sage into public/combinat/mobius_algebras-17560</code></td></tr></table>\n",
    "created_at": "2015-09-02T14:35:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238207",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>Comment 4:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d534612a521d26d7f040f955bfcbfcc02487453">7d53461</a></td><td><code>Merge branch 'public/combinat/mobius_algebras-17560' of git://trac.sagemath.org/sage into public/combinat/mobius_algebras-17560</code></td></tr></table>




---

archive/issue_comments_238208.json:
```json
{
    "body": "Changed commit from **[852fc7b](https://github.com/sagemath/sagetrac-mirror/commit/852fc7b91ce687cfe2e92fb501f9a034170c47cc)** to **[7d53461](https://github.com/sagemath/sagetrac-mirror/commit/7d534612a521d26d7f040f955bfcbfcc02487453)**",
    "created_at": "2015-09-02T14:35:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238208",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[852fc7b](https://github.com/sagemath/sagetrac-mirror/commit/852fc7b91ce687cfe2e92fb501f9a034170c47cc)** to **[7d53461](https://github.com/sagemath/sagetrac-mirror/commit/7d534612a521d26d7f040f955bfcbfcc02487453)**



---

archive/issue_events_232592.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-09-02T14:35:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232592"
}
```



---

archive/issue_events_232593.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-09-02T14:35:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232593"
}
```



---

archive/issue_events_232594.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-09-02T14:35:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232594"
}
```



---

archive/issue_events_232595.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-09-02T14:35:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232595"
}
```



---

archive/issue_comments_238209.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae1e87689785a4b5e3ab96c2081c896bda3a151d\">ae1e876</a></td><td><code>Merge branch 'public/combinat/mobius_algebras-17560' of trac.sagemath.org:sage into public/combinat/mobius_algebras-17560</code></td></tr></table>\n",
    "created_at": "2015-09-25T03:49:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238209",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae1e87689785a4b5e3ab96c2081c896bda3a151d">ae1e876</a></td><td><code>Merge branch 'public/combinat/mobius_algebras-17560' of trac.sagemath.org:sage into public/combinat/mobius_algebras-17560</code></td></tr></table>




---

archive/issue_comments_238210.json:
```json
{
    "body": "Changed commit from **[7d53461](https://github.com/sagemath/sagetrac-mirror/commit/7d534612a521d26d7f040f955bfcbfcc02487453)** to **[ae1e876](https://github.com/sagemath/sagetrac-mirror/commit/ae1e87689785a4b5e3ab96c2081c896bda3a151d)**",
    "created_at": "2015-09-25T03:49:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238210",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7d53461](https://github.com/sagemath/sagetrac-mirror/commit/7d534612a521d26d7f040f955bfcbfcc02487453)** to **[ae1e876](https://github.com/sagemath/sagetrac-mirror/commit/ae1e87689785a4b5e3ab96c2081c896bda3a151d)**



---

archive/issue_comments_238211.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nStill need to play around with the code, once I wrap my head around everything, but a few preliminary comments:\n\n* E and C bases for quantum mobius algebras just say that they're bases for mobius algebras in the docstring (KL does specify quantum mobius algebra).\n* Throw in the word 'principal' when referring to `I_x` and `F^x` being the order ideal and filter associated to x, just to make it clear.\n* I think the assumptions related to `kazhdan_lusztig_polynomial()` need to be cleaned up some. The docstring says it's defined for a graded, bounded poset. The paper makes me think it should only be defined for geometric lattices (ie, corresponding to a matroid). And the code only checks to see if the poset is ranked.",
    "created_at": "2015-10-13T21:51:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238211",
    "user": "https://github.com/kevindilks"
}
```

<a id='comment:8'>Comment 8:</a>
Still need to play around with the code, once I wrap my head around everything, but a few preliminary comments:

* E and C bases for quantum mobius algebras just say that they're bases for mobius algebras in the docstring (KL does specify quantum mobius algebra).
* Throw in the word 'principal' when referring to `I_x` and `F^x` being the order ideal and filter associated to x, just to make it clear.
* I think the assumptions related to `kazhdan_lusztig_polynomial()` need to be cleaned up some. The docstring says it's defined for a graded, bounded poset. The paper makes me think it should only be defined for geometric lattices (ie, corresponding to a matroid). And the code only checks to see if the poset is ranked.



---

archive/issue_comments_238212.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9cb5e64f86f01a2a3a318a192e137456048a83b7\">9cb5e64</a></td><td><code>Merge branch 'public/combinat/mobius_algebras-17560' of trac.sagemath.org:sage into public/combinat/mobius_algebras-17560</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e51ab0a00e0784de44d7da40f92dc078c48f440\">4e51ab0</a></td><td><code>Adding an e and following Kevin's suggestions.</code></td></tr></table>\n",
    "created_at": "2015-10-15T03:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238212",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9cb5e64f86f01a2a3a318a192e137456048a83b7">9cb5e64</a></td><td><code>Merge branch 'public/combinat/mobius_algebras-17560' of trac.sagemath.org:sage into public/combinat/mobius_algebras-17560</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e51ab0a00e0784de44d7da40f92dc078c48f440">4e51ab0</a></td><td><code>Adding an e and following Kevin's suggestions.</code></td></tr></table>




---

archive/issue_comments_238213.json:
```json
{
    "body": "Changed commit from **[ae1e876](https://github.com/sagemath/sagetrac-mirror/commit/ae1e87689785a4b5e3ab96c2081c896bda3a151d)** to **[4e51ab0](https://github.com/sagemath/sagetrac-mirror/commit/4e51ab0a00e0784de44d7da40f92dc078c48f440)**",
    "created_at": "2015-10-15T03:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238213",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ae1e876](https://github.com/sagemath/sagetrac-mirror/commit/ae1e87689785a4b5e3ab96c2081c896bda3a151d)** to **[4e51ab0](https://github.com/sagemath/sagetrac-mirror/commit/4e51ab0a00e0784de44d7da40f92dc078c48f440)**



---

archive/issue_comments_238214.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@kevindilks](#comment%3A8):\n> * E and C bases for quantum mobius algebras just say that they're bases for mobius algebras in the docstring (KL does specify quantum mobius algebra).\n\nFixed.\n\n> * Throw in the word 'principal' when referring to `I_x` and `F^x` being the order ideal and filter associated to x, just to make it clear.\n\nFixed.\n\n> * I think the assumptions related to `kazhdan_lusztig_polynomial()` need to be cleaned up some. The docstring says it's defined for a graded, bounded poset. The paper makes me think it should only be defined for geometric lattices (ie, corresponding to a matroid). And the code only checks to see if the poset is ranked.\n\nIf you go through their definitions, you find you just need these conditions (I confirmed this from the authors). I only need to check the ranked (graded) conditions because the finiteness guarantees bounded.",
    "created_at": "2015-10-15T03:57:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238214",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@kevindilks](#comment%3A8):
> * E and C bases for quantum mobius algebras just say that they're bases for mobius algebras in the docstring (KL does specify quantum mobius algebra).

Fixed.

> * Throw in the word 'principal' when referring to `I_x` and `F^x` being the order ideal and filter associated to x, just to make it clear.

Fixed.

> * I think the assumptions related to `kazhdan_lusztig_polynomial()` need to be cleaned up some. The docstring says it's defined for a graded, bounded poset. The paper makes me think it should only be defined for geometric lattices (ie, corresponding to a matroid). And the code only checks to see if the poset is ranked.

If you go through their definitions, you find you just need these conditions (I confirmed this from the authors). I only need to check the ranked (graded) conditions because the finiteness guarantees bounded.



---

archive/issue_events_232596.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-10-16T15:10:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232596"
}
```



---

archive/issue_events_232597.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-10-16T15:10:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232597"
}
```



---

archive/issue_comments_238215.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\ndoes not apply",
    "created_at": "2015-10-16T15:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238215",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'>Comment 11:</a>
does not apply



---

archive/issue_comments_238216.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ab8e70636cd34eee88301c9b7191b9fd13077a3\">8ab8e70</a></td><td><code>Merge branch 'public/combinat/mobius_algebras-17560' of trac.sagemath.org:sage into public/combinat/mobius_algebras-17560</code></td></tr></table>\n",
    "created_at": "2015-10-16T19:23:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238216",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ab8e70636cd34eee88301c9b7191b9fd13077a3">8ab8e70</a></td><td><code>Merge branch 'public/combinat/mobius_algebras-17560' of trac.sagemath.org:sage into public/combinat/mobius_algebras-17560</code></td></tr></table>




---

archive/issue_comments_238217.json:
```json
{
    "body": "Changed commit from **[4e51ab0](https://github.com/sagemath/sagetrac-mirror/commit/4e51ab0a00e0784de44d7da40f92dc078c48f440)** to **[8ab8e70](https://github.com/sagemath/sagetrac-mirror/commit/8ab8e70636cd34eee88301c9b7191b9fd13077a3)**",
    "created_at": "2015-10-16T19:23:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238217",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4e51ab0](https://github.com/sagemath/sagetrac-mirror/commit/4e51ab0a00e0784de44d7da40f92dc078c48f440)** to **[8ab8e70](https://github.com/sagemath/sagetrac-mirror/commit/8ab8e70636cd34eee88301c9b7191b9fd13077a3)**



---

archive/issue_events_232598.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-16T19:23:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232598"
}
```



---

archive/issue_events_232599.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-16T19:23:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232599"
}
```



---

archive/issue_events_232600.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-16T19:23:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232600"
}
```



---

archive/issue_events_232601.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-16T19:23:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232601"
}
```



---

archive/issue_comments_238218.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31ea7123356ca264e2630f22045662cb36a516d5\">31ea712</a></td><td><code>trac #17560 fixing doc</code></td></tr></table>\n",
    "created_at": "2015-10-17T07:00:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238218",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>Comment 14:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31ea7123356ca264e2630f22045662cb36a516d5">31ea712</a></td><td><code>trac #17560 fixing doc</code></td></tr></table>




---

archive/issue_comments_238219.json:
```json
{
    "body": "Changed commit from **[8ab8e70](https://github.com/sagemath/sagetrac-mirror/commit/8ab8e70636cd34eee88301c9b7191b9fd13077a3)** to **[31ea712](https://github.com/sagemath/sagetrac-mirror/commit/31ea7123356ca264e2630f22045662cb36a516d5)**",
    "created_at": "2015-10-17T07:00:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238219",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8ab8e70](https://github.com/sagemath/sagetrac-mirror/commit/8ab8e70636cd34eee88301c9b7191b9fd13077a3)** to **[31ea712](https://github.com/sagemath/sagetrac-mirror/commit/31ea7123356ca264e2630f22045662cb36a516d5)**



---

archive/issue_comments_238220.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/461c314c31439b56b829bf7a439d781507bb6da2\">461c314</a></td><td><code>trac #17560 fixing doc again</code></td></tr></table>\n",
    "created_at": "2015-10-17T10:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238220",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>Comment 15:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/461c314c31439b56b829bf7a439d781507bb6da2">461c314</a></td><td><code>trac #17560 fixing doc again</code></td></tr></table>




---

archive/issue_comments_238221.json:
```json
{
    "body": "Changed commit from **[31ea712](https://github.com/sagemath/sagetrac-mirror/commit/31ea7123356ca264e2630f22045662cb36a516d5)** to **[461c314](https://github.com/sagemath/sagetrac-mirror/commit/461c314c31439b56b829bf7a439d781507bb6da2)**",
    "created_at": "2015-10-17T10:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238221",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[31ea712](https://github.com/sagemath/sagetrac-mirror/commit/31ea7123356ca264e2630f22045662cb36a516d5)** to **[461c314](https://github.com/sagemath/sagetrac-mirror/commit/461c314c31439b56b829bf7a439d781507bb6da2)**



---

archive/issue_comments_238222.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nI would consider having `R=ZZ` as a default for `mobius_algebra`. Otherwise, looks good, feel free to make that change if you want and set a positive review on my behalf.\n\nAlso, if the convention is going to be to use `moebius` instead of `mobius` in function names, then the existing mobius function will need to be changed.",
    "created_at": "2015-10-17T20:33:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238222",
    "user": "https://github.com/kevindilks"
}
```

<a id='comment:16'>Comment 16:</a>
I would consider having `R=ZZ` as a default for `mobius_algebra`. Otherwise, looks good, feel free to make that change if you want and set a positive review on my behalf.

Also, if the convention is going to be to use `moebius` instead of `mobius` in function names, then the existing mobius function will need to be changed.



---

archive/issue_comments_238223.json:
```json
{
    "body": "Reviewer: **Kevin Dilks**",
    "created_at": "2015-10-17T21:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238223",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Kevin Dilks**



---

archive/issue_events_232602.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-17T21:36:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232602"
}
```



---

archive/issue_events_232603.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-17T21:36:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232603"
}
```



---

archive/issue_comments_238224.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReplying to [@kevindilks](#comment%3A16):\n> I would consider having `R=ZZ` as a default for `mobius_algebra`. Otherwise, looks good, feel free to make that change if you want and set a positive review on my behalf.\n\nI would rather not set a default as we don't have any default rings for any algebra (at least as far as I remember). Thanks for doing the review.\n\n> Also, if the convention is going to be to use `moebius` instead of `mobius` in function names, then the existing mobius function will need to be changed.\n\nYea, we probably should do that on a followup ticket. (FYI, the reason I switched the name is because Moebius appears in more files and more often than Mobius.)",
    "created_at": "2015-10-17T21:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238224",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'>Comment 17:</a>
Replying to [@kevindilks](#comment%3A16):
> I would consider having `R=ZZ` as a default for `mobius_algebra`. Otherwise, looks good, feel free to make that change if you want and set a positive review on my behalf.

I would rather not set a default as we don't have any default rings for any algebra (at least as far as I remember). Thanks for doing the review.

> Also, if the convention is going to be to use `moebius` instead of `mobius` in function names, then the existing mobius function will need to be changed.

Yea, we probably should do that on a followup ticket. (FYI, the reason I switched the name is because Moebius appears in more files and more often than Mobius.)



---

archive/issue_events_232604.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-18T19:11:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232604"
}
```



---

archive/issue_events_232605.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a73dbeb91d4e51bcde1996c1299a792ab87acf0f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-10-18T19:11:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17560#event-232605"
}
```



---

archive/issue_comments_238225.json:
```json
{
    "body": "Changed branch from **[public/combinat/mobius_algebras-17560](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/mobius_algebras-17560)** to **[461c314](https://github.com/sagemath/sagetrac-mirror/commit/461c314c31439b56b829bf7a439d781507bb6da2)**",
    "created_at": "2015-10-18T19:11:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17560#issuecomment-238225",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/combinat/mobius_algebras-17560](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/mobius_algebras-17560)** to **[461c314](https://github.com/sagemath/sagetrac-mirror/commit/461c314c31439b56b829bf7a439d781507bb6da2)**
