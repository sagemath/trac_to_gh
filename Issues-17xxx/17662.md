# Issue 17662: Evenly distributed sets

archive/issues_017425.json:
```json
{
    "assignees": [],
    "body": "We introduce evenly distributed sets (EDS) to get more difference families and more BIBD in Sage. More precisely we add\n\n- a database of small EDS\n- a naive backtracker (that was actually used to build the database)\n\n**CC:**  @nathanncohen\n\n**Branch:** [007b862b6a8576c9e3127d9e6a4ed1df58d43e2f](https://github.com/sagemath/sagetrac-mirror/commit/007b862b6a8576c9e3127d9e6a4ed1df58d43e2f)\n\n**Reviewer:** Nathann Cohen\n\n**Author:** Vincent Delecroix\n\nIssue created by migration from https://trac.sagemath.org/ticket/17662\n\n",
    "closed_at": "2015-04-28T04:44:40Z",
    "created_at": "2015-01-22T17:54:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorial%20designs",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Evenly distributed sets",
    "type": "issue",
    "updated_at": "2015-04-28T05:56:57Z",
    "url": "https://github.com/sagemath/sage/issues/17662",
    "user": "https://github.com/videlec"
}
```
We introduce evenly distributed sets (EDS) to get more difference families and more BIBD in Sage. More precisely we add

- a database of small EDS
- a naive backtracker (that was actually used to build the database)

**CC:**  @nathanncohen

**Branch:** [007b862b6a8576c9e3127d9e6a4ed1df58d43e2f](https://github.com/sagemath/sagetrac-mirror/commit/007b862b6a8576c9e3127d9e6a4ed1df58d43e2f)

**Reviewer:** Nathann Cohen

**Author:** Vincent Delecroix

Issue created by migration from https://trac.sagemath.org/ticket/17662





---

archive/issue_events_216023.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-22T17:54:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216023"
}
```



---

archive/issue_events_216024.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-22T17:54:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorial%20designs",
    "label_color": "08517b",
    "label_name": "component: combinatorial designs",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216024"
}
```



---

archive/issue_comments_240683.json:
```json
{
    "body": "**Branch:** [public/17662](https://github.com/sagemath/sagetrac-mirror/tree/public/17662)",
    "created_at": "2015-01-22T18:16:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240683",
    "user": "https://github.com/videlec"
}
```

**Branch:** [public/17662](https://github.com/sagemath/sagetrac-mirror/tree/public/17662)



---

archive/issue_comments_240684.json:
```json
{
    "body": "**Commit:** [403afe4ea19bbe5882f1949394dd1ae868bc40a9](https://github.com/sagemath/sagetrac-mirror/commit/403afe4ea19bbe5882f1949394dd1ae868bc40a9)",
    "created_at": "2015-01-22T18:16:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240684",
    "user": "https://github.com/videlec"
}
```

**Commit:** [403afe4ea19bbe5882f1949394dd1ae868bc40a9](https://github.com/sagemath/sagetrac-mirror/commit/403afe4ea19bbe5882f1949394dd1ae868bc40a9)



---

archive/issue_comments_240685.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7203d58b247c0a80b96e1d4f64a6a976539110b4\">7203d58</a></td><td><code>trac #16866: dlx for radical difference family</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/657244b9cbfdba011b52bedba0070dab514d0630\">657244b</a></td><td><code>trac #16866: remove trailing whitespaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bee446fc3428b829c9b03ee470596611693dadc2\">bee446f</a></td><td><code>trac #16866: avoid dlx for difference_set</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58fed55ef22232a32f3beffae76f4121e775c58e\">58fed55</a></td><td><code>trac #16866: formatting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/721af75ec2b2c6ca904f2feaf86e75e054cb089d\">721af75</a></td><td><code>trac #16866: ALGORITHM block with explanations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3adbb39680e8b39cb7a516e8240c1d9bc1c0b62d\">3adbb39</a></td><td><code>trac #17662: database of EDS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/574f16439e11fcb4978c81a46ff75d39a967a717\">574f164</a></td><td><code>trac #17662: EDS backtracker</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/403afe4ea19bbe5882f1949394dd1ae868bc40a9\">403afe4</a></td><td><code>trac #17662: add module to the documentation</code></td></tr></table>\n",
    "created_at": "2015-01-22T18:16:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240685",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'>**Comment 1:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7203d58b247c0a80b96e1d4f64a6a976539110b4">7203d58</a></td><td><code>trac #16866: dlx for radical difference family</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/657244b9cbfdba011b52bedba0070dab514d0630">657244b</a></td><td><code>trac #16866: remove trailing whitespaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bee446fc3428b829c9b03ee470596611693dadc2">bee446f</a></td><td><code>trac #16866: avoid dlx for difference_set</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58fed55ef22232a32f3beffae76f4121e775c58e">58fed55</a></td><td><code>trac #16866: formatting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/721af75ec2b2c6ca904f2feaf86e75e054cb089d">721af75</a></td><td><code>trac #16866: ALGORITHM block with explanations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3adbb39680e8b39cb7a516e8240c1d9bc1c0b62d">3adbb39</a></td><td><code>trac #17662: database of EDS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/574f16439e11fcb4978c81a46ff75d39a967a717">574f164</a></td><td><code>trac #17662: EDS backtracker</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/403afe4ea19bbe5882f1949394dd1ae868bc40a9">403afe4</a></td><td><code>trac #17662: add module to the documentation</code></td></tr></table>




---

archive/issue_events_216025.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-22T18:16:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216025"
}
```



---

archive/issue_events_216026.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-22T18:16:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216026"
}
```



---

archive/issue_comments_240686.json:
```json
{
    "body": "**Changing commit** from \"[403afe4ea19bbe5882f1949394dd1ae868bc40a9](https://github.com/sagemath/sagetrac-mirror/commit/403afe4ea19bbe5882f1949394dd1ae868bc40a9)\" to \"[3aae6682c3fd3c4abea98d19bcdcf389ca6f8297](https://github.com/sagemath/sagetrac-mirror/commit/3aae6682c3fd3c4abea98d19bcdcf389ca6f8297)\".",
    "created_at": "2015-04-15T10:40:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240686",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[403afe4ea19bbe5882f1949394dd1ae868bc40a9](https://github.com/sagemath/sagetrac-mirror/commit/403afe4ea19bbe5882f1949394dd1ae868bc40a9)" to "[3aae6682c3fd3c4abea98d19bcdcf389ca6f8297](https://github.com/sagemath/sagetrac-mirror/commit/3aae6682c3fd3c4abea98d19bcdcf389ca6f8297)".



---

archive/issue_comments_240687.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af5bd39be5bf96778a4dd755bea024642c0d0295\">af5bd39</a></td><td><code>trac #17662: database of EDS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/197de50a51d9ad67e8a637c9e2b374f15a045ae9\">197de50</a></td><td><code>trac #17662: EDS backtracker</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3aae6682c3fd3c4abea98d19bcdcf389ca6f8297\">3aae668</a></td><td><code>trac #17662: add module to the documentation</code></td></tr></table>\n",
    "created_at": "2015-04-15T10:40:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240687",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>**Comment 2:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af5bd39be5bf96778a4dd755bea024642c0d0295">af5bd39</a></td><td><code>trac #17662: database of EDS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/197de50a51d9ad67e8a637c9e2b374f15a045ae9">197de50</a></td><td><code>trac #17662: EDS backtracker</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3aae6682c3fd3c4abea98d19bcdcf389ca6f8297">3aae668</a></td><td><code>trac #17662: add module to the documentation</code></td></tr></table>




---

archive/issue_comments_240688.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nRebased on the latest beta in which the dependency is merged. Needs review!",
    "created_at": "2015-04-15T10:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240688",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'>**Comment 3:**</a>
Rebased on the latest beta in which the dependency is merged. Needs review!



---

archive/issue_comments_240689.json:
```json
{
    "body": "**Changing dependencies** from \"#16866\" to \"\".",
    "created_at": "2015-04-15T10:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240689",
    "user": "https://github.com/videlec"
}
```

**Changing dependencies** from "#16866" to "".



---

archive/issue_comments_240690.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nHelloooooooooooo,\n\nFor the moment it's only about form, but:\n\n- In the desription of the EDS database that appear as a comment in\n  `databases.py`: could you give it a better shape with lists and items?\n  Something like:\n  At position `[k][q]` there is:\n      - False: no such set exists\n      - (None, B) -- explanation\n      - (polynomial, B) -- explanation\n  It is a bit hard to read, as it is.\n\n- can you also call `del` on `R,ZZ` and `a`?\n\n- In the module doc of `database.py`, could you add a link toward a definition\n  of `EDS`? From typing this in Google you don't get much.\n\n- `cdef class EvenlyDistributedSets(object):` why do you inherit from\n  `object`? What do you earn? `O_o`\n\n- Jeroen's talk at Liege taught us that `check_malloc` existed `:-P`\n\n  http://fossies.org/linux/sage/src/sage/ext/memory.pxd#l_97\n\n- An \u00ccNPUT section is missing from at least two functions of your new file. In\n  particular, it would be cool to know how exactly one is meant to build a\n  `EvenlyDistributedSets` instance.\n\n- About the name `EvenlyDistributedSets`... I don't find it overly specific. I\n  know that the 's' means 'many', but welll....\n\nNathann",
    "created_at": "2015-04-15T11:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240690",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'>**Comment 4:**</a>
Helloooooooooooo,

For the moment it's only about form, but:

- In the desription of the EDS database that appear as a comment in
  `databases.py`: could you give it a better shape with lists and items?
  Something like:
  At position `[k][q]` there is:
      - False: no such set exists
      - (None, B) -- explanation
      - (polynomial, B) -- explanation
  It is a bit hard to read, as it is.

- can you also call `del` on `R,ZZ` and `a`?

- In the module doc of `database.py`, could you add a link toward a definition
  of `EDS`? From typing this in Google you don't get much.

- `cdef class EvenlyDistributedSets(object):` why do you inherit from
  `object`? What do you earn? `O_o`

- Jeroen's talk at Liege taught us that `check_malloc` existed `:-P`

  http://fossies.org/linux/sage/src/sage/ext/memory.pxd#l_97

- An ÌNPUT section is missing from at least two functions of your new file. In
  particular, it would be cool to know how exactly one is meant to build a
  `EvenlyDistributedSets` instance.

- About the name `EvenlyDistributedSets`... I don't find it overly specific. I
  know that the 's' means 'many', but welll....

Nathann



---

archive/issue_comments_240691.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nJust some questions about some of your questions.\n\nReplying to [@nathanncohen](#comment%3A4):\n> - In the module doc of `database.py`, could you add a link toward a definition\n>   of `EDS`? From typing this in Google you don't get much.\n\nIt is currently in the class `EvenlyDistributedSets`. What should I do?\n \n> - `cdef class EvenlyDistributedSets(object):` why do you inherit from\n>   `object`? What do you earn? `O_o`\n\nNo idea.\n\n> - An \u00ccNPUT section is missing from at least two functions of your new file. In\n>   particular, it would be cool to know how exactly one is meant to build a\n>   `EvenlyDistributedSets` instance.\n\nIt is in the class documentation (not in `__init__`)\n\n```\n    INPUT:\n\n    - ``K`` -- a finite field of cardinality `q`\n\n    - ``k`` -- a positive integer such that `k(k-1)` divides `q-1`\n\n    - ``check`` -- boolean (default is ``False``). Whether you want to check\n      intermediate steps of the iterator. This is mainly intended for debugging\n      purpose. Setting it to ``True`` will considerably slow the iteration.\n```\nShould I move it?\n\n> - About the name `EvenlyDistributedSets`... I don't find it overly specific. I\n>   know that the 's' means 'many', but welll....\n\n \nWhat about `SomeEvenlyDistributedSetsWithSomeProperty`? It is exactly the evenly distributed sets up to isomorphisms (= relabeling by `x -> ax + b`). I will try to find something.\n\nVincent",
    "created_at": "2015-04-15T11:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240691",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'>**Comment 5:**</a>
Just some questions about some of your questions.

Replying to [@nathanncohen](#comment%3A4):
> - In the module doc of `database.py`, could you add a link toward a definition
>   of `EDS`? From typing this in Google you don't get much.

It is currently in the class `EvenlyDistributedSets`. What should I do?
 
> - `cdef class EvenlyDistributedSets(object):` why do you inherit from
>   `object`? What do you earn? `O_o`

No idea.

> - An ÌNPUT section is missing from at least two functions of your new file. In
>   particular, it would be cool to know how exactly one is meant to build a
>   `EvenlyDistributedSets` instance.

It is in the class documentation (not in `__init__`)

```
    INPUT:

    - ``K`` -- a finite field of cardinality `q`

    - ``k`` -- a positive integer such that `k(k-1)` divides `q-1`

    - ``check`` -- boolean (default is ``False``). Whether you want to check
      intermediate steps of the iterator. This is mainly intended for debugging
      purpose. Setting it to ``True`` will considerably slow the iteration.
```
Should I move it?

> - About the name `EvenlyDistributedSets`... I don't find it overly specific. I
>   know that the 's' means 'many', but welll....

 
What about `SomeEvenlyDistributedSetsWithSomeProperty`? It is exactly the evenly distributed sets up to isomorphisms (= relabeling by `x -> ax + b`). I will try to find something.

Vincent



---

archive/issue_comments_240692.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nI now remember that I did implement a much better backtracker with a lot of branch cuts... I need to find it! Grrrr!",
    "created_at": "2015-04-15T12:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240692",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'>**Comment 6:**</a>
I now remember that I did implement a much better backtracker with a lot of branch cuts... I need to find it! Grrrr!



---

archive/issue_comments_240693.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1f386cf2c02873138507cf669f73b368e646f2e\">d1f386c</a></td><td><code>Trac 17662: clean database.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd5600796f8e01eb31b5e8ad71e9765dae8dc199\">bd56007</a></td><td><code>Trac 17662: cut many branches</code></td></tr></table>\n",
    "created_at": "2015-04-15T14:25:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240693",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>**Comment 7:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1f386cf2c02873138507cf669f73b368e646f2e">d1f386c</a></td><td><code>Trac 17662: clean database.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd5600796f8e01eb31b5e8ad71e9765dae8dc199">bd56007</a></td><td><code>Trac 17662: cut many branches</code></td></tr></table>




---

archive/issue_comments_240694.json:
```json
{
    "body": "**Changing commit** from \"[3aae6682c3fd3c4abea98d19bcdcf389ca6f8297](https://github.com/sagemath/sagetrac-mirror/commit/3aae6682c3fd3c4abea98d19bcdcf389ca6f8297)\" to \"[bd5600796f8e01eb31b5e8ad71e9765dae8dc199](https://github.com/sagemath/sagetrac-mirror/commit/bd5600796f8e01eb31b5e8ad71e9765dae8dc199)\".",
    "created_at": "2015-04-15T14:25:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240694",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[3aae6682c3fd3c4abea98d19bcdcf389ca6f8297](https://github.com/sagemath/sagetrac-mirror/commit/3aae6682c3fd3c4abea98d19bcdcf389ca6f8297)" to "[bd5600796f8e01eb31b5e8ad71e9765dae8dc199](https://github.com/sagemath/sagetrac-mirror/commit/bd5600796f8e01eb31b5e8ad71e9765dae8dc199)".



---

archive/issue_comments_240695.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nHere is the much better backtracker. I implemented the points that I did not discuss in my [comment:5](#comment%3A5).",
    "created_at": "2015-04-15T14:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240695",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'>**Comment 8:**</a>
Here is the much better backtracker. I implemented the points that I did not discuss in my [comment:5](#comment%3A5).



---

archive/issue_comments_240696.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\n> It is currently in the class `EvenlyDistributedSets`. What should I do?\n\nWell, add a link to it?\n\n> Should I move it?\n\nSorry, I missed it.\n\n> > - About the name `EvenlyDistributedSets`... I don't find it overly specific. I\n> >   know that the 's' means 'many', but welll....\n\n>  \n> What about `SomeEvenlyDistributedSetsWithSomeProperty`? It is exactly the evenly distributed sets up to isomorphisms (= relabeling by `x -> ax + b`). I will try to find something.\n\nWell, you could also call it `EvenlyDistributedSetsBacktrack` or something. I mean: okay there is a 's' and your set represents \"many evenly distributed sets\", but it is not the set of \"all evenly distributed sets\" either since it is prameterized by `K` and `k`. Well, I don't know exactly what other name it could take, but this one is rather wide.\n\nNathann",
    "created_at": "2015-04-15T14:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240696",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'>**Comment 9:**</a>
> It is currently in the class `EvenlyDistributedSets`. What should I do?

Well, add a link to it?

> Should I move it?

Sorry, I missed it.

> > - About the name `EvenlyDistributedSets`... I don't find it overly specific. I
> >   know that the 's' means 'many', but welll....

>  
> What about `SomeEvenlyDistributedSetsWithSomeProperty`? It is exactly the evenly distributed sets up to isomorphisms (= relabeling by `x -> ax + b`). I will try to find something.

Well, you could also call it `EvenlyDistributedSetsBacktrack` or something. I mean: okay there is a 's' and your set represents "many evenly distributed sets", but it is not the set of "all evenly distributed sets" either since it is prameterized by `K` and `k`. Well, I don't know exactly what other name it could take, but this one is rather wide.

Nathann



---

archive/issue_comments_240697.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88b7d4fbd02599726e9f9ed2c821a20bb00181cc\">88b7d4f</a></td><td><code>trac #17662: database of EDS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ede6d67fd53d503d522d022a548cb8f35e08ef7\">2ede6d6</a></td><td><code>trac #17662: EDS backtracker</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3385807832a91a2a2171aeb9548059a672b5a59\">d338580</a></td><td><code>trac #17662: add module to the documentation</code></td></tr></table>\n",
    "created_at": "2015-04-19T14:10:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240697",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>**Comment 10:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88b7d4fbd02599726e9f9ed2c821a20bb00181cc">88b7d4f</a></td><td><code>trac #17662: database of EDS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ede6d67fd53d503d522d022a548cb8f35e08ef7">2ede6d6</a></td><td><code>trac #17662: EDS backtracker</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3385807832a91a2a2171aeb9548059a672b5a59">d338580</a></td><td><code>trac #17662: add module to the documentation</code></td></tr></table>




---

archive/issue_comments_240698.json:
```json
{
    "body": "**Changing commit** from \"[bd5600796f8e01eb31b5e8ad71e9765dae8dc199](https://github.com/sagemath/sagetrac-mirror/commit/bd5600796f8e01eb31b5e8ad71e9765dae8dc199)\" to \"[d3385807832a91a2a2171aeb9548059a672b5a59](https://github.com/sagemath/sagetrac-mirror/commit/d3385807832a91a2a2171aeb9548059a672b5a59)\".",
    "created_at": "2015-04-19T14:10:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240698",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[bd5600796f8e01eb31b5e8ad71e9765dae8dc199](https://github.com/sagemath/sagetrac-mirror/commit/bd5600796f8e01eb31b5e8ad71e9765dae8dc199)" to "[d3385807832a91a2a2171aeb9548059a672b5a59](https://github.com/sagemath/sagetrac-mirror/commit/d3385807832a91a2a2171aeb9548059a672b5a59)".



---

archive/issue_comments_240699.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nAll right,\n\nI implemented your requests and rebased on sage-6.7.beta1. The backtracker is currently running for `k=11,12,13,14` but I am not sure there is something interesting to find.\n\nVincent",
    "created_at": "2015-04-19T15:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240699",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'>**Comment 11:**</a>
All right,

I implemented your requests and rebased on sage-6.7.beta1. The backtracker is currently running for `k=11,12,13,14` but I am not sure there is something interesting to find.

Vincent



---

archive/issue_comments_240700.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nAs a consequence, some new BIBD\n\n```\nsage: designs.balanced_incomplete_block_design(169,7)\n(169,7,1)-Balanced Incomplete Block Design\nsage: designs.balanced_incomplete_block_design(617,8)\n(617,8,1)-Balanced Incomplete Block Design\nsage: designs.balanced_incomplete_block_design(433,9)\n(433,9,1)-Balanced Incomplete Block Design\nsage: designs.balanced_incomplete_block_design(1171,10)\n(1171,10,1)-Balanced Incomplete Block Design\n```\nIsn't it cool?",
    "created_at": "2015-04-19T18:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240700",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'>**Comment 12:**</a>
As a consequence, some new BIBD

```
sage: designs.balanced_incomplete_block_design(169,7)
(169,7,1)-Balanced Incomplete Block Design
sage: designs.balanced_incomplete_block_design(617,8)
(617,8,1)-Balanced Incomplete Block Design
sage: designs.balanced_incomplete_block_design(433,9)
(433,9,1)-Balanced Incomplete Block Design
sage: designs.balanced_incomplete_block_design(1171,10)
(1171,10,1)-Balanced Incomplete Block Design
```
Isn't it cool?



---

archive/issue_comments_240701.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nCOooooooooooOOOOOOOOOOOoooooooollllllllll!! Perhaps we should think someday of having big tables of the BIBD (or other designs) that we can build. In the doc. A bit like how we do it for the 'database of small designs'. The La Jolla Covering Repository doesn't go that high.",
    "created_at": "2015-04-19T19:35:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240701",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'>**Comment 13:**</a>
COooooooooooOOOOOOOOOOOoooooooollllllllll!! Perhaps we should think someday of having big tables of the BIBD (or other designs) that we can build. In the doc. A bit like how we do it for the 'database of small designs'. The La Jolla Covering Repository doesn't go that high.



---

archive/issue_comments_240702.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nWhile reviewing this code\n\n```\n    # PYTHON DATA                                                                                                                                                                                 \n    cdef K                       # the underlying field                                                                                                                                           \n    cdef list list_K             # the elements of K  (i -> x)                                                                                                                                    \n    cdef dict K_to_int           # inverse of list_K  (x -> i)                                                                                                                                    \n\n    # FLAGS                                                                                                                                                                                       \n    cdef int count               # do we count or do we iterate                                                                                                                                   \n    cdef int check               # do we need to check (debug)                                                                                                                                    \n    cdef int up_to_isom          # do we care only about isomorphisms                                                                                                                             \n\n    # STATIC DATA                                                                                                                                                                                 \n    cdef unsigned int q          # cardinality of the field                                                                                                                                       \n    cdef unsigned int k          # size of the subsets                                                                                                                                            \n    cdef unsigned int e          # k(k-1)/2                                                                                                                                                       \n    cdef unsigned int ** diff    # qxq array: diff[x][y]  = x - y                                                                                                                                 \n    cdef unsigned int ** ratio   # qxq array: ratio[x][y] = x / y                                                                                                                                 \n\n    # DYNAMIC DATA                                                                                                                                                                                \n    cdef unsigned int * B        # current stack of elements of {0,...,q-1}                                                                                                                       \n    cdef unsigned int * cosets   # cosets of differences of elts in B                                                                                                                             \n    cdef unsigned int * t        # temporary variable for updates    \n```\n\nThank you for that. This is the kind of code that is a pleasure to read! `:-PPPPP`\n\nNathann",
    "created_at": "2015-04-20T08:34:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240702",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'>**Comment 14:**</a>
While reviewing this code

```
    # PYTHON DATA                                                                                                                                                                                 
    cdef K                       # the underlying field                                                                                                                                           
    cdef list list_K             # the elements of K  (i -> x)                                                                                                                                    
    cdef dict K_to_int           # inverse of list_K  (x -> i)                                                                                                                                    

    # FLAGS                                                                                                                                                                                       
    cdef int count               # do we count or do we iterate                                                                                                                                   
    cdef int check               # do we need to check (debug)                                                                                                                                    
    cdef int up_to_isom          # do we care only about isomorphisms                                                                                                                             

    # STATIC DATA                                                                                                                                                                                 
    cdef unsigned int q          # cardinality of the field                                                                                                                                       
    cdef unsigned int k          # size of the subsets                                                                                                                                            
    cdef unsigned int e          # k(k-1)/2                                                                                                                                                       
    cdef unsigned int ** diff    # qxq array: diff[x][y]  = x - y                                                                                                                                 
    cdef unsigned int ** ratio   # qxq array: ratio[x][y] = x / y                                                                                                                                 

    # DYNAMIC DATA                                                                                                                                                                                
    cdef unsigned int * B        # current stack of elements of {0,...,q-1}                                                                                                                       
    cdef unsigned int * cosets   # cosets of differences of elts in B                                                                                                                             
    cdef unsigned int * t        # temporary variable for updates    
```

Thank you for that. This is the kind of code that is a pleasure to read! `:-PPPPP`

Nathann



---

archive/issue_comments_240703.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nHello,\n\nI added a commit with some small modifications. The replacement malloc->calloc is there because the following code triggers a segfault (during `__dealloc__`) when the second malloc fails.\n\n```\nself.ratio = <unsigned int **> check_malloc(q*sizeof(unsigned int *))\nself.ratio[0] = <unsigned int *> check_malloc(q*q*sizeof(unsigned int))\n```\n\nI also have a couple of questions:\n\nCould you explain somewhere why being an EDS is preserved by relabelling?\n\nAlso, why an 'if' there?\n\n```\nif BB > B:\n   relabs.add(tuple(BB))\n```\n\nNathann",
    "created_at": "2015-04-20T10:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240703",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'>**Comment 15:**</a>
Hello,

I added a commit with some small modifications. The replacement malloc->calloc is there because the following code triggers a segfault (during `__dealloc__`) when the second malloc fails.

```
self.ratio = <unsigned int **> check_malloc(q*sizeof(unsigned int *))
self.ratio[0] = <unsigned int *> check_malloc(q*q*sizeof(unsigned int))
```

I also have a couple of questions:

Could you explain somewhere why being an EDS is preserved by relabelling?

Also, why an 'if' there?

```
if BB > B:
   relabs.add(tuple(BB))
```

Nathann



---

archive/issue_events_216027.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-20T10:11:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216027"
}
```



---

archive/issue_events_216028.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-20T10:11:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216028"
}
```



---

archive/issue_comments_240704.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87eea8dce29ccb3e8eda0d35e982ac4352aa5179\">87eea8d</a></td><td><code>trac #17662: review</code></td></tr></table>\n",
    "created_at": "2015-04-20T10:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240704",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>**Comment 16:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87eea8dce29ccb3e8eda0d35e982ac4352aa5179">87eea8d</a></td><td><code>trac #17662: review</code></td></tr></table>




---

archive/issue_comments_240705.json:
```json
{
    "body": "**Changing commit** from \"[d3385807832a91a2a2171aeb9548059a672b5a59](https://github.com/sagemath/sagetrac-mirror/commit/d3385807832a91a2a2171aeb9548059a672b5a59)\" to \"[87eea8dce29ccb3e8eda0d35e982ac4352aa5179](https://github.com/sagemath/sagetrac-mirror/commit/87eea8dce29ccb3e8eda0d35e982ac4352aa5179)\".",
    "created_at": "2015-04-20T10:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240705",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[d3385807832a91a2a2171aeb9548059a672b5a59](https://github.com/sagemath/sagetrac-mirror/commit/d3385807832a91a2a2171aeb9548059a672b5a59)" to "[87eea8dce29ccb3e8eda0d35e982ac4352aa5179](https://github.com/sagemath/sagetrac-mirror/commit/87eea8dce29ccb3e8eda0d35e982ac4352aa5179)".



---

archive/issue_comments_240706.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nThanks for the commit.\n\nReplying to [@nathanncohen](#comment%3A15):\n> I also have a couple of questions:\n> \n> Could you explain somewhere why being an EDS is preserved by relabelling?\n\nYes, easy: $(ax+b) - (ax'+b) = a(x-x')$. So the cosets of the differences `x-x'` are just permuted by the multiplication by `a`. Because the condition is \"hit each of them twice\", it is invariant under permutation.\n\nWill write it.\n\n> Also, why an 'if' there?\n> \n> ```\n> if BB > B:\n>    relabs.add(tuple(BB))\n> ```\n\nRight, can be safely removed. Will do.\n\n- I have a commit with much cleaner/better branch cut, am I free to add it now?\n- I can get rid of `sage.ratio` by reorganizing `self.list_K`  into `[x^i for i in range(self.q-1)]`. That way the ratio would just be `(x-y)%(q-1)`. Do you think it would be better?\n\nVincent",
    "created_at": "2015-04-20T10:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240706",
    "user": "https://github.com/videlec"
}
```

<a id='comment:17'>**Comment 17:**</a>
Thanks for the commit.

Replying to [@nathanncohen](#comment%3A15):
> I also have a couple of questions:
> 
> Could you explain somewhere why being an EDS is preserved by relabelling?

Yes, easy: $(ax+b) - (ax'+b) = a(x-x')$. So the cosets of the differences `x-x'` are just permuted by the multiplication by `a`. Because the condition is "hit each of them twice", it is invariant under permutation.

Will write it.

> Also, why an 'if' there?
> 
> ```
> if BB > B:
>    relabs.add(tuple(BB))
> ```

Right, can be safely removed. Will do.

- I have a commit with much cleaner/better branch cut, am I free to add it now?
- I can get rid of `sage.ratio` by reorganizing `self.list_K`  into `[x^i for i in range(self.q-1)]`. That way the ratio would just be `(x-y)%(q-1)`. Do you think it would be better?

Vincent



---

archive/issue_comments_240707.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nHello,\n\n> Yes, easy: $(ax+b) - (ax'+b) = a(x-x')$. So the cosets of the differences `x-x'` are just permuted by the multiplication by `a`. Because the condition is \"hit each of them twice\", it is invariant under permutation.\n\nOh, of course `XD`\n\n> Will write it.\n\nThanks\n\n> - I have a commit with much cleaner/better branch cut, am I free to add it now?\n\nIf it makes the code simpler and easier, yes. If it makes it more efficient but more complicated, then in another ticket please.\n\n> - I can get rid of `sage.ratio` by reorganizing `self.list_K`  into `[x^i for i in range(self.q-1)]`. That way the ratio would just be `(x-y)%(q-1)`. Do you think it would be better?\n\nIn terms of perf I have no idea. If you do this replacement please comment such lines with their meaning in term of groups element like `i-j # x<sup>i/x</sup>j`.\n\nNathann",
    "created_at": "2015-04-20T10:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240707",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'>**Comment 18:**</a>
Hello,

> Yes, easy: $(ax+b) - (ax'+b) = a(x-x')$. So the cosets of the differences `x-x'` are just permuted by the multiplication by `a`. Because the condition is "hit each of them twice", it is invariant under permutation.

Oh, of course `XD`

> Will write it.

Thanks

> - I have a commit with much cleaner/better branch cut, am I free to add it now?

If it makes the code simpler and easier, yes. If it makes it more efficient but more complicated, then in another ticket please.

> - I can get rid of `sage.ratio` by reorganizing `self.list_K`  into `[x^i for i in range(self.q-1)]`. That way the ratio would just be `(x-y)%(q-1)`. Do you think it would be better?

In terms of perf I have no idea. If you do this replacement please comment such lines with their meaning in term of groups element like `i-j # x<sup>i/x</sup>j`.

Nathann



---

archive/issue_comments_240708.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19c4fd2fb9737cc459c9e4747d09f87e6ad3ab94\">19c4fd2</a></td><td><code>Trac 17662: remove the False from the database</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dee7f741ef3c4d01cbbc12983aefb0a431409be6\">dee7f74</a></td><td><code>Trac 17662: better cuts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d82e5791abd05c473d41bffb83ee3c3c3100039d\">d82e579</a></td><td><code>Trac 17662: review commit</code></td></tr></table>\n",
    "created_at": "2015-04-20T14:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240708",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>**Comment 19:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19c4fd2fb9737cc459c9e4747d09f87e6ad3ab94">19c4fd2</a></td><td><code>Trac 17662: remove the False from the database</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dee7f741ef3c4d01cbbc12983aefb0a431409be6">dee7f74</a></td><td><code>Trac 17662: better cuts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d82e5791abd05c473d41bffb83ee3c3c3100039d">d82e579</a></td><td><code>Trac 17662: review commit</code></td></tr></table>




---

archive/issue_comments_240709.json:
```json
{
    "body": "**Changing commit** from \"[87eea8dce29ccb3e8eda0d35e982ac4352aa5179](https://github.com/sagemath/sagetrac-mirror/commit/87eea8dce29ccb3e8eda0d35e982ac4352aa5179)\" to \"[d82e5791abd05c473d41bffb83ee3c3c3100039d](https://github.com/sagemath/sagetrac-mirror/commit/d82e5791abd05c473d41bffb83ee3c3c3100039d)\".",
    "created_at": "2015-04-20T14:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240709",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[87eea8dce29ccb3e8eda0d35e982ac4352aa5179](https://github.com/sagemath/sagetrac-mirror/commit/87eea8dce29ccb3e8eda0d35e982ac4352aa5179)" to "[d82e5791abd05c473d41bffb83ee3c3c3100039d](https://github.com/sagemath/sagetrac-mirror/commit/d82e5791abd05c473d41bffb83ee3c3c3100039d)".



---

archive/issue_comments_240710.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nback to needs review (and I set you as a reviewer before forgetting it).\n\nI did not get rid of `.ratio` as it is some work and might be less readable. I might reconsider it later.\n\nVincent",
    "created_at": "2015-04-20T14:31:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240710",
    "user": "https://github.com/videlec"
}
```

<a id='comment:20'>**Comment 20:**</a>
back to needs review (and I set you as a reviewer before forgetting it).

I did not get rid of `.ratio` as it is some work and might be less readable. I might reconsider it later.

Vincent



---

archive/issue_comments_240711.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2015-04-20T14:31:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240711",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_events_216029.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-20T14:31:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216029"
}
```



---

archive/issue_events_216030.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-20T14:31:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216030"
}
```



---

archive/issue_comments_240712.json:
```json
{
    "body": "**Changing commit** from \"[d82e5791abd05c473d41bffb83ee3c3c3100039d](https://github.com/sagemath/sagetrac-mirror/commit/d82e5791abd05c473d41bffb83ee3c3c3100039d)\" to \"[d0032bb7aa341861c08b694d86f48a33c16acc4f](https://github.com/sagemath/sagetrac-mirror/commit/d0032bb7aa341861c08b694d86f48a33c16acc4f)\".",
    "created_at": "2015-04-20T16:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240712",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[d82e5791abd05c473d41bffb83ee3c3c3100039d](https://github.com/sagemath/sagetrac-mirror/commit/d82e5791abd05c473d41bffb83ee3c3c3100039d)" to "[d0032bb7aa341861c08b694d86f48a33c16acc4f](https://github.com/sagemath/sagetrac-mirror/commit/d0032bb7aa341861c08b694d86f48a33c16acc4f)".



---

archive/issue_comments_240713.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0032bb7aa341861c08b694d86f48a33c16acc4f\">d0032bb</a></td><td><code>Trac 17662: review commit</code></td></tr></table>\n",
    "created_at": "2015-04-20T16:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240713",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>**Comment 21:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0032bb7aa341861c08b694d86f48a33c16acc4f">d0032bb</a></td><td><code>Trac 17662: review commit</code></td></tr></table>




---

archive/issue_comments_240714.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nOops. I introduced wrong specifications in `._B_automorphisms()`. Now it is ok. I also advertised the BIBD from [comment:12](#comment%3A12).",
    "created_at": "2015-04-20T16:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240714",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'>**Comment 22:**</a>
Oops. I introduced wrong specifications in `._B_automorphisms()`. Now it is ok. I also advertised the BIBD from [comment:12](#comment%3A12).



---

archive/issue_comments_240715.json:
```json
{
    "body": "**Changing commit** from \"[d0032bb7aa341861c08b694d86f48a33c16acc4f](https://github.com/sagemath/sagetrac-mirror/commit/d0032bb7aa341861c08b694d86f48a33c16acc4f)\" to \"[ac142f40af9a5df101cf7e312590d65bb71a307a](https://github.com/sagemath/sagetrac-mirror/commit/ac142f40af9a5df101cf7e312590d65bb71a307a)\".",
    "created_at": "2015-04-27T10:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240715",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[d0032bb7aa341861c08b694d86f48a33c16acc4f](https://github.com/sagemath/sagetrac-mirror/commit/d0032bb7aa341861c08b694d86f48a33c16acc4f)" to "[ac142f40af9a5df101cf7e312590d65bb71a307a](https://github.com/sagemath/sagetrac-mirror/commit/ac142f40af9a5df101cf7e312590d65bb71a307a)".



---

archive/issue_comments_240716.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/617852bf947d1cb6917676062151ba4ebbb279ab\">617852b</a></td><td><code>trac #17662: Merged with 6.7.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac142f40af9a5df101cf7e312590d65bb71a307a\">ac142f4</a></td><td><code>trac #17662: Review</code></td></tr></table>\n",
    "created_at": "2015-04-27T10:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240716",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>**Comment 23:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/617852bf947d1cb6917676062151ba4ebbb279ab">617852b</a></td><td><code>trac #17662: Merged with 6.7.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac142f40af9a5df101cf7e312590d65bb71a307a">ac142f4</a></td><td><code>trac #17662: Review</code></td></tr></table>




---

archive/issue_comments_240717.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nHellooooooooooooooooooo,\n\n- Isn't it weird that all EDS not considered 'up to isomorphism' always begin\n  with `0,1`? Perhaps you should say somewhere that they are always normalized?\n\n  ```\n  sage: E = EvenlyDistributedSetsBacktracker(Zmod(13), 4, up_to_isomorphism=False)\n  sage: for B in E: print B\n  [0, 1, 11, 5]\n  [0, 1, 4, 6]\n  [0, 1, 9, 3]\n  [0, 1, 8, 10]\n  ```\n\n- `to_difference_family` -- could you add a check that this is indeed a\n  difference family? Like with the usual `check` argument?\n\n- Same with `an_element`.\n\n- \"The value of the other\" -- the value of the other what?\n\n  ```\n  # Given one such function, the values of the other are 1/z, 1-z,\n  # 1/(1-z), (z-1)/z and z/(z-1).\n  ```\n\n- Why would that map `B[i]` to 1?\n\n  ```\n  # We choose\n  #    t -> (x - t)/ (x - B[j])\n  #  (that maps x to 0 and B[i] to 1\n  ```\n\n- I do not get this line\n\n  ```\n  # try to append x\n  if self._add_element(x,kk):\n      # note: the element x is already added to B in ._add_element()\n      if kk == k-1:\n          ans = self._B_automorphisms()\n          if ans is False:\n\t      continue\n  ```\n  Wouldn't it be better to call `_B_automorphisms()` in `self._add_element`, and\n  to not add the element if the min property is not satisfied?\n\n- I do not understand why you do the same test twice:\n\n  ```\n            if x == q-2:\n                kk -= 1\n                x = B[kk]\n                self._pop(kk)\n                if x == q-2:\n                    kk -= 1\n                    x = B[kk]\n                    self._pop(kk)\n                    if x == q-2:\n  ```\n  Isn't it better to define x as \"the last element in the list+1\"? This way you\n  couldn't have `x==q-2` when `B[kk-1]=q-2`\n\nI added a small commit containing mostly doc. I also changed a bit the\nmanagement of `self.t`. I began by replacing your `if self.t[i]:\nself.coset[i]=1` by a `self.coset[i] |= self.t[i]`, then noticed that it was\nprobably why you had been setting t to zero outside of the `_add_element`\nfunction.\n\nIt actually took me some time to understand that `t` was always equal to 0 when\nthis function was called. Because you initialized it elsewhere, I thought for a\nwhile that it used some values computed in another function.\n\nNathann",
    "created_at": "2015-04-27T10:25:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240717",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'>**Comment 24:**</a>
Hellooooooooooooooooooo,

- Isn't it weird that all EDS not considered 'up to isomorphism' always begin
  with `0,1`? Perhaps you should say somewhere that they are always normalized?

  ```
  sage: E = EvenlyDistributedSetsBacktracker(Zmod(13), 4, up_to_isomorphism=False)
  sage: for B in E: print B
  [0, 1, 11, 5]
  [0, 1, 4, 6]
  [0, 1, 9, 3]
  [0, 1, 8, 10]
  ```

- `to_difference_family` -- could you add a check that this is indeed a
  difference family? Like with the usual `check` argument?

- Same with `an_element`.

- "The value of the other" -- the value of the other what?

  ```
  # Given one such function, the values of the other are 1/z, 1-z,
  # 1/(1-z), (z-1)/z and z/(z-1).
  ```

- Why would that map `B[i]` to 1?

  ```
  # We choose
  #    t -> (x - t)/ (x - B[j])
  #  (that maps x to 0 and B[i] to 1
  ```

- I do not get this line

  ```
  # try to append x
  if self._add_element(x,kk):
      # note: the element x is already added to B in ._add_element()
      if kk == k-1:
          ans = self._B_automorphisms()
          if ans is False:
	      continue
  ```
  Wouldn't it be better to call `_B_automorphisms()` in `self._add_element`, and
  to not add the element if the min property is not satisfied?

- I do not understand why you do the same test twice:

  ```
            if x == q-2:
                kk -= 1
                x = B[kk]
                self._pop(kk)
                if x == q-2:
                    kk -= 1
                    x = B[kk]
                    self._pop(kk)
                    if x == q-2:
  ```
  Isn't it better to define x as "the last element in the list+1"? This way you
  couldn't have `x==q-2` when `B[kk-1]=q-2`

I added a small commit containing mostly doc. I also changed a bit the
management of `self.t`. I began by replacing your `if self.t[i]:
self.coset[i]=1` by a `self.coset[i] |= self.t[i]`, then noticed that it was
probably why you had been setting t to zero outside of the `_add_element`
function.

It actually took me some time to understand that `t` was always equal to 0 when
this function was called. Because you initialized it elsewhere, I thought for a
while that it used some values computed in another function.

Nathann



---

archive/issue_events_216031.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-27T10:25:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216031"
}
```



---

archive/issue_events_216032.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-27T10:25:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216032"
}
```



---

archive/issue_comments_240718.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef2a71fe8ade2060f90df420ee94f7238f9a511e\">ef2a71f</a></td><td><code>trac #17662: Review</code></td></tr></table>\n",
    "created_at": "2015-04-27T10:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240718",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:25'>**Comment 25:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef2a71fe8ade2060f90df420ee94f7238f9a511e">ef2a71f</a></td><td><code>trac #17662: Review</code></td></tr></table>




---

archive/issue_comments_240719.json:
```json
{
    "body": "**Changing commit** from \"[ac142f40af9a5df101cf7e312590d65bb71a307a](https://github.com/sagemath/sagetrac-mirror/commit/ac142f40af9a5df101cf7e312590d65bb71a307a)\" to \"[ef2a71fe8ade2060f90df420ee94f7238f9a511e](https://github.com/sagemath/sagetrac-mirror/commit/ef2a71fe8ade2060f90df420ee94f7238f9a511e)\".",
    "created_at": "2015-04-27T10:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240719",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[ac142f40af9a5df101cf7e312590d65bb71a307a](https://github.com/sagemath/sagetrac-mirror/commit/ac142f40af9a5df101cf7e312590d65bb71a307a)" to "[ef2a71fe8ade2060f90df420ee94f7238f9a511e](https://github.com/sagemath/sagetrac-mirror/commit/ef2a71fe8ade2060f90df420ee94f7238f9a511e)".



---

archive/issue_comments_240720.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a750d920a445e864b9fbf666a9e6c4d0776eb21\">0a750d9</a></td><td><code>Trac 17662: fix _check_cosets method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9343425c34ecb4c862a2f124f8402999fd76dbeb\">9343425</a></td><td><code>Trac 17662: check argument in to_difference_family</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc17b775b16b47ddc67cb39c00bcd8680075054f\">dc17b77</a></td><td><code>Trac 17662: _B_automorphisms -> _B_relabelled_copies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d25ced13ecc236197dc3da787699d141061192e4\">d25ced1</a></td><td><code>Trac 17662: more check and better iterator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9aab4a879de86983eff5334c47307197ce23306a\">9aab4a8</a></td><td><code>Trac 17662: fix wrong doctest + doctest with check=True</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7224a147e9af6bb37a891e6536aa10fbf3135bd6\">7224a14</a></td><td><code>Trac 17662: doc improvements</code></td></tr></table>\n",
    "created_at": "2015-04-27T14:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240720",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'>**Comment 26:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a750d920a445e864b9fbf666a9e6c4d0776eb21">0a750d9</a></td><td><code>Trac 17662: fix _check_cosets method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9343425c34ecb4c862a2f124f8402999fd76dbeb">9343425</a></td><td><code>Trac 17662: check argument in to_difference_family</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc17b775b16b47ddc67cb39c00bcd8680075054f">dc17b77</a></td><td><code>Trac 17662: _B_automorphisms -> _B_relabelled_copies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d25ced13ecc236197dc3da787699d141061192e4">d25ced1</a></td><td><code>Trac 17662: more check and better iterator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9aab4a879de86983eff5334c47307197ce23306a">9aab4a8</a></td><td><code>Trac 17662: fix wrong doctest + doctest with check=True</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7224a147e9af6bb37a891e6536aa10fbf3135bd6">7224a14</a></td><td><code>Trac 17662: doc improvements</code></td></tr></table>




---

archive/issue_comments_240721.json:
```json
{
    "body": "**Changing commit** from \"[ef2a71fe8ade2060f90df420ee94f7238f9a511e](https://github.com/sagemath/sagetrac-mirror/commit/ef2a71fe8ade2060f90df420ee94f7238f9a511e)\" to \"[7224a147e9af6bb37a891e6536aa10fbf3135bd6](https://github.com/sagemath/sagetrac-mirror/commit/7224a147e9af6bb37a891e6536aa10fbf3135bd6)\".",
    "created_at": "2015-04-27T14:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240721",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[ef2a71fe8ade2060f90df420ee94f7238f9a511e](https://github.com/sagemath/sagetrac-mirror/commit/ef2a71fe8ade2060f90df420ee94f7238f9a511e)" to "[7224a147e9af6bb37a891e6536aa10fbf3135bd6](https://github.com/sagemath/sagetrac-mirror/commit/7224a147e9af6bb37a891e6536aa10fbf3135bd6)".



---

archive/issue_comments_240722.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nReplying to [@nathanncohen](#comment%3A24):\nThanks for your commit\n\nI took care of all your comments in my 6 commits. I hope it is clearer now.\n\nIt seems also that the previous backtracker forgot some difference families!! Too bad!!\n\nVincent",
    "created_at": "2015-04-27T14:17:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240722",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'>**Comment 27:**</a>
Replying to [@nathanncohen](#comment%3A24):
Thanks for your commit

I took care of all your comments in my 6 commits. I hope it is clearer now.

It seems also that the previous backtracker forgot some difference families!! Too bad!!

Vincent



---

archive/issue_events_216033.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-27T14:17:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216033"
}
```



---

archive/issue_events_216034.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-27T14:17:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216034"
}
```



---

archive/issue_events_216035.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-27T14:20:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216035"
}
```



---

archive/issue_events_216036.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-27T14:20:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216036"
}
```



---

archive/issue_comments_240723.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nCould you explain in detail what you did in `d25ced13` and `0a750d9`? Read the diff, you will see how easy it is to figure out what you did.",
    "created_at": "2015-04-27T14:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240723",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:28'>**Comment 28:**</a>
Could you explain in detail what you did in `d25ced13` and `0a750d9`? Read the diff, you will see how easy it is to figure out what you did.



---

archive/issue_comments_240724.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nIt would also be cool if you could actually answer all points I raised in my review. It's a bit boring to ask question to which nobody ever answers.",
    "created_at": "2015-04-27T14:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240724",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:29'>**Comment 29:**</a>
It would also be cool if you could actually answer all points I raised in my review. It's a bit boring to ask question to which nobody ever answers.



---

archive/issue_comments_240725.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nHello,\n\n## Commits precision\n\nThe method `_check_cosets` was just wrong and not tested. I corrected it in `\u200b0a750d9`. It is also optimized to not use Python data. In the end there is a new example which test the `check=True` in the class (and which indirectly uses this method).\n\nIn `0a750d9`:\n- as you suggested, now `x = B[kk]`\n- I simplified the `_add_element` and rename it into `_check_last_element` it is also much cleaner and a bit faster\n- I removed `_pop` and copy/paste the corresponding code in two places\n- To choose the next element x in the main loop, there are now some easy check and it results in a great speedup\n\n## Answers\n\n> - Isn't it weird that all EDS not considered 'up to isomorphism' always begin\n>   with `0,1`? Perhaps you should say somewhere that they are always normalized?\n\nyes it is, now there is a comment in the `INPUT` section\n\n> - `to_difference_family` -- could you add a check that this is indeed a\n>   difference family? Like with the usual `check` argument?\n\n>\n>  - Same with `an_element`.\n\ndone and done\n \n> - \"The value of the other\" -- the value of the other what?\n> \n>   ```\n>   # Given one such function, the values of the other are 1/z, 1-z,\n>   # 1/(1-z), (z-1)/z and z/(z-1).\n>   ```\n\nit was value of the other functions. It is now clarified.\n\n> - Why would that map `B[i]` to 1?\n> \n>   ```\n>   # We choose\n>   #    t -> (x - t)/ (x - B[j])\n>   #  (that maps x to 0 and B[i] to 1\n>   ```\n\nit was a typo, should be \"(x - t) / (x - B[i])\". Corrected.\n\n> - I do not get this line\n>   ...\n\nit is now very different and I hope, simpler (see commit `0a750d9`)\n\n>   Wouldn't it be better to call `_B_automorphisms()` in `self._add_element`, and\n>   to not add the element if the min property is not satisfied?\n\n`_B_automorphisms` (now `_B_relabelled_copies`) is very slow. We should not use that seriously inside the main loop.\n\n> - I do not understand why you do the same test twice:\n>   ...\n>   Isn't it better to define x as \"the last element in the list+1\"? This way you\n>   couldn't have `x==q-2` when `B[kk-1]=q-2`\n\nthis is completely modified in the commit `0a750d9`\n \nVincent",
    "created_at": "2015-04-27T14:32:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240725",
    "user": "https://github.com/videlec"
}
```

<a id='comment:30'>**Comment 30:**</a>
Hello,

## Commits precision

The method `_check_cosets` was just wrong and not tested. I corrected it in `​0a750d9`. It is also optimized to not use Python data. In the end there is a new example which test the `check=True` in the class (and which indirectly uses this method).

In `0a750d9`:
- as you suggested, now `x = B[kk]`
- I simplified the `_add_element` and rename it into `_check_last_element` it is also much cleaner and a bit faster
- I removed `_pop` and copy/paste the corresponding code in two places
- To choose the next element x in the main loop, there are now some easy check and it results in a great speedup

## Answers

> - Isn't it weird that all EDS not considered 'up to isomorphism' always begin
>   with `0,1`? Perhaps you should say somewhere that they are always normalized?

yes it is, now there is a comment in the `INPUT` section

> - `to_difference_family` -- could you add a check that this is indeed a
>   difference family? Like with the usual `check` argument?

>
>  - Same with `an_element`.

done and done
 
> - "The value of the other" -- the value of the other what?
> 
>   ```
>   # Given one such function, the values of the other are 1/z, 1-z,
>   # 1/(1-z), (z-1)/z and z/(z-1).
>   ```

it was value of the other functions. It is now clarified.

> - Why would that map `B[i]` to 1?
> 
>   ```
>   # We choose
>   #    t -> (x - t)/ (x - B[j])
>   #  (that maps x to 0 and B[i] to 1
>   ```

it was a typo, should be "(x - t) / (x - B[i])". Corrected.

> - I do not get this line
>   ...

it is now very different and I hope, simpler (see commit `0a750d9`)

>   Wouldn't it be better to call `_B_automorphisms()` in `self._add_element`, and
>   to not add the element if the min property is not satisfied?

`_B_automorphisms` (now `_B_relabelled_copies`) is very slow. We should not use that seriously inside the main loop.

> - I do not understand why you do the same test twice:
>   ...
>   Isn't it better to define x as "the last element in the list+1"? This way you
>   couldn't have `x==q-2` when `B[kk-1]=q-2`

this is completely modified in the commit `0a750d9`
 
Vincent



---

archive/issue_events_216037.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-27T14:33:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216037"
}
```



---

archive/issue_events_216038.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-27T14:33:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216038"
}
```



---

archive/issue_comments_240726.json:
```json
{
    "body": "<a id='comment:32'>**Comment 32:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/007b862b6a8576c9e3127d9e6a4ed1df58d43e2f\">007b862</a></td><td><code>trac #17662: Review</code></td></tr></table>\n",
    "created_at": "2015-04-27T15:51:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240726",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'>**Comment 32:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/007b862b6a8576c9e3127d9e6a4ed1df58d43e2f">007b862</a></td><td><code>trac #17662: Review</code></td></tr></table>




---

archive/issue_comments_240727.json:
```json
{
    "body": "**Changing commit** from \"[7224a147e9af6bb37a891e6536aa10fbf3135bd6](https://github.com/sagemath/sagetrac-mirror/commit/7224a147e9af6bb37a891e6536aa10fbf3135bd6)\" to \"[007b862b6a8576c9e3127d9e6a4ed1df58d43e2f](https://github.com/sagemath/sagetrac-mirror/commit/007b862b6a8576c9e3127d9e6a4ed1df58d43e2f)\".",
    "created_at": "2015-04-27T15:51:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240727",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[7224a147e9af6bb37a891e6536aa10fbf3135bd6](https://github.com/sagemath/sagetrac-mirror/commit/7224a147e9af6bb37a891e6536aa10fbf3135bd6)" to "[007b862b6a8576c9e3127d9e6a4ed1df58d43e2f](https://github.com/sagemath/sagetrac-mirror/commit/007b862b6a8576c9e3127d9e6a4ed1df58d43e2f)".



---

archive/issue_comments_240728.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\nOkayyyyyyy. If you agree with that, it can go!\n\nNathann",
    "created_at": "2015-04-27T15:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240728",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:33'>**Comment 33:**</a>
Okayyyyyyy. If you agree with that, it can go!

Nathann



---

archive/issue_events_216039.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-27T15:56:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216039"
}
```



---

archive/issue_events_216040.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-27T15:56:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216040"
}
```



---

archive/issue_events_216041.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-27T15:56:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216041"
}
```



---

archive/issue_events_216042.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-27T15:56:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216042"
}
```



---

archive/issue_comments_240729.json:
```json
{
    "body": "<a id='comment:34'>**Comment 34:**</a>\nFantastic!\n\nI just restarted the computations for `k=11,12,13`. Now that the backtracker is much better there is a chance to get something...\n\nVincent",
    "created_at": "2015-04-27T15:56:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240729",
    "user": "https://github.com/videlec"
}
```

<a id='comment:34'>**Comment 34:**</a>
Fantastic!

I just restarted the computations for `k=11,12,13`. Now that the backtracker is much better there is a chance to get something...

Vincent



---

archive/issue_comments_240730.json:
```json
{
    "body": "<a id='comment:35'>**Comment 35:**</a>\nWow. Three patchbot are working on this ticket simultaneously.",
    "created_at": "2015-04-27T16:01:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240730",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:35'>**Comment 35:**</a>
Wow. Three patchbot are working on this ticket simultaneously.



---

archive/issue_events_216043.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-28T04:44:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216043"
}
```



---

archive/issue_events_216044.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b549ae1722e0a456b35305c4c486f8449a78720d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-04-28T04:44:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17662#event-216044"
}
```



---

archive/issue_comments_240731.json:
```json
{
    "body": "**Changing branch** from \"[public/17662](https://github.com/sagemath/sagetrac-mirror/tree/public/17662)\" to \"[007b862b6a8576c9e3127d9e6a4ed1df58d43e2f](https://github.com/sagemath/sagetrac-mirror/commit/007b862b6a8576c9e3127d9e6a4ed1df58d43e2f)\".",
    "created_at": "2015-04-28T04:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240731",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/17662](https://github.com/sagemath/sagetrac-mirror/tree/public/17662)" to "[007b862b6a8576c9e3127d9e6a4ed1df58d43e2f](https://github.com/sagemath/sagetrac-mirror/commit/007b862b6a8576c9e3127d9e6a4ed1df58d43e2f)".



---

archive/issue_comments_240732.json:
```json
{
    "body": "**Changing commit** from \"[007b862b6a8576c9e3127d9e6a4ed1df58d43e2f](https://github.com/sagemath/sagetrac-mirror/commit/007b862b6a8576c9e3127d9e6a4ed1df58d43e2f)\" to \"\".",
    "created_at": "2015-04-28T05:56:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240732",
    "user": "https://github.com/videlec"
}
```

**Changing commit** from "[007b862b6a8576c9e3127d9e6a4ed1df58d43e2f](https://github.com/sagemath/sagetrac-mirror/commit/007b862b6a8576c9e3127d9e6a4ed1df58d43e2f)" to "".



---

archive/issue_comments_240733.json:
```json
{
    "body": "<a id='comment:37'>**Comment 37:**</a>\nReplying to [@nathanncohen](#comment%3A35):\n> Wow. Three patchbot are working on this ticket simultaneously.\n\nThe way the patchbots determine tickets is completely not up to date. There is a \"secret list\" of 80 people that are allowed to work on tickets...\n\n   http://patchbot.sagemath.org/trusted/\n\nHopefully you are and I am, otherwise this ticket would not have been tested!!",
    "created_at": "2015-04-28T05:56:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17662#issuecomment-240733",
    "user": "https://github.com/videlec"
}
```

<a id='comment:37'>**Comment 37:**</a>
Replying to [@nathanncohen](#comment%3A35):
> Wow. Three patchbot are working on this ticket simultaneously.

The way the patchbots determine tickets is completely not up to date. There is a "secret list" of 80 people that are allowed to work on tickets...

   http://patchbot.sagemath.org/trusted/

Hopefully you are and I am, otherwise this ticket would not have been tested!!
