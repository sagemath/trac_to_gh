# Issue 17950: make modular_decomposition an optional spkg

archive/issues_017713.json:
```json
{
    "assignees": [],
    "body": "The code on which Sage relies to compute modular decompositions has been displaying a stopgap for a while. It seems that the problem has been fixed with an update, but it seems to be architecture-dependent (see #13744).\n\nThis branch puts some distance between Sage and this code: its source code had been copy/pasted into Sage's source code (I did that), and this is far from being clean. Thus, we turn this into an optional spkg.\n\nAn interesting consequence of this move is that we will (at least) be able to use the updated version of the code on platforms for which it work. It will also make it easier to install and test on other architectures. It also means that we stop shipping in our own source code a program which has proved to be unreliable at times.\n\nNathann\n\nthe package: http://www.steinertriples.fr/ncohen/modular_decomposition-20100607.tar.bz2\n\nCC:  @dcoudert @jdemeyer\n\nBranch: **[`e72ab22`](https://github.com/sagemath/sagetrac-mirror/commit/e72ab22fddbe84da5018eaf39f546a80d2133b2a)**\n\nReviewer: **David Coudert**\n\nAuthor: **Nathann Cohen**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17950_\n\n",
    "closed_at": "2015-03-17T08:33:59Z",
    "created_at": "2015-03-13T19:54:44Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "make modular_decomposition an optional spkg",
    "type": "issue",
    "updated_at": "2016-12-13T10:16:06Z",
    "url": "https://github.com/sagemath/sage/issues/17950",
    "user": "https://github.com/nathanncohen"
}
```
The code on which Sage relies to compute modular decompositions has been displaying a stopgap for a while. It seems that the problem has been fixed with an update, but it seems to be architecture-dependent (see #13744).

This branch puts some distance between Sage and this code: its source code had been copy/pasted into Sage's source code (I did that), and this is far from being clean. Thus, we turn this into an optional spkg.

An interesting consequence of this move is that we will (at least) be able to use the updated version of the code on platforms for which it work. It will also make it easier to install and test on other architectures. It also means that we stop shipping in our own source code a program which has proved to be unreliable at times.

Nathann

the package: http://www.steinertriples.fr/ncohen/modular_decomposition-20100607.tar.bz2

CC:  @dcoudert @jdemeyer

Branch: **[`e72ab22`](https://github.com/sagemath/sagetrac-mirror/commit/e72ab22fddbe84da5018eaf39f546a80d2133b2a)**

Reviewer: **David Coudert**

Author: **Nathann Cohen**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/17950_





---

archive/issue_events_256615.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-03-13T19:54:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256615"
}
```



---

archive/issue_events_256616.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-03-13T19:54:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "eeeeee",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256616"
}
```



---

archive/issue_events_256617.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-03-13T19:54:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256617"
}
```



---

archive/issue_events_256618.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-03-13T19:54:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256618"
}
```



---

archive/issue_events_256619.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-03-13T19:55:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256619"
}
```



---

archive/issue_comments_243272.json:
```json
{
    "body": "Branch: **[public/17950](https://github.com/sagemath/sagetrac-mirror/tree/public/17950)**",
    "created_at": "2015-03-13T19:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243272",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[public/17950](https://github.com/sagemath/sagetrac-mirror/tree/public/17950)**



---

archive/issue_comments_243273.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,5 @@\n An interesting consequence of this move is that we will (at least) be able to use the updated version of the code on platforms for which it work. It will also make it easier to install and test on other architectures. It also means that we stop shipping in our own source code a program which has proved to be unreliable at times.\n \n Nathann\n+\n+the package: http://www.steinertriples.fr/ncohen/modular_decomposition-20150313.tar.bz2\n``````\n",
    "created_at": "2015-03-13T19:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243273",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,5 @@
 An interesting consequence of this move is that we will (at least) be able to use the updated version of the code on platforms for which it work. It will also make it easier to install and test on other architectures. It also means that we stop shipping in our own source code a program which has proved to be unreliable at times.
 
 Nathann
+
+the package: http://www.steinertriples.fr/ncohen/modular_decomposition-20150313.tar.bz2
``````




---

archive/issue_comments_243274.json:
```json
{
    "body": "Commit: **[`5f1e7a6`](https://github.com/sagemath/sagetrac-mirror/commit/5f1e7a6f8a3edf93d1c6835d30dc46cce33dd487)**",
    "created_at": "2015-03-13T19:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243274",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`5f1e7a6`](https://github.com/sagemath/sagetrac-mirror/commit/5f1e7a6f8a3edf93d1c6835d30dc46cce33dd487)**



---

archive/issue_comments_243275.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f1e7a6f8a3edf93d1c6835d30dc46cce33dd487\"><code>5f1e7a6</code></a></td><td><code>trac #17950: make modular_decomposition an optional spkg</code></td></tr></table>\n",
    "created_at": "2015-03-13T19:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243275",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f1e7a6f8a3edf93d1c6835d30dc46cce33dd487"><code>5f1e7a6</code></a></td><td><code>trac #17950: make modular_decomposition an optional spkg</code></td></tr></table>




---

archive/issue_comments_243276.json:
```json
{
    "body": "Changed commit from **[`5f1e7a6`](https://github.com/sagemath/sagetrac-mirror/commit/5f1e7a6f8a3edf93d1c6835d30dc46cce33dd487)** to **[`bedbab1`](https://github.com/sagemath/sagetrac-mirror/commit/bedbab187f3399e4231650c2d0947d8513c290b0)**",
    "created_at": "2015-03-13T20:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243276",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5f1e7a6`](https://github.com/sagemath/sagetrac-mirror/commit/5f1e7a6f8a3edf93d1c6835d30dc46cce33dd487)** to **[`bedbab1`](https://github.com/sagemath/sagetrac-mirror/commit/bedbab187f3399e4231650c2d0947d8513c290b0)**



---

archive/issue_comments_243277.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bedbab187f3399e4231650c2d0947d8513c290b0\"><code>bedbab1</code></a></td><td><code>trac #17950: make modular_decomposition an optional spkg</code></td></tr></table>\n",
    "created_at": "2015-03-13T20:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243277",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bedbab187f3399e4231650c2d0947d8513c290b0"><code>bedbab1</code></a></td><td><code>trac #17950: make modular_decomposition an optional spkg</code></td></tr></table>




---

archive/issue_events_256620.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-03-14T14:20:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256620"
}
```



---

archive/issue_events_256621.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-03-14T14:20:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256621"
}
```



---

archive/issue_comments_243278.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWhat should I do to compile it?\n\n```\nconfetti:sage dcoudert$ git trac checkout 17950\nLoading ticket #17950...\nChecking out Trac #17950 remote branch public/17950 -> local branch t/17950/public/17950...\n\nconfetti:sage dcoudert$ ./sage -b\nscons: `install' is up to date.\nUpdating Cython code....\nEnabling Cython debugging support\nCompiling sage/graphs/modular_decomposition.pyx because it changed.\nCythonizing sage/graphs/modular_decomposition.pyx\nFinished Cythonizing, time: 4.56 seconds.\nDiscovering Python source code....\nDiscovered Python source, time: 0.03 seconds.\nCleaning up stale installed files....\n- cleaning /Users/dcoudert/sage/local/lib/python2.7/site-packages\nCleaning up stale file: /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/modular_decomposition/__init__.pyc\nCleaning up stale file: /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/modular_decomposition/__init__.py\nCleaning up stale file: /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/modular_decomposition/modular_decomposition.so\n- cleaning /Users/dcoudert/sage/local/lib/site-python\n- cleaning /Users/dcoudert/sage/src/build/lib.macosx-10.9-x86_64-2.7\nCleaning up stale file: /Users/dcoudert/sage/src/build/lib.macosx-10.9-x86_64-2.7/sage/graphs/modular_decomposition/__init__.py\nCleaning up stale file: /Users/dcoudert/sage/src/build/lib.macosx-10.9-x86_64-2.7/sage/graphs/modular_decomposition/modular_decomposition.so\nFinished cleaning, time: 0.11 seconds.\nrunning install\nrunning build\nrunning build_py\ncopying sage/graphs/all.py -> build/lib.macosx-10.9-x86_64-2.7/sage/graphs\ncopying sage/graphs/graph.py -> build/lib.macosx-10.9-x86_64-2.7/sage/graphs\nrunning build_ext\nbuilding 'sage.graphs.modular_decomposition' extension\nExecuting 1 command (using 1 thread)\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -I/Users/dcoudert/sage/local/include -I/Users/dcoudert/sage/src -I/Users/dcoudert/sage/src/c_lib/include -I/Users/dcoudert/sage/src/sage/ext -I/Users/dcoudert/sage/local/include/python2.7 -c build/cythonized/sage/graphs/modular_decomposition.c -o build/temp.macosx-10.9-x86_64-2.7/build/cythonized/sage/graphs/modular_decomposition.o -fno-strict-aliasing -w\nbuild/cythonized/sage/graphs/modular_decomposition.c:289:35: fatal error: modular_decomposition.h: No such file or directory\n #include \"modular_decomposition.h\"\n                                   ^\ncompilation terminated.\nerror: command 'gcc' failed with exit status 1\n```",
    "created_at": "2015-03-14T14:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243278",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:4" align="right">comment:4</div>

What should I do to compile it?

```
confetti:sage dcoudert$ git trac checkout 17950
Loading ticket #17950...
Checking out Trac #17950 remote branch public/17950 -> local branch t/17950/public/17950...

confetti:sage dcoudert$ ./sage -b
scons: `install' is up to date.
Updating Cython code....
Enabling Cython debugging support
Compiling sage/graphs/modular_decomposition.pyx because it changed.
Cythonizing sage/graphs/modular_decomposition.pyx
Finished Cythonizing, time: 4.56 seconds.
Discovering Python source code....
Discovered Python source, time: 0.03 seconds.
Cleaning up stale installed files....
- cleaning /Users/dcoudert/sage/local/lib/python2.7/site-packages
Cleaning up stale file: /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/modular_decomposition/__init__.pyc
Cleaning up stale file: /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/modular_decomposition/__init__.py
Cleaning up stale file: /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/modular_decomposition/modular_decomposition.so
- cleaning /Users/dcoudert/sage/local/lib/site-python
- cleaning /Users/dcoudert/sage/src/build/lib.macosx-10.9-x86_64-2.7
Cleaning up stale file: /Users/dcoudert/sage/src/build/lib.macosx-10.9-x86_64-2.7/sage/graphs/modular_decomposition/__init__.py
Cleaning up stale file: /Users/dcoudert/sage/src/build/lib.macosx-10.9-x86_64-2.7/sage/graphs/modular_decomposition/modular_decomposition.so
Finished cleaning, time: 0.11 seconds.
running install
running build
running build_py
copying sage/graphs/all.py -> build/lib.macosx-10.9-x86_64-2.7/sage/graphs
copying sage/graphs/graph.py -> build/lib.macosx-10.9-x86_64-2.7/sage/graphs
running build_ext
building 'sage.graphs.modular_decomposition' extension
Executing 1 command (using 1 thread)
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -I/Users/dcoudert/sage/local/include -I/Users/dcoudert/sage/src -I/Users/dcoudert/sage/src/c_lib/include -I/Users/dcoudert/sage/src/sage/ext -I/Users/dcoudert/sage/local/include/python2.7 -c build/cythonized/sage/graphs/modular_decomposition.c -o build/temp.macosx-10.9-x86_64-2.7/build/cythonized/sage/graphs/modular_decomposition.o -fno-strict-aliasing -w
build/cythonized/sage/graphs/modular_decomposition.c:289:35: fatal error: modular_decomposition.h: No such file or directory
 #include "modular_decomposition.h"
                                   ^
compilation terminated.
error: command 'gcc' failed with exit status 1
```



---

archive/issue_events_256622.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-03-14T16:33:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256622"
}
```



---

archive/issue_events_256623.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-03-14T16:33:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256623"
}
```



---

archive/issue_comments_243279.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n> What should I do to compile it?\n\nMy mistake. There is something I forgot to do, and unless I do it one cannot compile Sage without installing the new package. I just added a commit.\n\nWith this commit, should compile correctly. You will *not* be able to call `.modular_decomposition` as it should ask you to install a package first.\n\nIn order to install the package, copy the .tar.bz2 file (whose link appears in this ticket's description) into your upstream/ folder. Then, you will be able to run `sage -i modular_decomposition` and everything should be alright.\n\nNathann",
    "created_at": "2015-03-14T16:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243279",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

> What should I do to compile it?

My mistake. There is something I forgot to do, and unless I do it one cannot compile Sage without installing the new package. I just added a commit.

With this commit, should compile correctly. You will *not* be able to call `.modular_decomposition` as it should ask you to install a package first.

In order to install the package, copy the .tar.bz2 file (whose link appears in this ticket's description) into your upstream/ folder. Then, you will be able to run `sage -i modular_decomposition` and everything should be alright.

Nathann



---

archive/issue_comments_243280.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/054df904098a3013b6b91fd3662cd00680a24511\"><code>054df90</code></a></td><td><code>trac #17950: tell modules_list.py that modular_decomposition is optional</code></td></tr></table>\n",
    "created_at": "2015-03-14T16:34:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243280",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/054df904098a3013b6b91fd3662cd00680a24511"><code>054df90</code></a></td><td><code>trac #17950: tell modules_list.py that modular_decomposition is optional</code></td></tr></table>




---

archive/issue_comments_243281.json:
```json
{
    "body": "Changed commit from **[`bedbab1`](https://github.com/sagemath/sagetrac-mirror/commit/bedbab187f3399e4231650c2d0947d8513c290b0)** to **[`054df90`](https://github.com/sagemath/sagetrac-mirror/commit/054df904098a3013b6b91fd3662cd00680a24511)**",
    "created_at": "2015-03-14T16:34:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243281",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bedbab1`](https://github.com/sagemath/sagetrac-mirror/commit/bedbab187f3399e4231650c2d0947d8513c290b0)** to **[`054df90`](https://github.com/sagemath/sagetrac-mirror/commit/054df904098a3013b6b91fd3662cd00680a24511)**



---

archive/issue_comments_243282.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThat's apparently not enough.\n\n```\nOops, Sage crashed. We do our best to make it stable, but...\n```\n\nand at the end of the `Sage_crash_report.txt` we have:\n\n```\n/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/all.py in <module>()\n      5 lazy_import(\"sage.graphs.hypergraph_generators\", \"hypergraphs\")\n      6 from graph_database import GraphDatabase, GenericGraphQuery, GraphQuery\n      7 from graph import Graph\n      8 from digraph import DiGraph\n      9 from bipartite_graph import BipartiteGraph\n     10 from graph_bundle import GraphBundle\n     11 import weakly_chordal\n     12 import graph_list as graphs_list\n     13 import sage.graphs.generic_graph_pyx\n     14 import sage.graphs.generic_graph\n     15 import sage.graphs.graph_decompositions\n     16 import sage.graphs.graph\n     17 import sage.graphs.digraph\n     18 lazy_import(\"sage.graphs\", \"graph_coloring\")\n     19 import sage.graphs.graph_decompositions\n---> 20 import sage.graphs.modular_decomposition\n        global sage.graphs.modular_decomposition = undefined\n     21 import sage.graphs.comparability\n     22 from sage.graphs.cliquer import *\n     23 from graph_database import graph_db_info\n     24 lazy_import(\"sage.graphs.graph_editor\", \"graph_editor\")\n     25 \n     26 import sage.graphs.isgci\n     27 from sage.graphs.isgci import graph_classes\n     28 import sage.graphs.distances_all_pairs\n     29 import sage.graphs.trees\n     30 import sage.graphs.graph_latex\n\nImportError: No module named modular_decomposition\n\n***************************************************************************\n\nHistory of session input:\n*** Last line of input (may not be in above history):\n```",
    "created_at": "2015-03-14T17:18:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243282",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:7" align="right">comment:7</div>

That's apparently not enough.

```
Oops, Sage crashed. We do our best to make it stable, but...
```

and at the end of the `Sage_crash_report.txt` we have:

```
/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/all.py in <module>()
      5 lazy_import("sage.graphs.hypergraph_generators", "hypergraphs")
      6 from graph_database import GraphDatabase, GenericGraphQuery, GraphQuery
      7 from graph import Graph
      8 from digraph import DiGraph
      9 from bipartite_graph import BipartiteGraph
     10 from graph_bundle import GraphBundle
     11 import weakly_chordal
     12 import graph_list as graphs_list
     13 import sage.graphs.generic_graph_pyx
     14 import sage.graphs.generic_graph
     15 import sage.graphs.graph_decompositions
     16 import sage.graphs.graph
     17 import sage.graphs.digraph
     18 lazy_import("sage.graphs", "graph_coloring")
     19 import sage.graphs.graph_decompositions
---> 20 import sage.graphs.modular_decomposition
        global sage.graphs.modular_decomposition = undefined
     21 import sage.graphs.comparability
     22 from sage.graphs.cliquer import *
     23 from graph_database import graph_db_info
     24 lazy_import("sage.graphs.graph_editor", "graph_editor")
     25 
     26 import sage.graphs.isgci
     27 from sage.graphs.isgci import graph_classes
     28 import sage.graphs.distances_all_pairs
     29 import sage.graphs.trees
     30 import sage.graphs.graph_latex

ImportError: No module named modular_decomposition

***************************************************************************

History of session input:
*** Last line of input (may not be in above history):
```



---

archive/issue_comments_243283.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/894556fe81b9031df978490c0faac643fad8991e\"><code>894556f</code></a></td><td><code>trac #17950: Removing an import</code></td></tr></table>\n",
    "created_at": "2015-03-14T17:22:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243283",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/894556fe81b9031df978490c0faac643fad8991e"><code>894556f</code></a></td><td><code>trac #17950: Removing an import</code></td></tr></table>




---

archive/issue_comments_243284.json:
```json
{
    "body": "Changed commit from **[`054df90`](https://github.com/sagemath/sagetrac-mirror/commit/054df904098a3013b6b91fd3662cd00680a24511)** to **[`894556f`](https://github.com/sagemath/sagetrac-mirror/commit/894556fe81b9031df978490c0faac643fad8991e)**",
    "created_at": "2015-03-14T17:22:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243284",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`054df90`](https://github.com/sagemath/sagetrac-mirror/commit/054df904098a3013b6b91fd3662cd00680a24511)** to **[`894556f`](https://github.com/sagemath/sagetrac-mirror/commit/894556fe81b9031df978490c0faac643fad8991e)**



---

archive/issue_comments_243285.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nTrue. This bug does not happen on my computer as `modular_decomposition` is installed. I just fixed it.\n\nNathann",
    "created_at": "2015-03-14T17:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243285",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">comment:9</div>

True. This bug does not happen on my computer as `modular_decomposition` is installed. I just fixed it.

Nathann



---

archive/issue_comments_243286.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI can now start sage. We are making progress ;)\n\nBut, before trying to install the package, I did:\n\n```\n./sage -t src/sage/graphs/graph.py\n**********************************************************************\nFile \"src/sage/graphs/graph.py\", line 6505, in sage.graphs.graph.Graph.is_prime\nFailed example:\n    graphs.PetersenGraph().is_prime()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 492, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 854, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph.Graph.is_prime[0]>\", line 1, in <module>\n        graphs.PetersenGraph().is_prime()\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py\", line 6516, in is_prime\n        D = self.modular_decomposition()\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py\", line 6480, in modular_decomposition\n        raise RuntimeError(\"In order to use this method you must \"\n    RuntimeError: In order to use this method you must install the modular_decomposition package\n**********************************************************************\nFile \"src/sage/graphs/graph.py\", line 6507, in sage.graphs.graph.Graph.is_prime\nFailed example:\n    graphs.BullGraph().is_prime()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 492, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 854, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph.Graph.is_prime[1]>\", line 1, in <module>\n        graphs.BullGraph().is_prime()\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py\", line 6516, in is_prime\n        D = self.modular_decomposition()\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py\", line 6480, in modular_decomposition\n        raise RuntimeError(\"In order to use this method you must \"\n    RuntimeError: In order to use this method you must install the modular_decomposition package\n**********************************************************************\nFile \"src/sage/graphs/graph.py\", line 6512, in sage.graphs.graph.Graph.is_prime\nFailed example:\n    (graphs.PetersenGraph() + graphs.BullGraph()).is_prime()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 492, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 854, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph.Graph.is_prime[2]>\", line 1, in <module>\n        (graphs.PetersenGraph() + graphs.BullGraph()).is_prime()\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py\", line 6516, in is_prime\n        D = self.modular_decomposition()\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py\", line 6480, in modular_decomposition\n        raise RuntimeError(\"In order to use this method you must \"\n    RuntimeError: In order to use this method you must install the modular_decomposition package\n**********************************************************************\n1 item had failures:\n   3 of   4 in sage.graphs.graph.Graph.is_prime\n    [657 tests, 3 failures, 13.19 s]\n----------------------------------------------------------------------\nsage -t src/sage/graphs/graph.py  # 3 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 13.5 seconds\n    cpu time: 9.7 seconds\n    cumulative wall time: 13.2 seconds\n```",
    "created_at": "2015-03-14T17:27:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243286",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:10" align="right">comment:10</div>

I can now start sage. We are making progress ;)

But, before trying to install the package, I did:

```
./sage -t src/sage/graphs/graph.py
**********************************************************************
File "src/sage/graphs/graph.py", line 6505, in sage.graphs.graph.Graph.is_prime
Failed example:
    graphs.PetersenGraph().is_prime()
Exception raised:
    Traceback (most recent call last):
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 492, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 854, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph.Graph.is_prime[0]>", line 1, in <module>
        graphs.PetersenGraph().is_prime()
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py", line 6516, in is_prime
        D = self.modular_decomposition()
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py", line 6480, in modular_decomposition
        raise RuntimeError("In order to use this method you must "
    RuntimeError: In order to use this method you must install the modular_decomposition package
**********************************************************************
File "src/sage/graphs/graph.py", line 6507, in sage.graphs.graph.Graph.is_prime
Failed example:
    graphs.BullGraph().is_prime()
Exception raised:
    Traceback (most recent call last):
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 492, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 854, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph.Graph.is_prime[1]>", line 1, in <module>
        graphs.BullGraph().is_prime()
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py", line 6516, in is_prime
        D = self.modular_decomposition()
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py", line 6480, in modular_decomposition
        raise RuntimeError("In order to use this method you must "
    RuntimeError: In order to use this method you must install the modular_decomposition package
**********************************************************************
File "src/sage/graphs/graph.py", line 6512, in sage.graphs.graph.Graph.is_prime
Failed example:
    (graphs.PetersenGraph() + graphs.BullGraph()).is_prime()
Exception raised:
    Traceback (most recent call last):
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 492, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 854, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph.Graph.is_prime[2]>", line 1, in <module>
        (graphs.PetersenGraph() + graphs.BullGraph()).is_prime()
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py", line 6516, in is_prime
        D = self.modular_decomposition()
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py", line 6480, in modular_decomposition
        raise RuntimeError("In order to use this method you must "
    RuntimeError: In order to use this method you must install the modular_decomposition package
**********************************************************************
1 item had failures:
   3 of   4 in sage.graphs.graph.Graph.is_prime
    [657 tests, 3 failures, 13.19 s]
----------------------------------------------------------------------
sage -t src/sage/graphs/graph.py  # 3 doctests failed
----------------------------------------------------------------------
Total time for all tests: 13.5 seconds
    cpu time: 9.7 seconds
    cumulative wall time: 13.2 seconds
```



---

archive/issue_comments_243287.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2e940fcb80d9b1daa3a09d642347617b4c13277\"><code>b2e940f</code></a></td><td><code>trac #17950: Broken doctests</code></td></tr></table>\n",
    "created_at": "2015-03-14T17:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243287",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2e940fcb80d9b1daa3a09d642347617b4c13277"><code>b2e940f</code></a></td><td><code>trac #17950: Broken doctests</code></td></tr></table>




---

archive/issue_comments_243288.json:
```json
{
    "body": "Changed commit from **[`894556f`](https://github.com/sagemath/sagetrac-mirror/commit/894556fe81b9031df978490c0faac643fad8991e)** to **[`b2e940f`](https://github.com/sagemath/sagetrac-mirror/commit/b2e940fcb80d9b1daa3a09d642347617b4c13277)**",
    "created_at": "2015-03-14T17:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243288",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`894556f`](https://github.com/sagemath/sagetrac-mirror/commit/894556fe81b9031df978490c0faac643fad8991e)** to **[`b2e940f`](https://github.com/sagemath/sagetrac-mirror/commit/b2e940fcb80d9b1daa3a09d642347617b4c13277)**



---

archive/issue_comments_243289.json:
```json
{
    "body": "Changed commit from **[`b2e940f`](https://github.com/sagemath/sagetrac-mirror/commit/b2e940fcb80d9b1daa3a09d642347617b4c13277)** to **[`c19a921`](https://github.com/sagemath/sagetrac-mirror/commit/c19a921b7385396cd42a12774618418373887b82)**",
    "created_at": "2015-03-14T17:31:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243289",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b2e940f`](https://github.com/sagemath/sagetrac-mirror/commit/b2e940fcb80d9b1daa3a09d642347617b4c13277)** to **[`c19a921`](https://github.com/sagemath/sagetrac-mirror/commit/c19a921b7385396cd42a12774618418373887b82)**



---

archive/issue_comments_243290.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c19a921b7385396cd42a12774618418373887b82\"><code>c19a921</code></a></td><td><code>trac #17950: Broken doctests</code></td></tr></table>\n",
    "created_at": "2015-03-14T17:31:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243290",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c19a921b7385396cd42a12774618418373887b82"><code>c19a921</code></a></td><td><code>trac #17950: Broken doctests</code></td></tr></table>




---

archive/issue_comments_243291.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAs I told you, we are making progress! I can now compile, start sage, pass all tests, etc. without installing the spkg.\n\nIn the online doc of the `modular_decomposition` method. After `Note: In order to use this method you must install the \"modular_decomposition\" optional package.`  you could add a `see blah blah blah`.\n\nI'm now trying to install the spkg. I'm able to compile but:\n\n```\nsage: G = graphs.PetersenGraph()\nsage: G.modular_decomposition()\n/Users/dcoudert/sage/src/bin/sage-ipython:1:\n********************************************************************************\nGraph.modular_decomposition is known to return wrong results\nThis issue is being tracked at https://github.com/sagemath/sage/issues/13744.\n********************************************************************************\n('Prime', [2, 6, 3, 9, 7, 8, 0, 1, 5, 4])\nsage: G.is_prime()\nTrue\nsage: G.modular_decomposition()\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nSage will now terminate.\n------------------------------------------------------------------------\n./sage: line 134: 17334 Segmentation fault: 11  \"$SAGE_ROOT/src/bin/sage\" \"$@\"\n```",
    "created_at": "2015-03-14T17:58:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243291",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:13" align="right">comment:13</div>

As I told you, we are making progress! I can now compile, start sage, pass all tests, etc. without installing the spkg.

In the online doc of the `modular_decomposition` method. After `Note: In order to use this method you must install the "modular_decomposition" optional package.`  you could add a `see blah blah blah`.

I'm now trying to install the spkg. I'm able to compile but:

```
sage: G = graphs.PetersenGraph()
sage: G.modular_decomposition()
/Users/dcoudert/sage/src/bin/sage-ipython:1:
********************************************************************************
Graph.modular_decomposition is known to return wrong results
This issue is being tracked at https://github.com/sagemath/sage/issues/13744.
********************************************************************************
('Prime', [2, 6, 3, 9, 7, 8, 0, 1, 5, 4])
sage: G.is_prime()
True
sage: G.modular_decomposition()
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
./sage: line 134: 17334 Segmentation fault: 11  "$SAGE_ROOT/src/bin/sage" "$@"
```



---

archive/issue_comments_243292.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHello,\n\n> In the online doc of the `modular_decomposition` method. After `Note: In order to use this method you must install the \"modular_decomposition\" optional package.`  you could add a `see blah blah blah`.\n\nDone.\n\n> I'm now trying to install the spkg. I'm able to compile but:\n\nI cannot reproduce this bug with your commands. Is it deterministic on your computer ?\n\nThis may be related to the reports from #13744. The original code itself seems to have problems, and my repeated reports changed nothing. This is part of the reason why I am trying to move this code away from Sage. Are you using a Mac computer ?\n\nNathann",
    "created_at": "2015-03-14T18:16:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243292",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

Hello,

> In the online doc of the `modular_decomposition` method. After `Note: In order to use this method you must install the "modular_decomposition" optional package.`  you could add a `see blah blah blah`.

Done.

> I'm now trying to install the spkg. I'm able to compile but:

I cannot reproduce this bug with your commands. Is it deterministic on your computer ?

This may be related to the reports from #13744. The original code itself seems to have problems, and my repeated reports changed nothing. This is part of the reason why I am trying to move this code away from Sage. Are you using a Mac computer ?

Nathann



---

archive/issue_comments_243293.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ecbf7ce7bd69bf23c215bb2c03852a29637cfcb\"><code>0ecbf7c</code></a></td><td><code>trac #17950: add a link toward sage.misc.packages.</code></td></tr></table>\n",
    "created_at": "2015-03-14T18:17:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243293",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ecbf7ce7bd69bf23c215bb2c03852a29637cfcb"><code>0ecbf7c</code></a></td><td><code>trac #17950: add a link toward sage.misc.packages.</code></td></tr></table>




---

archive/issue_comments_243294.json:
```json
{
    "body": "Changed commit from **[`c19a921`](https://github.com/sagemath/sagetrac-mirror/commit/c19a921b7385396cd42a12774618418373887b82)** to **[`0ecbf7c`](https://github.com/sagemath/sagetrac-mirror/commit/0ecbf7ce7bd69bf23c215bb2c03852a29637cfcb)**",
    "created_at": "2015-03-14T18:17:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243294",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c19a921`](https://github.com/sagemath/sagetrac-mirror/commit/c19a921b7385396cd42a12774618418373887b82)** to **[`0ecbf7c`](https://github.com/sagemath/sagetrac-mirror/commit/0ecbf7ce7bd69bf23c215bb2c03852a29637cfcb)**



---

archive/issue_comments_243295.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nYes I'm using a mac.\n\nI can reproduce the bug, but it's kind of random. Sometimes its working, sometimes not.\n\n```\nconfetti:sage dcoudert$ ./sage\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Sage Version 6.6.beta5, Release Date: 2015-03-13                   \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: G = graphs.PetersenGraph()\nsage: G.modular_decomposition()\n/Users/dcoudert/sage/src/bin/sage-ipython:1:\n********************************************************************************\nGraph.modular_decomposition is known to return wrong results\nThis issue is being tracked at https://github.com/sagemath/sage/issues/13744.\n********************************************************************************\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nSage will now terminate.\n------------------------------------------------------------------------\n./sage: line 134: 17513 Segmentation fault: 11  \"$SAGE_ROOT/src/bin/sage\" \"$@\"\nconfetti:sage dcoudert$ ./sage\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Sage Version 6.6.beta5, Release Date: 2015-03-13                   \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: G = graphs.PetersenGraph()\nsage: G.is_prime()\n/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:6524:\n********************************************************************************\nGraph.modular_decomposition is known to return wrong results\nThis issue is being tracked at https://github.com/sagemath/sage/issues/13744.\n********************************************************************************\nTrue\nsage: G.modular_decomposition()\n('Prime', [('Prime', [2, 6, 3, 9]), 7, 8, 0, 1, 5, 4])\nsage: G = graphs.PetersenGraph()\nsage: G.modular_decomposition()\n('Prime', [2, 6, 3, 9, 7, 8, 0, 1, 5, 4])\nsage: G.is_prime()\nFalse\nsage: G.modular_decomposition()\n('Prime', [('Parallel', [2, 6]), 3, 9, 7, 8, 0, 1, 5, 4])\nsage: \nExiting Sage (CPU time 0m0.08s, Wall time 0m23.56s).\nconfetti:sage dcoudert$ ./sage\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Sage Version 6.6.beta5, Release Date: 2015-03-13                   \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: G = graphs.PetersenGraph()\nsage: G.modular_decomposition()\n/Users/dcoudert/sage/src/bin/sage-ipython:1:\n********************************************************************************\nGraph.modular_decomposition is known to return wrong results\nThis issue is being tracked at https://github.com/sagemath/sage/issues/13744.\n********************************************************************************\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nSage will now terminate.\n------------------------------------------------------------------------\n./sage: line 134: 17606 Segmentation fault: 11  \"$SAGE_ROOT/src/bin/sage\" \"$@\"\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Sage Version 6.6.beta5, Release Date: 2015-03-13                   \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: G = graphs.PetersenGraph()\nsage: G.is_prime()\n/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:6524:\n********************************************************************************\nGraph.modular_decomposition is known to return wrong results\nThis issue is being tracked at https://github.com/sagemath/sage/issues/13744.\n********************************************************************************\nTrue\nsage: for i in range(1000):\n....:     G = graphs.RandomBarabasiAlbert(1000,2)\n....:     _ = G.modular_decomposition()\n....:     \n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nSage will now terminate.\n------------------------------------------------------------------------\n./sage: line 134: 17655 Segmentation fault: 11  \"$SAGE_ROOT/src/bin/sage\" \"$@\"\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Sage Version 6.6.beta5, Release Date: 2015-03-13                   \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: G = graphs.PetersenGraph()\nsage: G.is_prime()\n/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:6524:\n********************************************************************************\nGraph.modular_decomposition is known to return wrong results\nThis issue is being tracked at https://github.com/sagemath/sage/issues/13744.\n********************************************************************************\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nSage will now terminate.\n------------------------------------------------------------------------\n./sage: line 134: 17703 Segmentation fault: 11  \"$SAGE_ROOT/src/bin/sage\" \"$@\"\n```",
    "created_at": "2015-03-14T18:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243295",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:16" align="right">comment:16</div>

Yes I'm using a mac.

I can reproduce the bug, but it's kind of random. Sometimes its working, sometimes not.

```
confetti:sage dcoudert$ ./sage

 Sage Version 6.6.beta5, Release Date: 2015-03-13                   
 Type "notebook()" for the browser-based notebook interface.        
 Type "help()" for help.                                            


 Warning: this is a prerelease version, and it may be unstable.     

sage: G = graphs.PetersenGraph()
sage: G.modular_decomposition()
/Users/dcoudert/sage/src/bin/sage-ipython:1:
********************************************************************************
Graph.modular_decomposition is known to return wrong results
This issue is being tracked at https://github.com/sagemath/sage/issues/13744.
********************************************************************************
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
./sage: line 134: 17513 Segmentation fault: 11  "$SAGE_ROOT/src/bin/sage" "$@"
confetti:sage dcoudert$ ./sage

 Sage Version 6.6.beta5, Release Date: 2015-03-13                   
 Type "notebook()" for the browser-based notebook interface.        
 Type "help()" for help.                                            


 Warning: this is a prerelease version, and it may be unstable.     

sage: G = graphs.PetersenGraph()
sage: G.is_prime()
/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:6524:
********************************************************************************
Graph.modular_decomposition is known to return wrong results
This issue is being tracked at https://github.com/sagemath/sage/issues/13744.
********************************************************************************
True
sage: G.modular_decomposition()
('Prime', [('Prime', [2, 6, 3, 9]), 7, 8, 0, 1, 5, 4])
sage: G = graphs.PetersenGraph()
sage: G.modular_decomposition()
('Prime', [2, 6, 3, 9, 7, 8, 0, 1, 5, 4])
sage: G.is_prime()
False
sage: G.modular_decomposition()
('Prime', [('Parallel', [2, 6]), 3, 9, 7, 8, 0, 1, 5, 4])
sage: 
Exiting Sage (CPU time 0m0.08s, Wall time 0m23.56s).
confetti:sage dcoudert$ ./sage

 Sage Version 6.6.beta5, Release Date: 2015-03-13                   
 Type "notebook()" for the browser-based notebook interface.        
 Type "help()" for help.                                            


 Warning: this is a prerelease version, and it may be unstable.     

sage: G = graphs.PetersenGraph()
sage: G.modular_decomposition()
/Users/dcoudert/sage/src/bin/sage-ipython:1:
********************************************************************************
Graph.modular_decomposition is known to return wrong results
This issue is being tracked at https://github.com/sagemath/sage/issues/13744.
********************************************************************************
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
./sage: line 134: 17606 Segmentation fault: 11  "$SAGE_ROOT/src/bin/sage" "$@"

 Sage Version 6.6.beta5, Release Date: 2015-03-13                   
 Type "notebook()" for the browser-based notebook interface.        
 Type "help()" for help.                                            


 Warning: this is a prerelease version, and it may be unstable.     

sage: G = graphs.PetersenGraph()
sage: G.is_prime()
/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:6524:
********************************************************************************
Graph.modular_decomposition is known to return wrong results
This issue is being tracked at https://github.com/sagemath/sage/issues/13744.
********************************************************************************
True
sage: for i in range(1000):
....:     G = graphs.RandomBarabasiAlbert(1000,2)
....:     _ = G.modular_decomposition()
....:     
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
./sage: line 134: 17655 Segmentation fault: 11  "$SAGE_ROOT/src/bin/sage" "$@"

 Sage Version 6.6.beta5, Release Date: 2015-03-13                   
 Type "notebook()" for the browser-based notebook interface.        
 Type "help()" for help.                                            


 Warning: this is a prerelease version, and it may be unstable.     

sage: G = graphs.PetersenGraph()
sage: G.is_prime()
/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:6524:
********************************************************************************
Graph.modular_decomposition is known to return wrong results
This issue is being tracked at https://github.com/sagemath/sage/issues/13744.
********************************************************************************
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
./sage: line 134: 17703 Segmentation fault: 11  "$SAGE_ROOT/src/bin/sage" "$@"
```



---

archive/issue_comments_243296.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nWell.. On my computer your loop with 1000 random graphs ends without any problem.",
    "created_at": "2015-03-14T18:34:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243296",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

Well.. On my computer your loop with 1000 random graphs ends without any problem.



---

archive/issue_comments_243297.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWith the loop, some times it crashes after 3 graphs, 600, or never. This is really random segfault.",
    "created_at": "2015-03-14T18:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243297",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:18" align="right">comment:18</div>

With the loop, some times it crashes after 3 graphs, 600, or never. This is really random segfault.



---

archive/issue_comments_243298.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nAlso, have you seen that I don't always have the same answer on the Petersen?",
    "created_at": "2015-03-14T18:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243298",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:19" align="right">comment:19</div>

Also, have you seen that I don't always have the same answer on the Petersen?



---

archive/issue_comments_243299.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nIt is very likely that this segfault comes from the code itself. Do you think that this should stop us from turning it into a module ?\n\nWhat we currently ship in Sage returns wrong results, and this new version of the code fixes it. Though we have segfaults. Could you try to run this code with the old version of Sage, see if it works ?\n\nI could build a package with the old version of the code, if it does not segfault. It would still return wrong results, though.\n\n> Also, have you seen that I don't always have the same answer on the Petersen?\n\nYesyes. I cannot reproduce that on my computer either, but it was apparently reported in #13744.\n\nNathann",
    "created_at": "2015-03-14T19:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243299",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:20" align="right">comment:20</div>

It is very likely that this segfault comes from the code itself. Do you think that this should stop us from turning it into a module ?

What we currently ship in Sage returns wrong results, and this new version of the code fixes it. Though we have segfaults. Could you try to run this code with the old version of Sage, see if it works ?

I could build a package with the old version of the code, if it does not segfault. It would still return wrong results, though.

> Also, have you seen that I don't always have the same answer on the Petersen?

Yesyes. I cannot reproduce that on my computer either, but it was apparently reported in #13744.

Nathann



---

archive/issue_comments_243300.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI don't have problems with the previous version (branch develop): no segfault with the long loop.\nI don't know what is the best to do.\nD.",
    "created_at": "2015-03-14T21:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243300",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:21" align="right">comment:21</div>

I don't have problems with the previous version (branch develop): no segfault with the long loop.
I don't know what is the best to do.
D.



---

archive/issue_comments_243301.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e72ab22fddbe84da5018eaf39f546a80d2133b2a\"><code>e72ab22</code></a></td><td><code>trac #17950: Use the old C code instead</code></td></tr></table>\n",
    "created_at": "2015-03-15T16:04:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243301",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e72ab22fddbe84da5018eaf39f546a80d2133b2a"><code>e72ab22</code></a></td><td><code>trac #17950: Use the old C code instead</code></td></tr></table>




---

archive/issue_comments_243302.json:
```json
{
    "body": "Changed commit from **[`0ecbf7c`](https://github.com/sagemath/sagetrac-mirror/commit/0ecbf7ce7bd69bf23c215bb2c03852a29637cfcb)** to **[`e72ab22`](https://github.com/sagemath/sagetrac-mirror/commit/e72ab22fddbe84da5018eaf39f546a80d2133b2a)**",
    "created_at": "2015-03-15T16:04:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243302",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0ecbf7c`](https://github.com/sagemath/sagetrac-mirror/commit/0ecbf7ce7bd69bf23c215bb2c03852a29637cfcb)** to **[`e72ab22`](https://github.com/sagemath/sagetrac-mirror/commit/e72ab22fddbe84da5018eaf39f546a80d2133b2a)**



---

archive/issue_comments_243303.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI changed the branch and the package's name (please remove the previous one from your copy of Sage). It ships the .c files that are currently contained in Sage (and return wrong results too). You should not experience anything that does not already happen, however.\n\nNathann",
    "created_at": "2015-03-15T16:05:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243303",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:23" align="right">comment:23</div>

I changed the branch and the package's name (please remove the previous one from your copy of Sage). It ships the .c files that are currently contained in Sage (and return wrong results too). You should not experience anything that does not already happen, however.

Nathann



---

archive/issue_comments_243304.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n \n Nathann\n \n-the package: http://www.steinertriples.fr/ncohen/modular_decomposition-20150313.tar.bz2\n+the package: http://www.steinertriples.fr/ncohen/modular_decomposition-20100607.tar.bz2\n``````\n",
    "created_at": "2015-03-15T16:05:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243304",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 
 Nathann
 
-the package: http://www.steinertriples.fr/ncohen/modular_decomposition-20150313.tar.bz2
+the package: http://www.steinertriples.fr/ncohen/modular_decomposition-20100607.tar.bz2
``````




---

archive/issue_comments_243305.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nWell, now I have directly a segfault :(\n\nWhat's the difference between the two versions ?",
    "created_at": "2015-03-15T16:12:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243305",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:24" align="right">comment:24</div>

Well, now I have directly a segfault :(

What's the difference between the two versions ?



---

archive/issue_comments_243306.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n> What's the difference between the two versions ?\n\nI had one at some point. Now that you have installed the package I just built, could you 'touch' `modular_decomposition.pyx` and run `sage -b` ?\n\nNathann",
    "created_at": "2015-03-15T16:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243306",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:25" align="right">comment:25</div>

> What's the difference between the two versions ?

I had one at some point. Now that you have installed the package I just built, could you 'touch' `modular_decomposition.pyx` and run `sage -b` ?

Nathann



---

archive/issue_comments_243307.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nIt's apparently working: no segfault with the big for loop.\n\nShould we consider it is better like that?\n\nDavid.",
    "created_at": "2015-03-15T16:37:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243307",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:26" align="right">comment:26</div>

It's apparently working: no segfault with the big for loop.

Should we consider it is better like that?

David.



---

archive/issue_comments_243308.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nWell technically it is better, as the code is a bit further from Sage's source code, as it should have been from the beginning. Plus it is optional. Plus those .c files have never been reviewed anyway, and they are in french `:-P`\n\nAnd it will make it easier to test for bugs later, as we will only have to install the new files. And I hope that this will get solved someday `T_T`\n\nNathann",
    "created_at": "2015-03-15T17:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243308",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:27" align="right">comment:27</div>

Well technically it is better, as the code is a bit further from Sage's source code, as it should have been from the beginning. Plus it is optional. Plus those .c files have never been reviewed anyway, and they are in french `:-P`

And it will make it easier to test for bugs later, as we will only have to install the new files. And I hope that this will get solved someday `T_T`

Nathann



---

archive/issue_events_256624.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-03-15T17:45:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256624"
}
```



---

archive/issue_events_256625.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-03-15T17:45:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256625"
}
```



---

archive/issue_comments_243309.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nSince the patch is working and improves upon previous situation, I set it to positive review.\n\nAbout the c code, Guillaume Ducoffe has a c++/boost implementation. It could be an interesting alternative to the current c code which is apparently no longer maintained by its author. But I don't know if we can use boost (portability).\n\nDavid.",
    "created_at": "2015-03-15T17:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243309",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:28" align="right">comment:28</div>

Since the patch is working and improves upon previous situation, I set it to positive review.

About the c code, Guillaume Ducoffe has a c++/boost implementation. It could be an interesting alternative to the current c code which is apparently no longer maintained by its author. But I don't know if we can use boost (portability).

David.



---

archive/issue_comments_243310.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2015-03-15T17:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243310",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_243311.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nYo !\n\n> About the c code, Guillaume Ducoffe has a c++/boost implementation. \n\nDoes it compute modular decompositions of graphs?\n\nNathann",
    "created_at": "2015-03-15T18:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243311",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:29" align="right">comment:29</div>

Yo !

> About the c code, Guillaume Ducoffe has a c++/boost implementation. 

Does it compute modular decompositions of graphs?

Nathann



---

archive/issue_comments_243312.json:
```json
{
    "body": "Changed branch from **[public/17950](https://github.com/sagemath/sagetrac-mirror/tree/public/17950)** to **[`e72ab22`](https://github.com/sagemath/sagetrac-mirror/commit/e72ab22fddbe84da5018eaf39f546a80d2133b2a)**",
    "created_at": "2015-03-17T08:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243312",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/17950](https://github.com/sagemath/sagetrac-mirror/tree/public/17950)** to **[`e72ab22`](https://github.com/sagemath/sagetrac-mirror/commit/e72ab22fddbe84da5018eaf39f546a80d2133b2a)**



---

archive/issue_events_256626.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-17T08:33:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256626"
}
```



---

archive/issue_events_256627.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5d1710abdf8ccb736dae1dc75d10310f2ed75285",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-03-17T08:33:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17950#event-256627"
}
```



---

archive/issue_comments_243313.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThis ticket modified the unrelated `build/pkgs/latte_int/checksums.ini`, see #18139. Now i know why `git commit -a` is a bad workflow :P",
    "created_at": "2015-04-07T21:40:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243313",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:31" align="right">comment:31</div>

This ticket modified the unrelated `build/pkgs/latte_int/checksums.ini`, see #18139. Now i know why `git commit -a` is a bad workflow :P



---

archive/issue_comments_243314.json:
```json
{
    "body": "Changed commit from **[`e72ab22`](https://github.com/sagemath/sagetrac-mirror/commit/e72ab22fddbe84da5018eaf39f546a80d2133b2a)** to none",
    "created_at": "2015-04-07T21:40:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243314",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Changed commit from **[`e72ab22`](https://github.com/sagemath/sagetrac-mirror/commit/e72ab22fddbe84da5018eaf39f546a80d2133b2a)** to none



---

archive/issue_comments_243315.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n`O_o`\n\nSorryyyy.. I have no idea how that happened, however `O_o`\n\nNathann",
    "created_at": "2015-04-08T07:05:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243315",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:32" align="right">comment:32</div>

`O_o`

Sorryyyy.. I have no idea how that happened, however `O_o`

Nathann



---

archive/issue_comments_243316.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nshould this be reimplemented from scratch, in cython? Unless there is correct external code somewhere that we can use?",
    "created_at": "2016-12-12T19:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243316",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:33" align="right">comment:33</div>

should this be reimplemented from scratch, in cython? Unless there is correct external code somewhere that we can use?



---

archive/issue_comments_243317.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThe original code that we use is no longer maintained. Guillaume Ducoffe has not finalized his code in c++/boost yet. So I'm not aware of external code in c that can be used. \nWe can find implementations in java\nhttp://www.cs.utoronto.ca/~mtedder/ or in perl https://metacpan.org/release/Graph-ModularDecomposition.\nSo it is certainly better to reimplement it with sufficient comments to maintain it.",
    "created_at": "2016-12-13T07:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243317",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:34" align="right">comment:34</div>

The original code that we use is no longer maintained. Guillaume Ducoffe has not finalized his code in c++/boost yet. So I'm not aware of external code in c that can be used. 
We can find implementations in java
http://www.cs.utoronto.ca/~mtedder/ or in perl https://metacpan.org/release/Graph-ModularDecomposition.
So it is certainly better to reimplement it with sufficient comments to maintain it.



---

archive/issue_comments_243318.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@dcoudert](#comment:34):\n> The original code that we use is no longer maintained. Guillaume Ducoffe has not finalized his code in c++/boost yet. So I'm not aware of external code in c that can be used. \n> We can find implementations in java\n> http://www.cs.utoronto.ca/~mtedder/ or in perl https://metacpan.org/release/Graph-ModularDecomposition.\n> So it is certainly better to reimplement it with sufficient comments to maintain it.\n\nThe perl implementation is for digraphs, so that's a different story all together.\n(we probably can interface perl with Sage, although it's probably a bit too much trouble).",
    "created_at": "2016-12-13T08:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243318",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@dcoudert](#comment:34):
> The original code that we use is no longer maintained. Guillaume Ducoffe has not finalized his code in c++/boost yet. So I'm not aware of external code in c that can be used. 
> We can find implementations in java
> http://www.cs.utoronto.ca/~mtedder/ or in perl https://metacpan.org/release/Graph-ModularDecomposition.
> So it is certainly better to reimplement it with sufficient comments to maintain it.

The perl implementation is for digraphs, so that's a different story all together.
(we probably can interface perl with Sage, although it's probably a bit too much trouble).



---

archive/issue_comments_243319.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nIf we are to reimplement the modular decomposition in cython, we should certainly finish first the implementation of `LexBFS` #11736",
    "created_at": "2016-12-13T10:16:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17950#issuecomment-243319",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:36" align="right">comment:36</div>

If we are to reimplement the modular decomposition in cython, we should certainly finish first the implementation of `LexBFS` #11736
