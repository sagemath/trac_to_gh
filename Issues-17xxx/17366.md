# Issue 17366: for multivariate polynomial rings, degree method should convert its argument

archive/issues_017129.json:
```json
{
    "body": "As reported at #17205:\n\n```\n    sage: x, y = ZZ['x','y'].gens()\n    sage: GF(1091)['x','y'].random_element().degree(x) ### works\n    sage: GF(3037000453)['x','y'].random_element().degree(x) ### fails\n```\nThe 2nd and 3rd lines are handled by different code, one from `multi_polynomial_libsingular.pyx` and one from `multi_polynomial_element.py`. The first tries to convert the argument `x` into the parent ring, but the second does not. \n\nThe point here is to reconcile the approaches: always try to convert the argument into the parent ring.\n\nBranch/Commit: 65e68e16e2bffc1fcfb6fe5328c6ca5c0695ddbc\n\nReviewer: Volker Braun\n\nAuthor: John Palmieri\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17366\n\n",
    "closed_at": "2014-11-20T16:35:03Z",
    "created_at": "2014-11-18T21:32:21Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "for multivariate polynomial rings, degree method should convert its argument",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17366",
    "user": "https://github.com/jhpalmieri"
}
```
As reported at #17205:

```
    sage: x, y = ZZ['x','y'].gens()
    sage: GF(1091)['x','y'].random_element().degree(x) ### works
    sage: GF(3037000453)['x','y'].random_element().degree(x) ### fails
```
The 2nd and 3rd lines are handled by different code, one from `multi_polynomial_libsingular.pyx` and one from `multi_polynomial_element.py`. The first tries to convert the argument `x` into the parent ring, but the second does not. 

The point here is to reconcile the approaches: always try to convert the argument into the parent ring.

Branch/Commit: 65e68e16e2bffc1fcfb6fe5328c6ca5c0695ddbc

Reviewer: Volker Braun

Author: John Palmieri

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17366





---

archive/issue_comments_294613.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jhpalmieri/degree_convert_element\"",
    "created_at": "2014-11-18T21:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294613",
    "user": "https://github.com/jhpalmieri"
}
```

Changing branch from "" to "u/jhpalmieri/degree_convert_element"



---

archive/issue_comments_294614.json:
```json
{
    "body": "Changing commit from \"\" to \"22d541ea43b73e900b9ea72432337b2bac81a492\"",
    "created_at": "2014-11-18T21:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294614",
    "user": "https://github.com/jhpalmieri"
}
```

Changing commit from "" to "22d541ea43b73e900b9ea72432337b2bac81a492"



---

archive/issue_comments_294615.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2014-11-18T21:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294615",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_294616.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-18T21:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294616",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_294617.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-18T21:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294617",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_294618.json:
```json
{
    "body": "Changing commit from \"22d541ea43b73e900b9ea72432337b2bac81a492\" to \"65e68e16e2bffc1fcfb6fe5328c6ca5c0695ddbc\"",
    "created_at": "2014-11-18T21:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294618",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "22d541ea43b73e900b9ea72432337b2bac81a492" to "65e68e16e2bffc1fcfb6fe5328c6ca5c0695ddbc"



---

archive/issue_comments_294619.json:
```json
{
    "body": "<a id='comment:4'></a>Why not just convert (i tried to say that in my sage-devel post, was probably too terse ;-) instead of coercing. E.g. it might be convenient to specify the generator as string if you haven't injected the variables into the current session.",
    "created_at": "2014-11-19T08:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294619",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>Why not just convert (i tried to say that in my sage-devel post, was probably too terse ;-) instead of coercing. E.g. it might be convenient to specify the generator as string if you haven't injected the variables into the current session.



---

archive/issue_comments_294620.json:
```json
{
    "body": "<a id='comment:5'></a>This was the path of least resistance: I just copied the code from `multi_polynomial_libsingular.pyx`. It was therefore the easiest way to make the behavior consistent regardless of the size of the characteristic of the base field.",
    "created_at": "2014-11-19T18:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294620",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>This was the path of least resistance: I just copied the code from `multi_polynomial_libsingular.pyx`. It was therefore the easiest way to make the behavior consistent regardless of the size of the characteristic of the base field.



---

archive/issue_comments_294621.json:
```json
{
    "body": "<a id='comment:6'></a>By \"convert\", do you mean just doing `self.parent()(x)`?",
    "created_at": "2014-11-19T18:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294621",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>By "convert", do you mean just doing `self.parent()(x)`?



---

archive/issue_comments_294622.json:
```json
{
    "body": "<a id='comment:7'></a>Yes, thats what I meant.",
    "created_at": "2014-11-19T19:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294622",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>Yes, thats what I meant.



---

archive/issue_comments_294623.json:
```json
{
    "body": "<a id='comment:8'></a>Making this change in `multi_polynomial_libsingular.pyx` breaks a doctest which is supposed to test exactly this:\n\n```\n        The following example is inspired by trac 11652::\n\n            sage: R.<p,q,t> = ZZ[]\n            sage: poly = p+q^2+t^3\n            sage: poly = poly.polynomial(t)[0]\n            sage: poly\n            q^2 + p\n\n        There is no canonical coercion from ``R`` to the parent of ``poly``, so\n        this doesn't work::\n\n            sage: poly.degree(q)\n            Traceback (most recent call last):\n            ...\n            TypeError: argument must canonically coerce to parent\n```\nAt #11652, there was some debate about this, and the conclusion was that coercion was appropriate, not conversion. (In the above example, q obviously converts to an element of the parent of `poly`, but there is no coercion.)",
    "created_at": "2014-11-19T20:42:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294623",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>Making this change in `multi_polynomial_libsingular.pyx` breaks a doctest which is supposed to test exactly this:

```
        The following example is inspired by trac 11652::

            sage: R.<p,q,t> = ZZ[]
            sage: poly = p+q^2+t^3
            sage: poly = poly.polynomial(t)[0]
            sage: poly
            q^2 + p

        There is no canonical coercion from ``R`` to the parent of ``poly``, so
        this doesn't work::

            sage: poly.degree(q)
            Traceback (most recent call last):
            ...
            TypeError: argument must canonically coerce to parent
```
At #11652, there was some debate about this, and the conclusion was that coercion was appropriate, not conversion. (In the above example, q obviously converts to an element of the parent of `poly`, but there is no coercion.)



---

archive/issue_comments_294624.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2014-11-20T11:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294624",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_294625.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-20T11:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294625",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_294626.json:
```json
{
    "body": "<a id='comment:9'></a>sounds good",
    "created_at": "2014-11-20T11:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294626",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>sounds good



---

archive/issue_comments_294627.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-20T16:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294627",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_050074.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-20T16:35:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17366#event-50074"
}
```



---

archive/issue_comments_294628.json:
```json
{
    "body": "Changing branch from \"u/jhpalmieri/degree_convert_element\" to \"65e68e16e2bffc1fcfb6fe5328c6ca5c0695ddbc\"",
    "created_at": "2014-11-20T16:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-294628",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jhpalmieri/degree_convert_element" to "65e68e16e2bffc1fcfb6fe5328c6ca5c0695ddbc"
