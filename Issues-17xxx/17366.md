# Issue 17366: for multivariate polynomial rings, degree method should convert its argument

archive/issues_017129.json:
```json
{
    "body": "As reported at #17205:\n\n```\n    sage: x, y = ZZ['x','y'].gens()\n    sage: GF(1091)['x','y'].random_element().degree(x) ### works\n    sage: GF(3037000453)['x','y'].random_element().degree(x) ### fails\n```\nThe 2nd and 3rd lines are handled by different code, one from `multi_polynomial_libsingular.pyx` and one from `multi_polynomial_element.py`. The first tries to convert the argument `x` into the parent ring, but the second does not. \n\nThe point here is to reconcile the approaches: always try to convert the argument into the parent ring.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17366\n\n",
    "closed_at": "2014-11-20T16:35:03Z",
    "created_at": "2014-11-18T21:32:21Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "for multivariate polynomial rings, degree method should convert its argument",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17366",
    "user": "https://github.com/jhpalmieri"
}
```
As reported at #17205:

```
    sage: x, y = ZZ['x','y'].gens()
    sage: GF(1091)['x','y'].random_element().degree(x) ### works
    sage: GF(3037000453)['x','y'].random_element().degree(x) ### fails
```
The 2nd and 3rd lines are handled by different code, one from `multi_polynomial_libsingular.pyx` and one from `multi_polynomial_element.py`. The first tries to convert the argument `x` into the parent ring, but the second does not. 

The point here is to reconcile the approaches: always try to convert the argument into the parent ring.

Issue created by migration from https://trac.sagemath.org/ticket/17366





---

archive/issue_comments_227432.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-11-18T21:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-227432",
    "user": "https://github.com/jhpalmieri"
}
```

New commits:



---

archive/issue_comments_227433.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-18T21:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-227433",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_227434.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-18T21:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-227434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_227435.json:
```json
{
    "body": "Why not just convert (i tried to say that in my sage-devel post, was probably too terse ;-) instead of coercing. E.g. it might be convenient to specify the generator as string if you haven't injected the variables into the current session.",
    "created_at": "2014-11-19T08:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-227435",
    "user": "https://github.com/vbraun"
}
```

Why not just convert (i tried to say that in my sage-devel post, was probably too terse ;-) instead of coercing. E.g. it might be convenient to specify the generator as string if you haven't injected the variables into the current session.



---

archive/issue_comments_227436.json:
```json
{
    "body": "This was the path of least resistance: I just copied the code from `multi_polynomial_libsingular.pyx`. It was therefore the easiest way to make the behavior consistent regardless of the size of the characteristic of the base field.",
    "created_at": "2014-11-19T18:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-227436",
    "user": "https://github.com/jhpalmieri"
}
```

This was the path of least resistance: I just copied the code from `multi_polynomial_libsingular.pyx`. It was therefore the easiest way to make the behavior consistent regardless of the size of the characteristic of the base field.



---

archive/issue_comments_227437.json:
```json
{
    "body": "By \"convert\", do you mean just doing `self.parent()(x)`?",
    "created_at": "2014-11-19T18:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-227437",
    "user": "https://github.com/jhpalmieri"
}
```

By "convert", do you mean just doing `self.parent()(x)`?



---

archive/issue_comments_227438.json:
```json
{
    "body": "Yes, thats what I meant.",
    "created_at": "2014-11-19T19:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-227438",
    "user": "https://github.com/vbraun"
}
```

Yes, thats what I meant.



---

archive/issue_comments_227439.json:
```json
{
    "body": "Making this change in `multi_polynomial_libsingular.pyx` breaks a doctest which is supposed to test exactly this:\n\n```\n        The following example is inspired by trac 11652::\n\n            sage: R.<p,q,t> = ZZ[]\n            sage: poly = p+q^2+t^3\n            sage: poly = poly.polynomial(t)[0]\n            sage: poly\n            q^2 + p\n\n        There is no canonical coercion from ``R`` to the parent of ``poly``, so\n        this doesn't work::\n\n            sage: poly.degree(q)\n            Traceback (most recent call last):\n            ...\n            TypeError: argument must canonically coerce to parent\n```\nAt #11652, there was some debate about this, and the conclusion was that coercion was appropriate, not conversion. (In the above example, q obviously converts to an element of the parent of `poly`, but there is no coercion.)",
    "created_at": "2014-11-19T20:42:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-227439",
    "user": "https://github.com/jhpalmieri"
}
```

Making this change in `multi_polynomial_libsingular.pyx` breaks a doctest which is supposed to test exactly this:

```
        The following example is inspired by trac 11652::

            sage: R.<p,q,t> = ZZ[]
            sage: poly = p+q^2+t^3
            sage: poly = poly.polynomial(t)[0]
            sage: poly
            q^2 + p

        There is no canonical coercion from ``R`` to the parent of ``poly``, so
        this doesn't work::

            sage: poly.degree(q)
            Traceback (most recent call last):
            ...
            TypeError: argument must canonically coerce to parent
```
At #11652, there was some debate about this, and the conclusion was that coercion was appropriate, not conversion. (In the above example, q obviously converts to an element of the parent of `poly`, but there is no coercion.)



---

archive/issue_comments_227440.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-20T11:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-227440",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_227441.json:
```json
{
    "body": "sounds good",
    "created_at": "2014-11-20T11:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-227441",
    "user": "https://github.com/vbraun"
}
```

sounds good



---

archive/issue_comments_227442.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-20T16:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17366#issuecomment-227442",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_050074.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-20T16:35:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17366",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17366#event-50074"
}
```
