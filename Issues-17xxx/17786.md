# Issue 17786: Make RealBallField useful

archive/issues_017549.json:
```json
{
    "body": "After #17194, implement more comprehensive Arb bindings as part of `RealBallField`/`RealBall`.\n\nBranch/Commit: 37bcb77a5b3400d59f57c2b4837bfb9bbdac1335\n\nReviewer: Fredrik Johansson\n\nAuthor: Marc Mezzarobba\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17786\n\n",
    "closed_at": "2015-03-12T20:22:09Z",
    "created_at": "2015-02-15T13:43:22Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Make RealBallField useful",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17786",
    "user": "https://github.com/mezzarobba"
}
```
After #17194, implement more comprehensive Arb bindings as part of `RealBallField`/`RealBall`.

Branch/Commit: 37bcb77a5b3400d59f57c2b4837bfb9bbdac1335

Reviewer: Fredrik Johansson

Author: Marc Mezzarobba

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17786





---

archive/issue_comments_249187.json:
```json
{
    "body": "<a id='comment:1'></a>Regarding the \"What is going on?!\" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.\n\nThis is something that I could fix with a bit of effort.\n\nIn any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...",
    "created_at": "2015-02-15T17:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249187",
    "user": "https://github.com/fredrik-johansson"
}
```

<a id='comment:1'></a>Regarding the "What is going on?!" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.

This is something that I could fix with a bit of effort.

In any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...



---

archive/issue_comments_249188.json:
```json
{
    "body": "<a id='comment:2'></a>Replying to [comment:1 fredrik.johansson]:\n> Regarding the \"What is going on?!\" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.\n\n\nGood to know, I wasn't aware of that.\n\n> This is something that I could fix with a bit of effort.\n\n\nUnless you have other users that need it, I don't think it is worth the effort.\n\n> In any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...\n\n\nYes. But I thought I'd first go with a version that tested the exact output, and we could always make something more sophisticated later on if some of the outputs really changed.\n\nThanks for your comments!",
    "created_at": "2015-02-16T05:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249188",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:2'></a>Replying to [comment:1 fredrik.johansson]:
> Regarding the "What is going on?!" comment: transcendental functions are not quite deterministic due to internal caches. In this case, doing something that results in an internal recomputation of log(2) to higher precision leads to a slightly more accurate value later on.


Good to know, I wasn't aware of that.

> This is something that I could fix with a bit of effort.


Unless you have other users that need it, I don't think it is worth the effort.

> In any case, output could also change slightly between versions due to changes in algorithms. That's an inherent drawback of doing doctests this way...


Yes. But I thought I'd first go with a version that tested the exact output, and we could always make something more sophisticated later on if some of the outputs really changed.

Thanks for your comments!



---

archive/issue_comments_249189.json:
```json
{
    "body": "<a id='comment:3'></a>Two remarks:\n\n- Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.\n\n- Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.",
    "created_at": "2015-02-16T09:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249189",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:3'></a>Two remarks:

- Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.

- Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.



---

archive/issue_comments_249190.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 cheuberg]:\n> Two remarks:\n> \n> - Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.\n\n\nYes, indeed, thanks. I just copied the C prototypes without thinking...\n\n> - Should we really expose a function `is_nonzero`? We have to implement ``__nonzero__`` anyway.\n\n\n`RIF` intervals implement `__nonzero__` with the meaning of \"not exactly zero\". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...",
    "created_at": "2015-02-16T10:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249190",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:4'></a>Replying to [comment:3 cheuberg]:
> Two remarks:
> 
> - Shouldn't we use `bint` for those C functions returning an integer which is meant as a boolean? In that case, `bool` could be omitted in the Python methods.


Yes, indeed, thanks. I just copied the C prototypes without thinking...

> - Should we really expose a function `is_nonzero`? We have to implement ``__nonzero__`` anyway.


`RIF` intervals implement `__nonzero__` with the meaning of "not exactly zero". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...



---

archive/issue_comments_249191.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 mmezzarobba]:\n> Replying to [comment:3 cheuberg]:\n> > - Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.\n \n> \n> `RIF` intervals implement `__nonzero__` with the meaning of \"not exactly zero\". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...\n\n\nI think we should not have methods `__nonzero__` and `is_nonzero` with different behaviour.",
    "created_at": "2015-02-16T11:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249191",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:5'></a>Replying to [comment:4 mmezzarobba]:
> Replying to [comment:3 cheuberg]:
> > - Should we really expose a function `is_nonzero`? We have to implement `__nonzero__` anyway.
 
> 
> `RIF` intervals implement `__nonzero__` with the meaning of "not exactly zero". So I think we need both if we want to stay compatible with them. But then I'm not sure doing things that way in `RIF` was the wisest choice in the first place...


I think we should not have methods `__nonzero__` and `is_nonzero` with different behaviour.



---

archive/issue_comments_249192.json:
```json
{
    "body": "<a id='comment:6'></a>#17194 needs to be merged. It would be good to merge #17811 and to replace its doctest by a simpler variant using the arithmetic operations introduced here.",
    "created_at": "2015-02-19T17:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249192",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:6'></a>#17194 needs to be merged. It would be good to merge #17811 and to replace its doctest by a simpler variant using the arithmetic operations introduced here.



---

archive/issue_comments_249193.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-03-05T14:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249193",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_249194.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-03-05T14:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249194",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_249195.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-05T15:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249195",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249196.json:
```json
{
    "body": "<a id='comment:11'></a>Last 10 new commits:",
    "created_at": "2015-03-06T12:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249196",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:11'></a>Last 10 new commits:



---

archive/issue_comments_249197.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T12:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249197",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249198.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T13:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249198",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249199.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T13:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249199",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249200.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T14:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249201.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T15:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249201",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249202.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T15:34:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249202",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249203.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T15:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249203",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249204.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T16:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249204",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249205.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T16:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249205",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249206.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T16:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249206",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249207.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T17:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249207",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_249208.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-03-06T17:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249208",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_249209.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-03-06T18:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249209",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_249210.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-06T18:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249210",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_249211.json:
```json
{
    "body": "Changing component from basic arithmetic to numerical.",
    "created_at": "2015-03-06T18:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249211",
    "user": "https://github.com/mezzarobba"
}
```

Changing component from basic arithmetic to numerical.



---

archive/issue_comments_249212.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,4 @@\n After #17194, implement more comprehensive Arb bindings as part of `RealBallField`/`RealBall`.\n-\n-Work in progress, expect rebases.\n \n Comment: 1\n \n```\n",
    "created_at": "2015-03-06T18:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249212",
    "user": "https://github.com/mezzarobba"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,4 @@
 After #17194, implement more comprehensive Arb bindings as part of `RealBallField`/`RealBall`.
-
-Work in progress, expect rebases.
 
 Comment: 1
 
```




---

archive/issue_comments_249213.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-03-10T10:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249213",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_249214.json:
```json
{
    "body": "<a id='comment:27'></a>Looks good to me.\n\nBtw, I'm unable to build the reference manual, but this is presumably some problem with my Sage install and unrelated to this ticket.",
    "created_at": "2015-03-10T14:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249214",
    "user": "https://github.com/fredrik-johansson"
}
```

<a id='comment:27'></a>Looks good to me.

Btw, I'm unable to build the reference manual, but this is presumably some problem with my Sage install and unrelated to this ticket.



---

archive/issue_comments_249215.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-10T14:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249215",
    "user": "https://github.com/fredrik-johansson"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_249216.json:
```json
{
    "body": "<a id='comment:28'></a>Thanks for the review!",
    "created_at": "2015-03-10T15:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249216",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:28'></a>Thanks for the review!



---

archive/issue_comments_249217.json:
```json
{
    "body": "<a id='comment:29'></a>Reviewer name is supposed to be the real name, not the trac account name",
    "created_at": "2015-03-10T20:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249217",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'></a>Reviewer name is supposed to be the real name, not the trac account name



---

archive/issue_comments_249218.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-03-10T20:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249218",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_249219.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-03-10T21:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249219",
    "user": "https://github.com/fredrik-johansson"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_249220.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-12T20:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-249220",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_050807.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-12T20:22:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17786#event-50807"
}
```
