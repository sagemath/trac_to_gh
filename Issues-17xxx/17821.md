# Issue 17821: Refactor show() methods, rename to pretty_print

archive/issues_017584.json:
```json
{
    "body": "show should be an alias for pretty_print, which should always tries to use a rich output for an object (falling back on the plain text), while the plain print function should always use the plain text for the object\n\n\nCC:  @novoselt @ohanar @dcoudert\n\nReviewer: Andrey Novoseltsev\n\nAuthor: Volker Braun\n\nBranch: 41f0a571ed77dd4e9a5d8ca9fdfe8837799ff6e9\n\nDependencies: #17234, #17980, #18028, #18032\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17821\n\n",
    "closed_at": "2015-04-21T00:10:57Z",
    "created_at": "2015-02-21T01:12:48Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Refactor show() methods, rename to pretty_print",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17821",
    "user": "https://github.com/vbraun"
}
```
show should be an alias for pretty_print, which should always tries to use a rich output for an object (falling back on the plain text), while the plain print function should always use the plain text for the object


CC:  @novoselt @ohanar @dcoudert

Reviewer: Andrey Novoseltsev

Author: Volker Braun

Branch: 41f0a571ed77dd4e9a5d8ca9fdfe8837799ff6e9

Dependencies: #17234, #17980, #18028, #18032

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17821





---

archive/issue_comments_301279.json:
```json
{
    "body": "Changing dependencies from \"#/17234\" to \"#17234\"",
    "created_at": "2015-02-21T01:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301279",
    "user": "https://github.com/vbraun"
}
```

Changing dependencies from "#/17234" to "#17234"



---

archive/issue_comments_301280.json:
```json
{
    "body": "Changing dependencies from \"#17234\" to \"#17234, #17980\"",
    "created_at": "2015-03-18T09:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301280",
    "user": "https://github.com/vbraun"
}
```

Changing dependencies from "#17234" to "#17234, #17980"



---

archive/issue_comments_301281.json:
```json
{
    "body": "<a id='comment:2'></a>\nOne general question is how to handle multiple arguments: `pretty_print('integers = ', ZZ)` is supposed to give one latex string as output. After thinking about it, I think multiple arguments should always be string/latex/asciiart-ified. So no graphical output if you run `pretty_print('plot =', plot(sin))`.",
    "created_at": "2015-03-18T09:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301281",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>
One general question is how to handle multiple arguments: `pretty_print('integers = ', ZZ)` is supposed to give one latex string as output. After thinking about it, I think multiple arguments should always be string/latex/asciiart-ified. So no graphical output if you run `pretty_print('plot =', plot(sin))`.



---

archive/issue_comments_301282.json:
```json
{
    "body": "<a id='comment:3'></a>\nAs long as current behavior for `show` does not change I guess this would be okay.",
    "created_at": "2015-03-18T14:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301282",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>
As long as current behavior for `show` does not change I guess this would be okay.



---

archive/issue_comments_301283.json:
```json
{
    "body": "<a id='comment:4'></a>\nIn addition to `pretty_print` and `show` there is also `view` among the generically-named functions that sound like they produce shiny output. Though the latter does something different.",
    "created_at": "2015-03-19T00:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301283",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>
In addition to `pretty_print` and `show` there is also `view` among the generically-named functions that sound like they produce shiny output. Though the latter does something different.



---

archive/issue_comments_301284.json:
```json
{
    "body": "<a id='comment:5'></a>\nWhy not generalize what is currently in the `pretty_print` function. I.e. allow an `OutputType` to have an optional join method (or the like) and then join consecutive things as much as possible. I think it would be convenient to have `pretty_print('plot =', plot(sin))` work.",
    "created_at": "2015-03-19T00:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301284",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:5'></a>
Why not generalize what is currently in the `pretty_print` function. I.e. allow an `OutputType` to have an optional join method (or the like) and then join consecutive things as much as possible. I think it would be convenient to have `pretty_print('plot =', plot(sin))` work.



---

archive/issue_comments_301285.json:
```json
{
    "body": "<a id='comment:6'></a>\nWhats the expected output? Latex with a tiny picture of the plot inserted? After the rich output hits  you'd have to join latex with an animated gif image and a dvi file, that doesn't work. It only makes sense if you get uniform rich output.\n\nI think I'll just preserve the current behavior of special-casing certain homogeneous lists (i.e.: only graphs and only 2d plots).",
    "created_at": "2015-03-21T09:46:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301285",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>
Whats the expected output? Latex with a tiny picture of the plot inserted? After the rich output hits  you'd have to join latex with an animated gif image and a dvi file, that doesn't work. It only makes sense if you get uniform rich output.

I think I'll just preserve the current behavior of special-casing certain homogeneous lists (i.e.: only graphs and only 2d plots).



---

archive/issue_comments_301286.json:
```json
{
    "body": "Changing dependencies from \"#17234, #17980\" to \"#17234, #17980, #18028\"",
    "created_at": "2015-03-21T12:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301286",
    "user": "https://github.com/vbraun"
}
```

Changing dependencies from "#17234, #17980" to "#17234, #17980, #18028"



---

archive/issue_comments_301287.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vbraun/refactor_pretty_print\"",
    "created_at": "2015-03-21T16:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301287",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "" to "u/vbraun/refactor_pretty_print"



---

archive/issue_comments_301288.json:
```json
{
    "body": "Changing commit from \"\" to \"42f4985c93ebf3afb3772ad2298673ba1db372da\"",
    "created_at": "2015-03-21T16:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301288",
    "user": "https://github.com/vbraun"
}
```

Changing commit from "" to "42f4985c93ebf3afb3772ad2298673ba1db372da"



---

archive/issue_comments_301289.json:
```json
{
    "body": "<a id='comment:9'></a>\nRefactoring graphics is now #18033, already too much going on here.\n\nThis basically works now, except that it unearthed various broken stuff elsewhere that wasn't exercised before.\n\n---\nNew commits:\n|                                                                                                                                          |                                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|\n|[8577e87](https://github.com/sagemath/sagetrac-mirror/commit/8577e873851c8ca7789b81f65c450449c1cfd145)|`Refactor pretty_print/show to use the rich output system`|\n|[42f4985](https://github.com/sagemath/sagetrac-mirror/commit/42f4985c93ebf3afb3772ad2298673ba1db372da)|`remove the unused and broken print_or_typeset`|",
    "created_at": "2015-03-21T16:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301289",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
Refactoring graphics is now #18033, already too much going on here.

This basically works now, except that it unearthed various broken stuff elsewhere that wasn't exercised before.

---
New commits:
|                                                                                                                                          |                                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|
|[8577e87](https://github.com/sagemath/sagetrac-mirror/commit/8577e873851c8ca7789b81f65c450449c1cfd145)|`Refactor pretty_print/show to use the rich output system`|
|[42f4985](https://github.com/sagemath/sagetrac-mirror/commit/42f4985c93ebf3afb3772ad2298673ba1db372da)|`remove the unused and broken print_or_typeset`|



---

archive/issue_comments_301290.json:
```json
{
    "body": "Changing dependencies from \"#17234, #17980, #18028\" to \"#17234, #17980, #18028, #18032\"",
    "created_at": "2015-03-21T16:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301290",
    "user": "https://github.com/vbraun"
}
```

Changing dependencies from "#17234, #17980, #18028" to "#17234, #17980, #18028, #18032"



---

archive/issue_comments_301291.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,3 @@\n * Various show methods should maybe get moved to the SageObject class, or perhaps in some category.\n-* Similarly, in graphics.py, a bit of refactoring could be done by creating a common parent for Graphics and GraphicsArray (maybe something like GraphicsBase)\n * show should be an alias for pretty_print, which should always tries to use a rich output for an object (falling back on the plain text), while the plain print function should always use the plain text for the object\n-* Find a better name for the viewer='...' keyword option that works also for plain text / latex / 2d animation formats / ...\n+\n``````\n",
    "created_at": "2015-03-21T16:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301291",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,3 @@
 * Various show methods should maybe get moved to the SageObject class, or perhaps in some category.
-* Similarly, in graphics.py, a bit of refactoring could be done by creating a common parent for Graphics and GraphicsArray (maybe something like GraphicsBase)
 * show should be an alias for pretty_print, which should always tries to use a rich output for an object (falling back on the plain text), while the plain print function should always use the plain text for the object
-* Find a better name for the viewer='...' keyword option that works also for plain text / latex / 2d animation formats / ...
+
``````




---

archive/issue_comments_301292.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,2 @@\n-* Various show methods should maybe get moved to the SageObject class, or perhaps in some category.\n-* show should be an alias for pretty_print, which should always tries to use a rich output for an object (falling back on the plain text), while the plain print function should always use the plain text for the object\n+show should be an alias for pretty_print, which should always tries to use a rich output for an object (falling back on the plain text), while the plain print function should always use the plain text for the object\n \n``````\n",
    "created_at": "2015-03-21T16:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301292",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,2 @@
-* Various show methods should maybe get moved to the SageObject class, or perhaps in some category.
-* show should be an alias for pretty_print, which should always tries to use a rich output for an object (falling back on the plain text), while the plain print function should always use the plain text for the object
+show should be an alias for pretty_print, which should always tries to use a rich output for an object (falling back on the plain text), while the plain print function should always use the plain text for the object
 
``````




---

archive/issue_comments_301293.json:
```json
{
    "body": "Changing commit from \"42f4985c93ebf3afb3772ad2298673ba1db372da\" to \"70e4d3af7d4f26e4cf7fca155ccfe12193e6dae4\"",
    "created_at": "2015-03-21T19:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301293",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "42f4985c93ebf3afb3772ad2298673ba1db372da" to "70e4d3af7d4f26e4cf7fca155ccfe12193e6dae4"



---

archive/issue_comments_301294.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[70e4d3a](https://github.com/sagemath/sagetrac-mirror/commit/70e4d3af7d4f26e4cf7fca155ccfe12193e6dae4)|`fix doctest in symbolic expression show()`|",
    "created_at": "2015-03-21T19:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301294",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[70e4d3a](https://github.com/sagemath/sagetrac-mirror/commit/70e4d3af7d4f26e4cf7fca155ccfe12193e6dae4)|`fix doctest in symbolic expression show()`|



---

archive/issue_comments_301295.json:
```json
{
    "body": "<a id='comment:13'></a>\nWill there be an option for inline/display formulas with this system?\n\nAlthough it seems a little ugly to modify global preferences before output and restoring them afterwards - shouldn't there be some way to pass \"current preferences\" that take precedence over \"default ones\"?",
    "created_at": "2015-04-02T00:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301295",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:13'></a>
Will there be an option for inline/display formulas with this system?

Although it seems a little ugly to modify global preferences before output and restoring them afterwards - shouldn't there be some way to pass "current preferences" that take precedence over "default ones"?



---

archive/issue_comments_301296.json:
```json
{
    "body": "<a id='comment:14'></a>\nSince I had no desire to dig into old show mess, I've merged this into my branch for SageMathCell based on 6.6.rc1 and get \n\n```\nOSError: [calculus ] docstring of sage.symbolic.expression.Expression.show:14: WARNING: Block quote ends without a blank line; unexpected unindent.\n```\nwhile building documentation.\n\nWhat is the long-term plan for `pretty_print/show/view`? I've always used `show` to get a plot out or a displayed formula and `view` for inline formulas (which could be on the same line as `print`ed text). That was definitely not something intuitive/easily discoverable. Perhaps `show` can be reserved for graphics only (2D/3D/animated) and its use for other objects deprecated? While `pretty_print` with some keywords to control display/inline should be the only official way to display formulas, with its use for graphics deprecated? And `view` just gone?.. For the moment it seems that `view` is left as is and `show = pretty_print` after this branch.",
    "created_at": "2015-04-07T22:05:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301296",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:14'></a>
Since I had no desire to dig into old show mess, I've merged this into my branch for SageMathCell based on 6.6.rc1 and get 

```
OSError: [calculus ] docstring of sage.symbolic.expression.Expression.show:14: WARNING: Block quote ends without a blank line; unexpected unindent.
```
while building documentation.

What is the long-term plan for `pretty_print/show/view`? I've always used `show` to get a plot out or a displayed formula and `view` for inline formulas (which could be on the same line as `print`ed text). That was definitely not something intuitive/easily discoverable. Perhaps `show` can be reserved for graphics only (2D/3D/animated) and its use for other objects deprecated? While `pretty_print` with some keywords to control display/inline should be the only official way to display formulas, with its use for graphics deprecated? And `view` just gone?.. For the moment it seems that `view` is left as is and `show = pretty_print` after this branch.



---

archive/issue_comments_301297.json:
```json
{
    "body": "<a id='comment:15'></a>\nView does different things in SageNB and elsewhere... I'm in favor of cleaning things up to the effect that:\n\n* `show == pretty_print` shall be synonymous. The name does not suggest any different behavior, so it would bad UI to invent one just because.\n\n* deprecate `view`, replace it with `latex(...).compile()` which always generates PDF output. I've implemented the compile method in #18116.",
    "created_at": "2015-04-07T22:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301297",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>
View does different things in SageNB and elsewhere... I'm in favor of cleaning things up to the effect that:

* `show == pretty_print` shall be synonymous. The name does not suggest any different behavior, so it would bad UI to invent one just because.

* deprecate `view`, replace it with `latex(...).compile()` which always generates PDF output. I've implemented the compile method in #18116.



---

archive/issue_comments_301298.json:
```json
{
    "body": "<a id='comment:16'></a>\nWhats the use case for inline equations? In the notebook the cell output is always analogous to displaymath in LaTeX terminology, right?",
    "created_at": "2015-04-07T23:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301298",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>
Whats the use case for inline equations? In the notebook the cell output is always analogous to displaymath in LaTeX terminology, right?



---

archive/issue_comments_301299.json:
```json
{
    "body": "<a id='comment:17'></a>\nPS: There is the `restricted_output` context manager to temporarily alter the accepted rich output types. You can use that to force a particular output type...",
    "created_at": "2015-04-07T23:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301299",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
PS: There is the `restricted_output` context manager to temporarily alter the accepted rich output types. You can use that to force a particular output type...



---

archive/issue_comments_301300.json:
```json
{
    "body": "<a id='comment:18'></a>\nTo me it sounds a bit strange to `pretty_print` a plot or to `show` a formula, but I am not a native speaker. Although I don't see the point of having two names for the same functionality, so why not then stick to shorter `show` and drop `pretty_print`?\n\nUse cases for inline equations:\n- they are flushed left rather than centered, which makes a difference in combined output blocks\n- they have (or had) different padding in notebook, so were more compact\n- they are of course more compact because they use different LaTeX style\n- they could continue the line after `print \"Cool formula: \",`\n\nSo I think they definitely should be available as an option. Having `show/view` to pick the style was not cool, of course.",
    "created_at": "2015-04-07T23:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301300",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:18'></a>
To me it sounds a bit strange to `pretty_print` a plot or to `show` a formula, but I am not a native speaker. Although I don't see the point of having two names for the same functionality, so why not then stick to shorter `show` and drop `pretty_print`?

Use cases for inline equations:
- they are flushed left rather than centered, which makes a difference in combined output blocks
- they have (or had) different padding in notebook, so were more compact
- they are of course more compact because they use different LaTeX style
- they could continue the line after `print "Cool formula: ",`

So I think they definitely should be available as an option. Having `show/view` to pick the style was not cool, of course.



---

archive/issue_comments_301301.json:
```json
{
    "body": "<a id='comment:19'></a>\nI kind of like `pretty_print` since it makes it clear that it behaves like `print`. On the other hand various objects already have `.show()` methods. I haven't really made up my mind about which is best. We could keep both if they are aliases...\n\nI guess we should use inline/text style if and only if there is adjacent stuff. So, for example,  `pretty_print(a, b)` should use inline style and `pretty_print(a); pretty_print(b)` should use block/display style.",
    "created_at": "2015-04-08T09:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301301",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:19'></a>
I kind of like `pretty_print` since it makes it clear that it behaves like `print`. On the other hand various objects already have `.show()` methods. I haven't really made up my mind about which is best. We could keep both if they are aliases...

I guess we should use inline/text style if and only if there is adjacent stuff. So, for example,  `pretty_print(a, b)` should use inline style and `pretty_print(a); pretty_print(b)` should use block/display style.



---

archive/issue_comments_301302.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [vbraun](#comment%3A19):\n> I guess we should use inline/text style if and only if there is adjacent stuff. So, for example,  `pretty_print(a, b)` should use inline style and `pretty_print(a); pretty_print(b)` should use block/display style. \n\n\nHow do you decide? If I made some output with suppressed newline in one place and then do extra output in another, it is difficult to detect. Also, if my code outputs two formulas on two lines and one of them is long, it may not be good to use display style since the centered short formula may be off the screen without centering. On the other hand, I dislike inline fractions/sums/limits, so even side-by-side things may be better in displaystyle.\n\nIt seems to me that its better to have a single default (display is more natural), but have a simple way for the user to tweak things if desired without the need of constructing all LaTeX code manually.",
    "created_at": "2015-04-08T19:20:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301302",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:20'></a>
Replying to [vbraun](#comment%3A19):
> I guess we should use inline/text style if and only if there is adjacent stuff. So, for example,  `pretty_print(a, b)` should use inline style and `pretty_print(a); pretty_print(b)` should use block/display style. 


How do you decide? If I made some output with suppressed newline in one place and then do extra output in another, it is difficult to detect. Also, if my code outputs two formulas on two lines and one of them is long, it may not be good to use display style since the centered short formula may be off the screen without centering. On the other hand, I dislike inline fractions/sums/limits, so even side-by-side things may be better in displaystyle.

It seems to me that its better to have a single default (display is more natural), but have a simple way for the user to tweak things if desired without the need of constructing all LaTeX code manually.



---

archive/issue_comments_301303.json:
```json
{
    "body": "Changing commit from \"70e4d3af7d4f26e4cf7fca155ccfe12193e6dae4\" to \"41f0a571ed77dd4e9a5d8ca9fdfe8837799ff6e9\"",
    "created_at": "2015-04-16T09:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301303",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "70e4d3af7d4f26e4cf7fca155ccfe12193e6dae4" to "41f0a571ed77dd4e9a5d8ca9fdfe8837799ff6e9"



---

archive/issue_comments_301304.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[6278235](https://github.com/sagemath/sagetrac-mirror/commit/62782355193485711d3caadf8db887c6bc4cb3d7)|`Merge tag '6.7.beta1' into #17821`|\n|[41f0a57](https://github.com/sagemath/sagetrac-mirror/commit/41f0a571ed77dd4e9a5d8ca9fdfe8837799ff6e9)|`fix broken docstring`|",
    "created_at": "2015-04-16T09:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301304",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[6278235](https://github.com/sagemath/sagetrac-mirror/commit/62782355193485711d3caadf8db887c6bc4cb3d7)|`Merge tag '6.7.beta1' into #17821`|
|[41f0a57](https://github.com/sagemath/sagetrac-mirror/commit/41f0a571ed77dd4e9a5d8ca9fdfe8837799ff6e9)|`fix broken docstring`|



---

archive/issue_comments_301305.json:
```json
{
    "body": "<a id='comment:22'></a>\nIMHO this is ready for review",
    "created_at": "2015-04-16T10:10:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301305",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>
IMHO this is ready for review



---

archive/issue_comments_301306.json:
```json
{
    "body": "Changing author from \"\" to \"Volker Braun\"",
    "created_at": "2015-04-16T10:10:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301306",
    "user": "https://github.com/vbraun"
}
```

Changing author from "" to "Volker Braun"



---

archive/issue_comments_301307.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-16T10:10:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301307",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_301308.json:
```json
{
    "body": "<a id='comment:23'></a>\nRight now latex/mathjax support in Sage doesn't even have a concept of multiple display equations. Before we can improve that we would first have to write the necessary tools, i.e. latex strings that also know whether they are in math / inline / display mode.",
    "created_at": "2015-04-16T10:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301308",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'></a>
Right now latex/mathjax support in Sage doesn't even have a concept of multiple display equations. Before we can improve that we would first have to write the necessary tools, i.e. latex strings that also know whether they are in math / inline / display mode.



---

archive/issue_comments_301309.json:
```json
{
    "body": "<a id='comment:24'></a>\nTwo questions about\n\n```\n<html><script type=\"math/tex\">\\newcommand{\\Bold}[1]{\\mathbf{#1}}...\n```\n\nWhat is this `<html>` tag??? Looking at HTML tutorials suggests that the whole document is wrapped into it with `<head>`, `<body>` etc. inside of it. What's the point of nesting it without any structure inside?\n\nWhy do we need to define the `\\Bold` command in every formula??? I am not clear why do we need it at all and even if we do for MathJax initialization - can't it be done once for all of them?",
    "created_at": "2015-04-20T17:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301309",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:24'></a>
Two questions about

```
<html><script type="math/tex">\newcommand{\Bold}[1]{\mathbf{#1}}...
```

What is this `<html>` tag??? Looking at HTML tutorials suggests that the whole document is wrapped into it with `<head>`, `<body>` etc. inside of it. What's the point of nesting it without any structure inside?

Why do we need to define the `\Bold` command in every formula??? I am not clear why do we need it at all and even if we do for MathJax initialization - can't it be done once for all of them?



---

archive/issue_comments_301310.json:
```json
{
    "body": "<a id='comment:25'></a>\nI don't like the `<html>` tags either but thats what the old SageNB relied on. Note that only the display backend for doctests still prints it that way for backward compatibility, the html tags are not shown by the commandline display backend. We should get rid of that but it'll probably be a larger auto-generated patch so I'd rather do it in a separate ticket.\n\nI also don't like the extra \\Bold definition but then that should be fixed in the latex generator; It should only emit macro definitions that are actually used. The rich display  stuff shouldn't try to fix up the deficiencies of the latex generator.",
    "created_at": "2015-04-20T18:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301310",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>
I don't like the `<html>` tags either but thats what the old SageNB relied on. Note that only the display backend for doctests still prints it that way for backward compatibility, the html tags are not shown by the commandline display backend. We should get rid of that but it'll probably be a larger auto-generated patch so I'd rather do it in a separate ticket.

I also don't like the extra \Bold definition but then that should be fixed in the latex generator; It should only emit macro definitions that are actually used. The rich display  stuff shouldn't try to fix up the deficiencies of the latex generator.



---

archive/issue_comments_301311.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Andrey Novoseltsev\"",
    "created_at": "2015-04-20T18:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301311",
    "user": "https://github.com/novoselt"
}
```

Changing reviewer from "" to "Andrey Novoseltsev"



---

archive/issue_comments_301312.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-04-20T18:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301312",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_301313.json:
```json
{
    "body": "<a id='comment:26'></a>\nOK - I am setting this to positive review on the basis of things looking reasonable and better than they used to. Hopefully with a merge in an early beta we will get enough people to try it and detect corner cases if there are any.",
    "created_at": "2015-04-20T18:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301313",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:26'></a>
OK - I am setting this to positive review on the basis of things looking reasonable and better than they used to. Hopefully with a merge in an early beta we will get enough people to try it and detect corner cases if there are any.



---

archive/issue_events_065618.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-21T00:10:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17821#event-65618"
}
```



---

archive/issue_comments_301314.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-04-21T00:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301314",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_301315.json:
```json
{
    "body": "Changing branch from \"u/vbraun/refactor_pretty_print\" to \"41f0a571ed77dd4e9a5d8ca9fdfe8837799ff6e9\"",
    "created_at": "2015-04-21T00:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301315",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vbraun/refactor_pretty_print" to "41f0a571ed77dd4e9a5d8ca9fdfe8837799ff6e9"



---

archive/issue_comments_301316.json:
```json
{
    "body": "<a id='comment:28'></a>\nOkay guys. Now whenever I do `graphs.PetersenGraph()` in Sage I get a plot of it. Is it because of this ticket ?\n\nSome graphs that I work with are much too large to be plotted. Just typing 'g' in the command line (as I often do to check the number of vertices) now runs an algorithm that I have to kill.\n\nNathann",
    "created_at": "2015-04-23T11:41:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301316",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:28'></a>
Okay guys. Now whenever I do `graphs.PetersenGraph()` in Sage I get a plot of it. Is it because of this ticket ?

Some graphs that I work with are much too large to be plotted. Just typing 'g' in the command line (as I often do to check the number of vertices) now runs an algorithm that I have to kill.

Nathann



---

archive/issue_comments_301317.json:
```json
{
    "body": "Changing commit from \"41f0a571ed77dd4e9a5d8ca9fdfe8837799ff6e9\" to \"\"",
    "created_at": "2015-04-23T11:41:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301317",
    "user": "https://github.com/nathanncohen"
}
```

Changing commit from "41f0a571ed77dd4e9a5d8ca9fdfe8837799ff6e9" to ""



---

archive/issue_comments_301318.json:
```json
{
    "body": "<a id='comment:29'></a>\nTry it for yourself:\n\n```\nsage: graphs.RandomGNP(500,.2) # wait forever\n```",
    "created_at": "2015-04-23T11:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301318",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:29'></a>
Try it for yourself:

```
sage: graphs.RandomGNP(500,.2) # wait forever
```



---

archive/issue_comments_301319.json:
```json
{
    "body": "<a id='comment:31'></a>\nFollowup at #18289",
    "created_at": "2015-04-23T13:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301319",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:31'></a>
Followup at #18289



---

archive/issue_comments_301320.json:
```json
{
    "body": "<a id='comment:32'></a>\nNo Volker. The problem is not the speed. The problem is that this is not the desired behaviour of `__repr__`. Unless you want to do the same for everything in Sage and call .plot() on matrices, posets, crystals, i.e. everything that plots.\n\nPlease, set it back to its original behaviour.\n\nNathann",
    "created_at": "2015-04-23T13:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301320",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:32'></a>
No Volker. The problem is not the speed. The problem is that this is not the desired behaviour of `__repr__`. Unless you want to do the same for everything in Sage and call .plot() on matrices, posets, crystals, i.e. everything that plots.

Please, set it back to its original behaviour.

Nathann



---

archive/issue_comments_301321.json:
```json
{
    "body": "<a id='comment:33'></a>\nThis ticket is closed. Any discussion should go to #18289",
    "created_at": "2015-04-23T13:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301321",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>
This ticket is closed. Any discussion should go to #18289



---

archive/issue_comments_301322.json:
```json
{
    "body": "<a id='comment:34'></a>\nVolker, please do not do this again. If you force me to accept this new behaviour for graphs, which is totally unpractical for whoever uses them, I will have to write to sage-devel again and it will be the same, over and over.\n\nPlease. This change that you made changes the way we work with graphs, it makes our life more complicated and it is not a good thing. Plus you did this for graphs and graphs only, which is totally incoherent with the behaviour of other classes. \n\nLet's keep it simple Volker, please set this behaviour back to what it was before, i.e. display the number of points in the graph, and its name. Please.\n\nNathann",
    "created_at": "2015-04-23T13:24:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301322",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:34'></a>
Volker, please do not do this again. If you force me to accept this new behaviour for graphs, which is totally unpractical for whoever uses them, I will have to write to sage-devel again and it will be the same, over and over.

Please. This change that you made changes the way we work with graphs, it makes our life more complicated and it is not a good thing. Plus you did this for graphs and graphs only, which is totally incoherent with the behaviour of other classes. 

Let's keep it simple Volker, please set this behaviour back to what it was before, i.e. display the number of points in the graph, and its name. Please.

Nathann



---

archive/issue_comments_301323.json:
```json
{
    "body": "<a id='comment:35'></a>\n(This was resolved at #18289.)",
    "created_at": "2015-04-23T14:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301323",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:35'></a>
(This was resolved at #18289.)



---

archive/issue_comments_301324.json:
```json
{
    "body": "<a id='comment:36'></a>\n> (This was resolved at #18289.)\n\n\nStill *not* resolved.",
    "created_at": "2015-04-29T06:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17821#issuecomment-301324",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:36'></a>
> (This was resolved at #18289.)


Still *not* resolved.
