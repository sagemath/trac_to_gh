# Issue 17344: Ask for dual when using plantri

archive/issues_017107.json:
```json
{
    "assignees": [],
    "body": "Plantri has an option `-d` to get the planar dual of a planar graph instead, for the various classes that it can generate.\n\nIt would be good to allow this option in the methods introduced in #16970.\n\nThis could be useful, as we have no class for planar graphs so far.\n\n**CC:**  @nathanncohen\n\n**Keywords:** plantri\n\n**Branch/Commit:** [b3834bddba1bbe5c059a60e0d24e90aad6d99e82](https://github.com/sagemath/sagetrac-mirror/commit/b3834bddba1bbe5c059a60e0d24e90aad6d99e82)\n\n**Reviewer:** Nathann Cohen\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/17344\n\n",
    "closed_at": "2015-03-10T23:26:10Z",
    "created_at": "2014-11-14T15:10:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Ask for dual when using plantri",
    "type": "issue",
    "updated_at": "2015-03-10T23:26:10Z",
    "url": "https://github.com/sagemath/sage/issues/17344",
    "user": "https://github.com/fchapoton"
}
```
Plantri has an option `-d` to get the planar dual of a planar graph instead, for the various classes that it can generate.

It would be good to allow this option in the methods introduced in #16970.

This could be useful, as we have no class for planar graphs so far.

**CC:**  @nathanncohen

**Keywords:** plantri

**Branch/Commit:** [b3834bddba1bbe5c059a60e0d24e90aad6d99e82](https://github.com/sagemath/sagetrac-mirror/commit/b3834bddba1bbe5c059a60e0d24e90aad6d99e82)

**Reviewer:** Nathann Cohen

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/17344





---

archive/issue_events_212176.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-11-14T15:10:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212176"
}
```



---

archive/issue_events_212177.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-11-14T15:10:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "08517b",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212177"
}
```



---

archive/issue_events_212178.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-11-14T15:10:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212178"
}
```



---

archive/issue_comments_234227.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91081608d4a79a934974d566dffd828d31e2cb64\">9108160</a></td><td><code>trac #17344 trying to allow asking for the planar dual graph</code></td></tr></table>\n",
    "created_at": "2014-11-14T15:25:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234227",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'>**Comment 1:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91081608d4a79a934974d566dffd828d31e2cb64">9108160</a></td><td><code>trac #17344 trying to allow asking for the planar dual graph</code></td></tr></table>




---

archive/issue_comments_234228.json:
```json
{
    "body": "**Commit:** [91081608d4a79a934974d566dffd828d31e2cb64](https://github.com/sagemath/sagetrac-mirror/commit/91081608d4a79a934974d566dffd828d31e2cb64)",
    "created_at": "2014-11-14T15:25:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234228",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [91081608d4a79a934974d566dffd828d31e2cb64](https://github.com/sagemath/sagetrac-mirror/commit/91081608d4a79a934974d566dffd828d31e2cb64)



---

archive/issue_comments_234229.json:
```json
{
    "body": "**Branch:** [u/chapoton/17344](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17344)",
    "created_at": "2014-11-14T15:25:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234229",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/17344](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17344)



---

archive/issue_events_212179.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-11-14T15:25:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "label": "https://github.com/sagemath/sage/labels/minor",
    "label_color": "ff0000",
    "label_name": "minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212179"
}
```



---

archive/issue_comments_234230.json:
```json
{
    "body": "**Changing commit** from \"[91081608d4a79a934974d566dffd828d31e2cb64](https://github.com/sagemath/sagetrac-mirror/commit/91081608d4a79a934974d566dffd828d31e2cb64)\" to \"[1b12db502316876a16577f6dc317ed5bf2c40f7c](https://github.com/sagemath/sagetrac-mirror/commit/1b12db502316876a16577f6dc317ed5bf2c40f7c)\".",
    "created_at": "2014-11-15T20:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234230",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[91081608d4a79a934974d566dffd828d31e2cb64](https://github.com/sagemath/sagetrac-mirror/commit/91081608d4a79a934974d566dffd828d31e2cb64)" to "[1b12db502316876a16577f6dc317ed5bf2c40f7c](https://github.com/sagemath/sagetrac-mirror/commit/1b12db502316876a16577f6dc317ed5bf2c40f7c)".



---

archive/issue_comments_234231.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6447b45bcd10fb40b3ef2ba658da9352b4fc2f18\">6447b45</a></td><td><code>Merge branch 'u/chapoton/17344' into 6.4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b12db502316876a16577f6dc317ed5bf2c40f7c\">1b12db5</a></td><td><code>trac #17344 introducing doctests for the dual keyword</code></td></tr></table>\n",
    "created_at": "2014-11-15T20:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234231",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>**Comment 2:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6447b45bcd10fb40b3ef2ba658da9352b4fc2f18">6447b45</a></td><td><code>Merge branch 'u/chapoton/17344' into 6.4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b12db502316876a16577f6dc317ed5bf2c40f7c">1b12db5</a></td><td><code>trac #17344 introducing doctests for the dual keyword</code></td></tr></table>




---

archive/issue_comments_234232.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nNathann, I have a problem here for the dual of general planar graphs. The test I wrote is failing. And it seems that this may be a problem of multiple edges.\n\nThe Error message is\n\n```\nsage:  gen = graphs.planar_graphs(4,dual=True)  # optional plantri\nsage: graphics_array([u.plot() for u in list(gen)])\n...\nValueError: embedding is not valid for Multi-graph on 3 vertices\n```\nDo you think I should rather remove this `dual=True` possibility for general planar graphs ?",
    "created_at": "2015-02-26T15:39:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234232",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'>**Comment 3:**</a>
Nathann, I have a problem here for the dual of general planar graphs. The test I wrote is failing. And it seems that this may be a problem of multiple edges.

The Error message is

```
sage:  gen = graphs.planar_graphs(4,dual=True)  # optional plantri
sage: graphics_array([u.plot() for u in list(gen)])
...
ValueError: embedding is not valid for Multi-graph on 3 vertices
```
Do you think I should rather remove this `dual=True` possibility for general planar graphs ?



---

archive/issue_comments_234233.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nHello,\n\n> Nathann, I have a problem here for the dual of general planar graphs. The test I wrote is failing. And it seems that this may be a problem of multiple edges.\n\nIt seems that the problems come from the embedding. You could first try to remove the embedding stored within the graph to check that it all works, and if it does try to find out what is wrong with the embedding contained in this graph ?\n\nNathann",
    "created_at": "2015-02-26T15:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234233",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'>**Comment 4:**</a>
Hello,

> Nathann, I have a problem here for the dual of general planar graphs. The test I wrote is failing. And it seems that this may be a problem of multiple edges.

It seems that the problems come from the embedding. You could first try to remove the embedding stored within the graph to check that it all works, and if it does try to find out what is wrong with the embedding contained in this graph ?

Nathann



---

archive/issue_comments_234234.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nHello,\n\nwhen commenting the set_embeddings line, one obtains graphs, but they are not correct. It seems that every multiple edge is duplicated. For example, the \"4 star graph\" dual should have one vertex and three loops, it has 6 loops.\n\nSo, maybe a problem in read_planar_code ?",
    "created_at": "2015-02-26T15:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234234",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'>**Comment 5:**</a>
Hello,

when commenting the set_embeddings line, one obtains graphs, but they are not correct. It seems that every multiple edge is duplicated. For example, the "4 star graph" dual should have one vertex and three loops, it has 6 loops.

So, maybe a problem in read_planar_code ?



---

archive/issue_comments_234235.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nHmmmmmmm... I don't know, I am not too surprised by 6 loops in this situation. \"The face touches 6 half-edges\", or something like that. I agree that it is odd at first, but I would not call it a bug yet.",
    "created_at": "2015-02-26T15:52:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234235",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'>**Comment 6:**</a>
Hmmmmmmm... I don't know, I am not too surprised by 6 loops in this situation. "The face touches 6 half-edges", or something like that. I agree that it is odd at first, but I would not call it a bug yet.



---

archive/issue_comments_234236.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nFor the dual of the 4-cycle, one gets two vertices linked by 8 edges..",
    "created_at": "2015-02-26T15:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234236",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'>**Comment 7:**</a>
For the dual of the 4-cycle, one gets two vertices linked by 8 edges..



---

archive/issue_comments_234237.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\n> For the dual of the 4-cycle, one gets two vertices linked by 8 edges..\n\nWell, now that is weird `:-P`\n\nCan you see if plantri (in command-line) has some different output, which could let you check that it is indeed returning 'correct' graphs ? If that's correct, then indeed the problem may come from `read_planar_code`.\n\nNathann",
    "created_at": "2015-02-26T16:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234237",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'>**Comment 8:**</a>
> For the dual of the 4-cycle, one gets two vertices linked by 8 edges..

Well, now that is weird `:-P`

Can you see if plantri (in command-line) has some different output, which could let you check that it is indeed returning 'correct' graphs ? If that's correct, then indeed the problem may come from `read_planar_code`.

Nathann



---

archive/issue_comments_234238.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nHow should I do that ?\n\nI tried \n\n```\nplantri -pm1c1d 4\n```\nin a sage-shell, but I got\n\n```\nplantri -pm1c1d 4 \n6 polytopes written to stdout; cpu=0.00 sec\n```\nand then binary things..",
    "created_at": "2015-02-26T17:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234238",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'>**Comment 9:**</a>
How should I do that ?

I tried 

```
plantri -pm1c1d 4
```
in a sage-shell, but I got

```
plantri -pm1c1d 4 
6 polytopes written to stdout; cpu=0.00 sec
```
and then binary things..



---

archive/issue_comments_234239.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\n> How should I do that ?\n\nhttp://cs.anu.edu.au/~bdm/plantri/plantri-guide.txt\n\nIt seems that different output format are available.\n\nNathann",
    "created_at": "2015-02-26T17:44:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234239",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'>**Comment 10:**</a>
> How should I do that ?

http://cs.anu.edu.au/~bdm/plantri/plantri-guide.txt

It seems that different output format are available.

Nathann



---

archive/issue_comments_234240.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nOk, here is the output of plantri in ascii\n\n```\nplantri -pm1c1da 4 \n4 bcd,adc,abd,acb\n3 bccb,aac,aba\n2 bbbb,aaaa\n2 abbba,aaa\n1 aaaaaa\n1 aaaaaa\n```\nWhen there is no loop, this looks fine. So if we assume that the binary code is the same, then there must be a problem in the reading procedure.\n\nFor loops, as in the last two (duals of trees with 4 vertices), it could be just a matter of conventions. But I would expect only 3 loops, as these trees have 3 edges.",
    "created_at": "2015-02-26T20:06:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234240",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'>**Comment 11:**</a>
Ok, here is the output of plantri in ascii

```
plantri -pm1c1da 4 
4 bcd,adc,abd,acb
3 bccb,aac,aba
2 bbbb,aaaa
2 abbba,aaa
1 aaaaaa
1 aaaaaa
```
When there is no loop, this looks fine. So if we assume that the binary code is the same, then there must be a problem in the reading procedure.

For loops, as in the last two (duals of trees with 4 vertices), it could be just a matter of conventions. But I would expect only 3 loops, as these trees have 3 edges.



---

archive/issue_comments_234241.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nOk, I think I see.\n\n1) The output of plantri is giving the list of half-edges around each vertex. This is correct.\n\n2) When the graph has no loops or multiple edges, the graph constructor of sage is able to eat twice the same edge (in both direction) and give just one edge. But when there are multiple edges, it will not identify the same edge given in two directions.\n\nThis does not seem easy to remedy. Maybe I should restrict my ticket to the cases where duals have no loops or multiples edges ?",
    "created_at": "2015-02-27T16:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234241",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'>**Comment 12:**</a>
Ok, I think I see.

1) The output of plantri is giving the list of half-edges around each vertex. This is correct.

2) When the graph has no loops or multiple edges, the graph constructor of sage is able to eat twice the same edge (in both direction) and give just one edge. But when there are multiple edges, it will not identify the same edge given in two directions.

This does not seem easy to remedy. Maybe I should restrict my ticket to the cases where duals have no loops or multiples edges ?



---

archive/issue_comments_234242.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nHelloooooooooo !\n\n> 1) The output of plantri is giving the list of half-edges around each vertex. This is correct.\n> \n> 2) When the graph has no loops or multiple edges, the graph constructor of sage is able to eat twice the same edge (in both direction) and give just one edge. But when there are multiple edges, it will not identify the same edge given in two directions.\n\nOh. I see. It seems that I forgot something when writing #15706 (see also https://groups.google.com/forum/#!topic/sage-devel/78OBybXrfI8) for `Graph([(1,2),(1,2)])` should display a warning.\n\nI will write a small patch for this today or tomorrow.\n\n> This does not seem easy to remedy. Maybe I should restrict my ticket to the cases where duals have no loops or multiples edges ?\n\nWell, if a \"planar code\" always lists edges twice (once in each direction) isn't it better to just simplify this in this `read_planar_code` function ?\n\nNathann",
    "created_at": "2015-02-27T16:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234242",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'>**Comment 13:**</a>
Helloooooooooo !

> 1) The output of plantri is giving the list of half-edges around each vertex. This is correct.
> 
> 2) When the graph has no loops or multiple edges, the graph constructor of sage is able to eat twice the same edge (in both direction) and give just one edge. But when there are multiple edges, it will not identify the same edge given in two directions.

Oh. I see. It seems that I forgot something when writing #15706 (see also https://groups.google.com/forum/#!topic/sage-devel/78OBybXrfI8) for `Graph([(1,2),(1,2)])` should display a warning.

I will write a small patch for this today or tomorrow.

> This does not seem easy to remedy. Maybe I should restrict my ticket to the cases where duals have no loops or multiples edges ?

Well, if a "planar code" always lists edges twice (once in each direction) isn't it better to just simplify this in this `read_planar_code` function ?

Nathann



---

archive/issue_events_212180.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-05T19:52:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212180"
}
```



---

archive/issue_comments_234243.json:
```json
{
    "body": "**Author:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2015-03-05T19:52:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234243",
    "user": "https://github.com/fchapoton"
}
```

**Author:** Frédéric Chapoton



---

archive/issue_events_212181.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-05T19:52:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212181"
}
```



---

archive/issue_events_212182.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-05T19:52:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212182"
}
```



---

archive/issue_events_212183.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-05T19:52:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212183"
}
```



---

archive/issue_events_212184.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-05T19:52:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212184"
}
```



---

archive/issue_comments_234244.json:
```json
{
    "body": "**Changing commit** from \"[1b12db502316876a16577f6dc317ed5bf2c40f7c](https://github.com/sagemath/sagetrac-mirror/commit/1b12db502316876a16577f6dc317ed5bf2c40f7c)\" to \"[0a675ab7fe976200a0165cee224548ea8640daa6](https://github.com/sagemath/sagetrac-mirror/commit/0a675ab7fe976200a0165cee224548ea8640daa6)\".",
    "created_at": "2015-03-06T16:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234244",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[1b12db502316876a16577f6dc317ed5bf2c40f7c](https://github.com/sagemath/sagetrac-mirror/commit/1b12db502316876a16577f6dc317ed5bf2c40f7c)" to "[0a675ab7fe976200a0165cee224548ea8640daa6](https://github.com/sagemath/sagetrac-mirror/commit/0a675ab7fe976200a0165cee224548ea8640daa6)".



---

archive/issue_comments_234245.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23b415a13b8ac12537a977a2b4fa9a0dde5e6a04\">23b415a</a></td><td><code>Merge branch 'u/chapoton/17344' into 6.6.b3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a675ab7fe976200a0165cee224548ea8640daa6\">0a675ab</a></td><td><code>trac #17344 trying to cope with loops and mutiple edges in plantri</code></td></tr></table>\n",
    "created_at": "2015-03-06T16:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234245",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>**Comment 16:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23b415a13b8ac12537a977a2b4fa9a0dde5e6a04">23b415a</a></td><td><code>Merge branch 'u/chapoton/17344' into 6.6.b3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a675ab7fe976200a0165cee224548ea8640daa6">0a675ab</a></td><td><code>trac #17344 trying to cope with loops and mutiple edges in plantri</code></td></tr></table>




---

archive/issue_comments_234246.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nok, here is something that works (at least a little bit) and pass the tests.\n\nI wonder that is the status of `set_embeddings` for graphs with loops and multiples edges.",
    "created_at": "2015-03-06T16:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234246",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'>**Comment 17:**</a>
ok, here is something that works (at least a little bit) and pass the tests.

I wonder that is the status of `set_embeddings` for graphs with loops and multiples edges.



---

archive/issue_events_212185.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-06T16:38:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212185"
}
```



---

archive/issue_events_212186.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-06T16:38:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212186"
}
```



---

archive/issue_comments_234247.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nIt looks rather good. Could you add some doctests somewhere, however, to make sure that the new behaviour of `read_planar_code` does not work against us ? Something like counting the number of edges of a 3-connected triangulation (the way you already count the number of vertices), or the behaviour of your 'dual' option for non-3-connected graphs (i.e. there are multiple edges and/or loops)?\n\nThis is just to make sure that we will get a warning if someday they decide that they do not want to enumerate the multiple edges or loops twice `^^;`\n\nNathann",
    "created_at": "2015-03-09T16:12:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234247",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'>**Comment 18:**</a>
It looks rather good. Could you add some doctests somewhere, however, to make sure that the new behaviour of `read_planar_code` does not work against us ? Something like counting the number of edges of a 3-connected triangulation (the way you already count the number of vertices), or the behaviour of your 'dual' option for non-3-connected graphs (i.e. there are multiple edges and/or loops)?

This is just to make sure that we will get a warning if someday they decide that they do not want to enumerate the multiple edges or loops twice `^^;`

Nathann



---

archive/issue_comments_234248.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f40c060c94380779cafe07bea10e2a17e4be2503\">f40c060</a></td><td><code>trac #17344 adding some tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8439e4556e64e5c354ceff2ca319d2db5ebd8ec\">f8439e4</a></td><td><code>trac #17344 a few roles corrected</code></td></tr></table>\n",
    "created_at": "2015-03-09T20:02:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234248",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>**Comment 19:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f40c060c94380779cafe07bea10e2a17e4be2503">f40c060</a></td><td><code>trac #17344 adding some tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8439e4556e64e5c354ceff2ca319d2db5ebd8ec">f8439e4</a></td><td><code>trac #17344 a few roles corrected</code></td></tr></table>




---

archive/issue_comments_234249.json:
```json
{
    "body": "**Changing commit** from \"[0a675ab7fe976200a0165cee224548ea8640daa6](https://github.com/sagemath/sagetrac-mirror/commit/0a675ab7fe976200a0165cee224548ea8640daa6)\" to \"[f8439e4556e64e5c354ceff2ca319d2db5ebd8ec](https://github.com/sagemath/sagetrac-mirror/commit/f8439e4556e64e5c354ceff2ca319d2db5ebd8ec)\".",
    "created_at": "2015-03-09T20:02:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234249",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[0a675ab7fe976200a0165cee224548ea8640daa6](https://github.com/sagemath/sagetrac-mirror/commit/0a675ab7fe976200a0165cee224548ea8640daa6)" to "[f8439e4556e64e5c354ceff2ca319d2db5ebd8ec](https://github.com/sagemath/sagetrac-mirror/commit/f8439e4556e64e5c354ceff2ca319d2db5ebd8ec)".



---

archive/issue_comments_234250.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nThanks Nathann.\n\nI have tried to add some tests, not sure if I did it right.\n\nI have also corrected a few trac and oeis roles.",
    "created_at": "2015-03-09T20:04:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234250",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:20'>**Comment 20:**</a>
Thanks Nathann.

I have tried to add some tests, not sure if I did it right.

I have also corrected a few trac and oeis roles.



---

archive/issue_comments_234251.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nHelloooooooooooo,\n\n> I have tried to add some tests, not sure if I did it right.\n\nWhat you did is good. I had in mind some other test which I tried to add, but then I found a bug:\n\n```\nsage: [x.size() for x in graphs.planar_graphs(5,dual=True)]\n...\nValueError: embedding is not valid for Looped graph on 4 vertices\n```\n\nNathann\n\nP.S.: SOrryyyyy... I know that this review is becoming a bit unpleasant `^^;`",
    "created_at": "2015-03-09T20:38:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234251",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'>**Comment 21:**</a>
Helloooooooooooo,

> I have tried to add some tests, not sure if I did it right.

What you did is good. I had in mind some other test which I tried to add, but then I found a bug:

```
sage: [x.size() for x in graphs.planar_graphs(5,dual=True)]
...
ValueError: embedding is not valid for Looped graph on 4 vertices
```

Nathann

P.S.: SOrryyyyy... I know that this review is becoming a bit unpleasant `^^;`



---

archive/issue_comments_234252.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nmaybe we should just also avoid to set embeddings if there are loops ?",
    "created_at": "2015-03-09T21:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234252",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'>**Comment 22:**</a>
maybe we should just also avoid to set embeddings if there are loops ?



---

archive/issue_comments_234253.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nHMmmmm... Yep, it is probably safer for the moment. I expect that embedding have not been defined in Sage to handle this kind of things `:-/`\n\nNathann",
    "created_at": "2015-03-09T21:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234253",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'>**Comment 23:**</a>
HMmmmm... Yep, it is probably safer for the moment. I expect that embedding have not been defined in Sage to handle this kind of things `:-/`

Nathann



---

archive/issue_comments_234254.json:
```json
{
    "body": "**Changing commit** from \"[f8439e4556e64e5c354ceff2ca319d2db5ebd8ec](https://github.com/sagemath/sagetrac-mirror/commit/f8439e4556e64e5c354ceff2ca319d2db5ebd8ec)\" to \"[c56b59addbbf248a1be527090e5d77f82e86e315](https://github.com/sagemath/sagetrac-mirror/commit/c56b59addbbf248a1be527090e5d77f82e86e315)\".",
    "created_at": "2015-03-10T08:39:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234254",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[f8439e4556e64e5c354ceff2ca319d2db5ebd8ec](https://github.com/sagemath/sagetrac-mirror/commit/f8439e4556e64e5c354ceff2ca319d2db5ebd8ec)" to "[c56b59addbbf248a1be527090e5d77f82e86e315](https://github.com/sagemath/sagetrac-mirror/commit/c56b59addbbf248a1be527090e5d77f82e86e315)".



---

archive/issue_comments_234255.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c56b59addbbf248a1be527090e5d77f82e86e315\">c56b59a</a></td><td><code>trac #17344 no embedding for looped graphs</code></td></tr></table>\n",
    "created_at": "2015-03-10T08:39:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234255",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>**Comment 24:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c56b59addbbf248a1be527090e5d77f82e86e315">c56b59a</a></td><td><code>trac #17344 no embedding for looped graphs</code></td></tr></table>




---

archive/issue_comments_234256.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nHellooooooo Fr\u00e9d\u00e9ric!\n\nThe branch looks ready. I added a small commit on top of yours at public/17344: it modifies the latest doctest you added in order to make sure that we did not miss any edge while reading the planar code of the dual graphs.\n\nIf this is fine for you, please add this commit to your branch (or change the branch's name) and set this ticket to `positive_review`.\n\nThanks for your ticket,\n\nNathann",
    "created_at": "2015-03-10T15:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234256",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:25'>**Comment 25:**</a>
Hellooooooo Frédéric!

The branch looks ready. I added a small commit on top of yours at public/17344: it modifies the latest doctest you added in order to make sure that we did not miss any edge while reading the planar code of the dual graphs.

If this is fine for you, please add this commit to your branch (or change the branch's name) and set this ticket to `positive_review`.

Thanks for your ticket,

Nathann



---

archive/issue_comments_234257.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2015-03-10T15:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234257",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_comments_234258.json:
```json
{
    "body": "**Changing commit** from \"[c56b59addbbf248a1be527090e5d77f82e86e315](https://github.com/sagemath/sagetrac-mirror/commit/c56b59addbbf248a1be527090e5d77f82e86e315)\" to \"[b3834bddba1bbe5c059a60e0d24e90aad6d99e82](https://github.com/sagemath/sagetrac-mirror/commit/b3834bddba1bbe5c059a60e0d24e90aad6d99e82)\".",
    "created_at": "2015-03-10T17:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234258",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[c56b59addbbf248a1be527090e5d77f82e86e315](https://github.com/sagemath/sagetrac-mirror/commit/c56b59addbbf248a1be527090e5d77f82e86e315)" to "[b3834bddba1bbe5c059a60e0d24e90aad6d99e82](https://github.com/sagemath/sagetrac-mirror/commit/b3834bddba1bbe5c059a60e0d24e90aad6d99e82)".



---

archive/issue_events_212187.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-10T17:13:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212187"
}
```



---

archive/issue_events_212188.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-10T17:13:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212188"
}
```



---

archive/issue_comments_234259.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/17344](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17344)\" to \"[public/17344](https://github.com/sagemath/sagetrac-mirror/tree/public/17344)\".",
    "created_at": "2015-03-10T17:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234259",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/chapoton/17344](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/17344)" to "[public/17344](https://github.com/sagemath/sagetrac-mirror/tree/public/17344)".



---

archive/issue_comments_234260.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nThen positive review. Thank you !",
    "created_at": "2015-03-10T17:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234260",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:26'>**Comment 26:**</a>
Then positive review. Thank you !



---

archive/issue_events_212189.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-10T23:26:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212189"
}
```



---

archive/issue_events_212190.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e811aed964316b8997367134966e26b57cb389da",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-03-10T23:26:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17344#event-212190"
}
```



---

archive/issue_comments_234261.json:
```json
{
    "body": "**Changing branch** from \"[public/17344](https://github.com/sagemath/sagetrac-mirror/tree/public/17344)\" to \"[b3834bddba1bbe5c059a60e0d24e90aad6d99e82](https://github.com/sagemath/sagetrac-mirror/commit/b3834bddba1bbe5c059a60e0d24e90aad6d99e82)\".",
    "created_at": "2015-03-10T23:26:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17344#issuecomment-234261",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/17344](https://github.com/sagemath/sagetrac-mirror/tree/public/17344)" to "[b3834bddba1bbe5c059a60e0d24e90aad6d99e82](https://github.com/sagemath/sagetrac-mirror/commit/b3834bddba1bbe5c059a60e0d24e90aad6d99e82)".
