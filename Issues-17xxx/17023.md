# Issue 17023: Adding width() function to poset

archive/issues_016786.json:
```json
{
    "assignees": [],
    "body": "Add a `.width()` -- i.e. number of elements in the longest antichain -- to poset. Seems to have polynomial time algorithm based on Dilworth's Theorem.\n\n\nCC:  @nathanncohen\n\nBranch/Commit: **[99f8ed0](https://github.com/sagemath/sagetrac-mirror/commit/99f8ed04511d4422eb0874a5332132b4058d8e34)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton, Jori M\u00e4ntysalo**\n\nAuthor: **Nathann Cohen**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17023_\n\n",
    "closed_at": "2014-10-15T18:12:35Z",
    "created_at": "2014-09-21T05:54:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Adding width() function to poset",
    "type": "issue",
    "updated_at": "2014-10-15T18:12:35Z",
    "url": "https://github.com/sagemath/sage/issues/17023",
    "user": "https://github.com/jm58660"
}
```
Add a `.width()` -- i.e. number of elements in the longest antichain -- to poset. Seems to have polynomial time algorithm based on Dilworth's Theorem.


CC:  @nathanncohen

Branch/Commit: **[99f8ed0](https://github.com/sagemath/sagetrac-mirror/commit/99f8ed04511d4422eb0874a5332132b4058d8e34)**

Reviewer: **Frédéric Chapoton, Jori Mäntysalo**

Author: **Nathann Cohen**

_Issue created by migration from https://trac.sagemath.org/ticket/17023_





---

archive/issue_events_217537.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-09-21T05:54:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217537"
}
```



---

archive/issue_events_217538.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-09-21T05:54:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217538"
}
```



---

archive/issue_events_217539.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-09-21T05:54:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217539"
}
```



---

archive/issue_events_217540.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-09-21T05:54:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217540"
}
```



---

archive/issue_comments_227726.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI am writing this code right now.",
    "created_at": "2014-09-21T10:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227726",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'>Comment 2:</a>
I am writing this code right now.



---

archive/issue_comments_227727.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nFast catch! So there is no function for maximum match at graphs available for wrapping?",
    "created_at": "2014-09-21T11:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227727",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:3'>Comment 3:</a>
Fast catch! So there is no function for maximum match at graphs available for wrapping?



---

archive/issue_comments_227728.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\n> Fast catch! So there is no function for maximum match at graphs available for wrapping?\n\nThere is, but I want to do the job properly.\n\nYou can get the width with `len(Graph(your_poset.hasse_diagram().transitive_closure()).independent_set())` in the meantime.\n\nNathann",
    "created_at": "2014-09-21T11:29:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227728",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'>Comment 4:</a>
> Fast catch! So there is no function for maximum match at graphs available for wrapping?

There is, but I want to do the job properly.

You can get the width with `len(Graph(your_poset.hasse_diagram().transitive_closure()).independent_set())` in the meantime.

Nathann



---

archive/issue_events_217541.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-09-21T11:57:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217541"
}
```



---

archive/issue_comments_227729.json:
```json
{
    "body": "Author: **Nathann Cohen**",
    "created_at": "2014-09-21T11:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227729",
    "user": "https://github.com/nathanncohen"
}
```

Author: **Nathann Cohen**



---

archive/issue_comments_227730.json:
```json
{
    "body": "Branch: **[u/ncohen/17023](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/17023)**",
    "created_at": "2014-09-21T11:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227730",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[u/ncohen/17023](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/17023)**



---

archive/issue_comments_227731.json:
```json
{
    "body": "Commit: **[50e349b](https://github.com/sagemath/sagetrac-mirror/commit/50e349b5255c0efd24b4f152d7bc0f3d17ae85bd)**",
    "created_at": "2014-09-21T11:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227731",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[50e349b](https://github.com/sagemath/sagetrac-mirror/commit/50e349b5255c0efd24b4f152d7bc0f3d17ae85bd)**



---

archive/issue_comments_227732.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad47132453d5bca8ea076357be87db9313f0ae64\">ad47132</a></td><td><code>trac #16909: transitive_closure() and mutable graphs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/711236c7b660a32740d60e8e530551f23cc22607\">711236c</a></td><td><code>trac #16909: Merged with 6.4.beta3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50e349b5255c0efd24b4f152d7bc0f3d17ae85bd\">50e349b</a></td><td><code>trac #17023: Poset.width and Poset.dilworth_decomposition</code></td></tr></table>\n",
    "created_at": "2014-09-21T11:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227732",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad47132453d5bca8ea076357be87db9313f0ae64">ad47132</a></td><td><code>trac #16909: transitive_closure() and mutable graphs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/711236c7b660a32740d60e8e530551f23cc22607">711236c</a></td><td><code>trac #16909: Merged with 6.4.beta3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50e349b5255c0efd24b4f152d7bc0f3d17ae85bd">50e349b</a></td><td><code>trac #17023: Poset.width and Poset.dilworth_decomposition</code></td></tr></table>




---

archive/issue_events_217542.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-09-21T12:17:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217542"
}
```



---

archive/issue_events_217543.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-09-21T12:17:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217543"
}
```



---

archive/issue_comments_227733.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nIf `height()` has description \"Return the height (number of elements in the longest chain) of the poset.\", then I think that this should have\n\n\"Return the height (number of elements in the longest antichain) of the poset.\n\nFor information about algorithm, see :wikipedia:`Dilworth's_theorem`.\"\n\nBecause Dilworth's theorem is not really part of function definition but an implementation detail.",
    "created_at": "2014-09-21T12:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227733",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:7'>Comment 7:</a>
If `height()` has description "Return the height (number of elements in the longest chain) of the poset.", then I think that this should have

"Return the height (number of elements in the longest antichain) of the poset.

For information about algorithm, see :wikipedia:`Dilworth's_theorem`."

Because Dilworth's theorem is not really part of function definition but an implementation detail.



---

archive/issue_comments_227734.json:
```json
{
    "body": "Changed commit from **[50e349b](https://github.com/sagemath/sagetrac-mirror/commit/50e349b5255c0efd24b4f152d7bc0f3d17ae85bd)** to **[235fc28](https://github.com/sagemath/sagetrac-mirror/commit/235fc282be25432da0f3e224ffab6ac9c7c5f5e5)**",
    "created_at": "2014-09-21T12:31:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227734",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[50e349b](https://github.com/sagemath/sagetrac-mirror/commit/50e349b5255c0efd24b4f152d7bc0f3d17ae85bd)** to **[235fc28](https://github.com/sagemath/sagetrac-mirror/commit/235fc282be25432da0f3e224ffab6ac9c7c5f5e5)**



---

archive/issue_comments_227735.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/235fc282be25432da0f3e224ffab6ac9c7c5f5e5\">235fc28</a></td><td><code>trac #17023: Reviwer's remarks</code></td></tr></table>\n",
    "created_at": "2014-09-21T12:31:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227735",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/235fc282be25432da0f3e224ffab6ac9c7c5f5e5">235fc28</a></td><td><code>trac #17023: Reviwer's remarks</code></td></tr></table>




---

archive/issue_events_217544.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-09-21T12:32:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217544"
}
```



---

archive/issue_events_217545.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-09-21T12:32:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217545"
}
```



---

archive/issue_comments_227736.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nSeems to work. I checked extreme cases: empty poset, one-element poset, chains and antichains, all poset of size n up to n=7 and few thousand random posets with varying parameters.\n\nReading code is propably best done with someone wiser than I am.\n\nOne line descriptions should have a dot at the end, because they are full sentences.",
    "created_at": "2014-09-21T15:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227736",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:10'>Comment 10:</a>
Seems to work. I checked extreme cases: empty poset, one-element poset, chains and antichains, all poset of size n up to n=7 and few thousand random posets with varying parameters.

Reading code is propably best done with someone wiser than I am.

One line descriptions should have a dot at the end, because they are full sentences.



---

archive/issue_comments_227737.json:
```json
{
    "body": "Changed branch from **[u/ncohen/17023](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/17023)** to **[public/ticket/17023](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17023)**",
    "created_at": "2014-09-24T18:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227737",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/ncohen/17023](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/17023)** to **[public/ticket/17023](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17023)**



---

archive/issue_comments_227738.json:
```json
{
    "body": "Changed commit from **[235fc28](https://github.com/sagemath/sagetrac-mirror/commit/235fc282be25432da0f3e224ffab6ac9c7c5f5e5)** to **[99f8ed0](https://github.com/sagemath/sagetrac-mirror/commit/99f8ed04511d4422eb0874a5332132b4058d8e34)**",
    "created_at": "2014-09-24T18:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227738",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[235fc28](https://github.com/sagemath/sagetrac-mirror/commit/235fc282be25432da0f3e224ffab6ac9c7c5f5e5)** to **[99f8ed0](https://github.com/sagemath/sagetrac-mirror/commit/99f8ed04511d4422eb0874a5332132b4058d8e34)**



---

archive/issue_comments_227739.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nHello,\n\nI made a few little changes. Not a review, sorry.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99f8ed04511d4422eb0874a5332132b4058d8e34\">99f8ed0</a></td><td><code>trac #17023 code and doc formatting + one ref</code></td></tr></table>\n",
    "created_at": "2014-09-24T18:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227739",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'>Comment 11:</a>
Hello,

I made a few little changes. Not a review, sorry.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99f8ed04511d4422eb0874a5332132b4058d8e34">99f8ed0</a></td><td><code>trac #17023 code and doc formatting + one ref</code></td></tr></table>




---

archive/issue_comments_227740.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nAbout \"return\" vs. \"returns\" on documentation: at least http://legacy.python.org/dev/peps/pep-0008/#documentation-strings shows example with \"return\". There was also some discussion about this at sage-devel -list at last month. Hence I think that Nathan's code follows style manual.",
    "created_at": "2014-09-25T05:07:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227740",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:12'>Comment 12:</a>
About "return" vs. "returns" on documentation: at least http://legacy.python.org/dev/peps/pep-0008/#documentation-strings shows example with "return". There was also some discussion about this at sage-devel -list at last month. Hence I think that Nathan's code follows style manual.



---

archive/issue_comments_227741.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nI did some timings. It seems that for something like `P=Posets.RandomPoset(100,0.15)` or so it is faster to run `max(len(x) for x in P.antichains())` than `P.width()`. On the other hand the measured complexity of `.width()` seems to be polynomial as it should.\n\nI will do more test on faster computer, this was done quickly with an oooold machine.",
    "created_at": "2014-09-25T05:31:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227741",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:13'>Comment 13:</a>
I did some timings. It seems that for something like `P=Posets.RandomPoset(100,0.15)` or so it is faster to run `max(len(x) for x in P.antichains())` than `P.width()`. On the other hand the measured complexity of `.width()` seems to be polynomial as it should.

I will do more test on faster computer, this was done quickly with an oooold machine.



---

archive/issue_comments_227742.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nHow fast is `connected_components()` on graphs? Because this can be done simply by summing widths of connected subposets.\n\nIf posets are more \"chain-like\", then simply looking antichains seems to be faster. For posets more \"antichain-like\" it is much faster to use this new `.width()` method. Where is the turning point? Can there be some heuristic based on ratio of number of edges to number of vertices?",
    "created_at": "2014-09-25T07:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227742",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:14'>Comment 14:</a>
How fast is `connected_components()` on graphs? Because this can be done simply by summing widths of connected subposets.

If posets are more "chain-like", then simply looking antichains seems to be faster. For posets more "antichain-like" it is much faster to use this new `.width()` method. Where is the turning point? Can there be some heuristic based on ratio of number of edges to number of vertices?



---

archive/issue_comments_227743.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\n> About \"return\" vs. \"returns\" on documentation: at least http://legacy.python.org/dev/peps/pep-0008/#documentation-strings shows example with \"return\". There was also some discussion about this at sage-devel -list at last month. Hence I think that Nathan's code follows style manual.\n\nI think that it follows manual, for not so long ago one of my patches was set to 'needs_work' because I wrote \"returns\" instead of \"return\". I do not care if the convention changes at every review for as long as I am not the one who writes the commits.\n\nNathann",
    "created_at": "2014-09-25T08:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227743",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'>Comment 15:</a>
> About "return" vs. "returns" on documentation: at least http://legacy.python.org/dev/peps/pep-0008/#documentation-strings shows example with "return". There was also some discussion about this at sage-devel -list at last month. Hence I think that Nathan's code follows style manual.

I think that it follows manual, for not so long ago one of my patches was set to 'needs_work' because I wrote "returns" instead of "return". I do not care if the convention changes at every review for as long as I am not the one who writes the commits.

Nathann



---

archive/issue_comments_227744.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\n> I did some timings. It seems that for something like `P=Posets.RandomPoset(100,0.15)` or so it is faster to run `max(len(x) for x in P.antichains())` than `P.width()`. On the other hand the measured complexity of `.width()` seems to be polynomial as it should.\n\nSeems that random posets have a very very small width `O_o`\n\nNathann",
    "created_at": "2014-09-25T08:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227744",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'>Comment 16:</a>
> I did some timings. It seems that for something like `P=Posets.RandomPoset(100,0.15)` or so it is faster to run `max(len(x) for x in P.antichains())` than `P.width()`. On the other hand the measured complexity of `.width()` seems to be polynomial as it should.

Seems that random posets have a very very small width `O_o`

Nathann



---

archive/issue_comments_227745.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReplying to [@nathanncohen](#comment%3A16):\n\n> Seems that random posets have a very very small width `O_o`\n\nActually this has been thinked already. Brinkmann & McKay says at the end of paper Posets on up to 16 points \"Our results do not show this behaviour, emphasizing again that the convergence of posets to their asymptotic behaviour is quite slow.\" Hence no help from that.",
    "created_at": "2014-09-25T08:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227745",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:17'>Comment 17:</a>
Replying to [@nathanncohen](#comment%3A16):

> Seems that random posets have a very very small width `O_o`

Actually this has been thinked already. Brinkmann & McKay says at the end of paper Posets on up to 16 points "Our results do not show this behaviour, emphasizing again that the convergence of posets to their asymptotic behaviour is quite slow." Hence no help from that.



---

archive/issue_comments_227746.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nHello !\n\n> How fast is `connected_components()` on graphs? Because this can be done simply by summing widths of connected subposets.\n\nWhat do you mean ? If the poset is not connected you can indeed split it and compute the result on each connected components but I don't think the code I implemented will run any faster because of that. It would decrease the number of antichains though. But add an element superior to all others in your posets and you lost connectivity for the very same width.\n\n> If posets are more \"chain-like\", then simply looking antichains seems to be faster. For posets more \"antichain-like\" it is much faster to use this new `.width()` method. Where is the turning point? Can there be some heuristic based on ratio of number of edges to number of vertices?\n\nWell, maybe there is some algorithm to recognize posets with width <=2. And we already have a `is_chain` for width 1. Also, I think that something like \n\n```\nlen(Graph(posets.ChainPoset(6).hasse_diagram().transitive_closure()).independent_set())\n```\nshould be a bit faster than enumerating the antichains. Even though enumerating the antichains may be faster for very very line-looking posets, for you don't have any graphs to copy around, ...\n\nNathann",
    "created_at": "2014-09-25T08:25:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227746",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'>Comment 18:</a>
Hello !

> How fast is `connected_components()` on graphs? Because this can be done simply by summing widths of connected subposets.

What do you mean ? If the poset is not connected you can indeed split it and compute the result on each connected components but I don't think the code I implemented will run any faster because of that. It would decrease the number of antichains though. But add an element superior to all others in your posets and you lost connectivity for the very same width.

> If posets are more "chain-like", then simply looking antichains seems to be faster. For posets more "antichain-like" it is much faster to use this new `.width()` method. Where is the turning point? Can there be some heuristic based on ratio of number of edges to number of vertices?

Well, maybe there is some algorithm to recognize posets with width <=2. And we already have a `is_chain` for width 1. Also, I think that something like 

```
len(Graph(posets.ChainPoset(6).hasse_diagram().transitive_closure()).independent_set())
```
should be a bit faster than enumerating the antichains. Even though enumerating the antichains may be faster for very very line-looking posets, for you don't have any graphs to copy around, ...

Nathann



---

archive/issue_comments_227747.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nYou are right, on average connected posets are far more common than non-connected. Hence this should be like it now is.\n\nDuh, should I try to understand theorem and read the code...",
    "created_at": "2014-09-25T12:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227747",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:19'>Comment 19:</a>
You are right, on average connected posets are far more common than non-connected. Hence this should be like it now is.

Duh, should I try to understand theorem and read the code...



---

archive/issue_comments_227748.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nI read the code. As a side not, almost all examples use \"P =\", you have used \"p =\".\n\nBut as far as I can say, code seems to do what it should. I think this could be marked as positive review after trivial modifications like \"returns\" vs. \"return\".",
    "created_at": "2014-09-26T10:32:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227748",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:20'>Comment 20:</a>
I read the code. As a side not, almost all examples use "P =", you have used "p =".

But as far as I can say, code seems to do what it should. I think this could be marked as positive review after trivial modifications like "returns" vs. "return".



---

archive/issue_comments_227749.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\n> I read the code. As a side not, almost all examples use \"P =\", you have used \"p =\".\n\nPleaaaaaase let's not have a rule about upper/lower case `T_T`\n\n> But as far as I can say, code seems to do what it should. I think this could be marked as positive review after trivial modifications like \"returns\" vs. \"return\".\n\nFr\u00e9d\u00e9ric ? Could you remove the 's' you added ?\n\nNathann",
    "created_at": "2014-09-26T13:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227749",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'>Comment 21:</a>
> I read the code. As a side not, almost all examples use "P =", you have used "p =".

Pleaaaaaase let's not have a rule about upper/lower case `T_T`

> But as far as I can say, code seems to do what it should. I think this could be marked as positive review after trivial modifications like "returns" vs. "return".

Frédéric ? Could you remove the 's' you added ?

Nathann



---

archive/issue_comments_227750.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,2 @@\n-Add a `.widht()` -- i.e. number of elements in the longest antichain -- to poset. Seems to have polynomial time algorithm based on Dilworth's Theorem.\n+Add a `.width()` -- i.e. number of elements in the longest antichain -- to poset. Seems to have polynomial time algorithm based on Dilworth's Theorem.\n \n``````\n",
    "created_at": "2014-09-26T18:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227750",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,2 @@
-Add a `.widht()` -- i.e. number of elements in the longest antichain -- to poset. Seems to have polynomial time algorithm based on Dilworth's Theorem.
+Add a `.width()` -- i.e. number of elements in the longest antichain -- to poset. Seems to have polynomial time algorithm based on Dilworth's Theorem.
 
``````




---

archive/issue_comments_227751.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nI think the `s` in the list of methods should stay there for coherence of this list.\n\nAs there is no `s` in the first line of the new functions, things are good as they are.\n\nLGTM. Let us not lose time on stupid things.",
    "created_at": "2014-09-26T18:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227751",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'>Comment 22:</a>
I think the `s` in the list of methods should stay there for coherence of this list.

As there is no `s` in the first line of the new functions, things are good as they are.

LGTM. Let us not lose time on stupid things.



---

archive/issue_events_217546.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-09-26T18:44:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217546"
}
```



---

archive/issue_events_217547.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-09-26T18:44:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217547"
}
```



---

archive/issue_comments_227752.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton, Jori M\u00e4ntysalo**",
    "created_at": "2014-09-26T18:45:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227752",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton, Jori Mäntysalo**



---

archive/issue_events_217548.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2014-10-14T09:50:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217548"
}
```



---

archive/issue_events_217549.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-15T18:12:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217549"
}
```



---

archive/issue_events_217550.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "794df000a07dc72df87a6279ed919ee42acb469b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-10-15T18:12:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17023#event-217550"
}
```



---

archive/issue_comments_227753.json:
```json
{
    "body": "Changed branch from **[public/ticket/17023](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17023)** to **[99f8ed0](https://github.com/sagemath/sagetrac-mirror/commit/99f8ed04511d4422eb0874a5332132b4058d8e34)**",
    "created_at": "2014-10-15T18:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17023#issuecomment-227753",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ticket/17023](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/17023)** to **[99f8ed0](https://github.com/sagemath/sagetrac-mirror/commit/99f8ed04511d4422eb0874a5332132b4058d8e34)**
