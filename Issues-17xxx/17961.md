# Issue 17961: Move darwin_utilities to a directory of its own

archive/issues_017724.json:
```json
{
    "assignees": [],
    "body": "Since #17767, all `pyx` files in `sage/misc` are compiled on all platforms, due to the following line in `modules_list.py`:\n\n```\nExtension('*', ['sage/misc/*.pyx'])\n```\n\nThis is in particular the case of `sage/misc/darwin_utilities.pyx`, which should however only be included on Darwin as specified on lines 2096 and following of `modules_list.py`:\n\n```\n# Only include darwin_utilities on OS_X >= 10.5\n```\n\nThis ticket moves this file and its friends to a subdirectory of its own.\n\nDepends on #18145\n\nBranch/Commit: **[u/gouezel/darwin_subdir](https://github.com/sagemath/sagetrac-mirror/tree/u/gouezel/darwin_subdir) @ [d7b5d24](https://github.com/sagemath/sagetrac-mirror/commit/d7b5d2477268f92a4fd39b6f71fddcdb2980ad2f)**\n\nAuthor: **Sebastien Gouezel**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17961_\n\n",
    "closed_at": "2015-04-09T12:14:09Z",
    "created_at": "2015-03-15T21:43:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20bsd",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Move darwin_utilities to a directory of its own",
    "type": "issue",
    "updated_at": "2015-04-09T12:14:09Z",
    "url": "https://github.com/sagemath/sage/issues/17961",
    "user": "https://github.com/sagetrac-gouezel"
}
```
Since #17767, all `pyx` files in `sage/misc` are compiled on all platforms, due to the following line in `modules_list.py`:

```
Extension('*', ['sage/misc/*.pyx'])
```

This is in particular the case of `sage/misc/darwin_utilities.pyx`, which should however only be included on Darwin as specified on lines 2096 and following of `modules_list.py`:

```
# Only include darwin_utilities on OS_X >= 10.5
```

This ticket moves this file and its friends to a subdirectory of its own.

Depends on #18145

Branch/Commit: **[u/gouezel/darwin_subdir](https://github.com/sagemath/sagetrac-mirror/tree/u/gouezel/darwin_subdir) @ [d7b5d24](https://github.com/sagemath/sagetrac-mirror/commit/d7b5d2477268f92a4fd39b6f71fddcdb2980ad2f)**

Author: **Sebastien Gouezel**

_Issue created by migration from https://trac.sagemath.org/ticket/17961_





---

archive/issue_events_237864.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2015-03-15T21:43:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237864"
}
```



---

archive/issue_events_237865.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2015-03-15T21:43:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237865"
}
```



---

archive/issue_events_237866.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2015-03-15T21:43:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237866"
}
```



---

archive/issue_events_237867.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2015-03-15T21:43:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237867"
}
```



---

archive/issue_comments_246040.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNB: the patch is untested as I don't have a Mac...",
    "created_at": "2015-03-15T21:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246040",
    "user": "https://github.com/sagetrac-gouezel"
}
```

<a id='comment:1'>Comment 1:</a>
NB: the patch is untested as I don't have a Mac...



---

archive/issue_events_237868.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2015-03-15T21:44:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237868"
}
```



---

archive/issue_comments_246041.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI would not put this inside `misc` but perhaps a new top-level directory like `src/sage/platform`.",
    "created_at": "2015-03-16T07:24:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246041",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'>Comment 2:</a>
I would not put this inside `misc` but perhaps a new top-level directory like `src/sage/platform`.



---

archive/issue_comments_246042.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41df0ece01934a966200922e3d47cbfc06f0e121\">41df0ec</a></td><td><code> #17961: move darwin_utilities to a new sage/platforms directory</code></td></tr></table>\n",
    "created_at": "2015-03-22T20:50:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246042",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>Comment 3:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41df0ece01934a966200922e3d47cbfc06f0e121">41df0ec</a></td><td><code> #17961: move darwin_utilities to a new sage/platforms directory</code></td></tr></table>




---

archive/issue_comments_246043.json:
```json
{
    "body": "Changed commit from **[7b10c3a](https://github.com/sagemath/sagetrac-mirror/commit/7b10c3ad9be531c4b4ea71762f4bd7ac0a03c4e3)** to **[41df0ec](https://github.com/sagemath/sagetrac-mirror/commit/41df0ece01934a966200922e3d47cbfc06f0e121)**",
    "created_at": "2015-03-22T20:50:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246043",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7b10c3a](https://github.com/sagemath/sagetrac-mirror/commit/7b10c3ad9be531c4b4ea71762f4bd7ac0a03c4e3)** to **[41df0ec](https://github.com/sagemath/sagetrac-mirror/commit/41df0ece01934a966200922e3d47cbfc06f0e121)**



---

archive/issue_comments_246044.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nIf you really go for a `src/sage/platforms/darwin/` directory, you can drop the `darwin_` prefix on all files.",
    "created_at": "2015-03-22T21:11:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246044",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'>Comment 4:</a>
If you really go for a `src/sage/platforms/darwin/` directory, you can drop the `darwin_` prefix on all files.



---

archive/issue_events_237869.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-22T21:12:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237869"
}
```



---

archive/issue_events_237870.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-22T21:12:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237870"
}
```



---

archive/issue_events_237871.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-22T21:12:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237871"
}
```



---

archive/issue_events_237872.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-22T21:12:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20bsd",
    "label_color": "000080",
    "label_name": "component: porting: bsd",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237872"
}
```



---

archive/issue_comments_246045.json:
```json
{
    "body": "Changed commit from **[41df0ec](https://github.com/sagemath/sagetrac-mirror/commit/41df0ece01934a966200922e3d47cbfc06f0e121)** to **[d7b5d24](https://github.com/sagemath/sagetrac-mirror/commit/d7b5d2477268f92a4fd39b6f71fddcdb2980ad2f)**",
    "created_at": "2015-03-22T21:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246045",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[41df0ec](https://github.com/sagemath/sagetrac-mirror/commit/41df0ece01934a966200922e3d47cbfc06f0e121)** to **[d7b5d24](https://github.com/sagemath/sagetrac-mirror/commit/d7b5d2477268f92a4fd39b6f71fddcdb2980ad2f)**



---

archive/issue_comments_246046.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7b5d2477268f92a4fd39b6f71fddcdb2980ad2f\">d7b5d24</a></td><td><code> #17961: shorten file names</code></td></tr></table>\n",
    "created_at": "2015-03-22T21:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246046",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7b5d2477268f92a4fd39b6f71fddcdb2980ad2f">d7b5d24</a></td><td><code> #17961: shorten file names</code></td></tr></table>




---

archive/issue_events_237873.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2015-03-22T21:49:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237873"
}
```



---

archive/issue_events_237874.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2015-03-22T21:49:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237874"
}
```



---

archive/issue_comments_246047.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nGood idea, done.",
    "created_at": "2015-03-22T21:49:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246047",
    "user": "https://github.com/sagetrac-gouezel"
}
```

<a id='comment:7'>Comment 7:</a>
Good idea, done.



---

archive/issue_comments_246048.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI have no more comments but somebody with OS X (not me, unfortunately) should test this.",
    "created_at": "2015-03-23T14:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246048",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'>Comment 8:</a>
I have no more comments but somebody with OS X (not me, unfortunately) should test this.



---

archive/issue_comments_246049.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI think that #18145 also fixes the issue on this ticket, but in a completely different way.",
    "created_at": "2015-04-08T14:03:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246049",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'>Comment 9:</a>
I think that #18145 also fixes the issue on this ticket, but in a completely different way.



---

archive/issue_comments_246050.json:
```json
{
    "body": "Dependencies: **#18145**",
    "created_at": "2015-04-09T06:21:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246050",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#18145**



---

archive/issue_events_237875.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-04-09T06:21:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237875"
}
```



---

archive/issue_events_237876.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-04-09T06:21:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237876"
}
```



---

archive/issue_comments_246051.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nIn any case, this patch will conflict with #18145.",
    "created_at": "2015-04-09T06:21:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246051",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'>Comment 10:</a>
In any case, this patch will conflict with #18145.



---

archive/issue_comments_246052.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nIndeed, #18145 fixes the issue, so this ticket is not needed any more.",
    "created_at": "2015-04-09T10:21:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17961#issuecomment-246052",
    "user": "https://github.com/sagetrac-gouezel"
}
```

<a id='comment:11'>Comment 11:</a>
Indeed, #18145 fixes the issue, so this ticket is not needed any more.



---

archive/issue_events_237877.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2015-04-09T10:21:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237877"
}
```



---

archive/issue_events_237878.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2015-04-09T10:21:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237878"
}
```



---

archive/issue_events_237879.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2015-04-09T10:21:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237879"
}
```



---

archive/issue_events_237880.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2015-04-09T10:21:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237880"
}
```



---

archive/issue_events_237881.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2015-04-09T10:21:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237881"
}
```



---

archive/issue_events_237882.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-09T12:14:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237882"
}
```



---

archive/issue_events_237883.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-09T12:14:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237883"
}
```



---

archive/issue_events_237884.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-09T12:14:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17961",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17961#event-237884"
}
```
