# Issue 17642: Update numpy

archive/issues_017405.json:
```json
{
    "body": "Upgrading numpy to 1.10.1\n\nsource:\n[http://downloads.sourceforge.net/project/numpy/NumPy/1.10.1/numpy-1.10.1.tar.gz](http://downloads.sourceforge.net/project/numpy/NumPy/1.10.1/numpy-1.10.1.tar.gz)\n\nDepends on #17618\n\nDepends on #18142\n\nDepends on #17643\n\n**CC:**  @videlec\n\n**Branch/Commit:** [9c6e94c90c5a92bbf7dd81fea22c60b120fafb85](https://github.com/sagemath/sagetrac-mirror/commit/9c6e94c90c5a92bbf7dd81fea22c60b120fafb85)\n\n**Upstream:** Reported upstream. Developers acknowledge bug.\n\n**Reviewer:** Volker Braun\n\n**Author:** Fran\u00e7ois Bissey\n\nIssue created by migration from https://trac.sagemath.org/ticket/17642\n\n",
    "closed_at": "2015-11-24T13:01:19Z",
    "created_at": "2015-01-16T10:27:31Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.10",
    "title": "Update numpy",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/17642",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
Upgrading numpy to 1.10.1

source:
[http://downloads.sourceforge.net/project/numpy/NumPy/1.10.1/numpy-1.10.1.tar.gz](http://downloads.sourceforge.net/project/numpy/NumPy/1.10.1/numpy-1.10.1.tar.gz)

Depends on #17618

Depends on #18142

Depends on #17643

**CC:**  @videlec

**Branch/Commit:** [9c6e94c90c5a92bbf7dd81fea22c60b120fafb85](https://github.com/sagemath/sagetrac-mirror/commit/9c6e94c90c5a92bbf7dd81fea22c60b120fafb85)

**Upstream:** Reported upstream. Developers acknowledge bug.

**Reviewer:** Volker Braun

**Author:** François Bissey

Issue created by migration from https://trac.sagemath.org/ticket/17642





---

archive/issue_comments_240243.json:
```json
{
    "body": "<a id='comment:1'></a>\nI am putting #17618 as a dependency. My experience is that MPL 1.3.x doesn't build against numpy 1.9.x.",
    "created_at": "2015-01-16T11:07:57Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240243",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:1'></a>
I am putting #17618 as a dependency. My experience is that MPL 1.3.x doesn't build against numpy 1.9.x.



---

archive/issue_comments_240244.json:
```json
{
    "body": "**Dependencies:** 17618",
    "created_at": "2015-01-16T11:07:57Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240244",
    "user": "https://github.com/kiwifb"
}
```

**Dependencies:** 17618



---

archive/issue_comments_240245.json:
```json
{
    "body": "**Changing dependencies** from \"17618\" to \"#17618\".",
    "created_at": "2015-03-27T22:25:51Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240245",
    "user": "https://github.com/videlec"
}
```

**Changing dependencies** from "17618" to "#17618".



---

archive/issue_events_158308.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-04-08T07:56:51Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "rename": {
        "from": "Update numpy to 1.9.1",
        "to": "Update numpy"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158308"
}
```



---

archive/issue_events_158309.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-04-08T07:56:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158309"
}
```



---

archive/issue_events_158310.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-04-08T07:56:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158310"
}
```



---

archive/issue_comments_240246.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-http://sourceforge.net/projects/numpy/files/NumPy/1.9.1/numpy-1.9.1.tar.gz/download\n+http://sourceforge.net/projects/numpy/files/NumPy/1.9.2/numpy-1.9.2.tar.gz/download\n``````\n",
    "created_at": "2015-04-08T07:56:51Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240246",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-http://sourceforge.net/projects/numpy/files/NumPy/1.9.1/numpy-1.9.1.tar.gz/download
+http://sourceforge.net/projects/numpy/files/NumPy/1.9.2/numpy-1.9.2.tar.gz/download
``````




---

archive/issue_comments_240247.json:
```json
{
    "body": "**Changing dependencies** from \"#17618\" to \"#17618, #18142\".",
    "created_at": "2015-04-08T09:47:59Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240247",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#17618" to "#17618, #18142".



---

archive/issue_comments_240248.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [fbissey](#comment%3A1):\n> My experience is that MPL 1.3.x doesn't build against numpy 1.9.x.\n\nIt *builds* but it doesn't work properly (I don't know if that's matplotlib's or Sage's fault).",
    "created_at": "2015-04-08T09:48:54Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240248",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Replying to [fbissey](#comment%3A1):
> My experience is that MPL 1.3.x doesn't build against numpy 1.9.x.

It *builds* but it doesn't work properly (I don't know if that's matplotlib's or Sage's fault).



---

archive/issue_comments_240249.json:
```json
{
    "body": "<a id='comment:6'></a>\nIt certainly doesn't work properly. On Gentoo it won't build against numpy 1.9.x (as far as I remember) but if you had it built and then update to numpy 1.9.x it definitely doesn't work properly either.",
    "created_at": "2015-04-08T09:57:11Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240249",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:6'></a>
It certainly doesn't work properly. On Gentoo it won't build against numpy 1.9.x (as far as I remember) but if you had it built and then update to numpy 1.9.x it definitely doesn't work properly either.



---

archive/issue_comments_240250.json:
```json
{
    "body": "<a id='comment:7'></a>\n#17618 is ready for review and that's probably the only thing holding up this ticket.",
    "created_at": "2015-06-18T22:38:21Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240250",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
#17618 is ready for review and that's probably the only thing holding up this ticket.



---

archive/issue_comments_240251.json:
```json
{
    "body": "<a id='comment:8'></a>\nFirst sage-on-gentoo experiments indicate that quite a few doctest warnings are generated with this, some of the reported problems are actually in calls to matplotlib. I have started work on the standard sage part but it looks like there may be a bit of work rather than just updating `package-version`.",
    "created_at": "2015-06-19T01:44:53Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240251",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>
First sage-on-gentoo experiments indicate that quite a few doctest warnings are generated with this, some of the reported problems are actually in calls to matplotlib. I have started work on the standard sage part but it looks like there may be a bit of work rather than just updating `package-version`.



---

archive/issue_comments_240252.json:
```json
{
    "body": "**Branch:** [u/fbissey/numpy-1.9](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/numpy-1.9)",
    "created_at": "2015-06-19T02:51:47Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240252",
    "user": "https://github.com/kiwifb"
}
```

**Branch:** [u/fbissey/numpy-1.9](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/numpy-1.9)



---

archive/issue_comments_240253.json:
```json
{
    "body": "**Author:** Fran\u00e7ois Bissey",
    "created_at": "2015-06-19T02:51:47Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240253",
    "user": "https://github.com/kiwifb"
}
```

**Author:** François Bissey



---

archive/issue_events_158311.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-06-19T02:51:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158311"
}
```



---

archive/issue_events_158312.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-06-19T02:51:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158312"
}
```



---

archive/issue_comments_240254.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n-http://sourceforge.net/projects/numpy/files/NumPy/1.9.2/numpy-1.9.2.tar.gz/download\n+Upgrading numpy to 1.9.2\n+\n+source:\n+[http://downloads.sourceforge.net/project/numpy/NumPy/1.9.2/numpy-1.9.2.tar.gz](http://downloads.sourceforge.net/project/numpy/NumPy/1.9.2/numpy-1.9.2.tar.gz)\n``````\n",
    "created_at": "2015-06-19T02:51:47Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240254",
    "user": "https://github.com/kiwifb"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,4 @@
-http://sourceforge.net/projects/numpy/files/NumPy/1.9.2/numpy-1.9.2.tar.gz/download
+Upgrading numpy to 1.9.2
+
+source:
+[http://downloads.sourceforge.net/project/numpy/NumPy/1.9.2/numpy-1.9.2.tar.gz](http://downloads.sourceforge.net/project/numpy/NumPy/1.9.2/numpy-1.9.2.tar.gz)
``````




---

archive/issue_comments_240255.json:
```json
{
    "body": "**Commit:** [7fb70fc804de38796465837977af64cf301e77fb](https://github.com/sagemath/sagetrac-mirror/commit/7fb70fc804de38796465837977af64cf301e77fb)",
    "created_at": "2015-06-19T02:51:47Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240255",
    "user": "https://github.com/kiwifb"
}
```

**Commit:** [7fb70fc804de38796465837977af64cf301e77fb](https://github.com/sagemath/sagetrac-mirror/commit/7fb70fc804de38796465837977af64cf301e77fb)



---

archive/issue_comments_240256.json:
```json
{
    "body": "<a id='comment:9'></a>\nDoctests failing with this:\n\n```\nsage -t --long src/sage/plot/graphics.py  # 1 doctest failed\nsage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed\nsage -t --long src/sage/plot/contour_plot.py  # 1 doctest failed\nsage -t --long src/doc/en/prep/Advanced-2DPlotting.rst  # 1 doctest failed\nsage -t --long src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py  # 10 doctests failed\nsage -t --long src/sage/plot/plot3d/list_plot3d.py  # 1 doctest failed\nsage -t --long src/doc/en/prep/Calculus.rst  # 1 doctest failed\nsage -t --long src/doc/en/faq/faq-usage.rst  # 1 doctest failed\nsage -t --long src/doc/en/thematic_tutorials/numerical_sage/numpy.rst  # 6 doctests failed\n```\nA lot are from the kind\n\n```\nsage -t --long src/sage/plot/graphics.py\n**********************************************************************\nFile \"src/sage/plot/graphics.py\", line 1120, in sage.plot.graphics.Graphics.add_primitive\nFailed example:\n    G\nExpected:\n    Graphics object consisting of 2 graphics primitives\nGot:\n    doctest:408: DeprecationWarning: elementwise comparison failed; this will raise the error in the future.\n    Graphics object consisting of 2 graphics primitives\n```\nor variation thereof.\n\nBut more serious is \n\n```\nsage -t --long src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py\n**********************************************************************\nFile \"src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py\", line 247, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D\nFailed example:\n    u1_array = linspace(u1min, u1max, u1num)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[59]>\", line 1, in <module>\n        u1_array = linspace(u1min, u1max, u1num)\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/numpy/core/function_base.py\", line 91, in linspace\n        dtype = result_type(start, stop, float(num))\n    TypeError: data type not understood\n**********************************************************************\nFile \"src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py\", line 248, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D\nFailed example:\n    u2_array = linspace(u2min, u2max, u2num)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[60]>\", line 1, in <module>\n        u2_array = linspace(u2min, u2max, u2num)\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/numpy/core/function_base.py\", line 91, in linspace\n        dtype = result_type(start, stop, float(num))\n    TypeError: data type not understood\n**********************************************************************\nFile \"src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py\", line 249, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D\nFailed example:\n    u_array = [ (uu1,uu2) for uu1 in u1_array for uu2 in u2_array]\nException raised:\n    Traceback (most recent call last):\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[61]>\", line 1, in <module>\n        u_array = [ (uu1,uu2) for uu1 in u1_array for uu2 in u2_array]\n    NameError: name 'u1_array' is not defined\n**********************************************************************\nFile \"src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py\", line 253, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D\nFailed example:\n    K_array = [K(uu[0],uu[1]) for uu in u_array]\nException raised:\n    Traceback (most recent call last):\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[63]>\", line 1, in <module>\n        K_array = [K(uu[Integer(0)],uu[Integer(1)]) for uu in u_array]\n    NameError: name 'u_array' is not defined\n**********************************************************************\nFile \"src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py\", line 255, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D\nFailed example:\n    K_max = max(K_array)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[64]>\", line 1, in <module>\n        K_max = max(K_array)\n    NameError: name 'K_array' is not defined\n**********************************************************************\nFile \"src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py\", line 256, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D\nFailed example:\n    K_min = min(K_array)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[65]>\", line 1, in <module>\n        K_min = min(K_array)\n    NameError: name 'K_array' is not defined\n**********************************************************************\nFile \"src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py\", line 258, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D\nFailed example:\n    cc_array = [ (ccc - K_min)/(K_max - K_min) for ccc in K_array ]\nException raised:\n    Traceback (most recent call last):\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[66]>\", line 1, in <module>\n        cc_array = [ (ccc - K_min)/(K_max - K_min) for ccc in K_array ]\n    NameError: name 'K_array' is not defined\n**********************************************************************\nFile \"src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py\", line 259, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D\nFailed example:\n    points_array = [ellipsoid_equation(u_array[counter][0],u_array[counter][1]) for counter in range(0,len(u_array)) ]\nException raised:\n    Traceback (most recent call last):\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[67]>\", line 1, in <module>\n        points_array = [ellipsoid_equation(u_array[counter][Integer(0)],u_array[counter][Integer(1)]) for counter in range(Integer(0),len(u_array)) ]\n    NameError: name 'u_array' is not defined\n**********************************************************************\nFile \"src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py\", line 260, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D\nFailed example:\n    curvature_ellipsoid_plot = sum( point([xx for xx in points_array[counter]],color=hue(cc_array[counter]/2))  for counter in range(0,len(u_array)) )\nException raised:\n    Traceback (most recent call last):\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[68]>\", line 1, in <module>\n        curvature_ellipsoid_plot = sum( point([xx for xx in points_array[counter]],color=hue(cc_array[counter]/Integer(2)))  for counter in range(Integer(0),len(u_array)) )\n    NameError: name 'u_array' is not defined\n**********************************************************************\nFile \"src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py\", line 261, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D\nFailed example:\n    curvature_ellipsoid_plot.show(aspect_ratio=1)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[69]>\", line 1, in <module>\n        curvature_ellipsoid_plot.show(aspect_ratio=Integer(1))\n    NameError: name 'curvature_ellipsoid_plot' is not defined\n**********************************************************************\n1 item had failures:\n  10 of  91 in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D\n    [294 tests, 10 failures, 16.88 s]\n```\n`src/doc/en/thematic_tutorials/numerical_sage/numpy.rst` has similar failures.\n\n---\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf4b81b520e8fd4bb21881b9f05143ad9a209202\">bf4b81b</a></td><td><code>#17618 fix bugs involving a missing _Base class in sage/plot/arrow.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12baa7f99ccd852b4f1f5bfdaf6751676fe31411\">12baa7f</a></td><td><code>#17618 fix unicode doctest failures in colors.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c6f6e1b58d270077dc6eb6e0fdff5b85904ceab\">4c6f6e1</a></td><td><code>#17618 fix _subplots doctest failure in plot/graphics.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ee674d1b6e6bc2e22d7bc9f0ad9af05cce766d5\">8ee674d</a></td><td><code>Add checksum and migrate to tri.Trinagulation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b4e74ee67b855c4d738dccf401852bf2754675f\">1b4e74e</a></td><td><code>#17618 : fix spacing (trivial)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/065dc779e98d32ec5b081680db5356df98f15ff2\">065dc77</a></td><td><code>#17618 : fix comment 32</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c9091d6ff06a64a1a237f2ce18886e225c85350\">5c9091d</a></td><td><code>Merge branch 'u/tmonteil/MPL-1.4' of git://trac.sagemath.org/sage into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b16e00b38cf554bcd55650d95a76ea17ffb4cf1b\">b16e00b</a></td><td><code>Update matplotlib to 1.4.3 replace some Delaunay calls by \"tri\". Keep Delaunay interpolations for the default \"nn\" (natural</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a62644f4d11251157ce9883521d15993a3bae895\">a62644f</a></td><td><code>Slim the tarball by removing images. Also commit correct version.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fb70fc804de38796465837977af64cf301e77fb\">7fb70fc</a></td><td><code>Initial update of numpy to 1.9.2, some more work to do.</code></td></tr></table>\n",
    "created_at": "2015-06-19T02:51:47Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240256",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'></a>
Doctests failing with this:

```
sage -t --long src/sage/plot/graphics.py  # 1 doctest failed
sage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed
sage -t --long src/sage/plot/contour_plot.py  # 1 doctest failed
sage -t --long src/doc/en/prep/Advanced-2DPlotting.rst  # 1 doctest failed
sage -t --long src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py  # 10 doctests failed
sage -t --long src/sage/plot/plot3d/list_plot3d.py  # 1 doctest failed
sage -t --long src/doc/en/prep/Calculus.rst  # 1 doctest failed
sage -t --long src/doc/en/faq/faq-usage.rst  # 1 doctest failed
sage -t --long src/doc/en/thematic_tutorials/numerical_sage/numpy.rst  # 6 doctests failed
```
A lot are from the kind

```
sage -t --long src/sage/plot/graphics.py
**********************************************************************
File "src/sage/plot/graphics.py", line 1120, in sage.plot.graphics.Graphics.add_primitive
Failed example:
    G
Expected:
    Graphics object consisting of 2 graphics primitives
Got:
    doctest:408: DeprecationWarning: elementwise comparison failed; this will raise the error in the future.
    Graphics object consisting of 2 graphics primitives
```
or variation thereof.

But more serious is 

```
sage -t --long src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py
**********************************************************************
File "src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py", line 247, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D
Failed example:
    u1_array = linspace(u1min, u1max, u1num)
Exception raised:
    Traceback (most recent call last):
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[59]>", line 1, in <module>
        u1_array = linspace(u1min, u1max, u1num)
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/numpy/core/function_base.py", line 91, in linspace
        dtype = result_type(start, stop, float(num))
    TypeError: data type not understood
**********************************************************************
File "src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py", line 248, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D
Failed example:
    u2_array = linspace(u2min, u2max, u2num)
Exception raised:
    Traceback (most recent call last):
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[60]>", line 1, in <module>
        u2_array = linspace(u2min, u2max, u2num)
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/numpy/core/function_base.py", line 91, in linspace
        dtype = result_type(start, stop, float(num))
    TypeError: data type not understood
**********************************************************************
File "src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py", line 249, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D
Failed example:
    u_array = [ (uu1,uu2) for uu1 in u1_array for uu2 in u2_array]
Exception raised:
    Traceback (most recent call last):
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[61]>", line 1, in <module>
        u_array = [ (uu1,uu2) for uu1 in u1_array for uu2 in u2_array]
    NameError: name 'u1_array' is not defined
**********************************************************************
File "src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py", line 253, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D
Failed example:
    K_array = [K(uu[0],uu[1]) for uu in u_array]
Exception raised:
    Traceback (most recent call last):
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[63]>", line 1, in <module>
        K_array = [K(uu[Integer(0)],uu[Integer(1)]) for uu in u_array]
    NameError: name 'u_array' is not defined
**********************************************************************
File "src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py", line 255, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D
Failed example:
    K_max = max(K_array)
Exception raised:
    Traceback (most recent call last):
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[64]>", line 1, in <module>
        K_max = max(K_array)
    NameError: name 'K_array' is not defined
**********************************************************************
File "src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py", line 256, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D
Failed example:
    K_min = min(K_array)
Exception raised:
    Traceback (most recent call last):
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[65]>", line 1, in <module>
        K_min = min(K_array)
    NameError: name 'K_array' is not defined
**********************************************************************
File "src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py", line 258, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D
Failed example:
    cc_array = [ (ccc - K_min)/(K_max - K_min) for ccc in K_array ]
Exception raised:
    Traceback (most recent call last):
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[66]>", line 1, in <module>
        cc_array = [ (ccc - K_min)/(K_max - K_min) for ccc in K_array ]
    NameError: name 'K_array' is not defined
**********************************************************************
File "src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py", line 259, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D
Failed example:
    points_array = [ellipsoid_equation(u_array[counter][0],u_array[counter][1]) for counter in range(0,len(u_array)) ]
Exception raised:
    Traceback (most recent call last):
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[67]>", line 1, in <module>
        points_array = [ellipsoid_equation(u_array[counter][Integer(0)],u_array[counter][Integer(1)]) for counter in range(Integer(0),len(u_array)) ]
    NameError: name 'u_array' is not defined
**********************************************************************
File "src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py", line 260, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D
Failed example:
    curvature_ellipsoid_plot = sum( point([xx for xx in points_array[counter]],color=hue(cc_array[counter]/2))  for counter in range(0,len(u_array)) )
Exception raised:
    Traceback (most recent call last):
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[68]>", line 1, in <module>
        curvature_ellipsoid_plot = sum( point([xx for xx in points_array[counter]],color=hue(cc_array[counter]/Integer(2)))  for counter in range(Integer(0),len(u_array)) )
    NameError: name 'u_array' is not defined
**********************************************************************
File "src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py", line 261, in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D
Failed example:
    curvature_ellipsoid_plot.show(aspect_ratio=1)
Exception raised:
    Traceback (most recent call last):
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/fbissey/sandbox/git-fork/sage-6.8.beta4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D[69]>", line 1, in <module>
        curvature_ellipsoid_plot.show(aspect_ratio=Integer(1))
    NameError: name 'curvature_ellipsoid_plot' is not defined
**********************************************************************
1 item had failures:
  10 of  91 in sage.geometry.riemannian_manifolds.parametrized_surface3d.ParametrizedSurface3D
    [294 tests, 10 failures, 16.88 s]
```
`src/doc/en/thematic_tutorials/numerical_sage/numpy.rst` has similar failures.

---
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf4b81b520e8fd4bb21881b9f05143ad9a209202">bf4b81b</a></td><td><code>#17618 fix bugs involving a missing _Base class in sage/plot/arrow.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12baa7f99ccd852b4f1f5bfdaf6751676fe31411">12baa7f</a></td><td><code>#17618 fix unicode doctest failures in colors.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c6f6e1b58d270077dc6eb6e0fdff5b85904ceab">4c6f6e1</a></td><td><code>#17618 fix _subplots doctest failure in plot/graphics.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ee674d1b6e6bc2e22d7bc9f0ad9af05cce766d5">8ee674d</a></td><td><code>Add checksum and migrate to tri.Trinagulation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b4e74ee67b855c4d738dccf401852bf2754675f">1b4e74e</a></td><td><code>#17618 : fix spacing (trivial)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/065dc779e98d32ec5b081680db5356df98f15ff2">065dc77</a></td><td><code>#17618 : fix comment 32</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c9091d6ff06a64a1a237f2ce18886e225c85350">5c9091d</a></td><td><code>Merge branch 'u/tmonteil/MPL-1.4' of git://trac.sagemath.org/sage into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b16e00b38cf554bcd55650d95a76ea17ffb4cf1b">b16e00b</a></td><td><code>Update matplotlib to 1.4.3 replace some Delaunay calls by "tri". Keep Delaunay interpolations for the default "nn" (natural</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a62644f4d11251157ce9883521d15993a3bae895">a62644f</a></td><td><code>Slim the tarball by removing images. Also commit correct version.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fb70fc804de38796465837977af64cf301e77fb">7fb70fc</a></td><td><code>Initial update of numpy to 1.9.2, some more work to do.</code></td></tr></table>




---

archive/issue_comments_240257.json:
```json
{
    "body": "<a id='comment:10'></a>\nIt looks like we are back to the numpy 1.6 upgrade (which ended up being 1.7) coercion problems between numpy and sage. I may have to ping numpy upstream about the issues.",
    "created_at": "2015-07-14T12:05:17Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240257",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'></a>
It looks like we are back to the numpy 1.6 upgrade (which ended up being 1.7) coercion problems between numpy and sage. I may have to ping numpy upstream about the issues.



---

archive/issue_comments_240258.json:
```json
{
    "body": "**Changing branch** from \"[u/fbissey/numpy-1.9](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/numpy-1.9)\" to \"[u/jdemeyer/numpy-1.9](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/numpy-1.9)\".",
    "created_at": "2015-07-14T13:49:07Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240258",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/fbissey/numpy-1.9](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/numpy-1.9)" to "[u/jdemeyer/numpy-1.9](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/numpy-1.9)".



---

archive/issue_comments_240259.json:
```json
{
    "body": "**Changing commit** from \"[7fb70fc804de38796465837977af64cf301e77fb](https://github.com/sagemath/sagetrac-mirror/commit/7fb70fc804de38796465837977af64cf301e77fb)\" to \"[5e622125bbfa8097f8537b523f857203e8b68c6b](https://github.com/sagemath/sagetrac-mirror/commit/5e622125bbfa8097f8537b523f857203e8b68c6b)\".",
    "created_at": "2015-07-16T02:05:58Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240259",
    "user": "https://github.com/kiwifb"
}
```

**Changing commit** from "[7fb70fc804de38796465837977af64cf301e77fb](https://github.com/sagemath/sagetrac-mirror/commit/7fb70fc804de38796465837977af64cf301e77fb)" to "[5e622125bbfa8097f8537b523f857203e8b68c6b](https://github.com/sagemath/sagetrac-mirror/commit/5e622125bbfa8097f8537b523f857203e8b68c6b)".



---

archive/issue_comments_240260.json:
```json
{
    "body": "<a id='comment:12'></a>\nThanks for the rebasing Jeroen. Just commenting\n\n```\n    if dtype is None:\n        dtype = result_type(start, stop, float(num))\n```\nin the `linspace` code in `numpy/core/function_base.py` resolve a lot of doctests failures related to plotting like `sage/geometry/riemannian_manifolds/parametrized_surface3d.py` noted in a previous comment. It seems `result_type` doesn't do coercion very well and is probably behind some othe doctest failing, most of them with a warning but the following ones clearly tell us something is wrong with coercion\n\n```\nsage -t --long /usr/lib64/python2.7/site-packages/sage/structure/coerce.pyx\n**********************************************************************\nFile \"/usr/lib64/python2.7/site-packages/sage/structure/coerce.pyx\", line 309, in sage.structure.coerce.CoercionModel_cache_maps\nFailed example:\n    numpy.float32('1.5') * x\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.structure.coerce.CoercionModel_cache_maps[9]>\", line 1, in <module>\n        numpy.float32('1.5') * x\n    ValueError: setting an array element with a sequence.\n```\n\n```\nsage -t --long /usr/lib64/python2.7/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.pyx \ntoo many failed tests, not using stored timings\nRunning doctests with ID 2015-07-16-14-04-50-52700f7d.\nUsing --optional=optional,sage\nDoctesting 1 file.\nsage -t --long /usr/lib64/python2.7/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.pyx\n**********************************************************************\nFile \"/usr/lib64/python2.7/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.pyx\", line 13, in sage.rings.polynomial.polynomial_real_mpfr_dense\nFailed example:\n    numpy.int32('1') * x\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.polynomial.polynomial_real_mpfr_dense[3]>\", line 1, in <module>\n        numpy.int32('1') * x\n    ValueError: setting an array element with a sequence.\n**********************************************************************\nFile \"/usr/lib64/python2.7/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.pyx\", line 17, in sage.rings.polynomial.polynomial_real_mpfr_dense\nFailed example:\n    numpy.int64('1') * x\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.polynomial.polynomial_real_mpfr_dense[5]>\", line 1, in <module>\n        numpy.int64('1') * x\n    ValueError: setting an array element with a sequence.\n**********************************************************************\nFile \"/usr/lib64/python2.7/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.pyx\", line 21, in sage.rings.polynomial.polynomial_real_mpfr_dense\nFailed example:\n    numpy.float32('1.5') * x\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.polynomial.polynomial_real_mpfr_dense[7]>\", line 1, in <module>\n        numpy.float32('1.5') * x\n    ValueError: setting an array element with a sequence.\n**********************************************************************\n```\n\nSo I will raise this upstream where I think the problem lies as it was the case when we tried to upgrade to numpy 1.6.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ffb140f76fa37ffaad6ab23b2ea5464327e59b8\">0ffb140</a></td><td><code>Merge tag '6.8.beta8' into t/17642/numpy-1.9</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e622125bbfa8097f8537b523f857203e8b68c6b\">5e62212</a></td><td><code>Fix patch loop</code></td></tr></table>\n",
    "created_at": "2015-07-16T02:05:58Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240260",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'></a>
Thanks for the rebasing Jeroen. Just commenting

```
    if dtype is None:
        dtype = result_type(start, stop, float(num))
```
in the `linspace` code in `numpy/core/function_base.py` resolve a lot of doctests failures related to plotting like `sage/geometry/riemannian_manifolds/parametrized_surface3d.py` noted in a previous comment. It seems `result_type` doesn't do coercion very well and is probably behind some othe doctest failing, most of them with a warning but the following ones clearly tell us something is wrong with coercion

```
sage -t --long /usr/lib64/python2.7/site-packages/sage/structure/coerce.pyx
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/structure/coerce.pyx", line 309, in sage.structure.coerce.CoercionModel_cache_maps
Failed example:
    numpy.float32('1.5') * x
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.structure.coerce.CoercionModel_cache_maps[9]>", line 1, in <module>
        numpy.float32('1.5') * x
    ValueError: setting an array element with a sequence.
```

```
sage -t --long /usr/lib64/python2.7/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.pyx 
too many failed tests, not using stored timings
Running doctests with ID 2015-07-16-14-04-50-52700f7d.
Using --optional=optional,sage
Doctesting 1 file.
sage -t --long /usr/lib64/python2.7/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.pyx
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.pyx", line 13, in sage.rings.polynomial.polynomial_real_mpfr_dense
Failed example:
    numpy.int32('1') * x
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.polynomial.polynomial_real_mpfr_dense[3]>", line 1, in <module>
        numpy.int32('1') * x
    ValueError: setting an array element with a sequence.
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.pyx", line 17, in sage.rings.polynomial.polynomial_real_mpfr_dense
Failed example:
    numpy.int64('1') * x
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.polynomial.polynomial_real_mpfr_dense[5]>", line 1, in <module>
        numpy.int64('1') * x
    ValueError: setting an array element with a sequence.
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/rings/polynomial/polynomial_real_mpfr_dense.pyx", line 21, in sage.rings.polynomial.polynomial_real_mpfr_dense
Failed example:
    numpy.float32('1.5') * x
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.polynomial.polynomial_real_mpfr_dense[7]>", line 1, in <module>
        numpy.float32('1.5') * x
    ValueError: setting an array element with a sequence.
**********************************************************************
```

So I will raise this upstream where I think the problem lies as it was the case when we tried to upgrade to numpy 1.6.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ffb140f76fa37ffaad6ab23b2ea5464327e59b8">0ffb140</a></td><td><code>Merge tag '6.8.beta8' into t/17642/numpy-1.9</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e622125bbfa8097f8537b523f857203e8b68c6b">5e62212</a></td><td><code>Fix patch loop</code></td></tr></table>




---

archive/issue_comments_240261.json:
```json
{
    "body": "<a id='comment:13'></a>\nOh joy I have discovered #18076, so operations with a `numpy` element on the left are broken again.",
    "created_at": "2015-07-16T03:20:50Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240261",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'></a>
Oh joy I have discovered #18076, so operations with a `numpy` element on the left are broken again.



---

archive/issue_events_158313.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-11-05T21:54:31Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158313"
}
```



---

archive/issue_events_158314.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-11-05T21:54:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158314"
}
```



---

archive/issue_comments_240262.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Upgrading numpy to 1.9.2\n+Upgrading numpy to 1.10.1\n \n source:\n-[http://downloads.sourceforge.net/project/numpy/NumPy/1.9.2/numpy-1.9.2.tar.gz](http://downloads.sourceforge.net/project/numpy/NumPy/1.9.2/numpy-1.9.2.tar.gz)\n+[http://downloads.sourceforge.net/project/numpy/NumPy/1.10.1/numpy-1.10.1.tar.gz](http://downloads.sourceforge.net/project/numpy/NumPy/1.10.1/numpy-1.10.1.tar.gz)\n``````\n",
    "created_at": "2015-11-05T21:54:31Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240262",
    "user": "https://github.com/kiwifb"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Upgrading numpy to 1.9.2
+Upgrading numpy to 1.10.1
 
 source:
-[http://downloads.sourceforge.net/project/numpy/NumPy/1.9.2/numpy-1.9.2.tar.gz](http://downloads.sourceforge.net/project/numpy/NumPy/1.9.2/numpy-1.9.2.tar.gz)
+[http://downloads.sourceforge.net/project/numpy/NumPy/1.10.1/numpy-1.10.1.tar.gz](http://downloads.sourceforge.net/project/numpy/NumPy/1.10.1/numpy-1.10.1.tar.gz)
``````




---

archive/issue_comments_240263.json:
```json
{
    "body": "<a id='comment:14'></a>\n`numpy-1.10.1` is solving quite a few of the problems we are having, the still relevant error are I believe\n\n```\nsage -t --long src/sage/plot/graphics.py  # 1 doctest failed\nsage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed\nsage -t --long src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py  # 10 doctests failed\nsage -t --long src/doc/en/thematic_tutorials/numerical_sage/numpy.rst  # 6 doctests \n```\nI believe the other errors I have on my Gentoo tests box are generated by other stuff (matplotlib 1.5.0 [one extra doctest in sage/plot/graphics], ecl-16.0.0 [all over the place in formatting] and scipy-0.16.1 [format change in one doctest]).\n\nI will update the branch in the next few days.",
    "created_at": "2015-11-05T21:54:31Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240263",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:14'></a>
`numpy-1.10.1` is solving quite a few of the problems we are having, the still relevant error are I believe

```
sage -t --long src/sage/plot/graphics.py  # 1 doctest failed
sage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed
sage -t --long src/sage/geometry/riemannian_manifolds/parametrized_surface3d.py  # 10 doctests failed
sage -t --long src/doc/en/thematic_tutorials/numerical_sage/numpy.rst  # 6 doctests 
```
I believe the other errors I have on my Gentoo tests box are generated by other stuff (matplotlib 1.5.0 [one extra doctest in sage/plot/graphics], ecl-16.0.0 [all over the place in formatting] and scipy-0.16.1 [format change in one doctest]).

I will update the branch in the next few days.



---

archive/issue_comments_240264.json:
```json
{
    "body": "<a id='comment:15'></a>\nUpstream issue [https://github.com/numpy/numpy/issues/6634](https://github.com/numpy/numpy/issues/6634) note that a trivial patch seems to take care of the problem, the question is whether it is the right thing to do.",
    "created_at": "2015-11-05T23:10:50Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240264",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:15'></a>
Upstream issue [https://github.com/numpy/numpy/issues/6634](https://github.com/numpy/numpy/issues/6634) note that a trivial patch seems to take care of the problem, the question is whether it is the right thing to do.



---

archive/issue_comments_240265.json:
```json
{
    "body": "<a id='comment:16'></a>\nPushing updated package. \n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05c84c141df61f5a6b257a03d836a3e888bd2605\">05c84c1</a></td><td><code>upgrade to numpy 1.10.1, updating the package including a few cherrypicked patch from master</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de8f740bc2ed3ace26d8997b121bf39037ee7e62\">de8f740</a></td><td><code>Merge branch 'develop' into numpy-1.10</code></td></tr></table>\n",
    "created_at": "2015-11-06T00:55:29Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240265",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'></a>
Pushing updated package. 

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05c84c141df61f5a6b257a03d836a3e888bd2605">05c84c1</a></td><td><code>upgrade to numpy 1.10.1, updating the package including a few cherrypicked patch from master</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de8f740bc2ed3ace26d8997b121bf39037ee7e62">de8f740</a></td><td><code>Merge branch 'develop' into numpy-1.10</code></td></tr></table>




---

archive/issue_comments_240266.json:
```json
{
    "body": "**Changing commit** from \"[5e622125bbfa8097f8537b523f857203e8b68c6b](https://github.com/sagemath/sagetrac-mirror/commit/5e622125bbfa8097f8537b523f857203e8b68c6b)\" to \"[de8f740bc2ed3ace26d8997b121bf39037ee7e62](https://github.com/sagemath/sagetrac-mirror/commit/de8f740bc2ed3ace26d8997b121bf39037ee7e62)\".",
    "created_at": "2015-11-06T00:55:29Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240266",
    "user": "https://github.com/kiwifb"
}
```

**Changing commit** from "[5e622125bbfa8097f8537b523f857203e8b68c6b](https://github.com/sagemath/sagetrac-mirror/commit/5e622125bbfa8097f8537b523f857203e8b68c6b)" to "[de8f740bc2ed3ace26d8997b121bf39037ee7e62](https://github.com/sagemath/sagetrac-mirror/commit/de8f740bc2ed3ace26d8997b121bf39037ee7e62)".



---

archive/issue_comments_240267.json:
```json
{
    "body": "**Upstream:** Reported upstream. No feedback yet.",
    "created_at": "2015-11-06T00:55:29Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240267",
    "user": "https://github.com/kiwifb"
}
```

**Upstream:** Reported upstream. No feedback yet.



---

archive/issue_comments_240268.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/numpy-1.9](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/numpy-1.9)\" to \"[u/fbissey/numpy-1.10](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/numpy-1.10)\".",
    "created_at": "2015-11-06T00:55:29Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240268",
    "user": "https://github.com/kiwifb"
}
```

**Changing branch** from "[u/jdemeyer/numpy-1.9](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/numpy-1.9)" to "[u/fbissey/numpy-1.10](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/numpy-1.10)".



---

archive/issue_comments_240269.json:
```json
{
    "body": "<a id='comment:17'></a>\nLots of failures of this kind:\n\n```\nsage -t --long src/sage/schemes/elliptic_curves/ell_number_field.py\n**********************************************************************\nFile \"src/sage/schemes/elliptic_curves/ell_number_field.py\", line 2668, in sage.schemes.elliptic_curves.ell_number_field.EllipticCurve_number_field.reduction.isogeny_class\nFailed example:\n    G.show(edge_labels=True) # long time\nExpected nothing\nGot:\n    doctest:590: FutureWarning: elementwise comparison failed; returning scalar instead, but in the future will perform elementwise comparison\n**********************************************************************\n1 item had failures:\n   1 of  65 in sage.schemes.elliptic_curves.ell_number_field.EllipticCurve_number_field.reduction.isogeny_class\n    [710 tests, 1 failure, 293.83 s]\n```\nBut upgrading to `matplotlib-1.5.0` at the same time takes care of a lot of them\n\n```\nsage -t --long src/sage/schemes/elliptic_curves/ell_number_field.py\n    [710 tests, 534.43 s]\n```\nBut not all. And it brings a couple of its own.",
    "created_at": "2015-11-06T10:16:25Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240269",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'></a>
Lots of failures of this kind:

```
sage -t --long src/sage/schemes/elliptic_curves/ell_number_field.py
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_number_field.py", line 2668, in sage.schemes.elliptic_curves.ell_number_field.EllipticCurve_number_field.reduction.isogeny_class
Failed example:
    G.show(edge_labels=True) # long time
Expected nothing
Got:
    doctest:590: FutureWarning: elementwise comparison failed; returning scalar instead, but in the future will perform elementwise comparison
**********************************************************************
1 item had failures:
   1 of  65 in sage.schemes.elliptic_curves.ell_number_field.EllipticCurve_number_field.reduction.isogeny_class
    [710 tests, 1 failure, 293.83 s]
```
But upgrading to `matplotlib-1.5.0` at the same time takes care of a lot of them

```
sage -t --long src/sage/schemes/elliptic_curves/ell_number_field.py
    [710 tests, 534.43 s]
```
But not all. And it brings a couple of its own.



---

archive/issue_comments_240270.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebdf8996a28c1452d9ec546948bebcd46e2be457\">ebdf899</a></td><td><code>Fix to get rid of the problem with result_type. Pending upstream approval or suggestion of an alternative.</code></td></tr></table>\n",
    "created_at": "2015-11-08T21:49:00Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240270",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebdf8996a28c1452d9ec546948bebcd46e2be457">ebdf899</a></td><td><code>Fix to get rid of the problem with result_type. Pending upstream approval or suggestion of an alternative.</code></td></tr></table>




---

archive/issue_comments_240271.json:
```json
{
    "body": "**Changing commit** from \"[de8f740bc2ed3ace26d8997b121bf39037ee7e62](https://github.com/sagemath/sagetrac-mirror/commit/de8f740bc2ed3ace26d8997b121bf39037ee7e62)\" to \"[ebdf8996a28c1452d9ec546948bebcd46e2be457](https://github.com/sagemath/sagetrac-mirror/commit/ebdf8996a28c1452d9ec546948bebcd46e2be457)\".",
    "created_at": "2015-11-08T21:49:00Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[de8f740bc2ed3ace26d8997b121bf39037ee7e62](https://github.com/sagemath/sagetrac-mirror/commit/de8f740bc2ed3ace26d8997b121bf39037ee7e62)" to "[ebdf8996a28c1452d9ec546948bebcd46e2be457](https://github.com/sagemath/sagetrac-mirror/commit/ebdf8996a28c1452d9ec546948bebcd46e2be457)".



---

archive/issue_comments_240272.json:
```json
{
    "body": "<a id='comment:19'></a>\nAdded a proposed fix to `numpy` for the problem with `result_type`. I proposed it in [https://github.com/numpy/numpy/issues/6634#issuecomment-154254211](https://github.com/numpy/numpy/issues/6634#issuecomment-154254211) after earlier comments in the issue.\n\nThere are a lot more doctests failing because of warnings. 99% of them are fixed by upgrading `matplotlib` to `1.5.0` so there will be an associated ticket for that. Any remaining warnings will be fixed in that ticket. Finally there is one last doctest that is not a warning but a change of format. However upgrading `scipy` change the output again, so this doctest will be addressed in the `scipy` upgrade ticket at #17643.",
    "created_at": "2015-11-08T21:54:52Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240272",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:19'></a>
Added a proposed fix to `numpy` for the problem with `result_type`. I proposed it in [https://github.com/numpy/numpy/issues/6634#issuecomment-154254211](https://github.com/numpy/numpy/issues/6634#issuecomment-154254211) after earlier comments in the issue.

There are a lot more doctests failing because of warnings. 99% of them are fixed by upgrading `matplotlib` to `1.5.0` so there will be an associated ticket for that. Any remaining warnings will be fixed in that ticket. Finally there is one last doctest that is not a warning but a change of format. However upgrading `scipy` change the output again, so this doctest will be addressed in the `scipy` upgrade ticket at #17643.



---

archive/issue_comments_240273.json:
```json
{
    "body": "<a id='comment:20'></a>\nSubmitted PR for numpy [https://github.com/numpy/numpy/pull/6659](https://github.com/numpy/numpy/pull/6659)",
    "created_at": "2015-11-10T01:46:16Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240273",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'></a>
Submitted PR for numpy [https://github.com/numpy/numpy/pull/6659](https://github.com/numpy/numpy/pull/6659)



---

archive/issue_comments_240274.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e\">c7ac0a7</a></td><td><code>Updated numpy patch according to feedback from upstream</code></td></tr></table>\n",
    "created_at": "2015-11-10T22:16:34Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240274",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e">c7ac0a7</a></td><td><code>Updated numpy patch according to feedback from upstream</code></td></tr></table>




---

archive/issue_comments_240275.json:
```json
{
    "body": "**Changing commit** from \"[ebdf8996a28c1452d9ec546948bebcd46e2be457](https://github.com/sagemath/sagetrac-mirror/commit/ebdf8996a28c1452d9ec546948bebcd46e2be457)\" to \"[c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e](https://github.com/sagemath/sagetrac-mirror/commit/c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e)\".",
    "created_at": "2015-11-10T22:16:34Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240275",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ebdf8996a28c1452d9ec546948bebcd46e2be457](https://github.com/sagemath/sagetrac-mirror/commit/ebdf8996a28c1452d9ec546948bebcd46e2be457)" to "[c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e](https://github.com/sagemath/sagetrac-mirror/commit/c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e)".



---

archive/issue_events_158315.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-11-11T00:21:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158315"
}
```



---

archive/issue_comments_240276.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. No feedback yet.\" to \"Reported upstream. Developers acknowledge bug.\".",
    "created_at": "2015-11-11T00:21:03Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240276",
    "user": "https://github.com/kiwifb"
}
```

**Changing upstream** from "Reported upstream. No feedback yet." to "Reported upstream. Developers acknowledge bug.".



---

archive/issue_events_158316.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-22T21:07:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158316"
}
```



---

archive/issue_events_158317.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-22T21:07:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158317"
}
```



---

archive/issue_comments_240277.json:
```json
{
    "body": "**Reviewer:** Volker Braun",
    "created_at": "2015-11-22T21:07:51Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240277",
    "user": "https://github.com/vbraun"
}
```

**Reviewer:** Volker Braun



---

archive/issue_comments_240278.json:
```json
{
    "body": "**Changing dependencies** from \"#17618, #18142\" to \"#17618, #18142, #17643\".",
    "created_at": "2015-11-23T06:36:36Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240278",
    "user": "https://github.com/vbraun"
}
```

**Changing dependencies** from "#17618, #18142" to "#17618, #18142, #17643".



---

archive/issue_comments_240279.json:
```json
{
    "body": "**Changing branch** from \"[u/fbissey/numpy-1.10](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/numpy-1.10)\" to \"[c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e](https://github.com/sagemath/sagetrac-mirror/commit/c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e)\".",
    "created_at": "2015-11-23T18:08:19Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240279",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/fbissey/numpy-1.10](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/numpy-1.10)" to "[c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e](https://github.com/sagemath/sagetrac-mirror/commit/c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e)".



---

archive/issue_events_158318.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-23T18:08:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158318"
}
```



---

archive/issue_events_158319.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-23T18:08:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158319"
}
```



---

archive/issue_comments_240280.json:
```json
{
    "body": "**Changing branch** from \"[c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e](https://github.com/sagemath/sagetrac-mirror/commit/c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e)\" to \"[u/fbissey/numpy-1.10](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/numpy-1.10)\".",
    "created_at": "2015-11-23T21:48:05Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240280",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e](https://github.com/sagemath/sagetrac-mirror/commit/c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e)" to "[u/fbissey/numpy-1.10](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/numpy-1.10)".



---

archive/issue_comments_240281.json:
```json
{
    "body": "**Changing commit** from \"[c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e](https://github.com/sagemath/sagetrac-mirror/commit/c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e)\" to \"[9c6e94c90c5a92bbf7dd81fea22c60b120fafb85](https://github.com/sagemath/sagetrac-mirror/commit/9c6e94c90c5a92bbf7dd81fea22c60b120fafb85)\".",
    "created_at": "2015-11-23T22:01:09Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e](https://github.com/sagemath/sagetrac-mirror/commit/c7ac0a7e81a194dbc1e026bc6dba0046fbe5b23e)" to "[9c6e94c90c5a92bbf7dd81fea22c60b120fafb85](https://github.com/sagemath/sagetrac-mirror/commit/9c6e94c90c5a92bbf7dd81fea22c60b120fafb85)".



---

archive/issue_comments_240282.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c6e94c90c5a92bbf7dd81fea22c60b120fafb85\">9c6e94c</a></td><td><code>Add upstream patch to reverse inclusion of mingwin64 support. It cause ARM to be taken for win64!</code></td></tr></table>\n",
    "created_at": "2015-11-23T22:01:09Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240282",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c6e94c90c5a92bbf7dd81fea22c60b120fafb85">9c6e94c</a></td><td><code>Add upstream patch to reverse inclusion of mingwin64 support. It cause ARM to be taken for win64!</code></td></tr></table>




---

archive/issue_comments_240283.json:
```json
{
    "body": "<a id='comment:28'></a>\nHopefully this time this is right.",
    "created_at": "2015-11-23T22:05:59Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240283",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:28'></a>
Hopefully this time this is right.



---

archive/issue_events_158320.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-11-23T22:05:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158320"
}
```



---

archive/issue_comments_240284.json:
```json
{
    "body": "**Changing branch** from \"[u/fbissey/numpy-1.10](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/numpy-1.10)\" to \"[9c6e94c90c5a92bbf7dd81fea22c60b120fafb85](https://github.com/sagemath/sagetrac-mirror/commit/9c6e94c90c5a92bbf7dd81fea22c60b120fafb85)\".",
    "created_at": "2015-11-24T13:01:19Z",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17642#issuecomment-240284",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/fbissey/numpy-1.10](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/numpy-1.10)" to "[9c6e94c90c5a92bbf7dd81fea22c60b120fafb85](https://github.com/sagemath/sagetrac-mirror/commit/9c6e94c90c5a92bbf7dd81fea22c60b120fafb85)".



---

archive/issue_events_158321.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-24T13:01:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158321"
}
```



---

archive/issue_events_158322.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b49daf80fb5e39be82d5d68c44853d34c7ee3996",
    "created_at": "2015-11-24T13:01:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17642",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17642#event-158322"
}
```
