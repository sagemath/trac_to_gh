# Issue 17090: Reviewer patch for #16803

archive/issues_016853.json:
```json
{
    "assignees": [],
    "body": "Various fixes/improvements/clean-ups after #16803.\n\nCC:  @vbraun @mmasdeu @williamstein @simon-king-jena\n\nBranch/Commit: **[c46a4d5](https://github.com/sagemath/sagetrac-mirror/commit/c46a4d569c3fea2235af809235b5d8eeb6a4b34e)**\n\nReviewer: **Volker Braun, Jeroen Demeyer**\n\nAuthor: **Volker Braun, Jeroen Demeyer**\n\nComponent: **linear algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/17090_\n\n",
    "closed_at": "2014-10-05T22:39:18Z",
    "created_at": "2014-10-02T13:59:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Reviewer patch for #16803",
    "type": "issue",
    "updated_at": "2014-10-05T22:39:18Z",
    "url": "https://github.com/sagemath/sage/issues/17090",
    "user": "https://github.com/jdemeyer"
}
```
Various fixes/improvements/clean-ups after #16803.

CC:  @vbraun @mmasdeu @williamstein @simon-king-jena

Branch/Commit: **[c46a4d5](https://github.com/sagemath/sagetrac-mirror/commit/c46a4d569c3fea2235af809235b5d8eeb6a4b34e)**

Reviewer: **Volker Braun, Jeroen Demeyer**

Author: **Volker Braun, Jeroen Demeyer**

Component: **linear algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/17090_





---

archive/issue_events_244123.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T13:59:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17090#event-244123"
}
```



---

archive/issue_events_244124.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T13:59:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17090#event-244124"
}
```



---

archive/issue_events_244125.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T13:59:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17090#event-244125"
}
```



---

archive/issue_events_244126.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T13:59:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17090#event-244126"
}
```



---

archive/issue_comments_226449.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nFlint has a `--enable-assert` configure switch to turn on assertions which should be handy for debugging.",
    "created_at": "2014-10-02T14:14:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226449",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">comment:3</div>

Flint has a `--enable-assert` configure switch to turn on assertions which should be handy for debugging.



---

archive/issue_comments_226450.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@vbraun](#comment:3):\n> Flint has a `--enable-assert` configure switch to turn on assertions which should be handy for debugging.\n\n... which should become part of #16938, right?",
    "created_at": "2014-10-02T14:20:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226450",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@vbraun](#comment:3):
> Flint has a `--enable-assert` configure switch to turn on assertions which should be handy for debugging.

... which should become part of #16938, right?



---

archive/issue_comments_226451.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI'd prefer to add it here, there is already too much going on at  #16938",
    "created_at": "2014-10-02T14:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226451",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>

I'd prefer to add it here, there is already too much going on at  #16938



---

archive/issue_comments_226452.json:
```json
{
    "body": "Branch: **[u/vbraun/add_missing_fmpz_init](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/add_missing_fmpz_init)**",
    "created_at": "2014-10-02T14:44:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226452",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/add_missing_fmpz_init](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/add_missing_fmpz_init)**



---

archive/issue_comments_226453.json:
```json
{
    "body": "Commit: **[df10459](https://github.com/sagemath/sagetrac-mirror/commit/df1045910e8324a19b7efb748d884327be4567cc)**",
    "created_at": "2014-10-02T14:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226453",
    "user": "https://github.com/vbraun"
}
```

Commit: **[df10459](https://github.com/sagemath/sagetrac-mirror/commit/df1045910e8324a19b7efb748d884327be4567cc)**



---

archive/issue_comments_226454.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nTurns out assertions aren't used that much in flint, I still can't reproduce the crash. \n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f2750ed7bfb5caf1be3b47ead442e402b667db4\">6f2750e</a></td><td><code>Never build static library</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df1045910e8324a19b7efb748d884327be4567cc\">df10459</a></td><td><code>Enable flint assertions</code></td></tr></table>\n",
    "created_at": "2014-10-02T14:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226454",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">comment:7</div>

Turns out assertions aren't used that much in flint, I still can't reproduce the crash. 

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f2750ed7bfb5caf1be3b47ead442e402b667db4">6f2750e</a></td><td><code>Never build static library</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df1045910e8324a19b7efb748d884327be4567cc">df10459</a></td><td><code>Enable flint assertions</code></td></tr></table>




---

archive/issue_comments_226455.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,27 @@\n-The code from #16803 is missing `fmpz_init()`/`fmpz_clear()` in several places. This can cause random segfaults, as witnessed for example in #16938.\n+The code from #16803 is missing `fmpz_init()`/`fmpz_clear()` in `_lmul_` (and perhaps other places too). This can cause random segfaults and memory leaks, as witnessed for example in #16938.\n+\n+The code in question:\n+\n+```\n+    cpdef ModuleElement _lmul_(self, RingElement right):\n+        \"\"\"\n+        EXAMPLES::\n+\n+            sage: a = matrix(QQ,2,range(6))\n+            sage: (3/4) * a\n+            [   0  3/4  3/2]\n+            [ 9/4    3 15/4]\n+        \"\"\"\n+        cdef Py_ssize_t i\n+        cdef Integer _x\n+        cdef fmpz_t z\n+        _x = Integer(right)\n+        cdef Matrix_integer_dense M\n+        M = self._new_uninitialized_matrix(self._nrows,self._ncols)\n+        sig_on()\n+        fmpz_set_mpz(z,_x.value)\n+        fmpz_mat_scalar_mul_fmpz(M._matrix,self._matrix,z)\n+        sig_off()\n+        M._initialized = True\n+        return M\n+```\n``````\n",
    "created_at": "2014-10-02T15:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226455",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,27 @@
-The code from #16803 is missing `fmpz_init()`/`fmpz_clear()` in several places. This can cause random segfaults, as witnessed for example in #16938.
+The code from #16803 is missing `fmpz_init()`/`fmpz_clear()` in `_lmul_` (and perhaps other places too). This can cause random segfaults and memory leaks, as witnessed for example in #16938.
+
+The code in question:
+
+```
+    cpdef ModuleElement _lmul_(self, RingElement right):
+        """
+        EXAMPLES::
+
+            sage: a = matrix(QQ,2,range(6))
+            sage: (3/4) * a
+            [   0  3/4  3/2]
+            [ 9/4    3 15/4]
+        """
+        cdef Py_ssize_t i
+        cdef Integer _x
+        cdef fmpz_t z
+        _x = Integer(right)
+        cdef Matrix_integer_dense M
+        M = self._new_uninitialized_matrix(self._nrows,self._ncols)
+        sig_on()
+        fmpz_set_mpz(z,_x.value)
+        fmpz_mat_scalar_mul_fmpz(M._matrix,self._matrix,z)
+        sig_off()
+        M._initialized = True
+        return M
+```
``````




---

archive/issue_comments_226456.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe problem is that an assertion won't help against uninitialized variables.",
    "created_at": "2014-10-02T15:15:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226456",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

The problem is that an assertion won't help against uninitialized variables.



---

archive/issue_comments_226457.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@jdemeyer](#comment:9):\n> The problem is that an assertion won't help against uninitialized variables.\n\nAnd I thought a debug version would have a paranoid memory management, so that the use of uninitialised variables would result in an immediate abort.",
    "created_at": "2014-10-02T15:21:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226457",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@jdemeyer](#comment:9):
> The problem is that an assertion won't help against uninitialized variables.

And I thought a debug version would have a paranoid memory management, so that the use of uninitialised variables would result in an immediate abort.



---

archive/issue_comments_226458.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWhy not building a static library, by the way?",
    "created_at": "2014-10-02T15:23:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226458",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">comment:11</div>

Why not building a static library, by the way?



---

archive/issue_comments_226459.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nBecause static libraries suck. If you rebuild flint with debugging, is Sage going to use the new shared library or have the old static library compiled in?",
    "created_at": "2014-10-02T15:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226459",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">comment:12</div>

Because static libraries suck. If you rebuild flint with debugging, is Sage going to use the new shared library or have the old static library compiled in?



---

archive/issue_comments_226460.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAnd yes, I had hoped that flint had some mechanism to ensure that `*_init` is called, but no such luck.",
    "created_at": "2014-10-02T15:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226460",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:13" align="right">comment:13</div>

And yes, I had hoped that flint had some mechanism to ensure that `*_init` is called, but no such luck.



---

archive/issue_comments_226461.json:
```json
{
    "body": "Changed branch from **[u/vbraun/add_missing_fmpz_init](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/add_missing_fmpz_init)** to **[u/jdemeyer/ticket/17090](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17090)**",
    "created_at": "2014-10-02T15:31:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226461",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/vbraun/add_missing_fmpz_init](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/add_missing_fmpz_init)** to **[u/jdemeyer/ticket/17090](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17090)**



---

archive/issue_comments_226462.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThis should fix the problem, but I haven't tested it wth #16938.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b38491f4e99b814b6c238d6c96d7cb263b77e77\">7b38491</a></td><td><code>Fix initialization of fmpz_t</code></td></tr></table>\n",
    "created_at": "2014-10-02T15:32:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226462",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

This should fix the problem, but I haven't tested it wth #16938.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b38491f4e99b814b6c238d6c96d7cb263b77e77">7b38491</a></td><td><code>Fix initialization of fmpz_t</code></td></tr></table>




---

archive/issue_comments_226463.json:
```json
{
    "body": "Changed commit from **[df10459](https://github.com/sagemath/sagetrac-mirror/commit/df1045910e8324a19b7efb748d884327be4567cc)** to **[7b38491](https://github.com/sagemath/sagetrac-mirror/commit/7b38491f4e99b814b6c238d6c96d7cb263b77e77)**",
    "created_at": "2014-10-02T15:32:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226463",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[df10459](https://github.com/sagemath/sagetrac-mirror/commit/df1045910e8324a19b7efb748d884327be4567cc)** to **[7b38491](https://github.com/sagemath/sagetrac-mirror/commit/7b38491f4e99b814b6c238d6c96d7cb263b77e77)**



---

archive/issue_comments_226464.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nConcerning\n\n```\n+ fmpz_init(z)\n+ fmpz_set_mpz(z, x.value)\n```\nIs there no `fmpz_init_set`? I know that there is a combined init-set function for `mpz`, but I don't know about `fmpz`.",
    "created_at": "2014-10-02T17:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226464",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:16" align="right">comment:16</div>

Concerning

```
+ fmpz_init(z)
+ fmpz_set_mpz(z, x.value)
```
Is there no `fmpz_init_set`? I know that there is a combined init-set function for `mpz`, but I don't know about `fmpz`.



---

archive/issue_comments_226465.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThere is:\n\n```\n$ grep fmpz_init_set flint-2.4.3/fmpz.h \nvoid fmpz_init_set(fmpz_t f, const fmpz_t g)\nvoid fmpz_init_set_ui(fmpz_t f, ulong g)\nvoid fmpz_init_set_readonly(fmpz_t f, const mpz_t z);\n```",
    "created_at": "2014-10-02T17:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226465",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:17" align="right">comment:17</div>

There is:

```
$ grep fmpz_init_set flint-2.4.3/fmpz.h 
void fmpz_init_set(fmpz_t f, const fmpz_t g)
void fmpz_init_set_ui(fmpz_t f, ulong g)
void fmpz_init_set_readonly(fmpz_t f, const mpz_t z);
```



---

archive/issue_comments_226466.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@vbraun](#comment:17):\n> There is:\n> \n> ```\n> $ grep fmpz_init_set flint-2.4.3/fmpz.h \n> void fmpz_init_set(fmpz_t f, const fmpz_t g)\n> void fmpz_init_set_ui(fmpz_t f, ulong g)\n> void fmpz_init_set_readonly(fmpz_t f, const mpz_t z);\n> ```\n\nI think it should be used.",
    "created_at": "2014-10-02T17:51:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226466",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@vbraun](#comment:17):
> There is:
> 
> ```
> $ grep fmpz_init_set flint-2.4.3/fmpz.h 
> void fmpz_init_set(fmpz_t f, const fmpz_t g)
> void fmpz_init_set_ui(fmpz_t f, ulong g)
> void fmpz_init_set_readonly(fmpz_t f, const mpz_t z);
> ```

I think it should be used.



---

archive/issue_comments_226467.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,27 +1 @@\n-The code from #16803 is missing `fmpz_init()`/`fmpz_clear()` in `_lmul_` (and perhaps other places too). This can cause random segfaults and memory leaks, as witnessed for example in #16938.\n-\n-The code in question:\n-\n-```\n-    cpdef ModuleElement _lmul_(self, RingElement right):\n-        \"\"\"\n-        EXAMPLES::\n-\n-            sage: a = matrix(QQ,2,range(6))\n-            sage: (3/4) * a\n-            [   0  3/4  3/2]\n-            [ 9/4    3 15/4]\n-        \"\"\"\n-        cdef Py_ssize_t i\n-        cdef Integer _x\n-        cdef fmpz_t z\n-        _x = Integer(right)\n-        cdef Matrix_integer_dense M\n-        M = self._new_uninitialized_matrix(self._nrows,self._ncols)\n-        sig_on()\n-        fmpz_set_mpz(z,_x.value)\n-        fmpz_mat_scalar_mul_fmpz(M._matrix,self._matrix,z)\n-        sig_off()\n-        M._initialized = True\n-        return M\n-```\n+Various fixes/improvements/clean-ups after #16803.\n``````\n",
    "created_at": "2014-10-02T18:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226467",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,27 +1 @@
-The code from #16803 is missing `fmpz_init()`/`fmpz_clear()` in `_lmul_` (and perhaps other places too). This can cause random segfaults and memory leaks, as witnessed for example in #16938.
-
-The code in question:
-
-```
-    cpdef ModuleElement _lmul_(self, RingElement right):
-        """
-        EXAMPLES::
-
-            sage: a = matrix(QQ,2,range(6))
-            sage: (3/4) * a
-            [   0  3/4  3/2]
-            [ 9/4    3 15/4]
-        """
-        cdef Py_ssize_t i
-        cdef Integer _x
-        cdef fmpz_t z
-        _x = Integer(right)
-        cdef Matrix_integer_dense M
-        M = self._new_uninitialized_matrix(self._nrows,self._ncols)
-        sig_on()
-        fmpz_set_mpz(z,_x.value)
-        fmpz_mat_scalar_mul_fmpz(M._matrix,self._matrix,z)
-        sig_off()
-        M._initialized = True
-        return M
-```
+Various fixes/improvements/clean-ups after #16803.
``````




---

archive/issue_events_244127.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T18:10:16Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "title_is": "Fix issues with #16803",
    "title_was": "Add missing fmpz_init() statements after #16803",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17090#event-244127"
}
```



---

archive/issue_comments_226468.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThis branch fixes all valgrind warnings from `matrix_integer_dense` (when running `benchmark_hnf`)",
    "created_at": "2014-10-02T19:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226468",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:20" align="right">comment:20</div>

This branch fixes all valgrind warnings from `matrix_integer_dense` (when running `benchmark_hnf`)



---

archive/issue_comments_226469.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a16a8ea3e5abf5ea6d2fbe04bbdd670abb42619\">8a16a8e</a></td><td><code>Further clean-up</code></td></tr></table>\n",
    "created_at": "2014-10-02T20:30:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226469",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a16a8ea3e5abf5ea6d2fbe04bbdd670abb42619">8a16a8e</a></td><td><code>Further clean-up</code></td></tr></table>




---

archive/issue_comments_226470.json:
```json
{
    "body": "Changed commit from **[7b38491](https://github.com/sagemath/sagetrac-mirror/commit/7b38491f4e99b814b6c238d6c96d7cb263b77e77)** to **[8a16a8e](https://github.com/sagemath/sagetrac-mirror/commit/8a16a8ea3e5abf5ea6d2fbe04bbdd670abb42619)**",
    "created_at": "2014-10-02T20:30:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226470",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7b38491](https://github.com/sagemath/sagetrac-mirror/commit/7b38491f4e99b814b6c238d6c96d7cb263b77e77)** to **[8a16a8e](https://github.com/sagemath/sagetrac-mirror/commit/8a16a8ea3e5abf5ea6d2fbe04bbdd670abb42619)**



---

archive/issue_comments_226471.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@simon-king-jena](#comment:18):\n> I think it should be used.\n\nDone",
    "created_at": "2014-10-02T20:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226471",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@simon-king-jena](#comment:18):
> I think it should be used.

Done



---

archive/issue_events_244128.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T20:33:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17090#event-244128"
}
```



---

archive/issue_comments_226472.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5f684b2345e457791a1d878178cb5061764b421\">e5f684b</a></td><td><code>Remove unused code</code></td></tr></table>\n",
    "created_at": "2014-10-02T21:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226472",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5f684b2345e457791a1d878178cb5061764b421">e5f684b</a></td><td><code>Remove unused code</code></td></tr></table>




---

archive/issue_comments_226473.json:
```json
{
    "body": "Changed commit from **[8a16a8e](https://github.com/sagemath/sagetrac-mirror/commit/8a16a8ea3e5abf5ea6d2fbe04bbdd670abb42619)** to **[e5f684b](https://github.com/sagemath/sagetrac-mirror/commit/e5f684b2345e457791a1d878178cb5061764b421)**",
    "created_at": "2014-10-02T21:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226473",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8a16a8e](https://github.com/sagemath/sagetrac-mirror/commit/8a16a8ea3e5abf5ea6d2fbe04bbdd670abb42619)** to **[e5f684b](https://github.com/sagemath/sagetrac-mirror/commit/e5f684b2345e457791a1d878178cb5061764b421)**



---

archive/issue_comments_226474.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b310031e9d55973b13aa5876756589454a05593\">9b31003</a></td><td><code>Check 'implementation' argument</code></td></tr></table>\n",
    "created_at": "2014-10-02T21:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226474",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b310031e9d55973b13aa5876756589454a05593">9b31003</a></td><td><code>Check 'implementation' argument</code></td></tr></table>




---

archive/issue_comments_226475.json:
```json
{
    "body": "Changed commit from **[e5f684b](https://github.com/sagemath/sagetrac-mirror/commit/e5f684b2345e457791a1d878178cb5061764b421)** to **[9b31003](https://github.com/sagemath/sagetrac-mirror/commit/9b310031e9d55973b13aa5876756589454a05593)**",
    "created_at": "2014-10-02T21:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226475",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e5f684b](https://github.com/sagemath/sagetrac-mirror/commit/e5f684b2345e457791a1d878178cb5061764b421)** to **[9b31003](https://github.com/sagemath/sagetrac-mirror/commit/9b310031e9d55973b13aa5876756589454a05593)**



---

archive/issue_comments_226476.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2860d835bf647e7f84b876302c06c88eab67c51\">a2860d8</a></td><td><code>Undo changes to padics from #16803</code></td></tr></table>\n",
    "created_at": "2014-10-02T21:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226476",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2860d835bf647e7f84b876302c06c88eab67c51">a2860d8</a></td><td><code>Undo changes to padics from #16803</code></td></tr></table>




---

archive/issue_comments_226477.json:
```json
{
    "body": "Changed commit from **[9b31003](https://github.com/sagemath/sagetrac-mirror/commit/9b310031e9d55973b13aa5876756589454a05593)** to **[a2860d8](https://github.com/sagemath/sagetrac-mirror/commit/a2860d835bf647e7f84b876302c06c88eab67c51)**",
    "created_at": "2014-10-02T21:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226477",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9b31003](https://github.com/sagemath/sagetrac-mirror/commit/9b310031e9d55973b13aa5876756589454a05593)** to **[a2860d8](https://github.com/sagemath/sagetrac-mirror/commit/a2860d835bf647e7f84b876302c06c88eab67c51)**



---

archive/issue_comments_226478.json:
```json
{
    "body": "Author: **Volker Braun, Jeroen Demeyer**",
    "created_at": "2014-10-02T21:36:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226478",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Volker Braun, Jeroen Demeyer**



---

archive/issue_comments_226479.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/342d1520fbdb36041b1dc7e5a65c62e91dfb1e85\">342d152</a></td><td><code>Remove unneeded imports</code></td></tr></table>\n",
    "created_at": "2014-10-02T21:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226479",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/342d1520fbdb36041b1dc7e5a65c62e91dfb1e85">342d152</a></td><td><code>Remove unneeded imports</code></td></tr></table>




---

archive/issue_comments_226480.json:
```json
{
    "body": "Changed commit from **[a2860d8](https://github.com/sagemath/sagetrac-mirror/commit/a2860d835bf647e7f84b876302c06c88eab67c51)** to **[342d152](https://github.com/sagemath/sagetrac-mirror/commit/342d1520fbdb36041b1dc7e5a65c62e91dfb1e85)**",
    "created_at": "2014-10-02T21:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226480",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a2860d8](https://github.com/sagemath/sagetrac-mirror/commit/a2860d835bf647e7f84b876302c06c88eab67c51)** to **[342d152](https://github.com/sagemath/sagetrac-mirror/commit/342d1520fbdb36041b1dc7e5a65c62e91dfb1e85)**



---

archive/issue_events_244129.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T21:53:49Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "title_is": "Reviewer patch for #16803",
    "title_was": "Fix issues with #16803",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17090#event-244129"
}
```



---

archive/issue_comments_226481.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nWhy did you delete the following functions: \n\n```\n_multiply_linbox\n_multiply_multi_modular\n_det_pari\n```",
    "created_at": "2014-10-02T22:20:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226481",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:29" align="right">comment:29</div>

Why did you delete the following functions: 

```
_multiply_linbox
_multiply_multi_modular
_det_pari
```



---

archive/issue_comments_226482.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@williamstein](#comment:29):\n> Why did you delete the following functions: \n> \n> ```\n> _multiply_linbox\n> _multiply_multi_modular\n> ```\n\nThese were simply unused. If you think we should keep them \"for reference\", there is always the git log.\n\nAnd `_det_pari` was copied in #16803, I just deleted one of the two copies.",
    "created_at": "2014-10-03T05:27:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226482",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@williamstein](#comment:29):
> Why did you delete the following functions: 
> 
> ```
> _multiply_linbox
> _multiply_multi_modular
> ```

These were simply unused. If you think we should keep them "for reference", there is always the git log.

And `_det_pari` was copied in #16803, I just deleted one of the two copies.



---

archive/issue_comments_226483.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@jdemeyer](#comment:30):\n\n\n> Replying to [@williamstein](#comment:29):\n> \n> > Why did you delete the following functions: \n> > \n> > ```\n> > _multiply_linbox\n> > _multiply_multi_modular\n> > ```\n> > \n\n> These were simply unused. If you think we should keep them \"for reference\", there is always the git log.\n\nI'm against removing them.   Just because they aren't explicitly used elsewhere in Sage, doesn't mean they aren't useful to have.  For example, \n\n- I used them in testing the original patch (having multiple ways of computing products in order to compare) that this is following up on.\n \n- At one time Linbox was the fastest for multiplying matrices (at least in 2007, when Clement Pernet was my postdoc at UW).   Now it's terrible, at least as it is built in Sage.  Having the function _multiply_linbox makes it easier to test the speed of linbox versus flint (or multimodular) at any point.  If you remove it, then suddenly this becomes more difficult.    It's entirely plausible that linbox could again become faster than FLINT, and it would be more difficult to know without this function.\n\n- I personally don't trust FLINT, and having an easy alternative to test (or swap out for) matrix multiplication makes me happier.   I remember clearly times in the past when FLINT gave flat out wrong answers when multiplying large polynomials (burried deep in some p-adic cohomology calculations), and -- when tracking this down -- being able to instrument things so we could easily run the whole big computation with either FLINT or PARI was critical.",
    "created_at": "2014-10-03T06:17:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226483",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@jdemeyer](#comment:30):


> Replying to [@williamstein](#comment:29):
> 
> > Why did you delete the following functions: 
> > 
> > ```
> > _multiply_linbox
> > _multiply_multi_modular
> > ```
> > 

> These were simply unused. If you think we should keep them "for reference", there is always the git log.

I'm against removing them.   Just because they aren't explicitly used elsewhere in Sage, doesn't mean they aren't useful to have.  For example, 

- I used them in testing the original patch (having multiple ways of computing products in order to compare) that this is following up on.
 
- At one time Linbox was the fastest for multiplying matrices (at least in 2007, when Clement Pernet was my postdoc at UW).   Now it's terrible, at least as it is built in Sage.  Having the function _multiply_linbox makes it easier to test the speed of linbox versus flint (or multimodular) at any point.  If you remove it, then suddenly this becomes more difficult.    It's entirely plausible that linbox could again become faster than FLINT, and it would be more difficult to know without this function.

- I personally don't trust FLINT, and having an easy alternative to test (or swap out for) matrix multiplication makes me happier.   I remember clearly times in the past when FLINT gave flat out wrong answers when multiplying large polynomials (burried deep in some p-adic cohomology calculations), and -- when tracking this down -- being able to instrument things so we could easily run the whole big computation with either FLINT or PARI was critical.



---

archive/issue_comments_226484.json:
```json
{
    "body": "Changed commit from **[342d152](https://github.com/sagemath/sagetrac-mirror/commit/342d1520fbdb36041b1dc7e5a65c62e91dfb1e85)** to **[5b77c78](https://github.com/sagemath/sagetrac-mirror/commit/5b77c7816073fd46c915a05eb6e1461ea02fcd3a)**",
    "created_at": "2014-10-03T07:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226484",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[342d152](https://github.com/sagemath/sagetrac-mirror/commit/342d1520fbdb36041b1dc7e5a65c62e91dfb1e85)** to **[5b77c78](https://github.com/sagemath/sagetrac-mirror/commit/5b77c7816073fd46c915a05eb6e1461ea02fcd3a)**



---

archive/issue_comments_226485.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95b431d14f24b5d2cc801ea5bb3dbd9ed4a60206\">95b431d</a></td><td><code>Put back old multiplication code (as requested by William Stein)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b77c7816073fd46c915a05eb6e1461ea02fcd3a\">5b77c78</a></td><td><code>Restore doctest</code></td></tr></table>\n",
    "created_at": "2014-10-03T07:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226485",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95b431d14f24b5d2cc801ea5bb3dbd9ed4a60206">95b431d</a></td><td><code>Put back old multiplication code (as requested by William Stein)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b77c7816073fd46c915a05eb6e1461ea02fcd3a">5b77c78</a></td><td><code>Restore doctest</code></td></tr></table>




---

archive/issue_comments_226486.json:
```json
{
    "body": "Changed commit from **[5b77c78](https://github.com/sagemath/sagetrac-mirror/commit/5b77c7816073fd46c915a05eb6e1461ea02fcd3a)** to **[7843e3f](https://github.com/sagemath/sagetrac-mirror/commit/7843e3f1d2021ecf82e3384f0217fce4c5edeec3)**",
    "created_at": "2014-10-03T08:02:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226486",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5b77c78](https://github.com/sagemath/sagetrac-mirror/commit/5b77c7816073fd46c915a05eb6e1461ea02fcd3a)** to **[7843e3f](https://github.com/sagemath/sagetrac-mirror/commit/7843e3f1d2021ecf82e3384f0217fce4c5edeec3)**



---

archive/issue_comments_226487.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7843e3f1d2021ecf82e3384f0217fce4c5edeec3\">7843e3f</a></td><td><code>Fix fmpz_mat_t declaration</code></td></tr></table>\n",
    "created_at": "2014-10-03T08:02:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226487",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7843e3f1d2021ecf82e3384f0217fce4c5edeec3">7843e3f</a></td><td><code>Fix fmpz_mat_t declaration</code></td></tr></table>




---

archive/issue_comments_226488.json:
```json
{
    "body": "Changed commit from **[7843e3f](https://github.com/sagemath/sagetrac-mirror/commit/7843e3f1d2021ecf82e3384f0217fce4c5edeec3)** to **[c46a4d5](https://github.com/sagemath/sagetrac-mirror/commit/c46a4d569c3fea2235af809235b5d8eeb6a4b34e)**",
    "created_at": "2014-10-03T09:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226488",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7843e3f](https://github.com/sagemath/sagetrac-mirror/commit/7843e3f1d2021ecf82e3384f0217fce4c5edeec3)** to **[c46a4d5](https://github.com/sagemath/sagetrac-mirror/commit/c46a4d569c3fea2235af809235b5d8eeb6a4b34e)**



---

archive/issue_comments_226489.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/192c8e6f5c6e5f0bd0dd02d51b5f103924a408ef\">192c8e6</a></td><td><code>Missing comma between command-line arguments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9604069da33feeb6d27f9b540a79570ee41e71d4\">9604069</a></td><td><code>Merge commit '192c8e6f5c6e5f0bd0dd02d51b5f103924a408ef' into ticket/17090</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c46a4d569c3fea2235af809235b5d8eeb6a4b34e\">c46a4d5</a></td><td><code>Some reformatting</code></td></tr></table>\n",
    "created_at": "2014-10-03T09:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226489",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/192c8e6f5c6e5f0bd0dd02d51b5f103924a408ef">192c8e6</a></td><td><code>Missing comma between command-line arguments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9604069da33feeb6d27f9b540a79570ee41e71d4">9604069</a></td><td><code>Merge commit '192c8e6f5c6e5f0bd0dd02d51b5f103924a408ef' into ticket/17090</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c46a4d569c3fea2235af809235b5d8eeb6a4b34e">c46a4d5</a></td><td><code>Some reformatting</code></td></tr></table>




---

archive/issue_comments_226490.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI am going to leave this branch alone for now, please review! There is another follow-up at #17094.",
    "created_at": "2014-10-03T09:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226490",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

I am going to leave this branch alone for now, please review! There is another follow-up at #17094.



---

archive/issue_comments_226491.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@williamstein](#comment:29):\n> Why did you delete the following functions: \n> \n> ```\n> _multiply_linbox\n> ```\n\nHere's a better reason: it's broken!\n\n```\nsage: A = identity_matrix(ZZ,3)\nsage: A._multiply_linbox(A)\n[0 0 0]\n[0 0 0]\n[0 0 0]\n```\n\nFixing this at #17094...",
    "created_at": "2014-10-03T13:11:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226491",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@williamstein](#comment:29):
> Why did you delete the following functions: 
> 
> ```
> _multiply_linbox
> ```

Here's a better reason: it's broken!

```
sage: A = identity_matrix(ZZ,3)
sage: A._multiply_linbox(A)
[0 0 0]
[0 0 0]
[0 0 0]
```

Fixing this at #17094...



---

archive/issue_comments_226492.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@vbraun](#comment:13):\n> And yes, I had hoped that flint had some mechanism to ensure that `*_init` is called, but no such luck.\n\nIn C, this simply cannot be done. A variable on the stack starts out in a totally unpredictable state.",
    "created_at": "2014-10-03T15:17:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226492",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@vbraun](#comment:13):
> And yes, I had hoped that flint had some mechanism to ensure that `*_init` is called, but no such luck.

In C, this simply cannot be done. A variable on the stack starts out in a totally unpredictable state.



---

archive/issue_comments_226493.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@jdemeyer](#comment:37):\n> In C, this simply cannot be done. A variable on the stack starts out in a totally unpredictable state.\n\nThats of course, strictly speaking, true. But I would be happy to take my chances with a padding int being initialized to `0xdeadbeef` and having a random, but usually different, value if it was not initialized.",
    "created_at": "2014-10-03T15:24:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226493",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@jdemeyer](#comment:37):
> In C, this simply cannot be done. A variable on the stack starts out in a totally unpredictable state.

Thats of course, strictly speaking, true. But I would be happy to take my chances with a padding int being initialized to `0xdeadbeef` and having a random, but usually different, value if it was not initialized.



---

archive/issue_comments_226494.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@vbraun](#comment:38):\n> But I would be happy to take my chances with a padding int being initialized to `0xdeadbeef`\n\n...if you take care to clear out that `0xdeadbeef` after use and assume that the compiler doesn't optimize that clearing away, I guess it would work.",
    "created_at": "2014-10-03T15:31:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226494",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@vbraun](#comment:38):
> But I would be happy to take my chances with a padding int being initialized to `0xdeadbeef`

...if you take care to clear out that `0xdeadbeef` after use and assume that the compiler doesn't optimize that clearing away, I guess it would work.



---

archive/issue_comments_226495.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nLooks good to me!",
    "created_at": "2014-10-03T22:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226495",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:40" align="right">comment:40</div>

Looks good to me!



---

archive/issue_events_244130.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-03T22:34:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17090#event-244130"
}
```



---

archive/issue_events_244131.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-03T22:34:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17090#event-244131"
}
```



---

archive/issue_comments_226496.json:
```json
{
    "body": "Reviewer: **Volker Braun, Jeroen Demeyer**",
    "created_at": "2014-10-03T22:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226496",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun, Jeroen Demeyer**



---

archive/issue_comments_226497.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/17090](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17090)** to **[c46a4d5](https://github.com/sagemath/sagetrac-mirror/commit/c46a4d569c3fea2235af809235b5d8eeb6a4b34e)**",
    "created_at": "2014-10-05T22:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/17090#issuecomment-226497",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/17090](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/17090)** to **[c46a4d5](https://github.com/sagemath/sagetrac-mirror/commit/c46a4d569c3fea2235af809235b5d8eeb6a4b34e)**



---

archive/issue_events_244132.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-05T22:39:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17090#event-244132"
}
```



---

archive/issue_events_244133.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8872af6ed3c2ac3b3c3c1bde02bdb100a368c23b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-10-05T22:39:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/17090",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/17090#event-244133"
}
```
