# Issue 17056: Taking the dual of a negated isogeny raises an error

archive/issues_017056.json:
```json
{
    "body": "Keywords: isogeny dual\n\nIn the following example, taking the dual works for the isogeny `phi` but fails for the negated isogeny `psi`:\n\n```\nsage: k.<s> = QuadraticField(2)\nsage: E = EllipticCurve(k, [-3*s*(4 + 5*s), 2*s*(2 + 14*s + 11*s^2)])\nsage: phi = E.isogenies_prime_degree(3)[0]\nsage: psi = -phi\nsage: phi.dual()\nIsogeny of degree 3 from Elliptic Curve defined by y^2 = x^3 + (108*s-270)*x + (-1296*s+1512) over Number Field in s with defining polynomial x^2 - 2 to Elliptic Curve defined by y^2 = x^3 + (-12*s-30)*x + (48*s+56) over Number Field in s with defining polynomial x^2 - 2\nsage: psi.dual()\nTraceback (most recent call last):\n...\nNameError: global name 'E0' is not defined\n```\nThere is also a (trivial) bug that causes the dual to remain cached if the isogeny is changed by precomposing or postcomposing with an isomorphism (which is the way negation is implemented):\n\n```\nsage: -(phi.dual()) == (-phi).dual()                                          \nFalse                                                                          \n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17293\n\n",
    "closed_at": "2015-02-18T08:53:25Z",
    "created_at": "2014-11-05T13:31:45Z",
    "labels": [
        "component: elliptic curves",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Taking the dual of a negated isogeny raises an error",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17056",
    "user": "https://github.com/pjbruin"
}
```
Keywords: isogeny dual

In the following example, taking the dual works for the isogeny `phi` but fails for the negated isogeny `psi`:

```
sage: k.<s> = QuadraticField(2)
sage: E = EllipticCurve(k, [-3*s*(4 + 5*s), 2*s*(2 + 14*s + 11*s^2)])
sage: phi = E.isogenies_prime_degree(3)[0]
sage: psi = -phi
sage: phi.dual()
Isogeny of degree 3 from Elliptic Curve defined by y^2 = x^3 + (108*s-270)*x + (-1296*s+1512) over Number Field in s with defining polynomial x^2 - 2 to Elliptic Curve defined by y^2 = x^3 + (-12*s-30)*x + (48*s+56) over Number Field in s with defining polynomial x^2 - 2
sage: psi.dual()
Traceback (most recent call last):
...
NameError: global name 'E0' is not defined
```
There is also a (trivial) bug that causes the dual to remain cached if the isogeny is changed by precomposing or postcomposing with an isomorphism (which is the way negation is implemented):

```
sage: -(phi.dual()) == (-phi).dual()                                          
False                                                                          
```


Issue created by migration from https://trac.sagemath.org/ticket/17293





---

archive/issue_comments_226559.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-05T16:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17056#issuecomment-226559",
    "user": "https://github.com/pjbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_226560.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-09T20:35:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17056#issuecomment-226560",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_226561.json:
```json
{
    "body": "LGTM",
    "created_at": "2015-02-09T20:35:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17056#issuecomment-226561",
    "user": "https://github.com/fchapoton"
}
```

LGTM



---

archive/issue_comments_226562.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-02-18T08:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17056#issuecomment-226562",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_049981.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-18T08:53:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17056",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17056#event-49981"
}
```
