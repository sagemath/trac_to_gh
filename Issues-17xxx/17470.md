# Issue 17470: Let exponentiation of polynomial using FLINT nmod type be interrupted

archive/issues_017233.json:
```json
{
    "body": "\n```\nsage: p = next_prime(2**30)\nsage: k = GF(p)\nsage: x = polygen(k)\nsage: x**p\nCTRL+C....\n```\n\nCC:  @vbraun @jdemeyer\n\nBranch/Commit: 0706674121ae5da25e0d3f9d9a47da0cc1c6cc6f\n\nReviewer: Jeroen Demeyer\n\nAuthor: Jean-Pierre Flori\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/17470\n\n",
    "closed_at": "2014-12-21T21:45:16Z",
    "created_at": "2014-12-08T18:12:41Z",
    "labels": [
        "component: finite rings",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Let exponentiation of polynomial using FLINT nmod type be interrupted",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17470",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

```
sage: p = next_prime(2**30)
sage: k = GF(p)
sage: x = polygen(k)
sage: x**p
CTRL+C....
```

CC:  @vbraun @jdemeyer

Branch/Commit: 0706674121ae5da25e0d3f9d9a47da0cc1c6cc6f

Reviewer: Jeroen Demeyer

Author: Jean-Pierre Flori

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/17470





---

archive/issue_comments_301113.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-09T11:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301113",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_301114.json:
```json
{
    "body": "Changing commit from \"\" to \"ef28e279723adb97ee90c4f01e016decd5bcbc4b\"",
    "created_at": "2014-12-09T11:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301114",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing commit from "" to "ef28e279723adb97ee90c4f01e016decd5bcbc4b"



---

archive/issue_comments_301115.json:
```json
{
    "body": "Changing author from \"\" to \"Jean-Pierre Flori\"",
    "created_at": "2014-12-09T11:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301115",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing author from "" to "Jean-Pierre Flori"



---

archive/issue_comments_301116.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jpflori/ticket/17470\"",
    "created_at": "2014-12-09T11:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301116",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing branch from "" to "u/jpflori/ticket/17470"



---

archive/issue_comments_301117.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[0aed331](https://github.com/sagemath/sagetrac-mirror/commit/0aed331ca64eb9186fb8a9b462f42415df96b1cb)|`Make modular exponentiation of polynomial using FLINT interruptable.`|\n|[ef28e27](https://github.com/sagemath/sagetrac-mirror/commit/ef28e279723adb97ee90c4f01e016decd5bcbc4b)|`Better fix for exponentiation of polys using FLINT nmod and test.`|",
    "created_at": "2014-12-09T11:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301117",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[0aed331](https://github.com/sagemath/sagetrac-mirror/commit/0aed331ca64eb9186fb8a9b462f42415df96b1cb)|`Make modular exponentiation of polynomial using FLINT interruptable.`|
|[ef28e27](https://github.com/sagemath/sagetrac-mirror/commit/ef28e279723adb97ee90c4f01e016decd5bcbc4b)|`Better fix for exponentiation of polys using FLINT nmod and test.`|



---

archive/issue_comments_301118.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n \n ```\n-sage: k = GF(next_prime(2**30))\n+sage: p = next_prime(2**30)\n+sage: k = GF(p)\n sage: x = polygen(k)\n sage: x**p\n CTRL+C....\n``````\n",
    "created_at": "2014-12-09T11:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301118",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
 
 ```
-sage: k = GF(next_prime(2**30))
+sage: p = next_prime(2**30)
+sage: k = GF(p)
 sage: x = polygen(k)
 sage: x**p
 CTRL+C....
``````




---

archive/issue_comments_301119.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-12-09T12:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301119",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_301120.json:
```json
{
    "body": "<a id='comment:2'></a>\n`cdefs.pxi` should be `interrupt.pxi`",
    "created_at": "2014-12-09T12:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301120",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
`cdefs.pxi` should be `interrupt.pxi`



---

archive/issue_comments_301121.json:
```json
{
    "body": "<a id='comment:3'></a>\nI know it's not the topic of this ticket, but why is this code not implemented as direct calls to either `nmod_poly_pow()` or `nmod_poly_powmod_mpz_binexp()`?",
    "created_at": "2014-12-09T12:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301121",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
I know it's not the topic of this ticket, but why is this code not implemented as direct calls to either `nmod_poly_pow()` or `nmod_poly_powmod_mpz_binexp()`?



---

archive/issue_comments_301122.json:
```json
{
    "body": "<a id='comment:4'></a>\nAlso, `celement_pow` doesn't seem to be documented anywhere...\n\nI do give positive_review to the addition of `sig_on()` and `sig_off()` and the doctest changes.",
    "created_at": "2014-12-09T12:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301122",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
Also, `celement_pow` doesn't seem to be documented anywhere...

I do give positive_review to the addition of `sig_on()` and `sig_off()` and the doctest changes.



---

archive/issue_comments_301123.json:
```json
{
    "body": "<a id='comment:5'></a>\nActually,\n\n```\nsage: alarm(1)\nsage: x^n\n```\nshould be\n\n```\nsage: alarm(1); x^n\n```",
    "created_at": "2014-12-09T12:58:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301123",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Actually,

```
sage: alarm(1)
sage: x^n
```
should be

```
sage: alarm(1); x^n
```



---

archive/issue_comments_301124.json:
```json
{
    "body": "<a id='comment:6'></a>\nI created #17476 as possible \"meta-ticket\".",
    "created_at": "2014-12-09T13:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301124",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
I created #17476 as possible "meta-ticket".



---

archive/issue_comments_301125.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [jdemeyer](#comment%3A3):\n> I know it's not the topic of this ticket, but why is this code not implemented as direct calls to either `nmod_poly_pow()` or `nmod_poly_powmod_mpz_binexp()`?\n\nMaybe because the file was written 6 years ago on top of FLINT 1.x :)",
    "created_at": "2014-12-09T13:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301125",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:7'></a>
Replying to [jdemeyer](#comment%3A3):
> I know it's not the topic of this ticket, but why is this code not implemented as direct calls to either `nmod_poly_pow()` or `nmod_poly_powmod_mpz_binexp()`?

Maybe because the file was written 6 years ago on top of FLINT 1.x :)



---

archive/issue_comments_301126.json:
```json
{
    "body": "<a id='comment:8'></a>\nAs far as old stuff which needs update is concerned, we should also rewrite the NTL wrapping code now that Cython understands C++.",
    "created_at": "2014-12-09T13:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301126",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:8'></a>
As far as old stuff which needs update is concerned, we should also rewrite the NTL wrapping code now that Cython understands C++.



---

archive/issue_comments_301127.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|\n|[12539c9](https://github.com/sagemath/sagetrac-mirror/commit/12539c99d347b1747b33e4a2b3f3258ed40789d8)|`Cleanup exponentiation for polynomial over finite fields using FLINT.`|",
    "created_at": "2014-12-09T17:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301127",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|
|[12539c9](https://github.com/sagemath/sagetrac-mirror/commit/12539c99d347b1747b33e4a2b3f3258ed40789d8)|`Cleanup exponentiation for polynomial over finite fields using FLINT.`|



---

archive/issue_comments_301128.json:
```json
{
    "body": "Changing commit from \"ef28e279723adb97ee90c4f01e016decd5bcbc4b\" to \"12539c99d347b1747b33e4a2b3f3258ed40789d8\"",
    "created_at": "2014-12-09T17:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301128",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ef28e279723adb97ee90c4f01e016decd5bcbc4b" to "12539c99d347b1747b33e4a2b3f3258ed40789d8"



---

archive/issue_comments_301129.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-09T17:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301129",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_301130.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-12-15T07:18:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301130",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_301131.json:
```json
{
    "body": "<a id='comment:11'></a>\nI get\n\n```\nsage -t --long src/sage/libs/flint/nmod_poly_linkage.pxi\n**********************************************************************\nFile \"src/sage/libs/flint/nmod_poly_linkage.pxi\", line 498, in sage.libs.flint.nmod_poly_linkage.celement_pow\nFailed example:\n    alarm(1); x^n\nExpected:\n    Traceback (most recent call last):\n    ...\n    AlarmInterrupt\nGot:\n    Exception (FLINT memory_manager). Unable to allocate memory.\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 488, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 851, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.libs.flint.nmod_poly_linkage.celement_pow[20]>\", line 1, in <module>\n        alarm(Integer(1)); x**n\n      File \"sage/rings/polynomial/polynomial_template.pxi\", line 625, in sage.rings.polynomial.polynomial_zmod_flint.Polynomial_template.__pow__ (build/cythonized/sage/rings/polynomial/polynomial_zmod_flint.cpp:10790)\n      File \"sage/libs/flint/nmod_poly_linkage.pxi\", line 508, in sage.rings.polynomial.polynomial_zmod_flint.celement_pow (build/cythonized/sage/rings/polynomial/polynomial_zmod_flint.cpp:4815)\n      File \"sage/ext/c_lib.pyx\", line 85, in sage.ext.c_lib.sig_raise_exception (build/cythonized/sage/ext/c_lib.c:971)\n    RuntimeError: Aborted\n**********************************************************************\n```",
    "created_at": "2014-12-15T07:18:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301131",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
I get

```
sage -t --long src/sage/libs/flint/nmod_poly_linkage.pxi
**********************************************************************
File "src/sage/libs/flint/nmod_poly_linkage.pxi", line 498, in sage.libs.flint.nmod_poly_linkage.celement_pow
Failed example:
    alarm(1); x^n
Expected:
    Traceback (most recent call last):
    ...
    AlarmInterrupt
Got:
    Exception (FLINT memory_manager). Unable to allocate memory.
    Traceback (most recent call last):
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 851, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.libs.flint.nmod_poly_linkage.celement_pow[20]>", line 1, in <module>
        alarm(Integer(1)); x**n
      File "sage/rings/polynomial/polynomial_template.pxi", line 625, in sage.rings.polynomial.polynomial_zmod_flint.Polynomial_template.__pow__ (build/cythonized/sage/rings/polynomial/polynomial_zmod_flint.cpp:10790)
      File "sage/libs/flint/nmod_poly_linkage.pxi", line 508, in sage.rings.polynomial.polynomial_zmod_flint.celement_pow (build/cythonized/sage/rings/polynomial/polynomial_zmod_flint.cpp:4815)
      File "sage/ext/c_lib.pyx", line 85, in sage.ext.c_lib.sig_raise_exception (build/cythonized/sage/ext/c_lib.c:971)
    RuntimeError: Aborted
**********************************************************************
```



---

archive/issue_comments_301132.json:
```json
{
    "body": "<a id='comment:12'></a>\nIndeed...\nActually I think it will be quite hard to find a test that won't spuriously cause memory errors.\n\nExponentiation without modular reduction will be either too fast or eat up all the memory.\nAnd modular exponentiation is just fast as well and we can only use `long`s as exponents right now.",
    "created_at": "2014-12-16T09:38:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301132",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:12'></a>
Indeed...
Actually I think it will be quite hard to find a test that won't spuriously cause memory errors.

Exponentiation without modular reduction will be either too fast or eat up all the memory.
And modular exponentiation is just fast as well and we can only use `long`s as exponents right now.



---

archive/issue_comments_301133.json:
```json
{
    "body": "<a id='comment:13'></a>\nProposal: choose `n` such that the test passes with 2GB of virtual memory (use `ulimit -v 2000000` to test this). If needed, make the alarm time shorter.",
    "created_at": "2014-12-16T10:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301133",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Proposal: choose `n` such that the test passes with 2GB of virtual memory (use `ulimit -v 2000000` to test this). If needed, make the alarm time shorter.



---

archive/issue_comments_301134.json:
```json
{
    "body": "Changing commit from \"12539c99d347b1747b33e4a2b3f3258ed40789d8\" to \"c781c2498e3fc5f4402a3c22d4aa9228649f8614\"",
    "created_at": "2014-12-17T11:09:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301134",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "12539c99d347b1747b33e4a2b3f3258ed40789d8" to "c781c2498e3fc5f4402a3c22d4aa9228649f8614"



---

archive/issue_comments_301135.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[c781c24](https://github.com/sagemath/sagetrac-mirror/commit/c781c2498e3fc5f4402a3c22d4aa9228649f8614)|`Modify FLINT exponentiation test to pass with <= 2Gb of virtual mem.`|",
    "created_at": "2014-12-17T11:09:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301135",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[c781c24](https://github.com/sagemath/sagetrac-mirror/commit/c781c2498e3fc5f4402a3c22d4aa9228649f8614)|`Modify FLINT exponentiation test to pass with <= 2Gb of virtual mem.`|



---

archive/issue_comments_301136.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-17T11:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301136",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_301137.json:
```json
{
    "body": "Changing branch from \"u/jpflori/ticket/17470\" to \"u/jdemeyer/ticket/17470\"",
    "created_at": "2014-12-18T12:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301137",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "u/jpflori/ticket/17470" to "u/jdemeyer/ticket/17470"



---

archive/issue_comments_301138.json:
```json
{
    "body": "Changing commit from \"c781c2498e3fc5f4402a3c22d4aa9228649f8614\" to \"0706674121ae5da25e0d3f9d9a47da0cc1c6cc6f\"",
    "created_at": "2014-12-19T16:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301138",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "c781c2498e3fc5f4402a3c22d4aa9228649f8614" to "0706674121ae5da25e0d3f9d9a47da0cc1c6cc6f"



---

archive/issue_comments_301139.json:
```json
{
    "body": "<a id='comment:17'></a>\nI modified the test slightly. Other than that, the patch looks good.\n\n---\nNew commits:\n|                                                                                                                                          |                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[0706674](https://github.com/sagemath/sagetrac-mirror/commit/0706674121ae5da25e0d3f9d9a47da0cc1c6cc6f)|`Modify doctest`|",
    "created_at": "2014-12-19T16:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301139",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
I modified the test slightly. Other than that, the patch looks good.

---
New commits:
|                                                                                                                                          |                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[0706674](https://github.com/sagemath/sagetrac-mirror/commit/0706674121ae5da25e0d3f9d9a47da0cc1c6cc6f)|`Modify doctest`|



---

archive/issue_comments_301140.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2014-12-19T17:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301140",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_301141.json:
```json
{
    "body": "<a id='comment:18'></a>\nI assume this means positive review...",
    "created_at": "2014-12-19T17:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301141",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:18'></a>
I assume this means positive review...



---

archive/issue_comments_301142.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-19T17:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301142",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_301143.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/ticket/17470\" to \"0706674121ae5da25e0d3f9d9a47da0cc1c6cc6f\"",
    "created_at": "2014-12-21T21:45:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301143",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/ticket/17470" to "0706674121ae5da25e0d3f9d9a47da0cc1c6cc6f"



---

archive/issue_comments_301144.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-12-21T21:45:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17470#issuecomment-301144",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_057143.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-21T21:45:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17470",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17470#event-57143"
}
```
