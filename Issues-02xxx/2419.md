# Issue 2419: [with patch; positive review] Gap interface and resultant destroy the Singular interface on some machines

archive/issues_002419.json:
```json
{
    "body": "I consider the following bug critical, because it completely corrupts the Singular interface. However, it seems that the error only occurs on very few machines - so far, only one other person can reproduce the bug - see discussions at http://groups.google.com/group/sage-support/browse_thread/thread/5006f9a839723e27?hl=en\n\nCreating a univariate polynomial ring R over the rationals, computing the resultant of two polynomials in that ring and using the gap interface for the Integers makes the singular interface fail on R (on some machines). To be precise:\n\n```\nsage: R.<x> = QQ[]\nsage: f = x^3 + x + 1;  g = x^3 - x - 1\nsage: r = f.resultant(g)\nsage: gap(ZZ)\nIntegers\nsage: singular(R).typeof()    # this should yield 'ring' !\nprint(sage8);\nsage: singular(R).name()   # this is correct ...\n'sage0'\nsage: singular('sage0')   # ... hence, this should return a ring - but it doesn't\nprint(sage9);\nsage: singular('sage0')\nprint(sage10);\nsage: singular('sage0')\nprint(sage11);\n```\n\nNote that computing the resultant is important. If i replace it with, say, `singular(R)`, then the error does not occur. Also, if `gap(ZZ)` is done *before* computing the resultant, the error does not occur.\n\nDavid Joyner observed that on both machines showing that error, there is an rpm based Linux. However, i know a machine with the same Linux that does not show that error.\nAgain, see http://groups.google.com/group/sage-support/browse_thread/thread/5006f9a839723e27?hl=en\n\n\nAssignee: @williamstein\n\nCC:  @wdjoyner @williamstein\n\nKeywords: gap singular resultant\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/2419\n\n",
    "closed_at": "2008-04-21T00:41:55Z",
    "created_at": "2008-03-07T08:10:10Z",
    "labels": [
        "component: interfaces",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.0",
    "title": "[with patch; positive review] Gap interface and resultant destroy the Singular interface on some machines",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2419",
    "user": "https://github.com/simon-king-jena"
}
```
I consider the following bug critical, because it completely corrupts the Singular interface. However, it seems that the error only occurs on very few machines - so far, only one other person can reproduce the bug - see discussions at http://groups.google.com/group/sage-support/browse_thread/thread/5006f9a839723e27?hl=en

Creating a univariate polynomial ring R over the rationals, computing the resultant of two polynomials in that ring and using the gap interface for the Integers makes the singular interface fail on R (on some machines). To be precise:

```
sage: R.<x> = QQ[]
sage: f = x^3 + x + 1;  g = x^3 - x - 1
sage: r = f.resultant(g)
sage: gap(ZZ)
Integers
sage: singular(R).typeof()    # this should yield 'ring' !
print(sage8);
sage: singular(R).name()   # this is correct ...
'sage0'
sage: singular('sage0')   # ... hence, this should return a ring - but it doesn't
print(sage9);
sage: singular('sage0')
print(sage10);
sage: singular('sage0')
print(sage11);
```

Note that computing the resultant is important. If i replace it with, say, `singular(R)`, then the error does not occur. Also, if `gap(ZZ)` is done *before* computing the resultant, the error does not occur.

David Joyner observed that on both machines showing that error, there is an rpm based Linux. However, i know a machine with the same Linux that does not show that error.
Again, see http://groups.google.com/group/sage-support/browse_thread/thread/5006f9a839723e27?hl=en


Assignee: @williamstein

CC:  @wdjoyner @williamstein

Keywords: gap singular resultant

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/2419





---

archive/issue_comments_017067.json:
```json
{
    "body": "Replying to [ticket:2419 SimonKing]:\n> I consider the following bug critical, because it completely corrupts the Singular interface. However, it seems that the error only occurs on very few machines ...\n\n\nMeanwhile, i found a very similar error that even occurs on sage.math with sage 2.10.2:\n\n```\nsage: R.<x> = QQ[] \nsage: f = x^3 + x + 1;  g = x^3 - x - 1 \nsage:  r = f.resultant(g) \nsage: gap(ZZ) \nIntegers \nsage: singular(R) \n\nsage: singular(R) \n//   characteristic : 0 \n//   number of vars : 1 \n//        block   1 : ordering lp \n//                  : names    x \n//        block   2 : ordering C \nsage: singular(R).typeof() \n\nsage: singular(R).typeof() \n\nsage: singular(R).name() \n'sage0' \nsage: singular('sage0') \n\nsage: singular('sage0') \n\n```\nSo, after computing resultant and calling gap, the first singular(R) has empty output, but the second (and following) display a ring. Calling typeof on that ring repeatedly has empty output. And although `sage0` is the name of singular(R), calling singular('sage0') has empty output.\n\nI hope this is sufficiently reproducible for tracking down the problem.",
    "created_at": "2008-03-08T22:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17067",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [ticket:2419 SimonKing]:
> I consider the following bug critical, because it completely corrupts the Singular interface. However, it seems that the error only occurs on very few machines ...


Meanwhile, i found a very similar error that even occurs on sage.math with sage 2.10.2:

```
sage: R.<x> = QQ[] 
sage: f = x^3 + x + 1;  g = x^3 - x - 1 
sage:  r = f.resultant(g) 
sage: gap(ZZ) 
Integers 
sage: singular(R) 

sage: singular(R) 
//   characteristic : 0 
//   number of vars : 1 
//        block   1 : ordering lp 
//                  : names    x 
//        block   2 : ordering C 
sage: singular(R).typeof() 

sage: singular(R).typeof() 

sage: singular(R).name() 
'sage0' 
sage: singular('sage0') 

sage: singular('sage0') 

```
So, after computing resultant and calling gap, the first singular(R) has empty output, but the second (and following) display a ring. Calling typeof on that ring repeatedly has empty output. And although `sage0` is the name of singular(R), calling singular('sage0') has empty output.

I hope this is sufficiently reproducible for tracking down the problem.



---

archive/issue_events_008461.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2008-03-12T08:41:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "milestone": "sage-2.10.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2419#event-8461"
}
```



---

archive/issue_comments_017068.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [SimonKing](#comment%3A2):\n\nI was just trying the above example that used to fail on sage.math with sage-2.10.2\n\nIt works on sage.math with sage-2.10.3!! So, many thanks to the person who did (accidentally?) fix the bug.\n\nNow i am looking forward to test it on my machine, but this will take a while.",
    "created_at": "2008-03-12T08:58:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17068",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>
Replying to [SimonKing](#comment%3A2):

I was just trying the above example that used to fail on sage.math with sage-2.10.2

It works on sage.math with sage-2.10.3!! So, many thanks to the person who did (accidentally?) fix the bug.

Now i am looking forward to test it on my machine, but this will take a while.



---

archive/issue_comments_017069.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [SimonKing](#comment%3A3):\n>\n> Now i am looking forward to test it on my machine, but this will take a while.\n\n\nAlthough the problem vanished on sage.math, it is still present on my machine. Is there anyone out there who can reproduce it?",
    "created_at": "2008-03-12T12:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17069",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:4'></a>
Replying to [SimonKing](#comment%3A3):
>
> Now i am looking forward to test it on my machine, but this will take a while.


Although the problem vanished on sage.math, it is still present on my machine. Is there anyone out there who can reproduce it?



---

archive/issue_comments_017070.json:
```json
{
    "body": "<a id='comment:5'></a>\nThis is what I get on an amd64 ubuntu 7.10:\n\nwdj`@`wooster:~/wdj/sagefiles/sage-2.10.3$ ./sage\n\n---\n| SAGE Version 2.10.3, Release Date: 2008-03-11                      |\n| Type notebook() for the GUI, and license() for information.        |\n\n---\n\nsage: sage: R.<x> = QQ[]\nsage: sage: f = x^3 + x + 1;  g = x^3 - x - 1\nsage: sage: r = f.resultant(g)\nsage: sage: gap(ZZ)\nIntegers\nsage: Integers\n<function IntegerModRing at 0xf95ed8>\nsage: sage: singular(R).typeof()\nprint(sage8);\nsage: singular(R).name()\n'sage0'\nsage: singular('sage0')\nprint(sage9);\nsage: singular('sage0')\nprint(sage10);\nsage: singular('sage0')\nprint(sage11);\nsage: singular(R)\n\n//   number of vars : 1\n//        block   1 : ordering lp\n//                  : names    x\n//        block   2 : ordering C\nsage: singular(R).typeof()\nprint(sage12);\nsage: singular(R).name()\n'sage0'\nsage: singular(R).name()\n'sage0'\nsage: singular('sage0')\nprint(sage13);\nsage:",
    "created_at": "2008-03-12T13:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17070",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:5'></a>
This is what I get on an amd64 ubuntu 7.10:

wdj`@`wooster:~/wdj/sagefiles/sage-2.10.3$ ./sage

---
| SAGE Version 2.10.3, Release Date: 2008-03-11                      |
| Type notebook() for the GUI, and license() for information.        |

---

sage: sage: R.<x> = QQ[]
sage: sage: f = x^3 + x + 1;  g = x^3 - x - 1
sage: sage: r = f.resultant(g)
sage: sage: gap(ZZ)
Integers
sage: Integers
<function IntegerModRing at 0xf95ed8>
sage: sage: singular(R).typeof()
print(sage8);
sage: singular(R).name()
'sage0'
sage: singular('sage0')
print(sage9);
sage: singular('sage0')
print(sage10);
sage: singular('sage0')
print(sage11);
sage: singular(R)

//   number of vars : 1
//        block   1 : ordering lp
//                  : names    x
//        block   2 : ordering C
sage: singular(R).typeof()
print(sage12);
sage: singular(R).name()
'sage0'
sage: singular(R).name()
'sage0'
sage: singular('sage0')
print(sage13);
sage:



---

archive/issue_comments_017071.json:
```json
{
    "body": "<a id='comment:6'></a>\nSorry, forgot the wikiformatting, so reposted:\n\n```\nwdj@wooster:~/wdj/sagefiles/sage-2.10.3$ ./sage\n----------------------------------------------------------------------\n----------------------------------------------------------------------\n| SAGE Version 2.10.3, Release Date: 2008-03-11                      |\n| Type notebook() for the GUI, and license() for information.        |\n\nsage: sage: R.<x> = QQ[]\nsage: sage: f = x^3 + x + 1;  g = x^3 - x - 1\nsage: sage: r = f.resultant(g)\nsage: sage: gap(ZZ)\nIntegers\nsage: Integers\n<function IntegerModRing at 0xf95ed8>\nsage: sage: singular(R).typeof()\nprint(sage8);\nsage: singular(R).name()\n'sage0'\nsage: singular('sage0')\nprint(sage9);\nsage: singular('sage0')\nprint(sage10);\nsage: singular('sage0')\nprint(sage11);\nsage: singular(R)\n\n//   number of vars : 1\n//        block   1 : ordering lp\n//                  : names    x\n//        block   2 : ordering C\nsage: singular(R).typeof()\nprint(sage12);\nsage: singular(R).name()\n'sage0'\nsage: singular(R).name()\n'sage0'\nsage: singular('sage0')\nprint(sage13);\nsage:                              \n```",
    "created_at": "2008-03-12T13:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17071",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:6'></a>
Sorry, forgot the wikiformatting, so reposted:

```
wdj@wooster:~/wdj/sagefiles/sage-2.10.3$ ./sage
----------------------------------------------------------------------
----------------------------------------------------------------------
| SAGE Version 2.10.3, Release Date: 2008-03-11                      |
| Type notebook() for the GUI, and license() for information.        |

sage: sage: R.<x> = QQ[]
sage: sage: f = x^3 + x + 1;  g = x^3 - x - 1
sage: sage: r = f.resultant(g)
sage: sage: gap(ZZ)
Integers
sage: Integers
<function IntegerModRing at 0xf95ed8>
sage: sage: singular(R).typeof()
print(sage8);
sage: singular(R).name()
'sage0'
sage: singular('sage0')
print(sage9);
sage: singular('sage0')
print(sage10);
sage: singular('sage0')
print(sage11);
sage: singular(R)

//   number of vars : 1
//        block   1 : ordering lp
//                  : names    x
//        block   2 : ordering C
sage: singular(R).typeof()
print(sage12);
sage: singular(R).name()
'sage0'
sage: singular(R).name()
'sage0'
sage: singular('sage0')
print(sage13);
sage:                              
```



---

archive/issue_comments_017072.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [wdj](#comment%3A6):\n\nExactly the same happens on my machine, with AMD Athlon 64 and openSUSE 10.2.\n\nSomething different happens on sage.math, but it is still nonsense:\n\n```\nsage: R.<x> = QQ[]\nsage: f = x^3 + x + 1;  g = x^3 - x - 1\nsage: r = f.resultant(g)\nsage: gap(ZZ)\nIntegers\nsage: singular(R).typeof()\n\nsage: singular(R).name()\n'sage0'\nsage: singular('sage0')\n\nsage: singular('sage0')\n\nsage: singular(R)\n\n//   characteristic : 0\n//   number of vars : 1\n//        block   1 : ordering lp\n//                  : names    x\n//        block   2 : ordering C\n```\n\nHence, singular('sage0') and singular(R).typeof() have no visible output.",
    "created_at": "2008-03-12T13:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17072",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:7'></a>
Replying to [wdj](#comment%3A6):

Exactly the same happens on my machine, with AMD Athlon 64 and openSUSE 10.2.

Something different happens on sage.math, but it is still nonsense:

```
sage: R.<x> = QQ[]
sage: f = x^3 + x + 1;  g = x^3 - x - 1
sage: r = f.resultant(g)
sage: gap(ZZ)
Integers
sage: singular(R).typeof()

sage: singular(R).name()
'sage0'
sage: singular('sage0')

sage: singular('sage0')

sage: singular(R)

//   characteristic : 0
//   number of vars : 1
//        block   1 : ordering lp
//                  : names    x
//        block   2 : ordering C
```

Hence, singular('sage0') and singular(R).typeof() have no visible output.



---

archive/issue_comments_017073.json:
```json
{
    "body": "<a id='comment:8'></a>\n\n```\nperhaps you noticed that i had found a version of the weird bug\n\"resultant+gap+singular=nonsense\" even on sage.math, as i reported in\nticket #2419.\n\nThat was for sage-2.10.2; but the problem has vanished for sage-2.10.3 --\nat least on sage.math, i am curious what will happen on my machine. [[it survives there]]\n\nDo you have any idea how the problem was fixed (or whom i should ask)?\n```",
    "created_at": "2008-03-12T14:50:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17073",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:8'></a>

```
perhaps you noticed that i had found a version of the weird bug
"resultant+gap+singular=nonsense" even on sage.math, as i reported in
ticket #2419.

That was for sage-2.10.2; but the problem has vanished for sage-2.10.3 --
at least on sage.math, i am curious what will happen on my machine. [[it survives there]]

Do you have any idea how the problem was fixed (or whom i should ask)?
```



---

archive/issue_comments_017074.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [was](#comment%3A8):\n> perhaps you noticed that i had found a version of the weird bug\n> \"resultant+gap+singular=nonsense\" even on sage.math, as i reported in\n> ticket #2419.\n> \n> That was for sage-2.10.2; but the problem has vanished for sage-2.10.3 --\n> at least on sage.math, i am curious what will happen on my machine. [This is the Trac macro *it survives there* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#it survives there-macro)\n> \n> Do you have any idea how the problem was fixed (or whom i should ask)?\n\n\nThat was my message off trac to William. Apparently i was too optimistic: What i posted above *did* (and still does) happen on sage.math *after* writing my message to William. \n\nHopefully it is reproducible for you.",
    "created_at": "2008-03-12T15:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17074",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:9'></a>
Replying to [was](#comment%3A8):
> perhaps you noticed that i had found a version of the weird bug
> "resultant+gap+singular=nonsense" even on sage.math, as i reported in
> ticket #2419.
> 
> That was for sage-2.10.2; but the problem has vanished for sage-2.10.3 --
> at least on sage.math, i am curious what will happen on my machine. [This is the Trac macro *it survives there* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#it survives there-macro)
> 
> Do you have any idea how the problem was fixed (or whom i should ask)?


That was my message off trac to William. Apparently i was too optimistic: What i posted above *did* (and still does) happen on sage.math *after* writing my message to William. 

Hopefully it is reproducible for you.



---

archive/issue_events_008462.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "rename": {
        "from": "Gap interface and resultant destroy the Singular interface on some machines",
        "to": "[with test patch; needs feedback]  Gap interface and resultant destroy the Singular interface on some machines"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2419#event-8462"
}
```



---

archive/issue_comments_017075.json:
```json
{
    "body": "<a id='comment:10'></a>\nAttachment [sage-2419-singular_synch.patch](tarball://root/attachments/some-uuid/ticket2419/sage-2419-singular_synch.patch) by @williamstein created at 2008-03-12 15:33:10",
    "created_at": "2008-03-12T15:33:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17075",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:10'></a>
Attachment [sage-2419-singular_synch.patch](tarball://root/attachments/some-uuid/ticket2419/sage-2419-singular_synch.patch) by @williamstein created at 2008-03-12 15:33:10



---

archive/issue_comments_017076.json:
```json
{
    "body": "<a id='comment:12'></a>\nThe patch sage-2419-singular_synch.patch did not apply cleanly against my version\nof 2.10.3 using the command \nhg_doc.apply(\"/home/wdj/wdj/sagefiles/sage-2419-singular_synch.patch\")",
    "created_at": "2008-03-12T16:19:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17076",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:12'></a>
The patch sage-2419-singular_synch.patch did not apply cleanly against my version
of 2.10.3 using the command 
hg_doc.apply("/home/wdj/wdj/sagefiles/sage-2419-singular_synch.patch")



---

archive/issue_comments_017077.json:
```json
{
    "body": "<a id='comment:13'></a>\n> The patch sage-2419-singular_synch.patch did not apply cleanly \n> against my version of 2.10.3 using the command\n> hg_doc.apply(\"/home/wdj/wdj/sagefiles/sage-2419-singular_synch.patch\")\n\n\nAgh!  hg_doc??  Why are you using hg_doc?",
    "created_at": "2008-03-12T16:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17077",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:13'></a>
> The patch sage-2419-singular_synch.patch did not apply cleanly 
> against my version of 2.10.3 using the command
> hg_doc.apply("/home/wdj/wdj/sagefiles/sage-2419-singular_synch.patch")


Agh!  hg_doc??  Why are you using hg_doc?



---

archive/issue_comments_017078.json:
```json
{
    "body": "<a id='comment:14'></a>\nHi William!\n\nThe patch applies cleanly, and it solves the problem on my machine!\n\nSo, many thanks for the great job!\n\nOn sage-support you mentioned that the patch would slow down the interface considerably. Is there a way to know when synchronization is really needed? Perhaps, if the synchronization would not be done before *each* command, it were faster.",
    "created_at": "2008-03-12T18:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17078",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:14'></a>
Hi William!

The patch applies cleanly, and it solves the problem on my machine!

So, many thanks for the great job!

On sage-support you mentioned that the patch would slow down the interface considerably. Is there a way to know when synchronization is really needed? Perhaps, if the synchronization would not be done before *each* command, it were faster.



---

archive/issue_comments_017079.json:
```json
{
    "body": "<a id='comment:15'></a>\n> On sage-support you mentioned that the patch would slow down the \n> interface considerably. Is there a way to know when synchronization \n\n\n30% isn't so bad, and it's only a LATENCY issue really, i.e., if you\ndo \n\n```\n  singular('something that takes some actual time on the singular side')\n```\nthen it makes almost no difference.  \n\n> is really needed? Perhaps, if the synchronization would not be done \n> before each command, it were faster.\n\n\nBut then it wouldn't always work, which defeats the whole purpose, which\nis \"rock solid robustness\".\n\n -- William",
    "created_at": "2008-03-12T18:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17079",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:15'></a>
> On sage-support you mentioned that the patch would slow down the 
> interface considerably. Is there a way to know when synchronization 


30% isn't so bad, and it's only a LATENCY issue really, i.e., if you
do 

```
  singular('something that takes some actual time on the singular side')
```
then it makes almost no difference.  

> is really needed? Perhaps, if the synchronization would not be done 
> before each command, it were faster.


But then it wouldn't always work, which defeats the whole purpose, which
is "rock solid robustness".

 -- William



---

archive/issue_comments_017080.json:
```json
{
    "body": "<a id='comment:16'></a>\nJust to be clear: that \"30%\" refers only to the extra time if you do almost nothing in singular.eval('...').  If you actually do something that takes time, then the overhead of synchronizing should be way less.  Also, the 30% is for maxima.  I didn't benchmark the singular overhead yet.",
    "created_at": "2008-03-12T18:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17080",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:16'></a>
Just to be clear: that "30%" refers only to the extra time if you do almost nothing in singular.eval('...').  If you actually do something that takes time, then the overhead of synchronizing should be way less.  Also, the 30% is for maxima.  I didn't benchmark the singular overhead yet.



---

archive/issue_comments_017081.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [was](#comment%3A16):\n> Just to be clear: that \"30%\" refers only to the extra time if you do almost nothing in singular.eval('...').  If you actually do something that takes time, then the overhead of synchronizing should be way less.  Also, the 30% is for maxima.  I didn't benchmark the singular overhead yet.  \n\n\nThank you for the explanation! \n\nSince the problem vanishes with the patch (at least for me), I give a positive review, although you may know better than i if further and more extensive tests are needed.",
    "created_at": "2008-03-12T18:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17081",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:17'></a>
Replying to [was](#comment%3A16):
> Just to be clear: that "30%" refers only to the extra time if you do almost nothing in singular.eval('...').  If you actually do something that takes time, then the overhead of synchronizing should be way less.  Also, the 30% is for maxima.  I didn't benchmark the singular overhead yet.  


Thank you for the explanation! 

Since the problem vanishes with the patch (at least for me), I give a positive review, although you may know better than i if further and more extensive tests are needed.



---

archive/issue_events_008463.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "rename": {
        "from": "[with test patch; needs feedback]  Gap interface and resultant destroy the Singular interface on some machines",
        "to": "[with test patch; positive feedback]  Gap interface and resultant destroy the Singular interface on some machines"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2419#event-8463"
}
```



---

archive/issue_comments_017082.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [was](#comment%3A15):\n> > is really needed? Perhaps, if the synchronization would not be done \n> > before each command, it were faster.\n\n> \n> But then it wouldn't always work, which defeats the whole purpose, which\n> is \"rock solid robustness\".\n\n\nWhat i meant was: Is there a *fast* test that tells us whether or not the interface needs synchronization? If the test is faster than actually doing the synchronization, it would be faster and still rock solid.",
    "created_at": "2008-03-12T18:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17082",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:18'></a>
Replying to [was](#comment%3A15):
> > is really needed? Perhaps, if the synchronization would not be done 
> > before each command, it were faster.

> 
> But then it wouldn't always work, which defeats the whole purpose, which
> is "rock solid robustness".


What i meant was: Is there a *fast* test that tells us whether or not the interface needs synchronization? If the test is faster than actually doing the synchronization, it would be faster and still rock solid.



---

archive/issue_comments_017083.json:
```json
{
    "body": "<a id='comment:19'></a>\nMerged in Sage 2.10.4.alpha0",
    "created_at": "2008-03-12T19:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17083",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:19'></a>
Merged in Sage 2.10.4.alpha0



---

archive/issue_comments_017084.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-03-12T19:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17084",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_events_008464.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-03-12T19:45:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2419#event-8464"
}
```



---

archive/issue_comments_017085.json:
```json
{
    "body": "Changing status from closed to reopened.",
    "created_at": "2008-03-12T19:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17085",
    "user": "https://github.com/williamstein"
}
```

Changing status from closed to reopened.



---

archive/issue_events_008465.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-03-12T19:47:46Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2419#event-8465"
}
```



---

archive/issue_comments_017086.json:
```json
{
    "body": "<a id='comment:20'></a>\nWow, this was a 15-minute test patch, not a finished solution.\nIt should be have been rejected based on lack of doctests if nothing\nelse.  Anyways, reopened.",
    "created_at": "2008-03-12T19:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17086",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:20'></a>
Wow, this was a 15-minute test patch, not a finished solution.
It should be have been rejected based on lack of doctests if nothing
else.  Anyways, reopened.



---

archive/issue_comments_017087.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2008-03-12T19:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17087",
    "user": "https://github.com/williamstein"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_017088.json:
```json
{
    "body": "<a id='comment:21'></a>\nok, for the record: I reverted the patch in my tree, i.e. once doctests are added and the patch has been given a positive review it needs to be reapplied.\n\nCheers,\n\nMichael",
    "created_at": "2008-03-12T19:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17088",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:21'></a>
ok, for the record: I reverted the patch in my tree, i.e. once doctests are added and the patch has been given a positive review it needs to be reapplied.

Cheers,

Michael



---

archive/issue_comments_017089.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [mabshoff](#comment%3A21):\n> ok, for the record: I reverted the patch in my tree, i.e. once doctests are added and the patch has been given a positive review it needs to be reapplied.\n\n\nSorry that i confused you by using the notion \"positive review\" in my post. What i meant was \"positive feedback, since the original problem was solved\", where \"positive feedback\" means that it appears to go in a good direction.",
    "created_at": "2008-03-12T19:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17089",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:22'></a>
Replying to [mabshoff](#comment%3A21):
> ok, for the record: I reverted the patch in my tree, i.e. once doctests are added and the patch has been given a positive review it needs to be reapplied.


Sorry that i confused you by using the notion "positive review" in my post. What i meant was "positive feedback, since the original problem was solved", where "positive feedback" means that it appears to go in a good direction.



---

archive/issue_comments_017090.json:
```json
{
    "body": "<a id='comment:23'></a>\nOops. The hg_doc was stupid. With hg_sage.apply, it applies cleanly and fixes the problem.\nPasses sage -testall.",
    "created_at": "2008-03-12T22:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17090",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:23'></a>
Oops. The hg_doc was stupid. With hg_sage.apply, it applies cleanly and fixes the problem.
Passes sage -testall.



---

archive/issue_comments_017091.json:
```json
{
    "body": "<a id='comment:24'></a>\nHi!\n\nSince my premature hooray was causing some trouble, i try to excuse with a few doc tests: See the patch that i am about to attach, which should be applied after William's patch. Also i have a couple of questions/remarks.\n\nQuestions/Remarks:\n* Example for _crash_msg: I don't know if that example is platform dependent, since i use os.kill(singular.pid(),9) -- probably you know a more elegant way to kill singular on purpose. Also, it fails on `sage -t` because the error message \"Singular crashed -- automatically restarting.\" is considered as output. \n  - I'd like to show the error message to the user, but i don't want that `sage -t` expects it as output. How can i do so?\n* I didn't find out what _expect_expr is supposed to do. Similarly to what is done in _synchronize, I tried without success:\n\n```\nsage: singular._sendstr('2+3;')\nsage: singular._expect_expr(timeout=0.5)\n``` \n* Also i don't find a reasonable example for _interrupt.",
    "created_at": "2008-03-13T09:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17091",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:24'></a>
Hi!

Since my premature hooray was causing some trouble, i try to excuse with a few doc tests: See the patch that i am about to attach, which should be applied after William's patch. Also i have a couple of questions/remarks.

Questions/Remarks:
* Example for _crash_msg: I don't know if that example is platform dependent, since i use os.kill(singular.pid(),9) -- probably you know a more elegant way to kill singular on purpose. Also, it fails on `sage -t` because the error message "Singular crashed -- automatically restarting." is considered as output. 
  - I'd like to show the error message to the user, but i don't want that `sage -t` expects it as output. How can i do so?
* I didn't find out what _expect_expr is supposed to do. Similarly to what is done in _synchronize, I tried without success:

```
sage: singular._sendstr('2+3;')
sage: singular._expect_expr(timeout=0.5)
``` 
* Also i don't find a reasonable example for _interrupt.



---

archive/issue_comments_017092.json:
```json
{
    "body": "Adding some doctests to singular synchronization. To be applied after William's patch",
    "created_at": "2008-03-13T09:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17092",
    "user": "https://github.com/simon-king-jena"
}
```

Adding some doctests to singular synchronization. To be applied after William's patch



---

archive/issue_comments_017093.json:
```json
{
    "body": "<a id='comment:25'></a>\nAttachment [sage-2419-singular_synch_doctest.patch](tarball://root/attachments/some-uuid/ticket2419/sage-2419-singular_synch_doctest.patch) by @simon-king-jena created at 2008-03-13 10:40:04\n\nI found that bug since doc tests for my patch from #2420 failed. Thus i expected that William's synchronization patch would fix #2420 as well, but it didn't -- see my comments there.\n\nI'll try to boil down the new problem, but i suspect that a synchronization will be needed for the gap interface as well.",
    "created_at": "2008-03-13T10:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17093",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:25'></a>
Attachment [sage-2419-singular_synch_doctest.patch](tarball://root/attachments/some-uuid/ticket2419/sage-2419-singular_synch_doctest.patch) by @simon-king-jena created at 2008-03-13 10:40:04

I found that bug since doc tests for my patch from #2420 failed. Thus i expected that William's synchronization patch would fix #2420 as well, but it didn't -- see my comments there.

I'll try to boil down the new problem, but i suspect that a synchronization will be needed for the gap interface as well.



---

archive/issue_comments_017094.json:
```json
{
    "body": "<a id='comment:26'></a>\nHi!\n\nSo far, there was no feedback on my doc-tests, and no explanation about what _expect_expr is supposed to do. \n\nConcerning testing: I used Williams patch for extensive computations in a program that makes (small) use of the gap interface and *heavy* use of the singular interface. It didn't crash, which indicates that it may work. \n\nI am not sure: Is this enough for giving a \"positive review pending; more doctests needed\"?",
    "created_at": "2008-03-20T12:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17094",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:26'></a>
Hi!

So far, there was no feedback on my doc-tests, and no explanation about what _expect_expr is supposed to do. 

Concerning testing: I used Williams patch for extensive computations in a program that makes (small) use of the gap interface and *heavy* use of the singular interface. It didn't crash, which indicates that it may work. 

I am not sure: Is this enough for giving a "positive review pending; more doctests needed"?



---

archive/issue_comments_017095.json:
```json
{
    "body": "<a id='comment:27'></a>\n> I am not sure: Is this enough for giving a \"positive review \n> pending; more doctests needed\"? \n\n\nYes.  Given how the patch is written if it works in practice it\nis definitely worth including in Sage.  \n\nI can't work on this now unfortunately due to lack of time.",
    "created_at": "2008-03-20T23:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17095",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:27'></a>
> I am not sure: Is this enough for giving a "positive review 
> pending; more doctests needed"? 


Yes.  Given how the patch is written if it works in practice it
is definitely worth including in Sage.  

I can't work on this now unfortunately due to lack of time.



---

archive/issue_events_008466.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "rename": {
        "from": "[with test patch; positive feedback]  Gap interface and resultant destroy the Singular interface on some machines",
        "to": "[positive review pending; more doctests needed]  Gap interface and resultant destroy the Singular interface on some machines"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2419#event-8466"
}
```



---

archive/issue_comments_017096.json:
```json
{
    "body": "<a id='comment:28'></a>\nSorry, i have not been at work for a while. According to William's remark, i give a \"positive review pending; more doctests needed\". However, i could only provide more doctests if someone tells me about the use of _expect_expr. Also, i don't know how to deal with printed output in a doctest -- this concerns my example for _crash_msg.",
    "created_at": "2008-04-08T07:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17096",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:28'></a>
Sorry, i have not been at work for a while. According to William's remark, i give a "positive review pending; more doctests needed". However, i could only provide more doctests if someone tells me about the use of _expect_expr. Also, i don't know how to deal with printed output in a doctest -- this concerns my example for _crash_msg.



---

archive/issue_comments_017097.json:
```json
{
    "body": "<a id='comment:29'></a>\nThis *really* ought to be looked at. It seems ready.\n\nCheers,\n\nMichael",
    "created_at": "2008-04-18T20:32:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17097",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:29'></a>
This *really* ought to be looked at. It seems ready.

Cheers,

Michael



---

archive/issue_events_008467.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-04-18T20:32:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "milestone": "sage-2.10.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2419#event-8467"
}
```



---

archive/issue_events_008468.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-04-18T20:32:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "milestone": "sage-3.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2419#event-8468"
}
```



---

archive/issue_comments_017098.json:
```json
{
    "body": "Attachment [sage-2419-refactor.patch](tarball://root/attachments/some-uuid/ticket2419/sage-2419-refactor.patch) by @williamstein created at 2008-04-20 19:50:30\n\napply *all three* patches in order.",
    "created_at": "2008-04-20T19:50:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17098",
    "user": "https://github.com/williamstein"
}
```

Attachment [sage-2419-refactor.patch](tarball://root/attachments/some-uuid/ticket2419/sage-2419-refactor.patch) by @williamstein created at 2008-04-20 19:50:30

apply *all three* patches in order.



---

archive/issue_comments_017099.json:
```json
{
    "body": "<a id='comment:30'></a>\nIt said \"[positive review pending; more doctests needed]\", so I wrote more doctests and did the\nrefactoring suggested in my comments.   So now -- [with patch; needs review]",
    "created_at": "2008-04-20T19:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17099",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:30'></a>
It said "[positive review pending; more doctests needed]", so I wrote more doctests and did the
refactoring suggested in my comments.   So now -- [with patch; needs review]



---

archive/issue_events_008469.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "rename": {
        "from": "[positive review pending; more doctests needed]  Gap interface and resultant destroy the Singular interface on some machines",
        "to": "[with patch; needs review] Gap interface and resultant destroy the Singular interface on some machines"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2419#event-8469"
}
```



---

archive/issue_events_008470.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "rename": {
        "from": "[with patch; needs review] Gap interface and resultant destroy the Singular interface on some machines",
        "to": "[with patch; positive review] Gap interface and resultant destroy the Singular interface on some machines"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2419#event-8470"
}
```



---

archive/issue_comments_017100.json:
```json
{
    "body": "<a id='comment:31'></a>\nApplies and passes tests against 3.0alpha5.  Looks good to me.",
    "created_at": "2008-04-20T20:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17100",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:31'></a>
Applies and passes tests against 3.0alpha5.  Looks good to me.



---

archive/issue_events_008471.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-04-21T00:41:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2419#event-8471"
}
```



---

archive/issue_comments_017101.json:
```json
{
    "body": "<a id='comment:32'></a>\nMerged all three patches in Sage 3.0.rc1",
    "created_at": "2008-04-21T00:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17101",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:32'></a>
Merged all three patches in Sage 3.0.rc1



---

archive/issue_comments_017102.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-04-21T00:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17102",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_comments_017103.json:
```json
{
    "body": "<a id='comment:33'></a>\nMmh, after merging this patch I see:\n\n```\nmabshoff@sage:/scratch/mabshoff/release-cycle/sage-3.0.rc1$ ./sage -t  devel/sage/sage/interfaces/expect.py\nsage -t  devel/sage/sage/interfaces/expect.py               **********************************************************************\nFile \"/scratch/mabshoff/release-cycle/sage-3.0.rc1/tmp/expect.py\", line 835:\n    sage: singular('2+3')\nExpected:\n    Singular crashed -- automatically restarting.\n    5\nGot:\n    5\n**********************************************************************\nFile \"/scratch/mabshoff/release-cycle/sage-3.0.rc1/tmp/expect.py\", line 860:\n    sage: R.<x> = QQ[]; f = x^3 + x + 1;  g = x^3 - x - 1; r = f.resultant(g); gap(ZZ); singular(R)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/doctest.py\", line 1228, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_17[2]>\", line 1, in <module>\n        R = QQ['x']; (x,) = R._first_ngens(Integer(1)); f = x**Integer(3) + x + Integer(1);  g = x**Integer(3) - x - Integer(1); r = f.resultant(g); gap(ZZ); singular(R)###line 860:\n    sage: R.<x> = QQ[]; f = x^3 + x + 1;  g = x^3 - x - 1; r = f.resultant(g); gap(ZZ); singular(R)\n      File \"/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_singular_interface.py\", line 288, in resultant\n        return resultant_func(self, other, variable)\n      File \"/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_singular_interface.py\", line 438, in resultant_func\n        rt = self._singular_().resultant(other._singular_(), variable._singular_())\n      File \"/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_singular_interface.py\", line 282, in _singular_\n        return _singular_func(self, singular, have_ring, force)\n      File \"/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_singular_interface.py\", line 334, in _singular_func\n        self.parent()._singular_(singular,force=force).set_ring() #this is expensive\n      File \"/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_singular_interface.py\", line 174, in _singular_\n        return self._singular_init_(singular, force)\n      File \"/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_singular_interface.py\", line 217, in _singular_init_\n        self.__singular = singular.ring(self.characteristic(), _vars, order=order, check=False)\n      File \"/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/interfaces/singular.py\", line 681, in ring\n        R = self('%s,%s,%s'%(char, vars, order), 'ring')\n      File \"/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/interfaces/singular.py\", line 502, in __call__\n        return SingularElement(self, type, x, False)\n      File \"/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/interfaces/singular.py\", line 825, in __init__\n        raise TypeError, x\n    TypeError: End Of File (EOF) in read_nonblocking(). Braindead platform.\n    <pexpect.spawn instance at 0x2abf554371b8>\n    version: 2.0 ($Revision: 1.151 $)\n    command: /scratch/mabshoff/release-cycle/sage-3.0.rc1/local/bin/Singular\n    args: ['/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/bin/Singular', '-t', '--ticks-per-sec', '1000']\n    patterns:\n        >\n    buffer (last 100 chars):\n    before (last 100 chars): ring sage4=0,x,lp;\n\n    after: <class 'pexpect.EOF'>\n    match: None\n    match_index: None\n    exitstatus: None\n    flag_eof: 1\n    pid: 19207\n    child_fd: 3\n    timeout: None\n    delimiter: <class 'pexpect.EOF'>\n    logfile: None\n    maxread: 1000\n    searchwindowsize: None\n    delaybeforesend: 0\n    Singular crashed executing ring sage4=0,x,lp;\n**********************************************************************\n2 items had failures:\n   1 of   7 in __main__.example_16\n   1 of   3 in __main__.example_17\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /scratch/mabshoff/release-cycle/sage-3.0.rc1/tmp/.doctest_expect.py\n         [7.5 s]\nexit code: 1024\n\n----------------------------------------------------------------------\nThe following tests failed:\n\n\n        sage -t  devel/sage/sage/interfaces/expect.py\nTotal time for all tests: 7.5 seconds\nmabshoff@sage:/scratch/mabshoff/release-cycle/sage-3.0.rc1$   \n```\n\nThoughts?\n\nCheers,\n\nMichael",
    "created_at": "2008-04-21T01:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17103",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:33'></a>
Mmh, after merging this patch I see:

```
mabshoff@sage:/scratch/mabshoff/release-cycle/sage-3.0.rc1$ ./sage -t  devel/sage/sage/interfaces/expect.py
sage -t  devel/sage/sage/interfaces/expect.py               **********************************************************************
File "/scratch/mabshoff/release-cycle/sage-3.0.rc1/tmp/expect.py", line 835:
    sage: singular('2+3')
Expected:
    Singular crashed -- automatically restarting.
    5
Got:
    5
**********************************************************************
File "/scratch/mabshoff/release-cycle/sage-3.0.rc1/tmp/expect.py", line 860:
    sage: R.<x> = QQ[]; f = x^3 + x + 1;  g = x^3 - x - 1; r = f.resultant(g); gap(ZZ); singular(R)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/doctest.py", line 1228, in __run
        compileflags, 1) in test.globs
      File "<doctest __main__.example_17[2]>", line 1, in <module>
        R = QQ['x']; (x,) = R._first_ngens(Integer(1)); f = x**Integer(3) + x + Integer(1);  g = x**Integer(3) - x - Integer(1); r = f.resultant(g); gap(ZZ); singular(R)###line 860:
    sage: R.<x> = QQ[]; f = x^3 + x + 1;  g = x^3 - x - 1; r = f.resultant(g); gap(ZZ); singular(R)
      File "/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_singular_interface.py", line 288, in resultant
        return resultant_func(self, other, variable)
      File "/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_singular_interface.py", line 438, in resultant_func
        rt = self._singular_().resultant(other._singular_(), variable._singular_())
      File "/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_singular_interface.py", line 282, in _singular_
        return _singular_func(self, singular, have_ring, force)
      File "/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_singular_interface.py", line 334, in _singular_func
        self.parent()._singular_(singular,force=force).set_ring() #this is expensive
      File "/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_singular_interface.py", line 174, in _singular_
        return self._singular_init_(singular, force)
      File "/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_singular_interface.py", line 217, in _singular_init_
        self.__singular = singular.ring(self.characteristic(), _vars, order=order, check=False)
      File "/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/interfaces/singular.py", line 681, in ring
        R = self('%s,%s,%s'%(char, vars, order), 'ring')
      File "/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/interfaces/singular.py", line 502, in __call__
        return SingularElement(self, type, x, False)
      File "/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/lib/python2.5/site-packages/sage/interfaces/singular.py", line 825, in __init__
        raise TypeError, x
    TypeError: End Of File (EOF) in read_nonblocking(). Braindead platform.
    <pexpect.spawn instance at 0x2abf554371b8>
    version: 2.0 ($Revision: 1.151 $)
    command: /scratch/mabshoff/release-cycle/sage-3.0.rc1/local/bin/Singular
    args: ['/scratch/mabshoff/release-cycle/sage-3.0.rc1/local/bin/Singular', '-t', '--ticks-per-sec', '1000']
    patterns:
        >
    buffer (last 100 chars):
    before (last 100 chars): ring sage4=0,x,lp;

    after: <class 'pexpect.EOF'>
    match: None
    match_index: None
    exitstatus: None
    flag_eof: 1
    pid: 19207
    child_fd: 3
    timeout: None
    delimiter: <class 'pexpect.EOF'>
    logfile: None
    maxread: 1000
    searchwindowsize: None
    delaybeforesend: 0
    Singular crashed executing ring sage4=0,x,lp;
**********************************************************************
2 items had failures:
   1 of   7 in __main__.example_16
   1 of   3 in __main__.example_17
***Test Failed*** 2 failures.
For whitespace errors, see the file /scratch/mabshoff/release-cycle/sage-3.0.rc1/tmp/.doctest_expect.py
         [7.5 s]
exit code: 1024

----------------------------------------------------------------------
The following tests failed:


        sage -t  devel/sage/sage/interfaces/expect.py
Total time for all tests: 7.5 seconds
mabshoff@sage:/scratch/mabshoff/release-cycle/sage-3.0.rc1$   
```

Thoughts?

Cheers,

Michael



---

archive/issue_comments_017104.json:
```json
{
    "body": "Attachment [sage-2419-followup.patch](tarball://root/attachments/some-uuid/ticket2419/sage-2419-followup.patch) by @williamstein created at 2008-04-21 01:52:26",
    "created_at": "2008-04-21T01:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17104",
    "user": "https://github.com/williamstein"
}
```

Attachment [sage-2419-followup.patch](tarball://root/attachments/some-uuid/ticket2419/sage-2419-followup.patch) by @williamstein created at 2008-04-21 01:52:26



---

archive/issue_comments_017105.json:
```json
{
    "body": "<a id='comment:34'></a>\nMerged sage-2419-followup.patch in Sage 3.0.rc1",
    "created_at": "2008-04-21T02:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2419#issuecomment-17105",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:34'></a>
Merged sage-2419-followup.patch in Sage 3.0.rc1
