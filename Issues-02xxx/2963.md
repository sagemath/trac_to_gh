# Issue 2963: R interface: fix passing strings

archive/issues_002963.json:
```json
{
    "body": "One should be able to do \n\n```\nr.png(file=\"myplot3.png\")\n```\n\ninstead of \n\n```\nsage: r.png(file='\"myplot3.png\"')\n```\n\nAssignee: @mwhansen\n\nStatus: new\n\nIssue created by migration from https://trac.sagemath.org/ticket/2963\n\n",
    "created_at": "2008-04-20T01:46:25Z",
    "labels": [
        "component: interfaces"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "R interface: fix passing strings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2963",
    "user": "https://github.com/mwhansen"
}
```
One should be able to do 

```
r.png(file="myplot3.png")
```

instead of 

```
sage: r.png(file='"myplot3.png"')
```

Assignee: @mwhansen

Status: new

Issue created by migration from https://trac.sagemath.org/ticket/2963





---

archive/issue_comments_020390.json:
```json
{
    "body": "<a id='comment:1'></a>Hi Mike!\n\nJust a quick idea:\nCouldn't one simply do\n\n```\n    def png(self, *args, **kwds):\n        ...\n        f = lambda x: x if not isinstance(x,basestring) else ('%s'%x if x[0]==x[-1]=='\"' else '\"%s\"'%x)\n        return RFunction(self, 'png')(*[f(x) for x in args], **dict([(x,f(y)) for x,y in kwds.items()]))\n```\n\nThis would transform any string into a '\"string\"', unless string starts and ends with '\"' already, and any other input is untouched. In particular, my suggestion would not break existing code, since `r.png(file='\"myplot3.png\"')` would still be valid.\n\nI don't know in what way png is usually called: Frequently and with many arguments? Then my suggestion might involve a performance problem. Also I don't know if the application of `f` to `args` is needed as well, or if the application to `kwds` would be enough.\n\nRegards,\n   Simon",
    "created_at": "2009-09-21T20:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2963#issuecomment-20390",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:1'></a>Hi Mike!

Just a quick idea:
Couldn't one simply do

```
    def png(self, *args, **kwds):
        ...
        f = lambda x: x if not isinstance(x,basestring) else ('%s'%x if x[0]==x[-1]=='"' else '"%s"'%x)
        return RFunction(self, 'png')(*[f(x) for x in args], **dict([(x,f(y)) for x,y in kwds.items()]))
```

This would transform any string into a '"string"', unless string starts and ends with '"' already, and any other input is untouched. In particular, my suggestion would not break existing code, since `r.png(file='"myplot3.png"')` would still be valid.

I don't know in what way png is usually called: Frequently and with many arguments? Then my suggestion might involve a performance problem. Also I don't know if the application of `f` to `args` is needed as well, or if the application to `kwds` would be enough.

Regards,
   Simon



---

archive/issue_comments_020391.json:
```json
{
    "body": "<a id='comment:2'></a>Replying to [comment:1 SimonKing]:\n> I don't know in what way png is usually called: Frequently and with many arguments? Then my suggestion might involve a performance problem. Also I don't know if the application of `f` to `args` is needed as well, or if the application to `kwds` would be enough.\n\n\nSorry, perhaps I misunderstood the role of png: It is just one example, isn't it? But actually you want that in *all* expect interfaces the transition from 'bla' to '\"bla\"' is done, right? Then still my suggestion would solve the problem, but I guess the above lambda function should be defined in expect.py on module level, so that there is no need to create  the function over and over again.\n\nThen, one would go through *all* methods of all expect interfaces, and do changes to the arguments, if they might be strings. Wow, that would be much to do! And then I don't know how much performance regression would occur and if that price would be worth to pay for making the input more comfortable.\n\nCheers,\nSimon",
    "created_at": "2009-09-21T20:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2963#issuecomment-20391",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:2'></a>Replying to [comment:1 SimonKing]:
> I don't know in what way png is usually called: Frequently and with many arguments? Then my suggestion might involve a performance problem. Also I don't know if the application of `f` to `args` is needed as well, or if the application to `kwds` would be enough.


Sorry, perhaps I misunderstood the role of png: It is just one example, isn't it? But actually you want that in *all* expect interfaces the transition from 'bla' to '"bla"' is done, right? Then still my suggestion would solve the problem, but I guess the above lambda function should be defined in expect.py on module level, so that there is no need to create  the function over and over again.

Then, one would go through *all* methods of all expect interfaces, and do changes to the arguments, if they might be strings. Wow, that would be much to do! And then I don't know how much performance regression would occur and if that price would be worth to pay for making the input more comfortable.

Cheers,
Simon



---

archive/issue_comments_020392.json:
```json
{
    "body": "<a id='comment:3'></a>See also #12948, as many many people have asked how to do this in R and we still don't really have a nice solution for this in general.",
    "created_at": "2012-05-18T01:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2963#issuecomment-20392",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>See also #12948, as many many people have asked how to do this in R and we still don't really have a nice solution for this in general.



---

archive/issue_events_006769.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2963",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2963#event-6769"
}
```



---

archive/issue_events_006770.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2963",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2963#event-6770"
}
```



---

archive/issue_events_006771.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2963",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2963#event-6771"
}
```



---

archive/issue_events_006772.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2963",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2963#event-6772"
}
```



---

archive/issue_events_006773.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2963",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2963#event-6773"
}
```



---

archive/issue_events_006774.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2963",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2963#event-6774"
}
```



---

archive/issue_events_006775.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2963",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2963#event-6775"
}
```



---

archive/issue_events_006776.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-23T15:21:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2963",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2963#event-6776"
}
```



---

archive/issue_events_006777.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-23T15:21:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2963",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2963#event-6777"
}
```
