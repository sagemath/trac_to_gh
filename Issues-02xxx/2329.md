# Issue 2329: Add interface to PARI's rnfisnorm()

archive/issues_002329.json:
```json
{
    "body": "This patch adds support to solve norm equations via PARI. \n\nQuick summary: given an element `x` of any number field (even `QQ`), `x.is_norm(L)` will return `True` if and only if `x` is a norm from `L`. It is also able to return an element of `L` whose norm is `x`. \n\nThe data used by PARI to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.\n\n**Dependencies**: #10677\n\n**Apply**:\n1. [attachment:trac_2329_rnfisnorm5.patch] (positive_review)\n2. [attachment:2329_reviewer.patch] (positive_review)\n3. [attachment:2329_selmer.patch] (needs_review)\n\n**Assignee:** @craigcitro\n\n**CC:**  @ncalexan @mstreng @jdemeyer\n\n**Keywords:** editor_craigcitro pari\n\n**Author:** Craig Citro, Marco Streng, Francis Clarke, Jeroen Demeyer\n\n**Reviewer:** Nick Alexander, David Loeffler, Jeroen Demeyer, David Kirkby\n\n**Merged:** sage-4.7.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/2329\n\n",
    "closed_at": "2011-03-17T19:23:55Z",
    "created_at": "2008-02-27T09:03:44Z",
    "labels": [
        "component: number fields",
        "blocker",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Add interface to PARI's rnfisnorm()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2329",
    "user": "https://github.com/craigcitro"
}
```
This patch adds support to solve norm equations via PARI. 

Quick summary: given an element `x` of any number field (even `QQ`), `x.is_norm(L)` will return `True` if and only if `x` is a norm from `L`. It is also able to return an element of `L` whose norm is `x`. 

The data used by PARI to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.

**Dependencies**: #10677

**Apply**:
1. [attachment:trac_2329_rnfisnorm5.patch] (positive_review)
2. [attachment:2329_reviewer.patch] (positive_review)
3. [attachment:2329_selmer.patch] (needs_review)

**Assignee:** @craigcitro

**CC:**  @ncalexan @mstreng @jdemeyer

**Keywords:** editor_craigcitro pari

**Author:** Craig Citro, Marco Streng, Francis Clarke, Jeroen Demeyer

**Reviewer:** Nick Alexander, David Loeffler, Jeroen Demeyer, David Kirkby

**Merged:** sage-4.7.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/2329





---

archive/attachments_002052.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-2329.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2329/trac-2329.patch",
    "created_at": "2008-02-27T09:04:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/craigcitro"
}
```



---

archive/issue_comments_014902.json:
```json
{
    "body": "",
    "created_at": "2008-02-27T09:04:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14902",
    "user": "https://github.com/craigcitro"
}
```





---

archive/issue_comments_014903.json:
```json
{
    "body": "<a id='comment:1'></a>\nI have some questions.\n\nThere seems to be two things in this patch: changes to pari/gen, and access to stuff to do with norms.  Is the latter independent of the former?  I'd be a lot happier with the latter if that's true, because I'm not expert in the Pari interface.\n\nAlso, what relation does this have to \"elements_of_norm\"?  There needs to be some unification, I think.  Also, having is_norm() not always return a boolean is not good, IMO.  I say is_norm -> Boolean and element_of_norm raises an exception if is_norm is not True.\n\nI will gladly referee and have cc'ed myself.",
    "created_at": "2008-02-27T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14903",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:1'></a>
I have some questions.

There seems to be two things in this patch: changes to pari/gen, and access to stuff to do with norms.  Is the latter independent of the former?  I'd be a lot happier with the latter if that's true, because I'm not expert in the Pari interface.

Also, what relation does this have to "elements_of_norm"?  There needs to be some unification, I think.  Also, having is_norm() not always return a boolean is not good, IMO.  I say is_norm -> Boolean and element_of_norm raises an exception if is_norm is not True.

I will gladly referee and have cc'ed myself.



---

archive/issue_comments_014904.json:
```json
{
    "body": "**Changing assignee** from @williamstein to @craigcitro.",
    "created_at": "2008-02-27T21:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14904",
    "user": "https://github.com/craigcitro"
}
```

**Changing assignee** from @williamstein to @craigcitro.



---

archive/issue_comments_014905.json:
```json
{
    "body": "**Changing status** from new to assigned.",
    "created_at": "2008-02-27T21:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14905",
    "user": "https://github.com/craigcitro"
}
```

**Changing status** from new to assigned.



---

archive/issue_events_006658.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-03-12T05:19:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "milestone": "sage-2.10.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2329#event-6658"
}
```



---

archive/issue_comments_014906.json:
```json
{
    "body": "<a id='comment:4'></a>\nCraig, what's the status on this patch?  I need it as we speak :)  Are you interested in completing this or should I implement the changes I think are necessary and kick it back to you for refereeing?",
    "created_at": "2008-03-31T23:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14906",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:4'></a>
Craig, what's the status on this patch?  I need it as we speak :)  Are you interested in completing this or should I implement the changes I think are necessary and kick it back to you for refereeing?



---

archive/issue_comments_014907.json:
```json
{
    "body": "<a id='comment:5'></a>\nNick, I'd be more than happy to have you finish this guy off. I think all the code is there, it just needs to be cleaned up and unified here and there. I just haven't had time to get back to it since you posted the referee report -- but if you want to clean this up, I'll review it for you lickety-split.",
    "created_at": "2008-04-01T00:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14907",
    "user": "https://github.com/craigcitro"
}
```

<a id='comment:5'></a>
Nick, I'd be more than happy to have you finish this guy off. I think all the code is there, it just needs to be cleaned up and unified here and there. I just haven't had time to get back to it since you posted the referee report -- but if you want to clean this up, I'll review it for you lickety-split.



---

archive/issue_comments_014908.json:
```json
{
    "body": "<a id='comment:6'></a>\nAdded a second patch that addresses all of the above issues.",
    "created_at": "2008-04-05T23:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14908",
    "user": "https://github.com/craigcitro"
}
```

<a id='comment:6'></a>
Added a second patch that addresses all of the above issues.



---

archive/issue_events_006659.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "rename": {
        "from": "add interface to Pari's rnfisnorm",
        "to": "[pending another patch] add interface to Pari's rnfisnorm"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2329#event-6659"
}
```



---

archive/attachments_002053.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-2329-pt2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2329/trac-2329-pt2.patch",
    "created_at": "2008-04-06T23:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/craigcitro"
}
```



---

archive/issue_comments_014909.json:
```json
{
    "body": "<a id='comment:7'></a>\n",
    "created_at": "2008-04-06T23:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14909",
    "user": "https://github.com/craigcitro"
}
```

<a id='comment:7'></a>




---

archive/attachments_002054.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "2329-ccitro-pari-indexing-fixes-1.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2329/2329-ccitro-pari-indexing-fixes-1.patch",
    "created_at": "2008-04-15T06:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/ncalexan"
}
```



---

archive/issue_comments_014910.json:
```json
{
    "body": "<a id='comment:8'></a>\nThe last patch separates out very useful fixes to the pari/gen.pyx that should be applied now.\n\nThe remainder of the functionality requires some more substantial changes and is a work in progress.",
    "created_at": "2008-04-15T06:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14910",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:8'></a>
The last patch separates out very useful fixes to the pari/gen.pyx that should be applied now.

The remainder of the functionality requires some more substantial changes and is a work in progress.



---

archive/issue_comments_014911.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"editor_craigcitro\".",
    "created_at": "2008-06-20T04:30:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14911",
    "user": "https://github.com/craigcitro"
}
```

**Changing keywords** from "" to "editor_craigcitro".



---

archive/issue_comments_014912.json:
```json
{
    "body": "<a id='comment:10'></a>\nThis has been sitting around forever. Any movement here?\n\nCheers,\n\nMichael",
    "created_at": "2008-09-27T22:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14912",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:10'></a>
This has been sitting around forever. Any movement here?

Cheers,

Michael



---

archive/issue_comments_014913.json:
```json
{
    "body": "<a id='comment:12'></a>\nSame question as mabshoff 22 months ago...",
    "created_at": "2010-07-10T13:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14913",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:12'></a>
Same question as mabshoff 22 months ago...



---

archive/issue_comments_014914.json:
```json
{
    "body": "**Upstream:** N/A",
    "created_at": "2010-07-10T13:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14914",
    "user": "https://github.com/mstreng"
}
```

**Upstream:** N/A



---

archive/issue_comments_014915.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,5 @@\n This patch adds support to solve norm equations via Pari. \n \n-Quick summary: given an element `x` of any number field (even `QQ`), `x.is_norm(L)` will return `False` if `x` is not a norm from `L`, and if `x` is a norm from `L`, will return an element of `L` whose norm is `x`. \n+Quick summary: given an element `x` of any number field (even `QQ`), `x.is_norm(L)` will return `True` if and only if `x` is a norm from `L`. It is also able to return an element of `L` whose norm is `x`. \n \n-According to the Pari documentation, these functions depend on GRH when `L/K` is not known to be Galois, and work independent of any such hypothesis otherwise (at least, that's what I got from reading the Pari manual). \n-\n-The data used by Pari to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.\n+The data used by Pari to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.\n``````\n",
    "created_at": "2010-08-17T14:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14915",
    "user": "https://github.com/mstreng"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,5 @@
 This patch adds support to solve norm equations via Pari. 
 
-Quick summary: given an element `x` of any number field (even `QQ`), `x.is_norm(L)` will return `False` if `x` is not a norm from `L`, and if `x` is a norm from `L`, will return an element of `L` whose norm is `x`. 
+Quick summary: given an element `x` of any number field (even `QQ`), `x.is_norm(L)` will return `True` if and only if `x` is a norm from `L`. It is also able to return an element of `L` whose norm is `x`. 
 
-According to the Pari documentation, these functions depend on GRH when `L/K` is not known to be Galois, and work independent of any such hypothesis otherwise (at least, that's what I got from reading the Pari manual). 
-
-The data used by Pari to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.
+The data used by Pari to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.
``````




---

archive/issue_comments_014916.json:
```json
{
    "body": "**Author:** Craig Citro, Marco Streng",
    "created_at": "2010-08-17T14:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14916",
    "user": "https://github.com/mstreng"
}
```

**Author:** Craig Citro, Marco Streng



---

archive/issue_comments_014917.json:
```json
{
    "body": "<a id='comment:13'></a>\nAs nobody replied here any more, I attacked the ticket myself by changing Craig's patch.\n\nI've addressed Nick's concerns and replaced the documentation to reflect better what is in the Pari documentation (which weakens some claims considerably unfortunately).\n\nx.is_norm() now decides whether an element x is a norm (proven output), while x.rnfisnorm() gives exactly the output that Pari's rnfisnorm would give.\n\nThe output of is_norm is True or False. With element=True, it also gives an element of norm x (or None if it doesn't exist). The function element_of_norm is removed, to avoid confusion with elements_of_norm.",
    "created_at": "2010-08-17T14:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14917",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:13'></a>
As nobody replied here any more, I attacked the ticket myself by changing Craig's patch.

I've addressed Nick's concerns and replaced the documentation to reflect better what is in the Pari documentation (which weakens some claims considerably unfortunately).

x.is_norm() now decides whether an element x is a norm (proven output), while x.rnfisnorm() gives exactly the output that Pari's rnfisnorm would give.

The output of is_norm is True or False. With element=True, it also gives an element of norm x (or None if it doesn't exist). The function element_of_norm is removed, to avoid confusion with elements_of_norm.



---

archive/issue_comments_014918.json:
```json
{
    "body": "**Reviewer:** Nick Alexander",
    "created_at": "2010-08-17T14:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14918",
    "user": "https://github.com/mstreng"
}
```

**Reviewer:** Nick Alexander



---

archive/attachments_002055.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_2329_rnfisnorm.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2329/trac_2329_rnfisnorm.patch",
    "created_at": "2010-08-18T14:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/mstreng"
}
```



---

archive/issue_comments_014919.json:
```json
{
    "body": "apply only this latest file",
    "created_at": "2010-08-18T14:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14919",
    "user": "https://github.com/mstreng"
}
```

apply only this latest file



---

archive/issue_events_006660.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "rename": {
        "from": "[pending another patch] add interface to Pari's rnfisnorm",
        "to": "add interface to Pari's rnfisnorm"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2329#event-6660"
}
```



---

archive/issue_comments_014920.json:
```json
{
    "body": "<a id='comment:14'></a>\nReady for review, volunteer needed!\n\nThe only doctest that failed fails without the patch as well:\n\n```\nK.<a> = QuadraticField(-5)\nK.selmer_group([K.ideal(2, -a+1), K.ideal(3, a+1), K.ideal(a)], 3)\n[2, a + 1, a]\n```\nThe documentation says it should be `[2, a+1, -a]`",
    "created_at": "2010-08-18T14:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14920",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:14'></a>
Ready for review, volunteer needed!

The only doctest that failed fails without the patch as well:

```
K.<a> = QuadraticField(-5)
K.selmer_group([K.ideal(2, -a+1), K.ideal(3, a+1), K.ideal(a)], 3)
[2, a + 1, a]
```
The documentation says it should be `[2, a+1, -a]`



---

archive/issue_comments_014921.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-08-18T14:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14921",
    "user": "https://github.com/mstreng"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_014922.json:
```json
{
    "body": "<a id='comment:15'></a>\nPatch applies fine under 4.6.alpha1 but fails to compile:\n\n```\nError converting Pyrex file to C:\n------------------------------------------------------------\n...\n        return self.new_gen(thueinit(self.g, flag, prec))\n\n\n    def rnfisnorminit(self, polrel, flag=2):\n        _sig_on\n        return self.new_gen(rnfisnorminit(self.g, (<gen>polrel).g, flag))\n                                        ^\n------------------------------------------------------------\n\n/storage/masiao/sage-4.6.alpha1/devel/sage-hacking/sage/libs/pari/gen.pyx:7160:41: undeclared name not builtin: rnfisnorminit\n```\nAdding \n\n```\n    GEN     rnfisnorminit(GEN T, GEN relpol, int galois)\n```\nto `sage/libs/pari/decl.pxi` fixes that issue, but this reveals another failure:\n\n```\nsage/libs/pari/gen.c: In function \u2018__pyx_pf_4sage_4libs_4pari_3gen_3gen_bnfisnorm\u2019:\nsage/libs/pari/gen.c:24097: error: too many arguments to function \u2018bnfisnorm\u2019\n```\nThis seems to be because the \"prec\" argument to \"bnfisnorm\" has been removed, but taking out the extra argument, it *still* doesn't work:\n\n```\nsage -t  number_field_element.pyx\n**********************************************************************\nFile \"/storage/masiao/sage-4.6.alpha1/devel/sage-hacking/sage/rings/number_field/number_field_element.pyx\", line 971:\n    sage: (beta/2).is_norm(L)\nException raised:\n    Traceback (most recent call last):\n      File \"/storage/masiao/sage-4.6.alpha1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/storage/masiao/sage-4.6.alpha1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/storage/masiao/sage-4.6.alpha1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_28[5]>\", line 1, in <module>\n        (beta/Integer(2)).is_norm(L)###line 971:\n    sage: (beta/2).is_norm(L)\n      File \"number_field_element.pyx\", line 999, in sage.rings.number_field.number_field_element.NumberFieldElement.is_norm (sage/rings/number_field/number_field_element.cpp:8726)\n        return self.is_norm(L, element = True, proof = proof)[0]\n      File \"number_field_element.pyx\", line 1017, in sage.rings.number_field.number_field_element.NumberFieldElement.is_norm (sage/rings/number_field/number_field_element.cpp:9083)\n        a, b = self.rnfisnorm(L, certify = proof)\n      File \"number_field_element.pyx\", line 1108, in sage.rings.number_field.number_field_element.NumberFieldElement.rnfisnorm (sage/rings/number_field/number_field_element.cpp:9820)\n        x, q = self._pari_('y').rnfisnorm(rnf_data)\n      File \"gen.pyx\", line 9470, in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:45353)\n    PariError:  (5)\n**********************************************************************\n```\nAt that point I gave up. Sorry. That's \"needs work\".\n\nDavid",
    "created_at": "2010-09-23T09:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14922",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:15'></a>
Patch applies fine under 4.6.alpha1 but fails to compile:

```
Error converting Pyrex file to C:
------------------------------------------------------------
...
        return self.new_gen(thueinit(self.g, flag, prec))


    def rnfisnorminit(self, polrel, flag=2):
        _sig_on
        return self.new_gen(rnfisnorminit(self.g, (<gen>polrel).g, flag))
                                        ^
------------------------------------------------------------

/storage/masiao/sage-4.6.alpha1/devel/sage-hacking/sage/libs/pari/gen.pyx:7160:41: undeclared name not builtin: rnfisnorminit
```
Adding 

```
    GEN     rnfisnorminit(GEN T, GEN relpol, int galois)
```
to `sage/libs/pari/decl.pxi` fixes that issue, but this reveals another failure:

```
sage/libs/pari/gen.c: In function ‘__pyx_pf_4sage_4libs_4pari_3gen_3gen_bnfisnorm’:
sage/libs/pari/gen.c:24097: error: too many arguments to function ‘bnfisnorm’
```
This seems to be because the "prec" argument to "bnfisnorm" has been removed, but taking out the extra argument, it *still* doesn't work:

```
sage -t  number_field_element.pyx
**********************************************************************
File "/storage/masiao/sage-4.6.alpha1/devel/sage-hacking/sage/rings/number_field/number_field_element.pyx", line 971:
    sage: (beta/2).is_norm(L)
Exception raised:
    Traceback (most recent call last):
      File "/storage/masiao/sage-4.6.alpha1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/storage/masiao/sage-4.6.alpha1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/storage/masiao/sage-4.6.alpha1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_28[5]>", line 1, in <module>
        (beta/Integer(2)).is_norm(L)###line 971:
    sage: (beta/2).is_norm(L)
      File "number_field_element.pyx", line 999, in sage.rings.number_field.number_field_element.NumberFieldElement.is_norm (sage/rings/number_field/number_field_element.cpp:8726)
        return self.is_norm(L, element = True, proof = proof)[0]
      File "number_field_element.pyx", line 1017, in sage.rings.number_field.number_field_element.NumberFieldElement.is_norm (sage/rings/number_field/number_field_element.cpp:9083)
        a, b = self.rnfisnorm(L, certify = proof)
      File "number_field_element.pyx", line 1108, in sage.rings.number_field.number_field_element.NumberFieldElement.rnfisnorm (sage/rings/number_field/number_field_element.cpp:9820)
        x, q = self._pari_('y').rnfisnorm(rnf_data)
      File "gen.pyx", line 9470, in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:45353)
    PariError:  (5)
**********************************************************************
```
At that point I gave up. Sorry. That's "needs work".

David



---

archive/issue_comments_014923.json:
```json
{
    "body": "**Work_Issues:** compilation problems",
    "created_at": "2010-09-23T09:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14923",
    "user": "https://github.com/loefflerd"
}
```

**Work_Issues:** compilation problems



---

archive/issue_comments_014924.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2010-09-23T09:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14924",
    "user": "https://github.com/loefflerd"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_014925.json:
```json
{
    "body": "<a id='comment:16'></a>\nIf anyone wants to fix this, go ahead. It worked just fine on my 4.5.something, so I guess a solution can be found by looking at the differences between the pari interfaces of 4.5 and 4.6.",
    "created_at": "2010-11-03T10:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14925",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:16'></a>
If anyone wants to fix this, go ahead. It worked just fine on my 4.5.something, so I guess a solution can be found by looking at the differences between the pari interfaces of 4.5 and 4.6.



---

archive/issue_comments_014926.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [davidloeffler](#comment%3A15):\n\n> ..., it *still* doesn't work:\n\n\n```\n sage -t  number_field_element.pyx \n ********************************************************************** \n File \"/storage/masiao/sage-4.6.alpha1/devel/sage-hacking/sage/rings/number_field/number_field_element.pyx\", line 971:\n     sage: (beta/2).is_norm(L)\n Exception raised:\n     Traceback (most recent call last):\n ... \n File \"gen.pyx\", line 9470, in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:45353) \n PariError:  (5) \n ********************************************************************** \n```\n> At that point I gave up. Sorry. That's \"needs work\".\n\n\nLooks like a Pari bug.  This is what the doctest asks Pari to do (with the equivalent of\u00a0beta.is_norm(L)\u00a0first):\n\n```\ntrousseau-bash% sage-4.6/sage -gp\n                   GP/PARI CALCULATOR Version 2.4.3 (development svn-12577:12605)\n                    i386 running darwin (x86-64/GMP-4.2.1 kernel) 64-bit version\n...\nparisize = 8000000, primelimit = 500509\n? bnf = bnfinit(y^3 + 5);\n? p = x^2 + x + Mod(y, y^3 + 5);\n? T = rnfisnorminit(bnf, p);\n? rnfisnorm(T, Mod(y, y^3 + 5))\n%4 = [Mod(x, x^2 + x + Mod(y, y^3 + 5)), 1]\n? rnfisnorm(T, Mod(y/2, y^3 + 5))\n  ***   at top-level: rnfisnorm(T,Mod(y/2,\n  ***                 ^--------------------\n  *** rnfisnorm: zero argument in factorint.\n  ***   Break loop: type 'break' to go back to GP\nbreak> break\n```\nBut previously, it worked alright:\n\n```\ntrousseau-bash% sage-4.5.3/sage -gp\n                            GP/PARI CALCULATOR Version 2.3.5 (released)\n                    i386 running darwin (x86-64/GMP-4.2.1 kernel) 64-bit version\n...\nparisize = 8000000, primelimit = 500000\n? bnf = bnfinit(y^3 + 5);\n? p = x^2 + x + Mod(y, y^3 + 5);\n? T = rnfisnorminit(bnf, p);\n? rnfisnorm(T, Mod(y, y^3 + 5))\n%4 = [Mod(-x, x^2 + x + Mod(y, y^3 + 5)), 1]\n? rnfisnorm(T, Mod(y/2, y^3 + 5))\n%5 = [Mod(Mod(-1/2, y^3 + 5)*x, x^2 + x + Mod(y, y^3 + 5)), 2]\n? \n```\nNote also that the two versions give a different result at %4.",
    "created_at": "2010-11-04T08:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14926",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:17'></a>
Replying to [davidloeffler](#comment%3A15):

> ..., it *still* doesn't work:


```
 sage -t  number_field_element.pyx 
 ********************************************************************** 
 File "/storage/masiao/sage-4.6.alpha1/devel/sage-hacking/sage/rings/number_field/number_field_element.pyx", line 971:
     sage: (beta/2).is_norm(L)
 Exception raised:
     Traceback (most recent call last):
 ... 
 File "gen.pyx", line 9470, in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:45353) 
 PariError:  (5) 
 ********************************************************************** 
```
> At that point I gave up. Sorry. That's "needs work".


Looks like a Pari bug.  This is what the doctest asks Pari to do (with the equivalent of beta.is_norm(L) first):

```
trousseau-bash% sage-4.6/sage -gp
                   GP/PARI CALCULATOR Version 2.4.3 (development svn-12577:12605)
                    i386 running darwin (x86-64/GMP-4.2.1 kernel) 64-bit version
...
parisize = 8000000, primelimit = 500509
? bnf = bnfinit(y^3 + 5);
? p = x^2 + x + Mod(y, y^3 + 5);
? T = rnfisnorminit(bnf, p);
? rnfisnorm(T, Mod(y, y^3 + 5))
%4 = [Mod(x, x^2 + x + Mod(y, y^3 + 5)), 1]
? rnfisnorm(T, Mod(y/2, y^3 + 5))
  ***   at top-level: rnfisnorm(T,Mod(y/2,
  ***                 ^--------------------
  *** rnfisnorm: zero argument in factorint.
  ***   Break loop: type 'break' to go back to GP
break> break
```
But previously, it worked alright:

```
trousseau-bash% sage-4.5.3/sage -gp
                            GP/PARI CALCULATOR Version 2.3.5 (released)
                    i386 running darwin (x86-64/GMP-4.2.1 kernel) 64-bit version
...
parisize = 8000000, primelimit = 500000
? bnf = bnfinit(y^3 + 5);
? p = x^2 + x + Mod(y, y^3 + 5);
? T = rnfisnorminit(bnf, p);
? rnfisnorm(T, Mod(y, y^3 + 5))
%4 = [Mod(-x, x^2 + x + Mod(y, y^3 + 5)), 1]
? rnfisnorm(T, Mod(y/2, y^3 + 5))
%5 = [Mod(Mod(-1/2, y^3 + 5)*x, x^2 + x + Mod(y, y^3 + 5)), 2]
? 
```
Note also that the two versions give a different result at %4.



---

archive/issue_comments_014927.json:
```json
{
    "body": "**Changing work_issues** from \"compilation problems\" to \"bug in Pari 2.3.5\".",
    "created_at": "2010-11-04T08:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14927",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

**Changing work_issues** from "compilation problems" to "bug in Pari 2.3.5".



---

archive/issue_comments_014928.json:
```json
{
    "body": "<a id='comment:18'></a>\nHi Francis,\nDid you report this bug to pari?\nMarco",
    "created_at": "2010-12-02T12:56:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14928",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:18'></a>
Hi Francis,
Did you report this bug to pari?
Marco



---

archive/issue_comments_014929.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [mstreng](#comment%3A18):\n\n> Did you report this bug to pari? Marco\n\n\nNo, I didn't. \u00a0But I have done now.",
    "created_at": "2010-12-02T13:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14929",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:19'></a>
Replying to [mstreng](#comment%3A18):

> Did you report this bug to pari? Marco


No, I didn't.  But I have done now.



---

archive/issue_comments_014930.json:
```json
{
    "body": "<a id='comment:20'></a>\nThe bug with non-integral elements in rnfisnorm was reported to pari by fwclarke, and I wrote a simple workaround for the time it takes a pari-fix to reach sage.\n\nTurns out there is another problem:\n\n```\nsage: K.<a> = NumberField(x^2 + x + 1) \nsage: Q.<X> = K[] \nsage: L.<b> = NumberField(X^3 + a) \nsage: K.pari_rnfnorm_data(L)\nPariError: incorrect type (11)\n```\n\nAgain caused by something that works fine in pari 2.3.4 and is broken in pari 2.4.3 (alpha)\n\n```\ngp > bnf = bnfinit(y^2+y+1);\ngp > polrel = Mod(1, y^2 + y + 1)*x^3 + Mod(y, y^2 + y + 1);\ngp > rnfisnorminit(bnf, polrel)\n  ***   at top-level: rnfisnorminit(bnf,po\n  ***                 ^--------------------\n  *** rnfisnorminit: incorrect type in RgX_RgXQ_eval.\n  ***   Break loop: type 'break' to go back to GP\n```\n\nIdeas anyone?",
    "created_at": "2010-12-02T15:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14930",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:20'></a>
The bug with non-integral elements in rnfisnorm was reported to pari by fwclarke, and I wrote a simple workaround for the time it takes a pari-fix to reach sage.

Turns out there is another problem:

```
sage: K.<a> = NumberField(x^2 + x + 1) 
sage: Q.<X> = K[] 
sage: L.<b> = NumberField(X^3 + a) 
sage: K.pari_rnfnorm_data(L)
PariError: incorrect type (11)
```

Again caused by something that works fine in pari 2.3.4 and is broken in pari 2.4.3 (alpha)

```
gp > bnf = bnfinit(y^2+y+1);
gp > polrel = Mod(1, y^2 + y + 1)*x^3 + Mod(y, y^2 + y + 1);
gp > rnfisnorminit(bnf, polrel)
  ***   at top-level: rnfisnorminit(bnf,po
  ***                 ^--------------------
  *** rnfisnorminit: incorrect type in RgX_RgXQ_eval.
  ***   Break loop: type 'break' to go back to GP
```

Ideas anyone?



---

archive/issue_comments_014931.json:
```json
{
    "body": "**Changing work_issues** from \"bug in Pari 2.3.5\" to \"bug in Pari 2.4.3\".",
    "created_at": "2010-12-02T15:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14931",
    "user": "https://github.com/mstreng"
}
```

**Changing work_issues** from "bug in Pari 2.3.5" to "bug in Pari 2.4.3".



---

archive/issue_comments_014932.json:
```json
{
    "body": "<a id='comment:21'></a>\nI've added a new file that seems to work after the pari upgrade, including workarounds for 2 new pari bugs. I'll do some additional testing before I make it \"needs review\" again.\n\nThe bugs have been reported to pari [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1143](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1143) and [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1144](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1144)",
    "created_at": "2010-12-02T22:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14932",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:21'></a>
I've added a new file that seems to work after the pari upgrade, including workarounds for 2 new pari bugs. I'll do some additional testing before I make it "needs review" again.

The bugs have been reported to pari [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1143](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1143) and [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1144](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1144)



---

archive/issue_comments_014933.json:
```json
{
    "body": "**Changing work_issues** from \"bug in Pari 2.4.3\" to \"testing\".",
    "created_at": "2010-12-02T22:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14933",
    "user": "https://github.com/mstreng"
}
```

**Changing work_issues** from "bug in Pari 2.4.3" to "testing".



---

archive/attachments_002056.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_2329_rnfisnorm2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2329/trac_2329_rnfisnorm2.patch",
    "created_at": "2010-12-03T15:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/mstreng"
}
```



---

archive/issue_comments_014934.json:
```json
{
    "body": "apply only this latest file (works on sage 4.6.1.alpha2)",
    "created_at": "2010-12-03T15:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14934",
    "user": "https://github.com/mstreng"
}
```

apply only this latest file (works on sage 4.6.1.alpha2)



---

archive/issue_comments_014935.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-12-03T15:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14935",
    "user": "https://github.com/mstreng"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_014936.json:
```json
{
    "body": "**Changing reviewer** from \"Nick Alexander\" to \"Nick Alexander, David Loeffler\".",
    "created_at": "2010-12-03T15:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14936",
    "user": "https://github.com/mstreng"
}
```

**Changing reviewer** from "Nick Alexander" to "Nick Alexander, David Loeffler".



---

archive/issue_comments_014937.json:
```json
{
    "body": "**Changing work_issues** from \"testing\" to \"\".",
    "created_at": "2010-12-03T15:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14937",
    "user": "https://github.com/mstreng"
}
```

**Changing work_issues** from "testing" to "".



---

archive/issue_comments_014938.json:
```json
{
    "body": "<a id='comment:22'></a>\nAll tests pass again.",
    "created_at": "2010-12-03T15:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14938",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:22'></a>
All tests pass again.



---

archive/issue_comments_014939.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n Quick summary: given an element `x` of any number field (even `QQ`), `x.is_norm(L)` will return `True` if and only if `x` is a norm from `L`. It is also able to return an element of `L` whose norm is `x`. \n \n The data used by Pari to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.\n+\n+See #10430 for some needed PARI bugfixes.\n``````\n",
    "created_at": "2010-12-04T23:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14939",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 Quick summary: given an element `x` of any number field (even `QQ`), `x.is_norm(L)` will return `True` if and only if `x` is a norm from `L`. It is also able to return an element of `L` whose norm is `x`. 
 
 The data used by Pari to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.
+
+See #10430 for some needed PARI bugfixes.
``````




---

archive/issue_comments_014940.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n The data used by Pari to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.\n \n-See #10430 for some needed PARI bugfixes.\n+See #10430 for some related PARI bugfixes (not strictly required as the patch here contains a workaround).\n``````\n",
    "created_at": "2010-12-05T11:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14940",
    "user": "https://github.com/mstreng"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 The data used by Pari to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.
 
-See #10430 for some needed PARI bugfixes.
+See #10430 for some related PARI bugfixes (not strictly required as the patch here contains a workaround).
``````




---

archive/issue_comments_014941.json:
```json
{
    "body": "<a id='comment:25'></a>\nFor the Buildbot's sake:\n\nApply trac_2329_rnfisnorm3.patch",
    "created_at": "2010-12-06T10:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14941",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:25'></a>
For the Buildbot's sake:

Apply trac_2329_rnfisnorm3.patch



---

archive/issue_comments_014942.json:
```json
{
    "body": "<a id='comment:26'></a>\nCan you justify why you use `<gen>` instead of the `t0GEN()` mechanism in `gen.pyx`?  Even if `<gen>` happens to work, using `t0GEN()` is safer because it will prevent the `GEN` from being garbage collected.",
    "created_at": "2010-12-06T13:13:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14942",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
Can you justify why you use `<gen>` instead of the `t0GEN()` mechanism in `gen.pyx`?  Even if `<gen>` happens to work, using `t0GEN()` is safer because it will prevent the `GEN` from being garbage collected.



---

archive/issue_comments_014943.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [jdemeyer](#comment%3A26)\n\nNo I can't, I didn't write that part.",
    "created_at": "2010-12-06T14:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14943",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:27'></a>
Replying to [jdemeyer](#comment%3A26)

No I can't, I didn't write that part.



---

archive/issue_comments_014944.json:
```json
{
    "body": "<a id='comment:28'></a>\nThere remain several problems for relative extensions.  In particular, the function `sage.rings.number_field.number_field_rel.NumberField_relative.is_galois_relative` cannot be relied on at present (4.6.1.alpha3):\n\n```\nsage: K.<w> = NumberField(x^2 + x + 1)\nsage: L.<a> = K.extension(x^3 - 2)\nsage: L.is_galois_relative()\nFalse\n```\nBut\n\n```\nsage: L.is_galois_absolute()\nTrue\n```\nand indeed\n\n```\nsage: len([g for g in End(L) if g(w) == w]) == L.relative_degree()\nTrue\n```\nI will post a patch for this in the next couple of days, and suggest other changes to improve the behaviour of `is_norm` with relative extensions.",
    "created_at": "2010-12-07T08:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14944",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:28'></a>
There remain several problems for relative extensions.  In particular, the function `sage.rings.number_field.number_field_rel.NumberField_relative.is_galois_relative` cannot be relied on at present (4.6.1.alpha3):

```
sage: K.<w> = NumberField(x^2 + x + 1)
sage: L.<a> = K.extension(x^3 - 2)
sage: L.is_galois_relative()
False
```
But

```
sage: L.is_galois_absolute()
True
```
and indeed

```
sage: len([g for g in End(L) if g(w) == w]) == L.relative_degree()
True
```
I will post a patch for this in the next couple of days, and suggest other changes to improve the behaviour of `is_norm` with relative extensions.



---

archive/attachments_002057.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_2329_rnfisnorm3.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2329/trac_2329_rnfisnorm3.patch",
    "created_at": "2010-12-08T13:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/mstreng"
}
```



---

archive/issue_comments_014945.json:
```json
{
    "body": "apply only this latest file (works on sage 4.6.1.alpha2)",
    "created_at": "2010-12-08T13:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14945",
    "user": "https://github.com/mstreng"
}
```

apply only this latest file (works on sage 4.6.1.alpha2)



---

archive/issue_comments_014946.json:
```json
{
    "body": "<a id='comment:29'></a>\nHere's a new file that addresses Jeroen's \"<gen>\" issue.\n\nI don't think #9390, which Francis mentions, should stop anyone from reviewing the patch here at #2329. There must be more functionality of sage that assumes is_galois_relative to be correct, this is just one more of them, and Francis says #9390 will be fixed soon anyway. No fix of #9390 will conflict with #2329.\n\nAs for \"changes to improve behaviour of is_norm\". I'm not sure what you're aiming at, but if you want, you can make these changes yourself, in this ticket or a future ticket. That would be a lot more efficient.\n\nSo it is still \"needs review\" at the moment.",
    "created_at": "2010-12-08T14:01:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14946",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:29'></a>
Here's a new file that addresses Jeroen's "<gen>" issue.

I don't think #9390, which Francis mentions, should stop anyone from reviewing the patch here at #2329. There must be more functionality of sage that assumes is_galois_relative to be correct, this is just one more of them, and Francis says #9390 will be fixed soon anyway. No fix of #9390 will conflict with #2329.

As for "changes to improve behaviour of is_norm". I'm not sure what you're aiming at, but if you want, you can make these changes yourself, in this ticket or a future ticket. That would be a lot more efficient.

So it is still "needs review" at the moment.



---

archive/issue_comments_014947.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2010-12-09T08:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14947",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_014948.json:
```json
{
    "body": "**Changing reviewer** from \"Nick Alexander, David Loeffler\" to \"Nick Alexander, David Loeffler, Jeroen Demeyer\".",
    "created_at": "2010-12-09T08:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14948",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Nick Alexander, David Loeffler" to "Nick Alexander, David Loeffler, Jeroen Demeyer".



---

archive/issue_comments_014949.json:
```json
{
    "body": "<a id='comment:30'></a>\nPlanning to make a reviewer patch, focusing on the PARI interface.",
    "created_at": "2010-12-09T08:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14949",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
Planning to make a reviewer patch, focusing on the PARI interface.



---

archive/issue_comments_014950.json:
```json
{
    "body": "<a id='comment:31'></a>\nAlso: it might be better to wait make this ticket depend on #10430 (so we don't need the workaround).",
    "created_at": "2010-12-09T08:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14950",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
Also: it might be better to wait make this ticket depend on #10430 (so we don't need the workaround).



---

archive/issue_events_006661.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-12-09T08:50:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "milestone": "sage-2.10.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2329#event-6661"
}
```



---

archive/issue_events_006662.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-12-09T08:50:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "milestone": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2329#event-6662"
}
```



---

archive/issue_comments_014951.json:
```json
{
    "body": "<a id='comment:32'></a>\nMacro, I recommend you to take a look at my new PARI spkg at #10430, you can download it from [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p1.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p1.spkg).\nCould you please check whether this fixes the issues you had?  If this works, you should remove the workarounds for these bugs.",
    "created_at": "2010-12-10T12:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14951",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>
Macro, I recommend you to take a look at my new PARI spkg at #10430, you can download it from [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p1.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p1.spkg).
Could you please check whether this fixes the issues you had?  If this works, you should remove the workarounds for these bugs.



---

archive/issue_events_006663.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "rename": {
        "from": "add interface to Pari's rnfisnorm",
        "to": "Add interface to PARI's rnfisnorm()"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2329#event-6663"
}
```



---

archive/issue_comments_014952.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n-This patch adds support to solve norm equations via Pari. \n+This patch adds support to solve norm equations via PARI. \n \n Quick summary: given an element `x` of any number field (even `QQ`), `x.is_norm(L)` will return `True` if and only if `x` is a norm from `L`. It is also able to return an element of `L` whose norm is `x`. \n \n-The data used by Pari to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.\n+The data used by PARI to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.\n \n See #10430 for some related PARI bugfixes (not strictly required as the patch here contains a workaround).\n``````\n",
    "created_at": "2010-12-10T13:00:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14952",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
-This patch adds support to solve norm equations via Pari. 
+This patch adds support to solve norm equations via PARI. 
 
 Quick summary: given an element `x` of any number field (even `QQ`), `x.is_norm(L)` will return `True` if and only if `x` is a norm from `L`. It is also able to return an element of `L` whose norm is `x`. 
 
-The data used by Pari to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.
+The data used by PARI to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.
 
 See #10430 for some related PARI bugfixes (not strictly required as the patch here contains a workaround).
``````




---

archive/issue_comments_014953.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [mstreng](#comment%3A29):\n\n> ... I don't think #9390, which Francis mentions, should stop anyone from reviewing the patch here at #2329. There must be more functionality of sage that assumes is_galois_relative to be correct, this is just one more of them, and Francis says #9390 will be fixed soon anyway.\n\n\nActually `is_galois_relative` doesn't seem to be used anywhere else.\n\nBut anyway I have now added a (very short) patch to #9390.",
    "created_at": "2010-12-10T15:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14953",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:34'></a>
Replying to [mstreng](#comment%3A29):

> ... I don't think #9390, which Francis mentions, should stop anyone from reviewing the patch here at #2329. There must be more functionality of sage that assumes is_galois_relative to be correct, this is just one more of them, and Francis says #9390 will be fixed soon anyway.


Actually `is_galois_relative` doesn't seem to be used anywhere else.

But anyway I have now added a (very short) patch to #9390.



---

archive/issue_comments_014954.json:
```json
{
    "body": "<a id='comment:36'></a>\nNew spkg at #10430: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p2.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p2.spkg)",
    "created_at": "2010-12-11T13:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14954",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>
New spkg at #10430: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p2.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p2.spkg)



---

archive/issue_comments_014955.json:
```json
{
    "body": "**Changing author** from \"Craig Citro, Marco Streng\" to \"Craig Citro, Marco Streng, Francis Clarke\".",
    "created_at": "2010-12-27T11:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14955",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

**Changing author** from "Craig Citro, Marco Streng" to "Craig Citro, Marco Streng, Francis Clarke".



---

archive/issue_comments_014956.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-12-27T11:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14956",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_014957.json:
```json
{
    "body": "<a id='comment:37'></a>\nThe patch `trac_2329_rnfisnorm4.patch` is a modified version of `trac_2329_rnfisnorm3.patch`, designed to be applied after\n\n1. #10430's http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p2.spkg;\n2. #9390's `trac_9390-3rd_replacement.patch`.\n\nThe following changes have been made:\n\n1. The workarounds to deal with the pari bugs have been removed.\n2. The doctests to `sage.rings.number_field.number_field_element.is_norm` involving non-Galois extensions have been changed.  The first such example was in fact a Galois extension (isomorphic to `CyclotomicField(9)`), which without the patch to #9390 was asserted to be Galois by `is_galois_relative`.\n3. A minor change to `pari_rnfnorm_data` in `number_field.py` (replacing `defining_polynomial` by `absolute_polynomial`) and more significant changes to `rnfisnorm` in `number_field_element.pyx` to allow this function to work with extensions L/K where K itself is a relative extension.  These are the changes I was referring to [above](#comment%3A28). Doctests have been added to illustrate this functionality.\n4. Several spaces have been removed in order to comply more closely with the style conventions given in the Developer's Guide, in particular: \"Don't use spaces around the '=' sign when used to indicate a keyword argument or a default parameter value\".\n\nThis all seems to work with 4.6.1.alpha3.",
    "created_at": "2010-12-27T11:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14957",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:37'></a>
The patch `trac_2329_rnfisnorm4.patch` is a modified version of `trac_2329_rnfisnorm3.patch`, designed to be applied after

1. #10430's http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p2.spkg;
2. #9390's `trac_9390-3rd_replacement.patch`.

The following changes have been made:

1. The workarounds to deal with the pari bugs have been removed.
2. The doctests to `sage.rings.number_field.number_field_element.is_norm` involving non-Galois extensions have been changed.  The first such example was in fact a Galois extension (isomorphic to `CyclotomicField(9)`), which without the patch to #9390 was asserted to be Galois by `is_galois_relative`.
3. A minor change to `pari_rnfnorm_data` in `number_field.py` (replacing `defining_polynomial` by `absolute_polynomial`) and more significant changes to `rnfisnorm` in `number_field_element.pyx` to allow this function to work with extensions L/K where K itself is a relative extension.  These are the changes I was referring to [above](#comment%3A28). Doctests have been added to illustrate this functionality.
4. Several spaces have been removed in order to comply more closely with the style conventions given in the Developer's Guide, in particular: "Don't use spaces around the '=' sign when used to indicate a keyword argument or a default parameter value".

This all seems to work with 4.6.1.alpha3.



---

archive/issue_comments_014958.json:
```json
{
    "body": "apply only this latest file (works on sage 4.6.1.alpha3)",
    "created_at": "2010-12-27T11:38:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14958",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

apply only this latest file (works on sage 4.6.1.alpha3)



---

archive/attachments_002058.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_2329_rnfisnorm4.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2329/trac_2329_rnfisnorm4.patch",
    "created_at": "2010-12-28T13:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```



---

archive/issue_comments_014959.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [fwclarke](#comment%3A37):\n\n> ... This all seems to work with 4.6.1.alpha3.\n\n\nAnd with 4.6.1.rc0.",
    "created_at": "2010-12-28T13:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14959",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:38'></a>
Replying to [fwclarke](#comment%3A37):

> ... This all seems to work with 4.6.1.alpha3.


And with 4.6.1.rc0.



---

archive/issue_comments_014960.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n The data used by PARI to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.\n \n-See #10430 for some related PARI bugfixes (not strictly required as the patch here contains a workaround).\n+**Dependency**: #10430\n``````\n",
    "created_at": "2011-01-23T14:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14960",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 The data used by PARI to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.
 
-See #10430 for some related PARI bugfixes (not strictly required as the patch here contains a workaround).
+**Dependency**: #10430
``````




---

archive/issue_comments_014961.json:
```json
{
    "body": "**Changing reviewer** from \"Nick Alexander, David Loeffler, Jeroen Demeyer\" to \"Nick Alexander, David Loeffler\".",
    "created_at": "2011-01-23T14:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14961",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Nick Alexander, David Loeffler, Jeroen Demeyer" to "Nick Alexander, David Loeffler".



---

archive/issue_comments_014962.json:
```json
{
    "body": "**Changing author** from \"Craig Citro, Marco Streng, Francis Clarke\" to \"Craig Citro, Marco Streng, Francis Clarke, Jeroen Demeyer\".",
    "created_at": "2011-01-23T14:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14962",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Craig Citro, Marco Streng, Francis Clarke" to "Craig Citro, Marco Streng, Francis Clarke, Jeroen Demeyer".



---

archive/issue_comments_014963.json:
```json
{
    "body": "**Changing keywords** from \"editor_craigcitro\" to \"editor_craigcitro pari\".",
    "created_at": "2011-01-23T14:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14963",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "editor_craigcitro" to "editor_craigcitro pari".



---

archive/issue_comments_014964.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2011-01-23T14:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14964",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_014965.json:
```json
{
    "body": "<a id='comment:39'></a>\nMaking some changes...",
    "created_at": "2011-01-23T14:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14965",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>
Making some changes...



---

archive/issue_comments_014966.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n The data used by PARI to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.\n \n-**Dependency**: #10430\n+**Dependencies**: #10430, #10677\n``````\n",
    "created_at": "2011-01-23T18:11:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14966",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 The data used by PARI to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.
 
-**Dependency**: #10430
+**Dependencies**: #10430, #10677
``````




---

archive/issue_comments_014967.json:
```json
{
    "body": "<a id='comment:41'></a>\nI moved the PARI part of this patch to #10677, so this patch now depends on #10677.",
    "created_at": "2011-01-23T18:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14967",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'></a>
I moved the PARI part of this patch to #10677, so this patch now depends on #10677.



---

archive/attachments_002059.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_2329_rnfisnorm5.2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2329/trac_2329_rnfisnorm5.2.patch",
    "created_at": "2011-01-23T18:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_014968.json:
```json
{
    "body": "Apply only this, rebased to sage-4.6.2.alpha1 + #10677",
    "created_at": "2011-01-23T18:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14968",
    "user": "https://github.com/jdemeyer"
}
```

Apply only this, rebased to sage-4.6.2.alpha1 + #10677



---

archive/attachments_002060.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_2329_rnfisnorm5.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2329/trac_2329_rnfisnorm5.patch",
    "created_at": "2011-01-23T18:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_014969.json:
```json
{
    "body": "Apply only this, rebased to sage-4.6.2.alpha1 + #10677",
    "created_at": "2011-01-23T18:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14969",
    "user": "https://github.com/jdemeyer"
}
```

Apply only this, rebased to sage-4.6.2.alpha1 + #10677



---

archive/issue_comments_014970.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2011-01-23T20:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14970",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_014971.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,3 +5,7 @@\n The data used by PARI to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.\n \n **Dependencies**: #10430, #10677\n+\n+**Apply**:\n+1. [attachment:trac_2329_rnfisnorm5.patch]\n+2. [attachment:2329_reviewer.patch]\n``````\n",
    "created_at": "2011-01-23T20:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14971",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,3 +5,7 @@
 The data used by PARI to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.
 
 **Dependencies**: #10430, #10677
+
+**Apply**:
+1. [attachment:trac_2329_rnfisnorm5.patch]
+2. [attachment:2329_reviewer.patch]
``````




---

archive/issue_events_006664.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-10T16:27:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "milestone": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2329#event-6664"
}
```



---

archive/issue_events_006665.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-10T16:27:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2329#event-6665"
}
```



---

archive/issue_comments_014972.json:
```json
{
    "body": "**Changing reviewer** from \"Nick Alexander, David Loeffler\" to \"Nick Alexander, David Loeffler, Jeroen Demeyer\".",
    "created_at": "2011-02-10T16:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14972",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Nick Alexander, David Loeffler" to "Nick Alexander, David Loeffler, Jeroen Demeyer".



---

archive/issue_comments_014973.json:
```json
{
    "body": "<a id='comment:44'></a>\nFor me, this ticket gets positive review.  However, somebody needs to review my reviewer patch.",
    "created_at": "2011-02-10T16:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14973",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'></a>
For me, this ticket gets positive review.  However, somebody needs to review my reviewer patch.



---

archive/issue_comments_014974.json:
```json
{
    "body": "<a id='comment:45'></a>\nThis line worries me slightly:\n\n```\n2613\t        Kbnf = self.pari_bnf(certify=certify).nf_subst(\"'y\") \n```\n\nIs that supposed to be `(\"y\")` or `(\"'y'\")` perhaps?",
    "created_at": "2011-02-10T16:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14974",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:45'></a>
This line worries me slightly:

```
2613	        Kbnf = self.pari_bnf(certify=certify).nf_subst("'y") 
```

Is that supposed to be `("y")` or `("'y'")` perhaps?



---

archive/issue_comments_014975.json:
```json
{
    "body": "Apply on top of previous patch",
    "created_at": "2011-02-11T08:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14975",
    "user": "https://github.com/jdemeyer"
}
```

Apply on top of previous patch



---

archive/attachments_002061.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "2329_reviewer.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2329/2329_reviewer.patch",
    "created_at": "2011-02-11T08:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_014976.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [davidloeffler](#comment%3A45):\n> Is that supposed to be `(\"y\")` or `(\"'y'\")` perhaps?\n\n\nNo, `'y` is correct.  I have added some comments to that code in the patch.\n\nBasically, the `'y` syntax is PARI's way of refering to a *variable* (as opposed to the *value* of a variable).  See the following `gp` session:\n\n```\ngp> y = 42\n%1 = 42\ngp> y\n%2 = 42\ngp> 'y\n%3 = y\ngp> subst(x^3, x, y)\n%4 = 74088\ngp> subst(x^3, x, 'y)\n%5 = y^3\n```",
    "created_at": "2011-02-11T08:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14976",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'></a>
Replying to [davidloeffler](#comment%3A45):
> Is that supposed to be `("y")` or `("'y'")` perhaps?


No, `'y` is correct.  I have added some comments to that code in the patch.

Basically, the `'y` syntax is PARI's way of refering to a *variable* (as opposed to the *value* of a variable).  See the following `gp` session:

```
gp> y = 42
%1 = 42
gp> y
%2 = 42
gp> 'y
%3 = y
gp> subst(x^3, x, y)
%4 = 74088
gp> subst(x^3, x, 'y)
%5 = y^3
```



---

archive/issue_comments_014977.json:
```json
{
    "body": "<a id='comment:47'></a>\nLet me also clarify that, even though I uploaded [attachment:trac_2329_rnfisnorm5.patch], I only rebased the existing patch and moved parts of it to #10677.  So I believe that I am allowed to review that patch.  Only [attachment:2329_reviewer.patch] still needs review.",
    "created_at": "2011-02-11T08:31:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14977",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:47'></a>
Let me also clarify that, even though I uploaded [attachment:trac_2329_rnfisnorm5.patch], I only rebased the existing patch and moved parts of it to #10677.  So I believe that I am allowed to review that patch.  Only [attachment:2329_reviewer.patch] still needs review.



---

archive/issue_comments_014978.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-02-11T14:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14978",
    "user": "https://github.com/loefflerd"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_014979.json:
```json
{
    "body": "<a id='comment:48'></a>\nThanks for the very clear explanation. The two patches apply and compile fine, and all doctests pass.",
    "created_at": "2011-02-11T14:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14979",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:48'></a>
Thanks for the very clear explanation. The two patches apply and compile fine, and all doctests pass.



---

archive/issue_comments_014980.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2011-03-04T10:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14980",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_014981.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2011-03-04T10:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14981",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_014982.json:
```json
{
    "body": "<a id='comment:50'></a>\nI have a new patch to change the Selmer group test, since the signs can change randomly.  Needs review.",
    "created_at": "2011-03-04T10:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14982",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:50'></a>
I have a new patch to change the Selmer group test, since the signs can change randomly.  Needs review.



---

archive/issue_comments_014983.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,8 +4,9 @@\n \n The data used by PARI to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.\n \n-**Dependencies**: #10430, #10677\n+**Dependencies**: #10677\n \n **Apply**:\n 1. [attachment:trac_2329_rnfisnorm5.patch]\n 2. [attachment:2329_reviewer.patch]\n+3. [attachment:2329_selmer.patch]\n``````\n",
    "created_at": "2011-03-04T10:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14983",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,8 +4,9 @@
 
 The data used by PARI to compute whether or not an element is a norm can be computed once for each extension `L/K`. The function `pari_rnfnorm_data` computes exactly this, and hopefully in a later version its result can be passed to `is_norm` to avoid recomputing it each time in the case that `K != QQ`. If `K` is `QQ`, there is no need to save any such data -- the only data needed is that of `K.pari_bnf()`, which is used instead, and is already cached by `K`.
 
-**Dependencies**: #10430, #10677
+**Dependencies**: #10677
 
 **Apply**:
 1. [attachment:trac_2329_rnfisnorm5.patch]
 2. [attachment:2329_reviewer.patch]
+3. [attachment:2329_selmer.patch]
``````




---

archive/issue_comments_014984.json:
```json
{
    "body": "<a id='comment:52'></a>\nProbably related, I got this on x86 with 4.7.alpha2\n\n```\nsage -t -long  -force_lib devel/sage-main/sage/rings/rational.pyx\n**********************************************************************\nFile  \n\"/storage/strogdon/gentoo/usr/share/sage/devel/sage-main/sage/rings/rational.pyx\",  \nline 1222:\n     sage: (1/5).is_norm(QuadraticField(5/4, 'a'), element=True)\nExpected:\n     (True, -1/5*a + 1/2)\nGot:\n     (True, 1/5*a - 1/2)\n```\nThe log is from a friend of mine who has it as well on x86 but it doesn't show up on his amd64 hardware. I cannot test on amd64 or OSX at the present time.",
    "created_at": "2011-03-05T05:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14984",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:52'></a>
Probably related, I got this on x86 with 4.7.alpha2

```
sage -t -long  -force_lib devel/sage-main/sage/rings/rational.pyx
**********************************************************************
File  
"/storage/strogdon/gentoo/usr/share/sage/devel/sage-main/sage/rings/rational.pyx",  
line 1222:
     sage: (1/5).is_norm(QuadraticField(5/4, 'a'), element=True)
Expected:
     (True, -1/5*a + 1/2)
Got:
     (True, 1/5*a - 1/2)
```
The log is from a friend of mine who has it as well on x86 but it doesn't show up on his amd64 hardware. I cannot test on amd64 or OSX at the present time.



---

archive/issue_comments_014985.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2011-03-07T19:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14985",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_014986.json:
```json
{
    "body": "**Work_Issues:** fix on 32-bit",
    "created_at": "2011-03-07T19:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14986",
    "user": "https://github.com/jdemeyer"
}
```

**Work_Issues:** fix on 32-bit



---

archive/issue_comments_014987.json:
```json
{
    "body": "<a id='comment:53'></a>\nReplying to [fbissey](#comment%3A52):\n> Probably related, I got this on x86 with 4.7.alpha2\n\n\nGood to know this.  But keep in mind that sage-4.7.alpha2 has not been released (not even sage-4.7.alpha0).  In the future it would be better to test released versions with patches applied instead of unreleased versions.\n\nI will test this patch on a 32-bit system and see what needs to be fixed.",
    "created_at": "2011-03-07T19:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14987",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:53'></a>
Replying to [fbissey](#comment%3A52):
> Probably related, I got this on x86 with 4.7.alpha2


Good to know this.  But keep in mind that sage-4.7.alpha2 has not been released (not even sage-4.7.alpha0).  In the future it would be better to test released versions with patches applied instead of unreleased versions.

I will test this patch on a 32-bit system and see what needs to be fixed.



---

archive/attachments_002062.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "2329_selmer.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2329/2329_selmer.patch",
    "created_at": "2011-03-11T12:53:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_014988.json:
```json
{
    "body": "Additional patch",
    "created_at": "2011-03-11T12:53:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14988",
    "user": "https://github.com/jdemeyer"
}
```

Additional patch



---

archive/issue_comments_014989.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2011-03-11T12:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14989",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_014990.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,6 +7,6 @@\n **Dependencies**: #10677\n \n **Apply**:\n-1. [attachment:trac_2329_rnfisnorm5.patch]\n-2. [attachment:2329_reviewer.patch]\n-3. [attachment:2329_selmer.patch]\n+1. [attachment:trac_2329_rnfisnorm5.patch] (positive_review)\n+2. [attachment:2329_reviewer.patch] (positive_review)\n+3. [attachment:2329_selmer.patch] (needs_review)\n``````\n",
    "created_at": "2011-03-11T12:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14990",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,6 +7,6 @@
 **Dependencies**: #10677
 
 **Apply**:
-1. [attachment:trac_2329_rnfisnorm5.patch]
-2. [attachment:2329_reviewer.patch]
-3. [attachment:2329_selmer.patch]
+1. [attachment:trac_2329_rnfisnorm5.patch] (positive_review)
+2. [attachment:2329_reviewer.patch] (positive_review)
+3. [attachment:2329_selmer.patch] (needs_review)
``````




---

archive/issue_comments_014991.json:
```json
{
    "body": "**Changing work_issues** from \"fix on 32-bit\" to \"\".",
    "created_at": "2011-03-11T12:54:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14991",
    "user": "https://github.com/jdemeyer"
}
```

**Changing work_issues** from "fix on 32-bit" to "".



---

archive/issue_comments_014992.json:
```json
{
    "body": "<a id='comment:56'></a>\nI can confirm that the doctest now passes on a 32-bit build of sage-4.7.alpha1 on OpenSolaris 06/2009 (Intel Xeon chip)\n\n```\nsage -t -long -force_lib \"devel/sage/sage/rings/number_field/number_field.py\"\n\t [48.8 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 48.8 seconds\n```\n\nPrior to adding the 3 patches to sage-4.7.alpha1, I got. \n\n```\nFile \"/export/home/drkirkby/sage-4.7.alpha1/devel/sage-main/sage/rings/number_field/number_field.py\", line 3035:\n    sage: K.selmer_group([K.ideal(2, -a+1), K.ideal(3, a+1), K.ideal(a)], 3)\nExpected:\n    [2, a + 1, a]\nGot:\n    [2, a + 1, -a] \n```\n\n\nI don't know enough about the maths to understand what the patch does, so whilst it appears to fix the problems I see in sage-4.7.alpha1, I don't feel I should give this a positive review - it needs a mathematician to check it too. \n\nDave",
    "created_at": "2011-03-11T22:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14992",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:56'></a>
I can confirm that the doctest now passes on a 32-bit build of sage-4.7.alpha1 on OpenSolaris 06/2009 (Intel Xeon chip)

```
sage -t -long -force_lib "devel/sage/sage/rings/number_field/number_field.py"
	 [48.8 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 48.8 seconds
```

Prior to adding the 3 patches to sage-4.7.alpha1, I got. 

```
File "/export/home/drkirkby/sage-4.7.alpha1/devel/sage-main/sage/rings/number_field/number_field.py", line 3035:
    sage: K.selmer_group([K.ideal(2, -a+1), K.ideal(3, a+1), K.ideal(a)], 3)
Expected:
    [2, a + 1, a]
Got:
    [2, a + 1, -a] 
```


I don't know enough about the maths to understand what the patch does, so whilst it appears to fix the problems I see in sage-4.7.alpha1, I don't feel I should give this a positive review - it needs a mathematician to check it too. 

Dave



---

archive/issue_comments_014993.json:
```json
{
    "body": "**Changing reviewer** from \"Nick Alexander, David Loeffler, Jeroen Demeyer\" to \"Nick Alexander, David Loeffler, Jeroen Demeyer, David Kirkby\".",
    "created_at": "2011-03-11T22:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14993",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

**Changing reviewer** from "Nick Alexander, David Loeffler, Jeroen Demeyer" to "Nick Alexander, David Loeffler, Jeroen Demeyer, David Kirkby".



---

archive/issue_comments_014994.json:
```json
{
    "body": "<a id='comment:57'></a>\nDavid, could you please test both *with* and *without* `-long`.",
    "created_at": "2011-03-12T09:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14994",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:57'></a>
David, could you please test both *with* and *without* `-long`.



---

archive/issue_comments_014995.json:
```json
{
    "body": "<a id='comment:58'></a>\nReplying to [jdemeyer](#comment%3A57):\n> David, could you please test both *with* and *without* `-long`.\n\nWith the patch applied, it is taking about 22 seconds *without* -long, and 46 seconds *with* -long. \n\nIf the patch is not applied, it fails *with* or *without* -long.",
    "created_at": "2011-03-14T06:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14995",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:58'></a>
Replying to [jdemeyer](#comment%3A57):
> David, could you please test both *with* and *without* `-long`.

With the patch applied, it is taking about 22 seconds *without* -long, and 46 seconds *with* -long. 

If the patch is not applied, it fails *with* or *without* -long.



---

archive/issue_comments_014996.json:
```json
{
    "body": "<a id='comment:59'></a>\n> it needs a mathematician to check it too. \n\n\nLooks OK to me.",
    "created_at": "2011-03-14T14:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14996",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:59'></a>
> it needs a mathematician to check it too. 


Looks OK to me.



---

archive/issue_comments_014997.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-03-14T14:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14997",
    "user": "https://github.com/loefflerd"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_006666.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-17T19:23:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2329#event-6666"
}
```



---

archive/issue_comments_014998.json:
```json
{
    "body": "**Merged:** sage-4.7.alpha2",
    "created_at": "2011-03-17T19:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2329#issuecomment-14998",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.alpha2
