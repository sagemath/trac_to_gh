# Issue 2876: [witch patch] sage/server/notebook/twist.py doctest fails when dsage certificates are not present

archive/issues_002876.json:
```json
{
    "assignees": [],
    "body": "Since it's trying to use https, the notebook object will try to generate a self signed certificate when one is not present already. This doesn't work with doctesting since we can't expect user interaction. The fix switches the notebook server to use http instead. It looks like robert did a good job of disabling creating accounts so I don't see any new security holes created by this. \n\nAssignee: **@sagetrac-boothby**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/2876_\n\n",
    "closed_at": "2008-04-12T00:11:36Z",
    "created_at": "2008-04-11T04:52:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20notebook",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "[witch patch] sage/server/notebook/twist.py doctest fails when dsage certificates are not present",
    "type": "issue",
    "updated_at": "2008-04-12T00:11:36Z",
    "url": "https://github.com/sagemath/sage/issues/2876",
    "user": "https://github.com/yqiang"
}
```
Since it's trying to use https, the notebook object will try to generate a self signed certificate when one is not present already. This doesn't work with doctesting since we can't expect user interaction. The fix switches the notebook server to use http instead. It looks like robert did a good job of disabling creating accounts so I don't see any new security holes created by this. 

Assignee: **@sagetrac-boothby**

_Issue created by migration from https://trac.sagemath.org/ticket/2876_





---

archive/issue_events_026887.json:
```json
{
    "actor": "https://github.com/yqiang",
    "created_at": "2008-04-11T04:52:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "milestone_number": null,
    "milestone_title": "sage-3.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2876#event-26887"
}
```



---

archive/issue_events_026888.json:
```json
{
    "actor": "https://github.com/yqiang",
    "created_at": "2008-04-11T04:52:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20notebook",
    "label_color": "000080",
    "label_name": "component: notebook",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2876#event-26888"
}
```



---

archive/issue_events_026889.json:
```json
{
    "actor": "https://github.com/yqiang",
    "created_at": "2008-04-11T04:52:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2876#event-26889"
}
```



---

archive/issue_events_026890.json:
```json
{
    "actor": "https://github.com/yqiang",
    "created_at": "2008-04-11T04:52:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2876#event-26890"
}
```



---

archive/issue_events_026891.json:
```json
{
    "actor": "https://github.com/yqiang",
    "created_at": "2008-04-11T04:55:11Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "title_is": "[witch patch] sage/server/notebook/twist.py doctest fails when dsage certificates are not present",
    "title_was": "sage/server/notebook/twist.py doctest fails when dsage certificates are not present",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2876#event-26891"
}
```



---

archive/issue_events_026892.json:
```json
{
    "actor": "https://github.com/yqiang",
    "created_at": "2008-04-11T04:55:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2876#event-26892"
}
```



---

archive/issue_comments_015725.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nCwitty pointed out that if you use the secure=False option, one gets logged on automatically. Does anyone know of an easy way to turn that feature off when doctesting?",
    "created_at": "2008-04-11T05:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2876#issuecomment-15725",
    "user": "https://github.com/yqiang"
}
```

<div id="comment:2" align="right">Comment 2</div>

Cwitty pointed out that if you use the secure=False option, one gets logged on automatically. Does anyone know of an easy way to turn that feature off when doctesting?



---

archive/issue_events_026893.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-04-11T23:45:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2876#event-26893"
}
```



---

archive/issue_events_026894.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-04-11T23:45:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2876#event-26894"
}
```



---

archive/issue_comments_015726.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nAttachment: **[simple_server_doctest.patch.gz](https://github.com/sagemath/sage/files/ticket2876/simple_server_doctest.patch.gz)**\n\nWorks perfectly.",
    "created_at": "2008-04-11T23:45:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2876#issuecomment-15726",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:3" align="right">Comment 3</div>

Attachment: **[simple_server_doctest.patch.gz](https://github.com/sagemath/sage/files/ticket2876/simple_server_doctest.patch.gz)**

Works perfectly.



---

archive/issue_comments_015727.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nMerged in Sage 3.0.alpha4",
    "created_at": "2008-04-12T00:11:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2876#issuecomment-15727",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:4" align="right">Comment 4</div>

Merged in Sage 3.0.alpha4



---

archive/issue_events_026895.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-04-12T00:11:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2876#event-26895"
}
```



---

archive/issue_events_026896.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-04-12T00:11:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/2876",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2876#event-26896"
}
```
