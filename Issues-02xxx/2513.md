# Issue 2513: [with patch, positive review] Weird printing issues with gcc, caused by LANG environment variable

archive/issues_002513.json:
```json
{
    "body": "So I've noticed for a little while now that I have the following strange problem: \n\n```\nsage/rings/number_field/totallyreal_data.c: In function \u00e2:\nsage/rings/number_field/totallyreal_data.c:1920: error: \u00e2 undeclared (first use in this function)\n```\n\nBut then, if you comment out the fix for trac ticket #276 (which sets the environment variable `LANG`), that same error becomes:\n\n```\nsage/rings/number_field/totallyreal_data.c: In function '__pyx_f_4sage_5rings_12number_field_16totallyreal_data_lagrange_degree_3_c':\nsage/rings/number_field/totallyreal_data.c:1920: error: 'intp' undeclared (first use in this function)\n```\n\nObviously we'd prefer the second. What I think we should do is move setting the `LANG` environment variable somewhere closer in the build & run process to where Maxima gets initialized. I haven't had time to sit down and look at this at all -- I'm assigning it to myself, but if someone else wants to jump in and fix it before me, I definitely won't mind.\n\nI'm also adding robertwb to the cc, because I think I recall him saying he ran into this, too, and he's (1) probably happy to have a workaround, and (2) likely to come up with a fix himself, saving me work. :)\n\nAssignee: @craigcitro\n\nCC:  @robertwb cwitty\n\nResolution: fixed\n\nAuthor: Craig Citro\n\nReviewer: William Stein\n\nMerged: 4.0.2.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/2513\n\n",
    "closed_at": "2009-06-14T22:12:56Z",
    "created_at": "2008-03-13T23:22:50Z",
    "labels": [
        "component: misc",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.0.2",
    "title": "[with patch, positive review] Weird printing issues with gcc, caused by LANG environment variable",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2513",
    "user": "https://github.com/craigcitro"
}
```
So I've noticed for a little while now that I have the following strange problem: 

```
sage/rings/number_field/totallyreal_data.c: In function â:
sage/rings/number_field/totallyreal_data.c:1920: error: â undeclared (first use in this function)
```

But then, if you comment out the fix for trac ticket #276 (which sets the environment variable `LANG`), that same error becomes:

```
sage/rings/number_field/totallyreal_data.c: In function '__pyx_f_4sage_5rings_12number_field_16totallyreal_data_lagrange_degree_3_c':
sage/rings/number_field/totallyreal_data.c:1920: error: 'intp' undeclared (first use in this function)
```

Obviously we'd prefer the second. What I think we should do is move setting the `LANG` environment variable somewhere closer in the build & run process to where Maxima gets initialized. I haven't had time to sit down and look at this at all -- I'm assigning it to myself, but if someone else wants to jump in and fix it before me, I definitely won't mind.

I'm also adding robertwb to the cc, because I think I recall him saying he ran into this, too, and he's (1) probably happy to have a workaround, and (2) likely to come up with a fix himself, saving me work. :)

Assignee: @craigcitro

CC:  @robertwb cwitty

Resolution: fixed

Author: Craig Citro

Reviewer: William Stein

Merged: 4.0.2.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/2513





---

archive/issue_comments_018350.json:
```json
{
    "body": "<a id='comment:1'></a>\nTypo in the title.",
    "created_at": "2008-03-13T23:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2513#issuecomment-18350",
    "user": "https://github.com/craigcitro"
}
```

<a id='comment:1'></a>
Typo in the title.



---

archive/issue_comments_018351.json:
```json
{
    "body": "<a id='comment:2'></a>\nSo I just happened to glance back at this ticket tonight because I hit this same bug; looking at #276, that was a fix for `clisp` -- which is now **gone**! So I'm attaching a patch that just un-does the work of the patch at #276, which will fix this weird printing issue.",
    "created_at": "2009-06-14T09:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2513#issuecomment-18351",
    "user": "https://github.com/craigcitro"
}
```

<a id='comment:2'></a>
So I just happened to glance back at this ticket tonight because I hit this same bug; looking at #276, that was a fix for `clisp` -- which is now **gone**! So I'm attaching a patch that just un-does the work of the patch at #276, which will fix this weird printing issue.



---

archive/issue_comments_018352.json:
```json
{
    "body": "Attachment [trac-2513.patch](tarball://root/attachments/some-uuid/ticket2513/trac-2513.patch) by @craigcitro created at 2009-06-14 09:02:59",
    "created_at": "2009-06-14T09:02:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2513#issuecomment-18352",
    "user": "https://github.com/craigcitro"
}
```

Attachment [trac-2513.patch](tarball://root/attachments/some-uuid/ticket2513/trac-2513.patch) by @craigcitro created at 2009-06-14 09:02:59



---

archive/issue_comments_018353.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-06-14T22:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2513#issuecomment-18353",
    "user": "https://github.com/ncalexan"
}
```

Resolution: fixed



---

archive/issue_comments_018354.json:
```json
{
    "body": "Changing reviewer from \"\" to \"William Stein\"",
    "created_at": "2009-06-14T22:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2513#issuecomment-18354",
    "user": "https://github.com/ncalexan"
}
```

Changing reviewer from "" to "William Stein"



---

archive/issue_comments_018355.json:
```json
{
    "body": "Changing merged from \"\" to \"4.0.2.alpha0\"",
    "created_at": "2009-06-14T22:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2513#issuecomment-18355",
    "user": "https://github.com/ncalexan"
}
```

Changing merged from "" to "4.0.2.alpha0"



---

archive/issue_comments_018356.json:
```json
{
    "body": "Changing author from \"\" to \"Craig Citro\"",
    "created_at": "2009-06-14T22:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2513#issuecomment-18356",
    "user": "https://github.com/ncalexan"
}
```

Changing author from "" to "Craig Citro"



---

archive/issue_events_005903.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2009-06-14T22:12:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2513",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2513#event-5903"
}
```
