# Issue 2835: primes_of_degree_one iterator for NumberField_generic

archive/issues_002835.json:
```json
{
    "assignees": [],
    "body": "It would be useful, for multimodular algorithms (and more!) to be able to find degree one primes in a number field.\n\nFor posterity, the following IRC transcript, copied from #903, is relevant:\n\n```\nncalexan-827: wstein-1606: is there a good way to find degree 1 primes in a number field.\nncalexan-827: ?\nwstein-1606: theoretically or in sage right now?\nncalexan-827: wstein-1606: right now, but also in theory.\nwstein-1606: for all but finitely many primes you factor the defining poly of the field and see if it splits completely.\ndmharvey left the chat room.\nwstein-1606: you can do that more quickly by taking the gcd mod p with x^p - x\nncalexan-827: Right.\nwstein-1606: or something like that.\nwstein-1606: I bet you get the idea.\nncalexan-827: Doesn't this only work if your ring of integers is generated by a single element?\nwstein-1606: nick -- that's why I said \"all but finitely many\".\nwstein-1606: For all but a couple primes the ring of integers is monogenic.\nwstein-1606: just avoid primes dividing the discriminant.\nwstein-1606: for those do the usual factorization algorithm.\nncalexan-827: wstein-1606: sure.  It sounds like a degree_one_primes() generator would be handy for multi modular algorithms, then.\nwstein-1606: yep!\nwstein-1606: But beware -- it is very very very hard to find any degree one primes if the field isn't cyclotomic.\nwstein-1606: For a galois S_n extension of degree n, only 1/n! of the primes split completely (by cebo.)\nncalexan-827: Hmm.  So it's not even worth it?\nwstein-1606: Well it's very worth it in the cyclotomic case.\nwstein-1606: more generally, in the abelian case.\nwstein-1606: E.g., for quadratic fields.\nwstein-1606: and even 1/n! isn't bad if n is small, which it often is.\n```\n\nAssignee: **@williamstein**\n\nCC:  @ncalexan\n\nKeywords: **degree one prime number field norm**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/2835_\n\n",
    "closed_at": "2008-04-09T00:55:46Z",
    "created_at": "2008-04-06T22:38:44Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "primes_of_degree_one iterator for NumberField_generic",
    "type": "issue",
    "updated_at": "2008-04-09T00:55:46Z",
    "url": "https://github.com/sagemath/sage/issues/2835",
    "user": "https://github.com/ncalexan"
}
```
It would be useful, for multimodular algorithms (and more!) to be able to find degree one primes in a number field.

For posterity, the following IRC transcript, copied from #903, is relevant:

```
ncalexan-827: wstein-1606: is there a good way to find degree 1 primes in a number field.
ncalexan-827: ?
wstein-1606: theoretically or in sage right now?
ncalexan-827: wstein-1606: right now, but also in theory.
wstein-1606: for all but finitely many primes you factor the defining poly of the field and see if it splits completely.
dmharvey left the chat room.
wstein-1606: you can do that more quickly by taking the gcd mod p with x^p - x
ncalexan-827: Right.
wstein-1606: or something like that.
wstein-1606: I bet you get the idea.
ncalexan-827: Doesn't this only work if your ring of integers is generated by a single element?
wstein-1606: nick -- that's why I said "all but finitely many".
wstein-1606: For all but a couple primes the ring of integers is monogenic.
wstein-1606: just avoid primes dividing the discriminant.
wstein-1606: for those do the usual factorization algorithm.
ncalexan-827: wstein-1606: sure.  It sounds like a degree_one_primes() generator would be handy for multi modular algorithms, then.
wstein-1606: yep!
wstein-1606: But beware -- it is very very very hard to find any degree one primes if the field isn't cyclotomic.
wstein-1606: For a galois S_n extension of degree n, only 1/n! of the primes split completely (by cebo.)
ncalexan-827: Hmm.  So it's not even worth it?
wstein-1606: Well it's very worth it in the cyclotomic case.
wstein-1606: more generally, in the abelian case.
wstein-1606: E.g., for quadratic fields.
wstein-1606: and even 1/n! isn't bad if n is small, which it often is.
```

Assignee: **@williamstein**

CC:  @ncalexan

Keywords: **degree one prime number field norm**

_Issue created by migration from https://trac.sagemath.org/ticket/2835_





---

archive/issue_events_026473.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2008-04-06T22:38:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2835",
    "milestone_number": null,
    "milestone_title": "sage-3.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2835#event-26473"
}
```



---

archive/issue_events_026474.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2008-04-06T22:38:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2835",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "component: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2835#event-26474"
}
```



---

archive/issue_events_026475.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2008-04-06T22:38:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2835",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2835#event-26475"
}
```



---

archive/issue_events_026476.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2008-04-06T22:38:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2835",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2835#event-26476"
}
```



---

archive/issue_events_026477.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2008-04-06T22:38:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2835",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2835#event-26477"
}
```



---

archive/issue_comments_015485.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nThe attached patch implements a simple iterator for finding primes of number fields of *small* prime norm.  It is very possible this won't work for large fields; I would appreciate feedback.  It certainly works well for my examples, which are of degree less than or equal to 40.",
    "created_at": "2008-04-06T22:40:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2835#issuecomment-15485",
    "user": "https://github.com/ncalexan"
}
```

<div id="comment:1" align="right">Comment 1</div>

The attached patch implements a simple iterator for finding primes of number fields of *small* prime norm.  It is very possible this won't work for large fields; I would appreciate feedback.  It certainly works well for my examples, which are of degree less than or equal to 40.



---

archive/issue_comments_015486.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nAttachment: **[2835-ncalexan-primes-of-degree-one-1.patch.gz](https://github.com/sagemath/sage/files/ticket2835/2835-ncalexan-primes-of-degree-one-1.patch.gz)**\n\nIt's an interesting idea to do it this way.  When I had to do something similar I just looped over primes p and computed x^p mod (p,f(x)).  But I wanted p for which f split completely, which is a lot stronger than what you need.\n\nAs this is a function which will not be used all that much, I suggest putting it in and seeing how it fares in actual use.",
    "created_at": "2008-04-07T08:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2835#issuecomment-15486",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:2" align="right">Comment 2</div>

Attachment: **[2835-ncalexan-primes-of-degree-one-1.patch.gz](https://github.com/sagemath/sage/files/ticket2835/2835-ncalexan-primes-of-degree-one-1.patch.gz)**

It's an interesting idea to do it this way.  When I had to do something similar I just looped over primes p and computed x^p mod (p,f(x)).  But I wanted p for which f split completely, which is a lot stronger than what you need.

As this is a function which will not be used all that much, I suggest putting it in and seeing how it fares in actual use.



---

archive/issue_events_026478.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-04-08T19:50:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2835",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2835#event-26478"
}
```



---

archive/issue_comments_015487.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nNick,\n\nI agree with John on this.  I looked at your patch and it looks good to me, but I've only played around with it a little bit.  The real test will come when somebody actually uses it in a nontrivial way -- but that is not likely to happen if it isn't in Sage.  It is extra functionality so it won't break anything that's already there.\n\nI would prefer it if you changed the last line of next() to\n\n```\nreturn self._field.fractional_ideal([p, x - n])\n``` \n\nfor the reasons that are stated in \nhttp://groups.google.com/group/sage-devel/t/b01d58d8c3565c2\n(but this is something that we can also change later on).",
    "created_at": "2008-04-08T20:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2835#issuecomment-15487",
    "user": "https://github.com/aghitza"
}
```

<div id="comment:4" align="right">Comment 4</div>

Nick,

I agree with John on this.  I looked at your patch and it looks good to me, but I've only played around with it a little bit.  The real test will come when somebody actually uses it in a nontrivial way -- but that is not likely to happen if it isn't in Sage.  It is extra functionality so it won't break anything that's already there.

I would prefer it if you changed the last line of next() to

```
return self._field.fractional_ideal([p, x - n])
``` 

for the reasons that are stated in 
http://groups.google.com/group/sage-devel/t/b01d58d8c3565c2
(but this is something that we can also change later on).



---

archive/issue_comments_015488.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nMerged in Sage 3.0.alpha3",
    "created_at": "2008-04-09T00:55:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2835#issuecomment-15488",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:5" align="right">Comment 5</div>

Merged in Sage 3.0.alpha3



---

archive/issue_events_026479.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-04-09T00:55:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/2835",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2835#event-26479"
}
```



---

archive/issue_events_026480.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-04-09T00:55:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/2835",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2835#event-26480"
}
```
