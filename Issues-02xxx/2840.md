# Issue 2840: [with patch, positive review, needs rebase]  notebook -- remove ALL unused javascript from js.py and DOCUMENT every single function

archive/issues_002840.json:
```json
{
    "body": "\n\nAssignee: boothby\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/2840\n\n",
    "closed_at": "2008-04-07T19:47:15Z",
    "created_at": "2008-04-07T07:46:41Z",
    "labels": [
        "component: notebook",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.0",
    "title": "[with patch, positive review, needs rebase]  notebook -- remove ALL unused javascript from js.py and DOCUMENT every single function",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2840",
    "user": "https://github.com/williamstein"
}
```


Assignee: boothby

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/2840





---

archive/issue_comments_019439.json:
```json
{
    "body": "Attachment [sage-2840.patch](tarball://root/attachments/some-uuid/ticket2840/sage-2840.patch) by @williamstein created at 2008-04-07 08:01:10",
    "created_at": "2008-04-07T08:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2840#issuecomment-19439",
    "user": "https://github.com/williamstein"
}
```

Attachment [sage-2840.patch](tarball://root/attachments/some-uuid/ticket2840/sage-2840.patch) by @williamstein created at 2008-04-07 08:01:10



---

archive/issue_comments_019440.json:
```json
{
    "body": "<a id='comment:1'></a>This patch depends on #2825, which depends on others.  \n\nIf you just want to get something that works asap, apply this bundle *against sage-3.0-alpha*:\n\nhttp://sage.math.washington.edu/home/was/patches/sage-2840.hg",
    "created_at": "2008-04-07T08:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2840#issuecomment-19440",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>This patch depends on #2825, which depends on others.  

If you just want to get something that works asap, apply this bundle *against sage-3.0-alpha*:

http://sage.math.washington.edu/home/was/patches/sage-2840.hg



---

archive/issue_comments_019441.json:
```json
{
    "body": "<a id='comment:2'></a>Bugs introduced by this patch:  \n* If you tab complete and their is a unique completion, the cursor doesn't get put at the right position.  \n* The left margin of the active an inactive and evaluated cells seems different, which is annoying an inconsistent.",
    "created_at": "2008-04-07T08:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2840#issuecomment-19441",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'></a>Bugs introduced by this patch:  
* If you tab complete and their is a unique completion, the cursor doesn't get put at the right position.  
* The left margin of the active an inactive and evaluated cells seems different, which is annoying an inconsistent.



---

archive/issue_comments_019442.json:
```json
{
    "body": "<a id='comment:3'></a>Bugs introduced by this patch:\n* Type `function_name([tab]` and the cursor jumps to the next cell instead of staying put.",
    "created_at": "2008-04-07T08:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2840#issuecomment-19442",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:3'></a>Bugs introduced by this patch:
* Type `function_name([tab]` and the cursor jumps to the next cell instead of staying put.



---

archive/issue_comments_019443.json:
```json
{
    "body": "<a id='comment:5'></a>I'm giving this a positive review, though I haven't tested it yet.  My justification for this is that  (1) we need this patch badly, and (2) if any bugs are introduced by this, they will be easy to fix.",
    "created_at": "2008-04-07T17:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2840#issuecomment-19443",
    "user": "https://trac.sagemath.org/admin/accounts/users/boothby"
}
```

<a id='comment:5'></a>I'm giving this a positive review, though I haven't tested it yet.  My justification for this is that  (1) we need this patch badly, and (2) if any bugs are introduced by this, they will be easy to fix.



---

archive/issue_comments_019444.json:
```json
{
    "body": "<a id='comment:6'></a>Another bug introduced by this patch:\n* Sometimes the line count in js.py overestimates.  This is clearly documented, but it is more annoying now given that the code depends 100% on it.  We should fix this to always give exactly the right answer.",
    "created_at": "2008-04-07T17:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2840#issuecomment-19444",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:6'></a>Another bug introduced by this patch:
* Sometimes the line count in js.py overestimates.  This is clearly documented, but it is more annoying now given that the code depends 100% on it.  We should fix this to always give exactly the right answer.



---

archive/issue_comments_019445.json:
```json
{
    "body": "<a id='comment:7'></a>Ok, applying against my tree has some rejects:\n\n```\nmabshoff@sage:/scratch/mabshoff/release-cycle/sage-3.0.alpha3/devel/sage$ patch -p1 --dry-run < trac_2840.patch\npatching file sage/server/notebook/cell.py\npatching file sage/server/notebook/config.py\npatching file sage/server/notebook/css.py\npatching file sage/server/notebook/js.py\nHunk #6 FAILED at 294.\nHunk #22 FAILED at 1895.\nHunk #23 succeeded at 1917 (offset -1 lines).\nHunk #24 succeeded at 1957 (offset -1 lines).\nHunk #25 succeeded at 2001 (offset -1 lines).\nHunk #26 succeeded at 2039 (offset -1 lines).\nHunk #27 succeeded at 2099 (offset -1 lines).\nHunk #28 succeeded at 2308 (offset -1 lines).\nHunk #29 succeeded at 2328 (offset -1 lines).\nHunk #30 succeeded at 2348 (offset -1 lines).\nHunk #31 succeeded at 2420 (offset -1 lines).\nHunk #32 succeeded at 2448 (offset -1 lines).\nHunk #33 succeeded at 2496 (offset -1 lines).\nHunk #34 succeeded at 2524 (offset -1 lines).\nHunk #35 succeeded at 2571 (offset -1 lines).\nHunk #36 succeeded at 2585 (offset -1 lines).\nHunk #37 succeeded at 2666 (offset -1 lines).\nHunk #38 succeeded at 2693 (offset -1 lines).\nHunk #39 succeeded at 2709 (offset -1 lines).\nHunk #40 succeeded at 2724 (offset -1 lines).\nHunk #41 succeeded at 2738 (offset -1 lines).\nHunk #42 succeeded at 2753 (offset -1 lines).\nHunk #43 succeeded at 2989 (offset -1 lines).\nHunk #44 succeeded at 3006 (offset -1 lines).\nHunk #45 succeeded at 3042 (offset -1 lines).\nHunk #46 succeeded at 3089 (offset -1 lines).\nHunk #47 succeeded at 3110 (offset -1 lines).\nHunk #48 succeeded at 3139 (offset -1 lines).\nHunk #49 succeeded at 3156 (offset -1 lines).\nHunk #50 succeeded at 3174 (offset -1 lines).\nHunk #51 succeeded at 3224 (offset -1 lines).\nHunk #52 succeeded at 3297 (offset -1 lines).\nHunk #53 succeeded at 3327 (offset -1 lines).\nHunk #54 succeeded at 3370 (offset -1 lines).\nHunk #55 succeeded at 3498 (offset -1 lines).\nHunk #56 succeeded at 3529 (offset -1 lines).\nHunk #57 succeeded at 3619 (offset -1 lines).\nHunk #58 succeeded at 3635 (offset -1 lines).\n2 out of 58 hunks FAILED -- saving rejects to file sage/server/notebook/js.py.rej\npatching file sage/server/notebook/keyboards.py\npatching file sage/server/notebook/notebook.py\nHunk #1 succeeded at 1060 (offset 68 lines).\nHunk #2 succeeded at 1186 (offset 68 lines).\nHunk #3 succeeded at 1807 (offset 68 lines).\nHunk #4 succeeded at 2000 (offset 68 lines).\nHunk #5 succeeded at 2042 (offset 68 lines).\npatching file sage/server/notebook/tutorial.py\npatching file sage/server/notebook/twist.py\npatching file sage/server/notebook/worksheet.py\nHunk #2 succeeded at 875 (offset -1 lines).\nHunk #3 succeeded at 941 (offset -1 lines).\n```\nI did apply #2826, so that is either the problem or I am missing some commits. I would prefer to get a rebased patch and not unbundle a 400 kb bundle ;)\n\nCheers,\n\nMichael",
    "created_at": "2008-04-07T18:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2840#issuecomment-19445",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:7'></a>Ok, applying against my tree has some rejects:

```
mabshoff@sage:/scratch/mabshoff/release-cycle/sage-3.0.alpha3/devel/sage$ patch -p1 --dry-run < trac_2840.patch
patching file sage/server/notebook/cell.py
patching file sage/server/notebook/config.py
patching file sage/server/notebook/css.py
patching file sage/server/notebook/js.py
Hunk #6 FAILED at 294.
Hunk #22 FAILED at 1895.
Hunk #23 succeeded at 1917 (offset -1 lines).
Hunk #24 succeeded at 1957 (offset -1 lines).
Hunk #25 succeeded at 2001 (offset -1 lines).
Hunk #26 succeeded at 2039 (offset -1 lines).
Hunk #27 succeeded at 2099 (offset -1 lines).
Hunk #28 succeeded at 2308 (offset -1 lines).
Hunk #29 succeeded at 2328 (offset -1 lines).
Hunk #30 succeeded at 2348 (offset -1 lines).
Hunk #31 succeeded at 2420 (offset -1 lines).
Hunk #32 succeeded at 2448 (offset -1 lines).
Hunk #33 succeeded at 2496 (offset -1 lines).
Hunk #34 succeeded at 2524 (offset -1 lines).
Hunk #35 succeeded at 2571 (offset -1 lines).
Hunk #36 succeeded at 2585 (offset -1 lines).
Hunk #37 succeeded at 2666 (offset -1 lines).
Hunk #38 succeeded at 2693 (offset -1 lines).
Hunk #39 succeeded at 2709 (offset -1 lines).
Hunk #40 succeeded at 2724 (offset -1 lines).
Hunk #41 succeeded at 2738 (offset -1 lines).
Hunk #42 succeeded at 2753 (offset -1 lines).
Hunk #43 succeeded at 2989 (offset -1 lines).
Hunk #44 succeeded at 3006 (offset -1 lines).
Hunk #45 succeeded at 3042 (offset -1 lines).
Hunk #46 succeeded at 3089 (offset -1 lines).
Hunk #47 succeeded at 3110 (offset -1 lines).
Hunk #48 succeeded at 3139 (offset -1 lines).
Hunk #49 succeeded at 3156 (offset -1 lines).
Hunk #50 succeeded at 3174 (offset -1 lines).
Hunk #51 succeeded at 3224 (offset -1 lines).
Hunk #52 succeeded at 3297 (offset -1 lines).
Hunk #53 succeeded at 3327 (offset -1 lines).
Hunk #54 succeeded at 3370 (offset -1 lines).
Hunk #55 succeeded at 3498 (offset -1 lines).
Hunk #56 succeeded at 3529 (offset -1 lines).
Hunk #57 succeeded at 3619 (offset -1 lines).
Hunk #58 succeeded at 3635 (offset -1 lines).
2 out of 58 hunks FAILED -- saving rejects to file sage/server/notebook/js.py.rej
patching file sage/server/notebook/keyboards.py
patching file sage/server/notebook/notebook.py
Hunk #1 succeeded at 1060 (offset 68 lines).
Hunk #2 succeeded at 1186 (offset 68 lines).
Hunk #3 succeeded at 1807 (offset 68 lines).
Hunk #4 succeeded at 2000 (offset 68 lines).
Hunk #5 succeeded at 2042 (offset 68 lines).
patching file sage/server/notebook/tutorial.py
patching file sage/server/notebook/twist.py
patching file sage/server/notebook/worksheet.py
Hunk #2 succeeded at 875 (offset -1 lines).
Hunk #3 succeeded at 941 (offset -1 lines).
```
I did apply #2826, so that is either the problem or I am missing some commits. I would prefer to get a rebased patch and not unbundle a 400 kb bundle ;)

Cheers,

Michael



---

archive/issue_comments_019446.json:
```json
{
    "body": "version of was' patch that I merged",
    "created_at": "2008-04-07T19:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2840#issuecomment-19446",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

version of was' patch that I merged



---

archive/issue_comments_019447.json:
```json
{
    "body": "Attachment [trac_2840-manually_merged-hunks.patch](tarball://root/attachments/some-uuid/ticket2840/trac_2840-manually_merged-hunks.patch) by mabshoff created at 2008-04-07 19:46:16\n\nPatch for the two hunks that I merged manually",
    "created_at": "2008-04-07T19:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2840#issuecomment-19447",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Attachment [trac_2840-manually_merged-hunks.patch](tarball://root/attachments/some-uuid/ticket2840/trac_2840-manually_merged-hunks.patch) by mabshoff created at 2008-04-07 19:46:16

Patch for the two hunks that I merged manually



---

archive/issue_comments_019448.json:
```json
{
    "body": "The diff between the final merged version and he one provided by was as a reference",
    "created_at": "2008-04-07T19:46:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2840#issuecomment-19448",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

The diff between the final merged version and he one provided by was as a reference



---

archive/issue_comments_019449.json:
```json
{
    "body": "<a id='comment:8'></a>Attachment [was-mabshoff_post_merge-js.py.diff](tarball://root/attachments/some-uuid/ticket2840/was-mabshoff_post_merge-js.py.diff) by mabshoff created at 2008-04-07 19:47:15\n\nMerged trac_2840-good-hunks.patch and trac_2840-manually_merged-hunks.patch in Sage 3.0.alpha3.",
    "created_at": "2008-04-07T19:47:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2840#issuecomment-19449",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:8'></a>Attachment [was-mabshoff_post_merge-js.py.diff](tarball://root/attachments/some-uuid/ticket2840/was-mabshoff_post_merge-js.py.diff) by mabshoff created at 2008-04-07 19:47:15

Merged trac_2840-good-hunks.patch and trac_2840-manually_merged-hunks.patch in Sage 3.0.alpha3.



---

archive/issue_events_006518.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-04-07T19:47:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2840#event-6518"
}
```



---

archive/issue_comments_019450.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-04-07T19:47:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2840#issuecomment-19450",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed
