# Issue 2606: command line option to kill a background notebook

archive/issues_002606.json:
```json
{
    "assignees": [],
    "body": "Since running sage -notebook now checks if another instance is already running, it would be fairly straightforward to create an option that kills that notebook process as well.\n\nThe rationale is that it is probably much easier for a user to recreate the circumstances under which the notebook was started, and hence enable sage to find the relevant PID file, than to figure out where that PID file is stored.\n\nGiven the code in sage.server.notebook.run_notebook it can be rather involved to track down where twistd.pid gets stored (and it might change in the future too), being able to get a hold of the pidfile in a general way would make startup scripts much more robust (the location of twistd.pid has already changed once)\n\nAs an example, daemon-like services such as vncserver and dhclient have \"-kill\" and \"-r\" options to kill previously started instances in a way that takes the burden from the user to figure out which PID to kill.\n\nOne should probably first address #2359\n\n\nAssignee: **boothby**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/2606_\n\n",
    "closed_at": "2020-03-29T02:12:30Z",
    "created_at": "2008-03-19T22:06:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20notebook",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "command line option to kill a background notebook",
    "type": "issue",
    "updated_at": "2020-03-29T02:12:30Z",
    "url": "https://github.com/sagemath/sage/issues/2606",
    "user": "https://github.com/nbruin"
}
```
Since running sage -notebook now checks if another instance is already running, it would be fairly straightforward to create an option that kills that notebook process as well.

The rationale is that it is probably much easier for a user to recreate the circumstances under which the notebook was started, and hence enable sage to find the relevant PID file, than to figure out where that PID file is stored.

Given the code in sage.server.notebook.run_notebook it can be rather involved to track down where twistd.pid gets stored (and it might change in the future too), being able to get a hold of the pidfile in a general way would make startup scripts much more robust (the location of twistd.pid has already changed once)

As an example, daemon-like services such as vncserver and dhclient have "-kill" and "-r" options to kill previously started instances in a way that takes the burden from the user to figure out which PID to kill.

One should probably first address #2359


Assignee: **boothby**

_Issue created by migration from https://trac.sagemath.org/ticket/2606_





---

archive/issue_events_023689.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2008-03-19T22:06:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23689"
}
```



---

archive/issue_events_023690.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2008-03-19T22:06:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20notebook",
    "label_color": "000080",
    "label_name": "component: notebook",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23690"
}
```



---

archive/issue_events_023691.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2008-03-19T22:06:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23691"
}
```



---

archive/issue_events_023692.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2008-03-19T22:06:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23692"
}
```



---

archive/issue_comments_014123.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nCan you suggest a very specific design?  E.g.,\n\n```\nsage: notebook.killall()\n... kills all running notebook servers\nsage: notebook.pids()\n... shows pids' of all running notebook servers\nsage: notebook.urls()\n... shows urls...\n```\n\nWhat do you think?",
    "created_at": "2008-03-19T22:49:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2606#issuecomment-14123",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'>Comment 1:</a>
Can you suggest a very specific design?  E.g.,

```
sage: notebook.killall()
... kills all running notebook servers
sage: notebook.pids()
... shows pids' of all running notebook servers
sage: notebook.urls()
... shows urls...
```

What do you think?



---

archive/issue_comments_014124.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,7 +6,5 @@\n \n As an example, daemon-like services such as vncserver and dhclient have \"-kill\" and \"-r\" options to kill previously started instances in a way that takes the burden from the user to figure out which PID to kill.\n \n-One should probably first address\n+One should probably first address #2359\n \n-https://github.com/sagemath/sage/issues/2359\n-\n``````\n",
    "created_at": "2011-03-14T18:58:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2606#issuecomment-14124",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,7 +6,5 @@
 
 As an example, daemon-like services such as vncserver and dhclient have "-kill" and "-r" options to kill previously started instances in a way that takes the burden from the user to figure out which PID to kill.
 
-One should probably first address
+One should probably first address #2359
 
-https://github.com/sagemath/sage/issues/2359
-
``````




---

archive/issue_events_023693.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23693"
}
```



---

archive/issue_events_023694.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23694"
}
```



---

archive/issue_events_023695.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23695"
}
```



---

archive/issue_events_023696.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23696"
}
```



---

archive/issue_events_023697.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23697"
}
```



---

archive/issue_events_023698.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23698"
}
```



---

archive/issue_events_023699.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23699"
}
```



---

archive/issue_events_023700.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23700"
}
```



---

archive/issue_events_023701.json:
```json
{
    "actor": "https://github.com/sagetrac-boothby",
    "created_at": "2020-03-29T02:12:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23701"
}
```



---

archive/issue_events_023702.json:
```json
{
    "actor": "https://github.com/sagetrac-boothby",
    "created_at": "2020-03-29T02:12:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23702"
}
```



---

archive/issue_events_023703.json:
```json
{
    "actor": "https://github.com/sagetrac-boothby",
    "created_at": "2020-03-29T02:12:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2606#event-23703"
}
```



---

archive/issue_comments_014125.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nClosing deprecated notebook tickets",
    "created_at": "2020-03-29T02:12:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2606#issuecomment-14125",
    "user": "https://github.com/sagetrac-boothby"
}
```

<a id='comment:7'>Comment 7:</a>
Closing deprecated notebook tickets
