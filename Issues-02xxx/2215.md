# Issue 2215: [with patch, needs work] if p is a permutation, matrix(p) should call p.to_matrix()

archive/issues_002215.json:
```json
{
    "body": "it seems like matrix(thing) should usually work if we can think of \"thing\" as a matrix.  In this case, we even already have a p.to_matrix() function.\n\nAssignee: @mwhansen\n\nCC:  sage-combinat\n\nKeywords: editor_mhansen\n\nReviewer: Travis Scrimshaw\n\nResolution: wontfix\n\nIssue created by migration from https://trac.sagemath.org/ticket/2215\n\n",
    "closed_at": "2018-11-08T16:14:09Z",
    "created_at": "2008-02-19T22:37:39Z",
    "labels": [
        "component: combinatorics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "[with patch, needs work] if p is a permutation, matrix(p) should call p.to_matrix()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2215",
    "user": "https://github.com/jasongrout"
}
```
it seems like matrix(thing) should usually work if we can think of "thing" as a matrix.  In this case, we even already have a p.to_matrix() function.

Assignee: @mwhansen

CC:  sage-combinat

Keywords: editor_mhansen

Reviewer: Travis Scrimshaw

Resolution: wontfix

Issue created by migration from https://trac.sagemath.org/ticket/2215





---

archive/issue_events_007648.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-02-19T22:39:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "milestone": "sage-2.10.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7648"
}
```



---

archive/issue_comments_015303.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe fix to this would be to add a _matrix_ method to Permutation_class ( which can call .to_matrix() )",
    "created_at": "2008-02-20T03:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15303",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:2'></a>
The fix to this would be to add a _matrix_ method to Permutation_class ( which can call .to_matrix() )



---

archive/issue_comments_015304.json:
```json
{
    "body": "Changing status from new to assigned.",
    "created_at": "2008-02-20T03:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15304",
    "user": "https://github.com/mwhansen"
}
```

Changing status from new to assigned.



---

archive/issue_comments_015305.json:
```json
{
    "body": "Changing assignee from @williamstein to @mwhansen.",
    "created_at": "2008-02-20T03:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15305",
    "user": "https://github.com/mwhansen"
}
```

Changing assignee from @williamstein to @mwhansen.



---

archive/issue_events_007649.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "rename": {
        "from": "if p is a permutation, matrix(p) should call p.to_matrix()",
        "to": "[with patch, needs review] if p is a permutation, matrix(p) should call p.to_matrix()"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7649"
}
```



---

archive/issue_comments_015306.json:
```json
{
    "body": "<a id='comment:4'></a>\nAttachment [2215.patch](tarball://root/attachments/some-uuid/ticket2215/2215.patch) by @wdjoyner created at 2008-02-20 18:17:02\n\nI created an hg bundle which modifies this patch. It makes it such that \nperm -> matrix(perm) is consistent with the corresponding map on perm gp\nelements and respects multiplication. It passes sage -t but sage -testall failed\nin *many* places, though none which seemed related to this patch.",
    "created_at": "2008-02-20T18:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15306",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:4'></a>
Attachment [2215.patch](tarball://root/attachments/some-uuid/ticket2215/2215.patch) by @wdjoyner created at 2008-02-20 18:17:02

I created an hg bundle which modifies this patch. It makes it such that 
perm -> matrix(perm) is consistent with the corresponding map on perm gp
elements and respects multiplication. It passes sage -t but sage -testall failed
in *many* places, though none which seemed related to this patch.



---

archive/issue_comments_015307.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe bundle was too large to attach (if that makes any sense). It is posted to\nhttp://sage.math.washington.edu/home/wdj/patches/perms-mat_20-02-2008.hg",
    "created_at": "2008-02-20T18:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15307",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:5'></a>
The bundle was too large to attach (if that makes any sense). It is posted to
http://sage.math.washington.edu/home/wdj/patches/perms-mat_20-02-2008.hg



---

archive/issue_comments_015308.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe bundle is against the *2.10.1 release*, ergo reverts all patches and bundle from the roughly 120 tickets closed so far against 2.10.2. Please export the commits you made after applying Mike Hansen's 2215.patch and attach those to the tickets.\n\nTo reiterate a message which I should be pushing on sage-devel: bundles are evil, especially for single commits.\n\nCheers,\n\nMichael",
    "created_at": "2008-02-20T18:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15308",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:6'></a>
The bundle is against the *2.10.1 release*, ergo reverts all patches and bundle from the roughly 120 tickets closed so far against 2.10.2. Please export the commits you made after applying Mike Hansen's 2215.patch and attach those to the tickets.

To reiterate a message which I should be pushing on sage-devel: bundles are evil, especially for single commits.

Cheers,

Michael



---

archive/issue_comments_015309.json:
```json
{
    "body": "<a id='comment:7'></a>\n(a) I have no idea how I used 2.10.1 instead of 2.10.2.a1.\n(b) I am missing something. Use patches not bundles? I don't even know how to make\na patch. I am used to following http://www.sagemath.org/doc/html/prog/node72.html\nIs there a corresponding list of commands for patches?",
    "created_at": "2008-02-20T18:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15309",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:7'></a>
(a) I have no idea how I used 2.10.1 instead of 2.10.2.a1.
(b) I am missing something. Use patches not bundles? I don't even know how to make
a patch. I am used to following http://www.sagemath.org/doc/html/prog/node72.html
Is there a corresponding list of commands for patches?



---

archive/issue_comments_015310.json:
```json
{
    "body": "<a id='comment:8'></a>\nTo quote from that page:\n\n```\nYou can make all changes in the repository you're working in as a bundle by\ntyping hg_sage.bundle('mybundle') (this creates an hg bundle mybundle.hg). \nAlternatively, you can export any particular changeset as plain text \npatches by typing hg_sage.export(...); note that each individual changeset \nis recorded as a different patch. hg_sage.export(...) needs at least the \nargument revs - integer or list of integers (revision numbers); use the \nhg_sage.log() function to see them. An optional second argument is a \n'patch_filename', default is '(changeset_revision_number).patch'.\n```\nThe command `hg_sage.bundle('mybundle')` creates a bundle against the current main repo, which is at 2.10.1. Use `hg_sage.export(...)` with the right commit numbers, which `hg_sage.log()` does tell you.\n\nCheers,\n\nMichael",
    "created_at": "2008-02-20T18:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15310",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:8'></a>
To quote from that page:

```
You can make all changes in the repository you're working in as a bundle by
typing hg_sage.bundle('mybundle') (this creates an hg bundle mybundle.hg). 
Alternatively, you can export any particular changeset as plain text 
patches by typing hg_sage.export(...); note that each individual changeset 
is recorded as a different patch. hg_sage.export(...) needs at least the 
argument revs - integer or list of integers (revision numbers); use the 
hg_sage.log() function to see them. An optional second argument is a 
'patch_filename', default is '(changeset_revision_number).patch'.
```
The command `hg_sage.bundle('mybundle')` creates a bundle against the current main repo, which is at 2.10.1. Use `hg_sage.export(...)` with the right commit numbers, which `hg_sage.log()` does tell you.

Cheers,

Michael



---

archive/issue_comments_015311.json:
```json
{
    "body": "Attachment [8631.patch](tarball://root/attachments/some-uuid/ticket2215/8631.patch) by @wdjoyner created at 2008-02-20 19:04:32",
    "created_at": "2008-02-20T19:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15311",
    "user": "https://github.com/wdjoyner"
}
```

Attachment [8631.patch](tarball://root/attachments/some-uuid/ticket2215/8631.patch) by @wdjoyner created at 2008-02-20 19:04:32



---

archive/issue_comments_015312.json:
```json
{
    "body": "<a id='comment:9'></a>\nThanks! Please see attached.",
    "created_at": "2008-02-20T19:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15312",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:9'></a>
Thanks! Please see attached.



---

archive/issue_comments_015313.json:
```json
{
    "body": "<a id='comment:10'></a>\nI guess you are giving Mike's patch a positive review. If so please change the summary from \"[with patch, needs review]\" to \"[with patch, with positive review]\". It also looks like I need to apply only the second patch?\n\nCheers,\n\nMichael",
    "created_at": "2008-02-20T19:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15313",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:10'></a>
I guess you are giving Mike's patch a positive review. If so please change the summary from "[with patch, needs review]" to "[with patch, with positive review]". It also looks like I need to apply only the second patch?

Cheers,

Michael



---

archive/issue_comments_015314.json:
```json
{
    "body": "<a id='comment:11'></a>\nYes, only the 2nd one.",
    "created_at": "2008-02-20T21:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15314",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:11'></a>
Yes, only the 2nd one.



---

archive/issue_events_007650.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "rename": {
        "from": "[with patch, needs review] if p is a permutation, matrix(p) should call p.to_matrix()",
        "to": "[with patch, with positive review] if p is a permutation, matrix(p) should call p.to_matrix()"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7650"
}
```



---

archive/issue_comments_015315.json:
```json
{
    "body": "<a id='comment:12'></a>\nI don't like that matrix(p) and p.to_matrix() will give out different things.  In the documentation for to_matrix(), I specifically said that matrix multiplication will only agree with the permutation  multiplication when the multiplication is not done \"English-style\".  The proper way to change things would be to modify to_matix() and its documentation, and make sure other things don't break.",
    "created_at": "2008-02-20T21:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15315",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:12'></a>
I don't like that matrix(p) and p.to_matrix() will give out different things.  In the documentation for to_matrix(), I specifically said that matrix multiplication will only agree with the permutation  multiplication when the multiplication is not done "English-style".  The proper way to change things would be to modify to_matix() and its documentation, and make sure other things don't break.



---

archive/issue_events_007651.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "rename": {
        "from": "[with patch, with positive review] if p is a permutation, matrix(p) should call p.to_matrix()",
        "to": "[with patch, negative review] if p is a permutation, matrix(p) should call p.to_matrix()"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7651"
}
```



---

archive/issue_comments_015316.json:
```json
{
    "body": "<a id='comment:13'></a>\nI tried to figure out to_matrix but failed. It seemed to me that it was\nimplicitly using a global variable, permutation_options or something like that.\nI though global variables were Bad. Is there a reason not to use optional\nparameters instead? Anyway, I think the matrix command of a permutation\nshould agree with the the matrix command of a permutation, when regarded as an element\nof permutation group.",
    "created_at": "2008-02-20T23:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15316",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:13'></a>
I tried to figure out to_matrix but failed. It seemed to me that it was
implicitly using a global variable, permutation_options or something like that.
I though global variables were Bad. Is there a reason not to use optional
parameters instead? Anyway, I think the matrix command of a permutation
should agree with the the matrix command of a permutation, when regarded as an element
of permutation group.



---

archive/issue_comments_015317.json:
```json
{
    "body": "Changing keywords from \"\" to \"editor_mhansen\".",
    "created_at": "2008-06-20T04:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15317",
    "user": "https://github.com/craigcitro"
}
```

Changing keywords from "" to "editor_mhansen".



---

archive/issue_comments_015318.json:
```json
{
    "body": "<a id='comment:15'></a>\nAttachment [test.hg](tarball://root/attachments/some-uuid/ticket2215/test.hg) by mabshoff created at 2009-02-02 06:06:21\n\nIs anyone in favor of invalidating this? It seems to have hung around forever.\n\nCheers,\n\nMichael",
    "created_at": "2009-02-02T06:06:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15318",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:15'></a>
Attachment [test.hg](tarball://root/attachments/some-uuid/ticket2215/test.hg) by mabshoff created at 2009-02-02 06:06:21

Is anyone in favor of invalidating this? It seems to have hung around forever.

Cheers,

Michael



---

archive/issue_events_007652.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "rename": {
        "from": "[with patch, negative review] if p is a permutation, matrix(p) should call p.to_matrix()",
        "to": "[with patch, needs work] if p is a permutation, matrix(p) should call p.to_matrix()"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7652"
}
```



---

archive/issue_comments_015319.json:
```json
{
    "body": "Changing upstream from \"\" to \"N/A\"",
    "created_at": "2010-07-10T16:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15319",
    "user": "https://github.com/mwhansen"
}
```

Changing upstream from "" to "N/A"



---

archive/issue_comments_015320.json:
```json
{
    "body": "<a id='comment:17'></a>\nI've posted an email to sage-combinat-devel asking for additional inpu.",
    "created_at": "2010-07-10T16:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15320",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:17'></a>
I've posted an email to sage-combinat-devel asking for additional inpu.



---

archive/issue_events_007653.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "milestone": "sage-2.10.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7653"
}
```



---

archive/issue_events_007654.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7654"
}
```



---

archive/issue_events_007655.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7655"
}
```



---

archive/issue_events_007656.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7656"
}
```



---

archive/issue_events_007657.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7657"
}
```



---

archive/issue_events_007658.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7658"
}
```



---

archive/issue_events_007659.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7659"
}
```



---

archive/issue_events_007660.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7660"
}
```



---

archive/issue_comments_015321.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-08-11T19:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15321",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_007661.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-08-11T19:50:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7661"
}
```



---

archive/issue_events_007662.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-08-11T19:50:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7662"
}
```



---

archive/issue_comments_015322.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2018-08-11T21:34:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15322",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_015323.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-11T21:34:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15323",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_007663.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-08T16:14:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2215#event-7663"
}
```



---

archive/issue_comments_015324.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2018-11-08T16:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2215#issuecomment-15324",
    "user": "https://github.com/embray"
}
```

Resolution: wontfix
