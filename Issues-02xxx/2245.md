# Issue 2245: abvar -- increase the doctest coverage to 100%

archive/issues_002245.json:
```json
{
    "body": "The doctest coverage for devel/sage/sage/modular/abvar is as follows:\n\n```\nteragon:abvar was$ sage -coverage .\nabvar.py: 62% (20 of 32)\nabvar_ambient_jacobian.py: 28% (2 of 7)\nabvar_modsym_factor.py: 60% (3 of 5)\nabvar_newform.py: 0% (0 of 1)\nconstructor.py: 100% (3 of 3)\ncuspidal_subgroup.py: 16% (1 of 6)\nfinite_subgroup.py: 12% (4 of 33)\nhecke_operator.py: 66% (4 of 6)\nhomology.py: 57% (16 of 28)\nhomspace.py: 0% (0 of 2)\nlseries.py: 0% (0 of 6)\nmorphism.py: 0% (0 of 2)\ntorsion_point.py: 0% (0 of 2)\ntorsion_subgroup.py: 37% (3 of 8)\n\nOverall weighted coverage score:  39.4%\nTotal number of functions:  141\n```\n\nThe goal of this ticket is to change that to 100%.\n\nThis is in preparation for substantial work to move\nthe modular abelian varieties package forward in preparation\nfor lots of enhancements to it that are coming up. \n\n**Assignee:** @williamstein\n\nIssue created by migration from https://trac.sagemath.org/ticket/2245\n\n",
    "closed_at": "2008-03-03T12:56:23Z",
    "created_at": "2008-02-21T07:31:34Z",
    "labels": [
        "component: number theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-2.10.3",
    "title": "abvar -- increase the doctest coverage to 100%",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2245",
    "user": "https://github.com/williamstein"
}
```
The doctest coverage for devel/sage/sage/modular/abvar is as follows:

```
teragon:abvar was$ sage -coverage .
abvar.py: 62% (20 of 32)
abvar_ambient_jacobian.py: 28% (2 of 7)
abvar_modsym_factor.py: 60% (3 of 5)
abvar_newform.py: 0% (0 of 1)
constructor.py: 100% (3 of 3)
cuspidal_subgroup.py: 16% (1 of 6)
finite_subgroup.py: 12% (4 of 33)
hecke_operator.py: 66% (4 of 6)
homology.py: 57% (16 of 28)
homspace.py: 0% (0 of 2)
lseries.py: 0% (0 of 6)
morphism.py: 0% (0 of 2)
torsion_point.py: 0% (0 of 2)
torsion_subgroup.py: 37% (3 of 8)

Overall weighted coverage score:  39.4%
Total number of functions:  141
```

The goal of this ticket is to change that to 100%.

This is in preparation for substantial work to move
the modular abelian varieties package forward in preparation
for lots of enhancements to it that are coming up. 

**Assignee:** @williamstein

Issue created by migration from https://trac.sagemath.org/ticket/2245





---

archive/issue_events_006431.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "rename": {
        "from": "abvar -- increase the doctest coverage to 100%",
        "to": "[need review] abvar -- increase the doctest coverage to 100%"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2245#event-6431"
}
```



---

archive/issue_comments_014264.json:
```json
{
    "body": "<a id='comment:1'></a>\nAfter:\n\n```\nteragon:abvar was$ sage -coverage .\nabvar.py: 100% (38 of 38)\nabvar_ambient_jacobian.py: 100% (8 of 8)\nabvar_modsym_factor.py: 100% (7 of 7)\nabvar_newform.py: 100% (3 of 3)\nconstructor.py: 100% (3 of 3)\ncuspidal_subgroup.py: 100% (6 of 6)\nfinite_subgroup.py: 100% (33 of 33)\nhecke_operator.py: 100% (6 of 6)\nhomology.py: 100% (30 of 30)\nhomspace.py: 100% (2 of 2)\nlseries.py: 100% (11 of 11)\nmorphism.py: 100% (1 of 1)\ntorsion_subgroup.py: 100% (8 of 8)\n\nOverall weighted coverage score:  100.0%\nTotal number of functions:  156\n```",
    "created_at": "2008-02-25T05:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2245#issuecomment-14264",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>
After:

```
teragon:abvar was$ sage -coverage .
abvar.py: 100% (38 of 38)
abvar_ambient_jacobian.py: 100% (8 of 8)
abvar_modsym_factor.py: 100% (7 of 7)
abvar_newform.py: 100% (3 of 3)
constructor.py: 100% (3 of 3)
cuspidal_subgroup.py: 100% (6 of 6)
finite_subgroup.py: 100% (33 of 33)
hecke_operator.py: 100% (6 of 6)
homology.py: 100% (30 of 30)
homspace.py: 100% (2 of 2)
lseries.py: 100% (11 of 11)
morphism.py: 100% (1 of 1)
torsion_subgroup.py: 100% (8 of 8)

Overall weighted coverage score:  100.0%
Total number of functions:  156
```



---

archive/attachments_001947.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sage-2245.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2245/sage-2245.patch",
    "created_at": "2008-02-26T23:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_014265.json:
```json
{
    "body": "this is the whole thing flattened and rebased against sage-2.10.3.alpha0",
    "created_at": "2008-02-26T23:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2245#issuecomment-14265",
    "user": "https://github.com/williamstein"
}
```

this is the whole thing flattened and rebased against sage-2.10.3.alpha0



---

archive/issue_comments_014266.json:
```json
{
    "body": "<a id='comment:2'></a>\nLooks great. I went through and edited a few things here and there, mostly correcting typos and over-long lines. \n\nThere's one thing that still bothers me, though: given a modular abelian variety `A`, one uses `A.lseries()` and `A.padic_lseries(5)` to get the complex and p-adic L-series, which is totally reasonable. However, for an elliptic curve `E`, it's `E.Lseries()` and `E.padic_lseries(5)` -- I don't like that one of the four is uppercase, while the other three are lowercase. I think we should make everything consistent, and I personally prefer lowercase. If someone else (e.g. William) agrees, I'll go ahead and make another patch to correct that.",
    "created_at": "2008-03-03T06:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2245#issuecomment-14266",
    "user": "https://github.com/craigcitro"
}
```

<a id='comment:2'></a>
Looks great. I went through and edited a few things here and there, mostly correcting typos and over-long lines. 

There's one thing that still bothers me, though: given a modular abelian variety `A`, one uses `A.lseries()` and `A.padic_lseries(5)` to get the complex and p-adic L-series, which is totally reasonable. However, for an elliptic curve `E`, it's `E.Lseries()` and `E.padic_lseries(5)` -- I don't like that one of the four is uppercase, while the other three are lowercase. I think we should make everything consistent, and I personally prefer lowercase. If someone else (e.g. William) agrees, I'll go ahead and make another patch to correct that.



---

archive/issue_events_006432.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "rename": {
        "from": "[need review] abvar -- increase the doctest coverage to 100%",
        "to": "abvar -- increase the doctest coverage to 100%"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2245#event-6432"
}
```



---

archive/issue_comments_014267.json:
```json
{
    "body": "**Changing status** from new to positive_review.",
    "created_at": "2008-03-03T06:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2245#issuecomment-14267",
    "user": "https://github.com/craigcitro"
}
```

**Changing status** from new to positive_review.



---

archive/attachments_001948.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-2245-touch-ups.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2245/trac-2245-touch-ups.patch",
    "created_at": "2008-03-03T06:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/craigcitro"
}
```



---

archive/issue_comments_014268.json:
```json
{
    "body": "minor typo corrections; apply after william's patch above",
    "created_at": "2008-03-03T06:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2245#issuecomment-14268",
    "user": "https://github.com/craigcitro"
}
```

minor typo corrections; apply after william's patch above



---

archive/issue_comments_014269.json:
```json
{
    "body": "<a id='comment:3'></a>\nGood job fixing up my patch.  I just looked over your touch ups.  Very nice.",
    "created_at": "2008-03-03T07:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2245#issuecomment-14269",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:3'></a>
Good job fixing up my patch.  I just looked over your touch ups.  Very nice.



---

archive/attachments_001949.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-2245-lseries.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2245/trac-2245-lseries.patch",
    "created_at": "2008-03-03T07:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/craigcitro"
}
```



---

archive/issue_comments_014270.json:
```json
{
    "body": "apply this third",
    "created_at": "2008-03-03T07:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2245#issuecomment-14270",
    "user": "https://github.com/craigcitro"
}
```

apply this third



---

archive/issue_comments_014271.json:
```json
{
    "body": "<a id='comment:4'></a>\nAdded a patch to change `Lseries` to `lseries` throughout Sage. Apply after the above patches.",
    "created_at": "2008-03-03T07:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2245#issuecomment-14271",
    "user": "https://github.com/craigcitro"
}
```

<a id='comment:4'></a>
Added a patch to change `Lseries` to `lseries` throughout Sage. Apply after the above patches.



---

archive/issue_events_006433.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-03-03T12:56:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2245#event-6433"
}
```



---

archive/issue_comments_014272.json:
```json
{
    "body": "<a id='comment:5'></a>\nMerged all three patches in Sage 2.10.3.rc1",
    "created_at": "2008-03-03T12:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2245#issuecomment-14272",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:5'></a>
Merged all three patches in Sage 2.10.3.rc1
