# Issue 2609: [with patch, with positive review] generators for congruence subgroups

archive/issues_002609.json:
```json
{
    "body": "Generators for Gamma0, Gamma1 and GammaH.\n\nAssignee: @williamstein\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/2609\n\n",
    "closed_at": "2008-03-23T20:35:53Z",
    "created_at": "2008-03-20T08:56:45Z",
    "labels": [
        "component: modular forms",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-2.11",
    "title": "[with patch, with positive review] generators for congruence subgroups",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2609",
    "user": "https://github.com/rlmill"
}
```
Generators for Gamma0, Gamma1 and GammaH.

Assignee: @williamstein

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/2609





---

archive/issue_events_009208.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "rename": {
        "from": "[with patch, needs review] generators for congruence subgroups",
        "to": "[with patch, with review] generators for congruence subgroups"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2609#event-9208"
}
```



---

archive/issue_comments_018774.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis looks fine mathematically.  I don't much like seeing three almost identical functions, though (for Gamma0, Gamma1 and GammaH).  Can it not be written in such a way that all three call a common core function which has the list of coset reps as a parameter?\n\nEven better would be a function to do this more generally, given generators for a big group and coset reps for a subgroup -- but I do realise that one would also need toprovide functions to return the coset rep for any give element of the big group.",
    "created_at": "2008-03-22T18:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2609#issuecomment-18774",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:1'></a>
This looks fine mathematically.  I don't much like seeing three almost identical functions, though (for Gamma0, Gamma1 and GammaH).  Can it not be written in such a way that all three call a common core function which has the list of coset reps as a parameter?

Even better would be a function to do this more generally, given generators for a big group and coset reps for a subgroup -- but I do realise that one would also need toprovide functions to return the coset rep for any give element of the big group.



---

archive/issue_comments_018775.json:
```json
{
    "body": "<a id='comment:2'></a>\nYes, I agree, those three functions *definitely* need to be refactored into a single function.",
    "created_at": "2008-03-22T18:17:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2609#issuecomment-18775",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'></a>
Yes, I agree, those three functions *definitely* need to be refactored into a single function.



---

archive/issue_events_009209.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "rename": {
        "from": "[with patch, with review] generators for congruence subgroups",
        "to": "[with patch, needs new review] generators for congruence subgroups"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2609#event-9209"
}
```



---

archive/issue_comments_018776.json:
```json
{
    "body": "<a id='comment:4'></a>\nSince you're doing just arithmetic, it just occurred to me that in the interest of speed one could use the specialized 2x2 integer matrix class that Robert Bradshaw wrote, which is ten times faster.  For example: \n\n```\nsage: import sage.matrix.matrix_integer_2x2\nsage: A = sage.matrix.matrix_integer_2x2.Matrix_integer_2x2(MatrixSpace(ZZ,2),[1,2,3,4],False,False)\nsage: time for _ in xrange(10^5): B = A*A\nCPU times: user 0.23 s, sys: 0.00 s, total: 0.23 s\nWall time: 0.24\nsage: A = matrix(ZZ,2,[1,2,3,4])sage: time for _ in xrange(10^5): B = A*A\nCPU times: user 1.81 s, sys: 0.21 s, total: 2.02 s\nWall time: 2.04\n```",
    "created_at": "2008-03-22T19:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2609#issuecomment-18776",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:4'></a>
Since you're doing just arithmetic, it just occurred to me that in the interest of speed one could use the specialized 2x2 integer matrix class that Robert Bradshaw wrote, which is ten times faster.  For example: 

```
sage: import sage.matrix.matrix_integer_2x2
sage: A = sage.matrix.matrix_integer_2x2.Matrix_integer_2x2(MatrixSpace(ZZ,2),[1,2,3,4],False,False)
sage: time for _ in xrange(10^5): B = A*A
CPU times: user 0.23 s, sys: 0.00 s, total: 0.23 s
Wall time: 0.24
sage: A = matrix(ZZ,2,[1,2,3,4])sage: time for _ in xrange(10^5): B = A*A
CPU times: user 1.81 s, sys: 0.21 s, total: 2.02 s
Wall time: 2.04
```



---

archive/issue_comments_018777.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe replacement patch certainly answers my point made earlier.  So I would have said: OK, merge this in -- until I saw was's comment.  rlm, how about trying that out and seeing if is is as much faster as hoped?",
    "created_at": "2008-03-22T20:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2609#issuecomment-18777",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'></a>
The replacement patch certainly answers my point made earlier.  So I would have said: OK, merge this in -- until I saw was's comment.  rlm, how about trying that out and seeing if is is as much faster as hoped?



---

archive/issue_comments_018778.json:
```json
{
    "body": "<a id='comment:6'></a>\nwas:\n\n```\nsage: time L = Gamma0(389).generators()\nCPU times: user 0.50 s, sys: 0.04 s, total: 0.54 s\nWall time: 0.54\n```\nis:\n\n```\nsage: time L = Gamma0(389).generators()\nCPU times: user 0.04 s, sys: 0.00 s, total: 0.04 s\nWall time: 0.05\n```",
    "created_at": "2008-03-23T00:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2609#issuecomment-18778",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:6'></a>
was:

```
sage: time L = Gamma0(389).generators()
CPU times: user 0.50 s, sys: 0.04 s, total: 0.54 s
Wall time: 0.54
```
is:

```
sage: time L = Gamma0(389).generators()
CPU times: user 0.04 s, sys: 0.00 s, total: 0.04 s
Wall time: 0.05
```



---

archive/issue_events_009210.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "rename": {
        "from": "[with patch, needs new review] generators for congruence subgroups",
        "to": "[with patch, needs review] generators for congruence subgroups"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2609#event-9210"
}
```



---

archive/issue_comments_018779.json:
```json
{
    "body": "<a id='comment:7'></a>\nFantastic!  \n\nThis patch provides very useful functionality, and in a very efficient way.  It should definitely be included.",
    "created_at": "2008-03-23T10:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2609#issuecomment-18779",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:7'></a>
Fantastic!  

This patch provides very useful functionality, and in a very efficient way.  It should definitely be included.



---

archive/issue_events_009211.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "rename": {
        "from": "[with patch, needs review] generators for congruence subgroups",
        "to": "[with patch, with positive review] generators for congruence subgroups"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2609#event-9211"
}
```



---

archive/issue_comments_018780.json:
```json
{
    "body": "<a id='comment:8'></a>\nAttachment [cong_subgp_gens.patch](tarball://root/attachments/some-uuid/ticket2609/cong_subgp_gens.patch) by mabshoff created at 2008-03-23 20:35:53\n\nMerged in Sage 2.11.alpha2",
    "created_at": "2008-03-23T20:35:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2609#issuecomment-18780",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:8'></a>
Attachment [cong_subgp_gens.patch](tarball://root/attachments/some-uuid/ticket2609/cong_subgp_gens.patch) by mabshoff created at 2008-03-23 20:35:53

Merged in Sage 2.11.alpha2



---

archive/issue_events_009212.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-03-23T20:35:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2609#event-9212"
}
```



---

archive/issue_comments_018781.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-03-23T20:35:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2609#issuecomment-18781",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed
