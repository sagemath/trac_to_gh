# Issue 2179: implementation mpoly factoring with coefficients in ZZ

archive/issues_002179.json:
```json
{
    "body": "Here's a pure python implementation of an algorithm to factor polynomials over ZZ using kronecker's trick (specializing a variable to a large prime reduces you to a poly of fewer variables).  Note that this also fills in an implementation of factoring over ZZ[x,y] --- we don't have any implementation at all for this currently.  It's also faster than singular (over QQ) for some cases.\n\nHere's an example with my favorite trouble-maker for singular.\n\nthis patch:\n\n```\nsage: R.<p10,g0,g1,g2,g3,g4,X1,X2>=ZZ[]\nsage: t=-p10^170*X1^10*X2^10+p10^130*X1^10*X2^5+p10^130*X1^5*X2^10-p10^90*X1^5*X2^5+p10^80*X1^5*X2^5-p10^40*X1^5-p10^40*X2^5+1\nsage: time t.factor()\nCPU times: user 0.11 s, sys: 0.00 s, total: 0.12 s\nWall time: 0.12\n(-1) * (p10^8*X2 - 1) * (p10^8*X1 - 1) * (p10^18*X1*X2 - 1) * (p10^32*X2^4 + p10^24*X2^3 + p10^16*X2^2 + p10^8*X2 + 1) * (p10^32*X1^4 + p10^24*X1^3 + p10^16*X1^2 + p10^8*X1 + 1) * (p10^72*X1^4*X2^4 + p10^54*X1^3*X2^3 + p10^36*X1^2*X2^2 + p10^18*X1*X2 + 1)\n```\n\nsingular:\n\n```\nsage: R.<p10,g0,g1,g2,g3,g4,X1,X2>=QQ[]\nsage: t=-p10^170*X1^10*X2^10+p10^130*X1^10*X2^5+p10^130*X1^5*X2^10-p10^90*X1^5*X2^5+p10^80*X1^5*X2^5-p10^40*X1^5-p10^40*X2^5+1\nsage: time t.factor()\nCPU times: <longer than I wanted to wait>\n```\n\n\n**Assignee:** jbmohler\n\n**CC:**  @ncalexan\n\n**Keywords:** editor_wstein\n\n**Reviewer:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/2179\n\n",
    "closed_at": "2015-06-19T08:38:11Z",
    "created_at": "2008-02-16T20:45:54Z",
    "labels": [
        "component: commutative algebra",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "implementation mpoly factoring with coefficients in ZZ",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2179",
    "user": "https://trac.sagemath.org/admin/accounts/users/jbmohler"
}
```
Here's a pure python implementation of an algorithm to factor polynomials over ZZ using kronecker's trick (specializing a variable to a large prime reduces you to a poly of fewer variables).  Note that this also fills in an implementation of factoring over ZZ[x,y] --- we don't have any implementation at all for this currently.  It's also faster than singular (over QQ) for some cases.

Here's an example with my favorite trouble-maker for singular.

this patch:

```
sage: R.<p10,g0,g1,g2,g3,g4,X1,X2>=ZZ[]
sage: t=-p10^170*X1^10*X2^10+p10^130*X1^10*X2^5+p10^130*X1^5*X2^10-p10^90*X1^5*X2^5+p10^80*X1^5*X2^5-p10^40*X1^5-p10^40*X2^5+1
sage: time t.factor()
CPU times: user 0.11 s, sys: 0.00 s, total: 0.12 s
Wall time: 0.12
(-1) * (p10^8*X2 - 1) * (p10^8*X1 - 1) * (p10^18*X1*X2 - 1) * (p10^32*X2^4 + p10^24*X2^3 + p10^16*X2^2 + p10^8*X2 + 1) * (p10^32*X1^4 + p10^24*X1^3 + p10^16*X1^2 + p10^8*X1 + 1) * (p10^72*X1^4*X2^4 + p10^54*X1^3*X2^3 + p10^36*X1^2*X2^2 + p10^18*X1*X2 + 1)
```

singular:

```
sage: R.<p10,g0,g1,g2,g3,g4,X1,X2>=QQ[]
sage: t=-p10^170*X1^10*X2^10+p10^130*X1^10*X2^5+p10^130*X1^5*X2^10-p10^90*X1^5*X2^5+p10^80*X1^5*X2^5-p10^40*X1^5-p10^40*X2^5+1
sage: time t.factor()
CPU times: <longer than I wanted to wait>
```


**Assignee:** jbmohler

**CC:**  @ncalexan

**Keywords:** editor_wstein

**Reviewer:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/2179





---

archive/attachments_001846.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "mpoly-factor.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2179/mpoly-factor.patch",
    "created_at": "2008-02-16T20:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/jbmohler"
}
```



---

archive/issue_comments_013627.json:
```json
{
    "body": "",
    "created_at": "2008-02-16T20:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13627",
    "user": "https://trac.sagemath.org/admin/accounts/users/jbmohler"
}
```





---

archive/issue_events_006244.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jbmohler",
    "created_at": "2008-02-16T20:46:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-2.10.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6244"
}
```



---

archive/issue_comments_013628.json:
```json
{
    "body": "**Changing assignee** from @williamstein to @malb.",
    "created_at": "2008-02-16T20:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13628",
    "user": "https://trac.sagemath.org/admin/accounts/users/jbmohler"
}
```

**Changing assignee** from @williamstein to @malb.



---

archive/issue_comments_013629.json:
```json
{
    "body": "<a id='comment:3'></a>\nI am no expert on factoring algorithms, but this does seem to fill a needed hole, is reasonably implemented, and has some rudimentary doctests.\n\nI say apply.\n\nIsn't this whole area going to be addressed soon anyway, so that this code will likely be reviewed and enhanced shortly?",
    "created_at": "2008-02-18T19:44:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13629",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:3'></a>
I am no expert on factoring algorithms, but this does seem to fill a needed hole, is reasonably implemented, and has some rudimentary doctests.

I say apply.

Isn't this whole area going to be addressed soon anyway, so that this code will likely be reviewed and enhanced shortly?



---

archive/issue_events_006245.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "rename": {
        "from": "implementation mpoly factoring with coefficients in ZZ",
        "to": "[with cautiously optimistic review] implementation mpoly factoring with coefficients in ZZ"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6245"
}
```



---

archive/issue_comments_013630.json:
```json
{
    "body": "<a id='comment:4'></a>\nREVIEW:\n\nThis absolutely should not be applied for the simple reason that the file `sage/rings/polynomial/multi_polynomial_factor.py`\nintroduces 7 new functions that have 0 docstrings and 0 doctests, and essentially 0 documentation.  My understanding, which I want to push very hard, is that no new code should go into Sage that reduces the overall doctest coverage score. \n\nJoel -- can you add doctests and docstrings for every single function `multi_polynomial_factor.py`?    I do that with *all* new code I write for Sage.",
    "created_at": "2008-02-19T14:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13630",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:4'></a>
REVIEW:

This absolutely should not be applied for the simple reason that the file `sage/rings/polynomial/multi_polynomial_factor.py`
introduces 7 new functions that have 0 docstrings and 0 doctests, and essentially 0 documentation.  My understanding, which I want to push very hard, is that no new code should go into Sage that reduces the overall doctest coverage score. 

Joel -- can you add doctests and docstrings for every single function `multi_polynomial_factor.py`?    I do that with *all* new code I write for Sage.



---

archive/issue_events_006246.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "rename": {
        "from": "[with cautiously optimistic review] implementation mpoly factoring with coefficients in ZZ",
        "to": "[negative review] implementation mpoly factoring with coefficients in ZZ"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6246"
}
```



---

archive/issue_events_006247.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "rename": {
        "from": "[negative review] implementation mpoly factoring with coefficients in ZZ",
        "to": "[accepted pending addition of doctests] implementation mpoly factoring with coefficients in ZZ"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6247"
}
```



---

archive/issue_comments_013631.json:
```json
{
    "body": "<a id='comment:6'></a>\nI'm reviewing my own code today.  Expect a new patch to be submitted as of later today.  I just thought I'd mention that here in case someone was looking at this code today.",
    "created_at": "2008-02-25T17:26:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13631",
    "user": "https://trac.sagemath.org/admin/accounts/users/jbmohler"
}
```

<a id='comment:6'></a>
I'm reviewing my own code today.  Expect a new patch to be submitted as of later today.  I just thought I'd mention that here in case someone was looking at this code today.



---

archive/issue_events_006248.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jbmohler",
    "created_at": "2008-02-27T02:18:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-2.10.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6248"
}
```



---

archive/issue_events_006249.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jbmohler",
    "created_at": "2008-02-27T02:18:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-3.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6249"
}
```



---

archive/issue_comments_013632.json:
```json
{
    "body": "<a id='comment:7'></a>\nI'm retracting this for the moment.  As expected, once I started looking at this code I found so many ways to improve it and totally got sucked in again and want to make it better.",
    "created_at": "2008-02-27T02:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13632",
    "user": "https://trac.sagemath.org/admin/accounts/users/jbmohler"
}
```

<a id='comment:7'></a>
I'm retracting this for the moment.  As expected, once I started looking at this code I found so many ways to improve it and totally got sucked in again and want to make it better.



---

archive/issue_comments_013633.json:
```json
{
    "body": "**Changing assignee** from @malb to jbmohler.",
    "created_at": "2008-03-28T11:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13633",
    "user": "https://github.com/malb"
}
```

**Changing assignee** from @malb to jbmohler.



---

archive/issue_comments_013634.json:
```json
{
    "body": "<a id='comment:9'></a>\nHere is what Magma does, for the record:\n   http://magma.maths.usyd.edu.au/magma/htmlhelp/text315.htm\n\nAnd for GCD:\n   http://magma.maths.usyd.edu.au/magma/htmlhelp/text314.htm#1994",
    "created_at": "2008-04-01T05:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13634",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:9'></a>
Here is what Magma does, for the record:
   http://magma.maths.usyd.edu.au/magma/htmlhelp/text315.htm

And for GCD:
   http://magma.maths.usyd.edu.au/magma/htmlhelp/text314.htm#1994



---

archive/issue_events_006250.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "rename": {
        "from": "[accepted pending addition of doctests] implementation mpoly factoring with coefficients in ZZ",
        "to": "implementation mpoly factoring with coefficients in ZZ"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6250"
}
```



---

archive/issue_comments_013635.json:
```json
{
    "body": "**Changing status** from new to needs_work.",
    "created_at": "2008-06-03T14:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13635",
    "user": "https://github.com/malb"
}
```

**Changing status** from new to needs_work.



---

archive/issue_comments_013636.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"editor_wstein\".",
    "created_at": "2008-06-20T04:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13636",
    "user": "https://github.com/craigcitro"
}
```

**Changing keywords** from "" to "editor_wstein".



---

archive/issue_events_006251.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "rename": {
        "from": "implementation mpoly factoring with coefficients in ZZ",
        "to": "[with patch, under review by burcin before 6/27] implementation mpoly factoring with coefficients in ZZ"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6251"
}
```



---

archive/issue_events_006252.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "rename": {
        "from": "[with patch, under review by burcin before 6/27] implementation mpoly factoring with coefficients in ZZ",
        "to": "implementation mpoly factoring with coefficients in ZZ"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6252"
}
```



---

archive/issue_comments_013637.json:
```json
{
    "body": "**Changing status** from new to needs_work.",
    "created_at": "2008-07-04T17:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13637",
    "user": "https://github.com/burcin"
}
```

**Changing status** from new to needs_work.



---

archive/issue_comments_013638.json:
```json
{
    "body": "<a id='comment:12'></a>\nJoel says he has an improved patch with various additional tricks to filter easy factors. I will wait for an updated patch to review this.",
    "created_at": "2008-07-04T17:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13638",
    "user": "https://github.com/burcin"
}
```

<a id='comment:12'></a>
Joel says he has an improved patch with various additional tricks to filter easy factors. I will wait for an updated patch to review this.



---

archive/issue_events_006253.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-3.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6253"
}
```



---

archive/issue_events_006254.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6254"
}
```



---

archive/issue_events_006255.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6255"
}
```



---

archive/issue_events_006256.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6256"
}
```



---

archive/issue_events_006257.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6257"
}
```



---

archive/issue_events_006258.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6258"
}
```



---

archive/issue_events_006259.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6259"
}
```



---

archive/issue_events_006260.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6260"
}
```



---

archive/issue_comments_013639.json:
```json
{
    "body": "**Upstream:** N/A",
    "created_at": "2015-04-13T16:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13639",
    "user": "https://github.com/mezzarobba"
}
```

**Upstream:** N/A



---

archive/issue_comments_013640.json:
```json
{
    "body": "<a id='comment:18'></a>\nRelated: #17840",
    "created_at": "2015-04-13T16:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13640",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:18'></a>
Related: #17840



---

archive/issue_events_006261.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-24T09:48:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6261"
}
```



---

archive/issue_events_006262.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-24T09:48:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6262"
}
```



---

archive/issue_comments_013641.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2015-05-24T09:48:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13641",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_013642.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2015-05-24T09:48:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2179#issuecomment-13642",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_events_006263.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-19T08:38:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2179",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2179#event-6263"
}
```
