# Issue 2322: dsage patch for 2.10.3

archive/issues_002322.json:
```json
{
    "assignees": [],
    "body": "This is the flattened patch. Please let me know if there are any problems applying it. It's based against 2.10.2. \n\nAssignee: **@williamstein**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/2322_\n\n",
    "closed_at": "2008-03-14T17:47:59Z",
    "created_at": "2008-02-26T18:06:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20dsage",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-2.10.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "dsage patch for 2.10.3",
    "type": "issue",
    "updated_at": "2008-03-14T17:47:59Z",
    "url": "https://github.com/sagemath/sage/issues/2322",
    "user": "https://github.com/yqiang"
}
```
This is the flattened patch. Please let me know if there are any problems applying it. It's based against 2.10.2. 

Assignee: **@williamstein**

_Issue created by migration from https://trac.sagemath.org/ticket/2322_





---

archive/issue_events_020958.json:
```json
{
    "actor": "https://github.com/yqiang",
    "created_at": "2008-02-26T18:06:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "milestone_number": null,
    "milestone_title": "sage-2.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2322#event-20958"
}
```



---

archive/issue_events_020959.json:
```json
{
    "actor": "https://github.com/yqiang",
    "created_at": "2008-02-26T18:06:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20dsage",
    "label_color": "0000ff",
    "label_name": "component: dsage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2322#event-20959"
}
```



---

archive/issue_events_020960.json:
```json
{
    "actor": "https://github.com/yqiang",
    "created_at": "2008-02-26T18:06:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2322#event-20960"
}
```



---

archive/issue_events_020961.json:
```json
{
    "actor": "https://github.com/yqiang",
    "created_at": "2008-02-26T18:06:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2322#event-20961"
}
```



---

archive/issue_comments_012115.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nPatch located here:\nhttp://sage.math.washington.edu/home/yqiang/dsage-2.10.3.patch\n\nI could not attach it because it exceeded the maximum file size =)",
    "created_at": "2008-02-26T18:08:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12115",
    "user": "https://github.com/yqiang"
}
```

<a id='comment:1'>Comment 1:</a>
Patch located here:
http://sage.math.washington.edu/home/yqiang/dsage-2.10.3.patch

I could not attach it because it exceeded the maximum file size =)



---

archive/issue_comments_012116.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI assume that this is the patch that was reviewed by William and rlm yesterday? In case it is please have one of them add formal positive review to this so it can be merged.",
    "created_at": "2008-02-26T18:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12116",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:2'>Comment 2:</a>
I assume that this is the patch that was reviewed by William and rlm yesterday? In case it is please have one of them add formal positive review to this so it can be merged.



---

archive/issue_comments_012117.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n-This is the flattened patch. Please let me know if there are any problems applying it. It's based against 2.10.2.\n+This is the flattened patch. Please let me know if there are any problems applying it. It's based against 2.10.2. It would also be nice to have a high level changelog at this ticket to indicate the changes made. I assume this also includes Timothy's patch from #2280?\n+\n+Cheers,\n+\n+Michael\n``````\n",
    "created_at": "2008-02-26T18:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12117",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
-This is the flattened patch. Please let me know if there are any problems applying it. It's based against 2.10.2.
+This is the flattened patch. Please let me know if there are any problems applying it. It's based against 2.10.2. It would also be nice to have a high level changelog at this ticket to indicate the changes made. I assume this also includes Timothy's patch from #2280?
+
+Cheers,
+
+Michael
``````




---

archive/issue_events_020962.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-02-26T18:21:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2322#event-20962"
}
```



---

archive/issue_comments_012118.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1 @@\n-This is the flattened patch. Please let me know if there are any problems applying it. It's based against 2.10.2. It would also be nice to have a high level changelog at this ticket to indicate the changes made. I assume this also includes Timothy's patch from #2280?\n-\n-Cheers,\n-\n-Michael\n+This is the flattened patch. Please let me know if there are any problems applying it. It's based against 2.10.2. \n``````\n",
    "created_at": "2008-02-26T18:21:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12118",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1 @@
-This is the flattened patch. Please let me know if there are any problems applying it. It's based against 2.10.2. It would also be nice to have a high level changelog at this ticket to indicate the changes made. I assume this also includes Timothy's patch from #2280?
-
-Cheers,
-
-Michael
+This is the flattened patch. Please let me know if there are any problems applying it. It's based against 2.10.2. 
``````




---

archive/issue_comments_012119.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nOops, wrong text box: Here we go again: It would also be nice to have a high level changelog at this ticket to indicate the changes made. I assume this also includes Timothy's patch from #2280?\n\nCheers,\n\nMichael",
    "created_at": "2008-02-26T18:21:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12119",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:3'>Comment 3:</a>
Oops, wrong text box: Here we go again: It would also be nice to have a high level changelog at this ticket to indicate the changes made. I assume this also includes Timothy's patch from #2280?

Cheers,

Michael



---

archive/issue_comments_012120.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nFor the record: Patch applies fine against my tree, so I can merge once I get the positive review.\n\nCheers,\n\nMichael",
    "created_at": "2008-02-26T18:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12120",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:4'>Comment 4:</a>
For the record: Patch applies fine against my tree, so I can merge once I get the positive review.

Cheers,

Michael



---

archive/issue_comments_012121.json:
```json
{
    "body": "high level changelog",
    "created_at": "2008-02-26T18:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12121",
    "user": "https://github.com/yqiang"
}
```

high level changelog



---

archive/issue_comments_012122.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nAttachment: **[dsage changelog.txt](https://github.com/sagemath/sage/files/ticket2322/03793a5767728207e9fe9fc64046ad3f.txt)**\n\nFrom the changelog it looks like we depend on SQLAlchemy, i.e. #2205. Is that correct?\n\nCheers,\n\nMichael",
    "created_at": "2008-02-26T21:19:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12122",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:5'>Comment 5:</a>
Attachment: **[dsage changelog.txt](https://github.com/sagemath/sage/files/ticket2322/03793a5767728207e9fe9fc64046ad3f.txt)**

From the changelog it looks like we depend on SQLAlchemy, i.e. #2205. Is that correct?

Cheers,

Michael



---

archive/issue_comments_012123.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nYes this is correct. I couldn't find a way to specify dependencies in trac, that would be a nice feature =). For the record\n\ndsage depends on sqlalchemy which depends on setuptools.",
    "created_at": "2008-02-26T22:06:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12123",
    "user": "https://github.com/yqiang"
}
```

<a id='comment:6'>Comment 6:</a>
Yes this is correct. I couldn't find a way to specify dependencies in trac, that would be a nice feature =). For the record

dsage depends on sqlalchemy which depends on setuptools.



---

archive/issue_comments_012124.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nHere are the exact steps needed to apply the patch and make everything work correctly:\n\n1) Apply dsage-2.10.3.patch. NOTE: Do not panic at the dirstate message. It\nwill be fixed by step 2.\n2) Remove sage/dsage/doc\n3) Remove sage/dsage/dist_functions/nodoctest.py\n4) Remove dsage_server.py from $SAGE_ROOT/local/bin",
    "created_at": "2008-03-01T23:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12124",
    "user": "https://github.com/yqiang"
}
```

<a id='comment:7'>Comment 7:</a>
Here are the exact steps needed to apply the patch and make everything work correctly:

1) Apply dsage-2.10.3.patch. NOTE: Do not panic at the dirstate message. It
will be fixed by step 2.
2) Remove sage/dsage/doc
3) Remove sage/dsage/dist_functions/nodoctest.py
4) Remove dsage_server.py from $SAGE_ROOT/local/bin



---

archive/issue_comments_012125.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nLooks good to me, apply.\n\nComments:\n\n1. Every single function should have some sort of descriptive text saying what it is doing, even if it doesn't have a doctest since dsage is an exception to the rule. However, to avoid bitrot, this isn't blocking the patch.\n\n2. There are some obsolete code snippets that still use SQLite that need to be removed.",
    "created_at": "2008-03-01T23:55:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12125",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:8'>Comment 8:</a>
Looks good to me, apply.

Comments:

1. Every single function should have some sort of descriptive text saying what it is doing, even if it doesn't have a doctest since dsage is an exception to the rule. However, to avoid bitrot, this isn't blocking the patch.

2. There are some obsolete code snippets that still use SQLite that need to be removed.



---

archive/issue_events_020963.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-03-01T23:55:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2322#event-20963"
}
```



---

archive/issue_events_020964.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-03-01T23:55:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2322#event-20964"
}
```



---

archive/issue_comments_012126.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nNOTE:\n\nIn step 2), you actually need 'hg rm sage/dsage/doc', and in step 3), 'hg rm sage/dsage/dist_functions/nodoctest.py' from the branch root. Step 4), you just delete the file.\n\nThere is also a step 5): after everything else, apply:\n\nhttp://sage.math.washington.edu/home/rlmill/2322-step5.patch\n\nAlso, we tested everything against 2.10.3.rc0 (with SQLAlchemy installed), and the instructions worked, and all the tests passed.\n\nThis is definitely ready to merge. -- RLM",
    "created_at": "2008-03-02T00:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12126",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:9'>Comment 9:</a>
NOTE:

In step 2), you actually need 'hg rm sage/dsage/doc', and in step 3), 'hg rm sage/dsage/dist_functions/nodoctest.py' from the branch root. Step 4), you just delete the file.

There is also a step 5): after everything else, apply:

http://sage.math.washington.edu/home/rlmill/2322-step5.patch

Also, we tested everything against 2.10.3.rc0 (with SQLAlchemy installed), and the instructions worked, and all the tests passed.

This is definitely ready to merge. -- RLM



---

archive/issue_events_020965.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-03-12T04:53:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "milestone_number": null,
    "milestone_title": "sage-2.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2322#event-20965"
}
```



---

archive/issue_events_020966.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-03-12T04:53:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "milestone_number": null,
    "milestone_title": "sage-2.10.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2322#event-20966"
}
```



---

archive/issue_comments_012127.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nMerged in Sage 2.10.4.alpha0 - I followed all five steps and did commit after step three.",
    "created_at": "2008-03-14T17:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2322#issuecomment-12127",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:11'>Comment 11:</a>
Merged in Sage 2.10.4.alpha0 - I followed all five steps and did commit after step three.



---

archive/issue_events_020967.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-03-14T17:47:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2322#event-20967"
}
```



---

archive/issue_events_020968.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-03-14T17:47:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/2322",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2322#event-20968"
}
```
