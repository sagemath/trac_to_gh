# Issue 2872: 3d graphics can't be saved to a file

archive/issues_002872.json:
```json
{
    "body": "The bug is described below.  To fix this and close this ticket, just slightly refactor the code in sage/sage/plot/plot3d/base.pyx so that save to png on a 3d image saves the tachyon rendered file, gives an sobj on an sobj or no extension, and  gives an error on all other extension.   This will be all one gets initially.\n\nAnother *later* ticket should -- if possible -- make it possible to get the static image from jmol (if possible).\n\n```\nOn Thu, Apr 10, 2008 at 11:42 AM, Hector Villafuerte wrote:\n> \n>  Hi,\n>  I noticed the following (inconsistent?) behavior: saving 2D plots\n>  works as expected (a graphic file is stored), but saving 3D plots\n>  gives .sobj files instead (see sample code below). Is there a way to\n>  save 3D plots from the Notebook? By the way, I know how to save them\n>  using jMol's GUI (as reached from Sage terminal), but the idea is to\n>  be able to script this.\n>\n\nThis is a bug.  There's currently no easy nice way to script\nsaving 3d graphics using Tachyon.   If you do the following\n\n  sage: p = point3d([(k,k^2,0) for k in [0..10]], size=5, viewer='tachyon')\n  sage: p.show(filename='a', viewer='tachyon')\n\nthen the file a.png will be produced but unfortunately a browser window\nwill also appear showing this file.\n\n\n>  --\n>   Hector\n>  \n>  \n>  sage: p = point([(k,k^2) for k in [0..10]])\n>  sage: p.save(DATA+'plot2d.png')\n>  sage: type(p)\n>  <class 'sage.plot.plot.Graphics'>\n>  \n>  sage: p = point3d([(k,k^2,0) for k in [0..10]], size=5)\n>  sage: p.save(DATA+'plot3d-1.png')\n>  sage: type(p)\n>  <class 'sage.plot.plot3d.base.Graphics3dGroup'>\n>  \n>  sage: p = point3d([(k,k^2,0) for k in [0..10]], size=5, viewer='tachyon')\n>  sage: p.save(DATA+'plot3d-2.png')\n>  sage: type(p)\n>  <class 'sage.plot.plot3d.base.Graphics3dGroup'>\n\n```\nDepends on\u00a0#8235.\u00a0\n\n**Assignee:** @williamstein\n\n**Resolution:** fixed\n\n**Author:** Bill Cauchois\n\n**Reviewer:** Tim Dumol, Robert Bradshaw\n\n**Merged:** sage-4.3.3.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/2872\n\n",
    "closed_at": "2010-02-11T15:03:54Z",
    "created_at": "2008-04-10T20:14:29Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.3.3",
    "title": "3d graphics can't be saved to a file",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2872",
    "user": "https://github.com/williamstein"
}
```
The bug is described below.  To fix this and close this ticket, just slightly refactor the code in sage/sage/plot/plot3d/base.pyx so that save to png on a 3d image saves the tachyon rendered file, gives an sobj on an sobj or no extension, and  gives an error on all other extension.   This will be all one gets initially.

Another *later* ticket should -- if possible -- make it possible to get the static image from jmol (if possible).

```
On Thu, Apr 10, 2008 at 11:42 AM, Hector Villafuerte wrote:
> 
>  Hi,
>  I noticed the following (inconsistent?) behavior: saving 2D plots
>  works as expected (a graphic file is stored), but saving 3D plots
>  gives .sobj files instead (see sample code below). Is there a way to
>  save 3D plots from the Notebook? By the way, I know how to save them
>  using jMol's GUI (as reached from Sage terminal), but the idea is to
>  be able to script this.
>

This is a bug.  There's currently no easy nice way to script
saving 3d graphics using Tachyon.   If you do the following

  sage: p = point3d([(k,k^2,0) for k in [0..10]], size=5, viewer='tachyon')
  sage: p.show(filename='a', viewer='tachyon')

then the file a.png will be produced but unfortunately a browser window
will also appear showing this file.


>  --
>   Hector
>  
>  
>  sage: p = point([(k,k^2) for k in [0..10]])
>  sage: p.save(DATA+'plot2d.png')
>  sage: type(p)
>  <class 'sage.plot.plot.Graphics'>
>  
>  sage: p = point3d([(k,k^2,0) for k in [0..10]], size=5)
>  sage: p.save(DATA+'plot3d-1.png')
>  sage: type(p)
>  <class 'sage.plot.plot3d.base.Graphics3dGroup'>
>  
>  sage: p = point3d([(k,k^2,0) for k in [0..10]], size=5, viewer='tachyon')
>  sage: p.save(DATA+'plot3d-2.png')
>  sage: type(p)
>  <class 'sage.plot.plot3d.base.Graphics3dGroup'>

```
Depends on #8235. 

**Assignee:** @williamstein

**Resolution:** fixed

**Author:** Bill Cauchois

**Reviewer:** Tim Dumol, Robert Bradshaw

**Merged:** sage-4.3.3.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/2872





---

archive/issue_comments_022169.json:
```json
{
    "body": "<a id='comment:1'></a>\nAnother nice description of the problem by Jason Grout:\n\n```\nThis has come up before---p.save() for 2d graphics tries\nto save an image.  p.save() for 3d graphics doesn't try to save an\nimage.  It's an inconsistency.  One way to get fix this is to override\nthe 3d graphics save routine to do what the 2d graphics save routine\ndoes---look at the file extension and if it is a recognized image\nextension, save the image; otherwise, save a Sage sobj pickle.  This is\nalso why 3d things don't work with animate().  animate() expects to be\nable to do p.save('test.png') and have a graphic image test.png saved\nout to disk.\n\nYou can save a 3d graphics by hand by plotting in jmol and either\nselecting \"Get Image\" next to the image, which converts to jpg, or if\nyou're doing this from the command line, you can select File|Export from\nthe java viewer that pops up.  That's rather laborious for creating an\nanimation, though.\n\nTo get an image using tachyon, use show() with filename and viewer\nparameters:\n\nsage: show(sphere(), filename='test',viewer='tachyon')\n\nYou can use that trick to make a .save() method for 3d graphics (maybe\nTransformGroup class or something?) that behaves like the 2d graphics\nsave.  Then animate should work.\n\nI don't have time to do this right now, but I think this should give\nsomeone enough information to be able to fix things if they are interested.\n\nThanks,\n```",
    "created_at": "2009-09-10T15:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22169",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>
Another nice description of the problem by Jason Grout:

```
This has come up before---p.save() for 2d graphics tries
to save an image.  p.save() for 3d graphics doesn't try to save an
image.  It's an inconsistency.  One way to get fix this is to override
the 3d graphics save routine to do what the 2d graphics save routine
does---look at the file extension and if it is a recognized image
extension, save the image; otherwise, save a Sage sobj pickle.  This is
also why 3d things don't work with animate().  animate() expects to be
able to do p.save('test.png') and have a graphic image test.png saved
out to disk.

You can save a 3d graphics by hand by plotting in jmol and either
selecting "Get Image" next to the image, which converts to jpg, or if
you're doing this from the command line, you can select File|Export from
the java viewer that pops up.  That's rather laborious for creating an
animation, though.

To get an image using tachyon, use show() with filename and viewer
parameters:

sage: show(sphere(), filename='test',viewer='tachyon')

You can use that trick to make a .save() method for 3d graphics (maybe
TransformGroup class or something?) that behaves like the 2d graphics
save.  Then animate should work.

I don't have time to do this right now, but I think this should give
someone enough information to be able to fix things if they are interested.

Thanks,
```



---

archive/issue_comments_022170.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2010-01-17T02:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22170",
    "user": "https://trac.sagemath.org/admin/accounts/users/wcauchois"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_022171.json:
```json
{
    "body": "**Upstream:** N/A",
    "created_at": "2010-01-17T02:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22171",
    "user": "https://trac.sagemath.org/admin/accounts/users/wcauchois"
}
```

**Upstream:** N/A



---

archive/issue_comments_022172.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe attached patch implements this feature as described. When a filename ending in an image format extension is passed to save (several formats are supported through PIL), Tachyon is used to render the Graphics3d.\n\nI had to factor some code out of show() into _process_viewing_options(), but hopefully that won't break anything (and I think it makes show() much cleaner).\n\nI think this is ready for review.",
    "created_at": "2010-01-17T02:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22172",
    "user": "https://trac.sagemath.org/admin/accounts/users/wcauchois"
}
```

<a id='comment:2'></a>
The attached patch implements this feature as described. When a filename ending in an image format extension is passed to save (several formats are supported through PIL), Tachyon is used to render the Graphics3d.

I had to factor some code out of show() into _process_viewing_options(), but hopefully that won't break anything (and I think it makes show() much cleaner).

I think this is ready for review.



---

archive/issue_comments_022173.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2010-01-17T19:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22173",
    "user": "https://github.com/TimDumol"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_022174.json:
```json
{
    "body": "**Author:** Bill Cauchois",
    "created_at": "2010-01-17T19:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22174",
    "user": "https://github.com/TimDumol"
}
```

**Author:** Bill Cauchois



---

archive/issue_comments_022175.json:
```json
{
    "body": "<a id='comment:3'></a>\nWorks perfectly, but it may be worth adding a short docstring for `_process_viewing_options()` for developers. Also, PIL supports JPEG, so perhaps that should be added as well. '.tif' should also be accepted. It may be worth nothing that PIL requires libjpeg and libtiff to be present when compiled in order to support JPEG and TIFF.",
    "created_at": "2010-01-17T19:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22175",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:3'></a>
Works perfectly, but it may be worth adding a short docstring for `_process_viewing_options()` for developers. Also, PIL supports JPEG, so perhaps that should be added as well. '.tif' should also be accepted. It may be worth nothing that PIL requires libjpeg and libtiff to be present when compiled in order to support JPEG and TIFF.



---

archive/issue_comments_022176.json:
```json
{
    "body": "**Reviewer:** Tim Dumol",
    "created_at": "2010-01-17T19:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22176",
    "user": "https://github.com/TimDumol"
}
```

**Reviewer:** Tim Dumol



---

archive/attachments_002725.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_2872.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2872/trac_2872.patch",
    "created_at": "2010-01-19T00:00:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/wcauchois"
}
```



---

archive/issue_comments_022177.json:
```json
{
    "body": "based on sage 4.3.1.rc0",
    "created_at": "2010-01-19T00:00:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22177",
    "user": "https://trac.sagemath.org/admin/accounts/users/wcauchois"
}
```

based on sage 4.3.1.rc0



---

archive/issue_comments_022178.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-01-19T00:01:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22178",
    "user": "https://trac.sagemath.org/admin/accounts/users/wcauchois"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_022179.json:
```json
{
    "body": "**Changing reviewer** from \"Tim Dumol\" to \"Tim Dumol, Robert Bradshaw\".",
    "created_at": "2010-01-20T08:45:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22179",
    "user": "https://github.com/robertwb"
}
```

**Changing reviewer** from "Tim Dumol" to "Tim Dumol, Robert Bradshaw".



---

archive/issue_comments_022180.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-01-20T08:45:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22180",
    "user": "https://github.com/robertwb"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_022181.json:
```json
{
    "body": "<a id='comment:5'></a>\nNice. Followup patch looks good and works great for me.",
    "created_at": "2010-01-20T08:45:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22181",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:5'></a>
Nice. Followup patch looks good and works great for me.



---

archive/issue_comments_022182.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2010-01-20T08:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22182",
    "user": "https://github.com/robertwb"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_022183.json:
```json
{
    "body": "<a id='comment:6'></a>\nTrivial failure in sage/plot/plot3d/base.pyx\n\n```\n    sage: G.texture_set()\nExpected:\n    set([Texture(texture..., yellow, ffff00), Texture(texture..., red, ff0000)])\nGot:\n    set([Texture(texture816, red, ff0000), Texture(texture817, yellow, ffff00)])\n```",
    "created_at": "2010-01-20T08:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22183",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:6'></a>
Trivial failure in sage/plot/plot3d/base.pyx

```
    sage: G.texture_set()
Expected:
    set([Texture(texture..., yellow, ffff00), Texture(texture..., red, ff0000)])
Got:
    set([Texture(texture816, red, ff0000), Texture(texture817, yellow, ffff00)])
```



---

archive/issue_comments_022184.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [robertwb](#comment%3A6):\n> Trivial failure in sage/plot/plot3d/base.pyx\n> \n> ```\n>     sage: G.texture_set()\n> Expected:\n>     set([Texture(texture..., yellow, ffff00), Texture(texture..., red, ff0000)])\n> Got:\n>     set([Texture(texture816, red, ff0000), Texture(texture817, yellow, ffff00)])\n> ```\n\n\nThis doctest failure has been in base.pyx for a long time. I fixed it in #7985. It is not related to the changes in this ticket.\n\nThanks for being a thorough reviewer :).",
    "created_at": "2010-01-20T09:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22184",
    "user": "https://trac.sagemath.org/admin/accounts/users/wcauchois"
}
```

<a id='comment:7'></a>
Replying to [robertwb](#comment%3A6):
> Trivial failure in sage/plot/plot3d/base.pyx
> 
> ```
>     sage: G.texture_set()
> Expected:
>     set([Texture(texture..., yellow, ffff00), Texture(texture..., red, ff0000)])
> Got:
>     set([Texture(texture816, red, ff0000), Texture(texture817, yellow, ffff00)])
> ```


This doctest failure has been in base.pyx for a long time. I fixed it in #7985. It is not related to the changes in this ticket.

Thanks for being a thorough reviewer :).



---

archive/issue_comments_022185.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-01-20T11:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22185",
    "user": "https://github.com/TimDumol"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_022186.json:
```json
{
    "body": "<a id='comment:8'></a>\nIt passes for me in sage-4.3.rc1. I'm putting this back to positive review.",
    "created_at": "2010-01-20T11:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22186",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:8'></a>
It passes for me in sage-4.3.rc1. I'm putting this back to positive review.



---

archive/issue_comments_022187.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-01-20T11:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22187",
    "user": "https://github.com/TimDumol"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_022188.json:
```json
{
    "body": "<a id='comment:10'></a>\nApplied to 4.3.2, the patch yields\n\n```\nFile \"/mnt/usb1/scratch/release/sage-4.3.3.alpha0/devel/sage/sage/plot/plot3d/base.pyx\", line 1395:\n    sage: G.texture_set()\nExpected:\n    set([Texture(texture..., yellow, ffff00), Texture(texture..., red, ff0000)])\nGot:\n    set([Texture(texture816, red, ff0000), Texture(texture817, yellow, ffff00)])\n```",
    "created_at": "2010-02-10T14:57:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22188",
    "user": "https://github.com/qed777"
}
```

<a id='comment:10'></a>
Applied to 4.3.2, the patch yields

```
File "/mnt/usb1/scratch/release/sage-4.3.3.alpha0/devel/sage/sage/plot/plot3d/base.pyx", line 1395:
    sage: G.texture_set()
Expected:
    set([Texture(texture..., yellow, ffff00), Texture(texture..., red, ff0000)])
Got:
    set([Texture(texture816, red, ff0000), Texture(texture817, yellow, ffff00)])
```



---

archive/issue_comments_022189.json:
```json
{
    "body": "<a id='comment:11'></a>\nThis is on sage.math.  The patch queue:\n\n```\ntrac_8219.patch\ntrac_3683-upgrade_moinmoin.patch\ntrac_8183-French_pdf.patch\ntrac_8190-docbuild.patch\ntrac_8184-eclib.patch\ntrac_8184-indentation.patch\ntrac_8155.patch\ntrac_8124-selmer-nf.review.patch\ntrac_7575.patch\ntrac_7575-followup.patch\ntrac_8189-hg.patch\ntrac_7935.patch\ntrac_7935b.2.patch\ntrac_6296.patch\ntrac_6296-part2.patch\ntrac6942_jordan.patch\ntrac6942_jordan_tests.patch\ntrac_6942-reviewer.patch\ntrac_8128-latex_cell_unicode.patch\ntrac_7313-multiline.patch\ntrac_8203-doc.patch\ntrac_8206_developer-doc.patch\ntrac_7944-dev-guide.patch\ntrac-8211.patch\ntrac_8044-categories_finite_groups-nt.patch\ntrac_8215_empty_word-sl.patch\ntrac_8186_length_handling-sl.patch\ntrac_8186_minor_doc_changes-abm.patch\ntrac_8140-sturmian-sl.patch\ntrac_8140-doc_fixes-abm.patch\ntrac_8140_cf-arg-sl.patch\ntrac_8093_palindromes_prefixes-abm.patch\ntrac_8093_doc_fixes-sl.patch\ntrac_7978_crystal_cleanup-as.2.patch\ntrac_6775-disjoint_set-sl.patch\n7580_fixes_and_extensions_total.patch\ntrac_8120-uniquerep_hash-fh.patch\ntrac_8212-minimal_weight_poly_defining_GF2n.patch\n6199-fast-int-mul-all.patch\ntrac_8188.patch\ntrac_8138-one_column_index-v2.patch\ntrac_8209-mathtt.3.patch\ntrac_8199-dev-guide.patch\ntrac_7947.patch\ntrac_7793-zorder-disk.patch\ntrac_4838-vd.patch\ntrac_8082.patch\ntrac-8004-region_plot.patch\ntrac_6878_exclude.patch\ntrac_2872.patch                  # You are here!\n8185-numerical-noise.patch\ntrac_8180-kpsewhich.patch\n```",
    "created_at": "2010-02-10T14:58:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22189",
    "user": "https://github.com/qed777"
}
```

<a id='comment:11'></a>
This is on sage.math.  The patch queue:

```
trac_8219.patch
trac_3683-upgrade_moinmoin.patch
trac_8183-French_pdf.patch
trac_8190-docbuild.patch
trac_8184-eclib.patch
trac_8184-indentation.patch
trac_8155.patch
trac_8124-selmer-nf.review.patch
trac_7575.patch
trac_7575-followup.patch
trac_8189-hg.patch
trac_7935.patch
trac_7935b.2.patch
trac_6296.patch
trac_6296-part2.patch
trac6942_jordan.patch
trac6942_jordan_tests.patch
trac_6942-reviewer.patch
trac_8128-latex_cell_unicode.patch
trac_7313-multiline.patch
trac_8203-doc.patch
trac_8206_developer-doc.patch
trac_7944-dev-guide.patch
trac-8211.patch
trac_8044-categories_finite_groups-nt.patch
trac_8215_empty_word-sl.patch
trac_8186_length_handling-sl.patch
trac_8186_minor_doc_changes-abm.patch
trac_8140-sturmian-sl.patch
trac_8140-doc_fixes-abm.patch
trac_8140_cf-arg-sl.patch
trac_8093_palindromes_prefixes-abm.patch
trac_8093_doc_fixes-sl.patch
trac_7978_crystal_cleanup-as.2.patch
trac_6775-disjoint_set-sl.patch
7580_fixes_and_extensions_total.patch
trac_8120-uniquerep_hash-fh.patch
trac_8212-minimal_weight_poly_defining_GF2n.patch
6199-fast-int-mul-all.patch
trac_8188.patch
trac_8138-one_column_index-v2.patch
trac_8209-mathtt.3.patch
trac_8199-dev-guide.patch
trac_7947.patch
trac_7793-zorder-disk.patch
trac_4838-vd.patch
trac_8082.patch
trac-8004-region_plot.patch
trac_6878_exclude.patch
trac_2872.patch                  # You are here!
8185-numerical-noise.patch
trac_8180-kpsewhich.patch
```



---

archive/issue_comments_022190.json:
```json
{
    "body": "**Work_Issues:** 1 doctest",
    "created_at": "2010-02-10T14:58:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22190",
    "user": "https://github.com/qed777"
}
```

**Work_Issues:** 1 doctest



---

archive/issue_comments_022191.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2010-02-10T14:58:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22191",
    "user": "https://github.com/qed777"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_022192.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [mpatel](#comment%3A10):\n> Applied to 4.3.2, the patch yields\n> \n> ```\n> File \"/mnt/usb1/scratch/release/sage-4.3.3.alpha0/devel/sage/sage/plot/plot3d/base.pyx\", line 1395:\n>     sage: G.texture_set()\n> Expected:\n>     set([Texture(texture..., yellow, ffff00), Texture(texture..., red, ff0000)])\n> Got:\n>     set([Texture(texture816, red, ff0000), Texture(texture817, yellow, ffff00)])\n> ```\n\n\nI don't get it, wasn't #7985 merged? I get no such doctest failure with Sage 4.3.1, which I downloaded from the website.",
    "created_at": "2010-02-10T23:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22192",
    "user": "https://trac.sagemath.org/admin/accounts/users/wcauchois"
}
```

<a id='comment:12'></a>
Replying to [mpatel](#comment%3A10):
> Applied to 4.3.2, the patch yields
> 
> ```
> File "/mnt/usb1/scratch/release/sage-4.3.3.alpha0/devel/sage/sage/plot/plot3d/base.pyx", line 1395:
>     sage: G.texture_set()
> Expected:
>     set([Texture(texture..., yellow, ffff00), Texture(texture..., red, ff0000)])
> Got:
>     set([Texture(texture816, red, ff0000), Texture(texture817, yellow, ffff00)])
> ```


I don't get it, wasn't #7985 merged? I get no such doctest failure with Sage 4.3.1, which I downloaded from the website.



---

archive/issue_comments_022193.json:
```json
{
    "body": "<a id='comment:13'></a>\nThe \"new\" failure seems to be in a different place (line 1395 vs. 758).",
    "created_at": "2010-02-10T23:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22193",
    "user": "https://github.com/qed777"
}
```

<a id='comment:13'></a>
The "new" failure seems to be in a different place (line 1395 vs. 758).



---

archive/issue_comments_022194.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [mpatel](#comment%3A13):\n> The \"new\" failure seems to be in a different place (line 1395 vs. 758).\n\n\nI see. So there's another nefarious texture_set() doctest that isn't consistent across runs. I'll open a ticket and fix this one too.",
    "created_at": "2010-02-11T00:37:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22194",
    "user": "https://trac.sagemath.org/admin/accounts/users/wcauchois"
}
```

<a id='comment:14'></a>
Replying to [mpatel](#comment%3A13):
> The "new" failure seems to be in a different place (line 1395 vs. 758).


I see. So there's another nefarious texture_set() doctest that isn't consistent across runs. I'll open a ticket and fix this one too.



---

archive/issue_comments_022195.json:
```json
{
    "body": "<a id='comment:15'></a>\nIf the fix is similar to that at #7985, feel free to add the patch here and add a comment requesting a review.",
    "created_at": "2010-02-11T00:41:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22195",
    "user": "https://github.com/qed777"
}
```

<a id='comment:15'></a>
If the fix is similar to that at #7985, feel free to add the patch here and add a comment requesting a review.



---

archive/issue_comments_022196.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [mpatel](#comment%3A15):\n> If the fix is similar to that at #7985, feel free to add the patch here and add a comment requesting a review.\n\n\nHmm... that's a good idea. But its too late. I already wasted one of our precious ticket numbers on this tiny tiny patch... see #8235.\n\nDo you think you could review it real quick?",
    "created_at": "2010-02-11T01:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22196",
    "user": "https://trac.sagemath.org/admin/accounts/users/wcauchois"
}
```

<a id='comment:16'></a>
Replying to [mpatel](#comment%3A15):
> If the fix is similar to that at #7985, feel free to add the patch here and add a comment requesting a review.


Hmm... that's a good idea. But its too late. I already wasted one of our precious ticket numbers on this tiny tiny patch... see #8235.

Do you think you could review it real quick?



---

archive/issue_comments_022197.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-02-11T10:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22197",
    "user": "https://github.com/qed777"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_022198.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,10 +1,6 @@\n-The bug is described below.  To fix this and close this ticket, just slightly\n-refactor the code in sage/sage/plot/plot3d/base.pyx so that save to png on a 3d image\n-saves the tachyon rendered file, gives an sobj on an sobj or no extension, and \n-gives an error on all other extension.   This will be all one gets initially.\n+The bug is described below.  To fix this and close this ticket, just slightly refactor the code in sage/sage/plot/plot3d/base.pyx so that save to png on a 3d image saves the tachyon rendered file, gives an sobj on an sobj or no extension, and  gives an error on all other extension.   This will be all one gets initially.\n \n-Another *later* ticket should -- if possible -- make it possible to get the static\n-image from jmol (if possible).\n+Another *later* ticket should -- if possible -- make it possible to get the static image from jmol (if possible).\n \n ```\n On Thu, Apr 10, 2008 at 11:42 AM, Hector Villafuerte wrote:\n@@ -47,5 +43,5 @@\n >  sage: type(p)\n >  <class 'sage.plot.plot3d.base.Graphics3dGroup'>\n \n-\n ```\n+Depends on\u00a0#8235.\u00a0\n``````\n",
    "created_at": "2010-02-11T10:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22198",
    "user": "https://github.com/qed777"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,10 +1,6 @@
-The bug is described below.  To fix this and close this ticket, just slightly
-refactor the code in sage/sage/plot/plot3d/base.pyx so that save to png on a 3d image
-saves the tachyon rendered file, gives an sobj on an sobj or no extension, and 
-gives an error on all other extension.   This will be all one gets initially.
+The bug is described below.  To fix this and close this ticket, just slightly refactor the code in sage/sage/plot/plot3d/base.pyx so that save to png on a 3d image saves the tachyon rendered file, gives an sobj on an sobj or no extension, and  gives an error on all other extension.   This will be all one gets initially.
 
-Another *later* ticket should -- if possible -- make it possible to get the static
-image from jmol (if possible).
+Another *later* ticket should -- if possible -- make it possible to get the static image from jmol (if possible).
 
 ```
 On Thu, Apr 10, 2008 at 11:42 AM, Hector Villafuerte wrote:
@@ -47,5 +43,5 @@
 >  sage: type(p)
 >  <class 'sage.plot.plot3d.base.Graphics3dGroup'>
 
-
 ```
+Depends on #8235. 
``````




---

archive/issue_comments_022199.json:
```json
{
    "body": "**Changing work_issues** from \"1 doctest\" to \"\".",
    "created_at": "2010-02-11T10:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22199",
    "user": "https://github.com/qed777"
}
```

**Changing work_issues** from "1 doctest" to "".



---

archive/issue_comments_022200.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-02-11T10:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22200",
    "user": "https://github.com/qed777"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_008432.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-02-11T15:03:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2872#event-8432"
}
```



---

archive/issue_comments_022201.json:
```json
{
    "body": "**Merged:** sage-4.3.3.alpha0",
    "created_at": "2010-02-11T15:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22201",
    "user": "https://github.com/qed777"
}
```

**Merged:** sage-4.3.3.alpha0



---

archive/issue_comments_022202.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2010-02-11T15:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2872#issuecomment-22202",
    "user": "https://github.com/qed777"
}
```

**Resolution:** fixed
