# Issue 2588: [with patch, positive review] documentation and tests for sage.schemes.hyperelliptic_curves.jacobian_morphism

archive/issues_002588.json:
```json
{
    "body": "Before:\n\n```\n----------------------------------------------------------------------\nsage/schemes/hyperelliptic_curves/jacobian_morphism.py\nERROR: Please define a s == loads(dumps(s)) doctest.\nSCORE sage/schemes/hyperelliptic_curves/jacobian_morphism.py: 0% (0 of 15)\n\nMissing documentation:\n         * cantor_reduction_simple(a1,b1,f,genus)\n         * cantor_reduction(a,b,f,h,genus)\n         * cantor_composition_simple(D1,D2,f,genus)\n         * cantor_composition(D1,D2,f,h,genus)\n         * __init__(self, parent, polys, reduce=True, check=False)\n         * __repr__(self)\n         * scheme(self)\n         * list(self)\n         * __add__(self,other)\n         * __cmp__(self, other)\n         * __nonzero__(self)\n         * __sub__(self, other)\n         * __neg__(self)\n         * __mul__(self, n)\n         * _rmul_(self, n)\n\n----------------------------------------------------------------------\n```\n\nAfter:\n\n```\n----------------------------------------------------------------------\n./jacobian_morphism.py\nERROR: Please define a s == loads(dumps(s)) doctest.\nSCORE ./jacobian_morphism.py: 100% (17 of 17)\n----------------------------------------------------------------------\n```\n\nThe final `s == loads(dumps(s))` requires lots of other fixes to happen first, so it could be a while.\n\nAssignee: @williamstein\n\nCC:  @ncalexan\n\nKeywords: jacobian morphism hyperelliptic curve\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/2588\n\n",
    "closed_at": "2008-03-20T01:41:02Z",
    "created_at": "2008-03-18T18:38:29Z",
    "labels": [
        "component: algebraic geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-2.11",
    "title": "[with patch, positive review] documentation and tests for sage.schemes.hyperelliptic_curves.jacobian_morphism",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2588",
    "user": "https://github.com/ncalexan"
}
```
Before:

```
----------------------------------------------------------------------
sage/schemes/hyperelliptic_curves/jacobian_morphism.py
ERROR: Please define a s == loads(dumps(s)) doctest.
SCORE sage/schemes/hyperelliptic_curves/jacobian_morphism.py: 0% (0 of 15)

Missing documentation:
         * cantor_reduction_simple(a1,b1,f,genus)
         * cantor_reduction(a,b,f,h,genus)
         * cantor_composition_simple(D1,D2,f,genus)
         * cantor_composition(D1,D2,f,h,genus)
         * __init__(self, parent, polys, reduce=True, check=False)
         * __repr__(self)
         * scheme(self)
         * list(self)
         * __add__(self,other)
         * __cmp__(self, other)
         * __nonzero__(self)
         * __sub__(self, other)
         * __neg__(self)
         * __mul__(self, n)
         * _rmul_(self, n)

----------------------------------------------------------------------
```

After:

```
----------------------------------------------------------------------
./jacobian_morphism.py
ERROR: Please define a s == loads(dumps(s)) doctest.
SCORE ./jacobian_morphism.py: 100% (17 of 17)
----------------------------------------------------------------------
```

The final `s == loads(dumps(s))` requires lots of other fixes to happen first, so it could be a while.

Assignee: @williamstein

CC:  @ncalexan

Keywords: jacobian morphism hyperelliptic curve

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/2588





---

archive/issue_comments_018150.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [2588-ncalexan-jacobian-morphism1.patch](tarball://root/attachments/some-uuid/ticket2588/2588-ncalexan-jacobian-morphism1.patch) by @JohnCremona created at 2008-03-18 21:39:59\n\nReview:  this looks like an excellent job with a lot of useful explanations and examples.  I successfully applied the patch to 2.10.4.rc0.  Testing all files in sage/schemes/hyperelliptic/ resulted in one error:\n\n```\n**********************************************************************\nFile \"jacobian_morphism.py\", line 382:\n    sage: print latex(Q + Q)\nExpected:\n    \\left(x^{2} + 5x + 1, y + 3\\alpha x + 6\\alpha + 2\\right) # known failure (trac #2586)\nGot:\n    \\left(x^{2} + 5x + 1, y + 3\\alphax + 6\\alpha + 2\\right)\n**********************************************************************\n```",
    "created_at": "2008-03-18T21:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2588#issuecomment-18150",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:1'></a>Attachment [2588-ncalexan-jacobian-morphism1.patch](tarball://root/attachments/some-uuid/ticket2588/2588-ncalexan-jacobian-morphism1.patch) by @JohnCremona created at 2008-03-18 21:39:59

Review:  this looks like an excellent job with a lot of useful explanations and examples.  I successfully applied the patch to 2.10.4.rc0.  Testing all files in sage/schemes/hyperelliptic/ resulted in one error:

```
**********************************************************************
File "jacobian_morphism.py", line 382:
    sage: print latex(Q + Q)
Expected:
    \left(x^{2} + 5x + 1, y + 3\alpha x + 6\alpha + 2\right) # known failure (trac #2586)
Got:
    \left(x^{2} + 5x + 1, y + 3\alphax + 6\alpha + 2\right)
**********************************************************************
```



---

archive/issue_comments_018151.json:
```json
{
    "body": "<a id='comment:2'></a>That example is marked known failure and the relevant trac number (#2586) is beside it.  I am happier with a useful failing doctest than no doctest, or a useless doctest, or a doctest certifying bad output.\n\nThanks for the prompt review!",
    "created_at": "2008-03-18T22:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2588#issuecomment-18151",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:2'></a>That example is marked known failure and the relevant trac number (#2586) is beside it.  I am happier with a useful failing doctest than no doctest, or a useless doctest, or a doctest certifying bad output.

Thanks for the prompt review!



---

archive/issue_comments_018152.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [comment:2 ncalexan]:\n> That example is marked known failure and the relevant trac number (#2586) is beside it.  I am happier with a useful failing doctest than no doctest, or a useless doctest, or a doctest certifying bad output.\n> \n> Thanks for the prompt review!\n\n\nI would recommend merging everything but the failing doctest and merge that hunk once #2586 is fixed. Any objections, Nick?\n\nCheers,\n\nMichael",
    "created_at": "2008-03-19T12:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2588#issuecomment-18152",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:3'></a>Replying to [comment:2 ncalexan]:
> That example is marked known failure and the relevant trac number (#2586) is beside it.  I am happier with a useful failing doctest than no doctest, or a useless doctest, or a doctest certifying bad output.
> 
> Thanks for the prompt review!


I would recommend merging everything but the failing doctest and merge that hunk once #2586 is fixed. Any objections, Nick?

Cheers,

Michael



---

archive/issue_comments_018153.json:
```json
{
    "body": "<a id='comment:4'></a>Sure, that's fine by me.  Maybe it's better to certify the failing output and change it when #2586 is complete.",
    "created_at": "2008-03-19T19:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2588#issuecomment-18153",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:4'></a>Sure, that's fine by me.  Maybe it's better to certify the failing output and change it when #2586 is complete.



---

archive/issue_comments_018154.json:
```json
{
    "body": "<a id='comment:5'></a>Nick, I changed the above lines to \n\n```\n+            sage: print latex(Q + Q)\n+            \\left(x^{2} + 5x + 1, y + 3\\alphax + 6\\alpha + 2\\right) # this is a bug - see trac #2586\n```\nOnce #2586 is fixed the doctest will fail and I am sure the person will fix the doctest.\n\nCheers,\n\nMichael",
    "created_at": "2008-03-20T01:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2588#issuecomment-18154",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:5'></a>Nick, I changed the above lines to 

```
+            sage: print latex(Q + Q)
+            \left(x^{2} + 5x + 1, y + 3\alphax + 6\alpha + 2\right) # this is a bug - see trac #2586
```
Once #2586 is fixed the doctest will fail and I am sure the person will fix the doctest.

Cheers,

Michael



---

archive/issue_comments_018155.json:
```json
{
    "body": "<a id='comment:6'></a>Merged in Sage 2.11.alpha0",
    "created_at": "2008-03-20T01:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2588#issuecomment-18155",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:6'></a>Merged in Sage 2.11.alpha0



---

archive/issue_events_006044.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-03-20T01:41:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2588",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2588#event-6044"
}
```



---

archive/issue_comments_018156.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-03-20T01:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2588#issuecomment-18156",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_comments_018157.json:
```json
{
    "body": "Attachment [trac_2588_fix-doctest.patch](tarball://root/attachments/some-uuid/ticket2588/trac_2588_fix-doctest.patch) by mabshoff created at 2008-03-20 02:01:55\n\nthis patch actually fixes the stupid mistake I introduces in the changed doctest",
    "created_at": "2008-03-20T02:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2588#issuecomment-18157",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Attachment [trac_2588_fix-doctest.patch](tarball://root/attachments/some-uuid/ticket2588/trac_2588_fix-doctest.patch) by mabshoff created at 2008-03-20 02:01:55

this patch actually fixes the stupid mistake I introduces in the changed doctest
