# Issue 2841: maxima pukes on non-ascii filenames (terrible evil bug! - caused by clisp?)

archive/issues_002841.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-mabshoff"
    ],
    "body": "<div id=\"comment:0\"></div>\n\n\n```\n> Do you have any files anywhere in your filesystem that might not\n> just use standard ascii characters in their names?\n\n> I'm guessing a bug in Maxima is causing the problem.  Maxima tries\n> to read various directories on startup and behaves very stupidly in\n> the presence of filenames that contain characters that confuse it.\n\n> Could you try making a new clean user account and running\n>     sage -maxima\n> from it?\n\nThank you!! On a new user account sage and its maxima worked\nbeautifully.\n\nOn my main account I found a folder called \"Steuerf\u00e4lle\" generated by\na governement-software for calculating the taxes in Switzerland... I\nchanged that -> issue gone.\n\nThank you very much, William. I'm looking forward to having a great\ntime with sage.\n```\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/2841_\n\n",
    "closed_at": "2010-08-11T01:04:49Z",
    "created_at": "2008-04-07T08:16:31Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "maxima pukes on non-ascii filenames (terrible evil bug! - caused by clisp?)",
    "type": "issue",
    "updated_at": "2010-08-11T01:04:49Z",
    "url": "https://github.com/sagemath/sage/issues/2841",
    "user": "https://github.com/williamstein"
}
```
<div id="comment:0"></div>


```
> Do you have any files anywhere in your filesystem that might not
> just use standard ascii characters in their names?

> I'm guessing a bug in Maxima is causing the problem.  Maxima tries
> to read various directories on startup and behaves very stupidly in
> the presence of filenames that contain characters that confuse it.

> Could you try making a new clean user account and running
>     sage -maxima
> from it?

Thank you!! On a new user account sage and its maxima worked
beautifully.

On my main account I found a folder called "Steuerfälle" generated by
a governement-software for calculating the taxes in Switzerland... I
changed that -> issue gone.

Thank you very much, William. I'm looking forward to having a great
time with sage.
```

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/2841_





---

archive/issue_events_029835.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-04-07T08:16:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "milestone_number": null,
    "milestone_title": "sage-4.5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2841#event-29835"
}
```



---

archive/issue_events_029836.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-04-07T08:16:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2841#event-29836"
}
```



---

archive/issue_events_029837.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-04-07T08:16:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2841#event-29837"
}
```



---

archive/issue_events_029838.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-04-07T08:16:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2841#event-29838"
}
```



---

archive/issue_events_029839.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-04-07T08:16:31Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "subject": "https://github.com/williamstein",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2841#event-29839"
}
```



---

archive/issue_comments_014757.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nNote that this was previously reported (and fixed, at least for me) as #276.\n\nPerhaps the bug reporter has LANG set to an encoding that does not handle that particular file name; or perhaps LANG is not set, and en_US.UTF-8 does not work on that machine (or at least, that file name is not a valid UTF-8 string).",
    "created_at": "2008-04-10T03:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2841#issuecomment-14757",
    "user": "https://github.com/sagetrac-cwitty"
}
```

<div id="comment:1" align="right">comment:1</div>

Note that this was previously reported (and fixed, at least for me) as #276.

Perhaps the bug reporter has LANG set to an encoding that does not handle that particular file name; or perhaps LANG is not set, and en_US.UTF-8 does not work on that machine (or at least, that file name is not a valid UTF-8 string).



---

archive/issue_events_029840.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-04-26T00:45:11Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "title_is": "maxima pukes on non-ascii filenames (terrible evil bug! - caused by clisp?)",
    "title_was": "maxima pukes on non-ascii filenames (terrible evil bug!)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2841#event-29840"
}
```



---

archive/issue_comments_014758.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWell, this is actually likely to be a clisp issue, so hopefully once we switch to ecls this issue will be gone regardless if this is actually an env issue or not.\n\nCheers,\n\nMichael",
    "created_at": "2008-04-26T00:45:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2841#issuecomment-14758",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:2" align="right">comment:2</div>

Well, this is actually likely to be a clisp issue, so hopefully once we switch to ecls this issue will be gone regardless if this is actually an env issue or not.

Cheers,

Michael



---

archive/issue_events_029841.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-12-27T04:00:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2841#event-29841"
}
```



---

archive/issue_events_029842.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-12-27T04:00:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2841#event-29842"
}
```



---

archive/issue_comments_014759.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIs this still an issue, given the comment above and #276, and the recent fix of ECL to not scan the filesystem (did that ever cause this problem?  Changing to minor with no complaints like this in two years.",
    "created_at": "2009-12-27T04:00:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2841#issuecomment-14759",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:3" align="right">comment:3</div>

Is this still an issue, given the comment above and #276, and the recent fix of ECL to not scan the filesystem (did that ever cause this problem?  Changing to minor with no complaints like this in two years.



---

archive/issue_comments_014760.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSuggesting that we might make a change to sage-env if this isn't a problem anymore.\n\n```\n# If the language encoding isn't set, set it to be US, since \n# Sage is currently mainly a US program, and leaving this off \n# leads to some really confusing errors -- see trac #276 \n \nif [ \"$LANG\" = \"\" ]; then \n    LANG=\"en_US.UTF-8\"  && export LANG \nfi  \n``` \nBut Sage isn't anywhere near as much mainly a US program now, and hopefully this problem isn't possible anymore?  I did create a folder called \"Steuerf\u00e4lle\" on my computer and that didn't cause problems, and LANG=en_US.UTF-8 still (even when I open a new terminal window).\n\nSo perhaps we should revert #276 - or at least close this ticket!",
    "created_at": "2010-05-25T14:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2841#issuecomment-14760",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:4" align="right">comment:4</div>

Suggesting that we might make a change to sage-env if this isn't a problem anymore.

```
# If the language encoding isn't set, set it to be US, since 
# Sage is currently mainly a US program, and leaving this off 
# leads to some really confusing errors -- see trac #276 
 
if [ "$LANG" = "" ]; then 
    LANG="en_US.UTF-8"  && export LANG 
fi  
``` 
But Sage isn't anywhere near as much mainly a US program now, and hopefully this problem isn't possible anymore?  I did create a folder called "Steuerfälle" on my computer and that didn't cause problems, and LANG=en_US.UTF-8 still (even when I open a new terminal window).

So perhaps we should revert #276 - or at least close this ticket!



---

archive/issue_comments_014761.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIt appears that #2513 (changeset 1231:7ae8bf22920b in the scripts repository) has already reverted #276.\n\nShould we wait for reports about non-ASCII file/folder names?\n\n[Recent sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/196b84684566ae59).",
    "created_at": "2010-08-10T22:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2841#issuecomment-14761",
    "user": "https://github.com/qed777"
}
```

<div id="comment:5" align="right">comment:5</div>

It appears that #2513 (changeset 1231:7ae8bf22920b in the scripts repository) has already reverted #276.

Should we wait for reports about non-ASCII file/folder names?

[Recent sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/196b84684566ae59).



---

archive/issue_comments_014762.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@qed777](#comment%3A5):\n> It appears that #2513 (changeset 1231:7ae8bf22920b in the scripts repository) has already reverted #276.\n\nHilarious!  Just goes to show that Sage is too big for any one person to know all about it - or at least to remember all tickets.\n> Should we wait for reports about non-ASCII file/folder names?\n\nNo - this should be pointed out as fixed elsewhere and the ticket closed, imho.\n> [Recent sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/196b84684566ae59).\n\nIf you agree, then I would say just put a note to that effect on that thread.",
    "created_at": "2010-08-11T00:53:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2841#issuecomment-14762",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@qed777](#comment%3A5):
> It appears that #2513 (changeset 1231:7ae8bf22920b in the scripts repository) has already reverted #276.

Hilarious!  Just goes to show that Sage is too big for any one person to know all about it - or at least to remember all tickets.
> Should we wait for reports about non-ASCII file/folder names?

No - this should be pointed out as fixed elsewhere and the ticket closed, imho.
> [Recent sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/196b84684566ae59).

If you agree, then I would say just put a note to that effect on that thread.



---

archive/issue_events_029843.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-08-11T01:04:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2841#event-29843"
}
```



---

archive/issue_events_029844.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-08-11T01:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "milestone_number": null,
    "milestone_title": "sage-4.5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2841#event-29844"
}
```



---

archive/issue_comments_014763.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI'm closing this ticket as \"invalid,\" since our Maxima no longer \"pukes on non-ascii filenames.\"  For background, see #276 and #2513.",
    "created_at": "2010-08-11T01:04:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2841#issuecomment-14763",
    "user": "https://github.com/qed777"
}
```

<div id="comment:7" align="right">comment:7</div>

I'm closing this ticket as "invalid," since our Maxima no longer "pukes on non-ascii filenames."  For background, see #276 and #2513.
