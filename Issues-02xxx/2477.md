# Issue 2477: 3d plotting of graphs -- need to force aspect_ratio=[1,1,1] by default (trivial to fix this!)

archive/issues_002477.json:
```json
{
    "assignees": [
        "https://github.com/rlmill"
    ],
    "body": "\n```\nsage: g = graphs.PetersenGraph()\nsage: g.plot3d()\n[a crappy looking plot]\nsage: g = graphs.PetersenGraph()\nsage: g.plot3d(aspect_ratio=[1,1,1])\n[a much better looking plot]\n```\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/2477_\n\n",
    "closed_at": "2008-03-31T13:44:28Z",
    "created_at": "2008-03-11T23:13:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "3d plotting of graphs -- need to force aspect_ratio=[1,1,1] by default (trivial to fix this!)",
    "type": "issue",
    "updated_at": "2008-03-31T13:44:28Z",
    "url": "https://github.com/sagemath/sage/issues/2477",
    "user": "https://github.com/williamstein"
}
```

```
sage: g = graphs.PetersenGraph()
sage: g.plot3d()
[a crappy looking plot]
sage: g = graphs.PetersenGraph()
sage: g.plot3d(aspect_ratio=[1,1,1])
[a much better looking plot]
```

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/2477_





---

archive/issue_events_025849.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-03-11T23:13:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "milestone_number": null,
    "milestone_title": "sage-3.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25849"
}
```



---

archive/issue_events_025850.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-03-11T23:13:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25850"
}
```



---

archive/issue_events_025851.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-03-11T23:13:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25851"
}
```



---

archive/issue_events_025852.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-03-11T23:13:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25852"
}
```



---

archive/issue_events_025853.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-03-11T23:13:24Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "subject": "https://github.com/williamstein",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25853"
}
```



---

archive/issue_comments_012563.json:
```json
{
    "body": "Attachment: **[2477.patch.gz](https://github.com/sagemath/sage/files/ticket2477/2477.patch.gz)**",
    "created_at": "2008-03-14T14:53:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12563",
    "user": "https://github.com/rlmill"
}
```

Attachment: **[2477.patch.gz](https://github.com/sagemath/sage/files/ticket2477/2477.patch.gz)**



---

archive/issue_comments_012564.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis is a different bug, but the funny thing is my experience is\n\n```\nsage: g = graphs.PetersenGraph()\nsage: g.plot3d()\n[a crappy looking plot]\nsage: g = graphs.PetersenGraph()\nsage: g.plot3d(aspect_ratio=[1,1,1])\n[an even crappier looking plot]\n```\nThe new plot has vertices with holes in them. I have no idea what is causing this at all.",
    "created_at": "2008-03-14T14:54:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12564",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:1" align="right">comment:1</div>

This is a different bug, but the funny thing is my experience is

```
sage: g = graphs.PetersenGraph()
sage: g.plot3d()
[a crappy looking plot]
sage: g = graphs.PetersenGraph()
sage: g.plot3d(aspect_ratio=[1,1,1])
[an even crappier looking plot]
```
The new plot has vertices with holes in them. I have no idea what is causing this at all.



---

archive/issue_events_025854.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-03-29T19:48:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "milestone_number": null,
    "milestone_title": "sage-3.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25854"
}
```



---

archive/issue_events_025855.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-03-29T19:48:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "milestone_number": null,
    "milestone_title": "sage-2.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25855"
}
```



---

archive/issue_events_025856.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-03-29T19:48:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25856"
}
```



---

archive/issue_comments_012565.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI think the patch ought to use:\n\n```\naspect_ratio = kwds.setdefault('aspect_ratio', [1,1,1])\n```\n\nor even just\n\n```\nkwds.setdefault('aspect_ratio', [1,1,1])\n```\n\nwhich is the python way to do this.",
    "created_at": "2008-03-29T20:05:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12565",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:3" align="right">comment:3</div>

I think the patch ought to use:

```
aspect_ratio = kwds.setdefault('aspect_ratio', [1,1,1])
```

or even just

```
kwds.setdefault('aspect_ratio', [1,1,1])
```

which is the python way to do this.



---

archive/issue_events_025857.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-03-29T20:05:11Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "title_is": "[changes recommended] 3d plotting of graphs -- need to force aspect_ratio=[1,1,1] by default (trivial to fix this!)",
    "title_was": "3d plotting of graphs -- need to force aspect_ratio=[1,1,1] by default (trivial to fix this!)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25857"
}
```



---

archive/issue_comments_012566.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe reason this ticket wasn't flagged was because setting aspect ratio to 1,1,1 causes the vertices to look very bad on some systems. In order for this to happen, something needs to happen, either in the code for spheres, or the way graphs are calling them. This isn't ready.",
    "created_at": "2008-03-29T20:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12566",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:4" align="right">comment:4</div>

The reason this ticket wasn't flagged was because setting aspect ratio to 1,1,1 causes the vertices to look very bad on some systems. In order for this to happen, something needs to happen, either in the code for spheres, or the way graphs are calling them. This isn't ready.



---

archive/issue_events_025858.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-03-29T20:14:44Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "title_is": "[NOT READY] 3d plotting of graphs -- need to force aspect_ratio=[1,1,1] by default (trivial to fix this!)",
    "title_was": "[changes recommended] 3d plotting of graphs -- need to force aspect_ratio=[1,1,1] by default (trivial to fix this!)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25858"
}
```



---

archive/issue_comments_012567.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe aspect_ratio:\n\naspect_ratio=[1,1,1.0000001]\n\nworks great for me, while the aspect_ratio=[1,1,1] gives the holes.\n\nI'd say just make the aspect ratio the above (which is *really* close to 1,1,1).",
    "created_at": "2008-03-29T20:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12567",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:5" align="right">comment:5</div>

The aspect_ratio:

aspect_ratio=[1,1,1.0000001]

works great for me, while the aspect_ratio=[1,1,1] gives the holes.

I'd say just make the aspect ratio the above (which is *really* close to 1,1,1).



---

archive/issue_comments_012568.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nPlaying around with this, it doesn't seem very reliable. In fact, the two problems of inconsistent edge thickness and vertex holeyness seem to come and go in loose inverse proportion of each other (although I've seen all holes and all messed up edges and I've seen no holes and no messed up edges too...). Just try fiddling that last parameter around, 1.1, 1.01, 1.00000001, they all come out very different for me (and none of them problem-free!)",
    "created_at": "2008-03-29T20:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12568",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:6" align="right">comment:6</div>

Playing around with this, it doesn't seem very reliable. In fact, the two problems of inconsistent edge thickness and vertex holeyness seem to come and go in loose inverse proportion of each other (although I've seen all holes and all messed up edges and I've seen no holes and no messed up edges too...). Just try fiddling that last parameter around, 1.1, 1.01, 1.00000001, they all come out very different for me (and none of them problem-free!)



---

archive/issue_comments_012569.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI think the issue here is the radius of the vertices (0.06).  We see the same problem with the following:\n\n\nsphere(center=(-1,0,0),size=.06) + sphere(center=(1,0,0), size=0.06, \naspect_ratio=[1,1,1])\n\nFor me, an alternative to setting the aspect_ratio to [1,1,1.000001] would be setting the radius of the vertices to 0.1 (at least, a radius of 0.1 fixes the holes in the above spheres).",
    "created_at": "2008-03-29T21:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12569",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

I think the issue here is the radius of the vertices (0.06).  We see the same problem with the following:


sphere(center=(-1,0,0),size=.06) + sphere(center=(1,0,0), size=0.06, 
aspect_ratio=[1,1,1])

For me, an alternative to setting the aspect_ratio to [1,1,1.000001] would be setting the radius of the vertices to 0.1 (at least, a radius of 0.1 fixes the holes in the above spheres).



---

archive/issue_comments_012570.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis looks like a jmol issue to me in rendering very small spheres.",
    "created_at": "2008-03-29T21:08:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12570",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:8" align="right">comment:8</div>

This looks like a jmol issue to me in rendering very small spheres.



---

archive/issue_comments_012571.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis post addresses this exact issue:\n\nhttp://www.mail-archive.com/jmol-users@lists.sourceforge.net/msg07676.html\n\n(and the followup threads)",
    "created_at": "2008-03-29T21:09:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12571",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:9" align="right">comment:9</div>

This post addresses this exact issue:

http://www.mail-archive.com/jmol-users@lists.sourceforge.net/msg07676.html

(and the followup threads)



---

archive/issue_comments_012572.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nhttp://jmol.sourceforge.net/docs/surface/ seems to indicate that the default is resolution 2, if I've read it right.\n\nI'd say we fix this ticket with an aspect_ratio of [1,1,1] and then open another ticket that sets the resolution of sphere.jmol_repr when a small sphere is drawn.",
    "created_at": "2008-03-29T21:16:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12572",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:10" align="right">comment:10</div>

http://jmol.sourceforge.net/docs/surface/ seems to indicate that the default is resolution 2, if I've read it right.

I'd say we fix this ticket with an aspect_ratio of [1,1,1] and then open another ticket that sets the resolution of sphere.jmol_repr when a small sphere is drawn.



---

archive/issue_comments_012573.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nSee https://github.com/sagemath/sage/issues/2729 for the sphere holes issue.",
    "created_at": "2008-03-30T00:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12573",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:11" align="right">comment:11</div>

See https://github.com/sagemath/sage/issues/2729 for the sphere holes issue.



---

archive/issue_comments_012574.json:
```json
{
    "body": "apply instead of the previous patch.",
    "created_at": "2008-03-30T00:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12574",
    "user": "https://github.com/jasongrout"
}
```

apply instead of the previous patch.



---

archive/issue_comments_012575.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAttachment: **[trac-2477-aspect-ratio.patch.gz](https://github.com/sagemath/sage/files/ticket2477/trac-2477-aspect-ratio.patch.gz)**\n\nThe patch at 2729 fixes the vertices so they don't look like tinker toys.  The second patch above should be reviewed (it's a simplifications of the first patch).  Apply second patch only (and give rlm credit for the initial version of the patch).",
    "created_at": "2008-03-30T00:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12575",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:12" align="right">comment:12</div>

Attachment: **[trac-2477-aspect-ratio.patch.gz](https://github.com/sagemath/sage/files/ticket2477/trac-2477-aspect-ratio.patch.gz)**

The patch at 2729 fixes the vertices so they don't look like tinker toys.  The second patch above should be reviewed (it's a simplifications of the first patch).  Apply second patch only (and give rlm credit for the initial version of the patch).



---

archive/issue_events_025859.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-03-30T00:44:27Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "title_is": "3d plotting of graphs -- need to force aspect_ratio=[1,1,1] by default (trivial to fix this!)",
    "title_was": "[NOT READY] 3d plotting of graphs -- need to force aspect_ratio=[1,1,1] by default (trivial to fix this!)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25859"
}
```



---

archive/issue_comments_012576.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nIs this only a jmol thing, or should it be applied at a higher level?",
    "created_at": "2008-03-30T00:49:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12576",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:13" align="right">comment:13</div>

Is this only a jmol thing, or should it be applied at a higher level?



---

archive/issue_comments_012577.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nLooks good. Apply after #2279.\n\nThis is just a graphs issue, but the issue at #2279 is more applicable to jmol in general.",
    "created_at": "2008-03-30T00:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12577",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:14" align="right">comment:14</div>

Looks good. Apply after #2279.

This is just a graphs issue, but the issue at #2279 is more applicable to jmol in general.



---

archive/issue_events_025860.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-03-30T00:51:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25860"
}
```



---

archive/issue_events_025861.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-03-30T00:51:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25861"
}
```



---

archive/issue_comments_012578.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nErr, #2729.",
    "created_at": "2008-03-30T00:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12578",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:15" align="right">comment:15</div>

Err, #2729.



---

archive/issue_comments_012579.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nMerged trac-2477-aspect-ratio.patch in Sage 3.0.alpha0",
    "created_at": "2008-03-31T13:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2477#issuecomment-12579",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:16" align="right">comment:16</div>

Merged trac-2477-aspect-ratio.patch in Sage 3.0.alpha0



---

archive/issue_events_025862.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-03-31T13:44:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25862"
}
```



---

archive/issue_events_025863.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-03-31T13:44:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/2477",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2477#event-25863"
}
```
