# Issue 2888: [needs rebase] matrix slicing fails in degenerate cases

archive/issues_002888.json:
```json
{
    "body": "The following should return [] but it throws an exception instead:\n\n```\nsage: M = matrix(3, 4, range(12))\nsage: M[0:3, 2:2]\n---------------------------------------------------------------------------\n<type 'exceptions.ValueError'>            Traceback (most recent call last)\n\n/opt/sage-3.0.alpha2/devel/sage-main/<ipython console> in <module>()\n\n/opt/sage-3.0.alpha2/devel/sage-main/matrix0.pyx in sage.matrix.matrix0.Matrix.__getitem__()\n\n<type 'exceptions.ValueError'>: max() arg is an empty sequence\n```\n\nSame problem if I try M[0:0, 0:0].  This is an obstacle in doing #2616, since submatrix() does handle these cases properly.\n\n\n**Assignee:** @dfdeshom\n\n**Keywords:** slice\n\nIssue created by migration from https://trac.sagemath.org/ticket/2888\n\n",
    "closed_at": "2008-04-13T05:09:50Z",
    "created_at": "2008-04-12T00:47:43Z",
    "labels": [
        "component: linear algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.0",
    "title": "[needs rebase] matrix slicing fails in degenerate cases",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/2888",
    "user": "https://github.com/aghitza"
}
```
The following should return [] but it throws an exception instead:

```
sage: M = matrix(3, 4, range(12))
sage: M[0:3, 2:2]
---------------------------------------------------------------------------
<type 'exceptions.ValueError'>            Traceback (most recent call last)

/opt/sage-3.0.alpha2/devel/sage-main/<ipython console> in <module>()

/opt/sage-3.0.alpha2/devel/sage-main/matrix0.pyx in sage.matrix.matrix0.Matrix.__getitem__()

<type 'exceptions.ValueError'>: max() arg is an empty sequence
```

Same problem if I try M[0:0, 0:0].  This is an obstacle in doing #2616, since submatrix() does handle these cases properly.


**Assignee:** @dfdeshom

**Keywords:** slice

Issue created by migration from https://trac.sagemath.org/ticket/2888





---

archive/issue_comments_016130.json:
```json
{
    "body": "**Changing assignee** from @williamstein to @dfdeshom.",
    "created_at": "2008-04-12T16:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2888#issuecomment-16130",
    "user": "https://github.com/dfdeshom"
}
```

**Changing assignee** from @williamstein to @dfdeshom.



---

archive/attachments_002743.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "2888.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2888/2888.patch",
    "created_at": "2008-04-13T03:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/dfdeshom"
}
```



---

archive/issue_comments_016131.json:
```json
{
    "body": "patch against alpha3",
    "created_at": "2008-04-13T03:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2888#issuecomment-16131",
    "user": "https://github.com/dfdeshom"
}
```

patch against alpha3



---

archive/issue_events_015479.json:
```json
{
    "actor": "https://github.com/dfdeshom",
    "created_at": "2008-04-13T03:11:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2888#event-15479"
}
```



---

archive/issue_comments_016132.json:
```json
{
    "body": "<a id='comment:2'></a>\nA patch has been made against 3.0-alpha3",
    "created_at": "2008-04-13T03:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2888#issuecomment-16132",
    "user": "https://github.com/dfdeshom"
}
```

<a id='comment:2'></a>
A patch has been made against 3.0-alpha3



---

archive/issue_comments_016133.json:
```json
{
    "body": "<a id='comment:3'></a>\nLooks good.",
    "created_at": "2008-04-13T03:41:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2888#issuecomment-16133",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:3'></a>
Looks good.



---

archive/issue_events_015480.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2008-04-13T03:41:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2888#event-15480"
}
```



---

archive/issue_events_015481.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2008-04-13T03:41:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2888#event-15481"
}
```



---

archive/issue_comments_016134.json:
```json
{
    "body": "<a id='comment:4'></a>\nHi,\n\nthe patch doesn't apply cleanly against my merge tree:\n\n```\nsage-3.0.alpha4/devel/sage$ patch -p1 --dry-run < trac_2888.patch\npatching file sage/matrix/matrix0.pyx\nHunk #1 FAILED at 613.\nHunk #2 succeeded at 694 (offset 21 lines).\n1 out of 2 hunks FAILED -- saving rejects to file sage/matrix/matrix0.pyx.rej\n```\nThe first hunk are the added doctests, so it is easy enough to do. I won't mind if somebody beasts me to it.\n\nCheers,\n\nMichael",
    "created_at": "2008-04-13T04:10:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2888#issuecomment-16134",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:4'></a>
Hi,

the patch doesn't apply cleanly against my merge tree:

```
sage-3.0.alpha4/devel/sage$ patch -p1 --dry-run < trac_2888.patch
patching file sage/matrix/matrix0.pyx
Hunk #1 FAILED at 613.
Hunk #2 succeeded at 694 (offset 21 lines).
1 out of 2 hunks FAILED -- saving rejects to file sage/matrix/matrix0.pyx.rej
```
The first hunk are the added doctests, so it is easy enough to do. I won't mind if somebody beasts me to it.

Cheers,

Michael



---

archive/issue_events_015482.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-04-13T04:10:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "rename": {
        "from": "matrix slicing fails in degenerate cases",
        "to": "[needs rebase] matrix slicing fails in degenerate cases"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2888#event-15482"
}
```



---

archive/attachments_002744.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "2888-incoming-alpha4.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket2888/2888-incoming-alpha4.patch",
    "created_at": "2008-04-13T04:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/dfdeshom"
}
```



---

archive/issue_comments_016135.json:
```json
{
    "body": "patch against upcoming alpha release",
    "created_at": "2008-04-13T04:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2888#issuecomment-16135",
    "user": "https://github.com/dfdeshom"
}
```

patch against upcoming alpha release



---

archive/issue_comments_016136.json:
```json
{
    "body": "<a id='comment:5'></a>\nMerged 2888-incoming-alpha4.patch in Sage 3.0.alpha4",
    "created_at": "2008-04-13T05:09:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/2888#issuecomment-16136",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:5'></a>
Merged 2888-incoming-alpha4.patch in Sage 3.0.alpha4



---

archive/issue_events_015483.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-04-13T05:09:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2888#event-15483"
}
```



---

archive/issue_events_015484.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-04-13T05:09:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/2888",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/2888#event-15484"
}
```
