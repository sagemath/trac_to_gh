# Issue 2346: Sage needs a simple api for interaction with other applications

archive/issues_002346.json:
```json
{
    "assignees": [
        "https://github.com/robertwb"
    ],
    "body": "Many people have shown interest in a simple API that could be used to interface with Sage. This would be useful for java applets, moodle plugins, and other applications to use Sage as a computational back end. \n\nComponent: **user interface**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/2346_\n\n",
    "closed_at": "2008-04-06T06:05:45Z",
    "created_at": "2008-02-28T08:53:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Sage needs a simple api for interaction with other applications",
    "type": "issue",
    "updated_at": "2008-04-06T06:05:45Z",
    "url": "https://github.com/sagemath/sage/issues/2346",
    "user": "https://github.com/robertwb"
}
```
Many people have shown interest in a simple API that could be used to interface with Sage. This would be useful for java applets, moodle plugins, and other applications to use Sage as a computational back end. 

Component: **user interface**

_Issue created by migration from https://trac.sagemath.org/ticket/2346_





---

archive/issue_events_024293.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-02-28T08:53:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "milestone_number": null,
    "milestone_title": "sage-2.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24293"
}
```



---

archive/issue_events_024294.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-02-28T08:53:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "000080",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24294"
}
```



---

archive/issue_events_024295.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-02-28T08:53:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24295"
}
```



---

archive/issue_events_024296.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-02-28T08:53:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24296"
}
```



---

archive/issue_events_024297.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-02-28T08:53:49Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "subject": "https://github.com/robertwb",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24297"
}
```



---

archive/issue_comments_011710.json:
```json
{
    "body": "Attachment: **[simple-api.hg.gz](https://github.com/sagemath/sage/files/ticket2346/simple-api.hg.gz)**",
    "created_at": "2008-02-28T08:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2346#issuecomment-11710",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[simple-api.hg.gz](https://github.com/sagemath/sage/files/ticket2346/simple-api.hg.gz)**



---

archive/issue_comments_011711.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThe above bundle implements a simple api over http as described in http://groups.google.com/group/sage-edu/browse_thread/thread/f2935bb4ddb72dc5\n\nIt should be completely useable in its current form, though of course there is lots of room for improvement.",
    "created_at": "2008-02-28T08:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2346#issuecomment-11711",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:1" align="right">comment:1</div>

The above bundle implements a simple api over http as described in http://groups.google.com/group/sage-edu/browse_thread/thread/f2935bb4ddb72dc5

It should be completely useable in its current form, though of course there is lots of room for improvement.



---

archive/issue_events_024298.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-02-28T08:57:21Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "subject": "https://github.com/robertwb",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24298"
}
```



---

archive/issue_events_024299.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-02-28T08:57:21Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "subject": "https://github.com/robertwb",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24299"
}
```



---

archive/issue_comments_011712.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nA few comments:\n\n1) Other than an unknown parent message, this applies cleanly against 2.10.3.alpha0\n\n2) I can't get the server/simple/twisted.py tests to pass.  The following error causes all the problems:\n\n```\n IOError: [Errno url error] unknown url type: 'https'\n```\n\nOther than that, this patch looks excellent!",
    "created_at": "2008-02-28T09:56:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2346#issuecomment-11712",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:3" align="right">comment:3</div>

A few comments:

1) Other than an unknown parent message, this applies cleanly against 2.10.3.alpha0

2) I can't get the server/simple/twisted.py tests to pass.  The following error causes all the problems:

```
 IOError: [Errno url error] unknown url type: 'https'
```

Other than that, this patch looks excellent!



---

archive/issue_events_024300.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-02-28T09:56:24Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "title_is": "[positive review pending changes] Sage needs a simple api for interaction with other applications",
    "title_was": "Sage needs a simple api for interaction with other applications",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24300"
}
```



---

archive/issue_comments_011713.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nthe function wait_for_comp could probably make use of twisted.internet.task.LoopingCall versus basically scheduling your own callbacks. See the API documentation here:\n\nhttp://twistedmatrix.com/documents/current/api/twisted.internet.task.LoopingCall.html\n\nOther than that it looks good.",
    "created_at": "2008-02-28T16:15:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2346#issuecomment-11713",
    "user": "https://github.com/yqiang"
}
```

<div id="comment:4" align="right">comment:4</div>

the function wait_for_comp could probably make use of twisted.internet.task.LoopingCall versus basically scheduling your own callbacks. See the API documentation here:

http://twistedmatrix.com/documents/current/api/twisted.internet.task.LoopingCall.html

Other than that it looks good.



---

archive/issue_comments_011714.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI'll look into the looping call thing more, but if it's what I think it is I'm not sure it satisfies all my needs. \n\nThe Errno url error is strange, does your urllib not support secure http connections?",
    "created_at": "2008-03-07T18:25:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2346#issuecomment-11714",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:5" align="right">comment:5</div>

I'll look into the looping call thing more, but if it's what I think it is I'm not sure it satisfies all my needs. 

The Errno url error is strange, does your urllib not support secure http connections?



---

archive/issue_events_024301.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-03-07T19:59:13Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "title_is": "[needs more review] Sage needs a simple api for interaction with other applications",
    "title_was": "[positive review pending changes] Sage needs a simple api for interaction with other applications",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24301"
}
```



---

archive/issue_comments_011715.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAttachment: **[2346-loops.patch.gz](https://github.com/sagemath/sage/files/ticket2346/2346-loops.patch.gz)**\n\nI've re-implemented the waiting using LoopingCall, and also reduced the amount of time it spends blocking waiting for Sage input. \n\nI'm not sure what to do about the https error--we don't want to doctest with http as that would be a potential security vulnerability. \n\nmhansen: what system are you getting that error on. Is it the Sage python?",
    "created_at": "2008-03-07T19:59:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2346#issuecomment-11715",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:6" align="right">comment:6</div>

Attachment: **[2346-loops.patch.gz](https://github.com/sagemath/sage/files/ticket2346/2346-loops.patch.gz)**

I've re-implemented the waiting using LoopingCall, and also reduced the amount of time it spends blocking waiting for Sage input. 

I'm not sure what to do about the https error--we don't want to doctest with http as that would be a potential security vulnerability. 

mhansen: what system are you getting that error on. Is it the Sage python?



---

archive/issue_events_024302.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-03-12T05:16:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "milestone_number": null,
    "milestone_title": "sage-2.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24302"
}
```



---

archive/issue_events_024303.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-03-12T05:16:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "milestone_number": null,
    "milestone_title": "sage-2.10.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24303"
}
```



---

archive/issue_comments_011716.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nPerhaps we can use http://twistedmatrix.com/documents/current/api/twisted.web.client.html\n\n(Need to do the same gnu-tls vs. OpenSSL trick as for the notebook.)",
    "created_at": "2008-03-30T00:16:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2346#issuecomment-11716",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:8" align="right">comment:8</div>

Perhaps we can use http://twistedmatrix.com/documents/current/api/twisted.web.client.html

(Need to do the same gnu-tls vs. OpenSSL trick as for the notebook.)



---

archive/issue_comments_011717.json:
```json
{
    "body": "Attachment: **[2346-gnutls.patch.gz](https://github.com/sagemath/sage/files/ticket2346/2346-gnutls.patch.gz)**",
    "created_at": "2008-04-06T04:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2346#issuecomment-11717",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[2346-gnutls.patch.gz](https://github.com/sagemath/sage/files/ticket2346/2346-gnutls.patch.gz)**



---

archive/issue_comments_011718.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nUsing twisted.web.client with the reactor and all is a major pain to do interactively (e.g. for doctests), but I was able to get it to fall back to gnutls if socket.ssl (from openssl) is not available.",
    "created_at": "2008-04-06T04:43:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2346#issuecomment-11718",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:9" align="right">comment:9</div>

Using twisted.web.client with the reactor and all is a major pain to do interactively (e.g. for doctests), but I was able to get it to fall back to gnutls if socket.ssl (from openssl) is not available.



---

archive/issue_events_024304.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-04-06T04:43:49Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "title_is": "Sage needs a simple api for interaction with other applications",
    "title_was": "[needs more review] Sage needs a simple api for interaction with other applications",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24304"
}
```



---

archive/issue_events_024305.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-04-06T04:43:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24305"
}
```



---

archive/issue_comments_011719.json:
```json
{
    "body": "Attachment: **[2346-early-ssl-import.patch.gz](https://github.com/sagemath/sage/files/ticket2346/2346-early-ssl-import.patch.gz)**",
    "created_at": "2008-04-06T05:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2346#issuecomment-11719",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[2346-early-ssl-import.patch.gz](https://github.com/sagemath/sage/files/ticket2346/2346-early-ssl-import.patch.gz)**



---

archive/issue_comments_011720.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nEverything works for me.  Apply the bundle and all three patches.",
    "created_at": "2008-04-06T05:30:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2346#issuecomment-11720",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:10" align="right">comment:10</div>

Everything works for me.  Apply the bundle and all three patches.



---

archive/issue_events_024306.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-04-06T05:30:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24306"
}
```



---

archive/issue_events_024307.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-04-06T05:30:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24307"
}
```



---

archive/issue_comments_011721.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nMerged the bundle as well as the three patches in Sage 3.0.alpha2",
    "created_at": "2008-04-06T06:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/2346#issuecomment-11721",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:11" align="right">comment:11</div>

Merged the bundle as well as the three patches in Sage 3.0.alpha2



---

archive/issue_events_024308.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-04-06T06:05:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24308"
}
```



---

archive/issue_events_024309.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-04-06T06:05:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/2346",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/2346#event-24309"
}
```
