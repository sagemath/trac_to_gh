# Issue 25451: Inaccuracy in symbolic series result on 32bit Linux

archive/issues_025451.json:
```json
{
    "body": "CC:  @slel tmonteil\n\nFrom #24838#comment:64\n\nOn 32-bit:\n\n```\nFile \"src/sage/functions/hypergeometric.py\", line 148, in sage.functions.hypergeometric\nFailed example:\n    hypergeometric_U(2, 2, x).series(x == 3, 100).subs(x=1).n()\nExpected:\n    0.403652637676806\nGot:\n    0.403651580752398\n```\n\n\nPynac is not involved in the numerics (`hypergeometric_U` is not a `GinacFunction`), so the hypothesis is that the expression before `.n()` is different with 32bit Linux pynac-0.7.22.\n\nIssue created by migration from https://trac.sagemath.org/ticket/25688\n\n",
    "created_at": "2018-06-28T14:34:27Z",
    "labels": [
        "component: symbolics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Inaccuracy in symbolic series result on 32bit Linux",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25451",
    "user": "https://github.com/rwst"
}
```
CC:  @slel tmonteil

From #24838#comment:64

On 32-bit:

```
File "src/sage/functions/hypergeometric.py", line 148, in sage.functions.hypergeometric
Failed example:
    hypergeometric_U(2, 2, x).series(x == 3, 100).subs(x=1).n()
Expected:
    0.403652637676806
Got:
    0.403651580752398
```


Pynac is not involved in the numerics (`hypergeometric_U` is not a `GinacFunction`), so the hypothesis is that the expression before `.n()` is different with 32bit Linux pynac-0.7.22.

Issue created by migration from https://trac.sagemath.org/ticket/25688





---

archive/issue_comments_358714.json:
```json
{
    "body": "This bug is fixed by the pynac patch in #31585. (So the inaccuracy in the sum is due to an arithmetic overflow.) \n\nThere is only new commit in the branch here. It just deletes the \"known bug\" tag from the doctest in src/sage/functions/hypergeometric.py that is in the description of this ticket.\n----\nNew commits:",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25451#issuecomment-358714",
    "user": "https://github.com/DaveWitteMorris"
}
```

This bug is fixed by the pynac patch in #31585. (So the inaccuracy in the sum is due to an arithmetic overflow.) 

There is only new commit in the branch here. It just deletes the "known bug" tag from the doctest in src/sage/functions/hypergeometric.py that is in the description of this ticket.
----
New commits:



---

archive/issue_comments_358715.json:
```json
{
    "body": "Changing keywords from \"\" to \"pynac, 32-bit, overflow\".",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25451#issuecomment-358715",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing keywords from "" to "pynac, 32-bit, overflow".



---

archive/issue_comments_358716.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-19T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25451#issuecomment-358716",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_358717.json:
```json
{
    "body": "Rebased on the new #31585 that eliminates a merge conflict.\n----\nNew commits:",
    "created_at": "2021-06-28T05:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25451#issuecomment-358717",
    "user": "https://github.com/DaveWitteMorris"
}
```

Rebased on the new #31585 that eliminates a merge conflict.
----
New commits:



---

archive/issue_comments_358718.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-24T14:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25451#issuecomment-358718",
    "user": "https://github.com/slel"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_358719.json:
```json
{
    "body": "Please rebase.",
    "created_at": "2021-07-24T14:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25451#issuecomment-358719",
    "user": "https://github.com/slel"
}
```

Please rebase.



---

archive/issue_comments_358720.json:
```json
{
    "body": "Thanks for pointing out the merge conflict -- I hadn't noticed. I rebased on 9.4b6 (and deleted the dependency on #31585, which has already been merged).\n----\nNew commits:",
    "created_at": "2021-07-25T02:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25451#issuecomment-358720",
    "user": "https://github.com/DaveWitteMorris"
}
```

Thanks for pointing out the merge conflict -- I hadn't noticed. I rebased on 9.4b6 (and deleted the dependency on #31585, which has already been merged).
----
New commits:



---

archive/issue_comments_358721.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-25T02:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25451#issuecomment-358721",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_358722.json:
```json
{
    "body": "Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25451#issuecomment-358722",
    "user": "https://github.com/mkoeppe"
}
```

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_358723.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-08T06:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25451#issuecomment-358723",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_358724.json:
```json
{
    "body": "Thanks!",
    "created_at": "2022-03-08T06:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25451#issuecomment-358724",
    "user": "https://github.com/DaveWitteMorris"
}
```

Thanks!



---

archive/issue_events_023703.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2022-03-09T23:37:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25451#event-23703"
}
```



---

archive/issue_comments_358725.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-03-09T23:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25451#issuecomment-358725",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
