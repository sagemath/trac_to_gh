# Issue 32122: fedora 34: ./configure aborts while checking for pari.cfg

Issue created by migration from https://trac.sagemath.org/ticket/32359

Original creator: mkoeppe

Original creation time: 2021-08-10 16:50:50

CC:  vbraun mjo enriqueartal fbissey dcoudert dimpase slelievre vdelecroix


```
Checking whether SageMath should install SPKG gp2c...
checking whether any of pari is installed as or will be installed as SPKG... no
checking for gp2c... no
configure: no suitable system package found for SPKG gp2c
configure: gp prefix is /usr
configure: error: using system pari and unable to locate pari.cfg
```



---

Comment by mkoeppe created at 2021-08-10 16:57:25

As I said in #29491#comment:17, 
> Really shouldn't be using AC_MSG_ERROR at all here. If gp2c spkg-configure can't find the needed bits of pari, then we have to build our own pari.


---

Comment by mkoeppe created at 2021-08-10 18:17:27

Here's a minimal solution for this blocker issue.

More comprehensive solutions for the complicated "configure" situation as previously discussed in #29491 can be done in the 9.5 series; or hopefully upstream PARI could be convinced to provide a way to obtain the pari.cfg location.
----
New commits:


---

Comment by mkoeppe created at 2021-08-10 18:17:27

Changing status from new to needs_review.


---

Comment by dimpase created at 2021-08-10 18:52:34

perhaps add a similar thing for `lib32` - for 32-bit systems?


---

Comment by mkoeppe created at 2021-08-10 19:03:20

Fedora no longer supports i386, but I'll try `tox -e docker-fedora-34-arm32v7-standard -- cypari` now


---

Comment by mkoeppe created at 2021-08-10 22:56:51

Fedora configures PARI without threads on 32 bit, so configure rejects it.

```
checking comparing GP's and libpari's datadirs... libpari's and GP's datadirs match. Good
checking whether pari is configured with pthreads... no. Not good
configure: no suitable system package found for SPKG pari
```

So no need for additional changes for 32 bit.


---

Comment by @dimpase created at 2021-08-11 06:28:54

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-08-11 18:06:04

Thanks.


---

Comment by vbraun created at 2021-08-12 20:18:20

Resolution: fixed
