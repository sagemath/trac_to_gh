# Issue 32122: fedora 34: ./configure aborts while checking for pari.cfg

archive/issues_032122.json:
```json
{
    "body": "CC:  vbraun mjo enriqueartal fbissey dcoudert dimpase slelievre vdelecroix\n\n\n```\nChecking whether SageMath should install SPKG gp2c...\nchecking whether any of pari is installed as or will be installed as SPKG... no\nchecking for gp2c... no\nconfigure: no suitable system package found for SPKG gp2c\nconfigure: gp prefix is /usr\nconfigure: error: using system pari and unable to locate pari.cfg\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32359\n\n",
    "created_at": "2021-08-10T16:50:50Z",
    "labels": [
        "build: configure",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "fedora 34: ./configure aborts while checking for pari.cfg",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32122",
    "user": "mkoeppe"
}
```
CC:  vbraun mjo enriqueartal fbissey dcoudert dimpase slelievre vdelecroix


```
Checking whether SageMath should install SPKG gp2c...
checking whether any of pari is installed as or will be installed as SPKG... no
checking for gp2c... no
configure: no suitable system package found for SPKG gp2c
configure: gp prefix is /usr
configure: error: using system pari and unable to locate pari.cfg
```


Issue created by migration from https://trac.sagemath.org/ticket/32359





---

archive/issue_comments_458696.json:
```json
{
    "body": "As I said in #29491#comment:17, \n> Really shouldn't be using AC_MSG_ERROR at all here. If gp2c spkg-configure can't find the needed bits of pari, then we have to build our own pari.",
    "created_at": "2021-08-10T16:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32122#issuecomment-458696",
    "user": "mkoeppe"
}
```

As I said in #29491#comment:17, 
> Really shouldn't be using AC_MSG_ERROR at all here. If gp2c spkg-configure can't find the needed bits of pari, then we have to build our own pari.



---

archive/issue_comments_458697.json:
```json
{
    "body": "Here's a minimal solution for this blocker issue.\n\nMore comprehensive solutions for the complicated \"configure\" situation as previously discussed in #29491 can be done in the 9.5 series; or hopefully upstream PARI could be convinced to provide a way to obtain the pari.cfg location.\n----\nNew commits:",
    "created_at": "2021-08-10T18:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32122#issuecomment-458697",
    "user": "mkoeppe"
}
```

Here's a minimal solution for this blocker issue.

More comprehensive solutions for the complicated "configure" situation as previously discussed in #29491 can be done in the 9.5 series; or hopefully upstream PARI could be convinced to provide a way to obtain the pari.cfg location.
----
New commits:



---

archive/issue_comments_458698.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-10T18:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32122#issuecomment-458698",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_458699.json:
```json
{
    "body": "perhaps add a similar thing for `lib32` - for 32-bit systems?",
    "created_at": "2021-08-10T18:52:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32122#issuecomment-458699",
    "user": "dimpase"
}
```

perhaps add a similar thing for `lib32` - for 32-bit systems?



---

archive/issue_comments_458700.json:
```json
{
    "body": "Fedora no longer supports i386, but I'll try `tox -e docker-fedora-34-arm32v7-standard -- cypari` now",
    "created_at": "2021-08-10T19:03:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32122#issuecomment-458700",
    "user": "mkoeppe"
}
```

Fedora no longer supports i386, but I'll try `tox -e docker-fedora-34-arm32v7-standard -- cypari` now



---

archive/issue_comments_458701.json:
```json
{
    "body": "Fedora configures PARI without threads on 32 bit, so configure rejects it.\n\n```\nchecking comparing GP's and libpari's datadirs... libpari's and GP's datadirs match. Good\nchecking whether pari is configured with pthreads... no. Not good\nconfigure: no suitable system package found for SPKG pari\n```\n\nSo no need for additional changes for 32 bit.",
    "created_at": "2021-08-10T22:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32122#issuecomment-458701",
    "user": "mkoeppe"
}
```

Fedora configures PARI without threads on 32 bit, so configure rejects it.

```
checking comparing GP's and libpari's datadirs... libpari's and GP's datadirs match. Good
checking whether pari is configured with pthreads... no. Not good
configure: no suitable system package found for SPKG pari
```

So no need for additional changes for 32 bit.



---

archive/issue_comments_458702.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-11T06:28:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32122#issuecomment-458702",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_458703.json:
```json
{
    "body": "Thanks.",
    "created_at": "2021-08-11T18:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32122#issuecomment-458703",
    "user": "mkoeppe"
}
```

Thanks.



---

archive/issue_comments_458704.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-08-12T20:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32122#issuecomment-458704",
    "user": "vbraun"
}
```

Resolution: fixed
