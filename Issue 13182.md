# Issue 13182: Pass -no-undefined flag to autotool based spkg

archive/issues_013182.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  kcrisman dimpase\n\nKeywords: spkg shared library\n\nA bunch of spkg using autotools do not build shared libraries of Cygwin because -no-undefined flag is not passed to libtool:\n* cddlib,\n* ecm,\n* givaro,\n* glpk,\n* gsl,\n* iml,\n* libfplll,\n* linbox,\n* lrcalc,\n* mpfi.\n\neclib is fixed in #13325, ntl is in #11635.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13354\n\n",
    "created_at": "2012-08-09T08:21:56Z",
    "labels": [
        "porting: Cygwin",
        "major",
        "bug"
    ],
    "title": "Pass -no-undefined flag to autotool based spkg",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13182",
    "user": "jpflori"
}
```
Assignee: tbd

CC:  kcrisman dimpase

Keywords: spkg shared library

A bunch of spkg using autotools do not build shared libraries of Cygwin because -no-undefined flag is not passed to libtool:
* cddlib,
* ecm,
* givaro,
* glpk,
* gsl,
* iml,
* libfplll,
* linbox,
* lrcalc,
* mpfi.

eclib is fixed in #13325, ntl is in #11635.

Issue created by migration from https://trac.sagemath.org/ticket/13354





---

archive/issue_comments_160904.json:
```json
{
    "body": "Updates for\n* cddlib in #13026,\n* eclib in #13325,\n* ecm,\n* givaro in #9511, #13164,\n* glpk in #12703,\n* gsl,\n* iml in #748,\n* libfplll,\n* linbox in #12883,\n* lrcalc,\n* mpfi,\n* ntl in #11635.",
    "created_at": "2012-08-09T09:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160904",
    "user": "jpflori"
}
```

Updates for
* cddlib in #13026,
* eclib in #13325,
* ecm,
* givaro in #9511, #13164,
* glpk in #12703,
* gsl,
* iml in #748,
* libfplll,
* linbox in #12883,
* lrcalc,
* mpfi,
* ntl in #11635.



---

archive/issue_comments_160905.json:
```json
{
    "body": "For the updated fixed linbox, you'll need first iml, and then updated fixed givaro together with dependencies at #12840 and #12841.",
    "created_at": "2012-08-09T18:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160905",
    "user": "jpflori"
}
```

For the updated fixed linbox, you'll need first iml, and then updated fixed givaro together with dependencies at #12840 and #12841.



---

archive/issue_comments_160906.json:
```json
{
    "body": "Wrong button...",
    "created_at": "2012-08-09T18:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160906",
    "user": "jpflori"
}
```

Wrong button...



---

archive/issue_comments_160907.json:
```json
{
    "body": "The Linbox spkg from #12883 changed, so the one linked here is now outdated.",
    "created_at": "2012-08-20T19:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160907",
    "user": "jpflori"
}
```

The Linbox spkg from #12883 changed, so the one linked here is now outdated.



---

archive/issue_comments_160908.json:
```json
{
    "body": "The linbox spkg is now rebased on top of #12883, but nothing is committed.\nBy the way, the spkg there lacks an hg tag.",
    "created_at": "2012-08-20T20:13:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160908",
    "user": "jpflori"
}
```

The linbox spkg is now rebased on top of #12883, but nothing is committed.
By the way, the spkg there lacks an hg tag.



---

archive/issue_comments_160909.json:
```json
{
    "body": "Attachment\n\nSpkg diff, for review only.",
    "created_at": "2012-08-20T20:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160909",
    "user": "jpflori"
}
```

Attachment

Spkg diff, for review only.



---

archive/issue_comments_160910.json:
```json
{
    "body": "Reported upstream for givaro, mpfi, linbox, gsl.",
    "created_at": "2012-12-10T18:06:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160910",
    "user": "jpflori"
}
```

Reported upstream for givaro, mpfi, linbox, gsl.



---

archive/issue_comments_160911.json:
```json
{
    "body": "Reported for glpk and libfplll as well.",
    "created_at": "2012-12-10T19:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160911",
    "user": "jpflori"
}
```

Reported for glpk and libfplll as well.



---

archive/issue_comments_160912.json:
```json
{
    "body": "Contacted upstream ecm as well.",
    "created_at": "2012-12-10T20:40:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160912",
    "user": "jpflori"
}
```

Contacted upstream ecm as well.



---

archive/issue_comments_160913.json:
```json
{
    "body": "Reported for lrcalc as well.",
    "created_at": "2012-12-10T21:12:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160913",
    "user": "jpflori"
}
```

Reported for lrcalc as well.



---

archive/issue_comments_160914.json:
```json
{
    "body": "MPFI is fixed upstream, see:\nhttps://gforge.inria.fr/scm/viewvc.php?view=rev&root=mpfi&revision=656\n\nGivaro is fixed upstream:\nhttps://forge.imag.fr/scm/browser.php?group_id=187\n\nI'm working on lrcalc as now Sage is more or less upstream.\n(I guess IML will be the same.)\n\nAnd I'll provide quickly a patch for upstream ECM and it should get merged.\n\nFeedback from fplll which I guess will be fixed in a couple of weeks in the new version (so we'll have to update to get a shared library).\n\nFeedback from GSL and GLPK as well.\n\nNo feedback from LinBox yet.",
    "created_at": "2012-12-13T18:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160914",
    "user": "jpflori"
}
```

MPFI is fixed upstream, see:
https://gforge.inria.fr/scm/viewvc.php?view=rev&root=mpfi&revision=656

Givaro is fixed upstream:
https://forge.imag.fr/scm/browser.php?group_id=187

I'm working on lrcalc as now Sage is more or less upstream.
(I guess IML will be the same.)

And I'll provide quickly a patch for upstream ECM and it should get merged.

Feedback from fplll which I guess will be fixed in a couple of weeks in the new version (so we'll have to update to get a shared library).

Feedback from GSL and GLPK as well.

No feedback from LinBox yet.



---

archive/issue_comments_160915.json:
```json
{
    "body": "I've open a ticket for lrcalc, see #13839.\nSpkg coming soon.",
    "created_at": "2012-12-17T15:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160915",
    "user": "jpflori"
}
```

I've open a ticket for lrcalc, see #13839.
Spkg coming soon.



---

archive/issue_comments_160916.json:
```json
{
    "body": "ECM is fixed upstream.\nSee\nhttps://gforge.inria.fr/scm/viewvc.php?view=rev&root=ecm&revision=2304",
    "created_at": "2012-12-18T19:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160916",
    "user": "jpflori"
}
```

ECM is fixed upstream.
See
https://gforge.inria.fr/scm/viewvc.php?view=rev&root=ecm&revision=2304



---

archive/issue_comments_160917.json:
```json
{
    "body": "JP, if you could be sure to somehow indicate on tickets you open for this that this is the metaticket for them?",
    "created_at": "2013-01-07T16:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160917",
    "user": "kcrisman"
}
```

JP, if you could be sure to somehow indicate on tickets you open for this that this is the metaticket for them?



---

archive/issue_comments_160918.json:
```json
{
    "body": "Replying to [comment:19 kcrisman]:\n> JP, if you could be sure to somehow indicate on tickets you open for this that this is the metaticket for them?\nI'll try :)",
    "created_at": "2013-01-29T22:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160918",
    "user": "jpflori"
}
```

Replying to [comment:19 kcrisman]:
> JP, if you could be sure to somehow indicate on tickets you open for this that this is the metaticket for them?
I'll try :)



---

archive/issue_comments_160919.json:
```json
{
    "body": "Libgap needs fixing as well.",
    "created_at": "2013-01-29T22:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160919",
    "user": "jpflori"
}
```

Libgap needs fixing as well.



---

archive/issue_comments_160920.json:
```json
{
    "body": "Changing type from defect to task.",
    "created_at": "2013-01-29T22:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160920",
    "user": "jpflori"
}
```

Changing type from defect to task.



---

archive/issue_comments_160921.json:
```json
{
    "body": "libgap ticket at #14038",
    "created_at": "2013-01-29T22:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160921",
    "user": "jpflori"
}
```

libgap ticket at #14038



---

archive/issue_comments_160922.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-01-30T13:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160922",
    "user": "jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_160923.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-01-30T13:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160923",
    "user": "jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_160924.json:
```json
{
    "body": "Tentative gsl fixed and dirty spkg which seems to let some doctests which failed before pass at\nhttp://boxen.math.washington.edu/home/jpflori/gsl-1.15.p1.spkg",
    "created_at": "2013-02-04T21:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160924",
    "user": "jpflori"
}
```

Tentative gsl fixed and dirty spkg which seems to let some doctests which failed before pass at
http://boxen.math.washington.edu/home/jpflori/gsl-1.15.p1.spkg



---

archive/issue_comments_160925.json:
```json
{
    "body": "As we observed on #14038, this change can break OSX. So these changes should be made CYGWIN-only, or non-OSX only. (I don't know if there is any advantage to use -no-undefined, e.g. performance-wise).",
    "created_at": "2013-02-06T06:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160925",
    "user": "dimpase"
}
```

As we observed on #14038, this change can break OSX. So these changes should be made CYGWIN-only, or non-OSX only. (I don't know if there is any advantage to use -no-undefined, e.g. performance-wise).



---

archive/issue_comments_160926.json:
```json
{
    "body": "GSL was #14096.",
    "created_at": "2013-02-19T14:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160926",
    "user": "jpflori"
}
```

GSL was #14096.



---

archive/issue_comments_160927.json:
```json
{
    "body": "libfplll has been fixed upstream in version 4.0.3.",
    "created_at": "2013-05-14T09:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160927",
    "user": "jpflori"
}
```

libfplll has been fixed upstream in version 4.0.3.



---

archive/issue_comments_160928.json:
```json
{
    "body": "#15014 is for gf2x, this prevents building NTL on Cygwin...",
    "created_at": "2013-08-06T21:34:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160928",
    "user": "jpflori"
}
```

#15014 is for gf2x, this prevents building NTL on Cygwin...



---

archive/issue_comments_160929.json:
```json
{
    "body": "For the record, the spkg needing patches are as far as I know:\n* iml\n* glpk\n* cddlib",
    "created_at": "2014-01-08T14:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160929",
    "user": "jpflori"
}
```

For the record, the spkg needing patches are as far as I know:
* iml
* glpk
* cddlib



---

archive/issue_comments_160930.json:
```json
{
    "body": "Opened #15839 for IML.",
    "created_at": "2014-02-20T16:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160930",
    "user": "jpflori"
}
```

Opened #15839 for IML.



---

archive/issue_comments_160931.json:
```json
{
    "body": "GSL has been fixed upstream!\nhttp://git.savannah.gnu.org/cgit/gsl.git/commit/?id=1d002ee931b6a19333416ba8c4c4cccbc009b6a9",
    "created_at": "2014-02-21T19:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160931",
    "user": "jpflori"
}
```

GSL has been fixed upstream!
http://git.savannah.gnu.org/cgit/gsl.git/commit/?id=1d002ee931b6a19333416ba8c4c4cccbc009b6a9



---

archive/issue_comments_160932.json:
```json
{
    "body": "Opened #15872 for cddlib.",
    "created_at": "2014-02-27T10:37:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160932",
    "user": "jpflori"
}
```

Opened #15872 for cddlib.



---

archive/issue_comments_160933.json:
```json
{
    "body": "All packages we currently ship are ok upstream or configured or patched by us.",
    "created_at": "2014-11-25T14:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160933",
    "user": "jpflori"
}
```

All packages we currently ship are ok upstream or configured or patched by us.



---

archive/issue_comments_160934.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-11-25T14:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160934",
    "user": "jpflori"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_160935.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-30T14:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13182#issuecomment-160935",
    "user": "vbraun"
}
```

Resolution: fixed
