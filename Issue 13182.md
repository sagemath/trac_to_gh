# Issue 13182: Pass -no-undefined flag to autotool based spkg

Issue created by migration from Trac.

Original creator: jpflori

Original creation time: 2012-08-09 08:21:56

Assignee: tbd

CC:  kcrisman dimpase

Keywords: spkg shared library

A bunch of spkg using autotools do not build shared libraries of Cygwin because -no-undefined flag is not passed to libtool:
* cddlib,
* ecm,
* givaro,
* glpk,
* gsl,
* iml,
* libfplll,
* linbox,
* lrcalc,
* mpfi.

eclib is fixed in #13325, ntl is in #11635.


---

Comment by jpflori created at 2012-08-09 09:16:39

Updates for
* cddlib in #13026,
* eclib in #13325,
* ecm,
* givaro in #9511, #13164,
* glpk in #12703,
* gsl,
* iml in #748,
* libfplll,
* linbox in #12883,
* lrcalc,
* mpfi,
* ntl in #11635.


---

Comment by jpflori created at 2012-08-09 18:42:05

For the updated fixed linbox, you'll need first iml, and then updated fixed givaro together with dependencies at #12840 and #12841.


---

Comment by jpflori created at 2012-08-09 18:49:00

Wrong button...


---

Comment by jpflori created at 2012-08-20 19:58:48

The Linbox spkg from #12883 changed, so the one linked here is now outdated.


---

Comment by jpflori created at 2012-08-20 20:13:46

The linbox spkg is now rebased on top of #12883, but nothing is committed.
By the way, the spkg there lacks an hg tag.


---

Attachment

Spkg diff, for review only.


---

Comment by jpflori created at 2012-12-10 18:06:23

Reported upstream for givaro, mpfi, linbox, gsl.


---

Comment by jpflori created at 2012-12-10 19:56:31

Reported for glpk and libfplll as well.


---

Comment by jpflori created at 2012-12-10 20:40:27

Contacted upstream ecm as well.


---

Comment by jpflori created at 2012-12-10 21:12:32

Reported for lrcalc as well.


---

Comment by jpflori created at 2012-12-13 18:47:10

MPFI is fixed upstream, see:
https://gforge.inria.fr/scm/viewvc.php?view=rev&root=mpfi&revision=656

Givaro is fixed upstream:
https://forge.imag.fr/scm/browser.php?group_id=187

I'm working on lrcalc as now Sage is more or less upstream.
(I guess IML will be the same.)

And I'll provide quickly a patch for upstream ECM and it should get merged.

Feedback from fplll which I guess will be fixed in a couple of weeks in the new version (so we'll have to update to get a shared library).

Feedback from GSL and GLPK as well.

No feedback from LinBox yet.


---

Comment by jpflori created at 2012-12-17 15:47:46

I've open a ticket for lrcalc, see #13839.
Spkg coming soon.


---

Comment by jpflori created at 2012-12-18 19:05:52

ECM is fixed upstream.
See
https://gforge.inria.fr/scm/viewvc.php?view=rev&root=ecm&revision=2304


---

Comment by kcrisman created at 2013-01-07 16:48:00

JP, if you could be sure to somehow indicate on tickets you open for this that this is the metaticket for them?


---

Comment by jpflori created at 2013-01-29 22:44:12

Replying to [comment:19 kcrisman]:
> JP, if you could be sure to somehow indicate on tickets you open for this that this is the metaticket for them?
I'll try :)


---

Comment by jpflori created at 2013-01-29 22:45:21

Libgap needs fixing as well.


---

Comment by jpflori created at 2013-01-29 22:45:21

Changing type from defect to task.


---

Comment by jpflori created at 2013-01-29 22:52:33

libgap ticket at #14038


---

Comment by jpflori created at 2013-01-30 13:01:18

Changing status from new to needs_review.


---

Comment by jpflori created at 2013-01-30 13:05:10

Changing status from needs_review to needs_work.


---

Comment by jpflori created at 2013-02-04 21:49:17

Tentative gsl fixed and dirty spkg which seems to let some doctests which failed before pass at
http://boxen.math.washington.edu/home/jpflori/gsl-1.15.p1.spkg


---

Comment by dimpase created at 2013-02-06 06:58:44

As we observed on #14038, this change can break OSX. So these changes should be made CYGWIN-only, or non-OSX only. (I don't know if there is any advantage to use -no-undefined, e.g. performance-wise).


---

Comment by jpflori created at 2013-02-19 14:39:25

GSL was #14096.


---

Comment by jpflori created at 2013-05-14 09:40:07

libfplll has been fixed upstream in version 4.0.3.


---

Comment by jpflori created at 2013-08-06 21:34:10

#15014 is for gf2x, this prevents building NTL on Cygwin...


---

Comment by jpflori created at 2014-01-08 14:25:59

For the record, the spkg needing patches are as far as I know:
* iml
* glpk
* cddlib


---

Comment by jpflori created at 2014-02-20 16:36:23

Opened #15839 for IML.


---

Comment by jpflori created at 2014-02-21 19:46:15

GSL has been fixed upstream!
http://git.savannah.gnu.org/cgit/gsl.git/commit/?id=1d002ee931b6a19333416ba8c4c4cccbc009b6a9


---

Comment by jpflori created at 2014-02-27 10:37:26

Opened #15872 for cddlib.


---

Comment by jpflori created at 2014-11-25 14:35:36

All packages we currently ship are ok upstream or configured or patched by us.


---

Comment by jpflori created at 2014-11-25 14:35:36

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2014-11-30 14:18:13

Resolution: fixed
