# Issue 17612: substitute_function should not evaluate expression

archive/issues_017612.json:
```json
{
    "body": "One expects `substitute_function` to not do anything except exchanging parts of expressions but\n\n```\nsage: ex = sin(x) + atan2(0,0,hold=True) \nsage: ex.substitute_function(sin,cos)\n...\nRuntimeError: arctan2_eval(): arctan2(0,0) encountered\nsage: ex = sin(x) + hypergeometric([1, 1], [2], -1)\nsage: ex\nhypergeometric((1, 1), (2,), -1) + sin(x)\nsage: ex.substitute_function(sin,cos)              \nAttributeError: 'SubstituteFunction' object has no attribute 'tuple'\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17849\n\n",
    "created_at": "2015-02-24T14:46:55Z",
    "labels": [
        "symbolics",
        "major",
        "bug"
    ],
    "title": "substitute_function should not evaluate expression",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17612",
    "user": "rws"
}
```
One expects `substitute_function` to not do anything except exchanging parts of expressions but

```
sage: ex = sin(x) + atan2(0,0,hold=True) 
sage: ex.substitute_function(sin,cos)
...
RuntimeError: arctan2_eval(): arctan2(0,0) encountered
sage: ex = sin(x) + hypergeometric([1, 1], [2], -1)
sage: ex
hypergeometric((1, 1), (2,), -1) + sin(x)
sage: ex.substitute_function(sin,cos)              
AttributeError: 'SubstituteFunction' object has no attribute 'tuple'
```


Issue created by migration from https://trac.sagemath.org/ticket/17849





---

archive/issue_comments_235301.json:
```json
{
    "body": "Calling `operator(*map(self, ex.operands()), hold=True)` as a quick fix in `SubstituteFunction.composition` presupposes that all operators accept the keyword.",
    "created_at": "2015-02-27T09:00:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17612#issuecomment-235301",
    "user": "rws"
}
```

Calling `operator(*map(self, ex.operands()), hold=True)` as a quick fix in `SubstituteFunction.composition` presupposes that all operators accept the keyword.



---

archive/issue_comments_235302.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-03-04T16:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17612#issuecomment-235302",
    "user": "rws"
}
```

New commits:



---

archive/issue_comments_235303.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-04T16:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17612#issuecomment-235303",
    "user": "rws"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_235304.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-05-25T07:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17612#issuecomment-235304",
    "user": "rws"
}
```

New commits:



---

archive/issue_comments_235305.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-25T10:07:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17612#issuecomment-235305",
    "user": "mmezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_235306.json:
```json
{
    "body": "Thanks.",
    "created_at": "2015-05-25T12:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17612#issuecomment-235306",
    "user": "rws"
}
```

Thanks.



---

archive/issue_comments_235307.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-25T22:49:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17612#issuecomment-235307",
    "user": "vbraun"
}
```

Resolution: fixed
