# Issue 17612: substitute_function should not evaluate expression

Issue created by migration from https://trac.sagemath.org/ticket/17849

Original creator: rws

Original creation time: 2015-02-24 14:46:55

One expects `substitute_function` to not do anything except exchanging parts of expressions but

```
sage: ex = sin(x) + atan2(0,0,hold=True) 
sage: ex.substitute_function(sin,cos)
...
RuntimeError: arctan2_eval(): arctan2(0,0) encountered
sage: ex = sin(x) + hypergeometric([1, 1], [2], -1)
sage: ex
hypergeometric((1, 1), (2,), -1) + sin(x)
sage: ex.substitute_function(sin,cos)              
AttributeError: 'SubstituteFunction' object has no attribute 'tuple'
```



---

Comment by rws created at 2015-02-27 09:00:37

Calling `operator(*map(self, ex.operands()), hold=True)` as a quick fix in `SubstituteFunction.composition` presupposes that all operators accept the keyword.


---

Comment by rws created at 2015-03-04 16:37:39

New commits:


---

Comment by rws created at 2015-03-04 16:37:39

Changing status from new to needs_review.


---

Comment by rws created at 2015-05-25 07:04:21

New commits:


---

Comment by mmezzarobba created at 2015-05-25 10:07:51

Changing status from needs_review to positive_review.


---

Comment by rws created at 2015-05-25 12:47:50

Thanks.


---

Comment by vbraun created at 2015-05-25 22:49:43

Resolution: fixed
