# Issue 24348: r_jupyter package is broken

Issue created by migration from https://trac.sagemath.org/ticket/24585

Original creator: tmonteil

Original creation time: 2018-01-22 23:10:37

CC:  vbraun charpent

First, when trying to `sage -i r_jupyter`, the install fails since the `spkg-install` script is not executable (apparently nobody tried to install that package for a while):


```
cd '/opt/sagemath/sage-source' && \
    source '/opt/sagemath/sage-source/src/bin/sage-env' && \
    sage-logger -p '/opt/sagemath/sage-source/build/pkgs/r_jupyter/spkg-install' /opt/sagemath/sage-source/logs/pkgs/r_jupyter.log
[r_jupyter] /opt/sagemath/sage-source/build/bin/sage-logger: line 89: /opt/sagemath/sage-source/build/pkgs/r_jupyter/spkg-install: Permission denied
```


Then, if u make that file executable, the script does not work at all:


```
[r_jupyter] Warning message:
[r_jupyter] package 'IRkernel' is not available (for R version 3.4.3) 
[r_jupyter] > IRkernel::installspec()
[r_jupyter] Error in loadNamespace(name) : there is no package called 'IRkernel'
[r_jupyter] Calls: :: ... tryCatch -> tryCatchList -> tryCatchOne -> <Anonymous>
[r_jupyter] Execution halted
```


Documentation can be found at https://irkernel.github.io/installation/

We modify it so that the kernel is installed at the right place.


---

Comment by tmonteil created at 2018-01-22 23:19:12

New commits:


---

Comment by tmonteil created at 2018-01-22 23:19:12

Changing status from new to needs_review.


---

Comment by charpent created at 2018-01-23 07:31:54

`r_jupyter` has been uninstallable for a long time : its installation procedure refers to outdated locations. I have been installing IRkernel "by hand"  for a while.

The problem is that [IRkernel](https://github.com/IRkernel/IRkernel) is not (yet) on CRAN ; their authors say they intend to subit it  [soon](https://github.com/IRkernel/IRkernel#installation) to CRAN, bu have intended so for a looong time. The [serial](https://github.com/IRkernel/IRkernel/issues/528) does not seem to be close to an end...

Meanwhile, CRAN recently accepted a new [Junyper](https://cran.r-project.org/web/packages/JuniperKernel/index.html) package which seems to be an(other) interface between R an Jupyter. A simple skimming of its [manual](https://cran.r-project.org/web/packages/JuniperKernel/JuniperKernel.pdf) lets me think that this could be an alternative to IRkernel.

I'll have to test this, but that won't be soon (some RealLife(TM) emergencies to fix...).


---

Comment by charpent created at 2018-03-21 19:26:46

Changing status from needs_review to needs_work.


---

Comment by charpent created at 2018-03-21 19:26:46

[ Sorry for the delay : this patch fell in the black hole I use as my //To Do// list...]

The current Github `README.md` installs only `IRkernel` from Github. and indeed, [crayon](https://cran.r-project.org/web/packages/crayon/index.html), [repr](https://cran.r-project.org/web/packages/crayon/index.html) and [IRdisplay](https://cran.r-project.org/web/packages/IRdisplay/index.html) are all installable from [CRAN](https://cran.r-project.org/web/packages/).

I think that we should follow this policy (depend as little as possible on non-CRAN packages).

+1 to install the kernel in the common repository for Sage kernels.

==>`needs_work`. I may do this if you wish (and can review it).

OTOH, the [Juniper](https://cran.r-project.org/web/packages/JuniperKernel/index.html) kernel is also an attractive alternative, which is available via CRAN, but is still a [tad](https://github.com/JuniperKernel/JuniperKernel/issues/29) [immature](https://github.com/JuniperKernel/JuniperKernel/issues/27).

When matured, it might be proposed as an alternative or as a substitute to `r_jupyter`.


---

Comment by charpent created at 2018-03-21 19:40:04

I forgot to add that I tested successfully the [Juniper](https://cran.r-project.org/web/packages/JuniperKernel/index.html) kernel, with zero Sage-specific problem (the kernel itself has some issues, pointed to in the previous post...).


---

Comment by git created at 2018-03-21 23:28:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tmonteil created at 2018-03-21 23:32:23

Changing status from needs_work to needs_review.


---

Comment by charpent created at 2018-03-22 12:34:50

Changing status from needs_review to positive_review.


---

Comment by charpent created at 2018-03-22 12:34:50

On top of 8.2.beta8+#24969 (which `needs_review`, BTW), passes ptestlong without ant failure whatsoever.

AFAICT, the snag met by some patchbots is independent : this problem has already been discussed on [sage-devel](https://groups.google.com/forum/#!forum/sage-devel).

==>`positive_review`


---

Comment by vbraun created at 2018-05-08 17:26:34

Resolution: fixed


---

Comment by tmonteil created at 2019-08-27 19:45:19

Changing keywords from "" to "sdl".
