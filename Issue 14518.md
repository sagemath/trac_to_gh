# Issue 14518: Add at_startup flag to lazy_import

Issue created by migration from Trac.

Original creator: nthiery

Original creation time: 2013-06-11 17:59:48

Assignee: jason

CC:  rishi jason rlm mhansen simonking

Lazy imports have two main use cases:
(a) Delaying imports that are not always needed for a faster Sage startup
(b) Resolving import loops

This ticket introduce an option "at_startup" to allow for lazy imports
that are known to be resolved at startup time. The main use case is
(b) in the context of #10963. E.g. the categories Magmas and
Semigroups import each other reciprocally (because Magmas.Associative
points to Semigroups). It is natural to resolve this by defining
Magmas.Associative using a lazy import; one can then play with
Magmas() without having to load Semigroups. However Semigroups() is
later constructed during Sage's startup (and this is unlikely to
change).

This option could also be used as an intermediate step toward (a),
when a module is used in several places and some of those places can
already afford to lazy import the module but not yet others. As a
bonus, a lazy import that is marked as "at_startup" will print a
message if it is actually resolved after the startup, so that the
developer know that (s)he can remove the flag.



---

Attachment


---

Comment by nthiery created at 2013-06-11 18:16:09

Changing status from new to needs_review.


---

Comment by tscrim created at 2013-06-21 14:58:07

I'm happy with the patch; are there any objections?

Best,

Travis


---

Comment by tscrim created at 2013-06-27 15:28:09

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2013-06-27 15:28:09

Since there are no objections, I'm setting this to positive review.


---

Comment by jdemeyer created at 2013-08-16 21:12:15

Resolution: fixed
