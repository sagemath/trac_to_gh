# Issue 1293: sage is too big!

Issue created by migration from Trac.

Original creator: zimmerma

Original creation time: 2007-11-27 17:40:01

Assignee: mabshoff

I was told that SAGE did use less memory than Maple or Mathematica. I did check on sage.math.washington.edu:

```
zimmerma`@`sage:~$ du -s /usr/local/maple10
388908  /usr/local/maple10

zimmerma`@`sage:~$ du -s /usr/local/mathematica-5.2
641016  /usr/local/mathematica-5.2

sage:/tmp/zimmerma/sage-2.8.14> make install DESTDIR=/tmp/zimmerma/sage-2.8.14-\
install
sage:/tmp/zimmerma/sage-2.8.14> du -s /tmp/zimmerma/sage-2.8.14-install
1237280 /tmp/zimmerma/sage-2.8.14-install
```

I can understand that the SAGE developers need all the source and binaries installed, but I wish a minimal
version for the simple user that would use at most the same amount of memory than Maple or Mathematica,
not 2 times or 3 times more!


---

Comment by mabshoff created at 2007-11-27 18:24:52

Well, your numbers are slighly inflated because "make install" is still experimental and copies fata not needed:

```
mabshoff`@`sage:/tmp/Work-mabshoff/size$ du -sch sage-2.8.13-use_this_on_sage_dot_math-x86_64-Linux
802M    sage-2.8.13-use_this_on_sage_dot_math-x86_64-Linux
```

The current 2.8.13 binary expands to 802 MB which is still too large, but somewhat smaller than the 1.2GB you had.

But it would be a good thing to slim down the installed Sage if it is possible.

Cheers,

Michael


---

Comment by malb created at 2007-12-06 16:31:15

Some numbers:

 * a fresh _2.8.13_ is *804M* (binary release, i.e. `spkg` is basically empty)
 * after _strip_ing all executable files + `*.so` we are down to *655M*
 * if we - as an experiment only, this shouldn't be done in real lift because it breaks updates etc. - also remove `*.a` we are down to *536M*
 * of this *149M* are in `devel` and *344M* are in `local`


---

Comment by zimmerma created at 2007-12-17 12:22:07

Here are the brand new figures for sage-2.9 on a 64-bit computer (Opteron under Fedora7):

```
achille% du -s /usr/local/sage-2.9
1517144 /usr/local/sage-2.9
```

If the figures are comparable on sage.math (which I assume) this is 2.4 times larger than Mathematica and 3.9 times
larger than Maple.


---

Comment by malb created at 2008-09-28 15:47:39

Some new datapoints:
 * 3.1.3.alpha1 is *1.7GB* after compilation (64-bit Linux),
 * it is safe to delete all spkgs in `$SAGE_ROOT/spkgs/standard`,
 * it is safe to strip executables,
 * it is safe to strip shared libraries with `-g -R .comment -R .note`,
 * one may delete all of `$SAGE_ROOT/devel/sage/build` except for the `sage` subdirectory.

The result is *1.1GB* which is still massive. I'm building with `-Os` now to see how much of a difference that makes.


---

Comment by malb created at 2008-09-28 15:52:40

I think this should also be safe in `$SAGE_ROOT/devel/sage/sage/`


```
for f in `find -name "*.pyx"`; do echo $f | sed "s/\.pyx/\.c/" | xargs rm; done
```



```
for f in `find -name "*.pyx"`; do echo $f | sed "s/\.pyx/\.cpp/" | xargs rm; done
```


to delete all autogenerated `.c` and `.cpp` files.

This seems to free ~ 80MB


---

Comment by malb created at 2008-09-28 15:54:57

Actually, the result is smaller than *1.1GB* as I forgot to strip the Sage extensions. The result including the add-on above is *978M* but still fully functional, I believe.


---

Comment by zimmerma created at 2010-02-05 20:31:56

I guess this issue won't be fixed, thus I close this ticket.


---

Comment by zimmerma created at 2010-02-05 20:31:56

Resolution: wontfix


---

Comment by mvngu created at 2010-02-05 21:13:19

Resolution changed from wontfix to worksforme


---

Comment by mvngu created at 2010-02-05 21:13:19

Make sure you understand the procedure for closing tickets. See [this section](http://www.sagemath.org/doc/developer/trac.html#closing-tickets) of the Developer's Guide for more information.


---

Comment by zimmerma created at 2010-02-07 21:07:09

Sorry I didn't know I wasn't allowed to close tickets!
It would be better to remove the "closed" button for "normal" users.
