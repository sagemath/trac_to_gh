# Issue 31666: Build errors in padic_relaxed_element

Issue created by migration from https://trac.sagemath.org/ticket/31903

Original creator: mkoeppe

Original creation time: 2021-06-03 22:33:20

CC:  dimpase caruso roed vbraun

9.4.beta0 fails to build:

https://github.com/sagemath/sage/runs/2670399286?check_suite_focus=true

```
  [sagelib-9.4.beta0]   building 'sage.rings.padics.padic_relaxed_element' extension
  [sagelib-9.4.beta0]   Executing 1 command (using 1 thread)
  [sagelib-9.4.beta0]   [1/1] gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -O2 -g -march=native -O2 -g -march=native -fPIC -I./sage/cpython -I./sage/libs/flint -Isage/libs/flint -I/sage/build/pkgs/sagelib/src -I/sage/local/include/python3.9 -I/sage/local/lib/python3.9/site-packages/numpy/core/include -Ibuild/cythonized -I/sage/local/include/python3.9 -c build/cythonized/sage/rings/padics/padic_relaxed_element.c -o build/temp.linux-x86_64-3.9/build/cythonized/sage/rings/padics/padic_relaxed_element.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c99
  [sagelib-9.4.beta0]   build/cythonized/sage/rings/padics/padic_relaxed_element.c:5174:60: fatal error: sage/libs/linkages/padics/relaxed/flint_helper.c: No such file or directory
```




---

Comment by mkoeppe created at 2021-06-03 22:49:12

I think `__init__.py` is missing in the new directory `libs/linkages/padics/relaxed`, so it is not recognized as a package directory


---

Comment by mkoeppe created at 2021-06-03 22:52:48

Actually I think the problem is that `flint_helper.c` was not added as an exception to `.gitignore`, so all Docker-based builds (which use `.dockerignore` -> `.gitignore`) are broken


---

Comment by mkoeppe created at 2021-06-03 23:06:54

New commits:


---

Comment by roed created at 2021-06-04 05:25:30

I'm fine with this fix, but I'm not sure how to parse the output of https://github.com/mkoeppe/sage/actions/runs/904504331.  It seems to have various numpy failures but not the failure reported in this ticket.  Will all of the jobs eventually finish there?


---

Comment by dimpase created at 2021-06-04 07:57:37

Changing status from new to needs_review.


---

Comment by dimpase created at 2021-06-04 07:57:37

probably what's tested has more stuff in than just this branch.


---

Comment by mkoeppe created at 2021-06-04 18:19:09

Replying to [comment:6 roed]:
> I'm fine with this fix, but I'm not sure how to parse the output of https://github.com/mkoeppe/sage/actions/runs/904504331.  It seems to have various numpy failures but not the failure reported in this ticket.  Will all of the jobs eventually finish there?

This GH Actions run used the branch from this ticket together with the one from #31008, numpy upgrade. 

The failures reported on the present ticket are fixed by the branch.

Ready for review


---

Comment by vbraun created at 2021-06-05 18:17:10

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-06-06 13:16:40

Resolution: fixed
