# Issue 31666: Build errors in padic_relaxed_element

archive/issues_031666.json:
```json
{
    "body": "CC:  dimpase caruso roed vbraun\n\n9.4.beta0 fails to build:\n\nhttps://github.com/sagemath/sage/runs/2670399286?check_suite_focus=true\n\n```\n  [sagelib-9.4.beta0]   building 'sage.rings.padics.padic_relaxed_element' extension\n  [sagelib-9.4.beta0]   Executing 1 command (using 1 thread)\n  [sagelib-9.4.beta0]   [1/1] gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -O2 -g -march=native -O2 -g -march=native -fPIC -I./sage/cpython -I./sage/libs/flint -Isage/libs/flint -I/sage/build/pkgs/sagelib/src -I/sage/local/include/python3.9 -I/sage/local/lib/python3.9/site-packages/numpy/core/include -Ibuild/cythonized -I/sage/local/include/python3.9 -c build/cythonized/sage/rings/padics/padic_relaxed_element.c -o build/temp.linux-x86_64-3.9/build/cythonized/sage/rings/padics/padic_relaxed_element.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c99\n  [sagelib-9.4.beta0]   build/cythonized/sage/rings/padics/padic_relaxed_element.c:5174:60: fatal error: sage/libs/linkages/padics/relaxed/flint_helper.c: No such file or directory\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/31903\n\n",
    "created_at": "2021-06-03T22:33:20Z",
    "labels": [
        "padics",
        "blocker",
        "bug"
    ],
    "title": "Build errors in padic_relaxed_element",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31666",
    "user": "mkoeppe"
}
```
CC:  dimpase caruso roed vbraun

9.4.beta0 fails to build:

https://github.com/sagemath/sage/runs/2670399286?check_suite_focus=true

```
  [sagelib-9.4.beta0]   building 'sage.rings.padics.padic_relaxed_element' extension
  [sagelib-9.4.beta0]   Executing 1 command (using 1 thread)
  [sagelib-9.4.beta0]   [1/1] gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -O2 -g -march=native -O2 -g -march=native -fPIC -I./sage/cpython -I./sage/libs/flint -Isage/libs/flint -I/sage/build/pkgs/sagelib/src -I/sage/local/include/python3.9 -I/sage/local/lib/python3.9/site-packages/numpy/core/include -Ibuild/cythonized -I/sage/local/include/python3.9 -c build/cythonized/sage/rings/padics/padic_relaxed_element.c -o build/temp.linux-x86_64-3.9/build/cythonized/sage/rings/padics/padic_relaxed_element.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c99
  [sagelib-9.4.beta0]   build/cythonized/sage/rings/padics/padic_relaxed_element.c:5174:60: fatal error: sage/libs/linkages/padics/relaxed/flint_helper.c: No such file or directory
```



Issue created by migration from https://trac.sagemath.org/ticket/31903





---

archive/issue_comments_452333.json:
```json
{
    "body": "I think `__init__.py` is missing in the new directory `libs/linkages/padics/relaxed`, so it is not recognized as a package directory",
    "created_at": "2021-06-03T22:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31666#issuecomment-452333",
    "user": "mkoeppe"
}
```

I think `__init__.py` is missing in the new directory `libs/linkages/padics/relaxed`, so it is not recognized as a package directory



---

archive/issue_comments_452334.json:
```json
{
    "body": "Actually I think the problem is that `flint_helper.c` was not added as an exception to `.gitignore`, so all Docker-based builds (which use `.dockerignore` -> `.gitignore`) are broken",
    "created_at": "2021-06-03T22:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31666#issuecomment-452334",
    "user": "mkoeppe"
}
```

Actually I think the problem is that `flint_helper.c` was not added as an exception to `.gitignore`, so all Docker-based builds (which use `.dockerignore` -> `.gitignore`) are broken



---

archive/issue_comments_452335.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-06-03T23:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31666#issuecomment-452335",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_452336.json:
```json
{
    "body": "I'm fine with this fix, but I'm not sure how to parse the output of https://github.com/mkoeppe/sage/actions/runs/904504331.  It seems to have various numpy failures but not the failure reported in this ticket.  Will all of the jobs eventually finish there?",
    "created_at": "2021-06-04T05:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31666#issuecomment-452336",
    "user": "roed"
}
```

I'm fine with this fix, but I'm not sure how to parse the output of https://github.com/mkoeppe/sage/actions/runs/904504331.  It seems to have various numpy failures but not the failure reported in this ticket.  Will all of the jobs eventually finish there?



---

archive/issue_comments_452337.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-04T07:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31666#issuecomment-452337",
    "user": "dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_452338.json:
```json
{
    "body": "probably what's tested has more stuff in than just this branch.",
    "created_at": "2021-06-04T07:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31666#issuecomment-452338",
    "user": "dimpase"
}
```

probably what's tested has more stuff in than just this branch.



---

archive/issue_comments_452339.json:
```json
{
    "body": "Replying to [comment:6 roed]:\n> I'm fine with this fix, but I'm not sure how to parse the output of https://github.com/mkoeppe/sage/actions/runs/904504331.  It seems to have various numpy failures but not the failure reported in this ticket.  Will all of the jobs eventually finish there?\n\nThis GH Actions run used the branch from this ticket together with the one from #31008, numpy upgrade. \n\nThe failures reported on the present ticket are fixed by the branch.\n\nReady for review",
    "created_at": "2021-06-04T18:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31666#issuecomment-452339",
    "user": "mkoeppe"
}
```

Replying to [comment:6 roed]:
> I'm fine with this fix, but I'm not sure how to parse the output of https://github.com/mkoeppe/sage/actions/runs/904504331.  It seems to have various numpy failures but not the failure reported in this ticket.  Will all of the jobs eventually finish there?

This GH Actions run used the branch from this ticket together with the one from #31008, numpy upgrade. 

The failures reported on the present ticket are fixed by the branch.

Ready for review



---

archive/issue_comments_452340.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-05T18:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31666#issuecomment-452340",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452341.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-06T13:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31666#issuecomment-452341",
    "user": "vbraun"
}
```

Resolution: fixed
