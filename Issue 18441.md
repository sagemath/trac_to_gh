# Issue 18441: Implement convolution_product for HopfAlgebras

Issue created by migration from Trac.

Original creator: alauve

Original creation time: 2015-06-11 16:53:04

CC:  zabrocki saliola sage-combinat amypang nthiery virmaux jhpalmieri nborie mshimo tscrim elixyre

Keywords: days65, convolution product

Description to come (we're working live at Sage Days 65).


---

Comment by saliola created at 2015-06-11 17:07:22

I have some ideas for you...
----
New commits:


---

Comment by saliola created at 2015-06-11 17:07:53

Changing status from new to needs_review.


---

Comment by saliola created at 2015-06-11 17:08:53

Changing status from needs_review to needs_work.


---

Comment by saliola created at 2015-06-11 19:56:25

Here are some comments summarizing the live review we did at Sage Days 65:

* The first argument `arg0` in `def method_name(arg0, ...):` should be `self`; this is a Python coding convention (and not strictly necessary for the code to work, but Sage coding conventions requires this).

* Your documentation strings need to be formatted according to Sage coding conventions. Here is a link to the relevant page in the Sage developer's guide:[The docstring of a function](http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content).

* You also need to add doctests (see the above link for details). Make sure that all parts of your function are tested (i.e., if your code handles various cases, then your doctests should test the various possible cases).

* The function `n_fold_coproduct` defined within `convolution_power` is interesting and should be a method on its own.


---

Comment by jhpalmieri created at 2015-06-11 20:04:19

Is there overlap between this ticket and #18350?


---

Comment by saliola created at 2015-06-11 20:34:51

Replying to [comment:6 jhpalmieri]:
> Is there overlap between this ticket and #18350?

Thanks for pointing this out! Yes, there is overlap (but not a duplicate). It will make the work on this ticket even easier.


---

Comment by git created at 2015-06-30 04:29:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-06-30 07:12:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by alauve created at 2015-06-30 07:29:41

All,

I have merged #18350 with this ticket. Some comments/questions for people in-the-know to weigh-in on...

* I have moved `.adams_operator()` to `bialgebras.py`, and overwrote it using code from Amy Pang (_amypang_). Then in `hopf_algebras.py` I overwrote the bialgebras version, allowing for negative integer powers. (E.g., the (-2)nd convolution power of the identity is none other than the 2nd power of the antipode.)

* In fact, while adams operators naturally belong in `bialgebras.py`, the present code actually belongs in `bialgebras_with_basis.py`---as it uses `.module_morphism()` and `.apply_multilinear_morphism()`---but this would require more rewriting than I feel qualified to handle.

* *Easy fix?* When poking around for an algebra without basis---on which to test a preliminary version of my code---I noticed that Sage doesn't know that `QQ[x]` is a module over `QQ` (and hence, one cannot build ``QQ[x].tensor(QQ[x])`. Crazy.

* *Easy fix?* Similarly, even though `B = FreeAlgebra(QQ,a,b)` is robust enough that `B.tensor(B)` doesn't throw errors, quotients are out-of-bounds again. Putting `C = B.quotient_ring((a*b-b^2,))`, I get an AttributeError when asking for `C.tensor(C)`.

* I would like to add some morphism functionality at the parent level before setting ticket to "needs_review": given linear morphisms R,S,T for a bialgebra B, create their convolution product, a new morphism, via `RST = B.convolution_product(R,S,T)`. However, it seems ticket #15832 will have a lot of overlap with such code, so I'll hold off on implementing it unless somebody suggests otherwise.

* If anybody can explain why iterated coproduct followed by iterated product is slower than Amy Pang's code, I'd love to hear it.

A 'thanks' in advance for any comments.

-- Aaron


---

Comment by git created at 2015-07-02 04:46:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2015-07-02 13:36:09

Replying to [comment:11 alauve]:
> I have merged #18350 with this ticket.

I set this as a dependency.

> * I have moved `.adams_operator()` to `bialgebras.py`, and overwrote it using code from Amy Pang (_amypang_). Then in `hopf_algebras.py` I overwrote the bialgebras version, allowing for negative integer powers. (E.g., the (-2)nd convolution power of the identity is none other than the 2nd power of the antipode.)

I would make these changes on #18350 directly (I'd recommend `git cherry-pick` the commit with that change in #18350 if it's in an isolated commit, otherwise you'll have to deal with the merge conflict).

> * In fact, while adams operators naturally belong in `bialgebras.py`, the present code actually belongs in `bialgebras_with_basis.py`---as it uses `.module_morphism()` and `.apply_multilinear_morphism()`---but this would require more rewriting than I feel qualified to handle.

Then I would move the method into `BialgebrasWithBasis` and put an ``@`abstract_method(optional=True)` on an empty `adams_operators` in `Bialgebras` (on #18350).

> * *Easy fix?* When poking around for an algebra without basis---on which to test a preliminary version of my code---I noticed that Sage doesn't know that `QQ[x]` is a module over `QQ` (and hence, one cannot build ``QQ[x].tensor(QQ[x])`. Crazy.

Sage is full of fun oddities like that. Personally I'm not opposed to changing the category to `Algebras(QQ).WithBasis()`, but even with that, I'd think there's still more work to do to get `QQ[x].tensor(QQ[x])` to work...

> * *Easy fix?* Similarly, even though `B = FreeAlgebra(QQ,a,b)` is robust enough that `B.tensor(B)` doesn't throw errors, quotients are out-of-bounds again. Putting `C = B.quotient_ring((a*b-b^2,))`, I get an AttributeError when asking for `C.tensor(C)`.

What is `a` and `b`? I think there is an abuse going on, but as of right now I cannot even construct `B`.

> * I would like to add some morphism functionality at the parent level before setting ticket to "needs_review": given linear morphisms R,S,T for a bialgebra B, create their convolution product, a new morphism, via `RST = B.convolution_product(R,S,T)`. However, it seems ticket #15832 will have a lot of overlap with such code, so I'll hold off on implementing it unless somebody suggests otherwise.

I would work on #15832 and either create a follow-up with the additional code or just add that code directly to #15832.

> * If anybody can explain why iterated coproduct followed by iterated product is slower than Amy Pang's code, I'd love to hear it.

I would add an `AUTHORS:` block and give Amy the credit for her code. I have no idea at this point why this is. Try running `%prun the_command` to get timing information and look through that data for hints. Also what exactly are you testing this with? What is your timings (in particular, the approximate slowdown factor)?


---

Comment by git created at 2015-07-02 21:52:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-07-03 21:34:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by alauve created at 2015-07-03 21:37:59

Hi Travis, Comments below...

Replying to [comment:13 tscrim]:
> Replying to [comment:11 alauve]:
> > I have merged #18350 with this ticket.
> 
> I set this as a dependency.

I'm sure that's the wrong thing to do, but perhaps it's also the best thing to do, given the steps I already took (merging). In fact, there is _no dependency_, and the first thing I did was undo all the changes JBP made to `hopf_algebras.py`. I think *not both* tickets should be completed. I'm happy to move all my edits to #18350 and delete the present ticket if that makes more sense... though I don't know how to do that either.

Alternative?: set #18350 as positive review, as is, then start looking at this one? .... I'm really not sure what is the best; see next comment for more.

> > * I have moved `.adams_operator()` to `bialgebras.py`, and overwrote it using code from Amy Pang (_amypang_). Then in `hopf_algebras.py` I overwrote the bialgebras version, allowing for negative integer powers. (E.g., the (-2)nd convolution power of the identity is none other than the 2nd power of the antipode.)
> 
> I would make these changes on #18350 directly (I'd recommend `git cherry-pick` the commit with that change in #18350 if it's in an isolated commit, otherwise you'll have to deal with the merge conflict).

It was not an isolated commit (I've learned my lesson, thanks!). Alternative idea, implemented in present ticket: I have deleted `.adams_operator()` from `hopf_algebras.py` and from `hopf_algebras_with_basis.py` and instead added an attribute check, `hasattr(self,'antipode')` within `bialgebras.py` to allow for negative convolution powers of the identity.

> > * In fact, while adams operators naturally belong in `bialgebras.py`, the present code actually belongs in `bialgebras_with_basis.py`---as it uses `.module_morphism()` and `.apply_multilinear_morphism()`---but this would require more rewriting than I feel qualified to handle.
> 
> Then I would move the method into `BialgebrasWithBasis` and put an ``@`abstract_method(optional=True)` on an empty `adams_operators` in `Bialgebras` (on #18350).

I don't know how to do the former (the move), as `bialgebras_with_basis.py` just contains a *def* not a *class*. Maybe there is a monkey-patching solution, overwriting whatever ParentMethods and ElementMethods classes that get created by the *def*, but I'm comfortable trying neither this solution nor overhauling the whole file (i.e., to make it look more like `hopf_algebras_with_basis.py`).

Is there a better solution than the latter (abstract_method)? It's not really _optional_... more like _not presently code-able_. Perhaps a better solution is to keep things in `bialgebras.py`, perform an attribute check, `self in ModulesWithBasis` and add "..TODO:: remove dependency on bases" to the docstring? Anyhow, this is what I'm doing in latest commit.

> > * *Easy fix?* When poking around for an algebra without basis---on which to test a preliminary version of my code---I noticed that Sage doesn't know that `QQ[x]` is a module over `QQ` (and hence, one cannot build ``QQ[x].tensor(QQ[x])`. Crazy.
> 
> Sage is full of fun oddities like that. Personally I'm not opposed to changing the category to `Algebras(QQ).WithBasis()`, but even with that, I'd think there's still more work to do to get `QQ[x].tensor(QQ[x])` to work...

I'm going to fiddle with this. If that's all it takes, I'll start a new ticket and it should be completed easily enough.

> > * *Easy fix?* Similarly, even though `B = FreeAlgebra(QQ,a,b)` is robust enough that `B.tensor(B)` doesn't throw errors, quotients are out-of-bounds again. Putting `C = B.quotient_ring((a*b-b^2,))`, I get an AttributeError when asking for `C.tensor(C)`.
> 
> What is `a` and `b`? I think there is an abuse going on, but as of right now I cannot even construct `B`.

Sorry. the code I ran was:

```
sage: B = FreeAlgebra(QQ,['a','b'])
sage: a,b = B.gens()
sage: B.tensor(B)
sage: C = B.quotient_ring((a*b-b^2,))
sage: C.tensor(C)
}}} 

> > * I would like to add some morphism functionality at the parent level before setting ticket to "needs_review": given linear morphisms R,S,T for a bialgebra B, create their convolution product, a new morphism, via `RST = B.convolution_product(R,S,T)`. However, it seems ticket #15832 will have a lot of overlap with such code, so I'll hold off on implementing it unless somebody suggests otherwise.
> 
> I would work on #15832 and either create a follow-up with the additional code or just add that code directly to #15832.

Found an alternative solution in present commit. If ever #15832 gets adopted, the code here can be shortened by a few lines at most.
Note 1: But see comments in `sage.categories.bialgebras.ParentMethods.convolution_product` regarding speed.
Note 2: Also, I do not know how to keep `.convolution_product()` from showing up in the list of methods available to, e.g., `sym=SymmetricFunctions(QQ)`. Any ideas on how to remove this?
(At present, the code assumes _self_ is something more like `SymmetricFunctions(QQ).m()` If the check wasn't there, Sage would throw an error, because sym.tensor(sym) doesn't work.)...
{{{
sage: sym = SymmetricFunctions(QQ); m = sym.m()
sage: Id3 = m.convolution_product((lambda x: x,)*3)
sage: Id3(m[1]) == 3*m[1]
True
sage: sym.con <TAB>
sym.construction         sym.convert_map_from     sym.convolution_product
sage: sym.convolution_product((lambda x: x,)*3)
AttributeError: `self` (Symmetric Functions over Rational Field) must belong to ModulesWithBasis. Try defining convolution product on a basis of `self` instead.
}}}

> > * If anybody can explain why iterated coproduct followed by iterated product is slower than Amy Pang's code, I'd love to hear it.
> 
> I would add an `AUTHORS:` block and give Amy the credit for her code. I have no idea at this point why this is. Try running `%prun the_command` to get timing information and look through that data for hints. Also what exactly are you testing this with? What is your timings (in particular, the approximate slowdown factor)?

I have included a second ParentMethods command, `_convolution_product_from_elements()` for others to investigate. I have looked at %prun using `SymmetricFunctions(QQ).m()` and `SymmetricGroupAlgebra(QQ,6)`, which have radically different Hopf structure (and number of terms in product/coproduct). In both cases, `_convolution_product_from_elements()` (based on Amy's code) destroys `convolution_product()` (based on my code and Jean-Baptiste's code). I can't glean much, other than that total number of operations are vastly different.
{{{
sage: Id = lambda x: x
sage: m = SymmetricFunctions(QQ).m(); 
sage: mx = m[5,4,3,2,1]
sage: T1 = m.convolution_product((Id,)*4)
sage: timeit('T1(mx)',number=2,repeat=1)
2 loops, best of 1: 32 s per loop
sage: T2 = m._convolution_product_from_elements((Id,)*4)
sage: timeit('T2(mx)',number=2,repeat=1)
2 loops, best of 1: 32.3 s per loop

sage: mx = m[5,4,3,2,1]
sage: T1 = m.convolution_product((Id,)*7)
sage: timeit('T1(mx)',number=2,repeat=1)
2 loops, best of 1: 169 s per loop
sage: T2 = m._convolution_product_from_elements((Id,)*7)
sage: timeit('T2(mx)',number=2,repeat=1)
2 loops, best of 1: 80.3 s per loop

sage: qs = SymmetricGroupAlgebra(QQ,7); qsx = qs.an_element()^2; qsx
14*[1, 2, 3, 4, 5, 6, 7] + 4*[1, 2, 3, 4, 5, 7, 6] + 6*[1, 2, 3, 4, 6, 5, 7] + 6*[1, 2, 3, 4, 6, 7, 5] + 6*[1, 2, 3, 4, 7, 5, 6] + 2*[6, 1, 2, 3, 4, 5, 7] + [6, 7, 1, 2, 3, 4, 5] + 2*[7, 1, 2, 3, 4, 5, 6] + 5*[7, 1, 2, 3, 4, 6, 5] + 3*[7, 1, 2, 3, 5, 4, 6]
sage: T1 = qs.convolution_product(Id,Id,Id)
sage: timeit('T1(qsx)')
125 loops, best of 3: 3.98 ms per loop
sage: T2 = qs._convolution_product_from_elements(Id,Id,Id)
sage: timeit('T2(qsx)')
125 loops, best of 3: 3.4 ms per loop

sage: T1 = qs.convolution_product((Id,)*7)
sage: timeit('T1(qsx)')
25 loops, best of 3: 10.6 ms per loop
sage: T2 = qs._convolution_product_from_elements((Id,)*7)
sage: timeit('T2(qsx)')
25 loops, best of 3: 8.25 ms per loop
}}}
----
New commits:


---

Comment by alauve created at 2015-07-03 21:37:59

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2015-07-05 02:38:10

Replying to [comment:16 alauve]:
> Replying to [comment:13 tscrim]:
> > Replying to [comment:11 alauve]:
> > > I have merged #18350 with this ticket.
> > 
> > I set this as a dependency.
> 
> I'm sure that's the wrong thing to do, but perhaps it's also the best thing to do, given the steps I already took (merging). In fact, there is _no dependency_, and the first thing I did was undo all the changes JBP made to `hopf_algebras.py`. I think *not both* tickets should be completed. I'm happy to move all my edits to #18350 and delete the present ticket if that makes more sense... though I don't know how to do that either.
>
> Alternative?: set #18350 as positive review, as is, then start looking at this one? .... I'm really not sure what is the best; see next comment for more.

If they are separate tickets (with separate functionality), then you should not have merged #18350 in with this ticket, and we'll have to untangle them. Probably start with a clean branch and copy your current state into the new branch.

Otherwise one has to be a dependency of the other (although not necessarily in the current order), which from my understanding should be the case because there is overlap.

> > > * I have moved `.adams_operator()` to `bialgebras.py`, and overwrote it using code from Amy Pang (_amypang_). Then in `hopf_algebras.py` I overwrote the bialgebras version, allowing for negative integer powers. (E.g., the (-2)nd convolution power of the identity is none other than the 2nd power of the antipode.)
> > 
> > I would make these changes on #18350 directly (I'd recommend `git cherry-pick` the commit with that change in #18350 if it's in an isolated commit, otherwise you'll have to deal with the merge conflict).
> 
> It was not an isolated commit (I've learned my lesson, thanks!). Alternative idea, implemented in present ticket: I have deleted `.adams_operator()` from `hopf_algebras.py` and from `hopf_algebras_with_basis.py` and instead added an attribute check, `hasattr(self,'antipode')` within `bialgebras.py` to allow for negative convolution powers of the identity.

I'm not very good about isolating commits either (I try, but often forget and typically it's not a problem). I would instead either let the method fail (this is what I would do), use a try-catch for the attribute error (this is more pythonic than using `hasattr`), or check if the input is in the category of Hopf algebras.

> > > * In fact, while adams operators naturally belong in `bialgebras.py`, the present code actually belongs in `bialgebras_with_basis.py`---as it uses `.module_morphism()` and `.apply_multilinear_morphism()`---but this would require more rewriting than I feel qualified to handle.
> > 
> > Then I would move the method into `BialgebrasWithBasis` and put an ``@`abstract_method(optional=True)` on an empty `adams_operators` in `Bialgebras` (on #18350).
> 
> I don't know how to do the former (the move), as `bialgebras_with_basis.py` just contains a *def* not a *class*. Maybe there is a monkey-patching solution, overwriting whatever ParentMethods and ElementMethods classes that get created by the *def*, but I'm comfortable trying neither this solution nor overhauling the whole file (i.e., to make it look more like `hopf_algebras_with_basis.py`).

I can set this up for you.

> Is there a better solution than the latter (abstract_method)? It's not really _optional_... more like _not presently code-able_. Perhaps a better solution is to keep things in `bialgebras.py`, perform an attribute check, `self in ModulesWithBasis` and add "..TODO:: remove dependency on bases" to the docstring? Anyhow, this is what I'm doing in latest commit.

If you feel better about it, then just leave it out altogether if you can't use the `Bialgebras` generic code. Although you can add a `.. TODO::` in the `WithBasis` implementation.

> > > * *Easy fix?* When poking around for an algebra without basis---on which to test a preliminary version of my code---I noticed that Sage doesn't know that `QQ[x]` is a module over `QQ` (and hence, one cannot build ``QQ[x].tensor(QQ[x])`. Crazy.
> > 
> > Sage is full of fun oddities like that. Personally I'm not opposed to changing the category to `Algebras(QQ).WithBasis()`, but even with that, I'd think there's still more work to do to get `QQ[x].tensor(QQ[x])` to work...
> 
> I'm going to fiddle with this. If that's all it takes, I'll start a new ticket and it should be completed easily enough.

I think it deserves a ticket at the very least to keep a record of what we want Sage to do.

> > > * *Easy fix?* Similarly, even though `B = FreeAlgebra(QQ,a,b)` is robust enough that `B.tensor(B)` doesn't throw errors, quotients are out-of-bounds again. Putting `C = B.quotient_ring((a*b-b^2,))`, I get an AttributeError when asking for `C.tensor(C)`.
> > 
> > What is `a` and `b`? I think there is an abuse going on, but as of right now I cannot even construct `B`.
> 
> Sorry. the code I ran was:
> {{{
> sage: B = FreeAlgebra(QQ,['a','b'])
> sage: a,b = B.gens()
> sage: B.tensor(B)
> sage: C = B.quotient_ring((a*b-b^2,))
> sage: C.tensor(C)
> }}} 

I don't think we have the framework to currently do this, nor do I know how much it would take to do this. Nicolas, do you know off-hand?

> Note 2: Also, I do not know how to keep `.convolution_product()` from showing up in the list of methods available to, e.g., `sym=SymmetricFunctions(QQ)`. Any ideas on how to remove this?
> (At present, the code assumes _self_ is something more like `SymmetricFunctions(QQ).m()` If the check wasn't there, Sage would throw an error, because sym.tensor(sym) doesn't work.)...
> {{{
> sage: sym = SymmetricFunctions(QQ); m = sym.m()
> sage: Id3 = m.convolution_product((lambda x: x,)*3)
> sage: Id3(m[1]) == 3*m[1]
> True
> sage: sym.con <TAB>
> sym.construction         sym.convert_map_from     sym.convolution_product
> sage: sym.convolution_product((lambda x: x,)*3)
> AttributeError: `self` (Symmetric Functions over Rational Field) must belong to ModulesWithBasis. Try defining convolution product on a basis of `self` instead.
> }}}

I would say this is a shortcoming with the `WithRealizations` framework and we would need to add some more magic to the category code's black magic. While I know some of it's dark and mysterious powers, I don't know if I could make this change. Nicolas, thoughts?

> > > * If anybody can explain why iterated coproduct followed by iterated product is slower than Amy Pang's code, I'd love to hear it.
> > 
> > I would add an `AUTHORS:` block and give Amy the credit for her code. I have no idea at this point why this is. Try running `%prun the_command` to get timing information and look through that data for hints. Also what exactly are you testing this with? What is your timings (in particular, the approximate slowdown factor)?
> 
> I have included a second ParentMethods command, `_convolution_product_from_elements()` for others to investigate. I have looked at %prun using `SymmetricFunctions(QQ).m()` and `SymmetricGroupAlgebra(QQ,6)`, which have radically different Hopf structure (and number of terms in product/coproduct). In both cases, `_convolution_product_from_elements()` (based on Amy's code) destroys `convolution_product()` (based on my code and Jean-Baptiste's code). I can't glean much, other than that total number of operations are vastly different.

I only see a big gain in the one test, but I'll take a look at it.


---

Comment by tscrim created at 2015-07-13 07:38:38

So the setup for the bialgebras is on the branch `u/tscrim/category_hopf_algebras_with_basis`, which is based on `6.8.beta7`. Thus you can just pull/merge it into your branch and go from there.

For the speed difference, I believe it is due to the overhead of the intermediary objects. For example, calling `tensor` and the elements that are created in between the application of the morphisms. However I haven't looked too deeply into it.


---

Comment by git created at 2015-07-17 19:07:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saliola created at 2015-07-17 19:12:05

I made a few improvements (I hope you think they are) to the documentation and examples.

I also added some "TODO" items in the code (numbers at the begin of the line are the line numbers):

```
132:            TODO: finish the above sentence ::

163:            # TODO : test this if statement and explain what it means to be flexible

324:            TODO : what is the next line testing? ::

333:            TODO : what is the next line testing? ::

408:            # TODO : test this if statement and explain what it means to be flexible
```


A question:

- Does this depend on #18350? or is this intended to subsume it?


---

Comment by git created at 2015-07-17 21:19:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saliola created at 2015-07-17 21:20:55

#18350 should be marked as a duplicate of this ticket


---

Comment by git created at 2015-07-17 21:44:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saliola created at 2015-07-18 01:07:20

I've asked that #18350 be marked as a duplicate of this ticket.

I've also added Jean-Baptiste, Amy and Travis to the authors field since this branch includes contributions from them as well.


---

Comment by saliola created at 2015-07-18 01:07:20

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-07-18 13:55:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-07-20 03:23:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-07-20 03:46:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2015-08-02 20:08:21

Two quick comments:
first, on line 119 of `bialgebras_with_basis.py`, there should be a double colon at the end of the line:

```
identity map on group algebra of the symmetric group::
```

Second, the new docstrings should start with `r"""`, not just `"""`, at least if they contain any backslashes as parts of TeX commands.


---

Comment by git created at 2015-08-14 20:39:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by alauve created at 2015-08-14 20:44:39

1. Made the changes suggested by jhpalmieri.

2. Added some missing `import` calls causing `convolution_product()` and `coproduct_iterated()` methods to fail.


---

Comment by alauve created at 2015-08-14 20:45:07

Changing status from needs_work to needs_review.


---

Comment by git created at 2015-08-21 19:19:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2015-08-24 00:49:06

I've made some changes:

- I reworked the documentation around a bit.
- I moved `coproduct_iterated` to `CoalgebrasWithBasis` since it is well-defined there.
- I updated a few doctests for trivial failures (because of the added explicit category for `BialgebrasWithBasis`).

I'm thinking this is in good enough shape to merge into Sage as-is, and if there are any issues/improvements, then we can handle those on followup tickets. Thoughts?

----

For future reference, we will probably have (and want) to implement a custom subclass of `Morphism` for convolution products of morphisms for bialgebras without a specified basis (but considering we don't have any in Sage currently, I don't think this is a high priority).
----
New commits:


---

Comment by alauve created at 2015-08-24 16:48:36

Quoting an earlier comment:
-------------------
Aaron said:
I do not know how to keep `.convolution_product()` from showing up in the list of methods available to, e.g., `sym=SymmetricFunctions(QQ)`. Any ideas on how to remove this?

Travis said:
I would say this is a shortcoming with the `WithRealizations` framework and we would need to add some more magic to the category code's black magic. While I know some of it's dark and mysterious powers, I don't know if I could make this change. Nicolas, thoughts?
-------------------
Did you perform the black magic? It seems `.convolution_product()` is no longer available to, e.g., `SymmetricFunctions(QQ)`.


---

Comment by tscrim created at 2015-08-24 20:17:47

It's a tome hidden deep within the forest by the category wizard(s). Actually, it's more of we don't have a mechanism for special casing the `WithRealizations` categories, and I might be able to actually do it. I'd open up another ticket for that.

The reason why it vanished from `Sym = SymmetricFunctions(QQ)` is because `Sym` is not a coalgebra with a (distinguished) basis.


---

Comment by alauve created at 2015-09-20 17:22:07

Thanks for all the work, Travis. I'm happy with it, as-is. 

Shall I set it to "positive review"?


---

Comment by tscrim created at 2015-09-20 17:32:59

Yep (and if anyone has any objections, they can set it to `needs_work`). Thank you all for your work on this.


---

Comment by alauve created at 2015-09-20 17:33:50

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-09-22 19:15:52

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-09-22 19:15:52

Doctests fail


---

Comment by tscrim created at 2015-09-22 21:07:39

Changing status from needs_work to positive_review.


---

Comment by tscrim created at 2015-09-22 21:07:39

I don't get any doctest failures with the current branch on beta7. Could you post more information or tell us some potential conflicts from things you've already merged into your working branch if you're still getting failures?


---

Comment by vbraun created at 2015-09-24 21:58:27

Still fails, duh. Try again with beta8.


---

Comment by vbraun created at 2015-09-24 21:58:27

Changing status from positive_review to needs_work.


---

Comment by tscrim created at 2015-09-25 03:11:02

Thank you for your very useful information.


---

Comment by git created at 2015-09-25 16:22:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2015-09-25 16:23:41

Changing status from needs_work to positive_review.


---

Comment by tscrim created at 2015-09-25 16:23:41

Trivial failures due to the category hierarchy changing.


---

Comment by vbraun created at 2015-10-14 17:07:02

merge conflict, wait for the next beta


---

Comment by vbraun created at 2015-10-14 17:07:02

Changing status from positive_review to needs_work.


---

Comment by git created at 2015-10-14 17:16:15

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by tscrim created at 2015-10-14 17:16:48

Fixed what should be the merge conflict.


---

Comment by tscrim created at 2015-10-14 17:16:48

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-10-16 18:42:42

Resolution: fixed
