# Issue 30627: Comparison of power series

archive/issues_030627.json:
```json
{
    "body": "CC:  rpages\n\nKeywords: power series; equality test\n\nCurrently, the equality tests between power series transforms the input series into lists and compare the lists. This is actually rather slow.\n\nIn this ticket, we reimplement comparaison by checking whether the difference vanishes or not.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30864\n\n",
    "created_at": "2020-11-04T14:24:26Z",
    "labels": [
        "component: performance",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Comparison of power series",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30627",
    "user": "https://github.com/xcaruso"
}
```
CC:  rpages

Keywords: power series; equality test

Currently, the equality tests between power series transforms the input series into lists and compare the lists. This is actually rather slow.

In this ticket, we reimplement comparaison by checking whether the difference vanishes or not.

Issue created by migration from https://trac.sagemath.org/ticket/30864





---

archive/issue_comments_437282.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-11-04T15:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30627#issuecomment-437282",
    "user": "https://github.com/xcaruso"
}
```

New commits:



---

archive/issue_comments_437283.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-04T15:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30627#issuecomment-437283",
    "user": "https://github.com/xcaruso"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_437284.json:
```json
{
    "body": "Some timings.\n\nBefore the ticket:\n\n\n```\nsage: T.<y> = GF(5)[[]]                                                                                                   \nsage: a = T.random_element(prec=1000)                                                                                     \nsage: %timeit _ = a.is_one()                                                                                              \n809 \u00b5s \u00b1 2.64 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\nsage: %timeit _ = ~a                                                                                                      \n905 \u00b5s \u00b1 3.22 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n```\n\n\nAfter the ticket:\n\n\n```\nsage: T.<y> = GF(5)[[]]                                                                                                   \nsage: a = T.random_element(prec=1000)                                                                                     \nsage: %timeit _ = a.is_one()                                                                                              \n1.45 \u00b5s \u00b1 5.26 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\nsage: %timeit _ = ~a                                                                                                      \n86.9 \u00b5s \u00b1 936 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n```\n",
    "created_at": "2020-11-04T15:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30627#issuecomment-437284",
    "user": "https://github.com/xcaruso"
}
```

Some timings.

Before the ticket:


```
sage: T.<y> = GF(5)[[]]                                                                                                   
sage: a = T.random_element(prec=1000)                                                                                     
sage: %timeit _ = a.is_one()                                                                                              
809 µs ± 2.64 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
sage: %timeit _ = ~a                                                                                                      
905 µs ± 3.22 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
```


After the ticket:


```
sage: T.<y> = GF(5)[[]]                                                                                                   
sage: a = T.random_element(prec=1000)                                                                                     
sage: %timeit _ = a.is_one()                                                                                              
1.45 µs ± 5.26 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: %timeit _ = ~a                                                                                                      
86.9 µs ± 936 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
```




---

archive/issue_comments_437285.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-04T21:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30627#issuecomment-437285",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_437286.json:
```json
{
    "body": "ok, allons-y. merci",
    "created_at": "2020-11-04T21:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30627#issuecomment-437286",
    "user": "https://github.com/fchapoton"
}
```

ok, allons-y. merci



---

archive/issue_comments_437287.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-22T15:06:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30627#issuecomment-437287",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
