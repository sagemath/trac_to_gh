# Issue 30627: Comparison of power series

Issue created by migration from https://trac.sagemath.org/ticket/30864

Original creator: caruso

Original creation time: 2020-11-04 14:24:26

CC:  rpages

Keywords: power series; equality test

Currently, the equality tests between power series transforms the input series into lists and compare the lists. This is actually rather slow.

In this ticket, we reimplement comparaison by checking whether the difference vanishes or not.


---

Comment by caruso created at 2020-11-04 15:30:20

New commits:


---

Comment by caruso created at 2020-11-04 15:30:20

Changing status from new to needs_review.


---

Comment by caruso created at 2020-11-04 15:33:01

Some timings.

Before the ticket:


```
sage: T.<y> = GF(5)[[]]                                                                                                   
sage: a = T.random_element(prec=1000)                                                                                     
sage: %timeit _ = a.is_one()                                                                                              
809 µs ± 2.64 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
sage: %timeit _ = ~a                                                                                                      
905 µs ± 3.22 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
```


After the ticket:


```
sage: T.<y> = GF(5)[[]]                                                                                                   
sage: a = T.random_element(prec=1000)                                                                                     
sage: %timeit _ = a.is_one()                                                                                              
1.45 µs ± 5.26 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
sage: %timeit _ = ~a                                                                                                      
86.9 µs ± 936 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
```



---

Comment by chapoton created at 2020-11-04 21:12:18

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-11-04 21:12:18

ok, allons-y. merci


---

Comment by vbraun created at 2020-11-22 15:06:09

Resolution: fixed
