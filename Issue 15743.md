# Issue 15743: Meta-ticket for Python 3.3+ preparation - stage 1

archive/issues_015743.json:
```json
{
    "body": "Keywords: python3\n\nThis ticket tracks a number of other tickets that relate to various tasks to prepare Sage code for Python 3.\n\n\nThe following table lists those fixers from [2to3](http://docs.python.org/2.7/library/2to3.html?highlight=2to3#) \nthat are applicable for stage 1.\n\n\n//stage 1// includes those 2to3 fixers that produce code which can run on Python 2.7 (possibly using some \n[from __future__ import ...](http://docs.python.org/2.7/library/__future__.html?highlight=__future__#__future__)\nor [from future_builtins import ...](http://docs.python.org/2.7/library/future_builtins.html?highlight=future#future_builtins)).\nThe code will usually not run on Python 3.\n\n\n\n//stage 2// has those 2to3 fixers (and possibly others) that produce code which can run on Python 3 (more precisely Python 3.3+).\nThe code can run on Python 2 only with the support of imported \"compatibility\" libraries.\n\n\n\nAfter completion of stage 1 and 2 Sage should have a single, common code base for Python 2.7 and Python 3.3+.\n\n\n|    |           |           |        |\n|----|-----------|-----------|--------|\n|No. |2to3 fixer |see ticket |Comment |\n|  1|apply       |none       |Nothing to change  |\n|  3|buffer      |none       |Nothing to change  |\n|  4|callable    |none       |No need to change (reintroduced in Python 3.2) |\n|  5|dict        |TBD        |about 755 changes; details see ticket |\n|  6|except      |TBD        |about 128 changes; details see ticket |\n| 11|funcattr    |TBD        |about 18 changes; since Py2.6 compatible fcts available |\n| 12|future      |none       |do NOT run, as we want to keep `from __future__ import xxx` |\n| 13|getcwdu     |none       |Nothing to change  |\n| 14|has_key     |ticket:15784 |Nothing to change, since already done  |\n| 15|idioms      |TBD        |about 333 changes; details see ticket |\n| 16|import      |TBD        |about 2,252 changes; with `from __future__ import absolute_import`, details see ticket |\n| 19|input       |none       |Nothing to change  |\n| 20|intern      |none       |Nothing to change  |\n| 21|isinstance  |none       |Nothing to change  |\n| 27|methodattrs |TBD        |about 19 changes; since Py2.6 compatible fcts available |\n| 28|ne          |ticket:15734 |Nothing to change, since already done  |\n| 31|numliterals |TBD        |about 2 changes; details see ticket |\n| 32|operator    |none       |Nothing to change  |\n| 33|paren       |TBD        |about 3 changes; details see ticket |\n| 34|print       |TBD        |about 1,172 changes; with `from __future__ import print_function`, details see ticket |\n| 35|raise       |TBD        |about 3,187 changes; details see ticket |\n| 38|renames     |TBD        |about 5 changes; details see ticket |\n| 39|repr        |TBD        |about 7 changes; details see ticket |\n| 40|future      |none       |do NOT run, as it is mere style change |\n| 41|standard_error |none    |Nothing to change  |\n| 42|sys_exc     |none       |Nothing to change  |\n| 43|throw       |none       |Nothing to change  |\n| 44|tuple_params |TBD       |about 68 changes; details see ticket |\n| 45|types       |TBD        |about 4 changes; details see ticket |\n| 48|ws_comma    |none       |do NOT run; about 13,049 changes; just to enhance readability and PEP8 compliance |\n| 50|throw       |none       |Nothing to change  |\n|   |            |           |the following changes do not relate to 2to3 |\n| 61|divison     |TBD        |up to 410 modules; with `from __future__ import division`, details see ticket |\n* Note 1: The //No.// in the above table is an enumeration of the fixers of `lib2to3/fixes/*`.\n* Note 2: No. starting with denote fixers not included in `lib2to3/fixes/*`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15980\n\n",
    "created_at": "2014-03-20T15:08:39Z",
    "labels": [
        "component: distribution"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-pending",
    "title": "Meta-ticket for Python 3.3+ preparation - stage 1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15743",
    "user": "https://github.com/wluebbe"
}
```
Keywords: python3

This ticket tracks a number of other tickets that relate to various tasks to prepare Sage code for Python 3.


The following table lists those fixers from [2to3](http://docs.python.org/2.7/library/2to3.html?highlight=2to3#) 
that are applicable for stage 1.


//stage 1// includes those 2to3 fixers that produce code which can run on Python 2.7 (possibly using some 
[from __future__ import ...](http://docs.python.org/2.7/library/__future__.html?highlight=__future__#__future__)
or [from future_builtins import ...](http://docs.python.org/2.7/library/future_builtins.html?highlight=future#future_builtins)).
The code will usually not run on Python 3.



//stage 2// has those 2to3 fixers (and possibly others) that produce code which can run on Python 3 (more precisely Python 3.3+).
The code can run on Python 2 only with the support of imported "compatibility" libraries.



After completion of stage 1 and 2 Sage should have a single, common code base for Python 2.7 and Python 3.3+.


|    |           |           |        |
|----|-----------|-----------|--------|
|No. |2to3 fixer |see ticket |Comment |
|  1|apply       |none       |Nothing to change  |
|  3|buffer      |none       |Nothing to change  |
|  4|callable    |none       |No need to change (reintroduced in Python 3.2) |
|  5|dict        |TBD        |about 755 changes; details see ticket |
|  6|except      |TBD        |about 128 changes; details see ticket |
| 11|funcattr    |TBD        |about 18 changes; since Py2.6 compatible fcts available |
| 12|future      |none       |do NOT run, as we want to keep `from __future__ import xxx` |
| 13|getcwdu     |none       |Nothing to change  |
| 14|has_key     |ticket:15784 |Nothing to change, since already done  |
| 15|idioms      |TBD        |about 333 changes; details see ticket |
| 16|import      |TBD        |about 2,252 changes; with `from __future__ import absolute_import`, details see ticket |
| 19|input       |none       |Nothing to change  |
| 20|intern      |none       |Nothing to change  |
| 21|isinstance  |none       |Nothing to change  |
| 27|methodattrs |TBD        |about 19 changes; since Py2.6 compatible fcts available |
| 28|ne          |ticket:15734 |Nothing to change, since already done  |
| 31|numliterals |TBD        |about 2 changes; details see ticket |
| 32|operator    |none       |Nothing to change  |
| 33|paren       |TBD        |about 3 changes; details see ticket |
| 34|print       |TBD        |about 1,172 changes; with `from __future__ import print_function`, details see ticket |
| 35|raise       |TBD        |about 3,187 changes; details see ticket |
| 38|renames     |TBD        |about 5 changes; details see ticket |
| 39|repr        |TBD        |about 7 changes; details see ticket |
| 40|future      |none       |do NOT run, as it is mere style change |
| 41|standard_error |none    |Nothing to change  |
| 42|sys_exc     |none       |Nothing to change  |
| 43|throw       |none       |Nothing to change  |
| 44|tuple_params |TBD       |about 68 changes; details see ticket |
| 45|types       |TBD        |about 4 changes; details see ticket |
| 48|ws_comma    |none       |do NOT run; about 13,049 changes; just to enhance readability and PEP8 compliance |
| 50|throw       |none       |Nothing to change  |
|   |            |           |the following changes do not relate to 2to3 |
| 61|divison     |TBD        |up to 410 modules; with `from __future__ import division`, details see ticket |
* Note 1: The //No.// in the above table is an enumeration of the fixers of `lib2to3/fixes/*`.
* Note 2: No. starting with denote fixers not included in `lib2to3/fixes/*`.

Issue created by migration from https://trac.sagemath.org/ticket/15980





---

archive/issue_comments_203543.json:
```json
{
    "body": "Hi Wilfried,\n\nThere is currently a meta-ticket pertaining to supporting Python 3.3 for the Sage distribution, which includes making various changes to the build system and upgrading various dependencies (see #15530). I've added this meta-ticket to that meta-ticket and changed the summary of this one to better reflect that it is specifically referring to the sage library.\n\nI'm a little confused on your distinction between stage 1 and stage 2. What exactly are things that go into stage 2 but not into stage 1?\n\nI don't see anywhere in this list issues with renamed/reorganized libraries like urllib or StringIO, maybe this is part of the compatibility library that you mention as part of stage 2? Also, probably the biggest issue with Python 3 support is the requirement for rich comparison, which again wasn't mentioned in here.",
    "created_at": "2014-04-02T16:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15743#issuecomment-203543",
    "user": "https://github.com/ohanar"
}
```

Hi Wilfried,

There is currently a meta-ticket pertaining to supporting Python 3.3 for the Sage distribution, which includes making various changes to the build system and upgrading various dependencies (see #15530). I've added this meta-ticket to that meta-ticket and changed the summary of this one to better reflect that it is specifically referring to the sage library.

I'm a little confused on your distinction between stage 1 and stage 2. What exactly are things that go into stage 2 but not into stage 1?

I don't see anywhere in this list issues with renamed/reorganized libraries like urllib or StringIO, maybe this is part of the compatibility library that you mention as part of stage 2? Also, probably the biggest issue with Python 3 support is the requirement for rich comparison, which again wasn't mentioned in here.



---

archive/issue_comments_203544.json:
```json
{
    "body": "Hi Andrew,\n\nThanks for linking the ticket:15530 and improving the ticket's title.\n\nAs for stage 2 I guess I should soon open the respective meta-ticket.\n\nSome reasons for assigning tasks to stage 2:\n* The code can run on Python 2 only with the support of imported \"compatibility\" libraries. [copied from description]\n  Maybe we have to check the licenses of the used compatibility libraries.\n* The tasks are usually more complicated. The approach may not be obvious or uncontroversial.\n* To make progress we need a Python 3.3 test environment for them (can ticket:15530 help?).\n\nAnd yes, the issues to mention belong to stage 2.\n\nHopefully the tasks assigned to stage 1 turn out (relatively) easy :-)",
    "created_at": "2014-04-03T13:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15743#issuecomment-203544",
    "user": "https://github.com/wluebbe"
}
```

Hi Andrew,

Thanks for linking the ticket:15530 and improving the ticket's title.

As for stage 2 I guess I should soon open the respective meta-ticket.

Some reasons for assigning tasks to stage 2:
* The code can run on Python 2 only with the support of imported "compatibility" libraries. [copied from description]
  Maybe we have to check the licenses of the used compatibility libraries.
* The tasks are usually more complicated. The approach may not be obvious or uncontroversial.
* To make progress we need a Python 3.3 test environment for them (can ticket:15530 help?).

And yes, the issues to mention belong to stage 2.

Hopefully the tasks assigned to stage 1 turn out (relatively) easy :-)



---

archive/issue_comments_203545.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-03T13:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15743#issuecomment-203545",
    "user": "https://github.com/wluebbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_203546.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-03T13:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15743#issuecomment-203546",
    "user": "https://github.com/wluebbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_203547.json:
```json
{
    "body": "Was changed to \"needs review\" to allow \"needs work\".",
    "created_at": "2014-04-03T13:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15743#issuecomment-203547",
    "user": "https://github.com/wluebbe"
}
```

Was changed to "needs review" to allow "needs work".



---

archive/issue_comments_203548.json:
```json
{
    "body": "Changed No. 10 (ticket:16067) and No. 37 (ticket:16078) from stage 2 to stage 1.\n\nCorrected the fixer name in No. 50 to \"xreadlines\".",
    "created_at": "2014-05-29T12:32:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15743#issuecomment-203548",
    "user": "https://github.com/wluebbe"
}
```

Changed No. 10 (ticket:16067) and No. 37 (ticket:16078) from stage 2 to stage 1.

Corrected the fixer name in No. 50 to "xreadlines".



---

archive/issue_comments_203549.json:
```json
{
    "body": "Changing type from enhancement to task.",
    "created_at": "2015-06-06T10:58:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15743#issuecomment-203549",
    "user": "https://github.com/jdemeyer"
}
```

Changing type from enhancement to task.



---

archive/issue_comments_203550.json:
```json
{
    "body": "Changing component from distribution to python3.",
    "created_at": "2016-05-02T13:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15743#issuecomment-203550",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from distribution to python3.



---

archive/issue_comments_203551.json:
```json
{
    "body": "Can this be closed?",
    "created_at": "2020-04-12T00:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15743#issuecomment-203551",
    "user": "https://github.com/mkoeppe"
}
```

Can this be closed?



---

archive/issue_comments_203552.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-11T12:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15743#issuecomment-203552",
    "user": "https://github.com/fchapoton"
}
```

Resolution: fixed



---

archive/issue_events_015352.json:
```json
{
    "actor": "@fchapoton",
    "created_at": "2020-09-11T12:17:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15743",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15743#event-15352"
}
```



---

archive/issue_comments_203553.json:
```json
{
    "body": "ok, let us close this one too.",
    "created_at": "2020-09-11T12:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15743#issuecomment-203553",
    "user": "https://github.com/fchapoton"
}
```

ok, let us close this one too.
