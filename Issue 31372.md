# Issue 31372: Add method vector to differentiable manifolds

Issue created by migration from https://trac.sagemath.org/ticket/31609

Original creator: egourgoulhon

Original creation time: 2021-04-05 09:07:35

CC:  slelievre

Keywords: tangent vector

Currently, constructing a tangent vector _v_ at some point _p_ of a manifold _M_ requires two steps: first construct the tangent space at _p_, T<sub>_p_</sub>_M_, and then construct _v_ as an element of T<sub>_p_</sub>_M_. For instance:

```
sage: E.<x,y> = EuclideanSpace()
sage: p = E((1, 2), name='p')
sage: Tp = E.tangent_space(p)   # step 1
sage: v = Tp((-1, 3)); v        # step 2
Vector at Point p on the Euclidean plane E^2
```

This ticket endows the class `DifferentiableManifold` with a method `vector` to make it a 1-step process. We can now write:

```
sage: E.<x,y> = EuclideanSpace()
sage: p = E((1, 2), name='p')
sage: v = E.vector(p, -1, 3); v
Vector at Point p on the Euclidean plane E^2
```

This feature is motivated by this [ask.sagemath question](https://ask.sagemath.org/question/56483/).


---

Comment by egourgoulhon created at 2021-04-05 09:09:53

Changing status from new to needs_review.


---

Comment by egourgoulhon created at 2021-04-05 09:09:53

New commits:


---

Comment by @mjungmath created at 2021-04-05 17:12:46

Sweet! I have just one comment. Since Python 3.6, we have f-strings which are way more convenient and easier to read than `format` (and also faster). I'd propose to use f-strings more often in the future. For this ticket:


```diff
- raise ValueError("{} components must be provided".format(dim))
+ raise ValueError(f"{dim} components must be provided")
```



---

Comment by @mjungmath created at 2021-04-05 17:14:25

Here is an explanation also elaborating on more advantages of f-strings over `format`: https://realpython.com/python-f-strings/.


---

Comment by git created at 2021-04-05 21:26:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2021-04-05 21:27:37

Replying to [comment:3 gh-mjungmath]:
> Here is an explanation also elaborating on more advantages of f-strings over `format`: https://realpython.com/python-f-strings/.

Thanks for the tip! The change to f-string is performed in the last commit.


---

Comment by @mjungmath created at 2021-04-05 21:52:22

Is there a reason why you chose `vector` over `tangent_vector` for the method's name? The latter would sound more intuitive to me.


---

Comment by egourgoulhon created at 2021-04-05 22:21:02

Replying to [comment:6 gh-mjungmath]:
> Is there a reason why you chose `vector` over `tangent_vector` for the method's name? The latter would sound more intuitive to me.
`vector` is more adapted to elementary use, like in vector calculus in the Euclidean space, when the user might not know what "tangent space" means. Of course, we can make an alias for `tangent_vector` if you feel it necessary.


---

Comment by @mjungmath created at 2021-04-06 00:05:39

Mh, I don't know. Manifolds usually don't constitute of vectors. So a `vector` method wouldn't make much sense there as it sounds to me more like a method that should be reserved for vector spaces only. I'd advocate to rename `vector` to `tangent_vector` because mathematically precise.

This is a neat feature though, and I don't want to block it just because of my pedantry. An alias sounds like a good compromise.


---

Comment by @mjungmath created at 2021-04-06 00:10:04

Alternatively the Euclidean space, as a special case, can be endowed with an alias `vector` whereas general (differentiable) manifolds only supposed to have `tangent_vector`. I think that is the best solution to maintain preciseness and having that alias in the elementary case at the same time.


---

Comment by git created at 2021-04-06 09:42:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2021-04-06 09:51:31

Replying to [comment:8 gh-mjungmath]:
> Mh, I don't know. Manifolds usually don't constitute of vectors. So a `vector` method wouldn't make much sense there as it sounds to me more like a method that should be reserved for vector spaces only. I'd advocate to rename `vector` to `tangent_vector` because mathematically precise.
> 

OK, this is done in the last commit.
Note however that saying simply "vector at point p of manifold M" is quite unambiguous and is in line with the terminology "vector field": we do not say "tangent vector field", do we?  

> This is a neat feature though, and I don't want to block it just because of my pedantry. An alias sounds like a good compromise.

Done. `vector` is now an alias for `tangent_vector`.


---

Comment by egourgoulhon created at 2021-04-06 09:54:01

Replying to [comment:9 gh-mjungmath]:
> Alternatively the Euclidean space, as a special case, can be endowed with an alias `vector` whereas general (differentiable) manifolds only supposed to have `tangent_vector`. I think that is the best solution to maintain preciseness and having that alias in the elementary case at the same time.

I oppose to this: we shall not introduce on Euclidean spaces method names that break for more general manifolds, while the functionality is exactly the same.


---

Comment by slelievre created at 2021-04-06 10:10:22

How about requiring

```
v = E.vector(p, (-1, 3))
```

instead of

```
v = E.vector(p, -1, 3)
```

I don't mind either way but there's a choice to make.


---

Comment by egourgoulhon created at 2021-04-06 10:21:11

Replying to [comment:13 slelievre]:
> How about requiring
> {{{
> v = E.vector(p, (-1, 3))
> }}}
> instead of
> {{{
> v = E.vector(p, -1, 3)
> }}}
> I don't mind either way but there's a choice to make.

There is no choice to make ;-) Both work in the current implementation (cf. the examples in the doctests).


---

Comment by @mjungmath created at 2021-04-06 10:39:49

Replying to [comment:11 egourgoulhon]:
> OK, this is done in the last commit.
> Note however that saying simply "vector at point p of manifold M" is quite unambiguous and is in line with the terminology "vector field": we do not say "tangent vector field", do we?  

No, we don't say "tangent vector field". But I haven't heard or read the use of "vector" over "tangent vector" either. Historical burden I suppose.

It should be unambiguous though and having both is fine with me. Someone who seeks for (tangent) vectors will find them now.


---

Comment by @mjungmath created at 2021-04-06 12:35:51

Changing status from needs_review to positive_review.


---

Comment by @mjungmath created at 2021-04-06 12:35:51

LGTM


---

Comment by egourgoulhon created at 2021-04-06 12:51:15

Thanks for the review and suggestions!


---

Comment by mkoeppe created at 2021-04-07 19:29:15

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.


---

Comment by vbraun created at 2021-06-06 13:18:30

Resolution: fixed
