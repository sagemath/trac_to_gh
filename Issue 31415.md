# Issue 31415: formal sums with non-atomic support elements print incorrectly

Issue created by migration from https://trac.sagemath.org/ticket/31652

Original creator: mmezzarobba

Original creation time: 2021-04-11 13:43:24

CC:  slelievre

An issue noticed by Emre Sert√∂z:

```
sage: P.<x> = QQ[]
sage: FormalSum([(2, x+1)])
2*x + 1
```



---

Comment by @DaveWitteMorris created at 2021-04-15 06:44:24

I think the bad output is coming from `repr_lincomb`:

```
sage: repr_lincomb([[x + 1, 2]])
'2*x + 1'
```

This function is only documented to "Compute a string representation of a linear combination of some formal symbols." It does not work correctly for linear combinations of more complicated expressions, because it does not insert any parentheses.


---

Comment by mkoeppe created at 2021-05-10 17:42:09

Moving to 9.4, as 9.3 has been released.
