# Issue 30032: memory efficient implementation of distances distribution

Issue created by migration from https://trac.sagemath.org/ticket/30269

Original creator: dcoudert

Original creation time: 2020-08-02 10:25:23

CC:  @vipul79321

We reduce space usage from `O(n^2)` to `O(n)` in the computation of distances distribution of unweighted (di)graphs by avoiding to compute and store into memory the full distance matrix.


---

Comment by dcoudert created at 2020-08-02 10:26:40

New commits:


---

Comment by dcoudert created at 2020-08-02 10:26:40

Changing status from new to needs_review.


---

Comment by @kliem created at 2020-08-15 08:57:44

Why don't you use `calloc` for `count`? I heard it might be faster, because sometimes the allocator knows where memory initialized to `0` is. It's also one less line.

Otherwise looks good.


---

Comment by @kliem created at 2020-08-15 08:58:40

You can put it on positive review once done (or of course argue why it is more natural etc. not to use `calloc`).


---

Comment by git created at 2020-08-15 09:43:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2020-08-15 09:45:09

You are right, it's better to use calloc here.

Thank you.


---

Comment by dcoudert created at 2020-08-15 09:45:09

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-08-20 22:23:06

Resolution: fixed
