# Issue 24646: Endless symbolic computation

archive/issues_024646.json:
```json
{
    "body": "CC:  @rwst @videlec\n\nKeywords: days93\n\nI tried calculating \n\n\n```\n\na=e^(I*pi/4)+1\nb=1-e^(I*pi/4)\na*b\n\n```\n\n\nand both expressions a*b and a/b don't stop computing.\n\nIssue created by migration from https://trac.sagemath.org/ticket/24883\n\n",
    "created_at": "2018-03-02T09:45:07Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Endless symbolic computation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24646",
    "user": "https://trac.sagemath.org/admin/accounts/users/ipasquinelli"
}
```
CC:  @rwst @videlec

Keywords: days93

I tried calculating 


```

a=e^(I*pi/4)+1
b=1-e^(I*pi/4)
a*b

```


and both expressions a*b and a/b don't stop computing.

Issue created by migration from https://trac.sagemath.org/ticket/24883





---

archive/issue_comments_345254.json:
```json
{
    "body": "Could you add your architecture/sage version in the ticket description? I can confirm the behavior on archlinux with compiled sage-8.2.beta6.",
    "created_at": "2018-03-02T09:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345254",
    "user": "https://github.com/videlec"
}
```

Could you add your architecture/sage version in the ticket description? I can confirm the behavior on archlinux with compiled sage-8.2.beta6.



---

archive/issue_comments_345255.json:
```json
{
    "body": "Alternative computation that terminates:\n\n```\nUCF = UniversalCyclotomicField()\na = UCF.zeta(8) + 1\nb = 1 - UCF.zeta(8)\na * b\n```\n",
    "created_at": "2018-03-02T09:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345255",
    "user": "https://github.com/videlec"
}
```

Alternative computation that terminates:

```
UCF = UniversalCyclotomicField()
a = UCF.zeta(8) + 1
b = 1 - UCF.zeta(8)
a * b
```




---

archive/issue_comments_345256.json:
```json
{
    "body": "I can confirm it on archlinux with compiled sage-8.2.beta6, sage-8.2.beta5 and sage-8.1.\nHowever, with the sagemath 8.1-11 from the archlinux community repository it does work.\n\n\n\n```\nsage: a = 1 + e^(I*pi/4)\nsage: b = 1 - e^(I*pi/4)\nsage: a*b\n1/4*((I + 1)*sqrt(2) - 2)*(-(I + 1)*sqrt(2) - 2)\nsage: a/b\n-1/2*(-(I + 1)*sqrt(2) - 2)/(-(1/2*I + 1/2)*sqrt(2) + 1)\n\n```\n",
    "created_at": "2018-03-02T13:19:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345256",
    "user": "https://trac.sagemath.org/admin/accounts/users/sdrewitz"
}
```

I can confirm it on archlinux with compiled sage-8.2.beta6, sage-8.2.beta5 and sage-8.1.
However, with the sagemath 8.1-11 from the archlinux community repository it does work.



```
sage: a = 1 + e^(I*pi/4)
sage: b = 1 - e^(I*pi/4)
sage: a*b
1/4*((I + 1)*sqrt(2) - 2)*(-(I + 1)*sqrt(2) - 2)
sage: a/b
-1/2*(-(I + 1)*sqrt(2) - 2)/(-(1/2*I + 1/2)*sqrt(2) + 1)

```




---

archive/issue_comments_345257.json:
```json
{
    "body": "Confirmed in beta6. The loop is in Pynac. Thanks for the report.",
    "created_at": "2018-03-02T13:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345257",
    "user": "https://github.com/rwst"
}
```

Confirmed in beta6. The loop is in Pynac. Thanks for the report.



---

archive/issue_comments_345258.json:
```json
{
    "body": "Actually there were changes in pynac-0.7.17 that appear to have fixed it. With #24838:\n\n```\nsage:  sage: a = 1 + e^(I*pi/4)\n....:  sage: b = 1 - e^(I*pi/4)\n....:  sage: a*b\n....: \n1/4*((I + 1)*sqrt(2) - 2)*(-(I + 1)*sqrt(2) - 2)\n```\n\nWe might doctest this in this ticket, though.",
    "created_at": "2018-03-02T14:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345258",
    "user": "https://github.com/rwst"
}
```

Actually there were changes in pynac-0.7.17 that appear to have fixed it. With #24838:

```
sage:  sage: a = 1 + e^(I*pi/4)
....:  sage: b = 1 - e^(I*pi/4)
....:  sage: a*b
....: 
1/4*((I + 1)*sqrt(2) - 2)*(-(I + 1)*sqrt(2) - 2)
```

We might doctest this in this ticket, though.



---

archive/issue_comments_345259.json:
```json
{
    "body": "Replying to [comment:6 rws]:\n> Actually there were changes in pynac-0.7.17 that appear to have fixed it. With #24838:\n\nCool\n\n> We might doctest this in this ticket, though.\n\n+1",
    "created_at": "2018-03-02T14:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345259",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:6 rws]:
> Actually there were changes in pynac-0.7.17 that appear to have fixed it. With #24838:

Cool

> We might doctest this in this ticket, though.

+1



---

archive/issue_comments_345260.json:
```json
{
    "body": "Ralf, Irene is working on this ticket (she is learning how to develop). We will have a branch in a minute. Thanks for pointing #24838.",
    "created_at": "2018-03-02T14:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345260",
    "user": "https://github.com/videlec"
}
```

Ralf, Irene is working on this ticket (she is learning how to develop). We will have a branch in a minute. Thanks for pointing #24838.



---

archive/issue_comments_345261.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-03-02T15:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345261",
    "user": "https://trac.sagemath.org/admin/accounts/users/ipasquinelli"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_345262.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-03-02T15:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345262",
    "user": "https://trac.sagemath.org/admin/accounts/users/ipasquinelli"
}
```

New commits:



---

archive/issue_comments_345263.json:
```json
{
    "body": "I think this is fine, but we may have to wait for setting positive until #24838 gets positive.",
    "created_at": "2018-03-03T08:42:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345263",
    "user": "https://github.com/rwst"
}
```

I think this is fine, but we may have to wait for setting positive until #24838 gets positive.



---

archive/issue_comments_345264.json:
```json
{
    "body": "Okay, the dependency #24838 is now in the develop branch. Your branch no longer merges because there were further changes in the dependency. Instead of merging them I created a fresh branch with only your commit (using `git cherry-pick`).\n----\nNew commits:",
    "created_at": "2018-07-01T06:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345264",
    "user": "https://github.com/rwst"
}
```

Okay, the dependency #24838 is now in the develop branch. Your branch no longer merges because there were further changes in the dependency. Instead of merging them I created a fresh branch with only your commit (using `git cherry-pick`).
----
New commits:



---

archive/issue_comments_345265.json:
```json
{
    "body": "Changing keywords from \"days93\" to \"days93, days94\".",
    "created_at": "2018-07-01T07:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345265",
    "user": "https://github.com/tscrim"
}
```

Changing keywords from "days93" to "days93, days94".



---

archive/issue_comments_345266.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-01T07:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345266",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_345267.json:
```json
{
    "body": "LGTM.",
    "created_at": "2018-07-01T07:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345267",
    "user": "https://github.com/tscrim"
}
```

LGTM.



---

archive/issue_comments_345268.json:
```json
{
    "body": "see patchbot",
    "created_at": "2018-07-05T22:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345268",
    "user": "https://github.com/vbraun"
}
```

see patchbot



---

archive/issue_comments_345269.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-07-05T22:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345269",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_345270.json:
```json
{
    "body": "Problem actually comes from an earlier doctest:\n\n```\nsage: e = x+1 <= x-2\n```\n\n(I tested this by copy/pasting the doctest).\nSo we probably need to use `exp`.",
    "created_at": "2018-07-05T23:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345270",
    "user": "https://github.com/tscrim"
}
```

Problem actually comes from an earlier doctest:

```
sage: e = x+1 <= x-2
```

(I tested this by copy/pasting the doctest).
So we probably need to use `exp`.



---

archive/issue_comments_345271.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-06T05:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345272.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-07-06T05:36:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345272",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_345273.json:
```json
{
    "body": "update milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345273",
    "user": "https://github.com/videlec"
}
```

update milestone 8.3 -> 8.4



---

archive/issue_comments_345274.json:
```json
{
    "body": "Forgot about this. LGTM.",
    "created_at": "2018-08-04T07:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345274",
    "user": "https://github.com/tscrim"
}
```

Forgot about this. LGTM.



---

archive/issue_comments_345275.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-04T07:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345275",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_345276.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2018-08-04T11:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345276",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_345277.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2018-08-04T11:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345277",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_345278.json:
```json
{
    "body": "Replying to [comment:21 git]:\n> Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n> ||[4d0c51e](https://git.sagemath.org/sage.git/commit/?id=4d0c51eab2f477499b6f7c64b5e7d179f8063cf2)||`Merge with sage-8.3`||\n\nI fixed a trivial merge conflict with 8.3.",
    "created_at": "2018-08-04T11:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345278",
    "user": "https://github.com/bryangingechen"
}
```

Replying to [comment:21 git]:
> Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
> ||[4d0c51e](https://git.sagemath.org/sage.git/commit/?id=4d0c51eab2f477499b6f7c64b5e7d179f8063cf2)||`Merge with sage-8.3`||

I fixed a trivial merge conflict with 8.3.



---

archive/issue_comments_345279.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-04T11:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345279",
    "user": "https://github.com/bryangingechen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_023005.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2018-08-06T15:13:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24646#event-23005"
}
```



---

archive/issue_comments_345280.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-06T15:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-345280",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
