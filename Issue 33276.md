# Issue 33276: Save threejs graphics using puppeteer

Issue created by migration from https://trac.sagemath.org/ticket/33513

Original creator: mkoeppe

Original creation time: 2022-03-16 18:33:47

CC:  klee egourgoulhon

https://github.com/puppeteer/puppeteer, which is used by screenshotting tools such as https://github.com/marketplace/actions/screenshots-ci-action


---

Comment by klee created at 2022-03-17 00:35:58

It sounds a silly question, but why saving static images from 3d graphics in the documentation is an issue?


---

Comment by mkoeppe created at 2022-03-17 01:23:55

The issue is that it currently relies on ancient technology - either Jmol (which needs a Java runtime) or alternatively tachyon.


---

Comment by klee created at 2022-03-17 01:55:48

Replying to [comment:2 mkoeppe]:
> The issue is that it currently relies on ancient technology - either Jmol (which needs a Java runtime) or alternatively tachyon.

I meant why we should save static images in the first place. In interactive use of the documentation, threejs provides a menu to save png image.


---

Comment by klee created at 2022-03-17 01:58:42

I meant when we use jupyter-sphinx, which provides the menu.


---

Comment by mkoeppe created at 2022-03-17 01:59:17

Of course for the HTML doc I do prefer embedding the notebook (#33507).
But for PDF we probably don't have a better option.


---

Comment by klee created at 2022-03-17 02:01:58

Okay. I see.


---

Comment by klee created at 2022-03-17 02:09:21

I wrongly presumed that jupyter-sphinx rendering of 3d images would produce png images for pdf docs. Now I checked that it doesn't work that way.


---

Comment by mkoeppe created at 2022-03-17 04:15:30

With this branch, it can be installed via `make node_puppeteer`, then in `./sage -sh`, the example `hn.js` shown in https://github.com/puppeteer/puppeteer works
----
New commits:


---

Comment by klee created at 2022-03-17 05:04:04

In #33507, I take a simple approach to provide static images for pdf documentation. 

I think that seeking for an automatic way to produce static images from live images would not be worth the efforts. One of the reasons is that taking a good-looking static image needs human intervention anyway.


---

Comment by mkoeppe created at 2022-03-17 05:10:06

Yes, that's a very good point


---

Comment by mkoeppe created at 2022-03-17 07:27:31

There's also `pyppeteer`, mentioned in
https://nbconvert.readthedocs.io/en/latest/changelog.html


---

Comment by gutow created at 2022-03-17 12:40:47

As I helped with the original integration of Jmol, I can tell you that once the decision to move to other 3D renders occurred there has been no maintenance of Jmol in Sage. In theory it could work, but I think making it optional or removing it would be a good idea at this point. There is some work towards making Jmol work easily in a Jupyter environment. If people wish to combine the molecular rendering savvy of Jmol with Sage, I think that will be the way to go. I encourage you to remove the dependence.


---

Comment by mkoeppe created at 2022-03-20 02:04:34

Replying to [comment:13 mkoeppe]:
> There's also `pyppeteer`, mentioned in
> https://nbconvert.readthedocs.io/en/latest/changelog.html

Opened #33533, #33534 for this
