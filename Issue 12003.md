# Issue 12003: Missing *args and **kwds in SL2Z.random_element()

archive/issues_012003.json:
```json
{
    "body": "Assignee: @craigcitro\n\nCC:  @malb\n\nIn #3893 SL2Z.random_element() was fixed to pass through *args and **kwds arguments. There are still 2 cases in the method that don't do that.\n\nI really don't know how to provide a doctest for this patch.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12175\n\n",
    "created_at": "2011-12-17T20:50:29Z",
    "labels": [
        "component: modular forms",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.8",
    "title": "Missing *args and **kwds in SL2Z.random_element()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12003",
    "user": "https://trac.sagemath.org/admin/accounts/users/fschulze"
}
```
Assignee: @craigcitro

CC:  @malb

In #3893 SL2Z.random_element() was fixed to pass through *args and **kwds arguments. There are still 2 cases in the method that don't do that.

I really don't know how to provide a doctest for this patch.

Issue created by migration from https://trac.sagemath.org/ticket/12175





---

archive/issue_comments_138438.json:
```json
{
    "body": "Attachment [trac_12175_random_element.patch](tarball://root/attachments/some-uuid/ticket12175/trac_12175_random_element.patch) by fschulze created at 2011-12-17 20:56:43",
    "created_at": "2011-12-17T20:56:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138438",
    "user": "https://trac.sagemath.org/admin/accounts/users/fschulze"
}
```

Attachment [trac_12175_random_element.patch](tarball://root/attachments/some-uuid/ticket12175/trac_12175_random_element.patch) by fschulze created at 2011-12-17 20:56:43



---

archive/issue_comments_138439.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-01-24T12:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138439",
    "user": "https://trac.sagemath.org/admin/accounts/users/fschulze"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_138440.json:
```json
{
    "body": "The patchbot show a doctest failure:\n\n```\nFile \"/opt/patchbot-5.7.beta0/devel/sage-12175/sage/modular/arithgroup/congroup_sl2z.py\", line 193:\n    sage: SL2Z.random_element(5, distribution='1/n')\nExpected:\n    [ 1 -1]\n    [ 0  1]\nGot:\n    [ 1 -4]\n    [ 0  1]\n```\n\nThat test probably needs to be marked as \"`#random`\".",
    "created_at": "2013-01-26T17:11:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138440",
    "user": "https://github.com/cnassau"
}
```

The patchbot show a doctest failure:

```
File "/opt/patchbot-5.7.beta0/devel/sage-12175/sage/modular/arithgroup/congroup_sl2z.py", line 193:
    sage: SL2Z.random_element(5, distribution='1/n')
Expected:
    [ 1 -1]
    [ 0  1]
Got:
    [ 1 -4]
    [ 0  1]
```

That test probably needs to be marked as "`#random`".



---

archive/issue_comments_138441.json:
```json
{
    "body": "I have added a few \"# random# tags. Let us see if the bot is happy.",
    "created_at": "2013-02-14T12:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138441",
    "user": "https://github.com/fchapoton"
}
```

I have added a few "# random# tags. Let us see if the bot is happy.



---

archive/issue_comments_138442.json:
```json
{
    "body": "This shouldn't get a #random tag. Running the test multiple times gives the same new result every time.",
    "created_at": "2013-02-14T13:25:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138442",
    "user": "https://trac.sagemath.org/admin/accounts/users/fschulze"
}
```

This shouldn't get a #random tag. Running the test multiple times gives the same new result every time.



---

archive/issue_comments_138443.json:
```json
{
    "body": "I do not agree. This is a random function, and we should not expect it to return a fixed result.\n\n\n```\nsage: SL2Z.random_element(5, distribution='1/n')\n[-1 -1]\n[ 0 -1]\nsage: SL2Z.random_element(5, distribution='1/n')\n[1 1]\n[0 1]\nsage: SL2Z.random_element(5, distribution='1/n')\n[-1  7]\n[ 1 -8]\n```\n\n\nThe result is random, and the test must be tagged accordingly.",
    "created_at": "2013-02-14T14:07:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138443",
    "user": "https://github.com/fchapoton"
}
```

I do not agree. This is a random function, and we should not expect it to return a fixed result.


```
sage: SL2Z.random_element(5, distribution='1/n')
[-1 -1]
[ 0 -1]
sage: SL2Z.random_element(5, distribution='1/n')
[1 1]
[0 1]
sage: SL2Z.random_element(5, distribution='1/n')
[-1  7]
[ 1 -8]
```


The result is random, and the test must be tagged accordingly.



---

archive/issue_comments_138444.json:
```json
{
    "body": "It is a pseudorandom function. From the Developers guide\nhttp://www.sagemath.org/doc/developer/conventions.html\n\n> However, most functions generating pseudorandom output do not need this tag\n> since the doctesting framework guarantees the state of the pseudorandom number generators\n> (PRNGs) used in Sage for a given doctest.",
    "created_at": "2013-02-15T08:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138444",
    "user": "https://trac.sagemath.org/admin/accounts/users/fschulze"
}
```

It is a pseudorandom function. From the Developers guide
http://www.sagemath.org/doc/developer/conventions.html

> However, most functions generating pseudorandom output do not need this tag
> since the doctesting framework guarantees the state of the pseudorandom number generators
> (PRNGs) used in Sage for a given doctest.



---

archive/issue_comments_138445.json:
```json
{
    "body": "Attachment [trac_12175_random_element_v2.patch](tarball://root/attachments/some-uuid/ticket12175/trac_12175_random_element_v2.patch) by fschulze created at 2013-02-15 09:14:11\n\nAlso fix the doctests.",
    "created_at": "2013-02-15T09:14:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138445",
    "user": "https://trac.sagemath.org/admin/accounts/users/fschulze"
}
```

Attachment [trac_12175_random_element_v2.patch](tarball://root/attachments/some-uuid/ticket12175/trac_12175_random_element_v2.patch) by fschulze created at 2013-02-15 09:14:11

Also fix the doctests.



---

archive/issue_comments_138446.json:
```json
{
    "body": "Attachment [trac_12175_tag_random_fc.patch](tarball://root/attachments/some-uuid/ticket12175/trac_12175_tag_random_fc.patch) by @fchapoton created at 2013-02-15 09:18:43\n\nOk, I think we can then agree. My review patch also removes whitespaces and changes Raise to pyhton3 syntax, so one should rather do\n\napply trac_12175_random_element.patch trac_12175_tag_random_fc.patch",
    "created_at": "2013-02-15T09:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138446",
    "user": "https://github.com/fchapoton"
}
```

Attachment [trac_12175_tag_random_fc.patch](tarball://root/attachments/some-uuid/ticket12175/trac_12175_tag_random_fc.patch) by @fchapoton created at 2013-02-15 09:18:43

Ok, I think we can then agree. My review patch also removes whitespaces and changes Raise to pyhton3 syntax, so one should rather do

apply trac_12175_random_element.patch trac_12175_tag_random_fc.patch



---

archive/issue_comments_138447.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-02-15T12:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138447",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_138448.json:
```json
{
    "body": "Positive review, as the patchbot has given a green light and we agreed on what to do.",
    "created_at": "2013-02-15T12:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138448",
    "user": "https://github.com/fchapoton"
}
```

Positive review, as the patchbot has given a green light and we agreed on what to do.



---

archive/issue_comments_138449.json:
```json
{
    "body": "Please fill in the Author and Reviewer fields with your real names.",
    "created_at": "2013-02-15T17:10:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138449",
    "user": "https://github.com/jdemeyer"
}
```

Please fill in the Author and Reviewer fields with your real names.



---

archive/issue_events_012043.json:
```json
{
    "actor": "@jdemeyer",
    "created_at": "2013-02-22T19:10:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12003#event-12043"
}
```



---

archive/issue_comments_138450.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-02-22T19:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12003#issuecomment-138450",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
