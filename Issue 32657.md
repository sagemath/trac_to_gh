# Issue 32657: split out a separate Python package primecount

archive/issues_032657.json:
```json
{
    "body": "CC:  mkoeppe\n\nThis is a followup to #25009\n\nHere is my failing attempt to create such a package:\nhttps://github.com/dimpase/primecount \n\nAttention of Cython/packaging experts needed\n\nIssue created by migration from https://trac.sagemath.org/ticket/32894\n\n",
    "created_at": "2021-11-18T10:43:18Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "title": "split out a separate Python package primecount",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32657",
    "user": "dimpase"
}
```
CC:  mkoeppe

This is a followup to #25009

Here is my failing attempt to create such a package:
https://github.com/dimpase/primecount 

Attention of Cython/packaging experts needed

Issue created by migration from https://trac.sagemath.org/ticket/32894





---

archive/issue_comments_465881.json:
```json
{
    "body": "As you know, https://pypi.org/project/primecount/ is already taken...",
    "created_at": "2021-11-18T18:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465881",
    "user": "mkoeppe"
}
```

As you know, https://pypi.org/project/primecount/ is already taken...



---

archive/issue_comments_465882.json:
```json
{
    "body": "I must say I don't quite know what exactly pypi package name is, and whether anything beyond changes in MANIFEST.in and setup.py is needed.\nCan the module name still be the same, `primecount` ?\n\nWe'd call it `pyprimecount` instead.",
    "created_at": "2021-11-18T19:57:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465882",
    "user": "dimpase"
}
```

I must say I don't quite know what exactly pypi package name is, and whether anything beyond changes in MANIFEST.in and setup.py is needed.
Can the module name still be the same, `primecount` ?

We'd call it `pyprimecount` instead.



---

archive/issue_comments_465883.json:
```json
{
    "body": "I explained it recently in https://groups.google.com/g/sage-devel/c/p4MO6L95s7E/m/yZF93ewIBAAJ, take a look",
    "created_at": "2021-11-18T21:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465883",
    "user": "mkoeppe"
}
```

I explained it recently in https://groups.google.com/g/sage-devel/c/p4MO6L95s7E/m/yZF93ewIBAAJ, take a look



---

archive/issue_comments_465884.json:
```json
{
    "body": "OK, thanks. Another thing I don't understand is how the C++ library prinecount is meant to be provided. It's not something too standard to assume it's just installed.\n\n Does it mean to be a non-python dependency of Sage? Or of (py)prinecount?",
    "created_at": "2021-11-18T22:00:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465884",
    "user": "dimpase"
}
```

OK, thanks. Another thing I don't understand is how the C++ library prinecount is meant to be provided. It's not something too standard to assume it's just installed.

 Does it mean to be a non-python dependency of Sage? Or of (py)prinecount?



---

archive/issue_comments_465885.json:
```json
{
    "body": "When `pyprimecount` is installed from a source distribution, it will just assume that the necessary library is available. Python packages do not have a way to declare non-Python dependencies.\n\nLater one may consider to build wheels that include a copy of the shared library.\nThis is what for example `numpy` does regarding BLAS: The source distribution certainly does not contain a copy of BLAS, but the wheels ship with a copy of the OpenBLAS shared library.",
    "created_at": "2021-11-18T22:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465885",
    "user": "mkoeppe"
}
```

When `pyprimecount` is installed from a source distribution, it will just assume that the necessary library is available. Python packages do not have a way to declare non-Python dependencies.

Later one may consider to build wheels that include a copy of the shared library.
This is what for example `numpy` does regarding BLAS: The source distribution certainly does not contain a copy of BLAS, but the wheels ship with a copy of the OpenBLAS shared library.



---

archive/issue_comments_465886.json:
```json
{
    "body": "On the Sage side, there will be two SPKGs: One for `primecount`, one for `pyprimecount`. This mirrors what is done, for example, for `ppl` and `pplpy`. The SPKG `dependencies` of `pyprimecount` include `primecount`; so when `pyprimecount` is pip-installed, the library has already been installed.",
    "created_at": "2021-11-18T22:33:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465886",
    "user": "mkoeppe"
}
```

On the Sage side, there will be two SPKGs: One for `primecount`, one for `pyprimecount`. This mirrors what is done, for example, for `ppl` and `pplpy`. The SPKG `dependencies` of `pyprimecount` include `primecount`; so when `pyprimecount` is pip-installed, the library has already been installed.



---

archive/issue_comments_465887.json:
```json
{
    "body": "after a very careful consideration, decided to rename it `primecountpy`.",
    "created_at": "2021-11-19T11:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465887",
    "user": "dimpase"
}
```

after a very careful consideration, decided to rename it `primecountpy`.



---

archive/issue_comments_465888.json:
```json
{
    "body": "OK, so prinecountpy works (needs setting up proper tests, etc), but other than that, what else is needed on that side?Some pypi/pip magic? \n\n(on Sage's side clearly code to be removed and replaced by hopefully clear something...)",
    "created_at": "2021-11-20T14:39:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465888",
    "user": "dimpase"
}
```

OK, so prinecountpy works (needs setting up proper tests, etc), but other than that, what else is needed on that side?Some pypi/pip magic? 

(on Sage's side clearly code to be removed and replaced by hopefully clear something...)



---

archive/issue_comments_465889.json:
```json
{
    "body": "when primecountpy is ready, use `setup.py sdist` to create an sdist and upload to PyPI with `twine`\n\nThen on the Sage side, use `./sage -package create primecountpy --pypi`",
    "created_at": "2021-11-20T16:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465889",
    "user": "mkoeppe"
}
```

when primecountpy is ready, use `setup.py sdist` to create an sdist and upload to PyPI with `twine`

Then on the Sage side, use `./sage -package create primecountpy --pypi`



---

archive/issue_comments_465890.json:
```json
{
    "body": "OK, here it is: https://pypi.org/project/primecountpy/",
    "created_at": "2021-11-25T12:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465890",
    "user": "dimpase"
}
```

OK, here it is: https://pypi.org/project/primecountpy/



---

archive/issue_comments_465891.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2021-11-25T13:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465891",
    "user": "dimpase"
}
```

Last 10 new commits:



---

archive/issue_comments_465892.json:
```json
{
    "body": "it works, apparently.",
    "created_at": "2021-11-25T13:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465892",
    "user": "dimpase"
}
```

it works, apparently.



---

archive/issue_comments_465893.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-11-25T13:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465893",
    "user": "dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_465894.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-25T13:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465894",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465895.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-26T23:40:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465895",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465896.json:
```json
{
    "body": "this should go to #25009",
    "created_at": "2021-11-26T23:42:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465896",
    "user": "mkoeppe"
}
```

this should go to #25009



---

archive/issue_comments_465897.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-11-27T00:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465897",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_465898.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-11-29T20:16:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465898",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_465899.json:
```json
{
    "body": "Shouldn't `sage.interfaces.primecount` provide some deprecated re-imports?",
    "created_at": "2021-11-29T20:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465899",
    "user": "mkoeppe"
}
```

Shouldn't `sage.interfaces.primecount` provide some deprecated re-imports?



---

archive/issue_comments_465900.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-11-29T20:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465900",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_465901.json:
```json
{
    "body": "`build/pkgs/primecountpy/dependencies` is still missing the dependency `cython`. It is NOT part of `PYTHON_TOOLCHAIN` as you can see in `build/make/Makefile.in`",
    "created_at": "2021-11-29T20:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465901",
    "user": "mkoeppe"
}
```

`build/pkgs/primecountpy/dependencies` is still missing the dependency `cython`. It is NOT part of `PYTHON_TOOLCHAIN` as you can see in `build/make/Makefile.in`



---

archive/issue_comments_465902.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-30T09:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465902",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465903.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-11-30T09:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465903",
    "user": "dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_465904.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-01T13:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465904",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465905.json:
```json
{
    "body": "\n```\n+from primecountpy.primecount import prime_pi as _prime_pi\n+from primecountpy.primecount import phi as _phi\n```\n\nI think this should use `lazy_import` with a `deprecation` parameter",
    "created_at": "2021-12-01T20:17:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465905",
    "user": "mkoeppe"
}
```


```
+from primecountpy.primecount import prime_pi as _prime_pi
+from primecountpy.primecount import phi as _phi
```

I think this should use `lazy_import` with a `deprecation` parameter



---

archive/issue_comments_465906.json:
```json
{
    "body": "What does one want to deprecate here?\n\nlazy_import is a good idea, yes.",
    "created_at": "2021-12-01T20:54:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465906",
    "user": "dimpase"
}
```

What does one want to deprecate here?

lazy_import is a good idea, yes.



---

archive/issue_comments_465907.json:
```json
{
    "body": "Sorry, I was looking in the wrong place. I should have said: `sage.interfaces.primecount`  cannot be eliminated immediately, instead it should use `lazy_import` with a `deprecation` parameter to re-export the functions provided by `primecountpy`.",
    "created_at": "2021-12-01T21:00:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465907",
    "user": "mkoeppe"
}
```

Sorry, I was looking in the wrong place. I should have said: `sage.interfaces.primecount`  cannot be eliminated immediately, instead it should use `lazy_import` with a `deprecation` parameter to re-export the functions provided by `primecountpy`.



---

archive/issue_comments_465908.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-02T11:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465908",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465909.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-02T14:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465909",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465910.json:
```json
{
    "body": "Replying to [comment:33 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> ||[9cfdad8](https://git.sagemath.org/sage.git/commit/?id=9cfdad8bbb3bc7371d8c45f01e23d1e31e5cf732)||`deprecate sage.interfaces.primecount, not just remove`||\n\nThis should resolve comment:29 - although perhaps not perfectly, as this is now Python-only. I don't know how to deprecate Cython functions.",
    "created_at": "2021-12-02T14:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465910",
    "user": "dimpase"
}
```

Replying to [comment:33 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[9cfdad8](https://git.sagemath.org/sage.git/commit/?id=9cfdad8bbb3bc7371d8c45f01e23d1e31e5cf732)||`deprecate sage.interfaces.primecount, not just remove`||

This should resolve comment:29 - although perhaps not perfectly, as this is now Python-only. I don't know how to deprecate Cython functions.



---

archive/issue_comments_465911.json:
```json
{
    "body": "Replying to [comment:32 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> ||[30346c0](https://git.sagemath.org/sage.git/commit/?id=30346c0f7a5866249ee791d5a5b3a00840f20143)||`cysignals are needed`||\n\nNow the CI on https://github.com/dimpase/primecountpy/runs/4394526057\npasses. (The whole platforms shebang is still running).",
    "created_at": "2021-12-02T14:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465911",
    "user": "dimpase"
}
```

Replying to [comment:32 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[30346c0](https://git.sagemath.org/sage.git/commit/?id=30346c0f7a5866249ee791d5a5b3a00840f20143)||`cysignals are needed`||

Now the CI on https://github.com/dimpase/primecountpy/runs/4394526057
passes. (The whole platforms shebang is still running).



---

archive/issue_comments_465912.json:
```json
{
    "body": "Replying to [comment:34 dimpase]:\n> This should resolve comment:29 - although perhaps not perfectly, as this is now Python-only. \n\nYes, this is what I had in mind, thanks.\n\n> I don't know how to deprecate Cython functions.\n\nWe don't have a mechanism for that.",
    "created_at": "2021-12-02T18:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465912",
    "user": "mkoeppe"
}
```

Replying to [comment:34 dimpase]:
> This should resolve comment:29 - although perhaps not perfectly, as this is now Python-only. 

Yes, this is what I had in mind, thanks.

> I don't know how to deprecate Cython functions.

We don't have a mechanism for that.



---

archive/issue_comments_465913.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-02T18:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465913",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_465914.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-12-02T20:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465914",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_465915.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-12-02T20:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465915",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_465916.json:
```json
{
    "body": "a trivial addition.",
    "created_at": "2021-12-02T20:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465916",
    "user": "dimpase"
}
```

a trivial addition.



---

archive/issue_comments_465917.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-02T20:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465917",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_465918.json:
```json
{
    "body": "Can you add `primesieve` conda package too?",
    "created_at": "2021-12-05T04:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465918",
    "user": "isuruf"
}
```

Can you add `primesieve` conda package too?



---

archive/issue_comments_465919.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-12-05T12:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465919",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_465920.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-12-05T12:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465920",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_465921.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-05T12:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465921",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_465922.json:
```json
{
    "body": "Replying to [comment:40 isuruf]:\n> Can you add `primesieve` conda package too?\ndone.",
    "created_at": "2021-12-05T12:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465922",
    "user": "dimpase"
}
```

Replying to [comment:40 isuruf]:
> Can you add `primesieve` conda package too?
done.



---

archive/issue_comments_465923.json:
```json
{
    "body": "Test fail, e.g. \n\n```\nFile \"src/sage/plot/plot.py\", line 1753, in sage.plot.plot.plot\nFailed example:\n    plot(lambda x: prime_pi(x), (x, 1, 100), exclude=jumps)\nExpected:\n    Graphics object consisting of 26 graphics primitives\nGot:\n    verbose 0 (3839: plot.py, generate_plot_points) WARNING: When plotting, failed to evaluate function at 248 points.\n    verbose 0 (3839: plot.py, generate_plot_points) Last error message: 'unable to simplify to float approximation'\n    Graphics object consisting of 0 graphics primitives\n**********************************************************************\n1 item had failures:\n   1 of 147 in sage.plot.plot.plot\n    [423 tests, 1 failure, 28.78 s]\n----------------------------------------------------------------------\nsage -t --warn-long 47.7 --random-seed=57011699320160764553253619770787736483 src/sage/plot/plot.py  # 1 doctest failed\n```\n",
    "created_at": "2021-12-12T17:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465923",
    "user": "vbraun"
}
```

Test fail, e.g. 

```
File "src/sage/plot/plot.py", line 1753, in sage.plot.plot.plot
Failed example:
    plot(lambda x: prime_pi(x), (x, 1, 100), exclude=jumps)
Expected:
    Graphics object consisting of 26 graphics primitives
Got:
    verbose 0 (3839: plot.py, generate_plot_points) WARNING: When plotting, failed to evaluate function at 248 points.
    verbose 0 (3839: plot.py, generate_plot_points) Last error message: 'unable to simplify to float approximation'
    Graphics object consisting of 0 graphics primitives
**********************************************************************
1 item had failures:
   1 of 147 in sage.plot.plot.plot
    [423 tests, 1 failure, 28.78 s]
----------------------------------------------------------------------
sage -t --warn-long 47.7 --random-seed=57011699320160764553253619770787736483 src/sage/plot/plot.py  # 1 doctest failed
```




---

archive/issue_comments_465924.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-12-12T17:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465924",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_465925.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2021-12-13T00:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465925",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_465926.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-12-13T18:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465926",
    "user": "dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_465927.json:
```json
{
    "body": "rebased an added `\u200b74b3845\tallow float inputs for prime_pi` to deal with the need for `prime_pi` to accept floats as input.\nAll the relevant tests pass.",
    "created_at": "2021-12-13T18:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465927",
    "user": "dimpase"
}
```

rebased an added `​74b3845	allow float inputs for prime_pi` to deal with the need for `prime_pi` to accept floats as input.
All the relevant tests pass.



---

archive/issue_comments_465928.json:
```json
{
    "body": "LGTM.",
    "created_at": "2021-12-13T19:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465928",
    "user": "mkoeppe"
}
```

LGTM.



---

archive/issue_comments_465929.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-13T19:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465929",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_465930.json:
```json
{
    "body": "Marking this ticket \"critical\" in light of #33054 because it adds the conda package information",
    "created_at": "2021-12-21T01:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465930",
    "user": "mkoeppe"
}
```

Marking this ticket "critical" in light of #33054 because it adds the conda package information



---

archive/issue_comments_465931.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2021-12-21T01:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465931",
    "user": "mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_465932.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-23T20:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32657#issuecomment-465932",
    "user": "vbraun"
}
```

Resolution: fixed
