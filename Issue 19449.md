# Issue 19449: Category of finite posets: lower_set() broken

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2015-12-09 13:02:35

CC:  nthiery chapoton

Keywords: poset


```
P = Posets.PentagonPoset()
print P.principal_order_ideal(3)
print P.principal_lower_set(3)
print P.order_ideal([3])
print P.lower_set([3])
```


gives


```
[0, 2, 3]
[0, 2, 3]
[0, 2, 3]
TypeError: 'NotImplementedType' object is not callable
```


And this seems like a bug. CC to nthiery as this probably relates to category code.


---

Comment by nthiery created at 2015-12-09 13:20:23

Good point: the alias `lower_set` -> `order_ideal` as implemented in the category `Posets.ParentMethods.lower_set` does not work. One probably needs to write it as
a trivial method which calls `order_ideal`. The same issue applies to `upper_set`.

By the way: the rationale for those aliases is that, in the long run, I am in favor of migrating from `order_ideal` to `lower_set`: the former is ambiguous with two distinct widely accepted meanings in the community.

Note: this is about (the abstract classes for) posets ; not to the category infrastructure.


---

Comment by jmantysalo created at 2015-12-09 16:14:35

Replying to [comment:1 nthiery]:

> By the way: the rationale for those aliases is that, in the long run, I am in favor of migrating from `order_ideal` to `lower_set`: the former is ambiguous with two distinct widely accepted meanings in the community.

I never remember which one is "ideal" and which "filter". Hence "lower (/upper) set" is better. OTOH the order ideals lattice of a poset is established term.

> Note: this is about (the abstract classes for) posets ; not to the category infrastructure.

Yep. But you may know what to do with ``@`abstract_method` that seems to be the difference between `lower_set` and `principal_lower_set`. I do not.


---

Comment by jmantysalo created at 2015-12-15 09:44:16

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2015-12-15 09:44:16

What you think about this? At least now `lower_set` and `upper_set` seems to work.

There is also `is_order_filter` (and `...ideal`). They should be changed too, if we make `[lower|upper]_set()` the preferred name.

I would like to see html docs with functions like this hidden. Just like we now have deprecated function removed, we should have a way to hide non-preferred alias names.

(The patch contains also one-letter typo correction for another file.)
----
New commits:


---

Comment by jmantysalo created at 2016-01-15 08:30:36

Jeroen won the "select random victim as a possible reviewer" for this ticket.


---

Comment by jmantysalo created at 2016-01-21 06:41:00

Frédéric? Few lines long patch, but is there something against this kind of "alias-defining" function?

Of course the file should have index of functions etc, but at least this will correct a clear bug.


---

Comment by chapoton created at 2016-01-21 20:20:28

I would rather remove the not-working aliases.

Otherwise, if you create new functions as you propose (that I find rather ugly), to ensure 100% coverage, you have to duplicate the doctests.

The best solution would of course to make sure that the aliases just work as they are written currently.


---

Comment by git created at 2016-01-21 20:42:11

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jmantysalo created at 2016-01-21 20:44:59

Replying to [comment:8 chapoton]:
> I would rather remove the not-working aliases.

It is of course OK, supposing that this has never worked. Or actually not at least for normal deprecation period. Here is a removal patch.

There is of course a sligth inconsistency with existing `principal_lower_set`, but that can be thinked later.


---

Comment by chapoton created at 2016-01-21 20:45:24

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-01-24 21:48:26

Resolution: fixed
