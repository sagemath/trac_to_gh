# Issue 19449: Category of posets: lower_set() broken

archive/issues_019449.json:
```json
{
    "body": "CC:  @nthiery @fchapoton\n\nKeywords: poset\n\n```\nP = Posets.PentagonPoset()\nprint P.principal_order_ideal(3)\nprint P.principal_lower_set(3)\nprint P.order_ideal([3])\nprint P.lower_set([3])\n```\n\ngives\n\n```\n[0, 2, 3]\n[0, 2, 3]\n[0, 2, 3]\nTypeError: 'NotImplementedType' object is not callable\n```\n\nAnd this seems like a bug. Same applies to `upper_set`.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/19686\n\n",
    "closed_at": "2016-01-24T21:48:26Z",
    "created_at": "2015-12-09T13:02:35Z",
    "labels": [
        "component: combinatorics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "Category of posets: lower_set() broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19449",
    "user": "https://github.com/jm58660"
}
```
CC:  @nthiery @fchapoton

Keywords: poset

```
P = Posets.PentagonPoset()
print P.principal_order_ideal(3)
print P.principal_lower_set(3)
print P.order_ideal([3])
print P.lower_set([3])
```

gives

```
[0, 2, 3]
[0, 2, 3]
[0, 2, 3]
TypeError: 'NotImplementedType' object is not callable
```

And this seems like a bug. Same applies to `upper_set`.


Issue created by migration from https://trac.sagemath.org/ticket/19686





---

archive/issue_comments_267068.json:
```json
{
    "body": "Good point: the alias `lower_set` -> `order_ideal` as implemented in the category `Posets.ParentMethods.lower_set` does not work. One probably needs to write it as\na trivial method which calls `order_ideal`. The same issue applies to `upper_set`.\n\nBy the way: the rationale for those aliases is that, in the long run, I am in favor of migrating from `order_ideal` to `lower_set`: the former is ambiguous with two distinct widely accepted meanings in the community.\n\nNote: this is about (the abstract classes for) posets ; not to the category infrastructure.",
    "created_at": "2015-12-09T13:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19449#issuecomment-267068",
    "user": "https://github.com/nthiery"
}
```

Good point: the alias `lower_set` -> `order_ideal` as implemented in the category `Posets.ParentMethods.lower_set` does not work. One probably needs to write it as
a trivial method which calls `order_ideal`. The same issue applies to `upper_set`.

By the way: the rationale for those aliases is that, in the long run, I am in favor of migrating from `order_ideal` to `lower_set`: the former is ambiguous with two distinct widely accepted meanings in the community.

Note: this is about (the abstract classes for) posets ; not to the category infrastructure.



---

archive/issue_comments_267069.json:
```json
{
    "body": "Replying to [comment:1 nthiery]:\n\n> By the way: the rationale for those aliases is that, in the long run, I am in favor of migrating from `order_ideal` to `lower_set`: the former is ambiguous with two distinct widely accepted meanings in the community.\n\n\nI never remember which one is \"ideal\" and which \"filter\". Hence \"lower (/upper) set\" is better. OTOH the order ideals lattice of a poset is established term.\n\n> Note: this is about (the abstract classes for) posets ; not to the category infrastructure.\n\n\nYep. But you may know what to do with ``@`abstract_method` that seems to be the difference between `lower_set` and `principal_lower_set`. I do not.",
    "created_at": "2015-12-09T16:14:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19449#issuecomment-267069",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:1 nthiery]:

> By the way: the rationale for those aliases is that, in the long run, I am in favor of migrating from `order_ideal` to `lower_set`: the former is ambiguous with two distinct widely accepted meanings in the community.


I never remember which one is "ideal" and which "filter". Hence "lower (/upper) set" is better. OTOH the order ideals lattice of a poset is established term.

> Note: this is about (the abstract classes for) posets ; not to the category infrastructure.


Yep. But you may know what to do with ``@`abstract_method` that seems to be the difference between `lower_set` and `principal_lower_set`. I do not.



---

archive/issue_comments_267070.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-15T09:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19449#issuecomment-267070",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_267071.json:
```json
{
    "body": "What you think about this? At least now `lower_set` and `upper_set` seems to work.\n\nThere is also `is_order_filter` (and `...ideal`). They should be changed too, if we make `[lower|upper]_set()` the preferred name.\n\nI would like to see html docs with functions like this hidden. Just like we now have deprecated function removed, we should have a way to hide non-preferred alias names.\n\n(The patch contains also one-letter typo correction for another file.)\n\n---\nNew commits:",
    "created_at": "2015-12-15T09:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19449#issuecomment-267071",
    "user": "https://github.com/jm58660"
}
```

What you think about this? At least now `lower_set` and `upper_set` seems to work.

There is also `is_order_filter` (and `...ideal`). They should be changed too, if we make `[lower|upper]_set()` the preferred name.

I would like to see html docs with functions like this hidden. Just like we now have deprecated function removed, we should have a way to hide non-preferred alias names.

(The patch contains also one-letter typo correction for another file.)

---
New commits:



---

archive/issue_comments_267072.json:
```json
{
    "body": "Jeroen won the \"select random victim as a possible reviewer\" for this ticket.",
    "created_at": "2016-01-15T08:30:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19449#issuecomment-267072",
    "user": "https://github.com/jm58660"
}
```

Jeroen won the "select random victim as a possible reviewer" for this ticket.



---

archive/issue_comments_267073.json:
```json
{
    "body": "Fr\u00e9d\u00e9ric? Few lines long patch, but is there something against this kind of \"alias-defining\" function?\n\nOf course the file should have index of functions etc, but at least this will correct a clear bug.",
    "created_at": "2016-01-21T06:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19449#issuecomment-267073",
    "user": "https://github.com/jm58660"
}
```

Frédéric? Few lines long patch, but is there something against this kind of "alias-defining" function?

Of course the file should have index of functions etc, but at least this will correct a clear bug.



---

archive/issue_comments_267074.json:
```json
{
    "body": "I would rather remove the not-working aliases.\n\nOtherwise, if you create new functions as you propose (that I find rather ugly), to ensure 100% coverage, you have to duplicate the doctests.\n\nThe best solution would of course to make sure that the aliases just work as they are written currently.",
    "created_at": "2016-01-21T20:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19449#issuecomment-267074",
    "user": "https://github.com/fchapoton"
}
```

I would rather remove the not-working aliases.

Otherwise, if you create new functions as you propose (that I find rather ugly), to ensure 100% coverage, you have to duplicate the doctests.

The best solution would of course to make sure that the aliases just work as they are written currently.



---

archive/issue_comments_267075.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-21T20:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19449#issuecomment-267075",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_267076.json:
```json
{
    "body": "Replying to [comment:8 chapoton]:\n> I would rather remove the not-working aliases.\n\n\nIt is of course OK, supposing that this has never worked. Or actually not at least for normal deprecation period. Here is a removal patch.\n\nThere is of course a sligth inconsistency with existing `principal_lower_set`, but that can be thinked later.",
    "created_at": "2016-01-21T20:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19449#issuecomment-267076",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:8 chapoton]:
> I would rather remove the not-working aliases.


It is of course OK, supposing that this has never worked. Or actually not at least for normal deprecation period. Here is a removal patch.

There is of course a sligth inconsistency with existing `principal_lower_set`, but that can be thinked later.



---

archive/issue_events_054044.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-01-21T20:45:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19449#event-54044"
}
```



---

archive/issue_comments_267077.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-21T20:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19449#issuecomment-267077",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_267078.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-24T21:48:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19449#issuecomment-267078",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_054045.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-24T21:48:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19449",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19449#event-54045"
}
```
