# Issue 15613: FiniteStateMachine: provide hook on_duplicate_transition

Issue created by migration from Trac.

Original creator: cheuberg

Original creation time: 2014-02-23 14:17:32

CC:  dkrenn skropf slabbe

Keywords: finite_state_machine

When inserting a transition which is already present, this
is simply ignored. By providing a hook on_duplicate_transition, user
defined behaviour shall be made possible.

I am preparing a patch and will push it in a few days.


---

Comment by cheuberg created at 2014-03-17 14:34:34

Changing status from new to needs_review.


---

Comment by dkrenn created at 2014-03-18 10:11:51

During the review: Made some small changes. Code itself looks fine, doctests pass, docu checked, coverage checked. For me this is a positive review, but it would be good if someone else could have a look on it.


---

Comment by cheuberg created at 2014-03-18 10:16:55

In [#15078, comment 19](http://trac.sagemath.org/ticket/15078#comment:19), slabbe recommended having distinct classes `FiniteStateMachine`, `Transducer`, `Automaton`.

Therefore, I think it to be appropriate to briefly explain why I used a hook in this instance instead of having a new class `MarkovChain`:

- first, I think that it gives us more flexibility to customize the behaviour slightly
- second, having a class `MarkovChain` would probably require us to check whether the sum of the input weights of the transitions leaving a state adds up to 1. This would be quite cumbersome and inefficient. This checking is dealt with in #15961 (depending on this ticket).


---

Comment by vbraun created at 2014-04-04 16:04:31

Would be nicer to collect stuff into a class/module `duplicate_transaction.raise_error', maybe in the future.


---

Comment by vbraun created at 2014-04-04 16:04:31

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-04-04 18:52:27

Resolution: fixed


---

Comment by cheuberg created at 2014-04-12 08:59:50

Replying to [comment:4 vbraun]:
> Would be nicer to collect stuff into a class/module `duplicate_transaction.raise_error', maybe in the future.

Sorry, I do not really understand your comment. What should be collected in `duplicate_transaction.raise_error`?
