# Issue 18095: is_integer/is_rational for number field elements

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2015-04-29 12:00:32

We add two methods `is_integer` and `is_rational` for number field elements.

Currently, the only way to test this is to do duck typing

```
def is_integer(x):
    try:
        ZZ(x)
        return True
    except ValueError:
        return False
```

which is rather expensive compared to what can be done.


---

Comment by vdelecroix created at 2015-04-29 12:11:55

New commits:


---

Comment by vdelecroix created at 2015-04-29 12:11:55

Changing status from new to needs_review.


---

Comment by mmezzarobba created at 2015-05-03 07:47:55

Hi Vincent,

Is there a reason to keep the old `is_rational_c()` methods?


---

Comment by git created at 2015-05-03 08:49:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-05-03 08:51:09

Replying to [comment:2 mmezzarobba]:
> Hi Vincent,
> 
> Is there a reason to keep the old `is_rational_c()` methods?

No. Actually, this method was wrong since it returned `False` for `0`... I added a method `is_one` and rewrote `multiplicative_order`.


---

Comment by mmezzarobba created at 2015-05-03 09:16:42

Replying to [comment:4 vdelecroix]:
> No. Actually, this method was wrong since it returned `False` for `0`...

Yes, thoug it didn't matter in the only place where it was used :-)

> I added a method `is_one` and rewrote `multiplicative_order`.

But then I guess you'll want to declare `is_rational` and `is_one` as `cpdef`.


---

Comment by vdelecroix created at 2015-05-03 10:16:24

Replying to [comment:5 mmezzarobba]:
> Replying to [comment:4 vdelecroix]:
> > I added a method `is_one` and rewrote `multiplicative_order`.
> 
> But then I guess you'll want to declare `is_rational` and `is_one` as `cpdef`.

Do you think so? In `sage.structure.RingElement` the `is_one` method is declared as `def` with the following default implementation

```
    def is_one(self):
        return self == self._parent.one()
```

But it is true that it might be relatively intensively used in number fields. I will do that.


---

Comment by git created at 2015-05-03 10:33:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mmezzarobba created at 2015-05-04 12:06:19

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-05-05 00:32:28

Resolution: fixed


---

Comment by pelegm created at 2016-11-23 12:22:38

Why won't we add these methods to expressions as well?

`Integer`, `Rational` and `AlgebraicNumber` have `is_integer`, `is_one` and `is_zero` but not `is_real` or `is_rational` or `is_algebraic`.
