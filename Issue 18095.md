# Issue 18095: is_integer/is_rational for number field elements

archive/issues_018095.json:
```json
{
    "body": "We add two methods `is_integer` and `is_rational` for number field elements.\n\nCurrently, the only way to test this is to do duck typing\n\n```\ndef is_integer(x):\n    try:\n        ZZ(x)\n        return True\n    except ValueError:\n        return False\n```\n\nwhich is rather expensive compared to what can be done.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18332\n\n",
    "created_at": "2015-04-29T12:00:32Z",
    "labels": [
        "number fields",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "is_integer/is_rational for number field elements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18095",
    "user": "vdelecroix"
}
```
We add two methods `is_integer` and `is_rational` for number field elements.

Currently, the only way to test this is to do duck typing

```
def is_integer(x):
    try:
        ZZ(x)
        return True
    except ValueError:
        return False
```

which is rather expensive compared to what can be done.

Issue created by migration from https://trac.sagemath.org/ticket/18332





---

archive/issue_comments_243863.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-04-29T12:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18095",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18095#issuecomment-243863",
    "user": "vdelecroix"
}
```

New commits:



---

archive/issue_comments_243864.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-29T12:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18095",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18095#issuecomment-243864",
    "user": "vdelecroix"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_243865.json:
```json
{
    "body": "Hi Vincent,\n\nIs there a reason to keep the old `is_rational_c()` methods?",
    "created_at": "2015-05-03T07:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18095",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18095#issuecomment-243865",
    "user": "mmezzarobba"
}
```

Hi Vincent,

Is there a reason to keep the old `is_rational_c()` methods?



---

archive/issue_comments_243866.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-03T08:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18095",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18095#issuecomment-243866",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_243867.json:
```json
{
    "body": "Replying to [comment:2 mmezzarobba]:\n> Hi Vincent,\n> \n> Is there a reason to keep the old `is_rational_c()` methods?\n\nNo. Actually, this method was wrong since it returned `False` for `0`... I added a method `is_one` and rewrote `multiplicative_order`.",
    "created_at": "2015-05-03T08:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18095",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18095#issuecomment-243867",
    "user": "vdelecroix"
}
```

Replying to [comment:2 mmezzarobba]:
> Hi Vincent,
> 
> Is there a reason to keep the old `is_rational_c()` methods?

No. Actually, this method was wrong since it returned `False` for `0`... I added a method `is_one` and rewrote `multiplicative_order`.



---

archive/issue_comments_243868.json:
```json
{
    "body": "Replying to [comment:4 vdelecroix]:\n> No. Actually, this method was wrong since it returned `False` for `0`...\n\nYes, thoug it didn't matter in the only place where it was used :-)\n\n> I added a method `is_one` and rewrote `multiplicative_order`.\n\nBut then I guess you'll want to declare `is_rational` and `is_one` as `cpdef`.",
    "created_at": "2015-05-03T09:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18095",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18095#issuecomment-243868",
    "user": "mmezzarobba"
}
```

Replying to [comment:4 vdelecroix]:
> No. Actually, this method was wrong since it returned `False` for `0`...

Yes, thoug it didn't matter in the only place where it was used :-)

> I added a method `is_one` and rewrote `multiplicative_order`.

But then I guess you'll want to declare `is_rational` and `is_one` as `cpdef`.



---

archive/issue_comments_243869.json:
```json
{
    "body": "Replying to [comment:5 mmezzarobba]:\n> Replying to [comment:4 vdelecroix]:\n> > I added a method `is_one` and rewrote `multiplicative_order`.\n> \n> But then I guess you'll want to declare `is_rational` and `is_one` as `cpdef`.\n\nDo you think so? In `sage.structure.RingElement` the `is_one` method is declared as `def` with the following default implementation\n\n```\n    def is_one(self):\n        return self == self._parent.one()\n```\n\nBut it is true that it might be relatively intensively used in number fields. I will do that.",
    "created_at": "2015-05-03T10:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18095",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18095#issuecomment-243869",
    "user": "vdelecroix"
}
```

Replying to [comment:5 mmezzarobba]:
> Replying to [comment:4 vdelecroix]:
> > I added a method `is_one` and rewrote `multiplicative_order`.
> 
> But then I guess you'll want to declare `is_rational` and `is_one` as `cpdef`.

Do you think so? In `sage.structure.RingElement` the `is_one` method is declared as `def` with the following default implementation

```
    def is_one(self):
        return self == self._parent.one()
```

But it is true that it might be relatively intensively used in number fields. I will do that.



---

archive/issue_comments_243870.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-03T10:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18095",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18095#issuecomment-243870",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_243871.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-04T12:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18095",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18095#issuecomment-243871",
    "user": "mmezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_243872.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-05T00:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18095",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18095#issuecomment-243872",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_243873.json:
```json
{
    "body": "Why won't we add these methods to expressions as well?\n\n`Integer`, `Rational` and `AlgebraicNumber` have `is_integer`, `is_one` and `is_zero` but not `is_real` or `is_rational` or `is_algebraic`.",
    "created_at": "2016-11-23T12:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18095",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18095#issuecomment-243873",
    "user": "pelegm"
}
```

Why won't we add these methods to expressions as well?

`Integer`, `Rational` and `AlgebraicNumber` have `is_integer`, `is_one` and `is_zero` but not `is_real` or `is_rational` or `is_algebraic`.
