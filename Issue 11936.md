# Issue 11936: is_eulerian doesn't handle disconnected graphs properly

Issue created by migration from Trac.

Original creator: brunellus

Original creation time: 2011-12-02 22:28:13

Assignee: jason, ncohen, rlm

CC:  ncohen

Consider following:


```
sage: g = DiGraph({0:[1], 1:[0], 2:[]}); g.is_eulerian()
False
```


is_eulerian sees two components and refuses to label graph as an eulerian one. But the common definition (and the docstring) says that eulerian graph has all its edges coverable by one tour -- that permits disconnected graphs as long as every component but one don't contains any edges.


---

Attachment

My first patch. :-)


---

Comment by brunellus created at 2011-12-03 18:24:11

Changing status from new to needs_review.


---

Comment by ncohen created at 2011-12-03 21:01:00

Replying to [comment:2 brunellus]:
> My first patch. :-)

And a good one ! `:-)`

Just one remark : the connected_components_number actually calls connected components. So instead of computing the number of CC and *then* go over all vertices, what would you think of something like that :


```
ok = True
for cc in self.connected_components():
    if len(cc) > 1:
        if ok:
           ok = False
        else:
           return False
```


I feel like it could be faster, but that's really about milliseconds `:-)`

Nathann


---

Comment by brunellus created at 2011-12-04 13:26:17

Thanks for pointing this out. I will send another patch (with a few more tests cases, also) -- is it prefered to create it on top of the first one, or is it better to be replacement?


---

Comment by ncohen created at 2011-12-04 13:29:40

Oh, it is better to replace the patch (on bigger patches you can have a lot of modifications to make, soo...). It actually is not hard if you use mercurial queue

http://wiki.sagemath.org/MercurialQueues

And it will not be a waste if you intend to write other patches `;-)`

Nathann


---

Attachment

Thanks very much for the advices.

Graph.eulerian_circuit() suffers from a similar error (it tries to take first vertex at hand and if it is an isolated one, it immidiately fails) -- but I am already rewriting it for #10135, keeping this in mind.


---

Comment by ncohen created at 2011-12-10 20:12:30

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2011-12-10 20:12:30

Oh ! I did not noticed you updated the patch...... It's good to go ! `:-)`

Nathann


---

Comment by brunellus created at 2011-12-11 15:44:00

Thanks!


---

Comment by jdemeyer created at 2011-12-14 22:28:45

Resolution: fixed
