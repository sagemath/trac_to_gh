# Issue 11936: is_eulerian doesn't handle disconnected graphs properly

archive/issues_011936.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  ncohen\n\nConsider following:\n\n\n```\nsage: g = DiGraph({0:[1], 1:[0], 2:[]}); g.is_eulerian()\nFalse\n```\n\n\nis_eulerian sees two components and refuses to label graph as an eulerian one. But the common definition (and the docstring) says that eulerian graph has all its edges coverable by one tour -- that permits disconnected graphs as long as every component but one don't contains any edges.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12108\n\n",
    "created_at": "2011-12-02T22:28:13Z",
    "labels": [
        "graph theory",
        "major",
        "bug"
    ],
    "title": "is_eulerian doesn't handle disconnected graphs properly",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11936",
    "user": "brunellus"
}
```
Assignee: jason, ncohen, rlm

CC:  ncohen

Consider following:


```
sage: g = DiGraph({0:[1], 1:[0], 2:[]}); g.is_eulerian()
False
```


is_eulerian sees two components and refuses to label graph as an eulerian one. But the common definition (and the docstring) says that eulerian graph has all its edges coverable by one tour -- that permits disconnected graphs as long as every component but one don't contains any edges.

Issue created by migration from https://trac.sagemath.org/ticket/12108





---

archive/issue_comments_137088.json:
```json
{
    "body": "Attachment\n\nMy first patch. :-)",
    "created_at": "2011-12-03T18:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11936#issuecomment-137088",
    "user": "brunellus"
}
```

Attachment

My first patch. :-)



---

archive/issue_comments_137089.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-03T18:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11936#issuecomment-137089",
    "user": "brunellus"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_137090.json:
```json
{
    "body": "Replying to [comment:2 brunellus]:\n> My first patch. :-)\n\nAnd a good one ! `:-)`\n\nJust one remark : the connected_components_number actually calls connected components. So instead of computing the number of CC and *then* go over all vertices, what would you think of something like that :\n\n\n```\nok = True\nfor cc in self.connected_components():\n    if len(cc) > 1:\n        if ok:\n           ok = False\n        else:\n           return False\n```\n\n\nI feel like it could be faster, but that's really about milliseconds `:-)`\n\nNathann",
    "created_at": "2011-12-03T21:01:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11936#issuecomment-137090",
    "user": "ncohen"
}
```

Replying to [comment:2 brunellus]:
> My first patch. :-)

And a good one ! `:-)`

Just one remark : the connected_components_number actually calls connected components. So instead of computing the number of CC and *then* go over all vertices, what would you think of something like that :


```
ok = True
for cc in self.connected_components():
    if len(cc) > 1:
        if ok:
           ok = False
        else:
           return False
```


I feel like it could be faster, but that's really about milliseconds `:-)`

Nathann



---

archive/issue_comments_137091.json:
```json
{
    "body": "Thanks for pointing this out. I will send another patch (with a few more tests cases, also) -- is it prefered to create it on top of the first one, or is it better to be replacement?",
    "created_at": "2011-12-04T13:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11936#issuecomment-137091",
    "user": "brunellus"
}
```

Thanks for pointing this out. I will send another patch (with a few more tests cases, also) -- is it prefered to create it on top of the first one, or is it better to be replacement?



---

archive/issue_comments_137092.json:
```json
{
    "body": "Oh, it is better to replace the patch (on bigger patches you can have a lot of modifications to make, soo...). It actually is not hard if you use mercurial queue\n\nhttp://wiki.sagemath.org/MercurialQueues\n\nAnd it will not be a waste if you intend to write other patches `;-)`\n\nNathann",
    "created_at": "2011-12-04T13:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11936#issuecomment-137092",
    "user": "ncohen"
}
```

Oh, it is better to replace the patch (on bigger patches you can have a lot of modifications to make, soo...). It actually is not hard if you use mercurial queue

http://wiki.sagemath.org/MercurialQueues

And it will not be a waste if you intend to write other patches `;-)`

Nathann



---

archive/issue_comments_137093.json:
```json
{
    "body": "Attachment\n\nThanks very much for the advices.\n\nGraph.eulerian_circuit() suffers from a similar error (it tries to take first vertex at hand and if it is an isolated one, it immidiately fails) -- but I am already rewriting it for #10135, keeping this in mind.",
    "created_at": "2011-12-04T16:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11936#issuecomment-137093",
    "user": "brunellus"
}
```

Attachment

Thanks very much for the advices.

Graph.eulerian_circuit() suffers from a similar error (it tries to take first vertex at hand and if it is an isolated one, it immidiately fails) -- but I am already rewriting it for #10135, keeping this in mind.



---

archive/issue_comments_137094.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-10T20:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11936#issuecomment-137094",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_137095.json:
```json
{
    "body": "Oh ! I did not noticed you updated the patch...... It's good to go ! `:-)`\n\nNathann",
    "created_at": "2011-12-10T20:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11936#issuecomment-137095",
    "user": "ncohen"
}
```

Oh ! I did not noticed you updated the patch...... It's good to go ! `:-)`

Nathann



---

archive/issue_comments_137096.json:
```json
{
    "body": "Thanks!",
    "created_at": "2011-12-11T15:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11936#issuecomment-137096",
    "user": "brunellus"
}
```

Thanks!



---

archive/issue_comments_137097.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-12-14T22:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11936#issuecomment-137097",
    "user": "jdemeyer"
}
```

Resolution: fixed
