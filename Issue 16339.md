# Issue 16339: Improve monic_integral_model() for function fields

Issue created by migration from Trac.

Original creator: saraedum

Original creation time: 2014-06-28 00:33:08

Keywords: sd59

This make `monic_integral_model()` work for towers of function fields as well and adds more flexibility to the ``name`` parameter.


---

Comment by saraedum created at 2014-06-28 00:39:20

Changing status from new to needs_review.


---

Comment by git created at 2014-07-23 17:41:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-07-23 17:49:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mmezzarobba created at 2015-05-30 19:21:05

Changing status from needs_review to needs_work.


---

Comment by saraedum created at 2015-08-13 19:28:47

Changing status from needs_work to needs_review.


---

Comment by git created at 2015-08-13 19:28:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2016-08-22 13:17:05

Changing status from needs_review to needs_work.


---

Comment by rws created at 2016-08-22 13:17:05

If this depends on another ticket then please merge that ticket branch here. Else no one can see if the integration is done correctly, or even review what is here.


---

Comment by saraedum created at 2016-08-25 01:19:27

Changing status from needs_work to needs_review.


---

Comment by saraedum created at 2016-08-25 01:19:27

I don't understand what you mean. â€‹59fad8a is merged into this branch. It's hard to review this (on trac) because the dependencies have not been merged into develop yet. But there's nothing I can do about that I think.


---

Comment by saraedum created at 2016-08-25 01:24:31

I am working on #16563. Please review that one first.


---

Comment by klee created at 2016-12-11 13:11:44

Changing status from needs_review to needs_work.


---

Comment by klee created at 2016-12-11 13:11:44

Apply failed


---

Comment by git created at 2016-12-16 04:39:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-12-16 04:41:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2016-12-16 04:41:47

Changing status from needs_work to needs_review.


---

Comment by saraedum created at 2016-12-16 04:41:47

New commits:
----
New commits:


---

Comment by klee created at 2016-12-16 09:33:18

Nice work!

Some immediate comments:

* In `monic_integral_model`,

```
        - ``names`` -- a string, a tuple of up to two strings, or ``None``
          (default: ``None``), the name of the generator of the field, and
          the name of the generator of the underlying rational function
          field (if a tuple); if ``None``, then the names are chosen
          automatically.
```

This is correct. But following usual practice, you can omit `or ``None``` and instead of `if ``None```, you can write `if not given` in a friendly way. The same comment applies in other places.

* In `_simple_model`: Although this is a helper method, the docstring is better to start with `Return ...`-style sentence.

* In `ALGORITHM`: You write `Indeed, suppose for contradiction that for all `i` we had `N_i\neq M``. Here you do not seek for a contradiction because you directly show it. You have `Then `N_i=N_j` for some `i,j`.` not because of supposing that but because there are only finitely many intermediate fields, as you mentioned above.

* In `REFERENCES`: I am not sure about this myself. But as far as I know, the policy changed, and we should place all references in a central reference file `src/doc/en/reference/references/index.rst`

* In `_simple_model`: A small optimization is to move out `M.degree()*L.degree()` from the `while` loop, and multiply `x_pow`  by `x` instead of `x**exponet`. But these things could make not much difference. It is up to your discretion :-)


---

Comment by saraedum created at 2016-12-16 14:21:58

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-06-06 00:00:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-06-06 03:13:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2017-06-06 03:23:26

Thanks for your comments.

Replying to [comment:18 klee]:
> * In `monic_integral_model`,
> {{{
>         - ``names`` -- a string, a tuple of up to two strings, or ``None``
>           (default: ``None``), the name of the generator of the field, and
>           the name of the generator of the underlying rational function
>           field (if a tuple); if ``None``, then the names are chosen
>           automatically.
> }}}
> This is correct. But following usual practice, you can omit `or ``None``` and instead of `if ``None```, you can write `if not given` in a friendly way. The same comment applies in other places.
Fixed all the occurences I could find.

> * In `_simple_model`: Although this is a helper method, the docstring is better to start with `Return ...`-style sentence.
Fixed.

> * In `ALGORITHM`: You write `Indeed, suppose for contradiction that for all `i` we had `N_i\neq M``. Here you do not seek for a contradiction because you directly show it. You have `Then `N_i=N_j` for some `i,j`.` not because of supposing that but because there are only finitely many intermediate fields, as you mentioned above.
Fixed.

> * In `REFERENCES`: I am not sure about this myself. But as far as I know, the policy changed, and we should place all references in a central reference file `src/doc/en/reference/references/index.rst`
Fixed.

> * In `_simple_model`: A small optimization is to move out `M.degree()*L.degree()` from the `while` loop, and multiply `x_pow`  by `x` instead of `x**exponet`. But these things could make not much difference. It is up to your discretion :-)
I don't think that it will make enough of a difference, so I left it as it is.
----
New commits:


---

Comment by saraedum created at 2017-06-06 03:23:26

Changing status from needs_work to needs_review.


---

Comment by saraedum created at 2017-06-06 03:27:41

Changing keywords from "sd59" to "sd59, sd68.5".


---

Comment by saraedum created at 2017-06-06 03:30:11

Changing keywords from "sd59, sd68.5" to "sd59, sd86.5".


---

Comment by roed created at 2017-06-07 02:54:37

Looking good once patchbot okays it.


---

Comment by klee created at 2017-06-07 04:09:10

Some quick notes:

(1) `Unless ...` should be `unless` as the sentence is connected with the previous one.

(2) To clarify, how about this?

```
if names:
    if not isinstance(names, tuple):
        names = (names,)
    if len(names) > 2:
        raise ValueError("names must contain at most 2 entries")
```

Also note erorr in `ValueError`.

(3) Is it necessary to check zero-length tuple? That is just a wrong input by the user.

```
if names is None or names == ():
```

Then how about just this: `if not names:`

(4) In the `INPUT:` block in `matrix()` method, I think
`a function field (default: ``None``); ...` is clear enough.


---

Comment by saraedum created at 2017-06-07 23:45:06

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-06-08 07:00:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2017-06-08 07:01:13

Changing status from needs_work to needs_review.


---

Comment by saraedum created at 2017-06-08 07:01:13

New commits:
----
New commits:


---

Comment by roed created at 2017-06-08 18:24:35

Looks good.  I ran tests.


---

Comment by roed created at 2017-06-08 18:24:35

Changing status from needs_review to positive_review.


---

Comment by klee created at 2017-06-11 20:19:24

Changing status from positive_review to needs_work.


---

Comment by git created at 2017-06-12 00:19:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2017-06-12 00:19:54

New commits:
----
New commits:


---

Comment by saraedum created at 2017-06-12 00:20:38

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2017-06-13 06:51:23

Resolution: fixed
