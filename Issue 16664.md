# Issue 16664: cythonized function in combinatorial designs must be interruptible

archive/issues_016664.json:
```json
{
    "body": "CC:  @nathanncohen\n\nRight now, we can not interrupt `MOLS_table`... this is a consequence of the intensive cythonization.\n\n```\nsage: \nsage: from sage.combinat.designs.latin_squares import MOLS_table\nsage: MOLS_table(10000)\n       0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19\n    ________________________________________________________________________________ \n  0| +oo +oo   1   2   3   4   1   6   7   8   2  10   5  12   4   4  15  16   5  18 \n 20|   4   5   3  22   7  24   4  26   5  28   4  30  31   5   4   5   8  36   4   5 \n 40|   7  40   5  42   5   6   4  46   8  48   6   5   5  52   5   6   7   7   5  58 \n^CException KeyboardInterrupt: KeyboardInterrupt() in 'sage.combinat.designs.orthogonal_arrays_find_recursive.is_available' ignored\n360|   7 360   6   7   7   7   6 366  15  15   7  15   7 372   7  15   7  13   7 378 \n380|   7  12   7 382  15  15   7  15   7 388   7  16   7   7   7   7   8 396   7   7 \n400|  15 400   7  15  11   8   7  15   8 408   7  13   8  12  10   9  18  15   7 418 \n^CException KeyboardInterrupt: KeyboardInterrupt() in 'sage.combinat.designs.orthogonal_arrays_find_recursive.is_available' ignored\n...\n```\n\nWe need more `sig_on()`, `sig_off()`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16901\n\n",
    "created_at": "2014-08-29T09:31:24Z",
    "labels": [
        "component: combinatorial designs",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "cythonized function in combinatorial designs must be interruptible",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16664",
    "user": "https://github.com/videlec"
}
```
CC:  @nathanncohen

Right now, we can not interrupt `MOLS_table`... this is a consequence of the intensive cythonization.

```
sage: 
sage: from sage.combinat.designs.latin_squares import MOLS_table
sage: MOLS_table(10000)
       0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19
    ________________________________________________________________________________ 
  0| +oo +oo   1   2   3   4   1   6   7   8   2  10   5  12   4   4  15  16   5  18 
 20|   4   5   3  22   7  24   4  26   5  28   4  30  31   5   4   5   8  36   4   5 
 40|   7  40   5  42   5   6   4  46   8  48   6   5   5  52   5   6   7   7   5  58 
^CException KeyboardInterrupt: KeyboardInterrupt() in 'sage.combinat.designs.orthogonal_arrays_find_recursive.is_available' ignored
360|   7 360   6   7   7   7   6 366  15  15   7  15   7 372   7  15   7  13   7 378 
380|   7  12   7 382  15  15   7  15   7 388   7  16   7   7   7   7   8 396   7   7 
400|  15 400   7  15  11   8   7  15   8 408   7  13   8  12  10   9  18  15   7 418 
^CException KeyboardInterrupt: KeyboardInterrupt() in 'sage.combinat.designs.orthogonal_arrays_find_recursive.is_available' ignored
...
```

We need more `sig_on()`, `sig_off()`.

Issue created by migration from https://trac.sagemath.org/ticket/16901





---

archive/issue_comments_219721.json:
```json
{
    "body": "It is better with the branch applied as it becomes interruptible. Nevertheless it is not ideal since it may happen that after an interruption you are not able to call `MOLS_table` anymore... got strange error like\n\n```\nTypeError                                 Traceback (most recent call last)\n<ipython-input-4-3880577162c6> in <module>()\n----> 1 MOLS_table(Integer(10000))\n\n/opt/sage_flatsurf/local/lib/python2.7/site-packages/sage/combinat/designs/latin_squares.pyc in MOLS_table(number_of_lines, compare)\n    513         if i%20==0:\n    514             print \"\\n%3d|\"%i,\n--> 515         k = mutually_orthogonal_latin_squares(None,i,existence=True)\n    516         if compare:\n    517             if i < 2 or hb[i] == k:\n\n/opt/sage_flatsurf/local/lib/python2.7/site-packages/sage/combinat/designs/latin_squares.pyc in mutually_orthogonal_latin_squares(k, n, partitions, check, existence)\n    359             raise ValueError(\"there are no bound on k when 0<=n<=1\")\n    360 \n--> 361         k = orthogonal_array(None,n,existence=True) - 2\n    362         if existence:\n    363             return k\n\n/opt/sage_flatsurf/local/lib/python2.7/site-packages/sage/combinat/designs/orthogonal_arrays.pyc in orthogonal_array(k, n, t, resolvable, check, existence)\n    811         else:\n    812             for k in range(t-1,n+2):\n--> 813                 if not orthogonal_array(k+1,n,t=t,existence=True):\n    814                     break\n    815         if existence:\n\n/opt/sage_flatsurf/local/lib/python2.7/site-packages/sage/combinat/designs/orthogonal_arrays.pyc in orthogonal_array(k, n, t, resolvable, check, existence)\n    909         OA = OA_from_quasi_difference_matrix(M,G,add_col=True)\n    910 \n--> 911     elif may_be_available and find_recursive_construction(k,n):\n    912         _OA_cache_set(k,n,True)\n    913         if existence:\n\n/opt/sage_flatsurf/local/lib/python2.7/site-packages/sage/misc/cachefunc.so in sage.misc.cachefunc.CachedFunction.__call__ (build/cythonized/sage/misc/cachefunc.c:4678)()\n\n/opt/sage_flatsurf/local/lib/python2.7/site-packages/sage/combinat/designs/orthogonal_arrays_find_recursive.so in sage.combinat.designs.orthogonal_arrays_find_recursive.find_recursive_construction (build/cythonized/sage/combinat/designs/orthogonal_arrays_find_recursive.c:2565)()\n\nTypeError: function takes exactly 3 arguments (2 given)\n```\n\nVincent\n\n---\nLast 10 new commits:",
    "created_at": "2014-08-29T09:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219721",
    "user": "https://github.com/videlec"
}
```

It is better with the branch applied as it becomes interruptible. Nevertheless it is not ideal since it may happen that after an interruption you are not able to call `MOLS_table` anymore... got strange error like

```
TypeError                                 Traceback (most recent call last)
<ipython-input-4-3880577162c6> in <module>()
----> 1 MOLS_table(Integer(10000))

/opt/sage_flatsurf/local/lib/python2.7/site-packages/sage/combinat/designs/latin_squares.pyc in MOLS_table(number_of_lines, compare)
    513         if i%20==0:
    514             print "\n%3d|"%i,
--> 515         k = mutually_orthogonal_latin_squares(None,i,existence=True)
    516         if compare:
    517             if i < 2 or hb[i] == k:

/opt/sage_flatsurf/local/lib/python2.7/site-packages/sage/combinat/designs/latin_squares.pyc in mutually_orthogonal_latin_squares(k, n, partitions, check, existence)
    359             raise ValueError("there are no bound on k when 0<=n<=1")
    360 
--> 361         k = orthogonal_array(None,n,existence=True) - 2
    362         if existence:
    363             return k

/opt/sage_flatsurf/local/lib/python2.7/site-packages/sage/combinat/designs/orthogonal_arrays.pyc in orthogonal_array(k, n, t, resolvable, check, existence)
    811         else:
    812             for k in range(t-1,n+2):
--> 813                 if not orthogonal_array(k+1,n,t=t,existence=True):
    814                     break
    815         if existence:

/opt/sage_flatsurf/local/lib/python2.7/site-packages/sage/combinat/designs/orthogonal_arrays.pyc in orthogonal_array(k, n, t, resolvable, check, existence)
    909         OA = OA_from_quasi_difference_matrix(M,G,add_col=True)
    910 
--> 911     elif may_be_available and find_recursive_construction(k,n):
    912         _OA_cache_set(k,n,True)
    913         if existence:

/opt/sage_flatsurf/local/lib/python2.7/site-packages/sage/misc/cachefunc.so in sage.misc.cachefunc.CachedFunction.__call__ (build/cythonized/sage/misc/cachefunc.c:4678)()

/opt/sage_flatsurf/local/lib/python2.7/site-packages/sage/combinat/designs/orthogonal_arrays_find_recursive.so in sage.combinat.designs.orthogonal_arrays_find_recursive.find_recursive_construction (build/cythonized/sage/combinat/designs/orthogonal_arrays_find_recursive.c:2565)()

TypeError: function takes exactly 3 arguments (2 given)
```

Vincent

---
Last 10 new commits:



---

archive/issue_comments_219722.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-29T11:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219722",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_219723.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-29T11:42:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219723",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_219724.json:
```json
{
    "body": "Yo !\n\nSeems to do the job, thanks !\n\n```\n-        return orthogonal_array(k,n,existence=True)\n+        ans = orthogonal_array(k,n,existence=True)\n+        return ans\n```\n\nIs `return orthogonal_array(k,n,existence=True)` declared politically incorrect now ? `:-P`\n\nNathann\n\nP.S. : the commit's ticket contains the wrong number but we probably won't base anything on this branch so it is not a problem.",
    "created_at": "2014-08-29T11:42:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219724",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

Seems to do the job, thanks !

```
-        return orthogonal_array(k,n,existence=True)
+        ans = orthogonal_array(k,n,existence=True)
+        return ans
```

Is `return orthogonal_array(k,n,existence=True)` declared politically incorrect now ? `:-P`

Nathann

P.S. : the commit's ticket contains the wrong number but we probably won't base anything on this branch so it is not a problem.



---

archive/issue_comments_219725.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-08-29T11:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219725",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_219726.json:
```json
{
    "body": "The messages in the ticket description\n\n```\n^CException KeyboardInterrupt: KeyboardInterrupt() in 'sage.combinat.designs.orthogonal_arrays_find_recursive.is_available' ignored\n```\nshow that the issue is not just `sig_on()`/`sig_off()` but also missing `except` clauses in `cdef` functions, see also #16233 for how to fix this.\n\nAlso, your codes mixes Cython and Python, so I would go with [sig_check()](http://www.sagemath.org/doc/developer/coding_in_cython.html#using-sig-check) in the inner loops which is much safer than `sig_on()` and `sig_off()`.",
    "created_at": "2014-08-29T11:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219726",
    "user": "https://github.com/jdemeyer"
}
```

The messages in the ticket description

```
^CException KeyboardInterrupt: KeyboardInterrupt() in 'sage.combinat.designs.orthogonal_arrays_find_recursive.is_available' ignored
```
show that the issue is not just `sig_on()`/`sig_off()` but also missing `except` clauses in `cdef` functions, see also #16233 for how to fix this.

Also, your codes mixes Cython and Python, so I would go with [sig_check()](http://www.sagemath.org/doc/developer/coding_in_cython.html#using-sig-check) in the inner loops which is much safer than `sig_on()` and `sig_off()`.



---

archive/issue_comments_219727.json:
```json
{
    "body": "Perhaps the warning at [http://www.sagemath.org/doc/developer/coding_in_cython.html#using-sig-on-and-sig-off](http://www.sagemath.org/doc/developer/coding_in_cython.html#using-sig-on-and-sig-off) is not clear enough, but really **the code inside sig_on() should be pure C or Cython code**.",
    "created_at": "2014-08-29T11:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219727",
    "user": "https://github.com/jdemeyer"
}
```

Perhaps the warning at [http://www.sagemath.org/doc/developer/coding_in_cython.html#using-sig-on-and-sig-off](http://www.sagemath.org/doc/developer/coding_in_cython.html#using-sig-on-and-sig-off) is not clear enough, but really **the code inside sig_on() should be pure C or Cython code**.



---

archive/issue_comments_219728.json:
```json
{
    "body": "This ticket inspired me to create #16902.",
    "created_at": "2014-08-29T11:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219728",
    "user": "https://github.com/jdemeyer"
}
```

This ticket inspired me to create #16902.



---

archive/issue_comments_219729.json:
```json
{
    "body": "Replying to [comment:7 jdemeyer]:\n> This ticket inspired me to create #16902.\n\n\nThanks, I am carefully reading it!\n\nBy the way, I got something very strange here. `find_recursive_construction` is a cached function (with the decorator in `sage.misc.cachefunc`). It appears that after some of the interruption, the `CachedFunction` class suddenly decided that the function now takes 3 arguments instead of 2... and trying to call it with 3 values instead of 2 I just got an unhandled  SIGSEGV.\n\nMight be something subtle going on with exception and cache but I do not know why. I can describe the case in more details.\n\nVincent",
    "created_at": "2014-08-29T16:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219729",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:7 jdemeyer]:
> This ticket inspired me to create #16902.


Thanks, I am carefully reading it!

By the way, I got something very strange here. `find_recursive_construction` is a cached function (with the decorator in `sage.misc.cachefunc`). It appears that after some of the interruption, the `CachedFunction` class suddenly decided that the function now takes 3 arguments instead of 2... and trying to call it with 3 values instead of 2 I just got an unhandled  SIGSEGV.

Might be something subtle going on with exception and cache but I do not know why. I can describe the case in more details.

Vincent



---

archive/issue_comments_219730.json:
```json
{
    "body": "Replying to [comment:8 vdelecroix]:\n> By the way, I got something very strange here. `find_recursive_construction` is a cached function (with the decorator in `sage.misc.cachefunc`). It appears that after some of the interruption, the `CachedFunction` class suddenly decided that the function now takes 3 arguments instead of 2... and trying to call it with 3 values instead of 2 I just got an unhandled  SIGSEGV.\n> \n> Might be something subtle going on with exception and cache but I do not know why. I can describe the case in more details.\n\nPersonally, I would not bother too much with this. Interrupting Python (as opposed to Cython) code can give all kinds of undefined behaviour...",
    "created_at": "2014-08-29T16:57:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219730",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:8 vdelecroix]:
> By the way, I got something very strange here. `find_recursive_construction` is a cached function (with the decorator in `sage.misc.cachefunc`). It appears that after some of the interruption, the `CachedFunction` class suddenly decided that the function now takes 3 arguments instead of 2... and trying to call it with 3 values instead of 2 I just got an unhandled  SIGSEGV.
> 
> Might be something subtle going on with exception and cache but I do not know why. I can describe the case in more details.

Personally, I would not bother too much with this. Interrupting Python (as opposed to Cython) code can give all kinds of undefined behaviour...



---

archive/issue_comments_219731.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-08-29T17:03:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219731",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_219732.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-08-29T17:06:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219732",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_219733.json:
```json
{
    "body": "All right, very simple one line change which makes us loose only 0.02 secs for the generation of the 1800 first MOLS.\n\nVincent",
    "created_at": "2014-08-29T17:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219733",
    "user": "https://github.com/videlec"
}
```

All right, very simple one line change which makes us loose only 0.02 secs for the generation of the 1800 first MOLS.

Vincent



---

archive/issue_comments_219734.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-29T17:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219734",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_219735.json:
```json
{
    "body": "Okayyyyyyyy.. This being said, why did you change the bint to int ?\n\nNathann",
    "created_at": "2014-08-29T17:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219735",
    "user": "https://github.com/nathanncohen"
}
```

Okayyyyyyyy.. This being said, why did you change the bint to int ?

Nathann



---

archive/issue_comments_219736.json:
```json
{
    "body": "Replying to [comment:13 ncohen]:\n> Okayyyyyyyy.. This being said, why did you change the bint to int ?\n\n\nThe exception is propagated with the return value `-1`, I think it is cleaner to make it an int.\n\nAnyway, the choice `int/bint` is just a compiler instruction for Cython. There is no gain of having it a `bint` type here since it is always used in C code. The purpose of the bint type is to mix well Python booleans with C ints. One difference (that I learn few seconds ago) is in\n\n```\ndef f(b):\n   int x = b\n   bint y = b\n```\nThe first conversion will involves `b.__int__` while the second `b.__nonzero__`.\n\nVincent",
    "created_at": "2014-08-29T17:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219736",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:13 ncohen]:
> Okayyyyyyyy.. This being said, why did you change the bint to int ?


The exception is propagated with the return value `-1`, I think it is cleaner to make it an int.

Anyway, the choice `int/bint` is just a compiler instruction for Cython. There is no gain of having it a `bint` type here since it is always used in C code. The purpose of the bint type is to mix well Python booleans with C ints. One difference (that I learn few seconds ago) is in

```
def f(b):
   int x = b
   bint y = b
```
The first conversion will involves `b.__int__` while the second `b.__nonzero__`.

Vincent



---

archive/issue_comments_219737.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-29T17:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219737",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_219738.json:
```json
{
    "body": "Yo !\n\n> The exception is propagated with the return value `-1`, I think it is cleaner to make it an int.\n\n\nOh right, right.\n\n> Anyway, the choice `int/bint` is just a compiler instruction for Cython. There is no gain of having it a `bint` type here since it is always used in C code.\n\n\nOf course, but there if there is no reason to change that into an 'int' it was better to keep it. And that's a good reason to change it. Good to go !\n\n> The purpose of the bint type is to mix well Python booleans with C ints. One difference (that I learn few seconds ago) is in\n> \n> ```\n> def f(b):\n>    int x = b\n>    bint y = b\n> ```\n> The first conversion will involves `b.__int__` while the second `b.__nonzero__`.\n\n\nI hate Python.\n\nNathann",
    "created_at": "2014-08-29T17:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219738",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> The exception is propagated with the return value `-1`, I think it is cleaner to make it an int.


Oh right, right.

> Anyway, the choice `int/bint` is just a compiler instruction for Cython. There is no gain of having it a `bint` type here since it is always used in C code.


Of course, but there if there is no reason to change that into an 'int' it was better to keep it. And that's a good reason to change it. Good to go !

> The purpose of the bint type is to mix well Python booleans with C ints. One difference (that I learn few seconds ago) is in
> 
> ```
> def f(b):
>    int x = b
>    bint y = b
> ```
> The first conversion will involves `b.__int__` while the second `b.__nonzero__`.


I hate Python.

Nathann



---

archive/issue_comments_219739.json:
```json
{
    "body": "Replying to [comment:15 ncohen]:\n> > The purpose of the bint type is to mix well Python booleans with C ints. One difference (that I learn few seconds ago) is in\n> > \n> > ```\n> > def f(b):\n> >    int x = b\n> >    bint y = b\n> > ```\n> > The first conversion will involves `b.__int__` while the second `b.__nonzero__`.\n\n> \n> I hate Python.\n\n\nLet me see. You want strongly typed, checked at compilation code... hum, use Haskell!\n\nVincent",
    "created_at": "2014-08-29T17:38:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219739",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:15 ncohen]:
> > The purpose of the bint type is to mix well Python booleans with C ints. One difference (that I learn few seconds ago) is in
> > 
> > ```
> > def f(b):
> >    int x = b
> >    bint y = b
> > ```
> > The first conversion will involves `b.__int__` while the second `b.__nonzero__`.

> 
> I hate Python.


Let me see. You want strongly typed, checked at compilation code... hum, use Haskell!

Vincent



---

archive/issue_comments_219740.json:
```json
{
    "body": "Why is everybody trying to use logic to prove that I must like this or that thing ?\n\nI hate Python AND I hate Haskell. Though I never used Haskell, of course.\n\nNathann",
    "created_at": "2014-08-29T20:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219740",
    "user": "https://github.com/nathanncohen"
}
```

Why is everybody trying to use logic to prove that I must like this or that thing ?

I hate Python AND I hate Haskell. Though I never used Haskell, of course.

Nathann



---

archive/issue_comments_219741.json:
```json
{
    "body": "Doesn't work. Also, use bint for what would be a boolean in Python and int for integers. E.g. simplifies debugging if you can just switch the method to cpdef and you get a Python boolean instead of some integer.\n\n```\nsage -t --long --warn-long 43.5 src/sage/combinat/designs/orthogonal_arrays_find_recursive.pyx  # 13 doctests failed\nsage -t --long --warn-long 43.5 src/sage/combinat/designs/orthogonal_arrays_build_recursive.py  # 3 doctests failed\nsage -t --long --warn-long 43.5 src/sage/combinat/designs/orthogonal_arrays.py  # 11 doctests failed\n```",
    "created_at": "2014-09-05T17:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219741",
    "user": "https://github.com/vbraun"
}
```

Doesn't work. Also, use bint for what would be a boolean in Python and int for integers. E.g. simplifies debugging if you can just switch the method to cpdef and you get a Python boolean instead of some integer.

```
sage -t --long --warn-long 43.5 src/sage/combinat/designs/orthogonal_arrays_find_recursive.pyx  # 13 doctests failed
sage -t --long --warn-long 43.5 src/sage/combinat/designs/orthogonal_arrays_build_recursive.py  # 3 doctests failed
sage -t --long --warn-long 43.5 src/sage/combinat/designs/orthogonal_arrays.py  # 11 doctests failed
```



---

archive/issue_comments_219742.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-09-05T17:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219742",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_219743.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-05T19:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219743",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219744.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-09-05T19:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219744",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_219745.json:
```json
{
    "body": "Hum.. I wonder what happened!\n\nVincent",
    "created_at": "2014-09-05T19:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219745",
    "user": "https://github.com/videlec"
}
```

Hum.. I wonder what happened!

Vincent



---

archive/issue_comments_219746.json:
```json
{
    "body": "I don't get what you did in your latest commit: you change the first \"return\" to give a boolean, yet in the second one you change a 'True' into a '1' `O_o`\n\nNathann",
    "created_at": "2014-09-06T07:31:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219746",
    "user": "https://github.com/nathanncohen"
}
```

I don't get what you did in your latest commit: you change the first "return" to give a boolean, yet in the second one you change a 'True' into a '1' `O_o`

Nathann



---

archive/issue_comments_219747.json:
```json
{
    "body": "The function is returned an `int`. So anyway Cython will convert `True` to 1. If you prefer `1 -> True` and `0 -> False` fell free to do it.\n\nVincent",
    "created_at": "2014-09-06T07:44:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219747",
    "user": "https://github.com/videlec"
}
```

The function is returned an `int`. So anyway Cython will convert `True` to 1. If you prefer `1 -> True` and `0 -> False` fell free to do it.

Vincent



---

archive/issue_comments_219748.json:
```json
{
    "body": "Why did you change it in the first place ? `O_o`",
    "created_at": "2014-09-06T07:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219748",
    "user": "https://github.com/nathanncohen"
}
```

Why did you change it in the first place ? `O_o`



---

archive/issue_comments_219749.json:
```json
{
    "body": "Replying to [comment:24 ncohen]:\n> Why did you change it in the first place ? `O_o`\n\n\nTo make cython happier ;=)",
    "created_at": "2014-09-06T07:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219749",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:24 ncohen]:
> Why did you change it in the first place ? `O_o`


To make cython happier ;=)



---

archive/issue_comments_219750.json:
```json
{
    "body": "With different types of output ? `O_o`\n\nNathann",
    "created_at": "2014-09-06T07:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219750",
    "user": "https://github.com/nathanncohen"
}
```

With different types of output ? `O_o`

Nathann



---

archive/issue_comments_219751.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-09-06T08:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219751",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_219752.json:
```json
{
    "body": "done.\n\nVincent",
    "created_at": "2014-09-06T08:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219752",
    "user": "https://github.com/videlec"
}
```

done.

Vincent



---

archive/issue_comments_219753.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-09-06T15:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219753",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_049372.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-08T08:48:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16664#event-49372"
}
```



---

archive/issue_comments_219754.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-09-08T08:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16664",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16664#issuecomment-219754",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
