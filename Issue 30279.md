# Issue 30279: Replace Assertion Error

Issue created by migration from https://trac.sagemath.org/ticket/30516

Original creator: @mjungmath

Original creation time: 2020-09-06 14:46:49

CC:  tscrim mkoeppe




---

Comment by chapoton created at 2020-09-09 12:28:15

so what ?


---

Comment by @mjungmath created at 2020-09-09 12:36:57

I created this ticket accidentally. Sorry. The task has been finished in #30275.

I will replace the name and description of this ticket soon. There are still open tasks.


---

Comment by @mjungmath created at 2020-09-09 14:02:57

Changing component from PLEASE CHANGE to combinatorics.


---

Comment by @mjungmath created at 2020-09-09 14:02:57

Changing type from PLEASE CHANGE to defect.


---

Comment by @mjungmath created at 2020-09-09 14:10:06

Any ideas where this bug is originated? I would say it comes from:


```
sage: W0 = WeightedIntegerVectors(0, [1,2,3])
sage: W0([1,1,1])
```


This is a bug, too. As far as I understand the code of `DisjointUnionEnumeratedSets`, it checks all subsets until the element is coercible into this subset.

Probably a more direct approach is more useful and faster here, i.e. compute the grading (already there) and coerce into the corresponding weighted integer vector.

Opinions?


---

Comment by @mjungmath created at 2020-09-09 18:50:05

Changing status from new to needs_review.


---

Comment by @mjungmath created at 2020-09-09 18:50:05

I think, this should solve the problem at hand.

As mentioned, one can still improve the performance a bit. But let's spare it for another ticket.
----
New commits:


---

Comment by git created at 2020-09-09 19:01:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @mjungmath created at 2020-09-09 19:07:05

Turns out the doctest example was already wrong...


---

Comment by tscrim created at 2020-09-09 22:57:30

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2020-09-09 22:57:30

LGTM. The containment check should be quick IMO too.


---

Comment by vbraun created at 2020-09-23 21:27:20

Resolution: fixed
