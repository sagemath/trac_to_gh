# Issue 30279: Replace Assertion Error

archive/issues_030279.json:
```json
{
    "body": "CC:  tscrim mkoeppe\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30516\n\n",
    "created_at": "2020-09-06T14:46:49Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Replace Assertion Error",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30279",
    "user": "@mjungmath"
}
```
CC:  tscrim mkoeppe



Issue created by migration from https://trac.sagemath.org/ticket/30516





---

archive/issue_comments_431660.json:
```json
{
    "body": "so what ?",
    "created_at": "2020-09-09T12:28:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30279#issuecomment-431660",
    "user": "chapoton"
}
```

so what ?



---

archive/issue_comments_431661.json:
```json
{
    "body": "I created this ticket accidentally. Sorry. The task has been finished in #30275.\n\nI will replace the name and description of this ticket soon. There are still open tasks.",
    "created_at": "2020-09-09T12:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30279#issuecomment-431661",
    "user": "@mjungmath"
}
```

I created this ticket accidentally. Sorry. The task has been finished in #30275.

I will replace the name and description of this ticket soon. There are still open tasks.



---

archive/issue_comments_431662.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2020-09-09T14:02:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30279#issuecomment-431662",
    "user": "@mjungmath"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_431663.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2020-09-09T14:02:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30279#issuecomment-431663",
    "user": "@mjungmath"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_431664.json:
```json
{
    "body": "Any ideas where this bug is originated? I would say it comes from:\n\n\n```\nsage: W0 = WeightedIntegerVectors(0, [1,2,3])\nsage: W0([1,1,1])\n```\n\n\nThis is a bug, too. As far as I understand the code of `DisjointUnionEnumeratedSets`, it checks all subsets until the element is coercible into this subset.\n\nProbably a more direct approach is more useful and faster here, i.e. compute the grading (already there) and coerce into the corresponding weighted integer vector.\n\nOpinions?",
    "created_at": "2020-09-09T14:10:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30279#issuecomment-431664",
    "user": "@mjungmath"
}
```

Any ideas where this bug is originated? I would say it comes from:


```
sage: W0 = WeightedIntegerVectors(0, [1,2,3])
sage: W0([1,1,1])
```


This is a bug, too. As far as I understand the code of `DisjointUnionEnumeratedSets`, it checks all subsets until the element is coercible into this subset.

Probably a more direct approach is more useful and faster here, i.e. compute the grading (already there) and coerce into the corresponding weighted integer vector.

Opinions?



---

archive/issue_comments_431665.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-09T18:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30279#issuecomment-431665",
    "user": "@mjungmath"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_431666.json:
```json
{
    "body": "I think, this should solve the problem at hand.\n\nAs mentioned, one can still improve the performance a bit. But let's spare it for another ticket.\n----\nNew commits:",
    "created_at": "2020-09-09T18:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30279#issuecomment-431666",
    "user": "@mjungmath"
}
```

I think, this should solve the problem at hand.

As mentioned, one can still improve the performance a bit. But let's spare it for another ticket.
----
New commits:



---

archive/issue_comments_431667.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-09T19:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30279#issuecomment-431667",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_431668.json:
```json
{
    "body": "Turns out the doctest example was already wrong...",
    "created_at": "2020-09-09T19:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30279#issuecomment-431668",
    "user": "@mjungmath"
}
```

Turns out the doctest example was already wrong...



---

archive/issue_comments_431669.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-09T22:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30279#issuecomment-431669",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_431670.json:
```json
{
    "body": "LGTM. The containment check should be quick IMO too.",
    "created_at": "2020-09-09T22:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30279#issuecomment-431670",
    "user": "tscrim"
}
```

LGTM. The containment check should be quick IMO too.



---

archive/issue_comments_431671.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-23T21:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30279#issuecomment-431671",
    "user": "vbraun"
}
```

Resolution: fixed
