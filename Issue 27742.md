# Issue 27742: Add missing implementation in Macaulay2 interface

Issue created by migration from https://trac.sagemath.org/ticket/27979

Original creator: @mwageringel

Original creation time: 2019-06-12 21:34:14

Keywords: macaulay2

This ticket implements the following changes to the Macaulay2 interface:

- Naming of Macaulay2/interface elements is improved.

  The constructor for interface elements now correctly handles the `name` parameter (which previously got ignored in some cases). For example, this works now:
  {{{
  sage: A = macaulay2(ZZ['x,y,z'], name='A')
  sage: A.name()
  'A'
  }}}

  Moreover, Macaulay2Elements can now be renamed, as `name()` was implemented. In particular, this works for polynomial rings, so the `sage0`, etc., identifiers can be avoided in the Macaulay2 output. For example:
  {{{
  sage: S = macaulay2(QQ['x,y'])
  sage: S.name()
  'sage0'
  sage: R = S.name("R")
  sage: R.name()
  'R'
  sage: R.vars().cokernel().resolution()
   1      2      1
  R  <-- R  <-- R  <-- 0

  0      1      2      3
  }}}

- The `_contains` operator (i.e. `in`) is implemented:
  {{{
  sage: '"x"' in macaulay2('hashTable {"x" => 1}')
  True
  }}}

- Seeds are implemented.

Moreover, this ticket provides small fixes:

- The syntax `..` for defining a polynomial ring can now be used more than just once:
  {{{
  sage: macaulay2.ring('QQ', '[a_0..a_2,b..<d,f]').vars()
  | a_0 a_1 a_2 b c f |
  }}}

- Tab completion is slightly improved to avoid the use of global variables.


---

Comment by @mwageringel created at 2019-06-12 21:42:44

The first two commits fixing some doctests are from #27848. To run the tests on all files that have optional Macaulay2 doctests, you can use:

```
sage -t --long --optional=sage,macaulay2 $(grep -i "optional.*macaulay2" -r src/sage -l | paste -sd " " -)
```

Tested using Macaulay2 1.13.
----
New commits:


---

Comment by @mwageringel created at 2019-06-12 21:42:44

Changing status from new to needs_review.


---

Comment by @mwageringel created at 2019-06-12 21:42:44

Changing type from PLEASE CHANGE to enhancement.


---

Comment by git created at 2019-06-13 05:58:02

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @mwageringel created at 2019-06-13 06:06:02

The oldstyle print reported by the patchbot is not Python code, but Macaulay2 code, so not relevant.


---

Comment by chapoton created at 2019-06-21 12:26:41

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-06-21 12:26:41

Looks good to me.

I have rebased the branch on top of the branch of #27848. And then squashed the commits into a single one.

I am setting this to positive.
----
New commits:


---

Comment by @mwageringel created at 2019-06-21 19:42:34

Thank you.


---

Comment by vbraun created at 2019-06-28 04:30:17

Resolution: fixed


---

Comment by embray created at 2019-07-03 11:34:48

Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were _actually_ included, especially when closing tickets.
