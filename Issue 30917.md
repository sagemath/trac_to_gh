# Issue 30917: Report distances in Breadth First Search in c_graph.pyx

archive/issues_030917.json:
```json
{
    "body": "CC:  dcoudert\n\nKeywords: graphs, BFS, distances\n\nCurrently, reporting of distances is reported in the python implementation only. We enable this in the cython implementation in `c_graph.pyx`.\n\nTo compare:\n\n\n```\nsage: def comp(): \n....:     for n in [5, 10, 50, 100, 500, 1000]:  \n....:         G = graphs.Grid2dGraph(n, n)  \n....:         print(G) \n....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), report_distance=False)) \n....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), report_distance=True)) \n```\n\n\nBefore:\n\n\n```                                                                                                                                                                          \nsage: comp()                                                                                                                                                                                                                                                                                                                                                               \n2D Grid Graph for [5, 5]\n5.69 \u00b5s \u00b1 67 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n36.3 \u00b5s \u00b1 67 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n2D Grid Graph for [10, 10]\n16.2 \u00b5s \u00b1 22.8 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n143 \u00b5s \u00b1 945 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n2D Grid Graph for [50, 50]\n492 \u00b5s \u00b1 5.91 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n4.32 ms \u00b1 48.1 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n2D Grid Graph for [100, 100]\n2.68 ms \u00b1 24.7 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n18.6 ms \u00b1 81.1 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n2D Grid Graph for [500, 500]\n89.4 ms \u00b1 665 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n655 ms \u00b1 4.93 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n2D Grid Graph for [1000, 1000]\n452 ms \u00b1 5.52 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n3.26 s \u00b1 57.1 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n```\n\n\nAfter:\n\n```\nsage: comp()                                                                                                                                                                                                                                                                                                                                                               \n2D Grid Graph for [5, 5]\n5.48 \u00b5s \u00b1 7.2 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n5.49 \u00b5s \u00b1 18.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n2D Grid Graph for [10, 10]\n15.2 \u00b5s \u00b1 35.3 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n15.3 \u00b5s \u00b1 95.4 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n2D Grid Graph for [50, 50]\n449 \u00b5s \u00b1 1.61 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n450 \u00b5s \u00b1 2.84 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n2D Grid Graph for [100, 100]\n2.51 ms \u00b1 16.7 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n2.53 ms \u00b1 39.1 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n2D Grid Graph for [500, 500]\n85.4 ms \u00b1 301 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n85 ms \u00b1 109 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n2D Grid Graph for [1000, 1000]\n431 ms \u00b1 6.59 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n433 ms \u00b1 10 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n```\n\n\nThe small improvement in the first case is due to using `yield from`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31154\n\n",
    "created_at": "2021-01-02T16:54:38Z",
    "labels": [
        "graph theory",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Report distances in Breadth First Search in c_graph.pyx",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30917",
    "user": "@kliem"
}
```
CC:  dcoudert

Keywords: graphs, BFS, distances

Currently, reporting of distances is reported in the python implementation only. We enable this in the cython implementation in `c_graph.pyx`.

To compare:


```
sage: def comp(): 
....:     for n in [5, 10, 50, 100, 500, 1000]:  
....:         G = graphs.Grid2dGraph(n, n)  
....:         print(G) 
....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), report_distance=False)) 
....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), report_distance=True)) 
```


Before:


```                                                                                                                                                                          
sage: comp()                                                                                                                                                                                                                                                                                                                                                               
2D Grid Graph for [5, 5]
5.69 µs ± 67 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
36.3 µs ± 67 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
2D Grid Graph for [10, 10]
16.2 µs ± 22.8 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
143 µs ± 945 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
2D Grid Graph for [50, 50]
492 µs ± 5.91 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
4.32 ms ± 48.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2D Grid Graph for [100, 100]
2.68 ms ± 24.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
18.6 ms ± 81.1 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
2D Grid Graph for [500, 500]
89.4 ms ± 665 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
655 ms ± 4.93 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
2D Grid Graph for [1000, 1000]
452 ms ± 5.52 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
3.26 s ± 57.1 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
```


After:

```
sage: comp()                                                                                                                                                                                                                                                                                                                                                               
2D Grid Graph for [5, 5]
5.48 µs ± 7.2 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
5.49 µs ± 18.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
2D Grid Graph for [10, 10]
15.2 µs ± 35.3 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
15.3 µs ± 95.4 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
2D Grid Graph for [50, 50]
449 µs ± 1.61 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
450 µs ± 2.84 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
2D Grid Graph for [100, 100]
2.51 ms ± 16.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2.53 ms ± 39.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2D Grid Graph for [500, 500]
85.4 ms ± 301 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
85 ms ± 109 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
2D Grid Graph for [1000, 1000]
431 ms ± 6.59 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
433 ms ± 10 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
```


The small improvement in the first case is due to using `yield from`.

Issue created by migration from https://trac.sagemath.org/ticket/31154





---

archive/issue_comments_441743.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-02T16:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441743",
    "user": "@kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_441744.json:
```json
{
    "body": "It's nice that the extra cost of pushing pairs even when `report_distance` is `False` is compensated by the `yield from...`.\n\nWe could also report edges. It suffices to store in second the parent in the BFS instead of the distance. The extra cost of testing if `edges` is true before pushing to the queue is rather limited.",
    "created_at": "2021-01-02T17:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441744",
    "user": "dcoudert"
}
```

It's nice that the extra cost of pushing pairs even when `report_distance` is `False` is compensated by the `yield from...`.

We could also report edges. It suffices to store in second the parent in the BFS instead of the distance. The extra cost of testing if `edges` is true before pushing to the queue is rather limited.



---

archive/issue_comments_441745.json:
```json
{
    "body": "Why are you using `smallInteger` for distances ? does it really make a difference ?",
    "created_at": "2021-01-02T17:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441745",
    "user": "dcoudert"
}
```

Why are you using `smallInteger` for distances ? does it really make a difference ?



---

archive/issue_comments_441746.json:
```json
{
    "body": "Actually, I can't measure a difference for pushing pairs or not. It doesn't seem to make a difference at all. After all it's super easy C stuff (if you try to push a tuple as a pair and hope for cython to do the right thing, that is going to make a difference in the wrong way).\n\n`yield from` is a bit fast that's it.",
    "created_at": "2021-01-02T18:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441746",
    "user": "@kliem"
}
```

Actually, I can't measure a difference for pushing pairs or not. It doesn't seem to make a difference at all. After all it's super easy C stuff (if you try to push a tuple as a pair and hope for cython to do the right thing, that is going to make a difference in the wrong way).

`yield from` is a bit fast that's it.



---

archive/issue_comments_441747.json:
```json
{
    "body": "Replying to [comment:3 dcoudert]:\n> Why are you using `smallInteger` for distances ? does it really make a difference ?\n\n`Integer` is lots slower. `smallInteger` is exactly for this use case. Creating an integer from an `int/long`.\n\nTimings with replacing `smallInteger` by `Integer`:\n\n```\nsage: comp()                                                                                                                                                                                                                                                                                                                                                               \n2D Grid Graph for [5, 5]\n5.67 \u00b5s \u00b1 254 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n8.34 \u00b5s \u00b1 114 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n2D Grid Graph for [10, 10]\n15.9 \u00b5s \u00b1 73.5 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n26.1 \u00b5s \u00b1 98.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n2D Grid Graph for [50, 50]\n470 \u00b5s \u00b1 6.86 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n1.09 ms \u00b1 8.04 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n2D Grid Graph for [100, 100]\n2.59 ms \u00b1 20.5 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n5.8 ms \u00b1 8.76 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n2D Grid Graph for [500, 500]\n91.1 ms \u00b1 1.26 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n182 ms \u00b1 638 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n2D Grid Graph for [1000, 1000]\n445 ms \u00b1 9.32 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n734 ms \u00b1 9.12 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n```\n",
    "created_at": "2021-01-02T18:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441747",
    "user": "@kliem"
}
```

Replying to [comment:3 dcoudert]:
> Why are you using `smallInteger` for distances ? does it really make a difference ?

`Integer` is lots slower. `smallInteger` is exactly for this use case. Creating an integer from an `int/long`.

Timings with replacing `smallInteger` by `Integer`:

```
sage: comp()                                                                                                                                                                                                                                                                                                                                                               
2D Grid Graph for [5, 5]
5.67 µs ± 254 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
8.34 µs ± 114 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
2D Grid Graph for [10, 10]
15.9 µs ± 73.5 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
26.1 µs ± 98.9 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
2D Grid Graph for [50, 50]
470 µs ± 6.86 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
1.09 ms ± 8.04 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
2D Grid Graph for [100, 100]
2.59 ms ± 20.5 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
5.8 ms ± 8.76 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2D Grid Graph for [500, 500]
91.1 ms ± 1.26 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
182 ms ± 638 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
2D Grid Graph for [1000, 1000]
445 ms ± 9.32 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
734 ms ± 9.12 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
```




---

archive/issue_comments_441748.json:
```json
{
    "body": "The distance assume weight 1 for each edge.\n\nIs there any use case in having the distances and the edges? Currently `report_distance` is ignored when `edges` is true.",
    "created_at": "2021-01-02T18:40:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441748",
    "user": "@kliem"
}
```

The distance assume weight 1 for each edge.

Is there any use case in having the distances and the edges? Currently `report_distance` is ignored when `edges` is true.



---

archive/issue_comments_441749.json:
```json
{
    "body": "`smallInteger`: this is good to know\n\nreport distances and edges: we can certainly find a use case where it is useful to return both. Is it slower to push tuples instead of pairs ?",
    "created_at": "2021-01-02T18:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441749",
    "user": "dcoudert"
}
```

`smallInteger`: this is good to know

report distances and edges: we can certainly find a use case where it is useful to return both. Is it slower to push tuples instead of pairs ?



---

archive/issue_comments_441750.json:
```json
{
    "body": "Replying to [comment:7 dcoudert]:\n> `smallInteger`: this is good to know\n\nI was told on my very first ticket about it.\n> \n> report distances and edges: we can certainly find a use case where it is useful to return both. Is it slower to push tuples instead of pairs ?\n\nI'll try.",
    "created_at": "2021-01-02T19:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441750",
    "user": "@kliem"
}
```

Replying to [comment:7 dcoudert]:
> `smallInteger`: this is good to know

I was told on my very first ticket about it.
> 
> report distances and edges: we can certainly find a use case where it is useful to return both. Is it slower to push tuples instead of pairs ?

I'll try.



---

archive/issue_comments_441751.json:
```json
{
    "body": "Apparently, I took the timings in some intermediate step where `report_distances=True` did not do anything. Things are slower now, but `smallInteger` is still better than `Integer`.",
    "created_at": "2021-01-02T21:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441751",
    "user": "@kliem"
}
```

Apparently, I took the timings in some intermediate step where `report_distances=True` did not do anything. Things are slower now, but `smallInteger` is still better than `Integer`.



---

archive/issue_comments_441752.json:
```json
{
    "body": "Replying to [comment:4 gh-kliem]:\n> Actually, I can't measure a difference for pushing pairs or not. It doesn't seem to make a difference at all. After all it's super easy C stuff (if you try to push a tuple as a pair and hope for cython to do the right thing, that is going to make a difference in the wrong way).\n> \n> `yield from` is a bit fast that's it.\n\nActually you are right, there is a small penalty for pushing pairs. Something like 5 percent.",
    "created_at": "2021-01-02T21:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441752",
    "user": "@kliem"
}
```

Replying to [comment:4 gh-kliem]:
> Actually, I can't measure a difference for pushing pairs or not. It doesn't seem to make a difference at all. After all it's super easy C stuff (if you try to push a tuple as a pair and hope for cython to do the right thing, that is going to make a difference in the wrong way).
> 
> `yield from` is a bit fast that's it.

Actually you are right, there is a small penalty for pushing pairs. Something like 5 percent.



---

archive/issue_comments_441753.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-02T21:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441753",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441754.json:
```json
{
    "body": "Slighly better by simplifying things.\n----\nNew commits:",
    "created_at": "2021-01-02T21:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441754",
    "user": "@kliem"
}
```

Slighly better by simplifying things.
----
New commits:



---

archive/issue_comments_441755.json:
```json
{
    "body": "I like the way you count maintain the distance. it's smart.\n\nWhat is surprising is that reporting distance takes roughly 30% more time. The only difference in the code is in the return statement.",
    "created_at": "2021-01-02T22:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441755",
    "user": "dcoudert"
}
```

I like the way you count maintain the distance. it's smart.

What is surprising is that reporting distance takes roughly 30% more time. The only difference in the code is in the return statement.



---

archive/issue_comments_441756.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-02T22:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441756",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441757.json:
```json
{
    "body": "Replying to [comment:13 dcoudert]:\n> I like the way you count maintain the distance. it's smart.\n> \n> What is surprising is that reporting distance takes roughly 30% more time. The only difference in the code is in the return statement. \n\nNow that you point this out, I find it surprisingly to.\n\nHowever, I believe this is out of reach:\n\n\n```\nsage: cython(''' \n....: def tester(int n): \n....:     cdef int i \n....:     for i in range(n): \n....:         yield i \n....:          \n....: def tester2(int n): \n....:     cdef int i \n....:     for i in range(n): \n....:         yield (i, 1) \n....: ''')                                                                                                                                                                                                                                                                                                                                                                 \n\nsage:                                                                                                                                                                                                                                                                                                                                                                      \nsage: %timeit list(tester(100))                                                                                                                                                                                                                                                                                                                                            \n2.3 \u00b5s \u00b1 15.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit list(tester2(100))                                                                                                                                                                                                                                                                                                                                           \n3.97 \u00b5s \u00b1 5.07 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit list(tester(200))                                                                                                                                                                                                                                                                                                                                            \n4.15 \u00b5s \u00b1 29.6 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit list(tester2(200))                                                                                                                                                                                                                                                                                                                                           \n7.94 \u00b5s \u00b1 52.7 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n```\n",
    "created_at": "2021-01-02T22:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441757",
    "user": "@kliem"
}
```

Replying to [comment:13 dcoudert]:
> I like the way you count maintain the distance. it's smart.
> 
> What is surprising is that reporting distance takes roughly 30% more time. The only difference in the code is in the return statement. 

Now that you point this out, I find it surprisingly to.

However, I believe this is out of reach:


```
sage: cython(''' 
....: def tester(int n): 
....:     cdef int i 
....:     for i in range(n): 
....:         yield i 
....:          
....: def tester2(int n): 
....:     cdef int i 
....:     for i in range(n): 
....:         yield (i, 1) 
....: ''')                                                                                                                                                                                                                                                                                                                                                                 

sage:                                                                                                                                                                                                                                                                                                                                                                      
sage: %timeit list(tester(100))                                                                                                                                                                                                                                                                                                                                            
2.3 µs ± 15.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit list(tester2(100))                                                                                                                                                                                                                                                                                                                                           
3.97 µs ± 5.07 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit list(tester(200))                                                                                                                                                                                                                                                                                                                                            
4.15 µs ± 29.6 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit list(tester2(200))                                                                                                                                                                                                                                                                                                                                           
7.94 µs ± 52.7 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
```




---

archive/issue_comments_441758.json:
```json
{
    "body": "I agree. We already have a huge speedup. \n\nSome details, missing `:` (several times):\n\n```diff\n-        - ``report_distance`` -- boolean (default ``False``); if ``True``,\n+        - ``report_distance`` -- boolean (default: ``False``); if ``True``,\n```\n\n\n\n```diff\n-        - ``edges`` -- boolean (default ``False``); whether to return the edges\n+        - ``edges`` -- boolean (default: ``False``); whether to return the edges\n```\n",
    "created_at": "2021-01-03T09:30:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441758",
    "user": "dcoudert"
}
```

I agree. We already have a huge speedup. 

Some details, missing `:` (several times):

```diff
-        - ``report_distance`` -- boolean (default ``False``); if ``True``,
+        - ``report_distance`` -- boolean (default: ``False``); if ``True``,
```



```diff
-        - ``edges`` -- boolean (default ``False``); whether to return the edges
+        - ``edges`` -- boolean (default: ``False``); whether to return the edges
```




---

archive/issue_comments_441759.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-03T20:43:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441759",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441760.json:
```json
{
    "body": "Replying to [comment:17 dcoudert]:\n> I agree. We already have a huge speedup. \n> \n> Some details, missing `:` (several times):\n> {{{#!diff\n> -        - ``report_distance`` -- boolean (default ``False``); if ``True``,\n> +        - ``report_distance`` -- boolean (default: ``False``); if ``True``,\n> }}}\n> \n> {{{#!diff\n> -        - ``edges`` -- boolean (default ``False``); whether to return the edges\n> +        - ``edges`` -- boolean (default: ``False``); whether to return the edges\n> }}}\n\nCopy/paste. Changed it for every instance in the touched files.",
    "created_at": "2021-01-03T20:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441760",
    "user": "@kliem"
}
```

Replying to [comment:17 dcoudert]:
> I agree. We already have a huge speedup. 
> 
> Some details, missing `:` (several times):
> {{{#!diff
> -        - ``report_distance`` -- boolean (default ``False``); if ``True``,
> +        - ``report_distance`` -- boolean (default: ``False``); if ``True``,
> }}}
> 
> {{{#!diff
> -        - ``edges`` -- boolean (default ``False``); whether to return the edges
> +        - ``edges`` -- boolean (default: ``False``); whether to return the edges
> }}}

Copy/paste. Changed it for every instance in the touched files.



---

archive/issue_comments_441761.json:
```json
{
    "body": "LGTM. Thank you !",
    "created_at": "2021-01-03T22:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441761",
    "user": "dcoudert"
}
```

LGTM. Thank you !



---

archive/issue_comments_441762.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-03T22:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441762",
    "user": "dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_441763.json:
```json
{
    "body": "Thanks for reviewing.",
    "created_at": "2021-01-06T09:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441763",
    "user": "@kliem"
}
```

Thanks for reviewing.



---

archive/issue_comments_441764.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-17T13:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30917#issuecomment-441764",
    "user": "vbraun"
}
```

Resolution: fixed
