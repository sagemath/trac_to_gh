# Issue 30364: Move bitset.pxi to bitset_base.pxd

Issue created by migration from https://trac.sagemath.org/ticket/30601

Original creator: @kliem

Original creation time: 2020-09-18 15:44:21

CC:  â€‹vdelecroix

Keywords: bitset, header

We move `bitset.pxi` to `bitset_base.pxd`.

So far `bitset.pxi` contained mostly inline functions for the header but also a few functions that cannot be inlined due to optional arguments.

https://cython.readthedocs.io/en/latest/src/userguide/language_basics.html?highlight=pxi#cython-file-types 


---

Comment by @kliem created at 2020-09-18 15:44:27

Changing status from new to needs_review.


---

Comment by tscrim created at 2020-09-19 05:47:04

Modern Cython uses `range`, so

```diff
-    for i from 0 <= i < bits.size:
+    for i in range(bits.size):
         s[i] = one if bitset_in(bits, i) else zero
```

If you could make these changes where appropriate, that would be good. Beyond that, LGTM.


---

Comment by git created at 2020-09-21 04:51:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2020-09-21 04:56:46

Done.

I figured it was some old style usage.

Replying to [comment:2 tscrim]:
> Modern Cython uses `range`, so
> {{{#!diff
> -    for i from 0 <= i < bits.size:
> +    for i in range(bits.size):
>          s[i] = one if bitset_in(bits, i) else zero
> }}}
> If you could make these changes where appropriate, that would be good. Beyond that, LGTM.


---

Comment by tscrim created at 2020-09-21 13:01:27

Replying to [comment:4 gh-kliem]:
> Done.

Thank you.

> I figured it was some old style usage.

You're probably right, but it was something I noticed from the diff and I didn't look too closely if it was a hold-over or an addition. (Although I do try and change these things when I do such changes, but that is me.)


---

Comment by tscrim created at 2020-09-21 13:01:27

Changing status from needs_review to positive_review.


---

Comment by @kliem created at 2020-09-21 13:43:39

Thank you.

I think `range` code is much more readable for a person coming from python, so I will change, when I stumble upon it.


---

Comment by vbraun created at 2020-09-30 22:29:58

Resolution: fixed
