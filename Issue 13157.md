# Issue 13157: Add OpenSSL prereq check

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2012-08-03 06:10:34

Assignee: GeorgSWeber

CC:  kini

In the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).


---

Comment by leif created at 2012-08-03 07:09:40

Yes, and maybe more.


---

Comment by jdemeyer created at 2012-08-03 10:16:13

Changing status from new to needs_review.


---

Attachment

Diff for Volker's version


---

Comment by vbraun created at 2012-08-03 13:56:20

As I said on the mailinglist, I think its good to also check for `dpkg-architecture`. I've also added checks for the OpenSSL library and some misc. I'm fine with Jeroen's changes, of course.


---

Comment by jdemeyer created at 2012-08-04 09:44:42

Incremental diff, based on Volker's version


---

Attachment

Volker, I made some further changes.  If you're happy with these, you can set the whole ticket to positive_review.


---

Comment by vbraun created at 2012-08-04 13:55:46

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2012-08-04 13:55:46

Looks good!


---

Comment by jdemeyer created at 2012-08-08 09:15:33

In some cases, we need to add `-lcrypto -ldl` for OpenSSL to link correctly.


---

Comment by jdemeyer created at 2012-08-08 09:15:33

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2012-08-08 10:02:13

Another issue: prereq doesn't actually check `SAGE_LOCAL/lib`, since `sage-env` wasn't sourced. Fixed in the new SAGE_ROOT patch.


---

Comment by jdemeyer created at 2012-08-08 10:36:07

Actually, sourcing `sage-env` doesn't help because using the `LIBRARY_PATH` environment variable isn't very portable.


---

Comment by jdemeyer created at 2012-08-08 10:37:08

Apply to SAGE_ROOT


---

Attachment


---

Comment by jdemeyer created at 2012-08-08 12:05:06

In the end, I reverted the SAGE_ROOT patch to the one which got positive_review already.

I added [attachment:prereq-1.1-libs.patch] to the prereq configure script, needs review.


---

Comment by jdemeyer created at 2012-08-08 12:05:06

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2012-08-08 13:15:46

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2012-08-08 13:15:46

looks good to me


---

Comment by jdemeyer created at 2012-08-12 19:02:14

Resolution: fixed


---

Comment by kini created at 2012-08-21 07:05:21

If [sage-devel](http://thread.gmane.org/gmane.comp.mathematics.sage.devel/54802/) decides #13385 is a good idea, we would have to undo part of this, namely the check for OpenSSL dev headers that titles this ticket.
