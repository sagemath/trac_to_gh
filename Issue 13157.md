# Issue 13157: Add OpenSSL prereq check

archive/issues_013157.json:
```json
{
    "body": "Assignee: GeorgSWeber\n\nCC:  @kini\n\nIn the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).\n\nIssue created by migration from https://trac.sagemath.org/ticket/13329\n\n",
    "created_at": "2012-08-03T06:10:34Z",
    "labels": [
        "build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.3",
    "title": "Add OpenSSL prereq check",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13157",
    "user": "@jdemeyer"
}
```
Assignee: GeorgSWeber

CC:  @kini

In the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).

Issue created by migration from https://trac.sagemath.org/ticket/13329





---

archive/issue_comments_160568.json:
```json
{
    "body": "Yes, and maybe more.",
    "created_at": "2012-08-03T07:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160568",
    "user": "@nexttime"
}
```

Yes, and maybe more.



---

archive/issue_comments_160569.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-08-03T10:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160569",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_160570.json:
```json
{
    "body": "Attachment [prereq-1.1.2.diff](tarball://root/attachments/some-uuid/ticket13329/prereq-1.1.2.diff) by @vbraun created at 2012-08-03 13:54:09\n\nDiff for Volker's version",
    "created_at": "2012-08-03T13:54:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160570",
    "user": "@vbraun"
}
```

Attachment [prereq-1.1.2.diff](tarball://root/attachments/some-uuid/ticket13329/prereq-1.1.2.diff) by @vbraun created at 2012-08-03 13:54:09

Diff for Volker's version



---

archive/issue_comments_160571.json:
```json
{
    "body": "As I said on the mailinglist, I think its good to also check for `dpkg-architecture`. I've also added checks for the OpenSSL library and some misc. I'm fine with Jeroen's changes, of course.",
    "created_at": "2012-08-03T13:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160571",
    "user": "@vbraun"
}
```

As I said on the mailinglist, I think its good to also check for `dpkg-architecture`. I've also added checks for the OpenSSL library and some misc. I'm fine with Jeroen's changes, of course.



---

archive/issue_comments_160572.json:
```json
{
    "body": "Incremental diff, based on Volker's version",
    "created_at": "2012-08-04T09:44:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160572",
    "user": "@jdemeyer"
}
```

Incremental diff, based on Volker's version



---

archive/issue_comments_160573.json:
```json
{
    "body": "Attachment [prereq-1.1-reviewer.diff](tarball://root/attachments/some-uuid/ticket13329/prereq-1.1-reviewer.diff) by @jdemeyer created at 2012-08-04 09:47:33\n\nVolker, I made some further changes.  If you're happy with these, you can set the whole ticket to positive_review.",
    "created_at": "2012-08-04T09:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160573",
    "user": "@jdemeyer"
}
```

Attachment [prereq-1.1-reviewer.diff](tarball://root/attachments/some-uuid/ticket13329/prereq-1.1-reviewer.diff) by @jdemeyer created at 2012-08-04 09:47:33

Volker, I made some further changes.  If you're happy with these, you can set the whole ticket to positive_review.



---

archive/issue_comments_160574.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-08-04T13:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160574",
    "user": "@vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_160575.json:
```json
{
    "body": "Looks good!",
    "created_at": "2012-08-04T13:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160575",
    "user": "@vbraun"
}
```

Looks good!



---

archive/issue_comments_160576.json:
```json
{
    "body": "In some cases, we need to add `-lcrypto -ldl` for OpenSSL to link correctly.",
    "created_at": "2012-08-08T09:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160576",
    "user": "@jdemeyer"
}
```

In some cases, we need to add `-lcrypto -ldl` for OpenSSL to link correctly.



---

archive/issue_comments_160577.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-08-08T09:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160577",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_160578.json:
```json
{
    "body": "Another issue: prereq doesn't actually check `SAGE_LOCAL/lib`, since `sage-env` wasn't sourced. Fixed in the new SAGE_ROOT patch.",
    "created_at": "2012-08-08T10:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160578",
    "user": "@jdemeyer"
}
```

Another issue: prereq doesn't actually check `SAGE_LOCAL/lib`, since `sage-env` wasn't sourced. Fixed in the new SAGE_ROOT patch.



---

archive/issue_comments_160579.json:
```json
{
    "body": "Actually, sourcing `sage-env` doesn't help because using the `LIBRARY_PATH` environment variable isn't very portable.",
    "created_at": "2012-08-08T10:36:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160579",
    "user": "@jdemeyer"
}
```

Actually, sourcing `sage-env` doesn't help because using the `LIBRARY_PATH` environment variable isn't very portable.



---

archive/issue_comments_160580.json:
```json
{
    "body": "Apply to SAGE_ROOT",
    "created_at": "2012-08-08T10:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160580",
    "user": "@jdemeyer"
}
```

Apply to SAGE_ROOT



---

archive/issue_comments_160581.json:
```json
{
    "body": "Attachment [prereq-1.1-libs.patch](tarball://root/attachments/some-uuid/ticket13329/prereq-1.1-libs.patch) by @jdemeyer created at 2012-08-08 11:59:51",
    "created_at": "2012-08-08T11:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160581",
    "user": "@jdemeyer"
}
```

Attachment [prereq-1.1-libs.patch](tarball://root/attachments/some-uuid/ticket13329/prereq-1.1-libs.patch) by @jdemeyer created at 2012-08-08 11:59:51



---

archive/issue_comments_160582.json:
```json
{
    "body": "In the end, I reverted the SAGE_ROOT patch to the one which got positive_review already.\n\nI added [attachment:prereq-1.1-libs.patch] to the prereq configure script, needs review.",
    "created_at": "2012-08-08T12:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160582",
    "user": "@jdemeyer"
}
```

In the end, I reverted the SAGE_ROOT patch to the one which got positive_review already.

I added [attachment:prereq-1.1-libs.patch] to the prereq configure script, needs review.



---

archive/issue_comments_160583.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-08-08T12:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160583",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_160584.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-08-08T13:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160584",
    "user": "@vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_160585.json:
```json
{
    "body": "looks good to me",
    "created_at": "2012-08-08T13:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160585",
    "user": "@vbraun"
}
```

looks good to me



---

archive/issue_comments_160586.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-08-12T19:02:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160586",
    "user": "@jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_160587.json:
```json
{
    "body": "If [sage-devel](http://thread.gmane.org/gmane.comp.mathematics.sage.devel/54802/) decides #13385 is a good idea, we would have to undo part of this, namely the check for OpenSSL dev headers that titles this ticket.",
    "created_at": "2012-08-21T07:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13157#issuecomment-160587",
    "user": "@kini"
}
```

If [sage-devel](http://thread.gmane.org/gmane.comp.mathematics.sage.devel/54802/) decides #13385 is a good idea, we would have to undo part of this, namely the check for OpenSSL dev headers that titles this ticket.
