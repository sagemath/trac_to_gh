# Issue 14852: GSL probability distributions ignore the random seed keyword

Issue created by migration from Trac.

Original creator: rbeezer

Original creation time: 2013-08-23 19:40:43

CC:  jason

The `seed` keyword seems to be ignored/ineffective when used to initialize a GSL probability distribution.  However the `.set_seed()` method seems to behave better.  So the logic to use a seed must be there, so maybe the problem is not too serious.

I have not investigated further (scope, or explanation).  I do not think this is related to #9770, though it looks similar.


```
sage: import sage.gsl.probability_distribution as pd
sage: busted = pd.RealDistribution("beta",[1.6,4.3], seed=999)
sage: [busted.get_random_element() for _ in range(10)]
[0.32128217201, 0.542457198335, 0.0724813201357, 0.112798064656, 0.19162541988, 0.0311161329052, 0.367517357654, 0.155752529923, 0.168016999523, 0.316509258951]

sage: busted = pd.RealDistribution("beta",[1.6,4.3], seed=123)
sage: [busted.get_random_element() for _ in range(10)]
[0.32128217201, 0.542457198335, 0.0724813201357, 0.112798064656, 0.19162541988, 0.0311161329052, 0.367517357654, 0.155752529923, 0.168016999523, 0.316509258951]

sage: busted = pd.RealDistribution("beta",[1.6,4.3], seed=654)
sage: [busted.get_random_element() for _ in range(10)]
[0.32128217201, 0.542457198335, 0.0724813201357, 0.112798064656, 0.19162541988, 0.0311161329052, 0.367517357654, 0.155752529923, 0.168016999523, 0.316509258951]
```



```
sage: import sage.gsl.probability_distribution as pd
sage: works = pd.RealDistribution("beta",[1.6,4.3])
sage: works.set_seed(999)
sage: [works.get_random_element() for _ in range(10)]
[0.425823673237, 0.429579713803, 0.314369797661, 0.431111546249, 0.121212622335, 0.22203001696, 0.368655240221, 0.589478261874, 0.530036995706, 0.322479617059]

sage: works.set_seed(123)
sage: [works.get_random_element() for _ in range(10)]
[0.732932782326, 0.211615687127, 0.129663204693, 0.723107137266, 0.0564437011706, 0.566875767081, 0.114427268807, 0.212965725735, 0.206817349997, 0.224659673662]

sage: works.set_seed(654)
sage: [works.get_random_element() for _ in range(10)]
[0.248304400629, 0.00952944262958, 0.442372539004, 0.0792859649324, 0.686033385325, 0.133732570843, 0.514823922368, 0.19377758022, 0.0372641947453, 0.546083013146]
```



---

Comment by rbeezer created at 2013-08-24 00:50:20

The init methods of `RealDistribution`, `GeneralDiscreteDistribution` and `SphericalDistribution` all handle the `seed == None` case, but otherwise fail to copy a value of the seed keyword into `self.seed` before making use of it.  Could be three one-line fixes, just capture this value from the keyword into the class.


---

Comment by rbeezer created at 2013-08-24 04:10:47

Changing status from new to needs_review.


---

Attachment

Had to fix one other doctest, which was previously passing only because of the bug fixed here.  Patch passes all tests, etc on 5.11.

Lots of places where this module could use some love.


---

Comment by chapoton created at 2013-09-07 17:32:26

ok, looks good to me. And indeed the code needs more attention and care..


---

Comment by chapoton created at 2013-09-07 17:32:42

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-10-01 07:16:25

Resolution: fixed
