# Issue 29104: GitHub CI workflow: Add testing of optional packages

Issue created by migration from https://trac.sagemath.org/ticket/29341

Original creator: mkoeppe

Original creation time: 2020-03-15 19:09:59

CC:  dimpase @kliem mjo jhpalmieri




---

Comment by mkoeppe created at 2020-03-15 19:10:48

Changing keywords from "" to "ContinuousIntegration".


---

Comment by mkoeppe created at 2020-03-16 15:28:50

Tests at https://github.com/mkoeppe/sage/actions/runs/56355410

- `polymake` - fails on many platforms (#28423)
- `e-antic` - fails on ubuntu-eoan-standard (#27952)
- `lrslib` - fails on archlinux-latest-standard (#29185)



----
Last 10 new commits:


---

Comment by mkoeppe created at 2020-04-15 19:52:06

An obstacle when testing platforms with `-maximal` and `IGNORE_MISSING_SYSTEM_PACKAGES=yes`, for example `docker-fedora-26-maximal` (https://github.com/mkoeppe/sage/runs/589959336)

`docker build` gives

```
max depth exceeded
```

(https://github.com/docker/for-linux/issues/414)

Basically, a sequence of too many RUN commands. Need to revise write-dockerfile


---

Comment by git created at 2020-04-15 23:57:55

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by git created at 2020-04-16 00:11:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-16 00:44:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-18 18:44:05

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by git created at 2020-04-18 18:55:28

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-04-18 19:11:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-04-18 19:12:50

Tests running at https://github.com/mkoeppe/sage/actions/runs/81669565


---

Comment by mkoeppe created at 2020-04-18 19:21:58

Changing status from new to needs_review.


---

Comment by git created at 2020-04-19 03:17:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-19 05:21:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-04-19 18:13:21

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2020-04-19 18:13:21

On Fedora, this breaks installation of `python3` because `yum info python3` does not work even though `yum install python3` works

(https://github.com/mkoeppe/sage/runs/599575888)


---

Comment by git created at 2020-04-19 18:17:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-04-19 18:18:05

Changing status from needs_work to needs_review.


---

Comment by git created at 2020-04-20 07:24:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-20 23:44:15

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2020-04-20 23:49:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-21 00:03:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2020-04-22 15:36:47

OK, this appears to work, by and large. Surely there are various platforms/packages combos not working, but this is another story.


---

Comment by dimpase created at 2020-04-22 15:36:47

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-04-22 23:25:04

Thanks!


---

Comment by git created at 2020-04-23 03:04:12

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2020-04-23 03:04:12

Changing status from positive_review to needs_review.


---

Comment by mkoeppe created at 2020-04-23 03:04:40

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-04-23 03:04:40

Merged in new rc


---

Comment by vbraun created at 2020-04-24 22:28:14

Resolution: fixed
