# Issue 12153: Eulerian circuits/paths for (di)graphs

archive/issues_012153.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  brunellus\n\nCurrently, there is only a function for finding an eulerian **circuit** in an **un**directed graph.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12325\n\n",
    "created_at": "2012-01-19T01:45:24Z",
    "labels": [
        "graph theory",
        "major",
        "enhancement"
    ],
    "title": "Eulerian circuits/paths for (di)graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12153",
    "user": "brunellus"
}
```
Assignee: jason, ncohen, rlm

CC:  brunellus

Currently, there is only a function for finding an eulerian **circuit** in an **un**directed graph.

Issue created by migration from https://trac.sagemath.org/ticket/12325





---

archive/issue_comments_141453.json:
```json
{
    "body": "Attachment [trac_12325_eulerian_paths.patch](tarball://root/attachments/some-uuid/ticket12325/trac_12325_eulerian_paths.patch) by brunellus created at 2012-01-19 05:13:00",
    "created_at": "2012-01-19T05:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12153#issuecomment-141453",
    "user": "brunellus"
}
```

Attachment [trac_12325_eulerian_paths.patch](tarball://root/attachments/some-uuid/ticket12325/trac_12325_eulerian_paths.patch) by brunellus created at 2012-01-19 05:13:00



---

archive/issue_comments_141454.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-01-19T05:15:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12153#issuecomment-141454",
    "user": "brunellus"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_141455.json:
```json
{
    "body": "Hellooooooooooooooooo !!!\n\nLooks good ! Some comments :\n\n* The patch does not apply on sage-5.0-beta1 (nothing serious)\n* You seem to have moved the function through the file.. Well, if there is a reason behind could you produce first one patch that moves it, and another one that changes it ? As such, it is very hard while reading the patch to see what you changed `^^;` Only only sees a function removed, and a different one added.\n* Perhaps I am making a mistake but it seems in your patch that if path is True and the graph is undirected you keep no track of the two vertices with odd degree. One of them should become the start_vertex, shouldn't it ?\n* It is \"easy\" to test whether the graph is eulerian through the is_eulerian function, and slightly harder to test whether there exists an eulerian path because you have to find the two vertices yourself. What would you think of modifying the is_eulerian function so that it also has a ``path`` flag, tell you whether your graph admits an eulerian path, and if necessary (perhaps another flag ?) return the two vertices with odd degree ? Actually, I did ot understand why you did not write this code \"the lazy way\", and by that I mean : first find the two special vertices, add an edge between them, and test whether the resulting graph is eulerian. This would avoid the duplication of the \"empty components\" count. Actually, with the modification of the is_eulerian function, the modifications of this patch to the eulerian_cycle function would amount to a new argument, a call to is_eulerian(path = True, return_missing_edge = True), and run the same old algorithm with one of the two vertices given by is_eulerian.\n  * If I did not say anything stupid in my former remark, could you add a doctest of an undirected graph which has a eulerian path and the function's output ?\n\nNathann",
    "created_at": "2012-01-25T10:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12153#issuecomment-141455",
    "user": "ncohen"
}
```

Hellooooooooooooooooo !!!

Looks good ! Some comments :

* The patch does not apply on sage-5.0-beta1 (nothing serious)
* You seem to have moved the function through the file.. Well, if there is a reason behind could you produce first one patch that moves it, and another one that changes it ? As such, it is very hard while reading the patch to see what you changed `^^;` Only only sees a function removed, and a different one added.
* Perhaps I am making a mistake but it seems in your patch that if path is True and the graph is undirected you keep no track of the two vertices with odd degree. One of them should become the start_vertex, shouldn't it ?
* It is "easy" to test whether the graph is eulerian through the is_eulerian function, and slightly harder to test whether there exists an eulerian path because you have to find the two vertices yourself. What would you think of modifying the is_eulerian function so that it also has a ``path`` flag, tell you whether your graph admits an eulerian path, and if necessary (perhaps another flag ?) return the two vertices with odd degree ? Actually, I did ot understand why you did not write this code "the lazy way", and by that I mean : first find the two special vertices, add an edge between them, and test whether the resulting graph is eulerian. This would avoid the duplication of the "empty components" count. Actually, with the modification of the is_eulerian function, the modifications of this patch to the eulerian_cycle function would amount to a new argument, a call to is_eulerian(path = True, return_missing_edge = True), and run the same old algorithm with one of the two vertices given by is_eulerian.
  * If I did not say anything stupid in my former remark, could you add a doctest of an undirected graph which has a eulerian path and the function's output ?

Nathann



---

archive/issue_comments_141456.json:
```json
{
    "body": "Attachment [trac_12325_eulerian_move.patch](tarball://root/attachments/some-uuid/ticket12325/trac_12325_eulerian_move.patch) by brunellus created at 2012-01-26 01:39:27",
    "created_at": "2012-01-26T01:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12153#issuecomment-141456",
    "user": "brunellus"
}
```

Attachment [trac_12325_eulerian_move.patch](tarball://root/attachments/some-uuid/ticket12325/trac_12325_eulerian_move.patch) by brunellus created at 2012-01-26 01:39:27



---

archive/issue_comments_141457.json:
```json
{
    "body": "Attachment [trac_12325_eulerian_paths.2.patch](tarball://root/attachments/some-uuid/ticket12325/trac_12325_eulerian_paths.2.patch) by brunellus created at 2012-01-26 01:43:58",
    "created_at": "2012-01-26T01:43:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12153#issuecomment-141457",
    "user": "brunellus"
}
```

Attachment [trac_12325_eulerian_paths.2.patch](tarball://root/attachments/some-uuid/ticket12325/trac_12325_eulerian_paths.2.patch) by brunellus created at 2012-01-26 01:43:58



---

archive/issue_comments_141458.json:
```json
{
    "body": "Hi, thanks for the remarks very much.\n\nI tried to rewrite the fix -- you are certainly right that the eulerianess-checking code should be in the is_eulerian function. I am a big fan of \"the lazy way\" :-), but in this case it makes almost no difference, because there are no changes in the algorithm needed for allowing the path computation -- the only important step is setting the start_vertex variable. And thanks for the advice about two patches -- it definitelly makes sense.\n\nLuk\u00e1\u0161.",
    "created_at": "2012-01-26T02:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12153#issuecomment-141458",
    "user": "brunellus"
}
```

Hi, thanks for the remarks very much.

I tried to rewrite the fix -- you are certainly right that the eulerianess-checking code should be in the is_eulerian function. I am a big fan of "the lazy way" :-), but in this case it makes almost no difference, because there are no changes in the algorithm needed for allowing the path computation -- the only important step is setting the start_vertex variable. And thanks for the advice about two patches -- it definitelly makes sense.

Lukáš.



---

archive/issue_comments_141459.json:
```json
{
    "body": "Hellooooooooooooo !!!\n\nGreat ! Thank you very much for these two patches, it is much easier to read. And you also factored things like many (g.degree(u)-g.degree(v)) `:-)`\n\nWell, I see nothing wrong with this patch, it passes all tests and does it job. Could you rebase the first of your two patches over sage-4.5-beta1 though ? It still does not apply.\n\nNathann",
    "created_at": "2012-01-26T10:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12153#issuecomment-141459",
    "user": "ncohen"
}
```

Hellooooooooooooo !!!

Great ! Thank you very much for these two patches, it is much easier to read. And you also factored things like many (g.degree(u)-g.degree(v)) `:-)`

Well, I see nothing wrong with this patch, it passes all tests and does it job. Could you rebase the first of your two patches over sage-4.5-beta1 though ? It still does not apply.

Nathann



---

archive/issue_comments_141460.json:
```json
{
    "body": "Argggggg !! It's totally my fault ! I had not seen the patch depended on #10135. There's nothing left to do with this patch `:-)`\n\nNathann",
    "created_at": "2012-01-26T10:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12153#issuecomment-141460",
    "user": "ncohen"
}
```

Argggggg !! It's totally my fault ! I had not seen the patch depended on #10135. There's nothing left to do with this patch `:-)`

Nathann



---

archive/issue_comments_141461.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-26T13:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12153#issuecomment-141461",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_141462.json:
```json
{
    "body": "This one is also good to go, and now its dependency has been reviewed !\n\nNathann",
    "created_at": "2012-01-26T13:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12153#issuecomment-141462",
    "user": "ncohen"
}
```

This one is also good to go, and now its dependency has been reviewed !

Nathann



---

archive/issue_comments_141463.json:
```json
{
    "body": "Thank you for the review. :-)",
    "created_at": "2012-01-26T18:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12153#issuecomment-141463",
    "user": "brunellus"
}
```

Thank you for the review. :-)



---

archive/issue_comments_141464.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-02-06T21:26:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12153",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12153#issuecomment-141464",
    "user": "jdemeyer"
}
```

Resolution: fixed
