# Issue 29304: spkg-configure.m4 for giac

archive/issues_029304.json:
```json
{
    "body": "CC:  dimpase mjo fbissey frederichan parisse @sheerluck arojas @kliem thansen\n\nKeywords: spkg-configure giac\n\nThis ticket adds an spkg-configure.m4 for giac, in order to use it from a system package if possible.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29541\n\n",
    "created_at": "2020-04-21T16:26:50Z",
    "labels": [
        "build: configure",
        "major",
        "enhancement"
    ],
    "title": "spkg-configure.m4 for giac",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29304",
    "user": "@thierry-FreeBSD"
}
```
CC:  dimpase mjo fbissey frederichan parisse @sheerluck arojas @kliem thansen

Keywords: spkg-configure giac

This ticket adds an spkg-configure.m4 for giac, in order to use it from a system package if possible.

Issue created by migration from https://trac.sagemath.org/ticket/29541





---

archive/issue_comments_415381.json:
```json
{
    "body": "spkg-configure.m4 to be put under build/pkgs/giac/",
    "created_at": "2020-04-21T16:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415381",
    "user": "@thierry-FreeBSD"
}
```

spkg-configure.m4 to be put under build/pkgs/giac/



---

archive/issue_comments_415382.json:
```json
{
    "body": "Attachment [spkg-configure.m4](tarball://root/attachments/some-uuid/ticket29541/spkg-configure.m4) by mkoeppe created at 2020-04-21 17:03:19",
    "created_at": "2020-04-21T17:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415382",
    "user": "mkoeppe"
}
```

Attachment [spkg-configure.m4](tarball://root/attachments/some-uuid/ticket29541/spkg-configure.m4) by mkoeppe created at 2020-04-21 17:03:19



---

archive/issue_comments_415383.json:
```json
{
    "body": "Do we know which versions of system giac are acceptable? According to our update tickets (see #29552) >= 1.5.0-63 and < 1.6 are fine.\n\nWhat does the check for `ConvertUTF16toUTF8` in the proposed `spkg-configure.m4` test? Does this test for a minimum version? \n\nIs there a way to test the patchlevel of giac? `giac --version` does not include this information.",
    "created_at": "2020-08-10T17:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415383",
    "user": "mkoeppe"
}
```

Do we know which versions of system giac are acceptable? According to our update tickets (see #29552) >= 1.5.0-63 and < 1.6 are fine.

What does the check for `ConvertUTF16toUTF8` in the proposed `spkg-configure.m4` test? Does this test for a minimum version? 

Is there a way to test the patchlevel of giac? `giac --version` does not include this information.



---

archive/issue_comments_415384.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-10T23:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415384",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415385.json:
```json
{
    "body": "`ubuntu-focal-standard` (https://github.com/mkoeppe/sage/runs/969005184), `debian-bullseye-standard`: `pexpect.exceptions.ExceptionPexpect: The command was not found or was not executable: giac.`\nSo some package is still missing",
    "created_at": "2020-08-12T03:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415385",
    "user": "mkoeppe"
}
```

`ubuntu-focal-standard` (https://github.com/mkoeppe/sage/runs/969005184), `debian-bullseye-standard`: `pexpect.exceptions.ExceptionPexpect: The command was not found or was not executable: giac.`
So some package is still missing



---

archive/issue_comments_415386.json:
```json
{
    "body": "`fedora-32-standard` (https://github.com/mkoeppe/sage/runs/969005556):\n\n```\nChecking whether SageMath should install SPKG giac...\nchecking whether any of pari is installed as or will be installed as SPKG... no\nchecking giac/giac.h usability... no\nchecking giac/giac.h presence... no\nchecking for giac/giac.h... no\nconfigure: no suitable system package found for SPKG giac\n```\n",
    "created_at": "2020-08-12T03:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415386",
    "user": "mkoeppe"
}
```

`fedora-32-standard` (https://github.com/mkoeppe/sage/runs/969005556):

```
Checking whether SageMath should install SPKG giac...
checking whether any of pari is installed as or will be installed as SPKG... no
checking giac/giac.h usability... no
checking giac/giac.h presence... no
checking for giac/giac.h... no
configure: no suitable system package found for SPKG giac
```




---

archive/issue_comments_415387.json:
```json
{
    "body": "`archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/969005637): \n\n```\n   TypeError: unable to start giac because the command 'giac --sage' failed: The command was not found or was not executable: giac.\n```\n",
    "created_at": "2020-08-12T03:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415387",
    "user": "mkoeppe"
}
```

`archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/969005637): 

```
   TypeError: unable to start giac because the command 'giac --sage' failed: The command was not found or was not executable: giac.
```




---

archive/issue_comments_415388.json:
```json
{
    "body": "Replying to [comment:9 mkoeppe]:\n> `ubuntu-focal-standard` (https://github.com/mkoeppe/sage/runs/969005184), `debian-bullseye-standard`: `pexpect.exceptions.ExceptionPexpect: The command was not found or was not executable: giac.`\n> So some package is still missing\n\ndebian has the `giac` executable in package `xcas`, which pulls in a lot of dependencies",
    "created_at": "2020-08-12T04:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415388",
    "user": "mkoeppe"
}
```

Replying to [comment:9 mkoeppe]:
> `ubuntu-focal-standard` (https://github.com/mkoeppe/sage/runs/969005184), `debian-bullseye-standard`: `pexpect.exceptions.ExceptionPexpect: The command was not found or was not executable: giac.`
> So some package is still missing

debian has the `giac` executable in package `xcas`, which pulls in a lot of dependencies



---

archive/issue_comments_415389.json:
```json
{
    "body": "Replying to [comment:10 mkoeppe]:\n> `fedora-32-standard` (https://github.com/mkoeppe/sage/runs/969005556):\n... missing giac-devel",
    "created_at": "2020-08-12T04:11:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415389",
    "user": "mkoeppe"
}
```

Replying to [comment:10 mkoeppe]:
> `fedora-32-standard` (https://github.com/mkoeppe/sage/runs/969005556):
... missing giac-devel



---

archive/issue_comments_415390.json:
```json
{
    "body": "Replying to [comment:12 mkoeppe]:\n> `archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/969005637): \n\nneed package `giac`",
    "created_at": "2020-08-12T04:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415390",
    "user": "mkoeppe"
}
```

Replying to [comment:12 mkoeppe]:
> `archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/969005637): 

need package `giac`



---

archive/issue_comments_415391.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-12T04:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415391",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415392.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-12T04:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415392",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415393.json:
```json
{
    "body": "This fixed `ubuntu-focal-standard` (https://github.com/mkoeppe/sage/runs/974323603); waiting for other runs to finish.",
    "created_at": "2020-08-12T17:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415393",
    "user": "mkoeppe"
}
```

This fixed `ubuntu-focal-standard` (https://github.com/mkoeppe/sage/runs/974323603); waiting for other runs to finish.



---

archive/issue_comments_415394.json:
```json
{
    "body": "`archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/974324005) now finds system giac 1.6.0.7 and reproduces the doctest errors reported in #29552#comment:2",
    "created_at": "2020-08-13T02:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415394",
    "user": "mkoeppe"
}
```

`archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/974324005) now finds system giac 1.6.0.7 and reproduces the doctest errors reported in #29552#comment:2



---

archive/issue_comments_415395.json:
```json
{
    "body": "`fedora-32-standard` (https://github.com/mkoeppe/sage/runs/974323894) now finds system giac 1.5.0.85, all tests pass",
    "created_at": "2020-08-13T02:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415395",
    "user": "mkoeppe"
}
```

`fedora-32-standard` (https://github.com/mkoeppe/sage/runs/974323894) now finds system giac 1.5.0.85, all tests pass



---

archive/issue_comments_415396.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-13T02:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415396",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415397.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-13T02:52:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415397",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415398.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-13T03:00:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415398",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_415399.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-08-14T17:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415399",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_415400.json:
```json
{
    "body": "Rebased, dropping the merge with the upgrade ticket #29552",
    "created_at": "2020-08-14T17:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415400",
    "user": "mkoeppe"
}
```

Rebased, dropping the merge with the upgrade ticket #29552



---

archive/issue_comments_415401.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-15T21:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415401",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415402.json:
```json
{
    "body": "Replying to [comment:21 mkoeppe]:\n> `archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/974324005) now finds system giac 1.6.0.7 and reproduces the doctest errors reported in #29552#comment:2\n\nec95752 has changed it so it rejects giac >= 1.6, as can be seen in https://github.com/mkoeppe/sage/runs/985886420\n\nThe latest commit, 5efb0d7, fixes the doctest error.\n\n\nReady for review",
    "created_at": "2020-08-15T21:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415402",
    "user": "mkoeppe"
}
```

Replying to [comment:21 mkoeppe]:
> `archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/974324005) now finds system giac 1.6.0.7 and reproduces the doctest errors reported in #29552#comment:2

ec95752 has changed it so it rejects giac >= 1.6, as can be seen in https://github.com/mkoeppe/sage/runs/985886420

The latest commit, 5efb0d7, fixes the doctest error.


Ready for review



---

archive/issue_comments_415403.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-08-19T23:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415403",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_415404.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-08-24T17:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415404",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_415405.json:
```json
{
    "body": "Rebased, needs review",
    "created_at": "2020-08-24T17:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415405",
    "user": "mkoeppe"
}
```

Rebased, needs review



---

archive/issue_comments_415406.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-09-04T10:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415406",
    "user": "charpent"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_415407.json:
```json
{
    "body": "On Debian testing, installing `xcas`, `libgiac` (and their dependencies) is not detected by `./configure`. From `config.log` :\n\n\n```\nconfigure:35644: result: giac-1.5.0.87p0:                             does not support check for system package; will be installed as an SPKG\n```\n\n\n==>`needs_work`",
    "created_at": "2020-09-04T10:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415407",
    "user": "charpent"
}
```

On Debian testing, installing `xcas`, `libgiac` (and their dependencies) is not detected by `./configure`. From `config.log` :


```
configure:35644: result: giac-1.5.0.87p0:                             does not support check for system package; will be installed as an SPKG
```


==>`needs_work`



---

archive/issue_comments_415408.json:
```json
{
    "body": "I suppose you  need `libgiac-dev`, not just `libgiac`.\n\nhttps://packages.debian.org/sid/libgiac-dev",
    "created_at": "2020-09-04T10:31:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415408",
    "user": "dimpase"
}
```

I suppose you  need `libgiac-dev`, not just `libgiac`.

https://packages.debian.org/sid/libgiac-dev



---

archive/issue_comments_415409.json:
```json
{
    "body": "Replying to [comment:40 dimpase]:\n> I suppose you  need `libgiac-dev`, not just `libgiac`.\n\nThat's what I installed (and typoed when typing my answer... ;-).\n\nSo, still `needs_work`...",
    "created_at": "2020-09-04T14:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415409",
    "user": "charpent"
}
```

Replying to [comment:40 dimpase]:
> I suppose you  need `libgiac-dev`, not just `libgiac`.

That's what I installed (and typoed when typing my answer... ;-).

So, still `needs_work`...



---

archive/issue_comments_415410.json:
```json
{
    "body": "> does not support check for system package\n\nIf you want to test this ticket, you need to use `./bootstrap`",
    "created_at": "2020-09-04T15:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415410",
    "user": "mkoeppe"
}
```

> does not support check for system package

If you want to test this ticket, you need to use `./bootstrap`



---

archive/issue_comments_415411.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-04T15:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415411",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_415412.json:
```json
{
    "body": "This looks good to me. Can you add `giac` to `distros/conda.txt`? You can set it to positive review afterwards.",
    "created_at": "2020-09-10T17:25:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415412",
    "user": "isuruf"
}
```

This looks good to me. Can you add `giac` to `distros/conda.txt`? You can set it to positive review afterwards.



---

archive/issue_comments_415413.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-10T17:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415413",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415414.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-10T17:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415414",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_415415.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-09-10T17:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415415",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_415416.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-15T21:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29304",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29304#issuecomment-415416",
    "user": "vbraun"
}
```

Resolution: fixed
