# Issue 28421: Three.js: Add popup menu for accessing additional options

Issue created by migration from https://trac.sagemath.org/ticket/28658

Original creator: paulmasson

Original creation time: 2019-10-26 23:09:02

CC:  egourgoulhon jipilab

This ticket changes the download as PNG feature to show a menu with that option and a couple others. This will allow access to whatever additional functions are suggested by users in the future.

The "Camera Info" is a temporary feature to address the issue in this [comment](https://trac.sagemath.org/ticket/22408#comment:70)


---

Comment by paulmasson created at 2019-10-26 23:11:17

Changing status from new to needs_review.


---

Comment by paulmasson created at 2019-10-26 23:11:17

New commits:


---

Comment by paulmasson created at 2019-10-26 23:11:42

Changing keywords from "" to "threejs".


---

Comment by egourgoulhon created at 2019-10-28 13:51:51

This is very nice!

Would it be possible to add a few words about this feature in the documentation? i.e. at
https://doc.sagemath.org/html/en/reference/plot3d/threejs.html


---

Comment by git created at 2019-10-28 19:17:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2019-10-28 21:39:29

The circled i is not rendered in the documentation output; one gets the raw html unicode instead:


"Clicking on the information icon &#x24D8; in the lower right-hand corner..."

Maybe a solution is to use the `:role:` directive, as indicated in the third answer to this 
[question](https://stackoverflow.com/questions/1862472/symbols-in-restructuredtext).


---

Comment by git created at 2019-10-28 23:06:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by paulmasson created at 2019-10-28 23:07:43

Found what appears to be a safer method. Try again, please.


---

Comment by jipilab created at 2019-10-29 09:27:43

This is really fantastic! It works in the jupyter notebook and the command line. The two saving functions also work.

From what I can read about the camera info, it seems to encode it by a 4x4 matrix.
I am wondering if it would be good to either give a reference to interpret the output or explain the relevant information there? What do you think?

I would start looking this up online, as I am interested to know how threejs works internally.


---

Comment by egourgoulhon created at 2019-10-29 10:39:43

Replying to [comment:8 paulmasson]:
> Found what appears to be a safer method. Try again, please.
Thanks for the new version. It fixes the html documentation but not the pdf one: running

```
sage -docbuild reference/plot3d pdf
```

results in

```
! Package inputenc Error: Unicode char ⓘ (U+24D8)
(inputenc)                not set up for use with LaTeX.

See the inputenc package documentation for explanation.
Type  H <return>  for immediate help.
 ...                                              
                                                  
l.12470 Clicking on the information icon ⓘ
                                             in the lower right-hand corner ...

? 
! Emergency stop.
 ...                                              
                                                  
l.12470 Clicking on the information icon ⓘ
                                             in the lower right-hand corner ...

!  ==> Fatal error occurred, no output PDF file produced!

```

It could be that the solution of this is outside the scope of this ticket (unicode configuration of Sage's LaTeX...). Then, a quick fix should be to replace  "information icon |info|" by "information icon (circled i)" in the rst file.


---

Comment by egourgoulhon created at 2019-10-29 10:48:02

Another point: shouldn't the files in `src/doc/en/reference/plot3d/threejs_examples` be updated so that the information icon appears when browsing https://doc.sagemath.org/html/en/reference/plot3d/threejs.html ?


---

Comment by git created at 2019-10-29 20:29:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by paulmasson created at 2019-10-29 20:31:25

Replying to [comment:10 egourgoulhon]:
> Replying to [comment:8 paulmasson]:
> > Found what appears to be a safer method. Try again, please.
> It could be that the solution of this is outside the scope of this ticket (unicode configuration of Sage's LaTeX...). Then, a quick fix should be to replace  "information icon |info|" by "information icon (circled i)" in the rst file. 
I simply removed the unicode. An information icon is universally understood in the age of mobile phones.


---

Comment by paulmasson created at 2019-10-29 20:32:54

Replying to [comment:11 egourgoulhon]:
> Another point: shouldn't the files in `src/doc/en/reference/plot3d/threejs_examples` be updated so that the information icon appears when browsing https://doc.sagemath.org/html/en/reference/plot3d/threejs.html ?
I was planning to do this just before the release of version 9 to get all the accumulated changes. If you prefer I can do an update now, either on this ticket or a new one.


---

Comment by paulmasson created at 2019-10-29 20:39:57

Replying to [comment:9 jipilab]:
> From what I can read about the camera info, it seems to encode it by a 4x4 matrix.
> I am wondering if it would be good to either give a reference to interpret the output or explain the relevant information there? What do you think?
This action is meant to be temporary until I understand better how you'll use the information in the future. I was planning to have this action show only what you will actually use, then add an option to the Three.js template to pass that information into the scene. Since it will change in the near future, I won't add any documentation about it until things are settled.

Created new [ticket](https://trac.sagemath.org/ticket/28672) for the enhancement.


---

Comment by egourgoulhon created at 2019-10-29 23:08:46

Replying to [comment:13 paulmasson]:
> I simply removed the unicode. An information icon is universally understood in the age of mobile phones.

Indeed! Thanks for the update.

Jean-Philippe, do you agree to set the ticket to positive review?


---

Comment by jipilab created at 2019-10-30 17:17:40

Replying to [comment:16 egourgoulhon]:
> Replying to [comment:13 paulmasson]:
> > I simply removed the unicode. An information icon is universally understood in the age of mobile phones.
> 
> Indeed! Thanks for the update.
> 
> Jean-Philippe, do you agree to set the ticket to positive review?

Yes, [comment:15 the plan in this comment15] sounds good. I had a try yesterday with this code and I can directly use the 4x4 matrix in order to reproduce the same output: Great! It seems like I don't need the full matrix but just the first 3x3 top submatrix, but I'd like to keep as it is now, so that we can understand a bit more as paulmasson suggested.

So yes, it looks good to go, I agree to the positive review.


---

Comment by egourgoulhon created at 2019-10-30 21:42:01

Replying to [comment:14 paulmasson]:
> Replying to [comment:11 egourgoulhon]:
> > Another point: shouldn't the files in `src/doc/en/reference/plot3d/threejs_examples` be updated so that the information icon appears when browsing https://doc.sagemath.org/html/en/reference/plot3d/threejs.html ?
> I was planning to do this just before the release of version 9 to get all the accumulated changes. 

OK, this makes sense.


---

Comment by egourgoulhon created at 2019-10-30 21:45:02

Thanks!


---

Comment by egourgoulhon created at 2019-10-30 21:45:02

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-10-31 22:40:43

Resolution: fixed
