# Issue 23767: Implement digraphs()

archive/issues_023767.json:
```json
{
    "body": "CC:  @dcoudert\n\nCurrently `graphs()` is an iterator that can be used to find an example of the smallest cardinality of a graph with given properties. It is unlogical that the same does not work for directed graphs.\n\nThere was no `copy` parameter for digraph generation. I added it and also made it a default, just like undirected graph generation already have. It is safer this way.\n\nAlso there was wrong indentation in the docstring.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/24004\n\n",
    "closed_at": "2017-10-20T09:15:11Z",
    "created_at": "2017-10-10T08:51:51Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Implement digraphs()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23767",
    "user": "https://github.com/jm58660"
}
```
CC:  @dcoudert

Currently `graphs()` is an iterator that can be used to find an example of the smallest cardinality of a graph with given properties. It is unlogical that the same does not work for directed graphs.

There was no `copy` parameter for digraph generation. I added it and also made it a default, just like undirected graph generation already have. It is safer this way.

Also there was wrong indentation in the docstring.


Issue created by migration from https://trac.sagemath.org/ticket/24004





---

archive/issue_comments_332616.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-10-10T11:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23767#issuecomment-332616",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_332617.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-10-10T11:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23767#issuecomment-332617",
    "user": "https://github.com/jm58660"
}
```

New commits:



---

archive/issue_comments_332618.json:
```json
{
    "body": "What you did is correct and more than useful. Thanks. However, the generator is not working as expected. For instance:\n\n```\nsage: for d in digraphs(4, property=lambda x:x.is_strongly_connected()):\n....:     print d.order(),d.edges()\n....:     \nsage: \n```\n\nAlso, the documentation of the `canaug_traverse_vert` and `canaug_traverse_edge` methods in `graph_generators.py` must be updated (many input parameters are not documented). You could do it in this patch.",
    "created_at": "2017-10-10T12:37:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23767#issuecomment-332618",
    "user": "https://github.com/dcoudert"
}
```

What you did is correct and more than useful. Thanks. However, the generator is not working as expected. For instance:

```
sage: for d in digraphs(4, property=lambda x:x.is_strongly_connected()):
....:     print d.order(),d.edges()
....:     
sage: 
```

Also, the documentation of the `canaug_traverse_vert` and `canaug_traverse_edge` methods in `graph_generators.py` must be updated (many input parameters are not documented). You could do it in this patch.



---

archive/issue_comments_332619.json:
```json
{
    "body": "\"If for any graph G satisfying the property, every subgraph, obtained from G by deleting one edge - -\", says the documentation. That is, the generation works only for \"hereditary\" properties.\n\nThis is actually somewhat complicated area. An example:\n\nEvery graph can be dismantled by removing one vertex a time until the single vertex graph is left, so every graph can be built by adding one vertex a time. Now let's suppose you optimize and only add vertex `i` if the degree of it is at least the degree of vertex `i-1`. It works, but if you generate connected graphs, it wont, as there is one 6-vertex graph that will not be generated.\n\nThe input for `canaug_traverse_*` seems frightening... Not sure if I can handle it yet.",
    "created_at": "2017-10-10T12:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23767#issuecomment-332619",
    "user": "https://github.com/jm58660"
}
```

"If for any graph G satisfying the property, every subgraph, obtained from G by deleting one edge - -", says the documentation. That is, the generation works only for "hereditary" properties.

This is actually somewhat complicated area. An example:

Every graph can be dismantled by removing one vertex a time until the single vertex graph is left, so every graph can be built by adding one vertex a time. Now let's suppose you optimize and only add vertex `i` if the degree of it is at least the degree of vertex `i-1`. It works, but if you generate connected graphs, it wont, as there is one 6-vertex graph that will not be generated.

The input for `canaug_traverse_*` seems frightening... Not sure if I can handle it yet.



---

archive/issue_comments_332620.json:
```json
{
    "body": "There are solution \u00e0 la `graphs.nauty_geng` that can be used. On the webpage of nauty, http://pallini.di.uniroma1.it/, the user's guide indicate that `directg` generates small digraphs with given underlying graph, and that `watercluster2` is a faster alternative to `directg` written by Gunnar Brinkmann. We might use such implementation do generate digraphs with non hereditary properties (`nauty_geng` can generate biconnected graphs).\nOf course, this is for another ticket.\n\nI also propose to let the improvement of the documentations of `canaug_traverse_*` for another ticket. \n\nSince the patch passes all tests and that the documentation is nicer, I give positive review.",
    "created_at": "2017-10-10T13:19:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23767#issuecomment-332620",
    "user": "https://github.com/dcoudert"
}
```

There are solution à la `graphs.nauty_geng` that can be used. On the webpage of nauty, http://pallini.di.uniroma1.it/, the user's guide indicate that `directg` generates small digraphs with given underlying graph, and that `watercluster2` is a faster alternative to `directg` written by Gunnar Brinkmann. We might use such implementation do generate digraphs with non hereditary properties (`nauty_geng` can generate biconnected graphs).
Of course, this is for another ticket.

I also propose to let the improvement of the documentations of `canaug_traverse_*` for another ticket. 

Since the patch passes all tests and that the documentation is nicer, I give positive review.



---

archive/issue_comments_332621.json:
```json
{
    "body": "Replying to [comment:5 dcoudert]:\n\n> There are solution \u00e0 la `graphs.nauty_geng` that can be used. On the webpage of nauty, http://pallini.di.uniroma1.it/, the user's guide indicate that `directg` generates small digraphs with given underlying graph, and that `watercluster2` is a faster alternative to `directg` written by Gunnar Brinkmann. We might use such implementation do generate digraphs with non hereditary properties (`nauty_geng` can generate biconnected graphs).\n\n\nInteresting. Can you summarize the main idea behind them? Orderly generation needs hereditary property by definition, but there may be other ways to do the augmentation. Adding a cycle when generating Eulerian graphs?\n\n> Since the patch passes all tests and that the documentation is nicer, I give positive review.\n\n\nOK. Did you intend to do it already, or are you running tests?",
    "created_at": "2017-10-11T05:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23767#issuecomment-332621",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:5 dcoudert]:

> There are solution à la `graphs.nauty_geng` that can be used. On the webpage of nauty, http://pallini.di.uniroma1.it/, the user's guide indicate that `directg` generates small digraphs with given underlying graph, and that `watercluster2` is a faster alternative to `directg` written by Gunnar Brinkmann. We might use such implementation do generate digraphs with non hereditary properties (`nauty_geng` can generate biconnected graphs).


Interesting. Can you summarize the main idea behind them? Orderly generation needs hereditary property by definition, but there may be other ways to do the augmentation. Adding a cycle when generating Eulerian graphs?

> Since the patch passes all tests and that the documentation is nicer, I give positive review.


OK. Did you intend to do it already, or are you running tests?



---

archive/issue_comments_332622.json:
```json
{
    "body": "> Interesting. Can you summarize the main idea behind them? Orderly generation needs hereditary property by definition, but there may be other ways to do the augmentation. Adding a cycle when generating Eulerian graphs?\n\n\nI don't know how it's working.\n \n> > Since the patch passes all tests and that the documentation is nicer, I give positive review.\n\n> \n> OK. Did you intend to do it already, or are you running tests?\n  \nI have compiled the code, run tests, build doc and display the html.",
    "created_at": "2017-10-11T06:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23767#issuecomment-332622",
    "user": "https://github.com/dcoudert"
}
```

> Interesting. Can you summarize the main idea behind them? Orderly generation needs hereditary property by definition, but there may be other ways to do the augmentation. Adding a cycle when generating Eulerian graphs?


I don't know how it's working.
 
> > Since the patch passes all tests and that the documentation is nicer, I give positive review.

> 
> OK. Did you intend to do it already, or are you running tests?
  
I have compiled the code, run tests, build doc and display the html.



---

archive/issue_comments_332623.json:
```json
{
    "body": "... and forgot to click the right button.",
    "created_at": "2017-10-11T17:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23767#issuecomment-332623",
    "user": "https://github.com/dcoudert"
}
```

... and forgot to click the right button.



---

archive/issue_comments_332624.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-11T17:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23767#issuecomment-332624",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_332625.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-20T09:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23767#issuecomment-332625",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_061031.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-20T09:15:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23767",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23767#event-61031"
}
```
