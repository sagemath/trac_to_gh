# Issue 10825: sqrt() as scalar multiple of QQbar vector

Issue created by migration from Trac.

Original creator: rbeezer

Original creation time: 2011-03-09 21:26:10

Assignee: robertwb

CC:  jason


```
sage: QQbar(sqrt(2))*vector(QQbar, [1,2])
(1.414213562373095?, 2.828427124746190?)

sage: vector(QQbar, [sqrt(2), 2*sqrt(2)])
(1.414213562373095?, 2.828427124746190?)

sage: sqrt(2)*vector(QQbar, [1,2])
<BOOM>
```


It seems sqrt() generally gets treated right as an element of QQbar, but as a scalar multiple of a vector over QQbar, it does not.


---

Comment by mmezzarobba created at 2014-02-02 12:04:55

Changing status from new to needs_review.


---

Comment by mmezzarobba created at 2014-02-02 12:04:55

This looks reasonable to me: in the first two cases, you are asking for an explicit conversion, but not in the last one. (Ok, it would probably be possible to make `sqrt(2)` return an element of an embedded quadratic field instead of a symbolic expression...)


---

Comment by rws created at 2014-03-24 17:23:38

Changing status from needs_review to needs_work.


---

Comment by rws created at 2014-03-24 17:23:38

Changing component from coercion to symbolics.


---

Comment by rws created at 2014-03-24 17:23:38

No, I don't think so. This is just an unknown use case for the detection of which the `NotImplementedError`s were placed. I have set the summary accordingly. After all, the minor flag is set.


---

Comment by mmezzarobba created at 2014-03-24 18:56:43

I don't understand what you mean. So let me restate my previous comment in a different way: In the first two examples, you are _converting_ `sqrt(2)` into an element of `QQbar`, either directly using the syntax `QQbar()`, or less directly by creating a vector. In the third one, you are multiplying an element of `SR` with a vector of elements of `QQbar`, which could trigger a _coercion_ if there existed one, but there is none, and IMO that's a good thing.


---

Comment by rws created at 2014-03-25 08:13:34

While I agree with this, there might be better solutions that don't leave the user with the impression that something perceived as possible is just "not implemented". A more informative error message would be a minimum improvement. I could imagine subclassing the symbolic ring e.g. by creating an AlgebraicSymbolicRing whose elements then could be coerced might be a way to improve the situation.


---

Comment by mmezzarobba created at 2014-03-25 08:35:51

Replying to [comment:4 rws]:
> A more informative error message would be a minimum improvement.

True.

> I could imagine subclassing the symbolic ring e.g. by creating an AlgebraicSymbolicRing whose elements then could be coerced might be a way to improve the situation.

Yes, perhaps. At least this is something to keep in mind if one tries to implement a "field of constant symbolic expression" as recently discussed on sage-devel. But I'm not sure it is worth the effort...
