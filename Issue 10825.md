# Issue 10825: sqrt() as scalar multiple of QQbar vector

archive/issues_010825.json:
```json
{
    "body": "Assignee: robertwb\n\nCC:  jason\n\n\n```\nsage: QQbar(sqrt(2))*vector(QQbar, [1,2])\n(1.414213562373095?, 2.828427124746190?)\n\nsage: vector(QQbar, [sqrt(2), 2*sqrt(2)])\n(1.414213562373095?, 2.828427124746190?)\n\nsage: sqrt(2)*vector(QQbar, [1,2])\n<BOOM>\n```\n\n\nIt seems sqrt() generally gets treated right as an element of QQbar, but as a scalar multiple of a vector over QQbar, it does not.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10897\n\n",
    "created_at": "2011-03-09T21:26:10Z",
    "labels": [
        "coercion",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "sqrt() as scalar multiple of QQbar vector",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10825",
    "user": "rbeezer"
}
```
Assignee: robertwb

CC:  jason


```
sage: QQbar(sqrt(2))*vector(QQbar, [1,2])
(1.414213562373095?, 2.828427124746190?)

sage: vector(QQbar, [sqrt(2), 2*sqrt(2)])
(1.414213562373095?, 2.828427124746190?)

sage: sqrt(2)*vector(QQbar, [1,2])
<BOOM>
```


It seems sqrt() generally gets treated right as an element of QQbar, but as a scalar multiple of a vector over QQbar, it does not.

Issue created by migration from https://trac.sagemath.org/ticket/10897





---

archive/issue_comments_114641.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-02-02T12:04:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10825#issuecomment-114641",
    "user": "mmezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_114642.json:
```json
{
    "body": "This looks reasonable to me: in the first two cases, you are asking for an explicit conversion, but not in the last one. (Ok, it would probably be possible to make `sqrt(2)` return an element of an embedded quadratic field instead of a symbolic expression...)",
    "created_at": "2014-02-02T12:04:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10825#issuecomment-114642",
    "user": "mmezzarobba"
}
```

This looks reasonable to me: in the first two cases, you are asking for an explicit conversion, but not in the last one. (Ok, it would probably be possible to make `sqrt(2)` return an element of an embedded quadratic field instead of a symbolic expression...)



---

archive/issue_comments_114643.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-03-24T17:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10825#issuecomment-114643",
    "user": "rws"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_114644.json:
```json
{
    "body": "Changing component from coercion to symbolics.",
    "created_at": "2014-03-24T17:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10825#issuecomment-114644",
    "user": "rws"
}
```

Changing component from coercion to symbolics.



---

archive/issue_comments_114645.json:
```json
{
    "body": "No, I don't think so. This is just an unknown use case for the detection of which the `NotImplementedError`s were placed. I have set the summary accordingly. After all, the minor flag is set.",
    "created_at": "2014-03-24T17:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10825#issuecomment-114645",
    "user": "rws"
}
```

No, I don't think so. This is just an unknown use case for the detection of which the `NotImplementedError`s were placed. I have set the summary accordingly. After all, the minor flag is set.



---

archive/issue_comments_114646.json:
```json
{
    "body": "I don't understand what you mean. So let me restate my previous comment in a different way: In the first two examples, you are *converting* `sqrt(2)` into an element of `QQbar`, either directly using the syntax `QQbar()`, or less directly by creating a vector. In the third one, you are multiplying an element of `SR` with a vector of elements of `QQbar`, which could trigger a *coercion* if there existed one, but there is none, and IMO that's a good thing.",
    "created_at": "2014-03-24T18:56:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10825#issuecomment-114646",
    "user": "mmezzarobba"
}
```

I don't understand what you mean. So let me restate my previous comment in a different way: In the first two examples, you are *converting* `sqrt(2)` into an element of `QQbar`, either directly using the syntax `QQbar()`, or less directly by creating a vector. In the third one, you are multiplying an element of `SR` with a vector of elements of `QQbar`, which could trigger a *coercion* if there existed one, but there is none, and IMO that's a good thing.



---

archive/issue_comments_114647.json:
```json
{
    "body": "While I agree with this, there might be better solutions that don't leave the user with the impression that something perceived as possible is just \"not implemented\". A more informative error message would be a minimum improvement. I could imagine subclassing the symbolic ring e.g. by creating an AlgebraicSymbolicRing whose elements then could be coerced might be a way to improve the situation.",
    "created_at": "2014-03-25T08:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10825#issuecomment-114647",
    "user": "rws"
}
```

While I agree with this, there might be better solutions that don't leave the user with the impression that something perceived as possible is just "not implemented". A more informative error message would be a minimum improvement. I could imagine subclassing the symbolic ring e.g. by creating an AlgebraicSymbolicRing whose elements then could be coerced might be a way to improve the situation.



---

archive/issue_comments_114648.json:
```json
{
    "body": "Replying to [comment:4 rws]:\n> A more informative error message would be a minimum improvement.\n\nTrue.\n\n> I could imagine subclassing the symbolic ring e.g. by creating an AlgebraicSymbolicRing whose elements then could be coerced might be a way to improve the situation.\n\nYes, perhaps. At least this is something to keep in mind if one tries to implement a \"field of constant symbolic expression\" as recently discussed on sage-devel. But I'm not sure it is worth the effort...",
    "created_at": "2014-03-25T08:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10825#issuecomment-114648",
    "user": "mmezzarobba"
}
```

Replying to [comment:4 rws]:
> A more informative error message would be a minimum improvement.

True.

> I could imagine subclassing the symbolic ring e.g. by creating an AlgebraicSymbolicRing whose elements then could be coerced might be a way to improve the situation.

Yes, perhaps. At least this is something to keep in mind if one tries to implement a "field of constant symbolic expression" as recently discussed on sage-devel. But I'm not sure it is worth the effort...
