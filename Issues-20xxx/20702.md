# Issue 20702: doc fails to build in 7.3.beta1 if `typing` is installed

archive/issues_020465.json:
```json
{
    "body": "In #20545 `sage_autodoc.py` has been made a little bit closer to `sphinx` original `autodoc.py` this included this piece of code\n\n```\ntry:\n    import typing\nexcept ImportError:\n    typing = None\n```\nImporting `typing` in python2 will cause failure due to the lack of `kwonlyargcount` in that version of python as reported upstream in [https://github.com/sphinx-doc/sphinx/issues/2470](https://github.com/sphinx-doc/sphinx/issues/2470). Upstream has a fix and we should use it.\n\nCC:  @jdemeyer\n\nBranch/Commit: 46d5003014a29ae3e0b7d95680a3b46b6a33075a\n\nReviewer: Travis Scrimshaw\n\nAuthor: Fran\u00e7ois Bissey\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20702\n\n",
    "closed_at": "2016-05-31T07:29:35Z",
    "created_at": "2016-05-29T08:30:23Z",
    "labels": [
        "component: documentation",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "doc fails to build in 7.3.beta1 if `typing` is installed",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20702",
    "user": "https://github.com/kiwifb"
}
```
In #20545 `sage_autodoc.py` has been made a little bit closer to `sphinx` original `autodoc.py` this included this piece of code

```
try:
    import typing
except ImportError:
    typing = None
```
Importing `typing` in python2 will cause failure due to the lack of `kwonlyargcount` in that version of python as reported upstream in [https://github.com/sphinx-doc/sphinx/issues/2470](https://github.com/sphinx-doc/sphinx/issues/2470). Upstream has a fix and we should use it.

CC:  @jdemeyer

Branch/Commit: 46d5003014a29ae3e0b7d95680a3b46b6a33075a

Reviewer: Travis Scrimshaw

Author: François Bissey

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20702





---

archive/issue_comments_371794.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-05-29T08:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371794",
    "user": "https://github.com/kiwifb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_371795.json:
```json
{
    "body": "Changing commit from \"\" to \"46d5003014a29ae3e0b7d95680a3b46b6a33075a\"",
    "created_at": "2016-05-29T08:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371795",
    "user": "https://github.com/kiwifb"
}
```

Changing commit from "" to "46d5003014a29ae3e0b7d95680a3b46b6a33075a"



---

archive/issue_comments_371796.json:
```json
{
    "body": "Changing author from \"\" to \"fran\u00e7ois bissey\"",
    "created_at": "2016-05-29T08:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371796",
    "user": "https://github.com/kiwifb"
}
```

Changing author from "" to "françois bissey"



---

archive/issue_comments_371797.json:
```json
{
    "body": "Changing reporter from \"fbissey\" to \"bissey\"",
    "created_at": "2016-05-29T08:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371797",
    "user": "https://github.com/kiwifb"
}
```

Changing reporter from "fbissey" to "bissey"



---

archive/issue_comments_371798.json:
```json
{
    "body": "Changing branch from \"\" to \"u/fbissey/typing\"",
    "created_at": "2016-05-29T08:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371798",
    "user": "https://github.com/kiwifb"
}
```

Changing branch from "" to "u/fbissey/typing"



---

archive/issue_comments_371799.json:
```json
{
    "body": "<a id='comment:1'></a>\nReproduce fix from [https://github.com/sphinx-doc/sphinx/commit/20b3da5cf6aa4917301b2db2259bc78c3e20a122](https://github.com/sphinx-doc/sphinx/commit/20b3da5cf6aa4917301b2db2259bc78c3e20a122)\n\n---\nNew commits:\n|                                                                                                                                          |                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[46d5003](https://github.com/sagemath/sagetrac-mirror/commit/46d5003014a29ae3e0b7d95680a3b46b6a33075a)|`backport fix for sphinx issue 2470 to sage_autodoc.py`|",
    "created_at": "2016-05-29T08:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371799",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:1'></a>
Reproduce fix from [https://github.com/sphinx-doc/sphinx/commit/20b3da5cf6aa4917301b2db2259bc78c3e20a122](https://github.com/sphinx-doc/sphinx/commit/20b3da5cf6aa4917301b2db2259bc78c3e20a122)

---
New commits:
|                                                                                                                                          |                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[46d5003](https://github.com/sagemath/sagetrac-mirror/commit/46d5003014a29ae3e0b7d95680a3b46b6a33075a)|`backport fix for sphinx issue 2470 to sage_autodoc.py`|



---

archive/issue_comments_371800.json:
```json
{
    "body": "Changing reporter from \"bissey\" to \"fbissey\"",
    "created_at": "2016-05-29T08:38:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371800",
    "user": "https://github.com/kiwifb"
}
```

Changing reporter from "bissey" to "fbissey"



---

archive/issue_comments_371801.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2016-05-29T10:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371801",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_371802.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-05-29T10:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371802",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_371803.json:
```json
{
    "body": "<a id='comment:3'></a>\nWorks for them and works for me.",
    "created_at": "2016-05-29T10:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371803",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
Works for them and works for me.



---

archive/issue_comments_371804.json:
```json
{
    "body": "Changing author from \"fran\u00e7ois bissey\" to \"Fran\u00e7ois Bissey\"",
    "created_at": "2016-05-29T10:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371804",
    "user": "https://github.com/tscrim"
}
```

Changing author from "françois bissey" to "François Bissey"



---

archive/issue_comments_371805.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-05-31T07:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371805",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_371806.json:
```json
{
    "body": "Changing branch from \"u/fbissey/typing\" to \"46d5003014a29ae3e0b7d95680a3b46b6a33075a\"",
    "created_at": "2016-05-31T07:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20702#issuecomment-371806",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/fbissey/typing" to "46d5003014a29ae3e0b7d95680a3b46b6a33075a"



---

archive/issue_events_071123.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-31T07:29:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20702",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20702#event-71123"
}
```
