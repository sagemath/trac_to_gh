# Issue 20402: Make subword complexes compatible with  real reflection groups

archive/issues_020165.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThe subword complex code was written and optimized for real reflection groups, but then made its way into Sage for Coxeter groups. This ticket is to make it handle both.\n\nDepends on #20521\n\nCC:  @tscrim @fchapoton @nthiery @sagetrac-vripoll\n\nComponent: **combinatorics**\n\nKeywords: **reflection group, coxeter group, subword complex, days80**\n\nAuthor: **Christian Stump**\n\nBranch/Commit: **[`71eba72`](https://github.com/sagemath/sagetrac-mirror/commit/71eba72e896ba17314bcab6965f33005d02a26e4)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton, Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20402_\n\n",
    "closed_at": "2016-05-05T09:27:15Z",
    "created_at": "2016-04-09T19:10:41Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make subword complexes compatible with  real reflection groups",
    "type": "issue",
    "updated_at": "2016-05-05T09:27:15Z",
    "url": "https://github.com/sagemath/sage/issues/20402",
    "user": "https://github.com/stumpc5"
}
```
<div id="comment:0"></div>

The subword complex code was written and optimized for real reflection groups, but then made its way into Sage for Coxeter groups. This ticket is to make it handle both.

Depends on #20521

CC:  @tscrim @fchapoton @nthiery @sagetrac-vripoll

Component: **combinatorics**

Keywords: **reflection group, coxeter group, subword complex, days80**

Author: **Christian Stump**

Branch/Commit: **[`71eba72`](https://github.com/sagemath/sagetrac-mirror/commit/71eba72e896ba17314bcab6965f33005d02a26e4)**

Reviewer: **Frédéric Chapoton, Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/20402_





---

archive/issue_events_285220.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2016-04-09T19:10:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285220"
}
```



---

archive/issue_events_285221.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2016-04-09T19:10:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285221"
}
```



---

archive/issue_events_285222.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2016-04-09T19:10:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285222"
}
```



---

archive/issue_events_285223.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2016-04-09T19:10:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285223"
}
```



---

archive/issue_comments_294514.json:
```json
{
    "body": "Dependencies: **#11187**",
    "created_at": "2016-04-09T19:16:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294514",
    "user": "https://github.com/stumpc5"
}
```

Dependencies: **#11187**



---

archive/issue_comments_294515.json:
```json
{
    "body": "Branch: **[u/stumpc5/20402](https://github.com/sagemath/sagetrac-mirror/tree/u/stumpc5/20402)**",
    "created_at": "2016-04-09T20:57:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294515",
    "user": "https://github.com/stumpc5"
}
```

Branch: **[u/stumpc5/20402](https://github.com/sagemath/sagetrac-mirror/tree/u/stumpc5/20402)**



---

archive/issue_comments_294516.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d70fabf62f9e613ffc9bf488e0dd3e9698ce02c\"><code>2d70fab</code></a></td><td><code>trac #11187 more doc tuning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a04b9c81eec89e10015c090128127ac9c4810eba\"><code>a04b9c8</code></a></td><td><code>Merge branch 'u/chapoton/11187' of trac.sagemath.org:sage into u/tscrim/reflection_groups-11187</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c96d33361f4cf9fbd99962ce951dfd82ff1a8fa\"><code>9c96d33</code></a></td><td><code>added ST type casting for real groups + documentation of crg's</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b1f2b0353e134ee7413a9b3dee3ffa3347ed7ae\"><code>5b1f2b0</code></a></td><td><code>Merge branch 'u/stumpc5/11187' of trac.sagemath.org:sage into u/tscrim/reflection_groups-11187</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4e7a617669d890c3332d4f76b2a61b7574f67c9\"><code>d4e7a61</code></a></td><td><code>working through the doctests for complex groups</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7b8c7d6dfe2a7872d0ebb89da15cb89a2effda9\"><code>d7b8c7d</code></a></td><td><code>fixing all doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c9d700e9bb25a5b88f2e509be84851b8c99431d\"><code>7c9d700</code></a></td><td><code>Merge branch 'u/stumpc5/11187' into u/stumpc5/20402</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85d0ce105a549ef8cad40df6bf8f0d8fed3122cf\"><code>85d0ce1</code></a></td><td><code>fixed a typo in the doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/521d50b4da416ff471568827ea812c471354558c\"><code>521d50b</code></a></td><td><code>Merge branch 'u/stumpc5/11187' into u/stumpc5/20402</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ae3b7f793ad96f9f39999b158398434009435da\"><code>5ae3b7f</code></a></td><td><code>marked a missing doctest + fixed a bug to show type C2</code></td></tr></table>\n",
    "created_at": "2016-04-10T14:03:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294516",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d70fabf62f9e613ffc9bf488e0dd3e9698ce02c"><code>2d70fab</code></a></td><td><code>trac #11187 more doc tuning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a04b9c81eec89e10015c090128127ac9c4810eba"><code>a04b9c8</code></a></td><td><code>Merge branch 'u/chapoton/11187' of trac.sagemath.org:sage into u/tscrim/reflection_groups-11187</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c96d33361f4cf9fbd99962ce951dfd82ff1a8fa"><code>9c96d33</code></a></td><td><code>added ST type casting for real groups + documentation of crg's</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b1f2b0353e134ee7413a9b3dee3ffa3347ed7ae"><code>5b1f2b0</code></a></td><td><code>Merge branch 'u/stumpc5/11187' of trac.sagemath.org:sage into u/tscrim/reflection_groups-11187</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4e7a617669d890c3332d4f76b2a61b7574f67c9"><code>d4e7a61</code></a></td><td><code>working through the doctests for complex groups</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7b8c7d6dfe2a7872d0ebb89da15cb89a2effda9"><code>d7b8c7d</code></a></td><td><code>fixing all doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c9d700e9bb25a5b88f2e509be84851b8c99431d"><code>7c9d700</code></a></td><td><code>Merge branch 'u/stumpc5/11187' into u/stumpc5/20402</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85d0ce105a549ef8cad40df6bf8f0d8fed3122cf"><code>85d0ce1</code></a></td><td><code>fixed a typo in the doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/521d50b4da416ff471568827ea812c471354558c"><code>521d50b</code></a></td><td><code>Merge branch 'u/stumpc5/11187' into u/stumpc5/20402</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ae3b7f793ad96f9f39999b158398434009435da"><code>5ae3b7f</code></a></td><td><code>marked a missing doctest + fixed a bug to show type C2</code></td></tr></table>




---

archive/issue_comments_294517.json:
```json
{
    "body": "Commit: **[`5ae3b7f`](https://github.com/sagemath/sagetrac-mirror/commit/5ae3b7f793ad96f9f39999b158398434009435da)**",
    "created_at": "2016-04-10T14:03:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294517",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`5ae3b7f`](https://github.com/sagemath/sagetrac-mirror/commit/5ae3b7f793ad96f9f39999b158398434009435da)**



---

archive/issue_comments_294518.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72082b119626d3b1477cdda10c1a4ac24192716b\"><code>72082b1</code></a></td><td><code>fixed a bug in noncrossing partition lattice and reflection/absolute order</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/844f4506ca67cb2ae69e04ca71960cb08f6b0d33\"><code>844f450</code></a></td><td><code>Merge branch 'u/stumpc5/11187' of trac.sagemath.org:sage into u/tscrim/reflection_groups-11187</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4256691756e16c64b6f2f855367f5afb911a00c\"><code>d425669</code></a></td><td><code>Fixing failures and some other things.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87cd989b6d1dd7e5e8704e5c68d4ba2240474234\"><code>87cd989</code></a></td><td><code>fixed one doctest in category complex reflection group</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05a8ab4201355f554d4c7e0916b1f90c1ab1ff6d\"><code>05a8ab4</code></a></td><td><code>11187: fixed trivial doctest failures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32bf1aeb9a730335d0f17744349ef26838a3397a\"><code>32bf1ae</code></a></td><td><code>11187: cleanup of the organization of the various axioms (WellGenerated, ...) for complex/generalized reflection groups + documentation improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73276caaa350dcfb7c00999f0a4b84626f19c75a\"><code>73276ca</code></a></td><td><code>Merge branch 'u/tscrim/11187' of trac.sagemath.org:sage into t/11187/11187</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e074050131cd483022c5783f749cbce3ac522ae5\"><code>e074050</code></a></td><td><code>merged</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b572c74c3a4db2909bea5c538c8be26089068fc6\"><code>b572c74</code></a></td><td><code>fixed a missing doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df55cdd653d443594a0726b4e1e6e97c539fb0e9\"><code>df55cdd</code></a></td><td><code>merged the newest version of 11187</code></td></tr></table>\n",
    "created_at": "2016-04-10T18:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294518",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72082b119626d3b1477cdda10c1a4ac24192716b"><code>72082b1</code></a></td><td><code>fixed a bug in noncrossing partition lattice and reflection/absolute order</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/844f4506ca67cb2ae69e04ca71960cb08f6b0d33"><code>844f450</code></a></td><td><code>Merge branch 'u/stumpc5/11187' of trac.sagemath.org:sage into u/tscrim/reflection_groups-11187</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4256691756e16c64b6f2f855367f5afb911a00c"><code>d425669</code></a></td><td><code>Fixing failures and some other things.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87cd989b6d1dd7e5e8704e5c68d4ba2240474234"><code>87cd989</code></a></td><td><code>fixed one doctest in category complex reflection group</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05a8ab4201355f554d4c7e0916b1f90c1ab1ff6d"><code>05a8ab4</code></a></td><td><code>11187: fixed trivial doctest failures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32bf1aeb9a730335d0f17744349ef26838a3397a"><code>32bf1ae</code></a></td><td><code>11187: cleanup of the organization of the various axioms (WellGenerated, ...) for complex/generalized reflection groups + documentation improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73276caaa350dcfb7c00999f0a4b84626f19c75a"><code>73276ca</code></a></td><td><code>Merge branch 'u/tscrim/11187' of trac.sagemath.org:sage into t/11187/11187</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e074050131cd483022c5783f749cbce3ac522ae5"><code>e074050</code></a></td><td><code>merged</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b572c74c3a4db2909bea5c538c8be26089068fc6"><code>b572c74</code></a></td><td><code>fixed a missing doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df55cdd653d443594a0726b4e1e6e97c539fb0e9"><code>df55cdd</code></a></td><td><code>merged the newest version of 11187</code></td></tr></table>




---

archive/issue_comments_294519.json:
```json
{
    "body": "Changed commit from **[`5ae3b7f`](https://github.com/sagemath/sagetrac-mirror/commit/5ae3b7f793ad96f9f39999b158398434009435da)** to **[`df55cdd`](https://github.com/sagemath/sagetrac-mirror/commit/df55cdd653d443594a0726b4e1e6e97c539fb0e9)**",
    "created_at": "2016-04-10T18:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294519",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5ae3b7f`](https://github.com/sagemath/sagetrac-mirror/commit/5ae3b7f793ad96f9f39999b158398434009435da)** to **[`df55cdd`](https://github.com/sagemath/sagetrac-mirror/commit/df55cdd653d443594a0726b4e1e6e97c539fb0e9)**



---

archive/issue_comments_294520.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19271510dd0f4b3ea6480fb9e6d15d70383440fc\"><code>1927151</code></a></td><td><code>fixed a bug in simple_root_index</code></td></tr></table>\n",
    "created_at": "2016-04-10T19:05:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294520",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19271510dd0f4b3ea6480fb9e6d15d70383440fc"><code>1927151</code></a></td><td><code>fixed a bug in simple_root_index</code></td></tr></table>




---

archive/issue_comments_294521.json:
```json
{
    "body": "Changed commit from **[`df55cdd`](https://github.com/sagemath/sagetrac-mirror/commit/df55cdd653d443594a0726b4e1e6e97c539fb0e9)** to **[`1927151`](https://github.com/sagemath/sagetrac-mirror/commit/19271510dd0f4b3ea6480fb9e6d15d70383440fc)**",
    "created_at": "2016-04-10T19:05:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294521",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`df55cdd`](https://github.com/sagemath/sagetrac-mirror/commit/df55cdd653d443594a0726b4e1e6e97c539fb0e9)** to **[`1927151`](https://github.com/sagemath/sagetrac-mirror/commit/19271510dd0f4b3ea6480fb9e6d15d70383440fc)**



---

archive/issue_comments_294522.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThis ticket seems to be ready once #11187 has positive review.",
    "created_at": "2016-04-10T19:07:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294522",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:6" align="right">comment:6</div>

This ticket seems to be ready once #11187 has positive review.



---

archive/issue_comments_294523.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThis is failing:\n\n```\nsage: a3r=ReflectionGroup(['A',3], base_ring=QQ)\nsage: sr=SubwordComplex([1,3,2,1,3,2,1,3,2],a3r.w0)\nsage: fr=sr.greedy_facet()\nsage: fr.extended_weight_configuration()\n```",
    "created_at": "2016-04-11T09:21:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294523",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

This is failing:

```
sage: a3r=ReflectionGroup(['A',3], base_ring=QQ)
sage: sr=SubwordComplex([1,3,2,1,3,2,1,3,2],a3r.w0)
sage: fr=sr.greedy_facet()
sage: fr.extended_weight_configuration()
```



---

archive/issue_comments_294524.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0becba3698653fedcfa8547d44fc7d45fb2fecb3\"><code>0becba3</code></a></td><td><code>Merge branch 'public/11187' of git://trac.sagemath.org/sage into u/stumpc5/20396</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8927ab98d9aa88610774567e4bde0ce8ec8c14b9\"><code>8927ab9</code></a></td><td><code>matrix action is on the right!</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb2ea75a566bccb38fce37ba72f593539cc1c1a5\"><code>eb2ea75</code></a></td><td><code>cleaned the reduced word code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fbba185faebad9f9d39028cd6002fee9315eb00\"><code>6fbba18</code></a></td><td><code>undo the change to repr methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8497f5d6aebbd8dd640ea41ffbd904c47886e34e\"><code>8497f5d</code></a></td><td><code>first try to skip elements in the iteration, too slow</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/def701588736edda81a86ddd1a9cbdbc849657be\"><code>def7015</code></a></td><td><code>reorganized the invariant form (still missing an improvement) + fixed two doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab73bc35b90d0b51f1304a9c3368468a2323fe34\"><code>ab73bc3</code></a></td><td><code>Merge branch 'u/stumpc5/11187' into u/stumpc5/20402</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5a2c8d029450ce3c94b7c14337aaa62c6e0b693\"><code>b5a2c8d</code></a></td><td><code>moved all examles back to ReflectionGroup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e36ddad9e601f87d42c0488c2a75f13a0fee6ac9\"><code>e36ddad</code></a></td><td><code>added fundamental_weight to coxetergroup implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6bc459825560776ea95c8d3e34d32b2fb78d059\"><code>d6bc459</code></a></td><td><code>made all doctests work, but I used a dirty hack to solve the weight configuration</code></td></tr></table>\n",
    "created_at": "2016-04-13T11:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294524",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0becba3698653fedcfa8547d44fc7d45fb2fecb3"><code>0becba3</code></a></td><td><code>Merge branch 'public/11187' of git://trac.sagemath.org/sage into u/stumpc5/20396</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8927ab98d9aa88610774567e4bde0ce8ec8c14b9"><code>8927ab9</code></a></td><td><code>matrix action is on the right!</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb2ea75a566bccb38fce37ba72f593539cc1c1a5"><code>eb2ea75</code></a></td><td><code>cleaned the reduced word code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fbba185faebad9f9d39028cd6002fee9315eb00"><code>6fbba18</code></a></td><td><code>undo the change to repr methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8497f5d6aebbd8dd640ea41ffbd904c47886e34e"><code>8497f5d</code></a></td><td><code>first try to skip elements in the iteration, too slow</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/def701588736edda81a86ddd1a9cbdbc849657be"><code>def7015</code></a></td><td><code>reorganized the invariant form (still missing an improvement) + fixed two doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab73bc35b90d0b51f1304a9c3368468a2323fe34"><code>ab73bc3</code></a></td><td><code>Merge branch 'u/stumpc5/11187' into u/stumpc5/20402</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5a2c8d029450ce3c94b7c14337aaa62c6e0b693"><code>b5a2c8d</code></a></td><td><code>moved all examles back to ReflectionGroup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e36ddad9e601f87d42c0488c2a75f13a0fee6ac9"><code>e36ddad</code></a></td><td><code>added fundamental_weight to coxetergroup implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6bc459825560776ea95c8d3e34d32b2fb78d059"><code>d6bc459</code></a></td><td><code>made all doctests work, but I used a dirty hack to solve the weight configuration</code></td></tr></table>




---

archive/issue_comments_294525.json:
```json
{
    "body": "Changed commit from **[`1927151`](https://github.com/sagemath/sagetrac-mirror/commit/19271510dd0f4b3ea6480fb9e6d15d70383440fc)** to **[`d6bc459`](https://github.com/sagemath/sagetrac-mirror/commit/d6bc459825560776ea95c8d3e34d32b2fb78d059)**",
    "created_at": "2016-04-13T11:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294525",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1927151`](https://github.com/sagemath/sagetrac-mirror/commit/19271510dd0f4b3ea6480fb9e6d15d70383440fc)** to **[`d6bc459`](https://github.com/sagemath/sagetrac-mirror/commit/d6bc459825560776ea95c8d3e34d32b2fb78d059)**



---

archive/issue_comments_294526.json:
```json
{
    "body": "Changed commit from **[`d6bc459`](https://github.com/sagemath/sagetrac-mirror/commit/d6bc459825560776ea95c8d3e34d32b2fb78d059)** to **[`a1b3d3b`](https://github.com/sagemath/sagetrac-mirror/commit/a1b3d3ba5055e4217d8cecd5b09bd51b078802f2)**",
    "created_at": "2016-04-20T07:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294526",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d6bc459`](https://github.com/sagemath/sagetrac-mirror/commit/d6bc459825560776ea95c8d3e34d32b2fb78d059)** to **[`a1b3d3b`](https://github.com/sagemath/sagetrac-mirror/commit/a1b3d3ba5055e4217d8cecd5b09bd51b078802f2)**



---

archive/issue_comments_294527.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc0106628d58cb263866b9cd601696ea71f18e9f\"><code>dc01066</code></a></td><td><code>started to add 'optional - gap3'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd0c9cc616a03de20a12aba530c96e73f8f60911\"><code>fd0c9cc</code></a></td><td><code>added optional gap3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1537a795f6d7a86f8c3a7a79e86d4b31405de323\"><code>1537a79</code></a></td><td><code>added optional gap3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a60cf31d47777353bcae92665d5e5e739fc02a29\"><code>a60cf31</code></a></td><td><code>added some missing optional gap3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/feebf975713fcb5051f55d47cbe090de45fe5a7d\"><code>feebf97</code></a></td><td><code>finalized the invariant form</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4955d68d9e4dbde2d1425afbae36e619c2d6ba14\"><code>4955d68</code></a></td><td><code>added the missing optional gap3 in the cython file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5c43bcba449039892cecb0d18238b4bf87e8a7f\"><code>c5c43bc</code></a></td><td><code>the next round of optional gap3 insertions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/244e6ff6b516b768c01031817dacc75c05ea889a\"><code>244e6ff</code></a></td><td><code>Merge branch 'public/11187' of trac.sagemath.org:sage into public/reflection_groups-11187</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f541349eae7b8b3b6a61c57aaafd6bb8c84b3265\"><code>f541349</code></a></td><td><code>Some last little beautification.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1b3d3ba5055e4217d8cecd5b09bd51b078802f2\"><code>a1b3d3b</code></a></td><td><code>Merge branch 'u/stumpc5/11187' into u/stumpc5/20402</code></td></tr></table>\n",
    "created_at": "2016-04-20T07:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294527",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc0106628d58cb263866b9cd601696ea71f18e9f"><code>dc01066</code></a></td><td><code>started to add 'optional - gap3'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd0c9cc616a03de20a12aba530c96e73f8f60911"><code>fd0c9cc</code></a></td><td><code>added optional gap3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1537a795f6d7a86f8c3a7a79e86d4b31405de323"><code>1537a79</code></a></td><td><code>added optional gap3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a60cf31d47777353bcae92665d5e5e739fc02a29"><code>a60cf31</code></a></td><td><code>added some missing optional gap3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/feebf975713fcb5051f55d47cbe090de45fe5a7d"><code>feebf97</code></a></td><td><code>finalized the invariant form</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4955d68d9e4dbde2d1425afbae36e619c2d6ba14"><code>4955d68</code></a></td><td><code>added the missing optional gap3 in the cython file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5c43bcba449039892cecb0d18238b4bf87e8a7f"><code>c5c43bc</code></a></td><td><code>the next round of optional gap3 insertions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/244e6ff6b516b768c01031817dacc75c05ea889a"><code>244e6ff</code></a></td><td><code>Merge branch 'public/11187' of trac.sagemath.org:sage into public/reflection_groups-11187</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f541349eae7b8b3b6a61c57aaafd6bb8c84b3265"><code>f541349</code></a></td><td><code>Some last little beautification.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1b3d3ba5055e4217d8cecd5b09bd51b078802f2"><code>a1b3d3b</code></a></td><td><code>Merge branch 'u/stumpc5/11187' into u/stumpc5/20402</code></td></tr></table>




---

archive/issue_comments_294528.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0db28d6c6e64818eb32fb9826ff7a41333c814d6\"><code>0db28d6</code></a></td><td><code>fixed doctests that have not been run last week!</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7afc02c78f5c0aa58d5b638e20c135678a3bec7e\"><code>7afc02c</code></a></td><td><code>Fixing doctests in combinat/root_system/coxeter_group.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02694256c73520e7f4dd80c455cdae133be858a7\"><code>0269425</code></a></td><td><code>Blanket fix bare except block.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b0ef927c17789f2dbeea432b8316f99d138cb88\"><code>9b0ef92</code></a></td><td><code>Making it an AttributeError.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87cdde051dabb9eb963dd3614aecdcd851363bb3\"><code>87cdde0</code></a></td><td><code>Merge branch 'public/11187' into u/stumpc5/20402</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d765204ab597ed2fd1570c2438d5fda3eb60192\"><code>8d76520</code></a></td><td><code>using a cached version self._number_of_reflections to avoid computing it again and again, expecially important in has_descent</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b6d895c865ebdb319de6d58e862e7ae1a1cb784\"><code>0b6d895</code></a></td><td><code>Merge branch 'develop' into public/11187</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e63d2ece579d1afd1df9c4afcf951407e6fbe36d\"><code>e63d2ec</code></a></td><td><code>Merge branch 'public/11187' into u/stumpc5/20402</code></td></tr></table>\n",
    "created_at": "2016-04-24T06:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294528",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0db28d6c6e64818eb32fb9826ff7a41333c814d6"><code>0db28d6</code></a></td><td><code>fixed doctests that have not been run last week!</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7afc02c78f5c0aa58d5b638e20c135678a3bec7e"><code>7afc02c</code></a></td><td><code>Fixing doctests in combinat/root_system/coxeter_group.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02694256c73520e7f4dd80c455cdae133be858a7"><code>0269425</code></a></td><td><code>Blanket fix bare except block.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b0ef927c17789f2dbeea432b8316f99d138cb88"><code>9b0ef92</code></a></td><td><code>Making it an AttributeError.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87cdde051dabb9eb963dd3614aecdcd851363bb3"><code>87cdde0</code></a></td><td><code>Merge branch 'public/11187' into u/stumpc5/20402</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d765204ab597ed2fd1570c2438d5fda3eb60192"><code>8d76520</code></a></td><td><code>using a cached version self._number_of_reflections to avoid computing it again and again, expecially important in has_descent</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b6d895c865ebdb319de6d58e862e7ae1a1cb784"><code>0b6d895</code></a></td><td><code>Merge branch 'develop' into public/11187</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e63d2ece579d1afd1df9c4afcf951407e6fbe36d"><code>e63d2ec</code></a></td><td><code>Merge branch 'public/11187' into u/stumpc5/20402</code></td></tr></table>




---

archive/issue_comments_294529.json:
```json
{
    "body": "Changed commit from **[`a1b3d3b`](https://github.com/sagemath/sagetrac-mirror/commit/a1b3d3ba5055e4217d8cecd5b09bd51b078802f2)** to **[`e63d2ec`](https://github.com/sagemath/sagetrac-mirror/commit/e63d2ece579d1afd1df9c4afcf951407e6fbe36d)**",
    "created_at": "2016-04-24T06:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294529",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a1b3d3b`](https://github.com/sagemath/sagetrac-mirror/commit/a1b3d3ba5055e4217d8cecd5b09bd51b078802f2)** to **[`e63d2ec`](https://github.com/sagemath/sagetrac-mirror/commit/e63d2ece579d1afd1df9c4afcf951407e6fbe36d)**



---

archive/issue_events_285224.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2016-04-25T10:03:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "title_is": "Make subword complexes compatible with  real reflection groups",
    "title_was": "Make real reflection group compatible with subword complex",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285224"
}
```



---

archive/issue_comments_294530.json:
```json
{
    "body": "Changed commit from **[`e63d2ec`](https://github.com/sagemath/sagetrac-mirror/commit/e63d2ece579d1afd1df9c4afcf951407e6fbe36d)** to **[`0b81cd6`](https://github.com/sagemath/sagetrac-mirror/commit/0b81cd6ccf77c652672ca75aa693123ca77bd93c)**",
    "created_at": "2016-04-25T10:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294530",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e63d2ec`](https://github.com/sagemath/sagetrac-mirror/commit/e63d2ece579d1afd1df9c4afcf951407e6fbe36d)** to **[`0b81cd6`](https://github.com/sagemath/sagetrac-mirror/commit/0b81cd6ccf77c652672ca75aa693123ca77bd93c)**



---

archive/issue_comments_294531.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bacaea70cc01123f2c4b0a2bad070d971721bf4\"><code>4bacaea</code></a></td><td><code>trivial typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc8a0aa14096fa1006e6aeea5da58304cd4c85d8\"><code>fc8a0aa</code></a></td><td><code>replaced the wrongly assumed right action by a left action</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef6dbace9fbe0e4c4dcca656cb514cf0f89b3ebd\"><code>ef6dbac</code></a></td><td><code>fixed the action on root indices with left and right version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/308f26b7aeb9da40662d4821ecc5f82a498ec204\"><code>308f26b</code></a></td><td><code>added optional gap3 everywhere</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b81cd6ccf77c652672ca75aa693123ca77bd93c\"><code>0b81cd6</code></a></td><td><code>added a few missing optional gap3</code></td></tr></table>\n",
    "created_at": "2016-04-25T10:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294531",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bacaea70cc01123f2c4b0a2bad070d971721bf4"><code>4bacaea</code></a></td><td><code>trivial typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc8a0aa14096fa1006e6aeea5da58304cd4c85d8"><code>fc8a0aa</code></a></td><td><code>replaced the wrongly assumed right action by a left action</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef6dbace9fbe0e4c4dcca656cb514cf0f89b3ebd"><code>ef6dbac</code></a></td><td><code>fixed the action on root indices with left and right version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/308f26b7aeb9da40662d4821ecc5f82a498ec204"><code>308f26b</code></a></td><td><code>added optional gap3 everywhere</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b81cd6ccf77c652672ca75aa693123ca77bd93c"><code>0b81cd6</code></a></td><td><code>added a few missing optional gap3</code></td></tr></table>




---

archive/issue_events_285225.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2016-04-25T10:10:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285225"
}
```



---

archive/issue_comments_294532.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI think this is ready to go once the patchbots are happy!",
    "created_at": "2016-04-25T10:10:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294532",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:14" align="right">comment:14</div>

I think this is ready to go once the patchbots are happy!



---

archive/issue_comments_294533.json:
```json
{
    "body": "Changed keywords from **coxeter group, subword complex** to **reflection group, coxeter group, subword complex, days80**",
    "created_at": "2016-04-25T10:13:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294533",
    "user": "https://github.com/stumpc5"
}
```

Changed keywords from **coxeter group, subword complex** to **reflection group, coxeter group, subword complex, days80**



---

archive/issue_comments_294534.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ee1f3bf9c772352b9a7994afc7f4359e618b309\"><code>0ee1f3b</code></a></td><td><code>added a few more missing optional gap3</code></td></tr></table>\n",
    "created_at": "2016-04-25T12:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294534",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ee1f3bf9c772352b9a7994afc7f4359e618b309"><code>0ee1f3b</code></a></td><td><code>added a few more missing optional gap3</code></td></tr></table>




---

archive/issue_comments_294535.json:
```json
{
    "body": "Changed commit from **[`0b81cd6`](https://github.com/sagemath/sagetrac-mirror/commit/0b81cd6ccf77c652672ca75aa693123ca77bd93c)** to **[`0ee1f3b`](https://github.com/sagemath/sagetrac-mirror/commit/0ee1f3bf9c772352b9a7994afc7f4359e618b309)**",
    "created_at": "2016-04-25T12:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294535",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0b81cd6`](https://github.com/sagemath/sagetrac-mirror/commit/0b81cd6ccf77c652672ca75aa693123ca77bd93c)** to **[`0ee1f3b`](https://github.com/sagemath/sagetrac-mirror/commit/0ee1f3bf9c772352b9a7994afc7f4359e618b309)**



---

archive/issue_events_285226.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-04-25T14:02:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285226"
}
```



---

archive/issue_events_285227.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-04-25T14:02:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285227"
}
```



---

archive/issue_comments_294536.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n-1 to changing all of the examples to *only* using GAP3/reflection groups. Until GAP3 becomes an optional spkg, it means they become completely untested. Moreover, it is good to make sure the functionality works between different implementations.\n\nI think there are a few things in here which need to be abstracted up to the category, root system code, and/or Coxeter type code. For example, `is_crystallographic` should be called on the Coxeter type, of which `ReflectionGroup` does not have and should (or perhaps the Coxeter matrix).\n\nI also do not see the reason why this change is needed:\n\n```diff\n-                Lambda = {li: coeff[li] * Lambda[li] for li in Lambda}\n+                Lambda = {li: coeff[li] * Lambda[li] for li in Lambda.keys()}\n```\nas the iteration for a dictionary is over its keys (and the former is faster and more memory efficient). With this change:\n\n```diff\n-                V_weights.append(pi * fund_weight)\n+                # TODO: little hack to distinguish the implementations\n+                #       for ReflectionGroups and CoxeterGroup\n+                from sage.groups.perm_gps.permgroup_element import PermutationGroupElemen\n+                if isinstance(pi,PermutationGroupElement):\n+                    V_weights.append( sum(fund_weight[j]*Phi[ (~pi)(j+1)-1 ] for j in ran\n+                else:\n+                    V_weights.append(pi * fund_weight)\n```\nI think it would be better to have the fundamental weights handle the action of the reflection group element.",
    "created_at": "2016-04-25T14:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294536",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

-1 to changing all of the examples to *only* using GAP3/reflection groups. Until GAP3 becomes an optional spkg, it means they become completely untested. Moreover, it is good to make sure the functionality works between different implementations.

I think there are a few things in here which need to be abstracted up to the category, root system code, and/or Coxeter type code. For example, `is_crystallographic` should be called on the Coxeter type, of which `ReflectionGroup` does not have and should (or perhaps the Coxeter matrix).

I also do not see the reason why this change is needed:

```diff
-                Lambda = {li: coeff[li] * Lambda[li] for li in Lambda}
+                Lambda = {li: coeff[li] * Lambda[li] for li in Lambda.keys()}
```
as the iteration for a dictionary is over its keys (and the former is faster and more memory efficient). With this change:

```diff
-                V_weights.append(pi * fund_weight)
+                # TODO: little hack to distinguish the implementations
+                #       for ReflectionGroups and CoxeterGroup
+                from sage.groups.perm_gps.permgroup_element import PermutationGroupElemen
+                if isinstance(pi,PermutationGroupElement):
+                    V_weights.append( sum(fund_weight[j]*Phi[ (~pi)(j+1)-1 ] for j in ran
+                else:
+                    V_weights.append(pi * fund_weight)
```
I think it would be better to have the fundamental weights handle the action of the reflection group element.



---

archive/issue_comments_294537.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@tscrim](#comment%3A17):\n> -1 to changing all of the examples to *only* using GAP3/reflection groups. Moreover, it is good to make sure the functionality works between different implementations.\n\nThe header contains tests that the core functionality works for Coxeter groups, maybe one could add a more elaborate example there, providing examples for more functionality.\n\nBut I clearly wrote the code the way I did in close relationshiop to the implementation of reflection groups, and I must confess that I prefer the speed (and indeed I need that speed for my research) over the code being usable by other implementations. I think, it is okay to have the code sort of working for `CoxeterGroup`, but for example the necessity to introduce a method `action_on_root_indices` for those tells that there is actually more work to be done to make the implementation work with both without giving up the speed on one, and not introducing unnecessary function overhead on the other.\n\n> Until GAP3 becomes an optional spkg, it means they become completely untested.\n\nThis should be done soon in my eyes, but I understand that so far I am the only one being desperate to have it.\n\n> I think there are a few things in here which need to be abstracted up to the category, root system code, and/or Coxeter type code. For example, `is_crystallographic` should be called on the Coxeter type, of which `ReflectionGroup` does not have and should (or perhaps the Coxeter matrix).\n\nA reflection group acting on a real vector space can have the property of being crystallographic or not (whether or not it stabilizes a lattice). I thus think the group itself should have this property.\n\nWhat do you think of (me) adding this method also to Coxeter groups (in this ticket or another)?\n\n> I also do not see the reason why this change is needed:\n> \n> ```diff\n> -                Lambda = {li: coeff[li] * Lambda[li] for li in Lambda}\n> +                Lambda = {li: coeff[li] * Lambda[li] for li in Lambda.keys()}\n> ```\n> as the iteration for a dictionary is over its keys (and the former is faster and more memory efficient).\n\nAs we have per default that simple reflections are families rather than dicts (so that iterating over them actually iterates over them), the reflection group implementation also have simple roots and fundamental weights as finite families, so iterating goes over the values. That's what the `keys` is there for.\n\n> With this change:\n> \n> ```diff\n> -                V_weights.append(pi * fund_weight)\n> +                # TODO: little hack to distinguish the implementations\n> +                #       for ReflectionGroups and CoxeterGroup\n> ```\n> I think it would be better to have the fundamental weights handle the action of the reflection group element.\n\nIf you mean, one might have a method `act on weight`, one could think about it, but the point here is that the action on fundamental weights can be quickly understood using the action on roots, while the general action on weights is not as simple.\n\nI can implement a method `act_on_fundamental_weight` to factor out the hack, but is that what we actually want?",
    "created_at": "2016-04-25T14:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294537",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@tscrim](#comment%3A17):
> -1 to changing all of the examples to *only* using GAP3/reflection groups. Moreover, it is good to make sure the functionality works between different implementations.

The header contains tests that the core functionality works for Coxeter groups, maybe one could add a more elaborate example there, providing examples for more functionality.

But I clearly wrote the code the way I did in close relationshiop to the implementation of reflection groups, and I must confess that I prefer the speed (and indeed I need that speed for my research) over the code being usable by other implementations. I think, it is okay to have the code sort of working for `CoxeterGroup`, but for example the necessity to introduce a method `action_on_root_indices` for those tells that there is actually more work to be done to make the implementation work with both without giving up the speed on one, and not introducing unnecessary function overhead on the other.

> Until GAP3 becomes an optional spkg, it means they become completely untested.

This should be done soon in my eyes, but I understand that so far I am the only one being desperate to have it.

> I think there are a few things in here which need to be abstracted up to the category, root system code, and/or Coxeter type code. For example, `is_crystallographic` should be called on the Coxeter type, of which `ReflectionGroup` does not have and should (or perhaps the Coxeter matrix).

A reflection group acting on a real vector space can have the property of being crystallographic or not (whether or not it stabilizes a lattice). I thus think the group itself should have this property.

What do you think of (me) adding this method also to Coxeter groups (in this ticket or another)?

> I also do not see the reason why this change is needed:
> 
> ```diff
> -                Lambda = {li: coeff[li] * Lambda[li] for li in Lambda}
> +                Lambda = {li: coeff[li] * Lambda[li] for li in Lambda.keys()}
> ```
> as the iteration for a dictionary is over its keys (and the former is faster and more memory efficient).

As we have per default that simple reflections are families rather than dicts (so that iterating over them actually iterates over them), the reflection group implementation also have simple roots and fundamental weights as finite families, so iterating goes over the values. That's what the `keys` is there for.

> With this change:
> 
> ```diff
> -                V_weights.append(pi * fund_weight)
> +                # TODO: little hack to distinguish the implementations
> +                #       for ReflectionGroups and CoxeterGroup
> ```
> I think it would be better to have the fundamental weights handle the action of the reflection group element.

If you mean, one might have a method `act on weight`, one could think about it, but the point here is that the action on fundamental weights can be quickly understood using the action on roots, while the general action on weights is not as simple.

I can implement a method `act_on_fundamental_weight` to factor out the hack, but is that what we actually want?



---

archive/issue_comments_294538.json:
```json
{
    "body": "Changed commit from **[`0ee1f3b`](https://github.com/sagemath/sagetrac-mirror/commit/0ee1f3bf9c772352b9a7994afc7f4359e618b309)** to **[`2c95a41`](https://github.com/sagemath/sagetrac-mirror/commit/2c95a41c537c6625ed6abdf03fd5bbedc9da21cb)**",
    "created_at": "2016-04-25T14:40:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294538",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0ee1f3b`](https://github.com/sagemath/sagetrac-mirror/commit/0ee1f3bf9c772352b9a7994afc7f4359e618b309)** to **[`2c95a41`](https://github.com/sagemath/sagetrac-mirror/commit/2c95a41c537c6625ed6abdf03fd5bbedc9da21cb)**



---

archive/issue_comments_294539.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c95a41c537c6625ed6abdf03fd5bbedc9da21cb\"><code>2c95a41</code></a></td><td><code>added a few more test cases for CoxeterGroup to the header</code></td></tr></table>\n",
    "created_at": "2016-04-25T14:40:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294539",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c95a41c537c6625ed6abdf03fd5bbedc9da21cb"><code>2c95a41</code></a></td><td><code>added a few more test cases for CoxeterGroup to the header</code></td></tr></table>




---

archive/issue_comments_294540.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n> A reflection group acting on a real vector space can have the property of being crystallographic or not (whether or not it stabilizes a lattice). I thus think the group itself should have this property.\n> \n> What do you think of (me) adding this method also to Coxeter groups (in this ticket or another)?\n\nI gonna for now also use\n\n```\nsage: W = ReflectionGroup(['A',3])\nsage: W.coxeter_matrix().is_crystallographic()\nTrue\nsage: W = CoxeterGroup(['A',3])\nsage: W.coxeter_matrix().is_crystallographic()\nTrue\n```\n(without giving up the idea that the property is attached to the group itself).",
    "created_at": "2016-04-25T14:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294540",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:20" align="right">comment:20</div>

> A reflection group acting on a real vector space can have the property of being crystallographic or not (whether or not it stabilizes a lattice). I thus think the group itself should have this property.
> 
> What do you think of (me) adding this method also to Coxeter groups (in this ticket or another)?

I gonna for now also use

```
sage: W = ReflectionGroup(['A',3])
sage: W.coxeter_matrix().is_crystallographic()
True
sage: W = CoxeterGroup(['A',3])
sage: W.coxeter_matrix().is_crystallographic()
True
```
(without giving up the idea that the property is attached to the group itself).



---

archive/issue_comments_294541.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/803d8b9226e376cbd777f4bb1d1ef67342d289fd\"><code>803d8b9</code></a></td><td><code>replace a hack by using G.coxeter_matrix().is_crystallogrphic()</code></td></tr></table>\n",
    "created_at": "2016-04-25T14:52:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294541",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/803d8b9226e376cbd777f4bb1d1ef67342d289fd"><code>803d8b9</code></a></td><td><code>replace a hack by using G.coxeter_matrix().is_crystallogrphic()</code></td></tr></table>




---

archive/issue_comments_294542.json:
```json
{
    "body": "Changed commit from **[`2c95a41`](https://github.com/sagemath/sagetrac-mirror/commit/2c95a41c537c6625ed6abdf03fd5bbedc9da21cb)** to **[`803d8b9`](https://github.com/sagemath/sagetrac-mirror/commit/803d8b9226e376cbd777f4bb1d1ef67342d289fd)**",
    "created_at": "2016-04-25T14:52:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294542",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2c95a41`](https://github.com/sagemath/sagetrac-mirror/commit/2c95a41c537c6625ed6abdf03fd5bbedc9da21cb)** to **[`803d8b9`](https://github.com/sagemath/sagetrac-mirror/commit/803d8b9226e376cbd777f4bb1d1ef67342d289fd)**



---

archive/issue_comments_294543.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n> If you mean, one might have a method `act on weight`, one could think about it, but the point here is that the action on fundamental weights can be quickly understood using the action on roots, while the general action on weights is not as simple.\n\nLet me take that back for now, I'll get back to it...",
    "created_at": "2016-04-25T14:59:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294543",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:22" align="right">comment:22</div>

> If you mean, one might have a method `act on weight`, one could think about it, but the point here is that the action on fundamental weights can be quickly understood using the action on roots, while the general action on weights is not as simple.

Let me take that back for now, I'll get back to it...



---

archive/issue_comments_294544.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc23f814716a1f0aa947e5580289acac611534fc\"><code>bc23f81</code></a></td><td><code>fixed the action on root indices, roots, and general vectors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ecefc2c7cd7b1ab2a611c17b13ef06371659269\"><code>0ecefc2</code></a></td><td><code>renamed action_on_root_indices to act_on_root_indices for name unifications</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63639a6e3041d14e2bd872858bf58abf8b03815c\"><code>63639a6</code></a></td><td><code>removed a fixed todo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f12a61ef4cc0567e40052ba267bc1e24ce2f5dea\"><code>f12a61e</code></a></td><td><code>added method 'act' to CoxeterGroup and used it in the action on weights, also marked a few more doctests as optional gap3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52c39d9ef149ee6826cb3f8f06b7aa7582d49f14\"><code>52c39d9</code></a></td><td><code>fixed one broken doctest in coxeter_group.py</code></td></tr></table>\n",
    "created_at": "2016-04-25T18:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294544",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc23f814716a1f0aa947e5580289acac611534fc"><code>bc23f81</code></a></td><td><code>fixed the action on root indices, roots, and general vectors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ecefc2c7cd7b1ab2a611c17b13ef06371659269"><code>0ecefc2</code></a></td><td><code>renamed action_on_root_indices to act_on_root_indices for name unifications</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63639a6e3041d14e2bd872858bf58abf8b03815c"><code>63639a6</code></a></td><td><code>removed a fixed todo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f12a61ef4cc0567e40052ba267bc1e24ce2f5dea"><code>f12a61e</code></a></td><td><code>added method 'act' to CoxeterGroup and used it in the action on weights, also marked a few more doctests as optional gap3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52c39d9ef149ee6826cb3f8f06b7aa7582d49f14"><code>52c39d9</code></a></td><td><code>fixed one broken doctest in coxeter_group.py</code></td></tr></table>




---

archive/issue_comments_294545.json:
```json
{
    "body": "Changed commit from **[`803d8b9`](https://github.com/sagemath/sagetrac-mirror/commit/803d8b9226e376cbd777f4bb1d1ef67342d289fd)** to **[`52c39d9`](https://github.com/sagemath/sagetrac-mirror/commit/52c39d9ef149ee6826cb3f8f06b7aa7582d49f14)**",
    "created_at": "2016-04-25T18:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294545",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`803d8b9`](https://github.com/sagemath/sagetrac-mirror/commit/803d8b9226e376cbd777f4bb1d1ef67342d289fd)** to **[`52c39d9`](https://github.com/sagemath/sagetrac-mirror/commit/52c39d9ef149ee6826cb3f8f06b7aa7582d49f14)**



---

archive/issue_events_285228.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2016-04-25T19:03:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285228"
}
```



---

archive/issue_events_285229.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2016-04-25T19:03:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285229"
}
```



---

archive/issue_comments_294546.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nHi Travis, I believe I fixed everything you mentioned except for the fact that I almost completely test using `ReflectionGroup`'s. In particular, I fixed a few hacks and `todo`'s.\n\nThe changes to `reflection_group_real.py` and to `coxeter_group.py` are not strictly there to get subword complexes to work (though the uniformization is done for that reason). Should I extect those changes into a different ticket, or is everyone okay with having it here?\n\nBeside that, I set it back to `needs review`.",
    "created_at": "2016-04-25T19:03:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294546",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:24" align="right">comment:24</div>

Hi Travis, I believe I fixed everything you mentioned except for the fact that I almost completely test using `ReflectionGroup`'s. In particular, I fixed a few hacks and `todo`'s.

The changes to `reflection_group_real.py` and to `coxeter_group.py` are not strictly there to get subword complexes to work (though the uniformization is done for that reason). Should I extect those changes into a different ticket, or is everyone okay with having it here?

Beside that, I set it back to `needs review`.



---

archive/issue_comments_294547.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nIt's looking a lot better Christian. Thank you.\n\nHowever, let me be a bit more stern, I will not set this ticket to a positive review when you essentially remove doctest coverage because `gap3` is not an optional package yet (although this argument weakens once it is). Moreover, you can test all of the functionality with standard Sage, which such tests should be localized to each method, not (only) in a class-level test which does the \"core\" functionality.\n\nFor the speed issues, how much of this is making a difference? If it does, you can separate out the important functionality into a separate method, and then subclass the general class which special cases the methods when you use `ReflectionGroup`.\n\nYou are right about the issue with `Lambda`.\n\nBy renaming `action_on_root_indices`, you need to deprecate it.\n\nI am okay with you adding an `is_crystallographic` to the group here, but it might be a little strange if the crystallographic-ness of a Coxeter group is different than its Coxeter type/matrix.\n\nAlso, instead of `act`, IIRC there is a method, which I believe is `_act_on_` (not to be confused with `_acted_upon_`), that automatically gets checked by the coercion framework. So it gives you `w * la` essentially for free. Although",
    "created_at": "2016-04-26T04:17:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294547",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:25" align="right">comment:25</div>

It's looking a lot better Christian. Thank you.

However, let me be a bit more stern, I will not set this ticket to a positive review when you essentially remove doctest coverage because `gap3` is not an optional package yet (although this argument weakens once it is). Moreover, you can test all of the functionality with standard Sage, which such tests should be localized to each method, not (only) in a class-level test which does the "core" functionality.

For the speed issues, how much of this is making a difference? If it does, you can separate out the important functionality into a separate method, and then subclass the general class which special cases the methods when you use `ReflectionGroup`.

You are right about the issue with `Lambda`.

By renaming `action_on_root_indices`, you need to deprecate it.

I am okay with you adding an `is_crystallographic` to the group here, but it might be a little strange if the crystallographic-ness of a Coxeter group is different than its Coxeter type/matrix.

Also, instead of `act`, IIRC there is a method, which I believe is `_act_on_` (not to be confused with `_acted_upon_`), that automatically gets checked by the coercion framework. So it gives you `w * la` essentially for free. Although



---

archive/issue_events_285230.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-04-26T04:17:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285230"
}
```



---

archive/issue_events_285231.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-04-26T04:17:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285231"
}
```



---

archive/issue_comments_294548.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36ea30e9b2897f6dba40b832dadaca4a02e4af01\"><code>36ea30e</code></a></td><td><code>added `_act_on_` to reflection_group_real, fixed a confusion about left/right action, fixed a typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/283ccf598079150e16406adc6a5a55b519f8ec26\"><code>283ccf5</code></a></td><td><code>using `_act_on_` in the subword complex code, and remove the act method for CoxeterGroup again</code></td></tr></table>\n",
    "created_at": "2016-04-26T08:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294548",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36ea30e9b2897f6dba40b832dadaca4a02e4af01"><code>36ea30e</code></a></td><td><code>added `_act_on_` to reflection_group_real, fixed a confusion about left/right action, fixed a typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/283ccf598079150e16406adc6a5a55b519f8ec26"><code>283ccf5</code></a></td><td><code>using `_act_on_` in the subword complex code, and remove the act method for CoxeterGroup again</code></td></tr></table>




---

archive/issue_comments_294549.json:
```json
{
    "body": "Changed commit from **[`52c39d9`](https://github.com/sagemath/sagetrac-mirror/commit/52c39d9ef149ee6826cb3f8f06b7aa7582d49f14)** to **[`283ccf5`](https://github.com/sagemath/sagetrac-mirror/commit/283ccf598079150e16406adc6a5a55b519f8ec26)**",
    "created_at": "2016-04-26T08:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294549",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`52c39d9`](https://github.com/sagemath/sagetrac-mirror/commit/52c39d9ef149ee6826cb3f8f06b7aa7582d49f14)** to **[`283ccf5`](https://github.com/sagemath/sagetrac-mirror/commit/283ccf598079150e16406adc6a5a55b519f8ec26)**



---

archive/issue_comments_294550.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@tscrim](#comment%3A25):\n\n> For the speed issues, how much of this is making a difference?\n\n```\nsage: W = ReflectionGroup(['A',5])\nsage: c = W.index_set(); Q = c + tuple(W.w0.coxeter_sorting_word(c))\nsage: %time S = SubwordComplex(Q,W.w0)\nCPU times: user 42.7 ms, sys: 612 \u00b5s, total: 43.3 ms\nWall time: 39.5 ms\nsage: len(S)\n132\nsage: W = CoxeterGroup(['A',5])\nsage: c = W.index_set(); Q = c + tuple(W.w0.coxeter_sorting_word(c))\nsage: %time S = SubwordComplex(Q,W.w0)\nCPU times: user 15.1 s, sys: 84.3 ms, total: 15.1 s\nWall time: 15.1 s\nsage: len(S)\n132\n```\n\nThe complete implementation depends on `has_descents` and multiplication of elements to be fast (and this will get another boost for `ReflectionGroup` in #20484), when you `%prun` the code for `CoxeterGroup` you don't see a single bottleneck but that it is too slow in many parts (I am not complaining about this speed issue in general, this implementation is uniform for all Coxeter systems, finite or infinite, so that's great and the speed is what one gets there!)\n\n> If it does, you can separate out the important functionality into a separate method, and then subclass the general class which special cases the methods when you use `ReflectionGroup`.\n\nThis implementation of subword complexes is **not** a general implementation that could be moved up the hierarchy, and then a few methods could be replaced for concrete implementations. All the internal core methods are written so that internally it only plays with numbers and permutations of numbers, you only see roots popping out when using the API.\n\nIs is indeed possible to write a toy (in terms of speed) implementation for the category of `CoxeterGroups`, but I am not the one doing that at the moment -- what I provide is a research level implementation for `ReflectionGroup`.\n\n> However, let me be a bit more stern, I will not set this ticket to a positive review when you essentially remove doctest coverage because `gap3` is not an optional package yet (although this argument weakens once it is). Moreover, you can test all of the functionality with standard Sage, which such tests should be localized to each method, not (only) in a class-level test which does the \"core\" functionality.\n\nHm -- you see my complaints about that above. On the other hand, I also see your point of getting rotten untested code after a while, and I don't really care if we pollute the documentation with more tests.\n\n> By renaming `action_on_root_indices`, you need to deprecate it.\n\nIt was only there for a few months, see #11010, and this method is almost surely not used by anyone so far. You still think it should be deprecated ?\n\n> I am okay with you adding an `is_crystallographic` to the group here, but it might be a little strange if the crystallographic-ness of a Coxeter group is different than its Coxeter type/matrix.\n\nHow could crystallographic-ness being different for the group and for its Coxeter type ? See Section 2.8 in Humphreys Coxeter group book for a \"proof\" that the two are the same. Or am I overseeing something?",
    "created_at": "2016-04-26T08:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294550",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@tscrim](#comment%3A25):

> For the speed issues, how much of this is making a difference?

```
sage: W = ReflectionGroup(['A',5])
sage: c = W.index_set(); Q = c + tuple(W.w0.coxeter_sorting_word(c))
sage: %time S = SubwordComplex(Q,W.w0)
CPU times: user 42.7 ms, sys: 612 µs, total: 43.3 ms
Wall time: 39.5 ms
sage: len(S)
132
sage: W = CoxeterGroup(['A',5])
sage: c = W.index_set(); Q = c + tuple(W.w0.coxeter_sorting_word(c))
sage: %time S = SubwordComplex(Q,W.w0)
CPU times: user 15.1 s, sys: 84.3 ms, total: 15.1 s
Wall time: 15.1 s
sage: len(S)
132
```

The complete implementation depends on `has_descents` and multiplication of elements to be fast (and this will get another boost for `ReflectionGroup` in #20484), when you `%prun` the code for `CoxeterGroup` you don't see a single bottleneck but that it is too slow in many parts (I am not complaining about this speed issue in general, this implementation is uniform for all Coxeter systems, finite or infinite, so that's great and the speed is what one gets there!)

> If it does, you can separate out the important functionality into a separate method, and then subclass the general class which special cases the methods when you use `ReflectionGroup`.

This implementation of subword complexes is **not** a general implementation that could be moved up the hierarchy, and then a few methods could be replaced for concrete implementations. All the internal core methods are written so that internally it only plays with numbers and permutations of numbers, you only see roots popping out when using the API.

Is is indeed possible to write a toy (in terms of speed) implementation for the category of `CoxeterGroups`, but I am not the one doing that at the moment -- what I provide is a research level implementation for `ReflectionGroup`.

> However, let me be a bit more stern, I will not set this ticket to a positive review when you essentially remove doctest coverage because `gap3` is not an optional package yet (although this argument weakens once it is). Moreover, you can test all of the functionality with standard Sage, which such tests should be localized to each method, not (only) in a class-level test which does the "core" functionality.

Hm -- you see my complaints about that above. On the other hand, I also see your point of getting rotten untested code after a while, and I don't really care if we pollute the documentation with more tests.

> By renaming `action_on_root_indices`, you need to deprecate it.

It was only there for a few months, see #11010, and this method is almost surely not used by anyone so far. You still think it should be deprecated ?

> I am okay with you adding an `is_crystallographic` to the group here, but it might be a little strange if the crystallographic-ness of a Coxeter group is different than its Coxeter type/matrix.

How could crystallographic-ness being different for the group and for its Coxeter type ? See Section 2.8 in Humphreys Coxeter group book for a "proof" that the two are the same. Or am I overseeing something?



---

archive/issue_comments_294551.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n> Also, instead of `act`, IIRC there is a method, which I believe is `_act_on_` (not to be confused with `_acted_upon_`), that automatically gets checked by the coercion framework. So it gives you `w * la` essentially for free.\n\nDone, I must admit that I like that way of having an element w in W act on vectors, while I am nervous about this implicitness in the construction that will likely result in bugs.\n\n> Although\n\nmissing sentence?",
    "created_at": "2016-04-26T08:34:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294551",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:28" align="right">comment:28</div>

> Also, instead of `act`, IIRC there is a method, which I believe is `_act_on_` (not to be confused with `_acted_upon_`), that automatically gets checked by the coercion framework. So it gives you `w * la` essentially for free.

Done, I must admit that I like that way of having an element w in W act on vectors, while I am nervous about this implicitness in the construction that will likely result in bugs.

> Although

missing sentence?



---

archive/issue_comments_294552.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@stumpc5](#comment%3A28):\n> > Also, instead of `act`, IIRC there is a method, which I believe is `_act_on_` (not to be confused with `_acted_upon_`), that automatically gets checked by the coercion framework. So it gives you `w * la` essentially for free.\n> \n> \n> Done, I must admit that I like that way of having an element w in W act on vectors, while I am nervous about this implicitness in the construction that will likely result in bugs.\n\nSame here; it's nice to have a short hand for actions (and to benefit from coercion!), but I am also uncomfortable giving yet another meaning to the operator '*'.\n\nIn any cases, we should keep consistency with Weyl groups. It's currently `w.action(l)` there (not `w.act(l)` btw); if we switch to `_act_on_`, then we should do it consistently everywhere.\n\nCheers,",
    "created_at": "2016-04-26T09:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294552",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@stumpc5](#comment%3A28):
> > Also, instead of `act`, IIRC there is a method, which I believe is `_act_on_` (not to be confused with `_acted_upon_`), that automatically gets checked by the coercion framework. So it gives you `w * la` essentially for free.
> 
> 
> Done, I must admit that I like that way of having an element w in W act on vectors, while I am nervous about this implicitness in the construction that will likely result in bugs.

Same here; it's nice to have a short hand for actions (and to benefit from coercion!), but I am also uncomfortable giving yet another meaning to the operator '*'.

In any cases, we should keep consistency with Weyl groups. It's currently `w.action(l)` there (not `w.act(l)` btw); if we switch to `_act_on_`, then we should do it consistently everywhere.

Cheers,



---

archive/issue_comments_294553.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@stumpc5](#comment%3A27):\n> How could crystallographic-ness being different for the group and for its Coxeter type ? See Section 2.8 in Humphreys Coxeter group book for a \"proof\" that the two are the same.\n\nI guess that's Travis's point: mathematically, they two should be the same. If there are two methods implementing this fact, then we need to make sure that they remain consistent.",
    "created_at": "2016-04-26T09:32:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294553",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@stumpc5](#comment%3A27):
> How could crystallographic-ness being different for the group and for its Coxeter type ? See Section 2.8 in Humphreys Coxeter group book for a "proof" that the two are the same.

I guess that's Travis's point: mathematically, they two should be the same. If there are two methods implementing this fact, then we need to make sure that they remain consistent.



---

archive/issue_comments_294554.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@nthiery](#comment%3A29):\n> In any cases, we should keep consistency with Weyl groups. It's currently `w.action(l)` there (not `w.act(l)` btw); if we switch to `_act_on_`, then we should do it consistently everywhere.\n\nTerm-wise, I think that `w` acts on `l`, while there is an action of `W` on `l`. But I am equally okay to use `w.action(l)` for consistency.\n\nI don't get your point of switching: what is wrong with having the method `action` and then using this method in the body of `_act_on_`?",
    "created_at": "2016-04-26T10:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294554",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@nthiery](#comment%3A29):
> In any cases, we should keep consistency with Weyl groups. It's currently `w.action(l)` there (not `w.act(l)` btw); if we switch to `_act_on_`, then we should do it consistently everywhere.

Term-wise, I think that `w` acts on `l`, while there is an action of `W` on `l`. But I am equally okay to use `w.action(l)` for consistency.

I don't get your point of switching: what is wrong with having the method `action` and then using this method in the body of `_act_on_`?



---

archive/issue_comments_294555.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/295d784db0ae24bed97ed7b4d3777df9dbd652c2\"><code>295d784</code></a></td><td><code>replace act* by action*</code></td></tr></table>\n",
    "created_at": "2016-04-26T10:40:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294555",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/295d784db0ae24bed97ed7b4d3777df9dbd652c2"><code>295d784</code></a></td><td><code>replace act* by action*</code></td></tr></table>




---

archive/issue_comments_294556.json:
```json
{
    "body": "Changed commit from **[`283ccf5`](https://github.com/sagemath/sagetrac-mirror/commit/283ccf598079150e16406adc6a5a55b519f8ec26)** to **[`295d784`](https://github.com/sagemath/sagetrac-mirror/commit/295d784db0ae24bed97ed7b4d3777df9dbd652c2)**",
    "created_at": "2016-04-26T10:40:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294556",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`283ccf5`](https://github.com/sagemath/sagetrac-mirror/commit/283ccf598079150e16406adc6a5a55b519f8ec26)** to **[`295d784`](https://github.com/sagemath/sagetrac-mirror/commit/295d784db0ae24bed97ed7b4d3777df9dbd652c2)**



---

archive/issue_comments_294557.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@stumpc5](#comment%3A31):\n> I don't get your point of switching: what is wrong with having the method `action` and then using this method in the body of `_act_on_`?\n\nJust that I am not sure that we want to overload/polute '*' with this; and if we do, it should be done consistently for Weyl groups as well.\n\nCheers",
    "created_at": "2016-04-26T10:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294557",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@stumpc5](#comment%3A31):
> I don't get your point of switching: what is wrong with having the method `action` and then using this method in the body of `_act_on_`?

Just that I am not sure that we want to overload/polute '*' with this; and if we do, it should be done consistently for Weyl groups as well.

Cheers



---

archive/issue_comments_294558.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@nthiery](#comment%3A33):\n> Replying to [@stumpc5](#comment%3A31):\n> > I don't get your point of switching: what is wrong with having the method `action` and then using this method in the body of `_act_on_`?\n> \n> \n> Just that I am not sure that we want to overload/polute '*' with this; and if we do, it should be done consistently for Weyl groups as well.\n\nOne reason in favour is that elements in `CoxeterGroup` are matrices, so they use '*' anyways. Otherwise, I would have to re-enable the method `action` there which  is simply using '*'.\n\nOne reason against is that for complex reflection groups, the action on the space and on its dual are different. And since both are represented by vectors (in the dual bases {ei} and {xi}), the '*' does not see this for now. But one could have an optional argument `in_dual` for `action`.",
    "created_at": "2016-04-26T11:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294558",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@nthiery](#comment%3A33):
> Replying to [@stumpc5](#comment%3A31):
> > I don't get your point of switching: what is wrong with having the method `action` and then using this method in the body of `_act_on_`?
> 
> 
> Just that I am not sure that we want to overload/polute '*' with this; and if we do, it should be done consistently for Weyl groups as well.

One reason in favour is that elements in `CoxeterGroup` are matrices, so they use '*' anyways. Otherwise, I would have to re-enable the method `action` there which  is simply using '*'.

One reason against is that for complex reflection groups, the action on the space and on its dual are different. And since both are represented by vectors (in the dual bases {ei} and {xi}), the '*' does not see this for now. But one could have an optional argument `in_dual` for `action`.



---

archive/issue_comments_294559.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nOh, I had not noticed that `CoxeterMatrixGroup` were acting on plain vectors with '*'. As you mention this is very ambiguous. For a Weyl group this is even worst: is the vector interpreted as in the span of the (co)roots? of the (co)weights? in the ambient space?\n\nFor now, I'd rather keep the notations as explicit as possible (in particular, it's easier to document a method `.action` than an overloaded operator). And leave us room in the future to overload '*', either by default, or upon explicit request from the user.",
    "created_at": "2016-04-26T12:43:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294559",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:35" align="right">comment:35</div>

Oh, I had not noticed that `CoxeterMatrixGroup` were acting on plain vectors with '*'. As you mention this is very ambiguous. For a Weyl group this is even worst: is the vector interpreted as in the span of the (co)roots? of the (co)weights? in the ambient space?

For now, I'd rather keep the notations as explicit as possible (in particular, it's easier to document a method `.action` than an overloaded operator). And leave us room in the future to overload '*', either by default, or upon explicit request from the user.



---

archive/issue_comments_294560.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@nthiery](#comment%3A35):\n> Oh, I had not noticed that `CoxeterMatrixGroup` were acting on plain vectors with '*'.\n\nYes, the elements are matrices which act on vectors :-)\n\n> As you mention this is very ambiguous. For a Weyl group this is even worst: is the vector interpreted as in the span of the (co)roots? of the (co)weights? in the ambient space?\n\nI agree.\n\n> For now, I'd rather keep the notations as explicit as possible (in particular, it's easier to document a method `.action` than an overloaded operator). And leave us room in the future to overload '*', either by default, or upon explicit request from the user.\n\nOne could define `_act_on_` in different ways for elements in the root/coroot/weight/coweight space, and not at all for plain vectors. But on the reflection group side there is no class for elements in `V` and in `V^*` yet. I am okay with both: considering the action on vectors for now on elements in `V`, or removing the coercion for now.",
    "created_at": "2016-04-26T15:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294560",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@nthiery](#comment%3A35):
> Oh, I had not noticed that `CoxeterMatrixGroup` were acting on plain vectors with '*'.

Yes, the elements are matrices which act on vectors :-)

> As you mention this is very ambiguous. For a Weyl group this is even worst: is the vector interpreted as in the span of the (co)roots? of the (co)weights? in the ambient space?

I agree.

> For now, I'd rather keep the notations as explicit as possible (in particular, it's easier to document a method `.action` than an overloaded operator). And leave us room in the future to overload '*', either by default, or upon explicit request from the user.

One could define `_act_on_` in different ways for elements in the root/coroot/weight/coweight space, and not at all for plain vectors. But on the reflection group side there is no class for elements in `V` and in `V^*` yet. I am okay with both: considering the action on vectors for now on elements in `V`, or removing the coercion for now.



---

archive/issue_comments_294561.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@stumpc5](#comment%3A27):\n> Replying to [@tscrim](#comment%3A25):\n> \n> > For the speed issues, how much of this is making a difference?\n> \n> \n> The complete implementation depends on `has_descents` and multiplication of elements to be fast (and this will get another boost for `ReflectionGroup` in #20484), when you `%prun` the code for `CoxeterGroup` you don't see a single bottleneck but that it is too slow in many parts (I am not complaining about this speed issue in general, this implementation is uniform for all Coxeter systems, finite or infinite, so that's great and the speed is what one gets there!)\n\nThat is not answering the question I asked. I asked about having one additional level of indirection to have a specialized function for when the input is an instance of `RealReflectionGroup`.\n\n> > If it does, you can separate out the important functionality into a separate method, and then subclass the general class which special cases the methods when you use `ReflectionGroup`.\n> \n> \n> This implementation of subword complexes is **not** a general implementation that could be moved up the hierarchy, and then a few methods could be replaced for concrete implementations. All the internal core methods are written so that internally it only plays with numbers and permutations of numbers, you only see roots popping out when using the API.\n\nI'm sure there are only some key parts of it which are written that strongly depend on the input format. These could be abstracted to work in general with a special subclass which has the specialized method or into the implementations of the Coxeter group. This is a standard design pattern for code that I've seen many times over (we even have the former in Sage's matrix code).\n\n> Is is indeed possible to write a toy (in terms of speed) implementation for the category of `CoxeterGroups`, but I am not the one doing that at the moment -- what I provide is a research level implementation for `ReflectionGroup`.\n\nIn many ways, we are beating a dead horse as you have basically done what I am asking for already (with the specializing being done in the different implementations of a Coxeter group).\n\n> > However, let me be a bit more stern, I will not set this ticket to a positive review when you essentially remove doctest coverage because `gap3` is not an optional package yet (although this argument weakens once it is). Moreover, you can test all of the functionality with standard Sage, which such tests should be localized to each method, not (only) in a class-level test which does the \"core\" functionality.\n> \n> \n> Hm -- you see my complaints about that above. On the other hand, I also see your point of getting rotten untested code after a while, and I don't really care if we pollute the documentation with more tests.\n\nThen let's leave those tests in. That is the only thing I am asking for here.\n\n> > By renaming `action_on_root_indices`, you need to deprecate it.\n> \n> \n> It was only there for a few months, see #11010, and this method is almost surely not used by anyone so far. You still think it should be deprecated ?\n\nI am pretty sure it appears in a stable release (i.e., 7.1), so yes.",
    "created_at": "2016-04-26T15:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294561",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@stumpc5](#comment%3A27):
> Replying to [@tscrim](#comment%3A25):
> 
> > For the speed issues, how much of this is making a difference?
> 
> 
> The complete implementation depends on `has_descents` and multiplication of elements to be fast (and this will get another boost for `ReflectionGroup` in #20484), when you `%prun` the code for `CoxeterGroup` you don't see a single bottleneck but that it is too slow in many parts (I am not complaining about this speed issue in general, this implementation is uniform for all Coxeter systems, finite or infinite, so that's great and the speed is what one gets there!)

That is not answering the question I asked. I asked about having one additional level of indirection to have a specialized function for when the input is an instance of `RealReflectionGroup`.

> > If it does, you can separate out the important functionality into a separate method, and then subclass the general class which special cases the methods when you use `ReflectionGroup`.
> 
> 
> This implementation of subword complexes is **not** a general implementation that could be moved up the hierarchy, and then a few methods could be replaced for concrete implementations. All the internal core methods are written so that internally it only plays with numbers and permutations of numbers, you only see roots popping out when using the API.

I'm sure there are only some key parts of it which are written that strongly depend on the input format. These could be abstracted to work in general with a special subclass which has the specialized method or into the implementations of the Coxeter group. This is a standard design pattern for code that I've seen many times over (we even have the former in Sage's matrix code).

> Is is indeed possible to write a toy (in terms of speed) implementation for the category of `CoxeterGroups`, but I am not the one doing that at the moment -- what I provide is a research level implementation for `ReflectionGroup`.

In many ways, we are beating a dead horse as you have basically done what I am asking for already (with the specializing being done in the different implementations of a Coxeter group).

> > However, let me be a bit more stern, I will not set this ticket to a positive review when you essentially remove doctest coverage because `gap3` is not an optional package yet (although this argument weakens once it is). Moreover, you can test all of the functionality with standard Sage, which such tests should be localized to each method, not (only) in a class-level test which does the "core" functionality.
> 
> 
> Hm -- you see my complaints about that above. On the other hand, I also see your point of getting rotten untested code after a while, and I don't really care if we pollute the documentation with more tests.

Then let's leave those tests in. That is the only thing I am asking for here.

> > By renaming `action_on_root_indices`, you need to deprecate it.
> 
> 
> It was only there for a few months, see #11010, and this method is almost surely not used by anyone so far. You still think it should be deprecated ?

I am pretty sure it appears in a stable release (i.e., 7.1), so yes.



---

archive/issue_comments_294562.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@nthiery](#comment%3A30):\n> Replying to [@stumpc5](#comment%3A27):\n> > How could crystallographic-ness being different for the group and for its Coxeter type ? See Section 2.8 in Humphreys Coxeter group book for a \"proof\" that the two are the same.\n> \n> \n> I guess that's Travis's point: mathematically, they two should be the same. If there are two methods implementing this fact, then we need to make sure that they remain consistent.\n\nWell, my interpretation of Christian's first comment was this was a property of the realization of the group, not of the group itself. So the group's `is_crystallographic` should just call that of its Coxeter type/matrix.",
    "created_at": "2016-04-26T15:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294562",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@nthiery](#comment%3A30):
> Replying to [@stumpc5](#comment%3A27):
> > How could crystallographic-ness being different for the group and for its Coxeter type ? See Section 2.8 in Humphreys Coxeter group book for a "proof" that the two are the same.
> 
> 
> I guess that's Travis's point: mathematically, they two should be the same. If there are two methods implementing this fact, then we need to make sure that they remain consistent.

Well, my interpretation of Christian's first comment was this was a property of the realization of the group, not of the group itself. So the group's `is_crystallographic` should just call that of its Coxeter type/matrix.



---

archive/issue_comments_294563.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@nthiery](#comment%3A33):\n> Replying to [@stumpc5](#comment%3A31):\n> > I don't get your point of switching: what is wrong with having the method `action` and then using this method in the body of `_act_on_`?\n> \n> \n> Just that I am not sure that we want to overload/polute '*' with this; and if we do, it should be done consistently for Weyl groups as well.\n\nI have been told by a few people that they would want this feature (in the finite Coxeter group setting) as it is natural and corresponds to what we would write mathematically.",
    "created_at": "2016-04-26T15:19:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294563",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@nthiery](#comment%3A33):
> Replying to [@stumpc5](#comment%3A31):
> > I don't get your point of switching: what is wrong with having the method `action` and then using this method in the body of `_act_on_`?
> 
> 
> Just that I am not sure that we want to overload/polute '*' with this; and if we do, it should be done consistently for Weyl groups as well.

I have been told by a few people that they would want this feature (in the finite Coxeter group setting) as it is natural and corresponds to what we would write mathematically.



---

archive/issue_comments_294564.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@nthiery](#comment%3A35):\n> Oh, I had not noticed that `CoxeterMatrixGroup` were acting on plain vectors with '*'. As you mention this is very ambiguous. For a Weyl group this is even worst: is the vector interpreted as in the span of the (co)roots? of the (co)weights? in the ambient space?\n\nFor `CoxeterMatrixGroup`, it is given as a (faithful) representation, so the basis of a vector space is (implicitly) given, which is the roots. For the Weyl group, it is also given as a representation, so again, we have a basis which we define the action on. So I see no ambiguity, and in fact, I think the Weyl groups are very explicit about this.\n\n> For now, I'd rather keep the notations as explicit as possible (in particular, it's easier to document a method `.action` than an overloaded operator). And leave us room in the future to overload '*', either by default, or upon explicit request from the user.\n\nI agree, that it is easier to document `action()` than an overloaded operator, but I think it is only marginally easier. The first thing I would (and do) look at is the class-level documentation for what I can do with a particular object. So if we have examples in there that describe the action of `*`, I think that makes it easily accessible what we are doing, in addition to the naturality of the action. Or am I forgetting something (again, in the [finite] Coxeter group setting)?",
    "created_at": "2016-04-26T15:24:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294564",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@nthiery](#comment%3A35):
> Oh, I had not noticed that `CoxeterMatrixGroup` were acting on plain vectors with '*'. As you mention this is very ambiguous. For a Weyl group this is even worst: is the vector interpreted as in the span of the (co)roots? of the (co)weights? in the ambient space?

For `CoxeterMatrixGroup`, it is given as a (faithful) representation, so the basis of a vector space is (implicitly) given, which is the roots. For the Weyl group, it is also given as a representation, so again, we have a basis which we define the action on. So I see no ambiguity, and in fact, I think the Weyl groups are very explicit about this.

> For now, I'd rather keep the notations as explicit as possible (in particular, it's easier to document a method `.action` than an overloaded operator). And leave us room in the future to overload '*', either by default, or upon explicit request from the user.

I agree, that it is easier to document `action()` than an overloaded operator, but I think it is only marginally easier. The first thing I would (and do) look at is the class-level documentation for what I can do with a particular object. So if we have examples in there that describe the action of `*`, I think that makes it easily accessible what we are doing, in addition to the naturality of the action. Or am I forgetting something (again, in the [finite] Coxeter group setting)?



---

archive/issue_comments_294565.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@tscrim](#comment%3A39):\n> I have been told by a few people that they would want this feature (in the finite Coxeter group setting) as it is natural and corresponds to what we would write mathematically.\n\nWell, mathematicaly, I tend to write `v.s_i`, not `vs_i`, precisely to raise the potential ambiguity (this is an action, not a multiplication)",
    "created_at": "2016-04-26T15:25:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294565",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@tscrim](#comment%3A39):
> I have been told by a few people that they would want this feature (in the finite Coxeter group setting) as it is natural and corresponds to what we would write mathematically.

Well, mathematicaly, I tend to write `v.s_i`, not `vs_i`, precisely to raise the potential ambiguity (this is an action, not a multiplication)



---

archive/issue_comments_294566.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@tscrim](#comment%3A38):\n> In many ways, we are beating a dead horse as you have basically done what I am asking for already (with the specializing being done in the different implementations of a Coxeter group).\n\nWell, let's keep it as it is for now then.\n\n> Then let's leave those tests in. That is the only thing I am asking for here.\n\nFine.\n\n> I am pretty sure it appears in a stable release (i.e., 7.1), so yes.\n\nAfter Nicolas' comment that `WeylGroup` uses `.action`, I moved it back to `action*`...\n\n> my interpretation of Christian's first comment was this was a property of the realization of the group, not of the group itself. So the group's `is_crystallographic` should just call that of its Coxeter type/matrix.\n\nYes, for real groups I only wanted the `is_crystallographic` of the group to call the one of the Coxeter type/matrix. But complex reflection groups can still be crystallographic (though they only are if they are real and crystallographic), so they deserve the method `is_crystallographic` without having a Coxeter type/Coxeter matrix attached to them.\n\n> So I see no ambiguity, and in fact, I think the Weyl groups are very explicit about this.\n\nBut what if `w` is an element of the group and `v` is a *Sage vector*. Does it represent an element in the vector space spanned the simple roots, or by the simple coroots, or by the fundamental weights, or by the fundamental coweights? Or does that not matter since the actions are all the same?",
    "created_at": "2016-04-26T15:30:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294566",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@tscrim](#comment%3A38):
> In many ways, we are beating a dead horse as you have basically done what I am asking for already (with the specializing being done in the different implementations of a Coxeter group).

Well, let's keep it as it is for now then.

> Then let's leave those tests in. That is the only thing I am asking for here.

Fine.

> I am pretty sure it appears in a stable release (i.e., 7.1), so yes.

After Nicolas' comment that `WeylGroup` uses `.action`, I moved it back to `action*`...

> my interpretation of Christian's first comment was this was a property of the realization of the group, not of the group itself. So the group's `is_crystallographic` should just call that of its Coxeter type/matrix.

Yes, for real groups I only wanted the `is_crystallographic` of the group to call the one of the Coxeter type/matrix. But complex reflection groups can still be crystallographic (though they only are if they are real and crystallographic), so they deserve the method `is_crystallographic` without having a Coxeter type/Coxeter matrix attached to them.

> So I see no ambiguity, and in fact, I think the Weyl groups are very explicit about this.

But what if `w` is an element of the group and `v` is a *Sage vector*. Does it represent an element in the vector space spanned the simple roots, or by the simple coroots, or by the fundamental weights, or by the fundamental coweights? Or does that not matter since the actions are all the same?



---

archive/issue_comments_294567.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@stumpc5](#comment%3A42):\n> Replying to [@tscrim](#comment%3A38):\n> > my interpretation of Christian's first comment was this was a property of the realization of the group, not of the group itself. So the group's `is_crystallographic` should just call that of its Coxeter type/matrix.\n> \n> \n> Yes, for real groups I only wanted the `is_crystallographic` of the group to call the one of the Coxeter type/matrix. But complex reflection groups can still be crystallographic (though they only are if they are real and crystallographic), so they deserve the method `is_crystallographic` without having a Coxeter type/Coxeter matrix attached to them.\n\nAh, I see. This good.\n\n> > So I see no ambiguity, and in fact, I think the Weyl groups are very explicit about this.\n> \n> \n> But what if `w` is an element of the group and `v` is a *Sage vector*. Does it represent an element in the vector space spanned the simple roots, or by the simple coroots, or by the fundamental weights, or by the fundamental coweights? Or does that not matter since the actions are all the same?\n\nSage's vectors exists expressed in some canonical basis, and by doing matrix multiplication, there is an implicit assumption that these bases are the same. In a way, what you are advocating for is that we need to explicitly specify the matrix for any matrix `m` and `v` and check those are the same anytime we write `m * v`. The various subclasses of `CombinatorialFreeModule` does this by saying the (parent) class corresponds to a choice of basis, but this is not, and really can never be, the case for Sage's vectors, where there is an assumption of a canonical basis. In fact, because these matrices are representations of a vector space given in terms of a basis, that basis is canonical as far as Sage's vectors are concerned. (I hope that makes some sense...)",
    "created_at": "2016-04-26T15:37:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294567",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@stumpc5](#comment%3A42):
> Replying to [@tscrim](#comment%3A38):
> > my interpretation of Christian's first comment was this was a property of the realization of the group, not of the group itself. So the group's `is_crystallographic` should just call that of its Coxeter type/matrix.
> 
> 
> Yes, for real groups I only wanted the `is_crystallographic` of the group to call the one of the Coxeter type/matrix. But complex reflection groups can still be crystallographic (though they only are if they are real and crystallographic), so they deserve the method `is_crystallographic` without having a Coxeter type/Coxeter matrix attached to them.

Ah, I see. This good.

> > So I see no ambiguity, and in fact, I think the Weyl groups are very explicit about this.
> 
> 
> But what if `w` is an element of the group and `v` is a *Sage vector*. Does it represent an element in the vector space spanned the simple roots, or by the simple coroots, or by the fundamental weights, or by the fundamental coweights? Or does that not matter since the actions are all the same?

Sage's vectors exists expressed in some canonical basis, and by doing matrix multiplication, there is an implicit assumption that these bases are the same. In a way, what you are advocating for is that we need to explicitly specify the matrix for any matrix `m` and `v` and check those are the same anytime we write `m * v`. The various subclasses of `CombinatorialFreeModule` does this by saying the (parent) class corresponds to a choice of basis, but this is not, and really can never be, the case for Sage's vectors, where there is an assumption of a canonical basis. In fact, because these matrices are representations of a vector space given in terms of a basis, that basis is canonical as far as Sage's vectors are concerned. (I hope that makes some sense...)



---

archive/issue_comments_294568.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\n> Sage's vectors exists expressed in some canonical basis, and by doing matrix multiplication, there is an implicit assumption that these bases are the same. \n\nI'd say that multiplying a matrix `M` with a vector `v` (as a tuple in distinction to vector space elements) is well-defined and completely independent on bases. So that's totally fine to do as `M*v`.\n\nOnly if the matrix is representing a linear map and the tuple represents a vector space element there is an assumption on both being represented in the same basis. When you now represent a Coxeter group element as a matrix you make a choice of basis (which might be the root basis, its dual, some linearly independent vectors of an \"ambient space\", or any other) This is now what you stick this matrix to, but when you do `w*v`, one does not specify the matrix that represents `w` in some basis, so this operation is ambiguous, as it didn't specify on which space `w` acts here (i.e., it is not clear in which basis you represent `w` as a matrix for that action.\n\nFor `ReflectionGroup` I just thought that the best is to have the method `.action` to take two parameters `side` being `\"left\"` or `\"right\"` and `on_space` being `\"primal\"` or `\"dual\"`.\n\nBeside that, I am okay with providing the coercion to act on the primal, but am also okay with removing it again (I am slightly in favour of keeping it though).",
    "created_at": "2016-04-26T16:06:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294568",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:44" align="right">comment:44</div>

> Sage's vectors exists expressed in some canonical basis, and by doing matrix multiplication, there is an implicit assumption that these bases are the same. 

I'd say that multiplying a matrix `M` with a vector `v` (as a tuple in distinction to vector space elements) is well-defined and completely independent on bases. So that's totally fine to do as `M*v`.

Only if the matrix is representing a linear map and the tuple represents a vector space element there is an assumption on both being represented in the same basis. When you now represent a Coxeter group element as a matrix you make a choice of basis (which might be the root basis, its dual, some linearly independent vectors of an "ambient space", or any other) This is now what you stick this matrix to, but when you do `w*v`, one does not specify the matrix that represents `w` in some basis, so this operation is ambiguous, as it didn't specify on which space `w` acts here (i.e., it is not clear in which basis you represent `w` as a matrix for that action.

For `ReflectionGroup` I just thought that the best is to have the method `.action` to take two parameters `side` being `"left"` or `"right"` and `on_space` being `"primal"` or `"dual"`.

Beside that, I am okay with providing the coercion to act on the primal, but am also okay with removing it again (I am slightly in favour of keeping it though).



---

archive/issue_comments_294569.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@stumpc5](#comment%3A44):\n> > Sage's vectors exists expressed in some canonical basis, and by doing matrix multiplication, there is an implicit assumption that these bases are the same. \n> \n> \n> I'd say that multiplying a matrix `M` with a vector `v` (as a tuple in distinction to vector space elements) is well-defined and completely independent on bases. So that's totally fine to do as `M*v`.\n\nNo, that is not true except in the most abstract sense of a linear morphism and an element of a vector space. A matrix comes with an implicit choice of a basis, and when we write vectors as tuples, there is an implicit choice of a basis as well. For example, if `M` is a diagonalizable matrix acting on a vector space `V`, we can find some basis such that `M` can be expressed as acting on scalars on that basis. While the diagonal matrix and `M` are different matrices, they define the *same* linear automorphism on `V`, and hence, have the same action on a vector. Yet, to do the computation, we need to express the vector in terms of our basis.\n\n> Only if the matrix is representing a linear map and the tuple represents a vector space element there is an assumption on both being represented in the same basis. When you now represent a Coxeter group element as a matrix you make a choice of basis (which might be the root basis, its dual, some linearly independent vectors of an \"ambient space\", or any other) This is now what you stick this matrix to, but when you do `w*v`, one does not specify the matrix that represents `w` in some basis, so this operation is ambiguous, as it didn't specify on which space `w` acts here (i.e., it is not clear in which basis you represent `w` as a matrix for that action.\n\nThat is not how a `CoxeterMatrixGroup` or a `WeylGroup` is defined. It is given precisely by that choice of representation/matrix, so in a way, it is a Coxeter system along with a specified representation.\n\nAlso, any `v` (implicitly) carries with it a vector space (not up to isomorphism), and we are checking to see if the Coxeter group has a defined action on that vector space. An alternative viewpoint is if `v` is a Sage vector, in a way, we are only considering that element up to isomorphism, so we have lost some information (but again, that is if we don't fix a representation which makes a canonical choice of basis for the vector space). In contrast, for `v` being an element of the root/weight/ambient space, we have an explicit basis and we have defined where the roots are in these, so the action is well-defined and explicit.\n\n> For `ReflectionGroup` I just thought that the best is to have the method `.action` to take two parameters `side` being `\"left\"` or `\"right\"` and `on_space` being `\"primal\"` or `\"dual\"`.\n> \n> Beside that, I am okay with providing the coercion to act on the primal, but am also okay with removing it again (I am slightly in favour of keeping it though).\n\nIn case there is any ambiguity, I'm also only really advocating for using `*` in the real reflection group setting. Moreover, I think we should avoid using Sage vectors for the roots (at least in the generic parents) because there is some ambiguity about their basis.",
    "created_at": "2016-04-26T16:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294569",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@stumpc5](#comment%3A44):
> > Sage's vectors exists expressed in some canonical basis, and by doing matrix multiplication, there is an implicit assumption that these bases are the same. 
> 
> 
> I'd say that multiplying a matrix `M` with a vector `v` (as a tuple in distinction to vector space elements) is well-defined and completely independent on bases. So that's totally fine to do as `M*v`.

No, that is not true except in the most abstract sense of a linear morphism and an element of a vector space. A matrix comes with an implicit choice of a basis, and when we write vectors as tuples, there is an implicit choice of a basis as well. For example, if `M` is a diagonalizable matrix acting on a vector space `V`, we can find some basis such that `M` can be expressed as acting on scalars on that basis. While the diagonal matrix and `M` are different matrices, they define the *same* linear automorphism on `V`, and hence, have the same action on a vector. Yet, to do the computation, we need to express the vector in terms of our basis.

> Only if the matrix is representing a linear map and the tuple represents a vector space element there is an assumption on both being represented in the same basis. When you now represent a Coxeter group element as a matrix you make a choice of basis (which might be the root basis, its dual, some linearly independent vectors of an "ambient space", or any other) This is now what you stick this matrix to, but when you do `w*v`, one does not specify the matrix that represents `w` in some basis, so this operation is ambiguous, as it didn't specify on which space `w` acts here (i.e., it is not clear in which basis you represent `w` as a matrix for that action.

That is not how a `CoxeterMatrixGroup` or a `WeylGroup` is defined. It is given precisely by that choice of representation/matrix, so in a way, it is a Coxeter system along with a specified representation.

Also, any `v` (implicitly) carries with it a vector space (not up to isomorphism), and we are checking to see if the Coxeter group has a defined action on that vector space. An alternative viewpoint is if `v` is a Sage vector, in a way, we are only considering that element up to isomorphism, so we have lost some information (but again, that is if we don't fix a representation which makes a canonical choice of basis for the vector space). In contrast, for `v` being an element of the root/weight/ambient space, we have an explicit basis and we have defined where the roots are in these, so the action is well-defined and explicit.

> For `ReflectionGroup` I just thought that the best is to have the method `.action` to take two parameters `side` being `"left"` or `"right"` and `on_space` being `"primal"` or `"dual"`.
> 
> Beside that, I am okay with providing the coercion to act on the primal, but am also okay with removing it again (I am slightly in favour of keeping it though).

In case there is any ambiguity, I'm also only really advocating for using `*` in the real reflection group setting. Moreover, I think we should avoid using Sage vectors for the roots (at least in the generic parents) because there is some ambiguity about their basis.



---

archive/issue_comments_294570.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@tscrim](#comment%3A45):\n> No, that is not true except in the most abstract sense of a linear morphism and an element of a vector space. A matrix comes with an implicit choice of a basis, and when we write vectors as tuples, there is an implicit choice of a basis as well.\n\nThe point I wanted to make is that given a field k, you can define an nxn matrix M over k as a table of entries in k and you can define an n-tuple to be an n-tuple x of entries in k, and you can multiply them Mx by some explicit row-column definition. At this point, there is no basis involved. One can even enrich the set k^n with a vector space structure and then see the multiplication by M at a linear map without ever talking about bases. And this multiplication is defined in Sage, even if k is not a field so there is no as simple concept of bases.\n\nOnly if one wants to consider a k-linear map phi : V -> V on a vector space V over k as a matrix, then the basis comes into play.\n\nOf course one could say that k^n has an implicit basis in which the above matrix represents a linear map, but that is not quite adequate since k^n comes with a canonical standard basis, so there is no choice of an implicit basis.\n\n> For example, if `M` is a diagonalizable matrix acting on a vector space `V`,\n\nin your argument, you always assume a general vector space V, there I agree that you play with explicit or implicit bases.\n\n> That is not how a `CoxeterMatrixGroup` or a `WeylGroup` is defined. It is given precisely by that choice of representation/matrix, so in a way, it is a Coxeter system along with a specified representation.\n\nThat's right, and I am fine with arguing that this action of the group should be used when doing `w*v`. But there are still other spaces involved on which the group also acts, so if you do not specify which space `v` lives in one has to **implicitly** assume it to be this representation.\n\n> In case there is any ambiguity, I'm also only really advocating for using `*` in the real reflection group setting.\n\nMy proposition for reflection groups at the moment is\n\n* have a method `.action(vec, side=\"left\", on_space=\"primal\")` that does the appropriate action, and\n* have `._act_on_(vec, self_on_left)` defined as `.action(vec, side=side, on_space=\"primal\")` where the side is set depending on self_on_left being `True` or `False`.\n\n> Moreover, I think we should avoid using Sage vectors for the roots (at least in the generic parents) because there is some ambiguity about their basis.\n\nI agree, but I have not yet implemented root spaces and coroot spaces for crg's. So I don't have anything better to provide for now than vectors. But that's on the todo list...",
    "created_at": "2016-04-26T17:31:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294570",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@tscrim](#comment%3A45):
> No, that is not true except in the most abstract sense of a linear morphism and an element of a vector space. A matrix comes with an implicit choice of a basis, and when we write vectors as tuples, there is an implicit choice of a basis as well.

The point I wanted to make is that given a field k, you can define an nxn matrix M over k as a table of entries in k and you can define an n-tuple to be an n-tuple x of entries in k, and you can multiply them Mx by some explicit row-column definition. At this point, there is no basis involved. One can even enrich the set k^n with a vector space structure and then see the multiplication by M at a linear map without ever talking about bases. And this multiplication is defined in Sage, even if k is not a field so there is no as simple concept of bases.

Only if one wants to consider a k-linear map phi : V -> V on a vector space V over k as a matrix, then the basis comes into play.

Of course one could say that k^n has an implicit basis in which the above matrix represents a linear map, but that is not quite adequate since k^n comes with a canonical standard basis, so there is no choice of an implicit basis.

> For example, if `M` is a diagonalizable matrix acting on a vector space `V`,

in your argument, you always assume a general vector space V, there I agree that you play with explicit or implicit bases.

> That is not how a `CoxeterMatrixGroup` or a `WeylGroup` is defined. It is given precisely by that choice of representation/matrix, so in a way, it is a Coxeter system along with a specified representation.

That's right, and I am fine with arguing that this action of the group should be used when doing `w*v`. But there are still other spaces involved on which the group also acts, so if you do not specify which space `v` lives in one has to **implicitly** assume it to be this representation.

> In case there is any ambiguity, I'm also only really advocating for using `*` in the real reflection group setting.

My proposition for reflection groups at the moment is

* have a method `.action(vec, side="left", on_space="primal")` that does the appropriate action, and
* have `._act_on_(vec, self_on_left)` defined as `.action(vec, side=side, on_space="primal")` where the side is set depending on self_on_left being `True` or `False`.

> Moreover, I think we should avoid using Sage vectors for the roots (at least in the generic parents) because there is some ambiguity about their basis.

I agree, but I have not yet implemented root spaces and coroot spaces for crg's. So I don't have anything better to provide for now than vectors. But that's on the todo list...



---

archive/issue_comments_294571.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nOne quick question outside of finite type Weyl and Coxeter groups `W`: is it correct that the actions of `W` on `V` and on `V^*` are the same. This is, the image of (x1,...,xn) under `w` is the same for (x1,...,xn) being a vector in `V` expressed in the basis {ei} and being a vector in `V^*` expressed in the dual basis {xi}?",
    "created_at": "2016-04-26T17:35:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294571",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:47" align="right">comment:47</div>

One quick question outside of finite type Weyl and Coxeter groups `W`: is it correct that the actions of `W` on `V` and on `V^*` are the same. This is, the image of (x1,...,xn) under `w` is the same for (x1,...,xn) being a vector in `V` expressed in the basis {ei} and being a vector in `V^*` expressed in the dual basis {xi}?



---

archive/issue_comments_294572.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@stumpc5](#comment%3A46):\n> Replying to [@tscrim](#comment%3A45):\n> Of course one could say that k<sup>n</sup> has an implicit basis in which the above matrix represents a linear map, but that is not quite adequate since k<sup>n</sup> comes with a canonical standard basis, so there is no choice of an implicit basis.\n\nThere is a standard basis, but it is not canonical.\n\n> > That is not how a `CoxeterMatrixGroup` or a `WeylGroup` is defined. It is given precisely by that choice of representation/matrix, so in a way, it is a Coxeter system along with a specified representation.\n> \n> \n> That's right, and I am fine with arguing that this action of the group should be used when doing `w*v`. But there are still other spaces involved on which the group also acts, so if you do not specify which space `v` lives in one has to **implicitly** assume it to be this representation.\n\nThis is no more implicit than the relationship with the chosen basis of a matrix and a vector. I still contend that by fixing a representation, we now have a canonical basis for `V` (and we implicitly assume `v` is an element of `V`). For good reasons, we can't tell if `v` is to be considered an element in the representation or some other (isomorphic) vector space.\n\n> > In case there is any ambiguity, I'm also only really advocating for using `*` in the real reflection group setting.\n> \n> \n> My proposition for reflection groups at the moment is\n> \n> * have a method `.action(vec, side=\"left\", on_space=\"primal\")` that does the appropriate action, and\n> * have `._act_on_(vec, self_on_left)` defined as `.action(vec, side=side, on_space=\"primal\")` where the side is set depending on self_on_left being `True` or `False`.\n\nThat is good with me.",
    "created_at": "2016-04-27T04:56:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294572",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@stumpc5](#comment%3A46):
> Replying to [@tscrim](#comment%3A45):
> Of course one could say that k<sup>n</sup> has an implicit basis in which the above matrix represents a linear map, but that is not quite adequate since k<sup>n</sup> comes with a canonical standard basis, so there is no choice of an implicit basis.

There is a standard basis, but it is not canonical.

> > That is not how a `CoxeterMatrixGroup` or a `WeylGroup` is defined. It is given precisely by that choice of representation/matrix, so in a way, it is a Coxeter system along with a specified representation.
> 
> 
> That's right, and I am fine with arguing that this action of the group should be used when doing `w*v`. But there are still other spaces involved on which the group also acts, so if you do not specify which space `v` lives in one has to **implicitly** assume it to be this representation.

This is no more implicit than the relationship with the chosen basis of a matrix and a vector. I still contend that by fixing a representation, we now have a canonical basis for `V` (and we implicitly assume `v` is an element of `V`). For good reasons, we can't tell if `v` is to be considered an element in the representation or some other (isomorphic) vector space.

> > In case there is any ambiguity, I'm also only really advocating for using `*` in the real reflection group setting.
> 
> 
> My proposition for reflection groups at the moment is
> 
> * have a method `.action(vec, side="left", on_space="primal")` that does the appropriate action, and
> * have `._act_on_(vec, self_on_left)` defined as `.action(vec, side=side, on_space="primal")` where the side is set depending on self_on_left being `True` or `False`.

That is good with me.



---

archive/issue_comments_294573.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@tscrim](#comment%3A48):\n> There is a standard basis, but it is not canonical.\n\nOkay, let's agree that we both know the situation, but that we do not agree which structure to emphasize...\n\n> > * have a method `.action(vec, side=\"left\", on_space=\"primal\")` that does the appropriate action, and\n> > * have `._act_on_(vec, self_on_left)` defined as `.action(vec, side=side, on_space=\"primal\")` where the side is set depending on self_on_left being `True` or `False`.\n> \n> \n> That is good with me.\n\nGood!\n\n`@`Nicolas, do you agree this to be reasonable or do even not like this usage of the coercion?",
    "created_at": "2016-04-27T05:44:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294573",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@tscrim](#comment%3A48):
> There is a standard basis, but it is not canonical.

Okay, let's agree that we both know the situation, but that we do not agree which structure to emphasize...

> > * have a method `.action(vec, side="left", on_space="primal")` that does the appropriate action, and
> > * have `._act_on_(vec, self_on_left)` defined as `.action(vec, side=side, on_space="primal")` where the side is set depending on self_on_left being `True` or `False`.
> 
> 
> That is good with me.

Good!

`@`Nicolas, do you agree this to be reasonable or do even not like this usage of the coercion?



---

archive/issue_comments_294574.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@stumpc5](#comment%3A49):\n> `@`Nicolas, do you agree this to be reasonable or do even not like this usage of the coercion?\n\nWhen in doubt, I tend to take the path that is easier to change in the\nfuture in case one change one's mind after gaining more experience. In\nthis case, it's easier to add the coercion later on than to remove it,\nor replace it by something else.\n\nBut that's no strong opinion. Proceed as you believe is right.\n\nCheers,",
    "created_at": "2016-04-27T16:11:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294574",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@stumpc5](#comment%3A49):
> `@`Nicolas, do you agree this to be reasonable or do even not like this usage of the coercion?

When in doubt, I tend to take the path that is easier to change in the
future in case one change one's mind after gaining more experience. In
this case, it's easier to add the coercion later on than to remove it,
or replace it by something else.

But that's no strong opinion. Proceed as you believe is right.

Cheers,



---

archive/issue_comments_294575.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd4413d10a3eac41b84bdb4ebdd1f17879b19abc\"><code>dd4413d</code></a></td><td><code>edited the reflection representation and its dual -- still to be tested</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29842f6baa18cacfc80d5007cc87bfb058d475a4\"><code>29842f6</code></a></td><td><code>still working on the left/right primal/dual repr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/619ba6e8422ce14b34cbfed3d9f982a72cf27183\"><code>619ba6e</code></a></td><td><code>doubled all doctests to ReflectionGroup and CoxeterGroup</code></td></tr></table>\n",
    "created_at": "2016-04-29T19:49:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294575",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd4413d10a3eac41b84bdb4ebdd1f17879b19abc"><code>dd4413d</code></a></td><td><code>edited the reflection representation and its dual -- still to be tested</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29842f6baa18cacfc80d5007cc87bfb058d475a4"><code>29842f6</code></a></td><td><code>still working on the left/right primal/dual repr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/619ba6e8422ce14b34cbfed3d9f982a72cf27183"><code>619ba6e</code></a></td><td><code>doubled all doctests to ReflectionGroup and CoxeterGroup</code></td></tr></table>




---

archive/issue_comments_294576.json:
```json
{
    "body": "Changed commit from **[`295d784`](https://github.com/sagemath/sagetrac-mirror/commit/295d784db0ae24bed97ed7b4d3777df9dbd652c2)** to **[`619ba6e`](https://github.com/sagemath/sagetrac-mirror/commit/619ba6e8422ce14b34cbfed3d9f982a72cf27183)**",
    "created_at": "2016-04-29T19:49:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294576",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`295d784`](https://github.com/sagemath/sagetrac-mirror/commit/295d784db0ae24bed97ed7b4d3777df9dbd652c2)** to **[`619ba6e`](https://github.com/sagemath/sagetrac-mirror/commit/619ba6e8422ce14b34cbfed3d9f982a72cf27183)**



---

archive/issue_comments_294577.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nI am still struggling with the left/right action -- here, we want left actions (i.e., matrix*vector), but the standard for reflection groups is right action. I know how to turn left to right action for real and for well-generated groups, but still don't get it right to have it for the badly generated groups.\n\nActually, this shouldn't hold this ticket of, but I haven't resorted things yet...",
    "created_at": "2016-04-29T19:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294577",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:52" align="right">comment:52</div>

I am still struggling with the left/right action -- here, we want left actions (i.e., matrix*vector), but the standard for reflection groups is right action. I know how to turn left to right action for real and for well-generated groups, but still don't get it right to have it for the badly generated groups.

Actually, this shouldn't hold this ticket of, but I haven't resorted things yet...



---

archive/issue_comments_294578.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0353a5ff43a9c1c5b113379513350a194416dc8\"><code>f0353a5</code></a></td><td><code>working out the left/right action</code></td></tr></table>\n",
    "created_at": "2016-04-30T05:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294578",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0353a5ff43a9c1c5b113379513350a194416dc8"><code>f0353a5</code></a></td><td><code>working out the left/right action</code></td></tr></table>




---

archive/issue_comments_294579.json:
```json
{
    "body": "Changed commit from **[`619ba6e`](https://github.com/sagemath/sagetrac-mirror/commit/619ba6e8422ce14b34cbfed3d9f982a72cf27183)** to **[`f0353a5`](https://github.com/sagemath/sagetrac-mirror/commit/f0353a5ff43a9c1c5b113379513350a194416dc8)**",
    "created_at": "2016-04-30T05:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294579",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`619ba6e`](https://github.com/sagemath/sagetrac-mirror/commit/619ba6e8422ce14b34cbfed3d9f982a72cf27183)** to **[`f0353a5`](https://github.com/sagemath/sagetrac-mirror/commit/f0353a5ff43a9c1c5b113379513350a194416dc8)**



---

archive/issue_comments_294580.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5076f0bfcaae0e7592262d1bddc0df9ff5452230\"><code>5076f0b</code></a></td><td><code>Merge branch 'develop' into u/stumpc5/20402</code></td></tr></table>\n",
    "created_at": "2016-04-30T08:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294580",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5076f0bfcaae0e7592262d1bddc0df9ff5452230"><code>5076f0b</code></a></td><td><code>Merge branch 'develop' into u/stumpc5/20402</code></td></tr></table>




---

archive/issue_comments_294581.json:
```json
{
    "body": "Changed commit from **[`f0353a5`](https://github.com/sagemath/sagetrac-mirror/commit/f0353a5ff43a9c1c5b113379513350a194416dc8)** to **[`5076f0b`](https://github.com/sagemath/sagetrac-mirror/commit/5076f0bfcaae0e7592262d1bddc0df9ff5452230)**",
    "created_at": "2016-04-30T08:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294581",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f0353a5`](https://github.com/sagemath/sagetrac-mirror/commit/f0353a5ff43a9c1c5b113379513350a194416dc8)** to **[`5076f0b`](https://github.com/sagemath/sagetrac-mirror/commit/5076f0bfcaae0e7592262d1bddc0df9ff5452230)**



---

archive/issue_comments_294582.json:
```json
{
    "body": "Changed dependencies from **#11187** to **#11187, #20521**",
    "created_at": "2016-04-30T08:37:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294582",
    "user": "https://github.com/stumpc5"
}
```

Changed dependencies from **#11187** to **#11187, #20521**



---

archive/issue_comments_294583.json:
```json
{
    "body": "Changed commit from **[`5076f0b`](https://github.com/sagemath/sagetrac-mirror/commit/5076f0bfcaae0e7592262d1bddc0df9ff5452230)** to **[`8ffeaf9`](https://github.com/sagemath/sagetrac-mirror/commit/8ffeaf9449529ed0f1d05007fc16a3ae4c5143f5)**",
    "created_at": "2016-04-30T08:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294583",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5076f0b`](https://github.com/sagemath/sagetrac-mirror/commit/5076f0bfcaae0e7592262d1bddc0df9ff5452230)** to **[`8ffeaf9`](https://github.com/sagemath/sagetrac-mirror/commit/8ffeaf9449529ed0f1d05007fc16a3ae4c5143f5)**



---

archive/issue_comments_294584.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f25f5d6f8f5f7abf157088c9429e6a6355942fe1\"><code>f25f5d6</code></a></td><td><code>take over the implementation from #20402</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e557e23840e48d7c00524edea2f7a70e3f39573\"><code>9e557e2</code></a></td><td><code>fixing a few doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0ebcca6a74a37dc81d2ec85c0f5ab8fb634dc51\"><code>c0ebcca</code></a></td><td><code>merged 20521</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5a56ccd0c240d24950e9e969511ac55b3fa1910\"><code>b5a56cc</code></a></td><td><code>added indirect doctest flags</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ffeaf9449529ed0f1d05007fc16a3ae4c5143f5\"><code>8ffeaf9</code></a></td><td><code>Merge branch 'u/stumpc5/20521' into u/stumpc5/20402</code></td></tr></table>\n",
    "created_at": "2016-04-30T08:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294584",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f25f5d6f8f5f7abf157088c9429e6a6355942fe1"><code>f25f5d6</code></a></td><td><code>take over the implementation from #20402</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e557e23840e48d7c00524edea2f7a70e3f39573"><code>9e557e2</code></a></td><td><code>fixing a few doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0ebcca6a74a37dc81d2ec85c0f5ab8fb634dc51"><code>c0ebcca</code></a></td><td><code>merged 20521</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5a56ccd0c240d24950e9e969511ac55b3fa1910"><code>b5a56cc</code></a></td><td><code>added indirect doctest flags</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ffeaf9449529ed0f1d05007fc16a3ae4c5143f5"><code>8ffeaf9</code></a></td><td><code>Merge branch 'u/stumpc5/20521' into u/stumpc5/20402</code></td></tr></table>




---

archive/issue_events_285232.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2016-04-30T08:48:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285232"
}
```



---

archive/issue_events_285233.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2016-04-30T08:48:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285233"
}
```



---

archive/issue_comments_294585.json:
```json
{
    "body": "Changed dependencies from **#11187, #20521** to **#20521**",
    "created_at": "2016-04-30T08:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294585",
    "user": "https://github.com/stumpc5"
}
```

Changed dependencies from **#11187, #20521** to **#20521**



---

archive/issue_comments_294586.json:
```json
{
    "body": "Changed commit from **[`8ffeaf9`](https://github.com/sagemath/sagetrac-mirror/commit/8ffeaf9449529ed0f1d05007fc16a3ae4c5143f5)** to **[`03b1ae0`](https://github.com/sagemath/sagetrac-mirror/commit/03b1ae00fbf0857b4ee29e819008d01f751dbdae)**",
    "created_at": "2016-04-30T20:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294586",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8ffeaf9`](https://github.com/sagemath/sagetrac-mirror/commit/8ffeaf9449529ed0f1d05007fc16a3ae4c5143f5)** to **[`03b1ae0`](https://github.com/sagemath/sagetrac-mirror/commit/03b1ae00fbf0857b4ee29e819008d01f751dbdae)**



---

archive/issue_comments_294587.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eaa9da0dc1ca6332fda0569dfcc698c4fde0a669\"><code>eaa9da0</code></a></td><td><code>Some minor reviewer changes.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e71529efca88b4fa8c3fb7b67924333fd75041fb\"><code>e71529e</code></a></td><td><code>minor improvement of as_matrix + removal of todo note</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03b1ae00fbf0857b4ee29e819008d01f751dbdae\"><code>03b1ae0</code></a></td><td><code>Merge branch 'u/stumpc5/20521' into u/stumpc5/20402</code></td></tr></table>\n",
    "created_at": "2016-04-30T20:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294587",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eaa9da0dc1ca6332fda0569dfcc698c4fde0a669"><code>eaa9da0</code></a></td><td><code>Some minor reviewer changes.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e71529efca88b4fa8c3fb7b67924333fd75041fb"><code>e71529e</code></a></td><td><code>minor improvement of as_matrix + removal of todo note</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03b1ae00fbf0857b4ee29e819008d01f751dbdae"><code>03b1ae0</code></a></td><td><code>Merge branch 'u/stumpc5/20521' into u/stumpc5/20402</code></td></tr></table>




---

archive/issue_comments_294588.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nI just rechecked -- beside the changes now moved to #20521 and the few changes in `coxeter_groups.py`, there are almost entirely newly added doctests for `ReflectionGroup`.",
    "created_at": "2016-04-30T20:25:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294588",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:59" align="right">comment:59</div>

I just rechecked -- beside the changes now moved to #20521 and the few changes in `coxeter_groups.py`, there are almost entirely newly added doctests for `ReflectionGroup`.



---

archive/issue_comments_294589.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nInstead of\n\n```\nprint \"Caution: the Minkowski summands are build with rational vertices.\"\n```\n(which it should be print(\"foo\") to be Python3 compatible) you should use Sage's warning mechanism:\n\n```\nfrom warnings import warn\nwarn(\"foo\", RuntimeWarning)\n```\nOtherwise LGTM.",
    "created_at": "2016-04-30T20:36:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294589",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:60" align="right">comment:60</div>

Instead of

```
print "Caution: the Minkowski summands are build with rational vertices."
```
(which it should be print("foo") to be Python3 compatible) you should use Sage's warning mechanism:

```
from warnings import warn
warn("foo", RuntimeWarning)
```
Otherwise LGTM.



---

archive/issue_comments_294590.json:
```json
{
    "body": "Changed commit from **[`03b1ae0`](https://github.com/sagemath/sagetrac-mirror/commit/03b1ae00fbf0857b4ee29e819008d01f751dbdae)** to **[`71eba72`](https://github.com/sagemath/sagetrac-mirror/commit/71eba72e896ba17314bcab6965f33005d02a26e4)**",
    "created_at": "2016-04-30T20:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294590",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`03b1ae0`](https://github.com/sagemath/sagetrac-mirror/commit/03b1ae00fbf0857b4ee29e819008d01f751dbdae)** to **[`71eba72`](https://github.com/sagemath/sagetrac-mirror/commit/71eba72e896ba17314bcab6965f33005d02a26e4)**



---

archive/issue_comments_294591.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71eba72e896ba17314bcab6965f33005d02a26e4\"><code>71eba72</code></a></td><td><code>using python warnings</code></td></tr></table>\n",
    "created_at": "2016-04-30T20:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294591",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71eba72e896ba17314bcab6965f33005d02a26e4"><code>71eba72</code></a></td><td><code>using python warnings</code></td></tr></table>




---

archive/issue_comments_294592.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nDone, thx also here! -- more improvements to come hopefully soon...",
    "created_at": "2016-04-30T20:58:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294592",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:62" align="right">comment:62</div>

Done, thx also here! -- more improvements to come hopefully soon...



---

archive/issue_comments_294593.json:
```json
{
    "body": "Reviewer: **Frederic Chapoton, Travis Scrimshaw**",
    "created_at": "2016-04-30T20:58:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294593",
    "user": "https://github.com/stumpc5"
}
```

Reviewer: **Frederic Chapoton, Travis Scrimshaw**



---

archive/issue_comments_294594.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nFr\u00e9d\u00e9ric, Nicolas, anything else before setting this to a positive review?",
    "created_at": "2016-04-30T23:01:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294594",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:63" align="right">comment:63</div>

Frédéric, Nicolas, anything else before setting this to a positive review?



---

archive/issue_comments_294595.json:
```json
{
    "body": "Changed reviewer from **Frederic Chapoton, Travis Scrimshaw** to **Fr\u00e9d\u00e9ric Chapoton, Travis Scrimshaw**",
    "created_at": "2016-04-30T23:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294595",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Frederic Chapoton, Travis Scrimshaw** to **Frédéric Chapoton, Travis Scrimshaw**



---

archive/issue_comments_294596.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nA quick *ping* here to check whether we can get this ticket merged...",
    "created_at": "2016-05-04T11:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294596",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:65" align="right">comment:65</div>

A quick *ping* here to check whether we can get this ticket merged...



---

archive/issue_comments_294597.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nIf there is possibly anything else, then they can set this back from a positive review.",
    "created_at": "2016-05-04T14:58:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294597",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:66" align="right">comment:66</div>

If there is possibly anything else, then they can set this back from a positive review.



---

archive/issue_events_285234.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-05-04T14:58:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285234"
}
```



---

archive/issue_events_285235.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-05-04T14:58:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285235"
}
```



---

archive/issue_events_285236.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-05T09:27:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285236"
}
```



---

archive/issue_events_285237.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "08e4158ebf7c1cc86d73de29955e2cda917cb1fd",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-05-05T09:27:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20402#event-285237"
}
```



---

archive/issue_comments_294598.json:
```json
{
    "body": "Changed branch from **[u/stumpc5/20402](https://github.com/sagemath/sagetrac-mirror/tree/u/stumpc5/20402)** to **[`71eba72`](https://github.com/sagemath/sagetrac-mirror/commit/71eba72e896ba17314bcab6965f33005d02a26e4)**",
    "created_at": "2016-05-05T09:27:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20402#issuecomment-294598",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/stumpc5/20402](https://github.com/sagemath/sagetrac-mirror/tree/u/stumpc5/20402)** to **[`71eba72`](https://github.com/sagemath/sagetrac-mirror/commit/71eba72e896ba17314bcab6965f33005d02a26e4)**
