# Issue 20484: Use the cythonized versions of has_descent, first_descent, descents for reflection groups

archive/issues_020247.json:
```json
{
    "body": "These methods are already included in #20445 and should be factored out. That will in particular speed subword complexes a lot, see #20402.\n\nCC:  @tscrim @fchapoton @nthiery vripoll\n\nReviewer: Christian Stump\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/20484\n\n",
    "closed_at": "2019-02-26T13:58:00Z",
    "created_at": "2016-04-22T06:51:28Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Use the cythonized versions of has_descent, first_descent, descents for reflection groups",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20484",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
These methods are already included in #20445 and should be factored out. That will in particular speed subword complexes a lot, see #20402.

CC:  @tscrim @fchapoton @nthiery vripoll

Reviewer: Christian Stump

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/20484





---

archive/issue_comments_366983.json:
```json
{
    "body": "<a id='comment:1'></a>\nFor the record: subword complexes would appreciate fast `apply_simple_reflection_left` and `has_left_descent`, see\n\n```\nsage:W = ReflectionGroup(['A',8])\nsage: c = W.index_set(); Q = c + tuple(W.w0.coxeter_sorting_word(c))\nsage: %prun SC = SubwordComplex(Q,W.w0)\n\n4679142 function calls (4679130 primitive calls) in 8.222 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n   772419    2.634    0.000    3.119    0.000 complex_reflection_or_generalized_coxeter_groups.py:831(apply_simple_reflection_left)\n  1163569    2.464    0.000    2.648    0.000 reflection_group_real.py:771(has_left_descent)\n        1    2.229    2.229    7.997    7.997 {sage.combinat.subword_complex_c._construct_facets_c}\n```",
    "created_at": "2016-04-25T09:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366983",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:1'></a>
For the record: subword complexes would appreciate fast `apply_simple_reflection_left` and `has_left_descent`, see

```
sage:W = ReflectionGroup(['A',8])
sage: c = W.index_set(); Q = c + tuple(W.w0.coxeter_sorting_word(c))
sage: %prun SC = SubwordComplex(Q,W.w0)

4679142 function calls (4679130 primitive calls) in 8.222 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
   772419    2.634    0.000    3.119    0.000 complex_reflection_or_generalized_coxeter_groups.py:831(apply_simple_reflection_left)
  1163569    2.464    0.000    2.648    0.000 reflection_group_real.py:771(has_left_descent)
        1    2.229    2.229    7.997    7.997 {sage.combinat.subword_complex_c._construct_facets_c}
```



---

archive/issue_comments_366984.json:
```json
{
    "body": "<a id='comment:2'></a>\nAnd also:\n\n```\nsage:W = ReflectionGroup(['A',7])\nsage: c = W.index_set(); Q = c + tuple(W.w0.coxeter_sorting_word(c))\nsage: %prun SC = SubwordComplex(Q,W.w0,algorithm=\"greedy\")\n\n         4605779 function calls (4605355 primitive calls) in 8.236 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n   560742    1.870    0.000    4.946    0.000 reflection_group_real.py:790(has_descent)\n   560742    1.363    0.000    2.774    0.000 coxeter_groups.py:717(has_right_descent)\n   560770    1.321    0.000    1.412    0.000 reflection_group_real.py:771(has_left_descent)\n   178698    0.744    0.000    5.690    0.000 coxeter_groups.py:763(first_descent)\n```",
    "created_at": "2016-04-25T09:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366984",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:2'></a>
And also:

```
sage:W = ReflectionGroup(['A',7])
sage: c = W.index_set(); Q = c + tuple(W.w0.coxeter_sorting_word(c))
sage: %prun SC = SubwordComplex(Q,W.w0,algorithm="greedy")

         4605779 function calls (4605355 primitive calls) in 8.236 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
   560742    1.870    0.000    4.946    0.000 reflection_group_real.py:790(has_descent)
   560742    1.363    0.000    2.774    0.000 coxeter_groups.py:717(has_right_descent)
   560770    1.321    0.000    1.412    0.000 reflection_group_real.py:771(has_left_descent)
   178698    0.744    0.000    5.690    0.000 coxeter_groups.py:763(first_descent)
```



---

archive/issue_comments_366985.json:
```json
{
    "body": "<a id='comment:3'></a>\nI just made a branch. Not having chevie, I have no way to tell if this is faster than before.\n\n---\nNew commits:\n|                                                                                                                                          |                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[c9bdf03](https://github.com/sagemath/sagetrac-mirror/commit/c9bdf03eb93aad748849c366229a2d4e610c90ce)|`trac 20484 first try`|",
    "created_at": "2016-09-20T15:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366985",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
I just made a branch. Not having chevie, I have no way to tell if this is faster than before.

---
New commits:
|                                                                                                                                          |                      |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[c9bdf03](https://github.com/sagemath/sagetrac-mirror/commit/c9bdf03eb93aad748849c366229a2d4e610c90ce)|`trac 20484 first try`|



---

archive/issue_comments_366986.json:
```json
{
    "body": "Changing branch from \"\" to \"public/20484\"",
    "created_at": "2016-09-20T15:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366986",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "public/20484"



---

archive/issue_comments_366987.json:
```json
{
    "body": "Changing commit from \"\" to \"c9bdf03eb93aad748849c366229a2d4e610c90ce\"",
    "created_at": "2016-09-20T15:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366987",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "c9bdf03eb93aad748849c366229a2d4e610c90ce"



---

archive/issue_comments_366988.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis was (mostly) taken care of indirectly on #22600.",
    "created_at": "2018-05-28T08:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366988",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
This was (mostly) taken care of indirectly on #22600.



---

archive/issue_comments_366989.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-28T08:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366989",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_events_070765.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-05-28T08:11:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20484#event-70765"
}
```



---

archive/issue_comments_366990.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-28T08:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366990",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_366991.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Christian Stump\"",
    "created_at": "2018-05-28T08:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366991",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Christian Stump"



---

archive/issue_comments_366992.json:
```json
{
    "body": "<a id='comment:6'></a>\nChristian over my laptop concurs.",
    "created_at": "2018-05-28T08:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366992",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>
Christian over my laptop concurs.



---

archive/issue_comments_366993.json:
```json
{
    "body": "<a id='comment:7'></a>\nSind Sie in Berlin ?\n\nWould you guys have a little time to look at the failures in the python3-docbuild that are related to crystals ? See there for the log (search for `Error:` and `AttributeError: 'RootSystem' object has no attribute 'dual'`)\n\nhttps://patchbot.sagemath.org/log/0/Ubuntu/18.04/x86_64/4.15.0-20-generic/petitbonum/2018-05-27%2021:55:21?plugin=docbuild",
    "created_at": "2018-05-28T08:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366993",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
Sind Sie in Berlin ?

Would you guys have a little time to look at the failures in the python3-docbuild that are related to crystals ? See there for the log (search for `Error:` and `AttributeError: 'RootSystem' object has no attribute 'dual'`)

https://patchbot.sagemath.org/log/0/Ubuntu/18.04/x86_64/4.15.0-20-generic/petitbonum/2018-05-27%2021:55:21?plugin=docbuild



---

archive/issue_comments_366994.json:
```json
{
    "body": "<a id='comment:8'></a>\nthe branch is red..",
    "created_at": "2018-05-31T05:54:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366994",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
the branch is red..



---

archive/issue_comments_366995.json:
```json
{
    "body": "Changing commit from \"c9bdf03eb93aad748849c366229a2d4e610c90ce\" to \"\"",
    "created_at": "2018-05-31T06:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366995",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "c9bdf03eb93aad748849c366229a2d4e610c90ce" to ""



---

archive/issue_comments_366996.json:
```json
{
    "body": "<a id='comment:9'></a>\nSee[comment:4](#comment%3A4)",
    "created_at": "2018-05-31T06:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366996",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
See[comment:4](#comment%3A4)



---

archive/issue_comments_366997.json:
```json
{
    "body": "Changing branch from \"public/20484\" to \"\"",
    "created_at": "2018-05-31T06:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366997",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "public/20484" to ""



---

archive/issue_events_070766.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-26T13:58:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20484#event-70766"
}
```



---

archive/issue_comments_366998.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2019-02-26T13:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366998",
    "user": "https://github.com/embray"
}
```

Resolution: invalid



---

archive/issue_comments_366999.json:
```json
{
    "body": "<a id='comment:10'></a>\nPresuming these are all correctly reviewed as either duplicate, invalid, or wontfix.",
    "created_at": "2019-02-26T13:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20484#issuecomment-366999",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>
Presuming these are all correctly reviewed as either duplicate, invalid, or wontfix.
