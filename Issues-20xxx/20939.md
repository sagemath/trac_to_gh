# Issue 20939: Fix crash and remove pexpect-Maxima usage in Y(m,n)

archive/issues_020702.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage: spherical_harmonic(3, 2, 1, 2*pi/3)\n...\nTypeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.\n```\nThe eval function of `SphericalHarmonic` uses pexpect-Maxima. Since this needs only a formula the call to Maxima could be replaced by a few lines of Python.\n\nhttp://dlmf.nist.gov/14.30.E1\n\nReplacing pexpect-Maxima is part of #17753.\n\nDepends on #21614\nDepends on #21963\n\nBranch/Commit: **[`bb4630f`](https://github.com/sagemath/sagetrac-mirror/commit/bb4630fa7a2ac6b9b0a1d98486378877fe60f97c)**\n\nUpstream: **Fixed upstream, in a later stable release.**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Ralf Stephan**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20939_\n\n",
    "closed_at": "2017-01-18T20:39:50Z",
    "created_at": "2016-07-05T07:20:36Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix crash and remove pexpect-Maxima usage in Y(m,n)",
    "type": "issue",
    "updated_at": "2017-01-18T20:39:50Z",
    "url": "https://github.com/sagemath/sage/issues/20939",
    "user": "https://github.com/rwst"
}
```

```
sage: spherical_harmonic(3, 2, 1, 2*pi/3)
...
TypeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.
```
The eval function of `SphericalHarmonic` uses pexpect-Maxima. Since this needs only a formula the call to Maxima could be replaced by a few lines of Python.

http://dlmf.nist.gov/14.30.E1

Replacing pexpect-Maxima is part of #17753.

Depends on #21614
Depends on #21963

Branch/Commit: **[`bb4630f`](https://github.com/sagemath/sagetrac-mirror/commit/bb4630fa7a2ac6b9b0a1d98486378877fe60f97c)**

Upstream: **Fixed upstream, in a later stable release.**

Reviewer: **Travis Scrimshaw**

Author: **Ralf Stephan**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/20939_





---

archive/issue_events_294642.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-07-05T07:20:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294642"
}
```



---

archive/issue_events_294643.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-07-05T07:20:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294643"
}
```



---

archive/issue_events_294644.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-07-05T07:20:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294644"
}
```



---

archive/issue_events_294645.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-07-05T07:20:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294645"
}
```



---

archive/issue_comments_304308.json:
```json
{
    "body": "Dependencies: **16813**",
    "created_at": "2016-08-04T06:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304308",
    "user": "https://github.com/rwst"
}
```

Dependencies: **16813**



---

archive/issue_comments_304309.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis depends on the associated Legendre polynomials being implemented, e,g, #16813.",
    "created_at": "2016-08-04T06:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304309",
    "user": "https://github.com/rwst"
}
```

<div id="comment:1" align="right">comment:1</div>

This depends on the associated Legendre polynomials being implemented, e,g, #16813.



---

archive/issue_comments_304310.json:
```json
{
    "body": "Changed dependencies from **16813** to **#16813**",
    "created_at": "2016-08-04T06:12:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304310",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **16813** to **#16813**



---

archive/issue_comments_304311.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIt won't be dependent on `P(l,m,x)` if the P special value formula is directly used in `_eval_`. The Y floating point evaluation is done via mpmath anyway.",
    "created_at": "2016-08-04T06:31:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304311",
    "user": "https://github.com/rwst"
}
```

<div id="comment:3" align="right">comment:3</div>

It won't be dependent on `P(l,m,x)` if the P special value formula is directly used in `_eval_`. The Y floating point evaluation is done via mpmath anyway.



---

archive/issue_comments_304312.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,11 @@\n-The eval function of `SphericalHarmonic` uses pexpect-Maxima:\n \n ```\n-        if n in ZZ and m in ZZ and n > -1:\n-            if abs(m) > n:\n-                return ZZ(0)\n-            return maxima(\"spherical_harmonic({},{},{},{})\".format(\n-                ZZ(n), ZZ(m), maxima(theta), maxima(phi))).sage()\n+sage: spherical_harmonic(3, 2, 1, 2*pi/3)\n+...\n+TypeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.\n ```\n-This should be replaced by `maxima_lib` or something different without Maxima.\n+The eval function of `SphericalHarmonic` uses pexpect-Maxima. Since this needs only a formula the call to Maxima could be replaced by a few lines of Python.\n \n-Part of #17753.\n+http://dlmf.nist.gov/14.30.E1\n+\n+Replacing pexpect-Maxima is part of #17753.\n``````\n",
    "created_at": "2016-08-04T13:24:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304312",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,11 @@
-The eval function of `SphericalHarmonic` uses pexpect-Maxima:
 
 ```
-        if n in ZZ and m in ZZ and n > -1:
-            if abs(m) > n:
-                return ZZ(0)
-            return maxima("spherical_harmonic({},{},{},{})".format(
-                ZZ(n), ZZ(m), maxima(theta), maxima(phi))).sage()
+sage: spherical_harmonic(3, 2, 1, 2*pi/3)
+...
+TypeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.
 ```
-This should be replaced by `maxima_lib` or something different without Maxima.
+The eval function of `SphericalHarmonic` uses pexpect-Maxima. Since this needs only a formula the call to Maxima could be replaced by a few lines of Python.
 
-Part of #17753.
+http://dlmf.nist.gov/14.30.E1
+
+Replacing pexpect-Maxima is part of #17753.
``````




---

archive/issue_events_294646.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-04T13:24:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294646"
}
```



---

archive/issue_events_294647.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-04T13:24:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294647"
}
```



---

archive/issue_comments_304313.json:
```json
{
    "body": "Changed dependencies from **#16813** to none",
    "created_at": "2016-08-04T13:24:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304313",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **#16813** to none



---

archive/issue_events_294648.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-04T13:24:11Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "title_is": "Fix crash and remove pexpect-Maxima usage in Y(m,n)",
    "title_was": "Remove pexpect-Maxima usage in Y(m,n)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294648"
}
```



---

archive/issue_comments_304314.json:
```json
{
    "body": "Branch: **[u/rws/remove_pexpect_maxima_usage_in_y_m_n_](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/remove_pexpect_maxima_usage_in_y_m_n_)**",
    "created_at": "2016-08-04T14:42:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304314",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/remove_pexpect_maxima_usage_in_y_m_n_](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/remove_pexpect_maxima_usage_in_y_m_n_)**



---

archive/issue_comments_304315.json:
```json
{
    "body": "Commit: **[`f233afa`](https://github.com/sagemath/sagetrac-mirror/commit/f233afa35058ab40a1f6f33e6d635e6eac515f97)**",
    "created_at": "2016-08-04T14:43:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304315",
    "user": "https://github.com/rwst"
}
```

Commit: **[`f233afa`](https://github.com/sagemath/sagetrac-mirror/commit/f233afa35058ab40a1f6f33e6d635e6eac515f97)**



---

archive/issue_events_294649.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-04T14:43:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294649"
}
```



---

archive/issue_events_294650.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-04T14:43:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294650"
}
```



---

archive/issue_events_294651.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-04T14:43:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294651"
}
```



---

archive/issue_comments_304316.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f233afa35058ab40a1f6f33e6d635e6eac515f97\"><code>f233afa</code></a></td><td><code>20939: Fix crash and remove pexpect-Maxima usage in Y(m,n)</code></td></tr></table>\n",
    "created_at": "2016-08-04T14:43:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304316",
    "user": "https://github.com/rwst"
}
```

<div id="comment:6"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f233afa35058ab40a1f6f33e6d635e6eac515f97"><code>f233afa</code></a></td><td><code>20939: Fix crash and remove pexpect-Maxima usage in Y(m,n)</code></td></tr></table>




---

archive/issue_comments_304317.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2016-08-04T14:43:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304317",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_304318.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nLGTM modulo\n\n```diff\n         Check that :trac:`20939` is fixed::\n \n             sage: spherical_harmonic(3,2,1,2*pi/3)\n             1/240*sqrt(30)*(-15*I*sqrt(7)*sqrt(3) -\n-            ...15*sqrt(7))*cos(1)*sin(1)^2/sqrt(pi)\n+            ... + 15*sqrt(7))*cos(1)*sin(1)^2/sqrt(pi)\n         \"\"\"\n         if n in ZZ and m in ZZ and n > -1:\n             if abs(m) > n:\n                 return ZZ(0)\n-            if (m == 0 and theta.is_zero()):\n+            if m == 0 and theta.is_zero():\n                 return sqrt((2*n+1)/4/pi)\n```",
    "created_at": "2016-08-04T17:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304318",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

LGTM modulo

```diff
         Check that :trac:`20939` is fixed::
 
             sage: spherical_harmonic(3,2,1,2*pi/3)
             1/240*sqrt(30)*(-15*I*sqrt(7)*sqrt(3) -
-            ...15*sqrt(7))*cos(1)*sin(1)^2/sqrt(pi)
+            ... + 15*sqrt(7))*cos(1)*sin(1)^2/sqrt(pi)
         """
         if n in ZZ and m in ZZ and n > -1:
             if abs(m) > n:
                 return ZZ(0)
-            if (m == 0 and theta.is_zero()):
+            if m == 0 and theta.is_zero():
                 return sqrt((2*n+1)/4/pi)
```



---

archive/issue_comments_304319.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2016-08-04T17:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304319",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_304320.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a5cf6b9dbf75041e634a5c0d27b0a2a09932834\"><code>1a5cf6b</code></a></td><td><code>20939: cosmetics</code></td></tr></table>\n",
    "created_at": "2016-08-05T06:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304320",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a5cf6b9dbf75041e634a5c0d27b0a2a09932834"><code>1a5cf6b</code></a></td><td><code>20939: cosmetics</code></td></tr></table>




---

archive/issue_comments_304321.json:
```json
{
    "body": "Changed commit from **[`f233afa`](https://github.com/sagemath/sagetrac-mirror/commit/f233afa35058ab40a1f6f33e6d635e6eac515f97)** to **[`1a5cf6b`](https://github.com/sagemath/sagetrac-mirror/commit/1a5cf6b9dbf75041e634a5c0d27b0a2a09932834)**",
    "created_at": "2016-08-05T06:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304321",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f233afa`](https://github.com/sagemath/sagetrac-mirror/commit/f233afa35058ab40a1f6f33e6d635e6eac515f97)** to **[`1a5cf6b`](https://github.com/sagemath/sagetrac-mirror/commit/1a5cf6b9dbf75041e634a5c0d27b0a2a09932834)**



---

archive/issue_comments_304322.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThat doesn't work as given. First the plus is a minus, and then the space after the ellipsis will make it fail too.\n\nI'll assume the last commit is still what you wanted and set positive. Just revert if not. Thanks for the review.",
    "created_at": "2016-08-05T06:22:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304322",
    "user": "https://github.com/rwst"
}
```

<div id="comment:9" align="right">comment:9</div>

That doesn't work as given. First the plus is a minus, and then the space after the ellipsis will make it fail too.

I'll assume the last commit is still what you wanted and set positive. Just revert if not. Thanks for the review.



---

archive/issue_events_294652.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-05T06:22:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294652"
}
```



---

archive/issue_events_294653.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-05T06:22:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294653"
}
```



---

archive/issue_comments_304323.json:
```json
{
    "body": "Changed commit from **[`1a5cf6b`](https://github.com/sagemath/sagetrac-mirror/commit/1a5cf6b9dbf75041e634a5c0d27b0a2a09932834)** to **[`a080e1e`](https://github.com/sagemath/sagetrac-mirror/commit/a080e1e8824bf56a760d54cbd7e6c9b79c351cef)**",
    "created_at": "2016-08-05T14:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304323",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`1a5cf6b`](https://github.com/sagemath/sagetrac-mirror/commit/1a5cf6b9dbf75041e634a5c0d27b0a2a09932834)** to **[`a080e1e`](https://github.com/sagemath/sagetrac-mirror/commit/a080e1e8824bf56a760d54cbd7e6c9b79c351cef)**



---

archive/issue_events_294654.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-08-05T14:27:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294654"
}
```



---

archive/issue_events_294655.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-08-05T14:27:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294655"
}
```



---

archive/issue_comments_304324.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nSo the `...` is actually unneeded; I was thinking there was more than 2 terms. Please check my changes.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a080e1e8824bf56a760d54cbd7e6c9b79c351cef\"><code>a080e1e</code></a></td><td><code>Removing uncessary ... in doctest.</code></td></tr></table>\n",
    "created_at": "2016-08-05T14:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304324",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

So the `...` is actually unneeded; I was thinking there was more than 2 terms. Please check my changes.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a080e1e8824bf56a760d54cbd7e6c9b79c351cef"><code>a080e1e</code></a></td><td><code>Removing uncessary ... in doctest.</code></td></tr></table>




---

archive/issue_comments_304325.json:
```json
{
    "body": "Changed branch from **[u/rws/remove_pexpect_maxima_usage_in_y_m_n_](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/remove_pexpect_maxima_usage_in_y_m_n_)** to **[u/tscrim/remove_pexpect_maxima_in_ymn-20939](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/remove_pexpect_maxima_in_ymn-20939)**",
    "created_at": "2016-08-05T14:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304325",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/rws/remove_pexpect_maxima_usage_in_y_m_n_](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/remove_pexpect_maxima_usage_in_y_m_n_)** to **[u/tscrim/remove_pexpect_maxima_in_ymn-20939](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/remove_pexpect_maxima_in_ymn-20939)**



---

archive/issue_events_294656.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-05T14:55:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294656"
}
```



---

archive/issue_events_294657.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-05T14:55:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294657"
}
```



---

archive/issue_events_294658.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-06T11:14:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294658"
}
```



---

archive/issue_events_294659.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-06T11:14:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294659"
}
```



---

archive/issue_comments_304326.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nDocumentation doesn't build, see patchbot",
    "created_at": "2016-08-06T11:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304326",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">comment:12</div>

Documentation doesn't build, see patchbot



---

archive/issue_comments_304327.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nInteresting. I get this\n\n```\n[dochtml] [plot3d   ] /home/ralf/sage/src/doc/en/reference/plot3d/sage/plot/plot3d/plot3d.rst:1937: WARNING: Exception occurred in plotting plot3d-35\n[dochtml] [plot3d   ] from /home/ralf/sage/src/doc/en/reference/plot3d/sage/plot/plot3d/plot3d.rst:\n[dochtml] [plot3d   ] Traceback (most recent call last):\n[dochtml] [plot3d   ] File \"/home/ralf/sage/local/lib/python2.7/site-packages/matplotlib-1.5.1-py2.7-linux-x86_64.egg/matplotlib/sphinxext/plot_directive.py\", line 517, in run_code\n```\nI don't know how to get to the `plot3d-35` plot commands but:\n\n```\n[dochtml] [plot3d   ] result[0] = interp_rdf(args\n[dochtml] [plot3d   ] File \"sage/symbolic/function.pyx\", line 821, in sage.symbolic.function.GinacFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:9409)\n[dochtml] [plot3d   ] res = super(GinacFunction, self).__call__(*args, **kwds)\n[dochtml] [plot3d   ] File \"sage/symbolic/function.pyx\", line 972, in sage.symbolic.function.BuiltinFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:11034)\n[dochtml] [plot3d   ] res = super(BuiltinFunction, self).__call__(\n[dochtml] [plot3d   ] File \"sage/symbolic/function.pyx\", line 488, in sage.symbolic.function.Function.__call__ (build/cythonized/sage/symbolic/function.cpp:6886)\n[dochtml] [plot3d   ] res = g_function_eval2(self._serial, (<Expression>args[0])._gobj,\n[dochtml] [plot3d   ] RuntimeError: arctan2_eval(): arctan2(0,0) encountered\n```\nThe only calls to `atan2(x,y)` are in `revolution_plot3d()` and if I remove all its doctests it still crashes on build at this point, so I no longer know where to look. Either the 3d plot number 35 or the uncompiled `plot3d.rst` would be necessary.\n\nApart from the bug at hand I think Pynac's `atan2_eval` should return unsigned infinity instead of throwing an exception. There is a reason `atan2(0,0)` is called however.",
    "created_at": "2016-08-09T13:33:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304327",
    "user": "https://github.com/rwst"
}
```

<div id="comment:13" align="right">comment:13</div>

Interesting. I get this

```
[dochtml] [plot3d   ] /home/ralf/sage/src/doc/en/reference/plot3d/sage/plot/plot3d/plot3d.rst:1937: WARNING: Exception occurred in plotting plot3d-35
[dochtml] [plot3d   ] from /home/ralf/sage/src/doc/en/reference/plot3d/sage/plot/plot3d/plot3d.rst:
[dochtml] [plot3d   ] Traceback (most recent call last):
[dochtml] [plot3d   ] File "/home/ralf/sage/local/lib/python2.7/site-packages/matplotlib-1.5.1-py2.7-linux-x86_64.egg/matplotlib/sphinxext/plot_directive.py", line 517, in run_code
```
I don't know how to get to the `plot3d-35` plot commands but:

```
[dochtml] [plot3d   ] result[0] = interp_rdf(args
[dochtml] [plot3d   ] File "sage/symbolic/function.pyx", line 821, in sage.symbolic.function.GinacFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:9409)
[dochtml] [plot3d   ] res = super(GinacFunction, self).__call__(*args, **kwds)
[dochtml] [plot3d   ] File "sage/symbolic/function.pyx", line 972, in sage.symbolic.function.BuiltinFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:11034)
[dochtml] [plot3d   ] res = super(BuiltinFunction, self).__call__(
[dochtml] [plot3d   ] File "sage/symbolic/function.pyx", line 488, in sage.symbolic.function.Function.__call__ (build/cythonized/sage/symbolic/function.cpp:6886)
[dochtml] [plot3d   ] res = g_function_eval2(self._serial, (<Expression>args[0])._gobj,
[dochtml] [plot3d   ] RuntimeError: arctan2_eval(): arctan2(0,0) encountered
```
The only calls to `atan2(x,y)` are in `revolution_plot3d()` and if I remove all its doctests it still crashes on build at this point, so I no longer know where to look. Either the 3d plot number 35 or the uncompiled `plot3d.rst` would be necessary.

Apart from the bug at hand I think Pynac's `atan2_eval` should return unsigned infinity instead of throwing an exception. There is a reason `atan2(0,0)` is called however.



---

archive/issue_comments_304328.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThis is the trigger:\n\n```\nsage: phi, theta = var('phi, theta')\nsage: Y = spherical_harmonic(2, 1, theta, phi)\nsage: rea = spherical_plot3d(abs(real(Y)), (phi,0,2*pi), (theta,0,pi), color='bl\n....: ue', opacity=0.6)\nsage: ima = spherical_plot3d(abs(imag(Y)), (phi,0,2*pi), (theta,0,pi), color='re\n....: d', opacity=0.6)\nsage:  (rea + ima).show(aspect_ratio=1)\n---------------------------------------------------------------------------\nRuntimeError: arctan2_eval(): arctan2(0,0) encountered\n```",
    "created_at": "2016-09-30T07:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304328",
    "user": "https://github.com/rwst"
}
```

<div id="comment:14" align="right">comment:14</div>

This is the trigger:

```
sage: phi, theta = var('phi, theta')
sage: Y = spherical_harmonic(2, 1, theta, phi)
sage: rea = spherical_plot3d(abs(real(Y)), (phi,0,2*pi), (theta,0,pi), color='bl
....: ue', opacity=0.6)
sage: ima = spherical_plot3d(abs(imag(Y)), (phi,0,2*pi), (theta,0,pi), color='re
....: d', opacity=0.6)
sage:  (rea + ima).show(aspect_ratio=1)
---------------------------------------------------------------------------
RuntimeError: arctan2_eval(): arctan2(0,0) encountered
```



---

archive/issue_comments_304329.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThe new code makes `Y` expand immediately, and the `real/imag` calls then really blow it up.\n\n```\nsage: Y = 1/4*sqrt(6)*sqrt(5)*sqrt(sin(theta)^2)*cos(theta)*e^(I*phi)/sqrt(pi)\nsage: abs(real(Y))\nabs(1/4*sqrt(6)*sqrt(5)*sqrt(abs(sin(theta))^2)*cos(1/2*\\\narctan2(2*cos(real_part(theta))*cosh(imag_part(theta))*sin(real_part(theta))*sinh(imag_part(theta)),\ncosh(imag_part(theta))^2*sin(real_part(theta))^2-cos(real_part(theta))^2*sinh(imag_part(theta))^2))\n*cos(real_part(phi))*cos(real_part(theta))*cosh(imag_part(theta))*e^(-imag_part(phi))/sqrt(pi) - \n1/4*sqrt(6)*sqrt(5)*sqrt(abs(sin(theta))^2)*cos(real_part(theta))*cosh(imag_part(theta))*e^(-imag_part(phi))*sin(1/2*arctan2(2*cos(real_part(theta))*cosh(imag_part(theta))*sin(real_part(theta))*sinh(imag_part(theta)), cosh(imag_part(theta))^2*sin(real_part(theta))^2 - cos(real_part(theta))^2*sinh(imag_part(theta))^2))*sin(real_part(phi))/sqrt(pi) + 1/4*sqrt(6)*sqrt(5)*sqrt(abs(sin(theta))^2)*cos(real_part(phi))*e^(-imag_part(phi))*sin(1/2*arctan2(2*cos(real_part(theta))*cosh(imag_part(theta))*sin(real_part(theta))*sinh(imag_part(theta)), cosh(imag_part(theta))^2*sin(real_part(theta))^2 - cos(real_part(theta))^2*sinh(imag_part(theta))^2))*sin(real_part(theta))*sinh(imag_part(theta))/sqrt(pi) + 1/4*sqrt(6)*sqrt(5)*sqrt(abs(sin(theta))^2)*cos(1/2*arctan2(2*cos(real_part(theta))*cosh(imag_part(theta))*sin(real_part(theta))*sinh(imag_part(theta)), cosh(imag_part(theta))^2*sin(real_part(theta))^2 - cos(real_part(theta))^2*sinh(imag_part(theta))^2))*e^(-imag_part(phi))*sin(real_part(phi))*sin(real_part(theta))*sinh(imag_part(theta))/sqrt(pi))\n```",
    "created_at": "2016-09-30T14:32:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304329",
    "user": "https://github.com/rwst"
}
```

<div id="comment:15" align="right">comment:15</div>

The new code makes `Y` expand immediately, and the `real/imag` calls then really blow it up.

```
sage: Y = 1/4*sqrt(6)*sqrt(5)*sqrt(sin(theta)^2)*cos(theta)*e^(I*phi)/sqrt(pi)
sage: abs(real(Y))
abs(1/4*sqrt(6)*sqrt(5)*sqrt(abs(sin(theta))^2)*cos(1/2*\
arctan2(2*cos(real_part(theta))*cosh(imag_part(theta))*sin(real_part(theta))*sinh(imag_part(theta)),
cosh(imag_part(theta))^2*sin(real_part(theta))^2-cos(real_part(theta))^2*sinh(imag_part(theta))^2))
*cos(real_part(phi))*cos(real_part(theta))*cosh(imag_part(theta))*e^(-imag_part(phi))/sqrt(pi) - 
1/4*sqrt(6)*sqrt(5)*sqrt(abs(sin(theta))^2)*cos(real_part(theta))*cosh(imag_part(theta))*e^(-imag_part(phi))*sin(1/2*arctan2(2*cos(real_part(theta))*cosh(imag_part(theta))*sin(real_part(theta))*sinh(imag_part(theta)), cosh(imag_part(theta))^2*sin(real_part(theta))^2 - cos(real_part(theta))^2*sinh(imag_part(theta))^2))*sin(real_part(phi))/sqrt(pi) + 1/4*sqrt(6)*sqrt(5)*sqrt(abs(sin(theta))^2)*cos(real_part(phi))*e^(-imag_part(phi))*sin(1/2*arctan2(2*cos(real_part(theta))*cosh(imag_part(theta))*sin(real_part(theta))*sinh(imag_part(theta)), cosh(imag_part(theta))^2*sin(real_part(theta))^2 - cos(real_part(theta))^2*sinh(imag_part(theta))^2))*sin(real_part(theta))*sinh(imag_part(theta))/sqrt(pi) + 1/4*sqrt(6)*sqrt(5)*sqrt(abs(sin(theta))^2)*cos(1/2*arctan2(2*cos(real_part(theta))*cosh(imag_part(theta))*sin(real_part(theta))*sinh(imag_part(theta)), cosh(imag_part(theta))^2*sin(real_part(theta))^2 - cos(real_part(theta))^2*sinh(imag_part(theta))^2))*e^(-imag_part(phi))*sin(real_part(phi))*sin(real_part(theta))*sinh(imag_part(theta))/sqrt(pi))
```



---

archive/issue_comments_304330.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n\n```\nsage: x=abs(real(Y))\nsage: x.subs(theta==0)\n...\nRuntimeError: arctan2_eval(): arctan2(0,0) encountered\nsage: y=abs(imag(Y))\nsage: y.subs(theta==0)\n...\nRuntimeError: arctan2_eval(): arctan2(0,0) encountered\nsage: Y\n1/4*sqrt(6)*sqrt(5)*sqrt(sin(theta)^2)*cos(theta)*e^(I*phi)/sqrt(pi)\nsage: Y.subs(theta==0)\n0\n```\nSo it seems the `real/imag` expansions produce results in some cases that are not defined at zero, so are not correct.",
    "created_at": "2016-09-30T15:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304330",
    "user": "https://github.com/rwst"
}
```

<div id="comment:16" align="right">comment:16</div>


```
sage: x=abs(real(Y))
sage: x.subs(theta==0)
...
RuntimeError: arctan2_eval(): arctan2(0,0) encountered
sage: y=abs(imag(Y))
sage: y.subs(theta==0)
...
RuntimeError: arctan2_eval(): arctan2(0,0) encountered
sage: Y
1/4*sqrt(6)*sqrt(5)*sqrt(sin(theta)^2)*cos(theta)*e^(I*phi)/sqrt(pi)
sage: Y.subs(theta==0)
0
```
So it seems the `real/imag` expansions produce results in some cases that are not defined at zero, so are not correct.



---

archive/issue_comments_304331.json:
```json
{
    "body": "Dependencies: **#21614**",
    "created_at": "2016-09-30T15:49:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304331",
    "user": "https://github.com/rwst"
}
```

Dependencies: **#21614**



---

archive/issue_events_294660.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-10T08:35:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294660"
}
```



---

archive/issue_events_294661.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-10T08:35:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294661"
}
```



---

archive/issue_comments_304332.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nSo to summarize the code here is good, we just depend on #21614.",
    "created_at": "2016-11-10T08:35:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304332",
    "user": "https://github.com/rwst"
}
```

<div id="comment:18" align="right">comment:18</div>

So to summarize the code here is good, we just depend on #21614.



---

archive/issue_events_294662.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-13T16:08:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294662"
}
```



---

archive/issue_events_294663.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-13T16:08:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294663"
}
```



---

archive/issue_comments_304333.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n\n```\nFile \"src/sage/plot/plot3d/plot3d.py\", line 1195, in sage.plot.plot3d.plot3d.spherical_plot3d\nFailed example:\n    (rea + ima).show(aspect_ratio=1)  # long time (4s on sage.math, 2011)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.plot.plot3d.plot3d.spherical_plot3d[13]>\", line 1, in <module>\n        (rea + ima).show(aspect_ratio=Integer(1))  # long time (4s on sage.math, 2011)\n      File \"sage/plot/plot3d/base.pyx\", line 1379, in sage.plot.plot3d.base.Graphics3d.show (build/cythonized/sage/plot/plot3d/base.c:17925)\n        dm.display_immediately(self, **kwds)\n      File \"/home/chapoton/sage/local/lib/python2.7/site-packages/sage/repl/rich_output/display_manager.py\", line 791, in display_immediately\n        plain_text, rich_output = self._rich_output_formatter(obj, rich_repr_kwds)\n      File \"/home/chapoton/sage/local/lib/python2.7/site-packages/sage/repl/rich_output/display_manager.py\", line 623, in _rich_output_formatter\n        rich_output = self._call_rich_repr(obj, rich_repr_kwds)\n      File \"/home/chapoton/sage/local/lib/python2.7/site-packages/sage/repl/rich_output/display_manager.py\", line 581, in _call_rich_repr\n        return obj._rich_repr_(self, **rich_repr_kwds)\n      File \"sage/plot/plot3d/base.pyx\", line 130, in sage.plot.plot3d.base.Graphics3d._rich_repr_ (build/cythonized/sage/plot/plot3d/base.c:4422)\n        opts = self._process_viewing_options(kwds)\n      File \"sage/plot/plot3d/base.pyx\", line 1257, in sage.plot.plot3d.base.Graphics3d._process_viewing_options (build/cythonized/sage/plot/plot3d/base.c:17397)\n        self._determine_frame_aspect_ratio(opts['aspect_ratio'])\n      File \"sage/plot/plot3d/base.pyx\", line 472, in sage.plot.plot3d.base.Graphics3d._determine_frame_aspect_ratio (build/cythonized/sage/plot/plot3d/base.c:9247)\n        a_min, a_max = self._safe_bounding_box()\n      File \"sage/plot/plot3d/base.pyx\", line 490, in sage.plot.plot3d.base.Graphics3d._safe_bounding_box (build/cythonized/sage/plot/plot3d/base.c:9420)\n        a_min, a_max = self.bounding_box()\n      File \"sage/plot/plot3d/base.pyx\", line 1831, in sage.plot.plot3d.base.Graphics3dGroup.bounding_box (build/cythonized/sage/plot/plot3d/base.c:24445)\n        v = [obj.bounding_box() for obj in self.all]\n      File \"sage/plot/plot3d/parametric_surface.pyx\", line 379, in sage.plot.plot3d.parametric_surface.ParametricSurface.bounding_box (build/cythonized/sage/plot/plot3d/parametric_surface.c:5079)\n        self.triangulate()\n      File \"sage/plot/plot3d/parametric_surface.pyx\", line 427, in sage.plot.plot3d.parametric_surface.ParametricSurface.triangulate (build/cythonized/sage/plot/plot3d/parametric_surface.c:5826)\n        raise\n      File \"sage/plot/plot3d/parametric_surface.pyx\", line 422, in sage.plot.plot3d.parametric_surface.ParametricSurface.triangulate (build/cythonized/sage/plot/plot3d/parametric_surface.c:5746)\n        self.eval_grid(urange, vrange)\n      File \"sage/plot/plot3d/parametric_surface.pyx\", line 601, in sage.plot.plot3d.parametric_surface.ParametricSurface.eval_grid (build/cythonized/sage/plot/plot3d/parametric_surface.c:7437)\n        (<Wrapper_rdf>fx).call_c(uv, &self.vs[i*n+j].x)\n      File \"sage/ext/interpreters/wrapper_rdf.pyx\", line 90, in sage.ext.interpreters.wrapper_rdf.Wrapper_rdf.call_c (build/cythonized/sage/ext/interpreters/wrapper_rdf.c:2163)\n        result[0] = interp_rdf(args\n      File \"sage/symbolic/expression.pyx\", line 1410, in sage.symbolic.expression.Expression.__float__ (build/cythonized/sage/symbolic/expression.cpp:11032)\n        ret = float(self._eval_self(float))\n      File \"sage/symbolic/expression.pyx\", line 1197, in sage.symbolic.expression.Expression._eval_self (build/cythonized/sage/symbolic/expression.cpp:9741)\n        res = self._gobj.evalf(0, {'parent':R})\n      File \"sage/libs/pynac/pynac.pyx\", line 2160, in sage.libs.pynac.pynac.py_eval_constant (build/cythonized/sage/libs/pynac/pynac.cpp:25827)\n        constant = constants_table[serial]\n    KeyError: 3\n```",
    "created_at": "2016-11-13T16:08:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304333",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">comment:19</div>


```
File "src/sage/plot/plot3d/plot3d.py", line 1195, in sage.plot.plot3d.plot3d.spherical_plot3d
Failed example:
    (rea + ima).show(aspect_ratio=1)  # long time (4s on sage.math, 2011)
Exception raised:
    Traceback (most recent call last):
      File "/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/chapoton/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.plot.plot3d.plot3d.spherical_plot3d[13]>", line 1, in <module>
        (rea + ima).show(aspect_ratio=Integer(1))  # long time (4s on sage.math, 2011)
      File "sage/plot/plot3d/base.pyx", line 1379, in sage.plot.plot3d.base.Graphics3d.show (build/cythonized/sage/plot/plot3d/base.c:17925)
        dm.display_immediately(self, **kwds)
      File "/home/chapoton/sage/local/lib/python2.7/site-packages/sage/repl/rich_output/display_manager.py", line 791, in display_immediately
        plain_text, rich_output = self._rich_output_formatter(obj, rich_repr_kwds)
      File "/home/chapoton/sage/local/lib/python2.7/site-packages/sage/repl/rich_output/display_manager.py", line 623, in _rich_output_formatter
        rich_output = self._call_rich_repr(obj, rich_repr_kwds)
      File "/home/chapoton/sage/local/lib/python2.7/site-packages/sage/repl/rich_output/display_manager.py", line 581, in _call_rich_repr
        return obj._rich_repr_(self, **rich_repr_kwds)
      File "sage/plot/plot3d/base.pyx", line 130, in sage.plot.plot3d.base.Graphics3d._rich_repr_ (build/cythonized/sage/plot/plot3d/base.c:4422)
        opts = self._process_viewing_options(kwds)
      File "sage/plot/plot3d/base.pyx", line 1257, in sage.plot.plot3d.base.Graphics3d._process_viewing_options (build/cythonized/sage/plot/plot3d/base.c:17397)
        self._determine_frame_aspect_ratio(opts['aspect_ratio'])
      File "sage/plot/plot3d/base.pyx", line 472, in sage.plot.plot3d.base.Graphics3d._determine_frame_aspect_ratio (build/cythonized/sage/plot/plot3d/base.c:9247)
        a_min, a_max = self._safe_bounding_box()
      File "sage/plot/plot3d/base.pyx", line 490, in sage.plot.plot3d.base.Graphics3d._safe_bounding_box (build/cythonized/sage/plot/plot3d/base.c:9420)
        a_min, a_max = self.bounding_box()
      File "sage/plot/plot3d/base.pyx", line 1831, in sage.plot.plot3d.base.Graphics3dGroup.bounding_box (build/cythonized/sage/plot/plot3d/base.c:24445)
        v = [obj.bounding_box() for obj in self.all]
      File "sage/plot/plot3d/parametric_surface.pyx", line 379, in sage.plot.plot3d.parametric_surface.ParametricSurface.bounding_box (build/cythonized/sage/plot/plot3d/parametric_surface.c:5079)
        self.triangulate()
      File "sage/plot/plot3d/parametric_surface.pyx", line 427, in sage.plot.plot3d.parametric_surface.ParametricSurface.triangulate (build/cythonized/sage/plot/plot3d/parametric_surface.c:5826)
        raise
      File "sage/plot/plot3d/parametric_surface.pyx", line 422, in sage.plot.plot3d.parametric_surface.ParametricSurface.triangulate (build/cythonized/sage/plot/plot3d/parametric_surface.c:5746)
        self.eval_grid(urange, vrange)
      File "sage/plot/plot3d/parametric_surface.pyx", line 601, in sage.plot.plot3d.parametric_surface.ParametricSurface.eval_grid (build/cythonized/sage/plot/plot3d/parametric_surface.c:7437)
        (<Wrapper_rdf>fx).call_c(uv, &self.vs[i*n+j].x)
      File "sage/ext/interpreters/wrapper_rdf.pyx", line 90, in sage.ext.interpreters.wrapper_rdf.Wrapper_rdf.call_c (build/cythonized/sage/ext/interpreters/wrapper_rdf.c:2163)
        result[0] = interp_rdf(args
      File "sage/symbolic/expression.pyx", line 1410, in sage.symbolic.expression.Expression.__float__ (build/cythonized/sage/symbolic/expression.cpp:11032)
        ret = float(self._eval_self(float))
      File "sage/symbolic/expression.pyx", line 1197, in sage.symbolic.expression.Expression._eval_self (build/cythonized/sage/symbolic/expression.cpp:9741)
        res = self._gobj.evalf(0, {'parent':R})
      File "sage/libs/pynac/pynac.pyx", line 2160, in sage.libs.pynac.pynac.py_eval_constant (build/cythonized/sage/libs/pynac/pynac.cpp:25827)
        constant = constants_table[serial]
    KeyError: 3
```



---

archive/issue_comments_304334.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI should say I saw it too. `plot3d-35` is still problematic with this here.",
    "created_at": "2016-11-13T20:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304334",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:20" align="right">comment:20</div>

I should say I saw it too. `plot3d-35` is still problematic with this here.



---

archive/issue_comments_304335.json:
```json
{
    "body": "Changed branch from **[u/tscrim/remove_pexpect_maxima_in_ymn-20939](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/remove_pexpect_maxima_in_ymn-20939)** to **[u/rws/remove_pexpect_maxima_in_ymn-20939](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/remove_pexpect_maxima_in_ymn-20939)**",
    "created_at": "2016-11-14T07:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304335",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/tscrim/remove_pexpect_maxima_in_ymn-20939](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/remove_pexpect_maxima_in_ymn-20939)** to **[u/rws/remove_pexpect_maxima_in_ymn-20939](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/remove_pexpect_maxima_in_ymn-20939)**



---

archive/issue_comments_304336.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55deed789b8d56d475f0bd4b95f25d221c8257d0\"><code>55deed7</code></a></td><td><code>Merge branch 'develop' into t/20939/remove_pexpect_maxima_in_ymn-20939</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31e6c649c586363c621f2daabf805283be10775a\"><code>31e6c64</code></a></td><td><code>20939: fix NaN handling</code></td></tr></table>\n",
    "created_at": "2016-11-14T07:28:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304336",
    "user": "https://github.com/rwst"
}
```

<div id="comment:22"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55deed789b8d56d475f0bd4b95f25d221c8257d0"><code>55deed7</code></a></td><td><code>Merge branch 'develop' into t/20939/remove_pexpect_maxima_in_ymn-20939</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31e6c649c586363c621f2daabf805283be10775a"><code>31e6c64</code></a></td><td><code>20939: fix NaN handling</code></td></tr></table>




---

archive/issue_events_294664.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-14T07:28:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294664"
}
```



---

archive/issue_events_294665.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-14T07:28:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294665"
}
```



---

archive/issue_comments_304337.json:
```json
{
    "body": "Changed commit from **[`a080e1e`](https://github.com/sagemath/sagetrac-mirror/commit/a080e1e8824bf56a760d54cbd7e6c9b79c351cef)** to **[`31e6c64`](https://github.com/sagemath/sagetrac-mirror/commit/31e6c649c586363c621f2daabf805283be10775a)**",
    "created_at": "2016-11-14T07:28:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304337",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`a080e1e`](https://github.com/sagemath/sagetrac-mirror/commit/a080e1e8824bf56a760d54cbd7e6c9b79c351cef)** to **[`31e6c64`](https://github.com/sagemath/sagetrac-mirror/commit/31e6c649c586363c621f2daabf805283be10775a)**



---

archive/issue_comments_304338.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nWould it be possible to have a test to make sure this stays fixed?",
    "created_at": "2016-11-14T14:52:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304338",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:23" align="right">comment:23</div>

Would it be possible to have a test to make sure this stays fixed?



---

archive/issue_comments_304339.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04f79cdf8ed0c887b7f7d1797ce5023f782d0a50\"><code>04f79cd</code></a></td><td><code>20939: make sure atan2(0,0) returns always NaN</code></td></tr></table>\n",
    "created_at": "2016-11-14T16:41:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304339",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04f79cdf8ed0c887b7f7d1797ce5023f782d0a50"><code>04f79cd</code></a></td><td><code>20939: make sure atan2(0,0) returns always NaN</code></td></tr></table>




---

archive/issue_comments_304340.json:
```json
{
    "body": "Changed commit from **[`31e6c64`](https://github.com/sagemath/sagetrac-mirror/commit/31e6c649c586363c621f2daabf805283be10775a)** to **[`04f79cd`](https://github.com/sagemath/sagetrac-mirror/commit/04f79cdf8ed0c887b7f7d1797ce5023f782d0a50)**",
    "created_at": "2016-11-14T16:41:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304340",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`31e6c64`](https://github.com/sagemath/sagetrac-mirror/commit/31e6c649c586363c621f2daabf805283be10775a)** to **[`04f79cd`](https://github.com/sagemath/sagetrac-mirror/commit/04f79cdf8ed0c887b7f7d1797ce5023f782d0a50)**



---

archive/issue_comments_304341.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThis commit contains a test for the specific `NaN` evaluation problem causing the second crash (the fix for the first crash is tested with #21614). The commit also fixes an inconsistency. As to a general test of the second problem I opened https://github.com/pynac/pynac/issues/211",
    "created_at": "2016-11-14T16:44:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304341",
    "user": "https://github.com/rwst"
}
```

<div id="comment:25" align="right">comment:25</div>

This commit contains a test for the specific `NaN` evaluation problem causing the second crash (the fix for the first crash is tested with #21614). The commit also fixes an inconsistency. As to a general test of the second problem I opened https://github.com/pynac/pynac/issues/211



---

archive/issue_comments_304342.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThanks. Now back to the buildbots.",
    "created_at": "2016-11-14T17:12:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304342",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:26" align="right">comment:26</div>

Thanks. Now back to the buildbots.



---

archive/issue_events_294666.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-11-14T17:12:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294666"
}
```



---

archive/issue_events_294667.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-11-14T17:12:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294667"
}
```



---

archive/issue_comments_304343.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI don know what Volker will report if anything but now I have a segfault in `constant.py`\n\n```\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 688 ##\n0\nsage: loads(dumps(NaN)) ## line 704 ##\n------------------------------------------------------------------------\n/usr/lib64/python2.7/site-packages/cysignals/signals.so(+0x4556)[0x7f4f180eb556]\n/usr/lib64/python2.7/site-packages/cysignals/signals.so(+0x4a6c)[0x7f4f180eba6c]\n/usr/lib64/python2.7/site-packages/cysignals/signals.so(+0x6d6f)[0x7f4f180edd6f]\n/lib64/libpthread.so.0(+0x10d70)[0x7f4f1ce53d70]\n/usr/lib64/python2.7/site-packages/sage/libs/pynac/pynac.so(+0x2940d)[0x7f4d3ece640d]\n/usr/lib64/libpynac.so.8(_ZN5GiNaC8constant9unarchiveERKNS_12archive_nodeERNS_9containerINSt7__cxx114listEEE+0x196)[0x7f4d3e955dcc]\n/usr/lib64/libpynac.so.8(_ZNK5GiNaC12archive_node9unarchiveERNS_9containerINSt7__cxx114listEEE+0xf4)[0x7f4d3e936836]\n/usr/lib64/libpynac.so.8(_ZNK5GiNaC7archive12unarchive_exERKNS_9containerINSt7__cxx114listEEEj+0x130)[0x7f4d3e936a42]\n/usr/lib64/python2.7/site-packages/sage/symbolic/expression.so(+0xec87f)[0x7f4d3e63787f]\n/usr/lib64/python2.7/site-packages/sage/symbolic/expression.so(+0xecc2a)[0x7f4d3e637c2a]\n/usr/lib64/libpython2.7.so.1.0(PyCFunction_Call+0xf1)[0x7f4f1d0ddbd9]\n/usr/lib64/libpython2.7.so.1.0(PyObject_Call+0x5c)[0x7f4f1d0a8123]\n```",
    "created_at": "2016-11-16T01:46:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304343",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

I don know what Volker will report if anything but now I have a segfault in `constant.py`

```
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 688 ##
0
sage: loads(dumps(NaN)) ## line 704 ##
------------------------------------------------------------------------
/usr/lib64/python2.7/site-packages/cysignals/signals.so(+0x4556)[0x7f4f180eb556]
/usr/lib64/python2.7/site-packages/cysignals/signals.so(+0x4a6c)[0x7f4f180eba6c]
/usr/lib64/python2.7/site-packages/cysignals/signals.so(+0x6d6f)[0x7f4f180edd6f]
/lib64/libpthread.so.0(+0x10d70)[0x7f4f1ce53d70]
/usr/lib64/python2.7/site-packages/sage/libs/pynac/pynac.so(+0x2940d)[0x7f4d3ece640d]
/usr/lib64/libpynac.so.8(_ZN5GiNaC8constant9unarchiveERKNS_12archive_nodeERNS_9containerINSt7__cxx114listEEE+0x196)[0x7f4d3e955dcc]
/usr/lib64/libpynac.so.8(_ZNK5GiNaC12archive_node9unarchiveERNS_9containerINSt7__cxx114listEEE+0xf4)[0x7f4d3e936836]
/usr/lib64/libpynac.so.8(_ZNK5GiNaC7archive12unarchive_exERKNS_9containerINSt7__cxx114listEEEj+0x130)[0x7f4d3e936a42]
/usr/lib64/python2.7/site-packages/sage/symbolic/expression.so(+0xec87f)[0x7f4d3e63787f]
/usr/lib64/python2.7/site-packages/sage/symbolic/expression.so(+0xecc2a)[0x7f4d3e637c2a]
/usr/lib64/libpython2.7.so.1.0(PyCFunction_Call+0xf1)[0x7f4f1d0ddbd9]
/usr/lib64/libpython2.7.so.1.0(PyObject_Call+0x5c)[0x7f4f1d0a8123]
```



---

archive/issue_comments_304344.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nConfirmed. I'm sorry. With Pynac changes I have a testing procedure in place here, but with Python I was relying on patchbot. This issue is also somewhat unusual as to the surprising problems presented.",
    "created_at": "2016-11-16T07:53:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304344",
    "user": "https://github.com/rwst"
}
```

<div id="comment:28" align="right">comment:28</div>

Confirmed. I'm sorry. With Pynac changes I have a testing procedure in place here, but with Python I was relying on patchbot. This issue is also somewhat unusual as to the surprising problems presented.



---

archive/issue_events_294668.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-16T07:53:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294668"
}
```



---

archive/issue_events_294669.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-16T07:53:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294669"
}
```



---

archive/issue_comments_304345.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nSame here...",
    "created_at": "2016-11-16T07:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304345",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:29" align="right">comment:29</div>

Same here...



---

archive/issue_comments_304346.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nPositive stuff for me, it made me realise that some bits of `cysignals` are not currently working properly on Gentoo - even so the tests pass :(",
    "created_at": "2016-11-16T07:57:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304346",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">comment:30</div>

Positive stuff for me, it made me realise that some bits of `cysignals` are not currently working properly on Gentoo - even so the tests pass :(



---

archive/issue_comments_304347.json:
```json
{
    "body": "Upstream: **Fixed upstream, in a later stable release.**",
    "created_at": "2016-11-16T14:07:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304347",
    "user": "https://github.com/rwst"
}
```

Upstream: **Fixed upstream, in a later stable release.**



---

archive/issue_comments_304348.json:
```json
{
    "body": "Changed dependencies from **#21614** to **#21614, pynac-0.7.1**",
    "created_at": "2016-11-16T14:07:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304348",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **#21614** to **#21614, pynac-0.7.1**



---

archive/issue_events_294670.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-24T16:34:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294670"
}
```



---

archive/issue_events_294671.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-24T16:34:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294671"
}
```



---

archive/issue_comments_304349.json:
```json
{
    "body": "Changed dependencies from **#21614, pynac-0.7.1** to **#21614, #21963**",
    "created_at": "2016-11-24T16:34:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304349",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **#21614, pynac-0.7.1** to **#21614, #21963**



---

archive/issue_comments_304350.json:
```json
{
    "body": "Changed commit from **[`04f79cd`](https://github.com/sagemath/sagetrac-mirror/commit/04f79cdf8ed0c887b7f7d1797ce5023f782d0a50)** to **[`bb4630f`](https://github.com/sagemath/sagetrac-mirror/commit/bb4630fa7a2ac6b9b0a1d98486378877fe60f97c)**",
    "created_at": "2016-12-20T16:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304350",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`04f79cd`](https://github.com/sagemath/sagetrac-mirror/commit/04f79cdf8ed0c887b7f7d1797ce5023f782d0a50)** to **[`bb4630f`](https://github.com/sagemath/sagetrac-mirror/commit/bb4630fa7a2ac6b9b0a1d98486378877fe60f97c)**



---

archive/issue_comments_304351.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb4630fa7a2ac6b9b0a1d98486378877fe60f97c\"><code>bb4630f</code></a></td><td><code>Merge branch 'develop' into t/20939/remove_pexpect_maxima_in_ymn-20939</code></td></tr></table>\n",
    "created_at": "2016-12-20T16:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304351",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb4630fa7a2ac6b9b0a1d98486378877fe60f97c"><code>bb4630f</code></a></td><td><code>Merge branch 'develop' into t/20939/remove_pexpect_maxima_in_ymn-20939</code></td></tr></table>




---

archive/issue_comments_304352.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nLet's try again.",
    "created_at": "2016-12-20T20:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304352",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:34" align="right">comment:34</div>

Let's try again.



---

archive/issue_events_294672.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-12-20T20:51:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294672"
}
```



---

archive/issue_events_294673.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-12-20T20:51:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294673"
}
```



---

archive/issue_events_294674.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-12-20T20:51:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294674"
}
```



---

archive/issue_events_294675.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-12-20T20:51:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294675"
}
```



---

archive/issue_events_294676.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-18T20:39:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294676"
}
```



---

archive/issue_events_294677.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "12efb7f64f1037abd04ba8c0796148cde2f70798",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-01-18T20:39:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20939#event-294677"
}
```



---

archive/issue_comments_304353.json:
```json
{
    "body": "Changed branch from **[u/rws/remove_pexpect_maxima_in_ymn-20939](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/remove_pexpect_maxima_in_ymn-20939)** to **[`bb4630f`](https://github.com/sagemath/sagetrac-mirror/commit/bb4630fa7a2ac6b9b0a1d98486378877fe60f97c)**",
    "created_at": "2017-01-18T20:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20939#issuecomment-304353",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/rws/remove_pexpect_maxima_in_ymn-20939](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/remove_pexpect_maxima_in_ymn-20939)** to **[`bb4630f`](https://github.com/sagemath/sagetrac-mirror/commit/bb4630fa7a2ac6b9b0a1d98486378877fe60f97c)**
