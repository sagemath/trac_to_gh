# Issue 20555: descents for Permutations : cleanup

archive/issues_020318.json:
```json
{
    "assignees": [],
    "body": "The descents in class Permutation need a little care to behave like the\nother Coxeter groups. Let us do that.\n\nAs a benefit, the descents will now follow the usual combinatorics convention (instead of a wrong indexing starting at 0).\n\nPlus adding a new test about descents in the TestSuite of Coxeter groups.\n\nThis is useful for future uniform implementation of some new posets.\n\nCC:  @hivert @tscrim @darijgr @nthiery @stumpc5\n\nKeywords: **permutation**\n\nBranch/Commit: **[d1d42eb](https://github.com/sagemath/sagetrac-mirror/commit/d1d42eb9f6ae7599d5f755ba65998613b64c4503)**\n\nReviewer: **Travis Scrimshaw, Christian Stump**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20555_\n\n",
    "closed_at": "2016-05-19T22:38:45Z",
    "created_at": "2016-05-04T12:17:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "descents for Permutations : cleanup",
    "type": "issue",
    "updated_at": "2016-05-19T22:38:45Z",
    "url": "https://github.com/sagemath/sage/issues/20555",
    "user": "https://github.com/fchapoton"
}
```
The descents in class Permutation need a little care to behave like the
other Coxeter groups. Let us do that.

As a benefit, the descents will now follow the usual combinatorics convention (instead of a wrong indexing starting at 0).

Plus adding a new test about descents in the TestSuite of Coxeter groups.

This is useful for future uniform implementation of some new posets.

CC:  @hivert @tscrim @darijgr @nthiery @stumpc5

Keywords: **permutation**

Branch/Commit: **[d1d42eb](https://github.com/sagemath/sagetrac-mirror/commit/d1d42eb9f6ae7599d5f755ba65998613b64c4503)**

Reviewer: **Travis Scrimshaw, Christian Stump**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/20555_





---

archive/issue_events_271709.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-05-04T12:17:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20555#event-271709"
}
```



---

archive/issue_events_271710.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-05-04T12:17:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20555#event-271710"
}
```



---

archive/issue_events_271711.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-05-04T12:17:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20555#event-271711"
}
```



---

archive/issue_events_271712.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-05-04T12:17:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20555#event-271712"
}
```



---

archive/issue_events_271713.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-05-04T12:19:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20555#event-271713"
}
```



---

archive/issue_comments_299576.json:
```json
{
    "body": "Changed keywords from none to **permutation**",
    "created_at": "2016-05-04T12:19:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299576",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from none to **permutation**



---

archive/issue_comments_299577.json:
```json
{
    "body": "Commit: **[b2f952a](https://github.com/sagemath/sagetrac-mirror/commit/b2f952ac34d40ac79e695363b28463ce8f92cf40)**",
    "created_at": "2016-05-04T12:19:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299577",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[b2f952a](https://github.com/sagemath/sagetrac-mirror/commit/b2f952ac34d40ac79e695363b28463ce8f92cf40)**



---

archive/issue_comments_299578.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2f952ac34d40ac79e695363b28463ce8f92cf40\">b2f952a</a></td><td><code>cleanup the behaviour of descents in Permutations + add tests in TestSuite</code></td></tr></table>\n",
    "created_at": "2016-05-04T12:19:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299578",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">Comment 1</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2f952ac34d40ac79e695363b28463ce8f92cf40">b2f952a</a></td><td><code>cleanup the behaviour of descents in Permutations + add tests in TestSuite</code></td></tr></table>




---

archive/issue_comments_299579.json:
```json
{
    "body": "Branch: **[u/chapoton/20555](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/20555)**",
    "created_at": "2016-05-04T12:19:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299579",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/20555](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/20555)**



---

archive/issue_comments_299580.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n-the descents in permutations need a little care to behave like the\n+The descents in class Permutation need a little care to behave like the\n other Coxeter groups. Let us do that.\n \n-As a benefit, the descents will now follow the usual combinatorics convention.\n+As a benefit, the descents will now follow the usual combinatorics convention (instead of a wrong indexing starting at 0).\n \n-Plus adding a new test in the testesuite of Coxeter groups.\n+Plus adding a new test about descents in the TestSuite of Coxeter groups.\n+\n+This is useful for future uniform implementation of some new posets.\n``````\n",
    "created_at": "2016-05-04T12:19:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299580",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,8 @@
-the descents in permutations need a little care to behave like the
+The descents in class Permutation need a little care to behave like the
 other Coxeter groups. Let us do that.
 
-As a benefit, the descents will now follow the usual combinatorics convention.
+As a benefit, the descents will now follow the usual combinatorics convention (instead of a wrong indexing starting at 0).
 
-Plus adding a new test in the testesuite of Coxeter groups.
+Plus adding a new test about descents in the TestSuite of Coxeter groups.
+
+This is useful for future uniform implementation of some new posets.
``````




---

archive/issue_comments_299581.json:
```json
{
    "body": "Changed commit from **[b2f952a](https://github.com/sagemath/sagetrac-mirror/commit/b2f952ac34d40ac79e695363b28463ce8f92cf40)** to **[e8d4c22](https://github.com/sagemath/sagetrac-mirror/commit/e8d4c22b1991ffc181022e05820e3de50d1d30a5)**",
    "created_at": "2016-05-04T12:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299581",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b2f952a](https://github.com/sagemath/sagetrac-mirror/commit/b2f952ac34d40ac79e695363b28463ce8f92cf40)** to **[e8d4c22](https://github.com/sagemath/sagetrac-mirror/commit/e8d4c22b1991ffc181022e05820e3de50d1d30a5)**



---

archive/issue_comments_299582.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8d4c22b1991ffc181022e05820e3de50d1d30a5\">e8d4c22</a></td><td><code>more doc for descents in permutation</code></td></tr></table>\n",
    "created_at": "2016-05-04T12:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299582",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8d4c22b1991ffc181022e05820e3de50d1d30a5">e8d4c22</a></td><td><code>more doc for descents in permutation</code></td></tr></table>




---

archive/issue_comments_299583.json:
```json
{
    "body": "Changed commit from **[e8d4c22](https://github.com/sagemath/sagetrac-mirror/commit/e8d4c22b1991ffc181022e05820e3de50d1d30a5)** to **[e6393ab](https://github.com/sagemath/sagetrac-mirror/commit/e6393ab4a5bc9917a95a7e472452548eeed33ddd)**",
    "created_at": "2016-05-04T14:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299583",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e8d4c22](https://github.com/sagemath/sagetrac-mirror/commit/e8d4c22b1991ffc181022e05820e3de50d1d30a5)** to **[e6393ab](https://github.com/sagemath/sagetrac-mirror/commit/e6393ab4a5bc9917a95a7e472452548eeed33ddd)**



---

archive/issue_comments_299584.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6393ab4a5bc9917a95a7e472452548eeed33ddd\">e6393ab</a></td><td><code>trac 20555 fixing doctests in the rest of sage</code></td></tr></table>\n",
    "created_at": "2016-05-04T14:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299584",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6393ab4a5bc9917a95a7e472452548eeed33ddd">e6393ab</a></td><td><code>trac 20555 fixing doctests in the rest of sage</code></td></tr></table>




---

archive/issue_comments_299585.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nThere is a (very) good reason for descents of permutations to be 0-based indices: they correspond to the positions in the list, which are also 0-based, where there is a descent. This is also a perfectly valid definition and almost certainly corresponds to the initial definition of a descent. Personally I am for switching the descents convention, but this is a major backwards incompatible change that is highly likely to break personal code. Also there will not be deprecation period. Much care must be taken here.\n\nA possible way to introduce a deprecation would be to have an optional argument to `descents` for being 0-based, which is `True` by default. If this argument is `True`, then we print a deprecation warning. At the very least, this requires a posting of sage(-combinat)-devel notifying of the behavior change.",
    "created_at": "2016-05-04T14:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299585",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">Comment 6</div>

There is a (very) good reason for descents of permutations to be 0-based indices: they correspond to the positions in the list, which are also 0-based, where there is a descent. This is also a perfectly valid definition and almost certainly corresponds to the initial definition of a descent. Personally I am for switching the descents convention, but this is a major backwards incompatible change that is highly likely to break personal code. Also there will not be deprecation period. Much care must be taken here.

A possible way to introduce a deprecation would be to have an optional argument to `descents` for being 0-based, which is `True` by default. If this argument is `True`, then we print a deprecation warning. At the very least, this requires a posting of sage(-combinat)-devel notifying of the behavior change.



---

archive/issue_comments_299586.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI am personally not totally convinced that this change is the right way to go - I think it is a typical example that it is simply very hard to make notions that are consistent all over sage:\n\n1. Let w be a finite word in a totally ordered alphabet,say {1,...,n}. Its descents are the positions i such that w_i > w_{i+1}. Since python indexes words (or rather lists/tuples) starting with 0, it is natural to write w = w_0 w_1 ... w_m.\n\n2. Let w be a permutation of {1,...,n}. A descent of w is an index i such that w*(i i+1) ls weak order smaller than w. But on the other hand, its one-line notation is a word, it inherits the notion of descents from above, which now differs in a shift by 1.\n\n(There are tons of other examples already in the combinatorics part of sage, and the category framework makes that *really* hard to properly organize imho.)",
    "created_at": "2016-05-04T14:14:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299586",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:7" align="right">Comment 7</div>

I am personally not totally convinced that this change is the right way to go - I think it is a typical example that it is simply very hard to make notions that are consistent all over sage:

1. Let w be a finite word in a totally ordered alphabet,say {1,...,n}. Its descents are the positions i such that w_i > w_{i+1}. Since python indexes words (or rather lists/tuples) starting with 0, it is natural to write w = w_0 w_1 ... w_m.

2. Let w be a permutation of {1,...,n}. A descent of w is an index i such that w*(i i+1) ls weak order smaller than w. But on the other hand, its one-line notation is a word, it inherits the notion of descents from above, which now differs in a shift by 1.

(There are tons of other examples already in the combinatorics part of sage, and the category framework makes that *really* hard to properly organize imho.)



---

archive/issue_comments_299587.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\n(only now seeing that Travis also answered similarly some secs earlier...)",
    "created_at": "2016-05-04T14:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299587",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:8" align="right">Comment 8</div>

(only now seeing that Travis also answered similarly some secs earlier...)



---

archive/issue_comments_299588.json:
```json
{
    "body": "Changed commit from **[e6393ab](https://github.com/sagemath/sagetrac-mirror/commit/e6393ab4a5bc9917a95a7e472452548eeed33ddd)** to **[7797062](https://github.com/sagemath/sagetrac-mirror/commit/7797062c90e16874eb524ca42da0d795fa9548b6)**",
    "created_at": "2016-05-05T06:44:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299588",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e6393ab](https://github.com/sagemath/sagetrac-mirror/commit/e6393ab4a5bc9917a95a7e472452548eeed33ddd)** to **[7797062](https://github.com/sagemath/sagetrac-mirror/commit/7797062c90e16874eb524ca42da0d795fa9548b6)**



---

archive/issue_comments_299589.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7797062c90e16874eb524ca42da0d795fa9548b6\">7797062</a></td><td><code>introducing a parameter from_zero in descents of permutations (step1)</code></td></tr></table>\n",
    "created_at": "2016-05-05T06:44:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299589",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9" align="right">Comment 9</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7797062c90e16874eb524ca42da0d795fa9548b6">7797062</a></td><td><code>introducing a parameter from_zero in descents of permutations (step1)</code></td></tr></table>




---

archive/issue_comments_299590.json:
```json
{
    "body": "Changed commit from **[7797062](https://github.com/sagemath/sagetrac-mirror/commit/7797062c90e16874eb524ca42da0d795fa9548b6)** to **[0841782](https://github.com/sagemath/sagetrac-mirror/commit/0841782343a68d0e2ae150062a9bcc8eb469a049)**",
    "created_at": "2016-05-05T07:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299590",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7797062](https://github.com/sagemath/sagetrac-mirror/commit/7797062c90e16874eb524ca42da0d795fa9548b6)** to **[0841782](https://github.com/sagemath/sagetrac-mirror/commit/0841782343a68d0e2ae150062a9bcc8eb469a049)**



---

archive/issue_comments_299591.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0841782343a68d0e2ae150062a9bcc8eb469a049\">0841782</a></td><td><code>trac 20555 adjustement to new keyword from_zero in descents</code></td></tr></table>\n",
    "created_at": "2016-05-05T07:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299591",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10" align="right">Comment 10</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0841782343a68d0e2ae150062a9bcc8eb469a049">0841782</a></td><td><code>trac 20555 adjustement to new keyword from_zero in descents</code></td></tr></table>




---

archive/issue_comments_299592.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a066912eb47d58b185c5e370c23174a7754197a7\">a066912</a></td><td><code>Merge branch 'u/chapoton/20555' into 7.2.rc1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6abfeaa8061791dcd8e2ce7066388d39e57ca0e2\">6abfeaa</a></td><td><code>fixing trivially failing doctests</code></td></tr></table>\n",
    "created_at": "2016-05-08T09:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299592",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11" align="right">Comment 11</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a066912eb47d58b185c5e370c23174a7754197a7">a066912</a></td><td><code>Merge branch 'u/chapoton/20555' into 7.2.rc1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6abfeaa8061791dcd8e2ce7066388d39e57ca0e2">6abfeaa</a></td><td><code>fixing trivially failing doctests</code></td></tr></table>




---

archive/issue_comments_299593.json:
```json
{
    "body": "Changed commit from **[0841782](https://github.com/sagemath/sagetrac-mirror/commit/0841782343a68d0e2ae150062a9bcc8eb469a049)** to **[6abfeaa](https://github.com/sagemath/sagetrac-mirror/commit/6abfeaa8061791dcd8e2ce7066388d39e57ca0e2)**",
    "created_at": "2016-05-08T09:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299593",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0841782](https://github.com/sagemath/sagetrac-mirror/commit/0841782343a68d0e2ae150062a9bcc8eb469a049)** to **[6abfeaa](https://github.com/sagemath/sagetrac-mirror/commit/6abfeaa8061791dcd8e2ce7066388d39e57ca0e2)**



---

archive/issue_comments_299594.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nok, guys. I have added a from_zero argument in the descents of permutations.\n\nGiven that our permutations are indexed by 1,...,n, I really think that there is no\ngood reason to have the descents starting at 0. But of course, one need to be user-friendly, so let us for the moment just prepare for this change.\n\nThe branch would work if I disactivate the test for descents in the testsuites for permutations.\n\nI propose to do that, and also to add a deprecation when using `from_zero=True`\neven if it looks rather strange to me to do that for a default value of the argument.\n\nAny comments ?",
    "created_at": "2016-05-08T19:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299594",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:12" align="right">Comment 12</div>

ok, guys. I have added a from_zero argument in the descents of permutations.

Given that our permutations are indexed by 1,...,n, I really think that there is no
good reason to have the descents starting at 0. But of course, one need to be user-friendly, so let us for the moment just prepare for this change.

The branch would work if I disactivate the test for descents in the testsuites for permutations.

I propose to do that, and also to add a deprecation when using `from_zero=True`
even if it looks rather strange to me to do that for a default value of the argument.

Any comments ?



---

archive/issue_comments_299595.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nThere are now a few testsuite failures. Beside from that, I am okay with the new procedure to handle the descents in permutations.",
    "created_at": "2016-05-09T09:18:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299595",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:13" align="right">Comment 13</div>

There are now a few testsuite failures. Beside from that, I am okay with the new procedure to handle the descents in permutations.



---

archive/issue_comments_299596.json:
```json
{
    "body": "Changed commit from **[6abfeaa](https://github.com/sagemath/sagetrac-mirror/commit/6abfeaa8061791dcd8e2ce7066388d39e57ca0e2)** to **[80b6546](https://github.com/sagemath/sagetrac-mirror/commit/80b6546d726de6bda3feca619b4b6599d18cbf3e)**",
    "created_at": "2016-05-09T11:23:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299596",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6abfeaa](https://github.com/sagemath/sagetrac-mirror/commit/6abfeaa8061791dcd8e2ce7066388d39e57ca0e2)** to **[80b6546](https://github.com/sagemath/sagetrac-mirror/commit/80b6546d726de6bda3feca619b4b6599d18cbf3e)**



---

archive/issue_comments_299597.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80b6546d726de6bda3feca619b4b6599d18cbf3e\">80b6546</a></td><td><code>trac 20555 adding a deprecation warning for descents starting at 0</code></td></tr></table>\n",
    "created_at": "2016-05-09T11:23:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299597",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14" align="right">Comment 14</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80b6546d726de6bda3feca619b4b6599d18cbf3e">80b6546</a></td><td><code>trac 20555 adding a deprecation warning for descents starting at 0</code></td></tr></table>




---

archive/issue_comments_299598.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12472e04b273d8b0c54e9e2209d69d037d927486\">12472e0</a></td><td><code>trac 20555 fixing doctests in braid group</code></td></tr></table>\n",
    "created_at": "2016-05-10T08:54:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299598",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12472e04b273d8b0c54e9e2209d69d037d927486">12472e0</a></td><td><code>trac 20555 fixing doctests in braid group</code></td></tr></table>




---

archive/issue_comments_299599.json:
```json
{
    "body": "Changed commit from **[80b6546](https://github.com/sagemath/sagetrac-mirror/commit/80b6546d726de6bda3feca619b4b6599d18cbf3e)** to **[12472e0](https://github.com/sagemath/sagetrac-mirror/commit/12472e04b273d8b0c54e9e2209d69d037d927486)**",
    "created_at": "2016-05-10T08:54:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299599",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[80b6546](https://github.com/sagemath/sagetrac-mirror/commit/80b6546d726de6bda3feca619b4b6599d18cbf3e)** to **[12472e0](https://github.com/sagemath/sagetrac-mirror/commit/12472e04b273d8b0c54e9e2209d69d037d927486)**



---

archive/issue_comments_299600.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nok, patchbot is green, and ticket ready for review",
    "created_at": "2016-05-11T06:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299600",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:16" align="right">Comment 16</div>

ok, patchbot is green, and ticket ready for review



---

archive/issue_comments_299601.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nA few minor questions:\n\n```\n+            for i in self.index_set():\n+                si = s[i]\n+                tester.assert_(i in si.descents(side='left'))\n+                tester.assert_(i in si.descents(side='right'))\n+                tester.assert_(i not in si.descents(positive=True, side='left'))\n+                tester.assert_(i not in si.descents(positive=True, side='right'))\n```\n* Is it correct to test `self.index_set`, which could in principle be different from {1,...,n}?\n* You could possibly be even more specific on the assertions, such as `[i] == si.descents(side='left')`.\n\n```\n+ d = [0] + self.descents(from_zero=False) + [len(self)]\n```\n* Isn't this `+ [len(self)]` exactly the `final_descent` flag?",
    "created_at": "2016-05-11T08:29:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299601",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:17" align="right">Comment 17</div>

A few minor questions:

```
+            for i in self.index_set():
+                si = s[i]
+                tester.assert_(i in si.descents(side='left'))
+                tester.assert_(i in si.descents(side='right'))
+                tester.assert_(i not in si.descents(positive=True, side='left'))
+                tester.assert_(i not in si.descents(positive=True, side='right'))
```
* Is it correct to test `self.index_set`, which could in principle be different from {1,...,n}?
* You could possibly be even more specific on the assertions, such as `[i] == si.descents(side='left')`.

```
+ d = [0] + self.descents(from_zero=False) + [len(self)]
```
* Isn't this `+ [len(self)]` exactly the `final_descent` flag?



---

archive/issue_comments_299602.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e1c23bc2d7326980c1970e7fc0fcb379a629f78\">0e1c23b</a></td><td><code>trac 20555 reviewer's comments</code></td></tr></table>\n",
    "created_at": "2016-05-11T09:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299602",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e1c23bc2d7326980c1970e7fc0fcb379a629f78">0e1c23b</a></td><td><code>trac 20555 reviewer's comments</code></td></tr></table>




---

archive/issue_comments_299603.json:
```json
{
    "body": "Changed commit from **[12472e0](https://github.com/sagemath/sagetrac-mirror/commit/12472e04b273d8b0c54e9e2209d69d037d927486)** to **[0e1c23b](https://github.com/sagemath/sagetrac-mirror/commit/0e1c23bc2d7326980c1970e7fc0fcb379a629f78)**",
    "created_at": "2016-05-11T09:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299603",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[12472e0](https://github.com/sagemath/sagetrac-mirror/commit/12472e04b273d8b0c54e9e2209d69d037d927486)** to **[0e1c23b](https://github.com/sagemath/sagetrac-mirror/commit/0e1c23bc2d7326980c1970e7fc0fcb379a629f78)**



---

archive/issue_comments_299604.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nThanks for having a look.\n\nI do not understand you first point.\n\nI changed the second point, but now we need to wait and see if the patchbot is still green.\n\nI changed the third point too.",
    "created_at": "2016-05-11T09:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299604",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:19" align="right">Comment 19</div>

Thanks for having a look.

I do not understand you first point.

I changed the second point, but now we need to wait and see if the patchbot is still green.

I changed the third point too.



---

archive/issue_comments_299605.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\n> I do not understand you first point.\n\nMaybe I misunderstand the `tester`, but isn't this test supposed to pass always? What if I use `index_set = ['A','B','C']`, would it still pass then with this test?\n\n```\ntester.assert_(i not in si.descents(positive=True, side='left'))\ntester.assert_(i not in si.descents(positive=True, side='right'))\n```\nIf you want, you could be also explicit in those tests.\n\nBeside those two points, I give it a positive review given the patchbot turns green.",
    "created_at": "2016-05-11T09:32:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299605",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:20" align="right">Comment 20</div>

> I do not understand you first point.

Maybe I misunderstand the `tester`, but isn't this test supposed to pass always? What if I use `index_set = ['A','B','C']`, would it still pass then with this test?

```
tester.assert_(i not in si.descents(positive=True, side='left'))
tester.assert_(i not in si.descents(positive=True, side='right'))
```
If you want, you could be also explicit in those tests.

Beside those two points, I give it a positive review given the patchbot turns green.



---

archive/issue_comments_299606.json:
```json
{
    "body": "Reviewer: **Christian Stump, Travis Scrimshaw**",
    "created_at": "2016-05-11T09:32:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299606",
    "user": "https://github.com/stumpc5"
}
```

Reviewer: **Christian Stump, Travis Scrimshaw**



---

archive/issue_comments_299607.json:
```json
{
    "body": "Changed reviewer from **Christian Stump, Travis Scrimshaw** to **Travis Scrimshaw, Christian Stump**",
    "created_at": "2016-05-11T09:32:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299607",
    "user": "https://github.com/stumpc5"
}
```

Changed reviewer from **Christian Stump, Travis Scrimshaw** to **Travis Scrimshaw, Christian Stump**



---

archive/issue_comments_299608.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nConcerning the first point, the very same kind of loop over self.index_set is already used in the similar method `test_has_descent` just above in the code. So in general I think we do expect descents to be elements of the index set.\n\nConcerning the second point, should I really change that ? I would prefer not to.",
    "created_at": "2016-05-11T09:41:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299608",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">Comment 23</div>

Concerning the first point, the very same kind of loop over self.index_set is already used in the similar method `test_has_descent` just above in the code. So in general I think we do expect descents to be elements of the index set.

Concerning the second point, should I really change that ? I would prefer not to.



---

archive/issue_comments_299609.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\n> So in general I think we do expect descents to be elements of the index set.\n\nI see, I was actually missing this point before.\n\n> Concerning the second point, should I really change that ? I would prefer not to.\n\nOkay, your decision.\n\nWaiting for the patchbot, and also for Travis' okay...",
    "created_at": "2016-05-11T09:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299609",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:24" align="right">Comment 24</div>

> So in general I think we do expect descents to be elements of the index set.

I see, I was actually missing this point before.

> Concerning the second point, should I really change that ? I would prefer not to.

Okay, your decision.

Waiting for the patchbot, and also for Travis' okay...



---

archive/issue_comments_299610.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nbot is green.",
    "created_at": "2016-05-11T11:19:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299610",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:25" align="right">Comment 25</div>

bot is green.



---

archive/issue_comments_299611.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nSorry for the delay in my comments. Here they are:\n\n- I think it is better to use the more explicit `tester.assertEqual` and `tester.assertNotIn` (they have better default error messages).\n- You also need to have some sort of warning message saying that the behavior of `ParkingFunction.ides` has changed.\n- Some docstring changes:\n\n  ```diff\n           INPUT:\n   \n  -        - ``final_descent`` -- optional boolean (default ``False``)\n  -          If ``True``, the last position of a non-empty\n  -          permutation is also considered as a descent.\n  +        - ``final_descent`` -- boolean (default ``False``);\n  +          if ``True``, the last position of a non-empty\n  +          permutation is also considered as a descent\n   \n  -        - ``side`` -- optional, ``'right'`` (default) or ``'left'``\n  -          If ``'left'``, return the descents of the inverse permutation.\n  +        - ``side`` -- ``'right'`` (default) or ``'left'``;\n  +          if ``'left'``, return the descents of the inverse permutation\n   \n  -        - ``positive`` -- optional boolean (default ``False``)\n  -          If ``True``, return the positions that are not descents.\n  +        - ``positive`` -- boolean (default ``False``);\n  +          if ``True``, return the positions that are not descents\n   \n  -        - ``from_zero`` -- optional boolean (default ``True``)\n  -          If ``False``, return the positions starting from `1`\n  +        - ``from_zero`` -- boolean (default ``True``);\n  +          if ``False``, return the positions starting from `1`\n  ```\n  Similarly for `idescents`.\n- Your deprecation message does not match the docstring. If `from_zero` is going to be removed, we should explicitly state in that in the docstring. Also the default behavior either will change or this argument should not be deprecated.\n\n\nAs a counterpoint, the (very) good reasons that descents start at 0 is because Python uses 0-based indexing:\n\n```\nsage: p = Permutation([5,3,2,4,1])\nsage: p.descents()\n[0, 1, 3]\nsage: p[0]\n5\n```\nThis would break this behavior with the current branch, and actually, thinking a bit more now about it, we should add some documentation to this point.\n(I am pretty sure the position of the descent must correspond to the position of the larger value for the related math to work, but it's been awhile since I've thought about these things.)\n\nHowever, I think with sufficient advertising on sage-devel and this deprecation, the migration should be smooth.",
    "created_at": "2016-05-11T14:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299611",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:26" align="right">Comment 26</div>

Sorry for the delay in my comments. Here they are:

- I think it is better to use the more explicit `tester.assertEqual` and `tester.assertNotIn` (they have better default error messages).
- You also need to have some sort of warning message saying that the behavior of `ParkingFunction.ides` has changed.
- Some docstring changes:

  ```diff
           INPUT:
   
  -        - ``final_descent`` -- optional boolean (default ``False``)
  -          If ``True``, the last position of a non-empty
  -          permutation is also considered as a descent.
  +        - ``final_descent`` -- boolean (default ``False``);
  +          if ``True``, the last position of a non-empty
  +          permutation is also considered as a descent
   
  -        - ``side`` -- optional, ``'right'`` (default) or ``'left'``
  -          If ``'left'``, return the descents of the inverse permutation.
  +        - ``side`` -- ``'right'`` (default) or ``'left'``;
  +          if ``'left'``, return the descents of the inverse permutation
   
  -        - ``positive`` -- optional boolean (default ``False``)
  -          If ``True``, return the positions that are not descents.
  +        - ``positive`` -- boolean (default ``False``);
  +          if ``True``, return the positions that are not descents
   
  -        - ``from_zero`` -- optional boolean (default ``True``)
  -          If ``False``, return the positions starting from `1`
  +        - ``from_zero`` -- boolean (default ``True``);
  +          if ``False``, return the positions starting from `1`
  ```
  Similarly for `idescents`.
- Your deprecation message does not match the docstring. If `from_zero` is going to be removed, we should explicitly state in that in the docstring. Also the default behavior either will change or this argument should not be deprecated.


As a counterpoint, the (very) good reasons that descents start at 0 is because Python uses 0-based indexing:

```
sage: p = Permutation([5,3,2,4,1])
sage: p.descents()
[0, 1, 3]
sage: p[0]
5
```
This would break this behavior with the current branch, and actually, thinking a bit more now about it, we should add some documentation to this point.
(I am pretty sure the position of the descent must correspond to the position of the larger value for the related math to work, but it's been awhile since I've thought about these things.)

However, I think with sufficient advertising on sage-devel and this deprecation, the migration should be smooth.



---

archive/issue_comments_299612.json:
```json
{
    "body": "Changed commit from **[0e1c23b](https://github.com/sagemath/sagetrac-mirror/commit/0e1c23bc2d7326980c1970e7fc0fcb379a629f78)** to **[8dc4420](https://github.com/sagemath/sagetrac-mirror/commit/8dc44205ed34a559df49aa24ddd14facf47a7b0e)**",
    "created_at": "2016-05-11T16:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299612",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0e1c23b](https://github.com/sagemath/sagetrac-mirror/commit/0e1c23bc2d7326980c1970e7fc0fcb379a629f78)** to **[8dc4420](https://github.com/sagemath/sagetrac-mirror/commit/8dc44205ed34a559df49aa24ddd14facf47a7b0e)**



---

archive/issue_comments_299613.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8dc44205ed34a559df49aa24ddd14facf47a7b0e\">8dc4420</a></td><td><code>trac 20555 changes after some of the reviewer's comments</code></td></tr></table>\n",
    "created_at": "2016-05-11T16:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299613",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27" align="right">Comment 27</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8dc44205ed34a559df49aa24ddd14facf47a7b0e">8dc4420</a></td><td><code>trac 20555 changes after some of the reviewer's comments</code></td></tr></table>




---

archive/issue_comments_299614.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@tscrim](#comment%3A26):\n> As a counterpoint, the (very) good reasons that descents start at 0 is because Python uses 0-based indexing:\n> \n> ```\n> sage: p = Permutation([5,3,2,4,1])\n> sage: p.descents()\n> [0, 1, 3]\n> sage: p[0]\n> 5\n> ```\n> This would break this behavior with the current branch, and actually, thinking a bit more now about it, we should add some documentation to this point.\n> (I am pretty sure the position of the descent must correspond to the position of the larger value for the related math to work, but it's been awhile since I've thought about these things.)\n\nI do totally agree with the math part. But I am less convinced of the sage part:\n\n```\nsage: p = Permutation([5,3,2,4,1])\nsage: p[0]\n5\n```\nI would consider `p[0]` an implementation detail (as this might mean something in one-line notation, or the first cycle in cycle decomposition, or whatever else, depending on the implementation of permutations) and not a mathematically well-defined operation. In my eyes, the mathematical operation is\n\n```\nsage: p(1)\n5\n```\nwhich matches Fr\u00e9d\u00e9ric's indexing.",
    "created_at": "2016-05-12T08:48:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299614",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@tscrim](#comment%3A26):
> As a counterpoint, the (very) good reasons that descents start at 0 is because Python uses 0-based indexing:
> 
> ```
> sage: p = Permutation([5,3,2,4,1])
> sage: p.descents()
> [0, 1, 3]
> sage: p[0]
> 5
> ```
> This would break this behavior with the current branch, and actually, thinking a bit more now about it, we should add some documentation to this point.
> (I am pretty sure the position of the descent must correspond to the position of the larger value for the related math to work, but it's been awhile since I've thought about these things.)

I do totally agree with the math part. But I am less convinced of the sage part:

```
sage: p = Permutation([5,3,2,4,1])
sage: p[0]
5
```
I would consider `p[0]` an implementation detail (as this might mean something in one-line notation, or the first cycle in cycle decomposition, or whatever else, depending on the implementation of permutations) and not a mathematically well-defined operation. In my eyes, the mathematical operation is

```
sage: p(1)
5
```
which matches Frédéric's indexing.



---

archive/issue_comments_299615.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nReplying to [@stumpc5](#comment%3A28):\n> Replying to [@tscrim](#comment%3A26):\n> I would consider `p[0]` an implementation detail (as this might mean something in one-line notation, or the first cycle in cycle decomposition, or whatever else, depending on the implementation of permutations) and not a mathematically well-defined operation. In my eyes, the mathematical operation is\n> \n> ```\n> sage: p(1)\n> 5\n> ```\n> which matches Fr\u00e9d\u00e9ric's indexing.\n\nIf you think of the permutation as an automorphism of [n], yes, but if you think of it as an ordering of [n] written as (p<sub>0</sub>, p<sub>1</sub>, ..., p<sub>n-1</sub>), then `p[i]` corresponds to p<sub>i</sub>. So it is a little more than an implementation detail. Moreover, this perspective makes the descent set independent of the index set and/or the objects we are permuting.\n\nAlso, what is both of your opinions on removing the `from_zero` option or just changing the default?\n\n@fchapoton Thanks for the changes.",
    "created_at": "2016-05-12T23:30:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299615",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:29" align="right">Comment 29</div>

Replying to [@stumpc5](#comment%3A28):
> Replying to [@tscrim](#comment%3A26):
> I would consider `p[0]` an implementation detail (as this might mean something in one-line notation, or the first cycle in cycle decomposition, or whatever else, depending on the implementation of permutations) and not a mathematically well-defined operation. In my eyes, the mathematical operation is
> 
> ```
> sage: p(1)
> 5
> ```
> which matches Frédéric's indexing.

If you think of the permutation as an automorphism of [n], yes, but if you think of it as an ordering of [n] written as (p<sub>0</sub>, p<sub>1</sub>, ..., p<sub>n-1</sub>), then `p[i]` corresponds to p<sub>i</sub>. So it is a little more than an implementation detail. Moreover, this perspective makes the descent set independent of the index set and/or the objects we are permuting.

Also, what is both of your opinions on removing the `from_zero` option or just changing the default?

@fchapoton Thanks for the changes.



---

archive/issue_comments_299616.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nI would rather just change the default value of `from_zero`, after one year of deprecation.",
    "created_at": "2016-05-13T06:56:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299616",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:30" align="right">Comment 30</div>

I would rather just change the default value of `from_zero`, after one year of deprecation.



---

archive/issue_comments_299617.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@tscrim](#comment%3A29):\n> If you think of the permutation as an automorphism of [n], yes, but if you think of it as an ordering of [n] written as (p<sub>0</sub>, p<sub>1</sub>, ..., p<sub>n-1</sub>), then `p[i]` corresponds to p<sub>i</sub>. So it is a little more than an implementation detail. Moreover, this perspective makes the descent set independent of the index set and/or the objects we are permuting.\n\nA priori, one could consider the list [Travis,Fr\u00e9d\u00e9ric,Christian] a permutation, but one cannot multiply such permutations (in contrary to permutations in Sage). I think, you implicitly expect the objects to be totally ordered (that is actually also needed to define descents in the first place) and indeed in bijection with {1,...,n} or {0,...,n-1}, and the list just to be one-line notation for the bijection.\n\nI more believe our \"argument\" is closer to the surface: it is mathematically more common to start labelling with 1, so it was decided to have permutations of {1,...,n} per default instead of {0,...,n-1}, and it is pythonically more common to start labelling with 0. These two handmade choices conflict whenever they meet in the code, and one has to choose one over the other to go on.\n\nIndeed, I think it would have been better to make permutations  on {0,...,n-1} standard, and as well indexing sets. This would\n* have generally not resulted in the above conflict,\n* result in many speed improvements everywhere, see\n\n   ```\n   sage: %timeit p[0]\n   1000000 loops, best of 3: 610 ns per loop\n   sage: %timeit p(1)\n   100000 loops, best of 3: 2.74 \u00b5s per loop\n   ```\n* cleaner code as one does not always need to do the +1/-1 thing for lookups (see the code on reflection groups).\n\nBut that choice is made and not reversible, so we have to argue what to do whenever we see that conflict appearing.\n\n> Also, what is both of your opinions on removing the `from_zero` option or just changing the default?\n\nI do not have a strong opinion there, both choices have their rights to be taken. If I'd do it myself, I would maybe leave the option and make it `from_one` per default. (I would also make the name of the option the default behaviour, don't you think so?)",
    "created_at": "2016-05-13T07:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299617",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@tscrim](#comment%3A29):
> If you think of the permutation as an automorphism of [n], yes, but if you think of it as an ordering of [n] written as (p<sub>0</sub>, p<sub>1</sub>, ..., p<sub>n-1</sub>), then `p[i]` corresponds to p<sub>i</sub>. So it is a little more than an implementation detail. Moreover, this perspective makes the descent set independent of the index set and/or the objects we are permuting.

A priori, one could consider the list [Travis,Frédéric,Christian] a permutation, but one cannot multiply such permutations (in contrary to permutations in Sage). I think, you implicitly expect the objects to be totally ordered (that is actually also needed to define descents in the first place) and indeed in bijection with {1,...,n} or {0,...,n-1}, and the list just to be one-line notation for the bijection.

I more believe our "argument" is closer to the surface: it is mathematically more common to start labelling with 1, so it was decided to have permutations of {1,...,n} per default instead of {0,...,n-1}, and it is pythonically more common to start labelling with 0. These two handmade choices conflict whenever they meet in the code, and one has to choose one over the other to go on.

Indeed, I think it would have been better to make permutations  on {0,...,n-1} standard, and as well indexing sets. This would
* have generally not resulted in the above conflict,
* result in many speed improvements everywhere, see

   ```
   sage: %timeit p[0]
   1000000 loops, best of 3: 610 ns per loop
   sage: %timeit p(1)
   100000 loops, best of 3: 2.74 µs per loop
   ```
* cleaner code as one does not always need to do the +1/-1 thing for lookups (see the code on reflection groups).

But that choice is made and not reversible, so we have to argue what to do whenever we see that conflict appearing.

> Also, what is both of your opinions on removing the `from_zero` option or just changing the default?

I do not have a strong opinion there, both choices have their rights to be taken. If I'd do it myself, I would maybe leave the option and make it `from_one` per default. (I would also make the name of the option the default behaviour, don't you think so?)



---

archive/issue_comments_299618.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nSince we are only wanting to change the default behavior, we should have the default value be `None` (not necessarily changing the doc), where we emit the deprecation warning in this case. That way when someone explicitly passes `True`, they don't needlessly see the deprecation warning (as their code will correctly work once we change the default behavior).\n\nAlso, do we want to call the option `from_zero` or `from_one`? It is better to make that decision here.",
    "created_at": "2016-05-13T16:29:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299618",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:32" align="right">Comment 32</div>

Since we are only wanting to change the default behavior, we should have the default value be `None` (not necessarily changing the doc), where we emit the deprecation warning in this case. That way when someone explicitly passes `True`, they don't needlessly see the deprecation warning (as their code will correctly work once we change the default behavior).

Also, do we want to call the option `from_zero` or `from_one`? It is better to make that decision here.



---

archive/issue_comments_299619.json:
```json
{
    "body": "Changed commit from **[8dc4420](https://github.com/sagemath/sagetrac-mirror/commit/8dc44205ed34a559df49aa24ddd14facf47a7b0e)** to **[d1d42eb](https://github.com/sagemath/sagetrac-mirror/commit/d1d42eb9f6ae7599d5f755ba65998613b64c4503)**",
    "created_at": "2016-05-13T18:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299619",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8dc4420](https://github.com/sagemath/sagetrac-mirror/commit/8dc44205ed34a559df49aa24ddd14facf47a7b0e)** to **[d1d42eb](https://github.com/sagemath/sagetrac-mirror/commit/d1d42eb9f6ae7599d5f755ba65998613b64c4503)**



---

archive/issue_comments_299620.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c1be01afff063fb4382293baaf5062c54a6df37\">4c1be01</a></td><td><code>Merge branch 'u/chapoton/20555' into 7.2.rc2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1d42eb9f6ae7599d5f755ba65998613b64c4503\">d1d42eb</a></td><td><code>trac 20555 in descents of permutations, use None as default for from_zero</code></td></tr></table>\n",
    "created_at": "2016-05-13T18:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299620",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33" align="right">Comment 33</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c1be01afff063fb4382293baaf5062c54a6df37">4c1be01</a></td><td><code>Merge branch 'u/chapoton/20555' into 7.2.rc2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1d42eb9f6ae7599d5f755ba65998613b64c4503">d1d42eb</a></td><td><code>trac 20555 in descents of permutations, use None as default for from_zero</code></td></tr></table>




---

archive/issue_comments_299621.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nI would rather keep `from_zero`. After the change of default value, it will be the best name in my opinion.",
    "created_at": "2016-05-15T07:49:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299621",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:34" align="right">Comment 34</div>

I would rather keep `from_zero`. After the change of default value, it will be the best name in my opinion.



---

archive/issue_comments_299622.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nThis LGTM. Christian?",
    "created_at": "2016-05-15T14:15:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299622",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:35" align="right">Comment 35</div>

This LGTM. Christian?



---

archive/issue_comments_299623.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nI still see one <code>\\`\\`from_zero\\`\\` -- boolean (default \\`\\`True\\`\\`)</code> which should be <code>(default \\`\\`None\\`\\`)</code> and don't have a computer currently to change it. Beside that, it's good to go I think.",
    "created_at": "2016-05-15T16:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299623",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:36" align="right">Comment 36</div>

I still see one <code>\`\`from_zero\`\` -- boolean (default \`\`True\`\`)</code> which should be <code>(default \`\`None\`\`)</code> and don't have a computer currently to change it. Beside that, it's good to go I think.



---

archive/issue_comments_299624.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nNone is a technical detail. It does indeed default to True",
    "created_at": "2016-05-15T16:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299624",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:37" align="right">Comment 37</div>

None is a technical detail. It does indeed default to True



---

archive/issue_comments_299625.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nThe default \"is\" `True`, it's just we need the actual to be `None` for technical reasons (the deprecation warning).",
    "created_at": "2016-05-15T16:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299625",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:38" align="right">Comment 38</div>

The default "is" `True`, it's just we need the actual to be `None` for technical reasons (the deprecation warning).



---

archive/issue_events_271714.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2016-05-15T16:33:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20555#event-271714"
}
```



---

archive/issue_events_271715.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2016-05-15T16:33:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20555#event-271715"
}
```



---

archive/issue_comments_299626.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nWell, okay then...",
    "created_at": "2016-05-15T16:33:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299626",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:39" align="right">Comment 39</div>

Well, okay then...



---

archive/issue_events_271716.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-19T22:38:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20555#event-271716"
}
```



---

archive/issue_events_271717.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "bc1f987fae31562c88a79218dc060943c96187da",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-05-19T22:38:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20555#event-271717"
}
```



---

archive/issue_comments_299627.json:
```json
{
    "body": "Changed branch from **[u/chapoton/20555](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/20555)** to **[d1d42eb](https://github.com/sagemath/sagetrac-mirror/commit/d1d42eb9f6ae7599d5f755ba65998613b64c4503)**",
    "created_at": "2016-05-19T22:38:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20555",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20555#issuecomment-299627",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/20555](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/20555)** to **[d1d42eb](https://github.com/sagemath/sagetrac-mirror/commit/d1d42eb9f6ae7599d5f755ba65998613b64c4503)**
