# Issue 20119: More typical dmg for Mac distribution

archive/issues_019882.json:
```json
{
    "body": "Most Mac applications come in a dmg with an arrow pointing to a symlink of Applications. I have taken one of the dmg's and added the necessary files to make this work:\n\n![](http://unhyperbolic.org/macSage/screenshot.png)\n\nhttp://unhyperbolic.org/macSage/\n\nCould we change the sage Mac distribution to be like that?\n\nAll that is necessary is copying two files (.DT_store and .background/background.png) to the directory from which the dmg is created by hditutil in local/bin/sage-bdist.\n\nI got the background image above from the Apache project, we should probably design one for sage, for some inspiration, here is the FireFox one:\nhttp://i.stack.imgur.com/joTDs.png\n\n\nCC:  @unhyperbolic @kcrisman @gvol @vbraun\n\nReviewer: Volker Braun\n\nAuthor: Matthias Goerner\n\nBranch: 7b66c50be6c44f97d9779b40aaca15cd2ee035e4\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20119\n\n",
    "closed_at": "2016-03-04T22:52:30Z",
    "created_at": "2016-02-26T04:10:38Z",
    "labels": [
        "component: porting"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "More typical dmg for Mac distribution",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20119",
    "user": "https://github.com/unhyperbolic"
}
```
Most Mac applications come in a dmg with an arrow pointing to a symlink of Applications. I have taken one of the dmg's and added the necessary files to make this work:

![](http://unhyperbolic.org/macSage/screenshot.png)

http://unhyperbolic.org/macSage/

Could we change the sage Mac distribution to be like that?

All that is necessary is copying two files (.DT_store and .background/background.png) to the directory from which the dmg is created by hditutil in local/bin/sage-bdist.

I got the background image above from the Apache project, we should probably design one for sage, for some inspiration, here is the FireFox one:
http://i.stack.imgur.com/joTDs.png


CC:  @unhyperbolic @kcrisman @gvol @vbraun

Reviewer: Volker Braun

Author: Matthias Goerner

Branch: 7b66c50be6c44f97d9779b40aaca15cd2ee035e4

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20119





---

archive/issue_comments_363503.json:
```json
{
    "body": "<a id='comment:1'></a>I left out some fine print when I said \"all the is necessary\". It is not quiet as easy, but solvable!\n\nThe problem is that the volume name in the dmg we are creating is changing since it contains the sage version number. And the .DT_store doesn't save a relative path to the background image but a pair (volume name, absolute path within volume), so we need to update the .DT_store for every release.\n\nLuckily, there are pure python tools to update the .DT_store file such as [ds_store](https://pypi.python.org/pypi/ds_store) and [mac_alias](https://pypi.python.org/pypi/mac_alias) so that we can create a .DT_store file by hand once in finder and then do the update programmatically for subsequent releases or flavors.\n\ndmg-builder for example does that [here](https://bitbucket.org/al45tair/dmgbuild/src/b08746ed79385ccc512cc23342cf698c5ba0bd3e/dmgbuild/core.py?at=default&fileviewer=file-view-default#core.py-355)\n\nWe can write a little python script invoked by local/bin/sage-bdist to use the above libraries to:\n- ds_store.DSStore.open the file\n- get the value at the key [ '.' ][ 'icvp' ][ 'backgroundImageAlias' ]\n- deserialize to a mac_alias.Alias object\n- change the volume name in that object's volume info\n- write it all back\n\nmac_alias seems to use Mac OS X specific API, so we might need to use the system's python for that.\n\nOne question I have if I were to implement it: this would mean that the dmg build process becomes dependent on the above packages ds_store and mac_alias, where should these be installed?",
    "created_at": "2016-02-26T04:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363503",
    "user": "https://github.com/unhyperbolic"
}
```

<a id='comment:1'></a>I left out some fine print when I said "all the is necessary". It is not quiet as easy, but solvable!

The problem is that the volume name in the dmg we are creating is changing since it contains the sage version number. And the .DT_store doesn't save a relative path to the background image but a pair (volume name, absolute path within volume), so we need to update the .DT_store for every release.

Luckily, there are pure python tools to update the .DT_store file such as [ds_store](https://pypi.python.org/pypi/ds_store) and [mac_alias](https://pypi.python.org/pypi/mac_alias) so that we can create a .DT_store file by hand once in finder and then do the update programmatically for subsequent releases or flavors.

dmg-builder for example does that [here](https://bitbucket.org/al45tair/dmgbuild/src/b08746ed79385ccc512cc23342cf698c5ba0bd3e/dmgbuild/core.py?at=default&fileviewer=file-view-default#core.py-355)

We can write a little python script invoked by local/bin/sage-bdist to use the above libraries to:
- ds_store.DSStore.open the file
- get the value at the key [ '.' ][ 'icvp' ][ 'backgroundImageAlias' ]
- deserialize to a mac_alias.Alias object
- change the volume name in that object's volume info
- write it all back

mac_alias seems to use Mac OS X specific API, so we might need to use the system's python for that.

One question I have if I were to implement it: this would mean that the dmg build process becomes dependent on the above packages ds_store and mac_alias, where should these be installed?



---

archive/issue_comments_363504.json:
```json
{
    "body": "<a id='comment:2'></a>And another suggestion about the Mac App: I think we should add a symlink into the Sage-VERSION.app folder sage -> Contents/Resources/sage/sage so that people who have the app installed but for some reason need to use it from the command line do not need to descend down Contents/Resources.",
    "created_at": "2016-02-26T04:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363504",
    "user": "https://github.com/unhyperbolic"
}
```

<a id='comment:2'></a>And another suggestion about the Mac App: I think we should add a symlink into the Sage-VERSION.app folder sage -> Contents/Resources/sage/sage so that people who have the app installed but for some reason need to use it from the command line do not need to descend down Contents/Resources.



---

archive/issue_comments_363505.json:
```json
{
    "body": "<a id='comment:3'></a>> One question I have if I were to implement it: this would mean that the dmg build process becomes dependent on the above packages ds_store and mac_alias, where should these be installed?\n\n\nHmm, that might not be something easy to deal with, since usually we like \"batteries included\" including for anyone to build.  But maybe the release manager would be able to incorporate something like this in build scripts that aren't intended for everyone's consumption?",
    "created_at": "2016-02-26T15:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363505",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>> One question I have if I were to implement it: this would mean that the dmg build process becomes dependent on the above packages ds_store and mac_alias, where should these be installed?


Hmm, that might not be something easy to deal with, since usually we like "batteries included" including for anyone to build.  But maybe the release manager would be able to incorporate something like this in build scripts that aren't intended for everyone's consumption?



---

archive/issue_comments_363506.json:
```json
{
    "body": "<a id='comment:4'></a>If you just need to change a path in the template `.DT_store` then I'd just use sed. Alternatively make a virtualenv Python package install with the necessary packages somewhere e.g. in `src/mac-app/tools/`.\n\nNote that the mac app is built with the Makefile in #19673 and not with anything in the Sage repo until somebody manages to review that trivial ticket. In particular `sage-bdist` is not used.",
    "created_at": "2016-02-26T17:01:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363506",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>If you just need to change a path in the template `.DT_store` then I'd just use sed. Alternatively make a virtualenv Python package install with the necessary packages somewhere e.g. in `src/mac-app/tools/`.

Note that the mac app is built with the Makefile in #19673 and not with anything in the Sage repo until somebody manages to review that trivial ticket. In particular `sage-bdist` is not used.



---

archive/issue_comments_363507.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [vbraun](#comment%3A4):\n> If you just need to change a path in the template `.DT_store` then I'd just use sed.\n\n\n\nUnfortunately, it is a binary format and not that easy :( But I got it to work.\n\n\n> Alternatively make a virtualenv Python package install with the necessary packages somewhere e.g. in `src/mac-app/tools/`.\n\n\nJust to make sure, you mean in, e.g., the Makefile, creating a virtualenv, installing the needed packages in there and then run it or you mean creating a virtualenv and checking it into the sage repository?\n\n> Note that the mac app is built with the Makefile in #19673 and not with anything in the Sage repo until somebody manages to review that trivial ticket. In particular `sage-bdist` is not used.\n\n\nThanks for letting me know.",
    "created_at": "2016-02-26T17:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363507",
    "user": "https://github.com/unhyperbolic"
}
```

<a id='comment:5'></a>Replying to [vbraun](#comment%3A4):
> If you just need to change a path in the template `.DT_store` then I'd just use sed.



Unfortunately, it is a binary format and not that easy :( But I got it to work.


> Alternatively make a virtualenv Python package install with the necessary packages somewhere e.g. in `src/mac-app/tools/`.


Just to make sure, you mean in, e.g., the Makefile, creating a virtualenv, installing the needed packages in there and then run it or you mean creating a virtualenv and checking it into the sage repository?

> Note that the mac app is built with the Makefile in #19673 and not with anything in the Sage repo until somebody manages to review that trivial ticket. In particular `sage-bdist` is not used.


Thanks for letting me know.



---

archive/issue_comments_363508.json:
```json
{
    "body": "<a id='comment:6'></a>But `sage-bdist` is still possible for local builds?  (E.g. providing builds for older Mac platforms...)",
    "created_at": "2016-02-26T19:07:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363508",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>But `sage-bdist` is still possible for local builds?  (E.g. providing builds for older Mac platforms...)



---

archive/issue_comments_363509.json:
```json
{
    "body": "<a id='comment:7'></a>No, sage-bdist won't work. You need https://github.com/sagemath/binary-pkg to make relocatable binaries. The latter should also work on reasonably old OSX versions but we don't have any to test. Considering that anything but the most recent OSX version has unpatched root exploits its not a priority for me.",
    "created_at": "2016-02-26T21:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363509",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>No, sage-bdist won't work. You need https://github.com/sagemath/binary-pkg to make relocatable binaries. The latter should also work on reasonably old OSX versions but we don't have any to test. Considering that anything but the most recent OSX version has unpatched root exploits its not a priority for me.



---

archive/issue_comments_363510.json:
```json
{
    "body": "<a id='comment:8'></a>Could we perhaps always name the volume the same thing, and change the name of the dmg file?",
    "created_at": "2016-02-28T04:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363510",
    "user": "https://github.com/gvol"
}
```

<a id='comment:8'></a>Could we perhaps always name the volume the same thing, and change the name of the dmg file?



---

archive/issue_comments_363511.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [iandrus](#comment%3A8):\n> Could we perhaps always name the volume the same thing, and change the name of the dmg file?\n\n\nYes, but then we also need to stick to the same name for the .app directory in the dmg file (which is what SnapPy does) because the icon positions stored in the .DT_store are keyed by file name. Right now, it is named Sage-VERSION.app, so it is changing.\nAnd I would like to keep the .app name as is including the version number, especially since once it is installed, a user cannot change the name, so cannot keep an old version while installing a new version.",
    "created_at": "2016-02-28T08:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363511",
    "user": "https://github.com/unhyperbolic"
}
```

<a id='comment:9'></a>Replying to [iandrus](#comment%3A8):
> Could we perhaps always name the volume the same thing, and change the name of the dmg file?


Yes, but then we also need to stick to the same name for the .app directory in the dmg file (which is what SnapPy does) because the icon positions stored in the .DT_store are keyed by file name. Right now, it is named Sage-VERSION.app, so it is changing.
And I would like to keep the .app name as is including the version number, especially since once it is installed, a user cannot change the name, so cannot keep an old version while installing a new version.



---

archive/issue_comments_363512.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mgoerner/createDSStore\"",
    "created_at": "2016-02-28T18:10:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363512",
    "user": "https://github.com/unhyperbolic"
}
```

Changing branch from "" to "u/mgoerner/createDSStore"



---

archive/issue_comments_363513.json:
```json
{
    "body": "Changing commit from \"\" to \"db17474cf8af39dbd6baa0454f181afc1f0bfe74\"",
    "created_at": "2016-02-28T18:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363513",
    "user": "https://github.com/unhyperbolic"
}
```

Changing commit from "" to "db17474cf8af39dbd6baa0454f181afc1f0bfe74"



---

archive/issue_comments_363514.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Goerner\"",
    "created_at": "2016-02-28T18:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363514",
    "user": "https://github.com/unhyperbolic"
}
```

Changing author from "" to "Matthias Goerner"



---

archive/issue_comments_363515.json:
```json
{
    "body": "<a id='comment:11'></a>New commits:",
    "created_at": "2016-02-28T18:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363515",
    "user": "https://github.com/unhyperbolic"
}
```

<a id='comment:11'></a>New commits:



---

archive/issue_comments_363516.json:
```json
{
    "body": "Changing commit from \"db17474cf8af39dbd6baa0454f181afc1f0bfe74\" to \"c03804bc812d046161d136d717a6e6c3597d1745\"",
    "created_at": "2016-03-01T20:18:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "db17474cf8af39dbd6baa0454f181afc1f0bfe74" to "c03804bc812d046161d136d717a6e6c3597d1745"



---

archive/issue_comments_363517.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-01T20:18:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363518.json:
```json
{
    "body": "<a id='comment:13'></a>Here is a screenshot:\n![](http://unhyperbolic.org/macSage/screenshot2.png)\n\nIt is done, though we might want to wait until [ticket 19673](http://trac.sagemath.org/ticket/19673) is reviewed and rebase the changes off that branch.",
    "created_at": "2016-03-01T20:54:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363518",
    "user": "https://github.com/unhyperbolic"
}
```

<a id='comment:13'></a>Here is a screenshot:
![](http://unhyperbolic.org/macSage/screenshot2.png)

It is done, though we might want to wait until [ticket 19673](http://trac.sagemath.org/ticket/19673) is reviewed and rebase the changes off that branch.



---

archive/issue_comments_363519.json:
```json
{
    "body": "Changing branch from \"u/mgoerner/createDSStore\" to \"u/mgoerner/createDSStoreClean\"",
    "created_at": "2016-03-02T22:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363519",
    "user": "https://github.com/unhyperbolic"
}
```

Changing branch from "u/mgoerner/createDSStore" to "u/mgoerner/createDSStoreClean"



---

archive/issue_comments_363520.json:
```json
{
    "body": "Changing commit from \"c03804bc812d046161d136d717a6e6c3597d1745\" to \"7b66c50be6c44f97d9779b40aaca15cd2ee035e4\"",
    "created_at": "2016-03-02T22:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363520",
    "user": "https://github.com/unhyperbolic"
}
```

Changing commit from "c03804bc812d046161d136d717a6e6c3597d1745" to "7b66c50be6c44f97d9779b40aaca15cd2ee035e4"



---

archive/issue_comments_363521.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-03-02T22:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363521",
    "user": "https://github.com/unhyperbolic"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_363522.json:
```json
{
    "body": "<a id='comment:17'></a>Lgtm",
    "created_at": "2016-03-03T21:27:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363522",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>Lgtm



---

archive/issue_comments_363523.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-03T21:27:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363523",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_363524.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2016-03-03T21:27:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363524",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_events_054746.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-03T21:28:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20119#event-54746"
}
```



---

archive/issue_events_054747.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-04T22:52:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20119#event-54747"
}
```



---

archive/issue_comments_363525.json:
```json
{
    "body": "Changing branch from \"u/mgoerner/createDSStoreClean\" to \"7b66c50be6c44f97d9779b40aaca15cd2ee035e4\"",
    "created_at": "2016-03-04T22:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363525",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mgoerner/createDSStoreClean" to "7b66c50be6c44f97d9779b40aaca15cd2ee035e4"



---

archive/issue_comments_363526.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-04T22:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363526",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_363527.json:
```json
{
    "body": "<a id='comment:20'></a>I realize now that this requires a slight change to some documentation - see #20189",
    "created_at": "2016-03-11T04:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363527",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'></a>I realize now that this requires a slight change to some documentation - see #20189



---

archive/issue_comments_363528.json:
```json
{
    "body": "Changing commit from \"7b66c50be6c44f97d9779b40aaca15cd2ee035e4\" to \"\"",
    "created_at": "2016-03-11T04:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363528",
    "user": "https://github.com/kcrisman"
}
```

Changing commit from "7b66c50be6c44f97d9779b40aaca15cd2ee035e4" to ""



---

archive/issue_comments_363529.json:
```json
{
    "body": "<a id='comment:21'></a>Matthias:\nThis broke dmg construction on some older Mac OS versions.  See [here](https://groups.google.com/d/msg/sage-release/J-OTLt5ac-g/CchvvuykAwAJ).\n\nAny ideas for a quick workaround?  I really just need to make the \"old\" app bundle and then drop in the binary and then hdiutil it to a dmg, as in the old script.  It would *also* be good to see if there was a fix that worked for older OS X but my immediate need is to make a binary for upload before they take this older computer away from me (because I don't think a lot of people will be making binaries for 10.7 much longer but some will still have it).\n\nThanks!",
    "created_at": "2016-06-08T17:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363529",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'></a>Matthias:
This broke dmg construction on some older Mac OS versions.  See [here](https://groups.google.com/d/msg/sage-release/J-OTLt5ac-g/CchvvuykAwAJ).

Any ideas for a quick workaround?  I really just need to make the "old" app bundle and then drop in the binary and then hdiutil it to a dmg, as in the old script.  It would *also* be good to see if there was a fix that worked for older OS X but my immediate need is to make a binary for upload before they take this older computer away from me (because I don't think a lot of people will be making binaries for 10.7 much longer but some will still have it).

Thanks!



---

archive/issue_comments_363530.json:
```json
{
    "body": "<a id='comment:22'></a>I think you can just remove $(TARGET)/.DS_store from the non_app_files: target in src/mac-app/Makefile and then build it on 10.7  -without the nice arrangement of the icons and background image :(\n\nI am not sure how you can tell binary_pkg to pick up that change. I would commit that change to a local repository and point binary_pkg's sage_yaml to that local repository.\n\nReplying to [kcrisman](#comment%3A21):\n> Matthias:\n> This broke dmg construction on some older Mac OS versions.  See [here](https://groups.google.com/d/msg/sage-release/J-OTLt5ac-g/CchvvuykAwAJ).\n> \n> Any ideas for a quick workaround?  I really just need to make the \"old\" app bundle and then drop in the binary and then hdiutil it to a dmg, as in the old script.  It would *also* be good to see if there was a fix that worked for older OS X but my immediate need is to make a binary for upload before they take this older computer away from me (because I don't think a lot of people will be making binaries for 10.7 much longer but some will still have it).\n> \n> Thanks!",
    "created_at": "2016-06-08T17:51:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363530",
    "user": "https://github.com/unhyperbolic"
}
```

<a id='comment:22'></a>I think you can just remove $(TARGET)/.DS_store from the non_app_files: target in src/mac-app/Makefile and then build it on 10.7  -without the nice arrangement of the icons and background image :(

I am not sure how you can tell binary_pkg to pick up that change. I would commit that change to a local repository and point binary_pkg's sage_yaml to that local repository.

Replying to [kcrisman](#comment%3A21):
> Matthias:
> This broke dmg construction on some older Mac OS versions.  See [here](https://groups.google.com/d/msg/sage-release/J-OTLt5ac-g/CchvvuykAwAJ).
> 
> Any ideas for a quick workaround?  I really just need to make the "old" app bundle and then drop in the binary and then hdiutil it to a dmg, as in the old script.  It would *also* be good to see if there was a fix that worked for older OS X but my immediate need is to make a binary for upload before they take this older computer away from me (because I don't think a lot of people will be making binaries for 10.7 much longer but some will still have it).
> 
> Thanks!



---

archive/issue_comments_363531.json:
```json
{
    "body": "<a id='comment:23'></a>> I think you can just remove $(TARGET)/.DS_store from the non_app_files: target in src/mac-app/Makefile and then build it on 10.7  -without the nice arrangement of the icons and background image :(\n\n\nWell, hopefully someone would still be able to use it.\n\n> I am not sure how you can tell binary_pkg to pick up that change. I would commit that change to a local repository and point binary_pkg's sage_yaml to that local repository.\n> \n\n\nHmm, I didn't think of that.  Hopefully I can get the syntax right.  Thanks!\n\nIt would really be nice if one wasn't forced to use binary-pkg, though I understand why that change was made.   No one would have been hurt by keeping sage-bdist around.",
    "created_at": "2016-06-08T19:11:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363531",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:23'></a>> I think you can just remove $(TARGET)/.DS_store from the non_app_files: target in src/mac-app/Makefile and then build it on 10.7  -without the nice arrangement of the icons and background image :(


Well, hopefully someone would still be able to use it.

> I am not sure how you can tell binary_pkg to pick up that change. I would commit that change to a local repository and point binary_pkg's sage_yaml to that local repository.
> 


Hmm, I didn't think of that.  Hopefully I can get the syntax right.  Thanks!

It would really be nice if one wasn't forced to use binary-pkg, though I understand why that change was made.   No one would have been hurt by keeping sage-bdist around.



---

archive/issue_comments_363532.json:
```json
{
    "body": "<a id='comment:24'></a>> > I am not sure how you can tell binary_pkg to pick up that change. I would commit that change to a local repository and point binary_pkg's sage_yaml to that local repository.\n> > \n\n> \n> Hmm, I didn't think of that.  Hopefully I can get the syntax right.  Thanks!\n\n\nUnfortunately I can't get the syntax right - I'll followup on sage-release again.",
    "created_at": "2016-06-08T19:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363532",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:24'></a>> > I am not sure how you can tell binary_pkg to pick up that change. I would commit that change to a local repository and point binary_pkg's sage_yaml to that local repository.
> > 

> 
> Hmm, I didn't think of that.  Hopefully I can get the syntax right.  Thanks!


Unfortunately I can't get the syntax right - I'll followup on sage-release again.



---

archive/issue_comments_363533.json:
```json
{
    "body": "<a id='comment:25'></a>This ticket is closed, can you open a new one? I have a suggestion but I'm not going to make it on a closed ticket.",
    "created_at": "2016-06-08T19:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363533",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>This ticket is closed, can you open a new one? I have a suggestion but I'm not going to make it on a closed ticket.



---

archive/issue_comments_363534.json:
```json
{
    "body": "<a id='comment:26'></a>> This ticket is closed, can you open a new one? I have a suggestion but I'm not going to make it on a closed ticket.\n\n\nOk, though thanks for your comment [here](https://groups.google.com/forum/#!topic/sage-release/J-OTLt5ac-g) unclear if it solved my problem yet.",
    "created_at": "2016-06-09T01:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20119#issuecomment-363534",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:26'></a>> This ticket is closed, can you open a new one? I have a suggestion but I'm not going to make it on a closed ticket.


Ok, though thanks for your comment [here](https://groups.google.com/forum/#!topic/sage-release/J-OTLt5ac-g) unclear if it solved my problem yet.
