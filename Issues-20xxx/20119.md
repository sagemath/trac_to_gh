# Issue 20119: More typical dmg for Mac distribution

archive/issues_019882.json:
```json
{
    "assignees": [],
    "body": "Most Mac applications come in a dmg with an arrow pointing to a symlink of Applications. I have taken one of the dmg's and added the necessary files to make this work:\n\n![](http://unhyperbolic.org/macSage/screenshot.png)\n\nhttp://unhyperbolic.org/macSage/\n\nCould we change the sage Mac distribution to be like that?\n\nAll that is necessary is copying two files (.DT_store and .background/background.png) to the directory from which the dmg is created by hditutil in local/bin/sage-bdist.\n\nI got the background image above from the Apache project, we should probably design one for sage, for some inspiration, here is the FireFox one:\nhttp://i.stack.imgur.com/joTDs.png\n\n\nCC:  @unhyperbolic @kcrisman @gvol @vbraun\n\nBranch: **[7b66c50](https://github.com/sagemath/sagetrac-mirror/commit/7b66c50be6c44f97d9779b40aaca15cd2ee035e4)**\n\nReviewer: **Volker Braun**\n\nAuthor: **Matthias Goerner**\n\nComponent: **porting**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20119_\n\n",
    "closed_at": "2016-03-04T22:52:30Z",
    "created_at": "2016-02-26T04:10:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "More typical dmg for Mac distribution",
    "type": "issue",
    "updated_at": "2016-06-09T01:16:18Z",
    "url": "https://github.com/sagemath/sage/issues/20119",
    "user": "https://github.com/unhyperbolic"
}
```
Most Mac applications come in a dmg with an arrow pointing to a symlink of Applications. I have taken one of the dmg's and added the necessary files to make this work:

![](http://unhyperbolic.org/macSage/screenshot.png)

http://unhyperbolic.org/macSage/

Could we change the sage Mac distribution to be like that?

All that is necessary is copying two files (.DT_store and .background/background.png) to the directory from which the dmg is created by hditutil in local/bin/sage-bdist.

I got the background image above from the Apache project, we should probably design one for sage, for some inspiration, here is the FireFox one:
http://i.stack.imgur.com/joTDs.png


CC:  @unhyperbolic @kcrisman @gvol @vbraun

Branch: **[7b66c50](https://github.com/sagemath/sagetrac-mirror/commit/7b66c50be6c44f97d9779b40aaca15cd2ee035e4)**

Reviewer: **Volker Braun**

Author: **Matthias Goerner**

Component: **porting**

_Issue created by migration from https://trac.sagemath.org/ticket/20119_





---

archive/issue_events_284162.json:
```json
{
    "actor": "https://github.com/unhyperbolic",
    "created_at": "2016-02-26T04:10:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting",
    "label_color": "000080",
    "label_name": "c: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20119#event-284162"
}
```



---

archive/issue_events_284163.json:
```json
{
    "actor": "https://github.com/unhyperbolic",
    "created_at": "2016-02-26T04:10:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20119#event-284163"
}
```



---

archive/issue_events_284164.json:
```json
{
    "actor": "https://github.com/unhyperbolic",
    "created_at": "2016-02-26T04:10:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20119#event-284164"
}
```



---

archive/issue_events_284165.json:
```json
{
    "actor": "https://github.com/unhyperbolic",
    "created_at": "2016-02-26T04:10:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20119#event-284165"
}
```



---

archive/issue_comments_288799.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI left out some fine print when I said \"all the is necessary\". It is not quiet as easy, but solvable!\n\nThe problem is that the volume name in the dmg we are creating is changing since it contains the sage version number. And the .DT_store doesn't save a relative path to the background image but a pair (volume name, absolute path within volume), so we need to update the .DT_store for every release.\n\nLuckily, there are pure python tools to update the .DT_store file such as [ds_store](https://pypi.python.org/pypi/ds_store) and [mac_alias](https://pypi.python.org/pypi/mac_alias) so that we can create a .DT_store file by hand once in finder and then do the update programmatically for subsequent releases or flavors.\n\ndmg-builder for example does that [here](https://bitbucket.org/al45tair/dmgbuild/src/b08746ed79385ccc512cc23342cf698c5ba0bd3e/dmgbuild/core.py?at=default&fileviewer=file-view-default#core.py-355)\n\nWe can write a little python script invoked by local/bin/sage-bdist to use the above libraries to:\n- ds_store.DSStore.open the file\n- get the value at the key [ '.' ][ 'icvp' ][ 'backgroundImageAlias' ]\n- deserialize to a mac_alias.Alias object\n- change the volume name in that object's volume info\n- write it all back\n\nmac_alias seems to use Mac OS X specific API, so we might need to use the system's python for that.\n\nOne question I have if I were to implement it: this would mean that the dmg build process becomes dependent on the above packages ds_store and mac_alias, where should these be installed?",
    "created_at": "2016-02-26T04:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288799",
    "user": "https://github.com/unhyperbolic"
}
```

<div id="comment:1" align="right">comment:1</div>

I left out some fine print when I said "all the is necessary". It is not quiet as easy, but solvable!

The problem is that the volume name in the dmg we are creating is changing since it contains the sage version number. And the .DT_store doesn't save a relative path to the background image but a pair (volume name, absolute path within volume), so we need to update the .DT_store for every release.

Luckily, there are pure python tools to update the .DT_store file such as [ds_store](https://pypi.python.org/pypi/ds_store) and [mac_alias](https://pypi.python.org/pypi/mac_alias) so that we can create a .DT_store file by hand once in finder and then do the update programmatically for subsequent releases or flavors.

dmg-builder for example does that [here](https://bitbucket.org/al45tair/dmgbuild/src/b08746ed79385ccc512cc23342cf698c5ba0bd3e/dmgbuild/core.py?at=default&fileviewer=file-view-default#core.py-355)

We can write a little python script invoked by local/bin/sage-bdist to use the above libraries to:
- ds_store.DSStore.open the file
- get the value at the key [ '.' ][ 'icvp' ][ 'backgroundImageAlias' ]
- deserialize to a mac_alias.Alias object
- change the volume name in that object's volume info
- write it all back

mac_alias seems to use Mac OS X specific API, so we might need to use the system's python for that.

One question I have if I were to implement it: this would mean that the dmg build process becomes dependent on the above packages ds_store and mac_alias, where should these be installed?



---

archive/issue_comments_288800.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAnd another suggestion about the Mac App: I think we should add a symlink into the Sage-VERSION.app folder sage -> Contents/Resources/sage/sage so that people who have the app installed but for some reason need to use it from the command line do not need to descend down Contents/Resources.",
    "created_at": "2016-02-26T04:20:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288800",
    "user": "https://github.com/unhyperbolic"
}
```

<div id="comment:2" align="right">comment:2</div>

And another suggestion about the Mac App: I think we should add a symlink into the Sage-VERSION.app folder sage -> Contents/Resources/sage/sage so that people who have the app installed but for some reason need to use it from the command line do not need to descend down Contents/Resources.



---

archive/issue_comments_288801.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n> One question I have if I were to implement it: this would mean that the dmg build process becomes dependent on the above packages ds_store and mac_alias, where should these be installed?\n\nHmm, that might not be something easy to deal with, since usually we like \"batteries included\" including for anyone to build.  But maybe the release manager would be able to incorporate something like this in build scripts that aren't intended for everyone's consumption?",
    "created_at": "2016-02-26T15:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288801",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:3" align="right">comment:3</div>

> One question I have if I were to implement it: this would mean that the dmg build process becomes dependent on the above packages ds_store and mac_alias, where should these be installed?

Hmm, that might not be something easy to deal with, since usually we like "batteries included" including for anyone to build.  But maybe the release manager would be able to incorporate something like this in build scripts that aren't intended for everyone's consumption?



---

archive/issue_comments_288802.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIf you just need to change a path in the template `.DT_store` then I'd just use sed. Alternatively make a virtualenv Python package install with the necessary packages somewhere e.g. in `src/mac-app/tools/`.\n\nNote that the mac app is built with the Makefile in #19673 and not with anything in the Sage repo until somebody manages to review that trivial ticket. In particular `sage-bdist` is not used.",
    "created_at": "2016-02-26T17:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288802",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">comment:4</div>

If you just need to change a path in the template `.DT_store` then I'd just use sed. Alternatively make a virtualenv Python package install with the necessary packages somewhere e.g. in `src/mac-app/tools/`.

Note that the mac app is built with the Makefile in #19673 and not with anything in the Sage repo until somebody manages to review that trivial ticket. In particular `sage-bdist` is not used.



---

archive/issue_comments_288803.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@vbraun](#comment:4):\n> If you just need to change a path in the template `.DT_store` then I'd just use sed.\n\n\nUnfortunately, it is a binary format and not that easy :( But I got it to work.\n\n\n> Alternatively make a virtualenv Python package install with the necessary packages somewhere e.g. in `src/mac-app/tools/`.\n\nJust to make sure, you mean in, e.g., the Makefile, creating a virtualenv, installing the needed packages in there and then run it or you mean creating a virtualenv and checking it into the sage repository?\n\n> Note that the mac app is built with the Makefile in #19673 and not with anything in the Sage repo until somebody manages to review that trivial ticket. In particular `sage-bdist` is not used.\n\nThanks for letting me know.",
    "created_at": "2016-02-26T17:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288803",
    "user": "https://github.com/unhyperbolic"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@vbraun](#comment:4):
> If you just need to change a path in the template `.DT_store` then I'd just use sed.


Unfortunately, it is a binary format and not that easy :( But I got it to work.


> Alternatively make a virtualenv Python package install with the necessary packages somewhere e.g. in `src/mac-app/tools/`.

Just to make sure, you mean in, e.g., the Makefile, creating a virtualenv, installing the needed packages in there and then run it or you mean creating a virtualenv and checking it into the sage repository?

> Note that the mac app is built with the Makefile in #19673 and not with anything in the Sage repo until somebody manages to review that trivial ticket. In particular `sage-bdist` is not used.

Thanks for letting me know.



---

archive/issue_comments_288804.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nBut `sage-bdist` is still possible for local builds?  (E.g. providing builds for older Mac platforms...)",
    "created_at": "2016-02-26T19:07:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288804",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

But `sage-bdist` is still possible for local builds?  (E.g. providing builds for older Mac platforms...)



---

archive/issue_comments_288805.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nNo, sage-bdist won't work. You need https://github.com/sagemath/binary-pkg to make relocatable binaries. The latter should also work on reasonably old OSX versions but we don't have any to test. Considering that anything but the most recent OSX version has unpatched root exploits its not a priority for me.",
    "created_at": "2016-02-26T21:26:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288805",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">comment:7</div>

No, sage-bdist won't work. You need https://github.com/sagemath/binary-pkg to make relocatable binaries. The latter should also work on reasonably old OSX versions but we don't have any to test. Considering that anything but the most recent OSX version has unpatched root exploits its not a priority for me.



---

archive/issue_comments_288806.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nCould we perhaps always name the volume the same thing, and change the name of the dmg file?",
    "created_at": "2016-02-28T04:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288806",
    "user": "https://github.com/gvol"
}
```

<div id="comment:8" align="right">comment:8</div>

Could we perhaps always name the volume the same thing, and change the name of the dmg file?



---

archive/issue_comments_288807.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@gvol](#comment:8):\n> Could we perhaps always name the volume the same thing, and change the name of the dmg file?\n\nYes, but then we also need to stick to the same name for the .app directory in the dmg file (which is what SnapPy does) because the icon positions stored in the .DT_store are keyed by file name. Right now, it is named Sage-VERSION.app, so it is changing.\nAnd I would like to keep the .app name as is including the version number, especially since once it is installed, a user cannot change the name, so cannot keep an old version while installing a new version.",
    "created_at": "2016-02-28T08:10:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288807",
    "user": "https://github.com/unhyperbolic"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@gvol](#comment:8):
> Could we perhaps always name the volume the same thing, and change the name of the dmg file?

Yes, but then we also need to stick to the same name for the .app directory in the dmg file (which is what SnapPy does) because the icon positions stored in the .DT_store are keyed by file name. Right now, it is named Sage-VERSION.app, so it is changing.
And I would like to keep the .app name as is including the version number, especially since once it is installed, a user cannot change the name, so cannot keep an old version while installing a new version.



---

archive/issue_comments_288808.json:
```json
{
    "body": "Branch: **[u/mgoerner/createDSStore](https://github.com/sagemath/sagetrac-mirror/tree/u/mgoerner/createDSStore)**",
    "created_at": "2016-02-28T18:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288808",
    "user": "https://github.com/unhyperbolic"
}
```

Branch: **[u/mgoerner/createDSStore](https://github.com/sagemath/sagetrac-mirror/tree/u/mgoerner/createDSStore)**



---

archive/issue_comments_288809.json:
```json
{
    "body": "Commit: **[db17474](https://github.com/sagemath/sagetrac-mirror/commit/db17474cf8af39dbd6baa0454f181afc1f0bfe74)**",
    "created_at": "2016-02-28T18:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288809",
    "user": "https://github.com/unhyperbolic"
}
```

Commit: **[db17474](https://github.com/sagemath/sagetrac-mirror/commit/db17474cf8af39dbd6baa0454f181afc1f0bfe74)**



---

archive/issue_comments_288810.json:
```json
{
    "body": "Author: **Matthias Goerner**",
    "created_at": "2016-02-28T18:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288810",
    "user": "https://github.com/unhyperbolic"
}
```

Author: **Matthias Goerner**



---

archive/issue_comments_288811.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db17474cf8af39dbd6baa0454f181afc1f0bfe74\">db17474</a></td><td><code>Adding python script that creates a .DS_Store for the app.dmg distribution for Mac so that the icons are placed on top of a supplied background image when opening the dmg in finder.</code></td></tr></table>\n",
    "created_at": "2016-02-28T18:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288811",
    "user": "https://github.com/unhyperbolic"
}
```

<div id="comment:11"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db17474cf8af39dbd6baa0454f181afc1f0bfe74">db17474</a></td><td><code>Adding python script that creates a .DS_Store for the app.dmg distribution for Mac so that the icons are placed on top of a supplied background image when opening the dmg in finder.</code></td></tr></table>




---

archive/issue_comments_288812.json:
```json
{
    "body": "Changed commit from **[db17474](https://github.com/sagemath/sagetrac-mirror/commit/db17474cf8af39dbd6baa0454f181afc1f0bfe74)** to **[c03804b](https://github.com/sagemath/sagetrac-mirror/commit/c03804bc812d046161d136d717a6e6c3597d1745)**",
    "created_at": "2016-03-01T20:18:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288812",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[db17474](https://github.com/sagemath/sagetrac-mirror/commit/db17474cf8af39dbd6baa0454f181afc1f0bfe74)** to **[c03804b](https://github.com/sagemath/sagetrac-mirror/commit/c03804bc812d046161d136d717a6e6c3597d1745)**



---

archive/issue_comments_288813.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c48edac5d6c4f607ce55e3d9708b383146e6e1e8\">c48edac</a></td><td><code>Adding background image that will be used for app.dmg distribution.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c066daf83133551c9243a52f92d84857bbdc8bbc\">c066daf</a></td><td><code>Makefile for building the mac app</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a18cf5ceb11408481866af3f36d50ca757b3839\">2a18cf5</a></td><td><code>Improve the Mac app Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/105edb2258793ecc4e02684e4969e04140d8fc21\">105edb2</a></td><td><code>Prevent copying Sage.app inside the versioned app</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db0c354f9f8d4cfb7e16f35d662dffa24cd05856\">db0c354</a></td><td><code>Exclude .git/ from Mac app</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e6400c8eb0229cf4d1614161983cd5b3d9cdb89\">4e6400c</a></td><td><code>Merge branch 'u/iandrus/makefile_for_osx_app' (http://trac.sagemath.org/ticket/19673) into u/mgoerner/createDSStore (http://trac.sagemath.org/ticket/20119)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c03804bc812d046161d136d717a6e6c3597d1745\">c03804b</a></td><td><code>Adding code to Makefile building .app.dmg distribution to:</code></td></tr></table>\n",
    "created_at": "2016-03-01T20:18:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288813",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c48edac5d6c4f607ce55e3d9708b383146e6e1e8">c48edac</a></td><td><code>Adding background image that will be used for app.dmg distribution.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c066daf83133551c9243a52f92d84857bbdc8bbc">c066daf</a></td><td><code>Makefile for building the mac app</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a18cf5ceb11408481866af3f36d50ca757b3839">2a18cf5</a></td><td><code>Improve the Mac app Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/105edb2258793ecc4e02684e4969e04140d8fc21">105edb2</a></td><td><code>Prevent copying Sage.app inside the versioned app</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db0c354f9f8d4cfb7e16f35d662dffa24cd05856">db0c354</a></td><td><code>Exclude .git/ from Mac app</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e6400c8eb0229cf4d1614161983cd5b3d9cdb89">4e6400c</a></td><td><code>Merge branch 'u/iandrus/makefile_for_osx_app' (http://trac.sagemath.org/ticket/19673) into u/mgoerner/createDSStore (http://trac.sagemath.org/ticket/20119)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c03804bc812d046161d136d717a6e6c3597d1745">c03804b</a></td><td><code>Adding code to Makefile building .app.dmg distribution to:</code></td></tr></table>




---

archive/issue_comments_288814.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nHere is a screenshot:\n![](http://unhyperbolic.org/macSage/screenshot2.png)\n\nIt is done, though we might want to wait until [ticket 19673](http://trac.sagemath.org/ticket/19673) is reviewed and rebase the changes off that branch.",
    "created_at": "2016-03-01T20:54:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288814",
    "user": "https://github.com/unhyperbolic"
}
```

<div id="comment:13" align="right">comment:13</div>

Here is a screenshot:
![](http://unhyperbolic.org/macSage/screenshot2.png)

It is done, though we might want to wait until [ticket 19673](http://trac.sagemath.org/ticket/19673) is reviewed and rebase the changes off that branch.



---

archive/issue_comments_288815.json:
```json
{
    "body": "Changed branch from **[u/mgoerner/createDSStore](https://github.com/sagemath/sagetrac-mirror/tree/u/mgoerner/createDSStore)** to **[u/mgoerner/createDSStoreClean](https://github.com/sagemath/sagetrac-mirror/tree/u/mgoerner/createDSStoreClean)**",
    "created_at": "2016-03-02T22:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288815",
    "user": "https://github.com/unhyperbolic"
}
```

Changed branch from **[u/mgoerner/createDSStore](https://github.com/sagemath/sagetrac-mirror/tree/u/mgoerner/createDSStore)** to **[u/mgoerner/createDSStoreClean](https://github.com/sagemath/sagetrac-mirror/tree/u/mgoerner/createDSStoreClean)**



---

archive/issue_comments_288816.json:
```json
{
    "body": "Changed commit from **[c03804b](https://github.com/sagemath/sagetrac-mirror/commit/c03804bc812d046161d136d717a6e6c3597d1745)** to **[7b66c50](https://github.com/sagemath/sagetrac-mirror/commit/7b66c50be6c44f97d9779b40aaca15cd2ee035e4)**",
    "created_at": "2016-03-02T22:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288816",
    "user": "https://github.com/unhyperbolic"
}
```

Changed commit from **[c03804b](https://github.com/sagemath/sagetrac-mirror/commit/c03804bc812d046161d136d717a6e6c3597d1745)** to **[7b66c50](https://github.com/sagemath/sagetrac-mirror/commit/7b66c50be6c44f97d9779b40aaca15cd2ee035e4)**



---

archive/issue_events_284166.json:
```json
{
    "actor": "https://github.com/unhyperbolic",
    "created_at": "2016-03-02T22:23:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20119#event-284166"
}
```



---

archive/issue_comments_288817.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nLgtm",
    "created_at": "2016-03-03T21:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288817",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:17" align="right">comment:17</div>

Lgtm



---

archive/issue_events_284167.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-03T21:27:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20119#event-284167"
}
```



---

archive/issue_events_284168.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-03T21:27:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20119#event-284168"
}
```



---

archive/issue_comments_288818.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2016-03-03T21:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288818",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_284169.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-03T21:28:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20119#event-284169"
}
```



---

archive/issue_events_284170.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-03T21:28:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20119#event-284170"
}
```



---

archive/issue_events_284171.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-04T22:52:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20119#event-284171"
}
```



---

archive/issue_events_284172.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c80b257544343e9aea583683579d20e9e50082cc",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-03-04T22:52:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20119#event-284172"
}
```



---

archive/issue_comments_288819.json:
```json
{
    "body": "Changed branch from **[u/mgoerner/createDSStoreClean](https://github.com/sagemath/sagetrac-mirror/tree/u/mgoerner/createDSStoreClean)** to **[7b66c50](https://github.com/sagemath/sagetrac-mirror/commit/7b66c50be6c44f97d9779b40aaca15cd2ee035e4)**",
    "created_at": "2016-03-04T22:52:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288819",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mgoerner/createDSStoreClean](https://github.com/sagemath/sagetrac-mirror/tree/u/mgoerner/createDSStoreClean)** to **[7b66c50](https://github.com/sagemath/sagetrac-mirror/commit/7b66c50be6c44f97d9779b40aaca15cd2ee035e4)**



---

archive/issue_comments_288820.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI realize now that this requires a slight change to some documentation - see #20189",
    "created_at": "2016-03-11T04:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288820",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:20" align="right">comment:20</div>

I realize now that this requires a slight change to some documentation - see #20189



---

archive/issue_comments_288821.json:
```json
{
    "body": "Changed commit from **[7b66c50](https://github.com/sagemath/sagetrac-mirror/commit/7b66c50be6c44f97d9779b40aaca15cd2ee035e4)** to none",
    "created_at": "2016-03-11T04:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288821",
    "user": "https://github.com/kcrisman"
}
```

Changed commit from **[7b66c50](https://github.com/sagemath/sagetrac-mirror/commit/7b66c50be6c44f97d9779b40aaca15cd2ee035e4)** to none



---

archive/issue_comments_288822.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nMatthias:\nThis broke dmg construction on some older Mac OS versions.  See [here](https://groups.google.com/d/msg/sage-release/J-OTLt5ac-g/CchvvuykAwAJ).\n\nAny ideas for a quick workaround?  I really just need to make the \"old\" app bundle and then drop in the binary and then hdiutil it to a dmg, as in the old script.  It would *also* be good to see if there was a fix that worked for older OS X but my immediate need is to make a binary for upload before they take this older computer away from me (because I don't think a lot of people will be making binaries for 10.7 much longer but some will still have it).\n\nThanks!",
    "created_at": "2016-06-08T17:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288822",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:21" align="right">comment:21</div>

Matthias:
This broke dmg construction on some older Mac OS versions.  See [here](https://groups.google.com/d/msg/sage-release/J-OTLt5ac-g/CchvvuykAwAJ).

Any ideas for a quick workaround?  I really just need to make the "old" app bundle and then drop in the binary and then hdiutil it to a dmg, as in the old script.  It would *also* be good to see if there was a fix that worked for older OS X but my immediate need is to make a binary for upload before they take this older computer away from me (because I don't think a lot of people will be making binaries for 10.7 much longer but some will still have it).

Thanks!



---

archive/issue_comments_288823.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI think you can just remove $(TARGET)/.DS_store from the non_app_files: target in src/mac-app/Makefile and then build it on 10.7  -without the nice arrangement of the icons and background image :(\n\nI am not sure how you can tell binary_pkg to pick up that change. I would commit that change to a local repository and point binary_pkg's sage_yaml to that local repository.\n\nReplying to [@kcrisman](#comment:21):\n> Matthias:\n> This broke dmg construction on some older Mac OS versions.  See [here](https://groups.google.com/d/msg/sage-release/J-OTLt5ac-g/CchvvuykAwAJ).\n> \n> Any ideas for a quick workaround?  I really just need to make the \"old\" app bundle and then drop in the binary and then hdiutil it to a dmg, as in the old script.  It would *also* be good to see if there was a fix that worked for older OS X but my immediate need is to make a binary for upload before they take this older computer away from me (because I don't think a lot of people will be making binaries for 10.7 much longer but some will still have it).\n> \n> Thanks!",
    "created_at": "2016-06-08T17:51:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288823",
    "user": "https://github.com/unhyperbolic"
}
```

<div id="comment:22" align="right">comment:22</div>

I think you can just remove $(TARGET)/.DS_store from the non_app_files: target in src/mac-app/Makefile and then build it on 10.7  -without the nice arrangement of the icons and background image :(

I am not sure how you can tell binary_pkg to pick up that change. I would commit that change to a local repository and point binary_pkg's sage_yaml to that local repository.

Replying to [@kcrisman](#comment:21):
> Matthias:
> This broke dmg construction on some older Mac OS versions.  See [here](https://groups.google.com/d/msg/sage-release/J-OTLt5ac-g/CchvvuykAwAJ).
> 
> Any ideas for a quick workaround?  I really just need to make the "old" app bundle and then drop in the binary and then hdiutil it to a dmg, as in the old script.  It would *also* be good to see if there was a fix that worked for older OS X but my immediate need is to make a binary for upload before they take this older computer away from me (because I don't think a lot of people will be making binaries for 10.7 much longer but some will still have it).
> 
> Thanks!



---

archive/issue_comments_288824.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n> I think you can just remove $(TARGET)/.DS_store from the non_app_files: target in src/mac-app/Makefile and then build it on 10.7  -without the nice arrangement of the icons and background image :(\n\nWell, hopefully someone would still be able to use it.\n\n> I am not sure how you can tell binary_pkg to pick up that change. I would commit that change to a local repository and point binary_pkg's sage_yaml to that local repository.\n> \n\nHmm, I didn't think of that.  Hopefully I can get the syntax right.  Thanks!\n\nIt would really be nice if one wasn't forced to use binary-pkg, though I understand why that change was made.   No one would have been hurt by keeping sage-bdist around.",
    "created_at": "2016-06-08T19:11:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288824",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:23" align="right">comment:23</div>

> I think you can just remove $(TARGET)/.DS_store from the non_app_files: target in src/mac-app/Makefile and then build it on 10.7  -without the nice arrangement of the icons and background image :(

Well, hopefully someone would still be able to use it.

> I am not sure how you can tell binary_pkg to pick up that change. I would commit that change to a local repository and point binary_pkg's sage_yaml to that local repository.
> 

Hmm, I didn't think of that.  Hopefully I can get the syntax right.  Thanks!

It would really be nice if one wasn't forced to use binary-pkg, though I understand why that change was made.   No one would have been hurt by keeping sage-bdist around.



---

archive/issue_comments_288825.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n> > I am not sure how you can tell binary_pkg to pick up that change. I would commit that change to a local repository and point binary_pkg's sage_yaml to that local repository.\n> > \n\n> \n> Hmm, I didn't think of that.  Hopefully I can get the syntax right.  Thanks!\n\nUnfortunately I can't get the syntax right - I'll followup on sage-release again.",
    "created_at": "2016-06-08T19:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288825",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

> > I am not sure how you can tell binary_pkg to pick up that change. I would commit that change to a local repository and point binary_pkg's sage_yaml to that local repository.
> > 

> 
> Hmm, I didn't think of that.  Hopefully I can get the syntax right.  Thanks!

Unfortunately I can't get the syntax right - I'll followup on sage-release again.



---

archive/issue_comments_288826.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThis ticket is closed, can you open a new one? I have a suggestion but I'm not going to make it on a closed ticket.",
    "created_at": "2016-06-08T19:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288826",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

This ticket is closed, can you open a new one? I have a suggestion but I'm not going to make it on a closed ticket.



---

archive/issue_comments_288827.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n> This ticket is closed, can you open a new one? I have a suggestion but I'm not going to make it on a closed ticket.\n\nOk, though thanks for your comment [here](https://groups.google.com/forum/#!topic/sage-release/J-OTLt5ac-g) unclear if it solved my problem yet.",
    "created_at": "2016-06-09T01:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20119#issuecomment-288827",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:26" align="right">comment:26</div>

> This ticket is closed, can you open a new one? I have a suggestion but I'm not going to make it on a closed ticket.

Ok, though thanks for your comment [here](https://groups.google.com/forum/#!topic/sage-release/J-OTLt5ac-g) unclear if it solved my problem yet.
