# Issue 20467: stackoverflow in Maxima integral

archive/issues_020230.json:
```json
{
    "body": "\n```\nsage: k=var('k')\nsage: integral(sin(k*x)/x*erf(x^2), x, 0, oo)\nRuntimeError: ECL says: C-STACK overflow at size 4259840. Stack can probably be resized.\n```\nThis is related to [this ask.sagemath question](http://ask.sagemath.org/question/33144/unable-to-make-sense-of-maxima-expression-as-result-of-integration/) though I couldn't reproduce this behavior.\n\nUpstream: https://sourceforge.net/p/maxima/bugs/3144/\n\n**CC:**  @nbruin tmonteil\n\n**Branch/Commit:** [22385d98106c739db2f5cbee71e264e3831a5039](https://github.com/sagemath/sagetrac-mirror/commit/22385d98106c739db2f5cbee71e264e3831a5039)\n\n**Upstream:** Completely fixed; Fix reported upstream\n\n**Reviewer:** Nils Bruin\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/20467\n\n",
    "closed_at": "2022-09-25T16:34:26Z",
    "created_at": "2016-04-19T14:51:45Z",
    "labels": [
        "component: calculus",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "stackoverflow in Maxima integral",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20467",
    "user": "https://github.com/kcrisman"
}
```

```
sage: k=var('k')
sage: integral(sin(k*x)/x*erf(x^2), x, 0, oo)
RuntimeError: ECL says: C-STACK overflow at size 4259840. Stack can probably be resized.
```
This is related to [this ask.sagemath question](http://ask.sagemath.org/question/33144/unable-to-make-sense-of-maxima-expression-as-result-of-integration/) though I couldn't reproduce this behavior.

Upstream: https://sourceforge.net/p/maxima/bugs/3144/

**CC:**  @nbruin tmonteil

**Branch/Commit:** [22385d98106c739db2f5cbee71e264e3831a5039](https://github.com/sagemath/sagetrac-mirror/commit/22385d98106c739db2f5cbee71e264e3831a5039)

**Upstream:** Completely fixed; Fix reported upstream

**Reviewer:** Nils Bruin

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/20467





---

archive/issue_comments_355383.json:
```json
{
    "body": "<a id='comment:1'></a>\nAs far as I can see, this happens in vanilla maxima on SBCL too:\n\n```\nMaxima 5.36.1 http://maxima.sourceforge.net\nusing Lisp SBCL 1.2.11-1.fc22\n(%i1) integrate(sin(k*x)/x*erf(x^2),x,0,inf);\nMaxima encountered a Lisp error:\nControl stack exhausted (no more space for function call frames).\n```\nThis is not the latest version, but it's the kind of bug that, unless it's been specifically addressed, it's probably still there. Might want to report it (why is there no online maxima calculator with an up-to-date maxima? maximacell or something like that?)",
    "created_at": "2016-04-19T19:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355383",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:1'></a>
As far as I can see, this happens in vanilla maxima on SBCL too:

```
Maxima 5.36.1 http://maxima.sourceforge.net
using Lisp SBCL 1.2.11-1.fc22
(%i1) integrate(sin(k*x)/x*erf(x^2),x,0,inf);
Maxima encountered a Lisp error:
Control stack exhausted (no more space for function call frames).
```
This is not the latest version, but it's the kind of bug that, unless it's been specifically addressed, it's probably still there. Might want to report it (why is there no online maxima calculator with an up-to-date maxima? maximacell or something like that?)



---

archive/issue_comments_355384.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,3 +5,5 @@\n RuntimeError: ECL says: C-STACK overflow at size 4259840. Stack can probably be resized.\n ```\n This is related to [this ask.sagemath question](http://ask.sagemath.org/question/33144/unable-to-make-sense-of-maxima-expression-as-result-of-integration/) though I couldn't reproduce this behavior.\n+\n+Upstream: https://sourceforge.net/p/maxima/bugs/3144/\n``````\n",
    "created_at": "2016-04-20T00:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355384",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,3 +5,5 @@
 RuntimeError: ECL says: C-STACK overflow at size 4259840. Stack can probably be resized.
 ```
 This is related to [this ask.sagemath question](http://ask.sagemath.org/question/33144/unable-to-make-sense-of-maxima-expression-as-result-of-integration/) though I couldn't reproduce this behavior.
+
+Upstream: https://sourceforge.net/p/maxima/bugs/3144/
``````




---

archive/issue_comments_355385.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"Reported upstream. No feedback yet.\".",
    "created_at": "2016-04-20T00:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355385",
    "user": "https://github.com/kcrisman"
}
```

**Changing upstream** from "N/A" to "Reported upstream. No feedback yet.".



---

archive/issue_comments_355386.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. No feedback yet.\" to \"Fixed upstream, but not in a stable release.\".",
    "created_at": "2016-04-25T14:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355386",
    "user": "https://github.com/kcrisman"
}
```

**Changing upstream** from "Reported upstream. No feedback yet." to "Fixed upstream, but not in a stable release.".



---

archive/issue_comments_355387.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-08-29T18:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355387",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_355388.json:
```json
{
    "body": "<a id='comment:4'></a>\nSeems fixed in 9.2.beta10",
    "created_at": "2020-08-29T18:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355388",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Seems fixed in 9.2.beta10



---

archive/issue_events_063194.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T18:36:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20467#event-63194"
}
```



---

archive/issue_comments_355389.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-08-29T20:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355389",
    "user": "https://github.com/kcrisman"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_355390.json:
```json
{
    "body": "<a id='comment:5'></a>\nAs always, verify with doctest :-)",
    "created_at": "2020-08-29T20:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355390",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
As always, verify with doctest :-)



---

archive/issue_comments_355391.json:
```json
{
    "body": "**Branch:** [u/chapoton/20467](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/20467)",
    "created_at": "2022-09-18T09:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355391",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/20467](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/20467)



---

archive/issue_comments_355392.json:
```json
{
    "body": "**Commit:** [22385d98106c739db2f5cbee71e264e3831a5039](https://github.com/sagemath/sagetrac-mirror/commit/22385d98106c739db2f5cbee71e264e3831a5039)",
    "created_at": "2022-09-18T09:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355392",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [22385d98106c739db2f5cbee71e264e3831a5039](https://github.com/sagemath/sagetrac-mirror/commit/22385d98106c739db2f5cbee71e264e3831a5039)



---

archive/issue_events_063195.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-18T09:50:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20467#event-63195"
}
```



---

archive/issue_events_063196.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-18T09:50:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20467#event-63196"
}
```



---

archive/issue_comments_355393.json:
```json
{
    "body": "<a id='comment:6'></a>\nhere is a doctest\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22385d98106c739db2f5cbee71e264e3831a5039\">22385d9</a></td><td><code>adding one doctest for integral</code></td></tr></table>\n",
    "created_at": "2022-09-18T09:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355393",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
here is a doctest

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22385d98106c739db2f5cbee71e264e3831a5039">22385d9</a></td><td><code>adding one doctest for integral</code></td></tr></table>




---

archive/issue_comments_355394.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2022-09-18T09:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355394",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_355395.json:
```json
{
    "body": "**Changing upstream** from \"Fixed upstream, but not in a stable release.\" to \"Completely fixed; Fix reported upstream\".",
    "created_at": "2022-09-18T09:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355395",
    "user": "https://github.com/fchapoton"
}
```

**Changing upstream** from "Fixed upstream, but not in a stable release." to "Completely fixed; Fix reported upstream".



---

archive/issue_comments_355396.json:
```json
{
    "body": "**Reviewer:** nbruin",
    "created_at": "2022-09-18T18:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355396",
    "user": "https://github.com/nbruin"
}
```

**Reviewer:** nbruin



---

archive/issue_comments_355397.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2022-09-18T18:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355397",
    "user": "https://github.com/nbruin"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_355398.json:
```json
{
    "body": "<a id='comment:9'></a>\nMerge failure on top of:\n\ncb51da16e9b Trac #17965: Uniformize the API to compute the inverse of an element\n\na833b0e9c81 Trac #34491: Upgrade igraph to 0.9.10\n\n7747f43b0d1 Trac #34467: fix random doctest failure in EllipticCurveHom_velusqrt\n\ncba244ef373 Trac #34466: fix various linter errors\n\n5d89d36f1f9 Trac #34228: tox -e docker-...-incremental\n\n627b2bdfe92 Updated [SageMath](SageMath) version to 9.7\n\n\n\nauthor '' does not look right",
    "created_at": "2022-09-19T22:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355398",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
Merge failure on top of:

cb51da16e9b Trac #17965: Uniformize the API to compute the inverse of an element

a833b0e9c81 Trac #34491: Upgrade igraph to 0.9.10

7747f43b0d1 Trac #34467: fix random doctest failure in EllipticCurveHom_velusqrt

cba244ef373 Trac #34466: fix various linter errors

5d89d36f1f9 Trac #34228: tox -e docker-...-incremental

627b2bdfe92 Updated [SageMath](SageMath) version to 9.7



author '' does not look right



---

archive/issue_comments_355399.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2022-09-19T22:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355399",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_355400.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2022-09-20T02:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355400",
    "user": "https://github.com/nbruin"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_355401.json:
```json
{
    "body": "<a id='comment:10'></a>\nIndeed. Since there's now a doctest submitted, there is actually something to be committed, so there needs to be an author.",
    "created_at": "2022-09-20T02:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355401",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:10'></a>
Indeed. Since there's now a doctest submitted, there is actually something to be committed, so there needs to be an author.



---

archive/issue_comments_355402.json:
```json
{
    "body": "**Author:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2022-09-20T02:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355402",
    "user": "https://github.com/nbruin"
}
```

**Author:** Frédéric Chapoton



---

archive/issue_comments_355403.json:
```json
{
    "body": "<a id='comment:11'></a>\nMerge failure on top of:\n\n527891674e8 Trac #34203: Find and uninstall broken installed SPKGs and wheels\n\ned76311f002 Trac #34118: Update sympy to 1.11.1\n\n97beeae9521 Trac #33981: latte_int: ExponentialSubst.h:62:3: error: ISO C++17 does not allow dynamic exception specifications\n\n787b4bed4cf Trac #33640: sage fails to factor some easy expressions\n\n700a1f538d0 Trac #33613: Add pip packages to conda environments, add missing conda.txt files\n\n92b1db1a327 Trac #33431: Category of submodules of sage.modules.free_module.FreeModule_ambient_pid\n\nd238396ec64 Trac #33093: 5 doctests failing related to external program octave\n\n509ed920b2a Trac #33002: Method tikz of polyhedron class can now return an object of type TikzPicture\n\n2a41c6ee213 Trac #32669: Adding upper and lower Bruhat cones of M. Dyer to sage/combinat/root_system/reflection_group_real.py\n\n12756f654c7 Trac #29619: Matrix and Components should have a sparse iterator\n\ncb51da16e9b Trac #17965: Uniformize the API to compute the inverse of an element\n\na833b0e9c81 Trac #34491: Upgrade igraph to 0.9.10\n\n7747f43b0d1 Trac #34467: fix random doctest failure in EllipticCurveHom_velusqrt\n\ncba244ef373 Trac #34466: fix various linter errors\n\n5d89d36f1f9 Trac #34228: tox -e docker-...-incremental\n\n627b2bdfe92 Updated [SageMath](SageMath) version to 9.7\n\n\n\nreviewer 'nbruin' does not look right",
    "created_at": "2022-09-20T20:23:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355403",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>
Merge failure on top of:

527891674e8 Trac #34203: Find and uninstall broken installed SPKGs and wheels

ed76311f002 Trac #34118: Update sympy to 1.11.1

97beeae9521 Trac #33981: latte_int: ExponentialSubst.h:62:3: error: ISO C++17 does not allow dynamic exception specifications

787b4bed4cf Trac #33640: sage fails to factor some easy expressions

700a1f538d0 Trac #33613: Add pip packages to conda environments, add missing conda.txt files

92b1db1a327 Trac #33431: Category of submodules of sage.modules.free_module.FreeModule_ambient_pid

d238396ec64 Trac #33093: 5 doctests failing related to external program octave

509ed920b2a Trac #33002: Method tikz of polyhedron class can now return an object of type TikzPicture

2a41c6ee213 Trac #32669: Adding upper and lower Bruhat cones of M. Dyer to sage/combinat/root_system/reflection_group_real.py

12756f654c7 Trac #29619: Matrix and Components should have a sparse iterator

cb51da16e9b Trac #17965: Uniformize the API to compute the inverse of an element

a833b0e9c81 Trac #34491: Upgrade igraph to 0.9.10

7747f43b0d1 Trac #34467: fix random doctest failure in EllipticCurveHom_velusqrt

cba244ef373 Trac #34466: fix various linter errors

5d89d36f1f9 Trac #34228: tox -e docker-...-incremental

627b2bdfe92 Updated [SageMath](SageMath) version to 9.7



reviewer 'nbruin' does not look right



---

archive/issue_comments_355404.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2022-09-20T20:23:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355404",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_355405.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2022-09-21T01:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355405",
    "user": "https://github.com/nbruin"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_355406.json:
```json
{
    "body": "**Changing reviewer** from \"nbruin\" to \"Nils Bruin\".",
    "created_at": "2022-09-21T01:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355406",
    "user": "https://github.com/nbruin"
}
```

**Changing reviewer** from "nbruin" to "Nils Bruin".



---

archive/issue_events_063197.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-25T16:34:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20467#event-63197"
}
```



---

archive/issue_comments_355407.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/20467](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/20467)\" to \"[22385d98106c739db2f5cbee71e264e3831a5039](https://github.com/sagemath/sagetrac-mirror/commit/22385d98106c739db2f5cbee71e264e3831a5039)\".",
    "created_at": "2022-09-25T16:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20467#issuecomment-355407",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/chapoton/20467](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/20467)" to "[22385d98106c739db2f5cbee71e264e3831a5039](https://github.com/sagemath/sagetrac-mirror/commit/22385d98106c739db2f5cbee71e264e3831a5039)".
