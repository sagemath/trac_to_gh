# Issue 20943: Update a missing important speed improvement for subword complexes

archive/issues_020706.json:
```json
{
    "body": "The method `_flip_c` currently uses\n\n```\nnr_ref = len(W.long_element(as_word=True))\n```\nwhich drastically slows down computations (here: the construction of cluster complexes using subword complexes through the greedy flip algorithm).\n\nCC:  @tscrim @fchapoton @nthiery\n\nKeywords: reflection group, coxeter group, subword complex, days80\n\nBranch/Commit: 6f2172b794ec53d55bd7920125b92662dc17edc8\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Christian Stump\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20943\n\n",
    "closed_at": "2016-07-08T07:09:49Z",
    "created_at": "2016-07-05T18:33:21Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Update a missing important speed improvement for subword complexes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20943",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
The method `_flip_c` currently uses

```
nr_ref = len(W.long_element(as_word=True))
```
which drastically slows down computations (here: the construction of cluster complexes using subword complexes through the greedy flip algorithm).

CC:  @tscrim @fchapoton @nthiery

Keywords: reflection group, coxeter group, subword complex, days80

Branch/Commit: 6f2172b794ec53d55bd7920125b92662dc17edc8

Reviewer: Frédéric Chapoton

Author: Christian Stump

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20943





---

archive/issue_comments_304512.json:
```json
{
    "body": "<a id='comment:1'></a>I will provide code in a minute; any suggestions how to properly do get the number of reflections in the fastest way for `WeylGroups` or `CoxeterGroups`? Currently, it uses the definition of the degrees, but that is too slow given that it should and can be fast.",
    "created_at": "2016-07-05T18:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304512",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:1'></a>I will provide code in a minute; any suggestions how to properly do get the number of reflections in the fastest way for `WeylGroups` or `CoxeterGroups`? Currently, it uses the definition of the degrees, but that is too slow given that it should and can be fast.



---

archive/issue_comments_304513.json:
```json
{
    "body": "<a id='comment:2'></a>For Weyl groups, I get\n\n```\nsage: W = WeylGroup(['E',7])\nsage: %timeit len(W.long_element(as_word=True))\n10 loops, best of 3: 98.6 ms per loop\nsage: %timeit W.number_of_reflections()\n1 loop, best of 3: 208 ms per loop\n```\nand for Coxeter groups, I get\n\n```\nsage: W = CoxeterGroup(['E',7])\nsage: %timeit len(W.long_element(as_word=True))\n1 loop, best of 3: 206 ms per loop\nsage: %timeit W.number_of_reflections()\n1 loop, best of 3: 378 ms per loop\n```\nso I leave the current implementation for those (though this is not as clean as it should be).",
    "created_at": "2016-07-05T18:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304513",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:2'></a>For Weyl groups, I get

```
sage: W = WeylGroup(['E',7])
sage: %timeit len(W.long_element(as_word=True))
10 loops, best of 3: 98.6 ms per loop
sage: %timeit W.number_of_reflections()
1 loop, best of 3: 208 ms per loop
```
and for Coxeter groups, I get

```
sage: W = CoxeterGroup(['E',7])
sage: %timeit len(W.long_element(as_word=True))
1 loop, best of 3: 206 ms per loop
sage: %timeit W.number_of_reflections()
1 loop, best of 3: 378 ms per loop
```
so I leave the current implementation for those (though this is not as clean as it should be).



---

archive/issue_comments_304514.json:
```json
{
    "body": "<a id='comment:4'></a>\n```\nsage: W = ReflectionGroup(['A',6]); c = list(W.index_set())\nsage: Q = c+W.w0.coxeter_sorting_word(c)\nsage: %time S = SubwordComplex(Q,W.w0,algorithm=\"greedy\")\n```\nwith the fix, I get\n\n```\nCPU times: user 222 ms, sys: 16.1 ms, total: 238 ms\nWall time: 248 ms\n```\nand without the fix, I get\n\n```\nCPU times: user 1.35 s, sys: 37.7 ms, total: 1.39 s\nWall time: 1.4 s\n```\nFor types E, it becomes obviously much worse.",
    "created_at": "2016-07-05T18:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304514",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:4'></a>
```
sage: W = ReflectionGroup(['A',6]); c = list(W.index_set())
sage: Q = c+W.w0.coxeter_sorting_word(c)
sage: %time S = SubwordComplex(Q,W.w0,algorithm="greedy")
```
with the fix, I get

```
CPU times: user 222 ms, sys: 16.1 ms, total: 238 ms
Wall time: 248 ms
```
and without the fix, I get

```
CPU times: user 1.35 s, sys: 37.7 ms, total: 1.39 s
Wall time: 1.4 s
```
For types E, it becomes obviously much worse.



---

archive/issue_comments_304515.json:
```json
{
    "body": "<a id='comment:5'></a>I tried to push and to set the branch by hand, but I am not sure it actually worked...",
    "created_at": "2016-07-05T19:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304515",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:5'></a>I tried to push and to set the branch by hand, but I am not sure it actually worked...



---

archive/issue_comments_304516.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The method ``_flip_c`` currently uses\n+The method `_flip_c` currently uses\n \n ```\n nr_ref = len(W.long_element(as_word=True))\n```\n",
    "created_at": "2016-07-05T19:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304516",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The method ``_flip_c`` currently uses
+The method `_flip_c` currently uses
 
 ```
 nr_ref = len(W.long_element(as_word=True))
```




---

archive/issue_comments_304517.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-05T19:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304517",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_304518.json:
```json
{
    "body": "<a id='comment:7'></a>Sorry, but I do not understand the logic of your change.\n\nWhat is this attribute `__number_of_reflections` ? Does it exist only in the complex reflection group implementation ?\n\nOne should also replace the default code for `number_of_reflections` by the faster\n\n```\nfrom sage.rings.all import ZZ\nreturn ZZ.sum(self.degrees() - 1)\n```\nthat avoid to use rank.\n\n---\nNew commits:",
    "created_at": "2016-07-06T09:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304518",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>Sorry, but I do not understand the logic of your change.

What is this attribute `__number_of_reflections` ? Does it exist only in the complex reflection group implementation ?

One should also replace the default code for `number_of_reflections` by the faster

```
from sage.rings.all import ZZ
return ZZ.sum(self.degrees() - 1)
```
that avoid to use rank.

---
New commits:



---

archive/issue_comments_304519.json:
```json
{
    "body": "<a id='comment:8'></a>the doctests are missing the `# optional`",
    "created_at": "2016-07-06T10:05:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304519",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>the doctests are missing the `# optional`



---

archive/issue_comments_304520.json:
```json
{
    "body": "<a id='comment:9'></a>Okay, I guess you are right. I should and will do it properly:\n\n1. make the method `ReflectionGroup.number_of_reflections` use the attribute `ReflectionGroup._number_of_reflections` instead of recomputing it,\n\n2. make this flip code use the method instead of the attribute for `ReflectionGroup` and also use this attribute for `WeylGroup` and `CoxeterGroup`, and finally\n\n3. make `WeylGroup` and `CoxeterGroup` compute the number of reflections in the fastest possible way.",
    "created_at": "2016-07-06T12:01:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304520",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:9'></a>Okay, I guess you are right. I should and will do it properly:

1. make the method `ReflectionGroup.number_of_reflections` use the attribute `ReflectionGroup._number_of_reflections` instead of recomputing it,

2. make this flip code use the method instead of the attribute for `ReflectionGroup` and also use this attribute for `WeylGroup` and `CoxeterGroup`, and finally

3. make `WeylGroup` and `CoxeterGroup` compute the number of reflections in the fastest possible way.



---

archive/issue_comments_304521.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-06T12:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304521",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304522.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-06T12:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304522",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304523.json:
```json
{
    "body": "<a id='comment:12'></a>ok. Looks much better.\n\nHave you re-done the timings to compare the new \"number_of_reflections\"\nwith the previously used len of the longest word ?",
    "created_at": "2016-07-06T12:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304523",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'></a>ok. Looks much better.

Have you re-done the timings to compare the new "number_of_reflections"
with the previously used len of the longest word ?



---

archive/issue_comments_304524.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-06T12:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304524",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304525.json:
```json
{
    "body": "<a id='comment:14'></a>The timings should still be the old as the change\n\n```\n-            return ZZ.sum(self.degrees()) - self.rank()\n+            return ZZ.sum(deg-1 for deg in self.degrees())\n```\nshould not make any difference... (just checked, no change there). It would be better if we either do a speed improvement of the `degrees` method for `WeylGroup` and `CoxeterGroup`, or make `number_of_reflections` there use the length of the longest element there instead.",
    "created_at": "2016-07-06T12:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304525",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:14'></a>The timings should still be the old as the change

```
-            return ZZ.sum(self.degrees()) - self.rank()
+            return ZZ.sum(deg-1 for deg in self.degrees())
```
should not make any difference... (just checked, no change there). It would be better if we either do a speed improvement of the `degrees` method for `WeylGroup` and `CoxeterGroup`, or make `number_of_reflections` there use the length of the longest element there instead.



---

archive/issue_comments_304526.json:
```json
{
    "body": "<a id='comment:15'></a>But I think that should go into a different ticket.",
    "created_at": "2016-07-06T12:26:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304526",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:15'></a>But I think that should go into a different ticket.



---

archive/issue_comments_304527.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 stumpc5]:\n> But I think that should go into a different ticket.\n\n\nok, indeed.",
    "created_at": "2016-07-06T12:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304527",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>Replying to [comment:15 stumpc5]:
> But I think that should go into a different ticket.


ok, indeed.



---

archive/issue_comments_304528.json:
```json
{
    "body": "<a id='comment:17'></a>An idea: why not make `number_of_reflection` a `cached_method` in all cases?",
    "created_at": "2016-07-06T12:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304528",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'></a>An idea: why not make `number_of_reflection` a `cached_method` in all cases?



---

archive/issue_comments_304529.json:
```json
{
    "body": "<a id='comment:18'></a>That is now #20956.",
    "created_at": "2016-07-06T12:34:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304529",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:18'></a>That is now #20956.



---

archive/issue_comments_304530.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:17 chapoton]:\n> An idea: why not make `number_of_reflection` a `cached_method` in all cases?\n\n\nWhy not, we could also do that. Maybe that's even the \"right\" solution, as the caching doesn't take any memory while avoids recomputing a bigger computation again and again.",
    "created_at": "2016-07-06T12:36:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304530",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:19'></a>Replying to [comment:17 chapoton]:
> An idea: why not make `number_of_reflection` a `cached_method` in all cases?


Why not, we could also do that. Maybe that's even the "right" solution, as the caching doesn't take any memory while avoids recomputing a bigger computation again and again.



---

archive/issue_comments_304531.json:
```json
{
    "body": "<a id='comment:20'></a>If you do not object, I would add this here to this ticket and make the other a duplicate.",
    "created_at": "2016-07-06T12:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304531",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:20'></a>If you do not object, I would add this here to this ticket and make the other a duplicate.



---

archive/issue_comments_304532.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-06T12:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304533.json:
```json
{
    "body": "<a id='comment:22'></a>ok, then you can get rid of the attribute and the method in reflection_group_complex",
    "created_at": "2016-07-06T12:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304533",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'></a>ok, then you can get rid of the attribute and the method in reflection_group_complex



---

archive/issue_comments_304534.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:22 chapoton]:\n> ok, then you can get rid of the attribute and the method in reflection_group_complex\n\n\nOut of curiosity: is it faster to use a cached method, or to use an attribute? Or is that difference never important?",
    "created_at": "2016-07-06T12:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304534",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:23'></a>Replying to [comment:22 chapoton]:
> ok, then you can get rid of the attribute and the method in reflection_group_complex


Out of curiosity: is it faster to use a cached method, or to use an attribute? Or is that difference never important?



---

archive/issue_comments_304535.json:
```json
{
    "body": "<a id='comment:24'></a>I do not know, sorry. I guess both are fast enough for our purposes, but we can aim\nfor simplicity for the moment, maybe ?",
    "created_at": "2016-07-06T13:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304535",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>I do not know, sorry. I guess both are fast enough for our purposes, but we can aim
for simplicity for the moment, maybe ?



---

archive/issue_comments_304536.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-06T13:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304536",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304537.json:
```json
{
    "body": "<a id='comment:26'></a>ok, let it be.",
    "created_at": "2016-07-06T13:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304537",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:26'></a>ok, let it be.



---

archive/issue_comments_304538.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-06T13:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304538",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_304539.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 chapoton]:\n> ok, let it be.\n\n\nthanks!",
    "created_at": "2016-07-06T13:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304539",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:27'></a>Replying to [comment:26 chapoton]:
> ok, let it be.


thanks!



---

archive/issue_comments_304540.json:
```json
{
    "body": "<a id='comment:28'></a>Just FYI - calling a ``@`cached_method` is ~10% slower than a (Python) attribute lookup:\n\n```python\nsage: class Foo(object):\n....:     def __init__(self, x):\n....:         self.x = x\n....:         self._y = x\n....:     @cached_method\n....:     def y(self):\n....:         return self._y\n....:     \nsage: F = Foo(5)\nsage: %timeit F.x\nThe slowest run took 73.41 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000000 loops, best of 3: 42.2 ns per loop\nsage: %timeit F.y()\nThe slowest run took 2799.35 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000000 loops, best of 3: 57.1 ns per loop\n```\nHowever, it is better code (IMO) to use the cached method mechanism, and it makes it easier to change/override it.",
    "created_at": "2016-07-06T21:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304540",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>Just FYI - calling a ``@`cached_method` is ~10% slower than a (Python) attribute lookup:

```python
sage: class Foo(object):
....:     def __init__(self, x):
....:         self.x = x
....:         self._y = x
....:     @cached_method
....:     def y(self):
....:         return self._y
....:     
sage: F = Foo(5)
sage: %timeit F.x
The slowest run took 73.41 times longer than the fastest. This could mean that an intermediate result is being cached.
10000000 loops, best of 3: 42.2 ns per loop
sage: %timeit F.y()
The slowest run took 2799.35 times longer than the fastest. This could mean that an intermediate result is being cached.
10000000 loops, best of 3: 57.1 ns per loop
```
However, it is better code (IMO) to use the cached method mechanism, and it makes it easier to change/override it.



---

archive/issue_events_056072.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-08T07:09:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20943#event-56072"
}
```



---

archive/issue_comments_304541.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-07-08T07:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20943#issuecomment-304541",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
