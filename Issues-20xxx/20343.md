# Issue 20343: Add file `sage/misc/latex_standalone.py` and class `TikzPicture`

archive/issues_020106.json:
```json
{
    "body": "The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state and it is mature enough to go into SageMath now.\n\nHere is a demo inside a Jupyter notebook (notice that the import line was since changed to `from sage.misc.latex_standalone import TikzPicture`):\n\n<img src=\"https://github.com/sagemath/sage/files/ticket20343/tikz-jupyter-demo.png\" width=width=600>\n\nMore examples:\n\n```\nsage: from sage.misc.latex_standalone import TikzPicture\nsage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]\nsage: P = Polyhedron(vertices=V).polar()\nsage: s = P.projection().tikz([674,108,-731],112)\nsage: t = TikzPicture(s)\nsage: t.pdf()             # opens the pdf in a viewer                                                        \n'/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'\nsage: t.pdf('image.pdf')  # when a filename is provided, it doesn't open in a viewer                                            \n'/home/slabbe/image.pdf'\n```\n\nIt may create the image into png format (translation pdf -> png made with convert from imagemagick) or svg format (translation pdf -> svg made with pdf2svg):\n\n```\nsage: path_to_file = t.png()                                              \nsage: path_to_file = t.svg()\nsage: path_to_file = t.tex()\n```\n\nIn a Jupyter notebook, this shows the picture below the cell (using rich repr):\n\n```\nsage: t\n```\n\nIn the terminal, this shows the header and tail of the tikzpicture code:\n\n```\nsage: t                                                                                                    \n\\documentclass[tikz]{standalone}\n\\usepackage{amsmath}\n\\begin{document}\n\\begin{tikzpicture}%\n\t[x={(0.249656cm, -0.577639cm)},\n\ty={(0.777700cm, -0.358578cm)},\n\tz={(-0.576936cm, -0.733318cm)},\n\tscale=1.000000,\n---\n91 lines not printed (5169 characters in total).\nUse print to see the full content.\n---\n\\node[vertex] at (0.00000, -1.00000, 0.00000)     {};\n\\node[vertex] at (-0.50000, -0.50000, -0.50000)     {};\n%%\n%%\n\\end{tikzpicture}\n\\end{document}\n```\n\nUse `print` to see the full content:\n\n```\nsage: print(t) \n```\n\nA second example shows that it is faster than view and better (avoids to crop the vertices):\n\n```\nsage: g = graphs.PetersenGraph()\nsage: %time _ = TikzPicture(latex(g), standalone_options=[\"border=4mm\"], usepackage=['tkz-graph']).pdf()\nCPU times: user 3.52 ms, sys: 12.7 ms, total: 16.2 ms\nWall time: 2.24 s     \n```\n\ncompared to using view (which crops the vertices and creates two pages pdf on mac):\n\n```\nsage: %time view(g, tightpage=True)               \nCPU times: user 126 ms, sys: 85 ms, total: 211 ms \nWall time: 6.06 s\n```\n\nAlso, if dot2tex and graphviz available, one may directly construct a tikzpicture from a sagemath graph:\n\n```\nsage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex\n```\n\nThe `tikzpicture.py` was developped within optional package `slabbe` since 2015. Its interface should be stable enough to go into sage now.\n\nMeanwhile any user can use this tikzpicture module by installing the package:\n\n```\nsage -pip install slabbe\n```\n\nand\n\n```\nsage: from slabbe import TikzPicture\n```\n\nAn example of usage of this module can be found at this url:\n\n- https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n\nassociated to the preprint\n\n- https://arxiv.org/abs/1906.01104\n\npublished in Journal of Modern Dynamics at\n\n- http://dx.doi.org/10.3934/jmd.2021017\n\nDepends on #32650\n\nDepends on #33005\n\n**CC:**  @dkrenn @jplab @slel @fchapoton\n\n**Branch:** [5c9b41c96e4213242fee4af98b934914fb4d2360](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)\n\n**Reviewer:** Jean-Philippe Labb\u00e9, Xavier Caruso, Vincent Delecroix, Matthias Koeppe\n\n**Author:** S\u00e9bastien Labb\u00e9\n\nIssue created by migration from https://trac.sagemath.org/ticket/20343\n\n",
    "closed_at": "2022-03-30T22:33:17Z",
    "created_at": "2016-04-01T12:33:17Z",
    "labels": [
        "component: misc",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "title": "Add file `sage/misc/latex_standalone.py` and class `TikzPicture`",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/20343",
    "user": "https://github.com/seblabbe"
}
```
The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state and it is mature enough to go into SageMath now.

Here is a demo inside a Jupyter notebook (notice that the import line was since changed to `from sage.misc.latex_standalone import TikzPicture`):

<img src="https://github.com/sagemath/sage/files/ticket20343/tikz-jupyter-demo.png" width=width=600>

More examples:

```
sage: from sage.misc.latex_standalone import TikzPicture
sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]
sage: P = Polyhedron(vertices=V).polar()
sage: s = P.projection().tikz([674,108,-731],112)
sage: t = TikzPicture(s)
sage: t.pdf()             # opens the pdf in a viewer                                                        
'/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'
sage: t.pdf('image.pdf')  # when a filename is provided, it doesn't open in a viewer                                            
'/home/slabbe/image.pdf'
```

It may create the image into png format (translation pdf -> png made with convert from imagemagick) or svg format (translation pdf -> svg made with pdf2svg):

```
sage: path_to_file = t.png()                                              
sage: path_to_file = t.svg()
sage: path_to_file = t.tex()
```

In a Jupyter notebook, this shows the picture below the cell (using rich repr):

```
sage: t
```

In the terminal, this shows the header and tail of the tikzpicture code:

```
sage: t                                                                                                    
\documentclass[tikz]{standalone}
\usepackage{amsmath}
\begin{document}
\begin{tikzpicture}%
	[x={(0.249656cm, -0.577639cm)},
	y={(0.777700cm, -0.358578cm)},
	z={(-0.576936cm, -0.733318cm)},
	scale=1.000000,
---
91 lines not printed (5169 characters in total).
Use print to see the full content.
---
\node[vertex] at (0.00000, -1.00000, 0.00000)     {};
\node[vertex] at (-0.50000, -0.50000, -0.50000)     {};
%%
%%
\end{tikzpicture}
\end{document}
```

Use `print` to see the full content:

```
sage: print(t) 
```

A second example shows that it is faster than view and better (avoids to crop the vertices):

```
sage: g = graphs.PetersenGraph()
sage: %time _ = TikzPicture(latex(g), standalone_options=["border=4mm"], usepackage=['tkz-graph']).pdf()
CPU times: user 3.52 ms, sys: 12.7 ms, total: 16.2 ms
Wall time: 2.24 s     
```

compared to using view (which crops the vertices and creates two pages pdf on mac):

```
sage: %time view(g, tightpage=True)               
CPU times: user 126 ms, sys: 85 ms, total: 211 ms 
Wall time: 6.06 s
```

Also, if dot2tex and graphviz available, one may directly construct a tikzpicture from a sagemath graph:

```
sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex
```

The `tikzpicture.py` was developped within optional package `slabbe` since 2015. Its interface should be stable enough to go into sage now.

Meanwhile any user can use this tikzpicture module by installing the package:

```
sage -pip install slabbe
```

and

```
sage: from slabbe import TikzPicture
```

An example of usage of this module can be found at this url:

- https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb

associated to the preprint

- https://arxiv.org/abs/1906.01104

published in Journal of Modern Dynamics at

- http://dx.doi.org/10.3934/jmd.2021017

Depends on #32650

Depends on #33005

**CC:**  @dkrenn @jplab @slel @fchapoton

**Branch:** [5c9b41c96e4213242fee4af98b934914fb4d2360](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)

**Reviewer:** Jean-Philippe Labbé, Xavier Caruso, Vincent Delecroix, Matthias Koeppe

**Author:** Sébastien Labbé

Issue created by migration from https://trac.sagemath.org/ticket/20343





---

archive/issue_comments_295810.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,23 @@\n-From my optional Sage package [1] slabbe-0.2.spkg.\n+Importing a file from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.\n \n-[1] https://github.com/seblabbe/slabbe\n+```\n+sage: from sage.misc.tikz_picture import TikzPicture\n+sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]\n+sage: P = Polyhedron(vertices=V).polar()\n+sage: s = P.projection().tikz([674,108,-731],112)\n+sage: t = TikzPicture(s)\n+sage: t.pdf()\n+```\n+\n+```\n+sage: g = graphs.PetersenGraph()\n+sage: s = latex(g)\n+sage: t = TikzPicture(s, standalone_configs=[\"border=4mm\"], packages=['tkz-graph'])\n+sage: _ = t.pdf()\n+```\n+\n+If dot2tex and graphviz available:\n+\n+```\n+sage: t = TikzPicture.from_graph(g)  # optional: dot2tex\n+```\n``````\n",
    "created_at": "2016-04-01T12:38:01Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295810",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,23 @@
-From my optional Sage package [1] slabbe-0.2.spkg.
+Importing a file from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.
 
-[1] https://github.com/seblabbe/slabbe
+```
+sage: from sage.misc.tikz_picture import TikzPicture
+sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]
+sage: P = Polyhedron(vertices=V).polar()
+sage: s = P.projection().tikz([674,108,-731],112)
+sage: t = TikzPicture(s)
+sage: t.pdf()
+```
+
+```
+sage: g = graphs.PetersenGraph()
+sage: s = latex(g)
+sage: t = TikzPicture(s, standalone_configs=["border=4mm"], packages=['tkz-graph'])
+sage: _ = t.pdf()
+```
+
+If dot2tex and graphviz available:
+
+```
+sage: t = TikzPicture.from_graph(g)  # optional: dot2tex
+```
``````




---

archive/issue_comments_295811.json:
```json
{
    "body": "**Commit:** [476b574c4198115e6e98e3396ed32f4b95077c35](https://github.com/sagemath/sagetrac-mirror/commit/476b574c4198115e6e98e3396ed32f4b95077c35)",
    "created_at": "2016-04-01T13:32:02Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295811",
    "user": "https://github.com/seblabbe"
}
```

**Commit:** [476b574c4198115e6e98e3396ed32f4b95077c35](https://github.com/sagemath/sagetrac-mirror/commit/476b574c4198115e6e98e3396ed32f4b95077c35)



---

archive/issue_comments_295812.json:
```json
{
    "body": "**Branch:** [u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)",
    "created_at": "2016-04-01T13:32:02Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295812",
    "user": "https://github.com/seblabbe"
}
```

**Branch:** [u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)



---

archive/issue_events_182659.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-04-01T13:32:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182659"
}
```



---

archive/issue_comments_295813.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/476b574c4198115e6e98e3396ed32f4b95077c35\">476b574</a></td><td><code>20343: Adding tikzpicture.py in sage/misc</code></td></tr></table>\n",
    "created_at": "2016-04-01T13:32:02Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295813",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/476b574c4198115e6e98e3396ed32f4b95077c35">476b574</a></td><td><code>20343: Adding tikzpicture.py in sage/misc</code></td></tr></table>




---

archive/issue_comments_295814.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,9 @@\n-Importing a file from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.\n+Importing `TikzPicture` class from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.\n+\n+One example:\n \n ```\n-sage: from sage.misc.tikz_picture import TikzPicture\n+sage: from sage.misc.tikzpicture import TikzPicture\n sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]\n sage: P = Polyhedron(vertices=V).polar()\n sage: s = P.projection().tikz([674,108,-731],112)\n@@ -9,15 +11,27 @@\n sage: t.pdf()\n ```\n \n+Second example:\n+\n ```\n sage: g = graphs.PetersenGraph()\n-sage: s = latex(g)\n-sage: t = TikzPicture(s, standalone_configs=[\"border=4mm\"], packages=['tkz-graph'])\n-sage: _ = t.pdf()\n+sage: %time _ = TikzPicture(latex(g), standalone_configs=[\"border=4mm\"], packages=['tkz-graph']).pdf()\n+CPU times: user 3.52 ms, sys: 12.7 ms, total: 16.2 ms\n+Wall time: 2.24 s     \n ```\n \n-If dot2tex and graphviz available:\n+compared to using view (which crops the vertices and creates two pages pdf on mac):\n \n ```\n-sage: t = TikzPicture.from_graph(g)  # optional: dot2tex\n+sage: %time view(g, tightpage=True)               \n+CPU times: user 126 ms, sys: 85 ms, total: 211 ms \n+Wall time: 6.06 s\n ```\n+\n+Also, if dot2tex and graphviz available:\n+\n+```\n+sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex\n+```\n+\n+\n``````\n",
    "created_at": "2016-04-01T13:44:27Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295814",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,9 @@
-Importing a file from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.
+Importing `TikzPicture` class from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.
+
+One example:
 
 ```
-sage: from sage.misc.tikz_picture import TikzPicture
+sage: from sage.misc.tikzpicture import TikzPicture
 sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]
 sage: P = Polyhedron(vertices=V).polar()
 sage: s = P.projection().tikz([674,108,-731],112)
@@ -9,15 +11,27 @@
 sage: t.pdf()
 ```
 
+Second example:
+
 ```
 sage: g = graphs.PetersenGraph()
-sage: s = latex(g)
-sage: t = TikzPicture(s, standalone_configs=["border=4mm"], packages=['tkz-graph'])
-sage: _ = t.pdf()
+sage: %time _ = TikzPicture(latex(g), standalone_configs=["border=4mm"], packages=['tkz-graph']).pdf()
+CPU times: user 3.52 ms, sys: 12.7 ms, total: 16.2 ms
+Wall time: 2.24 s     
 ```
 
-If dot2tex and graphviz available:
+compared to using view (which crops the vertices and creates two pages pdf on mac):
 
 ```
-sage: t = TikzPicture.from_graph(g)  # optional: dot2tex
+sage: %time view(g, tightpage=True)               
+CPU times: user 126 ms, sys: 85 ms, total: 211 ms 
+Wall time: 6.06 s
 ```
+
+Also, if dot2tex and graphviz available:
+
+```
+sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex
+```
+
+
``````




---

archive/issue_events_182660.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-04-01T13:49:29Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "rename": {
        "from": "Adding sage/misc/tikz_picture.py",
        "to": "Adding sage/misc/tikzpicture.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182660"
}
```



---

archive/issue_comments_295815.json:
```json
{
    "body": "<a id='comment:5'></a>\nA comment:\n\n```\nt = TikzPicture(latex(transducers.GrayCode()))\nt.pdf()\n```\ndoes not work as the preamble is not set correctly. However, there is\n\n```\nfrom sage.combinat.finite_state_machine import setup_latex_preamble\nsetup_latex_preamble()\n```\n(as well as the corresponding function in `sage.graphs.graph_latex`) to set this correctly, but it seems to be ignored by `TikzPicture`. \n\nIn contrast, \n\n```\nview(transducers.GrayCode())\n```\nworks, but I have no idea if `setup_latex_preamble` is called (not needed to be done manually) or if tikz is included anyways.",
    "created_at": "2016-04-04T18:31:05Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295815",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:5'></a>
A comment:

```
t = TikzPicture(latex(transducers.GrayCode()))
t.pdf()
```
does not work as the preamble is not set correctly. However, there is

```
from sage.combinat.finite_state_machine import setup_latex_preamble
setup_latex_preamble()
```
(as well as the corresponding function in `sage.graphs.graph_latex`) to set this correctly, but it seems to be ignored by `TikzPicture`. 

In contrast, 

```
view(transducers.GrayCode())
```
works, but I have no idea if `setup_latex_preamble` is called (not needed to be done manually) or if tikz is included anyways.



---

archive/issue_comments_295816.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [@dkrenn](#comment%3A5):\n> A comment:\n> \n> ```\n> t = TikzPicture(latex(transducers.GrayCode()))\n> t.pdf()\n> ```\n> does not work as the preamble is not set correctly.\n\nAs it is now, the user must set the libraries. This should work:\n\n```\nt = TikzPicture(latex(transducers.GrayCode()), tikzlibraries=['automata'])\nt.pdf()\n```\n\nI am still not sure about the proper way to choose the arguments for the `__init__` function and their especially their default values. Should the arguments be empty by default? equal to the current sage latex preamble? or full of a big load of libraries?",
    "created_at": "2016-04-04T19:36:54Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295816",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:6'></a>
Replying to [@dkrenn](#comment%3A5):
> A comment:
> 
> ```
> t = TikzPicture(latex(transducers.GrayCode()))
> t.pdf()
> ```
> does not work as the preamble is not set correctly.

As it is now, the user must set the libraries. This should work:

```
t = TikzPicture(latex(transducers.GrayCode()), tikzlibraries=['automata'])
t.pdf()
```

I am still not sure about the proper way to choose the arguments for the `__init__` function and their especially their default values. Should the arguments be empty by default? equal to the current sage latex preamble? or full of a big load of libraries?



---

archive/issue_comments_295817.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [@seblabbe](#comment%3A6):\n> Replying to [@dkrenn](#comment%3A5):\n> > A comment:\n> > \n> > ```\n> > t = TikzPicture(latex(transducers.GrayCode()))\n> > t.pdf()\n> > ```\n> > does not work as the preamble is not set correctly.\n\n> \n> As it is now, the user must set the libraries. This should work:\n> \n> ```\n> t = TikzPicture(latex(transducers.GrayCode()), tikzlibraries=['automata'])\n> t.pdf()\n> ```\n\nWorks, thanks.\n\n> I am still not sure about the proper way to choose the arguments for the `__init__` function and their especially their default values. Should the arguments be empty by default? equal to the current sage latex preamble? or full of a big load of libraries?\n\nWithout much thinking, I vote for: The second, equal to the current sage latex preamble.",
    "created_at": "2016-04-05T08:34:12Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295817",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:7'></a>
Replying to [@seblabbe](#comment%3A6):
> Replying to [@dkrenn](#comment%3A5):
> > A comment:
> > 
> > ```
> > t = TikzPicture(latex(transducers.GrayCode()))
> > t.pdf()
> > ```
> > does not work as the preamble is not set correctly.

> 
> As it is now, the user must set the libraries. This should work:
> 
> ```
> t = TikzPicture(latex(transducers.GrayCode()), tikzlibraries=['automata'])
> t.pdf()
> ```

Works, thanks.

> I am still not sure about the proper way to choose the arguments for the `__init__` function and their especially their default values. Should the arguments be empty by default? equal to the current sage latex preamble? or full of a big load of libraries?

Without much thinking, I vote for: The second, equal to the current sage latex preamble.



---

archive/issue_comments_295818.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7512091c4d529af71f5176ecafa723a9027ddf27\">7512091</a></td><td><code>20343: Adding tikzpicture.py in sage/misc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ae7f63de1517e4c483e500757989b6efde5b785\">4ae7f63</a></td><td><code>20343: improving the default argument choices for TikzPicture</code></td></tr></table>\n",
    "created_at": "2016-04-07T22:58:45Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295818",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7512091c4d529af71f5176ecafa723a9027ddf27">7512091</a></td><td><code>20343: Adding tikzpicture.py in sage/misc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ae7f63de1517e4c483e500757989b6efde5b785">4ae7f63</a></td><td><code>20343: improving the default argument choices for TikzPicture</code></td></tr></table>




---

archive/issue_comments_295819.json:
```json
{
    "body": "**Changing commit** from \"[476b574c4198115e6e98e3396ed32f4b95077c35](https://github.com/sagemath/sagetrac-mirror/commit/476b574c4198115e6e98e3396ed32f4b95077c35)\" to \"[4ae7f63de1517e4c483e500757989b6efde5b785](https://github.com/sagemath/sagetrac-mirror/commit/4ae7f63de1517e4c483e500757989b6efde5b785)\".",
    "created_at": "2016-04-07T22:58:45Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295819",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[476b574c4198115e6e98e3396ed32f4b95077c35](https://github.com/sagemath/sagetrac-mirror/commit/476b574c4198115e6e98e3396ed32f4b95077c35)" to "[4ae7f63de1517e4c483e500757989b6efde5b785](https://github.com/sagemath/sagetrac-mirror/commit/4ae7f63de1517e4c483e500757989b6efde5b785)".



---

archive/issue_comments_295820.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,7 +15,7 @@\n \n ```\n sage: g = graphs.PetersenGraph()\n-sage: %time _ = TikzPicture(latex(g), standalone_configs=[\"border=4mm\"], packages=['tkz-graph']).pdf()\n+sage: %time _ = TikzPicture(latex(g), standalone_options=[\"border=4mm\"], usepackage=['tkz-graph']).pdf()\n CPU times: user 3.52 ms, sys: 12.7 ms, total: 16.2 ms\n Wall time: 2.24 s     \n ```\n``````\n",
    "created_at": "2016-04-07T22:59:54Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295820",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,7 +15,7 @@
 
 ```
 sage: g = graphs.PetersenGraph()
-sage: %time _ = TikzPicture(latex(g), standalone_configs=["border=4mm"], packages=['tkz-graph']).pdf()
+sage: %time _ = TikzPicture(latex(g), standalone_options=["border=4mm"], usepackage=['tkz-graph']).pdf()
 CPU times: user 3.52 ms, sys: 12.7 ms, total: 16.2 ms
 Wall time: 2.24 s     
 ```
``````




---

archive/issue_comments_295821.json:
```json
{
    "body": "**Changing commit** from \"[4ae7f63de1517e4c483e500757989b6efde5b785](https://github.com/sagemath/sagetrac-mirror/commit/4ae7f63de1517e4c483e500757989b6efde5b785)\" to \"\".",
    "created_at": "2016-12-09T09:32:55Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295821",
    "user": "https://github.com/seblabbe"
}
```

**Changing commit** from "[4ae7f63de1517e4c483e500757989b6efde5b785](https://github.com/sagemath/sagetrac-mirror/commit/4ae7f63de1517e4c483e500757989b6efde5b785)" to "".



---

archive/issue_comments_295822.json:
```json
{
    "body": "**Changing branch** from \"[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)\" to \"\".",
    "created_at": "2016-12-09T09:32:55Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295822",
    "user": "https://github.com/seblabbe"
}
```

**Changing branch** from "[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)" to "".



---

archive/issue_comments_295823.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -34,4 +34,14 @@\n sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex\n ```\n \n+To avoid losing my time, I will not post a branch here until somebody tells me he is willing to review this module. Meanwhile any user can use this tikzpicture module by installing my package:\n \n+```\n+sage -pip install slabbe\n+```\n+\n+and\n+\n+```\n+sage: from slabbe import TikzPicture\n+```\n``````\n",
    "created_at": "2016-12-09T09:32:55Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295823",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -34,4 +34,14 @@
 sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex
 ```
 
+To avoid losing my time, I will not post a branch here until somebody tells me he is willing to review this module. Meanwhile any user can use this tikzpicture module by installing my package:
 
+```
+sage -pip install slabbe
+```
+
+and
+
+```
+sage: from slabbe import TikzPicture
+```
``````




---

archive/issue_comments_295824.json:
```json
{
    "body": "<a id='comment:10'></a>\nMy module has evolved in my package slabbe, therefore the branch here is not up to date anymore. Also, I intend to make it more general during the next year allowing any content not only tikzpicture code. Therefore, I deleted the branch posted here.",
    "created_at": "2016-12-09T09:32:55Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295824",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:10'></a>
My module has evolved in my package slabbe, therefore the branch here is not up to date anymore. Also, I intend to make it more general during the next year allowing any content not only tikzpicture code. Therefore, I deleted the branch posted here.



---

archive/issue_comments_295825.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -34,7 +34,9 @@\n sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex\n ```\n \n-To avoid losing my time, I will not post a branch here until somebody tells me he is willing to review this module. Meanwhile any user can use this tikzpicture module by installing my package:\n+I intend to make further improvements to this module during the next year. Also, I will wait until somebody tells me he is willing to review this module before publishing a branch here.\n+\n+Meanwhile any user can use this tikzpicture module by installing my package:\n \n ```\n sage -pip install slabbe\n``````\n",
    "created_at": "2016-12-09T20:35:14Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295825",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -34,7 +34,9 @@
 sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex
 ```
 
-To avoid losing my time, I will not post a branch here until somebody tells me he is willing to review this module. Meanwhile any user can use this tikzpicture module by installing my package:
+I intend to make further improvements to this module during the next year. Also, I will wait until somebody tells me he is willing to review this module before publishing a branch here.
+
+Meanwhile any user can use this tikzpicture module by installing my package:
 
 ```
 sage -pip install slabbe
``````




---

archive/issue_events_182661.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-12-09T20:35:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182661"
}
```



---

archive/issue_events_182662.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-12-09T20:35:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182662"
}
```



---

archive/issue_comments_295826.json:
```json
{
    "body": "<a id='comment:11'></a>\nChanging status to needs work.",
    "created_at": "2016-12-09T20:35:14Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295826",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:11'></a>
Changing status to needs work.



---

archive/issue_comments_295827.json:
```json
{
    "body": "**Reviewer:** Jean-Philippe Labb\u00e9",
    "created_at": "2017-03-10T11:36:41Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295827",
    "user": "https://github.com/jplab"
}
```

**Reviewer:** Jean-Philippe Labbé



---

archive/issue_comments_295828.json:
```json
{
    "body": "<a id='comment:12'></a>\nAs a follow-up ticket to make use of this is #22506.",
    "created_at": "2017-03-10T11:36:41Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295828",
    "user": "https://github.com/jplab"
}
```

<a id='comment:12'></a>
As a follow-up ticket to make use of this is #22506.



---

archive/issue_comments_295829.json:
```json
{
    "body": "**Branch:** [u/caruso/tikzpicture](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/tikzpicture)",
    "created_at": "2021-03-31T13:13:24Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295829",
    "user": "https://github.com/xcaruso"
}
```

**Branch:** [u/caruso/tikzpicture](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/tikzpicture)



---

archive/issue_comments_295830.json:
```json
{
    "body": "<a id='comment:14'></a>\nI'll be happy to revive this ticket.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88c048c2a33618220a586f708273e41fd803f6bc\">88c048c</a></td><td><code>import tikz_picture.py from slabbe gitlab repository</code></td></tr></table>\n",
    "created_at": "2021-03-31T13:15:04Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295830",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:14'></a>
I'll be happy to revive this ticket.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88c048c2a33618220a586f708273e41fd803f6bc">88c048c</a></td><td><code>import tikz_picture.py from slabbe gitlab repository</code></td></tr></table>




---

archive/issue_comments_295831.json:
```json
{
    "body": "**Commit:** [88c048c2a33618220a586f708273e41fd803f6bc](https://github.com/sagemath/sagetrac-mirror/commit/88c048c2a33618220a586f708273e41fd803f6bc)",
    "created_at": "2021-03-31T13:15:04Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295831",
    "user": "https://github.com/xcaruso"
}
```

**Commit:** [88c048c2a33618220a586f708273e41fd803f6bc](https://github.com/sagemath/sagetrac-mirror/commit/88c048c2a33618220a586f708273e41fd803f6bc)



---

archive/issue_comments_295832.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2917f4b60238afcb4f097f3a256f734141aabe02\">2917f4b</a></td><td><code>doctests pass</code></td></tr></table>\n",
    "created_at": "2021-03-31T13:38:50Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2917f4b60238afcb4f097f3a256f734141aabe02">2917f4b</a></td><td><code>doctests pass</code></td></tr></table>




---

archive/issue_comments_295833.json:
```json
{
    "body": "**Changing commit** from \"[88c048c2a33618220a586f708273e41fd803f6bc](https://github.com/sagemath/sagetrac-mirror/commit/88c048c2a33618220a586f708273e41fd803f6bc)\" to \"[2917f4b60238afcb4f097f3a256f734141aabe02](https://github.com/sagemath/sagetrac-mirror/commit/2917f4b60238afcb4f097f3a256f734141aabe02)\".",
    "created_at": "2021-03-31T13:38:50Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295833",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[88c048c2a33618220a586f708273e41fd803f6bc](https://github.com/sagemath/sagetrac-mirror/commit/88c048c2a33618220a586f708273e41fd803f6bc)" to "[2917f4b60238afcb4f097f3a256f734141aabe02](https://github.com/sagemath/sagetrac-mirror/commit/2917f4b60238afcb4f097f3a256f734141aabe02)".



---

archive/issue_comments_295834.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cfc83431a25394be8b0dbc890d0dc0f72f54f56\">8cfc834</a></td><td><code>typos</code></td></tr></table>\n",
    "created_at": "2021-03-31T16:14:12Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295834",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cfc83431a25394be8b0dbc890d0dc0f72f54f56">8cfc834</a></td><td><code>typos</code></td></tr></table>




---

archive/issue_comments_295835.json:
```json
{
    "body": "**Changing commit** from \"[2917f4b60238afcb4f097f3a256f734141aabe02](https://github.com/sagemath/sagetrac-mirror/commit/2917f4b60238afcb4f097f3a256f734141aabe02)\" to \"[8cfc83431a25394be8b0dbc890d0dc0f72f54f56](https://github.com/sagemath/sagetrac-mirror/commit/8cfc83431a25394be8b0dbc890d0dc0f72f54f56)\".",
    "created_at": "2021-03-31T16:14:12Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295835",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2917f4b60238afcb4f097f3a256f734141aabe02](https://github.com/sagemath/sagetrac-mirror/commit/2917f4b60238afcb4f097f3a256f734141aabe02)" to "[8cfc83431a25394be8b0dbc890d0dc0f72f54f56](https://github.com/sagemath/sagetrac-mirror/commit/8cfc83431a25394be8b0dbc890d0dc0f72f54f56)".



---

archive/issue_comments_295836.json:
```json
{
    "body": "<a id='comment:17'></a>\nI'm not convinced by all the methods `from_dot_string`, `from_graph`, etc. in the class `TikzPicture`. I would say that this code should instead be in the classes implementing the object we want to display. E.g. it could be a method `_tikz_`, just as `_latex_`, and `TikzPicture` just calls it.\n\nWhat's your opinion?",
    "created_at": "2021-03-31T16:25:46Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295836",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:17'></a>
I'm not convinced by all the methods `from_dot_string`, `from_graph`, etc. in the class `TikzPicture`. I would say that this code should instead be in the classes implementing the object we want to display. E.g. it could be a method `_tikz_`, just as `_latex_`, and `TikzPicture` just calls it.

What's your opinion?



---

archive/issue_comments_295837.json:
```json
{
    "body": "<a id='comment:18'></a>\nThere is no class for `dot strings`. Graphs already have a `_latex_` method which returns a tikz picture string. It is what is used with for instance `view(G)`. The `from_graph` class method really is using `dot2tex` + `graphviz` which is not the same layout sometimes. It is true that maybe adding a `_tikz_` would avoid to replace the current behavior of `_latex_`. But then, having two different behaviors will be non pedagogical (how to know there is another one). Also, changing the default behavior will lead to problems...\n\nI think it will be easier to add the new module as is and later on, in other tickets, add such `_tikz_` methods in other parts of sage where it makes sense.",
    "created_at": "2021-04-01T10:35:20Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295837",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:18'></a>
There is no class for `dot strings`. Graphs already have a `_latex_` method which returns a tikz picture string. It is what is used with for instance `view(G)`. The `from_graph` class method really is using `dot2tex` + `graphviz` which is not the same layout sometimes. It is true that maybe adding a `_tikz_` would avoid to replace the current behavior of `_latex_`. But then, having two different behaviors will be non pedagogical (how to know there is another one). Also, changing the default behavior will lead to problems...

I think it will be easier to add the new module as is and later on, in other tickets, add such `_tikz_` methods in other parts of sage where it makes sense.



---

archive/issue_events_182663.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T17:17:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182663"
}
```



---

archive/issue_events_182664.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T17:17:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182664"
}
```



---

archive/issue_comments_295838.json:
```json
{
    "body": "<a id='comment:19'></a>\nOK. Let's keep it for another ticket.",
    "created_at": "2021-04-01T17:17:45Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295838",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:19'></a>
OK. Let's keep it for another ticket.



---

archive/issue_events_182665.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T17:17:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182665"
}
```



---

archive/issue_events_182666.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T17:17:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182666"
}
```



---

archive/issue_events_182667.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T17:18:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182667"
}
```



---

archive/issue_events_182668.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T17:18:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182668"
}
```



---

archive/issue_comments_295839.json:
```json
{
    "body": "**Changing reviewer** from \"Jean-Philippe Labb\u00e9\" to \"Jean-Philippe Labb\u00e9, Xavier Caruso\".",
    "created_at": "2021-04-01T17:18:39Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295839",
    "user": "https://github.com/xcaruso"
}
```

**Changing reviewer** from "Jean-Philippe Labbé" to "Jean-Philippe Labbé, Xavier Caruso".



---

archive/issue_comments_295840.json:
```json
{
    "body": "<a id='comment:22'></a>\nplease no \"from future import ...\"\n\nReturns should be Return",
    "created_at": "2021-04-01T19:03:48Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295840",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'></a>
please no "from future import ..."

Returns should be Return



---

archive/issue_events_182669.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T20:49:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182669"
}
```



---

archive/issue_events_182670.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T20:49:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182670"
}
```



---

archive/issue_comments_295841.json:
```json
{
    "body": "<a id='comment:23'></a>\nAlso if pdflatex is not installed on the machine, some doctests fail.\nI don't know if this should be fixed but I think so because otherwise patchbots complain.",
    "created_at": "2021-04-01T20:49:27Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295841",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:23'></a>
Also if pdflatex is not installed on the machine, some doctests fail.
I don't know if this should be fixed but I think so because otherwise patchbots complain.



---

archive/issue_comments_295842.json:
```json
{
    "body": "**Changing branch** from \"[u/caruso/tikzpicture](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/tikzpicture)\" to \"[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)\".",
    "created_at": "2021-04-08T08:30:19Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295842",
    "user": "https://github.com/seblabbe"
}
```

**Changing branch** from "[u/caruso/tikzpicture](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/tikzpicture)" to "[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)".



---

archive/issue_comments_295843.json:
```json
{
    "body": "<a id='comment:24'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/665db0b0dd19254278d3cd74d96423a617781223\">665db0b</a></td><td><code>20343: removed from `__future__` imports</code></td></tr></table>\n",
    "created_at": "2021-04-08T08:30:19Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295843",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:24'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/665db0b0dd19254278d3cd74d96423a617781223">665db0b</a></td><td><code>20343: removed from `__future__` imports</code></td></tr></table>




---

archive/issue_comments_295844.json:
```json
{
    "body": "**Changing commit** from \"[8cfc83431a25394be8b0dbc890d0dc0f72f54f56](https://github.com/sagemath/sagetrac-mirror/commit/8cfc83431a25394be8b0dbc890d0dc0f72f54f56)\" to \"[665db0b0dd19254278d3cd74d96423a617781223](https://github.com/sagemath/sagetrac-mirror/commit/665db0b0dd19254278d3cd74d96423a617781223)\".",
    "created_at": "2021-04-08T08:30:19Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295844",
    "user": "https://github.com/seblabbe"
}
```

**Changing commit** from "[8cfc83431a25394be8b0dbc890d0dc0f72f54f56](https://github.com/sagemath/sagetrac-mirror/commit/8cfc83431a25394be8b0dbc890d0dc0f72f54f56)" to "[665db0b0dd19254278d3cd74d96423a617781223](https://github.com/sagemath/sagetrac-mirror/commit/665db0b0dd19254278d3cd74d96423a617781223)".



---

archive/issue_comments_295845.json:
```json
{
    "body": "**Changing commit** from \"[665db0b0dd19254278d3cd74d96423a617781223](https://github.com/sagemath/sagetrac-mirror/commit/665db0b0dd19254278d3cd74d96423a617781223)\" to \"[0022eb2e8333597e2f4004e6b3a2d9363713df88](https://github.com/sagemath/sagetrac-mirror/commit/0022eb2e8333597e2f4004e6b3a2d9363713df88)\".",
    "created_at": "2021-04-08T08:32:43Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[665db0b0dd19254278d3cd74d96423a617781223](https://github.com/sagemath/sagetrac-mirror/commit/665db0b0dd19254278d3cd74d96423a617781223)" to "[0022eb2e8333597e2f4004e6b3a2d9363713df88](https://github.com/sagemath/sagetrac-mirror/commit/0022eb2e8333597e2f4004e6b3a2d9363713df88)".



---

archive/issue_comments_295846.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0022eb2e8333597e2f4004e6b3a2d9363713df88\">0022eb2</a></td><td><code>20343: Returns -> Return</code></td></tr></table>\n",
    "created_at": "2021-04-08T08:32:43Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0022eb2e8333597e2f4004e6b3a2d9363713df88">0022eb2</a></td><td><code>20343: Returns -> Return</code></td></tr></table>




---

archive/issue_comments_295847.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03aa1bccb5640263e1d23867ee742b1ce9ac3ae0\">03aa1bc</a></td><td><code>20343: adding few optional tags</code></td></tr></table>\n",
    "created_at": "2021-04-08T08:40:02Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295847",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03aa1bccb5640263e1d23867ee742b1ce9ac3ae0">03aa1bc</a></td><td><code>20343: adding few optional tags</code></td></tr></table>




---

archive/issue_comments_295848.json:
```json
{
    "body": "**Changing commit** from \"[0022eb2e8333597e2f4004e6b3a2d9363713df88](https://github.com/sagemath/sagetrac-mirror/commit/0022eb2e8333597e2f4004e6b3a2d9363713df88)\" to \"[03aa1bccb5640263e1d23867ee742b1ce9ac3ae0](https://github.com/sagemath/sagetrac-mirror/commit/03aa1bccb5640263e1d23867ee742b1ce9ac3ae0)\".",
    "created_at": "2021-04-08T08:40:02Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0022eb2e8333597e2f4004e6b3a2d9363713df88](https://github.com/sagemath/sagetrac-mirror/commit/0022eb2e8333597e2f4004e6b3a2d9363713df88)" to "[03aa1bccb5640263e1d23867ee742b1ce9ac3ae0](https://github.com/sagemath/sagetrac-mirror/commit/03aa1bccb5640263e1d23867ee742b1ce9ac3ae0)".



---

archive/issue_events_182671.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2021-04-08T08:42:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182671"
}
```



---

archive/issue_events_182672.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2021-04-08T08:42:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182672"
}
```



---

archive/issue_comments_295849.json:
```json
{
    "body": "<a id='comment:27'></a>\nI added a bunch of `#optional latex` and `#optional imagemagick` tags. That should fix most of the issues.\n\nI also added one `# optional pdf2svg` for which I am not sure about. I don't know if the doctest framework know about this tag. I change to needs review to check that on the patchbot.",
    "created_at": "2021-04-08T08:42:55Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295849",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:27'></a>
I added a bunch of `#optional latex` and `#optional imagemagick` tags. That should fix most of the issues.

I also added one `# optional pdf2svg` for which I am not sure about. I don't know if the doctest framework know about this tag. I change to needs review to check that on the patchbot.



---

archive/issue_comments_295850.json:
```json
{
    "body": "<a id='comment:28'></a>\nWhy do you make it part of Sage and not an independent Python module? These could easily be declared as optional/standard packages afterwards.",
    "created_at": "2021-04-08T10:11:35Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295850",
    "user": "https://github.com/videlec"
}
```

<a id='comment:28'></a>
Why do you make it part of Sage and not an independent Python module? These could easily be declared as optional/standard packages afterwards.



---

archive/issue_comments_295851.json:
```json
{
    "body": "<a id='comment:29'></a>\nYes, I agree with that option too. Lately, I was thinking more about this option.\n\nBut, the module also depends on many things that are in Sage which would make this module quite unusable outside of sage as it is currently. For example:\n\nTo check if Graphviz is there:\n\n```\nfrom sage.features.graphviz import Graphviz\n```\n\nTo check if pdflatex, convert and other programs are available:\n\n```\nfrom sage.misc.latex import have_pdflatex, have_convert, have_program\n```\n\nTo load the latex macros from sage:\n\n```\nfrom sage.misc.latex import _Latex_prefs\nfrom sage.misc.latex_macros import sage_latex_macros\n```\n\nTo create a temporary file inside the sage folder of temporary files:\n\n```\nfrom sage.misc.temporary_file import tmp_filename\n```\n\nTo open viewers:\n\n```\nfrom sage.misc.viewer import browser\nfrom sage.misc.viewer import pdf_viewer\nfrom sage.misc.viewer import png_viewer\n```\n\nTo check whether we are in the JupyterNotebook or not:\n\n```\nfrom sage.repl.rich_output.backend_ipython import BackendIPythonNotebook\nfrom sage.repl.rich_output.buffer import OutputBuffer\n```",
    "created_at": "2021-04-08T15:26:53Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295851",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:29'></a>
Yes, I agree with that option too. Lately, I was thinking more about this option.

But, the module also depends on many things that are in Sage which would make this module quite unusable outside of sage as it is currently. For example:

To check if Graphviz is there:

```
from sage.features.graphviz import Graphviz
```

To check if pdflatex, convert and other programs are available:

```
from sage.misc.latex import have_pdflatex, have_convert, have_program
```

To load the latex macros from sage:

```
from sage.misc.latex import _Latex_prefs
from sage.misc.latex_macros import sage_latex_macros
```

To create a temporary file inside the sage folder of temporary files:

```
from sage.misc.temporary_file import tmp_filename
```

To open viewers:

```
from sage.misc.viewer import browser
from sage.misc.viewer import pdf_viewer
from sage.misc.viewer import png_viewer
```

To check whether we are in the JupyterNotebook or not:

```
from sage.repl.rich_output.backend_ipython import BackendIPythonNotebook
from sage.repl.rich_output.buffer import OutputBuffer
```



---

archive/issue_comments_295852.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d590342121285b6fea577b0defc65aece99258e\">7d59034</a></td><td><code>20343: adding few optional latex tags</code></td></tr></table>\n",
    "created_at": "2021-04-08T15:35:16Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d590342121285b6fea577b0defc65aece99258e">7d59034</a></td><td><code>20343: adding few optional latex tags</code></td></tr></table>




---

archive/issue_comments_295853.json:
```json
{
    "body": "**Changing commit** from \"[03aa1bccb5640263e1d23867ee742b1ce9ac3ae0](https://github.com/sagemath/sagetrac-mirror/commit/03aa1bccb5640263e1d23867ee742b1ce9ac3ae0)\" to \"[7d590342121285b6fea577b0defc65aece99258e](https://github.com/sagemath/sagetrac-mirror/commit/7d590342121285b6fea577b0defc65aece99258e)\".",
    "created_at": "2021-04-08T15:35:16Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295853",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[03aa1bccb5640263e1d23867ee742b1ce9ac3ae0](https://github.com/sagemath/sagetrac-mirror/commit/03aa1bccb5640263e1d23867ee742b1ce9ac3ae0)" to "[7d590342121285b6fea577b0defc65aece99258e](https://github.com/sagemath/sagetrac-mirror/commit/7d590342121285b6fea577b0defc65aece99258e)".



---

archive/issue_comments_295854.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [@seblabbe](#comment%3A29):\n> Yes, I agree with that option too. Lately, I was thinking more about this option.\n\nThe main advantage with that option is that the package can change versions independently of sage.\n\n> But, the module also depends on many things that are in Sage which would make this module quite unusable outside of sage as it is currently. For example:\n\nThis would be a Python module that depends on sage. There is nothing bad with that situation. And this is not the only one.",
    "created_at": "2021-06-10T17:24:26Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295854",
    "user": "https://github.com/videlec"
}
```

<a id='comment:31'></a>
Replying to [@seblabbe](#comment%3A29):
> Yes, I agree with that option too. Lately, I was thinking more about this option.

The main advantage with that option is that the package can change versions independently of sage.

> But, the module also depends on many things that are in Sage which would make this module quite unusable outside of sage as it is currently. For example:

This would be a Python module that depends on sage. There is nothing bad with that situation. And this is not the only one.



---

archive/issue_comments_295855.json:
```json
{
    "body": "<a id='comment:32'></a>\nI am thinking about what to do now, either work on this ticket or create a new package. If I create a sagemath-tikzpicture package that imports many parts of sagemath, I will be responsible for fixing the package each time sagemath changes something that I import. On the other hand, if that modules goes into sagemath, then, it will become the responsability of the person which changes the dependencies to also fix the tikzpicture module. I agree with the idea of modularization, but for the above reason, I would prefer to make it go into sage. What do you think?",
    "created_at": "2021-06-24T08:51:37Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295855",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:32'></a>
I am thinking about what to do now, either work on this ticket or create a new package. If I create a sagemath-tikzpicture package that imports many parts of sagemath, I will be responsible for fixing the package each time sagemath changes something that I import. On the other hand, if that modules goes into sagemath, then, it will become the responsability of the person which changes the dependencies to also fix the tikzpicture module. I agree with the idea of modularization, but for the above reason, I would prefer to make it go into sage. What do you think?



---

archive/issue_comments_295856.json:
```json
{
    "body": "<a id='comment:33'></a>\nI prefer to have this directly in sage since I think that there are many other places in sage where it would be great to have a tikz output.",
    "created_at": "2021-07-02T15:24:19Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295856",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:33'></a>
I prefer to have this directly in sage since I think that there are many other places in sage where it would be great to have a tikz output.



---

archive/issue_comments_295857.json:
```json
{
    "body": "<a id='comment:34'></a>\nBecause this module does not depend on any external libraries, there is nothing gained in the direction of modularization by making this a separate distribution package. \n\nBut perhaps you can find a better place for it than sage.misc? How about `sage.typeset` or `sage.plot`?",
    "created_at": "2021-07-02T15:51:09Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295857",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
Because this module does not depend on any external libraries, there is nothing gained in the direction of modularization by making this a separate distribution package. 

But perhaps you can find a better place for it than sage.misc? How about `sage.typeset` or `sage.plot`?



---

archive/issue_comments_295858.json:
```json
{
    "body": "<a id='comment:35'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d84b6a39aa09f7a537094a2d5ed3aa6972bfb3f1\">d84b6a3</a></td><td><code>Merge branch 'u/slabbe/20343' of trac.sagemath.org:sage into 20343</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee56d320b739b3971c56f7d3ce9fa5dc83ad939d\">ee56d32</a></td><td><code>adding optional tag latex to one doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2692685c337f6a14ccc7047a82eb61e877b1948c\">2692685</a></td><td><code>20343:avoid use of doctest continuation since it is not one</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2acfe61163036af33e286c08ee6f974311eaa69a\">2acfe61</a></td><td><code>20343: misc/tikz_picture.py -> plot/tikzpicture.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/388a5f88e95a04758ab1ff88864273e8d58b4d59\">388a5f8</a></td><td><code>from misc.tikz_picture -> from plot.tikzpicture</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b04ea0d86f157d7bb6c5c0965e681f78d918fc62\">b04ea0d</a></td><td><code>updated authors and copyright</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2\">9f9f5ec</a></td><td><code>20343: redoing recent changes by Vincent Delecroix in slabbe package (check_call -> run); improved header documentation</code></td></tr></table>\n",
    "created_at": "2021-07-15T10:14:35Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295858",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d84b6a39aa09f7a537094a2d5ed3aa6972bfb3f1">d84b6a3</a></td><td><code>Merge branch 'u/slabbe/20343' of trac.sagemath.org:sage into 20343</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee56d320b739b3971c56f7d3ce9fa5dc83ad939d">ee56d32</a></td><td><code>adding optional tag latex to one doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2692685c337f6a14ccc7047a82eb61e877b1948c">2692685</a></td><td><code>20343:avoid use of doctest continuation since it is not one</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2acfe61163036af33e286c08ee6f974311eaa69a">2acfe61</a></td><td><code>20343: misc/tikz_picture.py -> plot/tikzpicture.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/388a5f88e95a04758ab1ff88864273e8d58b4d59">388a5f8</a></td><td><code>from misc.tikz_picture -> from plot.tikzpicture</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b04ea0d86f157d7bb6c5c0965e681f78d918fc62">b04ea0d</a></td><td><code>updated authors and copyright</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2">9f9f5ec</a></td><td><code>20343: redoing recent changes by Vincent Delecroix in slabbe package (check_call -> run); improved header documentation</code></td></tr></table>




---

archive/issue_comments_295859.json:
```json
{
    "body": "**Changing commit** from \"[7d590342121285b6fea577b0defc65aece99258e](https://github.com/sagemath/sagetrac-mirror/commit/7d590342121285b6fea577b0defc65aece99258e)\" to \"[9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2](https://github.com/sagemath/sagetrac-mirror/commit/9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2)\".",
    "created_at": "2021-07-15T10:14:35Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295859",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7d590342121285b6fea577b0defc65aece99258e](https://github.com/sagemath/sagetrac-mirror/commit/7d590342121285b6fea577b0defc65aece99258e)" to "[9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2](https://github.com/sagemath/sagetrac-mirror/commit/9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2)".



---

archive/issue_comments_295860.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,17 +1,67 @@\n-Importing `TikzPicture` class from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.\n+Importing `TikzPicture` module from optional [SageMath](../wiki/SageMath) package [slabbe-0.6.2](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath).\n \n One example:\n \n ```\n-sage: from sage.misc.tikzpicture import TikzPicture\n+sage: from sage.plot.tikzpicture import TikzPicture\n sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]\n sage: P = Polyhedron(vertices=V).polar()\n sage: s = P.projection().tikz([674,108,-731],112)\n sage: t = TikzPicture(s)\n-sage: t.pdf()\n+sage: t.pdf()                  # opens the pdf in a viewer                                                        \n+'/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'\n+sage: t.pdf('image.pdf')                                                                                   \n+'/home/slabbe/image.pdf'\n ```\n \n-Second example:\n+It may create the image into png format (translation pdf -> png made with convert from imagemagick) or svg format (translation pdf -> svg made with pdf2svg):\n+\n+```\n+sage: t.png()                                                                                              \n+'/home/slabbe/.sage/temp/miami/5032/tikz_v0s5kl9l.png'\n+sage: t.svg()                                                                                              \n+'/home/slabbe/.sage/temp/miami/5032/tikz_sfww636u.svg'\n+sage: t.tex()                                                                                              \n+'/home/slabbe/.sage/temp/miami/5032/tikz_xxwqfjh5.tex'\n+```\n+\n+In a Jupyter notebook, this shows the picture below the cell (using rich repr):\n+\n+```\n+sage: t\n+```\n+\n+In the terminal, this shows the header and tail of the tikzpicture code:\n+\n+```\n+sage: t                                                                                                    \n+\\documentclass[tikz]{standalone}\n+\\usepackage{amsmath}\n+\\begin{document}\n+\\begin{tikzpicture}%\n+\t[x={(0.249656cm, -0.577639cm)},\n+\ty={(0.777700cm, -0.358578cm)},\n+\tz={(-0.576936cm, -0.733318cm)},\n+\tscale=1.000000,\n+---\n+91 lines not printed (5169 characters in total).\n+Use print to see the full content.\n+---\n+\\node[vertex] at (0.00000, -1.00000, 0.00000)     {};\n+\\node[vertex] at (-0.50000, -0.50000, -0.50000)     {};\n+%%\n+%%\n+\\end{tikzpicture}\n+\\end{document}\n+```\n+\n+Use `print` to see the full content:\n+\n+```\n+sage: print(t) \n+```\n+\n+A second example shows that it is faster than view and better (avoids to crop the vertices):\n \n ```\n sage: g = graphs.PetersenGraph()\n@@ -28,13 +78,13 @@\n Wall time: 6.06 s\n ```\n \n-Also, if dot2tex and graphviz available:\n+Also, if dot2tex and graphviz available, one may directly construct a tikzpicture from a sagemath graph:\n \n ```\n sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex\n ```\n \n-I intend to make further improvements to this module during the next year. Also, I will wait until somebody tells me he is willing to review this module before publishing a branch here.\n+The `tikzpicture.py` was developped within optional package `slabbe` for the last 6 years. Its interface should be stable enough to go into sage now.\n \n Meanwhile any user can use this tikzpicture module by installing my package:\n \n``````\n",
    "created_at": "2021-07-15T10:26:09Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295860",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,17 +1,67 @@
-Importing `TikzPicture` class from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.
+Importing `TikzPicture` module from optional [SageMath](../wiki/SageMath) package [slabbe-0.6.2](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath).
 
 One example:
 
 ```
-sage: from sage.misc.tikzpicture import TikzPicture
+sage: from sage.plot.tikzpicture import TikzPicture
 sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]
 sage: P = Polyhedron(vertices=V).polar()
 sage: s = P.projection().tikz([674,108,-731],112)
 sage: t = TikzPicture(s)
-sage: t.pdf()
+sage: t.pdf()                  # opens the pdf in a viewer                                                        
+'/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'
+sage: t.pdf('image.pdf')                                                                                   
+'/home/slabbe/image.pdf'
 ```
 
-Second example:
+It may create the image into png format (translation pdf -> png made with convert from imagemagick) or svg format (translation pdf -> svg made with pdf2svg):
+
+```
+sage: t.png()                                                                                              
+'/home/slabbe/.sage/temp/miami/5032/tikz_v0s5kl9l.png'
+sage: t.svg()                                                                                              
+'/home/slabbe/.sage/temp/miami/5032/tikz_sfww636u.svg'
+sage: t.tex()                                                                                              
+'/home/slabbe/.sage/temp/miami/5032/tikz_xxwqfjh5.tex'
+```
+
+In a Jupyter notebook, this shows the picture below the cell (using rich repr):
+
+```
+sage: t
+```
+
+In the terminal, this shows the header and tail of the tikzpicture code:
+
+```
+sage: t                                                                                                    
+\documentclass[tikz]{standalone}
+\usepackage{amsmath}
+\begin{document}
+\begin{tikzpicture}%
+	[x={(0.249656cm, -0.577639cm)},
+	y={(0.777700cm, -0.358578cm)},
+	z={(-0.576936cm, -0.733318cm)},
+	scale=1.000000,
+---
+91 lines not printed (5169 characters in total).
+Use print to see the full content.
+---
+\node[vertex] at (0.00000, -1.00000, 0.00000)     {};
+\node[vertex] at (-0.50000, -0.50000, -0.50000)     {};
+%%
+%%
+\end{tikzpicture}
+\end{document}
+```
+
+Use `print` to see the full content:
+
+```
+sage: print(t) 
+```
+
+A second example shows that it is faster than view and better (avoids to crop the vertices):
 
 ```
 sage: g = graphs.PetersenGraph()
@@ -28,13 +78,13 @@
 Wall time: 6.06 s
 ```
 
-Also, if dot2tex and graphviz available:
+Also, if dot2tex and graphviz available, one may directly construct a tikzpicture from a sagemath graph:
 
 ```
 sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex
 ```
 
-I intend to make further improvements to this module during the next year. Also, I will wait until somebody tells me he is willing to review this module before publishing a branch here.
+The `tikzpicture.py` was developped within optional package `slabbe` for the last 6 years. Its interface should be stable enough to go into sage now.
 
 Meanwhile any user can use this tikzpicture module by installing my package:
 
``````




---

archive/issue_events_182673.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2021-07-15T10:26:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "rename": {
        "from": "Adding sage/misc/tikzpicture.py",
        "to": "Adding sage/plot/tikzpicture.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182673"
}
```



---

archive/issue_comments_295861.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,9 +8,9 @@\n sage: P = Polyhedron(vertices=V).polar()\n sage: s = P.projection().tikz([674,108,-731],112)\n sage: t = TikzPicture(s)\n-sage: t.pdf()                  # opens the pdf in a viewer                                                        \n+sage: t.pdf()             # opens the pdf in a viewer                                                        \n '/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'\n-sage: t.pdf('image.pdf')                                                                                   \n+sage: t.pdf('image.pdf')  # when a filename is provided, it does not open the pdf in a viewer                                            \n '/home/slabbe/image.pdf'\n ```\n \n``````\n",
    "created_at": "2021-07-15T10:27:21Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295861",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,9 +8,9 @@
 sage: P = Polyhedron(vertices=V).polar()
 sage: s = P.projection().tikz([674,108,-731],112)
 sage: t = TikzPicture(s)
-sage: t.pdf()                  # opens the pdf in a viewer                                                        
+sage: t.pdf()             # opens the pdf in a viewer                                                        
 '/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'
-sage: t.pdf('image.pdf')                                                                                   
+sage: t.pdf('image.pdf')  # when a filename is provided, it does not open the pdf in a viewer                                            
 '/home/slabbe/image.pdf'
 ```
 
``````




---

archive/issue_comments_295862.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n sage: t = TikzPicture(s)\n sage: t.pdf()             # opens the pdf in a viewer                                                        \n '/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'\n-sage: t.pdf('image.pdf')  # when a filename is provided, it does not open the pdf in a viewer                                            \n+sage: t.pdf('image.pdf')  # when a filename is provided, it doesn't open in a viewer                                            \n '/home/slabbe/image.pdf'\n ```\n \n``````\n",
    "created_at": "2021-07-15T10:28:09Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295862",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 sage: t = TikzPicture(s)
 sage: t.pdf()             # opens the pdf in a viewer                                                        
 '/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'
-sage: t.pdf('image.pdf')  # when a filename is provided, it does not open the pdf in a viewer                                            
+sage: t.pdf('image.pdf')  # when a filename is provided, it doesn't open in a viewer                                            
 '/home/slabbe/image.pdf'
 ```
 
``````




---

archive/issue_comments_295863.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -17,12 +17,9 @@\n It may create the image into png format (translation pdf -> png made with convert from imagemagick) or svg format (translation pdf -> svg made with pdf2svg):\n \n ```\n-sage: t.png()                                                                                              \n-'/home/slabbe/.sage/temp/miami/5032/tikz_v0s5kl9l.png'\n-sage: t.svg()                                                                                              \n-'/home/slabbe/.sage/temp/miami/5032/tikz_sfww636u.svg'\n-sage: t.tex()                                                                                              \n-'/home/slabbe/.sage/temp/miami/5032/tikz_xxwqfjh5.tex'\n+sage: path_to_file = t.png()                                              \n+sage: path_to_file = t.svg()\n+sage: path_to_file = t.tex()\n ```\n \n In a Jupyter notebook, this shows the picture below the cell (using rich repr):\n``````\n",
    "created_at": "2021-07-15T10:29:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295863",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -17,12 +17,9 @@
 It may create the image into png format (translation pdf -> png made with convert from imagemagick) or svg format (translation pdf -> svg made with pdf2svg):
 
 ```
-sage: t.png()                                                                                              
-'/home/slabbe/.sage/temp/miami/5032/tikz_v0s5kl9l.png'
-sage: t.svg()                                                                                              
-'/home/slabbe/.sage/temp/miami/5032/tikz_sfww636u.svg'
-sage: t.tex()                                                                                              
-'/home/slabbe/.sage/temp/miami/5032/tikz_xxwqfjh5.tex'
+sage: path_to_file = t.png()                                              
+sage: path_to_file = t.svg()
+sage: path_to_file = t.tex()
 ```
 
 In a Jupyter notebook, this shows the picture below the cell (using rich repr):
``````




---

archive/issue_comments_295864.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -81,9 +81,9 @@\n sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex\n ```\n \n-The `tikzpicture.py` was developped within optional package `slabbe` for the last 6 years. Its interface should be stable enough to go into sage now.\n+The `tikzpicture.py` was developped within optional package `slabbe` since 2015. Its interface should be stable enough to go into sage now.\n \n-Meanwhile any user can use this tikzpicture module by installing my package:\n+Meanwhile any user can use this tikzpicture module by installing the package:\n \n ```\n sage -pip install slabbe\n``````\n",
    "created_at": "2021-07-15T10:31:08Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295864",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -81,9 +81,9 @@
 sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex
 ```
 
-The `tikzpicture.py` was developped within optional package `slabbe` for the last 6 years. Its interface should be stable enough to go into sage now.
+The `tikzpicture.py` was developped within optional package `slabbe` since 2015. Its interface should be stable enough to go into sage now.
 
-Meanwhile any user can use this tikzpicture module by installing my package:
+Meanwhile any user can use this tikzpicture module by installing the package:
 
 ```
 sage -pip install slabbe
``````




---

archive/issue_comments_295865.json:
```json
{
    "body": "<a id='comment:41'></a>\nI think we are close to it. The doctests work on my machine:\n\n```\nsage -t --optional=sage,optional,external --long --show-skipped tikzpicture.py \n```\n\ngives\n\n```\nUsing --optional=4ti2,ccache,cryptominisat,debian,dot2tex,e_antic,external,fricas,glucose,latte_int,lidia,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin,sage_spkg\nExternal software to be detected: cplex,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,macaulay2,magma,maple,mathematica,matlab,octave,pandoc,rubiks,scilab\nDoctesting 1 file.\nsage -t --long --random-seed=0 tikzpicture.py\n    19 not tested tests not run\n    1 pdf2svg test not run\n    0 tests not run because we ran out of time\n    [161 tests, 15.43 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 15.6 seconds\n    cpu time: 8.2 seconds\n    cumulative wall time: 15.4 seconds\nExternal software detected for doctesting: imagemagick,latex\n```\n\nTODO:\n\n- Let's see what the patchbot says.\n- The doctest tagged with `pdf2svg` is not recognized by the `--optional=external`. Maybe something needs to be done on the detection of external packages.\n- One issue is that the current `_rich_repr_` always uses png instead of svg in the Jupyter Notebook even if I define `'svg'` before `'png'` in the `prefer_vector` tuple. I think that issue can be dealt in a later ticket.\n\nThat's it! Needs review!",
    "created_at": "2021-07-15T10:38:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295865",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:41'></a>
I think we are close to it. The doctests work on my machine:

```
sage -t --optional=sage,optional,external --long --show-skipped tikzpicture.py 
```

gives

```
Using --optional=4ti2,ccache,cryptominisat,debian,dot2tex,e_antic,external,fricas,glucose,latte_int,lidia,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin,sage_spkg
External software to be detected: cplex,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,macaulay2,magma,maple,mathematica,matlab,octave,pandoc,rubiks,scilab
Doctesting 1 file.
sage -t --long --random-seed=0 tikzpicture.py
    19 not tested tests not run
    1 pdf2svg test not run
    0 tests not run because we ran out of time
    [161 tests, 15.43 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 15.6 seconds
    cpu time: 8.2 seconds
    cumulative wall time: 15.4 seconds
External software detected for doctesting: imagemagick,latex
```

TODO:

- Let's see what the patchbot says.
- The doctest tagged with `pdf2svg` is not recognized by the `--optional=external`. Maybe something needs to be done on the detection of external packages.
- One issue is that the current `_rich_repr_` always uses png instead of svg in the Jupyter Notebook even if I define `'svg'` before `'png'` in the `prefer_vector` tuple. I think that issue can be dealt in a later ticket.

That's it! Needs review!



---

archive/issue_comments_295866.json:
```json
{
    "body": "<a id='comment:42'></a>\nThis ad-hoc system package advice \n\n```\n+        if not have_program('pdf2svg'):\n+            raise RuntimeError(\"pdf2svg does not seem to be installed. \"\n+                    \"Install it for example with ``brew install pdf2svg``\"\n+                    \" or ``apt-get install pdf2svg``.\")\n+\n```\nshould be replaced by a `Feature` and an spkg `pdf2svg` with `distros/` information from\nhttps://repology.org/project/pdf2svg/versions",
    "created_at": "2021-07-15T16:39:46Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295866",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'></a>
This ad-hoc system package advice 

```
+        if not have_program('pdf2svg'):
+            raise RuntimeError("pdf2svg does not seem to be installed. "
+                    "Install it for example with ``brew install pdf2svg``"
+                    " or ``apt-get install pdf2svg``.")
+
```
should be replaced by a `Feature` and an spkg `pdf2svg` with `distros/` information from
https://repology.org/project/pdf2svg/versions



---

archive/issue_comments_295867.json:
```json
{
    "body": "<a id='comment:43'></a>\nOk, I will add a Feature for pdf2svg.\n\nAlso, patchbot says this:\n\n```\nsrc/sage/plot/tikzpicture.py:98:1 'subprocess.CalledProcessError' imported but unused\nfound 1 pyflakes errors in the modified files\n```\n\nAnother TODO is to allow to get some verbosity useful when compilation of the picture breaks. I am writting it here not to forget.\n\nI will work on that soon or later.",
    "created_at": "2021-07-15T20:42:46Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295867",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:43'></a>
Ok, I will add a Feature for pdf2svg.

Also, patchbot says this:

```
src/sage/plot/tikzpicture.py:98:1 'subprocess.CalledProcessError' imported but unused
found 1 pyflakes errors in the modified files
```

Another TODO is to allow to get some verbosity useful when compilation of the picture breaks. I am writting it here not to forget.

I will work on that soon or later.



---

archive/issue_events_182674.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-26T18:08:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182674"
}
```



---

archive/issue_events_182675.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-26T18:08:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182675"
}
```



---

archive/issue_events_182676.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:26:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182676"
}
```



---

archive/issue_events_182677.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:26:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182677"
}
```



---

archive/issue_comments_295868.json:
```json
{
    "body": "**Dependencies:** #32650",
    "created_at": "2021-11-02T16:46:07Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295868",
    "user": "https://github.com/seblabbe"
}
```

**Dependencies:** #32650



---

archive/issue_comments_295869.json:
```json
{
    "body": "<a id='comment:47'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a96e94d31d38c59db30d1995711203777cd67a6f\">a96e94d</a></td><td><code>32650: Creating feature pdf2svg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/870d461bdd5484894ff3d7c030f33757bea99bd2\">870d461</a></td><td><code>32650: Creating features latex, xelatex, pdflatex, lualatex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/385569e797b35f16a1f336ec25bfa8126bfdf969\">385569e</a></td><td><code>32650: adding latex, xelatex, pdflatex, lualatex, pdf2svg, dvipng to doctest/external.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3291d8191a32978090febfb343fe2af39b43ac2\">f3291d8</a></td><td><code>32650: using features instead of have_program in misc/latex.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4559932b6311de0a825154947daaedbda9099e0\">d455993</a></td><td><code>32650: using features in plot/animate.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf02094eda368e2e9ad381b0bad65e06c56c383a\">cf02094</a></td><td><code>32650: using features in plot/graphics.py and plot/multigraphics.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28f1f4a5fef37adebff969b86913533501f8fa76\">28f1f4a</a></td><td><code>32650: deprecating have_* functions in misc/latex.py in favor of features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d9414ddc4ec72d6b32ac88e9aa94a0fe2433dab\">5d9414d</a></td><td><code>32650: .. note -> .. NOTE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d21ec71a3f92b2cbeb1a6a933c118cdb063a3fe\">6d21ec7</a></td><td><code>Merge branch #20343 onto #32650</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80151c25e7aa040973b6f6268f49ddc3b521cfd7\">80151c2</a></td><td><code>20343: using features instead of have_program, have_pdflatex, have_convert</code></td></tr></table>\n",
    "created_at": "2021-11-04T10:56:36Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295869",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a96e94d31d38c59db30d1995711203777cd67a6f">a96e94d</a></td><td><code>32650: Creating feature pdf2svg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/870d461bdd5484894ff3d7c030f33757bea99bd2">870d461</a></td><td><code>32650: Creating features latex, xelatex, pdflatex, lualatex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/385569e797b35f16a1f336ec25bfa8126bfdf969">385569e</a></td><td><code>32650: adding latex, xelatex, pdflatex, lualatex, pdf2svg, dvipng to doctest/external.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3291d8191a32978090febfb343fe2af39b43ac2">f3291d8</a></td><td><code>32650: using features instead of have_program in misc/latex.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4559932b6311de0a825154947daaedbda9099e0">d455993</a></td><td><code>32650: using features in plot/animate.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf02094eda368e2e9ad381b0bad65e06c56c383a">cf02094</a></td><td><code>32650: using features in plot/graphics.py and plot/multigraphics.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28f1f4a5fef37adebff969b86913533501f8fa76">28f1f4a</a></td><td><code>32650: deprecating have_* functions in misc/latex.py in favor of features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d9414ddc4ec72d6b32ac88e9aa94a0fe2433dab">5d9414d</a></td><td><code>32650: .. note -> .. NOTE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d21ec71a3f92b2cbeb1a6a933c118cdb063a3fe">6d21ec7</a></td><td><code>Merge branch #20343 onto #32650</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80151c25e7aa040973b6f6268f49ddc3b521cfd7">80151c2</a></td><td><code>20343: using features instead of have_program, have_pdflatex, have_convert</code></td></tr></table>




---

archive/issue_comments_295870.json:
```json
{
    "body": "**Changing commit** from \"[9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2](https://github.com/sagemath/sagetrac-mirror/commit/9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2)\" to \"[80151c25e7aa040973b6f6268f49ddc3b521cfd7](https://github.com/sagemath/sagetrac-mirror/commit/80151c25e7aa040973b6f6268f49ddc3b521cfd7)\".",
    "created_at": "2021-11-04T10:56:36Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295870",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2](https://github.com/sagemath/sagetrac-mirror/commit/9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2)" to "[80151c25e7aa040973b6f6268f49ddc3b521cfd7](https://github.com/sagemath/sagetrac-mirror/commit/80151c25e7aa040973b6f6268f49ddc3b521cfd7)".



---

archive/issue_comments_295871.json:
```json
{
    "body": "<a id='comment:48'></a>\nI rebased on top of current #32650.\n\nCurrent TODOS are:\n\n- verbosity when compilation breaks\n- add distro info stuff in pdf2svg (should be done in #32650)\n- improve rich repr to use svg not always png",
    "created_at": "2021-11-04T11:02:57Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295871",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:48'></a>
I rebased on top of current #32650.

Current TODOS are:

- verbosity when compilation breaks
- add distro info stuff in pdf2svg (should be done in #32650)
- improve rich repr to use svg not always png



---

archive/issue_comments_295872.json:
```json
{
    "body": "**Changing commit** from \"[80151c25e7aa040973b6f6268f49ddc3b521cfd7](https://github.com/sagemath/sagetrac-mirror/commit/80151c25e7aa040973b6f6268f49ddc3b521cfd7)\" to \"[997b8f1a58afe1b8eae04a030ec5b769fa8463b7](https://github.com/sagemath/sagetrac-mirror/commit/997b8f1a58afe1b8eae04a030ec5b769fa8463b7)\".",
    "created_at": "2021-11-04T14:23:17Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295872",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[80151c25e7aa040973b6f6268f49ddc3b521cfd7](https://github.com/sagemath/sagetrac-mirror/commit/80151c25e7aa040973b6f6268f49ddc3b521cfd7)" to "[997b8f1a58afe1b8eae04a030ec5b769fa8463b7](https://github.com/sagemath/sagetrac-mirror/commit/997b8f1a58afe1b8eae04a030ec5b769fa8463b7)".



---

archive/issue_comments_295873.json:
```json
{
    "body": "<a id='comment:49'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/997b8f1a58afe1b8eae04a030ec5b769fa8463b7\">997b8f1</a></td><td><code>20343: print the log when pdflatex fails compile the tikz image</code></td></tr></table>\n",
    "created_at": "2021-11-04T14:23:17Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295873",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/997b8f1a58afe1b8eae04a030ec5b769fa8463b7">997b8f1</a></td><td><code>20343: print the log when pdflatex fails compile the tikz image</code></td></tr></table>




---

archive/issue_events_182678.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2021-11-04T22:15:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182678"
}
```



---

archive/issue_events_182679.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2021-11-04T22:15:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182679"
}
```



---

archive/issue_comments_295874.json:
```json
{
    "body": "<a id='comment:50'></a>\nWith the recent commit and subsequent work done in #32650, the remainings TODOs are:\n\n- improve rich repr to use svg not always png \n\nand as I suggested before, this one could be dealt in another ticket as it is still functional with png's in the Jupyter notebook.\n\nNeeds review!",
    "created_at": "2021-11-04T22:15:43Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295874",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:50'></a>
With the recent commit and subsequent work done in #32650, the remainings TODOs are:

- improve rich repr to use svg not always png 

and as I suggested before, this one could be dealt in another ticket as it is still functional with png's in the Jupyter notebook.

Needs review!



---

archive/issue_comments_295875.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -94,3 +94,8 @@\n ```\n sage: from slabbe import TikzPicture\n ```\n+\n+An example of usage of this module can be found at this url:\n+https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n+associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one changes `from slabbe import TikzPicture` by `from sage.plot.tikzpicture import TikzPicture` at the beginning (oups! no, it will not work since the import is done within the package).\n+For the review, one may check\n``````\n",
    "created_at": "2021-11-25T10:56:45Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295875",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -94,3 +94,8 @@
 ```
 sage: from slabbe import TikzPicture
 ```
+
+An example of usage of this module can be found at this url:
+https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb
+associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one changes `from slabbe import TikzPicture` by `from sage.plot.tikzpicture import TikzPicture` at the beginning (oups! no, it will not work since the import is done within the package).
+For the review, one may check
``````




---

archive/issue_comments_295876.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -98,4 +98,3 @@\n An example of usage of this module can be found at this url:\n https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one changes `from slabbe import TikzPicture` by `from sage.plot.tikzpicture import TikzPicture` at the beginning (oups! no, it will not work since the import is done within the package).\n-For the review, one may check\n``````\n",
    "created_at": "2021-11-25T10:57:19Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295876",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -98,4 +98,3 @@
 An example of usage of this module can be found at this url:
 https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb
 associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one changes `from slabbe import TikzPicture` by `from sage.plot.tikzpicture import TikzPicture` at the beginning (oups! no, it will not work since the import is done within the package).
-For the review, one may check
``````




---

archive/issue_comments_295877.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -97,4 +97,4 @@\n \n An example of usage of this module can be found at this url:\n https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n-associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one changes `from slabbe import TikzPicture` by `from sage.plot.tikzpicture import TikzPicture` at the beginning (oups! no, it will not work since the import is done within the package).\n+associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one uses `from sage.plot.tikzpicture import TikzPicture` and check that tikzpicture created within slabbe still works within the tikzpicture module introduced in this ticket.\n``````\n",
    "created_at": "2021-11-25T11:02:07Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295877",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -97,4 +97,4 @@
 
 An example of usage of this module can be found at this url:
 https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb
-associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one changes `from slabbe import TikzPicture` by `from sage.plot.tikzpicture import TikzPicture` at the beginning (oups! no, it will not work since the import is done within the package).
+associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one uses `from sage.plot.tikzpicture import TikzPicture` and check that tikzpicture created within slabbe still works within the tikzpicture module introduced in this ticket.
``````




---

archive/issue_comments_295878.json:
```json
{
    "body": "<a id='comment:54'></a>\nIn a similar direction as [comment:17](#comment%3A17), I think that the `from_graph...` and `from_poset` class methods should rather be changed to methods of `Graph` and `Poset`.",
    "created_at": "2021-11-25T18:19:58Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295878",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>
In a similar direction as [comment:17](#comment%3A17), I think that the `from_graph...` and `from_poset` class methods should rather be changed to methods of `Graph` and `Poset`.



---

archive/issue_comments_295879.json:
```json
{
    "body": "<a id='comment:55'></a>\nAlso https://pypi.org/project/tikzplotlib/ looks interesting",
    "created_at": "2021-11-25T18:20:39Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295879",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>
Also https://pypi.org/project/tikzplotlib/ looks interesting



---

archive/issue_comments_295880.json:
```json
{
    "body": "**Changing commit** from \"[997b8f1a58afe1b8eae04a030ec5b769fa8463b7](https://github.com/sagemath/sagetrac-mirror/commit/997b8f1a58afe1b8eae04a030ec5b769fa8463b7)\" to \"[6a085cfdf1c930e4322a43d9d77356c2128ed913](https://github.com/sagemath/sagetrac-mirror/commit/6a085cfdf1c930e4322a43d9d77356c2128ed913)\".",
    "created_at": "2021-12-09T10:06:23Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295880",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[997b8f1a58afe1b8eae04a030ec5b769fa8463b7](https://github.com/sagemath/sagetrac-mirror/commit/997b8f1a58afe1b8eae04a030ec5b769fa8463b7)" to "[6a085cfdf1c930e4322a43d9d77356c2128ed913](https://github.com/sagemath/sagetrac-mirror/commit/6a085cfdf1c930e4322a43d9d77356c2128ed913)".



---

archive/issue_comments_295881.json:
```json
{
    "body": "<a id='comment:56'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9c949241b404ae9c8cecdf5ff50979362c1f99e\">f9c9492</a></td><td><code>20343: few small improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a085cfdf1c930e4322a43d9d77356c2128ed913\">6a085cf</a></td><td><code>20343: improving first example shown in documentation</code></td></tr></table>\n",
    "created_at": "2021-12-09T10:06:23Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295881",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9c949241b404ae9c8cecdf5ff50979362c1f99e">f9c9492</a></td><td><code>20343: few small improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a085cfdf1c930e4322a43d9d77356c2128ed913">6a085cf</a></td><td><code>20343: improving first example shown in documentation</code></td></tr></table>




---

archive/issue_comments_295882.json:
```json
{
    "body": "<a id='comment:57'></a>\nI added two commits to do few improvements.",
    "created_at": "2021-12-09T10:07:22Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295882",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:57'></a>
I added two commits to do few improvements.



---

archive/issue_comments_295883.json:
```json
{
    "body": "<a id='comment:58'></a>\nReplying to [@mkoeppe](#comment%3A54):\n> In a similar direction as [comment:17](#comment%3A17), I think that the `from_graph...` and `from_poset` class methods should rather be changed to methods of `Graph` and `Poset`.\n\nIf you want to go in that direction, we need to have a design discussion before spending time changing the graph code. As you know,\n\n```\nsage: g = graphs.PetersenGraph()\nsage: hasattr(g, '_latex_')\nTrue\n```\n\nwhich returns an object of type:\n\n```\nsage: type(latex(g))\n<class 'sage.misc.latex.LatexExpr'>\n```\n\nThis latex expression starts with `\\begin{tikzpicture}` and ends with `\\end{tikzpicture}` which also depends on `\\usepackage{tkz-graph}`:\n\n```\nsage: latex(g)\n\\begin{tikzpicture}                                                                                    \n\\definecolor{cv0}{rgb}{0.0,0.0,0.0}                                                                    \n\\definecolor{cfv0}{rgb}{1.0,1.0,1.0}                                                                   \n...\n\\Edge[lw=0.1cm,style={color=cv6v9,},](v6)(v9)\n\\Edge[lw=0.1cm,style={color=cv7v9,},](v7)(v9)\n%\n\\end{tikzpicture}\n```\n\nNotice that this output can be provided to `TikzPicture` with no problem with `t = TikzPicture(latex(g), usepackage=['tkz-graph'])` and `t.pdf()` works etc.\n\nI don't think here we want to replace the output of `g._latex_` by an object of type `TikzPicture` since a such change would break a lot of code.\n\nAn option is to create a new method `def tikz(self)` instead. I can do something like that. It could return the `TikzPicture(latex(g), usepackage=['tkz-graph'])` by default and if one asks, it could use the graphviz + dot2tex output instead. But, I was thinking of doing this in another ticket as a follow up, as this will open discussions that will just make longer before this ticket can go in.\n\nOr maybe you would rather like to remove the `from_graph` and the `from_poset` methods to avoid to have to maintain them in the future? Well, currently, the `from_graph` also allows to merge the multiple edges which is something that would not go in the `tikz` method of a graph. Also, keeping the `from_graph` would make the passage from this module to sage easier for me because I have been using this method over and over and over in my research code.",
    "created_at": "2021-12-09T10:27:17Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295883",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:58'></a>
Replying to [@mkoeppe](#comment%3A54):
> In a similar direction as [comment:17](#comment%3A17), I think that the `from_graph...` and `from_poset` class methods should rather be changed to methods of `Graph` and `Poset`.

If you want to go in that direction, we need to have a design discussion before spending time changing the graph code. As you know,

```
sage: g = graphs.PetersenGraph()
sage: hasattr(g, '_latex_')
True
```

which returns an object of type:

```
sage: type(latex(g))
<class 'sage.misc.latex.LatexExpr'>
```

This latex expression starts with `\begin{tikzpicture}` and ends with `\end{tikzpicture}` which also depends on `\usepackage{tkz-graph}`:

```
sage: latex(g)
\begin{tikzpicture}                                                                                    
\definecolor{cv0}{rgb}{0.0,0.0,0.0}                                                                    
\definecolor{cfv0}{rgb}{1.0,1.0,1.0}                                                                   
...
\Edge[lw=0.1cm,style={color=cv6v9,},](v6)(v9)
\Edge[lw=0.1cm,style={color=cv7v9,},](v7)(v9)
%
\end{tikzpicture}
```

Notice that this output can be provided to `TikzPicture` with no problem with `t = TikzPicture(latex(g), usepackage=['tkz-graph'])` and `t.pdf()` works etc.

I don't think here we want to replace the output of `g._latex_` by an object of type `TikzPicture` since a such change would break a lot of code.

An option is to create a new method `def tikz(self)` instead. I can do something like that. It could return the `TikzPicture(latex(g), usepackage=['tkz-graph'])` by default and if one asks, it could use the graphviz + dot2tex output instead. But, I was thinking of doing this in another ticket as a follow up, as this will open discussions that will just make longer before this ticket can go in.

Or maybe you would rather like to remove the `from_graph` and the `from_poset` methods to avoid to have to maintain them in the future? Well, currently, the `from_graph` also allows to merge the multiple edges which is something that would not go in the `tikz` method of a graph. Also, keeping the `from_graph` would make the passage from this module to sage easier for me because I have been using this method over and over and over in my research code.



---

archive/issue_comments_295884.json:
```json
{
    "body": "<a id='comment:59'></a>\nI created ticket #33002 for the addition of a method to return an object of type `TikzPicture` in graph, posets and polyhedron code.",
    "created_at": "2021-12-09T10:36:08Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295884",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:59'></a>
I created ticket #33002 for the addition of a method to return an object of type `TikzPicture` in graph, posets and polyhedron code.



---

archive/issue_comments_295885.json:
```json
{
    "body": "**Changing commit** from \"[6a085cfdf1c930e4322a43d9d77356c2128ed913](https://github.com/sagemath/sagetrac-mirror/commit/6a085cfdf1c930e4322a43d9d77356c2128ed913)\" to \"[d6d473a1400059b385104ed4220097fde906e82f](https://github.com/sagemath/sagetrac-mirror/commit/d6d473a1400059b385104ed4220097fde906e82f)\".",
    "created_at": "2021-12-09T10:57:03Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295885",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6a085cfdf1c930e4322a43d9d77356c2128ed913](https://github.com/sagemath/sagetrac-mirror/commit/6a085cfdf1c930e4322a43d9d77356c2128ed913)" to "[d6d473a1400059b385104ed4220097fde906e82f](https://github.com/sagemath/sagetrac-mirror/commit/d6d473a1400059b385104ed4220097fde906e82f)".



---

archive/issue_comments_295886.json:
```json
{
    "body": "<a id='comment:60'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6d473a1400059b385104ed4220097fde906e82f\">d6d473a</a></td><td><code>20343: fixing a bug, png output was not working</code></td></tr></table>\n",
    "created_at": "2021-12-09T10:57:03Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295886",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6d473a1400059b385104ed4220097fde906e82f">d6d473a</a></td><td><code>20343: fixing a bug, png output was not working</code></td></tr></table>




---

archive/issue_comments_295887.json:
```json
{
    "body": "<a id='comment:61'></a>\nReplying to [@seblabbe](#comment%3A50):\n> With the recent commit and subsequent work done in #32650, the remainings TODOs are:\n> \n> - improve rich repr to use svg not always png \n> \n> and as I suggested before, this one could be dealt in another ticket as it is still functional with png's in the Jupyter notebook.\n\nAlso, I want to say that I believe that the `sage.repl` code is broken with respect to showing svg files.\n\n```\n# Jupyter cell 1\ng = graphs.PetersenGraph()\nfrom sage.plot.tikzpicture import TikzPicture\nt = TikzPicture(latex(g), usepackage=['tkz-graph'])\nt # works: it shows a png\n```\n\n```\n# Jupyter cell 2\nfrom sage.repl.rich_output import get_display_manager\ndm = get_display_manager()\nassert dm.preferences.graphics is None\ndm.preferences.graphics = 'raster'\nt  # works: it shows a png\n```\n\n\n```\n# Jupyter cell 3\ndm.preferences.graphics = 'vector'\nt   # broken: it does not show anything\n```\n\nThe following shows that the Jupyter notebook is able to handle a svg correctly:\n\n```\n# Jupyter cell 4\nt.svg('a.svg')\nfrom IPython.core.display import SVG\nSVG(filename='a.svg')\n```\n\nI suggest to fix the issue with the showing of svg in another ticket.",
    "created_at": "2021-12-09T11:37:40Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295887",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:61'></a>
Replying to [@seblabbe](#comment%3A50):
> With the recent commit and subsequent work done in #32650, the remainings TODOs are:
> 
> - improve rich repr to use svg not always png 
> 
> and as I suggested before, this one could be dealt in another ticket as it is still functional with png's in the Jupyter notebook.

Also, I want to say that I believe that the `sage.repl` code is broken with respect to showing svg files.

```
# Jupyter cell 1
g = graphs.PetersenGraph()
from sage.plot.tikzpicture import TikzPicture
t = TikzPicture(latex(g), usepackage=['tkz-graph'])
t # works: it shows a png
```

```
# Jupyter cell 2
from sage.repl.rich_output import get_display_manager
dm = get_display_manager()
assert dm.preferences.graphics is None
dm.preferences.graphics = 'raster'
t  # works: it shows a png
```


```
# Jupyter cell 3
dm.preferences.graphics = 'vector'
t   # broken: it does not show anything
```

The following shows that the Jupyter notebook is able to handle a svg correctly:

```
# Jupyter cell 4
t.svg('a.svg')
from IPython.core.display import SVG
SVG(filename='a.svg')
```

I suggest to fix the issue with the showing of svg in another ticket.



---

archive/issue_comments_295888.json:
```json
{
    "body": "**Changing commit** from \"[d6d473a1400059b385104ed4220097fde906e82f](https://github.com/sagemath/sagetrac-mirror/commit/d6d473a1400059b385104ed4220097fde906e82f)\" to \"[2da56a8cb87d3e2de789bbfd08375baee36009fd](https://github.com/sagemath/sagetrac-mirror/commit/2da56a8cb87d3e2de789bbfd08375baee36009fd)\".",
    "created_at": "2021-12-09T17:21:04Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d6d473a1400059b385104ed4220097fde906e82f](https://github.com/sagemath/sagetrac-mirror/commit/d6d473a1400059b385104ed4220097fde906e82f)" to "[2da56a8cb87d3e2de789bbfd08375baee36009fd](https://github.com/sagemath/sagetrac-mirror/commit/2da56a8cb87d3e2de789bbfd08375baee36009fd)".



---

archive/issue_comments_295889.json:
```json
{
    "body": "<a id='comment:62'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2da56a8cb87d3e2de789bbfd08375baee36009fd\">2da56a8</a></td><td><code>20343: using pdftocairo instead of pdf2svg</code></td></tr></table>\n",
    "created_at": "2021-12-09T17:21:04Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295889",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2da56a8cb87d3e2de789bbfd08375baee36009fd">2da56a8</a></td><td><code>20343: using pdftocairo instead of pdf2svg</code></td></tr></table>




---

archive/issue_comments_295890.json:
```json
{
    "body": "**Changing dependencies** from \"#32650\" to \"#32650, #33005\".",
    "created_at": "2021-12-09T17:21:47Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295890",
    "user": "https://github.com/seblabbe"
}
```

**Changing dependencies** from "#32650" to "#32650, #33005".



---

archive/issue_comments_295891.json:
```json
{
    "body": "<a id='comment:64'></a>\nReplying to [@seblabbe](#comment%3A58):\n> Replying to [@mkoeppe](#comment%3A54):\n> > In a similar direction as [comment:17](#comment%3A17), I think that the `from_graph...` and `from_poset` class methods should rather be changed to methods of `Graph` and `Poset`.\n\n> I don't think here we want to replace the output of `g._latex_` by an object of type `TikzPicture` since a such change would break a lot of code.\n\nI agree\n\n> An option is to create a new method `def tikz(self)` instead. I can do something like that.\n\nYes, this is what I meant",
    "created_at": "2021-12-09T18:44:48Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295891",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:64'></a>
Replying to [@seblabbe](#comment%3A58):
> Replying to [@mkoeppe](#comment%3A54):
> > In a similar direction as [comment:17](#comment%3A17), I think that the `from_graph...` and `from_poset` class methods should rather be changed to methods of `Graph` and `Poset`.

> I don't think here we want to replace the output of `g._latex_` by an object of type `TikzPicture` since a such change would break a lot of code.

I agree

> An option is to create a new method `def tikz(self)` instead. I can do something like that.

Yes, this is what I meant



---

archive/issue_events_182680.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:21:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182680"
}
```



---

archive/issue_events_182681.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:21:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182681"
}
```



---

archive/issue_comments_295892.json:
```json
{
    "body": "<a id='comment:66'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4ca00322578c4e36b6a8a25487c37c27eddc9fa\">d4ca003</a></td><td><code>from misc.tikz_picture -> from plot.tikzpicture</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42011d6b806fd013659b6ca367d0905b45913508\">42011d6</a></td><td><code>updated authors and copyright</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6894a5b1a87e09ffdfff29b0ea3c1aef2eb0ec67\">6894a5b</a></td><td><code>20343: redoing recent changes by Vincent Delecroix in slabbe package (check_call -> run); improved header documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c07925e1bb437cf76da9ed38ceb5bfcaba81107\">2c07925</a></td><td><code>20343: using features instead of have_program, have_pdflatex, have_convert</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83b917360f8a89488d78262a4dc5957a94d890b5\">83b9173</a></td><td><code>20343: print the log when pdflatex fails compile the tikz image</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b26bc3f41abc51b160f47a80a79da6fbf65c783e\">b26bc3f</a></td><td><code>20343: few small improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae7b9bf51ea8bc62ba28489fb6576c4d860673f4\">ae7b9bf</a></td><td><code>20343: improving first example shown in documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f91d2247fc2ffd72d0f21006f6e3a7049e4cba7\">9f91d22</a></td><td><code>20343: fixing a bug, png output was not working</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f39e07aaa119071d73beaaa8ada0b629a3c9469c\">f39e07a</a></td><td><code>20343: using pdftocairo instead of pdf2svg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90817776abb4c1e1ed21ac6af983b337330d4b2c\">9081777</a></td><td><code>20343:fixing 2 doctests + wrong trailing colons</code></td></tr></table>\n",
    "created_at": "2022-01-04T13:20:11Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4ca00322578c4e36b6a8a25487c37c27eddc9fa">d4ca003</a></td><td><code>from misc.tikz_picture -> from plot.tikzpicture</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42011d6b806fd013659b6ca367d0905b45913508">42011d6</a></td><td><code>updated authors and copyright</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6894a5b1a87e09ffdfff29b0ea3c1aef2eb0ec67">6894a5b</a></td><td><code>20343: redoing recent changes by Vincent Delecroix in slabbe package (check_call -> run); improved header documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c07925e1bb437cf76da9ed38ceb5bfcaba81107">2c07925</a></td><td><code>20343: using features instead of have_program, have_pdflatex, have_convert</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83b917360f8a89488d78262a4dc5957a94d890b5">83b9173</a></td><td><code>20343: print the log when pdflatex fails compile the tikz image</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b26bc3f41abc51b160f47a80a79da6fbf65c783e">b26bc3f</a></td><td><code>20343: few small improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae7b9bf51ea8bc62ba28489fb6576c4d860673f4">ae7b9bf</a></td><td><code>20343: improving first example shown in documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f91d2247fc2ffd72d0f21006f6e3a7049e4cba7">9f91d22</a></td><td><code>20343: fixing a bug, png output was not working</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f39e07aaa119071d73beaaa8ada0b629a3c9469c">f39e07a</a></td><td><code>20343: using pdftocairo instead of pdf2svg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90817776abb4c1e1ed21ac6af983b337330d4b2c">9081777</a></td><td><code>20343:fixing 2 doctests + wrong trailing colons</code></td></tr></table>




---

archive/issue_comments_295893.json:
```json
{
    "body": "**Changing commit** from \"[2da56a8cb87d3e2de789bbfd08375baee36009fd](https://github.com/sagemath/sagetrac-mirror/commit/2da56a8cb87d3e2de789bbfd08375baee36009fd)\" to \"[90817776abb4c1e1ed21ac6af983b337330d4b2c](https://github.com/sagemath/sagetrac-mirror/commit/90817776abb4c1e1ed21ac6af983b337330d4b2c)\".",
    "created_at": "2022-01-04T13:20:11Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295893",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2da56a8cb87d3e2de789bbfd08375baee36009fd](https://github.com/sagemath/sagetrac-mirror/commit/2da56a8cb87d3e2de789bbfd08375baee36009fd)" to "[90817776abb4c1e1ed21ac6af983b337330d4b2c](https://github.com/sagemath/sagetrac-mirror/commit/90817776abb4c1e1ed21ac6af983b337330d4b2c)".



---

archive/issue_comments_295894.json:
```json
{
    "body": "<a id='comment:67'></a>\nThere was a syntax error in the file due to the previous commit. I fixed that.\n\nI also rebased the branch on top of 9.5.beta9.",
    "created_at": "2022-01-04T13:21:11Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295894",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:67'></a>
There was a syntax error in the file due to the previous commit. I fixed that.

I also rebased the branch on top of 9.5.beta9.



---

archive/issue_comments_295895.json:
```json
{
    "body": "<a id='comment:68'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2388a15a6c9ec2e4f97f8c2afd0653f7bd52e0b\">b2388a1</a></td><td><code>20343: change default from pdf2svg to pdftocairo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a78e9ce673d3df77ca008af4c6e73490ff3d7ce7\">a78e9ce</a></td><td><code>20343: provide log if an error occurs in method png</code></td></tr></table>\n",
    "created_at": "2022-01-04T13:35:42Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295895",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:68'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2388a15a6c9ec2e4f97f8c2afd0653f7bd52e0b">b2388a1</a></td><td><code>20343: change default from pdf2svg to pdftocairo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a78e9ce673d3df77ca008af4c6e73490ff3d7ce7">a78e9ce</a></td><td><code>20343: provide log if an error occurs in method png</code></td></tr></table>




---

archive/issue_comments_295896.json:
```json
{
    "body": "**Changing commit** from \"[90817776abb4c1e1ed21ac6af983b337330d4b2c](https://github.com/sagemath/sagetrac-mirror/commit/90817776abb4c1e1ed21ac6af983b337330d4b2c)\" to \"[a78e9ce673d3df77ca008af4c6e73490ff3d7ce7](https://github.com/sagemath/sagetrac-mirror/commit/a78e9ce673d3df77ca008af4c6e73490ff3d7ce7)\".",
    "created_at": "2022-01-04T13:35:42Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295896",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[90817776abb4c1e1ed21ac6af983b337330d4b2c](https://github.com/sagemath/sagetrac-mirror/commit/90817776abb4c1e1ed21ac6af983b337330d4b2c)" to "[a78e9ce673d3df77ca008af4c6e73490ff3d7ce7](https://github.com/sagemath/sagetrac-mirror/commit/a78e9ce673d3df77ca008af4c6e73490ff3d7ce7)".



---

archive/issue_comments_295897.json:
```json
{
    "body": "<a id='comment:69'></a>\nI confirm it works on my side:\n\n```\n$ sage -t tikzpicture.py \n[...]\nDoctesting 1 file.\nsage -t --random-seed=33963620693510224516081799230454604818 tikzpicture.py\n    [158 tests, 4.59 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nFeatures detected for doctesting: \n```\nand\n\n```\n$ sage -t --show-skipped --long --optional=sage,optional,external tikzpicture.py \n[...]\nDoctesting 1 file.\nsage -t --long --random-seed=204572532264437349038334999704478431314 tikzpicture.py\n    24 not tested tests not run\n    2 pdftocairo tests not run\n    0 tests not run because we ran out of time\n    [188 tests, 15.97 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nFeatures detected for doctesting: imagemagick,latex,pdf2svg\n```",
    "created_at": "2022-01-04T13:37:16Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295897",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:69'></a>
I confirm it works on my side:

```
$ sage -t tikzpicture.py 
[...]
Doctesting 1 file.
sage -t --random-seed=33963620693510224516081799230454604818 tikzpicture.py
    [158 tests, 4.59 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Features detected for doctesting: 
```
and

```
$ sage -t --show-skipped --long --optional=sage,optional,external tikzpicture.py 
[...]
Doctesting 1 file.
sage -t --long --random-seed=204572532264437349038334999704478431314 tikzpicture.py
    24 not tested tests not run
    2 pdftocairo tests not run
    0 tests not run because we ran out of time
    [188 tests, 15.97 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Features detected for doctesting: imagemagick,latex,pdf2svg
```



---

archive/attachments_021470.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "tikz-jupyter-demo.png",
    "asset_url": "tarball://root/attachments/ticket20343/tikz-jupyter-demo.png",
    "created_at": "2022-01-04T13:57:12Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket20343/tikz-jupyter-demo.png",
    "user": "https://github.com/seblabbe"
}
```



---

archive/issue_comments_295898.json:
```json
{
    "body": "**Attachment:** [tikz-jupyter-demo.png](https://github.com/sagemath/sage/files/ticket20343/tikz-jupyter-demo.png)",
    "created_at": "2022-01-04T13:57:12Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295898",
    "user": "https://github.com/seblabbe"
}
```

**Attachment:** [tikz-jupyter-demo.png](https://github.com/sagemath/sage/files/ticket20343/tikz-jupyter-demo.png)



---

archive/issue_comments_295899.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,10 @@\n-Importing `TikzPicture` module from optional [SageMath](../wiki/SageMath) package [slabbe-0.6.2](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath).\n+The goal of this ticket is to import the `TikzPicture` module from the optional [SageMath](../wiki/SageMath) package [slabbe](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath). This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into [SageMath](../wiki/SageMath).\n \n-One example:\n+Here is a demo inside a Jupyter notebook:\n+\n+<img src=\"https://github.com/sagemath/sage/files/ticket20343/tikz-jupyter-demo.png\" width=width=600>\n+\n+More examples:\n \n ```\n sage: from sage.plot.tikzpicture import TikzPicture\n``````\n",
    "created_at": "2022-01-04T14:06:58Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295899",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,10 @@
-Importing `TikzPicture` module from optional [SageMath](../wiki/SageMath) package [slabbe-0.6.2](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath).
+The goal of this ticket is to import the `TikzPicture` module from the optional [SageMath](../wiki/SageMath) package [slabbe](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath). This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into [SageMath](../wiki/SageMath).
 
-One example:
+Here is a demo inside a Jupyter notebook:
+
+<img src="https://github.com/sagemath/sage/files/ticket20343/tikz-jupyter-demo.png" width=width=600>
+
+More examples:
 
 ```
 sage: from sage.plot.tikzpicture import TikzPicture
``````




---

archive/issue_comments_295900.json:
```json
{
    "body": "<a id='comment:70'></a>\nUpdating the description: adding a screenshot of the behavior in Jupyter, hoping it motivates someone to review the ticket.",
    "created_at": "2022-01-04T14:06:58Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295900",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:70'></a>
Updating the description: adding a screenshot of the behavior in Jupyter, hoping it motivates someone to review the ticket.



---

archive/issue_comments_295901.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The goal of this ticket is to import the `TikzPicture` module from the optional [SageMath](../wiki/SageMath) package [slabbe](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath). This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into [SageMath](../wiki/SageMath).\n+The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into SageMath.\n \n Here is a demo inside a Jupyter notebook:\n \n``````\n",
    "created_at": "2022-01-04T14:08:10Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295901",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The goal of this ticket is to import the `TikzPicture` module from the optional [SageMath](../wiki/SageMath) package [slabbe](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath). This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into [SageMath](../wiki/SageMath).
+The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into SageMath.
 
 Here is a demo inside a Jupyter notebook:
 
``````




---

archive/issue_comments_295902.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into SageMath.\n+The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state and it is mature enough to go into SageMath now.\n \n Here is a demo inside a Jupyter notebook:\n \n``````\n",
    "created_at": "2022-01-04T14:08:56Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295902",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into SageMath.
+The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state and it is mature enough to go into SageMath now.
 
 Here is a demo inside a Jupyter notebook:
 
``````




---

archive/issue_comments_295903.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -101,4 +101,4 @@\n \n An example of usage of this module can be found at this url:\n https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n-associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one uses `from sage.plot.tikzpicture import TikzPicture` and check that tikzpicture created within slabbe still works within the tikzpicture module introduced in this ticket.\n+associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics at http://dx.doi.org/10.3934/jmd.2021017.\n``````\n",
    "created_at": "2022-01-04T14:11:49Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295903",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -101,4 +101,4 @@
 
 An example of usage of this module can be found at this url:
 https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb
-associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one uses `from sage.plot.tikzpicture import TikzPicture` and check that tikzpicture created within slabbe still works within the tikzpicture module introduced in this ticket.
+associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics at http://dx.doi.org/10.3934/jmd.2021017.
``````




---

archive/issue_comments_295904.json:
```json
{
    "body": "<a id='comment:74'></a>\nWhy this default `usepackage=['amsmath']`?",
    "created_at": "2022-01-05T16:52:58Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295904",
    "user": "https://github.com/videlec"
}
```

<a id='comment:74'></a>
Why this default `usepackage=['amsmath']`?



---

archive/issue_comments_295905.json:
```json
{
    "body": "<a id='comment:75'></a>\nMoreover, you should **never** have a list as a default argument which is plugged as an attribute\n\n```\nsage: class A():\n....:     def __init__(self, a=[]):\n....:         self.a = a\nsage: x = A()\nsage: x.a.append(2)\nsage: y = A()\nsage: y.a\n[2]\n```",
    "created_at": "2022-01-05T16:55:24Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295905",
    "user": "https://github.com/videlec"
}
```

<a id='comment:75'></a>
Moreover, you should **never** have a list as a default argument which is plugged as an attribute

```
sage: class A():
....:     def __init__(self, a=[]):
....:         self.a = a
sage: x = A()
sage: x.a.append(2)
sage: y = A()
sage: y.a
[2]
```



---

archive/issue_comments_295906.json:
```json
{
    "body": "**Changing commit** from \"[a78e9ce673d3df77ca008af4c6e73490ff3d7ce7](https://github.com/sagemath/sagetrac-mirror/commit/a78e9ce673d3df77ca008af4c6e73490ff3d7ce7)\" to \"[fc47455b050b1a21244e6ab00ef3b88de8bf4d67](https://github.com/sagemath/sagetrac-mirror/commit/fc47455b050b1a21244e6ab00ef3b88de8bf4d67)\".",
    "created_at": "2022-01-05T18:04:24Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295906",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a78e9ce673d3df77ca008af4c6e73490ff3d7ce7](https://github.com/sagemath/sagetrac-mirror/commit/a78e9ce673d3df77ca008af4c6e73490ff3d7ce7)" to "[fc47455b050b1a21244e6ab00ef3b88de8bf4d67](https://github.com/sagemath/sagetrac-mirror/commit/fc47455b050b1a21244e6ab00ef3b88de8bf4d67)".



---

archive/issue_comments_295907.json:
```json
{
    "body": "<a id='comment:76'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3dec92c4513d78f176f4ec201e706ab5fd98f9b\">a3dec92</a></td><td><code>20343: change default value of usepackage to None</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc47455b050b1a21244e6ab00ef3b88de8bf4d67\">fc47455</a></td><td><code>20343: use shell=False instead</code></td></tr></table>\n",
    "created_at": "2022-01-05T18:04:24Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295907",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:76'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3dec92c4513d78f176f4ec201e706ab5fd98f9b">a3dec92</a></td><td><code>20343: change default value of usepackage to None</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc47455b050b1a21244e6ab00ef3b88de8bf4d67">fc47455</a></td><td><code>20343: use shell=False instead</code></td></tr></table>




---

archive/issue_comments_295908.json:
```json
{
    "body": "<a id='comment:77'></a>\nYou are right. I also avoided the usage of `shell=True` for security reasons, see https://docs.python.org/3/library/subprocess.html#security-considerations\n\nDoing so, the `cmd` needs to be a list and not a string. This is better also because it allows filenames to contain spaces: *\"Providing a sequence of arguments is generally preferred, as it allows the module to take care of any required escaping and quoting of arguments (e.g. to permit spaces in file names)\"*, see https://docs.python.org/3/library/subprocess.html#frequently-used-arguments",
    "created_at": "2022-01-05T18:06:20Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295908",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:77'></a>
You are right. I also avoided the usage of `shell=True` for security reasons, see https://docs.python.org/3/library/subprocess.html#security-considerations

Doing so, the `cmd` needs to be a list and not a string. This is better also because it allows filenames to contain spaces: *"Providing a sequence of arguments is generally preferred, as it allows the module to take care of any required escaping and quoting of arguments (e.g. to permit spaces in file names)"*, see https://docs.python.org/3/library/subprocess.html#frequently-used-arguments



---

archive/issue_comments_295909.json:
```json
{
    "body": "<a id='comment:78'></a>\nReplying to [@seblabbe](#comment%3A77):\n> [...]\n> This is better also because it allows filenames to contain spaces\n> [...]\n\nIf `'m y p i c t u r e.pdf'` is an explicitely supported filename, it would make sense to mention it and test it. If it is an obscure feature, nevermind.",
    "created_at": "2022-01-05T18:15:05Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295909",
    "user": "https://github.com/videlec"
}
```

<a id='comment:78'></a>
Replying to [@seblabbe](#comment%3A77):
> [...]
> This is better also because it allows filenames to contain spaces
> [...]

If `'m y p i c t u r e.pdf'` is an explicitely supported filename, it would make sense to mention it and test it. If it is an obscure feature, nevermind.



---

archive/issue_comments_295910.json:
```json
{
    "body": "**Changing commit** from \"[fc47455b050b1a21244e6ab00ef3b88de8bf4d67](https://github.com/sagemath/sagetrac-mirror/commit/fc47455b050b1a21244e6ab00ef3b88de8bf4d67)\" to \"[ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1](https://github.com/sagemath/sagetrac-mirror/commit/ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1)\".",
    "created_at": "2022-01-05T20:04:20Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295910",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fc47455b050b1a21244e6ab00ef3b88de8bf4d67](https://github.com/sagemath/sagetrac-mirror/commit/fc47455b050b1a21244e6ab00ef3b88de8bf4d67)" to "[ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1](https://github.com/sagemath/sagetrac-mirror/commit/ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1)".



---

archive/issue_comments_295911.json:
```json
{
    "body": "<a id='comment:79'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1\">ab3ec02</a></td><td><code>20343: add doctest showing spaces in filename</code></td></tr></table>\n",
    "created_at": "2022-01-05T20:04:20Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295911",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:79'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1">ab3ec02</a></td><td><code>20343: add doctest showing spaces in filename</code></td></tr></table>




---

archive/issue_comments_295912.json:
```json
{
    "body": "<a id='comment:80'></a>\nReplying to [@videlec](#comment%3A78):\n> If `'m y p i c t u r e.pdf'` is an explicitely supported filename, it would make sense to mention it and test it. If it is an obscure feature, nevermind.\n\nYes, why not. I added a doctest confirming it works.\n\nI also added a missing long doctest tag.\n\nNeeds review!",
    "created_at": "2022-01-05T20:05:33Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295912",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:80'></a>
Replying to [@videlec](#comment%3A78):
> If `'m y p i c t u r e.pdf'` is an explicitely supported filename, it would make sense to mention it and test it. If it is an obscure feature, nevermind.

Yes, why not. I added a doctest confirming it works.

I also added a missing long doctest tag.

Needs review!



---

archive/issue_events_182682.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-01-06T11:16:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182682"
}
```



---

archive/issue_events_182683.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-01-06T11:16:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182683"
}
```



---

archive/issue_comments_295913.json:
```json
{
    "body": "<a id='comment:81'></a>\nThere is a time window right now for this ticket to get into sage-9.5 maybe within the first rc.\n\nThe patchbots are green. I will be available in the next days to fix quickly any remaining issues.",
    "created_at": "2022-01-06T11:16:08Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295913",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:81'></a>
There is a time window right now for this ticket to get into sage-9.5 maybe within the first rc.

The patchbots are green. I will be available in the next days to fix quickly any remaining issues.



---

archive/issue_comments_295914.json:
```json
{
    "body": "**Changing reviewer** from \"Jean-Philippe Labb\u00e9, Xavier Caruso\" to \"Jean-Philippe Labb\u00e9, Xavier Caruso, Vincent Delecroix\".",
    "created_at": "2022-01-06T18:00:51Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295914",
    "user": "https://github.com/videlec"
}
```

**Changing reviewer** from "Jean-Philippe Labbé, Xavier Caruso" to "Jean-Philippe Labbé, Xavier Caruso, Vincent Delecroix".



---

archive/issue_events_182684.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-01-06T18:00:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182684"
}
```



---

archive/issue_events_182685.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-01-06T18:00:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182685"
}
```



---

archive/issue_comments_295915.json:
```json
{
    "body": "<a id='comment:83'></a>\nThank you!! I was holding by breathe since 6 years!\n\nI will add a nice section in the release notes if it makes it in 9.5.",
    "created_at": "2022-01-06T18:07:18Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295915",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:83'></a>
Thank you!! I was holding by breathe since 6 years!

I will add a nice section in the release notes if it makes it in 9.5.



---

archive/issue_events_182686.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-28T23:03:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182686"
}
```



---

archive/issue_events_182687.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-28T23:03:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182687"
}
```



---

archive/issue_comments_295916.json:
```json
{
    "body": "<a id='comment:85'></a>\n\n```\n**********************************************************************\nFile \"src/sage/plot/tikzpicture.py\", line 73, in sage.plot.tikzpicture\nFailed example:\n    _ = t.png(view=False)      # long time (2s) # optional imagemagick\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.plot.tikzpicture[14]>\", line 1, in <module>\n        _ = t.png(view=False)      # long time (2s) # optional imagemagick\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py\", line 505, in png\n        _filename_pdf = self.pdf(filename=None, view=False)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py\", line 443, in pdf\n        result.check_returncode()\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/subprocess.py\", line 460, in check_returncode\n        raise CalledProcessError(self.returncode, self.args, self.stdout,\n    subprocess.CalledProcessError: Command '['lualatex', '-interaction=nonstopmode', 'tikz_544oxd7o.tex']' returned non-zero exit status 1.\n**********************************************************************\nFile \"src/sage/plot/tikzpicture.py\", line 494, in sage.plot.tikzpicture.StandaloneTex.png\nFailed example:\n    path_to_file = t.png(filename) # long time (2s)   # optional imagemagick\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.plot.tikzpicture.StandaloneTex.png[7]>\", line 1, in <module>\n        path_to_file = t.png(filename) # long time (2s)   # optional imagemagick\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py\", line 505, in png\n        _filename_pdf = self.pdf(filename=None, view=False)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py\", line 443, in pdf\n        result.check_returncode()\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/subprocess.py\", line 460, in check_returncode\n        raise CalledProcessError(self.returncode, self.args, self.stdout,\n    subprocess.CalledProcessError: Command '['lualatex', '-interaction=nonstopmode', 'tikz_ikxvujw2.tex']' returned non-zero exit status 1.\n**********************************************************************\nFile \"src/sage/plot/tikzpicture.py\", line 495, in sage.plot.tikzpicture.StandaloneTex.png\nFailed example:\n    path_to_file[-4:]              # long time (fast) # optional imagemagick\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.plot.tikzpicture.StandaloneTex.png[8]>\", line 1, in <module>\n        path_to_file[-Integer(4):]              # long time (fast) # optional imagemagick\n    NameError: name 'path_to_file' is not defined\n**********************************************************************\nFile \"src/sage/plot/tikzpicture.py\", line 579, in sage.plot.tikzpicture.StandaloneTex.svg\nFailed example:\n    path_to_file = t.svg(filename, program='pdftocairo') # long time (2s)   # optional pdftocairo\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.plot.tikzpicture.StandaloneTex.svg[7]>\", line 1, in <module>\n        path_to_file = t.svg(filename, program='pdftocairo') # long time (2s)   # optional pdftocairo\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py\", line 588, in svg\n        _filename_pdf = self.pdf(filename=None, view=False)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py\", line 443, in pdf\n        result.check_returncode()\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/subprocess.py\", line 460, in check_returncode\n        raise CalledProcessError(self.returncode, self.args, self.stdout,\n    subprocess.CalledProcessError: Command '['lualatex', '-interaction=nonstopmode', 'tikz_o2ho82xz.tex']' returned non-zero exit status 1.\n**********************************************************************\nFile \"src/sage/plot/tikzpicture.py\", line 580, in sage.plot.tikzpicture.StandaloneTex.svg\nFailed example:\n    path_to_file[-4:]                                    # long time (fast) # optional pdftocairo\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.plot.tikzpicture.StandaloneTex.svg[8]>\", line 1, in <module>\n        path_to_file[-Integer(4):]                                    # long time (fast) # optional pdftocairo\n    NameError: name 'path_to_file' is not defined\n**********************************************************************\n```",
    "created_at": "2022-02-13T00:28:04Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295916",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:85'></a>

```
**********************************************************************
File "src/sage/plot/tikzpicture.py", line 73, in sage.plot.tikzpicture
Failed example:
    _ = t.png(view=False)      # long time (2s) # optional imagemagick
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.plot.tikzpicture[14]>", line 1, in <module>
        _ = t.png(view=False)      # long time (2s) # optional imagemagick
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py", line 505, in png
        _filename_pdf = self.pdf(filename=None, view=False)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py", line 443, in pdf
        result.check_returncode()
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/subprocess.py", line 460, in check_returncode
        raise CalledProcessError(self.returncode, self.args, self.stdout,
    subprocess.CalledProcessError: Command '['lualatex', '-interaction=nonstopmode', 'tikz_544oxd7o.tex']' returned non-zero exit status 1.
**********************************************************************
File "src/sage/plot/tikzpicture.py", line 494, in sage.plot.tikzpicture.StandaloneTex.png
Failed example:
    path_to_file = t.png(filename) # long time (2s)   # optional imagemagick
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.plot.tikzpicture.StandaloneTex.png[7]>", line 1, in <module>
        path_to_file = t.png(filename) # long time (2s)   # optional imagemagick
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py", line 505, in png
        _filename_pdf = self.pdf(filename=None, view=False)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py", line 443, in pdf
        result.check_returncode()
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/subprocess.py", line 460, in check_returncode
        raise CalledProcessError(self.returncode, self.args, self.stdout,
    subprocess.CalledProcessError: Command '['lualatex', '-interaction=nonstopmode', 'tikz_ikxvujw2.tex']' returned non-zero exit status 1.
**********************************************************************
File "src/sage/plot/tikzpicture.py", line 495, in sage.plot.tikzpicture.StandaloneTex.png
Failed example:
    path_to_file[-4:]              # long time (fast) # optional imagemagick
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.plot.tikzpicture.StandaloneTex.png[8]>", line 1, in <module>
        path_to_file[-Integer(4):]              # long time (fast) # optional imagemagick
    NameError: name 'path_to_file' is not defined
**********************************************************************
File "src/sage/plot/tikzpicture.py", line 579, in sage.plot.tikzpicture.StandaloneTex.svg
Failed example:
    path_to_file = t.svg(filename, program='pdftocairo') # long time (2s)   # optional pdftocairo
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.plot.tikzpicture.StandaloneTex.svg[7]>", line 1, in <module>
        path_to_file = t.svg(filename, program='pdftocairo') # long time (2s)   # optional pdftocairo
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py", line 588, in svg
        _filename_pdf = self.pdf(filename=None, view=False)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py", line 443, in pdf
        result.check_returncode()
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/subprocess.py", line 460, in check_returncode
        raise CalledProcessError(self.returncode, self.args, self.stdout,
    subprocess.CalledProcessError: Command '['lualatex', '-interaction=nonstopmode', 'tikz_o2ho82xz.tex']' returned non-zero exit status 1.
**********************************************************************
File "src/sage/plot/tikzpicture.py", line 580, in sage.plot.tikzpicture.StandaloneTex.svg
Failed example:
    path_to_file[-4:]                                    # long time (fast) # optional pdftocairo
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.plot.tikzpicture.StandaloneTex.svg[8]>", line 1, in <module>
        path_to_file[-Integer(4):]                                    # long time (fast) # optional pdftocairo
    NameError: name 'path_to_file' is not defined
**********************************************************************
```



---

archive/issue_events_182688.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-13T00:28:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182688"
}
```



---

archive/issue_events_182689.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-13T00:28:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182689"
}
```



---

archive/issue_comments_295917.json:
```json
{
    "body": "<a id='comment:86'></a>\nIndeed, the failures show that when latex is not installed, there are missing optional `latex` tags. Sorry Volker.",
    "created_at": "2022-02-13T17:48:30Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295917",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:86'></a>
Indeed, the failures show that when latex is not installed, there are missing optional `latex` tags. Sorry Volker.



---

archive/issue_comments_295918.json:
```json
{
    "body": "<a id='comment:87'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8c9cb150df25b46f35ea57ed681fb9ea06854ff\">c8c9cb1</a></td><td><code>20343: improving first example shown in documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3aae6c029f3e49d96fd47f6b967dfad460c5e808\">3aae6c0</a></td><td><code>20343: fixing a bug, png output was not working</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65ab05b2ffda08e69a2316d580220f9becb2ac9e\">65ab05b</a></td><td><code>20343: using pdftocairo instead of pdf2svg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd8e604caa6a871d0820a432bc4c95def4b27e38\">cd8e604</a></td><td><code>20343:fixing 2 doctests + wrong trailing colons</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0790c85f533a5df63d6cea932939f8257dc79956\">0790c85</a></td><td><code>20343: change default from pdf2svg to pdftocairo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aef6bd46f3548da42a6455db4f70bb065bef48ff\">aef6bd4</a></td><td><code>20343: provide log if an error occurs in method png</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4695c06a6e9ae2483e4d7d41fcbf8a8fa89b418\">d4695c0</a></td><td><code>20343: change default value of usepackage to None</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d05788609cf031415075cb7cc4752a17ba7ef8ec\">d057886</a></td><td><code>20343: use shell=False instead</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a933774b9e130de9bdaa0ce2cfec032b56bd6cb9\">a933774</a></td><td><code>20343: add doctest showing spaces in filename</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b5bd661c86a07eab7ebef50bafd4d4822d4730f\">4b5bd66</a></td><td><code>20343: adding missing optional latex tag</code></td></tr></table>\n",
    "created_at": "2022-02-17T09:14:21Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295918",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:87'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8c9cb150df25b46f35ea57ed681fb9ea06854ff">c8c9cb1</a></td><td><code>20343: improving first example shown in documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3aae6c029f3e49d96fd47f6b967dfad460c5e808">3aae6c0</a></td><td><code>20343: fixing a bug, png output was not working</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65ab05b2ffda08e69a2316d580220f9becb2ac9e">65ab05b</a></td><td><code>20343: using pdftocairo instead of pdf2svg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd8e604caa6a871d0820a432bc4c95def4b27e38">cd8e604</a></td><td><code>20343:fixing 2 doctests + wrong trailing colons</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0790c85f533a5df63d6cea932939f8257dc79956">0790c85</a></td><td><code>20343: change default from pdf2svg to pdftocairo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aef6bd46f3548da42a6455db4f70bb065bef48ff">aef6bd4</a></td><td><code>20343: provide log if an error occurs in method png</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4695c06a6e9ae2483e4d7d41fcbf8a8fa89b418">d4695c0</a></td><td><code>20343: change default value of usepackage to None</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d05788609cf031415075cb7cc4752a17ba7ef8ec">d057886</a></td><td><code>20343: use shell=False instead</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a933774b9e130de9bdaa0ce2cfec032b56bd6cb9">a933774</a></td><td><code>20343: add doctest showing spaces in filename</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b5bd661c86a07eab7ebef50bafd4d4822d4730f">4b5bd66</a></td><td><code>20343: adding missing optional latex tag</code></td></tr></table>




---

archive/issue_comments_295919.json:
```json
{
    "body": "**Changing commit** from \"[ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1](https://github.com/sagemath/sagetrac-mirror/commit/ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1)\" to \"[4b5bd661c86a07eab7ebef50bafd4d4822d4730f](https://github.com/sagemath/sagetrac-mirror/commit/4b5bd661c86a07eab7ebef50bafd4d4822d4730f)\".",
    "created_at": "2022-02-17T09:14:21Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295919",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1](https://github.com/sagemath/sagetrac-mirror/commit/ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1)" to "[4b5bd661c86a07eab7ebef50bafd4d4822d4730f](https://github.com/sagemath/sagetrac-mirror/commit/4b5bd661c86a07eab7ebef50bafd4d4822d4730f)".



---

archive/issue_comments_295920.json:
```json
{
    "body": "<a id='comment:88'></a>\nAdded the missing latex tag. Also rebased on 9.6.beta1.",
    "created_at": "2022-02-17T09:24:11Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295920",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:88'></a>
Added the missing latex tag. Also rebased on 9.6.beta1.



---

archive/issue_events_182690.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-02-17T09:43:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182690"
}
```



---

archive/issue_events_182691.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-02-17T09:43:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182691"
}
```



---

archive/issue_comments_295921.json:
```json
{
    "body": "<a id='comment:90'></a>\nWhy not using `else` here\n\n```\n+        if program == 'pdflatex':\n+            pdflatex().require()\n+        elif program == 'lualatex':\n+            lualatex().require()\n+        elif program not in ['pdflatex','lualatex']:\n+            raise ValueError(\"program(={}) should be pdflatex or lualatex\".format(program))\n```",
    "created_at": "2022-02-19T09:16:30Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295921",
    "user": "https://github.com/videlec"
}
```

<a id='comment:90'></a>
Why not using `else` here

```
+        if program == 'pdflatex':
+            pdflatex().require()
+        elif program == 'lualatex':
+            lualatex().require()
+        elif program not in ['pdflatex','lualatex']:
+            raise ValueError("program(={}) should be pdflatex or lualatex".format(program))
```



---

archive/issue_comments_295922.json:
```json
{
    "body": "<a id='comment:91'></a>\nWhy do you prefix `filename_png`, `filename_pdf`, etc with an additional underscore, ie `_filename_png`, `_filename_pdf`?",
    "created_at": "2022-02-19T09:17:03Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295922",
    "user": "https://github.com/videlec"
}
```

<a id='comment:91'></a>
Why do you prefix `filename_png`, `filename_pdf`, etc with an additional underscore, ie `_filename_png`, `_filename_pdf`?



---

archive/issue_comments_295923.json:
```json
{
    "body": "**Changing commit** from \"[4b5bd661c86a07eab7ebef50bafd4d4822d4730f](https://github.com/sagemath/sagetrac-mirror/commit/4b5bd661c86a07eab7ebef50bafd4d4822d4730f)\" to \"[f1e4728d00efd130a0688ac79e616bffbae0c539](https://github.com/sagemath/sagetrac-mirror/commit/f1e4728d00efd130a0688ac79e616bffbae0c539)\".",
    "created_at": "2022-02-22T08:45:08Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295923",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4b5bd661c86a07eab7ebef50bafd4d4822d4730f](https://github.com/sagemath/sagetrac-mirror/commit/4b5bd661c86a07eab7ebef50bafd4d4822d4730f)" to "[f1e4728d00efd130a0688ac79e616bffbae0c539](https://github.com/sagemath/sagetrac-mirror/commit/f1e4728d00efd130a0688ac79e616bffbae0c539)".



---

archive/issue_comments_295924.json:
```json
{
    "body": "<a id='comment:92'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1e4728d00efd130a0688ac79e616bffbae0c539\">f1e4728</a></td><td><code>20343: using else instead of elif</code></td></tr></table>\n",
    "created_at": "2022-02-22T08:45:08Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295924",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:92'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1e4728d00efd130a0688ac79e616bffbae0c539">f1e4728</a></td><td><code>20343: using else instead of elif</code></td></tr></table>




---

archive/issue_comments_295925.json:
```json
{
    "body": "<a id='comment:93'></a>\nReplying to [@videlec](#comment%3A90):\n> Why not using `else` here\n\nYou are right. I don't know why I did not use else. I added a commit to fix that.",
    "created_at": "2022-02-22T08:47:43Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295925",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:93'></a>
Replying to [@videlec](#comment%3A90):
> Why not using `else` here

You are right. I don't know why I did not use else. I added a commit to fix that.



---

archive/issue_comments_295926.json:
```json
{
    "body": "<a id='comment:94'></a>\nReplying to [@videlec](#comment%3A91):\n> Why do you prefix `filename_png`, `filename_pdf`, etc with an additional underscore, ie `_filename_png`, `_filename_pdf`?\n\nThe reason is to distinguish the variable `filename` (input given from the user) from the variable `_filename` (name of a temporary file created by the method). See the code of the method `svg` where both `filename` and `_filename` are used. For consistency, the same principle is used in all methods.\n\nNeeds review!",
    "created_at": "2022-02-22T08:50:45Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295926",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:94'></a>
Replying to [@videlec](#comment%3A91):
> Why do you prefix `filename_png`, `filename_pdf`, etc with an additional underscore, ie `_filename_png`, `_filename_pdf`?

The reason is to distinguish the variable `filename` (input given from the user) from the variable `_filename` (name of a temporary file created by the method). See the code of the method `svg` where both `filename` and `_filename` are used. For consistency, the same principle is used in all methods.

Needs review!



---

archive/issue_comments_295927.json:
```json
{
    "body": "<a id='comment:95'></a>\nReplying to [@seblabbe](#comment%3A94):\n> Replying to [@videlec](#comment%3A91):\n> > Why do you prefix `filename_png`, `filename_pdf`, etc with an additional underscore, ie `_filename_png`, `_filename_pdf`?\n\n> \n> The reason is to distinguish the variable `filename` (input given from the user) from the variable `_filename` (name of a temporary file created by the method). See the code of the method `svg` where both `filename` and `_filename` are used. For consistency, the same principle is used in all methods.\n> \n> Needs review!\n\nInstead of the very unconventional `_filename` variable name you would better use `temporary_filename`, `temporary_filename_tex`, `temporary_filename_pdf`, etc.",
    "created_at": "2022-02-22T09:26:17Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295927",
    "user": "https://github.com/videlec"
}
```

<a id='comment:95'></a>
Replying to [@seblabbe](#comment%3A94):
> Replying to [@videlec](#comment%3A91):
> > Why do you prefix `filename_png`, `filename_pdf`, etc with an additional underscore, ie `_filename_png`, `_filename_pdf`?

> 
> The reason is to distinguish the variable `filename` (input given from the user) from the variable `_filename` (name of a temporary file created by the method). See the code of the method `svg` where both `filename` and `_filename` are used. For consistency, the same principle is used in all methods.
> 
> Needs review!

Instead of the very unconventional `_filename` variable name you would better use `temporary_filename`, `temporary_filename_tex`, `temporary_filename_pdf`, etc.



---

archive/issue_comments_295928.json:
```json
{
    "body": "**Changing commit** from \"[f1e4728d00efd130a0688ac79e616bffbae0c539](https://github.com/sagemath/sagetrac-mirror/commit/f1e4728d00efd130a0688ac79e616bffbae0c539)\" to \"[2f4771798e2c4219794d36890babbf65a44f2cfd](https://github.com/sagemath/sagetrac-mirror/commit/2f4771798e2c4219794d36890babbf65a44f2cfd)\".",
    "created_at": "2022-02-22T14:15:56Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295928",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f1e4728d00efd130a0688ac79e616bffbae0c539](https://github.com/sagemath/sagetrac-mirror/commit/f1e4728d00efd130a0688ac79e616bffbae0c539)" to "[2f4771798e2c4219794d36890babbf65a44f2cfd](https://github.com/sagemath/sagetrac-mirror/commit/2f4771798e2c4219794d36890babbf65a44f2cfd)".



---

archive/issue_comments_295929.json:
```json
{
    "body": "<a id='comment:96'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f4771798e2c4219794d36890babbf65a44f2cfd\">2f47717</a></td><td><code>20343: rename _filename* -> temp_filename*</code></td></tr></table>\n",
    "created_at": "2022-02-22T14:15:56Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295929",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:96'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f4771798e2c4219794d36890babbf65a44f2cfd">2f47717</a></td><td><code>20343: rename _filename* -> temp_filename*</code></td></tr></table>




---

archive/issue_comments_295930.json:
```json
{
    "body": "<a id='comment:97'></a>\nReplying to [@videlec](#comment%3A95):\n> Instead of the very unconventional `_filename` variable name you would better use `temporary_filename`, `temporary_filename_tex`, `temporary_filename_pdf`, etc.\n\nOk, I renamed it as `s/_filename/temp_filename/g`.\n\nNeeds review!",
    "created_at": "2022-02-22T14:17:27Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295930",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:97'></a>
Replying to [@videlec](#comment%3A95):
> Instead of the very unconventional `_filename` variable name you would better use `temporary_filename`, `temporary_filename_tex`, `temporary_filename_pdf`, etc.

Ok, I renamed it as `s/_filename/temp_filename/g`.

Needs review!



---

archive/issue_comments_295931.json:
```json
{
    "body": "<a id='comment:98'></a>\nInstead of `from_graph`, `from_poset`, ... wouldn't it make more sense to have `Graph.tikz()`, `Poset.tikz()`, etc? In the former design the `TikzPicture` code would end up with a ton of methods dealing with various specific objects.",
    "created_at": "2022-02-22T14:22:22Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295931",
    "user": "https://github.com/videlec"
}
```

<a id='comment:98'></a>
Instead of `from_graph`, `from_poset`, ... wouldn't it make more sense to have `Graph.tikz()`, `Poset.tikz()`, etc? In the former design the `TikzPicture` code would end up with a ton of methods dealing with various specific objects.



---

archive/issue_comments_295932.json:
```json
{
    "body": "<a id='comment:99'></a>\nOr alternatively: `__tikz__()` if you want to hide it.",
    "created_at": "2022-02-22T14:22:45Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295932",
    "user": "https://github.com/videlec"
}
```

<a id='comment:99'></a>
Or alternatively: `__tikz__()` if you want to hide it.



---

archive/issue_comments_295933.json:
```json
{
    "body": "<a id='comment:0'></a>\nSee [comment:17](#comment%3A17) :-)",
    "created_at": "2022-02-22T14:24:36Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295933",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:0'></a>
See [comment:17](#comment%3A17) :-)



---

archive/issue_comments_295934.json:
```json
{
    "body": "<a id='comment:1'></a>\nI agree with Xavier ! The current branch proposes to make `TikzPicture.from_XXX` the default conversion function. If the design is wrong, better to change it now than in a hypothetical future.",
    "created_at": "2022-02-22T14:30:25Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295934",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>
I agree with Xavier ! The current branch proposes to make `TikzPicture.from_XXX` the default conversion function. If the design is wrong, better to change it now than in a hypothetical future.



---

archive/issue_comments_295935.json:
```json
{
    "body": "<a id='comment:102'></a>\nReplying to [@videlec](#comment%3A101):\n> I agree with Xavier ! The current branch proposes to make `TikzPicture.from_XXX` the default conversion function. If the design is wrong, better to change it now than in a hypothetical future.\n\nSee also [comment:54](#comment%3A54) from mkoeppe who suggested the same thing.\n\nThen, please read follow-up [comment:58](#comment%3A58), and answer to my answer in [comment:58](#comment%3A58).",
    "created_at": "2022-02-22T14:48:34Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295935",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:102'></a>
Replying to [@videlec](#comment%3A101):
> I agree with Xavier ! The current branch proposes to make `TikzPicture.from_XXX` the default conversion function. If the design is wrong, better to change it now than in a hypothetical future.

See also [comment:54](#comment%3A54) from mkoeppe who suggested the same thing.

Then, please read follow-up [comment:58](#comment%3A58), and answer to my answer in [comment:58](#comment%3A58).



---

archive/issue_comments_295936.json:
```json
{
    "body": "<a id='comment:3'></a>\nIdeally, `TikzPicture` should inherit from `LatexExpr` so that returning a `TikzPicture` from a `_latex_` method would not be a breaking change.\n\nFor the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.",
    "created_at": "2022-02-22T14:54:47Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295936",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>
Ideally, `TikzPicture` should inherit from `LatexExpr` so that returning a `TikzPicture` from a `_latex_` method would not be a breaking change.

For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.



---

archive/issue_comments_295937.json:
```json
{
    "body": "<a id='comment:104'></a>\nReplying to [@videlec](#comment%3A103):\n> Ideally, `TikzPicture` should inherit from `LatexExpr` so that returning a `TikzPicture` from a `_latex_` method would not be a breaking change.\n\nWell, `LatexExpr` already inherits from the Python class `str` which makes it full of methods that, as a user, I don't want to see in the list of methods seen with tab-completion on an object of type `TikzPicture`.\n\n> For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.\n\nOk, let me think about that again, maybe this Thursday at Bordeaux Sage Thursdays, we can discuss this and converge to choices on how this is done for graphs (`tkz-berge` vs graphviz + dot2tex) and for polytopes (the actual `tikz()` method vs a new `tikz()` or `__tikz__()` method).",
    "created_at": "2022-02-22T15:14:27Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295937",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:104'></a>
Replying to [@videlec](#comment%3A103):
> Ideally, `TikzPicture` should inherit from `LatexExpr` so that returning a `TikzPicture` from a `_latex_` method would not be a breaking change.

Well, `LatexExpr` already inherits from the Python class `str` which makes it full of methods that, as a user, I don't want to see in the list of methods seen with tab-completion on an object of type `TikzPicture`.

> For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.

Ok, let me think about that again, maybe this Thursday at Bordeaux Sage Thursdays, we can discuss this and converge to choices on how this is done for graphs (`tkz-berge` vs graphviz + dot2tex) and for polytopes (the actual `tikz()` method vs a new `tikz()` or `__tikz__()` method).



---

archive/issue_comments_295938.json:
```json
{
    "body": "<a id='comment:105'></a>\nReplying to [@videlec](#comment%3A103):\n> For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.\n\nThere are four such methods right now:\n\n```\n    def from_dot_string(cls, dotdata, prog='dot'):\n    def from_graph(cls, graph, merge_multiedges=True,\n    def from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,\n    def from_poset(cls, poset, **kwds):\n```\n\nAs you suggest, I can change those taking a graph or a poset sage object into a private method:\n\n```\n    def from_dot_string(cls, dotdata, prog='dot'):\n    def _from_graph(cls, graph, merge_multiedges=True,\n    def _from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,\n    def _from_poset(cls, poset, **kwds):\n```\n\nBut, there is no sage object for a dot string. So, do I keep `from_dot_string` as it is or do you want me to make it private as well?",
    "created_at": "2022-02-22T16:34:02Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295938",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:105'></a>
Replying to [@videlec](#comment%3A103):
> For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.

There are four such methods right now:

```
    def from_dot_string(cls, dotdata, prog='dot'):
    def from_graph(cls, graph, merge_multiedges=True,
    def from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,
    def from_poset(cls, poset, **kwds):
```

As you suggest, I can change those taking a graph or a poset sage object into a private method:

```
    def from_dot_string(cls, dotdata, prog='dot'):
    def _from_graph(cls, graph, merge_multiedges=True,
    def _from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,
    def _from_poset(cls, poset, **kwds):
```

But, there is no sage object for a dot string. So, do I keep `from_dot_string` as it is or do you want me to make it private as well?



---

archive/issue_comments_295939.json:
```json
{
    "body": "<a id='comment:106'></a>\nReplying to [@seblabbe](#comment%3A105):\n> Replying to [@videlec](#comment%3A103):\n> > For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.\n\n> \n> There are four such methods right now:\n> \n> ```\n>     def from_dot_string(cls, dotdata, prog='dot'):\n>     def from_graph(cls, graph, merge_multiedges=True,\n>     def from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,\n>     def from_poset(cls, poset, **kwds):\n> ```\n> \n> As you suggest, I can change those taking a graph or a poset sage object into a private method:\n> \n> ```\n>     def from_dot_string(cls, dotdata, prog='dot'):\n>     def _from_graph(cls, graph, merge_multiedges=True,\n>     def _from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,\n>     def _from_poset(cls, poset, **kwds):\n> ```\n> \n> But, there is no sage object for a dot string. So, do I keep `from_dot_string` as it is or do you want me to make it private as well?\n\nIt should be fine to keep `from_dot_string`.\n\nThe only reason to make the three others private is to avoid that sage users rely on them. They will be changed without notice.",
    "created_at": "2022-02-22T16:40:13Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295939",
    "user": "https://github.com/videlec"
}
```

<a id='comment:106'></a>
Replying to [@seblabbe](#comment%3A105):
> Replying to [@videlec](#comment%3A103):
> > For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.

> 
> There are four such methods right now:
> 
> ```
>     def from_dot_string(cls, dotdata, prog='dot'):
>     def from_graph(cls, graph, merge_multiedges=True,
>     def from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,
>     def from_poset(cls, poset, **kwds):
> ```
> 
> As you suggest, I can change those taking a graph or a poset sage object into a private method:
> 
> ```
>     def from_dot_string(cls, dotdata, prog='dot'):
>     def _from_graph(cls, graph, merge_multiedges=True,
>     def _from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,
>     def _from_poset(cls, poset, **kwds):
> ```
> 
> But, there is no sage object for a dot string. So, do I keep `from_dot_string` as it is or do you want me to make it private as well?

It should be fine to keep `from_dot_string`.

The only reason to make the three others private is to avoid that sage users rely on them. They will be changed without notice.



---

archive/issue_comments_295940.json:
```json
{
    "body": "**Changing commit** from \"[2f4771798e2c4219794d36890babbf65a44f2cfd](https://github.com/sagemath/sagetrac-mirror/commit/2f4771798e2c4219794d36890babbf65a44f2cfd)\" to \"[793fbdeba581155a5f21c2a07ec81f1de6a5e396](https://github.com/sagemath/sagetrac-mirror/commit/793fbdeba581155a5f21c2a07ec81f1de6a5e396)\".",
    "created_at": "2022-02-23T20:31:06Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295940",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2f4771798e2c4219794d36890babbf65a44f2cfd](https://github.com/sagemath/sagetrac-mirror/commit/2f4771798e2c4219794d36890babbf65a44f2cfd)" to "[793fbdeba581155a5f21c2a07ec81f1de6a5e396](https://github.com/sagemath/sagetrac-mirror/commit/793fbdeba581155a5f21c2a07ec81f1de6a5e396)".



---

archive/issue_comments_295941.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/793fbdeba581155a5f21c2a07ec81f1de6a5e396\">793fbde</a></td><td><code>20343: from_graph, from_poset -> _from_graph, _from_poset</code></td></tr></table>\n",
    "created_at": "2022-02-23T20:31:06Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295941",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/793fbdeba581155a5f21c2a07ec81f1de6a5e396">793fbde</a></td><td><code>20343: from_graph, from_poset -> _from_graph, _from_poset</code></td></tr></table>




---

archive/issue_comments_295942.json:
```json
{
    "body": "<a id='comment:108'></a>\nReplying to [@videlec](#comment%3A106):\n> It should be fine to keep `from_dot_string`.\n> \n> The only reason to make the three others private is to avoid that sage users rely on them. They will be changed without notice.\n\nOk, I did that. Needs review.",
    "created_at": "2022-02-23T20:32:40Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295942",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:108'></a>
Replying to [@videlec](#comment%3A106):
> It should be fine to keep `from_dot_string`.
> 
> The only reason to make the three others private is to avoid that sage users rely on them. They will be changed without notice.

Ok, I did that. Needs review.



---

archive/issue_comments_295943.json:
```json
{
    "body": "<a id='comment:9'></a>\nIt would be better not to advertize them in the module docstring\n\n```diff\n- If dot2tex Sage optional package and graphviz are installed, then the following\n- one liner works allowing to create a nice tikzpicture from a graph with\n- vertices and edges placed according to graphviz::\n-\n-    sage: t = TikzPicture._from_graph(g)  # optional: dot2tex # long time (3s)\n-\n```\n\nAnd you can add a sentence explaining the transducer example that comes after.",
    "created_at": "2022-02-24T06:18:31Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295943",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
It would be better not to advertize them in the module docstring

```diff
- If dot2tex Sage optional package and graphviz are installed, then the following
- one liner works allowing to create a nice tikzpicture from a graph with
- vertices and edges placed according to graphviz::
-
-    sage: t = TikzPicture._from_graph(g)  # optional: dot2tex # long time (3s)
-
```

And you can add a sentence explaining the transducer example that comes after.



---

archive/issue_comments_295944.json:
```json
{
    "body": "<a id='comment:0'></a>\nI would also add a sentence somewhere in the module docstring about the fact that tikz is a latex package (called `pgf-tikz` by the way) and a reference to the page https://www.ctan.org/pkg/pgf. You sort of assume that everybody knows tikz which is not a reasonable assumption.",
    "created_at": "2022-02-24T06:22:07Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295944",
    "user": "https://github.com/videlec"
}
```

<a id='comment:0'></a>
I would also add a sentence somewhere in the module docstring about the fact that tikz is a latex package (called `pgf-tikz` by the way) and a reference to the page https://www.ctan.org/pkg/pgf. You sort of assume that everybody knows tikz which is not a reasonable assumption.



---

archive/issue_comments_295945.json:
```json
{
    "body": "**Changing commit** from \"[793fbdeba581155a5f21c2a07ec81f1de6a5e396](https://github.com/sagemath/sagetrac-mirror/commit/793fbdeba581155a5f21c2a07ec81f1de6a5e396)\" to \"[06c8fda7e1b115e1ef35a0ab605ebe24f719efc2](https://github.com/sagemath/sagetrac-mirror/commit/06c8fda7e1b115e1ef35a0ab605ebe24f719efc2)\".",
    "created_at": "2022-02-24T10:07:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295945",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[793fbdeba581155a5f21c2a07ec81f1de6a5e396](https://github.com/sagemath/sagetrac-mirror/commit/793fbdeba581155a5f21c2a07ec81f1de6a5e396)" to "[06c8fda7e1b115e1ef35a0ab605ebe24f719efc2](https://github.com/sagemath/sagetrac-mirror/commit/06c8fda7e1b115e1ef35a0ab605ebe24f719efc2)".



---

archive/issue_comments_295946.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2539054e08f22de5c053559588b63742b38c48b8\">2539054</a></td><td><code>20343:fixing 2 doctests + wrong trailing colons</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ed6a0cb9009fd8b2582bf36f736c6099aee4809\">1ed6a0c</a></td><td><code>20343: change default from pdf2svg to pdftocairo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6111d2ad710fc3c53886778793ba544fe9cdb337\">6111d2a</a></td><td><code>20343: provide log if an error occurs in method png</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21fe0d37a42b8a0b79275976e6136dafac9dbf25\">21fe0d3</a></td><td><code>20343: change default value of usepackage to None</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a424ed5055c89e152483c271f83eef4b11476dc2\">a424ed5</a></td><td><code>20343: use shell=False instead</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9dcd5e7b97264ce2bbf6828e376244c3679831e\">f9dcd5e</a></td><td><code>20343: add doctest showing spaces in filename</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad234af0290795b0b063f77b83a9654e9c89c02c\">ad234af</a></td><td><code>20343: adding missing optional latex tag</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32f5efaa60d835b3d81f0487edb407d19afefeff\">32f5efa</a></td><td><code>20343: using else instead of elif</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dde1186dd2a3728589462fe58cba70d27d9b5a16\">dde1186</a></td><td><code>20343: rename _filename* -> temp_filename*</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06c8fda7e1b115e1ef35a0ab605ebe24f719efc2\">06c8fda</a></td><td><code>20343: from_graph, from_poset -> _from_graph, _from_poset</code></td></tr></table>\n",
    "created_at": "2022-02-24T10:07:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295946",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2539054e08f22de5c053559588b63742b38c48b8">2539054</a></td><td><code>20343:fixing 2 doctests + wrong trailing colons</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ed6a0cb9009fd8b2582bf36f736c6099aee4809">1ed6a0c</a></td><td><code>20343: change default from pdf2svg to pdftocairo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6111d2ad710fc3c53886778793ba544fe9cdb337">6111d2a</a></td><td><code>20343: provide log if an error occurs in method png</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21fe0d37a42b8a0b79275976e6136dafac9dbf25">21fe0d3</a></td><td><code>20343: change default value of usepackage to None</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a424ed5055c89e152483c271f83eef4b11476dc2">a424ed5</a></td><td><code>20343: use shell=False instead</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9dcd5e7b97264ce2bbf6828e376244c3679831e">f9dcd5e</a></td><td><code>20343: add doctest showing spaces in filename</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad234af0290795b0b063f77b83a9654e9c89c02c">ad234af</a></td><td><code>20343: adding missing optional latex tag</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32f5efaa60d835b3d81f0487edb407d19afefeff">32f5efa</a></td><td><code>20343: using else instead of elif</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dde1186dd2a3728589462fe58cba70d27d9b5a16">dde1186</a></td><td><code>20343: rename _filename* -> temp_filename*</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06c8fda7e1b115e1ef35a0ab605ebe24f719efc2">06c8fda</a></td><td><code>20343: from_graph, from_poset -> _from_graph, _from_poset</code></td></tr></table>




---

archive/issue_comments_295947.json:
```json
{
    "body": "<a id='comment:2'></a>\nI rebased the branch on 9.6.beta2. No new commit for now.",
    "created_at": "2022-02-24T10:08:38Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295947",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:2'></a>
I rebased the branch on 9.6.beta2. No new commit for now.



---

archive/issue_comments_295948.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83b367cb93f1ba8a974884669939250f72d2d4f2\">83b367c</a></td><td><code>Removed _from_graph from module doc</code></td></tr></table>\n",
    "created_at": "2022-02-24T10:15:50Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83b367cb93f1ba8a974884669939250f72d2d4f2">83b367c</a></td><td><code>Removed _from_graph from module doc</code></td></tr></table>




---

archive/issue_comments_295949.json:
```json
{
    "body": "**Changing commit** from \"[06c8fda7e1b115e1ef35a0ab605ebe24f719efc2](https://github.com/sagemath/sagetrac-mirror/commit/06c8fda7e1b115e1ef35a0ab605ebe24f719efc2)\" to \"[83b367cb93f1ba8a974884669939250f72d2d4f2](https://github.com/sagemath/sagetrac-mirror/commit/83b367cb93f1ba8a974884669939250f72d2d4f2)\".",
    "created_at": "2022-02-24T10:15:50Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295949",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[06c8fda7e1b115e1ef35a0ab605ebe24f719efc2](https://github.com/sagemath/sagetrac-mirror/commit/06c8fda7e1b115e1ef35a0ab605ebe24f719efc2)" to "[83b367cb93f1ba8a974884669939250f72d2d4f2](https://github.com/sagemath/sagetrac-mirror/commit/83b367cb93f1ba8a974884669939250f72d2d4f2)".



---

archive/issue_comments_295950.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe following reference will not work <code>:mod:\\`sage.misc.latex.py\\`</code> (you need to remove the `.py`).",
    "created_at": "2022-02-24T10:24:30Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295950",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
The following reference will not work <code>:mod:\`sage.misc.latex.py\`</code> (you need to remove the `.py`).



---

archive/issue_comments_295951.json:
```json
{
    "body": "**Changing commit** from \"[83b367cb93f1ba8a974884669939250f72d2d4f2](https://github.com/sagemath/sagetrac-mirror/commit/83b367cb93f1ba8a974884669939250f72d2d4f2)\" to \"[bb314c215cd5797ff979e792882c0e5dcc5086a5](https://github.com/sagemath/sagetrac-mirror/commit/bb314c215cd5797ff979e792882c0e5dcc5086a5)\".",
    "created_at": "2022-02-24T10:30:23Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295951",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[83b367cb93f1ba8a974884669939250f72d2d4f2](https://github.com/sagemath/sagetrac-mirror/commit/83b367cb93f1ba8a974884669939250f72d2d4f2)" to "[bb314c215cd5797ff979e792882c0e5dcc5086a5](https://github.com/sagemath/sagetrac-mirror/commit/bb314c215cd5797ff979e792882c0e5dcc5086a5)".



---

archive/issue_comments_295952.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb314c215cd5797ff979e792882c0e5dcc5086a5\">bb314c2</a></td><td><code>20343: adding info about pgf/tikz + removed acknowledgement since the code has evolved so much that it has nothing to do with sage.misc.latex anymore</code></td></tr></table>\n",
    "created_at": "2022-02-24T10:30:23Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295952",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb314c215cd5797ff979e792882c0e5dcc5086a5">bb314c2</a></td><td><code>20343: adding info about pgf/tikz + removed acknowledgement since the code has evolved so much that it has nothing to do with sage.misc.latex anymore</code></td></tr></table>




---

archive/issue_comments_295953.json:
```json
{
    "body": "**Changing commit** from \"[bb314c215cd5797ff979e792882c0e5dcc5086a5](https://github.com/sagemath/sagetrac-mirror/commit/bb314c215cd5797ff979e792882c0e5dcc5086a5)\" to \"[55649f6924baab86e35045f9a1e8876c385e2fb9](https://github.com/sagemath/sagetrac-mirror/commit/55649f6924baab86e35045f9a1e8876c385e2fb9)\".",
    "created_at": "2022-02-24T10:31:28Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295953",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bb314c215cd5797ff979e792882c0e5dcc5086a5](https://github.com/sagemath/sagetrac-mirror/commit/bb314c215cd5797ff979e792882c0e5dcc5086a5)" to "[55649f6924baab86e35045f9a1e8876c385e2fb9](https://github.com/sagemath/sagetrac-mirror/commit/55649f6924baab86e35045f9a1e8876c385e2fb9)".



---

archive/issue_comments_295954.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55649f6924baab86e35045f9a1e8876c385e2fb9\">55649f6</a></td><td><code>20343: removed a TODO</code></td></tr></table>\n",
    "created_at": "2022-02-24T10:31:28Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295954",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55649f6924baab86e35045f9a1e8876c385e2fb9">55649f6</a></td><td><code>20343: removed a TODO</code></td></tr></table>




---

archive/issue_comments_295955.json:
```json
{
    "body": "<a id='comment:7'></a>\nNeeds review!",
    "created_at": "2022-02-24T10:31:45Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295955",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:7'></a>
Needs review!



---

archive/issue_comments_295956.json:
```json
{
    "body": "<a id='comment:8'></a>\npycodestyle is broken as it does not detect the prefix `r` in front of the string...\n\n```\nsrc/sage/plot/tikzpicture.py:258:34: W605 invalid escape sequence '\\d'\nsrc/sage/plot/tikzpicture.py:259:34: W605 invalid escape sequence '\\e'\n```",
    "created_at": "2022-02-24T14:42:42Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295956",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>
pycodestyle is broken as it does not detect the prefix `r` in front of the string...

```
src/sage/plot/tikzpicture.py:258:34: W605 invalid escape sequence '\d'
src/sage/plot/tikzpicture.py:259:34: W605 invalid escape sequence '\e'
```



---

archive/issue_comments_295957.json:
```json
{
    "body": "<a id='comment:9'></a>\nYour module does not seem to be included in the reference manual. You have to add an entry to `src/doc/en/reference/misc/index.rst`.",
    "created_at": "2022-02-24T14:44:58Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295957",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
Your module does not seem to be included in the reference manual. You have to add an entry to `src/doc/en/reference/misc/index.rst`.



---

archive/issue_events_182692.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-02-24T14:44:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182692"
}
```



---

archive/issue_events_182693.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-02-24T14:44:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182693"
}
```



---

archive/issue_comments_295958.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8f49dc513a9010ade70d3025016ebd5d0a9e002\">f8f49dc</a></td><td><code>20343: fixing few \"\"\" to r\"\"\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6d0a972bd3ec403f2ae1f48043072e5a1eca849\">e6d0a97</a></td><td><code>20343: adding module in doc + further doc improvements</code></td></tr></table>\n",
    "created_at": "2022-02-24T17:49:12Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8f49dc513a9010ade70d3025016ebd5d0a9e002">f8f49dc</a></td><td><code>20343: fixing few """ to r"""</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6d0a972bd3ec403f2ae1f48043072e5a1eca849">e6d0a97</a></td><td><code>20343: adding module in doc + further doc improvements</code></td></tr></table>




---

archive/issue_comments_295959.json:
```json
{
    "body": "**Changing commit** from \"[55649f6924baab86e35045f9a1e8876c385e2fb9](https://github.com/sagemath/sagetrac-mirror/commit/55649f6924baab86e35045f9a1e8876c385e2fb9)\" to \"[e6d0a972bd3ec403f2ae1f48043072e5a1eca849](https://github.com/sagemath/sagetrac-mirror/commit/e6d0a972bd3ec403f2ae1f48043072e5a1eca849)\".",
    "created_at": "2022-02-24T17:49:12Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295959",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[55649f6924baab86e35045f9a1e8876c385e2fb9](https://github.com/sagemath/sagetrac-mirror/commit/55649f6924baab86e35045f9a1e8876c385e2fb9)" to "[e6d0a972bd3ec403f2ae1f48043072e5a1eca849](https://github.com/sagemath/sagetrac-mirror/commit/e6d0a972bd3ec403f2ae1f48043072e5a1eca849)".



---

archive/issue_comments_295960.json:
```json
{
    "body": "<a id='comment:1'></a>\nNeeds review!",
    "created_at": "2022-02-24T17:49:42Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295960",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:1'></a>
Needs review!



---

archive/issue_events_182694.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-02-24T17:49:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182694"
}
```



---

archive/issue_events_182695.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-02-24T17:49:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182695"
}
```



---

archive/issue_comments_295961.json:
```json
{
    "body": "<a id='comment:2'></a>\nI did not notice before but why did you put your module in `sage/plot` rather than `sage/misc` (where all the current latex code is)?",
    "created_at": "2022-02-24T20:49:00Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295961",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'></a>
I did not notice before but why did you put your module in `sage/plot` rather than `sage/misc` (where all the current latex code is)?



---

archive/issue_comments_295962.json:
```json
{
    "body": "<a id='comment:123'></a>\nReplying to [@videlec](#comment%3A122):\n> I did not notice before but why did you put your module in `sage/plot` rather than `sage/misc` (where all the current latex code is)?\n\nThis was suggested in [comment:34](#comment%3A34) by mkoeppe, to which I agree. The goal of the module is about drawing stuff, so it is natural to put it in `sage/plot`.\n\nIt is not true that all latex code is in misc. You also have `graph_latex.py` file in `sage/graphs`.\n\nAlso, to my opinion, `sage/misc/latex.py` is not soooo well-written (I repeat, this is an opinion). It is a module on which it is tough to build on top / reuse. You may want to look at the code which implements `view` to get an example. Who really wants to use this? I think the future will be more active if the features present in that module are re-thought and re-written else where and eventually it gets just replaced. The deprecation of the `have_latex` and friends methods done in #32650 is one of the many steps towards that. The creation of a module to deal with tikzpicture is another step towards that.",
    "created_at": "2022-02-24T21:13:57Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295962",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:123'></a>
Replying to [@videlec](#comment%3A122):
> I did not notice before but why did you put your module in `sage/plot` rather than `sage/misc` (where all the current latex code is)?

This was suggested in [comment:34](#comment%3A34) by mkoeppe, to which I agree. The goal of the module is about drawing stuff, so it is natural to put it in `sage/plot`.

It is not true that all latex code is in misc. You also have `graph_latex.py` file in `sage/graphs`.

Also, to my opinion, `sage/misc/latex.py` is not soooo well-written (I repeat, this is an opinion). It is a module on which it is tough to build on top / reuse. You may want to look at the code which implements `view` to get an example. Who really wants to use this? I think the future will be more active if the features present in that module are re-thought and re-written else where and eventually it gets just replaced. The deprecation of the `have_latex` and friends methods done in #32650 is one of the many steps towards that. The creation of a module to deal with tikzpicture is another step towards that.



---

archive/issue_comments_295963.json:
```json
{
    "body": "<a id='comment:124'></a>\nReplying to [@seblabbe](#comment%3A123):\n> This was suggested in [comment:34](#comment%3A34) by mkoeppe, to which I agree.\n\nNot sure if I still agree with myself ;)",
    "created_at": "2022-02-24T21:44:48Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295963",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:124'></a>
Replying to [@seblabbe](#comment%3A123):
> This was suggested in [comment:34](#comment%3A34) by mkoeppe, to which I agree.

Not sure if I still agree with myself ;)



---

archive/issue_comments_295964.json:
```json
{
    "body": "<a id='comment:5'></a>\nIt might be true that `sage.misc.latex` is a mess. But given that\n1. `tikzpicture.py` shares some functionalities with `sage.misc.latex` (including code duplication)\n2. `sage.misc.latex` is widely used\n3. you claim that `StandaloneTex`/`TikzPicture` is part of the future of `sage.misc.latex`\nI would like to\n1. have an idea of what is the future of `sage.misc.latex` (you said that a *step forward* but there is no destination)\n2. have the tools that will replace `sage.misc.latex` close to it in the sage source code or at the very least a mention of them in its documentation\n\nWhat I want to avoid is that this ticket only adds a module `n+1` to sagemath which does a small variation of module `1`, module `2` and module `n` independently of all of them.",
    "created_at": "2022-02-25T09:09:42Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295964",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>
It might be true that `sage.misc.latex` is a mess. But given that
1. `tikzpicture.py` shares some functionalities with `sage.misc.latex` (including code duplication)
2. `sage.misc.latex` is widely used
3. you claim that `StandaloneTex`/`TikzPicture` is part of the future of `sage.misc.latex`
I would like to
1. have an idea of what is the future of `sage.misc.latex` (you said that a *step forward* but there is no destination)
2. have the tools that will replace `sage.misc.latex` close to it in the sage source code or at the very least a mention of them in its documentation

What I want to avoid is that this ticket only adds a module `n+1` to sagemath which does a small variation of module `1`, module `2` and module `n` independently of all of them.



---

archive/issue_comments_295965.json:
```json
{
    "body": "<a id='comment:6'></a>\nOk, let me do more changes (next week).",
    "created_at": "2022-02-25T17:04:52Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295965",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:6'></a>
Ok, let me do more changes (next week).



---

archive/issue_events_182696.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-02-25T17:04:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182696"
}
```



---

archive/issue_events_182697.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-02-25T17:04:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182697"
}
```



---

archive/issue_comments_295966.json:
```json
{
    "body": "**Changing commit** from \"[e6d0a972bd3ec403f2ae1f48043072e5a1eca849](https://github.com/sagemath/sagetrac-mirror/commit/e6d0a972bd3ec403f2ae1f48043072e5a1eca849)\" to \"[ba46d5125b59988ca8690f55c62a45408374597f](https://github.com/sagemath/sagetrac-mirror/commit/ba46d5125b59988ca8690f55c62a45408374597f)\".",
    "created_at": "2022-03-04T17:10:47Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295966",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e6d0a972bd3ec403f2ae1f48043072e5a1eca849](https://github.com/sagemath/sagetrac-mirror/commit/e6d0a972bd3ec403f2ae1f48043072e5a1eca849)" to "[ba46d5125b59988ca8690f55c62a45408374597f](https://github.com/sagemath/sagetrac-mirror/commit/ba46d5125b59988ca8690f55c62a45408374597f)".



---

archive/issue_comments_295967.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92e844364afbcecd88aba752b96ef38ebb02ea30\">92e8443</a></td><td><code>20343: mv plot/tikzpicture.py -> misc/latex_standalone.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a0903273b3bcb03086e9d55ad4e238674ebd978\">8a09032</a></td><td><code>20343: mv plot/tikzpicture.py -> misc/latex_standalone.py (in documentation index.rst)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58e7acdc1e7df92222c3e89013be9d1e79c23466\">58e7acd</a></td><td><code>20343: plot.tikzpicture -> misc.latex_standalone</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d15ce29456f94f28913233ec782f0b5bf09300be\">d15ce29</a></td><td><code>20343: StandaloneTex -> Standalone</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba46d5125b59988ca8690f55c62a45408374597f\">ba46d51</a></td><td><code>20343: improved module doc + enhance the Standalone module</code></td></tr></table>\n",
    "created_at": "2022-03-04T17:10:47Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295967",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92e844364afbcecd88aba752b96ef38ebb02ea30">92e8443</a></td><td><code>20343: mv plot/tikzpicture.py -> misc/latex_standalone.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a0903273b3bcb03086e9d55ad4e238674ebd978">8a09032</a></td><td><code>20343: mv plot/tikzpicture.py -> misc/latex_standalone.py (in documentation index.rst)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58e7acdc1e7df92222c3e89013be9d1e79c23466">58e7acd</a></td><td><code>20343: plot.tikzpicture -> misc.latex_standalone</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d15ce29456f94f28913233ec782f0b5bf09300be">d15ce29</a></td><td><code>20343: StandaloneTex -> Standalone</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba46d5125b59988ca8690f55c62a45408374597f">ba46d51</a></td><td><code>20343: improved module doc + enhance the Standalone module</code></td></tr></table>




---

archive/issue_comments_295968.json:
```json
{
    "body": "**Changing commit** from \"[ba46d5125b59988ca8690f55c62a45408374597f](https://github.com/sagemath/sagetrac-mirror/commit/ba46d5125b59988ca8690f55c62a45408374597f)\" to \"[fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4](https://github.com/sagemath/sagetrac-mirror/commit/fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4)\".",
    "created_at": "2022-03-04T18:21:15Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295968",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ba46d5125b59988ca8690f55c62a45408374597f](https://github.com/sagemath/sagetrac-mirror/commit/ba46d5125b59988ca8690f55c62a45408374597f)" to "[fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4](https://github.com/sagemath/sagetrac-mirror/commit/fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4)".



---

archive/issue_comments_295969.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4\">fb5c4f5</a></td><td><code>20343: fix pdftocairo feature import</code></td></tr></table>\n",
    "created_at": "2022-03-04T18:21:15Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295969",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4">fb5c4f5</a></td><td><code>20343: fix pdftocairo feature import</code></td></tr></table>




---

archive/issue_comments_295970.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4f4f426e4eb82df1ea2f96305ee14248b3d136b\">d4f4f42</a></td><td><code>20343: improved class and module doc</code></td></tr></table>\n",
    "created_at": "2022-03-10T11:12:10Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295970",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4f4f426e4eb82df1ea2f96305ee14248b3d136b">d4f4f42</a></td><td><code>20343: improved class and module doc</code></td></tr></table>




---

archive/issue_comments_295971.json:
```json
{
    "body": "**Changing commit** from \"[fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4](https://github.com/sagemath/sagetrac-mirror/commit/fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4)\" to \"[d4f4f426e4eb82df1ea2f96305ee14248b3d136b](https://github.com/sagemath/sagetrac-mirror/commit/d4f4f426e4eb82df1ea2f96305ee14248b3d136b)\".",
    "created_at": "2022-03-10T11:12:10Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4](https://github.com/sagemath/sagetrac-mirror/commit/fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4)" to "[d4f4f426e4eb82df1ea2f96305ee14248b3d136b](https://github.com/sagemath/sagetrac-mirror/commit/d4f4f426e4eb82df1ea2f96305ee14248b3d136b)".



---

archive/issue_events_182698.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-03-10T11:13:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182698"
}
```



---

archive/issue_events_182699.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-03-10T11:13:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182699"
}
```



---

archive/issue_comments_295972.json:
```json
{
    "body": "<a id='comment:0'></a>\nGave more importance to the `Standalone` class. Updated and improved the documentation.\n\nNeeds review!",
    "created_at": "2022-03-10T11:13:37Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295972",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:0'></a>
Gave more importance to the `Standalone` class. Updated and improved the documentation.

Needs review!



---

archive/issue_comments_295973.json:
```json
{
    "body": "**Changing branch** from \"[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)\" to \"[u/caruso/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/20343)\".",
    "created_at": "2022-03-17T10:19:31Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295973",
    "user": "https://github.com/xcaruso"
}
```

**Changing branch** from "[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)" to "[u/caruso/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/20343)".



---

archive/issue_comments_295974.json:
```json
{
    "body": "**Changing commit** from \"[d4f4f426e4eb82df1ea2f96305ee14248b3d136b](https://github.com/sagemath/sagetrac-mirror/commit/d4f4f426e4eb82df1ea2f96305ee14248b3d136b)\" to \"[4e4b4a4a89c405e245b77bcb405b5ec9ab713627](https://github.com/sagemath/sagetrac-mirror/commit/4e4b4a4a89c405e245b77bcb405b5ec9ab713627)\".",
    "created_at": "2022-03-17T16:48:00Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295974",
    "user": "https://github.com/seblabbe"
}
```

**Changing commit** from "[d4f4f426e4eb82df1ea2f96305ee14248b3d136b](https://github.com/sagemath/sagetrac-mirror/commit/d4f4f426e4eb82df1ea2f96305ee14248b3d136b)" to "[4e4b4a4a89c405e245b77bcb405b5ec9ab713627](https://github.com/sagemath/sagetrac-mirror/commit/4e4b4a4a89c405e245b77bcb405b5ec9ab713627)".



---

archive/issue_comments_295975.json:
```json
{
    "body": "**Changing branch** from \"[u/caruso/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/20343)\" to \"[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)\".",
    "created_at": "2022-03-17T16:48:00Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295975",
    "user": "https://github.com/seblabbe"
}
```

**Changing branch** from "[u/caruso/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/20343)" to "[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)".



---

archive/issue_comments_295976.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9173d51a8603951d2bd78b0216ef28ab8750b26e\">9173d51</a></td><td><code>typos</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82ab15da7f413bb611bf2e3ab7239e108d04a5bf\">82ab15d</a></td><td><code>20343: adding experimental decorator to from_graph methods and removing the underscore prefix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddf2c3973b519c032752ca63f92c279b3f4f19f5\">ddf2c39</a></td><td><code>20343: using check call to open the viewer</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa55a01f3cae17f06eb6a1f221672f49f8f05fd5\">fa55a01</a></td><td><code>20343: adding stackoverflow url</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e4b4a4a89c405e245b77bcb405b5ec9ab713627\">4e4b4a4</a></td><td><code>20343: fixing a warning during docbuild</code></td></tr></table>\n",
    "created_at": "2022-03-17T16:48:00Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295976",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9173d51a8603951d2bd78b0216ef28ab8750b26e">9173d51</a></td><td><code>typos</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82ab15da7f413bb611bf2e3ab7239e108d04a5bf">82ab15d</a></td><td><code>20343: adding experimental decorator to from_graph methods and removing the underscore prefix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddf2c3973b519c032752ca63f92c279b3f4f19f5">ddf2c39</a></td><td><code>20343: using check call to open the viewer</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa55a01f3cae17f06eb6a1f221672f49f8f05fd5">fa55a01</a></td><td><code>20343: adding stackoverflow url</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e4b4a4a89c405e245b77bcb405b5ec9ab713627">4e4b4a4</a></td><td><code>20343: fixing a warning during docbuild</code></td></tr></table>




---

archive/issue_comments_295977.json:
```json
{
    "body": "<a id='comment:3'></a>\nNeeds review!",
    "created_at": "2022-03-17T16:48:35Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295977",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:3'></a>
Needs review!



---

archive/issue_comments_295978.json:
```json
{
    "body": "<a id='comment:4'></a>\n\n```\n+Loading few latex packages::\n```\n-> \"a\" few",
    "created_at": "2022-03-17T17:13:51Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295978",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>

```
+Loading few latex packages::
```
-> "a" few



---

archive/issue_comments_295979.json:
```json
{
    "body": "<a id='comment:5'></a>\n\n```\n+#*****************************************************************************\n+#       Copyright (C) 2015-2022 S\u00e9bastien Labb\u00e9 <slabqc@gmail.com>\n+#\n+#  Distributed under the terms of the GNU General Public License version 2 (GPLv2)\n+#\n+#  The full text of the GPLv2 is available at:\n+#\n+#                  http://www.gnu.org/licenses/\n```\nThis is not our standard license header; are you sure you want to mark it as \"v2 only\"?\nOther files say \"Distributed under the terms of the GNU General Public License (GPL); either version 2 of the License, or (at your option) any later version.\"",
    "created_at": "2022-03-17T17:19:20Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295979",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>

```
+#*****************************************************************************
+#       Copyright (C) 2015-2022 Sébastien Labbé <slabqc@gmail.com>
+#
+#  Distributed under the terms of the GNU General Public License version 2 (GPLv2)
+#
+#  The full text of the GPLv2 is available at:
+#
+#                  http://www.gnu.org/licenses/
```
This is not our standard license header; are you sure you want to mark it as "v2 only"?
Other files say "Distributed under the terms of the GNU General Public License (GPL); either version 2 of the License, or (at your option) any later version."



---

archive/issue_comments_295980.json:
```json
{
    "body": "<a id='comment:6'></a>\n\n```\n+Adding a border in the options avoids croping the vertices of a graph::\n```\n-> cropping",
    "created_at": "2022-03-17T17:20:07Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295980",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>

```
+Adding a border in the options avoids croping the vertices of a graph::
```
-> cropping



---

archive/issue_comments_295981.json:
```json
{
    "body": "<a id='comment:7'></a>\n\n```\n+        sage: t = TikzPicture(s, standalone_config=[\"border=4mm\"], usepackage=['tkz-graph']) # optional latex\n+        sage: _ = t.pdf(view=False)             # long time (2s) # optional latex\n```\nThis should also be marked `# optional - latex_package_tkz_graph`\n(occurs several times)",
    "created_at": "2022-03-17T17:25:00Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295981",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>

```
+        sage: t = TikzPicture(s, standalone_config=["border=4mm"], usepackage=['tkz-graph']) # optional latex
+        sage: _ = t.pdf(view=False)             # long time (2s) # optional latex
```
This should also be marked `# optional - latex_package_tkz_graph`
(occurs several times)



---

archive/issue_comments_295982.json:
```json
{
    "body": "<a id='comment:8'></a>\n\n```\n+            sage: dotdata = G.graphviz_string()\n+            sage: tikz = TikzPicture.from_dot_string(dotdata) # optional dot2tex # long time (3s)\n```\nthis should probably also be marked as `# optional - graphviz`",
    "created_at": "2022-03-17T17:36:58Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295982",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>

```
+            sage: dotdata = G.graphviz_string()
+            sage: tikz = TikzPicture.from_dot_string(dotdata) # optional dot2tex # long time (3s)
```
this should probably also be marked as `# optional - graphviz`



---

archive/issue_comments_295983.json:
```json
{
    "body": "<a id='comment:9'></a>\nAlso, could you please mark the doctests using graphs as `# optional - sage.graphs` and the doctests using posets as `# optional - sage.combinat`?",
    "created_at": "2022-03-17T17:39:43Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295983",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Also, could you please mark the doctests using graphs as `# optional - sage.graphs` and the doctests using posets as `# optional - sage.combinat`?



---

archive/issue_comments_295984.json:
```json
{
    "body": "<a id='comment:0'></a>\nOverall looking great!",
    "created_at": "2022-03-17T17:43:08Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295984",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Overall looking great!



---

archive/issue_comments_295985.json:
```json
{
    "body": "<a id='comment:1'></a>\nThanks for your review! I will improve the code accordingly.",
    "created_at": "2022-03-19T09:29:27Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295985",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:1'></a>
Thanks for your review! I will improve the code accordingly.



---

archive/issue_comments_295986.json:
```json
{
    "body": "**Changing commit** from \"[4e4b4a4a89c405e245b77bcb405b5ec9ab713627](https://github.com/sagemath/sagetrac-mirror/commit/4e4b4a4a89c405e245b77bcb405b5ec9ab713627)\" to \"[3ed5d51a47ae8c3dd3c8090f33e73422b63d393f](https://github.com/sagemath/sagetrac-mirror/commit/3ed5d51a47ae8c3dd3c8090f33e73422b63d393f)\".",
    "created_at": "2022-03-19T09:37:34Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295986",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4e4b4a4a89c405e245b77bcb405b5ec9ab713627](https://github.com/sagemath/sagetrac-mirror/commit/4e4b4a4a89c405e245b77bcb405b5ec9ab713627)" to "[3ed5d51a47ae8c3dd3c8090f33e73422b63d393f](https://github.com/sagemath/sagetrac-mirror/commit/3ed5d51a47ae8c3dd3c8090f33e73422b63d393f)".



---

archive/issue_comments_295987.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cf9af5e610998a1cc5b1e2ea19ac8c268aecee5\">7cf9af5</a></td><td><code>20343: fixing licence and typos</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ed5d51a47ae8c3dd3c8090f33e73422b63d393f\">3ed5d51</a></td><td><code>20343: adding an example showing usetikzlibrary in module doc</code></td></tr></table>\n",
    "created_at": "2022-03-19T09:37:34Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295987",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cf9af5e610998a1cc5b1e2ea19ac8c268aecee5">7cf9af5</a></td><td><code>20343: fixing licence and typos</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ed5d51a47ae8c3dd3c8090f33e73422b63d393f">3ed5d51</a></td><td><code>20343: adding an example showing usetikzlibrary in module doc</code></td></tr></table>




---

archive/issue_comments_295988.json:
```json
{
    "body": "<a id='comment:3'></a>\nIt remains to fix the doctests tags. I will do this later.",
    "created_at": "2022-03-19T09:38:37Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295988",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:3'></a>
It remains to fix the doctests tags. I will do this later.



---

archive/issue_comments_295989.json:
```json
{
    "body": "<a id='comment:144'></a>\nReplying to [@mkoeppe](#comment%3A137):\n> \n> ```\n> +        sage: t = TikzPicture(s, standalone_config=[\"border=4mm\"], usepackage=['tkz-graph']) # optional latex\n> +        sage: _ = t.pdf(view=False)             # long time (2s) # optional latex\n> ```\n> This should also be marked `# optional - latex_package_tkz_graph`\n> (occurs several times)\n\nOnly the line `t.pdf()` really needs the `latex_package_tkz_graph` optional tag. So I added this tag where necessary. Creating a Python string containing `'\\usetikzlibrary{tkz-graph}'` by itself does not depend on the latex package. So, I did not added the optional tag everywhere.",
    "created_at": "2022-03-21T13:28:29Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295989",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:144'></a>
Replying to [@mkoeppe](#comment%3A137):
> 
> ```
> +        sage: t = TikzPicture(s, standalone_config=["border=4mm"], usepackage=['tkz-graph']) # optional latex
> +        sage: _ = t.pdf(view=False)             # long time (2s) # optional latex
> ```
> This should also be marked `# optional - latex_package_tkz_graph`
> (occurs several times)

Only the line `t.pdf()` really needs the `latex_package_tkz_graph` optional tag. So I added this tag where necessary. Creating a Python string containing `'\usetikzlibrary{tkz-graph}'` by itself does not depend on the latex package. So, I did not added the optional tag everywhere.



---

archive/issue_comments_295990.json:
```json
{
    "body": "<a id='comment:145'></a>\nReplying to [@mkoeppe](#comment%3A138):\n> \n> ```\n> +            sage: dotdata = G.graphviz_string()\n> +            sage: tikz = TikzPicture.from_dot_string(dotdata) # optional dot2tex # long time (3s)\n> ```\n> this should probably also be marked as `# optional - graphviz`\n\nAt some point in time, it was changed that the installation of `dot2tex` fails if `graphviz` is not installed. But, whatever, maybe it is better to add `graphviz` optional tag as well, which I did (commits to be pushed soonafter).",
    "created_at": "2022-03-21T13:30:02Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295990",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:145'></a>
Replying to [@mkoeppe](#comment%3A138):
> 
> ```
> +            sage: dotdata = G.graphviz_string()
> +            sage: tikz = TikzPicture.from_dot_string(dotdata) # optional dot2tex # long time (3s)
> ```
> this should probably also be marked as `# optional - graphviz`

At some point in time, it was changed that the installation of `dot2tex` fails if `graphviz` is not installed. But, whatever, maybe it is better to add `graphviz` optional tag as well, which I did (commits to be pushed soonafter).



---

archive/issue_comments_295991.json:
```json
{
    "body": "<a id='comment:146'></a>\nReplying to [@mkoeppe](#comment%3A139):\n> Also, could you please mark the doctests using graphs as `# optional - sage.graphs` and the doctests using posets as `# optional - sage.combinat`?\n\nOk, done.",
    "created_at": "2022-03-21T13:31:01Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295991",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:146'></a>
Replying to [@mkoeppe](#comment%3A139):
> Also, could you please mark the doctests using graphs as `# optional - sage.graphs` and the doctests using posets as `# optional - sage.combinat`?

Ok, done.



---

archive/issue_comments_295992.json:
```json
{
    "body": "**Changing commit** from \"[3ed5d51a47ae8c3dd3c8090f33e73422b63d393f](https://github.com/sagemath/sagetrac-mirror/commit/3ed5d51a47ae8c3dd3c8090f33e73422b63d393f)\" to \"[36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216](https://github.com/sagemath/sagetrac-mirror/commit/36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216)\".",
    "created_at": "2022-03-21T13:31:16Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295992",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3ed5d51a47ae8c3dd3c8090f33e73422b63d393f](https://github.com/sagemath/sagetrac-mirror/commit/3ed5d51a47ae8c3dd3c8090f33e73422b63d393f)" to "[36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216](https://github.com/sagemath/sagetrac-mirror/commit/36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216)".



---

archive/issue_comments_295993.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f39c06f9b61e26870ae24328509465b49fcd98a\">5f39c06</a></td><td><code>20343: adding latex and latex_package_tkz_graph tags where necessary</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d981b6fd10a15c6276d77c336391c40ffa6119e\">8d981b6</a></td><td><code>20343:adding missing graphviz optional tag</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216\">36c3ebb</a></td><td><code>20343: adding tag sage.graphs, sage.combinat, graphviz at some places</code></td></tr></table>\n",
    "created_at": "2022-03-21T13:31:16Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295993",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f39c06f9b61e26870ae24328509465b49fcd98a">5f39c06</a></td><td><code>20343: adding latex and latex_package_tkz_graph tags where necessary</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d981b6fd10a15c6276d77c336391c40ffa6119e">8d981b6</a></td><td><code>20343:adding missing graphviz optional tag</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216">36c3ebb</a></td><td><code>20343: adding tag sage.graphs, sage.combinat, graphviz at some places</code></td></tr></table>




---

archive/issue_comments_295994.json:
```json
{
    "body": "<a id='comment:148'></a>\nReplying to [@mkoeppe](#comment%3A139):\n> Also, could you please mark the doctests using graphs as `# optional - sage.graphs` and the doctests using posets as `# optional - sage.combinat`?\n\nAlso I could make the doctests less dependent on graphs stuff.",
    "created_at": "2022-03-21T13:32:31Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295994",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:148'></a>
Replying to [@mkoeppe](#comment%3A139):
> Also, could you please mark the doctests using graphs as `# optional - sage.graphs` and the doctests using posets as `# optional - sage.combinat`?

Also I could make the doctests less dependent on graphs stuff.



---

archive/issue_comments_295995.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/936e82d8cdc921e853fc9e5cbc2cda030fd782bf\">936e82d</a></td><td><code>20343: updating example in docstrings of Standalone class to use Standalone class instead of inherited class TikzPicture</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e90292c522f3cc7449599a892ae5827307f68bed\">e90292c</a></td><td><code>20343: adding methods to append to the lists of options</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a\">bc9186f</a></td><td><code>20343: add a deprecation message for include_header -> content_only</code></td></tr></table>\n",
    "created_at": "2022-03-21T14:48:38Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295995",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/936e82d8cdc921e853fc9e5cbc2cda030fd782bf">936e82d</a></td><td><code>20343: updating example in docstrings of Standalone class to use Standalone class instead of inherited class TikzPicture</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e90292c522f3cc7449599a892ae5827307f68bed">e90292c</a></td><td><code>20343: adding methods to append to the lists of options</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a">bc9186f</a></td><td><code>20343: add a deprecation message for include_header -> content_only</code></td></tr></table>




---

archive/issue_comments_295996.json:
```json
{
    "body": "**Changing commit** from \"[36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216](https://github.com/sagemath/sagetrac-mirror/commit/36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216)\" to \"[bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a](https://github.com/sagemath/sagetrac-mirror/commit/bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a)\".",
    "created_at": "2022-03-21T14:48:38Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295996",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216](https://github.com/sagemath/sagetrac-mirror/commit/36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216)" to "[bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a](https://github.com/sagemath/sagetrac-mirror/commit/bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a)".



---

archive/issue_comments_295997.json:
```json
{
    "body": "<a id='comment:0'></a>\nNeeds review!",
    "created_at": "2022-03-21T14:53:22Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295997",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:0'></a>
Needs review!



---

archive/issue_comments_295998.json:
```json
{
    "body": "**Changing reviewer** from \"Jean-Philippe Labb\u00e9, Xavier Caruso, Vincent Delecroix\" to \"Jean-Philippe Labb\u00e9, Xavier Caruso, Vincent Delecroix, Matthias Koeppe\".",
    "created_at": "2022-03-21T17:50:44Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295998",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "Jean-Philippe Labbé, Xavier Caruso, Vincent Delecroix" to "Jean-Philippe Labbé, Xavier Caruso, Vincent Delecroix, Matthias Koeppe".



---

archive/issue_comments_295999.json:
```json
{
    "body": "<a id='comment:1'></a>\nLooking great.\n\nThese lines and what depends on them should be marked `# optional - sage.symbolic` (for #32432, #32601)\n\n```\n+            sage: f(x) = -1 / x\n+            sage: g(x) = 1 / (x + 1)\n```\n\nOther than that, from my side it's positive review.",
    "created_at": "2022-03-21T17:50:44Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-295999",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Looking great.

These lines and what depends on them should be marked `# optional - sage.symbolic` (for #32432, #32601)

```
+            sage: f(x) = -1 / x
+            sage: g(x) = 1 / (x + 1)
```

Other than that, from my side it's positive review.



---

archive/issue_comments_296000.json:
```json
{
    "body": "<a id='comment:152'></a>\nReplying to [@mkoeppe](#comment%3A151):\n> These lines and what depends on them should be marked `# optional - sage.symbolic` (for #32432, #32601)\n> \n> ```\n> +            sage: f(x) = -1 / x\n> +            sage: g(x) = 1 / (x + 1)\n> ```\n> \n> Other than that, from my side it's positive review.\n\nAlternatively, use lambda functions instead of symbolic ones:\n\n```diff\n-            sage: f(x) = -1 / x\n-            sage: g(x) = 1 / (x + 1)\n+            sage: f = lambda x: -1 / x\n+            sage: g = lambda x: 1 / (x + 1)\n```",
    "created_at": "2022-03-21T22:40:18Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296000",
    "user": "https://github.com/slel"
}
```

<a id='comment:152'></a>
Replying to [@mkoeppe](#comment%3A151):
> These lines and what depends on them should be marked `# optional - sage.symbolic` (for #32432, #32601)
> 
> ```
> +            sage: f(x) = -1 / x
> +            sage: g(x) = 1 / (x + 1)
> ```
> 
> Other than that, from my side it's positive review.

Alternatively, use lambda functions instead of symbolic ones:

```diff
-            sage: f(x) = -1 / x
-            sage: g(x) = 1 / (x + 1)
+            sage: f = lambda x: -1 / x
+            sage: g = lambda x: 1 / (x + 1)
```



---

archive/issue_comments_296001.json:
```json
{
    "body": "<a id='comment:3'></a>\nNo, they wouldn't show up well in the plots.",
    "created_at": "2022-03-21T22:42:19Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296001",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
No, they wouldn't show up well in the plots.



---

archive/issue_comments_296002.json:
```json
{
    "body": "<a id='comment:4'></a>\nGreat! I think it is time to give a positive review to this ticket!",
    "created_at": "2022-03-22T15:29:38Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296002",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:4'></a>
Great! I think it is time to give a positive review to this ticket!



---

archive/issue_events_182700.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-03-22T15:29:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182700"
}
```



---

archive/issue_events_182701.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-03-22T15:29:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182701"
}
```



---

archive/issue_comments_296003.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360\">5c9b41c</a></td><td><code>20343: adding doctest tag sage.symbolic</code></td></tr></table>\n",
    "created_at": "2022-03-22T19:31:08Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296003",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360">5c9b41c</a></td><td><code>20343: adding doctest tag sage.symbolic</code></td></tr></table>




---

archive/issue_comments_296004.json:
```json
{
    "body": "**Changing commit** from \"[bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a](https://github.com/sagemath/sagetrac-mirror/commit/bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a)\" to \"[5c9b41c96e4213242fee4af98b934914fb4d2360](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)\".",
    "created_at": "2022-03-22T19:31:08Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296004",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a](https://github.com/sagemath/sagetrac-mirror/commit/bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a)" to "[5c9b41c96e4213242fee4af98b934914fb4d2360](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)".



---

archive/issue_events_182702.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2022-03-22T19:31:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182702"
}
```



---

archive/issue_events_182703.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2022-03-22T19:31:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182703"
}
```



---

archive/issue_events_182704.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-03-22T19:32:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "rename": {
        "from": "Adding sage/plot/tikzpicture.py",
        "to": "Adding sage/misc/latex_standalone.py + class TikzPicture"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182704"
}
```



---

archive/issue_comments_296005.json:
```json
{
    "body": "<a id='comment:157'></a>\nReplying to [@xcaruso](#comment%3A154):\n> Great! I think it is time to give a positive review to this ticket!\n\nI added the doctests tags `sage.symbolic` to answer the latest comment. Needs review again. Sorry.\n\nI also updated the title of the ticket.",
    "created_at": "2022-03-22T19:33:51Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296005",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:157'></a>
Replying to [@xcaruso](#comment%3A154):
> Great! I think it is time to give a positive review to this ticket!

I added the doctests tags `sage.symbolic` to answer the latest comment. Needs review again. Sorry.

I also updated the title of the ticket.



---

archive/issue_comments_296006.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n More examples:\n \n ```\n-sage: from sage.plot.tikzpicture import TikzPicture\n+sage: from sage.misc.latex_standalone import TikzPicture\n sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]\n sage: P = Polyhedron(vertices=V).polar()\n sage: s = P.projection().tikz([674,108,-731],112)\n``````\n",
    "created_at": "2022-03-22T19:38:35Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296006",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 More examples:
 
 ```
-sage: from sage.plot.tikzpicture import TikzPicture
+sage: from sage.misc.latex_standalone import TikzPicture
 sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]
 sage: P = Polyhedron(vertices=V).polar()
 sage: s = P.projection().tikz([674,108,-731],112)
``````




---

archive/issue_comments_296007.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state and it is mature enough to go into SageMath now.\n \n-Here is a demo inside a Jupyter notebook:\n+Here is a demo inside a Jupyter notebook (notice that the import line was since changed to `from sage.misc.latex_standalone import TikzPicture`):\n \n <img src=\"https://github.com/sagemath/sage/files/ticket20343/tikz-jupyter-demo.png\" width=width=600>\n \n``````\n",
    "created_at": "2022-03-22T19:45:48Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296007",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state and it is mature enough to go into SageMath now.
 
-Here is a demo inside a Jupyter notebook:
+Here is a demo inside a Jupyter notebook (notice that the import line was since changed to `from sage.misc.latex_standalone import TikzPicture`):
 
 <img src="https://github.com/sagemath/sage/files/ticket20343/tikz-jupyter-demo.png" width=width=600>
 
``````




---

archive/issue_comments_296008.json:
```json
{
    "body": "<a id='comment:0'></a>\nPatchbot is green. We can change the status to positive review.\n\nBut, maybe before, we could check if all tests pass on a machine with no latex installed, because Volker is using such a computer to test tickets, see [comment:85](#comment%3A85). Do someone has a machine with no latex? Or is there an easy way to mimic its absence?",
    "created_at": "2022-03-23T12:47:18Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296008",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:0'></a>
Patchbot is green. We can change the status to positive review.

But, maybe before, we could check if all tests pass on a machine with no latex installed, because Volker is using such a computer to test tickets, see [comment:85](#comment%3A85). Do someone has a machine with no latex? Or is there an easy way to mimic its absence?



---

archive/issue_comments_296009.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -100,5 +100,13 @@\n ```\n \n An example of usage of this module can be found at this url:\n-https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n-associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics at http://dx.doi.org/10.3934/jmd.2021017.\n+\n+- https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n+\n+associated to the preprint\n+\n+- https://arxiv.org/abs/1906.01104\n+\n+published in Journal of Modern Dynamics at\n+\n+- http://dx.doi.org/10.3934/jmd.2021017\n``````\n",
    "created_at": "2022-03-23T15:11:47Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296009",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -100,5 +100,13 @@
 ```
 
 An example of usage of this module can be found at this url:
-https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb
-associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics at http://dx.doi.org/10.3934/jmd.2021017.
+
+- https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb
+
+associated to the preprint
+
+- https://arxiv.org/abs/1906.01104
+
+published in Journal of Modern Dynamics at
+
+- http://dx.doi.org/10.3934/jmd.2021017
``````




---

archive/issue_events_182705.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-03-23T15:11:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "rename": {
        "from": "Adding sage/misc/latex_standalone.py + class TikzPicture",
        "to": "Add file `sage/misc/latex_standalone.py` and class `TikzPicture`"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182705"
}
```



---

archive/issue_comments_296010.json:
```json
{
    "body": "<a id='comment:2'></a>\nThere must be a way to use tox for that...",
    "created_at": "2022-03-23T16:27:12Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296010",
    "user": "https://github.com/slel"
}
```

<a id='comment:2'></a>
There must be a way to use tox for that...



---

archive/issue_comments_296011.json:
```json
{
    "body": "<a id='comment:3'></a>\nI found a computer with no latex and no imagemagick:\n\n```\n$ pdflatex -v\n\nLa commande \u00ab pdflatex \u00bb n'a pas \u00e9t\u00e9 trouv\u00e9e, mais peut \u00eatre install\u00e9e avec :\n\nsudo apt install texlive-latex-base\n```\n\n```\n$ lualatex -v\n\nLa commande \u00ab lualatex \u00bb n'a pas \u00e9t\u00e9 trouv\u00e9e, mais peut \u00eatre install\u00e9e avec :\n\nsudo apt install texlive-latex-base\n```\n\n```\n$ convert -v\n\nLa commande \u00ab convert \u00bb n'a pas \u00e9t\u00e9 trouv\u00e9e, mais peut \u00eatre install\u00e9e avec :\n\nsudo apt install graphicsmagick-imagemagick-compat  # version 1.4+really1.3.35-1, or\nsudo apt install imagemagick-6.q16                  # version 8:6.9.10.23+dfsg-2.1ubuntu11.4\nsudo apt install imagemagick-6.q16hdri              # version 8:6.9.10.23+dfsg-2.1ubuntu11.4\n```\non which I installed sage:\n\n```\n$ ./sage -version\nSageMath version 9.6.beta5, Release Date: 2022-03-12\n```\n\non which I merged this ticket, I confirm the doctests work:\n\n```\n./sage -t src/sage/misc/latex_standalone.py \nno stored timings available\nRunning doctests with ID 2022-03-24-11-08-32-82df3068.\nGit branch: 20343\nUsing --optional=debian,pip,sage,sage_spkg\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\nDoctesting 1 file.\nsage -t --random-seed=224621707555152601217192014946498015018 src/sage/misc/latex_standalone.py\n    [216 tests, 0.29 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 0.3 seconds\n    cpu time: 0.3 seconds\n    cumulative wall time: 0.3 seconds\nFeatures detected for doctesting: graphviz,sage.combinat,sage.graphs,sage.symbolic\nPytest is not installed, skip checking tests that rely on it.\n```\n\n```\n$ ./sage -t --optional=sage,optional,external --long src/sage/misc/latex_standalone.py \ntoo few successful tests, not using stored timings\nRunning doctests with ID 2022-03-24-11-08-54-06354475.\nGit branch: 20343\nUsing --optional=debian,external,pip,sage,sage_spkg\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,cplex,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,ffmpeg,graphviz,gurobi,imagemagick,internet,jupymake,kenzo,latex,latex_package_tkz_graph,latte_int,lrslib,lualatex,macaulay2,magma,maple,mathematica,matlab,mcqd,meataxe,nauty,octave,palp,pandoc,pdf2svg,pdflatex,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,scilab,sphinx,tdlib,xelatex\nDoctesting 1 file.\nsage -t --long --random-seed=318237908393715923968305484155979250546 src/sage/misc/latex_standalone.py\n    [216 tests, 0.29 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 0.4 seconds\n    cpu time: 0.3 seconds\n    cumulative wall time: 0.3 seconds\nFeatures detected for doctesting: graphviz,pdftocairo,sage.combinat,sage.graphs,sage.symbolic\nPytest is not installed, skip checking tests that rely on it.\n```",
    "created_at": "2022-03-24T10:14:04Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296011",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:3'></a>
I found a computer with no latex and no imagemagick:

```
$ pdflatex -v

La commande « pdflatex » n'a pas été trouvée, mais peut être installée avec :

sudo apt install texlive-latex-base
```

```
$ lualatex -v

La commande « lualatex » n'a pas été trouvée, mais peut être installée avec :

sudo apt install texlive-latex-base
```

```
$ convert -v

La commande « convert » n'a pas été trouvée, mais peut être installée avec :

sudo apt install graphicsmagick-imagemagick-compat  # version 1.4+really1.3.35-1, or
sudo apt install imagemagick-6.q16                  # version 8:6.9.10.23+dfsg-2.1ubuntu11.4
sudo apt install imagemagick-6.q16hdri              # version 8:6.9.10.23+dfsg-2.1ubuntu11.4
```
on which I installed sage:

```
$ ./sage -version
SageMath version 9.6.beta5, Release Date: 2022-03-12
```

on which I merged this ticket, I confirm the doctests work:

```
./sage -t src/sage/misc/latex_standalone.py 
no stored timings available
Running doctests with ID 2022-03-24-11-08-32-82df3068.
Git branch: 20343
Using --optional=debian,pip,sage,sage_spkg
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
Doctesting 1 file.
sage -t --random-seed=224621707555152601217192014946498015018 src/sage/misc/latex_standalone.py
    [216 tests, 0.29 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 0.3 seconds
    cpu time: 0.3 seconds
    cumulative wall time: 0.3 seconds
Features detected for doctesting: graphviz,sage.combinat,sage.graphs,sage.symbolic
Pytest is not installed, skip checking tests that rely on it.
```

```
$ ./sage -t --optional=sage,optional,external --long src/sage/misc/latex_standalone.py 
too few successful tests, not using stored timings
Running doctests with ID 2022-03-24-11-08-54-06354475.
Git branch: 20343
Using --optional=debian,external,pip,sage,sage_spkg
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,cplex,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,ffmpeg,graphviz,gurobi,imagemagick,internet,jupymake,kenzo,latex,latex_package_tkz_graph,latte_int,lrslib,lualatex,macaulay2,magma,maple,mathematica,matlab,mcqd,meataxe,nauty,octave,palp,pandoc,pdf2svg,pdflatex,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,scilab,sphinx,tdlib,xelatex
Doctesting 1 file.
sage -t --long --random-seed=318237908393715923968305484155979250546 src/sage/misc/latex_standalone.py
    [216 tests, 0.29 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 0.4 seconds
    cpu time: 0.3 seconds
    cumulative wall time: 0.3 seconds
Features detected for doctesting: graphviz,pdftocairo,sage.combinat,sage.graphs,sage.symbolic
Pytest is not installed, skip checking tests that rely on it.
```



---

archive/issue_events_182706.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-03-24T10:21:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182706"
}
```



---

archive/issue_events_182707.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-03-24T10:21:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182707"
}
```



---

archive/issue_comments_296012.json:
```json
{
    "body": "<a id='comment:4'></a>\nNice! I give back a positive review to this ticket.",
    "created_at": "2022-03-24T10:21:52Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296012",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:4'></a>
Nice! I give back a positive review to this ticket.



---

archive/issue_comments_296013.json:
```json
{
    "body": "<a id='comment:5'></a>\nSuper!",
    "created_at": "2022-03-24T13:06:27Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296013",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:5'></a>
Super!



---

archive/issue_events_182708.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-30T22:33:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182708"
}
```



---

archive/issue_events_182709.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5166ac1413dde897f65fc19b5e567913ac06a49e",
    "created_at": "2022-03-30T22:33:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-182709"
}
```



---

archive/issue_comments_296014.json:
```json
{
    "body": "**Changing branch** from \"[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)\" to \"[5c9b41c96e4213242fee4af98b934914fb4d2360](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)\".",
    "created_at": "2022-03-30T22:33:17Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296014",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)" to "[5c9b41c96e4213242fee4af98b934914fb4d2360](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)".



---

archive/issue_comments_296015.json:
```json
{
    "body": "**Changing commit** from \"[5c9b41c96e4213242fee4af98b934914fb4d2360](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)\" to \"\".",
    "created_at": "2022-04-02T20:23:56Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296015",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[5c9b41c96e4213242fee4af98b934914fb4d2360](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)" to "".



---

archive/issue_comments_296016.json:
```json
{
    "body": "<a id='comment:7'></a>\nthis has introduced wrong indentation\n\n```\nsrc/sage/misc/latex_standalone.py:688:12: E111 indentation is not a multiple of four\nsrc/sage/misc/latex_standalone.py:689:16: E111 indentation is not a multiple of four\nsrc/sage/misc/latex_standalone.py:690:12: E111 indentation is not a multiple of four\nsrc/sage/misc/latex_standalone.py:691:16: E111 indentation is not a multiple of four\n```",
    "created_at": "2022-04-02T20:23:56Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296016",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
this has introduced wrong indentation

```
src/sage/misc/latex_standalone.py:688:12: E111 indentation is not a multiple of four
src/sage/misc/latex_standalone.py:689:16: E111 indentation is not a multiple of four
src/sage/misc/latex_standalone.py:690:12: E111 indentation is not a multiple of four
src/sage/misc/latex_standalone.py:691:16: E111 indentation is not a multiple of four
```



---

archive/issue_comments_296017.json:
```json
{
    "body": "<a id='comment:8'></a>\nso please swiftly review #33635",
    "created_at": "2022-04-03T08:10:44Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296017",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
so please swiftly review #33635



---

archive/issue_comments_296018.json:
```json
{
    "body": "<a id='comment:9'></a>\nCould this possibly be leading to the bad LaTeX that's causing the problem with  `view(crystals.Tableaux(\"A3\",shape=[2,1]))` \u2014 see https://groups.google.com/g/sage-support/c/1u4m-Osz6jY/m/PAM-1C40AwAJ?",
    "created_at": "2022-06-02T17:00:18Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296018",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>
Could this possibly be leading to the bad LaTeX that's causing the problem with  `view(crystals.Tableaux("A3",shape=[2,1]))` — see https://groups.google.com/g/sage-support/c/1u4m-Osz6jY/m/PAM-1C40AwAJ?



---

archive/issue_comments_296019.json:
```json
{
    "body": "<a id='comment:0'></a>\nIn case this is relevant to the `view(crystals....)` failure, that is now #33947.",
    "created_at": "2022-06-02T23:07:14Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296019",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:0'></a>
In case this is relevant to the `view(crystals....)` failure, that is now #33947.



---

archive/issue_comments_296020.json:
```json
{
    "body": "<a id='comment:171'></a>\nReplying to [@jhpalmieri](#comment%3A169):\n> Could this possibly be leading to the bad LaTeX that's causing the problem with  `view(crystals.Tableaux(\"A3\",shape=[2,1]))` \u2014 see https://groups.google.com/g/sage-support/c/1u4m-Osz6jY/m/PAM-1C40AwAJ?\n\nNo. The problem reported on sage-support is with respect to Sage 9.3. The `TikzPicture` code went into sage in 9.6. Also, for now, no other file is using the new `TikzPicture` module.",
    "created_at": "2022-06-03T07:24:17Z",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-296020",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:171'></a>
Replying to [@jhpalmieri](#comment%3A169):
> Could this possibly be leading to the bad LaTeX that's causing the problem with  `view(crystals.Tableaux("A3",shape=[2,1]))` — see https://groups.google.com/g/sage-support/c/1u4m-Osz6jY/m/PAM-1C40AwAJ?

No. The problem reported on sage-support is with respect to Sage 9.3. The `TikzPicture` code went into sage in 9.6. Also, for now, no other file is using the new `TikzPicture` module.
