# Issue 20343: Add file `sage/misc/latex_standalone.py` and class `TikzPicture`

archive/issues_020106.json:
```json
{
    "assignees": [],
    "body": "The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state and it is mature enough to go into SageMath now.\n\nHere is a demo inside a Jupyter notebook (notice that the import line was since changed to `from sage.misc.latex_standalone import TikzPicture`):\n\n<img src=\"tikz-jupyter-demo.png\" width=width=600>\n\nMore examples:\n\n```\nsage: from sage.misc.latex_standalone import TikzPicture\nsage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]\nsage: P = Polyhedron(vertices=V).polar()\nsage: s = P.projection().tikz([674,108,-731],112)\nsage: t = TikzPicture(s)\nsage: t.pdf()             # opens the pdf in a viewer                                                        \n'/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'\nsage: t.pdf('image.pdf')  # when a filename is provided, it doesn't open in a viewer                                            \n'/home/slabbe/image.pdf'\n```\n\nIt may create the image into png format (translation pdf -> png made with convert from imagemagick) or svg format (translation pdf -> svg made with pdf2svg):\n\n```\nsage: path_to_file = t.png()                                              \nsage: path_to_file = t.svg()\nsage: path_to_file = t.tex()\n```\n\nIn a Jupyter notebook, this shows the picture below the cell (using rich repr):\n\n```\nsage: t\n```\n\nIn the terminal, this shows the header and tail of the tikzpicture code:\n\n```\nsage: t                                                                                                    \n\\documentclass[tikz]{standalone}\n\\usepackage{amsmath}\n\\begin{document}\n\\begin{tikzpicture}%\n\t[x={(0.249656cm, -0.577639cm)},\n\ty={(0.777700cm, -0.358578cm)},\n\tz={(-0.576936cm, -0.733318cm)},\n\tscale=1.000000,\n---\n91 lines not printed (5169 characters in total).\nUse print to see the full content.\n---\n\\node[vertex] at (0.00000, -1.00000, 0.00000)     {};\n\\node[vertex] at (-0.50000, -0.50000, -0.50000)     {};\n%%\n%%\n\\end{tikzpicture}\n\\end{document}\n```\n\nUse `print` to see the full content:\n\n```\nsage: print(t) \n```\n\nA second example shows that it is faster than view and better (avoids to crop the vertices):\n\n```\nsage: g = graphs.PetersenGraph()\nsage: %time _ = TikzPicture(latex(g), standalone_options=[\"border=4mm\"], usepackage=['tkz-graph']).pdf()\nCPU times: user 3.52 ms, sys: 12.7 ms, total: 16.2 ms\nWall time: 2.24 s     \n```\n\ncompared to using view (which crops the vertices and creates two pages pdf on mac):\n\n```\nsage: %time view(g, tightpage=True)               \nCPU times: user 126 ms, sys: 85 ms, total: 211 ms \nWall time: 6.06 s\n```\n\nAlso, if dot2tex and graphviz available, one may directly construct a tikzpicture from a sagemath graph:\n\n```\nsage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex\n```\n\nThe `tikzpicture.py` was developped within optional package `slabbe` since 2015. Its interface should be stable enough to go into sage now.\n\nMeanwhile any user can use this tikzpicture module by installing the package:\n\n```\nsage -pip install slabbe\n```\n\nand\n\n```\nsage: from slabbe import TikzPicture\n```\n\nAn example of usage of this module can be found at this url:\n\n- https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n\nassociated to the preprint\n\n- https://arxiv.org/abs/1906.01104\n\npublished in Journal of Modern Dynamics at\n\n- http://dx.doi.org/10.3934/jmd.2021017\n\nDepends on #32650\nDepends on #33005\n\nCC:  @dkrenn @jplab @slel @fchapoton\n\nBranch: **[5c9b41c](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)**\n\nReviewer: **Jean-Philippe Labb\u00e9, Xavier Caruso, Vincent Delecroix, Matthias Koeppe**\n\nAuthor: **S\u00e9bastien Labb\u00e9**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20343_\n\n",
    "closed_at": "2022-03-30T22:33:17Z",
    "created_at": "2016-04-01T12:33:17Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add file `sage/misc/latex_standalone.py` and class `TikzPicture`",
    "type": "issue",
    "updated_at": "2022-06-03T07:24:17Z",
    "url": "https://github.com/sagemath/sage/issues/20343",
    "user": "https://github.com/seblabbe"
}
```
The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state and it is mature enough to go into SageMath now.

Here is a demo inside a Jupyter notebook (notice that the import line was since changed to `from sage.misc.latex_standalone import TikzPicture`):

<img src="tikz-jupyter-demo.png" width=width=600>

More examples:

```
sage: from sage.misc.latex_standalone import TikzPicture
sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]
sage: P = Polyhedron(vertices=V).polar()
sage: s = P.projection().tikz([674,108,-731],112)
sage: t = TikzPicture(s)
sage: t.pdf()             # opens the pdf in a viewer                                                        
'/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'
sage: t.pdf('image.pdf')  # when a filename is provided, it doesn't open in a viewer                                            
'/home/slabbe/image.pdf'
```

It may create the image into png format (translation pdf -> png made with convert from imagemagick) or svg format (translation pdf -> svg made with pdf2svg):

```
sage: path_to_file = t.png()                                              
sage: path_to_file = t.svg()
sage: path_to_file = t.tex()
```

In a Jupyter notebook, this shows the picture below the cell (using rich repr):

```
sage: t
```

In the terminal, this shows the header and tail of the tikzpicture code:

```
sage: t                                                                                                    
\documentclass[tikz]{standalone}
\usepackage{amsmath}
\begin{document}
\begin{tikzpicture}%
	[x={(0.249656cm, -0.577639cm)},
	y={(0.777700cm, -0.358578cm)},
	z={(-0.576936cm, -0.733318cm)},
	scale=1.000000,
---
91 lines not printed (5169 characters in total).
Use print to see the full content.
---
\node[vertex] at (0.00000, -1.00000, 0.00000)     {};
\node[vertex] at (-0.50000, -0.50000, -0.50000)     {};
%%
%%
\end{tikzpicture}
\end{document}
```

Use `print` to see the full content:

```
sage: print(t) 
```

A second example shows that it is faster than view and better (avoids to crop the vertices):

```
sage: g = graphs.PetersenGraph()
sage: %time _ = TikzPicture(latex(g), standalone_options=["border=4mm"], usepackage=['tkz-graph']).pdf()
CPU times: user 3.52 ms, sys: 12.7 ms, total: 16.2 ms
Wall time: 2.24 s     
```

compared to using view (which crops the vertices and creates two pages pdf on mac):

```
sage: %time view(g, tightpage=True)               
CPU times: user 126 ms, sys: 85 ms, total: 211 ms 
Wall time: 6.06 s
```

Also, if dot2tex and graphviz available, one may directly construct a tikzpicture from a sagemath graph:

```
sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex
```

The `tikzpicture.py` was developped within optional package `slabbe` since 2015. Its interface should be stable enough to go into sage now.

Meanwhile any user can use this tikzpicture module by installing the package:

```
sage -pip install slabbe
```

and

```
sage: from slabbe import TikzPicture
```

An example of usage of this module can be found at this url:

- https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb

associated to the preprint

- https://arxiv.org/abs/1906.01104

published in Journal of Modern Dynamics at

- http://dx.doi.org/10.3934/jmd.2021017

Depends on #32650
Depends on #33005

CC:  @dkrenn @jplab @slel @fchapoton

Branch: **[5c9b41c](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)**

Reviewer: **Jean-Philippe Labbé, Xavier Caruso, Vincent Delecroix, Matthias Koeppe**

Author: **Sébastien Labbé**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/20343_





---

archive/issue_events_287118.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-04-01T12:33:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287118"
}
```



---

archive/issue_events_287119.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-04-01T12:33:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287119"
}
```



---

archive/issue_events_287120.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-04-01T12:33:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287120"
}
```



---

archive/issue_comments_293337.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,23 @@\n-From my optional Sage package [1] slabbe-0.2.spkg.\n+Importing a file from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.\n \n-[1] https://github.com/seblabbe/slabbe\n+```\n+sage: from sage.misc.tikz_picture import TikzPicture\n+sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]\n+sage: P = Polyhedron(vertices=V).polar()\n+sage: s = P.projection().tikz([674,108,-731],112)\n+sage: t = TikzPicture(s)\n+sage: t.pdf()\n+```\n+\n+```\n+sage: g = graphs.PetersenGraph()\n+sage: s = latex(g)\n+sage: t = TikzPicture(s, standalone_configs=[\"border=4mm\"], packages=['tkz-graph'])\n+sage: _ = t.pdf()\n+```\n+\n+If dot2tex and graphviz available:\n+\n+```\n+sage: t = TikzPicture.from_graph(g)  # optional: dot2tex\n+```\n``````\n",
    "created_at": "2016-04-01T12:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293337",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,23 @@
-From my optional Sage package [1] slabbe-0.2.spkg.
+Importing a file from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.
 
-[1] https://github.com/seblabbe/slabbe
+```
+sage: from sage.misc.tikz_picture import TikzPicture
+sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]
+sage: P = Polyhedron(vertices=V).polar()
+sage: s = P.projection().tikz([674,108,-731],112)
+sage: t = TikzPicture(s)
+sage: t.pdf()
+```
+
+```
+sage: g = graphs.PetersenGraph()
+sage: s = latex(g)
+sage: t = TikzPicture(s, standalone_configs=["border=4mm"], packages=['tkz-graph'])
+sage: _ = t.pdf()
+```
+
+If dot2tex and graphviz available:
+
+```
+sage: t = TikzPicture.from_graph(g)  # optional: dot2tex
+```
``````




---

archive/issue_comments_293338.json:
```json
{
    "body": "Commit: **[476b574](https://github.com/sagemath/sagetrac-mirror/commit/476b574c4198115e6e98e3396ed32f4b95077c35)**",
    "created_at": "2016-04-01T13:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293338",
    "user": "https://github.com/seblabbe"
}
```

Commit: **[476b574](https://github.com/sagemath/sagetrac-mirror/commit/476b574c4198115e6e98e3396ed32f4b95077c35)**



---

archive/issue_comments_293339.json:
```json
{
    "body": "Branch: **[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)**",
    "created_at": "2016-04-01T13:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293339",
    "user": "https://github.com/seblabbe"
}
```

Branch: **[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)**



---

archive/issue_events_287121.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-04-01T13:32:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287121"
}
```



---

archive/issue_comments_293340.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/476b574c4198115e6e98e3396ed32f4b95077c35\">476b574</a></td><td><code>20343: Adding tikzpicture.py in sage/misc</code></td></tr></table>\n",
    "created_at": "2016-04-01T13:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293340",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/476b574c4198115e6e98e3396ed32f4b95077c35">476b574</a></td><td><code>20343: Adding tikzpicture.py in sage/misc</code></td></tr></table>




---

archive/issue_comments_293341.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,9 @@\n-Importing a file from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.\n+Importing `TikzPicture` class from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.\n+\n+One example:\n \n ```\n-sage: from sage.misc.tikz_picture import TikzPicture\n+sage: from sage.misc.tikzpicture import TikzPicture\n sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]\n sage: P = Polyhedron(vertices=V).polar()\n sage: s = P.projection().tikz([674,108,-731],112)\n@@ -9,15 +11,27 @@\n sage: t.pdf()\n ```\n \n+Second example:\n+\n ```\n sage: g = graphs.PetersenGraph()\n-sage: s = latex(g)\n-sage: t = TikzPicture(s, standalone_configs=[\"border=4mm\"], packages=['tkz-graph'])\n-sage: _ = t.pdf()\n+sage: %time _ = TikzPicture(latex(g), standalone_configs=[\"border=4mm\"], packages=['tkz-graph']).pdf()\n+CPU times: user 3.52 ms, sys: 12.7 ms, total: 16.2 ms\n+Wall time: 2.24 s     \n ```\n \n-If dot2tex and graphviz available:\n+compared to using view (which crops the vertices and creates two pages pdf on mac):\n \n ```\n-sage: t = TikzPicture.from_graph(g)  # optional: dot2tex\n+sage: %time view(g, tightpage=True)               \n+CPU times: user 126 ms, sys: 85 ms, total: 211 ms \n+Wall time: 6.06 s\n ```\n+\n+Also, if dot2tex and graphviz available:\n+\n+```\n+sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex\n+```\n+\n+\n``````\n",
    "created_at": "2016-04-01T13:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293341",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,9 @@
-Importing a file from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.
+Importing `TikzPicture` class from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.
+
+One example:
 
 ```
-sage: from sage.misc.tikz_picture import TikzPicture
+sage: from sage.misc.tikzpicture import TikzPicture
 sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]
 sage: P = Polyhedron(vertices=V).polar()
 sage: s = P.projection().tikz([674,108,-731],112)
@@ -9,15 +11,27 @@
 sage: t.pdf()
 ```
 
+Second example:
+
 ```
 sage: g = graphs.PetersenGraph()
-sage: s = latex(g)
-sage: t = TikzPicture(s, standalone_configs=["border=4mm"], packages=['tkz-graph'])
-sage: _ = t.pdf()
+sage: %time _ = TikzPicture(latex(g), standalone_configs=["border=4mm"], packages=['tkz-graph']).pdf()
+CPU times: user 3.52 ms, sys: 12.7 ms, total: 16.2 ms
+Wall time: 2.24 s     
 ```
 
-If dot2tex and graphviz available:
+compared to using view (which crops the vertices and creates two pages pdf on mac):
 
 ```
-sage: t = TikzPicture.from_graph(g)  # optional: dot2tex
+sage: %time view(g, tightpage=True)               
+CPU times: user 126 ms, sys: 85 ms, total: 211 ms 
+Wall time: 6.06 s
 ```
+
+Also, if dot2tex and graphviz available:
+
+```
+sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex
+```
+
+
``````




---

archive/issue_events_287122.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-04-01T13:49:29Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "title_is": "Adding sage/misc/tikzpicture.py",
    "title_was": "Adding sage/misc/tikz_picture.py",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287122"
}
```



---

archive/issue_comments_293342.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nA comment:\n\n```\nt = TikzPicture(latex(transducers.GrayCode()))\nt.pdf()\n```\ndoes not work as the preamble is not set correctly. However, there is\n\n```\nfrom sage.combinat.finite_state_machine import setup_latex_preamble\nsetup_latex_preamble()\n```\n(as well as the corresponding function in `sage.graphs.graph_latex`) to set this correctly, but it seems to be ignored by `TikzPicture`. \n\nIn contrast, \n\n```\nview(transducers.GrayCode())\n```\nworks, but I have no idea if `setup_latex_preamble` is called (not needed to be done manually) or if tikz is included anyways.",
    "created_at": "2016-04-04T18:31:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293342",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:5" align="right">comment:5</div>

A comment:

```
t = TikzPicture(latex(transducers.GrayCode()))
t.pdf()
```
does not work as the preamble is not set correctly. However, there is

```
from sage.combinat.finite_state_machine import setup_latex_preamble
setup_latex_preamble()
```
(as well as the corresponding function in `sage.graphs.graph_latex`) to set this correctly, but it seems to be ignored by `TikzPicture`. 

In contrast, 

```
view(transducers.GrayCode())
```
works, but I have no idea if `setup_latex_preamble` is called (not needed to be done manually) or if tikz is included anyways.



---

archive/issue_comments_293343.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@dkrenn](#comment:5):\n> A comment:\n> \n> ```\n> t = TikzPicture(latex(transducers.GrayCode()))\n> t.pdf()\n> ```\n> does not work as the preamble is not set correctly.\n\nAs it is now, the user must set the libraries. This should work:\n\n```\nt = TikzPicture(latex(transducers.GrayCode()), tikzlibraries=['automata'])\nt.pdf()\n```\n\nI am still not sure about the proper way to choose the arguments for the `__init__` function and their especially their default values. Should the arguments be empty by default? equal to the current sage latex preamble? or full of a big load of libraries?",
    "created_at": "2016-04-04T19:36:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293343",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@dkrenn](#comment:5):
> A comment:
> 
> ```
> t = TikzPicture(latex(transducers.GrayCode()))
> t.pdf()
> ```
> does not work as the preamble is not set correctly.

As it is now, the user must set the libraries. This should work:

```
t = TikzPicture(latex(transducers.GrayCode()), tikzlibraries=['automata'])
t.pdf()
```

I am still not sure about the proper way to choose the arguments for the `__init__` function and their especially their default values. Should the arguments be empty by default? equal to the current sage latex preamble? or full of a big load of libraries?



---

archive/issue_comments_293344.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@seblabbe](#comment:6):\n> Replying to [@dkrenn](#comment:5):\n> > A comment:\n> > \n> > ```\n> > t = TikzPicture(latex(transducers.GrayCode()))\n> > t.pdf()\n> > ```\n> > does not work as the preamble is not set correctly.\n\n> \n> As it is now, the user must set the libraries. This should work:\n> \n> ```\n> t = TikzPicture(latex(transducers.GrayCode()), tikzlibraries=['automata'])\n> t.pdf()\n> ```\n\nWorks, thanks.\n\n> I am still not sure about the proper way to choose the arguments for the `__init__` function and their especially their default values. Should the arguments be empty by default? equal to the current sage latex preamble? or full of a big load of libraries?\n\nWithout much thinking, I vote for: The second, equal to the current sage latex preamble.",
    "created_at": "2016-04-05T08:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293344",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@seblabbe](#comment:6):
> Replying to [@dkrenn](#comment:5):
> > A comment:
> > 
> > ```
> > t = TikzPicture(latex(transducers.GrayCode()))
> > t.pdf()
> > ```
> > does not work as the preamble is not set correctly.

> 
> As it is now, the user must set the libraries. This should work:
> 
> ```
> t = TikzPicture(latex(transducers.GrayCode()), tikzlibraries=['automata'])
> t.pdf()
> ```

Works, thanks.

> I am still not sure about the proper way to choose the arguments for the `__init__` function and their especially their default values. Should the arguments be empty by default? equal to the current sage latex preamble? or full of a big load of libraries?

Without much thinking, I vote for: The second, equal to the current sage latex preamble.



---

archive/issue_comments_293345.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7512091c4d529af71f5176ecafa723a9027ddf27\">7512091</a></td><td><code>20343: Adding tikzpicture.py in sage/misc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ae7f63de1517e4c483e500757989b6efde5b785\">4ae7f63</a></td><td><code>20343: improving the default argument choices for TikzPicture</code></td></tr></table>\n",
    "created_at": "2016-04-07T22:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293345",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7512091c4d529af71f5176ecafa723a9027ddf27">7512091</a></td><td><code>20343: Adding tikzpicture.py in sage/misc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ae7f63de1517e4c483e500757989b6efde5b785">4ae7f63</a></td><td><code>20343: improving the default argument choices for TikzPicture</code></td></tr></table>




---

archive/issue_comments_293346.json:
```json
{
    "body": "Changed commit from **[476b574](https://github.com/sagemath/sagetrac-mirror/commit/476b574c4198115e6e98e3396ed32f4b95077c35)** to **[4ae7f63](https://github.com/sagemath/sagetrac-mirror/commit/4ae7f63de1517e4c483e500757989b6efde5b785)**",
    "created_at": "2016-04-07T22:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293346",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[476b574](https://github.com/sagemath/sagetrac-mirror/commit/476b574c4198115e6e98e3396ed32f4b95077c35)** to **[4ae7f63](https://github.com/sagemath/sagetrac-mirror/commit/4ae7f63de1517e4c483e500757989b6efde5b785)**



---

archive/issue_comments_293347.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,7 +15,7 @@\n \n ```\n sage: g = graphs.PetersenGraph()\n-sage: %time _ = TikzPicture(latex(g), standalone_configs=[\"border=4mm\"], packages=['tkz-graph']).pdf()\n+sage: %time _ = TikzPicture(latex(g), standalone_options=[\"border=4mm\"], usepackage=['tkz-graph']).pdf()\n CPU times: user 3.52 ms, sys: 12.7 ms, total: 16.2 ms\n Wall time: 2.24 s     \n ```\n``````\n",
    "created_at": "2016-04-07T22:59:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293347",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,7 +15,7 @@
 
 ```
 sage: g = graphs.PetersenGraph()
-sage: %time _ = TikzPicture(latex(g), standalone_configs=["border=4mm"], packages=['tkz-graph']).pdf()
+sage: %time _ = TikzPicture(latex(g), standalone_options=["border=4mm"], usepackage=['tkz-graph']).pdf()
 CPU times: user 3.52 ms, sys: 12.7 ms, total: 16.2 ms
 Wall time: 2.24 s     
 ```
``````




---

archive/issue_comments_293348.json:
```json
{
    "body": "Changed commit from **[4ae7f63](https://github.com/sagemath/sagetrac-mirror/commit/4ae7f63de1517e4c483e500757989b6efde5b785)** to none",
    "created_at": "2016-12-09T09:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293348",
    "user": "https://github.com/seblabbe"
}
```

Changed commit from **[4ae7f63](https://github.com/sagemath/sagetrac-mirror/commit/4ae7f63de1517e4c483e500757989b6efde5b785)** to none



---

archive/issue_comments_293349.json:
```json
{
    "body": "Changed branch from **[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)** to none",
    "created_at": "2016-12-09T09:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293349",
    "user": "https://github.com/seblabbe"
}
```

Changed branch from **[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)** to none



---

archive/issue_comments_293350.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -34,4 +34,14 @@\n sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex\n ```\n \n+To avoid losing my time, I will not post a branch here until somebody tells me he is willing to review this module. Meanwhile any user can use this tikzpicture module by installing my package:\n \n+```\n+sage -pip install slabbe\n+```\n+\n+and\n+\n+```\n+sage: from slabbe import TikzPicture\n+```\n``````\n",
    "created_at": "2016-12-09T09:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293350",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -34,4 +34,14 @@
 sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex
 ```
 
+To avoid losing my time, I will not post a branch here until somebody tells me he is willing to review this module. Meanwhile any user can use this tikzpicture module by installing my package:
 
+```
+sage -pip install slabbe
+```
+
+and
+
+```
+sage: from slabbe import TikzPicture
+```
``````




---

archive/issue_comments_293351.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nMy module has evolved in my package slabbe, therefore the branch here is not up to date anymore. Also, I intend to make it more general during the next year allowing any content not only tikzpicture code. Therefore, I deleted the branch posted here.",
    "created_at": "2016-12-09T09:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293351",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:10" align="right">comment:10</div>

My module has evolved in my package slabbe, therefore the branch here is not up to date anymore. Also, I intend to make it more general during the next year allowing any content not only tikzpicture code. Therefore, I deleted the branch posted here.



---

archive/issue_comments_293352.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -34,7 +34,9 @@\n sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex\n ```\n \n-To avoid losing my time, I will not post a branch here until somebody tells me he is willing to review this module. Meanwhile any user can use this tikzpicture module by installing my package:\n+I intend to make further improvements to this module during the next year. Also, I will wait until somebody tells me he is willing to review this module before publishing a branch here.\n+\n+Meanwhile any user can use this tikzpicture module by installing my package:\n \n ```\n sage -pip install slabbe\n``````\n",
    "created_at": "2016-12-09T20:35:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293352",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -34,7 +34,9 @@
 sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex
 ```
 
-To avoid losing my time, I will not post a branch here until somebody tells me he is willing to review this module. Meanwhile any user can use this tikzpicture module by installing my package:
+I intend to make further improvements to this module during the next year. Also, I will wait until somebody tells me he is willing to review this module before publishing a branch here.
+
+Meanwhile any user can use this tikzpicture module by installing my package:
 
 ```
 sage -pip install slabbe
``````




---

archive/issue_events_287123.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-12-09T20:35:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287123"
}
```



---

archive/issue_events_287124.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-12-09T20:35:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287124"
}
```



---

archive/issue_comments_293353.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nChanging status to needs work.",
    "created_at": "2016-12-09T20:35:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293353",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:11" align="right">comment:11</div>

Changing status to needs work.



---

archive/issue_comments_293354.json:
```json
{
    "body": "Reviewer: **Jean-Philippe Labb\u00e9**",
    "created_at": "2017-03-10T11:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293354",
    "user": "https://github.com/jplab"
}
```

Reviewer: **Jean-Philippe Labbé**



---

archive/issue_comments_293355.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAs a follow-up ticket to make use of this is #22506.",
    "created_at": "2017-03-10T11:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293355",
    "user": "https://github.com/jplab"
}
```

<div id="comment:12" align="right">comment:12</div>

As a follow-up ticket to make use of this is #22506.



---

archive/issue_comments_293356.json:
```json
{
    "body": "Branch: **[u/caruso/tikzpicture](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/tikzpicture)**",
    "created_at": "2021-03-31T13:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293356",
    "user": "https://github.com/xcaruso"
}
```

Branch: **[u/caruso/tikzpicture](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/tikzpicture)**



---

archive/issue_comments_293357.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI'll be happy to revive this ticket.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88c048c2a33618220a586f708273e41fd803f6bc\">88c048c</a></td><td><code>import tikz_picture.py from slabbe gitlab repository</code></td></tr></table>\n",
    "created_at": "2021-03-31T13:15:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293357",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:14" align="right">comment:14</div>

I'll be happy to revive this ticket.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88c048c2a33618220a586f708273e41fd803f6bc">88c048c</a></td><td><code>import tikz_picture.py from slabbe gitlab repository</code></td></tr></table>




---

archive/issue_comments_293358.json:
```json
{
    "body": "Commit: **[88c048c](https://github.com/sagemath/sagetrac-mirror/commit/88c048c2a33618220a586f708273e41fd803f6bc)**",
    "created_at": "2021-03-31T13:15:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293358",
    "user": "https://github.com/xcaruso"
}
```

Commit: **[88c048c](https://github.com/sagemath/sagetrac-mirror/commit/88c048c2a33618220a586f708273e41fd803f6bc)**



---

archive/issue_comments_293359.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2917f4b60238afcb4f097f3a256f734141aabe02\">2917f4b</a></td><td><code>doctests pass</code></td></tr></table>\n",
    "created_at": "2021-03-31T13:38:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293359",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2917f4b60238afcb4f097f3a256f734141aabe02">2917f4b</a></td><td><code>doctests pass</code></td></tr></table>




---

archive/issue_comments_293360.json:
```json
{
    "body": "Changed commit from **[88c048c](https://github.com/sagemath/sagetrac-mirror/commit/88c048c2a33618220a586f708273e41fd803f6bc)** to **[2917f4b](https://github.com/sagemath/sagetrac-mirror/commit/2917f4b60238afcb4f097f3a256f734141aabe02)**",
    "created_at": "2021-03-31T13:38:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293360",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[88c048c](https://github.com/sagemath/sagetrac-mirror/commit/88c048c2a33618220a586f708273e41fd803f6bc)** to **[2917f4b](https://github.com/sagemath/sagetrac-mirror/commit/2917f4b60238afcb4f097f3a256f734141aabe02)**



---

archive/issue_comments_293361.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cfc83431a25394be8b0dbc890d0dc0f72f54f56\">8cfc834</a></td><td><code>typos</code></td></tr></table>\n",
    "created_at": "2021-03-31T16:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293361",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cfc83431a25394be8b0dbc890d0dc0f72f54f56">8cfc834</a></td><td><code>typos</code></td></tr></table>




---

archive/issue_comments_293362.json:
```json
{
    "body": "Changed commit from **[2917f4b](https://github.com/sagemath/sagetrac-mirror/commit/2917f4b60238afcb4f097f3a256f734141aabe02)** to **[8cfc834](https://github.com/sagemath/sagetrac-mirror/commit/8cfc83431a25394be8b0dbc890d0dc0f72f54f56)**",
    "created_at": "2021-03-31T16:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293362",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2917f4b](https://github.com/sagemath/sagetrac-mirror/commit/2917f4b60238afcb4f097f3a256f734141aabe02)** to **[8cfc834](https://github.com/sagemath/sagetrac-mirror/commit/8cfc83431a25394be8b0dbc890d0dc0f72f54f56)**



---

archive/issue_comments_293363.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI'm not convinced by all the methods `from_dot_string`, `from_graph`, etc. in the class `TikzPicture`. I would say that this code should instead be in the classes implementing the object we want to display. E.g. it could be a method `_tikz_`, just as `_latex_`, and `TikzPicture` just calls it.\n\nWhat's your opinion?",
    "created_at": "2021-03-31T16:25:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293363",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:17" align="right">comment:17</div>

I'm not convinced by all the methods `from_dot_string`, `from_graph`, etc. in the class `TikzPicture`. I would say that this code should instead be in the classes implementing the object we want to display. E.g. it could be a method `_tikz_`, just as `_latex_`, and `TikzPicture` just calls it.

What's your opinion?



---

archive/issue_comments_293364.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThere is no class for `dot strings`. Graphs already have a `_latex_` method which returns a tikz picture string. It is what is used with for instance `view(G)`. The `from_graph` class method really is using `dot2tex` + `graphviz` which is not the same layout sometimes. It is true that maybe adding a `_tikz_` would avoid to replace the current behavior of `_latex_`. But then, having two different behaviors will be non pedagogical (how to know there is another one). Also, changing the default behavior will lead to problems...\n\nI think it will be easier to add the new module as is and later on, in other tickets, add such `_tikz_` methods in other parts of sage where it makes sense.",
    "created_at": "2021-04-01T10:35:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293364",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:18" align="right">comment:18</div>

There is no class for `dot strings`. Graphs already have a `_latex_` method which returns a tikz picture string. It is what is used with for instance `view(G)`. The `from_graph` class method really is using `dot2tex` + `graphviz` which is not the same layout sometimes. It is true that maybe adding a `_tikz_` would avoid to replace the current behavior of `_latex_`. But then, having two different behaviors will be non pedagogical (how to know there is another one). Also, changing the default behavior will lead to problems...

I think it will be easier to add the new module as is and later on, in other tickets, add such `_tikz_` methods in other parts of sage where it makes sense.



---

archive/issue_events_287125.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T17:17:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287125"
}
```



---

archive/issue_events_287126.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T17:17:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287126"
}
```



---

archive/issue_comments_293365.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nOK. Let's keep it for another ticket.",
    "created_at": "2021-04-01T17:17:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293365",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:19" align="right">comment:19</div>

OK. Let's keep it for another ticket.



---

archive/issue_events_287127.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T17:17:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287127"
}
```



---

archive/issue_events_287128.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T17:17:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287128"
}
```



---

archive/issue_events_287129.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T17:18:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287129"
}
```



---

archive/issue_events_287130.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T17:18:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287130"
}
```



---

archive/issue_comments_293366.json:
```json
{
    "body": "Changed reviewer from **Jean-Philippe Labb\u00e9** to **Jean-Philippe Labb\u00e9, Xavier Caruso**",
    "created_at": "2021-04-01T17:18:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293366",
    "user": "https://github.com/xcaruso"
}
```

Changed reviewer from **Jean-Philippe Labbé** to **Jean-Philippe Labbé, Xavier Caruso**



---

archive/issue_comments_293367.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nplease no \"from future import ...\"\n\nReturns should be Return",
    "created_at": "2021-04-01T19:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293367",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:22" align="right">comment:22</div>

please no "from future import ..."

Returns should be Return



---

archive/issue_events_287131.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T20:49:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287131"
}
```



---

archive/issue_events_287132.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2021-04-01T20:49:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287132"
}
```



---

archive/issue_comments_293368.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nAlso if pdflatex is not installed on the machine, some doctests fail.\nI don't know if this should be fixed but I think so because otherwise patchbots complain.",
    "created_at": "2021-04-01T20:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293368",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:23" align="right">comment:23</div>

Also if pdflatex is not installed on the machine, some doctests fail.
I don't know if this should be fixed but I think so because otherwise patchbots complain.



---

archive/issue_comments_293369.json:
```json
{
    "body": "Changed branch from **[u/caruso/tikzpicture](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/tikzpicture)** to **[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)**",
    "created_at": "2021-04-08T08:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293369",
    "user": "https://github.com/seblabbe"
}
```

Changed branch from **[u/caruso/tikzpicture](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/tikzpicture)** to **[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)**



---

archive/issue_comments_293370.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/665db0b0dd19254278d3cd74d96423a617781223\">665db0b</a></td><td><code>20343: removed from `__future__` imports</code></td></tr></table>\n",
    "created_at": "2021-04-08T08:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293370",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:24"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/665db0b0dd19254278d3cd74d96423a617781223">665db0b</a></td><td><code>20343: removed from `__future__` imports</code></td></tr></table>




---

archive/issue_comments_293371.json:
```json
{
    "body": "Changed commit from **[8cfc834](https://github.com/sagemath/sagetrac-mirror/commit/8cfc83431a25394be8b0dbc890d0dc0f72f54f56)** to **[665db0b](https://github.com/sagemath/sagetrac-mirror/commit/665db0b0dd19254278d3cd74d96423a617781223)**",
    "created_at": "2021-04-08T08:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293371",
    "user": "https://github.com/seblabbe"
}
```

Changed commit from **[8cfc834](https://github.com/sagemath/sagetrac-mirror/commit/8cfc83431a25394be8b0dbc890d0dc0f72f54f56)** to **[665db0b](https://github.com/sagemath/sagetrac-mirror/commit/665db0b0dd19254278d3cd74d96423a617781223)**



---

archive/issue_comments_293372.json:
```json
{
    "body": "Changed commit from **[665db0b](https://github.com/sagemath/sagetrac-mirror/commit/665db0b0dd19254278d3cd74d96423a617781223)** to **[0022eb2](https://github.com/sagemath/sagetrac-mirror/commit/0022eb2e8333597e2f4004e6b3a2d9363713df88)**",
    "created_at": "2021-04-08T08:32:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293372",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[665db0b](https://github.com/sagemath/sagetrac-mirror/commit/665db0b0dd19254278d3cd74d96423a617781223)** to **[0022eb2](https://github.com/sagemath/sagetrac-mirror/commit/0022eb2e8333597e2f4004e6b3a2d9363713df88)**



---

archive/issue_comments_293373.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0022eb2e8333597e2f4004e6b3a2d9363713df88\">0022eb2</a></td><td><code>20343: Returns -> Return</code></td></tr></table>\n",
    "created_at": "2021-04-08T08:32:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293373",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0022eb2e8333597e2f4004e6b3a2d9363713df88">0022eb2</a></td><td><code>20343: Returns -> Return</code></td></tr></table>




---

archive/issue_comments_293374.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03aa1bccb5640263e1d23867ee742b1ce9ac3ae0\">03aa1bc</a></td><td><code>20343: adding few optional tags</code></td></tr></table>\n",
    "created_at": "2021-04-08T08:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293374",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03aa1bccb5640263e1d23867ee742b1ce9ac3ae0">03aa1bc</a></td><td><code>20343: adding few optional tags</code></td></tr></table>




---

archive/issue_comments_293375.json:
```json
{
    "body": "Changed commit from **[0022eb2](https://github.com/sagemath/sagetrac-mirror/commit/0022eb2e8333597e2f4004e6b3a2d9363713df88)** to **[03aa1bc](https://github.com/sagemath/sagetrac-mirror/commit/03aa1bccb5640263e1d23867ee742b1ce9ac3ae0)**",
    "created_at": "2021-04-08T08:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293375",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0022eb2](https://github.com/sagemath/sagetrac-mirror/commit/0022eb2e8333597e2f4004e6b3a2d9363713df88)** to **[03aa1bc](https://github.com/sagemath/sagetrac-mirror/commit/03aa1bccb5640263e1d23867ee742b1ce9ac3ae0)**



---

archive/issue_events_287133.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2021-04-08T08:42:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287133"
}
```



---

archive/issue_events_287134.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2021-04-08T08:42:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287134"
}
```



---

archive/issue_comments_293376.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI added a bunch of `#optional latex` and `#optional imagemagick` tags. That should fix most of the issues.\n\nI also added one `# optional pdf2svg` for which I am not sure about. I don't know if the doctest framework know about this tag. I change to needs review to check that on the patchbot.",
    "created_at": "2021-04-08T08:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293376",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:27" align="right">comment:27</div>

I added a bunch of `#optional latex` and `#optional imagemagick` tags. That should fix most of the issues.

I also added one `# optional pdf2svg` for which I am not sure about. I don't know if the doctest framework know about this tag. I change to needs review to check that on the patchbot.



---

archive/issue_comments_293377.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nWhy do you make it part of Sage and not an independent Python module? These could easily be declared as optional/standard packages afterwards.",
    "created_at": "2021-04-08T10:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293377",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

Why do you make it part of Sage and not an independent Python module? These could easily be declared as optional/standard packages afterwards.



---

archive/issue_comments_293378.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nYes, I agree with that option too. Lately, I was thinking more about this option.\n\nBut, the module also depends on many things that are in Sage which would make this module quite unusable outside of sage as it is currently. For example:\n\nTo check if Graphviz is there:\n\n```\nfrom sage.features.graphviz import Graphviz\n```\n\nTo check if pdflatex, convert and other programs are available:\n\n```\nfrom sage.misc.latex import have_pdflatex, have_convert, have_program\n```\n\nTo load the latex macros from sage:\n\n```\nfrom sage.misc.latex import _Latex_prefs\nfrom sage.misc.latex_macros import sage_latex_macros\n```\n\nTo create a temporary file inside the sage folder of temporary files:\n\n```\nfrom sage.misc.temporary_file import tmp_filename\n```\n\nTo open viewers:\n\n```\nfrom sage.misc.viewer import browser\nfrom sage.misc.viewer import pdf_viewer\nfrom sage.misc.viewer import png_viewer\n```\n\nTo check whether we are in the JupyterNotebook or not:\n\n```\nfrom sage.repl.rich_output.backend_ipython import BackendIPythonNotebook\nfrom sage.repl.rich_output.buffer import OutputBuffer\n```",
    "created_at": "2021-04-08T15:26:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293378",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:29" align="right">comment:29</div>

Yes, I agree with that option too. Lately, I was thinking more about this option.

But, the module also depends on many things that are in Sage which would make this module quite unusable outside of sage as it is currently. For example:

To check if Graphviz is there:

```
from sage.features.graphviz import Graphviz
```

To check if pdflatex, convert and other programs are available:

```
from sage.misc.latex import have_pdflatex, have_convert, have_program
```

To load the latex macros from sage:

```
from sage.misc.latex import _Latex_prefs
from sage.misc.latex_macros import sage_latex_macros
```

To create a temporary file inside the sage folder of temporary files:

```
from sage.misc.temporary_file import tmp_filename
```

To open viewers:

```
from sage.misc.viewer import browser
from sage.misc.viewer import pdf_viewer
from sage.misc.viewer import png_viewer
```

To check whether we are in the JupyterNotebook or not:

```
from sage.repl.rich_output.backend_ipython import BackendIPythonNotebook
from sage.repl.rich_output.buffer import OutputBuffer
```



---

archive/issue_comments_293379.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d590342121285b6fea577b0defc65aece99258e\">7d59034</a></td><td><code>20343: adding few optional latex tags</code></td></tr></table>\n",
    "created_at": "2021-04-08T15:35:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293379",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d590342121285b6fea577b0defc65aece99258e">7d59034</a></td><td><code>20343: adding few optional latex tags</code></td></tr></table>




---

archive/issue_comments_293380.json:
```json
{
    "body": "Changed commit from **[03aa1bc](https://github.com/sagemath/sagetrac-mirror/commit/03aa1bccb5640263e1d23867ee742b1ce9ac3ae0)** to **[7d59034](https://github.com/sagemath/sagetrac-mirror/commit/7d590342121285b6fea577b0defc65aece99258e)**",
    "created_at": "2021-04-08T15:35:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293380",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[03aa1bc](https://github.com/sagemath/sagetrac-mirror/commit/03aa1bccb5640263e1d23867ee742b1ce9ac3ae0)** to **[7d59034](https://github.com/sagemath/sagetrac-mirror/commit/7d590342121285b6fea577b0defc65aece99258e)**



---

archive/issue_comments_293381.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@seblabbe](#comment:29):\n> Yes, I agree with that option too. Lately, I was thinking more about this option.\n\nThe main advantage with that option is that the package can change versions independently of sage.\n\n> But, the module also depends on many things that are in Sage which would make this module quite unusable outside of sage as it is currently. For example:\n\nThis would be a Python module that depends on sage. There is nothing bad with that situation. And this is not the only one.",
    "created_at": "2021-06-10T17:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293381",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@seblabbe](#comment:29):
> Yes, I agree with that option too. Lately, I was thinking more about this option.

The main advantage with that option is that the package can change versions independently of sage.

> But, the module also depends on many things that are in Sage which would make this module quite unusable outside of sage as it is currently. For example:

This would be a Python module that depends on sage. There is nothing bad with that situation. And this is not the only one.



---

archive/issue_comments_293382.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI am thinking about what to do now, either work on this ticket or create a new package. If I create a sagemath-tikzpicture package that imports many parts of sagemath, I will be responsible for fixing the package each time sagemath changes something that I import. On the other hand, if that modules goes into sagemath, then, it will become the responsability of the person which changes the dependencies to also fix the tikzpicture module. I agree with the idea of modularization, but for the above reason, I would prefer to make it go into sage. What do you think?",
    "created_at": "2021-06-24T08:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293382",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:32" align="right">comment:32</div>

I am thinking about what to do now, either work on this ticket or create a new package. If I create a sagemath-tikzpicture package that imports many parts of sagemath, I will be responsible for fixing the package each time sagemath changes something that I import. On the other hand, if that modules goes into sagemath, then, it will become the responsability of the person which changes the dependencies to also fix the tikzpicture module. I agree with the idea of modularization, but for the above reason, I would prefer to make it go into sage. What do you think?



---

archive/issue_comments_293383.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI prefer to have this directly in sage since I think that there are many other places in sage where it would be great to have a tikz output.",
    "created_at": "2021-07-02T15:24:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293383",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:33" align="right">comment:33</div>

I prefer to have this directly in sage since I think that there are many other places in sage where it would be great to have a tikz output.



---

archive/issue_comments_293384.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nBecause this module does not depend on any external libraries, there is nothing gained in the direction of modularization by making this a separate distribution package. \n\nBut perhaps you can find a better place for it than sage.misc? How about `sage.typeset` or `sage.plot`?",
    "created_at": "2021-07-02T15:51:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293384",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Because this module does not depend on any external libraries, there is nothing gained in the direction of modularization by making this a separate distribution package. 

But perhaps you can find a better place for it than sage.misc? How about `sage.typeset` or `sage.plot`?



---

archive/issue_comments_293385.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d84b6a39aa09f7a537094a2d5ed3aa6972bfb3f1\">d84b6a3</a></td><td><code>Merge branch 'u/slabbe/20343' of trac.sagemath.org:sage into 20343</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee56d320b739b3971c56f7d3ce9fa5dc83ad939d\">ee56d32</a></td><td><code>adding optional tag latex to one doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2692685c337f6a14ccc7047a82eb61e877b1948c\">2692685</a></td><td><code>20343:avoid use of doctest continuation since it is not one</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2acfe61163036af33e286c08ee6f974311eaa69a\">2acfe61</a></td><td><code>20343: misc/tikz_picture.py -> plot/tikzpicture.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/388a5f88e95a04758ab1ff88864273e8d58b4d59\">388a5f8</a></td><td><code>from misc.tikz_picture -> from plot.tikzpicture</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b04ea0d86f157d7bb6c5c0965e681f78d918fc62\">b04ea0d</a></td><td><code>updated authors and copyright</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2\">9f9f5ec</a></td><td><code>20343: redoing recent changes by Vincent Delecroix in slabbe package (check_call -> run); improved header documentation</code></td></tr></table>\n",
    "created_at": "2021-07-15T10:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293385",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d84b6a39aa09f7a537094a2d5ed3aa6972bfb3f1">d84b6a3</a></td><td><code>Merge branch 'u/slabbe/20343' of trac.sagemath.org:sage into 20343</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee56d320b739b3971c56f7d3ce9fa5dc83ad939d">ee56d32</a></td><td><code>adding optional tag latex to one doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2692685c337f6a14ccc7047a82eb61e877b1948c">2692685</a></td><td><code>20343:avoid use of doctest continuation since it is not one</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2acfe61163036af33e286c08ee6f974311eaa69a">2acfe61</a></td><td><code>20343: misc/tikz_picture.py -> plot/tikzpicture.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/388a5f88e95a04758ab1ff88864273e8d58b4d59">388a5f8</a></td><td><code>from misc.tikz_picture -> from plot.tikzpicture</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b04ea0d86f157d7bb6c5c0965e681f78d918fc62">b04ea0d</a></td><td><code>updated authors and copyright</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2">9f9f5ec</a></td><td><code>20343: redoing recent changes by Vincent Delecroix in slabbe package (check_call -> run); improved header documentation</code></td></tr></table>




---

archive/issue_comments_293386.json:
```json
{
    "body": "Changed commit from **[7d59034](https://github.com/sagemath/sagetrac-mirror/commit/7d590342121285b6fea577b0defc65aece99258e)** to **[9f9f5ec](https://github.com/sagemath/sagetrac-mirror/commit/9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2)**",
    "created_at": "2021-07-15T10:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293386",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7d59034](https://github.com/sagemath/sagetrac-mirror/commit/7d590342121285b6fea577b0defc65aece99258e)** to **[9f9f5ec](https://github.com/sagemath/sagetrac-mirror/commit/9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2)**



---

archive/issue_comments_293387.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,17 +1,67 @@\n-Importing `TikzPicture` class from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.\n+Importing `TikzPicture` module from optional [SageMath](../wiki/SageMath) package [slabbe-0.6.2](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath).\n \n One example:\n \n ```\n-sage: from sage.misc.tikzpicture import TikzPicture\n+sage: from sage.plot.tikzpicture import TikzPicture\n sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]\n sage: P = Polyhedron(vertices=V).polar()\n sage: s = P.projection().tikz([674,108,-731],112)\n sage: t = TikzPicture(s)\n-sage: t.pdf()\n+sage: t.pdf()                  # opens the pdf in a viewer                                                        \n+'/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'\n+sage: t.pdf('image.pdf')                                                                                   \n+'/home/slabbe/image.pdf'\n ```\n \n-Second example:\n+It may create the image into png format (translation pdf -> png made with convert from imagemagick) or svg format (translation pdf -> svg made with pdf2svg):\n+\n+```\n+sage: t.png()                                                                                              \n+'/home/slabbe/.sage/temp/miami/5032/tikz_v0s5kl9l.png'\n+sage: t.svg()                                                                                              \n+'/home/slabbe/.sage/temp/miami/5032/tikz_sfww636u.svg'\n+sage: t.tex()                                                                                              \n+'/home/slabbe/.sage/temp/miami/5032/tikz_xxwqfjh5.tex'\n+```\n+\n+In a Jupyter notebook, this shows the picture below the cell (using rich repr):\n+\n+```\n+sage: t\n+```\n+\n+In the terminal, this shows the header and tail of the tikzpicture code:\n+\n+```\n+sage: t                                                                                                    \n+\\documentclass[tikz]{standalone}\n+\\usepackage{amsmath}\n+\\begin{document}\n+\\begin{tikzpicture}%\n+\t[x={(0.249656cm, -0.577639cm)},\n+\ty={(0.777700cm, -0.358578cm)},\n+\tz={(-0.576936cm, -0.733318cm)},\n+\tscale=1.000000,\n+---\n+91 lines not printed (5169 characters in total).\n+Use print to see the full content.\n+---\n+\\node[vertex] at (0.00000, -1.00000, 0.00000)     {};\n+\\node[vertex] at (-0.50000, -0.50000, -0.50000)     {};\n+%%\n+%%\n+\\end{tikzpicture}\n+\\end{document}\n+```\n+\n+Use `print` to see the full content:\n+\n+```\n+sage: print(t) \n+```\n+\n+A second example shows that it is faster than view and better (avoids to crop the vertices):\n \n ```\n sage: g = graphs.PetersenGraph()\n@@ -28,13 +78,13 @@\n Wall time: 6.06 s\n ```\n \n-Also, if dot2tex and graphviz available:\n+Also, if dot2tex and graphviz available, one may directly construct a tikzpicture from a sagemath graph:\n \n ```\n sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex\n ```\n \n-I intend to make further improvements to this module during the next year. Also, I will wait until somebody tells me he is willing to review this module before publishing a branch here.\n+The `tikzpicture.py` was developped within optional package `slabbe` for the last 6 years. Its interface should be stable enough to go into sage now.\n \n Meanwhile any user can use this tikzpicture module by installing my package:\n \n``````\n",
    "created_at": "2021-07-15T10:26:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293387",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,17 +1,67 @@
-Importing `TikzPicture` class from my optional Sage package [slabbe-0.2.spkg](https://github.com/seblabbe/slabbe) into Sage.
+Importing `TikzPicture` module from optional [SageMath](../wiki/SageMath) package [slabbe-0.6.2](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath).
 
 One example:
 
 ```
-sage: from sage.misc.tikzpicture import TikzPicture
+sage: from sage.plot.tikzpicture import TikzPicture
 sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]
 sage: P = Polyhedron(vertices=V).polar()
 sage: s = P.projection().tikz([674,108,-731],112)
 sage: t = TikzPicture(s)
-sage: t.pdf()
+sage: t.pdf()                  # opens the pdf in a viewer                                                        
+'/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'
+sage: t.pdf('image.pdf')                                                                                   
+'/home/slabbe/image.pdf'
 ```
 
-Second example:
+It may create the image into png format (translation pdf -> png made with convert from imagemagick) or svg format (translation pdf -> svg made with pdf2svg):
+
+```
+sage: t.png()                                                                                              
+'/home/slabbe/.sage/temp/miami/5032/tikz_v0s5kl9l.png'
+sage: t.svg()                                                                                              
+'/home/slabbe/.sage/temp/miami/5032/tikz_sfww636u.svg'
+sage: t.tex()                                                                                              
+'/home/slabbe/.sage/temp/miami/5032/tikz_xxwqfjh5.tex'
+```
+
+In a Jupyter notebook, this shows the picture below the cell (using rich repr):
+
+```
+sage: t
+```
+
+In the terminal, this shows the header and tail of the tikzpicture code:
+
+```
+sage: t                                                                                                    
+\documentclass[tikz]{standalone}
+\usepackage{amsmath}
+\begin{document}
+\begin{tikzpicture}%
+	[x={(0.249656cm, -0.577639cm)},
+	y={(0.777700cm, -0.358578cm)},
+	z={(-0.576936cm, -0.733318cm)},
+	scale=1.000000,
+---
+91 lines not printed (5169 characters in total).
+Use print to see the full content.
+---
+\node[vertex] at (0.00000, -1.00000, 0.00000)     {};
+\node[vertex] at (-0.50000, -0.50000, -0.50000)     {};
+%%
+%%
+\end{tikzpicture}
+\end{document}
+```
+
+Use `print` to see the full content:
+
+```
+sage: print(t) 
+```
+
+A second example shows that it is faster than view and better (avoids to crop the vertices):
 
 ```
 sage: g = graphs.PetersenGraph()
@@ -28,13 +78,13 @@
 Wall time: 6.06 s
 ```
 
-Also, if dot2tex and graphviz available:
+Also, if dot2tex and graphviz available, one may directly construct a tikzpicture from a sagemath graph:
 
 ```
 sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex
 ```
 
-I intend to make further improvements to this module during the next year. Also, I will wait until somebody tells me he is willing to review this module before publishing a branch here.
+The `tikzpicture.py` was developped within optional package `slabbe` for the last 6 years. Its interface should be stable enough to go into sage now.
 
 Meanwhile any user can use this tikzpicture module by installing my package:
 
``````




---

archive/issue_events_287135.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2021-07-15T10:26:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "title_is": "Adding sage/plot/tikzpicture.py",
    "title_was": "Adding sage/misc/tikzpicture.py",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287135"
}
```



---

archive/issue_comments_293388.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,9 +8,9 @@\n sage: P = Polyhedron(vertices=V).polar()\n sage: s = P.projection().tikz([674,108,-731],112)\n sage: t = TikzPicture(s)\n-sage: t.pdf()                  # opens the pdf in a viewer                                                        \n+sage: t.pdf()             # opens the pdf in a viewer                                                        \n '/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'\n-sage: t.pdf('image.pdf')                                                                                   \n+sage: t.pdf('image.pdf')  # when a filename is provided, it does not open the pdf in a viewer                                            \n '/home/slabbe/image.pdf'\n ```\n \n``````\n",
    "created_at": "2021-07-15T10:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293388",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,9 +8,9 @@
 sage: P = Polyhedron(vertices=V).polar()
 sage: s = P.projection().tikz([674,108,-731],112)
 sage: t = TikzPicture(s)
-sage: t.pdf()                  # opens the pdf in a viewer                                                        
+sage: t.pdf()             # opens the pdf in a viewer                                                        
 '/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'
-sage: t.pdf('image.pdf')                                                                                   
+sage: t.pdf('image.pdf')  # when a filename is provided, it does not open the pdf in a viewer                                            
 '/home/slabbe/image.pdf'
 ```
 
``````




---

archive/issue_comments_293389.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n sage: t = TikzPicture(s)\n sage: t.pdf()             # opens the pdf in a viewer                                                        \n '/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'\n-sage: t.pdf('image.pdf')  # when a filename is provided, it does not open the pdf in a viewer                                            \n+sage: t.pdf('image.pdf')  # when a filename is provided, it doesn't open in a viewer                                            \n '/home/slabbe/image.pdf'\n ```\n \n``````\n",
    "created_at": "2021-07-15T10:28:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293389",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 sage: t = TikzPicture(s)
 sage: t.pdf()             # opens the pdf in a viewer                                                        
 '/home/slabbe/.sage/temp/miami/5032/tikz_gvem9vu8.pdf'
-sage: t.pdf('image.pdf')  # when a filename is provided, it does not open the pdf in a viewer                                            
+sage: t.pdf('image.pdf')  # when a filename is provided, it doesn't open in a viewer                                            
 '/home/slabbe/image.pdf'
 ```
 
``````




---

archive/issue_comments_293390.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,12 +17,9 @@\n It may create the image into png format (translation pdf -> png made with convert from imagemagick) or svg format (translation pdf -> svg made with pdf2svg):\n \n ```\n-sage: t.png()                                                                                              \n-'/home/slabbe/.sage/temp/miami/5032/tikz_v0s5kl9l.png'\n-sage: t.svg()                                                                                              \n-'/home/slabbe/.sage/temp/miami/5032/tikz_sfww636u.svg'\n-sage: t.tex()                                                                                              \n-'/home/slabbe/.sage/temp/miami/5032/tikz_xxwqfjh5.tex'\n+sage: path_to_file = t.png()                                              \n+sage: path_to_file = t.svg()\n+sage: path_to_file = t.tex()\n ```\n \n In a Jupyter notebook, this shows the picture below the cell (using rich repr):\n``````\n",
    "created_at": "2021-07-15T10:29:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293390",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,12 +17,9 @@
 It may create the image into png format (translation pdf -> png made with convert from imagemagick) or svg format (translation pdf -> svg made with pdf2svg):
 
 ```
-sage: t.png()                                                                                              
-'/home/slabbe/.sage/temp/miami/5032/tikz_v0s5kl9l.png'
-sage: t.svg()                                                                                              
-'/home/slabbe/.sage/temp/miami/5032/tikz_sfww636u.svg'
-sage: t.tex()                                                                                              
-'/home/slabbe/.sage/temp/miami/5032/tikz_xxwqfjh5.tex'
+sage: path_to_file = t.png()                                              
+sage: path_to_file = t.svg()
+sage: path_to_file = t.tex()
 ```
 
 In a Jupyter notebook, this shows the picture below the cell (using rich repr):
``````




---

archive/issue_comments_293391.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -81,9 +81,9 @@\n sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex\n ```\n \n-The `tikzpicture.py` was developped within optional package `slabbe` for the last 6 years. Its interface should be stable enough to go into sage now.\n+The `tikzpicture.py` was developped within optional package `slabbe` since 2015. Its interface should be stable enough to go into sage now.\n \n-Meanwhile any user can use this tikzpicture module by installing my package:\n+Meanwhile any user can use this tikzpicture module by installing the package:\n \n ```\n sage -pip install slabbe\n``````\n",
    "created_at": "2021-07-15T10:31:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293391",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -81,9 +81,9 @@
 sage: t = TikzPicture.from_graph(g, prog='dot')  # optional: dot2tex
 ```
 
-The `tikzpicture.py` was developped within optional package `slabbe` for the last 6 years. Its interface should be stable enough to go into sage now.
+The `tikzpicture.py` was developped within optional package `slabbe` since 2015. Its interface should be stable enough to go into sage now.
 
-Meanwhile any user can use this tikzpicture module by installing my package:
+Meanwhile any user can use this tikzpicture module by installing the package:
 
 ```
 sage -pip install slabbe
``````




---

archive/issue_comments_293392.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI think we are close to it. The doctests work on my machine:\n\n```\nsage -t --optional=sage,optional,external --long --show-skipped tikzpicture.py \n```\n\ngives\n\n```\nUsing --optional=4ti2,ccache,cryptominisat,debian,dot2tex,e_antic,external,fricas,glucose,latte_int,lidia,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin,sage_spkg\nExternal software to be detected: cplex,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,macaulay2,magma,maple,mathematica,matlab,octave,pandoc,rubiks,scilab\nDoctesting 1 file.\nsage -t --long --random-seed=0 tikzpicture.py\n    19 not tested tests not run\n    1 pdf2svg test not run\n    0 tests not run because we ran out of time\n    [161 tests, 15.43 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 15.6 seconds\n    cpu time: 8.2 seconds\n    cumulative wall time: 15.4 seconds\nExternal software detected for doctesting: imagemagick,latex\n```\n\nTODO:\n\n- Let's see what the patchbot says.\n- The doctest tagged with `pdf2svg` is not recognized by the `--optional=external`. Maybe something needs to be done on the detection of external packages.\n- One issue is that the current `_rich_repr_` always uses png instead of svg in the Jupyter Notebook even if I define `'svg'` before `'png'` in the `prefer_vector` tuple. I think that issue can be dealt in a later ticket.\n\nThat's it! Needs review!",
    "created_at": "2021-07-15T10:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293392",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:41" align="right">comment:41</div>

I think we are close to it. The doctests work on my machine:

```
sage -t --optional=sage,optional,external --long --show-skipped tikzpicture.py 
```

gives

```
Using --optional=4ti2,ccache,cryptominisat,debian,dot2tex,e_antic,external,fricas,glucose,latte_int,lidia,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin,sage_spkg
External software to be detected: cplex,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,macaulay2,magma,maple,mathematica,matlab,octave,pandoc,rubiks,scilab
Doctesting 1 file.
sage -t --long --random-seed=0 tikzpicture.py
    19 not tested tests not run
    1 pdf2svg test not run
    0 tests not run because we ran out of time
    [161 tests, 15.43 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 15.6 seconds
    cpu time: 8.2 seconds
    cumulative wall time: 15.4 seconds
External software detected for doctesting: imagemagick,latex
```

TODO:

- Let's see what the patchbot says.
- The doctest tagged with `pdf2svg` is not recognized by the `--optional=external`. Maybe something needs to be done on the detection of external packages.
- One issue is that the current `_rich_repr_` always uses png instead of svg in the Jupyter Notebook even if I define `'svg'` before `'png'` in the `prefer_vector` tuple. I think that issue can be dealt in a later ticket.

That's it! Needs review!



---

archive/issue_comments_293393.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThis ad-hoc system package advice \n\n```\n+        if not have_program('pdf2svg'):\n+            raise RuntimeError(\"pdf2svg does not seem to be installed. \"\n+                    \"Install it for example with ``brew install pdf2svg``\"\n+                    \" or ``apt-get install pdf2svg``.\")\n+\n```\nshould be replaced by a `Feature` and an spkg `pdf2svg` with `distros/` information from\nhttps://repology.org/project/pdf2svg/versions",
    "created_at": "2021-07-15T16:39:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293393",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

This ad-hoc system package advice 

```
+        if not have_program('pdf2svg'):
+            raise RuntimeError("pdf2svg does not seem to be installed. "
+                    "Install it for example with ``brew install pdf2svg``"
+                    " or ``apt-get install pdf2svg``.")
+
```
should be replaced by a `Feature` and an spkg `pdf2svg` with `distros/` information from
https://repology.org/project/pdf2svg/versions



---

archive/issue_comments_293394.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nOk, I will add a Feature for pdf2svg.\n\nAlso, patchbot says this:\n\n```\nsrc/sage/plot/tikzpicture.py:98:1 'subprocess.CalledProcessError' imported but unused\nfound 1 pyflakes errors in the modified files\n```\n\nAnother TODO is to allow to get some verbosity useful when compilation of the picture breaks. I am writting it here not to forget.\n\nI will work on that soon or later.",
    "created_at": "2021-07-15T20:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293394",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:43" align="right">comment:43</div>

Ok, I will add a Feature for pdf2svg.

Also, patchbot says this:

```
src/sage/plot/tikzpicture.py:98:1 'subprocess.CalledProcessError' imported but unused
found 1 pyflakes errors in the modified files
```

Another TODO is to allow to get some verbosity useful when compilation of the picture breaks. I am writting it here not to forget.

I will work on that soon or later.



---

archive/issue_events_287136.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-26T18:08:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287136"
}
```



---

archive/issue_events_287137.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-26T18:08:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287137"
}
```



---

archive/issue_events_287138.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:26:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287138"
}
```



---

archive/issue_events_287139.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:26:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287139"
}
```



---

archive/issue_comments_293395.json:
```json
{
    "body": "Dependencies: **#32650**",
    "created_at": "2021-11-02T16:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293395",
    "user": "https://github.com/seblabbe"
}
```

Dependencies: **#32650**



---

archive/issue_comments_293396.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a96e94d31d38c59db30d1995711203777cd67a6f\">a96e94d</a></td><td><code>32650: Creating feature pdf2svg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/870d461bdd5484894ff3d7c030f33757bea99bd2\">870d461</a></td><td><code>32650: Creating features latex, xelatex, pdflatex, lualatex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/385569e797b35f16a1f336ec25bfa8126bfdf969\">385569e</a></td><td><code>32650: adding latex, xelatex, pdflatex, lualatex, pdf2svg, dvipng to doctest/external.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3291d8191a32978090febfb343fe2af39b43ac2\">f3291d8</a></td><td><code>32650: using features instead of have_program in misc/latex.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4559932b6311de0a825154947daaedbda9099e0\">d455993</a></td><td><code>32650: using features in plot/animate.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf02094eda368e2e9ad381b0bad65e06c56c383a\">cf02094</a></td><td><code>32650: using features in plot/graphics.py and plot/multigraphics.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28f1f4a5fef37adebff969b86913533501f8fa76\">28f1f4a</a></td><td><code>32650: deprecating have_* functions in misc/latex.py in favor of features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d9414ddc4ec72d6b32ac88e9aa94a0fe2433dab\">5d9414d</a></td><td><code>32650: .. note -> .. NOTE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d21ec71a3f92b2cbeb1a6a933c118cdb063a3fe\">6d21ec7</a></td><td><code>Merge branch #20343 onto #32650</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80151c25e7aa040973b6f6268f49ddc3b521cfd7\">80151c2</a></td><td><code>20343: using features instead of have_program, have_pdflatex, have_convert</code></td></tr></table>\n",
    "created_at": "2021-11-04T10:56:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293396",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a96e94d31d38c59db30d1995711203777cd67a6f">a96e94d</a></td><td><code>32650: Creating feature pdf2svg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/870d461bdd5484894ff3d7c030f33757bea99bd2">870d461</a></td><td><code>32650: Creating features latex, xelatex, pdflatex, lualatex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/385569e797b35f16a1f336ec25bfa8126bfdf969">385569e</a></td><td><code>32650: adding latex, xelatex, pdflatex, lualatex, pdf2svg, dvipng to doctest/external.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3291d8191a32978090febfb343fe2af39b43ac2">f3291d8</a></td><td><code>32650: using features instead of have_program in misc/latex.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4559932b6311de0a825154947daaedbda9099e0">d455993</a></td><td><code>32650: using features in plot/animate.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf02094eda368e2e9ad381b0bad65e06c56c383a">cf02094</a></td><td><code>32650: using features in plot/graphics.py and plot/multigraphics.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28f1f4a5fef37adebff969b86913533501f8fa76">28f1f4a</a></td><td><code>32650: deprecating have_* functions in misc/latex.py in favor of features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d9414ddc4ec72d6b32ac88e9aa94a0fe2433dab">5d9414d</a></td><td><code>32650: .. note -> .. NOTE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d21ec71a3f92b2cbeb1a6a933c118cdb063a3fe">6d21ec7</a></td><td><code>Merge branch #20343 onto #32650</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80151c25e7aa040973b6f6268f49ddc3b521cfd7">80151c2</a></td><td><code>20343: using features instead of have_program, have_pdflatex, have_convert</code></td></tr></table>




---

archive/issue_comments_293397.json:
```json
{
    "body": "Changed commit from **[9f9f5ec](https://github.com/sagemath/sagetrac-mirror/commit/9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2)** to **[80151c2](https://github.com/sagemath/sagetrac-mirror/commit/80151c25e7aa040973b6f6268f49ddc3b521cfd7)**",
    "created_at": "2021-11-04T10:56:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293397",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9f9f5ec](https://github.com/sagemath/sagetrac-mirror/commit/9f9f5ec90bd47bae4ffe1a3e838f1cad229619a2)** to **[80151c2](https://github.com/sagemath/sagetrac-mirror/commit/80151c25e7aa040973b6f6268f49ddc3b521cfd7)**



---

archive/issue_comments_293398.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI rebased on top of current #32650.\n\nCurrent TODOS are:\n\n- verbosity when compilation breaks\n- add distro info stuff in pdf2svg (should be done in #32650)\n- improve rich repr to use svg not always png",
    "created_at": "2021-11-04T11:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293398",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:48" align="right">comment:48</div>

I rebased on top of current #32650.

Current TODOS are:

- verbosity when compilation breaks
- add distro info stuff in pdf2svg (should be done in #32650)
- improve rich repr to use svg not always png



---

archive/issue_comments_293399.json:
```json
{
    "body": "Changed commit from **[80151c2](https://github.com/sagemath/sagetrac-mirror/commit/80151c25e7aa040973b6f6268f49ddc3b521cfd7)** to **[997b8f1](https://github.com/sagemath/sagetrac-mirror/commit/997b8f1a58afe1b8eae04a030ec5b769fa8463b7)**",
    "created_at": "2021-11-04T14:23:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293399",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[80151c2](https://github.com/sagemath/sagetrac-mirror/commit/80151c25e7aa040973b6f6268f49ddc3b521cfd7)** to **[997b8f1](https://github.com/sagemath/sagetrac-mirror/commit/997b8f1a58afe1b8eae04a030ec5b769fa8463b7)**



---

archive/issue_comments_293400.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/997b8f1a58afe1b8eae04a030ec5b769fa8463b7\">997b8f1</a></td><td><code>20343: print the log when pdflatex fails compile the tikz image</code></td></tr></table>\n",
    "created_at": "2021-11-04T14:23:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293400",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/997b8f1a58afe1b8eae04a030ec5b769fa8463b7">997b8f1</a></td><td><code>20343: print the log when pdflatex fails compile the tikz image</code></td></tr></table>




---

archive/issue_events_287140.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2021-11-04T22:15:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287140"
}
```



---

archive/issue_events_287141.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2021-11-04T22:15:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287141"
}
```



---

archive/issue_comments_293401.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nWith the recent commit and subsequent work done in #32650, the remainings TODOs are:\n\n- improve rich repr to use svg not always png \n\nand as I suggested before, this one could be dealt in another ticket as it is still functional with png's in the Jupyter notebook.\n\nNeeds review!",
    "created_at": "2021-11-04T22:15:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293401",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:50" align="right">comment:50</div>

With the recent commit and subsequent work done in #32650, the remainings TODOs are:

- improve rich repr to use svg not always png 

and as I suggested before, this one could be dealt in another ticket as it is still functional with png's in the Jupyter notebook.

Needs review!



---

archive/issue_comments_293402.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -94,3 +94,8 @@\n ```\n sage: from slabbe import TikzPicture\n ```\n+\n+An example of usage of this module can be found at this url:\n+https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n+associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one changes `from slabbe import TikzPicture` by `from sage.plot.tikzpicture import TikzPicture` at the beginning (oups! no, it will not work since the import is done within the package).\n+For the review, one may check\n``````\n",
    "created_at": "2021-11-25T10:56:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293402",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -94,3 +94,8 @@
 ```
 sage: from slabbe import TikzPicture
 ```
+
+An example of usage of this module can be found at this url:
+https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb
+associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one changes `from slabbe import TikzPicture` by `from sage.plot.tikzpicture import TikzPicture` at the beginning (oups! no, it will not work since the import is done within the package).
+For the review, one may check
``````




---

archive/issue_comments_293403.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -98,4 +98,3 @@\n An example of usage of this module can be found at this url:\n https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one changes `from slabbe import TikzPicture` by `from sage.plot.tikzpicture import TikzPicture` at the beginning (oups! no, it will not work since the import is done within the package).\n-For the review, one may check\n``````\n",
    "created_at": "2021-11-25T10:57:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293403",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -98,4 +98,3 @@
 An example of usage of this module can be found at this url:
 https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb
 associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one changes `from slabbe import TikzPicture` by `from sage.plot.tikzpicture import TikzPicture` at the beginning (oups! no, it will not work since the import is done within the package).
-For the review, one may check
``````




---

archive/issue_comments_293404.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -97,4 +97,4 @@\n \n An example of usage of this module can be found at this url:\n https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n-associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one changes `from slabbe import TikzPicture` by `from sage.plot.tikzpicture import TikzPicture` at the beginning (oups! no, it will not work since the import is done within the package).\n+associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one uses `from sage.plot.tikzpicture import TikzPicture` and check that tikzpicture created within slabbe still works within the tikzpicture module introduced in this ticket.\n``````\n",
    "created_at": "2021-11-25T11:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293404",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -97,4 +97,4 @@
 
 An example of usage of this module can be found at this url:
 https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb
-associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one changes `from slabbe import TikzPicture` by `from sage.plot.tikzpicture import TikzPicture` at the beginning (oups! no, it will not work since the import is done within the package).
+associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one uses `from sage.plot.tikzpicture import TikzPicture` and check that tikzpicture created within slabbe still works within the tikzpicture module introduced in this ticket.
``````




---

archive/issue_comments_293405.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nIn a similar direction as [comment:17](#comment:17), I think that the `from_graph...` and `from_poset` class methods should rather be changed to methods of `Graph` and `Poset`.",
    "created_at": "2021-11-25T18:19:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293405",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">comment:54</div>

In a similar direction as [comment:17](#comment:17), I think that the `from_graph...` and `from_poset` class methods should rather be changed to methods of `Graph` and `Poset`.



---

archive/issue_comments_293406.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nAlso https://pypi.org/project/tikzplotlib/ looks interesting",
    "created_at": "2021-11-25T18:20:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293406",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:55" align="right">comment:55</div>

Also https://pypi.org/project/tikzplotlib/ looks interesting



---

archive/issue_comments_293407.json:
```json
{
    "body": "Changed commit from **[997b8f1](https://github.com/sagemath/sagetrac-mirror/commit/997b8f1a58afe1b8eae04a030ec5b769fa8463b7)** to **[6a085cf](https://github.com/sagemath/sagetrac-mirror/commit/6a085cfdf1c930e4322a43d9d77356c2128ed913)**",
    "created_at": "2021-12-09T10:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293407",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[997b8f1](https://github.com/sagemath/sagetrac-mirror/commit/997b8f1a58afe1b8eae04a030ec5b769fa8463b7)** to **[6a085cf](https://github.com/sagemath/sagetrac-mirror/commit/6a085cfdf1c930e4322a43d9d77356c2128ed913)**



---

archive/issue_comments_293408.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9c949241b404ae9c8cecdf5ff50979362c1f99e\">f9c9492</a></td><td><code>20343: few small improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a085cfdf1c930e4322a43d9d77356c2128ed913\">6a085cf</a></td><td><code>20343: improving first example shown in documentation</code></td></tr></table>\n",
    "created_at": "2021-12-09T10:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293408",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9c949241b404ae9c8cecdf5ff50979362c1f99e">f9c9492</a></td><td><code>20343: few small improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a085cfdf1c930e4322a43d9d77356c2128ed913">6a085cf</a></td><td><code>20343: improving first example shown in documentation</code></td></tr></table>




---

archive/issue_comments_293409.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nI added two commits to do few improvements.",
    "created_at": "2021-12-09T10:07:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293409",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:57" align="right">comment:57</div>

I added two commits to do few improvements.



---

archive/issue_comments_293410.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@mkoeppe](#comment:54):\n> In a similar direction as [comment:17](#comment:17), I think that the `from_graph...` and `from_poset` class methods should rather be changed to methods of `Graph` and `Poset`.\n\nIf you want to go in that direction, we need to have a design discussion before spending time changing the graph code. As you know,\n\n```\nsage: g = graphs.PetersenGraph()\nsage: hasattr(g, '_latex_')\nTrue\n```\n\nwhich returns an object of type:\n\n```\nsage: type(latex(g))\n<class 'sage.misc.latex.LatexExpr'>\n```\n\nThis latex expression starts with `\\begin{tikzpicture}` and ends with `\\end{tikzpicture}` which also depends on `\\usepackage{tkz-graph}`:\n\n```\nsage: latex(g)\n\\begin{tikzpicture}                                                                                    \n\\definecolor{cv0}{rgb}{0.0,0.0,0.0}                                                                    \n\\definecolor{cfv0}{rgb}{1.0,1.0,1.0}                                                                   \n...\n\\Edge[lw=0.1cm,style={color=cv6v9,},](v6)(v9)\n\\Edge[lw=0.1cm,style={color=cv7v9,},](v7)(v9)\n%\n\\end{tikzpicture}\n```\n\nNotice that this output can be provided to `TikzPicture` with no problem with `t = TikzPicture(latex(g), usepackage=['tkz-graph'])` and `t.pdf()` works etc.\n\nI don't think here we want to replace the output of `g._latex_` by an object of type `TikzPicture` since a such change would break a lot of code.\n\nAn option is to create a new method `def tikz(self)` instead. I can do something like that. It could return the `TikzPicture(latex(g), usepackage=['tkz-graph'])` by default and if one asks, it could use the graphviz + dot2tex output instead. But, I was thinking of doing this in another ticket as a follow up, as this will open discussions that will just make longer before this ticket can go in.\n\nOr maybe you would rather like to remove the `from_graph` and the `from_poset` methods to avoid to have to maintain them in the future? Well, currently, the `from_graph` also allows to merge the multiple edges which is something that would not go in the `tikz` method of a graph. Also, keeping the `from_graph` would make the passage from this module to sage easier for me because I have been using this method over and over and over in my research code.",
    "created_at": "2021-12-09T10:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293410",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@mkoeppe](#comment:54):
> In a similar direction as [comment:17](#comment:17), I think that the `from_graph...` and `from_poset` class methods should rather be changed to methods of `Graph` and `Poset`.

If you want to go in that direction, we need to have a design discussion before spending time changing the graph code. As you know,

```
sage: g = graphs.PetersenGraph()
sage: hasattr(g, '_latex_')
True
```

which returns an object of type:

```
sage: type(latex(g))
<class 'sage.misc.latex.LatexExpr'>
```

This latex expression starts with `\begin{tikzpicture}` and ends with `\end{tikzpicture}` which also depends on `\usepackage{tkz-graph}`:

```
sage: latex(g)
\begin{tikzpicture}                                                                                    
\definecolor{cv0}{rgb}{0.0,0.0,0.0}                                                                    
\definecolor{cfv0}{rgb}{1.0,1.0,1.0}                                                                   
...
\Edge[lw=0.1cm,style={color=cv6v9,},](v6)(v9)
\Edge[lw=0.1cm,style={color=cv7v9,},](v7)(v9)
%
\end{tikzpicture}
```

Notice that this output can be provided to `TikzPicture` with no problem with `t = TikzPicture(latex(g), usepackage=['tkz-graph'])` and `t.pdf()` works etc.

I don't think here we want to replace the output of `g._latex_` by an object of type `TikzPicture` since a such change would break a lot of code.

An option is to create a new method `def tikz(self)` instead. I can do something like that. It could return the `TikzPicture(latex(g), usepackage=['tkz-graph'])` by default and if one asks, it could use the graphviz + dot2tex output instead. But, I was thinking of doing this in another ticket as a follow up, as this will open discussions that will just make longer before this ticket can go in.

Or maybe you would rather like to remove the `from_graph` and the `from_poset` methods to avoid to have to maintain them in the future? Well, currently, the `from_graph` also allows to merge the multiple edges which is something that would not go in the `tikz` method of a graph. Also, keeping the `from_graph` would make the passage from this module to sage easier for me because I have been using this method over and over and over in my research code.



---

archive/issue_comments_293411.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nI created ticket #33002 for the addition of a method to return an object of type `TikzPicture` in graph, posets and polyhedron code.",
    "created_at": "2021-12-09T10:36:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293411",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:59" align="right">comment:59</div>

I created ticket #33002 for the addition of a method to return an object of type `TikzPicture` in graph, posets and polyhedron code.



---

archive/issue_comments_293412.json:
```json
{
    "body": "Changed commit from **[6a085cf](https://github.com/sagemath/sagetrac-mirror/commit/6a085cfdf1c930e4322a43d9d77356c2128ed913)** to **[d6d473a](https://github.com/sagemath/sagetrac-mirror/commit/d6d473a1400059b385104ed4220097fde906e82f)**",
    "created_at": "2021-12-09T10:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293412",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6a085cf](https://github.com/sagemath/sagetrac-mirror/commit/6a085cfdf1c930e4322a43d9d77356c2128ed913)** to **[d6d473a](https://github.com/sagemath/sagetrac-mirror/commit/d6d473a1400059b385104ed4220097fde906e82f)**



---

archive/issue_comments_293413.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6d473a1400059b385104ed4220097fde906e82f\">d6d473a</a></td><td><code>20343: fixing a bug, png output was not working</code></td></tr></table>\n",
    "created_at": "2021-12-09T10:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293413",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6d473a1400059b385104ed4220097fde906e82f">d6d473a</a></td><td><code>20343: fixing a bug, png output was not working</code></td></tr></table>




---

archive/issue_comments_293414.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@seblabbe](#comment:50):\n> With the recent commit and subsequent work done in #32650, the remainings TODOs are:\n> \n> - improve rich repr to use svg not always png \n> \n> and as I suggested before, this one could be dealt in another ticket as it is still functional with png's in the Jupyter notebook.\n\nAlso, I want to say that I believe that the `sage.repl` code is broken with respect to showing svg files.\n\n```\n# Jupyter cell 1\ng = graphs.PetersenGraph()\nfrom sage.plot.tikzpicture import TikzPicture\nt = TikzPicture(latex(g), usepackage=['tkz-graph'])\nt # works: it shows a png\n```\n\n```\n# Jupyter cell 2\nfrom sage.repl.rich_output import get_display_manager\ndm = get_display_manager()\nassert dm.preferences.graphics is None\ndm.preferences.graphics = 'raster'\nt  # works: it shows a png\n```\n\n\n```\n# Jupyter cell 3\ndm.preferences.graphics = 'vector'\nt   # broken: it does not show anything\n```\n\nThe following shows that the Jupyter notebook is able to handle a svg correctly:\n\n```\n# Jupyter cell 4\nt.svg('a.svg')\nfrom IPython.core.display import SVG\nSVG(filename='a.svg')\n```\n\nI suggest to fix the issue with the showing of svg in another ticket.",
    "created_at": "2021-12-09T11:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293414",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@seblabbe](#comment:50):
> With the recent commit and subsequent work done in #32650, the remainings TODOs are:
> 
> - improve rich repr to use svg not always png 
> 
> and as I suggested before, this one could be dealt in another ticket as it is still functional with png's in the Jupyter notebook.

Also, I want to say that I believe that the `sage.repl` code is broken with respect to showing svg files.

```
# Jupyter cell 1
g = graphs.PetersenGraph()
from sage.plot.tikzpicture import TikzPicture
t = TikzPicture(latex(g), usepackage=['tkz-graph'])
t # works: it shows a png
```

```
# Jupyter cell 2
from sage.repl.rich_output import get_display_manager
dm = get_display_manager()
assert dm.preferences.graphics is None
dm.preferences.graphics = 'raster'
t  # works: it shows a png
```


```
# Jupyter cell 3
dm.preferences.graphics = 'vector'
t   # broken: it does not show anything
```

The following shows that the Jupyter notebook is able to handle a svg correctly:

```
# Jupyter cell 4
t.svg('a.svg')
from IPython.core.display import SVG
SVG(filename='a.svg')
```

I suggest to fix the issue with the showing of svg in another ticket.



---

archive/issue_comments_293415.json:
```json
{
    "body": "Changed commit from **[d6d473a](https://github.com/sagemath/sagetrac-mirror/commit/d6d473a1400059b385104ed4220097fde906e82f)** to **[2da56a8](https://github.com/sagemath/sagetrac-mirror/commit/2da56a8cb87d3e2de789bbfd08375baee36009fd)**",
    "created_at": "2021-12-09T17:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293415",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d6d473a](https://github.com/sagemath/sagetrac-mirror/commit/d6d473a1400059b385104ed4220097fde906e82f)** to **[2da56a8](https://github.com/sagemath/sagetrac-mirror/commit/2da56a8cb87d3e2de789bbfd08375baee36009fd)**



---

archive/issue_comments_293416.json:
```json
{
    "body": "<div id=\"comment:62\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2da56a8cb87d3e2de789bbfd08375baee36009fd\">2da56a8</a></td><td><code>20343: using pdftocairo instead of pdf2svg</code></td></tr></table>\n",
    "created_at": "2021-12-09T17:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293416",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2da56a8cb87d3e2de789bbfd08375baee36009fd">2da56a8</a></td><td><code>20343: using pdftocairo instead of pdf2svg</code></td></tr></table>




---

archive/issue_comments_293417.json:
```json
{
    "body": "Changed dependencies from **#32650** to **#32650, #33005**",
    "created_at": "2021-12-09T17:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293417",
    "user": "https://github.com/seblabbe"
}
```

Changed dependencies from **#32650** to **#32650, #33005**



---

archive/issue_comments_293418.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@seblabbe](#comment:58):\n> Replying to [@mkoeppe](#comment:54):\n> > In a similar direction as [comment:17](#comment:17), I think that the `from_graph...` and `from_poset` class methods should rather be changed to methods of `Graph` and `Poset`.\n\n> I don't think here we want to replace the output of `g._latex_` by an object of type `TikzPicture` since a such change would break a lot of code.\n\nI agree\n\n> An option is to create a new method `def tikz(self)` instead. I can do something like that.\n\nYes, this is what I meant",
    "created_at": "2021-12-09T18:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293418",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@seblabbe](#comment:58):
> Replying to [@mkoeppe](#comment:54):
> > In a similar direction as [comment:17](#comment:17), I think that the `from_graph...` and `from_poset` class methods should rather be changed to methods of `Graph` and `Poset`.

> I don't think here we want to replace the output of `g._latex_` by an object of type `TikzPicture` since a such change would break a lot of code.

I agree

> An option is to create a new method `def tikz(self)` instead. I can do something like that.

Yes, this is what I meant



---

archive/issue_events_287142.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:21:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287142"
}
```



---

archive/issue_events_287143.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:21:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287143"
}
```



---

archive/issue_comments_293419.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4ca00322578c4e36b6a8a25487c37c27eddc9fa\">d4ca003</a></td><td><code>from misc.tikz_picture -> from plot.tikzpicture</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42011d6b806fd013659b6ca367d0905b45913508\">42011d6</a></td><td><code>updated authors and copyright</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6894a5b1a87e09ffdfff29b0ea3c1aef2eb0ec67\">6894a5b</a></td><td><code>20343: redoing recent changes by Vincent Delecroix in slabbe package (check_call -> run); improved header documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c07925e1bb437cf76da9ed38ceb5bfcaba81107\">2c07925</a></td><td><code>20343: using features instead of have_program, have_pdflatex, have_convert</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83b917360f8a89488d78262a4dc5957a94d890b5\">83b9173</a></td><td><code>20343: print the log when pdflatex fails compile the tikz image</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b26bc3f41abc51b160f47a80a79da6fbf65c783e\">b26bc3f</a></td><td><code>20343: few small improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae7b9bf51ea8bc62ba28489fb6576c4d860673f4\">ae7b9bf</a></td><td><code>20343: improving first example shown in documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f91d2247fc2ffd72d0f21006f6e3a7049e4cba7\">9f91d22</a></td><td><code>20343: fixing a bug, png output was not working</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f39e07aaa119071d73beaaa8ada0b629a3c9469c\">f39e07a</a></td><td><code>20343: using pdftocairo instead of pdf2svg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90817776abb4c1e1ed21ac6af983b337330d4b2c\">9081777</a></td><td><code>20343:fixing 2 doctests + wrong trailing colons</code></td></tr></table>\n",
    "created_at": "2022-01-04T13:20:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293419",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4ca00322578c4e36b6a8a25487c37c27eddc9fa">d4ca003</a></td><td><code>from misc.tikz_picture -> from plot.tikzpicture</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42011d6b806fd013659b6ca367d0905b45913508">42011d6</a></td><td><code>updated authors and copyright</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6894a5b1a87e09ffdfff29b0ea3c1aef2eb0ec67">6894a5b</a></td><td><code>20343: redoing recent changes by Vincent Delecroix in slabbe package (check_call -> run); improved header documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c07925e1bb437cf76da9ed38ceb5bfcaba81107">2c07925</a></td><td><code>20343: using features instead of have_program, have_pdflatex, have_convert</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83b917360f8a89488d78262a4dc5957a94d890b5">83b9173</a></td><td><code>20343: print the log when pdflatex fails compile the tikz image</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b26bc3f41abc51b160f47a80a79da6fbf65c783e">b26bc3f</a></td><td><code>20343: few small improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae7b9bf51ea8bc62ba28489fb6576c4d860673f4">ae7b9bf</a></td><td><code>20343: improving first example shown in documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f91d2247fc2ffd72d0f21006f6e3a7049e4cba7">9f91d22</a></td><td><code>20343: fixing a bug, png output was not working</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f39e07aaa119071d73beaaa8ada0b629a3c9469c">f39e07a</a></td><td><code>20343: using pdftocairo instead of pdf2svg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90817776abb4c1e1ed21ac6af983b337330d4b2c">9081777</a></td><td><code>20343:fixing 2 doctests + wrong trailing colons</code></td></tr></table>




---

archive/issue_comments_293420.json:
```json
{
    "body": "Changed commit from **[2da56a8](https://github.com/sagemath/sagetrac-mirror/commit/2da56a8cb87d3e2de789bbfd08375baee36009fd)** to **[9081777](https://github.com/sagemath/sagetrac-mirror/commit/90817776abb4c1e1ed21ac6af983b337330d4b2c)**",
    "created_at": "2022-01-04T13:20:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293420",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2da56a8](https://github.com/sagemath/sagetrac-mirror/commit/2da56a8cb87d3e2de789bbfd08375baee36009fd)** to **[9081777](https://github.com/sagemath/sagetrac-mirror/commit/90817776abb4c1e1ed21ac6af983b337330d4b2c)**



---

archive/issue_comments_293421.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nThere was a syntax error in the file due to the previous commit. I fixed that.\n\nI also rebased the branch on top of 9.5.beta9.",
    "created_at": "2022-01-04T13:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293421",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:67" align="right">comment:67</div>

There was a syntax error in the file due to the previous commit. I fixed that.

I also rebased the branch on top of 9.5.beta9.



---

archive/issue_comments_293422.json:
```json
{
    "body": "<div id=\"comment:68\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2388a15a6c9ec2e4f97f8c2afd0653f7bd52e0b\">b2388a1</a></td><td><code>20343: change default from pdf2svg to pdftocairo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a78e9ce673d3df77ca008af4c6e73490ff3d7ce7\">a78e9ce</a></td><td><code>20343: provide log if an error occurs in method png</code></td></tr></table>\n",
    "created_at": "2022-01-04T13:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293422",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2388a15a6c9ec2e4f97f8c2afd0653f7bd52e0b">b2388a1</a></td><td><code>20343: change default from pdf2svg to pdftocairo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a78e9ce673d3df77ca008af4c6e73490ff3d7ce7">a78e9ce</a></td><td><code>20343: provide log if an error occurs in method png</code></td></tr></table>




---

archive/issue_comments_293423.json:
```json
{
    "body": "Changed commit from **[9081777](https://github.com/sagemath/sagetrac-mirror/commit/90817776abb4c1e1ed21ac6af983b337330d4b2c)** to **[a78e9ce](https://github.com/sagemath/sagetrac-mirror/commit/a78e9ce673d3df77ca008af4c6e73490ff3d7ce7)**",
    "created_at": "2022-01-04T13:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293423",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9081777](https://github.com/sagemath/sagetrac-mirror/commit/90817776abb4c1e1ed21ac6af983b337330d4b2c)** to **[a78e9ce](https://github.com/sagemath/sagetrac-mirror/commit/a78e9ce673d3df77ca008af4c6e73490ff3d7ce7)**



---

archive/issue_comments_293424.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nI confirm it works on my side:\n\n```\n$ sage -t tikzpicture.py \n[...]\nDoctesting 1 file.\nsage -t --random-seed=33963620693510224516081799230454604818 tikzpicture.py\n    [158 tests, 4.59 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nFeatures detected for doctesting: \n```\nand\n\n```\n$ sage -t --show-skipped --long --optional=sage,optional,external tikzpicture.py \n[...]\nDoctesting 1 file.\nsage -t --long --random-seed=204572532264437349038334999704478431314 tikzpicture.py\n    24 not tested tests not run\n    2 pdftocairo tests not run\n    0 tests not run because we ran out of time\n    [188 tests, 15.97 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nFeatures detected for doctesting: imagemagick,latex,pdf2svg\n```",
    "created_at": "2022-01-04T13:37:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293424",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:69" align="right">comment:69</div>

I confirm it works on my side:

```
$ sage -t tikzpicture.py 
[...]
Doctesting 1 file.
sage -t --random-seed=33963620693510224516081799230454604818 tikzpicture.py
    [158 tests, 4.59 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Features detected for doctesting: 
```
and

```
$ sage -t --show-skipped --long --optional=sage,optional,external tikzpicture.py 
[...]
Doctesting 1 file.
sage -t --long --random-seed=204572532264437349038334999704478431314 tikzpicture.py
    24 not tested tests not run
    2 pdftocairo tests not run
    0 tests not run because we ran out of time
    [188 tests, 15.97 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Features detected for doctesting: imagemagick,latex,pdf2svg
```



---

archive/issue_comments_293425.json:
```json
{
    "body": "Attachment: **[tikz-jupyter-demo.png](https://github.com/sagemath/sage/files/ticket20343/tikz-jupyter-demo.png)**",
    "created_at": "2022-01-04T13:57:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293425",
    "user": "https://github.com/seblabbe"
}
```

Attachment: **[tikz-jupyter-demo.png](https://github.com/sagemath/sage/files/ticket20343/tikz-jupyter-demo.png)**



---

archive/issue_comments_293426.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,10 @@\n-Importing `TikzPicture` module from optional [SageMath](../wiki/SageMath) package [slabbe-0.6.2](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath).\n+The goal of this ticket is to import the `TikzPicture` module from the optional [SageMath](../wiki/SageMath) package [slabbe](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath). This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into [SageMath](../wiki/SageMath).\n \n-One example:\n+Here is a demo inside a Jupyter notebook:\n+\n+<img src=\"tikz-jupyter-demo.png\" width=width=600>\n+\n+More examples:\n \n ```\n sage: from sage.plot.tikzpicture import TikzPicture\n``````\n",
    "created_at": "2022-01-04T14:06:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293426",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,10 @@
-Importing `TikzPicture` module from optional [SageMath](../wiki/SageMath) package [slabbe-0.6.2](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath).
+The goal of this ticket is to import the `TikzPicture` module from the optional [SageMath](../wiki/SageMath) package [slabbe](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath). This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into [SageMath](../wiki/SageMath).
 
-One example:
+Here is a demo inside a Jupyter notebook:
+
+<img src="tikz-jupyter-demo.png" width=width=600>
+
+More examples:
 
 ```
 sage: from sage.plot.tikzpicture import TikzPicture
``````




---

archive/issue_comments_293427.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nUpdating the description: adding a screenshot of the behavior in Jupyter, hoping it motivates someone to review the ticket.",
    "created_at": "2022-01-04T14:06:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293427",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:70" align="right">comment:70</div>

Updating the description: adding a screenshot of the behavior in Jupyter, hoping it motivates someone to review the ticket.



---

archive/issue_comments_293428.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The goal of this ticket is to import the `TikzPicture` module from the optional [SageMath](../wiki/SageMath) package [slabbe](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath). This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into [SageMath](../wiki/SageMath).\n+The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into SageMath.\n \n Here is a demo inside a Jupyter notebook:\n \n``````\n",
    "created_at": "2022-01-04T14:08:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293428",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The goal of this ticket is to import the `TikzPicture` module from the optional [SageMath](../wiki/SageMath) package [slabbe](https://pypi.org/project/slabbe/) into [SageMath](../wiki/SageMath). This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into [SageMath](../wiki/SageMath).
+The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into SageMath.
 
 Here is a demo inside a Jupyter notebook:
 
``````




---

archive/issue_comments_293429.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into SageMath.\n+The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state and it is mature enough to go into SageMath now.\n \n Here is a demo inside a Jupyter notebook:\n \n``````\n",
    "created_at": "2022-01-04T14:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293429",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state now and it is mature enough to go into SageMath.
+The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state and it is mature enough to go into SageMath now.
 
 Here is a demo inside a Jupyter notebook:
 
``````




---

archive/issue_comments_293430.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -101,4 +101,4 @@\n \n An example of usage of this module can be found at this url:\n https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n-associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one uses `from sage.plot.tikzpicture import TikzPicture` and check that tikzpicture created within slabbe still works within the tikzpicture module introduced in this ticket.\n+associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics at http://dx.doi.org/10.3934/jmd.2021017.\n``````\n",
    "created_at": "2022-01-04T14:11:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293430",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -101,4 +101,4 @@
 
 An example of usage of this module can be found at this url:
 https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb
-associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics since one week at http://dx.doi.org/10.3934/jmd.2021017. It can be used to review the current ticket if one uses `from sage.plot.tikzpicture import TikzPicture` and check that tikzpicture created within slabbe still works within the tikzpicture module introduced in this ticket.
+associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics at http://dx.doi.org/10.3934/jmd.2021017.
``````




---

archive/issue_comments_293431.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nWhy this default `usepackage=['amsmath']`?",
    "created_at": "2022-01-05T16:52:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293431",
    "user": "https://github.com/videlec"
}
```

<div id="comment:74" align="right">comment:74</div>

Why this default `usepackage=['amsmath']`?



---

archive/issue_comments_293432.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nMoreover, you should **never** have a list as a default argument which is plugged as an attribute\n\n```\nsage: class A():\n....:     def __init__(self, a=[]):\n....:         self.a = a\nsage: x = A()\nsage: x.a.append(2)\nsage: y = A()\nsage: y.a\n[2]\n```",
    "created_at": "2022-01-05T16:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293432",
    "user": "https://github.com/videlec"
}
```

<div id="comment:75" align="right">comment:75</div>

Moreover, you should **never** have a list as a default argument which is plugged as an attribute

```
sage: class A():
....:     def __init__(self, a=[]):
....:         self.a = a
sage: x = A()
sage: x.a.append(2)
sage: y = A()
sage: y.a
[2]
```



---

archive/issue_comments_293433.json:
```json
{
    "body": "Changed commit from **[a78e9ce](https://github.com/sagemath/sagetrac-mirror/commit/a78e9ce673d3df77ca008af4c6e73490ff3d7ce7)** to **[fc47455](https://github.com/sagemath/sagetrac-mirror/commit/fc47455b050b1a21244e6ab00ef3b88de8bf4d67)**",
    "created_at": "2022-01-05T18:04:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293433",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a78e9ce](https://github.com/sagemath/sagetrac-mirror/commit/a78e9ce673d3df77ca008af4c6e73490ff3d7ce7)** to **[fc47455](https://github.com/sagemath/sagetrac-mirror/commit/fc47455b050b1a21244e6ab00ef3b88de8bf4d67)**



---

archive/issue_comments_293434.json:
```json
{
    "body": "<div id=\"comment:76\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3dec92c4513d78f176f4ec201e706ab5fd98f9b\">a3dec92</a></td><td><code>20343: change default value of usepackage to None</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc47455b050b1a21244e6ab00ef3b88de8bf4d67\">fc47455</a></td><td><code>20343: use shell=False instead</code></td></tr></table>\n",
    "created_at": "2022-01-05T18:04:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293434",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:76"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3dec92c4513d78f176f4ec201e706ab5fd98f9b">a3dec92</a></td><td><code>20343: change default value of usepackage to None</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc47455b050b1a21244e6ab00ef3b88de8bf4d67">fc47455</a></td><td><code>20343: use shell=False instead</code></td></tr></table>




---

archive/issue_comments_293435.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nYou are right. I also avoided the usage of `shell=True` for security reasons, see https://docs.python.org/3/library/subprocess.html#security-considerations\n\nDoing so, the `cmd` needs to be a list and not a string. This is better also because it allows filenames to contain spaces: *\"Providing a sequence of arguments is generally preferred, as it allows the module to take care of any required escaping and quoting of arguments (e.g. to permit spaces in file names)\"*, see https://docs.python.org/3/library/subprocess.html#frequently-used-arguments",
    "created_at": "2022-01-05T18:06:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293435",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:77" align="right">comment:77</div>

You are right. I also avoided the usage of `shell=True` for security reasons, see https://docs.python.org/3/library/subprocess.html#security-considerations

Doing so, the `cmd` needs to be a list and not a string. This is better also because it allows filenames to contain spaces: *"Providing a sequence of arguments is generally preferred, as it allows the module to take care of any required escaping and quoting of arguments (e.g. to permit spaces in file names)"*, see https://docs.python.org/3/library/subprocess.html#frequently-used-arguments



---

archive/issue_comments_293436.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@seblabbe](#comment:77):\n> [...]\n> This is better also because it allows filenames to contain spaces\n> [...]\n\nIf `'m y p i c t u r e.pdf'` is an explicitely supported filename, it would make sense to mention it and test it. If it is an obscure feature, nevermind.",
    "created_at": "2022-01-05T18:15:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293436",
    "user": "https://github.com/videlec"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@seblabbe](#comment:77):
> [...]
> This is better also because it allows filenames to contain spaces
> [...]

If `'m y p i c t u r e.pdf'` is an explicitely supported filename, it would make sense to mention it and test it. If it is an obscure feature, nevermind.



---

archive/issue_comments_293437.json:
```json
{
    "body": "Changed commit from **[fc47455](https://github.com/sagemath/sagetrac-mirror/commit/fc47455b050b1a21244e6ab00ef3b88de8bf4d67)** to **[ab3ec02](https://github.com/sagemath/sagetrac-mirror/commit/ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1)**",
    "created_at": "2022-01-05T20:04:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293437",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fc47455](https://github.com/sagemath/sagetrac-mirror/commit/fc47455b050b1a21244e6ab00ef3b88de8bf4d67)** to **[ab3ec02](https://github.com/sagemath/sagetrac-mirror/commit/ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1)**



---

archive/issue_comments_293438.json:
```json
{
    "body": "<div id=\"comment:79\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1\">ab3ec02</a></td><td><code>20343: add doctest showing spaces in filename</code></td></tr></table>\n",
    "created_at": "2022-01-05T20:04:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293438",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:79"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1">ab3ec02</a></td><td><code>20343: add doctest showing spaces in filename</code></td></tr></table>




---

archive/issue_comments_293439.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@videlec](#comment:78):\n> If `'m y p i c t u r e.pdf'` is an explicitely supported filename, it would make sense to mention it and test it. If it is an obscure feature, nevermind.\n\nYes, why not. I added a doctest confirming it works.\n\nI also added a missing long doctest tag.\n\nNeeds review!",
    "created_at": "2022-01-05T20:05:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293439",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@videlec](#comment:78):
> If `'m y p i c t u r e.pdf'` is an explicitely supported filename, it would make sense to mention it and test it. If it is an obscure feature, nevermind.

Yes, why not. I added a doctest confirming it works.

I also added a missing long doctest tag.

Needs review!



---

archive/issue_events_287144.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-01-06T11:16:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287144"
}
```



---

archive/issue_events_287145.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-01-06T11:16:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287145"
}
```



---

archive/issue_comments_293440.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nThere is a time window right now for this ticket to get into sage-9.5 maybe within the first rc.\n\nThe patchbots are green. I will be available in the next days to fix quickly any remaining issues.",
    "created_at": "2022-01-06T11:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293440",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:81" align="right">comment:81</div>

There is a time window right now for this ticket to get into sage-9.5 maybe within the first rc.

The patchbots are green. I will be available in the next days to fix quickly any remaining issues.



---

archive/issue_comments_293441.json:
```json
{
    "body": "Changed reviewer from **Jean-Philippe Labb\u00e9, Xavier Caruso** to **Jean-Philippe Labb\u00e9, Xavier Caruso, Vincent Delecroix**",
    "created_at": "2022-01-06T18:00:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293441",
    "user": "https://github.com/videlec"
}
```

Changed reviewer from **Jean-Philippe Labbé, Xavier Caruso** to **Jean-Philippe Labbé, Xavier Caruso, Vincent Delecroix**



---

archive/issue_events_287146.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-01-06T18:00:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287146"
}
```



---

archive/issue_events_287147.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-01-06T18:00:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287147"
}
```



---

archive/issue_comments_293442.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nThank you!! I was holding by breathe since 6 years!\n\nI will add a nice section in the release notes if it makes it in 9.5.",
    "created_at": "2022-01-06T18:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293442",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:83" align="right">comment:83</div>

Thank you!! I was holding by breathe since 6 years!

I will add a nice section in the release notes if it makes it in 9.5.



---

archive/issue_events_287148.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-28T23:03:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287148"
}
```



---

archive/issue_events_287149.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-28T23:03:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287149"
}
```



---

archive/issue_comments_293443.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\n\n```\n**********************************************************************\nFile \"src/sage/plot/tikzpicture.py\", line 73, in sage.plot.tikzpicture\nFailed example:\n    _ = t.png(view=False)      # long time (2s) # optional imagemagick\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.plot.tikzpicture[14]>\", line 1, in <module>\n        _ = t.png(view=False)      # long time (2s) # optional imagemagick\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py\", line 505, in png\n        _filename_pdf = self.pdf(filename=None, view=False)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py\", line 443, in pdf\n        result.check_returncode()\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/subprocess.py\", line 460, in check_returncode\n        raise CalledProcessError(self.returncode, self.args, self.stdout,\n    subprocess.CalledProcessError: Command '['lualatex', '-interaction=nonstopmode', 'tikz_544oxd7o.tex']' returned non-zero exit status 1.\n**********************************************************************\nFile \"src/sage/plot/tikzpicture.py\", line 494, in sage.plot.tikzpicture.StandaloneTex.png\nFailed example:\n    path_to_file = t.png(filename) # long time (2s)   # optional imagemagick\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.plot.tikzpicture.StandaloneTex.png[7]>\", line 1, in <module>\n        path_to_file = t.png(filename) # long time (2s)   # optional imagemagick\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py\", line 505, in png\n        _filename_pdf = self.pdf(filename=None, view=False)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py\", line 443, in pdf\n        result.check_returncode()\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/subprocess.py\", line 460, in check_returncode\n        raise CalledProcessError(self.returncode, self.args, self.stdout,\n    subprocess.CalledProcessError: Command '['lualatex', '-interaction=nonstopmode', 'tikz_ikxvujw2.tex']' returned non-zero exit status 1.\n**********************************************************************\nFile \"src/sage/plot/tikzpicture.py\", line 495, in sage.plot.tikzpicture.StandaloneTex.png\nFailed example:\n    path_to_file[-4:]              # long time (fast) # optional imagemagick\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.plot.tikzpicture.StandaloneTex.png[8]>\", line 1, in <module>\n        path_to_file[-Integer(4):]              # long time (fast) # optional imagemagick\n    NameError: name 'path_to_file' is not defined\n**********************************************************************\nFile \"src/sage/plot/tikzpicture.py\", line 579, in sage.plot.tikzpicture.StandaloneTex.svg\nFailed example:\n    path_to_file = t.svg(filename, program='pdftocairo') # long time (2s)   # optional pdftocairo\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.plot.tikzpicture.StandaloneTex.svg[7]>\", line 1, in <module>\n        path_to_file = t.svg(filename, program='pdftocairo') # long time (2s)   # optional pdftocairo\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py\", line 588, in svg\n        _filename_pdf = self.pdf(filename=None, view=False)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py\", line 443, in pdf\n        result.check_returncode()\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/subprocess.py\", line 460, in check_returncode\n        raise CalledProcessError(self.returncode, self.args, self.stdout,\n    subprocess.CalledProcessError: Command '['lualatex', '-interaction=nonstopmode', 'tikz_o2ho82xz.tex']' returned non-zero exit status 1.\n**********************************************************************\nFile \"src/sage/plot/tikzpicture.py\", line 580, in sage.plot.tikzpicture.StandaloneTex.svg\nFailed example:\n    path_to_file[-4:]                                    # long time (fast) # optional pdftocairo\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.plot.tikzpicture.StandaloneTex.svg[8]>\", line 1, in <module>\n        path_to_file[-Integer(4):]                                    # long time (fast) # optional pdftocairo\n    NameError: name 'path_to_file' is not defined\n**********************************************************************\n```",
    "created_at": "2022-02-13T00:28:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293443",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:85" align="right">comment:85</div>


```
**********************************************************************
File "src/sage/plot/tikzpicture.py", line 73, in sage.plot.tikzpicture
Failed example:
    _ = t.png(view=False)      # long time (2s) # optional imagemagick
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.plot.tikzpicture[14]>", line 1, in <module>
        _ = t.png(view=False)      # long time (2s) # optional imagemagick
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py", line 505, in png
        _filename_pdf = self.pdf(filename=None, view=False)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py", line 443, in pdf
        result.check_returncode()
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/subprocess.py", line 460, in check_returncode
        raise CalledProcessError(self.returncode, self.args, self.stdout,
    subprocess.CalledProcessError: Command '['lualatex', '-interaction=nonstopmode', 'tikz_544oxd7o.tex']' returned non-zero exit status 1.
**********************************************************************
File "src/sage/plot/tikzpicture.py", line 494, in sage.plot.tikzpicture.StandaloneTex.png
Failed example:
    path_to_file = t.png(filename) # long time (2s)   # optional imagemagick
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.plot.tikzpicture.StandaloneTex.png[7]>", line 1, in <module>
        path_to_file = t.png(filename) # long time (2s)   # optional imagemagick
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py", line 505, in png
        _filename_pdf = self.pdf(filename=None, view=False)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py", line 443, in pdf
        result.check_returncode()
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/subprocess.py", line 460, in check_returncode
        raise CalledProcessError(self.returncode, self.args, self.stdout,
    subprocess.CalledProcessError: Command '['lualatex', '-interaction=nonstopmode', 'tikz_ikxvujw2.tex']' returned non-zero exit status 1.
**********************************************************************
File "src/sage/plot/tikzpicture.py", line 495, in sage.plot.tikzpicture.StandaloneTex.png
Failed example:
    path_to_file[-4:]              # long time (fast) # optional imagemagick
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.plot.tikzpicture.StandaloneTex.png[8]>", line 1, in <module>
        path_to_file[-Integer(4):]              # long time (fast) # optional imagemagick
    NameError: name 'path_to_file' is not defined
**********************************************************************
File "src/sage/plot/tikzpicture.py", line 579, in sage.plot.tikzpicture.StandaloneTex.svg
Failed example:
    path_to_file = t.svg(filename, program='pdftocairo') # long time (2s)   # optional pdftocairo
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.plot.tikzpicture.StandaloneTex.svg[7]>", line 1, in <module>
        path_to_file = t.svg(filename, program='pdftocairo') # long time (2s)   # optional pdftocairo
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py", line 588, in svg
        _filename_pdf = self.pdf(filename=None, view=False)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/plot/tikzpicture.py", line 443, in pdf
        result.check_returncode()
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/subprocess.py", line 460, in check_returncode
        raise CalledProcessError(self.returncode, self.args, self.stdout,
    subprocess.CalledProcessError: Command '['lualatex', '-interaction=nonstopmode', 'tikz_o2ho82xz.tex']' returned non-zero exit status 1.
**********************************************************************
File "src/sage/plot/tikzpicture.py", line 580, in sage.plot.tikzpicture.StandaloneTex.svg
Failed example:
    path_to_file[-4:]                                    # long time (fast) # optional pdftocairo
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.plot.tikzpicture.StandaloneTex.svg[8]>", line 1, in <module>
        path_to_file[-Integer(4):]                                    # long time (fast) # optional pdftocairo
    NameError: name 'path_to_file' is not defined
**********************************************************************
```



---

archive/issue_events_287150.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-13T00:28:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287150"
}
```



---

archive/issue_events_287151.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-13T00:28:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287151"
}
```



---

archive/issue_comments_293444.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nIndeed, the failures show that when latex is not installed, there are missing optional `latex` tags. Sorry Volker.",
    "created_at": "2022-02-13T17:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293444",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:86" align="right">comment:86</div>

Indeed, the failures show that when latex is not installed, there are missing optional `latex` tags. Sorry Volker.



---

archive/issue_comments_293445.json:
```json
{
    "body": "<div id=\"comment:87\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8c9cb150df25b46f35ea57ed681fb9ea06854ff\">c8c9cb1</a></td><td><code>20343: improving first example shown in documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3aae6c029f3e49d96fd47f6b967dfad460c5e808\">3aae6c0</a></td><td><code>20343: fixing a bug, png output was not working</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65ab05b2ffda08e69a2316d580220f9becb2ac9e\">65ab05b</a></td><td><code>20343: using pdftocairo instead of pdf2svg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd8e604caa6a871d0820a432bc4c95def4b27e38\">cd8e604</a></td><td><code>20343:fixing 2 doctests + wrong trailing colons</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0790c85f533a5df63d6cea932939f8257dc79956\">0790c85</a></td><td><code>20343: change default from pdf2svg to pdftocairo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aef6bd46f3548da42a6455db4f70bb065bef48ff\">aef6bd4</a></td><td><code>20343: provide log if an error occurs in method png</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4695c06a6e9ae2483e4d7d41fcbf8a8fa89b418\">d4695c0</a></td><td><code>20343: change default value of usepackage to None</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d05788609cf031415075cb7cc4752a17ba7ef8ec\">d057886</a></td><td><code>20343: use shell=False instead</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a933774b9e130de9bdaa0ce2cfec032b56bd6cb9\">a933774</a></td><td><code>20343: add doctest showing spaces in filename</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b5bd661c86a07eab7ebef50bafd4d4822d4730f\">4b5bd66</a></td><td><code>20343: adding missing optional latex tag</code></td></tr></table>\n",
    "created_at": "2022-02-17T09:14:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293445",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:87"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8c9cb150df25b46f35ea57ed681fb9ea06854ff">c8c9cb1</a></td><td><code>20343: improving first example shown in documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3aae6c029f3e49d96fd47f6b967dfad460c5e808">3aae6c0</a></td><td><code>20343: fixing a bug, png output was not working</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65ab05b2ffda08e69a2316d580220f9becb2ac9e">65ab05b</a></td><td><code>20343: using pdftocairo instead of pdf2svg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd8e604caa6a871d0820a432bc4c95def4b27e38">cd8e604</a></td><td><code>20343:fixing 2 doctests + wrong trailing colons</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0790c85f533a5df63d6cea932939f8257dc79956">0790c85</a></td><td><code>20343: change default from pdf2svg to pdftocairo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aef6bd46f3548da42a6455db4f70bb065bef48ff">aef6bd4</a></td><td><code>20343: provide log if an error occurs in method png</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4695c06a6e9ae2483e4d7d41fcbf8a8fa89b418">d4695c0</a></td><td><code>20343: change default value of usepackage to None</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d05788609cf031415075cb7cc4752a17ba7ef8ec">d057886</a></td><td><code>20343: use shell=False instead</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a933774b9e130de9bdaa0ce2cfec032b56bd6cb9">a933774</a></td><td><code>20343: add doctest showing spaces in filename</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b5bd661c86a07eab7ebef50bafd4d4822d4730f">4b5bd66</a></td><td><code>20343: adding missing optional latex tag</code></td></tr></table>




---

archive/issue_comments_293446.json:
```json
{
    "body": "Changed commit from **[ab3ec02](https://github.com/sagemath/sagetrac-mirror/commit/ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1)** to **[4b5bd66](https://github.com/sagemath/sagetrac-mirror/commit/4b5bd661c86a07eab7ebef50bafd4d4822d4730f)**",
    "created_at": "2022-02-17T09:14:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293446",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ab3ec02](https://github.com/sagemath/sagetrac-mirror/commit/ab3ec0299f903dc6cd5d25bf4cba0eb2aa4e47a1)** to **[4b5bd66](https://github.com/sagemath/sagetrac-mirror/commit/4b5bd661c86a07eab7ebef50bafd4d4822d4730f)**



---

archive/issue_comments_293447.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nAdded the missing latex tag. Also rebased on 9.6.beta1.",
    "created_at": "2022-02-17T09:24:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293447",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:88" align="right">comment:88</div>

Added the missing latex tag. Also rebased on 9.6.beta1.



---

archive/issue_events_287152.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-02-17T09:43:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287152"
}
```



---

archive/issue_events_287153.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-02-17T09:43:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287153"
}
```



---

archive/issue_comments_293448.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nWhy not using `else` here\n\n```\n+        if program == 'pdflatex':\n+            pdflatex().require()\n+        elif program == 'lualatex':\n+            lualatex().require()\n+        elif program not in ['pdflatex','lualatex']:\n+            raise ValueError(\"program(={}) should be pdflatex or lualatex\".format(program))\n```",
    "created_at": "2022-02-19T09:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293448",
    "user": "https://github.com/videlec"
}
```

<div id="comment:90" align="right">comment:90</div>

Why not using `else` here

```
+        if program == 'pdflatex':
+            pdflatex().require()
+        elif program == 'lualatex':
+            lualatex().require()
+        elif program not in ['pdflatex','lualatex']:
+            raise ValueError("program(={}) should be pdflatex or lualatex".format(program))
```



---

archive/issue_comments_293449.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nWhy do you prefix `filename_png`, `filename_pdf`, etc with an additional underscore, ie `_filename_png`, `_filename_pdf`?",
    "created_at": "2022-02-19T09:17:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293449",
    "user": "https://github.com/videlec"
}
```

<div id="comment:91" align="right">comment:91</div>

Why do you prefix `filename_png`, `filename_pdf`, etc with an additional underscore, ie `_filename_png`, `_filename_pdf`?



---

archive/issue_comments_293450.json:
```json
{
    "body": "Changed commit from **[4b5bd66](https://github.com/sagemath/sagetrac-mirror/commit/4b5bd661c86a07eab7ebef50bafd4d4822d4730f)** to **[f1e4728](https://github.com/sagemath/sagetrac-mirror/commit/f1e4728d00efd130a0688ac79e616bffbae0c539)**",
    "created_at": "2022-02-22T08:45:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293450",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4b5bd66](https://github.com/sagemath/sagetrac-mirror/commit/4b5bd661c86a07eab7ebef50bafd4d4822d4730f)** to **[f1e4728](https://github.com/sagemath/sagetrac-mirror/commit/f1e4728d00efd130a0688ac79e616bffbae0c539)**



---

archive/issue_comments_293451.json:
```json
{
    "body": "<div id=\"comment:92\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1e4728d00efd130a0688ac79e616bffbae0c539\">f1e4728</a></td><td><code>20343: using else instead of elif</code></td></tr></table>\n",
    "created_at": "2022-02-22T08:45:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293451",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:92"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1e4728d00efd130a0688ac79e616bffbae0c539">f1e4728</a></td><td><code>20343: using else instead of elif</code></td></tr></table>




---

archive/issue_comments_293452.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nReplying to [@videlec](#comment:90):\n> Why not using `else` here\n\nYou are right. I don't know why I did not use else. I added a commit to fix that.",
    "created_at": "2022-02-22T08:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293452",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:93" align="right">comment:93</div>

Replying to [@videlec](#comment:90):
> Why not using `else` here

You are right. I don't know why I did not use else. I added a commit to fix that.



---

archive/issue_comments_293453.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nReplying to [@videlec](#comment:91):\n> Why do you prefix `filename_png`, `filename_pdf`, etc with an additional underscore, ie `_filename_png`, `_filename_pdf`?\n\nThe reason is to distinguish the variable `filename` (input given from the user) from the variable `_filename` (name of a temporary file created by the method). See the code of the method `svg` where both `filename` and `_filename` are used. For consistency, the same principle is used in all methods.\n\nNeeds review!",
    "created_at": "2022-02-22T08:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293453",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:94" align="right">comment:94</div>

Replying to [@videlec](#comment:91):
> Why do you prefix `filename_png`, `filename_pdf`, etc with an additional underscore, ie `_filename_png`, `_filename_pdf`?

The reason is to distinguish the variable `filename` (input given from the user) from the variable `_filename` (name of a temporary file created by the method). See the code of the method `svg` where both `filename` and `_filename` are used. For consistency, the same principle is used in all methods.

Needs review!



---

archive/issue_comments_293454.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nReplying to [@seblabbe](#comment:94):\n> Replying to [@videlec](#comment:91):\n> > Why do you prefix `filename_png`, `filename_pdf`, etc with an additional underscore, ie `_filename_png`, `_filename_pdf`?\n\n> \n> The reason is to distinguish the variable `filename` (input given from the user) from the variable `_filename` (name of a temporary file created by the method). See the code of the method `svg` where both `filename` and `_filename` are used. For consistency, the same principle is used in all methods.\n> \n> Needs review!\n\nInstead of the very unconventional `_filename` variable name you would better use `temporary_filename`, `temporary_filename_tex`, `temporary_filename_pdf`, etc.",
    "created_at": "2022-02-22T09:26:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293454",
    "user": "https://github.com/videlec"
}
```

<div id="comment:95" align="right">comment:95</div>

Replying to [@seblabbe](#comment:94):
> Replying to [@videlec](#comment:91):
> > Why do you prefix `filename_png`, `filename_pdf`, etc with an additional underscore, ie `_filename_png`, `_filename_pdf`?

> 
> The reason is to distinguish the variable `filename` (input given from the user) from the variable `_filename` (name of a temporary file created by the method). See the code of the method `svg` where both `filename` and `_filename` are used. For consistency, the same principle is used in all methods.
> 
> Needs review!

Instead of the very unconventional `_filename` variable name you would better use `temporary_filename`, `temporary_filename_tex`, `temporary_filename_pdf`, etc.



---

archive/issue_comments_293455.json:
```json
{
    "body": "Changed commit from **[f1e4728](https://github.com/sagemath/sagetrac-mirror/commit/f1e4728d00efd130a0688ac79e616bffbae0c539)** to **[2f47717](https://github.com/sagemath/sagetrac-mirror/commit/2f4771798e2c4219794d36890babbf65a44f2cfd)**",
    "created_at": "2022-02-22T14:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293455",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f1e4728](https://github.com/sagemath/sagetrac-mirror/commit/f1e4728d00efd130a0688ac79e616bffbae0c539)** to **[2f47717](https://github.com/sagemath/sagetrac-mirror/commit/2f4771798e2c4219794d36890babbf65a44f2cfd)**



---

archive/issue_comments_293456.json:
```json
{
    "body": "<div id=\"comment:96\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f4771798e2c4219794d36890babbf65a44f2cfd\">2f47717</a></td><td><code>20343: rename _filename* -> temp_filename*</code></td></tr></table>\n",
    "created_at": "2022-02-22T14:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293456",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:96"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f4771798e2c4219794d36890babbf65a44f2cfd">2f47717</a></td><td><code>20343: rename _filename* -> temp_filename*</code></td></tr></table>




---

archive/issue_comments_293457.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@videlec](#comment:95):\n> Instead of the very unconventional `_filename` variable name you would better use `temporary_filename`, `temporary_filename_tex`, `temporary_filename_pdf`, etc.\n\nOk, I renamed it as `s/_filename/temp_filename/g`.\n\nNeeds review!",
    "created_at": "2022-02-22T14:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293457",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@videlec](#comment:95):
> Instead of the very unconventional `_filename` variable name you would better use `temporary_filename`, `temporary_filename_tex`, `temporary_filename_pdf`, etc.

Ok, I renamed it as `s/_filename/temp_filename/g`.

Needs review!



---

archive/issue_comments_293458.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nInstead of `from_graph`, `from_poset`, ... wouldn't it make more sense to have `Graph.tikz()`, `Poset.tikz()`, etc? In the former design the `TikzPicture` code would end up with a ton of methods dealing with various specific objects.",
    "created_at": "2022-02-22T14:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293458",
    "user": "https://github.com/videlec"
}
```

<div id="comment:98" align="right">comment:98</div>

Instead of `from_graph`, `from_poset`, ... wouldn't it make more sense to have `Graph.tikz()`, `Poset.tikz()`, etc? In the former design the `TikzPicture` code would end up with a ton of methods dealing with various specific objects.



---

archive/issue_comments_293459.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nOr alternatively: `__tikz__()` if you want to hide it.",
    "created_at": "2022-02-22T14:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293459",
    "user": "https://github.com/videlec"
}
```

<div id="comment:99" align="right">comment:99</div>

Or alternatively: `__tikz__()` if you want to hide it.



---

archive/issue_comments_293460.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nSee [comment:17](#comment:17) :-)",
    "created_at": "2022-02-22T14:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293460",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:0" align="right">comment:0</div>

See [comment:17](#comment:17) :-)



---

archive/issue_comments_293461.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI agree with Xavier ! The current branch proposes to make `TikzPicture.from_XXX` the default conversion function. If the design is wrong, better to change it now than in a hypothetical future.",
    "created_at": "2022-02-22T14:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293461",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1" align="right">comment:1</div>

I agree with Xavier ! The current branch proposes to make `TikzPicture.from_XXX` the default conversion function. If the design is wrong, better to change it now than in a hypothetical future.



---

archive/issue_comments_293462.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nReplying to [@videlec](#comment:101):\n> I agree with Xavier ! The current branch proposes to make `TikzPicture.from_XXX` the default conversion function. If the design is wrong, better to change it now than in a hypothetical future.\n\nSee also [comment:54](#comment:54) from mkoeppe who suggested the same thing.\n\nThen, please read follow-up [comment:58](#comment:58), and answer to my answer in [comment:58](#comment:58).",
    "created_at": "2022-02-22T14:48:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293462",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:102" align="right">comment:102</div>

Replying to [@videlec](#comment:101):
> I agree with Xavier ! The current branch proposes to make `TikzPicture.from_XXX` the default conversion function. If the design is wrong, better to change it now than in a hypothetical future.

See also [comment:54](#comment:54) from mkoeppe who suggested the same thing.

Then, please read follow-up [comment:58](#comment:58), and answer to my answer in [comment:58](#comment:58).



---

archive/issue_comments_293463.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIdeally, `TikzPicture` should inherit from `LatexExpr` so that returning a `TikzPicture` from a `_latex_` method would not be a breaking change.\n\nFor the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.",
    "created_at": "2022-02-22T14:54:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293463",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Ideally, `TikzPicture` should inherit from `LatexExpr` so that returning a `TikzPicture` from a `_latex_` method would not be a breaking change.

For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.



---

archive/issue_comments_293464.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nReplying to [@videlec](#comment:103):\n> Ideally, `TikzPicture` should inherit from `LatexExpr` so that returning a `TikzPicture` from a `_latex_` method would not be a breaking change.\n\nWell, `LatexExpr` already inherits from the Python class `str` which makes it full of methods that, as a user, I don't want to see in the list of methods seen with tab-completion on an object of type `TikzPicture`.\n\n> For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.\n\nOk, let me think about that again, maybe this Thursday at Bordeaux Sage Thursdays, we can discuss this and converge to choices on how this is done for graphs (`tkz-berge` vs graphviz + dot2tex) and for polytopes (the actual `tikz()` method vs a new `tikz()` or `__tikz__()` method).",
    "created_at": "2022-02-22T15:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293464",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:104" align="right">comment:104</div>

Replying to [@videlec](#comment:103):
> Ideally, `TikzPicture` should inherit from `LatexExpr` so that returning a `TikzPicture` from a `_latex_` method would not be a breaking change.

Well, `LatexExpr` already inherits from the Python class `str` which makes it full of methods that, as a user, I don't want to see in the list of methods seen with tab-completion on an object of type `TikzPicture`.

> For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.

Ok, let me think about that again, maybe this Thursday at Bordeaux Sage Thursdays, we can discuss this and converge to choices on how this is done for graphs (`tkz-berge` vs graphviz + dot2tex) and for polytopes (the actual `tikz()` method vs a new `tikz()` or `__tikz__()` method).



---

archive/issue_comments_293465.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nReplying to [@videlec](#comment:103):\n> For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.\n\nThere are four such methods right now:\n\n```\n    def from_dot_string(cls, dotdata, prog='dot'):\n    def from_graph(cls, graph, merge_multiedges=True,\n    def from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,\n    def from_poset(cls, poset, **kwds):\n```\n\nAs you suggest, I can change those taking a graph or a poset sage object into a private method:\n\n```\n    def from_dot_string(cls, dotdata, prog='dot'):\n    def _from_graph(cls, graph, merge_multiedges=True,\n    def _from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,\n    def _from_poset(cls, poset, **kwds):\n```\n\nBut, there is no sage object for a dot string. So, do I keep `from_dot_string` as it is or do you want me to make it private as well?",
    "created_at": "2022-02-22T16:34:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293465",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:105" align="right">comment:105</div>

Replying to [@videlec](#comment:103):
> For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.

There are four such methods right now:

```
    def from_dot_string(cls, dotdata, prog='dot'):
    def from_graph(cls, graph, merge_multiedges=True,
    def from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,
    def from_poset(cls, poset, **kwds):
```

As you suggest, I can change those taking a graph or a poset sage object into a private method:

```
    def from_dot_string(cls, dotdata, prog='dot'):
    def _from_graph(cls, graph, merge_multiedges=True,
    def _from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,
    def _from_poset(cls, poset, **kwds):
```

But, there is no sage object for a dot string. So, do I keep `from_dot_string` as it is or do you want me to make it private as well?



---

archive/issue_comments_293466.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nReplying to [@seblabbe](#comment:105):\n> Replying to [@videlec](#comment:103):\n> > For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.\n\n> \n> There are four such methods right now:\n> \n> ```\n>     def from_dot_string(cls, dotdata, prog='dot'):\n>     def from_graph(cls, graph, merge_multiedges=True,\n>     def from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,\n>     def from_poset(cls, poset, **kwds):\n> ```\n> \n> As you suggest, I can change those taking a graph or a poset sage object into a private method:\n> \n> ```\n>     def from_dot_string(cls, dotdata, prog='dot'):\n>     def _from_graph(cls, graph, merge_multiedges=True,\n>     def _from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,\n>     def _from_poset(cls, poset, **kwds):\n> ```\n> \n> But, there is no sage object for a dot string. So, do I keep `from_dot_string` as it is or do you want me to make it private as well?\n\nIt should be fine to keep `from_dot_string`.\n\nThe only reason to make the three others private is to avoid that sage users rely on them. They will be changed without notice.",
    "created_at": "2022-02-22T16:40:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293466",
    "user": "https://github.com/videlec"
}
```

<div id="comment:106" align="right">comment:106</div>

Replying to [@seblabbe](#comment:105):
> Replying to [@videlec](#comment:103):
> > For the purpose of merging this ticket quickly, the simplest way out is to move the `from_XXX` as private standalone functions `def _from_XXX` and stating explicitely that these are just demo functions that will be removed in the future.

> 
> There are four such methods right now:
> 
> ```
>     def from_dot_string(cls, dotdata, prog='dot'):
>     def from_graph(cls, graph, merge_multiedges=True,
>     def from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,
>     def from_poset(cls, poset, **kwds):
> ```
> 
> As you suggest, I can change those taking a graph or a poset sage object into a private method:
> 
> ```
>     def from_dot_string(cls, dotdata, prog='dot'):
>     def _from_graph(cls, graph, merge_multiedges=True,
>     def _from_graph_with_pos(cls, graph, scale=1, merge_multiedges=True,
>     def _from_poset(cls, poset, **kwds):
> ```
> 
> But, there is no sage object for a dot string. So, do I keep `from_dot_string` as it is or do you want me to make it private as well?

It should be fine to keep `from_dot_string`.

The only reason to make the three others private is to avoid that sage users rely on them. They will be changed without notice.



---

archive/issue_comments_293467.json:
```json
{
    "body": "Changed commit from **[2f47717](https://github.com/sagemath/sagetrac-mirror/commit/2f4771798e2c4219794d36890babbf65a44f2cfd)** to **[793fbde](https://github.com/sagemath/sagetrac-mirror/commit/793fbdeba581155a5f21c2a07ec81f1de6a5e396)**",
    "created_at": "2022-02-23T20:31:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293467",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2f47717](https://github.com/sagemath/sagetrac-mirror/commit/2f4771798e2c4219794d36890babbf65a44f2cfd)** to **[793fbde](https://github.com/sagemath/sagetrac-mirror/commit/793fbdeba581155a5f21c2a07ec81f1de6a5e396)**



---

archive/issue_comments_293468.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/793fbdeba581155a5f21c2a07ec81f1de6a5e396\">793fbde</a></td><td><code>20343: from_graph, from_poset -> _from_graph, _from_poset</code></td></tr></table>\n",
    "created_at": "2022-02-23T20:31:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293468",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/793fbdeba581155a5f21c2a07ec81f1de6a5e396">793fbde</a></td><td><code>20343: from_graph, from_poset -> _from_graph, _from_poset</code></td></tr></table>




---

archive/issue_comments_293469.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nReplying to [@videlec](#comment:106):\n> It should be fine to keep `from_dot_string`.\n> \n> The only reason to make the three others private is to avoid that sage users rely on them. They will be changed without notice.\n\nOk, I did that. Needs review.",
    "created_at": "2022-02-23T20:32:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293469",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:108" align="right">comment:108</div>

Replying to [@videlec](#comment:106):
> It should be fine to keep `from_dot_string`.
> 
> The only reason to make the three others private is to avoid that sage users rely on them. They will be changed without notice.

Ok, I did that. Needs review.



---

archive/issue_comments_293470.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIt would be better not to advertize them in the module docstring\n\n```diff\n- If dot2tex Sage optional package and graphviz are installed, then the following\n- one liner works allowing to create a nice tikzpicture from a graph with\n- vertices and edges placed according to graphviz::\n-\n-    sage: t = TikzPicture._from_graph(g)  # optional: dot2tex # long time (3s)\n-\n```\n\nAnd you can add a sentence explaining the transducer example that comes after.",
    "created_at": "2022-02-24T06:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293470",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

It would be better not to advertize them in the module docstring

```diff
- If dot2tex Sage optional package and graphviz are installed, then the following
- one liner works allowing to create a nice tikzpicture from a graph with
- vertices and edges placed according to graphviz::
-
-    sage: t = TikzPicture._from_graph(g)  # optional: dot2tex # long time (3s)
-
```

And you can add a sentence explaining the transducer example that comes after.



---

archive/issue_comments_293471.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nI would also add a sentence somewhere in the module docstring about the fact that tikz is a latex package (called `pgf-tikz` by the way) and a reference to the page https://www.ctan.org/pkg/pgf. You sort of assume that everybody knows tikz which is not a reasonable assumption.",
    "created_at": "2022-02-24T06:22:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293471",
    "user": "https://github.com/videlec"
}
```

<div id="comment:0" align="right">comment:0</div>

I would also add a sentence somewhere in the module docstring about the fact that tikz is a latex package (called `pgf-tikz` by the way) and a reference to the page https://www.ctan.org/pkg/pgf. You sort of assume that everybody knows tikz which is not a reasonable assumption.



---

archive/issue_comments_293472.json:
```json
{
    "body": "Changed commit from **[793fbde](https://github.com/sagemath/sagetrac-mirror/commit/793fbdeba581155a5f21c2a07ec81f1de6a5e396)** to **[06c8fda](https://github.com/sagemath/sagetrac-mirror/commit/06c8fda7e1b115e1ef35a0ab605ebe24f719efc2)**",
    "created_at": "2022-02-24T10:07:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293472",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[793fbde](https://github.com/sagemath/sagetrac-mirror/commit/793fbdeba581155a5f21c2a07ec81f1de6a5e396)** to **[06c8fda](https://github.com/sagemath/sagetrac-mirror/commit/06c8fda7e1b115e1ef35a0ab605ebe24f719efc2)**



---

archive/issue_comments_293473.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2539054e08f22de5c053559588b63742b38c48b8\">2539054</a></td><td><code>20343:fixing 2 doctests + wrong trailing colons</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ed6a0cb9009fd8b2582bf36f736c6099aee4809\">1ed6a0c</a></td><td><code>20343: change default from pdf2svg to pdftocairo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6111d2ad710fc3c53886778793ba544fe9cdb337\">6111d2a</a></td><td><code>20343: provide log if an error occurs in method png</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21fe0d37a42b8a0b79275976e6136dafac9dbf25\">21fe0d3</a></td><td><code>20343: change default value of usepackage to None</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a424ed5055c89e152483c271f83eef4b11476dc2\">a424ed5</a></td><td><code>20343: use shell=False instead</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9dcd5e7b97264ce2bbf6828e376244c3679831e\">f9dcd5e</a></td><td><code>20343: add doctest showing spaces in filename</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad234af0290795b0b063f77b83a9654e9c89c02c\">ad234af</a></td><td><code>20343: adding missing optional latex tag</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32f5efaa60d835b3d81f0487edb407d19afefeff\">32f5efa</a></td><td><code>20343: using else instead of elif</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dde1186dd2a3728589462fe58cba70d27d9b5a16\">dde1186</a></td><td><code>20343: rename _filename* -> temp_filename*</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06c8fda7e1b115e1ef35a0ab605ebe24f719efc2\">06c8fda</a></td><td><code>20343: from_graph, from_poset -> _from_graph, _from_poset</code></td></tr></table>\n",
    "created_at": "2022-02-24T10:07:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293473",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2539054e08f22de5c053559588b63742b38c48b8">2539054</a></td><td><code>20343:fixing 2 doctests + wrong trailing colons</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ed6a0cb9009fd8b2582bf36f736c6099aee4809">1ed6a0c</a></td><td><code>20343: change default from pdf2svg to pdftocairo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6111d2ad710fc3c53886778793ba544fe9cdb337">6111d2a</a></td><td><code>20343: provide log if an error occurs in method png</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21fe0d37a42b8a0b79275976e6136dafac9dbf25">21fe0d3</a></td><td><code>20343: change default value of usepackage to None</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a424ed5055c89e152483c271f83eef4b11476dc2">a424ed5</a></td><td><code>20343: use shell=False instead</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9dcd5e7b97264ce2bbf6828e376244c3679831e">f9dcd5e</a></td><td><code>20343: add doctest showing spaces in filename</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad234af0290795b0b063f77b83a9654e9c89c02c">ad234af</a></td><td><code>20343: adding missing optional latex tag</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32f5efaa60d835b3d81f0487edb407d19afefeff">32f5efa</a></td><td><code>20343: using else instead of elif</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dde1186dd2a3728589462fe58cba70d27d9b5a16">dde1186</a></td><td><code>20343: rename _filename* -> temp_filename*</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06c8fda7e1b115e1ef35a0ab605ebe24f719efc2">06c8fda</a></td><td><code>20343: from_graph, from_poset -> _from_graph, _from_poset</code></td></tr></table>




---

archive/issue_comments_293474.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI rebased the branch on 9.6.beta2. No new commit for now.",
    "created_at": "2022-02-24T10:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293474",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:2" align="right">comment:2</div>

I rebased the branch on 9.6.beta2. No new commit for now.



---

archive/issue_comments_293475.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83b367cb93f1ba8a974884669939250f72d2d4f2\">83b367c</a></td><td><code>Removed _from_graph from module doc</code></td></tr></table>\n",
    "created_at": "2022-02-24T10:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293475",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83b367cb93f1ba8a974884669939250f72d2d4f2">83b367c</a></td><td><code>Removed _from_graph from module doc</code></td></tr></table>




---

archive/issue_comments_293476.json:
```json
{
    "body": "Changed commit from **[06c8fda](https://github.com/sagemath/sagetrac-mirror/commit/06c8fda7e1b115e1ef35a0ab605ebe24f719efc2)** to **[83b367c](https://github.com/sagemath/sagetrac-mirror/commit/83b367cb93f1ba8a974884669939250f72d2d4f2)**",
    "created_at": "2022-02-24T10:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293476",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[06c8fda](https://github.com/sagemath/sagetrac-mirror/commit/06c8fda7e1b115e1ef35a0ab605ebe24f719efc2)** to **[83b367c](https://github.com/sagemath/sagetrac-mirror/commit/83b367cb93f1ba8a974884669939250f72d2d4f2)**



---

archive/issue_comments_293477.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe following reference will not work <code>:mod:\\`sage.misc.latex.py\\`</code> (you need to remove the `.py`).",
    "created_at": "2022-02-24T10:24:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293477",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

The following reference will not work <code>:mod:\`sage.misc.latex.py\`</code> (you need to remove the `.py`).



---

archive/issue_comments_293478.json:
```json
{
    "body": "Changed commit from **[83b367c](https://github.com/sagemath/sagetrac-mirror/commit/83b367cb93f1ba8a974884669939250f72d2d4f2)** to **[bb314c2](https://github.com/sagemath/sagetrac-mirror/commit/bb314c215cd5797ff979e792882c0e5dcc5086a5)**",
    "created_at": "2022-02-24T10:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293478",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[83b367c](https://github.com/sagemath/sagetrac-mirror/commit/83b367cb93f1ba8a974884669939250f72d2d4f2)** to **[bb314c2](https://github.com/sagemath/sagetrac-mirror/commit/bb314c215cd5797ff979e792882c0e5dcc5086a5)**



---

archive/issue_comments_293479.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb314c215cd5797ff979e792882c0e5dcc5086a5\">bb314c2</a></td><td><code>20343: adding info about pgf/tikz + removed acknowledgement since the code has evolved so much that it has nothing to do with sage.misc.latex anymore</code></td></tr></table>\n",
    "created_at": "2022-02-24T10:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293479",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb314c215cd5797ff979e792882c0e5dcc5086a5">bb314c2</a></td><td><code>20343: adding info about pgf/tikz + removed acknowledgement since the code has evolved so much that it has nothing to do with sage.misc.latex anymore</code></td></tr></table>




---

archive/issue_comments_293480.json:
```json
{
    "body": "Changed commit from **[bb314c2](https://github.com/sagemath/sagetrac-mirror/commit/bb314c215cd5797ff979e792882c0e5dcc5086a5)** to **[55649f6](https://github.com/sagemath/sagetrac-mirror/commit/55649f6924baab86e35045f9a1e8876c385e2fb9)**",
    "created_at": "2022-02-24T10:31:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293480",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bb314c2](https://github.com/sagemath/sagetrac-mirror/commit/bb314c215cd5797ff979e792882c0e5dcc5086a5)** to **[55649f6](https://github.com/sagemath/sagetrac-mirror/commit/55649f6924baab86e35045f9a1e8876c385e2fb9)**



---

archive/issue_comments_293481.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55649f6924baab86e35045f9a1e8876c385e2fb9\">55649f6</a></td><td><code>20343: removed a TODO</code></td></tr></table>\n",
    "created_at": "2022-02-24T10:31:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293481",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55649f6924baab86e35045f9a1e8876c385e2fb9">55649f6</a></td><td><code>20343: removed a TODO</code></td></tr></table>




---

archive/issue_comments_293482.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nNeeds review!",
    "created_at": "2022-02-24T10:31:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293482",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:7" align="right">comment:7</div>

Needs review!



---

archive/issue_comments_293483.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\npycodestyle is broken as it does not detect the prefix `r` in front of the string...\n\n```\nsrc/sage/plot/tikzpicture.py:258:34: W605 invalid escape sequence '\\d'\nsrc/sage/plot/tikzpicture.py:259:34: W605 invalid escape sequence '\\e'\n```",
    "created_at": "2022-02-24T14:42:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293483",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

pycodestyle is broken as it does not detect the prefix `r` in front of the string...

```
src/sage/plot/tikzpicture.py:258:34: W605 invalid escape sequence '\d'
src/sage/plot/tikzpicture.py:259:34: W605 invalid escape sequence '\e'
```



---

archive/issue_comments_293484.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYour module does not seem to be included in the reference manual. You have to add an entry to `src/doc/en/reference/misc/index.rst`.",
    "created_at": "2022-02-24T14:44:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293484",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

Your module does not seem to be included in the reference manual. You have to add an entry to `src/doc/en/reference/misc/index.rst`.



---

archive/issue_events_287154.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-02-24T14:44:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287154"
}
```



---

archive/issue_events_287155.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-02-24T14:44:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287155"
}
```



---

archive/issue_comments_293485.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8f49dc513a9010ade70d3025016ebd5d0a9e002\">f8f49dc</a></td><td><code>20343: fixing few \"\"\" to r\"\"\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6d0a972bd3ec403f2ae1f48043072e5a1eca849\">e6d0a97</a></td><td><code>20343: adding module in doc + further doc improvements</code></td></tr></table>\n",
    "created_at": "2022-02-24T17:49:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293485",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8f49dc513a9010ade70d3025016ebd5d0a9e002">f8f49dc</a></td><td><code>20343: fixing few """ to r"""</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6d0a972bd3ec403f2ae1f48043072e5a1eca849">e6d0a97</a></td><td><code>20343: adding module in doc + further doc improvements</code></td></tr></table>




---

archive/issue_comments_293486.json:
```json
{
    "body": "Changed commit from **[55649f6](https://github.com/sagemath/sagetrac-mirror/commit/55649f6924baab86e35045f9a1e8876c385e2fb9)** to **[e6d0a97](https://github.com/sagemath/sagetrac-mirror/commit/e6d0a972bd3ec403f2ae1f48043072e5a1eca849)**",
    "created_at": "2022-02-24T17:49:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293486",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[55649f6](https://github.com/sagemath/sagetrac-mirror/commit/55649f6924baab86e35045f9a1e8876c385e2fb9)** to **[e6d0a97](https://github.com/sagemath/sagetrac-mirror/commit/e6d0a972bd3ec403f2ae1f48043072e5a1eca849)**



---

archive/issue_comments_293487.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nNeeds review!",
    "created_at": "2022-02-24T17:49:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293487",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:1" align="right">comment:1</div>

Needs review!



---

archive/issue_events_287156.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-02-24T17:49:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287156"
}
```



---

archive/issue_events_287157.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-02-24T17:49:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287157"
}
```



---

archive/issue_comments_293488.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI did not notice before but why did you put your module in `sage/plot` rather than `sage/misc` (where all the current latex code is)?",
    "created_at": "2022-02-24T20:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293488",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">comment:2</div>

I did not notice before but why did you put your module in `sage/plot` rather than `sage/misc` (where all the current latex code is)?



---

archive/issue_comments_293489.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nReplying to [@videlec](#comment:122):\n> I did not notice before but why did you put your module in `sage/plot` rather than `sage/misc` (where all the current latex code is)?\n\nThis was suggested in [comment:34](#comment:34) by mkoeppe, to which I agree. The goal of the module is about drawing stuff, so it is natural to put it in `sage/plot`.\n\nIt is not true that all latex code is in misc. You also have `graph_latex.py` file in `sage/graphs`.\n\nAlso, to my opinion, `sage/misc/latex.py` is not soooo well-written (I repeat, this is an opinion). It is a module on which it is tough to build on top / reuse. You may want to look at the code which implements `view` to get an example. Who really wants to use this? I think the future will be more active if the features present in that module are re-thought and re-written else where and eventually it gets just replaced. The deprecation of the `have_latex` and friends methods done in #32650 is one of the many steps towards that. The creation of a module to deal with tikzpicture is another step towards that.",
    "created_at": "2022-02-24T21:13:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293489",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:123" align="right">comment:123</div>

Replying to [@videlec](#comment:122):
> I did not notice before but why did you put your module in `sage/plot` rather than `sage/misc` (where all the current latex code is)?

This was suggested in [comment:34](#comment:34) by mkoeppe, to which I agree. The goal of the module is about drawing stuff, so it is natural to put it in `sage/plot`.

It is not true that all latex code is in misc. You also have `graph_latex.py` file in `sage/graphs`.

Also, to my opinion, `sage/misc/latex.py` is not soooo well-written (I repeat, this is an opinion). It is a module on which it is tough to build on top / reuse. You may want to look at the code which implements `view` to get an example. Who really wants to use this? I think the future will be more active if the features present in that module are re-thought and re-written else where and eventually it gets just replaced. The deprecation of the `have_latex` and friends methods done in #32650 is one of the many steps towards that. The creation of a module to deal with tikzpicture is another step towards that.



---

archive/issue_comments_293490.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\nReplying to [@seblabbe](#comment:123):\n> This was suggested in [comment:34](#comment:34) by mkoeppe, to which I agree.\n\nNot sure if I still agree with myself ;)",
    "created_at": "2022-02-24T21:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293490",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:124" align="right">comment:124</div>

Replying to [@seblabbe](#comment:123):
> This was suggested in [comment:34](#comment:34) by mkoeppe, to which I agree.

Not sure if I still agree with myself ;)



---

archive/issue_comments_293491.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIt might be true that `sage.misc.latex` is a mess. But given that\n1. `tikzpicture.py` shares some functionalities with `sage.misc.latex` (including code duplication)\n2. `sage.misc.latex` is widely used\n3. you claim that `StandaloneTex`/`TikzPicture` is part of the future of `sage.misc.latex`\nI would like to\n1. have an idea of what is the future of `sage.misc.latex` (you said that a *step forward* but there is no destination)\n2. have the tools that will replace `sage.misc.latex` close to it in the sage source code or at the very least a mention of them in its documentation\n\nWhat I want to avoid is that this ticket only adds a module `n+1` to sagemath which does a small variation of module `1`, module `2` and module `n` independently of all of them.",
    "created_at": "2022-02-25T09:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293491",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

It might be true that `sage.misc.latex` is a mess. But given that
1. `tikzpicture.py` shares some functionalities with `sage.misc.latex` (including code duplication)
2. `sage.misc.latex` is widely used
3. you claim that `StandaloneTex`/`TikzPicture` is part of the future of `sage.misc.latex`
I would like to
1. have an idea of what is the future of `sage.misc.latex` (you said that a *step forward* but there is no destination)
2. have the tools that will replace `sage.misc.latex` close to it in the sage source code or at the very least a mention of them in its documentation

What I want to avoid is that this ticket only adds a module `n+1` to sagemath which does a small variation of module `1`, module `2` and module `n` independently of all of them.



---

archive/issue_comments_293492.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOk, let me do more changes (next week).",
    "created_at": "2022-02-25T17:04:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293492",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:6" align="right">comment:6</div>

Ok, let me do more changes (next week).



---

archive/issue_events_287158.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-02-25T17:04:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287158"
}
```



---

archive/issue_events_287159.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-02-25T17:04:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287159"
}
```



---

archive/issue_comments_293493.json:
```json
{
    "body": "Changed commit from **[e6d0a97](https://github.com/sagemath/sagetrac-mirror/commit/e6d0a972bd3ec403f2ae1f48043072e5a1eca849)** to **[ba46d51](https://github.com/sagemath/sagetrac-mirror/commit/ba46d5125b59988ca8690f55c62a45408374597f)**",
    "created_at": "2022-03-04T17:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293493",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e6d0a97](https://github.com/sagemath/sagetrac-mirror/commit/e6d0a972bd3ec403f2ae1f48043072e5a1eca849)** to **[ba46d51](https://github.com/sagemath/sagetrac-mirror/commit/ba46d5125b59988ca8690f55c62a45408374597f)**



---

archive/issue_comments_293494.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92e844364afbcecd88aba752b96ef38ebb02ea30\">92e8443</a></td><td><code>20343: mv plot/tikzpicture.py -> misc/latex_standalone.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a0903273b3bcb03086e9d55ad4e238674ebd978\">8a09032</a></td><td><code>20343: mv plot/tikzpicture.py -> misc/latex_standalone.py (in documentation index.rst)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58e7acdc1e7df92222c3e89013be9d1e79c23466\">58e7acd</a></td><td><code>20343: plot.tikzpicture -> misc.latex_standalone</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d15ce29456f94f28913233ec782f0b5bf09300be\">d15ce29</a></td><td><code>20343: StandaloneTex -> Standalone</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba46d5125b59988ca8690f55c62a45408374597f\">ba46d51</a></td><td><code>20343: improved module doc + enhance the Standalone module</code></td></tr></table>\n",
    "created_at": "2022-03-04T17:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293494",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92e844364afbcecd88aba752b96ef38ebb02ea30">92e8443</a></td><td><code>20343: mv plot/tikzpicture.py -> misc/latex_standalone.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a0903273b3bcb03086e9d55ad4e238674ebd978">8a09032</a></td><td><code>20343: mv plot/tikzpicture.py -> misc/latex_standalone.py (in documentation index.rst)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58e7acdc1e7df92222c3e89013be9d1e79c23466">58e7acd</a></td><td><code>20343: plot.tikzpicture -> misc.latex_standalone</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d15ce29456f94f28913233ec782f0b5bf09300be">d15ce29</a></td><td><code>20343: StandaloneTex -> Standalone</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba46d5125b59988ca8690f55c62a45408374597f">ba46d51</a></td><td><code>20343: improved module doc + enhance the Standalone module</code></td></tr></table>




---

archive/issue_comments_293495.json:
```json
{
    "body": "Changed commit from **[ba46d51](https://github.com/sagemath/sagetrac-mirror/commit/ba46d5125b59988ca8690f55c62a45408374597f)** to **[fb5c4f5](https://github.com/sagemath/sagetrac-mirror/commit/fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4)**",
    "created_at": "2022-03-04T18:21:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293495",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ba46d51](https://github.com/sagemath/sagetrac-mirror/commit/ba46d5125b59988ca8690f55c62a45408374597f)** to **[fb5c4f5](https://github.com/sagemath/sagetrac-mirror/commit/fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4)**



---

archive/issue_comments_293496.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4\">fb5c4f5</a></td><td><code>20343: fix pdftocairo feature import</code></td></tr></table>\n",
    "created_at": "2022-03-04T18:21:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293496",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4">fb5c4f5</a></td><td><code>20343: fix pdftocairo feature import</code></td></tr></table>




---

archive/issue_comments_293497.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4f4f426e4eb82df1ea2f96305ee14248b3d136b\">d4f4f42</a></td><td><code>20343: improved class and module doc</code></td></tr></table>\n",
    "created_at": "2022-03-10T11:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293497",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4f4f426e4eb82df1ea2f96305ee14248b3d136b">d4f4f42</a></td><td><code>20343: improved class and module doc</code></td></tr></table>




---

archive/issue_comments_293498.json:
```json
{
    "body": "Changed commit from **[fb5c4f5](https://github.com/sagemath/sagetrac-mirror/commit/fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4)** to **[d4f4f42](https://github.com/sagemath/sagetrac-mirror/commit/d4f4f426e4eb82df1ea2f96305ee14248b3d136b)**",
    "created_at": "2022-03-10T11:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293498",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fb5c4f5](https://github.com/sagemath/sagetrac-mirror/commit/fb5c4f56ccdbb2e4631a73cfd046b6b1dff4e5f4)** to **[d4f4f42](https://github.com/sagemath/sagetrac-mirror/commit/d4f4f426e4eb82df1ea2f96305ee14248b3d136b)**



---

archive/issue_events_287160.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-03-10T11:13:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287160"
}
```



---

archive/issue_events_287161.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-03-10T11:13:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287161"
}
```



---

archive/issue_comments_293499.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nGave more importance to the `Standalone` class. Updated and improved the documentation.\n\nNeeds review!",
    "created_at": "2022-03-10T11:13:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293499",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:0" align="right">comment:0</div>

Gave more importance to the `Standalone` class. Updated and improved the documentation.

Needs review!



---

archive/issue_comments_293500.json:
```json
{
    "body": "Changed branch from **[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)** to **[u/caruso/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/20343)**",
    "created_at": "2022-03-17T10:19:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293500",
    "user": "https://github.com/xcaruso"
}
```

Changed branch from **[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)** to **[u/caruso/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/20343)**



---

archive/issue_comments_293501.json:
```json
{
    "body": "Changed commit from **[d4f4f42](https://github.com/sagemath/sagetrac-mirror/commit/d4f4f426e4eb82df1ea2f96305ee14248b3d136b)** to **[4e4b4a4](https://github.com/sagemath/sagetrac-mirror/commit/4e4b4a4a89c405e245b77bcb405b5ec9ab713627)**",
    "created_at": "2022-03-17T16:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293501",
    "user": "https://github.com/seblabbe"
}
```

Changed commit from **[d4f4f42](https://github.com/sagemath/sagetrac-mirror/commit/d4f4f426e4eb82df1ea2f96305ee14248b3d136b)** to **[4e4b4a4](https://github.com/sagemath/sagetrac-mirror/commit/4e4b4a4a89c405e245b77bcb405b5ec9ab713627)**



---

archive/issue_comments_293502.json:
```json
{
    "body": "Changed branch from **[u/caruso/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/20343)** to **[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)**",
    "created_at": "2022-03-17T16:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293502",
    "user": "https://github.com/seblabbe"
}
```

Changed branch from **[u/caruso/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/20343)** to **[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)**



---

archive/issue_comments_293503.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9173d51a8603951d2bd78b0216ef28ab8750b26e\">9173d51</a></td><td><code>typos</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82ab15da7f413bb611bf2e3ab7239e108d04a5bf\">82ab15d</a></td><td><code>20343: adding experimental decorator to from_graph methods and removing the underscore prefix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddf2c3973b519c032752ca63f92c279b3f4f19f5\">ddf2c39</a></td><td><code>20343: using check call to open the viewer</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa55a01f3cae17f06eb6a1f221672f49f8f05fd5\">fa55a01</a></td><td><code>20343: adding stackoverflow url</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e4b4a4a89c405e245b77bcb405b5ec9ab713627\">4e4b4a4</a></td><td><code>20343: fixing a warning during docbuild</code></td></tr></table>\n",
    "created_at": "2022-03-17T16:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293503",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9173d51a8603951d2bd78b0216ef28ab8750b26e">9173d51</a></td><td><code>typos</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82ab15da7f413bb611bf2e3ab7239e108d04a5bf">82ab15d</a></td><td><code>20343: adding experimental decorator to from_graph methods and removing the underscore prefix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddf2c3973b519c032752ca63f92c279b3f4f19f5">ddf2c39</a></td><td><code>20343: using check call to open the viewer</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa55a01f3cae17f06eb6a1f221672f49f8f05fd5">fa55a01</a></td><td><code>20343: adding stackoverflow url</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e4b4a4a89c405e245b77bcb405b5ec9ab713627">4e4b4a4</a></td><td><code>20343: fixing a warning during docbuild</code></td></tr></table>




---

archive/issue_comments_293504.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nNeeds review!",
    "created_at": "2022-03-17T16:48:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293504",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:3" align="right">comment:3</div>

Needs review!



---

archive/issue_comments_293505.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n\n```\n+Loading few latex packages::\n```\n-> \"a\" few",
    "created_at": "2022-03-17T17:13:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293505",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>


```
+Loading few latex packages::
```
-> "a" few



---

archive/issue_comments_293506.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n\n```\n+#*****************************************************************************\n+#       Copyright (C) 2015-2022 S\u00e9bastien Labb\u00e9 <slabqc@gmail.com>\n+#\n+#  Distributed under the terms of the GNU General Public License version 2 (GPLv2)\n+#\n+#  The full text of the GPLv2 is available at:\n+#\n+#                  http://www.gnu.org/licenses/\n```\nThis is not our standard license header; are you sure you want to mark it as \"v2 only\"?\nOther files say \"Distributed under the terms of the GNU General Public License (GPL); either version 2 of the License, or (at your option) any later version.\"",
    "created_at": "2022-03-17T17:19:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293506",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>


```
+#*****************************************************************************
+#       Copyright (C) 2015-2022 Sébastien Labbé <slabqc@gmail.com>
+#
+#  Distributed under the terms of the GNU General Public License version 2 (GPLv2)
+#
+#  The full text of the GPLv2 is available at:
+#
+#                  http://www.gnu.org/licenses/
```
This is not our standard license header; are you sure you want to mark it as "v2 only"?
Other files say "Distributed under the terms of the GNU General Public License (GPL); either version 2 of the License, or (at your option) any later version."



---

archive/issue_comments_293507.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n\n```\n+Adding a border in the options avoids croping the vertices of a graph::\n```\n-> cropping",
    "created_at": "2022-03-17T17:20:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293507",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>


```
+Adding a border in the options avoids croping the vertices of a graph::
```
-> cropping



---

archive/issue_comments_293508.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n\n```\n+        sage: t = TikzPicture(s, standalone_config=[\"border=4mm\"], usepackage=['tkz-graph']) # optional latex\n+        sage: _ = t.pdf(view=False)             # long time (2s) # optional latex\n```\nThis should also be marked `# optional - latex_package_tkz_graph`\n(occurs several times)",
    "created_at": "2022-03-17T17:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293508",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>


```
+        sage: t = TikzPicture(s, standalone_config=["border=4mm"], usepackage=['tkz-graph']) # optional latex
+        sage: _ = t.pdf(view=False)             # long time (2s) # optional latex
```
This should also be marked `# optional - latex_package_tkz_graph`
(occurs several times)



---

archive/issue_comments_293509.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n\n```\n+            sage: dotdata = G.graphviz_string()\n+            sage: tikz = TikzPicture.from_dot_string(dotdata) # optional dot2tex # long time (3s)\n```\nthis should probably also be marked as `# optional - graphviz`",
    "created_at": "2022-03-17T17:36:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293509",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>


```
+            sage: dotdata = G.graphviz_string()
+            sage: tikz = TikzPicture.from_dot_string(dotdata) # optional dot2tex # long time (3s)
```
this should probably also be marked as `# optional - graphviz`



---

archive/issue_comments_293510.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAlso, could you please mark the doctests using graphs as `# optional - sage.graphs` and the doctests using posets as `# optional - sage.combinat`?",
    "created_at": "2022-03-17T17:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293510",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Also, could you please mark the doctests using graphs as `# optional - sage.graphs` and the doctests using posets as `# optional - sage.combinat`?



---

archive/issue_comments_293511.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nOverall looking great!",
    "created_at": "2022-03-17T17:43:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293511",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:0" align="right">comment:0</div>

Overall looking great!



---

archive/issue_comments_293512.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThanks for your review! I will improve the code accordingly.",
    "created_at": "2022-03-19T09:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293512",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:1" align="right">comment:1</div>

Thanks for your review! I will improve the code accordingly.



---

archive/issue_comments_293513.json:
```json
{
    "body": "Changed commit from **[4e4b4a4](https://github.com/sagemath/sagetrac-mirror/commit/4e4b4a4a89c405e245b77bcb405b5ec9ab713627)** to **[3ed5d51](https://github.com/sagemath/sagetrac-mirror/commit/3ed5d51a47ae8c3dd3c8090f33e73422b63d393f)**",
    "created_at": "2022-03-19T09:37:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293513",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4e4b4a4](https://github.com/sagemath/sagetrac-mirror/commit/4e4b4a4a89c405e245b77bcb405b5ec9ab713627)** to **[3ed5d51](https://github.com/sagemath/sagetrac-mirror/commit/3ed5d51a47ae8c3dd3c8090f33e73422b63d393f)**



---

archive/issue_comments_293514.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cf9af5e610998a1cc5b1e2ea19ac8c268aecee5\">7cf9af5</a></td><td><code>20343: fixing licence and typos</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ed5d51a47ae8c3dd3c8090f33e73422b63d393f\">3ed5d51</a></td><td><code>20343: adding an example showing usetikzlibrary in module doc</code></td></tr></table>\n",
    "created_at": "2022-03-19T09:37:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293514",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cf9af5e610998a1cc5b1e2ea19ac8c268aecee5">7cf9af5</a></td><td><code>20343: fixing licence and typos</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ed5d51a47ae8c3dd3c8090f33e73422b63d393f">3ed5d51</a></td><td><code>20343: adding an example showing usetikzlibrary in module doc</code></td></tr></table>




---

archive/issue_comments_293515.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIt remains to fix the doctests tags. I will do this later.",
    "created_at": "2022-03-19T09:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293515",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:3" align="right">comment:3</div>

It remains to fix the doctests tags. I will do this later.



---

archive/issue_comments_293516.json:
```json
{
    "body": "<div id=\"comment:144\" align=\"right\">comment:144</div>\n\nReplying to [@mkoeppe](#comment:137):\n> \n> ```\n> +        sage: t = TikzPicture(s, standalone_config=[\"border=4mm\"], usepackage=['tkz-graph']) # optional latex\n> +        sage: _ = t.pdf(view=False)             # long time (2s) # optional latex\n> ```\n> This should also be marked `# optional - latex_package_tkz_graph`\n> (occurs several times)\n\nOnly the line `t.pdf()` really needs the `latex_package_tkz_graph` optional tag. So I added this tag where necessary. Creating a Python string containing `'\\usetikzlibrary{tkz-graph}'` by itself does not depend on the latex package. So, I did not added the optional tag everywhere.",
    "created_at": "2022-03-21T13:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293516",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:144" align="right">comment:144</div>

Replying to [@mkoeppe](#comment:137):
> 
> ```
> +        sage: t = TikzPicture(s, standalone_config=["border=4mm"], usepackage=['tkz-graph']) # optional latex
> +        sage: _ = t.pdf(view=False)             # long time (2s) # optional latex
> ```
> This should also be marked `# optional - latex_package_tkz_graph`
> (occurs several times)

Only the line `t.pdf()` really needs the `latex_package_tkz_graph` optional tag. So I added this tag where necessary. Creating a Python string containing `'\usetikzlibrary{tkz-graph}'` by itself does not depend on the latex package. So, I did not added the optional tag everywhere.



---

archive/issue_comments_293517.json:
```json
{
    "body": "<div id=\"comment:145\" align=\"right\">comment:145</div>\n\nReplying to [@mkoeppe](#comment:138):\n> \n> ```\n> +            sage: dotdata = G.graphviz_string()\n> +            sage: tikz = TikzPicture.from_dot_string(dotdata) # optional dot2tex # long time (3s)\n> ```\n> this should probably also be marked as `# optional - graphviz`\n\nAt some point in time, it was changed that the installation of `dot2tex` fails if `graphviz` is not installed. But, whatever, maybe it is better to add `graphviz` optional tag as well, which I did (commits to be pushed soonafter).",
    "created_at": "2022-03-21T13:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293517",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:145" align="right">comment:145</div>

Replying to [@mkoeppe](#comment:138):
> 
> ```
> +            sage: dotdata = G.graphviz_string()
> +            sage: tikz = TikzPicture.from_dot_string(dotdata) # optional dot2tex # long time (3s)
> ```
> this should probably also be marked as `# optional - graphviz`

At some point in time, it was changed that the installation of `dot2tex` fails if `graphviz` is not installed. But, whatever, maybe it is better to add `graphviz` optional tag as well, which I did (commits to be pushed soonafter).



---

archive/issue_comments_293518.json:
```json
{
    "body": "<div id=\"comment:146\" align=\"right\">comment:146</div>\n\nReplying to [@mkoeppe](#comment:139):\n> Also, could you please mark the doctests using graphs as `# optional - sage.graphs` and the doctests using posets as `# optional - sage.combinat`?\n\nOk, done.",
    "created_at": "2022-03-21T13:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293518",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:146" align="right">comment:146</div>

Replying to [@mkoeppe](#comment:139):
> Also, could you please mark the doctests using graphs as `# optional - sage.graphs` and the doctests using posets as `# optional - sage.combinat`?

Ok, done.



---

archive/issue_comments_293519.json:
```json
{
    "body": "Changed commit from **[3ed5d51](https://github.com/sagemath/sagetrac-mirror/commit/3ed5d51a47ae8c3dd3c8090f33e73422b63d393f)** to **[36c3ebb](https://github.com/sagemath/sagetrac-mirror/commit/36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216)**",
    "created_at": "2022-03-21T13:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293519",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3ed5d51](https://github.com/sagemath/sagetrac-mirror/commit/3ed5d51a47ae8c3dd3c8090f33e73422b63d393f)** to **[36c3ebb](https://github.com/sagemath/sagetrac-mirror/commit/36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216)**



---

archive/issue_comments_293520.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f39c06f9b61e26870ae24328509465b49fcd98a\">5f39c06</a></td><td><code>20343: adding latex and latex_package_tkz_graph tags where necessary</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d981b6fd10a15c6276d77c336391c40ffa6119e\">8d981b6</a></td><td><code>20343:adding missing graphviz optional tag</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216\">36c3ebb</a></td><td><code>20343: adding tag sage.graphs, sage.combinat, graphviz at some places</code></td></tr></table>\n",
    "created_at": "2022-03-21T13:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293520",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f39c06f9b61e26870ae24328509465b49fcd98a">5f39c06</a></td><td><code>20343: adding latex and latex_package_tkz_graph tags where necessary</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d981b6fd10a15c6276d77c336391c40ffa6119e">8d981b6</a></td><td><code>20343:adding missing graphviz optional tag</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216">36c3ebb</a></td><td><code>20343: adding tag sage.graphs, sage.combinat, graphviz at some places</code></td></tr></table>




---

archive/issue_comments_293521.json:
```json
{
    "body": "<div id=\"comment:148\" align=\"right\">comment:148</div>\n\nReplying to [@mkoeppe](#comment:139):\n> Also, could you please mark the doctests using graphs as `# optional - sage.graphs` and the doctests using posets as `# optional - sage.combinat`?\n\nAlso I could make the doctests less dependent on graphs stuff.",
    "created_at": "2022-03-21T13:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293521",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:148" align="right">comment:148</div>

Replying to [@mkoeppe](#comment:139):
> Also, could you please mark the doctests using graphs as `# optional - sage.graphs` and the doctests using posets as `# optional - sage.combinat`?

Also I could make the doctests less dependent on graphs stuff.



---

archive/issue_comments_293522.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/936e82d8cdc921e853fc9e5cbc2cda030fd782bf\">936e82d</a></td><td><code>20343: updating example in docstrings of Standalone class to use Standalone class instead of inherited class TikzPicture</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e90292c522f3cc7449599a892ae5827307f68bed\">e90292c</a></td><td><code>20343: adding methods to append to the lists of options</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a\">bc9186f</a></td><td><code>20343: add a deprecation message for include_header -> content_only</code></td></tr></table>\n",
    "created_at": "2022-03-21T14:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293522",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/936e82d8cdc921e853fc9e5cbc2cda030fd782bf">936e82d</a></td><td><code>20343: updating example in docstrings of Standalone class to use Standalone class instead of inherited class TikzPicture</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e90292c522f3cc7449599a892ae5827307f68bed">e90292c</a></td><td><code>20343: adding methods to append to the lists of options</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a">bc9186f</a></td><td><code>20343: add a deprecation message for include_header -> content_only</code></td></tr></table>




---

archive/issue_comments_293523.json:
```json
{
    "body": "Changed commit from **[36c3ebb](https://github.com/sagemath/sagetrac-mirror/commit/36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216)** to **[bc9186f](https://github.com/sagemath/sagetrac-mirror/commit/bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a)**",
    "created_at": "2022-03-21T14:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293523",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[36c3ebb](https://github.com/sagemath/sagetrac-mirror/commit/36c3ebb5c2fa064b8c0f7e262ba2c3c06e9a9216)** to **[bc9186f](https://github.com/sagemath/sagetrac-mirror/commit/bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a)**



---

archive/issue_comments_293524.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nNeeds review!",
    "created_at": "2022-03-21T14:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293524",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:0" align="right">comment:0</div>

Needs review!



---

archive/issue_comments_293525.json:
```json
{
    "body": "Changed reviewer from **Jean-Philippe Labb\u00e9, Xavier Caruso, Vincent Delecroix** to **Jean-Philippe Labb\u00e9, Xavier Caruso, Vincent Delecroix, Matthias Koeppe**",
    "created_at": "2022-03-21T17:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293525",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Jean-Philippe Labbé, Xavier Caruso, Vincent Delecroix** to **Jean-Philippe Labbé, Xavier Caruso, Vincent Delecroix, Matthias Koeppe**



---

archive/issue_comments_293526.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nLooking great.\n\nThese lines and what depends on them should be marked `# optional - sage.symbolic` (for #32432, #32601)\n\n```\n+            sage: f(x) = -1 / x\n+            sage: g(x) = 1 / (x + 1)\n```\n\nOther than that, from my side it's positive review.",
    "created_at": "2022-03-21T17:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293526",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

Looking great.

These lines and what depends on them should be marked `# optional - sage.symbolic` (for #32432, #32601)

```
+            sage: f(x) = -1 / x
+            sage: g(x) = 1 / (x + 1)
```

Other than that, from my side it's positive review.



---

archive/issue_comments_293527.json:
```json
{
    "body": "<div id=\"comment:152\" align=\"right\">comment:152</div>\n\nReplying to [@mkoeppe](#comment:151):\n> These lines and what depends on them should be marked `# optional - sage.symbolic` (for #32432, #32601)\n> \n> ```\n> +            sage: f(x) = -1 / x\n> +            sage: g(x) = 1 / (x + 1)\n> ```\n> \n> Other than that, from my side it's positive review.\n\nAlternatively, use lambda functions instead of symbolic ones:\n\n```diff\n-            sage: f(x) = -1 / x\n-            sage: g(x) = 1 / (x + 1)\n+            sage: f = lambda x: -1 / x\n+            sage: g = lambda x: 1 / (x + 1)\n```",
    "created_at": "2022-03-21T22:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293527",
    "user": "https://github.com/slel"
}
```

<div id="comment:152" align="right">comment:152</div>

Replying to [@mkoeppe](#comment:151):
> These lines and what depends on them should be marked `# optional - sage.symbolic` (for #32432, #32601)
> 
> ```
> +            sage: f(x) = -1 / x
> +            sage: g(x) = 1 / (x + 1)
> ```
> 
> Other than that, from my side it's positive review.

Alternatively, use lambda functions instead of symbolic ones:

```diff
-            sage: f(x) = -1 / x
-            sage: g(x) = 1 / (x + 1)
+            sage: f = lambda x: -1 / x
+            sage: g = lambda x: 1 / (x + 1)
```



---

archive/issue_comments_293528.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nNo, they wouldn't show up well in the plots.",
    "created_at": "2022-03-21T22:42:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293528",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

No, they wouldn't show up well in the plots.



---

archive/issue_comments_293529.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nGreat! I think it is time to give a positive review to this ticket!",
    "created_at": "2022-03-22T15:29:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293529",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:4" align="right">comment:4</div>

Great! I think it is time to give a positive review to this ticket!



---

archive/issue_events_287162.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-03-22T15:29:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287162"
}
```



---

archive/issue_events_287163.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-03-22T15:29:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287163"
}
```



---

archive/issue_comments_293530.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360\">5c9b41c</a></td><td><code>20343: adding doctest tag sage.symbolic</code></td></tr></table>\n",
    "created_at": "2022-03-22T19:31:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293530",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360">5c9b41c</a></td><td><code>20343: adding doctest tag sage.symbolic</code></td></tr></table>




---

archive/issue_comments_293531.json:
```json
{
    "body": "Changed commit from **[bc9186f](https://github.com/sagemath/sagetrac-mirror/commit/bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a)** to **[5c9b41c](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)**",
    "created_at": "2022-03-22T19:31:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293531",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bc9186f](https://github.com/sagemath/sagetrac-mirror/commit/bc9186f91cb6a8f0d55d0e9eb1d7f18fe831dc1a)** to **[5c9b41c](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)**



---

archive/issue_events_287164.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-03-22T19:31:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287164"
}
```



---

archive/issue_events_287165.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-03-22T19:31:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287165"
}
```



---

archive/issue_events_287166.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-03-22T19:32:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "title_is": "Adding sage/misc/latex_standalone.py + class TikzPicture",
    "title_was": "Adding sage/plot/tikzpicture.py",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287166"
}
```



---

archive/issue_comments_293532.json:
```json
{
    "body": "<div id=\"comment:157\" align=\"right\">comment:157</div>\n\nReplying to [@xcaruso](#comment:154):\n> Great! I think it is time to give a positive review to this ticket!\n\nI added the doctests tags `sage.symbolic` to answer the latest comment. Needs review again. Sorry.\n\nI also updated the title of the ticket.",
    "created_at": "2022-03-22T19:33:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293532",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:157" align="right">comment:157</div>

Replying to [@xcaruso](#comment:154):
> Great! I think it is time to give a positive review to this ticket!

I added the doctests tags `sage.symbolic` to answer the latest comment. Needs review again. Sorry.

I also updated the title of the ticket.



---

archive/issue_comments_293533.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n More examples:\n \n ```\n-sage: from sage.plot.tikzpicture import TikzPicture\n+sage: from sage.misc.latex_standalone import TikzPicture\n sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]\n sage: P = Polyhedron(vertices=V).polar()\n sage: s = P.projection().tikz([674,108,-731],112)\n``````\n",
    "created_at": "2022-03-22T19:38:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293533",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 More examples:
 
 ```
-sage: from sage.plot.tikzpicture import TikzPicture
+sage: from sage.misc.latex_standalone import TikzPicture
 sage: V = [[1,0,1],[1,0,0],[1,1,0],[0,0,-1],[0,1,0],[-1,0,0],[0,1,1],[0,0,1],[0,-1,0]]
 sage: P = Polyhedron(vertices=V).polar()
 sage: s = P.projection().tikz([674,108,-731],112)
``````




---

archive/issue_comments_293534.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state and it is mature enough to go into SageMath now.\n \n-Here is a demo inside a Jupyter notebook:\n+Here is a demo inside a Jupyter notebook (notice that the import line was since changed to `from sage.misc.latex_standalone import TikzPicture`):\n \n <img src=\"tikz-jupyter-demo.png\" width=width=600>\n \n``````\n",
    "created_at": "2022-03-22T19:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293534",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 The goal of this ticket is to import the `TikzPicture` module from the optional SageMath package [slabbe](https://pypi.org/project/slabbe/) into SageMath. This module has been created in 2016 and has evolved to a stable  state and it is mature enough to go into SageMath now.
 
-Here is a demo inside a Jupyter notebook:
+Here is a demo inside a Jupyter notebook (notice that the import line was since changed to `from sage.misc.latex_standalone import TikzPicture`):
 
 <img src="tikz-jupyter-demo.png" width=width=600>
 
``````




---

archive/issue_comments_293535.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nPatchbot is green. We can change the status to positive review.\n\nBut, maybe before, we could check if all tests pass on a machine with no latex installed, because Volker is using such a computer to test tickets, see [comment:85](#comment:85). Do someone has a machine with no latex? Or is there an easy way to mimic its absence?",
    "created_at": "2022-03-23T12:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293535",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:0" align="right">comment:0</div>

Patchbot is green. We can change the status to positive review.

But, maybe before, we could check if all tests pass on a machine with no latex installed, because Volker is using such a computer to test tickets, see [comment:85](#comment:85). Do someone has a machine with no latex? Or is there an easy way to mimic its absence?



---

archive/issue_comments_293536.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -100,5 +100,13 @@\n ```\n \n An example of usage of this module can be found at this url:\n-https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n-associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics at http://dx.doi.org/10.3934/jmd.2021017.\n+\n+- https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb\n+\n+associated to the preprint\n+\n+- https://arxiv.org/abs/1906.01104\n+\n+published in Journal of Modern Dynamics at\n+\n+- http://dx.doi.org/10.3934/jmd.2021017\n``````\n",
    "created_at": "2022-03-23T15:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293536",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -100,5 +100,13 @@
 ```
 
 An example of usage of this module can be found at this url:
-https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb
-associated to the preprint https://arxiv.org/abs/1906.01104 published in Journal of Modern Dynamics at http://dx.doi.org/10.3934/jmd.2021017.
+
+- https://nbviewer.jupyter.org/url/www.slabbe.org/Publications/arXiv_1906_01104.ipynb
+
+associated to the preprint
+
+- https://arxiv.org/abs/1906.01104
+
+published in Journal of Modern Dynamics at
+
+- http://dx.doi.org/10.3934/jmd.2021017
``````




---

archive/issue_events_287167.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-03-23T15:11:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "title_is": "Add file `sage/misc/latex_standalone.py` and class `TikzPicture`",
    "title_was": "Adding sage/misc/latex_standalone.py + class TikzPicture",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287167"
}
```



---

archive/issue_comments_293537.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThere must be a way to use tox for that...",
    "created_at": "2022-03-23T16:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293537",
    "user": "https://github.com/slel"
}
```

<div id="comment:2" align="right">comment:2</div>

There must be a way to use tox for that...



---

archive/issue_comments_293538.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI found a computer with no latex and no imagemagick:\n\n```\n$ pdflatex -v\n\nLa commande \u00ab pdflatex \u00bb n'a pas \u00e9t\u00e9 trouv\u00e9e, mais peut \u00eatre install\u00e9e avec :\n\nsudo apt install texlive-latex-base\n```\n\n```\n$ lualatex -v\n\nLa commande \u00ab lualatex \u00bb n'a pas \u00e9t\u00e9 trouv\u00e9e, mais peut \u00eatre install\u00e9e avec :\n\nsudo apt install texlive-latex-base\n```\n\n```\n$ convert -v\n\nLa commande \u00ab convert \u00bb n'a pas \u00e9t\u00e9 trouv\u00e9e, mais peut \u00eatre install\u00e9e avec :\n\nsudo apt install graphicsmagick-imagemagick-compat  # version 1.4+really1.3.35-1, or\nsudo apt install imagemagick-6.q16                  # version 8:6.9.10.23+dfsg-2.1ubuntu11.4\nsudo apt install imagemagick-6.q16hdri              # version 8:6.9.10.23+dfsg-2.1ubuntu11.4\n```\non which I installed sage:\n\n```\n$ ./sage -version\nSageMath version 9.6.beta5, Release Date: 2022-03-12\n```\n\non which I merged this ticket, I confirm the doctests work:\n\n```\n./sage -t src/sage/misc/latex_standalone.py \nno stored timings available\nRunning doctests with ID 2022-03-24-11-08-32-82df3068.\nGit branch: 20343\nUsing --optional=debian,pip,sage,sage_spkg\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\nDoctesting 1 file.\nsage -t --random-seed=224621707555152601217192014946498015018 src/sage/misc/latex_standalone.py\n    [216 tests, 0.29 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 0.3 seconds\n    cpu time: 0.3 seconds\n    cumulative wall time: 0.3 seconds\nFeatures detected for doctesting: graphviz,sage.combinat,sage.graphs,sage.symbolic\nPytest is not installed, skip checking tests that rely on it.\n```\n\n```\n$ ./sage -t --optional=sage,optional,external --long src/sage/misc/latex_standalone.py \ntoo few successful tests, not using stored timings\nRunning doctests with ID 2022-03-24-11-08-54-06354475.\nGit branch: 20343\nUsing --optional=debian,external,pip,sage,sage_spkg\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,cplex,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,ffmpeg,graphviz,gurobi,imagemagick,internet,jupymake,kenzo,latex,latex_package_tkz_graph,latte_int,lrslib,lualatex,macaulay2,magma,maple,mathematica,matlab,mcqd,meataxe,nauty,octave,palp,pandoc,pdf2svg,pdflatex,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,scilab,sphinx,tdlib,xelatex\nDoctesting 1 file.\nsage -t --long --random-seed=318237908393715923968305484155979250546 src/sage/misc/latex_standalone.py\n    [216 tests, 0.29 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 0.4 seconds\n    cpu time: 0.3 seconds\n    cumulative wall time: 0.3 seconds\nFeatures detected for doctesting: graphviz,pdftocairo,sage.combinat,sage.graphs,sage.symbolic\nPytest is not installed, skip checking tests that rely on it.\n```",
    "created_at": "2022-03-24T10:14:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293538",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:3" align="right">comment:3</div>

I found a computer with no latex and no imagemagick:

```
$ pdflatex -v

La commande « pdflatex » n'a pas été trouvée, mais peut être installée avec :

sudo apt install texlive-latex-base
```

```
$ lualatex -v

La commande « lualatex » n'a pas été trouvée, mais peut être installée avec :

sudo apt install texlive-latex-base
```

```
$ convert -v

La commande « convert » n'a pas été trouvée, mais peut être installée avec :

sudo apt install graphicsmagick-imagemagick-compat  # version 1.4+really1.3.35-1, or
sudo apt install imagemagick-6.q16                  # version 8:6.9.10.23+dfsg-2.1ubuntu11.4
sudo apt install imagemagick-6.q16hdri              # version 8:6.9.10.23+dfsg-2.1ubuntu11.4
```
on which I installed sage:

```
$ ./sage -version
SageMath version 9.6.beta5, Release Date: 2022-03-12
```

on which I merged this ticket, I confirm the doctests work:

```
./sage -t src/sage/misc/latex_standalone.py 
no stored timings available
Running doctests with ID 2022-03-24-11-08-32-82df3068.
Git branch: 20343
Using --optional=debian,pip,sage,sage_spkg
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
Doctesting 1 file.
sage -t --random-seed=224621707555152601217192014946498015018 src/sage/misc/latex_standalone.py
    [216 tests, 0.29 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 0.3 seconds
    cpu time: 0.3 seconds
    cumulative wall time: 0.3 seconds
Features detected for doctesting: graphviz,sage.combinat,sage.graphs,sage.symbolic
Pytest is not installed, skip checking tests that rely on it.
```

```
$ ./sage -t --optional=sage,optional,external --long src/sage/misc/latex_standalone.py 
too few successful tests, not using stored timings
Running doctests with ID 2022-03-24-11-08-54-06354475.
Git branch: 20343
Using --optional=debian,external,pip,sage,sage_spkg
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,cplex,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,ffmpeg,graphviz,gurobi,imagemagick,internet,jupymake,kenzo,latex,latex_package_tkz_graph,latte_int,lrslib,lualatex,macaulay2,magma,maple,mathematica,matlab,mcqd,meataxe,nauty,octave,palp,pandoc,pdf2svg,pdflatex,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,scilab,sphinx,tdlib,xelatex
Doctesting 1 file.
sage -t --long --random-seed=318237908393715923968305484155979250546 src/sage/misc/latex_standalone.py
    [216 tests, 0.29 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 0.4 seconds
    cpu time: 0.3 seconds
    cumulative wall time: 0.3 seconds
Features detected for doctesting: graphviz,pdftocairo,sage.combinat,sage.graphs,sage.symbolic
Pytest is not installed, skip checking tests that rely on it.
```



---

archive/issue_events_287168.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-03-24T10:21:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287168"
}
```



---

archive/issue_events_287169.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-03-24T10:21:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287169"
}
```



---

archive/issue_comments_293539.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nNice! I give back a positive review to this ticket.",
    "created_at": "2022-03-24T10:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293539",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:4" align="right">comment:4</div>

Nice! I give back a positive review to this ticket.



---

archive/issue_comments_293540.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSuper!",
    "created_at": "2022-03-24T13:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293540",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:5" align="right">comment:5</div>

Super!



---

archive/issue_events_287170.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-30T22:33:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287170"
}
```



---

archive/issue_events_287171.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5166ac1413dde897f65fc19b5e567913ac06a49e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-03-30T22:33:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20343#event-287171"
}
```



---

archive/issue_comments_293541.json:
```json
{
    "body": "Changed branch from **[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)** to **[5c9b41c](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)**",
    "created_at": "2022-03-30T22:33:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293541",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/slabbe/20343](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/20343)** to **[5c9b41c](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)**



---

archive/issue_comments_293542.json:
```json
{
    "body": "Changed commit from **[5c9b41c](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)** to none",
    "created_at": "2022-04-02T20:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293542",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[5c9b41c](https://github.com/sagemath/sagetrac-mirror/commit/5c9b41c96e4213242fee4af98b934914fb4d2360)** to none



---

archive/issue_comments_293543.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nthis has introduced wrong indentation\n\n```\nsrc/sage/misc/latex_standalone.py:688:12: E111 indentation is not a multiple of four\nsrc/sage/misc/latex_standalone.py:689:16: E111 indentation is not a multiple of four\nsrc/sage/misc/latex_standalone.py:690:12: E111 indentation is not a multiple of four\nsrc/sage/misc/latex_standalone.py:691:16: E111 indentation is not a multiple of four\n```",
    "created_at": "2022-04-02T20:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293543",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

this has introduced wrong indentation

```
src/sage/misc/latex_standalone.py:688:12: E111 indentation is not a multiple of four
src/sage/misc/latex_standalone.py:689:16: E111 indentation is not a multiple of four
src/sage/misc/latex_standalone.py:690:12: E111 indentation is not a multiple of four
src/sage/misc/latex_standalone.py:691:16: E111 indentation is not a multiple of four
```



---

archive/issue_comments_293544.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nso please swiftly review #33635",
    "created_at": "2022-04-03T08:10:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293544",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

so please swiftly review #33635



---

archive/issue_comments_293545.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nCould this possibly be leading to the bad LaTeX that's causing the problem with  `view(crystals.Tableaux(\"A3\",shape=[2,1]))` \u2014 see https://groups.google.com/g/sage-support/c/1u4m-Osz6jY/m/PAM-1C40AwAJ?",
    "created_at": "2022-06-02T17:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293545",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

Could this possibly be leading to the bad LaTeX that's causing the problem with  `view(crystals.Tableaux("A3",shape=[2,1]))` — see https://groups.google.com/g/sage-support/c/1u4m-Osz6jY/m/PAM-1C40AwAJ?



---

archive/issue_comments_293546.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nIn case this is relevant to the `view(crystals....)` failure, that is now #33947.",
    "created_at": "2022-06-02T23:07:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293546",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:0" align="right">comment:0</div>

In case this is relevant to the `view(crystals....)` failure, that is now #33947.



---

archive/issue_comments_293547.json:
```json
{
    "body": "<div id=\"comment:171\" align=\"right\">comment:171</div>\n\nReplying to [@jhpalmieri](#comment:169):\n> Could this possibly be leading to the bad LaTeX that's causing the problem with  `view(crystals.Tableaux(\"A3\",shape=[2,1]))` \u2014 see https://groups.google.com/g/sage-support/c/1u4m-Osz6jY/m/PAM-1C40AwAJ?\n\nNo. The problem reported on sage-support is with respect to Sage 9.3. The `TikzPicture` code went into sage in 9.6. Also, for now, no other file is using the new `TikzPicture` module.",
    "created_at": "2022-06-03T07:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20343#issuecomment-293547",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:171" align="right">comment:171</div>

Replying to [@jhpalmieri](#comment:169):
> Could this possibly be leading to the bad LaTeX that's causing the problem with  `view(crystals.Tableaux("A3",shape=[2,1]))` — see https://groups.google.com/g/sage-support/c/1u4m-Osz6jY/m/PAM-1C40AwAJ?

No. The problem reported on sage-support is with respect to Sage 9.3. The `TikzPicture` code went into sage in 9.6. Also, for now, no other file is using the new `TikzPicture` module.
