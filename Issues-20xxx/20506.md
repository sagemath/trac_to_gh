# Issue 20506: dual variables handling in SDP solver(s)

archive/issues_020269.json:
```json
{
    "assignees": [],
    "body": "At present only primal variables are made available in `SemidefiniteProgram()`, although the dual variables are typically also provided by backends. This ticket added access to dual (and slack) variables.\n\nDepends on #19072\n\nCC:  @sagetrac-srobik @mkoeppe @kiwifb\n\nBranch: **[`572b630`](https://github.com/sagemath/sagetrac-mirror/commit/572b630527b6c6a29853f18bedd3bcea9e30ca57)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Dima Pasechnik**\n\nComponent: **numerical**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20506_\n\n",
    "closed_at": "2016-05-04T17:10:36Z",
    "created_at": "2016-04-27T08:09:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20numerical",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "dual variables handling in SDP solver(s)",
    "type": "issue",
    "updated_at": "2016-10-27T21:28:50Z",
    "url": "https://github.com/sagemath/sage/issues/20506",
    "user": "https://github.com/dimpase"
}
```
At present only primal variables are made available in `SemidefiniteProgram()`, although the dual variables are typically also provided by backends. This ticket added access to dual (and slack) variables.

Depends on #19072

CC:  @sagetrac-srobik @mkoeppe @kiwifb

Branch: **[`572b630`](https://github.com/sagemath/sagetrac-mirror/commit/572b630527b6c6a29853f18bedd3bcea9e30ca57)**

Reviewer: **Matthias Koeppe**

Author: **Dima Pasechnik**

Component: **numerical**

_Issue created by migration from https://trac.sagemath.org/ticket/20506_





---

archive/issue_events_286437.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-04-27T08:09:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286437"
}
```



---

archive/issue_events_286438.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-04-27T08:09:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20numerical",
    "label_color": "0000ff",
    "label_name": "c: numerical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286438"
}
```



---

archive/issue_events_286439.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-04-27T08:09:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286439"
}
```



---

archive/issue_events_286440.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-04-27T08:09:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286440"
}
```



---

archive/issue_comments_295998.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nthe dependence on #19072 may be ignored for all practical purposes.",
    "created_at": "2016-04-27T08:12:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-295998",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">comment:1</div>

the dependence on #19072 may be ignored for all practical purposes.



---

archive/issue_events_286441.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-04-27T08:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286441"
}
```



---

archive/issue_comments_295999.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'm a bit puzzled why you would want doctests for the particular floating point noise that you get from this version of the solver. Seems like extra work every time the package is upgraded?",
    "created_at": "2016-04-27T08:27:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-295999",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

I'm a bit puzzled why you would want doctests for the particular floating point noise that you get from this version of the solver. Seems like extra work every time the package is upgraded?



---

archive/issue_comments_296000.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@mkoeppe](#comment:2):\n> I'm a bit puzzled why you would want doctests for the particular floating point noise that you get from this version of the solver. Seems like extra work every time the package is upgraded?\n\nI tried to round things using '...' etc as much as possible. I can in principle go \nfurther with replacing things like\n\n```\n    sage: (p.slack(0)*p.dual_variable(0)).trace()\n    1.71...e-07\n```\nby\n\n```\n    sage: 0.0e0 <= (p.slack(0)*p.dual_variable(0)).trace() < 1.75e-07\n    True\n```\n\nEventually we should think how to adapt your testing framework to SDP.",
    "created_at": "2016-04-27T08:51:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296000",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@mkoeppe](#comment:2):
> I'm a bit puzzled why you would want doctests for the particular floating point noise that you get from this version of the solver. Seems like extra work every time the package is upgraded?

I tried to round things using '...' etc as much as possible. I can in principle go 
further with replacing things like

```
    sage: (p.slack(0)*p.dual_variable(0)).trace()
    1.71...e-07
```
by

```
    sage: 0.0e0 <= (p.slack(0)*p.dual_variable(0)).trace() < 1.75e-07
    True
```

Eventually we should think how to adapt your testing framework to SDP.



---

archive/issue_comments_296001.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHow about \n\n```\nsage: (p.slack(0)*p.dual_variable(0)).trace()  # tol 1e-6\n0\n```",
    "created_at": "2016-04-27T19:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296001",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

How about 

```
sage: (p.slack(0)*p.dual_variable(0)).trace()  # tol 1e-6
0
```



---

archive/issue_comments_296002.json:
```json
{
    "body": "Changed commit from **[`73e2bf6`](https://github.com/sagemath/sagetrac-mirror/commit/73e2bf6b76fcecdd4f388caa8c3016707aa5013f)** to **[`df80c5a`](https://github.com/sagemath/sagetrac-mirror/commit/df80c5a7736bf85ccb62b0f2d9120cd3de641399)**",
    "created_at": "2016-04-28T00:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296002",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`73e2bf6`](https://github.com/sagemath/sagetrac-mirror/commit/73e2bf6b76fcecdd4f388caa8c3016707aa5013f)** to **[`df80c5a`](https://github.com/sagemath/sagetrac-mirror/commit/df80c5a7736bf85ccb62b0f2d9120cd3de641399)**



---

archive/issue_comments_296003.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df80c5a7736bf85ccb62b0f2d9120cd3de641399\"><code>df80c5a</code></a></td><td><code>using #tol</code></td></tr></table>\n",
    "created_at": "2016-04-28T00:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296003",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df80c5a7736bf85ccb62b0f2d9120cd3de641399"><code>df80c5a</code></a></td><td><code>using #tol</code></td></tr></table>




---

archive/issue_comments_296004.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@mkoeppe](#comment:4):\n> How about \n> \n> ```\n> sage: (p.slack(0)*p.dual_variable(0)).trace()  # tol 1e-6\n> 0\n> ```\n\ngood idea, fixed!",
    "created_at": "2016-04-28T00:55:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296004",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@mkoeppe](#comment:4):
> How about 
> 
> ```
> sage: (p.slack(0)*p.dual_variable(0)).trace()  # tol 1e-6
> 0
> ```

good idea, fixed!



---

archive/issue_comments_296005.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThere are more places in the file that could use the #tol.\nAnd perhaps there should be an example in which the slack is not 0.",
    "created_at": "2016-04-28T01:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296005",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

There are more places in the file that could use the #tol.
And perhaps there should be an example in which the slack is not 0.



---

archive/issue_comments_296006.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b91e62d7827e3dcc7d478d0a44dc7913fc5d7008\"><code>b91e62d</code></a></td><td><code>example with non-0 slack</code></td></tr></table>\n",
    "created_at": "2016-04-28T06:45:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296006",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b91e62d7827e3dcc7d478d0a44dc7913fc5d7008"><code>b91e62d</code></a></td><td><code>example with non-0 slack</code></td></tr></table>




---

archive/issue_comments_296007.json:
```json
{
    "body": "Changed commit from **[`df80c5a`](https://github.com/sagemath/sagetrac-mirror/commit/df80c5a7736bf85ccb62b0f2d9120cd3de641399)** to **[`b91e62d`](https://github.com/sagemath/sagetrac-mirror/commit/b91e62d7827e3dcc7d478d0a44dc7913fc5d7008)**",
    "created_at": "2016-04-28T06:45:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296007",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`df80c5a`](https://github.com/sagemath/sagetrac-mirror/commit/df80c5a7736bf85ccb62b0f2d9120cd3de641399)** to **[`b91e62d`](https://github.com/sagemath/sagetrac-mirror/commit/b91e62d7827e3dcc7d478d0a44dc7913fc5d7008)**



---

archive/issue_comments_296008.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@mkoeppe](#comment:7):\n> There are more places in the file that could use the #tol.\n\nI did add it all over the place, in fact.\n\n> And perhaps there should be an example in which the slack is not 0.\n\nOK, see the last commit.",
    "created_at": "2016-04-28T06:46:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296008",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@mkoeppe](#comment:7):
> There are more places in the file that could use the #tol.

I did add it all over the place, in fact.

> And perhaps there should be an example in which the slack is not 0.

OK, see the last commit.



---

archive/issue_comments_296009.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI mean these ones in cvxopt_sdp_backend.\n\n```\n    cpdef dual_variable(self, int i, sparse=False):\n[...]\n            sage: p.add_constraint(b1*x[0] + b2*x[1] <= b3)\n            sage: p.solve()\n            -2.9999999...\n            sage: B=p.get_backend()\n            sage: x=p.get_values(x).values()\n            sage: -(a3*B.dual_variable(0)).trace()-(b3*B.dual_variable(1)).trace()\n            -3.0000000...\n```",
    "created_at": "2016-04-28T06:54:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296009",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

I mean these ones in cvxopt_sdp_backend.

```
    cpdef dual_variable(self, int i, sparse=False):
[...]
            sage: p.add_constraint(b1*x[0] + b2*x[1] <= b3)
            sage: p.solve()
            -2.9999999...
            sage: B=p.get_backend()
            sage: x=p.get_values(x).values()
            sage: -(a3*B.dual_variable(0)).trace()-(b3*B.dual_variable(1)).trace()
            -3.0000000...
```



---

archive/issue_comments_296010.json:
```json
{
    "body": "Changed commit from **[`b91e62d`](https://github.com/sagemath/sagetrac-mirror/commit/b91e62d7827e3dcc7d478d0a44dc7913fc5d7008)** to **[`462e5b1`](https://github.com/sagemath/sagetrac-mirror/commit/462e5b1df19e0845078bad9686f2848aad503f21)**",
    "created_at": "2016-04-28T08:05:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296010",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b91e62d`](https://github.com/sagemath/sagetrac-mirror/commit/b91e62d7827e3dcc7d478d0a44dc7913fc5d7008)** to **[`462e5b1`](https://github.com/sagemath/sagetrac-mirror/commit/462e5b1df19e0845078bad9686f2848aad503f21)**



---

archive/issue_comments_296011.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/462e5b1df19e0845078bad9686f2848aad503f21\"><code>462e5b1</code></a></td><td><code>more #tol tags</code></td></tr></table>\n",
    "created_at": "2016-04-28T08:05:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296011",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/462e5b1df19e0845078bad9686f2848aad503f21"><code>462e5b1</code></a></td><td><code>more #tol tags</code></td></tr></table>




---

archive/issue_comments_296012.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThe patchbot complains about decreased coverage; probably `_get_answer`",
    "created_at": "2016-04-28T17:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296012",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

The patchbot complains about decreased coverage; probably `_get_answer`



---

archive/issue_comments_296013.json:
```json
{
    "body": "Changed commit from **[`462e5b1`](https://github.com/sagemath/sagetrac-mirror/commit/462e5b1df19e0845078bad9686f2848aad503f21)** to **[`604153b`](https://github.com/sagemath/sagetrac-mirror/commit/604153bf8a00375192e0ff304f373101997fae66)**",
    "created_at": "2016-04-28T18:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296013",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`462e5b1`](https://github.com/sagemath/sagetrac-mirror/commit/462e5b1df19e0845078bad9686f2848aad503f21)** to **[`604153b`](https://github.com/sagemath/sagetrac-mirror/commit/604153bf8a00375192e0ff304f373101997fae66)**



---

archive/issue_comments_296014.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/604153bf8a00375192e0ff304f373101997fae66\"><code>604153b</code></a></td><td><code>extra test, two useless lines removed</code></td></tr></table>\n",
    "created_at": "2016-04-28T18:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296014",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/604153bf8a00375192e0ff304f373101997fae66"><code>604153b</code></a></td><td><code>extra test, two useless lines removed</code></td></tr></table>




---

archive/issue_comments_296015.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@mkoeppe](#comment:12):\n> The patchbot complains about decreased coverage; probably `_get_answer`\n\nthanks; hopefully fixed now.",
    "created_at": "2016-04-28T18:25:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296015",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@mkoeppe](#comment:12):
> The patchbot complains about decreased coverage; probably `_get_answer`

thanks; hopefully fixed now.



---

archive/issue_comments_296016.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nLooking good.",
    "created_at": "2016-04-29T05:39:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296016",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Looking good.



---

archive/issue_events_286442.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-04-29T05:39:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286442"
}
```



---

archive/issue_events_286443.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-04-29T05:39:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286443"
}
```



---

archive/issue_comments_296017.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2016-04-29T05:39:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296017",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_296018.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n\n```\nsage -t --long src/sage/numerical/sdp.pyx\n**********************************************************************\nFile \"src/sage/numerical/sdp.pyx\", line 73, in sage.numerical.sdp\nFailed example:\n    opt = p.solve()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.numerical.sdp[15]>\", line 1, in <module>\n        opt = p.solve()\n      File \"sage/numerical/sdp.pyx\", line 946, in sage.numerical.sdp.SemidefiniteProgram.solve (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/numerical/sdp.c:7984)\n        self._backend.solve()\n      File \"sage/numerical/backends/cvxopt_sdp_backend.pyx\", line 424, in sage.numerical.backends.cvxopt_sdp_backend.CVXOPTSDPBackend.solve (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/numerical/backends/cvxopt_sdp_backend.c:5326)\n        raise SDPSolverException(\"CVXOPT: Terminated early due to numerical difficulties or because the maximum number of iterations was reached.\")\n    SDPSolverException: CVXOPT: Terminated early due to numerical difficulties or because the maximum number of iterations was reached.\n**********************************************************************\nFile \"src/sage/numerical/sdp.pyx\", line 78, in sage.numerical.sdp\nFailed example:\n    print 'Objective Value:', round(opt,3)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.numerical.sdp[16]>\", line 1, in <module>\n        print 'Objective Value:', round(opt,Integer(3))\n    NameError: name 'opt' is not defined\n**********************************************************************\nFile \"src/sage/numerical/sdp.pyx\", line 97, in sage.numerical.sdp\nFailed example:\n    p.dual_variable(1)\nExpected:\n    [ 85545.1... -85545.1...]\n    [-85545.1...  85545.1...]\nGot:\n     [ 88653817081280.4 -88653817022970.2]\n    [-88653817022970.2  88653816964660.0]\n**********************************************************************\nFile \"src/sage/numerical/sdp.pyx\", line 103, in sage.numerical.sdp\nFailed example:\n    opt-((p.dual_variable(0)*a3).trace()+(p.dual_variable(1)*b3).trace())  # tol 8e-08\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.numerical.sdp[20]>\", line 1, in <module>\n        opt-((p.dual_variable(Integer(0))*a3).trace()+(p.dual_variable(Integer(1))*b3).trace())  # tol 8e-08\n    NameError: name 'opt' is not defined\n**********************************************************************\nFile \"src/sage/numerical/sdp.pyx\", line 110, in sage.numerical.sdp\nFailed example:\n    (p.slack(0)*p.dual_variable(0)).trace()       # tol 2e-07\nExpected:\n    0.0\nGot:\n    0.0003622770309448242\nTolerance exceeded:\n    0.0 vs 0.0003622770309448242, tolerance 4e-04 > 2e-07\n**********************************************************************\n1 item had failures:\n   5 of  41 in sage.numerical.sdp\n    [283 tests, 5 failures, 0.67 s]\n```",
    "created_at": "2016-04-29T20:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296018",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:16" align="right">comment:16</div>


```
sage -t --long src/sage/numerical/sdp.pyx
**********************************************************************
File "src/sage/numerical/sdp.pyx", line 73, in sage.numerical.sdp
Failed example:
    opt = p.solve()
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.numerical.sdp[15]>", line 1, in <module>
        opt = p.solve()
      File "sage/numerical/sdp.pyx", line 946, in sage.numerical.sdp.SemidefiniteProgram.solve (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/numerical/sdp.c:7984)
        self._backend.solve()
      File "sage/numerical/backends/cvxopt_sdp_backend.pyx", line 424, in sage.numerical.backends.cvxopt_sdp_backend.CVXOPTSDPBackend.solve (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/numerical/backends/cvxopt_sdp_backend.c:5326)
        raise SDPSolverException("CVXOPT: Terminated early due to numerical difficulties or because the maximum number of iterations was reached.")
    SDPSolverException: CVXOPT: Terminated early due to numerical difficulties or because the maximum number of iterations was reached.
**********************************************************************
File "src/sage/numerical/sdp.pyx", line 78, in sage.numerical.sdp
Failed example:
    print 'Objective Value:', round(opt,3)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.numerical.sdp[16]>", line 1, in <module>
        print 'Objective Value:', round(opt,Integer(3))
    NameError: name 'opt' is not defined
**********************************************************************
File "src/sage/numerical/sdp.pyx", line 97, in sage.numerical.sdp
Failed example:
    p.dual_variable(1)
Expected:
    [ 85545.1... -85545.1...]
    [-85545.1...  85545.1...]
Got:
     [ 88653817081280.4 -88653817022970.2]
    [-88653817022970.2  88653816964660.0]
**********************************************************************
File "src/sage/numerical/sdp.pyx", line 103, in sage.numerical.sdp
Failed example:
    opt-((p.dual_variable(0)*a3).trace()+(p.dual_variable(1)*b3).trace())  # tol 8e-08
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.numerical.sdp[20]>", line 1, in <module>
        opt-((p.dual_variable(Integer(0))*a3).trace()+(p.dual_variable(Integer(1))*b3).trace())  # tol 8e-08
    NameError: name 'opt' is not defined
**********************************************************************
File "src/sage/numerical/sdp.pyx", line 110, in sage.numerical.sdp
Failed example:
    (p.slack(0)*p.dual_variable(0)).trace()       # tol 2e-07
Expected:
    0.0
Got:
    0.0003622770309448242
Tolerance exceeded:
    0.0 vs 0.0003622770309448242, tolerance 4e-04 > 2e-07
**********************************************************************
1 item had failures:
   5 of  41 in sage.numerical.sdp
    [283 tests, 5 failures, 0.67 s]
```



---

archive/issue_events_286444.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-29T20:16:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286444"
}
```



---

archive/issue_events_286445.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-29T20:16:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286445"
}
```



---

archive/issue_comments_296019.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nhmm, why do these tests fail on Gentoo, and on Gentoo only? Do these patchbots have some sort of strange configuration of numerics?",
    "created_at": "2016-04-29T20:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296019",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

hmm, why do these tests fail on Gentoo, and on Gentoo only? Do these patchbots have some sort of strange configuration of numerics?



---

archive/issue_comments_296020.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI bet it is another instance of [floating point (xeon/gentoo only?) weirdness with cvxopt ('sage' vs 'sage --python' difference)](https://groups.google.com/d/msg/sage-devel/SaBzeZBAjEQ/98VQSjS1CgAJ)",
    "created_at": "2016-04-29T21:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296020",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">comment:18</div>

I bet it is another instance of [floating point (xeon/gentoo only?) weirdness with cvxopt ('sage' vs 'sage --python' difference)](https://groups.google.com/d/msg/sage-devel/SaBzeZBAjEQ/98VQSjS1CgAJ)



---

archive/issue_comments_296021.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI don't really have a clue but I can test this in sage-on-gentoo for kicks.",
    "created_at": "2016-04-30T04:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296021",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

I don't really have a clue but I can test this in sage-on-gentoo for kicks.



---

archive/issue_comments_296022.json:
```json
{
    "body": "run this as ./sage <xx.sage",
    "created_at": "2016-04-30T22:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296022",
    "user": "https://github.com/dimpase"
}
```

run this as ./sage <xx.sage



---

archive/issue_comments_296023.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAttachment: **[xx.sage.gz](https://github.com/sagemath/sage/files/ticket20506/xx.sage.gz)**\n\nReplying to [@kiwifb](#comment:19):\n> I don't really have a clue but I can test this in sage-on-gentoo for kicks.\n\nCould you please run (on the a recent beta - the ticket branch is not needed)\nthe attached file, and post the output?\n(Basically, there should not be any `ZeroDivisionError: float division by zero`)",
    "created_at": "2016-04-30T23:01:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296023",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

Attachment: **[xx.sage.gz](https://github.com/sagemath/sage/files/ticket20506/xx.sage.gz)**

Replying to [@kiwifb](#comment:19):
> I don't really have a clue but I can test this in sage-on-gentoo for kicks.

Could you please run (on the a recent beta - the ticket branch is not needed)
the attached file, and post the output?
(Basically, there should not be any `ZeroDivisionError: float division by zero`)



---

archive/issue_comments_296024.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n7.2.beta6+ (I am on Volker's branch sometime yesterday), not very promising\n\n```\nfbissey@QCD-nzi3 ~ $ sage\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 7.2.beta6, Release Date: 2016-04-28               \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: from cvxopt import matrix as mat, solvers\nsage: c = mat([-1.,1.])\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-2-14ab25c781f3> in <module>()\n----> 1 c = mat([-RealNumber('1.'),RealNumber('1.')])\n\nTypeError: invalid type in list\n```",
    "created_at": "2016-05-01T02:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296024",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:21" align="right">comment:21</div>

7.2.beta6+ (I am on Volker's branch sometime yesterday), not very promising

```
fbissey@QCD-nzi3 ~ $ sage
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 7.2.beta6, Release Date: 2016-04-28               │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
sage: from cvxopt import matrix as mat, solvers
sage: c = mat([-1.,1.])
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-2-14ab25c781f3> in <module>()
----> 1 c = mat([-RealNumber('1.'),RealNumber('1.')])

TypeError: invalid type in list
```



---

archive/issue_comments_296025.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@kiwifb](#comment:21):\n> 7.2.beta6+ (I am on Volker's branch sometime yesterday), not very promising\n\nyou missed the 1st line: `preparser(False)`\n\n(probably cause you tried `sage xx.sage` rather than `sage <xx.sage`)\n\n> ```\n> fbissey@QCD-nzi3 ~ $ sage\n> \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n> \u2502 SageMath version 7.2.beta6, Release Date: 2016-04-28               \u2502\n> \u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n> \u2502 Type \"help()\" for help.                                            \u2502\n> \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n> \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n> \u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n> \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n> sage: from cvxopt import matrix as mat, solvers\n> sage: c = mat([-1.,1.])\n> ---------------------------------------------------------------------------\n> TypeError                                 Traceback (most recent call last)\n> <ipython-input-2-14ab25c781f3> in <module>()\n> ----> 1 c = mat([-RealNumber('1.'),RealNumber('1.')])\n> \n> TypeError: invalid type in list\n> ```",
    "created_at": "2016-05-01T07:24:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296025",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@kiwifb](#comment:21):
> 7.2.beta6+ (I am on Volker's branch sometime yesterday), not very promising

you missed the 1st line: `preparser(False)`

(probably cause you tried `sage xx.sage` rather than `sage <xx.sage`)

> ```
> fbissey@QCD-nzi3 ~ $ sage
> ┌────────────────────────────────────────────────────────────────────┐
> │ SageMath version 7.2.beta6, Release Date: 2016-04-28               │
> │ Type "notebook()" for the browser-based notebook interface.        │
> │ Type "help()" for help.                                            │
> └────────────────────────────────────────────────────────────────────┘
> ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
> ┃ Warning: this is a prerelease version, and it may be unstable.     ┃
> ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
> sage: from cvxopt import matrix as mat, solvers
> sage: c = mat([-1.,1.])
> ---------------------------------------------------------------------------
> TypeError                                 Traceback (most recent call last)
> <ipython-input-2-14ab25c781f3> in <module>()
> ----> 1 c = mat([-RealNumber('1.'),RealNumber('1.')])
> 
> TypeError: invalid type in list
> ```



---

archive/issue_comments_296026.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThat explains!\n\n```\nfbissey@QCD-nzi3 ~ $ sage < xx.sage \n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 7.2.beta6, Release Date: 2016-04-28               \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage:      pcost       dcost       gap    pres   dres   k/t\n 0: -1.2413e+00 -2.7310e+01  2e+01  3e-01  1e+01  1e+00\n 1: -1.4977e+00 -3.1971e+00  6e-01  2e-02  9e-01  2e-01\n 2: -1.2729e+00 -2.1411e+00  6e-01  1e-02  5e-01  2e-01\n 3: -1.1436e+00 -1.2534e+00  8e-02  1e-03  6e-02  2e-02\n 4: -1.1034e+00 -1.2438e+00  3e-01  2e-03  8e-02  4e-02\n 5: -1.0500e+00 -1.0609e+00  2e-02  1e-04  7e-03  4e-03\n 6: -1.0338e+00 -1.0407e+00  4e-02  1e-04  6e-03  7e-03\n 7: -1.0201e+00 -1.0209e+00  8e-03  2e-05  1e-03  1e-03\n 8: -1.0176e+00 -1.0176e+00  4e-02  4e-05  2e-03  4e-03\n 9: -1.0071e+00 -1.0069e+00  3e-03  3e-06  1e-04  5e-04\n10: -1.0042e+00 -1.0038e+00  4e-03  2e-06  8e-05  6e-04\n11: -1.0027e+00 -1.0026e+00  1e-03  4e-07  2e-05  2e-04\n12: -1.0028e+00 -1.0022e+00  8e-03  1e-06  5e-05  7e-04\n13: -1.0009e+00 -1.0009e+00  6e-04  8e-08  4e-06  7e-05\n14: -1.0005e+00 -1.0004e+00  3e-04  2e-08  1e-06  5e-05\n15: -1.0003e+00 -1.0002e+00  8e-04  2e-08  1e-06  1e-04\n16: -1.0000e+00 -1.0000e+00  9e-05  2e-09  1e-07  1e-05\n17: -9.9992e-01 -9.9990e-01  2e-04  2e-09  8e-08  2e-05\n18: -9.9986e-01 -9.9986e-01  2e-05  2e-10  1e-08  4e-06\n19: -9.9985e-01 -9.9984e-01  8e-05  3e-10  1e-08  9e-06\n20: -9.9982e-01 -9.9982e-01  9e-06  3e-11  1e-09  1e-06\n21: -9.9982e-01 -9.9981e-01  3e-05  3e-11  2e-09  3e-06\n22: -9.9981e-01 -9.9981e-01  3e-06  4e-12  2e-10  5e-07\n23: -9.9981e-01 -9.9981e-01  1e-05  7e-11  1e-10  1e-06\n24: -9.9980e-01 -9.9980e-01  1e-06  7e-12  5e-10  2e-07\n25: -9.9980e-01 -9.9980e-01  3e-06  2e-08  1e-09  4e-07\n26: -9.9980e-01 -9.9980e-01  4e-07  3e-09  5e-11  6e-08\nOptimal solution found.\nsage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: ---------------------------------------------------------------------------\nSDPSolverException                        Traceback (most recent call last)\n<ipython-input-25-de8ebd622e01> in <module>()\n----> 1 p.solve() # boom - division by 0\n\n/usr/lib64/python2.7/site-packages/sage/numerical/sdp.pyx in sage.numerical.sdp.SemidefiniteProgram.solve (/scratch2/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/numerical/sdp.c:7919)()\n    902             3.0\n    903         \"\"\"\n--> 904         self._backend.solve()\n    905         return self._backend.get_objective_value()\n    906 \n\n/usr/lib64/python2.7/site-packages/sage/numerical/backends/cvxopt_sdp_backend.pyx in sage.numerical.backends.cvxopt_sdp_backend.CVXOPTSDPBackend.solve (/scratch2/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/numerical/backends/cvxopt_sdp_backend.c:5165)()\n    418             pass\n    419         elif self.answer['status'] == 'primal infeasible':\n--> 420             raise SDPSolverException(\"CVXOPT: primal infeasible\")\n    421         elif self.answer['status'] == 'dual infeasible':\n    422             raise SDPSolverException(\"CVXOPT: dual infeasible\")\n\nSDPSolverException: CVXOPT: primal infeasible\nsage: sage: sage: Exiting Sage (CPU time 0m0.60s, Wall time 0m2.40s).\n```\nThis is sage-on-gentoo. Does `SDP` needs a particular dependency enabled in CVXOPT that I could have missed?",
    "created_at": "2016-05-01T07:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296026",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:23" align="right">comment:23</div>

That explains!

```
fbissey@QCD-nzi3 ~ $ sage < xx.sage 
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 7.2.beta6, Release Date: 2016-04-28               │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage:      pcost       dcost       gap    pres   dres   k/t
 0: -1.2413e+00 -2.7310e+01  2e+01  3e-01  1e+01  1e+00
 1: -1.4977e+00 -3.1971e+00  6e-01  2e-02  9e-01  2e-01
 2: -1.2729e+00 -2.1411e+00  6e-01  1e-02  5e-01  2e-01
 3: -1.1436e+00 -1.2534e+00  8e-02  1e-03  6e-02  2e-02
 4: -1.1034e+00 -1.2438e+00  3e-01  2e-03  8e-02  4e-02
 5: -1.0500e+00 -1.0609e+00  2e-02  1e-04  7e-03  4e-03
 6: -1.0338e+00 -1.0407e+00  4e-02  1e-04  6e-03  7e-03
 7: -1.0201e+00 -1.0209e+00  8e-03  2e-05  1e-03  1e-03
 8: -1.0176e+00 -1.0176e+00  4e-02  4e-05  2e-03  4e-03
 9: -1.0071e+00 -1.0069e+00  3e-03  3e-06  1e-04  5e-04
10: -1.0042e+00 -1.0038e+00  4e-03  2e-06  8e-05  6e-04
11: -1.0027e+00 -1.0026e+00  1e-03  4e-07  2e-05  2e-04
12: -1.0028e+00 -1.0022e+00  8e-03  1e-06  5e-05  7e-04
13: -1.0009e+00 -1.0009e+00  6e-04  8e-08  4e-06  7e-05
14: -1.0005e+00 -1.0004e+00  3e-04  2e-08  1e-06  5e-05
15: -1.0003e+00 -1.0002e+00  8e-04  2e-08  1e-06  1e-04
16: -1.0000e+00 -1.0000e+00  9e-05  2e-09  1e-07  1e-05
17: -9.9992e-01 -9.9990e-01  2e-04  2e-09  8e-08  2e-05
18: -9.9986e-01 -9.9986e-01  2e-05  2e-10  1e-08  4e-06
19: -9.9985e-01 -9.9984e-01  8e-05  3e-10  1e-08  9e-06
20: -9.9982e-01 -9.9982e-01  9e-06  3e-11  1e-09  1e-06
21: -9.9982e-01 -9.9981e-01  3e-05  3e-11  2e-09  3e-06
22: -9.9981e-01 -9.9981e-01  3e-06  4e-12  2e-10  5e-07
23: -9.9981e-01 -9.9981e-01  1e-05  7e-11  1e-10  1e-06
24: -9.9980e-01 -9.9980e-01  1e-06  7e-12  5e-10  2e-07
25: -9.9980e-01 -9.9980e-01  3e-06  2e-08  1e-09  4e-07
26: -9.9980e-01 -9.9980e-01  4e-07  3e-09  5e-11  6e-08
Optimal solution found.
sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: ---------------------------------------------------------------------------
SDPSolverException                        Traceback (most recent call last)
<ipython-input-25-de8ebd622e01> in <module>()
----> 1 p.solve() # boom - division by 0

/usr/lib64/python2.7/site-packages/sage/numerical/sdp.pyx in sage.numerical.sdp.SemidefiniteProgram.solve (/scratch2/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/numerical/sdp.c:7919)()
    902             3.0
    903         """
--> 904         self._backend.solve()
    905         return self._backend.get_objective_value()
    906 

/usr/lib64/python2.7/site-packages/sage/numerical/backends/cvxopt_sdp_backend.pyx in sage.numerical.backends.cvxopt_sdp_backend.CVXOPTSDPBackend.solve (/scratch2/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/numerical/backends/cvxopt_sdp_backend.c:5165)()
    418             pass
    419         elif self.answer['status'] == 'primal infeasible':
--> 420             raise SDPSolverException("CVXOPT: primal infeasible")
    421         elif self.answer['status'] == 'dual infeasible':
    422             raise SDPSolverException("CVXOPT: dual infeasible")

SDPSolverException: CVXOPT: primal infeasible
sage: sage: sage: Exiting Sage (CPU time 0m0.60s, Wall time 0m2.40s).
```
This is sage-on-gentoo. Does `SDP` needs a particular dependency enabled in CVXOPT that I could have missed?



---

archive/issue_comments_296027.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOK, I just found that the problem is not Gentoo-only, it is CPU-related (Xeon only?)\n(is QCD-nzi3 Xeon, too?)\n\nReproducible on \n\n```\nIntel(R) Xeon(R) CPU  X5660  @ 2.80GHz (UGent, Gentoo)\nIntel(R) Xeon(R) CPU @ 2.30GHz         (SMC, Ubuntu)\n```\n\nWill now see if this is Atlas-related  (by trying \"dumb\" Atlas).\n\nBut the bug is very unpleasant; in the attached script the result of running`sol = solvers.sdp(c, Gs=G, hs=h)` changes after unrelated (although in the same code-path) lines 13-27.",
    "created_at": "2016-05-01T07:54:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296027",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">comment:24</div>

OK, I just found that the problem is not Gentoo-only, it is CPU-related (Xeon only?)
(is QCD-nzi3 Xeon, too?)

Reproducible on 

```
Intel(R) Xeon(R) CPU  X5660  @ 2.80GHz (UGent, Gentoo)
Intel(R) Xeon(R) CPU @ 2.30GHz         (SMC, Ubuntu)
```

Will now see if this is Atlas-related  (by trying "dumb" Atlas).

But the bug is very unpleasant; in the attached script the result of running`sol = solvers.sdp(c, Gs=G, hs=h)` changes after unrelated (although in the same code-path) lines 13-27.



---

archive/issue_comments_296028.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nNot an actual Xeon but I am not completely sure\n\n```\nprocessor\t: 11\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 44\nmodel name\t: Intel(R) Core(TM) i7 CPU         970  @ 3.20GHz\nstepping\t: 2\nmicrocode\t: 0xc\ncpu MHz\t\t: 3238.432\ncache size\t: 12288 KB\n```\nAlso, sage-on-gentoo above uses openblas...",
    "created_at": "2016-05-01T08:03:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296028",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">comment:25</div>

Not an actual Xeon but I am not completely sure

```
processor	: 11
vendor_id	: GenuineIntel
cpu family	: 6
model		: 44
model name	: Intel(R) Core(TM) i7 CPU         970  @ 3.20GHz
stepping	: 2
microcode	: 0xc
cpu MHz		: 3238.432
cache size	: 12288 KB
```
Also, sage-on-gentoo above uses openblas...



---

archive/issue_comments_296029.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nOn `Intel(R) Core(TM) i7-4510U CPU @ 2.00GHz (laptop, Ubuntu)` as well as on `Intel(R) Core(TM) i7-4770 CPU @ 3.40GHz (desktop, Fedora-23)` the script works.",
    "created_at": "2016-05-01T08:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296029",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

On `Intel(R) Core(TM) i7-4510U CPU @ 2.00GHz (laptop, Ubuntu)` as well as on `Intel(R) Core(TM) i7-4770 CPU @ 3.40GHz (desktop, Fedora-23)` the script works.



---

archive/issue_comments_296030.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI will build a vanilla 7.2.beta6 and see what happens.",
    "created_at": "2016-05-01T08:16:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296030",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

I will build a vanilla 7.2.beta6 and see what happens.



---

archive/issue_comments_296031.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nthe failure with xx.sage attachment is also reproducible on OSX (Core2Duo CPU), although it's slightly different (the 2nd and 3rd calls to the solver return \"infeasible\" rather than bail out with zero division).\n\nSo this looks like an genuine bug in CVXOPT interface, or in CVXOPT itself, or both. Somehow it seems to retain too much state. I wish we had an OSX patchbot...",
    "created_at": "2016-05-01T09:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296031",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">comment:28</div>

the failure with xx.sage attachment is also reproducible on OSX (Core2Duo CPU), although it's slightly different (the 2nd and 3rd calls to the solver return "infeasible" rather than bail out with zero division).

So this looks like an genuine bug in CVXOPT interface, or in CVXOPT itself, or both. Somehow it seems to retain too much state. I wish we had an OSX patchbot...



---

archive/issue_comments_296032.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nFor info, vanilla sage same machine\n\n```\nfbissey@QCD-nzi3 ~/sandbox/git-fork/sage $ ./sage < ~/xx.sage \n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 7.2.beta6, Release Date: 2016-04-28               \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage:      pcost       dcost       gap    pres   dres   k/t\n 0: -1.2413e+00 -2.7310e+01  2e+01  3e-01  1e+01  1e+00\n 1: -1.4977e+00 -3.1971e+00  6e-01  2e-02  9e-01  2e-01\n 2: -1.2729e+00 -2.1411e+00  6e-01  1e-02  5e-01  2e-01\n 3: -1.1436e+00 -1.2534e+00  8e-02  1e-03  6e-02  2e-02\n 4: -1.1034e+00 -1.2438e+00  3e-01  2e-03  8e-02  4e-02\n 5: -1.0500e+00 -1.0609e+00  2e-02  1e-04  7e-03  4e-03\n 6: -1.0338e+00 -1.0407e+00  4e-02  1e-04  6e-03  7e-03\n 7: -1.0201e+00 -1.0209e+00  8e-03  2e-05  1e-03  1e-03\n 8: -1.0176e+00 -1.0176e+00  4e-02  4e-05  2e-03  4e-03\n 9: -1.0071e+00 -1.0069e+00  3e-03  3e-06  1e-04  5e-04\n10: -1.0042e+00 -1.0038e+00  4e-03  2e-06  8e-05  6e-04\n11: -1.0027e+00 -1.0026e+00  1e-03  4e-07  2e-05  2e-04\n12: -1.0028e+00 -1.0022e+00  8e-03  1e-06  5e-05  7e-04\n13: -1.0009e+00 -1.0009e+00  6e-04  8e-08  4e-06  7e-05\n14: -1.0005e+00 -1.0004e+00  3e-04  2e-08  1e-06  5e-05\n15: -1.0003e+00 -1.0002e+00  8e-04  2e-08  1e-06  1e-04\n16: -1.0000e+00 -1.0000e+00  9e-05  2e-09  1e-07  1e-05\n17: -9.9992e-01 -9.9990e-01  2e-04  2e-09  8e-08  2e-05\n18: -9.9986e-01 -9.9986e-01  2e-05  2e-10  1e-08  4e-06\n19: -9.9985e-01 -9.9984e-01  8e-05  3e-10  1e-08  9e-06\n20: -9.9982e-01 -9.9982e-01  9e-06  3e-11  1e-09  1e-06\n21: -9.9982e-01 -9.9981e-01  3e-05  3e-11  1e-09  3e-06\n22: -9.9981e-01 -9.9981e-01  3e-06  4e-12  2e-10  5e-07\n23: -9.9981e-01 -9.9981e-01  1e-05  4e-10  1e-10  1e-06\n24: -9.9980e-01 -9.9980e-01  1e-06  4e-11  2e-10  2e-07\n25: -9.9980e-01 -9.9980e-01  3e-06  2e-08  2e-10  4e-07\n26: -9.9980e-01 -9.9980e-01  4e-07  2e-09  1e-09  6e-08\nOptimal solution found.\nsage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: ---------------------------------------------------------------------------\nZeroDivisionError                         Traceback (most recent call last)\n<ipython-input-25-de8ebd622e01> in <module>()\n----> 1 p.solve() # boom - division by 0\n\n/home/fbissey/sandbox/git-fork/sage/src/sage/numerical/sdp.pyx in sage.numerical.sdp.SemidefiniteProgram.solve (/home/fbissey/sandbox/git-fork/sage/src/build/cythonized/sage/numerical/sdp.c:7916)()\n    902             3.0\n    903         \"\"\"\n--> 904         self._backend.solve()\n    905         return self._backend.get_objective_value()\n    906 \n\n/home/fbissey/sandbox/git-fork/sage/src/sage/numerical/backends/cvxopt_sdp_backend.pyx in sage.numerical.backends.cvxopt_sdp_backend.CVXOPTSDPBackend.solve (/home/fbissey/sandbox/git-fork/sage/src/build/cythonized/sage/numerical/backends/cvxopt_sdp_backend.c:5103)()\n    412             solvers.options[k] = v\n    413 \n--> 414         self.answer = solvers.sdp(c,Gs=G_matrix,hs=h_matrix)\n    415 \n    416         #possible outcomes\n\n/home/fbissey/sandbox/git-fork/sage/local/lib/python2.7/site-packages/cvxopt/coneprog.py in sdp(c, Gl, hl, Gs, hs, A, b, solver, primalstart, dualstart, options, **kwargs)\n   4110         ds = None\n   4111 \n-> 4112     sol = conelp(c, G, h, dims, A = A, b = b, primalstart = ps, dualstart = ds, options = options)\n   4113     if sol['s'] is None:\n   4114         sol['sl'] = None\n\n/home/fbissey/sandbox/git-fork/sage/local/lib/python2.7/site-packages/cvxopt/coneprog.py in conelp(c, G, h, dims, A, b, primalstart, dualstart, kktsolver, xnewcopy, xdot, xaxpy, xscal, ynewcopy, ydot, yaxpy, yscal, **kwargs)\n   1393         # Update lambda and scaling.\n   1394 \n-> 1395         misc.update_scaling(W, lmbda, ds, dz)\n   1396 \n   1397         # For kappa, tau block:\n\n/home/fbissey/sandbox/git-fork/sage/local/lib/python2.7/site-packages/cvxopt/misc.py in update_scaling(W, lmbda, s, z)\n    626         # r := r*lambda^{-1/2}; rti := rti*lambda^{-1/2}\n    627         for i in range(m):\n--> 628             a = 1.0 / math.sqrt(lmbda[ind+i])\n    629             blas.scal(a, r, offset = m*i, n = m)\n    630             blas.scal(a, rti, offset = m*i, n = m)\n\nZeroDivisionError: float division by zero\nsage: sage: ---------------------------------------------------------------------------\nZeroDivisionError                         Traceback (most recent call last)\n<ipython-input-26-9348eec359de> in <module>()\n----> 1 sol = solvers.sdp(c, Gs=G, hs=h) # boom - division by 0\n\n/home/fbissey/sandbox/git-fork/sage/local/lib/python2.7/site-packages/cvxopt/coneprog.py in sdp(c, Gl, hl, Gs, hs, A, b, solver, primalstart, dualstart, options, **kwargs)\n   4110         ds = None\n   4111 \n-> 4112     sol = conelp(c, G, h, dims, A = A, b = b, primalstart = ps, dualstart = ds, options = options)\n   4113     if sol['s'] is None:\n   4114         sol['sl'] = None\n\n/home/fbissey/sandbox/git-fork/sage/local/lib/python2.7/site-packages/cvxopt/coneprog.py in conelp(c, G, h, dims, A, b, primalstart, dualstart, kktsolver, xnewcopy, xdot, xaxpy, xscal, ynewcopy, ydot, yaxpy, yscal, **kwargs)\n   1393         # Update lambda and scaling.\n   1394 \n-> 1395         misc.update_scaling(W, lmbda, ds, dz)\n   1396 \n   1397         # For kappa, tau block:\n\n/home/fbissey/sandbox/git-fork/sage/local/lib/python2.7/site-packages/cvxopt/misc.py in update_scaling(W, lmbda, s, z)\n    626         # r := r*lambda^{-1/2}; rti := rti*lambda^{-1/2}\n    627         for i in range(m):\n--> 628             a = 1.0 / math.sqrt(lmbda[ind+i])\n    629             blas.scal(a, r, offset = m*i, n = m)\n    630             blas.scal(a, rti, offset = m*i, n = m)\n\nZeroDivisionError: float division by zero\nsage: Exiting Sage (CPU time 0m0.73s, Wall time 0m3.58s).\n```\nIf you think the problem is upstream, they are quite responsive in chasing issue.",
    "created_at": "2016-05-01T10:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296032",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

For info, vanilla sage same machine

```
fbissey@QCD-nzi3 ~/sandbox/git-fork/sage $ ./sage < ~/xx.sage 
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 7.2.beta6, Release Date: 2016-04-28               │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage:      pcost       dcost       gap    pres   dres   k/t
 0: -1.2413e+00 -2.7310e+01  2e+01  3e-01  1e+01  1e+00
 1: -1.4977e+00 -3.1971e+00  6e-01  2e-02  9e-01  2e-01
 2: -1.2729e+00 -2.1411e+00  6e-01  1e-02  5e-01  2e-01
 3: -1.1436e+00 -1.2534e+00  8e-02  1e-03  6e-02  2e-02
 4: -1.1034e+00 -1.2438e+00  3e-01  2e-03  8e-02  4e-02
 5: -1.0500e+00 -1.0609e+00  2e-02  1e-04  7e-03  4e-03
 6: -1.0338e+00 -1.0407e+00  4e-02  1e-04  6e-03  7e-03
 7: -1.0201e+00 -1.0209e+00  8e-03  2e-05  1e-03  1e-03
 8: -1.0176e+00 -1.0176e+00  4e-02  4e-05  2e-03  4e-03
 9: -1.0071e+00 -1.0069e+00  3e-03  3e-06  1e-04  5e-04
10: -1.0042e+00 -1.0038e+00  4e-03  2e-06  8e-05  6e-04
11: -1.0027e+00 -1.0026e+00  1e-03  4e-07  2e-05  2e-04
12: -1.0028e+00 -1.0022e+00  8e-03  1e-06  5e-05  7e-04
13: -1.0009e+00 -1.0009e+00  6e-04  8e-08  4e-06  7e-05
14: -1.0005e+00 -1.0004e+00  3e-04  2e-08  1e-06  5e-05
15: -1.0003e+00 -1.0002e+00  8e-04  2e-08  1e-06  1e-04
16: -1.0000e+00 -1.0000e+00  9e-05  2e-09  1e-07  1e-05
17: -9.9992e-01 -9.9990e-01  2e-04  2e-09  8e-08  2e-05
18: -9.9986e-01 -9.9986e-01  2e-05  2e-10  1e-08  4e-06
19: -9.9985e-01 -9.9984e-01  8e-05  3e-10  1e-08  9e-06
20: -9.9982e-01 -9.9982e-01  9e-06  3e-11  1e-09  1e-06
21: -9.9982e-01 -9.9981e-01  3e-05  3e-11  1e-09  3e-06
22: -9.9981e-01 -9.9981e-01  3e-06  4e-12  2e-10  5e-07
23: -9.9981e-01 -9.9981e-01  1e-05  4e-10  1e-10  1e-06
24: -9.9980e-01 -9.9980e-01  1e-06  4e-11  2e-10  2e-07
25: -9.9980e-01 -9.9980e-01  3e-06  2e-08  2e-10  4e-07
26: -9.9980e-01 -9.9980e-01  4e-07  2e-09  1e-09  6e-08
Optimal solution found.
sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: sage: ---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last)
<ipython-input-25-de8ebd622e01> in <module>()
----> 1 p.solve() # boom - division by 0

/home/fbissey/sandbox/git-fork/sage/src/sage/numerical/sdp.pyx in sage.numerical.sdp.SemidefiniteProgram.solve (/home/fbissey/sandbox/git-fork/sage/src/build/cythonized/sage/numerical/sdp.c:7916)()
    902             3.0
    903         """
--> 904         self._backend.solve()
    905         return self._backend.get_objective_value()
    906 

/home/fbissey/sandbox/git-fork/sage/src/sage/numerical/backends/cvxopt_sdp_backend.pyx in sage.numerical.backends.cvxopt_sdp_backend.CVXOPTSDPBackend.solve (/home/fbissey/sandbox/git-fork/sage/src/build/cythonized/sage/numerical/backends/cvxopt_sdp_backend.c:5103)()
    412             solvers.options[k] = v
    413 
--> 414         self.answer = solvers.sdp(c,Gs=G_matrix,hs=h_matrix)
    415 
    416         #possible outcomes

/home/fbissey/sandbox/git-fork/sage/local/lib/python2.7/site-packages/cvxopt/coneprog.py in sdp(c, Gl, hl, Gs, hs, A, b, solver, primalstart, dualstart, options, **kwargs)
   4110         ds = None
   4111 
-> 4112     sol = conelp(c, G, h, dims, A = A, b = b, primalstart = ps, dualstart = ds, options = options)
   4113     if sol['s'] is None:
   4114         sol['sl'] = None

/home/fbissey/sandbox/git-fork/sage/local/lib/python2.7/site-packages/cvxopt/coneprog.py in conelp(c, G, h, dims, A, b, primalstart, dualstart, kktsolver, xnewcopy, xdot, xaxpy, xscal, ynewcopy, ydot, yaxpy, yscal, **kwargs)
   1393         # Update lambda and scaling.
   1394 
-> 1395         misc.update_scaling(W, lmbda, ds, dz)
   1396 
   1397         # For kappa, tau block:

/home/fbissey/sandbox/git-fork/sage/local/lib/python2.7/site-packages/cvxopt/misc.py in update_scaling(W, lmbda, s, z)
    626         # r := r*lambda^{-1/2}; rti := rti*lambda^{-1/2}
    627         for i in range(m):
--> 628             a = 1.0 / math.sqrt(lmbda[ind+i])
    629             blas.scal(a, r, offset = m*i, n = m)
    630             blas.scal(a, rti, offset = m*i, n = m)

ZeroDivisionError: float division by zero
sage: sage: ---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last)
<ipython-input-26-9348eec359de> in <module>()
----> 1 sol = solvers.sdp(c, Gs=G, hs=h) # boom - division by 0

/home/fbissey/sandbox/git-fork/sage/local/lib/python2.7/site-packages/cvxopt/coneprog.py in sdp(c, Gl, hl, Gs, hs, A, b, solver, primalstart, dualstart, options, **kwargs)
   4110         ds = None
   4111 
-> 4112     sol = conelp(c, G, h, dims, A = A, b = b, primalstart = ps, dualstart = ds, options = options)
   4113     if sol['s'] is None:
   4114         sol['sl'] = None

/home/fbissey/sandbox/git-fork/sage/local/lib/python2.7/site-packages/cvxopt/coneprog.py in conelp(c, G, h, dims, A, b, primalstart, dualstart, kktsolver, xnewcopy, xdot, xaxpy, xscal, ynewcopy, ydot, yaxpy, yscal, **kwargs)
   1393         # Update lambda and scaling.
   1394 
-> 1395         misc.update_scaling(W, lmbda, ds, dz)
   1396 
   1397         # For kappa, tau block:

/home/fbissey/sandbox/git-fork/sage/local/lib/python2.7/site-packages/cvxopt/misc.py in update_scaling(W, lmbda, s, z)
    626         # r := r*lambda^{-1/2}; rti := rti*lambda^{-1/2}
    627         for i in range(m):
--> 628             a = 1.0 / math.sqrt(lmbda[ind+i])
    629             blas.scal(a, r, offset = m*i, n = m)
    630             blas.scal(a, rti, offset = m*i, n = m)

ZeroDivisionError: float division by zero
sage: Exiting Sage (CPU time 0m0.73s, Wall time 0m3.58s).
```
If you think the problem is upstream, they are quite responsive in chasing issue.



---

archive/issue_comments_296033.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac9920689062fe68eea91f1a851abbc6e50ba3e1\"><code>ac99206</code></a></td><td><code>Merge branch 'develop' into sdpdual</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0760b6f47cfbddfc381903211e741aee50d63ad3\"><code>0760b6f</code></a></td><td><code>forgotten cinitialisation, fixed OSX errors</code></td></tr></table>\n",
    "created_at": "2016-05-01T11:48:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296033",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac9920689062fe68eea91f1a851abbc6e50ba3e1"><code>ac99206</code></a></td><td><code>Merge branch 'develop' into sdpdual</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0760b6f47cfbddfc381903211e741aee50d63ad3"><code>0760b6f</code></a></td><td><code>forgotten cinitialisation, fixed OSX errors</code></td></tr></table>




---

archive/issue_comments_296034.json:
```json
{
    "body": "Changed commit from **[`604153b`](https://github.com/sagemath/sagetrac-mirror/commit/604153bf8a00375192e0ff304f373101997fae66)** to **[`0760b6f`](https://github.com/sagemath/sagetrac-mirror/commit/0760b6f47cfbddfc381903211e741aee50d63ad3)**",
    "created_at": "2016-05-01T11:48:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296034",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`604153b`](https://github.com/sagemath/sagetrac-mirror/commit/604153bf8a00375192e0ff304f373101997fae66)** to **[`0760b6f`](https://github.com/sagemath/sagetrac-mirror/commit/0760b6f47cfbddfc381903211e741aee50d63ad3)**



---

archive/issue_comments_296035.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@dimpase](#comment:28):\n> the failure with xx.sage attachment is also reproducible on OSX (Core2Duo CPU), although it's slightly different (the 2nd and 3rd calls to the solver return \"infeasible\" rather than bail out with zero division).\n\nOSX is fixed by the latest commit. But it does not fix the Gentoo Xeon case...\n\nDoes it fix sage-on-gentoo with openblas case?",
    "created_at": "2016-05-01T11:53:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296035",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@dimpase](#comment:28):
> the failure with xx.sage attachment is also reproducible on OSX (Core2Duo CPU), although it's slightly different (the 2nd and 3rd calls to the solver return "infeasible" rather than bail out with zero division).

OSX is fixed by the latest commit. But it does not fix the Gentoo Xeon case...

Does it fix sage-on-gentoo with openblas case?



---

archive/issue_comments_296036.json:
```json
{
    "body": "Changed commit from **[`0760b6f`](https://github.com/sagemath/sagetrac-mirror/commit/0760b6f47cfbddfc381903211e741aee50d63ad3)** to **[`38a2bd6`](https://github.com/sagemath/sagetrac-mirror/commit/38a2bd69eaa9b47d1c3856722c2abd28264e74d2)**",
    "created_at": "2016-05-01T14:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296036",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0760b6f`](https://github.com/sagemath/sagetrac-mirror/commit/0760b6f47cfbddfc381903211e741aee50d63ad3)** to **[`38a2bd6`](https://github.com/sagemath/sagetrac-mirror/commit/38a2bd69eaa9b47d1c3856722c2abd28264e74d2)**



---

archive/issue_comments_296037.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38a2bd69eaa9b47d1c3856722c2abd28264e74d2\"><code>38a2bd6</code></a></td><td><code>forgotten cinitialisation in the cvxopt LP interface</code></td></tr></table>\n",
    "created_at": "2016-05-01T14:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296037",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38a2bd69eaa9b47d1c3856722c2abd28264e74d2"><code>38a2bd6</code></a></td><td><code>forgotten cinitialisation in the cvxopt LP interface</code></td></tr></table>




---

archive/issue_comments_296038.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI will need to put that in a patch and rebuild since it is `.pyx` in the case of sage-on-gentoo that means rebuilding the whole library and the doc (but not the dependencies). I'll put both commits.",
    "created_at": "2016-05-01T22:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296038",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:33" align="right">comment:33</div>

I will need to put that in a patch and rebuild since it is `.pyx` in the case of sage-on-gentoo that means rebuilding the whole library and the doc (but not the dependencies). I'll put both commits.



---

archive/issue_comments_296039.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nNo changes for sage-on-gentoo when including the last two commits (and only those not the rest of the branch).",
    "created_at": "2016-05-02T01:38:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296039",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:34" align="right">comment:34</div>

No changes for sage-on-gentoo when including the last two commits (and only those not the rest of the branch).



---

archive/issue_comments_296040.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nNo impact on vanilla sage on the same machine.",
    "created_at": "2016-05-02T01:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296040",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:35" align="right">comment:35</div>

No impact on vanilla sage on the same machine.



---

archive/issue_comments_296041.json:
```json
{
    "body": "Changed commit from **[`38a2bd6`](https://github.com/sagemath/sagetrac-mirror/commit/38a2bd69eaa9b47d1c3856722c2abd28264e74d2)** to **[`83210c9`](https://github.com/sagemath/sagetrac-mirror/commit/83210c91601a00020772510ff5977d0c007ce4d5)**",
    "created_at": "2016-05-02T14:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296041",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`38a2bd6`](https://github.com/sagemath/sagetrac-mirror/commit/38a2bd69eaa9b47d1c3856722c2abd28264e74d2)** to **[`83210c9`](https://github.com/sagemath/sagetrac-mirror/commit/83210c91601a00020772510ff5977d0c007ce4d5)**



---

archive/issue_comments_296042.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f2bf001d3dcbe0b533755bed44baf7d3ec94b04\"><code>8f2bf00</code></a></td><td><code>Merge remote-tracking branch 'trac/u/dimpase/sdpdual' into sdpd</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02157ad1595da1981abba8f01af816864e421ef2\"><code>02157ad</code></a></td><td><code>removing numerically unstable test - will be on another ticket</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83210c91601a00020772510ff5977d0c007ce4d5\"><code>83210c9</code></a></td><td><code>Merge branch 'u/dimpase/sdpdual' of trac.sagemath.org:sage into sdpd</code></td></tr></table>\n",
    "created_at": "2016-05-02T14:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296042",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f2bf001d3dcbe0b533755bed44baf7d3ec94b04"><code>8f2bf00</code></a></td><td><code>Merge remote-tracking branch 'trac/u/dimpase/sdpdual' into sdpd</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02157ad1595da1981abba8f01af816864e421ef2"><code>02157ad</code></a></td><td><code>removing numerically unstable test - will be on another ticket</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83210c91601a00020772510ff5977d0c007ce4d5"><code>83210c9</code></a></td><td><code>Merge branch 'u/dimpase/sdpdual' of trac.sagemath.org:sage into sdpd</code></td></tr></table>




---

archive/issue_comments_296043.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/572b630527b6c6a29853f18bedd3bcea9e30ca57\"><code>572b630</code></a></td><td><code>trim numerical noise further</code></td></tr></table>\n",
    "created_at": "2016-05-02T14:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296043",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/572b630527b6c6a29853f18bedd3bcea9e30ca57"><code>572b630</code></a></td><td><code>trim numerical noise further</code></td></tr></table>




---

archive/issue_comments_296044.json:
```json
{
    "body": "Changed commit from **[`83210c9`](https://github.com/sagemath/sagetrac-mirror/commit/83210c91601a00020772510ff5977d0c007ce4d5)** to **[`572b630`](https://github.com/sagemath/sagetrac-mirror/commit/572b630527b6c6a29853f18bedd3bcea9e30ca57)**",
    "created_at": "2016-05-02T14:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296044",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`83210c9`](https://github.com/sagemath/sagetrac-mirror/commit/83210c91601a00020772510ff5977d0c007ce4d5)** to **[`572b630`](https://github.com/sagemath/sagetrac-mirror/commit/572b630527b6c6a29853f18bedd3bcea9e30ca57)**



---

archive/issue_comments_296045.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI removed the \"unstable\" example. Now sage4 bot (and the rest) should be happy.\nIt will go on another ticket.",
    "created_at": "2016-05-02T14:47:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296045",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:38" align="right">comment:38</div>

I removed the "unstable" example. Now sage4 bot (and the rest) should be happy.
It will go on another ticket.



---

archive/issue_events_286446.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-02T14:47:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286446"
}
```



---

archive/issue_events_286447.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-02T14:47:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286447"
}
```



---

archive/issue_events_286448.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-05-03T05:18:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286448"
}
```



---

archive/issue_events_286449.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-05-03T05:18:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286449"
}
```



---

archive/issue_comments_296046.json:
```json
{
    "body": "Changed branch from **[u/dimpase/sdpdual](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/sdpdual)** to **[`572b630`](https://github.com/sagemath/sagetrac-mirror/commit/572b630527b6c6a29853f18bedd3bcea9e30ca57)**",
    "created_at": "2016-05-04T17:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296046",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/sdpdual](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/sdpdual)** to **[`572b630`](https://github.com/sagemath/sagetrac-mirror/commit/572b630527b6c6a29853f18bedd3bcea9e30ca57)**



---

archive/issue_events_286450.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-04T17:10:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286450"
}
```



---

archive/issue_events_286451.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9c5e2fac092df18c8860bed2ce02decef272cb70",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-05-04T17:10:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20506#event-286451"
}
```



---

archive/issue_comments_296047.json:
```json
{
    "body": "Changed commit from **[`572b630`](https://github.com/sagemath/sagetrac-mirror/commit/572b630527b6c6a29853f18bedd3bcea9e30ca57)** to none",
    "created_at": "2016-10-27T21:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296047",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`572b630`](https://github.com/sagemath/sagetrac-mirror/commit/572b630527b6c6a29853f18bedd3bcea9e30ca57)** to none



---

archive/issue_comments_296048.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@sagetrac-git](#comment:36):\n|                                                                                                                                                 |                                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[02157ad](https://github.com/sagemath/sagetrac-mirror/commit/02157ad1595da1981abba8f01af816864e421ef2)|`removing numerically unstable test - will be on another ticket`|\n\nthis is traced down to wrongly set `refinement` parameter in `numerical/backends/cvxopt_sdp_backend.py` \n\n```\ndiff --git a/src/sage/numerical/backends/cvxopt_sdp_backend.pyx b/src/sage/numerical/backends/cvxopt_sdp_backend.pyx\nindex 6c24173..b65d4bc 100644\n--- a/src/sage/numerical/backends/cvxopt_sdp_backend.pyx\n+++ b/src/sage/numerical/backends/cvxopt_sdp_backend.pyx\n@@ -63,7 +63,7 @@ cdef class CVXOPTSDPBackend(GenericSDPBackend):\n                       \"abstol\":1e-7,\n                       \"reltol\":1e-6,\n                       \"feastol\":1e-7,\n-                      \"refinement\":0 }\n+                      \"refinement\":1 }\n         self.answer = {}\n         if maximization:\n             self.set_sense(+1)\n```\nWill be fixed on #21778",
    "created_at": "2016-10-27T21:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20506#issuecomment-296048",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@sagetrac-git](#comment:36):
|                                                                                                                                                 |                                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[02157ad](https://github.com/sagemath/sagetrac-mirror/commit/02157ad1595da1981abba8f01af816864e421ef2)|`removing numerically unstable test - will be on another ticket`|

this is traced down to wrongly set `refinement` parameter in `numerical/backends/cvxopt_sdp_backend.py` 

```
diff --git a/src/sage/numerical/backends/cvxopt_sdp_backend.pyx b/src/sage/numerical/backends/cvxopt_sdp_backend.pyx
index 6c24173..b65d4bc 100644
--- a/src/sage/numerical/backends/cvxopt_sdp_backend.pyx
+++ b/src/sage/numerical/backends/cvxopt_sdp_backend.pyx
@@ -63,7 +63,7 @@ cdef class CVXOPTSDPBackend(GenericSDPBackend):
                       "abstol":1e-7,
                       "reltol":1e-6,
                       "feastol":1e-7,
-                      "refinement":0 }
+                      "refinement":1 }
         self.answer = {}
         if maximization:
             self.set_sense(+1)
```
Will be fixed on #21778
