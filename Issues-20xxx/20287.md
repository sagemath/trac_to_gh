# Issue 20287: Implement the Moore–Penrose matrix pseudoinverse

archive/issues_020050.json:
```json
{
    "assignees": [],
    "body": "See [https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse](https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse)\n\nUse case: #20259.\n\nDepends on #20286\n\nBranch/Commit: **[`3a3f552`](https://github.com/sagemath/sagetrac-mirror/commit/3a3f5521eb8ced6c64a329918ac3544633286e89)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Jeroen Demeyer**\n\nComponent: **linear algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20287_\n\n",
    "closed_at": "2016-03-30T14:05:45Z",
    "created_at": "2016-03-25T11:02:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement the Moore\u2013Penrose matrix pseudoinverse",
    "type": "issue",
    "updated_at": "2016-03-30T14:05:45Z",
    "url": "https://github.com/sagemath/sage/issues/20287",
    "user": "https://github.com/jdemeyer"
}
```
See [https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse](https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse)

Use case: #20259.

Depends on #20286

Branch/Commit: **[`3a3f552`](https://github.com/sagemath/sagetrac-mirror/commit/3a3f5521eb8ced6c64a329918ac3544633286e89)**

Reviewer: **Frédéric Chapoton**

Author: **Jeroen Demeyer**

Component: **linear algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/20287_





---

archive/issue_events_283784.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-25T11:02:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283784"
}
```



---

archive/issue_events_283785.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-25T11:02:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283785"
}
```



---

archive/issue_events_283786.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-25T11:02:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283786"
}
```



---

archive/issue_events_283787.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-25T11:02:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283787"
}
```



---

archive/issue_events_283788.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-25T11:02:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "title_is": "Implement the Moore\u2013Penrose matrix pseudoinverse",
    "title_was": "Implement the Moore\u2013Penrose pseudoinverse",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283788"
}
```



---

archive/issue_comments_292155.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+See [https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse](https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse)\n``````\n",
    "created_at": "2016-03-25T11:02:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292155",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+See [https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse](https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse)
``````




---

archive/issue_comments_292156.json:
```json
{
    "body": "Branch: **[u/jdemeyer/pseudoinverse](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/pseudoinverse)**",
    "created_at": "2016-03-25T11:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292156",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/pseudoinverse](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/pseudoinverse)**



---

archive/issue_comments_292157.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80ed2fbaa4099cc1fa0507df86bbeae195b13eb1\"><code>80ed2fb</code></a></td><td><code>Use ring when constructing a matrix from numpy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9663a7b2638e0f705bfe510b0ccf14b223542fb\"><code>f9663a7</code></a></td><td><code>Implement the Moore-Penrose pseudoinverse</code></td></tr></table>\n",
    "created_at": "2016-03-25T13:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292157",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80ed2fbaa4099cc1fa0507df86bbeae195b13eb1"><code>80ed2fb</code></a></td><td><code>Use ring when constructing a matrix from numpy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9663a7b2638e0f705bfe510b0ccf14b223542fb"><code>f9663a7</code></a></td><td><code>Implement the Moore-Penrose pseudoinverse</code></td></tr></table>




---

archive/issue_comments_292158.json:
```json
{
    "body": "Commit: **[`f9663a7`](https://github.com/sagemath/sagetrac-mirror/commit/f9663a7b2638e0f705bfe510b0ccf14b223542fb)**",
    "created_at": "2016-03-25T13:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292158",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`f9663a7`](https://github.com/sagemath/sagetrac-mirror/commit/f9663a7b2638e0f705bfe510b0ccf14b223542fb)**



---

archive/issue_events_283789.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-25T13:23:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283789"
}
```



---

archive/issue_comments_292159.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n See [https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse](https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse)\n+\n+Use case: #20259.\n``````\n",
    "created_at": "2016-03-25T16:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292159",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 See [https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse](https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse)
+
+Use case: #20259.
``````




---

archive/issue_comments_292160.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nfailing doctests, see bot report",
    "created_at": "2016-03-27T17:41:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292160",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

failing doctests, see bot report



---

archive/issue_events_283790.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-03-27T17:41:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283790"
}
```



---

archive/issue_events_283791.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-03-27T17:41:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283791"
}
```



---

archive/issue_comments_292161.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nA line number in the doc changed from less than 1000 to more than 1000 causing a 1-character shift.",
    "created_at": "2016-03-28T09:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292161",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

A line number in the doc changed from less than 1000 to more than 1000 causing a 1-character shift.



---

archive/issue_comments_292162.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a57941095880dbf310a0a58c93cf1743fb4366a9\"><code>a579410</code></a></td><td><code>Fix for changed line number in rook_vector.__doc__</code></td></tr></table>\n",
    "created_at": "2016-03-28T09:21:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292162",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a57941095880dbf310a0a58c93cf1743fb4366a9"><code>a579410</code></a></td><td><code>Fix for changed line number in rook_vector.__doc__</code></td></tr></table>




---

archive/issue_comments_292163.json:
```json
{
    "body": "Changed commit from **[`f9663a7`](https://github.com/sagemath/sagetrac-mirror/commit/f9663a7b2638e0f705bfe510b0ccf14b223542fb)** to **[`a579410`](https://github.com/sagemath/sagetrac-mirror/commit/a57941095880dbf310a0a58c93cf1743fb4366a9)**",
    "created_at": "2016-03-28T09:21:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292163",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f9663a7`](https://github.com/sagemath/sagetrac-mirror/commit/f9663a7b2638e0f705bfe510b0ccf14b223542fb)** to **[`a579410`](https://github.com/sagemath/sagetrac-mirror/commit/a57941095880dbf310a0a58c93cf1743fb4366a9)**



---

archive/issue_events_283792.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-28T09:24:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283792"
}
```



---

archive/issue_events_283793.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-28T09:24:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283793"
}
```



---

archive/issue_comments_292164.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nok, looks good to me",
    "created_at": "2016-03-28T18:23:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292164",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

ok, looks good to me



---

archive/issue_events_283794.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-03-28T18:23:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283794"
}
```



---

archive/issue_events_283795.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-03-28T18:23:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283795"
}
```



---

archive/issue_comments_292165.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2016-03-28T18:23:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292165",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_comments_292166.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nLate to the party: is there any case where the inferred algorithm would not do the right thing, and the user would have to specify one?",
    "created_at": "2016-03-28T21:07:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292166",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:11" align="right">comment:11</div>

Late to the party: is there any case where the inferred algorithm would not do the right thing, and the user would have to specify one?



---

archive/issue_comments_292167.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@orlitzky](#comment%3A11):\n> Late to the party: is there any case where the inferred algorithm would not do the right thing, and the user would have to specify one?\n\nI don't think that there are cases where the is a better choice than the default one. However, there might be cases where there is no suitable algorithm at all.",
    "created_at": "2016-03-29T06:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292167",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@orlitzky](#comment%3A11):
> Late to the party: is there any case where the inferred algorithm would not do the right thing, and the user would have to specify one?

I don't think that there are cases where the is a better choice than the default one. However, there might be cases where there is no suitable algorithm at all.



---

archive/issue_events_283796.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-03-29T07:30:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283796"
}
```



---

archive/issue_events_283797.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-03-29T07:30:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283797"
}
```



---

archive/issue_comments_292168.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a3f5521eb8ced6c64a329918ac3544633286e89\"><code>3a3f552</code></a></td><td><code>Numerical noise: mark test as random</code></td></tr></table>\n",
    "created_at": "2016-03-29T07:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292168",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a3f5521eb8ced6c64a329918ac3544633286e89"><code>3a3f552</code></a></td><td><code>Numerical noise: mark test as random</code></td></tr></table>




---

archive/issue_comments_292169.json:
```json
{
    "body": "Changed commit from **[`a579410`](https://github.com/sagemath/sagetrac-mirror/commit/a57941095880dbf310a0a58c93cf1743fb4366a9)** to **[`3a3f552`](https://github.com/sagemath/sagetrac-mirror/commit/3a3f5521eb8ced6c64a329918ac3544633286e89)**",
    "created_at": "2016-03-29T07:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292169",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a579410`](https://github.com/sagemath/sagetrac-mirror/commit/a57941095880dbf310a0a58c93cf1743fb4366a9)** to **[`3a3f552`](https://github.com/sagemath/sagetrac-mirror/commit/3a3f5521eb8ced6c64a329918ac3544633286e89)**



---

archive/issue_comments_292170.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI had to mark one test as `random` due to numerical noise.",
    "created_at": "2016-03-29T07:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292170",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

I had to mark one test as `random` due to numerical noise.



---

archive/issue_events_283798.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-29T07:32:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283798"
}
```



---

archive/issue_events_283799.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-29T07:32:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283799"
}
```



---

archive/issue_comments_292171.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@jdemeyer](#comment%3A12):\n> \n> I don't think that there are cases where the is a better choice than the default one. However, there might be cases where there is no suitable algorithm at all.\n\nThen why offer the choice? I ask because, if you remove the `algorithm` parameter, it looks like a matrix superclass method is trying to figure out what to do by a \"what subclass am I\" heuristic. In that case, if the matrix class hierarchy is good enough, it might make more sense to move the subclass-specific behavior into subclass methods.\n\nFor example, the default `Matrix` would implement the \"exact\" or \"exactconj\" algorithms. (Is there a situation where \"exactconj\" does the wrong thing on a real matrix?) In `Matrix_real_double_dense` and `Matrix_complex_double_dense`, you would call numpy. In `Matrix_generic_dense`, you would do the precision check and either call numpy or raise an error. Et cetera. On the other hand, if the matrix hierarchy would make you copy/paste the same implementation around, forget I said anything.\n\nLater on if we get an SVD that works for RR/CC, we can just add it to override the naive algorithm in those subclasses. With `algorithm` in the function signature, we have to worry about breaking the user interface with those changes.",
    "created_at": "2016-03-29T12:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292171",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@jdemeyer](#comment%3A12):
> 
> I don't think that there are cases where the is a better choice than the default one. However, there might be cases where there is no suitable algorithm at all.

Then why offer the choice? I ask because, if you remove the `algorithm` parameter, it looks like a matrix superclass method is trying to figure out what to do by a "what subclass am I" heuristic. In that case, if the matrix class hierarchy is good enough, it might make more sense to move the subclass-specific behavior into subclass methods.

For example, the default `Matrix` would implement the "exact" or "exactconj" algorithms. (Is there a situation where "exactconj" does the wrong thing on a real matrix?) In `Matrix_real_double_dense` and `Matrix_complex_double_dense`, you would call numpy. In `Matrix_generic_dense`, you would do the precision check and either call numpy or raise an error. Et cetera. On the other hand, if the matrix hierarchy would make you copy/paste the same implementation around, forget I said anything.

Later on if we get an SVD that works for RR/CC, we can just add it to override the naive algorithm in those subclasses. With `algorithm` in the function signature, we have to worry about breaking the user interface with those changes.



---

archive/issue_comments_292172.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@orlitzky](#comment%3A15):\n> Then why offer the choice?\n\nGeneral principle: because I see no reason to *not* offer the choice. If a choice is available, why not allow the user to override that choice? Of course, offer a good default.\n\nMore specifically: it might be hard to guess between `exact` and `exactconj`.\n\n> I ask because, if you remove the `algorithm` parameter, it looks like a matrix superclass method is trying to figure out what to do by a \"what subclass am I\" heuristic.\n\nI disagree completely. This has nothing to do with the `type()` of the matrix, but with the mathematical properties of the parent.\n\nWith your proposal, `pseudoinverse()` would no longer work for matrices over `RR` or `CC` or for sparse matrices.",
    "created_at": "2016-03-29T13:16:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292172",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@orlitzky](#comment%3A15):
> Then why offer the choice?

General principle: because I see no reason to *not* offer the choice. If a choice is available, why not allow the user to override that choice? Of course, offer a good default.

More specifically: it might be hard to guess between `exact` and `exactconj`.

> I ask because, if you remove the `algorithm` parameter, it looks like a matrix superclass method is trying to figure out what to do by a "what subclass am I" heuristic.

I disagree completely. This has nothing to do with the `type()` of the matrix, but with the mathematical properties of the parent.

With your proposal, `pseudoinverse()` would no longer work for matrices over `RR` or `CC` or for sparse matrices.



---

archive/issue_comments_292173.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@jdemeyer](#comment%3A16):\n> General principle: because I see no reason to *not* offer the choice. If a choice is available, why not allow the user to override that choice? Of course, offer a good default.\n\nI generally agree, but I wanted to be sure that the choice we're giving the user isn't `do_it_wrong=True`. If the default always does the right thing, and one of the other algorithms might not, then it's just noise in the docstring. And we'd have to go through a deprecation cycle to change it in the future.\n\n> I disagree completely. This has nothing to do with the `type()` of the matrix, but with the mathematical properties of the parent.\n\nFair enough, but the resulting type of the matrix is determined by the ring that you pass in (and whether or not it's sparse).\n\n> With your proposal, `pseudoinverse()` would no longer work for matrices over `RR` or `CC` or for sparse matrices.\n\nYou would at least get the exact(conj) implementation in every case. But you would have to override that in every subclass where it makes sense, like the generic_dense ones for RR/CC. If that's difficult or results in code duplication, then it's fine as-is. I just brought it up in case you hadn't considered it.",
    "created_at": "2016-03-29T13:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292173",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@jdemeyer](#comment%3A16):
> General principle: because I see no reason to *not* offer the choice. If a choice is available, why not allow the user to override that choice? Of course, offer a good default.

I generally agree, but I wanted to be sure that the choice we're giving the user isn't `do_it_wrong=True`. If the default always does the right thing, and one of the other algorithms might not, then it's just noise in the docstring. And we'd have to go through a deprecation cycle to change it in the future.

> I disagree completely. This has nothing to do with the `type()` of the matrix, but with the mathematical properties of the parent.

Fair enough, but the resulting type of the matrix is determined by the ring that you pass in (and whether or not it's sparse).

> With your proposal, `pseudoinverse()` would no longer work for matrices over `RR` or `CC` or for sparse matrices.

You would at least get the exact(conj) implementation in every case. But you would have to override that in every subclass where it makes sense, like the generic_dense ones for RR/CC. If that's difficult or results in code duplication, then it's fine as-is. I just brought it up in case you hadn't considered it.



---

archive/issue_events_283800.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-30T14:05:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283800"
}
```



---

archive/issue_events_283801.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "cccb03b26b0c1dfcc26ea65c5dbeb7f8a83a2e9b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-03-30T14:05:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20287#event-283801"
}
```



---

archive/issue_comments_292174.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/pseudoinverse](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/pseudoinverse)** to **[`3a3f552`](https://github.com/sagemath/sagetrac-mirror/commit/3a3f5521eb8ced6c64a329918ac3544633286e89)**",
    "created_at": "2016-03-30T14:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20287#issuecomment-292174",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/pseudoinverse](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/pseudoinverse)** to **[`3a3f552`](https://github.com/sagemath/sagetrac-mirror/commit/3a3f5521eb8ced6c64a329918ac3544633286e89)**
