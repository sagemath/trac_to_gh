# Issue 20138: Information set decoding for linear codes

archive/issues_019901.json:
```json
{
    "assignees": [],
    "body": "This ticket proposes an implementation of Lee-Brickell algorithm refinement for the information set decoding.\n\nIt depends on #19653 for the reimplementation of `C.random_element`.\n\nDepends on #19653\n\nCC:  @jlavauzelle\n\nBranch/Commit: **[`eb2efb3`](https://github.com/sagemath/sagetrac-mirror/commit/eb2efb3d03f135e4f163bf3b2554c2a8d47054ff)**\n\nReviewer: **Yann Laigle-Chapuy**\n\nAuthor: **David Lucas, Johan Rosenkilde, Yann Laigle-Chapuy**\n\nComponent: **coding theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20138_\n\n",
    "closed_at": "2017-07-29T15:31:00Z",
    "created_at": "2016-02-29T15:52:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20coding%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Information set decoding for linear codes",
    "type": "issue",
    "updated_at": "2017-07-29T15:31:00Z",
    "url": "https://github.com/sagemath/sage/issues/20138",
    "user": "https://github.com/sagetrac-dlucas"
}
```
This ticket proposes an implementation of Lee-Brickell algorithm refinement for the information set decoding.

It depends on #19653 for the reimplementation of `C.random_element`.

Depends on #19653

CC:  @jlavauzelle

Branch/Commit: **[`eb2efb3`](https://github.com/sagemath/sagetrac-mirror/commit/eb2efb3d03f135e4f163bf3b2554c2a8d47054ff)**

Reviewer: **Yann Laigle-Chapuy**

Author: **David Lucas, Johan Rosenkilde, Yann Laigle-Chapuy**

Component: **coding theory**

_Issue created by migration from https://trac.sagemath.org/ticket/20138_





---

archive/issue_events_285726.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-02-29T15:52:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285726"
}
```



---

archive/issue_events_285727.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-02-29T15:52:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coding%20theory",
    "label_color": "0000ff",
    "label_name": "c: coding theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285727"
}
```



---

archive/issue_events_285728.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-02-29T15:52:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285728"
}
```



---

archive/issue_events_285729.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-02-29T15:52:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285729"
}
```



---

archive/issue_comments_289163.json:
```json
{
    "body": "Branch: **[u/dlucas/information_set_decoding](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/information_set_decoding)**",
    "created_at": "2016-02-29T15:54:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289163",
    "user": "https://github.com/sagetrac-dlucas"
}
```

Branch: **[u/dlucas/information_set_decoding](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/information_set_decoding)**



---

archive/issue_comments_289164.json:
```json
{
    "body": "Commit: **[`645e329`](https://github.com/sagemath/sagetrac-mirror/commit/645e329a716a57f16e64c972f46779e4e0c1905f)**",
    "created_at": "2016-02-29T15:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289164",
    "user": "https://github.com/sagetrac-dlucas"
}
```

Commit: **[`645e329`](https://github.com/sagemath/sagetrac-mirror/commit/645e329a716a57f16e64c972f46779e4e0c1905f)**



---

archive/issue_comments_289165.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI pushed the first version of the code for this ticket.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/884d8ab7e2b18a3dc8fd749a72bac70a14613018\"><code>884d8ab</code></a></td><td><code>New decoder, InformationSetDecoder</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/351b30c2f3979572b207ae465941ef1d7ef4a620\"><code>351b30c</code></a></td><td><code>Set this new decoder in other code families and in the catalog</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/645e329a716a57f16e64c972f46779e4e0c1905f\"><code>645e329</code></a></td><td><code>Fixed broken doctests</code></td></tr></table>\n",
    "created_at": "2016-02-29T15:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289165",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<div id="comment:2" align="right">comment:2</div>

I pushed the first version of the code for this ticket.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/884d8ab7e2b18a3dc8fd749a72bac70a14613018"><code>884d8ab</code></a></td><td><code>New decoder, InformationSetDecoder</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/351b30c2f3979572b207ae465941ef1d7ef4a620"><code>351b30c</code></a></td><td><code>Set this new decoder in other code families and in the catalog</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/645e329a716a57f16e64c972f46779e4e0c1905f"><code>645e329</code></a></td><td><code>Fixed broken doctests</code></td></tr></table>




---

archive/issue_comments_289166.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6292df9f4f67bb1fff09cea7380a6eedf0162db4\"><code>6292df9</code></a></td><td><code>window_size and number_errors are now class arguments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e72a5ab019a50497abcdc9ab6352bbdecf29f063\"><code>e72a5ab</code></a></td><td><code>Rewrote `_repr_` and `_latex_` methods, fixed a typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2c074ce28489d28f35364547ebde884a6065a73\"><code>f2c074c</code></a></td><td><code>decode_to_code now iterates over the whole range of provided errors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e1391d358018382db6cc0a59014ef934239987e\"><code>0e1391d</code></a></td><td><code>Added *args to Decoder/Encoder-related methods in AbstractLinearCode</code></td></tr></table>\n",
    "created_at": "2016-03-03T13:07:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289166",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6292df9f4f67bb1fff09cea7380a6eedf0162db4"><code>6292df9</code></a></td><td><code>window_size and number_errors are now class arguments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e72a5ab019a50497abcdc9ab6352bbdecf29f063"><code>e72a5ab</code></a></td><td><code>Rewrote `_repr_` and `_latex_` methods, fixed a typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2c074ce28489d28f35364547ebde884a6065a73"><code>f2c074c</code></a></td><td><code>decode_to_code now iterates over the whole range of provided errors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e1391d358018382db6cc0a59014ef934239987e"><code>0e1391d</code></a></td><td><code>Added *args to Decoder/Encoder-related methods in AbstractLinearCode</code></td></tr></table>




---

archive/issue_comments_289167.json:
```json
{
    "body": "Changed commit from **[`645e329`](https://github.com/sagemath/sagetrac-mirror/commit/645e329a716a57f16e64c972f46779e4e0c1905f)** to **[`0e1391d`](https://github.com/sagemath/sagetrac-mirror/commit/0e1391d358018382db6cc0a59014ef934239987e)**",
    "created_at": "2016-03-03T13:07:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289167",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`645e329`](https://github.com/sagemath/sagetrac-mirror/commit/645e329a716a57f16e64c972f46779e4e0c1905f)** to **[`0e1391d`](https://github.com/sagemath/sagetrac-mirror/commit/0e1391d358018382db6cc0a59014ef934239987e)**



---

archive/issue_events_285730.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-03-03T13:11:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285730"
}
```



---

archive/issue_comments_289168.json:
```json
{
    "body": "Author: **David Lucas**",
    "created_at": "2016-03-03T13:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289168",
    "user": "https://github.com/sagetrac-dlucas"
}
```

Author: **David Lucas**



---

archive/issue_comments_289169.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI made some changes:\n\n- `window_size` and `number_errors` (previously `p` and `w`) are no longer parameters of `decode_to_code` but class arguments to provide at construction time. `number_errors` can be provided as a tuple/list, and in that case, the decoder will iterate over it when trying to decode a word.\n\n- I completely reworked the documentation, explained how the algorithm works and added a lot of doctests.\n\n- I completed input sanitization with some extra checks.\n\n- I fixed a stupid bug: only `**kwargs` was considered on Decoder/Encoder-related methods from `AbstractLinearCode`, like `decoder()`. So, `C.decoder('InformationSet', 2, 2)` was not working...\n\nThis is now open for review.",
    "created_at": "2016-03-03T13:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289169",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<div id="comment:4" align="right">comment:4</div>

I made some changes:

- `window_size` and `number_errors` (previously `p` and `w`) are no longer parameters of `decode_to_code` but class arguments to provide at construction time. `number_errors` can be provided as a tuple/list, and in that case, the decoder will iterate over it when trying to decode a word.

- I completely reworked the documentation, explained how the algorithm works and added a lot of doctests.

- I completed input sanitization with some extra checks.

- I fixed a stupid bug: only `**kwargs` was considered on Decoder/Encoder-related methods from `AbstractLinearCode`, like `decoder()`. So, `C.decoder('InformationSet', 2, 2)` was not working...

This is now open for review.



---

archive/issue_comments_289170.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81927695b58d5e4543d4a59b9d1b2c4d730ddd35\"><code>8192769</code></a></td><td><code>Updated to 7.1beta6 and fixed conflicts</code></td></tr></table>\n",
    "created_at": "2016-03-07T12:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289170",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81927695b58d5e4543d4a59b9d1b2c4d730ddd35"><code>8192769</code></a></td><td><code>Updated to 7.1beta6 and fixed conflicts</code></td></tr></table>




---

archive/issue_comments_289171.json:
```json
{
    "body": "Changed commit from **[`0e1391d`](https://github.com/sagemath/sagetrac-mirror/commit/0e1391d358018382db6cc0a59014ef934239987e)** to **[`8192769`](https://github.com/sagemath/sagetrac-mirror/commit/81927695b58d5e4543d4a59b9d1b2c4d730ddd35)**",
    "created_at": "2016-03-07T12:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289171",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0e1391d`](https://github.com/sagemath/sagetrac-mirror/commit/0e1391d358018382db6cc0a59014ef934239987e)** to **[`8192769`](https://github.com/sagemath/sagetrac-mirror/commit/81927695b58d5e4543d4a59b9d1b2c4d730ddd35)**



---

archive/issue_comments_289172.json:
```json
{
    "body": "Changed commit from **[`8192769`](https://github.com/sagemath/sagetrac-mirror/commit/81927695b58d5e4543d4a59b9d1b2c4d730ddd35)** to **[`924be79`](https://github.com/sagemath/sagetrac-mirror/commit/924be79fc189c2a9c563b9bfbe240ad854c16101)**",
    "created_at": "2016-04-26T12:33:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289172",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8192769`](https://github.com/sagemath/sagetrac-mirror/commit/81927695b58d5e4543d4a59b9d1b2c4d730ddd35)** to **[`924be79`](https://github.com/sagemath/sagetrac-mirror/commit/924be79fc189c2a9c563b9bfbe240ad854c16101)**



---

archive/issue_comments_289173.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/465cd567ebe29437fc45452c33abd7829141e79f\"><code>465cd56</code></a></td><td><code>Merge branch 'develop' into information_set_decoding</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59de9977c1007755e85e916e7ece0336306cc7ac\"><code>59de997</code></a></td><td><code>Added information set decoder to Hamming codes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/924be79fc189c2a9c563b9bfbe240ad854c16101\"><code>924be79</code></a></td><td><code>Minor changes to the information set decoder</code></td></tr></table>\n",
    "created_at": "2016-04-26T12:33:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289173",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/465cd567ebe29437fc45452c33abd7829141e79f"><code>465cd56</code></a></td><td><code>Merge branch 'develop' into information_set_decoding</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59de9977c1007755e85e916e7ece0336306cc7ac"><code>59de997</code></a></td><td><code>Added information set decoder to Hamming codes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/924be79fc189c2a9c563b9bfbe240ad854c16101"><code>924be79</code></a></td><td><code>Minor changes to the information set decoder</code></td></tr></table>




---

archive/issue_comments_289174.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI updated this ticket to latest beta, fixed broken doctests, and did minor changes to the decoder (I refined its types and rewrote a line in the documentation).\nIt's still open for review.",
    "created_at": "2016-04-26T12:34:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289174",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<div id="comment:7" align="right">comment:7</div>

I updated this ticket to latest beta, fixed broken doctests, and did minor changes to the decoder (I refined its types and rewrote a line in the documentation).
It's still open for review.



---

archive/issue_events_285731.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-04-26T12:34:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285731"
}
```



---

archive/issue_events_285732.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-04-26T12:34:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285732"
}
```



---

archive/issue_comments_289175.json:
```json
{
    "body": "Changed commit from **[`924be79`](https://github.com/sagemath/sagetrac-mirror/commit/924be79fc189c2a9c563b9bfbe240ad854c16101)** to **[`93066b1`](https://github.com/sagemath/sagetrac-mirror/commit/93066b139f579636a913f934e51046e7753cba8a)**",
    "created_at": "2016-06-03T14:25:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289175",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`924be79`](https://github.com/sagemath/sagetrac-mirror/commit/924be79fc189c2a9c563b9bfbe240ad854c16101)** to **[`93066b1`](https://github.com/sagemath/sagetrac-mirror/commit/93066b139f579636a913f934e51046e7753cba8a)**



---

archive/issue_comments_289176.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62468b94701efc11f285c84c318e6b21cc419e29\"><code>62468b9</code></a></td><td><code>Updated to latest beta and fixed conflict</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93066b139f579636a913f934e51046e7753cba8a\"><code>93066b1</code></a></td><td><code>Fixed silly copy-paste mistake in ISD's decoder_type</code></td></tr></table>\n",
    "created_at": "2016-06-03T14:25:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289176",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62468b94701efc11f285c84c318e6b21cc419e29"><code>62468b9</code></a></td><td><code>Updated to latest beta and fixed conflict</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93066b139f579636a913f934e51046e7753cba8a"><code>93066b1</code></a></td><td><code>Fixed silly copy-paste mistake in ISD's decoder_type</code></td></tr></table>




---

archive/issue_comments_289177.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI updated this ticket to 7.3b2, and fixed a bug.\nStill open for review.\n\nBest,\n\nDavid",
    "created_at": "2016-06-03T14:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289177",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<div id="comment:9" align="right">comment:9</div>

I updated this ticket to 7.3b2, and fixed a bug.
Still open for review.

Best,

David



---

archive/issue_events_285733.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-06-03T14:25:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285733"
}
```



---

archive/issue_events_285734.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-06-03T14:25:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285734"
}
```



---

archive/issue_comments_289178.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHere are my two cents:\n* you should use `itertools` instead of `Subsets`\n* you shouldn't enumerate the `information_set` but take them at random (otherwise you might get stuck a long time with bad choices)\n* why use `while True` loops instead of just `for`?\n\nall in all, here is how I would do it (notations from the article you cite):\n\n```sage\nimport itertools\ndef LeeBrickell(r, C, w, p):\n    G = C.generator_matrix()\n    n = C.length()\n    k = C.dimension()\n    Fstar = list(C.base_ring())[1:]\n    while True:\n        # step 1.\n        I = sample(range(n), k)\n        Gi = G.matrix_from_columns(I)\n        try:\n            Gi_inv = Gi.inverse()\n        except ZeroDivisionError:\n            continue\n        G = Gi_inv * G\n        #step 2.\n        y = r - vector([r[i] for i in I]) * G\n        g = G.rows()\n        #step 3.\n        for A in itertools.combinations(range(k), p):\n            for m in itertools.product(Fstar, repeat=p):\n                e = y - sum(m[i]*g[A[i]] for i in range(p))\n                if e.hamming_weight() == w:\n                    return r - e\n\n```",
    "created_at": "2016-09-01T10:30:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289178",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:10" align="right">comment:10</div>

Here are my two cents:
* you should use `itertools` instead of `Subsets`
* you shouldn't enumerate the `information_set` but take them at random (otherwise you might get stuck a long time with bad choices)
* why use `while True` loops instead of just `for`?

all in all, here is how I would do it (notations from the article you cite):

```sage
import itertools
def LeeBrickell(r, C, w, p):
    G = C.generator_matrix()
    n = C.length()
    k = C.dimension()
    Fstar = list(C.base_ring())[1:]
    while True:
        # step 1.
        I = sample(range(n), k)
        Gi = G.matrix_from_columns(I)
        try:
            Gi_inv = Gi.inverse()
        except ZeroDivisionError:
            continue
        G = Gi_inv * G
        #step 2.
        y = r - vector([r[i] for i in I]) * G
        g = G.rows()
        #step 3.
        for A in itertools.combinations(range(k), p):
            for m in itertools.product(Fstar, repeat=p):
                e = y - sum(m[i]*g[A[i]] for i in range(p))
                if e.hamming_weight() == w:
                    return r - e

```



---

archive/issue_events_285735.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2016-09-01T11:17:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285735"
}
```



---

archive/issue_events_285736.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2016-09-01T11:17:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285736"
}
```



---

archive/issue_comments_289179.json:
```json
{
    "body": "Reviewer: **Yann Laigle-Chapuy**",
    "created_at": "2016-09-01T11:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289179",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

Reviewer: **Yann Laigle-Chapuy**



---

archive/issue_comments_289180.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nYou should also check if the resulting word is in the code (it might not be the case if you try to decode beyond the minimal distance).",
    "created_at": "2016-09-01T11:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289180",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:11" align="right">comment:11</div>

You should also check if the resulting word is in the code (it might not be the case if you try to decode beyond the minimal distance).



---

archive/issue_comments_289181.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nIn case you want to optimize this a bit, you can replace the `itertools` enumerations with `sage.combinat.gray_codes` stuff (and if the field is `GF(2)` get rid of the `itertools.product`).\n\nThis is probably better kept for another ticket.",
    "created_at": "2016-09-02T14:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289181",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:12" align="right">comment:12</div>

In case you want to optimize this a bit, you can replace the `itertools` enumerations with `sage.combinat.gray_codes` stuff (and if the field is `GF(2)` get rid of the `itertools.product`).

This is probably better kept for another ticket.



---

archive/issue_comments_289182.json:
```json
{
    "body": "Changed branch from **[u/dlucas/information_set_decoding](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/information_set_decoding)** to **[u/jsrn/information_set_decoding](https://github.com/sagemath/sagetrac-mirror/tree/u/jsrn/information_set_decoding)**",
    "created_at": "2017-06-09T13:48:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289182",
    "user": "https://github.com/johanrosenkilde"
}
```

Changed branch from **[u/dlucas/information_set_decoding](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/information_set_decoding)** to **[u/jsrn/information_set_decoding](https://github.com/sagemath/sagetrac-mirror/tree/u/jsrn/information_set_decoding)**



---

archive/issue_comments_289183.json:
```json
{
    "body": "Changed author from **David Lucas** to **David Lucas, Johan Rosenkilde**",
    "created_at": "2017-06-09T13:59:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289183",
    "user": "https://github.com/johanrosenkilde"
}
```

Changed author from **David Lucas** to **David Lucas, Johan Rosenkilde**



---

archive/issue_comments_289184.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI've picked up this patch again: I've rebased it and polished it off but so far haven't changed the algorithm. This is not up for review yet!\n\nThanks, Yann, for your excellent suggestions which is the next thing I'll look into. I'm sorry you didn't get any response for so long.\n\nI've changed the following things so far:\n\n- Improved some of the documentation\n- Change the doc-tests to use a specific code (Golay) instead of random ones.\n- Changed the calling convention so `window_size` is optional (I have yet to\n  compute a sensible default value, though).\n- Improved the error message from `AbstractLinearCode.encode/decode` when not\n  satisfying the decoder's constructor. This came up since the information set\n  decoder still has 1 mandatory argument.\n- Fixed the new decoder's types (according to the now better documented types\n  #20001) and add some appropriate new ones.\n- Fixed various errors in `sage/coding` that came up: some bad printing in Golay\n  codes, removed old deprecated method `LinearCode.decode`.\n\nMy next step is to look at Yann's suggestion for improving the algorithm and it's efficiency.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b41dd58de8b14c93fae96daca337c6d1a0c9269\"><code>3b41dd5</code></a></td><td><code>Rebase on 8.0.beta8. Roll back mods outside linear_code.py and thematic tutorial</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f8bdb3dc5e0d125a20db11a058112b23ae51762\"><code>0f8bdb3</code></a></td><td><code>Went over documentation and simplified calling convention</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57cf6b6c4e0840bbeb1cd76b078731c652bd2c1c\"><code>57cf6b6</code></a></td><td><code>Fixed Golay code Finite Field printing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf556abef44991914f10ea855e3f9f90449fc86c\"><code>cf556ab</code></a></td><td><code>Fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d021e1beadcb8dd0fa63a7a5c75c810c0b1ffac3\"><code>d021e1b</code></a></td><td><code>Remove `AbstractLinearCode.decode` which has been deprecated 18 months</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43c229c7adc1bd569bee4c1974509688b1a0dbf8\"><code>43c229c</code></a></td><td><code>Helpful error messages for encoder/decoder construction with args</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25b2b9329104db756a02ae5ab52685e4ac853048\"><code>25b2b93</code></a></td><td><code>decoder types: for new decoder, remove \"unique\", and fix some descriptions</code></td></tr></table>\n",
    "created_at": "2017-06-09T13:59:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289184",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:14" align="right">comment:14</div>

I've picked up this patch again: I've rebased it and polished it off but so far haven't changed the algorithm. This is not up for review yet!

Thanks, Yann, for your excellent suggestions which is the next thing I'll look into. I'm sorry you didn't get any response for so long.

I've changed the following things so far:

- Improved some of the documentation
- Change the doc-tests to use a specific code (Golay) instead of random ones.
- Changed the calling convention so `window_size` is optional (I have yet to
  compute a sensible default value, though).
- Improved the error message from `AbstractLinearCode.encode/decode` when not
  satisfying the decoder's constructor. This came up since the information set
  decoder still has 1 mandatory argument.
- Fixed the new decoder's types (according to the now better documented types
  #20001) and add some appropriate new ones.
- Fixed various errors in `sage/coding` that came up: some bad printing in Golay
  codes, removed old deprecated method `LinearCode.decode`.

My next step is to look at Yann's suggestion for improving the algorithm and it's efficiency.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b41dd58de8b14c93fae96daca337c6d1a0c9269"><code>3b41dd5</code></a></td><td><code>Rebase on 8.0.beta8. Roll back mods outside linear_code.py and thematic tutorial</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f8bdb3dc5e0d125a20db11a058112b23ae51762"><code>0f8bdb3</code></a></td><td><code>Went over documentation and simplified calling convention</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57cf6b6c4e0840bbeb1cd76b078731c652bd2c1c"><code>57cf6b6</code></a></td><td><code>Fixed Golay code Finite Field printing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf556abef44991914f10ea855e3f9f90449fc86c"><code>cf556ab</code></a></td><td><code>Fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d021e1beadcb8dd0fa63a7a5c75c810c0b1ffac3"><code>d021e1b</code></a></td><td><code>Remove `AbstractLinearCode.decode` which has been deprecated 18 months</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43c229c7adc1bd569bee4c1974509688b1a0dbf8"><code>43c229c</code></a></td><td><code>Helpful error messages for encoder/decoder construction with args</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25b2b9329104db756a02ae5ab52685e4ac853048"><code>25b2b93</code></a></td><td><code>decoder types: for new decoder, remove "unique", and fix some descriptions</code></td></tr></table>




---

archive/issue_comments_289185.json:
```json
{
    "body": "Changed commit from **[`93066b1`](https://github.com/sagemath/sagetrac-mirror/commit/93066b139f579636a913f934e51046e7753cba8a)** to **[`25b2b93`](https://github.com/sagemath/sagetrac-mirror/commit/25b2b9329104db756a02ae5ab52685e4ac853048)**",
    "created_at": "2017-06-09T13:59:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289185",
    "user": "https://github.com/johanrosenkilde"
}
```

Changed commit from **[`93066b1`](https://github.com/sagemath/sagetrac-mirror/commit/93066b139f579636a913f934e51046e7753cba8a)** to **[`25b2b93`](https://github.com/sagemath/sagetrac-mirror/commit/25b2b9329104db756a02ae5ab52685e4ac853048)**



---

archive/issue_comments_289186.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nNo problem for the delay, I'm far from following this closely :)\n\nA side remark though: `_registered_decoders` is a `dict` and `decoders_available` returns its keys, so the ordering is not reliable for doctests. I would advocate always returning a sorted list as it's not a time critical method.",
    "created_at": "2017-06-09T14:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289186",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:15" align="right">comment:15</div>

No problem for the delay, I'm far from following this closely :)

A side remark though: `_registered_decoders` is a `dict` and `decoders_available` returns its keys, so the ordering is not reliable for doctests. I would advocate always returning a sorted list as it's not a time critical method.



---

archive/issue_comments_289187.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@sagetrac-ylchapuy](#comment:15):\n> No problem for the delay, I'm far from following this closely :)\n> \n> A side remark though: `_registered_decoders` is a `dict` and `decoders_available` returns its keys, so the ordering is not reliable for doctests. I would advocate always returning a sorted list as it's not a time critical method.\n\nGood point - I'll fix this while we're at it.",
    "created_at": "2017-06-09T17:43:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289187",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@sagetrac-ylchapuy](#comment:15):
> No problem for the delay, I'm far from following this closely :)
> 
> A side remark though: `_registered_decoders` is a `dict` and `decoders_available` returns its keys, so the ordering is not reliable for doctests. I would advocate always returning a sorted list as it's not a time critical method.

Good point - I'll fix this while we're at it.



---

archive/issue_comments_289188.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7551c478b8d37882dd2a12e93dc2bc55d5ff89c5\"><code>7551c47</code></a></td><td><code>Sort all doc-tests for decoders/encoders_available</code></td></tr></table>\n",
    "created_at": "2017-06-09T18:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289188",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7551c478b8d37882dd2a12e93dc2bc55d5ff89c5"><code>7551c47</code></a></td><td><code>Sort all doc-tests for decoders/encoders_available</code></td></tr></table>




---

archive/issue_comments_289189.json:
```json
{
    "body": "Changed commit from **[`25b2b93`](https://github.com/sagemath/sagetrac-mirror/commit/25b2b9329104db756a02ae5ab52685e4ac853048)** to **[`7551c47`](https://github.com/sagemath/sagetrac-mirror/commit/7551c478b8d37882dd2a12e93dc2bc55d5ff89c5)**",
    "created_at": "2017-06-09T18:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289189",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`25b2b93`](https://github.com/sagemath/sagetrac-mirror/commit/25b2b9329104db756a02ae5ab52685e4ac853048)** to **[`7551c47`](https://github.com/sagemath/sagetrac-mirror/commit/7551c478b8d37882dd2a12e93dc2bc55d5ff89c5)**



---

archive/issue_comments_289190.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHi Johan,\n\nI had a quick look at this ticket. For the moment, I didn't review the algorithm but I have a few remarks on the rest of the code.\n\nWhile running doctests, I obtained 3 errors:\n\n* in golay_code.py, line 169, a bracket misses in the doctest\n\n* in decoder.py, lines 105 and 113. That's because the type `unique` has been removed from the decoders' types of `LinearCodeSyndromeDecoder` and `LinearCodeNearestNeighborDecoder` (see in linear_code.py) but not from the doctest.\n\nIn fact, you seem to have removed the type `unique` from every `decoder_type`; is this because you consider that a decoder is a unique decoder as long as it isn't claimed not to be like that?\n\nBesides, I have a more stuctural remak. Starting from Prange algorithm, there are many variants of the information set decoding algorithm (Lee-Brickell, birthday decoding, Stern-Dumer, MMT, BJMM), the last ones being quite recent. The name `InformationSetDecoder` implicitly assumes we're planning to implement only one of them (Lee-Brickell). The question is: if someone wants to implement another variant, what should he do? I think there are two solutions:\n\n1. the class `InformationSetDecoder` will contain all the implemented variants of Prange algorithm (that is, for the moment only Lee-Brickell). If another algorithm apears in Sage, then it will be callable through an optional argument of the constructor, e.g. `__init__(algo=\"LeeBrickell\", **kwargs)`.\n\n2. We define a class per algorithm, and `InformationSetDecoder` is a pointer to `LeeBrickellISD`.\n\nIn my humble opinion the second one is better (it is what we did for the various decoders of GRS codes), but I do not have time to rework the code during the following weeks.\n\nJulien",
    "created_at": "2017-06-12T11:56:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289190",
    "user": "https://github.com/jlavauzelle"
}
```

<div id="comment:18" align="right">comment:18</div>

Hi Johan,

I had a quick look at this ticket. For the moment, I didn't review the algorithm but I have a few remarks on the rest of the code.

While running doctests, I obtained 3 errors:

* in golay_code.py, line 169, a bracket misses in the doctest

* in decoder.py, lines 105 and 113. That's because the type `unique` has been removed from the decoders' types of `LinearCodeSyndromeDecoder` and `LinearCodeNearestNeighborDecoder` (see in linear_code.py) but not from the doctest.

In fact, you seem to have removed the type `unique` from every `decoder_type`; is this because you consider that a decoder is a unique decoder as long as it isn't claimed not to be like that?

Besides, I have a more stuctural remak. Starting from Prange algorithm, there are many variants of the information set decoding algorithm (Lee-Brickell, birthday decoding, Stern-Dumer, MMT, BJMM), the last ones being quite recent. The name `InformationSetDecoder` implicitly assumes we're planning to implement only one of them (Lee-Brickell). The question is: if someone wants to implement another variant, what should he do? I think there are two solutions:

1. the class `InformationSetDecoder` will contain all the implemented variants of Prange algorithm (that is, for the moment only Lee-Brickell). If another algorithm apears in Sage, then it will be callable through an optional argument of the constructor, e.g. `__init__(algo="LeeBrickell", **kwargs)`.

2. We define a class per algorithm, and `InformationSetDecoder` is a pointer to `LeeBrickellISD`.

In my humble opinion the second one is better (it is what we did for the various decoders of GRS codes), but I do not have time to rework the code during the following weeks.

Julien



---

archive/issue_comments_289191.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@johanrosenkilde](#comment:14):\n> - Change the doc-tests to use a specific code (Golay) instead of random ones.\n\nIt would be good to continue to test also non-binary codes (because we can!)\n\n> - Fixed various errors in `sage/coding` that came up: some bad printing in Golay\n>   codes, removed old deprecated method `LinearCode.decode`.\n\n \nI understand it's easier, but isn't it best practice to have self contained tickets?",
    "created_at": "2017-06-12T14:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289191",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@johanrosenkilde](#comment:14):
> - Change the doc-tests to use a specific code (Golay) instead of random ones.

It would be good to continue to test also non-binary codes (because we can!)

> - Fixed various errors in `sage/coding` that came up: some bad printing in Golay
>   codes, removed old deprecated method `LinearCode.decode`.

 
I understand it's easier, but isn't it best practice to have self contained tickets?



---

archive/issue_comments_289192.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nHi Julien,\n\nThanks for the feedback.\n\nReplying to [@jlavauzelle](#comment:18):\n> While running doctests, I obtained 3 errors:\n\nThanks, stupid mistakes. I'll fix it presently.\n\n> In fact, you seem to have removed the type `unique` from every `decoder_type`; is this because you consider that a decoder is a unique decoder as long as it isn't claimed not to be like that?\n\nYes. This finally became clear in #20001 when the types were documented better, though it was forgotten in #20001 to actually go over all decoders again and fix their types.\n\n> Besides, I have a more stuctural remak. \n\nThat's a good point. I would leave it to posterity to decide this. My own opinion is that a single class with an `algorithm` flag is sufficient, since all the decoders have exactly the same overall behaviour (same types) and only differ in speed, in some sense. Several of the decoders for GRS codes are of very different type.\n\nIf someone comes along and implements, say Stern-Dumer, the choice can easily be made at that point.\n\n\n\nReplying to ylchapuy:\n> \n>         Change the doc-tests to use a specific code (Golay) instead of random ones. \n> \n> It would be good to continue to test also non-binary codes (because we can!)\n\nGood point!\n\n>         Fixed various errors in sage/coding that came up: some bad printing in Golay codes, removed old deprecated method LinearCode.decode. \n> \n> I understand it's easier, but isn't it best practice to have self contained tickets?\n\nYes it's best practice. My experience with the trac ticket-and-review system, however, is that if best practice is followed completely, then trivial mistakes will never get fixed. I'm tired of coming across small mistakes here and there while editing codes and not being able to fix them, and then deal with ticket dependencies etc. My impression is that many of the very active developers on [SageMath](../wiki/SageMath) do the same.\n\nRemoving the deprecated function is perhaps debatable, though.",
    "created_at": "2017-06-13T08:04:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289192",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:20" align="right">comment:20</div>

Hi Julien,

Thanks for the feedback.

Replying to [@jlavauzelle](#comment:18):
> While running doctests, I obtained 3 errors:

Thanks, stupid mistakes. I'll fix it presently.

> In fact, you seem to have removed the type `unique` from every `decoder_type`; is this because you consider that a decoder is a unique decoder as long as it isn't claimed not to be like that?

Yes. This finally became clear in #20001 when the types were documented better, though it was forgotten in #20001 to actually go over all decoders again and fix their types.

> Besides, I have a more stuctural remak. 

That's a good point. I would leave it to posterity to decide this. My own opinion is that a single class with an `algorithm` flag is sufficient, since all the decoders have exactly the same overall behaviour (same types) and only differ in speed, in some sense. Several of the decoders for GRS codes are of very different type.

If someone comes along and implements, say Stern-Dumer, the choice can easily be made at that point.



Replying to ylchapuy:
> 
>         Change the doc-tests to use a specific code (Golay) instead of random ones. 
> 
> It would be good to continue to test also non-binary codes (because we can!)

Good point!

>         Fixed various errors in sage/coding that came up: some bad printing in Golay codes, removed old deprecated method LinearCode.decode. 
> 
> I understand it's easier, but isn't it best practice to have self contained tickets?

Yes it's best practice. My experience with the trac ticket-and-review system, however, is that if best practice is followed completely, then trivial mistakes will never get fixed. I'm tired of coming across small mistakes here and there while editing codes and not being able to fix them, and then deal with ticket dependencies etc. My impression is that many of the very active developers on [SageMath](../wiki/SageMath) do the same.

Removing the deprecated function is perhaps debatable, though.



---

archive/issue_comments_289193.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nRegarding the algorithm, it *really* should be corrected.\nTry e.g.:\n\n```sage\nsage: C = codes.random_linear_code(GF(3), 24, 10)\nsage: c = C.random_element()\nsage: Chan = channels.StaticErrorRateChannel(C.ambient_space(), 4)\nsage: y = Chan(c)\nsage: %time LeeBrickell(y, C, 4, 2) == c\nCPU times: user 16 ms, sys: 4 ms, total: 20 ms\nWall time: 20.5 ms\nTrue\nsage: D = C.decoder(\"InformationSet\", 4)\nsage: %time D.decode_to_code(y)\n<... still waiting ... >\n```",
    "created_at": "2017-06-13T08:16:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289193",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:21" align="right">comment:21</div>

Regarding the algorithm, it *really* should be corrected.
Try e.g.:

```sage
sage: C = codes.random_linear_code(GF(3), 24, 10)
sage: c = C.random_element()
sage: Chan = channels.StaticErrorRateChannel(C.ambient_space(), 4)
sage: y = Chan(c)
sage: %time LeeBrickell(y, C, 4, 2) == c
CPU times: user 16 ms, sys: 4 ms, total: 20 ms
Wall time: 20.5 ms
True
sage: D = C.decoder("InformationSet", 4)
sage: %time D.decode_to_code(y)
<... still waiting ... >
```



---

archive/issue_comments_289194.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bb67859e2e0e444138c1996c1666ef9f3fdc841\"><code>0bb6785</code></a></td><td><code>Fix doc-test failures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46b0907b4a8a196dcc1dc8d0cdbe7a26b51bac37\"><code>46b0907</code></a></td><td><code>Doc-test for non-binary information set decoding (currently fails)</code></td></tr></table>\n",
    "created_at": "2017-06-13T08:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289194",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bb67859e2e0e444138c1996c1666ef9f3fdc841"><code>0bb6785</code></a></td><td><code>Fix doc-test failures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46b0907b4a8a196dcc1dc8d0cdbe7a26b51bac37"><code>46b0907</code></a></td><td><code>Doc-test for non-binary information set decoding (currently fails)</code></td></tr></table>




---

archive/issue_comments_289195.json:
```json
{
    "body": "Changed commit from **[`7551c47`](https://github.com/sagemath/sagetrac-mirror/commit/7551c478b8d37882dd2a12e93dc2bc55d5ff89c5)** to **[`46b0907`](https://github.com/sagemath/sagetrac-mirror/commit/46b0907b4a8a196dcc1dc8d0cdbe7a26b51bac37)**",
    "created_at": "2017-06-13T08:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289195",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7551c47`](https://github.com/sagemath/sagetrac-mirror/commit/7551c478b8d37882dd2a12e93dc2bc55d5ff89c5)** to **[`46b0907`](https://github.com/sagemath/sagetrac-mirror/commit/46b0907b4a8a196dcc1dc8d0cdbe7a26b51bac37)**



---

archive/issue_comments_289196.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nYep, the algorithm is broken which I've now seen trying it on a `GF(3)` Golay code. I've pushed the example, but this is obviously still needs work.\n\nAs I mentioned earlier, going over the algorithm was next order of business anyway.",
    "created_at": "2017-06-13T08:20:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289196",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:23" align="right">comment:23</div>

Yep, the algorithm is broken which I've now seen trying it on a `GF(3)` Golay code. I've pushed the example, but this is obviously still needs work.

As I mentioned earlier, going over the algorithm was next order of business anyway.



---

archive/issue_comments_289197.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a81785a709f1303b381535abd2208e73f2e97118\"><code>a81785a</code></a></td><td><code>Use ylchapuy's implementation of Lee-Brickell</code></td></tr></table>\n",
    "created_at": "2017-06-13T08:35:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289197",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a81785a709f1303b381535abd2208e73f2e97118"><code>a81785a</code></a></td><td><code>Use ylchapuy's implementation of Lee-Brickell</code></td></tr></table>




---

archive/issue_comments_289198.json:
```json
{
    "body": "Changed commit from **[`46b0907`](https://github.com/sagemath/sagetrac-mirror/commit/46b0907b4a8a196dcc1dc8d0cdbe7a26b51bac37)** to **[`a81785a`](https://github.com/sagemath/sagetrac-mirror/commit/a81785a709f1303b381535abd2208e73f2e97118)**",
    "created_at": "2017-06-13T08:35:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289198",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`46b0907`](https://github.com/sagemath/sagetrac-mirror/commit/46b0907b4a8a196dcc1dc8d0cdbe7a26b51bac37)** to **[`a81785a`](https://github.com/sagemath/sagetrac-mirror/commit/a81785a709f1303b381535abd2208e73f2e97118)**



---

archive/issue_comments_289199.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI've replaced the algorithm with Yann's implementation from Comment 10, with only trivial modifications. This one works on the `GF(3)` doctest. I still want to do more testing and timing, so this is not up for review yet.",
    "created_at": "2017-06-13T08:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289199",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:25" align="right">comment:25</div>

I've replaced the algorithm with Yann's implementation from Comment 10, with only trivial modifications. This one works on the `GF(3)` doctest. I still want to do more testing and timing, so this is not up for review yet.



---

archive/issue_comments_289200.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nNote that I opened #23244 because I plan to implement Stern-Dumer.",
    "created_at": "2017-06-15T09:52:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289200",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:26" align="right">comment:26</div>

Note that I opened #23244 because I plan to implement Stern-Dumer.



---

archive/issue_comments_289201.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThat's awesome!\n\nI'm currently working on calibrating the window parameter - I find this an integral part of the Lee--Brickell algorithm because it has a huge effect on the average running time (and a user would have no idea how to set it). Unfortunately, it's a bit hit and miss when I have time to work on this, but I'll try to get it wrapped up.",
    "created_at": "2017-06-15T12:44:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289201",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:27" align="right">comment:27</div>

That's awesome!

I'm currently working on calibrating the window parameter - I find this an integral part of the Lee--Brickell algorithm because it has a huge effect on the average running time (and a user would have no idea how to set it). Unfortunately, it's a bit hit and miss when I have time to work on this, but I'll try to get it wrapped up.



---

archive/issue_comments_289202.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@johanrosenkilde](#comment:27):\n> That's awesome!\n> \n> I'm currently working on calibrating the window parameter - I find this an integral part of the Lee--Brickell algorithm because it has a huge effect on the average running time (and a user would have no idea how to set it). Unfortunately, it's a bit hit and miss when I have time to work on this, but I'll try to get it wrapped up.\n\nFirst, I don't understand why you changed `p` to `win`. There is no notion of window here to me. Every paper I saw call this parameter `p` and I think it would be better to stick to it, as `w` is used for the weight of the expected error.\n\nI'll use the notation `n`,`k` for the length and dimension, `w` for the weight of the error and `p` for the parameter of the algorithm.\n\nRegarding the choice of this `p` parameter, first the analysis is usually made for constant error weight correction (when `tau` is a singleton) because it's easier. I'll do that too. Moreover analysis is usually done with a fixed `p` (I mean no loop as in you line 5303), see e.g. \nhttp://fms2.cerimes.fr/vod/media/canalu/documents/fuscia/3.5.lee.and.brickell.algorithm_32885/c015im.w3.s5.v3.pdf for the binary case. But I think it's worth doing the loop.\n\nThe expected cost `C` is `C_I / P_I` where `C_I` is the cost of one iteration (from line 5289) and `P_I` the probability of success of this iteration (the iterations are independant because we choose `I` at random, so `P_I` is a constant).\n`\n`C_I` is `G + x * V` with `G` the cost of step 1 and 2 (mostly a Gaussian elimination), `x` the number of error vector `e` we compute and `V` the cost to compute each of them (this depends on the associated `p` in the current implementation but could be made constant if we later use e.g. gray codes to compute the sum).\n\nEach vector `e` we compute increases `P_I` by a small amount `E` which depends on the current `p`, (the bigger the `p`, the smaller the gain).\n\nOverall the cost function is piecewise defined:\n\n`C(x) = (G + x*V) / (P(p) + x*E(p))` with `P(p)` the success probability if we stop before `p` [i.e `P(p) = sum_{i=0}^{p-1} E(i) * binomial(k,i)*(q-1)**i`]\n\nThe sign of the derivative depends only on `G*E(p) - V*P(p)`.\n`G` and `V` are implementation dependant but you can estimate them, `E` and `P` can be computed.\n\nYou could do this computation when you construct the decoder to choose `p` (it will be fast because `p` will never get bigger than 3 I think).\n\nI did my best but I'm not certain my explanations are crystal clear! Does this makes sense to you?",
    "created_at": "2017-06-16T09:47:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289202",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@johanrosenkilde](#comment:27):
> That's awesome!
> 
> I'm currently working on calibrating the window parameter - I find this an integral part of the Lee--Brickell algorithm because it has a huge effect on the average running time (and a user would have no idea how to set it). Unfortunately, it's a bit hit and miss when I have time to work on this, but I'll try to get it wrapped up.

First, I don't understand why you changed `p` to `win`. There is no notion of window here to me. Every paper I saw call this parameter `p` and I think it would be better to stick to it, as `w` is used for the weight of the expected error.

I'll use the notation `n`,`k` for the length and dimension, `w` for the weight of the error and `p` for the parameter of the algorithm.

Regarding the choice of this `p` parameter, first the analysis is usually made for constant error weight correction (when `tau` is a singleton) because it's easier. I'll do that too. Moreover analysis is usually done with a fixed `p` (I mean no loop as in you line 5303), see e.g. 
http://fms2.cerimes.fr/vod/media/canalu/documents/fuscia/3.5.lee.and.brickell.algorithm_32885/c015im.w3.s5.v3.pdf for the binary case. But I think it's worth doing the loop.

The expected cost `C` is `C_I / P_I` where `C_I` is the cost of one iteration (from line 5289) and `P_I` the probability of success of this iteration (the iterations are independant because we choose `I` at random, so `P_I` is a constant).
`
`C_I` is `G + x * V` with `G` the cost of step 1 and 2 (mostly a Gaussian elimination), `x` the number of error vector `e` we compute and `V` the cost to compute each of them (this depends on the associated `p` in the current implementation but could be made constant if we later use e.g. gray codes to compute the sum).

Each vector `e` we compute increases `P_I` by a small amount `E` which depends on the current `p`, (the bigger the `p`, the smaller the gain).

Overall the cost function is piecewise defined:

`C(x) = (G + x*V) / (P(p) + x*E(p))` with `P(p)` the success probability if we stop before `p` [i.e `P(p) = sum_{i=0}^{p-1} E(i) * binomial(k,i)*(q-1)**i`]

The sign of the derivative depends only on `G*E(p) - V*P(p)`.
`G` and `V` are implementation dependant but you can estimate them, `E` and `P` can be computed.

You could do this computation when you construct the decoder to choose `p` (it will be fast because `p` will never get bigger than 3 I think).

I did my best but I'm not certain my explanations are crystal clear! Does this makes sense to you?



---

archive/issue_comments_289203.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@sagetrac-ylchapuy](#comment:28):\n> First, I don't understand why you changed `p` to `win`. There is no notion of window here to me. Every paper I saw call this parameter `p` and I think it would be better to stick to it, as `w` is used for the weight of the expected error.\n\nI think that a name is more evocative than a letter, in spite of tradition in mathematics text. \"Window\" was the word David used in the original implementation, and I couldn't come up with a substantially better word. It also has a nice, clear 3-letter abbreviation. Using `w` for error weight is not more traditional than e.g. `e`, `t` or `tau` in the greater decoding literature. I changed it since it visually collides with `win`, so I used `tau` in my implementation. I believe it crops up elsewhere in `sage/coding` since I commonly use this this.\n\n> I'll use the notation `n`,`k` for the length and dimension, `w` for the weight of the error and `p` for the parameter of the algorithm. ...\n\nThanks. I already implemented all of this a few days ago, exactly using the equations you write. Where I left it then was at the estimates of `E` and `P` which have to be devilishly precise: I've got `E` down well, but the code simplification I did when estimating `P` turned out to be too coarse (I believed it depended mostly only on the cost of scaling and summing vectors, but apparently the `hamming_weight` and loop structures add something). Testing this takes time because I need to run the decoder many times on a non-trivial code to be sure things work. I'll post my test code here as well, which might be useful for ou in #23244.\n\nI'll look at it again now and push what I have in any case.",
    "created_at": "2017-06-16T11:48:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289203",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@sagetrac-ylchapuy](#comment:28):
> First, I don't understand why you changed `p` to `win`. There is no notion of window here to me. Every paper I saw call this parameter `p` and I think it would be better to stick to it, as `w` is used for the weight of the expected error.

I think that a name is more evocative than a letter, in spite of tradition in mathematics text. "Window" was the word David used in the original implementation, and I couldn't come up with a substantially better word. It also has a nice, clear 3-letter abbreviation. Using `w` for error weight is not more traditional than e.g. `e`, `t` or `tau` in the greater decoding literature. I changed it since it visually collides with `win`, so I used `tau` in my implementation. I believe it crops up elsewhere in `sage/coding` since I commonly use this this.

> I'll use the notation `n`,`k` for the length and dimension, `w` for the weight of the error and `p` for the parameter of the algorithm. ...

Thanks. I already implemented all of this a few days ago, exactly using the equations you write. Where I left it then was at the estimates of `E` and `P` which have to be devilishly precise: I've got `E` down well, but the code simplification I did when estimating `P` turned out to be too coarse (I believed it depended mostly only on the cost of scaling and summing vectors, but apparently the `hamming_weight` and loop structures add something). Testing this takes time because I need to run the decoder many times on a non-trivial code to be sure things work. I'll post my test code here as well, which might be useful for ou in #23244.

I'll look at it again now and push what I have in any case.



---

archive/issue_comments_289204.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@johanrosenkilde](#comment:29):\n> Replying to [@sagetrac-ylchapuy](#comment:28):\n> > First, I don't understand why you changed `p` to `win`. There is no notion of window here to me. Every paper I saw call this parameter `p` and I think it would be better to stick to it, as `w` is used for the weight of the expected error.\n\n> \n> I think that a name is more evocative than a letter, in spite of tradition in mathematics text.\n\nas a parameter yes\n\n> \"Window\" was the word David used in the original implementation, and I couldn't come up with a substantially better word.\n\nCan you explain me what window this would be? I really don't get it.\n\nI propose `partial_weight`, this is the number of error positions we expect in our information set (and is abbreviated as `p`).\n\n> It also has a nice, clear 3-letter abbreviation. Using `w` for error weight is not more traditional than e.g. `e`, `t` or `tau` in the greater decoding literature. I changed it since it visually collides with `win`, so I used `tau` in my implementation. I believe it crops up elsewhere in `sage/coding` since I commonly use this this.\n\nYou cite a paper in the doctest. I always find it nicer to use the same notations in the implementation as in the paper, it makes life easier for anyone trying to understand what your code does.\n\nBut in the end I guess it's your call, I won't fight about this.",
    "created_at": "2017-06-16T12:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289204",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@johanrosenkilde](#comment:29):
> Replying to [@sagetrac-ylchapuy](#comment:28):
> > First, I don't understand why you changed `p` to `win`. There is no notion of window here to me. Every paper I saw call this parameter `p` and I think it would be better to stick to it, as `w` is used for the weight of the expected error.

> 
> I think that a name is more evocative than a letter, in spite of tradition in mathematics text.

as a parameter yes

> "Window" was the word David used in the original implementation, and I couldn't come up with a substantially better word.

Can you explain me what window this would be? I really don't get it.

I propose `partial_weight`, this is the number of error positions we expect in our information set (and is abbreviated as `p`).

> It also has a nice, clear 3-letter abbreviation. Using `w` for error weight is not more traditional than e.g. `e`, `t` or `tau` in the greater decoding literature. I changed it since it visually collides with `win`, so I used `tau` in my implementation. I believe it crops up elsewhere in `sage/coding` since I commonly use this this.

You cite a paper in the doctest. I always find it nicer to use the same notations in the implementation as in the paper, it makes life easier for anyone trying to understand what your code does.

But in the end I guess it's your call, I won't fight about this.



---

archive/issue_comments_289205.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@johanrosenkilde](#comment:29):\n> Replying to [@sagetrac-ylchapuy](#comment:28):\n\n> > I'll use the notation `n`,`k` for the length and dimension, `w` for the weight of the error and `p` for the parameter of the algorithm. ...\n\n> \n> Thanks. I already implemented all of this a few days ago, exactly using the equations you write. Where I left it then was at the estimates of `E` and `P` which have to be devilishly precise: I've got `E` down well, but the code simplification I did when estimating `P` turned out to be too coarse (I believed it depended mostly only on the cost of scaling and summing vectors, but apparently the `hamming_weight` and loop structures add something).\n\n`E(p)` should be `binomial(n-k, w-p) / (binomial(n,w) * (q-1)**p)` and I wrote the formula for `P(p)`.\n\nI guess you mean estimating `G` and `V`. They don't need to be that precise. If they're a bit wrong, the final cost estimate will only be a bit wrong, nothing catastrophic should happen.\n\n> Testing this takes time because I need to run the decoder many times on a non-trivial code to be sure things work. I'll post my test code here as well, which might be useful for ou in #23244.\n\nI don't want to push you, I only like to write down my thoughts, you may ignore them. I know this takes time and we all have other things to do!",
    "created_at": "2017-06-16T12:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289205",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@johanrosenkilde](#comment:29):
> Replying to [@sagetrac-ylchapuy](#comment:28):

> > I'll use the notation `n`,`k` for the length and dimension, `w` for the weight of the error and `p` for the parameter of the algorithm. ...

> 
> Thanks. I already implemented all of this a few days ago, exactly using the equations you write. Where I left it then was at the estimates of `E` and `P` which have to be devilishly precise: I've got `E` down well, but the code simplification I did when estimating `P` turned out to be too coarse (I believed it depended mostly only on the cost of scaling and summing vectors, but apparently the `hamming_weight` and loop structures add something).

`E(p)` should be `binomial(n-k, w-p) / (binomial(n,w) * (q-1)**p)` and I wrote the formula for `P(p)`.

I guess you mean estimating `G` and `V`. They don't need to be that precise. If they're a bit wrong, the final cost estimate will only be a bit wrong, nothing catastrophic should happen.

> Testing this takes time because I need to run the decoder many times on a non-trivial code to be sure things work. I'll post my test code here as well, which might be useful for ou in #23244.

I don't want to push you, I only like to write down my thoughts, you may ignore them. I know this takes time and we all have other things to do!



---

archive/issue_comments_289206.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@sagetrac-ylchapuy](#comment:30):\n> I propose `partial_weight`, this is the number of error positions we expect in our information set (and is abbreviated as `p`).\n> \n> You cite a paper in the doctest. I always find it nicer to use the same notations in the implementation as in the paper, it makes life easier for anyone trying to understand what your code does.\n\nThat's a valid reason. The cited paper is not the original contribution and the notation looked ad hoc to me, so I didn't heed it in this instance. But I'm not well-versed in ISD literature, and if you say the parameter is often `p` that's a stronger argument. Did you come up with the `partial_weight` or did you see that somewhere? It sounds bland to me, but it does share the `p`.",
    "created_at": "2017-06-16T12:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289206",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@sagetrac-ylchapuy](#comment:30):
> I propose `partial_weight`, this is the number of error positions we expect in our information set (and is abbreviated as `p`).
> 
> You cite a paper in the doctest. I always find it nicer to use the same notations in the implementation as in the paper, it makes life easier for anyone trying to understand what your code does.

That's a valid reason. The cited paper is not the original contribution and the notation looked ad hoc to me, so I didn't heed it in this instance. But I'm not well-versed in ISD literature, and if you say the parameter is often `p` that's a stronger argument. Did you come up with the `partial_weight` or did you see that somewhere? It sounds bland to me, but it does share the `p`.



---

archive/issue_comments_289207.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@johanrosenkilde](#comment:32):\n> Replying to [@sagetrac-ylchapuy](#comment:30):\n> > I propose `partial_weight`, this is the number of error positions we expect in our information set (and is abbreviated as `p`).\n> > \n> > You cite a paper in the doctest. I always find it nicer to use the same notations in the implementation as in the paper, it makes life easier for anyone trying to understand what your code does.\n\n> \n> That's a valid reason. The cited paper is not the original contribution and the notation looked ad hoc to me, so I didn't heed it in this instance. But I'm not well-versed in ISD literature, and if you say the parameter is often `p` that's a stronger argument.\n\nIt's not used in the original publication (there it's `j`) but it's used at least since Stern's paper in 1989, in all the papers proposing improvements (and so is `w` for the expected weight of the error).\n\n\n> Did you come up with the `partial_weight` or did you see that somewhere? It sounds bland to me, but it does share the `p`.\n\nI just came up with this, but I agree it's not particularly good. I don't know any wordy definition of this parameter.",
    "created_at": "2017-06-16T12:55:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289207",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@johanrosenkilde](#comment:32):
> Replying to [@sagetrac-ylchapuy](#comment:30):
> > I propose `partial_weight`, this is the number of error positions we expect in our information set (and is abbreviated as `p`).
> > 
> > You cite a paper in the doctest. I always find it nicer to use the same notations in the implementation as in the paper, it makes life easier for anyone trying to understand what your code does.

> 
> That's a valid reason. The cited paper is not the original contribution and the notation looked ad hoc to me, so I didn't heed it in this instance. But I'm not well-versed in ISD literature, and if you say the parameter is often `p` that's a stronger argument.

It's not used in the original publication (there it's `j`) but it's used at least since Stern's paper in 1989, in all the papers proposing improvements (and so is `w` for the expected weight of the error).


> Did you come up with the `partial_weight` or did you see that somewhere? It sounds bland to me, but it does share the `p`.

I just came up with this, but I agree it's not particularly good. I don't know any wordy definition of this parameter.



---

archive/issue_comments_289208.json:
```json
{
    "body": "Changed commit from **[`a81785a`](https://github.com/sagemath/sagetrac-mirror/commit/a81785a709f1303b381535abd2208e73f2e97118)** to **[`476369c`](https://github.com/sagemath/sagetrac-mirror/commit/476369c26dde394949e074270181b4fa7a652bd8)**",
    "created_at": "2017-06-16T14:19:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289208",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a81785a`](https://github.com/sagemath/sagetrac-mirror/commit/a81785a709f1303b381535abd2208e73f2e97118)** to **[`476369c`](https://github.com/sagemath/sagetrac-mirror/commit/476369c26dde394949e074270181b4fa7a652bd8)**



---

archive/issue_comments_289209.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6f69b8058c0478262f5ee8e92f3bbc9b63d12e5\"><code>d6f69b8</code></a></td><td><code>Rename number_errors() method to decoding_interval() and decoding_radius() method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0749196636ecbdcb204eea229a5fceecfc1e4bc\"><code>a074919</code></a></td><td><code>Calibrate window parameter, take 1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ab7277da7588e3fa01ccb5b0f67ce33268d82af\"><code>7ab7277</code></a></td><td><code>Calibrate window parameter, take 2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/476369c26dde394949e074270181b4fa7a652bd8\"><code>476369c</code></a></td><td><code>Rename window to search_size, win -> p, w -> p or pi</code></td></tr></table>\n",
    "created_at": "2017-06-16T14:19:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289209",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6f69b8058c0478262f5ee8e92f3bbc9b63d12e5"><code>d6f69b8</code></a></td><td><code>Rename number_errors() method to decoding_interval() and decoding_radius() method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0749196636ecbdcb204eea229a5fceecfc1e4bc"><code>a074919</code></a></td><td><code>Calibrate window parameter, take 1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ab7277da7588e3fa01ccb5b0f67ce33268d82af"><code>7ab7277</code></a></td><td><code>Calibrate window parameter, take 2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/476369c26dde394949e074270181b4fa7a652bd8"><code>476369c</code></a></td><td><code>Rename window to search_size, win -> p, w -> p or pi</code></td></tr></table>




---

archive/issue_comments_289210.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI've pushed an attempt at writing the calibration of the search size parameter\n(which I call it now, abbreviated `p`). I monkey'd around for a very long while\nthinking it didn't work, but I must have confused myself terribly, because when\nI tried to clean everything up in order to write this report on my progress, it\nsuddenly doesn't seem too bad. I believe one gotcha that confounded me was the\ninclusion of a `rho` factor: the fraction of size-`k`-positions that are\ninformation sets.\n\nAnyway, here are some timings:\n\n```\n[24, 12, 8] Extended Golay code over GF(2)\n\t\tEstimated\t\tActual\n\tp=0\t0.00294093602195062\t0.00370841026306\n\tp=1\t0.000733640004873450\t0.00105549812317\n\tp=2\t0.000779351222057502\t0.000777833461761\n\tp=3\t0.00202210000281411\t0.00085108757019\n\n[12, 6, 6] Extended Golay code over GF(3)\n\t\tEstimated\t\tActual\n\tp=0\t0.00107591199443414\t0.00152409553528\n\tp=1\t0.000475508233346987\t0.000670518875122\n\tp=2\t0.000837919998575671\t0.000634233951569\n\n[255, 231] BCH Code over GF(2) with designed distance 7\n\t\tEstimated\t\tActual\n\tp=0\t8.27393653065493\t10.0903596711\n\tp=1\t0.303782262811033\t0.38420484066\n\tp=2\t0.613038331151469\t0.627587425709\n\tp=3\t13.5825719377659\t6.28117632627\n\n[255, 139] BCH Code over GF(2) with designed distance 31\n\t\tEstimated\t\tActual\n\n[255, 47] BCH Code over GF(2) with designed distance 81\n\t\tEstimated\t\tActual\n\tp=0\t7.08824734720053\t6.80084561825\n\tp=1\t0.730343868369564\t0.871155004501\n\tp=2\t0.776726300346984\t0.963895459175\n\tp=3\t3.16273106617629\t4.46240173101\n\tp=4\t14.6264398618229\t16.1132382083\n\n[80, 56] BCH Code over GF(3) with designed distance 9\n\t\tEstimated\t\tActual\n\tp=0\t0.652945537606786\t0.400583426952\n\tp=1\t0.104725869935881\t0.0847134900093\n\tp=2\t0.651413542048857\t0.519779400826\n\tp=3\t11.2044949381990\t5.3165213418\n\n[80, 15] BCH Code over GF(3) with designed distance 41\n\t\tEstimated\t\tActual\n\tp=0\t0.0524764488533255\t0.0787803530693\n\tp=1\t0.0235392606723455\t0.0252663660049\n\tp=2\t0.0786084509854239\t0.0758757901192\n\tp=3\t0.340890763500404\t0.248177850246\n\tp=4\t1.46166863051819\t0.734001851082\n\tp=5\t5.69338143224234\t1.27127592802\n\tp=6\t19.6762218536446\t2.85639382839\n\n[124, 94] BCH Code over GF(5) with designed distance 13\n\t\tEstimated\t\tActual\n\tp=0\t51.8959970988144\t(25.518362093 last time, skipped here)\n\tp=1\t8.16363820890485\t13.5431237435\n```\n\nHere follows some of my test code:\n\n```python\ndef test_decoder(D, reps=100):\n    r\"\"\"Return the time it takes to run the decoder on average, with maximal\n    number of errors.\"\"\"\n    C = D.code()\n    tau = D.decoding_radius()\n    Chan = channels.StaticErrorRateChannel(C.ambient_space(), tau)\n    tsum = 0\n    for i in range(reps):\n        c = C.random_element()\n        r = Chan(c)\n        before = time.clock()\n        cout = D.decode_to_code(r)\n        after = time.clock()\n        assert c == cout , \"decoding error\"\n        tsum += after - before\n    return tsum/reps\n\nfrom sage.coding.linear_code import LinearCodeInformationSetDecoder\n\ntest_codes = [\n    ( 3, codes.GolayCode(GF(2))),\n    ( 2, codes.GolayCode(GF(3))),\n    ( 3, codes.BCHCode(GF(2), 2^8-1, 7)),\n    (15, codes.BCHCode(GF(2), 2^8-1, 31)),\n    (40, codes.BCHCode(GF(2), 2^8-1, 81)),\n    ( 4, codes.BCHCode(GF(3), 3^4-1, 9)),\n    (20, codes.BCHCode(GF(3), 3^4-1, 41)),\n    ( 6, codes.BCHCode(GF(5), 5^3-1, 13))\n    ]\n\nfor (tau, C) in test_codes:\n    print C\n    D = LinearCodeInformationSetDecoder(C, tau)\n    estimates = D._calibrate_search_size()\n    print \"\\t\\tEstimated\\t\\tActual\"\n    for p in range(0,tau+1):\n        if estimates[p] < 30:\n            D._search_size = p\n            avg = test_decoder(D, reps=5)\n        else:\n            avg = \"skipped\"\n        print \"\\tp=%s\\t%s\\t%s\" % (p, estimates[p], avg)\n    print\n\ndef test_iters(D):\n    r\"\"\"Return the avg number of iterations taken by the decoder, including\n    those where a non-information set is picked.\n    This requires debug code inserted to count `self._iters` in the decoder.\n    \"\"\"\n    N = 101\n    iters = []\n    for i in range(N):\n        test_decoder(D, reps=1)\n        iters.append(D._iters)\n    print median(iters) , 1. * sum(iters) / N\n\ndef infoset_density(C, reps=1000):\n    r\"\"\"Estimate density of information sets\"\"\"\n    s = 0\n    G = C.generator_matrix()\n    n, k = C.length(), C.dimension()\n    for N in range(reps):\n        I = sample(range(n), k)\n        Gi = G.matrix_from_columns(I)\n        try:\n            Gi_inv = Gi.inverse()\n            s += 1\n        except ZeroDivisionError:\n            pass\n    return 1. * s / (N+1)\n\nfor _,C in test_codes:\n    print \"%s\\t%s\" % (C, infoset_density(C))\n\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6f69b8058c0478262f5ee8e92f3bbc9b63d12e5\"><code>d6f69b8</code></a></td><td><code>Rename number_errors() method to decoding_interval() and decoding_radius() method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0749196636ecbdcb204eea229a5fceecfc1e4bc\"><code>a074919</code></a></td><td><code>Calibrate window parameter, take 1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ab7277da7588e3fa01ccb5b0f67ce33268d82af\"><code>7ab7277</code></a></td><td><code>Calibrate window parameter, take 2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/476369c26dde394949e074270181b4fa7a652bd8\"><code>476369c</code></a></td><td><code>Rename window to search_size, win -> p, w -> p or pi</code></td></tr></table>\n",
    "created_at": "2017-06-16T15:12:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289210",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:35" align="right">comment:35</div>

I've pushed an attempt at writing the calibration of the search size parameter
(which I call it now, abbreviated `p`). I monkey'd around for a very long while
thinking it didn't work, but I must have confused myself terribly, because when
I tried to clean everything up in order to write this report on my progress, it
suddenly doesn't seem too bad. I believe one gotcha that confounded me was the
inclusion of a `rho` factor: the fraction of size-`k`-positions that are
information sets.

Anyway, here are some timings:

```
[24, 12, 8] Extended Golay code over GF(2)
		Estimated		Actual
	p=0	0.00294093602195062	0.00370841026306
	p=1	0.000733640004873450	0.00105549812317
	p=2	0.000779351222057502	0.000777833461761
	p=3	0.00202210000281411	0.00085108757019

[12, 6, 6] Extended Golay code over GF(3)
		Estimated		Actual
	p=0	0.00107591199443414	0.00152409553528
	p=1	0.000475508233346987	0.000670518875122
	p=2	0.000837919998575671	0.000634233951569

[255, 231] BCH Code over GF(2) with designed distance 7
		Estimated		Actual
	p=0	8.27393653065493	10.0903596711
	p=1	0.303782262811033	0.38420484066
	p=2	0.613038331151469	0.627587425709
	p=3	13.5825719377659	6.28117632627

[255, 139] BCH Code over GF(2) with designed distance 31
		Estimated		Actual

[255, 47] BCH Code over GF(2) with designed distance 81
		Estimated		Actual
	p=0	7.08824734720053	6.80084561825
	p=1	0.730343868369564	0.871155004501
	p=2	0.776726300346984	0.963895459175
	p=3	3.16273106617629	4.46240173101
	p=4	14.6264398618229	16.1132382083

[80, 56] BCH Code over GF(3) with designed distance 9
		Estimated		Actual
	p=0	0.652945537606786	0.400583426952
	p=1	0.104725869935881	0.0847134900093
	p=2	0.651413542048857	0.519779400826
	p=3	11.2044949381990	5.3165213418

[80, 15] BCH Code over GF(3) with designed distance 41
		Estimated		Actual
	p=0	0.0524764488533255	0.0787803530693
	p=1	0.0235392606723455	0.0252663660049
	p=2	0.0786084509854239	0.0758757901192
	p=3	0.340890763500404	0.248177850246
	p=4	1.46166863051819	0.734001851082
	p=5	5.69338143224234	1.27127592802
	p=6	19.6762218536446	2.85639382839

[124, 94] BCH Code over GF(5) with designed distance 13
		Estimated		Actual
	p=0	51.8959970988144	(25.518362093 last time, skipped here)
	p=1	8.16363820890485	13.5431237435
```

Here follows some of my test code:

```python
def test_decoder(D, reps=100):
    r"""Return the time it takes to run the decoder on average, with maximal
    number of errors."""
    C = D.code()
    tau = D.decoding_radius()
    Chan = channels.StaticErrorRateChannel(C.ambient_space(), tau)
    tsum = 0
    for i in range(reps):
        c = C.random_element()
        r = Chan(c)
        before = time.clock()
        cout = D.decode_to_code(r)
        after = time.clock()
        assert c == cout , "decoding error"
        tsum += after - before
    return tsum/reps

from sage.coding.linear_code import LinearCodeInformationSetDecoder

test_codes = [
    ( 3, codes.GolayCode(GF(2))),
    ( 2, codes.GolayCode(GF(3))),
    ( 3, codes.BCHCode(GF(2), 2^8-1, 7)),
    (15, codes.BCHCode(GF(2), 2^8-1, 31)),
    (40, codes.BCHCode(GF(2), 2^8-1, 81)),
    ( 4, codes.BCHCode(GF(3), 3^4-1, 9)),
    (20, codes.BCHCode(GF(3), 3^4-1, 41)),
    ( 6, codes.BCHCode(GF(5), 5^3-1, 13))
    ]

for (tau, C) in test_codes:
    print C
    D = LinearCodeInformationSetDecoder(C, tau)
    estimates = D._calibrate_search_size()
    print "\t\tEstimated\t\tActual"
    for p in range(0,tau+1):
        if estimates[p] < 30:
            D._search_size = p
            avg = test_decoder(D, reps=5)
        else:
            avg = "skipped"
        print "\tp=%s\t%s\t%s" % (p, estimates[p], avg)
    print

def test_iters(D):
    r"""Return the avg number of iterations taken by the decoder, including
    those where a non-information set is picked.
    This requires debug code inserted to count `self._iters` in the decoder.
    """
    N = 101
    iters = []
    for i in range(N):
        test_decoder(D, reps=1)
        iters.append(D._iters)
    print median(iters) , 1. * sum(iters) / N

def infoset_density(C, reps=1000):
    r"""Estimate density of information sets"""
    s = 0
    G = C.generator_matrix()
    n, k = C.length(), C.dimension()
    for N in range(reps):
        I = sample(range(n), k)
        Gi = G.matrix_from_columns(I)
        try:
            Gi_inv = Gi.inverse()
            s += 1
        except ZeroDivisionError:
            pass
    return 1. * s / (N+1)

for _,C in test_codes:
    print "%s\t%s" % (C, infoset_density(C))

```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6f69b8058c0478262f5ee8e92f3bbc9b63d12e5"><code>d6f69b8</code></a></td><td><code>Rename number_errors() method to decoding_interval() and decoding_radius() method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0749196636ecbdcb204eea229a5fceecfc1e4bc"><code>a074919</code></a></td><td><code>Calibrate window parameter, take 1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ab7277da7588e3fa01ccb5b0f67ce33268d82af"><code>7ab7277</code></a></td><td><code>Calibrate window parameter, take 2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/476369c26dde394949e074270181b4fa7a652bd8"><code>476369c</code></a></td><td><code>Rename window to search_size, win -> p, w -> p or pi</code></td></tr></table>




---

archive/issue_comments_289211.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nGreat, I'll take a closer loop later. Here are some preliminary remarks:\n\n* you shouldn't worry about `rho`, consider as an iteration only those with a valid information set. It's already what you measure with `time_information_set_steps`, though I would take the mean and not the median here.\n\n* beware, `_search_size` is initialized to `None` which leads to trouble. You should just leave it uninitialized.",
    "created_at": "2017-06-16T15:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289211",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:36" align="right">comment:36</div>

Great, I'll take a closer loop later. Here are some preliminary remarks:

* you shouldn't worry about `rho`, consider as an iteration only those with a valid information set. It's already what you measure with `time_information_set_steps`, though I would take the mean and not the median here.

* beware, `_search_size` is initialized to `None` which leads to trouble. You should just leave it uninitialized.



---

archive/issue_comments_289212.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI updated the timings after a longer run with more iterations.\n\nReplying to [@sagetrac-ylchapuy](#comment:36):\n> Great, I'll take a closer loop later. Here are some preliminary remarks:\n> \n> * you shouldn't worry about `rho`, consider as an iteration only those with a valid information set. It's already what you measure with `time_information_set_steps`, though I would take the mean and not the median here.\n\nI disagree: it changes the balance between the inversion step (done always) and the search step (done a `rho` fraction of the time). Perhaps it's not paramount, but I've already implemented it, and it makes debugging nice since the number of iterations matches extremely well. \n\n> * beware, `_search_size` is initialized to `None` which leads to trouble. You should just leave it uninitialized.\n\nThanks, that's a bug: I put the call to calibration in `search_size()` which is only called if `_search_size` is unset.",
    "created_at": "2017-06-16T19:43:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289212",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:37" align="right">comment:37</div>

I updated the timings after a longer run with more iterations.

Replying to [@sagetrac-ylchapuy](#comment:36):
> Great, I'll take a closer loop later. Here are some preliminary remarks:
> 
> * you shouldn't worry about `rho`, consider as an iteration only those with a valid information set. It's already what you measure with `time_information_set_steps`, though I would take the mean and not the median here.

I disagree: it changes the balance between the inversion step (done always) and the search step (done a `rho` fraction of the time). Perhaps it's not paramount, but I've already implemented it, and it makes debugging nice since the number of iterations matches extremely well. 

> * beware, `_search_size` is initialized to `None` which leads to trouble. You should just leave it uninitialized.

Thanks, that's a bug: I put the call to calibration in `search_size()` which is only called if `_search_size` is unset.



---

archive/issue_comments_289213.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e6ea11ab23302b3fcc00efc95521c0888a57525\"><code>0e6ea11</code></a></td><td><code>Let calibration return time estimates for easier debugging</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa7240261271df724b145d6a67433cb007c143e3\"><code>fa72402</code></a></td><td><code>fixed search_size init bug</code></td></tr></table>\n",
    "created_at": "2017-06-16T19:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289213",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e6ea11ab23302b3fcc00efc95521c0888a57525"><code>0e6ea11</code></a></td><td><code>Let calibration return time estimates for easier debugging</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa7240261271df724b145d6a67433cb007c143e3"><code>fa72402</code></a></td><td><code>fixed search_size init bug</code></td></tr></table>




---

archive/issue_comments_289214.json:
```json
{
    "body": "Changed commit from **[`476369c`](https://github.com/sagemath/sagetrac-mirror/commit/476369c26dde394949e074270181b4fa7a652bd8)** to **[`fa72402`](https://github.com/sagemath/sagetrac-mirror/commit/fa7240261271df724b145d6a67433cb007c143e3)**",
    "created_at": "2017-06-16T19:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289214",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`476369c`](https://github.com/sagemath/sagetrac-mirror/commit/476369c26dde394949e074270181b4fa7a652bd8)** to **[`fa72402`](https://github.com/sagemath/sagetrac-mirror/commit/fa7240261271df724b145d6a67433cb007c143e3)**



---

archive/issue_comments_289215.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@johanrosenkilde](#comment:37):\n> I updated the timings after a longer run with more iterations.\n> \n> Replying to [@sagetrac-ylchapuy](#comment:36):\n> > Great, I'll take a closer loop later. Here are some preliminary remarks:\n> > \n> > * you shouldn't worry about `rho`, consider as an iteration only those with a valid information set. It's already what you measure with `time_information_set_steps`, though I would take the mean and not the median here.\n\n> \n> I disagree: it changes the balance between the inversion step (done always) and the search step (done a `rho` fraction of the time). Perhaps it's not paramount, but I've already implemented it, and it makes debugging nice since the number of iterations matches extremely well. \n> \n\nI disagree as well! What `time_information_set_steps` measures is the time to get a valid information set. The `while True` is included into it.\nAs is your value `T` is off by a factor `rho`.",
    "created_at": "2017-06-16T22:30:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289215",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@johanrosenkilde](#comment:37):
> I updated the timings after a longer run with more iterations.
> 
> Replying to [@sagetrac-ylchapuy](#comment:36):
> > Great, I'll take a closer loop later. Here are some preliminary remarks:
> > 
> > * you shouldn't worry about `rho`, consider as an iteration only those with a valid information set. It's already what you measure with `time_information_set_steps`, though I would take the mean and not the median here.

> 
> I disagree: it changes the balance between the inversion step (done always) and the search step (done a `rho` fraction of the time). Perhaps it's not paramount, but I've already implemented it, and it makes debugging nice since the number of iterations matches extremely well. 
> 

I disagree as well! What `time_information_set_steps` measures is the time to get a valid information set. The `while True` is included into it.
As is your value `T` is off by a factor `rho`.



---

archive/issue_comments_289216.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@sagetrac-ylchapuy](#comment:39):\n> I disagree as well! What `time_information_set_steps` measures is the time to get a valid information set. The `while True` is included into it.\n> As is your value `T` is off by a factor `rho`.\n\nOh yes, now I see, you're right. And changing the medians to means then it will probably be precise enough. The alternative is to let `time_information_set_steps` measure only the time once an information set is found. If e.g. `q=7` then the probability of an information set (on a random code) is roughly `5/6` so there will be a fair chance that each of the 5 runs of `time_information_set_steps` hit an information set on the first guess - and then we will have underestimated the average time by a factor `6/5`. Which likely doesn't matter at all.",
    "created_at": "2017-06-17T17:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289216",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@sagetrac-ylchapuy](#comment:39):
> I disagree as well! What `time_information_set_steps` measures is the time to get a valid information set. The `while True` is included into it.
> As is your value `T` is off by a factor `rho`.

Oh yes, now I see, you're right. And changing the medians to means then it will probably be precise enough. The alternative is to let `time_information_set_steps` measure only the time once an information set is found. If e.g. `q=7` then the probability of an information set (on a random code) is roughly `5/6` so there will be a fair chance that each of the 5 runs of `time_information_set_steps` hit an information set on the first guess - and then we will have underestimated the average time by a factor `6/5`. Which likely doesn't matter at all.



---

archive/issue_comments_289217.json:
```json
{
    "body": "Changed commit from **[`fa72402`](https://github.com/sagemath/sagetrac-mirror/commit/fa7240261271df724b145d6a67433cb007c143e3)** to **[`ea5c36c`](https://github.com/sagemath/sagetrac-mirror/commit/ea5c36c00c1043ee72ca2837da96e404bf4c8907)**",
    "created_at": "2017-06-17T18:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289217",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fa72402`](https://github.com/sagemath/sagetrac-mirror/commit/fa7240261271df724b145d6a67433cb007c143e3)** to **[`ea5c36c`](https://github.com/sagemath/sagetrac-mirror/commit/ea5c36c00c1043ee72ca2837da96e404bf4c8907)**



---

archive/issue_comments_289218.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea5c36c00c1043ee72ca2837da96e404bf4c8907\"><code>ea5c36c</code></a></td><td><code>rho is already included. Mean instead of median</code></td></tr></table>\n",
    "created_at": "2017-06-17T18:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289218",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea5c36c00c1043ee72ca2837da96e404bf4c8907"><code>ea5c36c</code></a></td><td><code>rho is already included. Mean instead of median</code></td></tr></table>




---

archive/issue_comments_289219.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nI removed the `rho` factor and updated the documentation.",
    "created_at": "2017-06-17T18:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289219",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:42" align="right">comment:42</div>

I removed the `rho` factor and updated the documentation.



---

archive/issue_comments_289220.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nThis looks nicer. Another thing I that bothers me is the `search_size` method.\n\nThis parameter is (sort of) specific to the Lee-Brickell algorithm, not to ISD. In preparation for other variants available (e.g. Stern-Dumer), I would prefer to hide this from the user.\n\nI would either hide it behind an \"underscored\" method, or provide a more general one, e.g. \n\n```sage\n    def parameters(self):\n        r\"\"\"\n         Return the algo and parameters used\n        \"\"\"\n        return (\"LeeBrickell\", self._search_size)\n```\nor\n\n```sage\n    def parameters(self):\n        r\"\"\"\n         Return the parameters selected for each available algorithms\n        \"\"\"\n        return { \"LeeBrickell\": self._search_size }\n```\nor anything better you can think of.",
    "created_at": "2017-06-18T20:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289220",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:43" align="right">comment:43</div>

This looks nicer. Another thing I that bothers me is the `search_size` method.

This parameter is (sort of) specific to the Lee-Brickell algorithm, not to ISD. In preparation for other variants available (e.g. Stern-Dumer), I would prefer to hide this from the user.

I would either hide it behind an "underscored" method, or provide a more general one, e.g. 

```sage
    def parameters(self):
        r"""
         Return the algo and parameters used
        """
        return ("LeeBrickell", self._search_size)
```
or

```sage
    def parameters(self):
        r"""
         Return the parameters selected for each available algorithms
        """
        return { "LeeBrickell": self._search_size }
```
or anything better you can think of.



---

archive/issue_comments_289221.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nThis is essentially the issue that Julien brought up earlier: at what level, and how, should the different ISD implementations differ. I had proposed to defer this question till when it came up, but considering #23244 we might just as well decide something now. Julien's suggestion is to have entirely different classes. I suggested that shoving them all in the same class could be sufficient. But I'm not an expert in the other ISD algorithms, and as you point out, they take different parameters.\n\nYour suggestion would allow for the necessary flexibility, but is essentially an indirection put in place to avoid subclassing. I don't find it particularly elegant, and it would be surprising to users I think. Granted, a typical user wouldn't care about the parameters.\n\nConsider instead having a class for each, taking and naming their parameters as natural to each, and all subclassing a `AbstractInformationSetDecoder`. Then we make a function:\n\n```\n    def LinearCodeInformationSetDecoder(code, number_errors, algorithm=None, *args, **kwargs):\n        if algorithm == None:\n            algorithm = \"LeeBrickell\" if code.dimension() < 10 else \"SternDumer\"\n        if algorithm == \"LeeBrickell\":\n            return LinearCodeISLeeBrickellDecoder(code, number_errors, *args, **kwargs)\n        ...\n```\n\nPreferably improved with a `try ... except` which gives a nicer error message in case `args, kwargs` is not proper. Probably, supplying `args` or `kwargs` should also be disallowed if `algorithm` is not explicitly set, in order to avoid user code silently breaking in case we sometime decide to change the automatic selection of `algorithm`.",
    "created_at": "2017-06-19T09:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289221",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:44" align="right">comment:44</div>

This is essentially the issue that Julien brought up earlier: at what level, and how, should the different ISD implementations differ. I had proposed to defer this question till when it came up, but considering #23244 we might just as well decide something now. Julien's suggestion is to have entirely different classes. I suggested that shoving them all in the same class could be sufficient. But I'm not an expert in the other ISD algorithms, and as you point out, they take different parameters.

Your suggestion would allow for the necessary flexibility, but is essentially an indirection put in place to avoid subclassing. I don't find it particularly elegant, and it would be surprising to users I think. Granted, a typical user wouldn't care about the parameters.

Consider instead having a class for each, taking and naming their parameters as natural to each, and all subclassing a `AbstractInformationSetDecoder`. Then we make a function:

```
    def LinearCodeInformationSetDecoder(code, number_errors, algorithm=None, *args, **kwargs):
        if algorithm == None:
            algorithm = "LeeBrickell" if code.dimension() < 10 else "SternDumer"
        if algorithm == "LeeBrickell":
            return LinearCodeISLeeBrickellDecoder(code, number_errors, *args, **kwargs)
        ...
```

Preferably improved with a `try ... except` which gives a nicer error message in case `args, kwargs` is not proper. Probably, supplying `args` or `kwargs` should also be disallowed if `algorithm` is not explicitly set, in order to avoid user code silently breaking in case we sometime decide to change the automatic selection of `algorithm`.



---

archive/issue_comments_289222.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@johanrosenkilde](#comment:44):\n> This is essentially the issue that Julien brought up earlier: at what level, and how, should the different ISD implementations differ. I had proposed to defer this question till when it came up, but considering #23244 we might just as well decide something now. Julien's suggestion is to have entirely different classes. I suggested that shoving them all in the same class could be sufficient. But I'm not an expert in the other ISD algorithms, and as you point out, they take different parameters.\n\nI agree it's not elegant. My aim was to make this ticket as easy to close as possible. I don't want to make everything perfect, but just don't want to provide user functions we would have to deprecate in the future.\nAs long as we have only underscored methods it's not a problem to me and we can decide later what is the best way to deal with this.\n\nIf you want to decide this now, I also think some general factory `LinearCodeInformationSetDecoder` choosing the best implementation at hand for those parameters, and specialized classes for users who know what they are doing seems the way to go for me.",
    "created_at": "2017-06-19T10:47:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289222",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@johanrosenkilde](#comment:44):
> This is essentially the issue that Julien brought up earlier: at what level, and how, should the different ISD implementations differ. I had proposed to defer this question till when it came up, but considering #23244 we might just as well decide something now. Julien's suggestion is to have entirely different classes. I suggested that shoving them all in the same class could be sufficient. But I'm not an expert in the other ISD algorithms, and as you point out, they take different parameters.

I agree it's not elegant. My aim was to make this ticket as easy to close as possible. I don't want to make everything perfect, but just don't want to provide user functions we would have to deprecate in the future.
As long as we have only underscored methods it's not a problem to me and we can decide later what is the best way to deal with this.

If you want to decide this now, I also think some general factory `LinearCodeInformationSetDecoder` choosing the best implementation at hand for those parameters, and specialized classes for users who know what they are doing seems the way to go for me.



---

archive/issue_comments_289223.json:
```json
{
    "body": "Changed commit from **[`ea5c36c`](https://github.com/sagemath/sagetrac-mirror/commit/ea5c36c00c1043ee72ca2837da96e404bf4c8907)** to **[`5463b1d`](https://github.com/sagemath/sagetrac-mirror/commit/5463b1d86c8b813f3c608c69d2af9674eb7c392f)**",
    "created_at": "2017-06-21T09:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289223",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ea5c36c`](https://github.com/sagemath/sagetrac-mirror/commit/ea5c36c00c1043ee72ca2837da96e404bf4c8907)** to **[`5463b1d`](https://github.com/sagemath/sagetrac-mirror/commit/5463b1d86c8b813f3c608c69d2af9674eb7c392f)**



---

archive/issue_comments_289224.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87bd34dd41d2ff46571b21e9c5fc9ebdce7eedf6\"><code>87bd34d</code></a></td><td><code>Restructure ISD with class hierarchy and factory method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59319bd476365282884073aa78b84190298d6fa0\"><code>59319bd</code></a></td><td><code>Docs for new classes and full doctest coverage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0a6677ba5a39f978aac0a640f148e111fe29812\"><code>e0a6677</code></a></td><td><code>Move all ISD code to new file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5463b1d86c8b813f3c608c69d2af9674eb7c392f\"><code>5463b1d</code></a></td><td><code>Fix code and doctests after code migration</code></td></tr></table>\n",
    "created_at": "2017-06-21T09:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289224",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87bd34dd41d2ff46571b21e9c5fc9ebdce7eedf6"><code>87bd34d</code></a></td><td><code>Restructure ISD with class hierarchy and factory method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59319bd476365282884073aa78b84190298d6fa0"><code>59319bd</code></a></td><td><code>Docs for new classes and full doctest coverage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0a6677ba5a39f978aac0a640f148e111fe29812"><code>e0a6677</code></a></td><td><code>Move all ISD code to new file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5463b1d86c8b813f3c608c69d2af9674eb7c392f"><code>5463b1d</code></a></td><td><code>Fix code and doctests after code migration</code></td></tr></table>




---

archive/issue_comments_289225.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI've implemented a class hierarchy and a factory function as described earlier. Since the ISD code appears to get lengthy, I've moved it to a new file.\n\nDoc-tests pass, but I'm having trouble with documentation. I haven't inspected the compiled html doc yet because I got stuck in attempting to make a proper hyperlink for `sage.coding.isd_decoding.LinearCodeInformationSetDecoder` in the module doc of `sage.coding.decoder_catalog`. I'll look at it again soon.",
    "created_at": "2017-06-21T10:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289225",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:47" align="right">comment:47</div>

I've implemented a class hierarchy and a factory function as described earlier. Since the ISD code appears to get lengthy, I've moved it to a new file.

Doc-tests pass, but I'm having trouble with documentation. I haven't inspected the compiled html doc yet because I got stuck in attempting to make a proper hyperlink for `sage.coding.isd_decoding.LinearCodeInformationSetDecoder` in the module doc of `sage.coding.decoder_catalog`. I'll look at it again soon.



---

archive/issue_comments_289226.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@johanrosenkilde](#comment:47):\n> I've implemented a class hierarchy and a factory function as described earlier. Since the ISD code appears to get lengthy, I've moved it to a new file.\n\nGreat, I agree it's a nice thing to put it in a separate file. Though the `d` in ` isd` is for decoding, so ` isd_decoding`  is a bit strange.\n\nI look forward to review this when it' s ready, thanks for working on this!",
    "created_at": "2017-06-21T12:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289226",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@johanrosenkilde](#comment:47):
> I've implemented a class hierarchy and a factory function as described earlier. Since the ISD code appears to get lengthy, I've moved it to a new file.

Great, I agree it's a nice thing to put it in a separate file. Though the `d` in ` isd` is for decoding, so ` isd_decoding`  is a bit strange.

I look forward to review this when it' s ready, thanks for working on this!



---

archive/issue_comments_289227.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\n> Great, I agree it's a nice thing to put it in a separate file. Though the `d` in ` isd` is for decoding, so ` isd_decoding`  is a bit strange.\n\nTrue. But `isd` is a very bland abbreviation and I suspect it will be hard for most people to look at the file name and have an idea of its contents. And `is_decoding` is weird. Do you have a suggestion?\n\nSimilarly, I had great difficulty coming up with a proper name for the class `LinearCodeISD_LeeBrickell`. All other decoder classes end with `Decoder`. But `LinearCodeInformationSetLeeBrickellDecoder` is crazy long. And `LinearCodeISLeeBrickellDecoder` reads weirdly since `IS` doesn't remind of `ISD`. And I wanted all `ISD`-decoders to tab-complete similarly, so `LinearCodeLeeBrickellISDecoder` was out.",
    "created_at": "2017-06-22T07:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289227",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:49" align="right">comment:49</div>

> Great, I agree it's a nice thing to put it in a separate file. Though the `d` in ` isd` is for decoding, so ` isd_decoding`  is a bit strange.

True. But `isd` is a very bland abbreviation and I suspect it will be hard for most people to look at the file name and have an idea of its contents. And `is_decoding` is weird. Do you have a suggestion?

Similarly, I had great difficulty coming up with a proper name for the class `LinearCodeISD_LeeBrickell`. All other decoder classes end with `Decoder`. But `LinearCodeInformationSetLeeBrickellDecoder` is crazy long. And `LinearCodeISLeeBrickellDecoder` reads weirdly since `IS` doesn't remind of `ISD`. And I wanted all `ISD`-decoders to tab-complete similarly, so `LinearCodeLeeBrickellISDecoder` was out.



---

archive/issue_comments_289228.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@johanrosenkilde](#comment:49):\n> > Great, I agree it's a nice thing to put it in a separate file. Though the `d` in ` isd` is for decoding, so ` isd_decoding`  is a bit strange.\n\n> \n> True. But `isd` is a very bland abbreviation and I suspect it will be hard for most people to look at the file name and have an idea of its contents. And `is_decoding` is weird. Do you have a suggestion?\n\nwhy not `information_set_decoding` we have tab completion.\n\n> Similarly, I had great difficulty coming up with a proper name for the class `LinearCodeISD_LeeBrickell`. All other decoder classes end with `Decoder`. But `LinearCodeInformationSetLeeBrickellDecoder` is crazy long. And `LinearCodeISLeeBrickellDecoder` reads weirdly since `IS` doesn't remind of `ISD`. And I wanted all `ISD`-decoders to tab-complete similarly, so `LinearCodeLeeBrickellISDecoder` was out.\n\nHum, I see. What would you think about only one full fledge decoder `LinearCodeInformationSetDecoder`, and lightweight classes for the algorithms, e.g. (just sketching a solution):\n\n```sage\nclass DecodingAlgorithm:\n    \"\"\" Just providing an interface.\n    I can use this bland name because it would in fact be\n    sage.coding.information_set_decoding.DecodingAlgorithm\n    \"\"\"\n    @staticmethod\n    def decode(G, y, **kargs):\n        \"\"\" kargs depends on the actual algorithm \"\"\"\n        raise NotImplementedError\n    @staticmethod\n    def cost_estimate(C, **kargs):\n        \"\"\" Return ETA in seconds for the given code and parameters\n        \"\"\"\n        raise NotImplementedError\n    @staticmethod\n    def calibrate_for(C):\n        \"\"\" Return the best parameters found for this code, as a dict\n        You can thus do:\n        A.decode(C.generator_matrix(), y, **A.calibrate_for(C))\n        \"\"\"\n        raise NotImplementedError\n\nclass AlgorithmLeeBrickell(DecodingAlgorithm):\n    # Todo\n\nclass AlgorithmSternDummer(DecodingAlgorithm):\n    # Todo\n\n# etc\n\n```",
    "created_at": "2017-06-22T08:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289228",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@johanrosenkilde](#comment:49):
> > Great, I agree it's a nice thing to put it in a separate file. Though the `d` in ` isd` is for decoding, so ` isd_decoding`  is a bit strange.

> 
> True. But `isd` is a very bland abbreviation and I suspect it will be hard for most people to look at the file name and have an idea of its contents. And `is_decoding` is weird. Do you have a suggestion?

why not `information_set_decoding` we have tab completion.

> Similarly, I had great difficulty coming up with a proper name for the class `LinearCodeISD_LeeBrickell`. All other decoder classes end with `Decoder`. But `LinearCodeInformationSetLeeBrickellDecoder` is crazy long. And `LinearCodeISLeeBrickellDecoder` reads weirdly since `IS` doesn't remind of `ISD`. And I wanted all `ISD`-decoders to tab-complete similarly, so `LinearCodeLeeBrickellISDecoder` was out.

Hum, I see. What would you think about only one full fledge decoder `LinearCodeInformationSetDecoder`, and lightweight classes for the algorithms, e.g. (just sketching a solution):

```sage
class DecodingAlgorithm:
    """ Just providing an interface.
    I can use this bland name because it would in fact be
    sage.coding.information_set_decoding.DecodingAlgorithm
    """
    @staticmethod
    def decode(G, y, **kargs):
        """ kargs depends on the actual algorithm """
        raise NotImplementedError
    @staticmethod
    def cost_estimate(C, **kargs):
        """ Return ETA in seconds for the given code and parameters
        """
        raise NotImplementedError
    @staticmethod
    def calibrate_for(C):
        """ Return the best parameters found for this code, as a dict
        You can thus do:
        A.decode(C.generator_matrix(), y, **A.calibrate_for(C))
        """
        raise NotImplementedError

class AlgorithmLeeBrickell(DecodingAlgorithm):
    # Todo

class AlgorithmSternDummer(DecodingAlgorithm):
    # Todo

# etc

```



---

archive/issue_comments_289229.json:
```json
{
    "body": "Changed commit from **[`5463b1d`](https://github.com/sagemath/sagetrac-mirror/commit/5463b1d86c8b813f3c608c69d2af9674eb7c392f)** to **[`f68ea69`](https://github.com/sagemath/sagetrac-mirror/commit/f68ea694a888638a1a839bd429a84ace1bb3a12e)**",
    "created_at": "2017-06-30T10:26:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289229",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5463b1d`](https://github.com/sagemath/sagetrac-mirror/commit/5463b1d86c8b813f3c608c69d2af9674eb7c392f)** to **[`f68ea69`](https://github.com/sagemath/sagetrac-mirror/commit/f68ea694a888638a1a839bd429a84ace1bb3a12e)**



---

archive/issue_comments_289230.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed70a7933730bfae37956d001f7fcf84d8f3ab37\"><code>ed70a79</code></a></td><td><code>Rename</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa060738795f5c39b68d0e5fcfd1f7ac7602447c\"><code>fa06073</code></a></td><td><code>Fixes after rename</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8b9c5d45e08135ba99f7c2e1027830e892bf47f\"><code>f8b9c5d</code></a></td><td><code>Switched to ISD Algorithm classes and only one real decoder</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f68ea694a888638a1a839bd429a84ace1bb3a12e\"><code>f68ea69</code></a></td><td><code>Fixes to docstrings</code></td></tr></table>\n",
    "created_at": "2017-06-30T10:26:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289230",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed70a7933730bfae37956d001f7fcf84d8f3ab37"><code>ed70a79</code></a></td><td><code>Rename</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa060738795f5c39b68d0e5fcfd1f7ac7602447c"><code>fa06073</code></a></td><td><code>Fixes after rename</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8b9c5d45e08135ba99f7c2e1027830e892bf47f"><code>f8b9c5d</code></a></td><td><code>Switched to ISD Algorithm classes and only one real decoder</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f68ea694a888638a1a839bd429a84ace1bb3a12e"><code>f68ea69</code></a></td><td><code>Fixes to docstrings</code></td></tr></table>




---

archive/issue_comments_289231.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nFinally got back to it again. I had originally considered light-weight algorithm classes but then rejected it since the surrounding ISD-class would be almost trivial. However, reconsidering I think it actually makes for a slightly nicer design, user-wise: we avoid a decoder factory (which won't behave as a decoder class which might surprise the user), it sidesteps the clumsy naming, and it becomes more transparent for a user how to make new ISD algorithms.\n\nSo I've implemented your suggestion. I went for real instantiated Algorithm-objects. This makes the algorithms more accessible to the user, and making things static would also pose problems with `calibrate` and `time_estimate`, which either both would have to actually run the calibration or write to static class variables or something.\n\nAs usual this took 30 minutes, and then 1,5 hours to redo the doc-strings.",
    "created_at": "2017-06-30T10:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289231",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:52" align="right">comment:52</div>

Finally got back to it again. I had originally considered light-weight algorithm classes but then rejected it since the surrounding ISD-class would be almost trivial. However, reconsidering I think it actually makes for a slightly nicer design, user-wise: we avoid a decoder factory (which won't behave as a decoder class which might surprise the user), it sidesteps the clumsy naming, and it becomes more transparent for a user how to make new ISD algorithms.

So I've implemented your suggestion. I went for real instantiated Algorithm-objects. This makes the algorithms more accessible to the user, and making things static would also pose problems with `calibrate` and `time_estimate`, which either both would have to actually run the calibration or write to static class variables or something.

As usual this took 30 minutes, and then 1,5 hours to redo the doc-strings.



---

archive/issue_comments_289232.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nNeeds review. I've added Yann as coauthor - he definitely deserves that!",
    "created_at": "2017-06-30T10:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289232",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:53" align="right">comment:53</div>

Needs review. I've added Yann as coauthor - he definitely deserves that!



---

archive/issue_comments_289233.json:
```json
{
    "body": "Changed author from **David Lucas, Johan Rosenkilde** to **David Lucas, Johan Rosenkilde, Yann Laigle-Chapuy**",
    "created_at": "2017-06-30T10:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289233",
    "user": "https://github.com/johanrosenkilde"
}
```

Changed author from **David Lucas, Johan Rosenkilde** to **David Lucas, Johan Rosenkilde, Yann Laigle-Chapuy**



---

archive/issue_events_285737.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2017-06-30T10:34:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285737"
}
```



---

archive/issue_events_285738.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2017-06-30T10:34:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285738"
}
```



---

archive/issue_comments_289234.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nFirst review pass.\n\nTo begin with:\n\n* why give the copyright to William Stein? the format is also a bit off (see http://doc.sagemath.org/html/en/developer/coding_basics.html#headings-of-sage-library-code-files)\n* you should import as much as possible from `sage.all` instead of hardcoding the whole path (e.g. `sage.modules.free_module_element`) it's more future proof if things ever move around.\n* I find most of the \"using this ISD decoding algorithm\" in the documentation redundant (just like you don't write \"using self\")\n* if you ask for `time_estimate` with user provided parameters, it currently do the calibration and change the parameters. Is this expected? In my mind, `calibrate` calls `time_estimate` with different parameters to choose the best one.\n\nFor the algorithm itself:\n\n* the description of the Lee-Brickell differs slightly from the implementation. In step 3, we consider every subset of size less than `p`\n* in step 2, you should check if `y` is low weight. It actually has a good chance to be! (and you take it into account in your probability computation)\n* you could use (but this doesn't change much)\n\n```sage\nfor gA in itertools.combinations(g, pi):\n  for m in itertools.product(Fstar, repeat=pi):\n    e = y - sum(mi*gAi for mi,gAi in zip(m,gA))\n```\n* prefer `... is not None` to `not ... is None`\n\nFor the decoder:\n\n* in `__init__` you doctest only some exceptions and not all of them\n* you also don't doctest a user defined algorithm (as allowed by your test `isinstance(algorithm, InformationSetAlgorithm`)\n* in `known_algorithms` I would make `d` a class variable `_known_algorithms`\n\nAnd finally, I would test this on bigger examples, e.g. `codes.random_linear_code(GF(9), 40, 20)` and weight 6 error, or whatever you like but I find this better if this is the only available option (you can't reasonably compute the coset leaders for example).\n\nAs a long doctest, we could check that on such a code the time estimate is not too far from reality (lets say within a factor 2).",
    "created_at": "2017-06-30T13:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289234",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:54" align="right">comment:54</div>

First review pass.

To begin with:

* why give the copyright to William Stein? the format is also a bit off (see http://doc.sagemath.org/html/en/developer/coding_basics.html#headings-of-sage-library-code-files)
* you should import as much as possible from `sage.all` instead of hardcoding the whole path (e.g. `sage.modules.free_module_element`) it's more future proof if things ever move around.
* I find most of the "using this ISD decoding algorithm" in the documentation redundant (just like you don't write "using self")
* if you ask for `time_estimate` with user provided parameters, it currently do the calibration and change the parameters. Is this expected? In my mind, `calibrate` calls `time_estimate` with different parameters to choose the best one.

For the algorithm itself:

* the description of the Lee-Brickell differs slightly from the implementation. In step 3, we consider every subset of size less than `p`
* in step 2, you should check if `y` is low weight. It actually has a good chance to be! (and you take it into account in your probability computation)
* you could use (but this doesn't change much)

```sage
for gA in itertools.combinations(g, pi):
  for m in itertools.product(Fstar, repeat=pi):
    e = y - sum(mi*gAi for mi,gAi in zip(m,gA))
```
* prefer `... is not None` to `not ... is None`

For the decoder:

* in `__init__` you doctest only some exceptions and not all of them
* you also don't doctest a user defined algorithm (as allowed by your test `isinstance(algorithm, InformationSetAlgorithm`)
* in `known_algorithms` I would make `d` a class variable `_known_algorithms`

And finally, I would test this on bigger examples, e.g. `codes.random_linear_code(GF(9), 40, 20)` and weight 6 error, or whatever you like but I find this better if this is the only available option (you can't reasonably compute the coset leaders for example).

As a long doctest, we could check that on such a code the time estimate is not too far from reality (lets say within a factor 2).



---

archive/issue_comments_289235.json:
```json
{
    "body": "Changed commit from **[`f68ea69`](https://github.com/sagemath/sagetrac-mirror/commit/f68ea694a888638a1a839bd429a84ace1bb3a12e)** to **[`c6ddf43`](https://github.com/sagemath/sagetrac-mirror/commit/c6ddf4318951e5619d5f0dfa1b91ddfb6e8a9f3e)**",
    "created_at": "2017-07-06T11:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289235",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f68ea69`](https://github.com/sagemath/sagetrac-mirror/commit/f68ea694a888638a1a839bd429a84ace1bb3a12e)** to **[`c6ddf43`](https://github.com/sagemath/sagetrac-mirror/commit/c6ddf4318951e5619d5f0dfa1b91ddfb6e8a9f3e)**



---

archive/issue_comments_289236.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee4d586ac30728f14680d77e0fb1e8411dc56a8a\"><code>ee4d586</code></a></td><td><code>Merge branch 'u/jsrn/information_set_decoding' of git://trac.sagemath.org/sage into 20138_information_set_decoding</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed4bfd796ecfc43f85c8f8bfed174f26e585cfc8\"><code>ed4bfd7</code></a></td><td><code>copyright and import statements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4e7f497e0339fe862d29fc05b8d5e15568d05c0\"><code>a4e7f49</code></a></td><td><code>time_estimate() doesn't poop on selected parameters</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/339c3837f03b5ba26928f8d6b9c8326e652dfa01\"><code>339c383</code></a></td><td><code>Fixed bugs and added doctests pointed out by reviewer.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ea73d63f9139e1ce05dd631e3ae118616f034f4\"><code>0ea73d6</code></a></td><td><code>Make _known_algorithms a class field</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08a9e50ac0245265ac09aae1e06cdadff5620234\"><code>08a9e50</code></a></td><td><code>Added a big example/doctest. Polished some existing ones.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6ddf4318951e5619d5f0dfa1b91ddfb6e8a9f3e\"><code>c6ddf43</code></a></td><td><code>Added a test for the precision of calibration</code></td></tr></table>\n",
    "created_at": "2017-07-06T11:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289236",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee4d586ac30728f14680d77e0fb1e8411dc56a8a"><code>ee4d586</code></a></td><td><code>Merge branch 'u/jsrn/information_set_decoding' of git://trac.sagemath.org/sage into 20138_information_set_decoding</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed4bfd796ecfc43f85c8f8bfed174f26e585cfc8"><code>ed4bfd7</code></a></td><td><code>copyright and import statements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4e7f497e0339fe862d29fc05b8d5e15568d05c0"><code>a4e7f49</code></a></td><td><code>time_estimate() doesn't poop on selected parameters</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/339c3837f03b5ba26928f8d6b9c8326e652dfa01"><code>339c383</code></a></td><td><code>Fixed bugs and added doctests pointed out by reviewer.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ea73d63f9139e1ce05dd631e3ae118616f034f4"><code>0ea73d6</code></a></td><td><code>Make _known_algorithms a class field</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08a9e50ac0245265ac09aae1e06cdadff5620234"><code>08a9e50</code></a></td><td><code>Added a big example/doctest. Polished some existing ones.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6ddf4318951e5619d5f0dfa1b91ddfb6e8a9f3e"><code>c6ddf43</code></a></td><td><code>Added a test for the precision of calibration</code></td></tr></table>




---

archive/issue_comments_289237.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nThanks for the speedy review. Here is my less speedy reply.\n\nReplying to [@sagetrac-ylchapuy](#comment:54):\n> * why give the copyright to William Stein? the format is also a bit off (see http://doc.sagemath.org/html/en/developer/coding_basics.html#headings-of-sage-library-code-files)\n\nI hadn't looked up those rules to be honest. I added our three names. I don't\nknow your email address though.\n\n> * you should import as much as possible from `sage.all` instead of hardcoding the whole path (e.g. `sage.modules.free_module_element`) it's more future proof if things ever move around.\n\nDidn't know that was possible. It's not used many places in Sage either. I don't see any drawbacks though, so I've made the change.\n\n> * I find most of the \"using this ISD decoding algorithm\" in the documentation redundant (just like you don't write \"using self\")\n\nThat's a matter of style. I would always write \"Return the minimum distance of\nthis code\" rather than \"Return the minimum distance\" or \"Return the\nminimum distance of self\". Similarly, decoding is not canonical: the result\ndepends on the method used.\n\nThere was a discussion on sage-devel on this recently. There was no clear\nconsensus, but many seemed favoured the \"of this code\"-style.\n\nI'll keep it like this for now, but feel free to give explicit examples where\nyou find it jarring.\n\n> * if you ask for `time_estimate` with user provided parameters, it currently\n> do the calibration and change the parameters. Is this expected? In my mind,\n> `calibrate` calls `time_estimate` with different parameters to choose the best\n> one.\n\nGood catch: `time_estimate` of course shouldn't overwrite selected parameters.\nI've fixed that.\n\n> * the description of the Lee-Brickell differs slightly from the implementation. In step 3, we consider every subset of size less than `p`\n\nNo, we let `pi` go from `0` to `p`, both inclusive. What differs is that I, for\nbrevity, just say we let the coefficients roam through `F^p`, while we actually\ngo through `F*^pi`, and let `pi` go from 0 to `p`. This is to avoid repeating\nthe elements with multiple 0s in the first version.\n    \n> * in step 2, you should check if `y` is low weight. It actually has a good chance to be! (and you take it into account in your probability computation)\n\nThis is done in the iteration `pi = 0`.\n\n> * you could use (but this doesn't change much)\n> \n> ```sage\n> for gA in itertools.combinations(g, pi):\n>   for m in itertools.product(Fstar, repeat=pi):\n>     e = y - sum(mi*gAi for mi,gAi in zip(m,gA))\n> ```\n\nYes I could, but I don't consider it more elegant. If I was writing in OCaml I'd\ndo it in the above way, obviously, but not in Python.\n\n> * prefer `... is not None` to `not ... is None`\n\nOK\n\n> For the decoder:\n> \n> * in `__init__` you doctest only some exceptions and not all of them\n\nI think all `__init__`s and class docs now have the appropriate doctests.\n\n> * you also don't doctest a user defined algorithm (as allowed by your test `isinstance(algorithm, InformationSetAlgorithm`)\n\nThank you for insisting on a doctest of this: it revealed a bug and a design dilemma. The bug was that `InformationSetAlgorithm` didn't hash, which meant that `AbstractLinearCode.encoder` crashed since it tries to hash any arguments. This is potentially a problem with `AbstractLinearCode.encoder` which might need to be fixed at some point, but for this case I don't see a reason not to just supply a simple hash function for `InformationSetAlgorithm`.\n\nThe design dilemma is that when supplying an ISD algorithm, it is superfluous to also supply `number_errors` to `InformationSetDecoder`, since the algorithm knows its decoding interval. I thought about this and decided to leave it this way, i.e. the user must supply `number_errors` and `algorithm` and `number_errors` must match `algorithm.decoding_interval()`. My argument is that this use case is very rare and for special developer-users; but allowing the shortcut of only supplying `algorithm` would confuse the documentation and mess up the constructor.\n\n\n> * in `known_algorithms` I would make `d` a class variable `_known_algorithms`\n\nNo problem.\n\n> And finally, I would test this on bigger examples, e.g. `codes.random_linear_code(GF(9), 40, 20)` and weight 6 error, or whatever you like but I find this better if this is the only available option (you can't reasonably compute the coset leaders for example).\n\nI don't like to use a random code, since it might fail to decode (granted, with very low probability). I've added an example with  the `[59, 30, 17]` QR code over `GF(3)`, for which syndrome decoding or nearest neighbor decoding is infeasible. The current information-set decoding is extremely fast on the other hand. I've flagged it as long, though it takes less than 0.3 s.\n\n> As a long doctest, we could check that on such a code the time estimate is not too far from reality (lets say within a factor 2). \n\nA random doc-test should only fail with extremely low probability, otherwise it will cause headaches for other Sage devs and the build bot. The decoding time for information-set decoding is roughly exponentially distributed and has a huge variance. Thus we must average a large number of decoding trials and test this against the calibrated value.\n\nI've implemented such a test for a medium-sized code, where we do 100 iterations, and I test that the elapsed time is within a factor 5 of calibrated. I did a 1-hour trial on my own computer with only light background processes, and factor 2 off calibrated time occurred after 400 trials while factor 3 off calibrated time occurred after 5000 trials:\n\n```\nfrom sage.coding.information_set_decoder import LeeBrickellISDAlgorithm\nC = codes.QuadraticResidueCode(37, GF(3))\nChan = channels.StaticErrorRateChannel(C.ambient_space(), 4)\nA = LeeBrickellISDAlgorithm(C, (0,4))\nA.calibrate()\ndef time_100():\n    A.calibrate()\n    import time\n    zero = C.ambient_space().zero()\n    before = time.clock()\n    for i in range(100): A.decode(Chan(zero)); None\n    return time.clock() - before\n\nsmallest = 1\nbiggest = 1\ni = 0\nwhile True:\n    i += 1\n    elapsed = time_100()\n    frac = elapsed/A.time_estimate()/100\n    if frac < smallest:\n        smallest = frac\n    if frac > biggest:\n        biggest = frac\n    print \"%d: %s, %s\" % (i, smallest , biggest)\n```\n\n\nMy theoretical musings on these probabilities indicated that - if the\ncalibration is sound - this should occur far less frequently, however.\n\nBarring an improvement on the calibration (which I'm not motivated to do), if we\nobserve factors 2 and 3 quite often, we should at least use factor 5 in the\nfield. This is also considering that unfortunate heavy background load could\nimpact the doctest, further increasing the probability of false negatives.\n\nAny thoughts?\n\n(The ticket now needs review again)",
    "created_at": "2017-07-06T12:03:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289237",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:56" align="right">comment:56</div>

Thanks for the speedy review. Here is my less speedy reply.

Replying to [@sagetrac-ylchapuy](#comment:54):
> * why give the copyright to William Stein? the format is also a bit off (see http://doc.sagemath.org/html/en/developer/coding_basics.html#headings-of-sage-library-code-files)

I hadn't looked up those rules to be honest. I added our three names. I don't
know your email address though.

> * you should import as much as possible from `sage.all` instead of hardcoding the whole path (e.g. `sage.modules.free_module_element`) it's more future proof if things ever move around.

Didn't know that was possible. It's not used many places in Sage either. I don't see any drawbacks though, so I've made the change.

> * I find most of the "using this ISD decoding algorithm" in the documentation redundant (just like you don't write "using self")

That's a matter of style. I would always write "Return the minimum distance of
this code" rather than "Return the minimum distance" or "Return the
minimum distance of self". Similarly, decoding is not canonical: the result
depends on the method used.

There was a discussion on sage-devel on this recently. There was no clear
consensus, but many seemed favoured the "of this code"-style.

I'll keep it like this for now, but feel free to give explicit examples where
you find it jarring.

> * if you ask for `time_estimate` with user provided parameters, it currently
> do the calibration and change the parameters. Is this expected? In my mind,
> `calibrate` calls `time_estimate` with different parameters to choose the best
> one.

Good catch: `time_estimate` of course shouldn't overwrite selected parameters.
I've fixed that.

> * the description of the Lee-Brickell differs slightly from the implementation. In step 3, we consider every subset of size less than `p`

No, we let `pi` go from `0` to `p`, both inclusive. What differs is that I, for
brevity, just say we let the coefficients roam through `F^p`, while we actually
go through `F*^pi`, and let `pi` go from 0 to `p`. This is to avoid repeating
the elements with multiple 0s in the first version.
    
> * in step 2, you should check if `y` is low weight. It actually has a good chance to be! (and you take it into account in your probability computation)

This is done in the iteration `pi = 0`.

> * you could use (but this doesn't change much)
> 
> ```sage
> for gA in itertools.combinations(g, pi):
>   for m in itertools.product(Fstar, repeat=pi):
>     e = y - sum(mi*gAi for mi,gAi in zip(m,gA))
> ```

Yes I could, but I don't consider it more elegant. If I was writing in OCaml I'd
do it in the above way, obviously, but not in Python.

> * prefer `... is not None` to `not ... is None`

OK

> For the decoder:
> 
> * in `__init__` you doctest only some exceptions and not all of them

I think all `__init__`s and class docs now have the appropriate doctests.

> * you also don't doctest a user defined algorithm (as allowed by your test `isinstance(algorithm, InformationSetAlgorithm`)

Thank you for insisting on a doctest of this: it revealed a bug and a design dilemma. The bug was that `InformationSetAlgorithm` didn't hash, which meant that `AbstractLinearCode.encoder` crashed since it tries to hash any arguments. This is potentially a problem with `AbstractLinearCode.encoder` which might need to be fixed at some point, but for this case I don't see a reason not to just supply a simple hash function for `InformationSetAlgorithm`.

The design dilemma is that when supplying an ISD algorithm, it is superfluous to also supply `number_errors` to `InformationSetDecoder`, since the algorithm knows its decoding interval. I thought about this and decided to leave it this way, i.e. the user must supply `number_errors` and `algorithm` and `number_errors` must match `algorithm.decoding_interval()`. My argument is that this use case is very rare and for special developer-users; but allowing the shortcut of only supplying `algorithm` would confuse the documentation and mess up the constructor.


> * in `known_algorithms` I would make `d` a class variable `_known_algorithms`

No problem.

> And finally, I would test this on bigger examples, e.g. `codes.random_linear_code(GF(9), 40, 20)` and weight 6 error, or whatever you like but I find this better if this is the only available option (you can't reasonably compute the coset leaders for example).

I don't like to use a random code, since it might fail to decode (granted, with very low probability). I've added an example with  the `[59, 30, 17]` QR code over `GF(3)`, for which syndrome decoding or nearest neighbor decoding is infeasible. The current information-set decoding is extremely fast on the other hand. I've flagged it as long, though it takes less than 0.3 s.

> As a long doctest, we could check that on such a code the time estimate is not too far from reality (lets say within a factor 2). 

A random doc-test should only fail with extremely low probability, otherwise it will cause headaches for other Sage devs and the build bot. The decoding time for information-set decoding is roughly exponentially distributed and has a huge variance. Thus we must average a large number of decoding trials and test this against the calibrated value.

I've implemented such a test for a medium-sized code, where we do 100 iterations, and I test that the elapsed time is within a factor 5 of calibrated. I did a 1-hour trial on my own computer with only light background processes, and factor 2 off calibrated time occurred after 400 trials while factor 3 off calibrated time occurred after 5000 trials:

```
from sage.coding.information_set_decoder import LeeBrickellISDAlgorithm
C = codes.QuadraticResidueCode(37, GF(3))
Chan = channels.StaticErrorRateChannel(C.ambient_space(), 4)
A = LeeBrickellISDAlgorithm(C, (0,4))
A.calibrate()
def time_100():
    A.calibrate()
    import time
    zero = C.ambient_space().zero()
    before = time.clock()
    for i in range(100): A.decode(Chan(zero)); None
    return time.clock() - before

smallest = 1
biggest = 1
i = 0
while True:
    i += 1
    elapsed = time_100()
    frac = elapsed/A.time_estimate()/100
    if frac < smallest:
        smallest = frac
    if frac > biggest:
        biggest = frac
    print "%d: %s, %s" % (i, smallest , biggest)
```


My theoretical musings on these probabilities indicated that - if the
calibration is sound - this should occur far less frequently, however.

Barring an improvement on the calibration (which I'm not motivated to do), if we
observe factors 2 and 3 quite often, we should at least use factor 5 in the
field. This is also considering that unfortunate heavy background load could
impact the doctest, further increasing the probability of false negatives.

Any thoughts?

(The ticket now needs review again)



---

archive/issue_comments_289238.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@johanrosenkilde](#comment:56):\n> Thanks for the speedy review. Here is my less speedy reply.\n> \n> > * you should import as much as possible from `sage.all` instead of hardcoding the whole path (e.g. `sage.modules.free_module_element`) it's more future proof if things ever move around.\n\n> \n> Didn't know that was possible. It's not used many places in Sage either. I don't see any drawbacks though, so I've made the change.\n\n>\n\nI thought at some point it was the way to go, but it's not used much as you say. I'm not so sure now but I like it that way :)\n \n> > * I find most of the \"using this ISD decoding algorithm\" in the documentation redundant (just like you don't write \"using self\")\n\n> \n> That's a matter of style. I would always write \"Return the minimum distance of\n> this code\" rather than \"Return the minimum distance\" or \"Return the\n> minimum distance of self\". Similarly, decoding is not canonical: the result\n> depends on the method used.\n> \n> There was a discussion on sage-devel on this recently. There was no clear\n> consensus, but many seemed favoured the \"of this code\"-style.\n> \n> I'll keep it like this for now, but feel free to give explicit examples where\n> you find it jarring.\n\nNo keep it like that, I realized afterwards that there was no consensus on this.\n\n> \n> > * the description of the Lee-Brickell differs slightly from the implementation. In step 3, we consider every subset of size less than `p`\n\n> No, we let `pi` go from `0` to `p`, both inclusive. What differs is that I, for\n> brevity, just say we let the coefficients roam through `F^p`, while we actually\n> go through `F*^pi`, and let `pi` go from 0 to `p`. This is to avoid repeating\n> the elements with multiple 0s in the first version.\n>     \n\nOK, that's the problem with speedy review, I read too fast sorry.\n\n> > * in step 2, you should check if `y` is low weight. It actually has a good chance to be! (and you take it into account in your probability computation)\n\n> This is done in the iteration `pi = 0`.\n> \n\nagreed\n\n> > * you could use (but this doesn't change much)\n> > \n> > ```sage\n> > for gA in itertools.combinations(g, pi):\n> >   for m in itertools.product(Fstar, repeat=pi):\n> >     e = y - sum(mi*gAi for mi,gAi in zip(m,gA))\n> > ```\n\n> \n> Yes I could, but I don't consider it more elegant. If I was writing in OCaml I'd\n> do it in the above way, obviously, but not in Python.\n> \n\nIt seems also a bit faster in my tests, but you can keep it that way if you don't like this.\n\n> \n> > For the decoder:\n> > \n> > * in `__init__` you doctest only some exceptions and not all of them\n\n> \n> I think all `__init__`s and class docs now have the appropriate doctests.\n\nNot all, e.g. `raise ValueError(\"All elements of number_errors have to be\" ...` and `raise ValueError(\"The provided number of errors should be at\"...` are missing I think.\n\n> \n> > * you also don't doctest a user defined algorithm (as allowed by your test `isinstance(algorithm, InformationSetAlgorithm`)\n\n> \n> Thank you for insisting on a doctest of this: it revealed a bug and a design dilemma. The bug was that `InformationSetAlgorithm` didn't hash, which meant that `AbstractLinearCode.encoder` crashed since it tries to hash any arguments. This is potentially a problem with `AbstractLinearCode.encoder` which might need to be fixed at some point, but for this case I don't see a reason not to just supply a simple hash function for `InformationSetAlgorithm`.\n> \n> The design dilemma is that when supplying an ISD algorithm, it is superfluous to also supply `number_errors` to `InformationSetDecoder`, since the algorithm knows its decoding interval. I thought about this and decided to leave it this way, i.e. the user must supply `number_errors` and `algorithm` and `number_errors` must match `algorithm.decoding_interval()`. My argument is that this use case is very rare and for special developer-users; but allowing the shortcut of only supplying `algorithm` would confuse the documentation and mess up the constructor.\n> \n\nThat's one of the reason my Algorithm classes were more light-weight than yours. They knew nothing and were pure functions accepting arguments. The decoder was the one knowing the parameters used, avoiding the duplication.\n\nI think it's a better design, but I won't fight for this.\n\n> > * in `known_algorithms` I would make `d` a class variable `_known_algorithms`\n\n> \n> No problem.\n> \n> > And finally, I would test this on bigger examples, e.g. `codes.random_linear_code(GF(9), 40, 20)` and weight 6 error, or whatever you like but I find this better if this is the only available option (you can't reasonably compute the coset leaders for example).\n\n> \n> I don't like to use a random code, since it might fail to decode (granted, with very low probability). I've added an example with  the `[59, 30, 17]` QR code over `GF(3)`, for which syndrome decoding or nearest neighbor decoding is infeasible. The current information-set decoding is extremely fast on the other hand. I've flagged it as long, though it takes less than 0.3 s.\n> \n\nYou could choose a random seed such that everything goes well. But I'm fine with your QR code.\n\n> > As a long doctest, we could check that on such a code the time estimate is not too far from reality (lets say within a factor 2). \n\n> \n\n[...]\n> \n> Barring an improvement on the calibration (which I'm not motivated to do), if we\n> observe factors 2 and 3 quite often, we should at least use factor 5 in the\n> field. This is also considering that unfortunate heavy background load could\n> impact the doctest, further increasing the probability of false negatives.\n> \n\nIf It's not clear how to make it right, maybe it's better left for another ticket?\n\nFor an improvement in the calibration, I think I can improve things both in precision and clarity!\nAs we want to empirically get the timing, we don't need to separate the time_information_set_steps and time_search_loop.\nYou could just add some options:\n\n```sage\ndef decode(self, r, max_iter=None, _calibrate=False):\n    ...\n    i = 0\n    while i != max_iter:\n        i += 1\n        ...\n                if not _calibrate: return r - e   # when we calibrate, never return\n```\n\nThis would end up with less code duplication and a more precise estimate.\nOnce again, feel free to leave this to another ticket if you want, it wouldn't break anything to change this later.\n\n> Any thoughts?\n\n>\n\n`If one chooses anything above `d/2`, the algorithm does not guarantee to return a nearest codeword.`\n \nI would add we don't even guarantee to return a codeword!\n\n> (The ticket now needs review again)\n\nI still have to check the rendering of the documentation, but this get's close to a positive review from me.",
    "created_at": "2017-07-06T14:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289238",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@johanrosenkilde](#comment:56):
> Thanks for the speedy review. Here is my less speedy reply.
> 
> > * you should import as much as possible from `sage.all` instead of hardcoding the whole path (e.g. `sage.modules.free_module_element`) it's more future proof if things ever move around.

> 
> Didn't know that was possible. It's not used many places in Sage either. I don't see any drawbacks though, so I've made the change.

>

I thought at some point it was the way to go, but it's not used much as you say. I'm not so sure now but I like it that way :)
 
> > * I find most of the "using this ISD decoding algorithm" in the documentation redundant (just like you don't write "using self")

> 
> That's a matter of style. I would always write "Return the minimum distance of
> this code" rather than "Return the minimum distance" or "Return the
> minimum distance of self". Similarly, decoding is not canonical: the result
> depends on the method used.
> 
> There was a discussion on sage-devel on this recently. There was no clear
> consensus, but many seemed favoured the "of this code"-style.
> 
> I'll keep it like this for now, but feel free to give explicit examples where
> you find it jarring.

No keep it like that, I realized afterwards that there was no consensus on this.

> 
> > * the description of the Lee-Brickell differs slightly from the implementation. In step 3, we consider every subset of size less than `p`

> No, we let `pi` go from `0` to `p`, both inclusive. What differs is that I, for
> brevity, just say we let the coefficients roam through `F^p`, while we actually
> go through `F*^pi`, and let `pi` go from 0 to `p`. This is to avoid repeating
> the elements with multiple 0s in the first version.
>     

OK, that's the problem with speedy review, I read too fast sorry.

> > * in step 2, you should check if `y` is low weight. It actually has a good chance to be! (and you take it into account in your probability computation)

> This is done in the iteration `pi = 0`.
> 

agreed

> > * you could use (but this doesn't change much)
> > 
> > ```sage
> > for gA in itertools.combinations(g, pi):
> >   for m in itertools.product(Fstar, repeat=pi):
> >     e = y - sum(mi*gAi for mi,gAi in zip(m,gA))
> > ```

> 
> Yes I could, but I don't consider it more elegant. If I was writing in OCaml I'd
> do it in the above way, obviously, but not in Python.
> 

It seems also a bit faster in my tests, but you can keep it that way if you don't like this.

> 
> > For the decoder:
> > 
> > * in `__init__` you doctest only some exceptions and not all of them

> 
> I think all `__init__`s and class docs now have the appropriate doctests.

Not all, e.g. `raise ValueError("All elements of number_errors have to be" ...` and `raise ValueError("The provided number of errors should be at"...` are missing I think.

> 
> > * you also don't doctest a user defined algorithm (as allowed by your test `isinstance(algorithm, InformationSetAlgorithm`)

> 
> Thank you for insisting on a doctest of this: it revealed a bug and a design dilemma. The bug was that `InformationSetAlgorithm` didn't hash, which meant that `AbstractLinearCode.encoder` crashed since it tries to hash any arguments. This is potentially a problem with `AbstractLinearCode.encoder` which might need to be fixed at some point, but for this case I don't see a reason not to just supply a simple hash function for `InformationSetAlgorithm`.
> 
> The design dilemma is that when supplying an ISD algorithm, it is superfluous to also supply `number_errors` to `InformationSetDecoder`, since the algorithm knows its decoding interval. I thought about this and decided to leave it this way, i.e. the user must supply `number_errors` and `algorithm` and `number_errors` must match `algorithm.decoding_interval()`. My argument is that this use case is very rare and for special developer-users; but allowing the shortcut of only supplying `algorithm` would confuse the documentation and mess up the constructor.
> 

That's one of the reason my Algorithm classes were more light-weight than yours. They knew nothing and were pure functions accepting arguments. The decoder was the one knowing the parameters used, avoiding the duplication.

I think it's a better design, but I won't fight for this.

> > * in `known_algorithms` I would make `d` a class variable `_known_algorithms`

> 
> No problem.
> 
> > And finally, I would test this on bigger examples, e.g. `codes.random_linear_code(GF(9), 40, 20)` and weight 6 error, or whatever you like but I find this better if this is the only available option (you can't reasonably compute the coset leaders for example).

> 
> I don't like to use a random code, since it might fail to decode (granted, with very low probability). I've added an example with  the `[59, 30, 17]` QR code over `GF(3)`, for which syndrome decoding or nearest neighbor decoding is infeasible. The current information-set decoding is extremely fast on the other hand. I've flagged it as long, though it takes less than 0.3 s.
> 

You could choose a random seed such that everything goes well. But I'm fine with your QR code.

> > As a long doctest, we could check that on such a code the time estimate is not too far from reality (lets say within a factor 2). 

> 

[...]
> 
> Barring an improvement on the calibration (which I'm not motivated to do), if we
> observe factors 2 and 3 quite often, we should at least use factor 5 in the
> field. This is also considering that unfortunate heavy background load could
> impact the doctest, further increasing the probability of false negatives.
> 

If It's not clear how to make it right, maybe it's better left for another ticket?

For an improvement in the calibration, I think I can improve things both in precision and clarity!
As we want to empirically get the timing, we don't need to separate the time_information_set_steps and time_search_loop.
You could just add some options:

```sage
def decode(self, r, max_iter=None, _calibrate=False):
    ...
    i = 0
    while i != max_iter:
        i += 1
        ...
                if not _calibrate: return r - e   # when we calibrate, never return
```

This would end up with less code duplication and a more precise estimate.
Once again, feel free to leave this to another ticket if you want, it wouldn't break anything to change this later.

> Any thoughts?

>

`If one chooses anything above `d/2`, the algorithm does not guarantee to return a nearest codeword.`
 
I would add we don't even guarantee to return a codeword!

> (The ticket now needs review again)

I still have to check the rendering of the documentation, but this get's close to a positive review from me.



---

archive/issue_comments_289239.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1557ce9c893f1ba9b71406229657ae6973307fbd\"><code>1557ce9</code></a></td><td><code>*args should pass to decoder in `AbstractLinearCode.decode_to_code/message`</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/395ce3896a9d3a90199e9c57787ae87c713b9c54\"><code>395ce38</code></a></td><td><code>Tests for all raised exceptions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5924a39cd0c5a4bb8d44d47f48deb2add1ac330b\"><code>5924a39</code></a></td><td><code>Improved calibration doc test</code></td></tr></table>\n",
    "created_at": "2017-07-06T19:35:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289239",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1557ce9c893f1ba9b71406229657ae6973307fbd"><code>1557ce9</code></a></td><td><code>*args should pass to decoder in `AbstractLinearCode.decode_to_code/message`</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/395ce3896a9d3a90199e9c57787ae87c713b9c54"><code>395ce38</code></a></td><td><code>Tests for all raised exceptions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5924a39cd0c5a4bb8d44d47f48deb2add1ac330b"><code>5924a39</code></a></td><td><code>Improved calibration doc test</code></td></tr></table>




---

archive/issue_comments_289240.json:
```json
{
    "body": "Changed commit from **[`c6ddf43`](https://github.com/sagemath/sagetrac-mirror/commit/c6ddf4318951e5619d5f0dfa1b91ddfb6e8a9f3e)** to **[`5924a39`](https://github.com/sagemath/sagetrac-mirror/commit/5924a39cd0c5a4bb8d44d47f48deb2add1ac330b)**",
    "created_at": "2017-07-06T19:35:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289240",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c6ddf43`](https://github.com/sagemath/sagetrac-mirror/commit/c6ddf4318951e5619d5f0dfa1b91ddfb6e8a9f3e)** to **[`5924a39`](https://github.com/sagemath/sagetrac-mirror/commit/5924a39cd0c5a4bb8d44d47f48deb2add1ac330b)**



---

archive/issue_comments_289241.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@sagetrac-ylchapuy](#comment:57):\n> > I think all `__init__`s and class docs now have the appropriate doctests.\n\n> \n> Not all, e.g. `raise ValueError(\"All elements of number_errors have to be\" ...` and `raise ValueError(\"The provided number of errors should be at\"...` are missing I think.\n\nYou're right, sorry. I went over the entire file more carefully now.\n\n> That's one of the reason my Algorithm classes were more light-weight than yours. They knew nothing and were pure functions accepting arguments. The decoder was the one knowing the parameters used, avoiding the duplication.\n> \n> I think it's a better design, but I won't fight for this.\n\nOK, let's not debate this further. If you feel strongly about it when you\nimplement Stern-Dumer, you can implement the change there.\n\n> > > As a long doctest, we could check that on such a code the time estimate is not too far from reality (lets say within a factor 2). \n\n> > \n\n> [...]\n> > \n> > Barring an improvement on the calibration (which I'm not motivated to do), if we\n> > observe factors 2 and 3 quite often, we should at least use factor 5 in the\n> > field. This is also considering that unfortunate heavy background load could\n> > impact the doctest, further increasing the probability of false negatives.\n> > \n\n> \n> If It's not clear how to make it right, maybe it's better left for another ticket?\n\nPossibly. I generally don't see how tests of calibration and threshold selection\nalgorithms fit into Sage's doctesting ecology.\n\nI slightly improved my solution from before (run multiple calibrations). I feel\npretty confident that the test there now is better than nothing and should not\nreally cause false negatives. If you don't feel comfortable with it we can also\nremove it again.\n\n> For an improvement in the calibration, I think I can improve things both in precision and clarity!\n\nI see your idea. I originally wanted to avoid this for two reasons: 1) it\npollutes the code of the real algorithm; and 2) it adds unnecessary logic to a\nbusy inner-loop. Probably 2) is totally negligible though, and 1) is true but\nthe alternative is code duplication.\n\nLet's wait with this for another ticket. I'm waiting to see how Stern-Dumer\nperforms in practice before spending lots of time optimising Lee-Brickell (I\nhave other improvements in mind as well).\n\nKeep in mind for your solution though, that you also need some mechanism to\navoid large values of `p` where a single iteration would take very long.\n\n> `If one chooses anything above `d/2`, the algorithm does not guarantee to return a nearest codeword.`\n>  \n> I would add we don't even guarantee to return a codeword!\n\nWhat do you mean? The algorithm might not return, but if it does it surely\nreturns a codeword. That it might not return should be covered by the red\nwarning box below.\n\n> I still have to check the rendering of the documentation, but this get's close to a positive review from me.\n\nGreat.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1557ce9c893f1ba9b71406229657ae6973307fbd\"><code>1557ce9</code></a></td><td><code>*args should pass to decoder in `AbstractLinearCode.decode_to_code/message`</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/395ce3896a9d3a90199e9c57787ae87c713b9c54\"><code>395ce38</code></a></td><td><code>Tests for all raised exceptions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5924a39cd0c5a4bb8d44d47f48deb2add1ac330b\"><code>5924a39</code></a></td><td><code>Improved calibration doc test</code></td></tr></table>\n",
    "created_at": "2017-07-06T19:39:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289241",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@sagetrac-ylchapuy](#comment:57):
> > I think all `__init__`s and class docs now have the appropriate doctests.

> 
> Not all, e.g. `raise ValueError("All elements of number_errors have to be" ...` and `raise ValueError("The provided number of errors should be at"...` are missing I think.

You're right, sorry. I went over the entire file more carefully now.

> That's one of the reason my Algorithm classes were more light-weight than yours. They knew nothing and were pure functions accepting arguments. The decoder was the one knowing the parameters used, avoiding the duplication.
> 
> I think it's a better design, but I won't fight for this.

OK, let's not debate this further. If you feel strongly about it when you
implement Stern-Dumer, you can implement the change there.

> > > As a long doctest, we could check that on such a code the time estimate is not too far from reality (lets say within a factor 2). 

> > 

> [...]
> > 
> > Barring an improvement on the calibration (which I'm not motivated to do), if we
> > observe factors 2 and 3 quite often, we should at least use factor 5 in the
> > field. This is also considering that unfortunate heavy background load could
> > impact the doctest, further increasing the probability of false negatives.
> > 

> 
> If It's not clear how to make it right, maybe it's better left for another ticket?

Possibly. I generally don't see how tests of calibration and threshold selection
algorithms fit into Sage's doctesting ecology.

I slightly improved my solution from before (run multiple calibrations). I feel
pretty confident that the test there now is better than nothing and should not
really cause false negatives. If you don't feel comfortable with it we can also
remove it again.

> For an improvement in the calibration, I think I can improve things both in precision and clarity!

I see your idea. I originally wanted to avoid this for two reasons: 1) it
pollutes the code of the real algorithm; and 2) it adds unnecessary logic to a
busy inner-loop. Probably 2) is totally negligible though, and 1) is true but
the alternative is code duplication.

Let's wait with this for another ticket. I'm waiting to see how Stern-Dumer
performs in practice before spending lots of time optimising Lee-Brickell (I
have other improvements in mind as well).

Keep in mind for your solution though, that you also need some mechanism to
avoid large values of `p` where a single iteration would take very long.

> `If one chooses anything above `d/2`, the algorithm does not guarantee to return a nearest codeword.`
>  
> I would add we don't even guarantee to return a codeword!

What do you mean? The algorithm might not return, but if it does it surely
returns a codeword. That it might not return should be covered by the red
warning box below.

> I still have to check the rendering of the documentation, but this get's close to a positive review from me.

Great.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1557ce9c893f1ba9b71406229657ae6973307fbd"><code>1557ce9</code></a></td><td><code>*args should pass to decoder in `AbstractLinearCode.decode_to_code/message`</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/395ce3896a9d3a90199e9c57787ae87c713b9c54"><code>395ce38</code></a></td><td><code>Tests for all raised exceptions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5924a39cd0c5a4bb8d44d47f48deb2add1ac330b"><code>5924a39</code></a></td><td><code>Improved calibration doc test</code></td></tr></table>




---

archive/issue_comments_289242.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\ntwo low hanging fruits, the bot complains about\n\n*  a doctest failure in `src/doc/en/constructions/linear_codes.rst`\n\n* a missing doctest:\n\nMissing doctests in `coding/information_set_decoder.py`: 23 / 24 = 95%\n\nit' s the `__hash__`.",
    "created_at": "2017-07-07T20:44:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289242",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:60" align="right">comment:60</div>

two low hanging fruits, the bot complains about

*  a doctest failure in `src/doc/en/constructions/linear_codes.rst`

* a missing doctest:

Missing doctests in `coding/information_set_decoder.py`: 23 / 24 = 95%

it' s the `__hash__`.



---

archive/issue_events_285739.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2017-07-07T20:45:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285739"
}
```



---

archive/issue_events_285740.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2017-07-07T20:45:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285740"
}
```



---

archive/issue_comments_289243.json:
```json
{
    "body": "Changed commit from **[`5924a39`](https://github.com/sagemath/sagetrac-mirror/commit/5924a39cd0c5a4bb8d44d47f48deb2add1ac330b)** to **[`50018f6`](https://github.com/sagemath/sagetrac-mirror/commit/50018f67b8c6c214f8156d21c68a504b493e772c)**",
    "created_at": "2017-07-08T19:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289243",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5924a39`](https://github.com/sagemath/sagetrac-mirror/commit/5924a39cd0c5a4bb8d44d47f48deb2add1ac330b)** to **[`50018f6`](https://github.com/sagemath/sagetrac-mirror/commit/50018f67b8c6c214f8156d21c68a504b493e772c)**



---

archive/issue_comments_289244.json:
```json
{
    "body": "<div id=\"comment:62\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50018f67b8c6c214f8156d21c68a504b493e772c\"><code>50018f6</code></a></td><td><code>Fix doctest failure in doc. Add docstring and test to __hash__</code></td></tr></table>\n",
    "created_at": "2017-07-08T19:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289244",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50018f67b8c6c214f8156d21c68a504b493e772c"><code>50018f6</code></a></td><td><code>Fix doctest failure in doc. Add docstring and test to __hash__</code></td></tr></table>




---

archive/issue_comments_289245.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nIndeed. These omissions are fixed now.",
    "created_at": "2017-07-08T19:00:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289245",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:63" align="right">comment:63</div>

Indeed. These omissions are fixed now.



---

archive/issue_events_285741.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2017-07-08T19:00:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285741"
}
```



---

archive/issue_events_285742.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2017-07-08T19:00:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285742"
}
```



---

archive/issue_events_285743.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2017-07-16T16:47:11Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285743"
}
```



---

archive/issue_events_285744.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2017-07-16T16:47:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285744"
}
```



---

archive/issue_events_285745.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2017-07-16T16:47:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285745"
}
```



---

archive/issue_events_285746.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2017-07-16T16:47:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285746"
}
```



---

archive/issue_comments_289246.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nOk, I finally took the time to build the doc and check it out. Build without a fuss and LGTM.\n\nYour long doctest with `codes.QuadraticResidueCode(59, GF(3))` takes around 150ms on my machine, I don't know if I would call this long but it's not a problem.\n\nThe bot is also green, so let's  move forward: positive review :)",
    "created_at": "2017-07-16T16:47:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289246",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:64" align="right">comment:64</div>

Ok, I finally took the time to build the doc and check it out. Build without a fuss and LGTM.

Your long doctest with `codes.QuadraticResidueCode(59, GF(3))` takes around 150ms on my machine, I don't know if I would call this long but it's not a problem.

The bot is also green, so let's  move forward: positive review :)



---

archive/issue_comments_289247.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nGreat! Thanks for the cooperation - I think this has become a really nice addition to Sage. I'm looking forward to seeing your implementation in #23244.",
    "created_at": "2017-07-16T17:10:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289247",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:65" align="right">comment:65</div>

Great! Thanks for the cooperation - I think this has become a really nice addition to Sage. I'm looking forward to seeing your implementation in #23244.



---

archive/issue_comments_289248.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\n\n```\nsage -t --long src/sage/coding/information_set_decoder.py\n**********************************************************************\nFile \"src/sage/coding/information_set_decoder.py\", line 553, in sage.coding.information_set_decoder.LeeBrickellISDAlgorithm.calibrate\nFailed example:\n    A.time_estimate()/5 < avg and avg < A.time_estimate() * 5 # long time\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of  15 in sage.coding.information_set_decoder.LeeBrickellISDAlgorithm.calibrate\n    [170 tests, 1 failure, 5.71 s]\n```",
    "created_at": "2017-07-22T22:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289248",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:66" align="right">comment:66</div>


```
sage -t --long src/sage/coding/information_set_decoder.py
**********************************************************************
File "src/sage/coding/information_set_decoder.py", line 553, in sage.coding.information_set_decoder.LeeBrickellISDAlgorithm.calibrate
Failed example:
    A.time_estimate()/5 < avg and avg < A.time_estimate() * 5 # long time
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of  15 in sage.coding.information_set_decoder.LeeBrickellISDAlgorithm.calibrate
    [170 tests, 1 failure, 5.71 s]
```



---

archive/issue_events_285747.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-22T22:09:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285747"
}
```



---

archive/issue_events_285748.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-22T22:09:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285748"
}
```



---

archive/issue_comments_289249.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@vbraun](#comment:66):\n> \n> ```\n> sage -t --long src/sage/coding/information_set_decoder.py\n> **********************************************************************\n> File \"src/sage/coding/information_set_decoder.py\", line 553, in sage.coding.information_set_decoder.LeeBrickellISDAlgorithm.calibrate\n> Failed example:\n>     A.time_estimate()/5 < avg and avg < A.time_estimate() * 5 # long time\n> Expected:\n>     True\n> Got:\n>     False\n> **********************************************************************\n> 1 item had failures:\n>    1 of  15 in sage.coding.information_set_decoder.LeeBrickellISDAlgorithm.calibrate\n>     [170 tests, 1 failure, 5.71 s]\n> ```\n\nI couldn't get that on my setup while repeating the test a 1000 time.",
    "created_at": "2017-07-23T01:14:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289249",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@vbraun](#comment:66):
> 
> ```
> sage -t --long src/sage/coding/information_set_decoder.py
> **********************************************************************
> File "src/sage/coding/information_set_decoder.py", line 553, in sage.coding.information_set_decoder.LeeBrickellISDAlgorithm.calibrate
> Failed example:
>     A.time_estimate()/5 < avg and avg < A.time_estimate() * 5 # long time
> Expected:
>     True
> Got:
>     False
> **********************************************************************
> 1 item had failures:
>    1 of  15 in sage.coding.information_set_decoder.LeeBrickellISDAlgorithm.calibrate
>     [170 tests, 1 failure, 5.71 s]
> ```

I couldn't get that on my setup while repeating the test a 1000 time.



---

archive/issue_comments_289250.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nHmm, we were also in doubt about that test, as you can see from the discussion above. I had believed that it was fairly stable now, but evidently timing behaviour on the build bots are not very dependable.\n\nSo perhaps we should simply remove the test - what do you think? Any alternative suggestions for how we could test the calibration code?",
    "created_at": "2017-07-23T11:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289250",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:68" align="right">comment:68</div>

Hmm, we were also in doubt about that test, as you can see from the discussion above. I had believed that it was fairly stable now, but evidently timing behaviour on the build bots are not very dependable.

So perhaps we should simply remove the test - what do you think? Any alternative suggestions for how we could test the calibration code?



---

archive/issue_comments_289251.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\n* Don't test that the timings have particular values\n* Do test that timings can be collected\n* Do test that your code makes the right decisions when you specify timings",
    "created_at": "2017-07-23T11:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289251",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:69" align="right">comment:69</div>

* Don't test that the timings have particular values
* Do test that timings can be collected
* Do test that your code makes the right decisions when you specify timings



---

archive/issue_comments_289252.json:
```json
{
    "body": "<div id=\"comment:70\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb2efb3d03f135e4f163bf3b2554c2a8d47054ff\"><code>eb2efb3</code></a></td><td><code>Replace brittle calibration test with a test for proper selection</code></td></tr></table>\n",
    "created_at": "2017-07-23T13:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289252",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb2efb3d03f135e4f163bf3b2554c2a8d47054ff"><code>eb2efb3</code></a></td><td><code>Replace brittle calibration test with a test for proper selection</code></td></tr></table>




---

archive/issue_comments_289253.json:
```json
{
    "body": "Changed commit from **[`50018f6`](https://github.com/sagemath/sagetrac-mirror/commit/50018f67b8c6c214f8156d21c68a504b493e772c)** to **[`eb2efb3`](https://github.com/sagemath/sagetrac-mirror/commit/eb2efb3d03f135e4f163bf3b2554c2a8d47054ff)**",
    "created_at": "2017-07-23T13:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289253",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`50018f6`](https://github.com/sagemath/sagetrac-mirror/commit/50018f67b8c6c214f8156d21c68a504b493e772c)** to **[`eb2efb3`](https://github.com/sagemath/sagetrac-mirror/commit/eb2efb3d03f135e4f163bf3b2554c2a8d47054ff)**



---

archive/issue_comments_289254.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@vbraun](#comment:69):\n> * Don't test that the timings have particular values\n> * Do test that timings can be collected\n> * Do test that your code makes the right decisions when you specify timings\n\nOK, I've pushed a patch removing the offending test and instead making a small refactor such that we can test the last item on your list.\n\nIt seems a pity, however, that there is no good way to test that the calibrated timings have anything to do with reality.",
    "created_at": "2017-07-23T13:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289254",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@vbraun](#comment:69):
> * Don't test that the timings have particular values
> * Do test that timings can be collected
> * Do test that your code makes the right decisions when you specify timings

OK, I've pushed a patch removing the offending test and instead making a small refactor such that we can test the last item on your list.

It seems a pity, however, that there is no good way to test that the calibrated timings have anything to do with reality.



---

archive/issue_events_285749.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2017-07-23T13:05:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285749"
}
```



---

archive/issue_events_285750.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2017-07-23T13:05:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285750"
}
```



---

archive/issue_events_285751.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2017-07-27T09:03:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285751"
}
```



---

archive/issue_events_285752.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2017-07-27T09:03:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285752"
}
```



---

archive/issue_comments_289255.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nOK, let's do it that way (and the failure in the docbuild is unrelated)\n\nLGTM",
    "created_at": "2017-07-27T09:03:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289255",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:73" align="right">comment:73</div>

OK, let's do it that way (and the failure in the docbuild is unrelated)

LGTM



---

archive/issue_comments_289256.json:
```json
{
    "body": "Changed branch from **[u/jsrn/information_set_decoding](https://github.com/sagemath/sagetrac-mirror/tree/u/jsrn/information_set_decoding)** to **[`eb2efb3`](https://github.com/sagemath/sagetrac-mirror/commit/eb2efb3d03f135e4f163bf3b2554c2a8d47054ff)**",
    "created_at": "2017-07-29T15:31:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20138#issuecomment-289256",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jsrn/information_set_decoding](https://github.com/sagemath/sagetrac-mirror/tree/u/jsrn/information_set_decoding)** to **[`eb2efb3`](https://github.com/sagemath/sagetrac-mirror/commit/eb2efb3d03f135e4f163bf3b2554c2a8d47054ff)**



---

archive/issue_events_285753.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-29T15:31:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285753"
}
```



---

archive/issue_events_285754.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0f7f765b57926b64e7100e07371a6b4abcd64d0d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-07-29T15:31:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20138",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20138#event-285754"
}
```
