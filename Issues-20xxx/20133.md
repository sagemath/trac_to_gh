# Issue 20133: Use pkg-config for Sage setup

archive/issues_019896.json:
```json
{
    "assignees": [],
    "body": "Use pkg-config for linking Sage extension modules where possible\n\nCC:  @kiwifb\n\nBranch/Commit: **[5d1cf57](https://github.com/sagemath/sagetrac-mirror/commit/5d1cf572adbda8742305e5c59711c46b5f96fcf9)**\n\nReviewer: **Volker Braun, Fran\u00e7ois Bissey**\n\nAuthor: **Volker Braun, Fran\u00e7ois Bissey**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20133_\n\n",
    "closed_at": "2016-03-05T09:47:53Z",
    "created_at": "2016-02-28T14:05:44Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Use pkg-config for Sage setup",
    "type": "issue",
    "updated_at": "2016-03-05T09:47:53Z",
    "url": "https://github.com/sagemath/sage/issues/20133",
    "user": "https://github.com/vbraun"
}
```
Use pkg-config for linking Sage extension modules where possible

CC:  @kiwifb

Branch/Commit: **[5d1cf57](https://github.com/sagemath/sagetrac-mirror/commit/5d1cf572adbda8742305e5c59711c46b5f96fcf9)**

Reviewer: **Volker Braun, François Bissey**

Author: **Volker Braun, François Bissey**

_Issue created by migration from https://trac.sagemath.org/ticket/20133_





---

archive/issue_events_266448.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-28T14:05:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266448"
}
```



---

archive/issue_events_266449.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-28T14:05:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266449"
}
```



---

archive/issue_comments_291549.json:
```json
{
    "body": "Branch: **[u/vbraun/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/use_pkg_config_for_sage_setup)**",
    "created_at": "2016-02-28T14:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291549",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/use_pkg_config_for_sage_setup)**



---

archive/issue_comments_291550.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/066d7e8fd64c8466cfeb3407919d2781a3404c4e\">066d7e8</a></td><td><code>Use pkg-config for Sage linking</code></td></tr></table>\n",
    "created_at": "2016-02-28T14:39:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291550",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/066d7e8fd64c8466cfeb3407919d2781a3404c4e">066d7e8</a></td><td><code>Use pkg-config for Sage linking</code></td></tr></table>




---

archive/issue_comments_291551.json:
```json
{
    "body": "Commit: **[066d7e8](https://github.com/sagemath/sagetrac-mirror/commit/066d7e8fd64c8466cfeb3407919d2781a3404c4e)**",
    "created_at": "2016-02-28T14:39:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291551",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[066d7e8](https://github.com/sagemath/sagetrac-mirror/commit/066d7e8fd64c8466cfeb3407919d2781a3404c4e)**



---

archive/issue_comments_291552.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2016-02-28T14:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291552",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_events_266450.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-28T14:52:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266450"
}
```



---

archive/issue_events_266451.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-28T14:52:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266451"
}
```



---

archive/issue_comments_291553.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Use pkg-config for linking Sage extension modules where possible\n``````\n",
    "created_at": "2016-02-28T14:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291553",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Use pkg-config for linking Sage extension modules where possible
``````




---

archive/issue_comments_291554.json:
```json
{
    "body": "Dependencies: **#20130**",
    "created_at": "2016-02-28T15:11:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291554",
    "user": "https://github.com/vbraun"
}
```

Dependencies: **#20130**



---

archive/issue_comments_291555.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18d59bf4dda7b0521395b917e30edb5f026f524f\">18d59bf</a></td><td><code>Move third-party packages to pkg-config blas</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de7efd23ffb7c9ed223bf769e55f585f47566d1a\">de7efd2</a></td><td><code>Fix typo: use lapack.pc not blas.pc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1302b23fb533a17e91f66bda951c3394eed1463\">f1302b2</a></td><td><code>Bump patchlevels</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/555b25811afe8da5d83c3ed6461e423a70f961f7\">555b258</a></td><td><code>Iml version/patchlevel fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f0e007485addd84f429b4dbd82831c4352c66ed\">8f0e007</a></td><td><code>Use pkg-config for Sage linking</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33d50b200d54bcf827b99d54184b16062db0ea85\">33d50b2</a></td><td><code>Fix typo</code></td></tr></table>\n",
    "created_at": "2016-02-28T15:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291555",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18d59bf4dda7b0521395b917e30edb5f026f524f">18d59bf</a></td><td><code>Move third-party packages to pkg-config blas</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de7efd23ffb7c9ed223bf769e55f585f47566d1a">de7efd2</a></td><td><code>Fix typo: use lapack.pc not blas.pc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1302b23fb533a17e91f66bda951c3394eed1463">f1302b2</a></td><td><code>Bump patchlevels</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/555b25811afe8da5d83c3ed6461e423a70f961f7">555b258</a></td><td><code>Iml version/patchlevel fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f0e007485addd84f429b4dbd82831c4352c66ed">8f0e007</a></td><td><code>Use pkg-config for Sage linking</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33d50b200d54bcf827b99d54184b16062db0ea85">33d50b2</a></td><td><code>Fix typo</code></td></tr></table>




---

archive/issue_comments_291556.json:
```json
{
    "body": "Changed commit from **[066d7e8](https://github.com/sagemath/sagetrac-mirror/commit/066d7e8fd64c8466cfeb3407919d2781a3404c4e)** to **[33d50b2](https://github.com/sagemath/sagetrac-mirror/commit/33d50b200d54bcf827b99d54184b16062db0ea85)**",
    "created_at": "2016-02-28T15:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291556",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[066d7e8](https://github.com/sagemath/sagetrac-mirror/commit/066d7e8fd64c8466cfeb3407919d2781a3404c4e)** to **[33d50b2](https://github.com/sagemath/sagetrac-mirror/commit/33d50b200d54bcf827b99d54184b16062db0ea85)**



---

archive/issue_comments_291557.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7772cee4683aeb42ab7ecd26792850bcaa794e5\">a7772ce</a></td><td><code>Do not doctest that cblas has a particular name</code></td></tr></table>\n",
    "created_at": "2016-02-28T15:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291557",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6" align="right">Comment 6</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7772cee4683aeb42ab7ecd26792850bcaa794e5">a7772ce</a></td><td><code>Do not doctest that cblas has a particular name</code></td></tr></table>




---

archive/issue_comments_291558.json:
```json
{
    "body": "Changed commit from **[33d50b2](https://github.com/sagemath/sagetrac-mirror/commit/33d50b200d54bcf827b99d54184b16062db0ea85)** to **[a7772ce](https://github.com/sagemath/sagetrac-mirror/commit/a7772cee4683aeb42ab7ecd26792850bcaa794e5)**",
    "created_at": "2016-02-28T15:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291558",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[33d50b2](https://github.com/sagemath/sagetrac-mirror/commit/33d50b200d54bcf827b99d54184b16062db0ea85)** to **[a7772ce](https://github.com/sagemath/sagetrac-mirror/commit/a7772cee4683aeb42ab7ecd26792850bcaa794e5)**



---

archive/issue_events_266452.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-28T19:16:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266452"
}
```



---

archive/issue_events_266453.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-02-28T20:42:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266453"
}
```



---

archive/issue_events_266454.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-02-28T20:42:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266454"
}
```



---

archive/issue_comments_291559.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nI think there is more to do in `cython.py`. In sage-on-gentoo I added a `libdir` in the output of `pyx_preparse` to take into account potential `blas/lapack` outside of sage.\n\nWhich means I had also to add it in `cython`, the extra stuff look like this\n\n```\n@@ -208,8 +192,8 @@\n         '.../sage/ext',\n         '.../cysignals'],\n         'c',\n-        [], ['-w', '-O2'])\n-        sage: s, libs, inc, lang, f, args = pyx_preparse(\"# clang c++\\n #clib foo\\n # cinclude bar\\n\")\n+        [], ['-w', '-O2'],...)\n+        sage: s, libs, inc, lang, f, args, libdirs = pyx_preparse(\"# clang c++\\n #clib foo\\n # cinclude bar\\n\")\n         sage: lang\n         'c++'\n \n@@ -234,7 +218,7 @@\n         '.../sage/ext',\n         '.../cysignals']\n \n-        sage: s, libs, inc, lang, f, args = pyx_preparse(\"# cargs -O3 -ggdb\\n\")\n+        sage: s, libs, inc, lang, f, args, libdirs = pyx_preparse(\"# cargs -O3 -ggdb\\n\")\n         sage: args\n         ['-w', '-O2', '-O3', '-ggdb']\n \n@@ -263,6 +247,7 @@\n     s = \"\"\"\\ninclude \"cdefs.pxi\"\\n\"\"\" + s\n     s = \"\"\"\\ninclude \"cysignals/signals.pxi\"  # ctrl-c interrupt block support\\ninclude \"stdsage.pxi\"\\n\"\"\" + s\n     args, s = parse_keywords('cargs', s)\n+    libdirs = cblas_library_dirs()\n     args = ['-w','-O2'] + args\n \n     # Add cysignals directory to includes\n@@ -271,7 +256,7 @@\n         if os.path.isdir(cysignals_path):\n             inc.append(cysignals_path)\n \n-    return s, libs, inc, lang, additional_source_files, args\n+    return s, libs, inc, lang, additional_source_files, args, libdirs\n \n ################################################################\n # If the user attaches a .spyx file and changes it, we have\n@@ -413,7 +398,7 @@\n \n     F = open(filename).read()\n \n-    F, libs, includes, language, additional_source_files, extra_args = pyx_preparse(F)\n+    F, libs, includes, language, additional_source_files, extra_args, libdirs = pyx_preparse(F)\n \n     # add the working directory to the includes so custom headers etc. work\n     includes.append(os.path.split(os.path.splitext(filename)[0])[0])\n@@ -453,19 +438,17 @@\n \n from sage.env import SAGE_LOCAL\n \n-extra_link_args =  ['-L' + SAGE_LOCAL + '/lib']\n extra_compile_args = %s\n \n ext_modules = [Extension('%s', sources=['%s.%s', %s],\n                      libraries=%s,\n-                     library_dirs=[SAGE_LOCAL + '/lib/'],\n+                     library_dirs=[SAGE_LOCAL + '/lib/', '%s'],\n                      extra_compile_args = extra_compile_args,\n-                     extra_link_args = extra_link_args,\n                      language = '%s' )]\n \n setup(ext_modules = ext_modules,\n       include_dirs = %s)\n-    \"\"\"%(extra_args, name, name, extension, additional_source_files, libs, language, includes)\n+    \"\"\"%(extra_args, name, name, extension, additional_source_files, libs, libdirs, language, includes)\n     open('%s/setup.py'%build_dir,'w').write(setup)\n     cython_include = ' '.join([\"-I '%s'\"%x for x in includes if len(x.strip()) > 0 ])\n \n```\nunless you have that sorted some other way I didn't notice, I would that part to be included.",
    "created_at": "2016-02-28T20:42:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291559",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">Comment 8</div>

I think there is more to do in `cython.py`. In sage-on-gentoo I added a `libdir` in the output of `pyx_preparse` to take into account potential `blas/lapack` outside of sage.

Which means I had also to add it in `cython`, the extra stuff look like this

```
@@ -208,8 +192,8 @@
         '.../sage/ext',
         '.../cysignals'],
         'c',
-        [], ['-w', '-O2'])
-        sage: s, libs, inc, lang, f, args = pyx_preparse("# clang c++\n #clib foo\n # cinclude bar\n")
+        [], ['-w', '-O2'],...)
+        sage: s, libs, inc, lang, f, args, libdirs = pyx_preparse("# clang c++\n #clib foo\n # cinclude bar\n")
         sage: lang
         'c++'
 
@@ -234,7 +218,7 @@
         '.../sage/ext',
         '.../cysignals']
 
-        sage: s, libs, inc, lang, f, args = pyx_preparse("# cargs -O3 -ggdb\n")
+        sage: s, libs, inc, lang, f, args, libdirs = pyx_preparse("# cargs -O3 -ggdb\n")
         sage: args
         ['-w', '-O2', '-O3', '-ggdb']
 
@@ -263,6 +247,7 @@
     s = """\ninclude "cdefs.pxi"\n""" + s
     s = """\ninclude "cysignals/signals.pxi"  # ctrl-c interrupt block support\ninclude "stdsage.pxi"\n""" + s
     args, s = parse_keywords('cargs', s)
+    libdirs = cblas_library_dirs()
     args = ['-w','-O2'] + args
 
     # Add cysignals directory to includes
@@ -271,7 +256,7 @@
         if os.path.isdir(cysignals_path):
             inc.append(cysignals_path)
 
-    return s, libs, inc, lang, additional_source_files, args
+    return s, libs, inc, lang, additional_source_files, args, libdirs
 
 ################################################################
 # If the user attaches a .spyx file and changes it, we have
@@ -413,7 +398,7 @@
 
     F = open(filename).read()
 
-    F, libs, includes, language, additional_source_files, extra_args = pyx_preparse(F)
+    F, libs, includes, language, additional_source_files, extra_args, libdirs = pyx_preparse(F)
 
     # add the working directory to the includes so custom headers etc. work
     includes.append(os.path.split(os.path.splitext(filename)[0])[0])
@@ -453,19 +438,17 @@
 
 from sage.env import SAGE_LOCAL
 
-extra_link_args =  ['-L' + SAGE_LOCAL + '/lib']
 extra_compile_args = %s
 
 ext_modules = [Extension('%s', sources=['%s.%s', %s],
                      libraries=%s,
-                     library_dirs=[SAGE_LOCAL + '/lib/'],
+                     library_dirs=[SAGE_LOCAL + '/lib/', '%s'],
                      extra_compile_args = extra_compile_args,
-                     extra_link_args = extra_link_args,
                      language = '%s' )]
 
 setup(ext_modules = ext_modules,
       include_dirs = %s)
-    """%(extra_args, name, name, extension, additional_source_files, libs, language, includes)
+    """%(extra_args, name, name, extension, additional_source_files, libs, libdirs, language, includes)
     open('%s/setup.py'%build_dir,'w').write(setup)
     cython_include = ' '.join(["-I '%s'"%x for x in includes if len(x.strip()) > 0 ])
 
```
unless you have that sorted some other way I didn't notice, I would that part to be included.



---

archive/issue_comments_291560.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nFine with me; Since you already have it as a patch can you just add a commit so I don't have to apply your diff by hand?",
    "created_at": "2016-02-28T21:41:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291560",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">Comment 9</div>

Fine with me; Since you already have it as a patch can you just add a commit so I don't have to apply your diff by hand?



---

archive/issue_comments_291561.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nWill do as soon as my day job allows me, I'll put it in positive review afterwards.",
    "created_at": "2016-02-28T22:32:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291561",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">Comment 10</div>

Will do as soon as my day job allows me, I'll put it in positive review afterwards.



---

archive/issue_comments_291562.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nI suggest to move the `pkgconfig` stuff you added to `src/module_list.py` to some place within the `sage` package. Then it can more easily be imported by other packages too, analogous to the `sage_include_directories()` function in `src/sage/env.py`.\n\nSuppose I write a spkg which uses Sage and also links against BLAS, then it would be nice if I could reuse that code. That would also remove the need to duplicate that code in `cython.py`.",
    "created_at": "2016-02-28T23:46:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291562",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">Comment 11</div>

I suggest to move the `pkgconfig` stuff you added to `src/module_list.py` to some place within the `sage` package. Then it can more easily be imported by other packages too, analogous to the `sage_include_directories()` function in `src/sage/env.py`.

Suppose I write a spkg which uses Sage and also links against BLAS, then it would be nice if I could reuse that code. That would also remove the need to duplicate that code in `cython.py`.



---

archive/issue_comments_291563.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nAdmittedly, it sounds like a good idea. I guess it should be a new file otherwise `env.py` will end up being a dumping ground. But when you talk about `blas` in particular it is true that we have a straight duplication between `cython.py` and `module_list.py` (even in my original version in sage-on-gentoo). \n\nOn the other hand I am not sure why in your use case you couldn't use the `.pc` files directly. \n\nOf course that could be more convenient but I have a feeling it is on the slippery slope of putting the kitchen sink into sage.",
    "created_at": "2016-02-29T00:36:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291563",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">Comment 12</div>

Admittedly, it sounds like a good idea. I guess it should be a new file otherwise `env.py` will end up being a dumping ground. But when you talk about `blas` in particular it is true that we have a straight duplication between `cython.py` and `module_list.py` (even in my original version in sage-on-gentoo). 

On the other hand I am not sure why in your use case you couldn't use the `.pc` files directly. 

Of course that could be more convenient but I have a feeling it is on the slippery slope of putting the kitchen sink into sage.



---

archive/issue_comments_291564.json:
```json
{
    "body": "Changed commit from **[a7772ce](https://github.com/sagemath/sagetrac-mirror/commit/a7772cee4683aeb42ab7ecd26792850bcaa794e5)** to **[6d8e32f](https://github.com/sagemath/sagetrac-mirror/commit/6d8e32f88985f4498c0e7e1f95c7aef0b8170781)**",
    "created_at": "2016-02-29T02:24:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291564",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[a7772ce](https://github.com/sagemath/sagetrac-mirror/commit/a7772cee4683aeb42ab7ecd26792850bcaa794e5)** to **[6d8e32f](https://github.com/sagemath/sagetrac-mirror/commit/6d8e32f88985f4498c0e7e1f95c7aef0b8170781)**



---

archive/issue_comments_291565.json:
```json
{
    "body": "Changed branch from **[u/vbraun/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/use_pkg_config_for_sage_setup)** to **[u/fbissey/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/use_pkg_config_for_sage_setup)**",
    "created_at": "2016-02-29T02:24:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291565",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/vbraun/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/use_pkg_config_for_sage_setup)** to **[u/fbissey/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/use_pkg_config_for_sage_setup)**



---

archive/issue_comments_291566.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nOK pushing branch including changes to `pyx_preparse` note that cblas' include directory is not currently added. It hasn't proved necessary yet but could be in the future.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d8e32f88985f4498c0e7e1f95c7aef0b8170781\">6d8e32f</a></td><td><code>Add libdirs (including blas' libdir) pyx_preparse</code></td></tr></table>\n",
    "created_at": "2016-02-29T02:24:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291566",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">Comment 13</div>

OK pushing branch including changes to `pyx_preparse` note that cblas' include directory is not currently added. It hasn't proved necessary yet but could be in the future.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d8e32f88985f4498c0e7e1f95c7aef0b8170781">6d8e32f</a></td><td><code>Add libdirs (including blas' libdir) pyx_preparse</code></td></tr></table>




---

archive/issue_events_266455.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-02-29T02:26:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266455"
}
```



---

archive/issue_events_266456.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-02-29T02:26:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266456"
}
```



---

archive/issue_comments_291567.json:
```json
{
    "body": "Changed commit from **[6d8e32f](https://github.com/sagemath/sagetrac-mirror/commit/6d8e32f88985f4498c0e7e1f95c7aef0b8170781)** to **[dd84287](https://github.com/sagemath/sagetrac-mirror/commit/dd84287f8f793661387977e65e9761722809c759)**",
    "created_at": "2016-02-29T04:17:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291567",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6d8e32f](https://github.com/sagemath/sagetrac-mirror/commit/6d8e32f88985f4498c0e7e1f95c7aef0b8170781)** to **[dd84287](https://github.com/sagemath/sagetrac-mirror/commit/dd84287f8f793661387977e65e9761722809c759)**



---

archive/issue_events_266457.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-02-29T04:17:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266457"
}
```



---

archive/issue_events_266458.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-02-29T04:17:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266458"
}
```



---

archive/issue_comments_291568.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd84287f8f793661387977e65e9761722809c759\">dd84287</a></td><td><code>remove extranauseous brackets</code></td></tr></table>\n",
    "created_at": "2016-02-29T04:17:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291568",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd84287f8f793661387977e65e9761722809c759">dd84287</a></td><td><code>remove extranauseous brackets</code></td></tr></table>




---

archive/issue_comments_291569.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nSorry for the noise, I thought I had removed those brackets before the last commit.",
    "created_at": "2016-02-29T04:18:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291569",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">Comment 16</div>

Sorry for the noise, I thought I had removed those brackets before the last commit.



---

archive/issue_comments_291570.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nOK, Volker has done things differently from what I used to do and now I have found that the difference is fairly important.",
    "created_at": "2016-02-29T07:44:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291570",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">Comment 17</div>

OK, Volker has done things differently from what I used to do and now I have found that the difference is fairly important.



---

archive/issue_events_266459.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-02-29T07:44:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266459"
}
```



---

archive/issue_events_266460.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-02-29T07:44:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266460"
}
```



---

archive/issue_comments_291571.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12d54b5620e55af324a9b1dddefc2acda3142d88\">12d54b5</a></td><td><code>proper list building for library_dir</code></td></tr></table>\n",
    "created_at": "2016-02-29T08:04:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291571",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12d54b5620e55af324a9b1dddefc2acda3142d88">12d54b5</a></td><td><code>proper list building for library_dir</code></td></tr></table>




---

archive/issue_comments_291572.json:
```json
{
    "body": "Changed commit from **[dd84287](https://github.com/sagemath/sagetrac-mirror/commit/dd84287f8f793661387977e65e9761722809c759)** to **[12d54b5](https://github.com/sagemath/sagetrac-mirror/commit/12d54b5620e55af324a9b1dddefc2acda3142d88)**",
    "created_at": "2016-02-29T08:04:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291572",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[dd84287](https://github.com/sagemath/sagetrac-mirror/commit/dd84287f8f793661387977e65e9761722809c759)** to **[12d54b5](https://github.com/sagemath/sagetrac-mirror/commit/12d54b5620e55af324a9b1dddefc2acda3142d88)**



---

archive/issue_comments_291573.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nNot a difference between I have done and Volker has done. It looks like I had a bug for some time that happens not to be triggered in the common case in sage-on-gentoo. Let's see if the patchbot will come clean this time.",
    "created_at": "2016-02-29T08:07:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291573",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">Comment 19</div>

Not a difference between I have done and Volker has done. It looks like I had a bug for some time that happens not to be triggered in the common case in sage-on-gentoo. Let's see if the patchbot will come clean this time.



---

archive/issue_comments_291574.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nIMHO in an ideal world you'd just run `pkg-config --libs blas gsl zlib`. By telling pkg-config all dependencies you enable it to order the libraries, too. The current verbosity is just a symptom of not having pc files for all libraries. We should rather work on that than move the current workaround into the Sage library.",
    "created_at": "2016-02-29T08:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291574",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:20" align="right">Comment 20</div>

IMHO in an ideal world you'd just run `pkg-config --libs blas gsl zlib`. By telling pkg-config all dependencies you enable it to order the libraries, too. The current verbosity is just a symptom of not having pc files for all libraries. We should rather work on that than move the current workaround into the Sage library.



---

archive/issue_comments_291575.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nIf you need to add flags like\n\n```diff\n+              library_dirs = gsl_library_dirs,\n+              include_dirs = gsl_include_dirs),\n```\nyou must put them in the `.pxd` files, not in `module_list.py`. The reason is that there are a lot more extensions than the ones in `sage/gsl/*.pyx` which use the gsl library. If you add those dirs and includes to the gsl `.pxd` files, then all extensions using gsl will automatically have the correct flags added.\n\nThis currently applies only to gsl, since all other libraries that you changed are listed directly in `module_list.py`.",
    "created_at": "2016-02-29T10:05:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291575",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">Comment 21</div>

If you need to add flags like

```diff
+              library_dirs = gsl_library_dirs,
+              include_dirs = gsl_include_dirs),
```
you must put them in the `.pxd` files, not in `module_list.py`. The reason is that there are a lot more extensions than the ones in `sage/gsl/*.pyx` which use the gsl library. If you add those dirs and includes to the gsl `.pxd` files, then all extensions using gsl will automatically have the correct flags added.

This currently applies only to gsl, since all other libraries that you changed are listed directly in `module_list.py`.



---

archive/issue_comments_291576.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nGiven that you add the BLAS libs to `gsl_libs`, I guess you should also add the BLAS library and include dirs to the GSL library and include dirs.",
    "created_at": "2016-02-29T10:08:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291576",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">Comment 22</div>

Given that you add the BLAS libs to `gsl_libs`, I guess you should also add the BLAS library and include dirs to the GSL library and include dirs.



---

archive/issue_comments_291577.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nCorrectly treating library and include dirs is only relevant for non-Sage, non-system GSL installs. IMHO there is no point in worrying about that at the moment as we can't test it so it isn't going to work no matter what. First we need a way to configure Sage to not build our own GSL...",
    "created_at": "2016-02-29T10:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291577",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">Comment 23</div>

Correctly treating library and include dirs is only relevant for non-Sage, non-system GSL installs. IMHO there is no point in worrying about that at the moment as we can't test it so it isn't going to work no matter what. First we need a way to configure Sage to not build our own GSL...



---

archive/issue_comments_291578.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@vbraun](#comment%3A23):\n> IMHO there is no point in worrying about that at the moment\n\nIn that case, just leave GSL alone in this branch: either do it right or don't do it at all.\n\nI am very much against adding known-broken code with the excuse that you cannot test it, so you cannot see that it is in fact broken.",
    "created_at": "2016-02-29T10:51:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291578",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@vbraun](#comment%3A23):
> IMHO there is no point in worrying about that at the moment

In that case, just leave GSL alone in this branch: either do it right or don't do it at all.

I am very much against adding known-broken code with the excuse that you cannot test it, so you cannot see that it is in fact broken.



---

archive/issue_comments_291579.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nI must say that I was surprised by Volker carpet bombing of all things that have a `.pc` file when we could have limited ourselves to `blas` and `lapack` (for `coinor`) where we want to be able to use something installed outside of `sage`.\n\nI don't think it would be needed for moving to `hashstack` as you would build everything in same prefix (I think). Now if you want to package for something like `spack` that becomes more interesting. But some other stuff will have to happen before you get anywhere there.",
    "created_at": "2016-02-29T21:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291579",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">Comment 25</div>

I must say that I was surprised by Volker carpet bombing of all things that have a `.pc` file when we could have limited ourselves to `blas` and `lapack` (for `coinor`) where we want to be able to use something installed outside of `sage`.

I don't think it would be needed for moving to `hashstack` as you would build everything in same prefix (I think). Now if you want to package for something like `spack` that becomes more interesting. But some other stuff will have to happen before you get anywhere there.



---

archive/issue_comments_291580.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nIMHO not having a pc file for a shared library is a bug in an of itself. We are just reinventing the wheel if we try to write our own shared library configuration system. Pkgconfig a proven tool, just use it. E.g. look how elegantly xorg and Gnome handle >~100 shared libraries whereas we are to the hilt in a shit creek with just a handful.",
    "created_at": "2016-02-29T22:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291580",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">Comment 26</div>

IMHO not having a pc file for a shared library is a bug in an of itself. We are just reinventing the wheel if we try to write our own shared library configuration system. Pkgconfig a proven tool, just use it. E.g. look how elegantly xorg and Gnome handle >~100 shared libraries whereas we are to the hilt in a shit creek with just a handful.



---

archive/issue_comments_291581.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nCorrection: Both not having a pc file and not using an existing pc file are a bug in an of itself.",
    "created_at": "2016-02-29T22:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291581",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">Comment 27</div>

Correction: Both not having a pc file and not using an existing pc file are a bug in an of itself.



---

archive/issue_comments_291582.json:
```json
{
    "body": "Changed commit from **[12d54b5](https://github.com/sagemath/sagetrac-mirror/commit/12d54b5620e55af324a9b1dddefc2acda3142d88)** to **[d4525c0](https://github.com/sagemath/sagetrac-mirror/commit/d4525c0860db5ea8657959ebcf33afb33c5b2b03)**",
    "created_at": "2016-02-29T23:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291582",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[12d54b5](https://github.com/sagemath/sagetrac-mirror/commit/12d54b5620e55af324a9b1dddefc2acda3142d88)** to **[d4525c0](https://github.com/sagemath/sagetrac-mirror/commit/d4525c0860db5ea8657959ebcf33afb33c5b2b03)**



---

archive/issue_comments_291583.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4525c0860db5ea8657959ebcf33afb33c5b2b03\">d4525c0</a></td><td><code>Add extra output to pyx_preparse doctest</code></td></tr></table>\n",
    "created_at": "2016-02-29T23:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291583",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28" align="right">Comment 28</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4525c0860db5ea8657959ebcf33afb33c5b2b03">d4525c0</a></td><td><code>Add extra output to pyx_preparse doctest</code></td></tr></table>




---

archive/issue_comments_291584.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nReplying to [@vbraun](#comment%3A27):\n> Correction: Both not having a pc file and not using an existing pc file are a bug in an of itself.\n\nFine it is a bug. But if we are drinking that kool-aid, we'll have to also drink Jeroen's kool-aid about `.pxd` files. Otherwise it would be like \"having your cake and eat it too\" as the English would say.\n\nAnd apologies for missing one last bit of my old patch to that doctest.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4525c0860db5ea8657959ebcf33afb33c5b2b03\">d4525c0</a></td><td><code>Add extra output to pyx_preparse doctest</code></td></tr></table>\n",
    "created_at": "2016-02-29T23:28:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291584",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">Comment 29</div>

Replying to [@vbraun](#comment%3A27):
> Correction: Both not having a pc file and not using an existing pc file are a bug in an of itself.

Fine it is a bug. But if we are drinking that kool-aid, we'll have to also drink Jeroen's kool-aid about `.pxd` files. Otherwise it would be like "having your cake and eat it too" as the English would say.

And apologies for missing one last bit of my old patch to that doctest.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4525c0860db5ea8657959ebcf33afb33c5b2b03">d4525c0</a></td><td><code>Add extra output to pyx_preparse doctest</code></td></tr></table>




---

archive/issue_comments_291585.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nMigrating building directives to `.pxd` files is an ongoing process. I suggest we merge this ticket as is but start to migrate more aggressively. We have one migration to blas/lapack `.pc` to do on the top of my head and that is `numpy` and `scipy`. Once that is done, use of alternative blas/lapack in vanilla sage will have come a long way.",
    "created_at": "2016-03-01T09:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291585",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">Comment 30</div>

Migrating building directives to `.pxd` files is an ongoing process. I suggest we merge this ticket as is but start to migrate more aggressively. We have one migration to blas/lapack `.pc` to do on the top of my head and that is `numpy` and `scipy`. Once that is done, use of alternative blas/lapack in vanilla sage will have come a long way.



---

archive/issue_comments_291586.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@kiwifb](#comment%3A30):\n> Migrating building directives to `.pxd` files is an ongoing process.\n\nIn the case of GSL, the library declarations are already migrated to `.pxd` files. So, if you want to fine-tune these declarations (by adding `library_dirs` for example), those fine-tuned declarations should also be in `.pxd` files. Otherwise it's a mess and we're worse off than before.\n\nConcretely, this should be reverted:\n\n```diff\n-    Extension('*', ['sage/gsl/*.pyx']),\n+    Extension('*', ['sage/gsl/*.pyx'],\n+              library_dirs = gsl_library_dirs,\n+              include_dirs = gsl_include_dirs),\n```",
    "created_at": "2016-03-01T09:44:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291586",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@kiwifb](#comment%3A30):
> Migrating building directives to `.pxd` files is an ongoing process.

In the case of GSL, the library declarations are already migrated to `.pxd` files. So, if you want to fine-tune these declarations (by adding `library_dirs` for example), those fine-tuned declarations should also be in `.pxd` files. Otherwise it's a mess and we're worse off than before.

Concretely, this should be reverted:

```diff
-    Extension('*', ['sage/gsl/*.pyx']),
+    Extension('*', ['sage/gsl/*.pyx'],
+              library_dirs = gsl_library_dirs,
+              include_dirs = gsl_include_dirs),
```



---

archive/issue_comments_291587.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nOK I will take care of that but that may be in the morning in my time zone.",
    "created_at": "2016-03-01T09:56:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291587",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:32" align="right">Comment 32</div>

OK I will take care of that but that may be in the morning in my time zone.



---

archive/issue_comments_291588.json:
```json
{
    "body": "Work Issues: **fix gsl build instructions**",
    "created_at": "2016-03-01T09:56:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291588",
    "user": "https://github.com/kiwifb"
}
```

Work Issues: **fix gsl build instructions**



---

archive/issue_comments_291589.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nNote that this ticket conflicts badly with #17635.",
    "created_at": "2016-03-01T13:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291589",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">Comment 33</div>

Note that this ticket conflicts badly with #17635.



---

archive/issue_comments_291590.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nReplying to [@jdemeyer](#comment%3A31):\n> Replying to [@kiwifb](#comment%3A30):\n> > Migrating building directives to `.pxd` files is an ongoing process.\n\n> \n> In the case of GSL, the library declarations are already migrated to `.pxd` files. So, if you want to fine-tune these declarations (by adding `library_dirs` for example), those fine-tuned declarations should also be in `.pxd` files. Otherwise it's a mess and we're worse off than before.\n> \n> Concretely, this should be reverted:\n> \n> ```diff\n> -    Extension('*', ['sage/gsl/*.pyx']),\n> +    Extension('*', ['sage/gsl/*.pyx'],\n> +              library_dirs = gsl_library_dirs,\n> +              include_dirs = gsl_include_dirs),\n> ```\n\nJeroen, I can see that some distutils stuff is indeed already present for `sage/libs/gsl/*.pxd` files, but there is nothing for `sage/gsl/*.pxd` should I regularise that as well or is there something I am missing (like why is there `sage/libs/gsl/` and `sage/gsl/`)?",
    "created_at": "2016-03-01T21:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291590",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:34" align="right">Comment 34</div>

Replying to [@jdemeyer](#comment%3A31):
> Replying to [@kiwifb](#comment%3A30):
> > Migrating building directives to `.pxd` files is an ongoing process.

> 
> In the case of GSL, the library declarations are already migrated to `.pxd` files. So, if you want to fine-tune these declarations (by adding `library_dirs` for example), those fine-tuned declarations should also be in `.pxd` files. Otherwise it's a mess and we're worse off than before.
> 
> Concretely, this should be reverted:
> 
> ```diff
> -    Extension('*', ['sage/gsl/*.pyx']),
> +    Extension('*', ['sage/gsl/*.pyx'],
> +              library_dirs = gsl_library_dirs,
> +              include_dirs = gsl_include_dirs),
> ```

Jeroen, I can see that some distutils stuff is indeed already present for `sage/libs/gsl/*.pxd` files, but there is nothing for `sage/gsl/*.pxd` should I regularise that as well or is there something I am missing (like why is there `sage/libs/gsl/` and `sage/gsl/`)?



---

archive/issue_comments_291591.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nReplying to [@kiwifb](#comment%3A34):\n> but there is nothing for `sage/gsl/*.pxd`\n\nIndeed and it should be that way. The `# distutils` stuff should be put where the library interface is declared and only there.",
    "created_at": "2016-03-01T21:50:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291591",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">Comment 35</div>

Replying to [@kiwifb](#comment%3A34):
> but there is nothing for `sage/gsl/*.pxd`

Indeed and it should be that way. The `# distutils` stuff should be put where the library interface is declared and only there.



---

archive/issue_comments_291592.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6203f778428cd2af89a24633262fb9e441d19a43\">6203f77</a></td><td><code>Use the information of gsl.pc directly in sage/libs/gsl/*.pxd files as necessary</code></td></tr></table>\n",
    "created_at": "2016-03-01T23:44:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291592",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36" align="right">Comment 36</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6203f778428cd2af89a24633262fb9e441d19a43">6203f77</a></td><td><code>Use the information of gsl.pc directly in sage/libs/gsl/*.pxd files as necessary</code></td></tr></table>




---

archive/issue_comments_291593.json:
```json
{
    "body": "Changed commit from **[d4525c0](https://github.com/sagemath/sagetrac-mirror/commit/d4525c0860db5ea8657959ebcf33afb33c5b2b03)** to **[6203f77](https://github.com/sagemath/sagetrac-mirror/commit/6203f778428cd2af89a24633262fb9e441d19a43)**",
    "created_at": "2016-03-01T23:44:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291593",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d4525c0](https://github.com/sagemath/sagetrac-mirror/commit/d4525c0860db5ea8657959ebcf33afb33c5b2b03)** to **[6203f77](https://github.com/sagemath/sagetrac-mirror/commit/6203f778428cd2af89a24633262fb9e441d19a43)**



---

archive/issue_comments_291594.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nOK, hope I did it all correctly. Three `.pxd` files didn't have any distutils instructions. For those I only added stuff as I was thinking it could be necessary (include directory for two of them)..",
    "created_at": "2016-03-01T23:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291594",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:37" align="right">Comment 37</div>

OK, hope I did it all correctly. Three `.pxd` files didn't have any distutils instructions. For those I only added stuff as I was thinking it could be necessary (include directory for two of them)..



---

archive/issue_comments_291595.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nAnyone has a clue why the librae patchbot has an apparently unrelated doctest failure\n\n```\nsage -t --long src/sage/all.py\n**********************************************************************\nFile \"src/sage/all.py\", line 305, in sage.all._write_started_file\nFailed example:\n    os.path.isfile(started_file)\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.all._write_started_file\n    [20 tests, 1 failure, 0.57 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/all.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nAll other doctests passing.",
    "created_at": "2016-03-02T09:04:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291595",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:38" align="right">Comment 38</div>

Anyone has a clue why the librae patchbot has an apparently unrelated doctest failure

```
sage -t --long src/sage/all.py
**********************************************************************
File "src/sage/all.py", line 305, in sage.all._write_started_file
Failed example:
    os.path.isfile(started_file)
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of   3 in sage.all._write_started_file
    [20 tests, 1 failure, 0.57 s]
----------------------------------------------------------------------
sage -t --long src/sage/all.py  # 1 doctest failed
----------------------------------------------------------------------
```
All other doctests passing.



---

archive/issue_comments_291596.json:
```json
{
    "body": "Changed work issues from **fix gsl build instructions** to **fix gsl build instructionsl pkgconfig import**",
    "created_at": "2016-03-02T09:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291596",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **fix gsl build instructions** to **fix gsl build instructionsl pkgconfig import**



---

archive/issue_comments_291597.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\n1. You need to define the GSL aliases, note the command line:\n\n> gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC **-Igsl_include_dirs** -I/home/worker/sage-patchbot/local/lib/python2.7/site-packages/cysignals -I/home/worker/sage-patchbot/local/include -I/home/worker/sage-patchbot/local/include/python2.7 -I/home/worker/sage-patchbot/local/lib/python2.7/site-packages/numpy/core/include -I/home/worker/sage-patchbot/src -I/home/worker/sage-patchbot/src/sage/ext -I/home/worker/sage-patchbot/src/build/cythonized -I/home/worker/sage-patchbot/src/build/cythonized/sage/ext -I/home/worker/sage-patchbot/local/include/python2.7 -c /home/worker/sage-patchbot/src/build/cythonized/sage/gsl/gsl_array.c -o build/temp.linux-x86_64-2.7/home/worker/sage-patchbot/src/build/cythonized/sage/gsl/gsl_array.o -DGSL_DISABLE_DEPRECATED -fno-strict-aliasing -w\n\n2. Can you try to not import `pkgconfig` every time that Sage starts?",
    "created_at": "2016-03-02T09:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291597",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">Comment 39</div>

1. You need to define the GSL aliases, note the command line:

> gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC **-Igsl_include_dirs** -I/home/worker/sage-patchbot/local/lib/python2.7/site-packages/cysignals -I/home/worker/sage-patchbot/local/include -I/home/worker/sage-patchbot/local/include/python2.7 -I/home/worker/sage-patchbot/local/lib/python2.7/site-packages/numpy/core/include -I/home/worker/sage-patchbot/src -I/home/worker/sage-patchbot/src/sage/ext -I/home/worker/sage-patchbot/src/build/cythonized -I/home/worker/sage-patchbot/src/build/cythonized/sage/ext -I/home/worker/sage-patchbot/local/include/python2.7 -c /home/worker/sage-patchbot/src/build/cythonized/sage/gsl/gsl_array.c -o build/temp.linux-x86_64-2.7/home/worker/sage-patchbot/src/build/cythonized/sage/gsl/gsl_array.o -DGSL_DISABLE_DEPRECATED -fno-strict-aliasing -w

2. Can you try to not import `pkgconfig` every time that Sage starts?



---

archive/issue_comments_291598.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nI should have known.\n \nI supposed `pkgconfig` is called from `cython.py` somehow at startup. Would putting the `import pkgconfig` in a method stop that problem?",
    "created_at": "2016-03-02T09:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291598",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:40" align="right">Comment 40</div>

I should have known.
 
I supposed `pkgconfig` is called from `cython.py` somehow at startup. Would putting the `import pkgconfig` in a method stop that problem?



---

archive/issue_comments_291599.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nReplying to [@kiwifb](#comment%3A40):\n> Would putting the `import pkgconfig` in a method stop that problem?\n\nYes. Even better, import the whole `cython.py` lazily.",
    "created_at": "2016-03-02T09:31:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291599",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">Comment 41</div>

Replying to [@kiwifb](#comment%3A40):
> Would putting the `import pkgconfig` in a method stop that problem?

Yes. Even better, import the whole `cython.py` lazily.



---

archive/issue_comments_291600.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nThis should work if you add `import sage.misc.cython` to some doctests:\n\n```diff\ndiff --git a/src/sage/misc/all.py b/src/sage/misc/all.py\nindex 25838c1..071c6d5 100644\n--- a/src/sage/misc/all.py\n+++ b/src/sage/misc/all.py\n@@ -76,8 +76,8 @@ from sage_eval import sage_eval, sageobj\n \n from sage_input import sage_input\n \n-from cython import cython_lambda, cython_create_local_so\n-from cython_c import cython_compile as cython\n+lazy_import(\"sage.misc.cython\", [\"cython_lambda\", \"cython_create_local_so\"])\n+lazy_import(\"sage.misc.cython_c\", \"cython_compile\", \"cython\")\n lazy_import(\"sage.misc.cython_c\", \"cython_compile\", \"pyrex\", deprecation=9552)\n lazy_import(\"sage.misc.cython_c\", \"cython_compile\", \"sagex\", deprecation=9552)\n \n```",
    "created_at": "2016-03-02T09:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291600",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:42" align="right">Comment 42</div>

This should work if you add `import sage.misc.cython` to some doctests:

```diff
diff --git a/src/sage/misc/all.py b/src/sage/misc/all.py
index 25838c1..071c6d5 100644
--- a/src/sage/misc/all.py
+++ b/src/sage/misc/all.py
@@ -76,8 +76,8 @@ from sage_eval import sage_eval, sageobj
 
 from sage_input import sage_input
 
-from cython import cython_lambda, cython_create_local_so
-from cython_c import cython_compile as cython
+lazy_import("sage.misc.cython", ["cython_lambda", "cython_create_local_so"])
+lazy_import("sage.misc.cython_c", "cython_compile", "cython")
 lazy_import("sage.misc.cython_c", "cython_compile", "pyrex", deprecation=9552)
 lazy_import("sage.misc.cython_c", "cython_compile", "sagex", deprecation=9552)
 
```



---

archive/issue_comments_291601.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nRe-building and running doctests to find any needed `import sage.misc.cython`.",
    "created_at": "2016-03-02T20:36:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291601",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:43" align="right">Comment 43</div>

Re-building and running doctests to find any needed `import sage.misc.cython`.



---

archive/issue_comments_291602.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37ba00adb3ac1d549778c3603555ea8851a71142\">37ba00a</a></td><td><code>Using aliases properly, and lazy import from cython</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44c1ac5d8d60dcbe990159157f4b34ff8334dac7\">44c1ac5</a></td><td><code>Fix doctests after lazy importing of cython.py</code></td></tr></table>\n",
    "created_at": "2016-03-03T04:21:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291602",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44" align="right">Comment 44</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37ba00adb3ac1d549778c3603555ea8851a71142">37ba00a</a></td><td><code>Using aliases properly, and lazy import from cython</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44c1ac5d8d60dcbe990159157f4b34ff8334dac7">44c1ac5</a></td><td><code>Fix doctests after lazy importing of cython.py</code></td></tr></table>




---

archive/issue_comments_291603.json:
```json
{
    "body": "Changed commit from **[6203f77](https://github.com/sagemath/sagetrac-mirror/commit/6203f778428cd2af89a24633262fb9e441d19a43)** to **[44c1ac5](https://github.com/sagemath/sagetrac-mirror/commit/44c1ac5d8d60dcbe990159157f4b34ff8334dac7)**",
    "created_at": "2016-03-03T04:21:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291603",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6203f77](https://github.com/sagemath/sagetrac-mirror/commit/6203f778428cd2af89a24633262fb9e441d19a43)** to **[44c1ac5](https://github.com/sagemath/sagetrac-mirror/commit/44c1ac5d8d60dcbe990159157f4b34ff8334dac7)**



---

archive/issue_events_266461.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-03-03T07:17:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266461"
}
```



---

archive/issue_events_266462.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-03-03T07:17:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266462"
}
```



---

archive/issue_comments_291604.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nIf you would like to have a look and mark it positive Jeroen.",
    "created_at": "2016-03-03T07:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291604",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:45" align="right">Comment 45</div>

If you would like to have a look and mark it positive Jeroen.



---

archive/issue_comments_291605.json:
```json
{
    "body": "Changed author from **Volker Braun** to **Volker Braun, Fran\u00e7ois Bissey**",
    "created_at": "2016-03-03T07:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291605",
    "user": "https://github.com/kiwifb"
}
```

Changed author from **Volker Braun** to **Volker Braun, François Bissey**



---

archive/issue_comments_291606.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nReplying to [@kiwifb](#comment%3A45):\n> If you would like to have a look and mark it positive Jeroen.\n\nCan it wait until the next beta? There are already a lot of tickets closed-but-not-yet-in-develop involving the build system, let's not push things...",
    "created_at": "2016-03-03T08:23:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291606",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:46" align="right">Comment 46</div>

Replying to [@kiwifb](#comment%3A45):
> If you would like to have a look and mark it positive Jeroen.

Can it wait until the next beta? There are already a lot of tickets closed-but-not-yet-in-develop involving the build system, let's not push things...



---

archive/issue_comments_291607.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nSure it is turning to be a very busy beta cycle. Not sure where Volker will want to cut things out.",
    "created_at": "2016-03-03T08:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291607",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:47" align="right">Comment 47</div>

Sure it is turning to be a very busy beta cycle. Not sure where Volker will want to cut things out.



---

archive/issue_comments_291608.json:
```json
{
    "body": "Changed work issues from **fix gsl build instructionsl pkgconfig import** to none",
    "created_at": "2016-03-03T08:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291608",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **fix gsl build instructionsl pkgconfig import** to none



---

archive/issue_comments_291609.json:
```json
{
    "body": "Changed dependencies from **#20130** to none",
    "created_at": "2016-03-03T21:24:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291609",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#20130** to none



---

archive/issue_comments_291610.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nIs this ticket supposed to make it possible to use openblas instead of ATLAS?",
    "created_at": "2016-03-03T21:25:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291610",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:50" align="right">Comment 50</div>

Is this ticket supposed to make it possible to use openblas instead of ATLAS?



---

archive/issue_comments_291611.json:
```json
{
    "body": "Changed branch from **[u/fbissey/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/use_pkg_config_for_sage_setup)** to **[u/jdemeyer/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/use_pkg_config_for_sage_setup)**",
    "created_at": "2016-03-03T21:27:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291611",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/fbissey/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/use_pkg_config_for_sage_setup)** to **[u/jdemeyer/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/use_pkg_config_for_sage_setup)**



---

archive/issue_comments_291612.json:
```json
{
    "body": "Changed commit from **[44c1ac5](https://github.com/sagemath/sagetrac-mirror/commit/44c1ac5d8d60dcbe990159157f4b34ff8334dac7)** to **[252f002](https://github.com/sagemath/sagetrac-mirror/commit/252f00206b00580d015486506feb9285588658db)**",
    "created_at": "2016-03-03T21:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291612",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[44c1ac5](https://github.com/sagemath/sagetrac-mirror/commit/44c1ac5d8d60dcbe990159157f4b34ff8334dac7)** to **[252f002](https://github.com/sagemath/sagetrac-mirror/commit/252f00206b00580d015486506feb9285588658db)**



---

archive/issue_comments_291613.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/252f00206b00580d015486506feb9285588658db\">252f002</a></td><td><code>Merge tag '7.1.beta6' into t/20133/use_pkg_config_for_sage_setup</code></td></tr></table>\n",
    "created_at": "2016-03-03T21:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291613",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:52" align="right">Comment 52</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/252f00206b00580d015486506feb9285588658db">252f002</a></td><td><code>Merge tag '7.1.beta6' into t/20133/use_pkg_config_for_sage_setup</code></td></tr></table>




---

archive/issue_comments_291614.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/use_pkg_config_for_sage_setup)** to **[u/fbissey/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/use_pkg_config_for_sage_setup)**",
    "created_at": "2016-03-03T21:31:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291614",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/jdemeyer/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/use_pkg_config_for_sage_setup)** to **[u/fbissey/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/use_pkg_config_for_sage_setup)**



---

archive/issue_comments_291615.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nNot quite. We still haven't converted numpy/scipy to use `.pc` files - I don't know there is a ticket yet for that. And there is a ticket to select your blas somewhere. But once we deal with numpy/scipy you could get there with a bit of hand holding.",
    "created_at": "2016-03-03T21:31:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291615",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:53" align="right">Comment 53</div>

Not quite. We still haven't converted numpy/scipy to use `.pc` files - I don't know there is a ticket yet for that. And there is a ticket to select your blas somewhere. But once we deal with numpy/scipy you could get there with a bit of hand holding.



---

archive/issue_comments_291616.json:
```json
{
    "body": "Changed commit from **[252f002](https://github.com/sagemath/sagetrac-mirror/commit/252f00206b00580d015486506feb9285588658db)** to **[44c1ac5](https://github.com/sagemath/sagetrac-mirror/commit/44c1ac5d8d60dcbe990159157f4b34ff8334dac7)**",
    "created_at": "2016-03-03T21:31:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291616",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[252f002](https://github.com/sagemath/sagetrac-mirror/commit/252f00206b00580d015486506feb9285588658db)** to **[44c1ac5](https://github.com/sagemath/sagetrac-mirror/commit/44c1ac5d8d60dcbe990159157f4b34ff8334dac7)**



---

archive/issue_comments_291617.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nThere is no way to NOT build ATLAS afaik so thats still missing....",
    "created_at": "2016-03-03T21:34:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291617",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:54" align="right">Comment 54</div>

There is no way to NOT build ATLAS afaik so thats still missing....



---

archive/issue_comments_291618.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nSomeone determined could link `build/pkgs/atlas` to `build/pkgs/openblas` but I have to agree that's not really something I can recommend.",
    "created_at": "2016-03-03T21:40:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291618",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:55" align="right">Comment 55</div>

Someone determined could link `build/pkgs/atlas` to `build/pkgs/openblas` but I have to agree that's not really something I can recommend.



---

archive/issue_comments_291619.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nReplying to [@vbraun](#comment%3A54):\n> There is no way to NOT build ATLAS afaik so thats still missing....\n\nRight, but I meant the `pkgconfig` part...",
    "created_at": "2016-03-03T22:38:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291619",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:56" align="right">Comment 56</div>

Replying to [@vbraun](#comment%3A54):
> There is no way to NOT build ATLAS afaik so thats still missing....

Right, but I meant the `pkgconfig` part...



---

archive/issue_comments_291620.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nI am looking into getting `numpy` and `scipy` on board. I'll create a ticket when I am satisfied.",
    "created_at": "2016-03-03T23:29:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291620",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:57" align="right">Comment 57</div>

I am looking into getting `numpy` and `scipy` on board. I'll create a ticket when I am satisfied.



---

archive/issue_comments_291621.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nI have started #20157 for getting `numpy` and `scipy` to use `.pc` files. But to come back to Jeroen's technical question and after working on `numpy` for a bit. If you were to build `openblas` instead `atlas` then yes it should all build and work (but there is at least one doctest producing numerical noise). Note that `numpy` tries `openblas` before `atlas`. So if you have both installed `openblas` will be favored by default.",
    "created_at": "2016-03-04T04:14:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291621",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:58" align="right">Comment 58</div>

I have started #20157 for getting `numpy` and `scipy` to use `.pc` files. But to come back to Jeroen's technical question and after working on `numpy` for a bit. If you were to build `openblas` instead `atlas` then yes it should all build and work (but there is at least one doctest producing numerical noise). Note that `numpy` tries `openblas` before `atlas`. So if you have both installed `openblas` will be favored by default.



---

archive/issue_events_266463.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-04T06:48:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266463"
}
```



---

archive/issue_events_266464.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-04T06:48:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266464"
}
```



---

archive/issue_comments_291622.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nThe Sage library should depend on `pkgconfig`.",
    "created_at": "2016-03-04T06:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291622",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">Comment 59</div>

The Sage library should depend on `pkgconfig`.



---

archive/issue_comments_291623.json:
```json
{
    "body": "Changed commit from **[44c1ac5](https://github.com/sagemath/sagetrac-mirror/commit/44c1ac5d8d60dcbe990159157f4b34ff8334dac7)** to **[5d1cf57](https://github.com/sagemath/sagetrac-mirror/commit/5d1cf572adbda8742305e5c59711c46b5f96fcf9)**",
    "created_at": "2016-03-04T07:15:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291623",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[44c1ac5](https://github.com/sagemath/sagetrac-mirror/commit/44c1ac5d8d60dcbe990159157f4b34ff8334dac7)** to **[5d1cf57](https://github.com/sagemath/sagetrac-mirror/commit/5d1cf572adbda8742305e5c59711c46b5f96fcf9)**



---

archive/issue_comments_291624.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fa6239be3467b027b76ad3ec1554d0e2776b8c9\">7fa6239</a></td><td><code>Merge branch 'develop' into use_pkg_config_for_sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d1cf572adbda8742305e5c59711c46b5f96fcf9\">5d1cf57</a></td><td><code>Add pkgconfig to sagelib's dependencies</code></td></tr></table>\n",
    "created_at": "2016-03-04T07:15:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291624",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60" align="right">Comment 60</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fa6239be3467b027b76ad3ec1554d0e2776b8c9">7fa6239</a></td><td><code>Merge branch 'develop' into use_pkg_config_for_sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d1cf572adbda8742305e5c59711c46b5f96fcf9">5d1cf57</a></td><td><code>Add pkgconfig to sagelib's dependencies</code></td></tr></table>




---

archive/issue_events_266465.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-03-04T07:16:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266465"
}
```



---

archive/issue_events_266466.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-03-04T07:16:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266466"
}
```



---

archive/issue_events_266467.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-04T22:54:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266467"
}
```



---

archive/issue_events_266468.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-04T22:54:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266468"
}
```



---

archive/issue_comments_291625.json:
```json
{
    "body": "Reviewer: **Volker Braun, Fran\u00e7ois Bissey**",
    "created_at": "2016-03-04T22:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291625",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun, François Bissey**



---

archive/issue_events_266469.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-05T09:47:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266469"
}
```



---

archive/issue_events_266470.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b29453ecfbdcae4d338c8d7c83e1f2b1aec89d31",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-03-05T09:47:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20133#event-266470"
}
```



---

archive/issue_comments_291626.json:
```json
{
    "body": "Changed branch from **[u/fbissey/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/use_pkg_config_for_sage_setup)** to **[5d1cf57](https://github.com/sagemath/sagetrac-mirror/commit/5d1cf572adbda8742305e5c59711c46b5f96fcf9)**",
    "created_at": "2016-03-05T09:47:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20133#issuecomment-291626",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/fbissey/use_pkg_config_for_sage_setup](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/use_pkg_config_for_sage_setup)** to **[5d1cf57](https://github.com/sagemath/sagetrac-mirror/commit/5d1cf572adbda8742305e5c59711c46b5f96fcf9)**
