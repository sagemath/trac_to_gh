# Issue 20190: Upgrade R to 3.2.4

archive/issues_019953.json:
```json
{
    "assignees": [],
    "body": "It's this time of the year again...\n\nOriginal tarball is here : [https://cran.r-project.org/src/base/R-3/R-3.2.4.tar.gz](https://cran.r-project.org/src/base/R-3/R-3.2.4.tar.gz).\n\n\"Revised\" tarball (long story, see below) [here](https://cran.r-project.org/src/base/R-3/R-3.2.4-revised.tar.gz).\n\n**CC:**  @nexttime @jdemeyer @vbraun\n\n**Keywords:** r-project\n\n**Branch/Commit:** [6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7](https://github.com/sagemath/sagetrac-mirror/commit/6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7)\n\n**Reviewer:** Travis Scrimshaw, Jeroen Demeyer\n\n**Author:** Emmanuel Charpentier\n\nIssue created by migration from https://trac.sagemath.org/ticket/20190\n\n",
    "closed_at": "2016-04-08T22:40:22Z",
    "created_at": "2016-03-11T07:54:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade R to 3.2.4",
    "type": "issue",
    "updated_at": "2016-04-08T22:40:22Z",
    "url": "https://github.com/sagemath/sage/issues/20190",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
It's this time of the year again...

Original tarball is here : [https://cran.r-project.org/src/base/R-3/R-3.2.4.tar.gz](https://cran.r-project.org/src/base/R-3/R-3.2.4.tar.gz).

"Revised" tarball (long story, see below) [here](https://cran.r-project.org/src/base/R-3/R-3.2.4-revised.tar.gz).

**CC:**  @nexttime @jdemeyer @vbraun

**Keywords:** r-project

**Branch/Commit:** [6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7](https://github.com/sagemath/sagetrac-mirror/commit/6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7)

**Reviewer:** Travis Scrimshaw, Jeroen Demeyer

**Author:** Emmanuel Charpentier

Issue created by migration from https://trac.sagemath.org/ticket/20190





---

archive/issue_events_246203.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-03-11T07:54:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246203"
}
```



---

archive/issue_events_246204.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-03-11T07:54:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246204"
}
```



---

archive/issue_events_246205.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-03-11T07:55:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "08517b",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246205"
}
```



---

archive/issue_comments_292798.json:
```json
{
    "body": "**Branch:** [u/charpent/upgrade_r_to_3_2_4](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_r_to_3_2_4)",
    "created_at": "2016-03-11T08:49:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292798",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

**Branch:** [u/charpent/upgrade_r_to_3_2_4](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_r_to_3_2_4)



---

archive/issue_comments_292799.json:
```json
{
    "body": "**Commit:** [385c51d8fc95817eec10780fa40723d9f02865e0](https://github.com/sagemath/sagetrac-mirror/commit/385c51d8fc95817eec10780fa40723d9f02865e0)",
    "created_at": "2016-03-11T08:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292799",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

**Commit:** [385c51d8fc95817eec10780fa40723d9f02865e0](https://github.com/sagemath/sagetrac-mirror/commit/385c51d8fc95817eec10780fa40723d9f02865e0)



---

archive/issue_comments_292800.json:
```json
{
    "body": "**Author:** Emmanuel Charpentier",
    "created_at": "2016-03-11T08:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292800",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

**Author:** Emmanuel Charpentier



---

archive/issue_comments_292801.json:
```json
{
    "body": "<a id='comment:3'></a>\nPasses ptestlong with no error nor glitch ==> `needs_review`",
    "created_at": "2016-03-11T08:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292801",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:3'></a>
Passes ptestlong with no error nor glitch ==> `needs_review`



---

archive/issue_events_246206.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-03-11T08:51:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246206"
}
```



---

archive/issue_events_246207.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-03-12T09:14:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246207"
}
```



---

archive/issue_events_246208.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-03-12T09:14:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246208"
}
```



---

archive/issue_comments_292802.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Attachment:** [r-3.2.4.p0.log](https://github.com/sagemath/sage/files/ticket20190/r-3.2.4.p0.log)\n\nI could not build it on Ubuntu 14.04 LTS by applying this on top of `7.1.rc0` and running `make build`. Log is attached.\n\nMy guess is it is related to the fuzz from applying the patches.",
    "created_at": "2016-03-12T09:14:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292802",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
**Attachment:** [r-3.2.4.p0.log](https://github.com/sagemath/sage/files/ticket20190/r-3.2.4.p0.log)

I could not build it on Ubuntu 14.04 LTS by applying this on top of `7.1.rc0` and running `make build`. Log is attached.

My guess is it is related to the fuzz from applying the patches.



---

archive/issue_comments_292803.json:
```json
{
    "body": "<a id='comment:5'></a>\nFrom building old versions of R, those logs say the command should be `rm -f liblzma.a` (which it what I was thinking it should be). I suspect it has to do with the `dont_lose_libz_libbz2_in_configure.patch`, but I'm not sure what to look for. Do one of you know what needs to be done (and do you also get a build failure)?",
    "created_at": "2016-03-12T12:52:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292803",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
From building old versions of R, those logs say the command should be `rm -f liblzma.a` (which it what I was thinking it should be). I suspect it has to do with the `dont_lose_libz_libbz2_in_configure.patch`, but I'm not sure what to look for. Do one of you know what needs to be done (and do you also get a build failure)?



---

archive/issue_comments_292804.json:
```json
{
    "body": "<a id='comment:6'></a>\nWorks for me on Debian (three instances of testing/amd64 w. 6, 7 and 16 Gb RAM : 7 Gb seems the bare acceptable minimum to install/run rstan under R (The 6 Gb machine starts to swap/trash on this one...)\n\nI'll have a look tonight (maybe tomorrow), but on a smallish machine (Ubuntu 15.10/amd64) not well suited to debuging sage (4 GB RAM...).\n\nHTH,",
    "created_at": "2016-03-12T13:07:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292804",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:6'></a>
Works for me on Debian (three instances of testing/amd64 w. 6, 7 and 16 Gb RAM : 7 Gb seems the bare acceptable minimum to install/run rstan under R (The 6 Gb machine starts to swap/trash on this one...)

I'll have a look tonight (maybe tomorrow), but on a smallish machine (Ubuntu 15.10/amd64) not well suited to debuging sage (4 GB RAM...).

HTH,



---

archive/issue_comments_292805.json:
```json
{
    "body": "<a id='comment:7'></a>\nFYI - I just did a `make distclean && make build` (with `SAGE_NUM_THREADS=8` and `MAKE='make -j8'`) and I got the same problem.",
    "created_at": "2016-03-13T11:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292805",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
FYI - I just did a `make distclean && make build` (with `SAGE_NUM_THREADS=8` and `MAKE='make -j8'`) and I got the same problem.



---

archive/issue_comments_292806.json:
```json
{
    "body": "Compilation log on my (charpent's) machine",
    "created_at": "2016-03-13T17:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292806",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Compilation log on my (charpent's) machine



---

archive/issue_comments_292807.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Attachment:** [r-3.2.4.p0-EC.log](https://github.com/sagemath/sage/files/ticket20190/r-3.2.4.p0-EC.log)\n\nCompilation on my machine(s) does not follow the same path as on yours. My compilation never reaches the point where yours goes.\n\nI do not (yet) understand qwhy. Different installed software ?\n\nHTH,",
    "created_at": "2016-03-13T17:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292807",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:8'></a>
**Attachment:** [r-3.2.4.p0-EC.log](https://github.com/sagemath/sage/files/ticket20190/r-3.2.4.p0-EC.log)

Compilation on my machine(s) does not follow the same path as on yours. My compilation never reaches the point where yours goes.

I do not (yet) understand qwhy. Different installed software ?

HTH,



---

archive/issue_comments_292808.json:
```json
{
    "body": "<a id='comment:9'></a>\nI believe it has to do with `(lib)lzma` being present on the system (FYI, I have a Core i7). In particular, your log has\n\n```\nchecking for lzma_version_number in -llzma... yes\n```\nwhereas my in `no`. So it probably has to do with `dont_lose_libz_libbz2_in_configure.patch` and changes in the configure script for R (there was similar fuzz when building `R-3.2.3.p1` on my machine as well).\n\nAlthough I have no idea what to look for on how to fix this, but perhaps this will allow you to reproduce my build error?",
    "created_at": "2016-03-13T23:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292808",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
I believe it has to do with `(lib)lzma` being present on the system (FYI, I have a Core i7). In particular, your log has

```
checking for lzma_version_number in -llzma... yes
```
whereas my in `no`. So it probably has to do with `dont_lose_libz_libbz2_in_configure.patch` and changes in the configure script for R (there was similar fuzz when building `R-3.2.3.p1` on my machine as well).

Although I have no idea what to look for on how to fix this, but perhaps this will allow you to reproduce my build error?



---

archive/issue_comments_292809.json:
```json
{
    "body": "<a id='comment:10'></a>\nWere you able to reproduce the build failure?",
    "created_at": "2016-03-22T03:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292809",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
Were you able to reproduce the build failure?



---

archive/issue_comments_292810.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Eureka ! ** (maybe...)\n\nSorry for the delay : my schedule is a little bit busy nowadays...\n\nI found this :\n\n```\ncharpent@SAP5057241:~/Temporaire/DemeRde$ diff -ur R-3.2.3/src/extra/xz R-3.2.4/src/extra/xz\ndiff -ur R-3.2.3/src/extra/xz/Makefile.in R-3.2.4/src/extra/xz/Makefile.in\n--- R-3.2.3/src/extra/xz/Makefile.in\t2010-11-09 00:05:05.000000000 +0100\n+++ R-3.2.4/src/extra/xz/Makefile.in\t2015-12-11 00:15:12.000000000 +0100\n@@ -58,8 +58,8 @@\n \ttouch stamp\n \n liblzma.a: $(liblzma_a_OBJECTS)\n-\trm -f $@\n-\t$(AR) cr $@ $(liblzma_a_OBJECTS)\n+\t$rm -f $@\n+\t$(AR) -cr $@ $(liblzma_a_OBJECTS)\n \t$(RANLIB) $@\n \n mostlyclean: clean\n```\n\nI'll ask around in the R mailing list to know what was intended by this (highly suspicious) change.\n\nDo you want an (interim) patch to revert it ?",
    "created_at": "2016-04-01T12:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292810",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:11'></a>
**Eureka ! ** (maybe...)

Sorry for the delay : my schedule is a little bit busy nowadays...

I found this :

```
charpent@SAP5057241:~/Temporaire/DemeRde$ diff -ur R-3.2.3/src/extra/xz R-3.2.4/src/extra/xz
diff -ur R-3.2.3/src/extra/xz/Makefile.in R-3.2.4/src/extra/xz/Makefile.in
--- R-3.2.3/src/extra/xz/Makefile.in	2010-11-09 00:05:05.000000000 +0100
+++ R-3.2.4/src/extra/xz/Makefile.in	2015-12-11 00:15:12.000000000 +0100
@@ -58,8 +58,8 @@
 	touch stamp
 
 liblzma.a: $(liblzma_a_OBJECTS)
-	rm -f $@
-	$(AR) cr $@ $(liblzma_a_OBJECTS)
+	$rm -f $@
+	$(AR) -cr $@ $(liblzma_a_OBJECTS)
 	$(RANLIB) $@
 
 mostlyclean: clean
```

I'll ask around in the R mailing list to know what was intended by this (highly suspicious) change.

Do you want an (interim) patch to revert it ?



---

archive/issue_comments_292811.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to myself :\n\nThis is indeed an upstream bug. See the `r-devel` thread starting at [this posting](https://stat.ethz.ch/pipermail/r-devel/2016-March/072447.html) : it's ultimately a Makefile typo.\n\nHowever, this thread [says](https://stat.ethz.ch/pipermail/r-devel/2016-March/072449.html) that :\n\n> Notice that in 3.3.x, the included xz & al. will disappear.\n\nThis might mean that the prerequisites for `R` may change at 3.3.0 time (which was announced to take place on 2016-04-11 last time I looked...).\n\nFurthermore, `r-devel` also had this announcement (that I missed) :\n\n> The 3.2.4 release had two annoyances which we would rather not have in an \"ultra-stable\" release, designed to hang around for the duration of the 3.3 series. One was a relatively minor Makefile issue affecting system using R's bundled lzma library. The other, rather more serious, affected printing and formatting of POSIXlt objects, which would unpredictably get the Daylight Savings Time wrong.\n\nA new tarball fixing this issue in 3.2.4 (+ another relevant to Posix time printing) has been released as [http://cran.r-project.org/src/base/R-3/R-3.2.4-revised.tar.gz](http://cran.r-project.org/src/base/R-3/R-3.2.4-revised.tar.gz).\n\nSo it seems to me that the best \"interim\" solution is :\n* to get the \"revised\" tarball from CRAN\n* to document its renaming in `spkg-src`\n\nand to revise the whole situation at R 3.3.0 release.\n\nUnless I hear contrary opinions before Sun April 3, 2016, I'll do that (and also fix the patches fuzz, which is not incorrect but unaesthetic...).\n\nYour opinions/advice urgently required...",
    "created_at": "2016-04-01T14:44:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292811",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:12'></a>
Replying to myself :

This is indeed an upstream bug. See the `r-devel` thread starting at [this posting](https://stat.ethz.ch/pipermail/r-devel/2016-March/072447.html) : it's ultimately a Makefile typo.

However, this thread [says](https://stat.ethz.ch/pipermail/r-devel/2016-March/072449.html) that :

> Notice that in 3.3.x, the included xz & al. will disappear.

This might mean that the prerequisites for `R` may change at 3.3.0 time (which was announced to take place on 2016-04-11 last time I looked...).

Furthermore, `r-devel` also had this announcement (that I missed) :

> The 3.2.4 release had two annoyances which we would rather not have in an "ultra-stable" release, designed to hang around for the duration of the 3.3 series. One was a relatively minor Makefile issue affecting system using R's bundled lzma library. The other, rather more serious, affected printing and formatting of POSIXlt objects, which would unpredictably get the Daylight Savings Time wrong.

A new tarball fixing this issue in 3.2.4 (+ another relevant to Posix time printing) has been released as [http://cran.r-project.org/src/base/R-3/R-3.2.4-revised.tar.gz](http://cran.r-project.org/src/base/R-3/R-3.2.4-revised.tar.gz).

So it seems to me that the best "interim" solution is :
* to get the "revised" tarball from CRAN
* to document its renaming in `spkg-src`

and to revise the whole situation at R 3.3.0 release.

Unless I hear contrary opinions before Sun April 3, 2016, I'll do that (and also fix the patches fuzz, which is not incorrect but unaesthetic...).

Your opinions/advice urgently required...



---

archive/issue_comments_292812.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [@EmmanuelCharpentier](#comment%3A12):\n> * to document its renaming in `spkg-src`\n\nWhich renaming?",
    "created_at": "2016-04-01T14:53:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292812",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Replying to [@EmmanuelCharpentier](#comment%3A12):
> * to document its renaming in `spkg-src`

Which renaming?



---

archive/issue_comments_292813.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [@jdemeyer](#comment%3A13):\n> Replying to [@EmmanuelCharpentier](#comment%3A12):\n> > * to document its renaming in `spkg-src`\n\n> \n> Which renaming?\n\nR-3.2.4-revised.tar.gz ==> R-3.2.4.tar.gz",
    "created_at": "2016-04-01T14:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292813",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:14'></a>
Replying to [@jdemeyer](#comment%3A13):
> Replying to [@EmmanuelCharpentier](#comment%3A12):
> > * to document its renaming in `spkg-src`

> 
> Which renaming?

R-3.2.4-revised.tar.gz ==> R-3.2.4.tar.gz



---

archive/issue_comments_292814.json:
```json
{
    "body": "<a id='comment:15'></a>\n-1 to renaming it. I know that 3.2.4-revised is a really silly version number, but that's what upstream chose, so Sage should just use that.\n\nBy the way, I wonder why upstream didn't just name it version 3.2.5.",
    "created_at": "2016-04-01T15:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292814",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
-1 to renaming it. I know that 3.2.4-revised is a really silly version number, but that's what upstream chose, so Sage should just use that.

By the way, I wonder why upstream didn't just name it version 3.2.5.



---

archive/issue_comments_292815.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [@jdemeyer](#comment%3A15):\n> -1 to renaming it. I know that 3.2.4-revised is a really silly version number, but that's what upstream chose, so Sage should just use that.\n\nOkay (unless I hear other opinions by Sunday). But that's really silly...\n\n> By the way, I wonder why upstream didn't just name it version 3.2.5.\n\n//De gustibus coloribusque...//",
    "created_at": "2016-04-01T15:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292815",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:16'></a>
Replying to [@jdemeyer](#comment%3A15):
> -1 to renaming it. I know that 3.2.4-revised is a really silly version number, but that's what upstream chose, so Sage should just use that.

Okay (unless I hear other opinions by Sunday). But that's really silly...

> By the way, I wonder why upstream didn't just name it version 3.2.5.

//De gustibus coloribusque...//



---

archive/issue_events_246209.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-04-02T13:58:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246209"
}
```



---

archive/issue_events_246210.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-04-02T13:58:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246210"
}
```



---

archive/issue_comments_292816.json:
```json
{
    "body": "<a id='comment:17'></a>\nMy 2 cents are with Jeroen, let us try and keep it as close to upstream as we can.",
    "created_at": "2016-04-02T13:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292816",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>
My 2 cents are with Jeroen, let us try and keep it as close to upstream as we can.



---

archive/issue_comments_292817.json:
```json
{
    "body": "<a id='comment:18'></a>\nI'm wondering how to do this : upstream has adopted a curious name for this release ; furthermore, it has done it inconsistently :\n\n* the tarball is named `R-3.2.4-revised`, but\n* the source tree is named `R-revised`.\n\nSage's build system chokes on this ; short of renaming the tarball and/or rebuilding it with a sensible source tree name, I don't see how to get Sage's building system accept this.\n\nWe can either :\n\n* rename/rebuild this tarball consistently *via* spkg-src, or\n* skip this one-week wonder entierely (last time I looked, R 3.3.0 was scheduled in Apr 11, 2016).\n\nYour thoughts ?",
    "created_at": "2016-04-04T09:18:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292817",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:18'></a>
I'm wondering how to do this : upstream has adopted a curious name for this release ; furthermore, it has done it inconsistently :

* the tarball is named `R-3.2.4-revised`, but
* the source tree is named `R-revised`.

Sage's build system chokes on this ; short of renaming the tarball and/or rebuilding it with a sensible source tree name, I don't see how to get Sage's building system accept this.

We can either :

* rename/rebuild this tarball consistently *via* spkg-src, or
* skip this one-week wonder entierely (last time I looked, R 3.3.0 was scheduled in Apr 11, 2016).

Your thoughts ?



---

archive/issue_comments_292818.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [@EmmanuelCharpentier](#comment%3A18):\n> Sage's build system chokes on this\n\nCan you be more specific?",
    "created_at": "2016-04-04T09:22:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292818",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>
Replying to [@EmmanuelCharpentier](#comment%3A18):
> Sage's build system chokes on this

Can you be more specific?



---

archive/issue_comments_292819.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [@jdemeyer](#comment%3A19):\n> Replying to [@EmmanuelCharpentier](#comment%3A18):\n> > Sage's build system chokes on this\n\n> Can you be more specific?\n\nAt the start of the package build log, I see that the script tries to `mv` to the source tree, but fails to stat it (the script nevertheless continues and fails other steps such as patching and `MAKE`ing it.",
    "created_at": "2016-04-04T09:32:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292819",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:20'></a>
Replying to [@jdemeyer](#comment%3A19):
> Replying to [@EmmanuelCharpentier](#comment%3A18):
> > Sage's build system chokes on this

> Can you be more specific?

At the start of the package build log, I see that the script tries to `mv` to the source tree, but fails to stat it (the script nevertheless continues and fails other steps such as patching and `MAKE`ing it.



---

archive/issue_comments_292820.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [@EmmanuelCharpentier](#comment%3A20):\n> At the start of the package build log, I see that the script tries to `mv` to the source tree, but fails to stat it\n\nFull log please.",
    "created_at": "2016-04-04T09:37:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292820",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>
Replying to [@EmmanuelCharpentier](#comment%3A20):
> At the start of the package build log, I see that the script tries to `mv` to the source tree, but fails to stat it

Full log please.



---

archive/issue_comments_292821.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [@jdemeyer](#comment%3A21):\n \n> Full log please.\n\nThis will have to wait : I'm not on my development machine, and have ti reproduce it on a (much slower) work machine...",
    "created_at": "2016-04-04T09:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292821",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:22'></a>
Replying to [@jdemeyer](#comment%3A21):
 
> Full log please.

This will have to wait : I'm not on my development machine, and have ti reproduce it on a (much slower) work machine...



---

archive/issue_comments_292822.json:
```json
{
    "body": "(Unsuccessfull) compilation log of the \"revised\" package",
    "created_at": "2016-04-04T10:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292822",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

(Unsuccessfull) compilation log of the "revised" package



---

archive/issue_comments_292823.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Attachment:** [r-3.2.4-revised.p0.log](https://github.com/sagemath/sage/files/ticket20190/r-3.2.4-revised.p0.log)\n\nAs requested, log added.\n\nHTH,",
    "created_at": "2016-04-04T10:38:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292823",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:23'></a>
**Attachment:** [r-3.2.4-revised.p0.log](https://github.com/sagemath/sage/files/ticket20190/r-3.2.4-revised.p0.log)

As requested, log added.

HTH,



---

archive/issue_comments_292824.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n It's this time of the year again...\n \n-Original tarball is here : [https://cran.r-project.org/src/base/R-3/R-3.2.4.tar.gz](https://cran.r-project.org/src/base/R-3/R-3.2.4.tar.gz)\n+Original tarball is here : [https://cran.r-project.org/src/base/R-3/R-3.2.4.tar.gz](https://cran.r-project.org/src/base/R-3/R-3.2.4.tar.gz).\n+\n+\"Revised\" tarball (long story, see below) [here](https://cran.r-project.org/src/base/R-3/R-3.2.4-revised.tar.gz).\n``````\n",
    "created_at": "2016-04-04T10:38:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292824",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 It's this time of the year again...
 
-Original tarball is here : [https://cran.r-project.org/src/base/R-3/R-3.2.4.tar.gz](https://cran.r-project.org/src/base/R-3/R-3.2.4.tar.gz)
+Original tarball is here : [https://cran.r-project.org/src/base/R-3/R-3.2.4.tar.gz](https://cran.r-project.org/src/base/R-3/R-3.2.4.tar.gz).
+
+"Revised" tarball (long story, see below) [here](https://cran.r-project.org/src/base/R-3/R-3.2.4-revised.tar.gz).
``````




---

archive/issue_comments_292825.json:
```json
{
    "body": "<a id='comment:24'></a>\nEasy fix: replace the `cd src` in `spkg-install` by the correct directory name.",
    "created_at": "2016-04-04T11:05:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292825",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
Easy fix: replace the `cd src` in `spkg-install` by the correct directory name.



---

archive/issue_comments_292826.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [@jdemeyer](#comment%3A24):\n> Easy fix: replace the `cd src` in `spkg-install` by the correct directory name.\n\nNope : `src` is a subdirectory of the source tree. The point is that the source tree name is nowhere to be seen in `spkg-install` : the current Sage building architecture is supposed to create a build directory for that.\n\nIt currently fails to do this in a useable way (see the top of the log).",
    "created_at": "2016-04-04T12:04:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292826",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:25'></a>
Replying to [@jdemeyer](#comment%3A24):
> Easy fix: replace the `cd src` in `spkg-install` by the correct directory name.

Nope : `src` is a subdirectory of the source tree. The point is that the source tree name is nowhere to be seen in `spkg-install` : the current Sage building architecture is supposed to create a build directory for that.

It currently fails to do this in a useable way (see the top of the log).



---

archive/issue_comments_292827.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [@EmmanuelCharpentier](#comment%3A25):\n> Replying to [@jdemeyer](#comment%3A24):\n> > Easy fix: replace the `cd src` in `spkg-install` by the correct directory name.\n\n> \n> Nope : `src` is a subdirectory of the source tree. The point is that the source tree name is nowhere to be seen in `spkg-install` : the current Sage building architecture is supposed to create a build directory for that.\n\nNobody is forcing the directory to be called `src`. Like I said: just replace the `cd src` in `spkg-install` by the correct directory name and it will work.",
    "created_at": "2016-04-04T13:05:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292827",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
Replying to [@EmmanuelCharpentier](#comment%3A25):
> Replying to [@jdemeyer](#comment%3A24):
> > Easy fix: replace the `cd src` in `spkg-install` by the correct directory name.

> 
> Nope : `src` is a subdirectory of the source tree. The point is that the source tree name is nowhere to be seen in `spkg-install` : the current Sage building architecture is supposed to create a build directory for that.

Nobody is forcing the directory to be called `src`. Like I said: just replace the `cd src` in `spkg-install` by the correct directory name and it will work.



---

archive/issue_comments_292828.json:
```json
{
    "body": "<a id='comment:27'></a>\nHow much work do you think it will be to upgrade to 3.3.0? If you think it will take some work/time, then we should push this in. Otherwise, I am okay with waiting another week or so.",
    "created_at": "2016-04-04T15:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292828",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>
How much work do you think it will be to upgrade to 3.3.0? If you think it will take some work/time, then we should push this in. Otherwise, I am okay with waiting another week or so.



---

archive/issue_comments_292829.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [@jdemeyer](#comment%3A26):\n> Replying to [@EmmanuelCharpentier](#comment%3A25):\n> > Replying to [@jdemeyer](#comment%3A24):\n> > > Easy fix: replace the `cd src` in `spkg-install` by the correct directory name.\n\n> > \n> > Nope : `src` is a subdirectory of the source tree. The point is that the source tree name is nowhere to be seen in `spkg-install` : the current Sage building architecture is supposed to create a build directory for that.\n\n> \n> Nobody is forcing the directory to be called `src`. Like I said: just replace the `cd src` in `spkg-install` by the correct directory name and it will work.\n\nNope : the error at the top of the log happens **before** the start of `spkg-install`. `spkg-install` **cannot** intercept it.\n\nAnd, again, the `src` names designates the directory `src` of the source tree (which should be called `R-3.2.4-revised` and **not** `R-revised`), and **not** the source tree itself.\n\nI tried :\n* changing `cd src` to `cd R-revised/src`\n* adding (at the top of `spkg-src`) `ln -s R-revised R-3.2.4-revised`\nto no avail.\n\nThe only way out I'm able to see would be to document in `spkg-src` :\n* untar `R-3.2.4-revised.tar.gz`\n* in the resulting tree, `mv R-revised R-3.2.4-revised`\n* retar the resulting tree\n\nDo you **really** want that ?",
    "created_at": "2016-04-04T21:15:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292829",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:28'></a>
Replying to [@jdemeyer](#comment%3A26):
> Replying to [@EmmanuelCharpentier](#comment%3A25):
> > Replying to [@jdemeyer](#comment%3A24):
> > > Easy fix: replace the `cd src` in `spkg-install` by the correct directory name.

> > 
> > Nope : `src` is a subdirectory of the source tree. The point is that the source tree name is nowhere to be seen in `spkg-install` : the current Sage building architecture is supposed to create a build directory for that.

> 
> Nobody is forcing the directory to be called `src`. Like I said: just replace the `cd src` in `spkg-install` by the correct directory name and it will work.

Nope : the error at the top of the log happens **before** the start of `spkg-install`. `spkg-install` **cannot** intercept it.

And, again, the `src` names designates the directory `src` of the source tree (which should be called `R-3.2.4-revised` and **not** `R-revised`), and **not** the source tree itself.

I tried :
* changing `cd src` to `cd R-revised/src`
* adding (at the top of `spkg-src`) `ln -s R-revised R-3.2.4-revised`
to no avail.

The only way out I'm able to see would be to document in `spkg-src` :
* untar `R-3.2.4-revised.tar.gz`
* in the resulting tree, `mv R-revised R-3.2.4-revised`
* retar the resulting tree

Do you **really** want that ?



---

archive/issue_comments_292830.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [@tscrim](#comment%3A27):\n> How much work do you think it will be to upgrade to 3.3.0? If you think it will take some work/time, then we should push this in. Otherwise, I am okay with waiting another week or so.\n\nI do not know the Sage build system well enough to understand what is really needed to fix it. Short of fixing the (inconsistent) source tree, I see no way.\n\nSince R.3.3.0 release (which may entail significant work) is less tan one week away, I'm a bit reluctant to produce a patch that will become irrelevant so soon...",
    "created_at": "2016-04-04T21:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292830",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:29'></a>
Replying to [@tscrim](#comment%3A27):
> How much work do you think it will be to upgrade to 3.3.0? If you think it will take some work/time, then we should push this in. Otherwise, I am okay with waiting another week or so.

I do not know the Sage build system well enough to understand what is really needed to fix it. Short of fixing the (inconsistent) source tree, I see no way.

Since R.3.3.0 release (which may entail significant work) is less tan one week away, I'm a bit reluctant to produce a patch that will become irrelevant so soon...



---

archive/issue_comments_292831.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [@EmmanuelCharpentier](#comment%3A28):\n> * changing `cd src` to `cd R-revised/src`\n\nYou should change `cd src` to `cd R-revised` (or whatever the name is of the top-level directory in the R tarball).",
    "created_at": "2016-04-04T21:27:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292831",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
Replying to [@EmmanuelCharpentier](#comment%3A28):
> * changing `cd src` to `cd R-revised/src`

You should change `cd src` to `cd R-revised` (or whatever the name is of the top-level directory in the R tarball).



---

archive/issue_comments_292832.json:
```json
{
    "body": "**Changing commit** from \"[385c51d8fc95817eec10780fa40723d9f02865e0](https://github.com/sagemath/sagetrac-mirror/commit/385c51d8fc95817eec10780fa40723d9f02865e0)\" to \"[feb037ac1e653436043ea1e76400fc052eda1119](https://github.com/sagemath/sagetrac-mirror/commit/feb037ac1e653436043ea1e76400fc052eda1119)\".",
    "created_at": "2016-04-05T07:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292832",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[385c51d8fc95817eec10780fa40723d9f02865e0](https://github.com/sagemath/sagetrac-mirror/commit/385c51d8fc95817eec10780fa40723d9f02865e0)" to "[feb037ac1e653436043ea1e76400fc052eda1119](https://github.com/sagemath/sagetrac-mirror/commit/feb037ac1e653436043ea1e76400fc052eda1119)".



---

archive/issue_comments_292833.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/feb037ac1e653436043ea1e76400fc052eda1119\">feb037a</a></td><td><code>Upgrade R to 3.2.4-revised</code></td></tr></table>\n",
    "created_at": "2016-04-05T07:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292833",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/feb037ac1e653436043ea1e76400fc052eda1119">feb037a</a></td><td><code>Upgrade R to 3.2.4-revised</code></td></tr></table>




---

archive/issue_comments_292834.json:
```json
{
    "body": "<a id='comment:32'></a>\nI do not (yet)understand how this works, but it worked.\n\nPasses ptestlong with no error nor glitches ==> `needs_review`",
    "created_at": "2016-04-05T07:15:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292834",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:32'></a>
I do not (yet)understand how this works, but it worked.

Passes ptestlong with no error nor glitches ==> `needs_review`



---

archive/issue_events_246211.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-04-05T07:15:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/minor",
    "label_color": "ff0000",
    "label_name": "minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246211"
}
```



---

archive/issue_events_246212.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-04-05T07:15:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246212"
}
```



---

archive/issue_events_246213.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-04-05T07:15:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246213"
}
```



---

archive/issue_comments_292835.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2016-04-05T15:27:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292835",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_292836.json:
```json
{
    "body": "<a id='comment:33'></a>\nDitto. Thanks.",
    "created_at": "2016-04-05T15:27:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292836",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:33'></a>
Ditto. Thanks.



---

archive/issue_events_246214.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-04-05T15:27:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246214"
}
```



---

archive/issue_events_246215.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-04-05T15:27:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246215"
}
```



---

archive/issue_events_246216.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-05T20:19:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246216"
}
```



---

archive/issue_events_246217.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-05T20:19:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246217"
}
```



---

archive/issue_comments_292837.json:
```json
{
    "body": "<a id='comment:34'></a>\n\n```\nSuccessfully installed r-3.2.4-revised.p0\nRunning the test suite for r-3.2.4-revised.p0...\n./spkg-check: line 8: cd: src: No such file or directory\nmake[3]: Entering directory '/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/r-3.2.4-revised.p0'\nmake[3]: *** No rule to make target 'check'.\nmake[3]: Leaving directory '/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/r-3.2.4-revised.p0'\nError while running the R testsuite ... exiting\n```",
    "created_at": "2016-04-05T20:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292837",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:34'></a>

```
Successfully installed r-3.2.4-revised.p0
Running the test suite for r-3.2.4-revised.p0...
./spkg-check: line 8: cd: src: No such file or directory
make[3]: Entering directory '/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/r-3.2.4-revised.p0'
make[3]: *** No rule to make target 'check'.
make[3]: Leaving directory '/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/r-3.2.4-revised.p0'
Error while running the R testsuite ... exiting
```



---

archive/issue_comments_292838.json:
```json
{
    "body": "**Attachment:** [r-3.2.4-revised.p0.v2.gz](https://github.com/sagemath/sage/files/ticket20190/r-3.2.4-revised.p0.v2.gz)\n\nLog of a successfull compilation without testing.",
    "created_at": "2016-04-05T22:16:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292838",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

**Attachment:** [r-3.2.4-revised.p0.v2.gz](https://github.com/sagemath/sage/files/ticket20190/r-3.2.4-revised.p0.v2.gz)

Log of a successfull compilation without testing.



---

archive/issue_comments_292839.json:
```json
{
    "body": "<a id='comment:35'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7\">6b46d9d</a></td><td><code>(Semi-)fixed(?) test suite of R-3.2.4-revised release.</code></td></tr></table>\n",
    "created_at": "2016-04-05T22:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292839",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:35'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7">6b46d9d</a></td><td><code>(Semi-)fixed(?) test suite of R-3.2.4-revised release.</code></td></tr></table>




---

archive/issue_comments_292840.json:
```json
{
    "body": "**Changing commit** from \"[feb037ac1e653436043ea1e76400fc052eda1119](https://github.com/sagemath/sagetrac-mirror/commit/feb037ac1e653436043ea1e76400fc052eda1119)\" to \"[6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7](https://github.com/sagemath/sagetrac-mirror/commit/6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7)\".",
    "created_at": "2016-04-05T22:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292840",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[feb037ac1e653436043ea1e76400fc052eda1119](https://github.com/sagemath/sagetrac-mirror/commit/feb037ac1e653436043ea1e76400fc052eda1119)" to "[6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7](https://github.com/sagemath/sagetrac-mirror/commit/6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7)".



---

archive/issue_events_246218.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-04-05T22:27:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246218"
}
```



---

archive/issue_events_246219.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-04-05T22:27:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246219"
}
```



---

archive/issue_comments_292841.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [@vbraun](#comment%3A34):\n\nDamn ! I forgot even the existence of this...\n\n> ```\n> Successfully installed r-3.2.4-revised.p0\n> Running the test suite for r-3.2.4-revised.p0...\n> ./spkg-check: line 8: cd: src: No such file or directory\n> make[3]: Entering directory '/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/r-3.2.4-revised.p0'\n> make[3]: *** No rule to make target 'check'.\n> make[3]: Leaving directory '/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/r-3.2.4-revised.p0'\n> Error while running the R testsuite ... exiting\n> ```\n\nHuh ! I think that the fix is as trivial (and as mysterious) as the preceding one.\n\nI tried it, but I can't seemingly test it. Whereas in my \"develop\" (7.2beta2 IIRC) setup, testing (of the current R-3.2.3) goes well, it does not start in this branch, which is based on 7.1rc0 :\n\nAfter `SAGE_CHECK_PACKAGES=\"yes\" ./sage -f -c r`, the build system rebuilds the packages, and says it has been built successfully. It does **NOT** attempt to test anything, nor does give an error (see uploaded log).\n\nNevertheless, I pushed the resulting patch (since it lo longer raises an error in the test suite...) and positioned `needs_review`. Feel free to send me to hell if you think that this cover-up is not acceptable.",
    "created_at": "2016-04-05T22:27:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292841",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:36'></a>
Replying to [@vbraun](#comment%3A34):

Damn ! I forgot even the existence of this...

> ```
> Successfully installed r-3.2.4-revised.p0
> Running the test suite for r-3.2.4-revised.p0...
> ./spkg-check: line 8: cd: src: No such file or directory
> make[3]: Entering directory '/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/r-3.2.4-revised.p0'
> make[3]: *** No rule to make target 'check'.
> make[3]: Leaving directory '/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/r-3.2.4-revised.p0'
> Error while running the R testsuite ... exiting
> ```

Huh ! I think that the fix is as trivial (and as mysterious) as the preceding one.

I tried it, but I can't seemingly test it. Whereas in my "develop" (7.2beta2 IIRC) setup, testing (of the current R-3.2.3) goes well, it does not start in this branch, which is based on 7.1rc0 :

After `SAGE_CHECK_PACKAGES="yes" ./sage -f -c r`, the build system rebuilds the packages, and says it has been built successfully. It does **NOT** attempt to test anything, nor does give an error (see uploaded log).

Nevertheless, I pushed the resulting patch (since it lo longer raises an error in the test suite...) and positioned `needs_review`. Feel free to send me to hell if you think that this cover-up is not acceptable.



---

archive/issue_events_246220.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-04-06T14:38:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246220"
}
```



---

archive/issue_events_246221.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-04-06T14:38:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246221"
}
```



---

archive/issue_comments_292842.json:
```json
{
    "body": "<a id='comment:37'></a>\nIt's running the test suite for me, not sure what you did wrong...",
    "created_at": "2016-04-06T14:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292842",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
It's running the test suite for me, not sure what you did wrong...



---

archive/issue_comments_292843.json:
```json
{
    "body": "**Changing reviewer** from \"Travis Scrimshaw\" to \"Travis Scrimshaw, Jeroen Demeyer\".",
    "created_at": "2016-04-06T14:38:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292843",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Travis Scrimshaw" to "Travis Scrimshaw, Jeroen Demeyer".



---

archive/issue_comments_292844.json:
```json
{
    "body": "**Changing branch** from \"[u/charpent/upgrade_r_to_3_2_4](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_r_to_3_2_4)\" to \"[6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7](https://github.com/sagemath/sagetrac-mirror/commit/6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7)\".",
    "created_at": "2016-04-08T22:40:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20190#issuecomment-292844",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/charpent/upgrade_r_to_3_2_4](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_r_to_3_2_4)" to "[6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7](https://github.com/sagemath/sagetrac-mirror/commit/6b46d9d61e1480e46ab7f562ed0ed5a7639f5ef7)".



---

archive/issue_events_246222.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-08T22:40:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246222"
}
```



---

archive/issue_events_246223.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b129dc067b94d988803c996c2dc2d2104400dcee",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-04-08T22:40:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20190",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20190#event-246223"
}
```
