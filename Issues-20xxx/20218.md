# Issue 20218: Use pip to install Python dependencies

archive/issues_019981.json:
```json
{
    "assignees": [],
    "body": "New tarball: https://pypi.python.org/packages/26/34/0f3a5efac31f27fabce64645f8c609de9d925fe2915304d1a40f544cff0e/appnope-0.1.0.tar.gz\n\n---\n\nWork has already been done--for example in #19187--on using `pip` for `sage -i` where appropriate.  However, a normal build of sage does not use `pip` for installing any Python spkgs; rather, they run `python setup.py install` which until recently has always been *the* way to install Python packages.\n\nI can suggest several reasons why `pip` should be used instead of this method.  To be clear--as many people think of `pip` as a tool for installing packages from the internet--this is not strictly the case.  `pip` can be used to install an already downloaded tarball, or even straight from a source tree unpacked from a tarball or checked out from VCS.  The typical way to do this is to change directories to the directory containing the `setup.py` script and running `pip install .`.  This still ultimately calls `setup.py install`, among other `setup.py` commands, but with the right incantations to perform a pip-style flat install.  Now, why is this preferable?\n\n1. Future-compatibility.  One of the goals that the Python packaging community has been working toward over the past several years has been to decouple Python package installation from build system.  Traditionally `setup.py` provided both a build program and an installation program.  At best it will still stick around as a build program, but its use for installation is being discouraged.  There is now finally a PEP (http://legacy.python.org/dev/peps/pep-0516/), still very much in draft state, specifically concerning this decoupling.  Under this new regime `pip` will not likely be the *only* software for installing Python packages, but the assumption can no longer be that there is a `setup.py` script at all.\n\n2. `pip` avoids using `easy_install`.  `easy_install` is an older installation program for Python packages that was bundled with setuptools--when a Python project uses setuptools in its `setup.py`, the `setup.py install` command invokes `easy_install` *by default*.  The behavior of `easy_install` is to install the package as an egg archive/directory.  `easy_install` has several disadvantages, of which this is just one, but there are a couple reasons that this alone is a problem:\n\n\n   a. Every .egg requires a `sys.path` entry, hence difficult to debug paths that look like this:\n\n```python\n>>> pprint(sys.path)\n['',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/setuptools-18.1-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/MarkupSafe-0.23-py2.7-linux-x86_64.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Jinja2-2.7.3-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/six-1.10.0-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Pygments-2.0.2-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/zope.interface-4.1.3-py2.7-linux-x86_64.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Twisted-15.5.0-py2.7-linux-x86_64.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/pytz-2013b0-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Babel-2.1.1-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Werkzeug-0.11.2-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/speaklater-1.3-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/python_openid-2.2.5-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/itsdangerous-0.24-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Flask_Silk-0.2-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Flask_AutoIndex-0.5-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Flask_Babel-0.9-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Flask_OpenID-1.2.5-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Flask_OldSessions-0.10-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/webassets-0.11.1-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/sagenb-0.11.6.1-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/backports.ssl_match_hostname-3.4.0.2-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/certifi-14.5.14-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/tornado-4.1-py2.7-linux-x86_64.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/setuptools_scm-1.7.0-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/path.py-7.1-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/pickleshare-0.5-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/simplegeneric-0.8.1-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/decorator-4.0.6-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/networkx-1.10-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/python_dateutil-2.2-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/cycler-0.9.0-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/matplotlib-1.5.0-py2.7-linux-x86_64.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/jsonschema-2.4.0-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/mistune-0.5.1-py2.7-linux-x86_64.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/pip-6.1.1-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/pkgconfig-1.1.0-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/singledispatch-3.4.0.3-py2.7.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/rpy2-2.7.5-py2.7-linux-x86_64.egg',\n '/home/iguananaut/src/sagemath/sage/local/lib/python',\n '/home/iguananaut/src/sagemath/sage/local/lib/python/site_packages',\n '/home/iguananaut/src/sagemath/sage/local/lib/python27.zip',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/plat-linux2',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/lib-tk',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/lib-old',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/lib-dynload',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages']\n```\n     With the flat install style used by `pip`, and now more generally favored, the `sys.path`, with no eggs, would be simply:\n\n```python\n>>> pprint(sys.path)\n['',\n '/home/iguananaut/src/sagemath/sage/local/lib/python',\n '/home/iguananaut/src/sagemath/sage/local/lib/python27.zip',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/plat-linux2',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/lib-tk',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/lib-old',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/lib-dynload',\n '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages']\n```\n     which is certainly easier to read and reason about.\n\n\nb. The egg import mechanism requires writing to a common file during egg installation--easy-install.pth.  This causes problems in parallel installations, requiring patches to setuptools.  The flat install style used by pip has no such problems--there is a no single common file written to by pip during installation of packages (other than maybe the log file, which is only for debugging purposes).\n\nAs I explained in [this comment](http://trac.sagemath.org/timeline?from=2016-02-25T10%3A23%3A37-08%3A00&precision=second), when a Python package is installed with `pip`, `pip` actually slips setuptools into the installation process, whether the package uses it explicitly or not.  There are reasons for this not worth going into now.  This is no problem for the vast majority of cases.  The only exception I know of is that setuptools doesn't handle the `data_files` option well when `--prefix` is changed.  As far as I can tell this is only a problem for sage itself and possibly for sagetex, but these don't even use `setuptools` in the first place, so until we have a workaround for that it does no harm if we keep using `setup.py install` for those packages, if nothing else works.\n\nMost of the rest of the Python packages included by default in a Sage build (I haven't checked all of -optional yet) already use setuptools.  I checked the setup.py of all the rest that don't explicitly use setuptools--these include `docutils`, `mpmath`, `pexpect`, `ptyprocess`, `Pycrypto`, `pyparsing`, `pyzmq`, `scipy`, and all packages from the Jupyter team (`ip*`, `jupyter*`, `np*`, `notebook`, `traitlets`).\n\nMost of these packages are known by me (from personal experience) to work fine with pip.  Looking at the setup.py scripts of the rest of them, most of them are fairly trivial and should work fine.\n\nTL;DR, with the exceptions of sage and sagetex (pending work like #20108), as well as pip itself the `spkg-install` scripts for Python packages should change `setup.py install` commands to `pip install .`.  Their dependencies would also have to be updated to require pip to be installed first.\n\nAt the same time the \"uninstall\" commands in those scripts can be changed to use `pip uninstall`.\n\n**Assignee:** @embray\n\n**CC:**  @jdemeyer @vbraun\n\n**Branch:** [f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d](https://github.com/sagemath/sagetrac-mirror/commit/f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d)\n\n**Upstream:** None of the above - read trac for reasoning.\n\n**Reviewer:** Jeroen Demeyer, Volker Braun\n\n**Author:** Erik Bray, Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/20218\n\n",
    "closed_at": "2016-09-01T06:44:21Z",
    "created_at": "2016-03-16T10:29:34Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Use pip to install Python dependencies",
    "type": "issue",
    "updated_at": "2016-09-07T08:41:57Z",
    "url": "https://github.com/sagemath/sage/issues/20218",
    "user": "https://github.com/embray"
}
```
New tarball: https://pypi.python.org/packages/26/34/0f3a5efac31f27fabce64645f8c609de9d925fe2915304d1a40f544cff0e/appnope-0.1.0.tar.gz

---

Work has already been done--for example in #19187--on using `pip` for `sage -i` where appropriate.  However, a normal build of sage does not use `pip` for installing any Python spkgs; rather, they run `python setup.py install` which until recently has always been *the* way to install Python packages.

I can suggest several reasons why `pip` should be used instead of this method.  To be clear--as many people think of `pip` as a tool for installing packages from the internet--this is not strictly the case.  `pip` can be used to install an already downloaded tarball, or even straight from a source tree unpacked from a tarball or checked out from VCS.  The typical way to do this is to change directories to the directory containing the `setup.py` script and running `pip install .`.  This still ultimately calls `setup.py install`, among other `setup.py` commands, but with the right incantations to perform a pip-style flat install.  Now, why is this preferable?

1. Future-compatibility.  One of the goals that the Python packaging community has been working toward over the past several years has been to decouple Python package installation from build system.  Traditionally `setup.py` provided both a build program and an installation program.  At best it will still stick around as a build program, but its use for installation is being discouraged.  There is now finally a PEP (http://legacy.python.org/dev/peps/pep-0516/), still very much in draft state, specifically concerning this decoupling.  Under this new regime `pip` will not likely be the *only* software for installing Python packages, but the assumption can no longer be that there is a `setup.py` script at all.

2. `pip` avoids using `easy_install`.  `easy_install` is an older installation program for Python packages that was bundled with setuptools--when a Python project uses setuptools in its `setup.py`, the `setup.py install` command invokes `easy_install` *by default*.  The behavior of `easy_install` is to install the package as an egg archive/directory.  `easy_install` has several disadvantages, of which this is just one, but there are a couple reasons that this alone is a problem:


   a. Every .egg requires a `sys.path` entry, hence difficult to debug paths that look like this:

```python
>>> pprint(sys.path)
['',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/setuptools-18.1-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/MarkupSafe-0.23-py2.7-linux-x86_64.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Jinja2-2.7.3-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/six-1.10.0-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Pygments-2.0.2-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Sphinx-1.2.2-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/zope.interface-4.1.3-py2.7-linux-x86_64.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Twisted-15.5.0-py2.7-linux-x86_64.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/pytz-2013b0-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Babel-2.1.1-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Werkzeug-0.11.2-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/speaklater-1.3-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/python_openid-2.2.5-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/itsdangerous-0.24-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Flask_Silk-0.2-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Flask_AutoIndex-0.5-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Flask_Babel-0.9-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Flask_OpenID-1.2.5-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/Flask_OldSessions-0.10-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/webassets-0.11.1-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/sagenb-0.11.6.1-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/backports.ssl_match_hostname-3.4.0.2-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/certifi-14.5.14-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/tornado-4.1-py2.7-linux-x86_64.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/setuptools_scm-1.7.0-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/path.py-7.1-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/pickleshare-0.5-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/simplegeneric-0.8.1-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/decorator-4.0.6-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/networkx-1.10-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/python_dateutil-2.2-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/cycler-0.9.0-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/matplotlib-1.5.0-py2.7-linux-x86_64.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/jsonschema-2.4.0-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/mistune-0.5.1-py2.7-linux-x86_64.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/pip-6.1.1-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/pkgconfig-1.1.0-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/singledispatch-3.4.0.3-py2.7.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages/rpy2-2.7.5-py2.7-linux-x86_64.egg',
 '/home/iguananaut/src/sagemath/sage/local/lib/python',
 '/home/iguananaut/src/sagemath/sage/local/lib/python/site_packages',
 '/home/iguananaut/src/sagemath/sage/local/lib/python27.zip',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/plat-linux2',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/lib-tk',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/lib-old',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/lib-dynload',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages']
```
     With the flat install style used by `pip`, and now more generally favored, the `sys.path`, with no eggs, would be simply:

```python
>>> pprint(sys.path)
['',
 '/home/iguananaut/src/sagemath/sage/local/lib/python',
 '/home/iguananaut/src/sagemath/sage/local/lib/python27.zip',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/plat-linux2',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/lib-tk',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/lib-old',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/lib-dynload',
 '/home/iguananaut/src/sagemath/sage/local/lib/python2.7/site-packages']
```
     which is certainly easier to read and reason about.


b. The egg import mechanism requires writing to a common file during egg installation--easy-install.pth.  This causes problems in parallel installations, requiring patches to setuptools.  The flat install style used by pip has no such problems--there is a no single common file written to by pip during installation of packages (other than maybe the log file, which is only for debugging purposes).

As I explained in [this comment](http://trac.sagemath.org/timeline?from=2016-02-25T10%3A23%3A37-08%3A00&precision=second), when a Python package is installed with `pip`, `pip` actually slips setuptools into the installation process, whether the package uses it explicitly or not.  There are reasons for this not worth going into now.  This is no problem for the vast majority of cases.  The only exception I know of is that setuptools doesn't handle the `data_files` option well when `--prefix` is changed.  As far as I can tell this is only a problem for sage itself and possibly for sagetex, but these don't even use `setuptools` in the first place, so until we have a workaround for that it does no harm if we keep using `setup.py install` for those packages, if nothing else works.

Most of the rest of the Python packages included by default in a Sage build (I haven't checked all of -optional yet) already use setuptools.  I checked the setup.py of all the rest that don't explicitly use setuptools--these include `docutils`, `mpmath`, `pexpect`, `ptyprocess`, `Pycrypto`, `pyparsing`, `pyzmq`, `scipy`, and all packages from the Jupyter team (`ip*`, `jupyter*`, `np*`, `notebook`, `traitlets`).

Most of these packages are known by me (from personal experience) to work fine with pip.  Looking at the setup.py scripts of the rest of them, most of them are fairly trivial and should work fine.

TL;DR, with the exceptions of sage and sagetex (pending work like #20108), as well as pip itself the `spkg-install` scripts for Python packages should change `setup.py install` commands to `pip install .`.  Their dependencies would also have to be updated to require pip to be installed first.

At the same time the "uninstall" commands in those scripts can be changed to use `pip uninstall`.

**Assignee:** @embray

**CC:**  @jdemeyer @vbraun

**Branch:** [f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d](https://github.com/sagemath/sagetrac-mirror/commit/f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d)

**Upstream:** None of the above - read trac for reasoning.

**Reviewer:** Jeroen Demeyer, Volker Braun

**Author:** Erik Bray, Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/20218





---

archive/issue_events_246535.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-03-16T10:29:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246535"
}
```



---

archive/issue_events_246536.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-03-16T10:29:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "08517b",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246536"
}
```



---

archive/issue_events_246537.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-03-16T10:29:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/minor",
    "label_color": "ff0000",
    "label_name": "minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246537"
}
```



---

archive/issue_events_246538.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-03-16T10:29:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246538"
}
```



---

archive/issue_events_246539.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-16T12:48:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246539"
}
```



---

archive/issue_events_246540.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-16T13:41:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "rename": {
        "from": "Use pip to install Python depedencies",
        "to": "Use pip to install Python dependencies"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246540"
}
```



---

archive/issue_comments_293237.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nTo be clear, I'm working on a patch for this.",
    "created_at": "2016-03-16T14:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293237",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'>**Comment 3:**</a>
To be clear, I'm working on a patch for this.



---

archive/issue_comments_293238.json:
```json
{
    "body": "**Assignee:** @embray",
    "created_at": "2016-03-16T14:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293238",
    "user": "https://github.com/embray"
}
```

**Assignee:** @embray



---

archive/issue_comments_293239.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nIIRC, there was an issue with using pip when python was not compiled with openssl, even for building wihthout downloading. I am not sure that it is still the case, but this particular case should be taken into account since openssl (libssl-dev) is not necessarily available on the system (and cannot be made standard Sage package because of some licensing issues).",
    "created_at": "2016-03-23T13:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293239",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:4'>**Comment 4:**</a>
IIRC, there was an issue with using pip when python was not compiled with openssl, even for building wihthout downloading. I am not sure that it is still the case, but this particular case should be taken into account since openssl (libssl-dev) is not necessarily available on the system (and cannot be made standard Sage package because of some licensing issues).



---

archive/issue_comments_293240.json:
```json
{
    "body": "**Author:** Erik Bray",
    "created_at": "2016-03-23T14:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293240",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Erik Bray



---

archive/issue_comments_293241.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nIts exactly as Thierry says. Hopefully it won't be long until the announced switch of OpenSSL to a GPL-compatible license happens.",
    "created_at": "2016-04-15T21:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293241",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'>**Comment 6:**</a>
Its exactly as Thierry says. Hopefully it won't be long until the announced switch of OpenSSL to a GPL-compatible license happens.



---

archive/issue_events_246541.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-04-20T11:47:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246541"
}
```



---

archive/issue_comments_293242.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nI've attached a branch containing the beginnings of this work. I've already put it through several rounds of testing locally including installing, reinstalling packages, uninstalling and reinstalling, etc.\n\nBut I'm interested to find out what happens in the patchbot.\n\nI haven't addressed the SSL issue yet but I will.  I wanted to start getting some test / review feedback on the main work in the meantime.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93226961bf040faf37f080af04589c8d31d904a9\">9322696</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr></table>\n",
    "created_at": "2016-04-20T11:47:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293242",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'>**Comment 7:**</a>
I've attached a branch containing the beginnings of this work. I've already put it through several rounds of testing locally including installing, reinstalling packages, uninstalling and reinstalling, etc.

But I'm interested to find out what happens in the patchbot.

I haven't addressed the SSL issue yet but I will.  I wanted to start getting some test / review feedback on the main work in the meantime.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93226961bf040faf37f080af04589c8d31d904a9">9322696</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr></table>




---

archive/issue_comments_293243.json:
```json
{
    "body": "**Commit:** [93226961bf040faf37f080af04589c8d31d904a9](https://github.com/sagemath/sagetrac-mirror/commit/93226961bf040faf37f080af04589c8d31d904a9)",
    "created_at": "2016-04-20T11:47:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293243",
    "user": "https://github.com/embray"
}
```

**Commit:** [93226961bf040faf37f080af04589c8d31d904a9](https://github.com/sagemath/sagetrac-mirror/commit/93226961bf040faf37f080af04589c8d31d904a9)



---

archive/issue_comments_293244.json:
```json
{
    "body": "**Branch:** [u/embray/pip-install](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/pip-install)",
    "created_at": "2016-04-20T11:47:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293244",
    "user": "https://github.com/embray"
}
```

**Branch:** [u/embray/pip-install](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/pip-install)



---

archive/issue_comments_293245.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nLooks like I need to rebase--that's what I get for starting a patch and then not getting around to finishing it until weeks later :)",
    "created_at": "2016-04-20T11:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293245",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'>**Comment 8:**</a>
Looks like I need to rebase--that's what I get for starting a patch and then not getting around to finishing it until weeks later :)



---

archive/issue_comments_293246.json:
```json
{
    "body": "**Changing commit** from \"[93226961bf040faf37f080af04589c8d31d904a9](https://github.com/sagemath/sagetrac-mirror/commit/93226961bf040faf37f080af04589c8d31d904a9)\" to \"[7447ef236941c521fb730b0baa1a760d7d4aa15d](https://github.com/sagemath/sagetrac-mirror/commit/7447ef236941c521fb730b0baa1a760d7d4aa15d)\".",
    "created_at": "2016-04-20T11:55:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293246",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[93226961bf040faf37f080af04589c8d31d904a9](https://github.com/sagemath/sagetrac-mirror/commit/93226961bf040faf37f080af04589c8d31d904a9)" to "[7447ef236941c521fb730b0baa1a760d7d4aa15d](https://github.com/sagemath/sagetrac-mirror/commit/7447ef236941c521fb730b0baa1a760d7d4aa15d)".



---

archive/issue_comments_293247.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7447ef236941c521fb730b0baa1a760d7d4aa15d\">7447ef2</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr></table>\n",
    "created_at": "2016-04-20T11:55:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293247",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>**Comment 9:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7447ef236941c521fb730b0baa1a760d7d4aa15d">7447ef2</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr></table>




---

archive/issue_comments_293248.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nThis isn't correct:\n\n```\nSage's Python unconditionally removes . from sys.path\nwhich can break several packages' installation\n```\n\nSage's Python only removes `.` from `sys.path` if having `.` in `sys.path` might be insecure. If packages break because of this, those packages should be fixed instead of working around the security check.",
    "created_at": "2016-04-20T12:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293248",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'>**Comment 10:**</a>
This isn't correct:

```
Sage's Python unconditionally removes . from sys.path
which can break several packages' installation
```

Sage's Python only removes `.` from `sys.path` if having `.` in `sys.path` might be insecure. If packages break because of this, those packages should be fixed instead of working around the security check.



---

archive/issue_comments_293249.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nIn case you think that this whole security-thing is exaggerated: I can take over the Unix account of anybody who runs the Python test-suite on a computer where I have an account. When I reported this bug to Python, they didn't really care. When I reported this to IPython (which had a similar bug), they fixed their test-suite.",
    "created_at": "2016-04-20T12:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293249",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'>**Comment 11:**</a>
In case you think that this whole security-thing is exaggerated: I can take over the Unix account of anybody who runs the Python test-suite on a computer where I have an account. When I reported this bug to Python, they didn't really care. When I reported this to IPython (which had a similar bug), they fixed their test-suite.



---

archive/issue_comments_293250.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nAs someone who has actually surreptitiously taken over Unix accounts, I'm not too impressed by that particular issue. But that's beside the point--I'm not arguing with that right now.\n\nI'll have to more closely look at what that patch does, but I'll change that comment to not supply inaccurate information.  No packages are broken here though.  The reason this is needed is that pip copies files packages to a tmp dir to build them.  I'm actually surprised this hasn't come up for `sage -pip`, though it's only an issue for packages that import themselves in their `setup.py` so maybe it just coincidentally hasn't come up.",
    "created_at": "2016-04-20T13:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293250",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'>**Comment 12:**</a>
As someone who has actually surreptitiously taken over Unix accounts, I'm not too impressed by that particular issue. But that's beside the point--I'm not arguing with that right now.

I'll have to more closely look at what that patch does, but I'll change that comment to not supply inaccurate information.  No packages are broken here though.  The reason this is needed is that pip copies files packages to a tmp dir to build them.  I'm actually surprised this hasn't come up for `sage -pip`, though it's only an issue for packages that import themselves in their `setup.py` so maybe it just coincidentally hasn't come up.



---

archive/issue_comments_293251.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nReplying to [@embray](#comment%3A12):\n> The reason this is needed is that pip copies files packages to a tmp dir to build them.\n\nIt doesn't hurt if it's in a private directory inside `/tmp`, say `/tmp/my-pip-directory` where `/tmp/my-pip-directory` has reasonable permissions. So I don't fully understand the problem.",
    "created_at": "2016-04-20T13:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293251",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'>**Comment 13:**</a>
Replying to [@embray](#comment%3A12):
> The reason this is needed is that pip copies files packages to a tmp dir to build them.

It doesn't hurt if it's in a private directory inside `/tmp`, say `/tmp/my-pip-directory` where `/tmp/my-pip-directory` has reasonable permissions. So I don't fully understand the problem.



---

archive/issue_comments_293252.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nIndeed it should be doing that.  It's not like it's putting the package directly under `/tmp`.  It belongs to me and my user-specific group.  So I'm not sure why there would be a problem and yet I am getting the warning about '.' being removed from `sys.path` and the import subsequently fails.",
    "created_at": "2016-04-21T10:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293252",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'>**Comment 14:**</a>
Indeed it should be doing that.  It's not like it's putting the package directly under `/tmp`.  It belongs to me and my user-specific group.  So I'm not sure why there would be a problem and yet I am getting the warning about '.' being removed from `sys.path` and the import subsequently fails.



---

archive/issue_comments_293253.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nReplying to [@embray](#comment%3A14):\n> Indeed it should be doing that.  It's not like it's putting the package directly under `/tmp`.  It belongs to me and my user-specific group.  So I'm not sure why there would be a problem and yet I am getting the warning about '.' being removed from `sys.path` and the import subsequently fails.\n\nWhat is the *exact* warning message?",
    "created_at": "2016-04-21T11:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293253",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'>**Comment 15:**</a>
Replying to [@embray](#comment%3A14):
> Indeed it should be doing that.  It's not like it's putting the package directly under `/tmp`.  It belongs to me and my user-specific group.  So I'm not sure why there would be a problem and yet I am getting the warning about '.' being removed from `sys.path` and the import subsequently fails.

What is the *exact* warning message?



---

archive/issue_comments_293254.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nNevermind--I traced this to a bug in pip, combined with a possible minor defect in `sage-uncompress-spkg` (or Python's `tarfile` module depending on your perspective), along with strange packaging for pyparsing, which is the package where this came up originally.\n\n1) It's true that pip creates a temp dir (under `/tmp`, typically) in which to build a package.  This directory is created with `mkdtemp` and normally has safe permissions on it.  However, when installing a package from a source directory (a la `pip install .`), pip then deletes that temp directory, and copies the source directory using `shutil.copytree` to the same path as the just-deleted temp dir.  There are a couple problems with this:\n a) Deleting and recreating the temp dir of the same name involves a possible race condition.\n b) More importantly, while `mkdtemp` will create a directory with safe permissions, `shutil.copytree` copies the original permissions of the source files, which may be arbitrary.  Instead, pip should be copying the *contents* of the source directory *into* the directory created with `mkdtemp`.\n\n2) `sage-uncompress-spkg` just calls `TarFile.extractall()` which preserves the original permissions of all files/directories in the tar file, and doesn't provide a clear way to enable or disable this.  This is different from the GNU `tar` command which by default (for normal users) applies the user's umask to all extracted files, which is generally safer depending on the user's umask.  It would probably be best if `sage-uncompress-spkg` did this as well.\n\n3) The top-level directory in pyparsing's source package has permissions set to 777.  Of all the upstream source tarballs I have pyparsing is the *only* one like this.  All the rest have 775 or 755.  \n\nResult: pyparsing's source is extracted with permissions 777 and is then copied into a directory in `/tmp` with unrestricted access, from which pip installs it.  My previous comments aside these are all bad and all three should be addressed.",
    "created_at": "2016-04-21T13:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293254",
    "user": "https://github.com/embray"
}
```

<a id='comment:16'>**Comment 16:**</a>
Nevermind--I traced this to a bug in pip, combined with a possible minor defect in `sage-uncompress-spkg` (or Python's `tarfile` module depending on your perspective), along with strange packaging for pyparsing, which is the package where this came up originally.

1) It's true that pip creates a temp dir (under `/tmp`, typically) in which to build a package.  This directory is created with `mkdtemp` and normally has safe permissions on it.  However, when installing a package from a source directory (a la `pip install .`), pip then deletes that temp directory, and copies the source directory using `shutil.copytree` to the same path as the just-deleted temp dir.  There are a couple problems with this:
 a) Deleting and recreating the temp dir of the same name involves a possible race condition.
 b) More importantly, while `mkdtemp` will create a directory with safe permissions, `shutil.copytree` copies the original permissions of the source files, which may be arbitrary.  Instead, pip should be copying the *contents* of the source directory *into* the directory created with `mkdtemp`.

2) `sage-uncompress-spkg` just calls `TarFile.extractall()` which preserves the original permissions of all files/directories in the tar file, and doesn't provide a clear way to enable or disable this.  This is different from the GNU `tar` command which by default (for normal users) applies the user's umask to all extracted files, which is generally safer depending on the user's umask.  It would probably be best if `sage-uncompress-spkg` did this as well.

3) The top-level directory in pyparsing's source package has permissions set to 777.  Of all the upstream source tarballs I have pyparsing is the *only* one like this.  All the rest have 775 or 755.  

Result: pyparsing's source is extracted with permissions 777 and is then copied into a directory in `/tmp` with unrestricted access, from which pip installs it.  My previous comments aside these are all bad and all three should be addressed.



---

archive/issue_comments_293255.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\n4) `python setup.py sdist` doesn't actually try to *create* a tarball with sane permissions in the first place.",
    "created_at": "2016-04-21T14:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293255",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'>**Comment 17:**</a>
4) `python setup.py sdist` doesn't actually try to *create* a tarball with sane permissions in the first place.



---

archive/issue_comments_293256.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\n> python setup.py sdist doesn't actually try to create a tarball with sane permissions in the first place.\n\nAgreed.... is what I was about to write. But I tested it and `./setup.py sdist` does actually use sane permissions.  So either the maintainer of pyparsing is not using `./setup.py sdist` or is using a buggy version of Python or something.",
    "created_at": "2016-04-21T15:04:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293256",
    "user": "https://github.com/embray"
}
```

<a id='comment:18'>**Comment 18:**</a>
> python setup.py sdist doesn't actually try to create a tarball with sane permissions in the first place.

Agreed.... is what I was about to write. But I tested it and `./setup.py sdist` does actually use sane permissions.  So either the maintainer of pyparsing is not using `./setup.py sdist` or is using a buggy version of Python or something.



---

archive/issue_comments_293257.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nSee #20481 for an attempt to address point 2 above, as it was the lowest-hanging fruit I think.  The issue in pip will be easy to fix too but will have to get it accepted upstream, etc, etc.",
    "created_at": "2016-04-21T15:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293257",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'>**Comment 19:**</a>
See #20481 for an attempt to address point 2 above, as it was the lowest-hanging fruit I think.  The issue in pip will be easy to fix too but will have to get it accepted upstream, etc, etc.



---

archive/issue_comments_293258.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nReplying to [@embray](#comment%3A18):\n> > python setup.py sdist doesn't actually try to create a tarball with sane permissions in the first place.\n\n> \n> Agreed.... is what I was about to write. But I tested it and `./setup.py sdist` does actually use sane permissions.\n\nI also tested it and `./setup.py sdist` did **not** use sane permissions.",
    "created_at": "2016-04-21T15:10:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293258",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'>**Comment 20:**</a>
Replying to [@embray](#comment%3A18):
> > python setup.py sdist doesn't actually try to create a tarball with sane permissions in the first place.

> 
> Agreed.... is what I was about to write. But I tested it and `./setup.py sdist` does actually use sane permissions.

I also tested it and `./setup.py sdist` did **not** use sane permissions.



---

archive/issue_comments_293259.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nHuh. How did you test it?  I just ran `chmod 777` on the parent directory and all subdirectories, then ran `./setup.py sdist`.  The permissions in the resulting tarball at least had my umask applied:\n\n```\n$ umask -S\nu=rwx,g=rwx,o=rx\n```\nIt's the 'w' I'm mostly concerned about.  How are you defining \"sane\"?",
    "created_at": "2016-04-21T15:14:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293259",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'>**Comment 21:**</a>
Huh. How did you test it?  I just ran `chmod 777` on the parent directory and all subdirectories, then ran `./setup.py sdist`.  The permissions in the resulting tarball at least had my umask applied:

```
$ umask -S
u=rwx,g=rwx,o=rx
```
It's the 'w' I'm mostly concerned about.  How are you defining "sane"?



---

archive/issue_comments_293260.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nI made a project with the following files:\n\n`zzz.py`:\n\n```\nprint(\"zzz\")\n```\n\n`setup.py`:\n\n```\nfrom setuptools import setup   # setuptools or distutils does not matter\n\nsetup(\n    name=\"zzz\",\n    py_modules=[\"zzz\"],\n)\n```\n\nI changed the permissions of both these files to `0666` and then ran `python setup.py sdist`. The result:\n\n```\ndrwxr-xr-x jdemeyer/jdemeyer 0 2016-04-21 17:38 zzz-0.0.0/\ndrwxr-xr-x jdemeyer/jdemeyer 0 2016-04-21 17:38 zzz-0.0.0/zzz.egg-info/\n-rw-r--r-- jdemeyer/jdemeyer 1 2016-04-21 17:38 zzz-0.0.0/zzz.egg-info/dependency_links.txt\n-rw-r--r-- jdemeyer/jdemeyer 177 2016-04-21 17:38 zzz-0.0.0/zzz.egg-info/PKG-INFO\n-rw-r--r-- jdemeyer/jdemeyer 123 2016-04-21 17:38 zzz-0.0.0/zzz.egg-info/SOURCES.txt\n-rw-r--r-- jdemeyer/jdemeyer   4 2016-04-21 17:38 zzz-0.0.0/zzz.egg-info/top_level.txt\n-rw-r--r-- jdemeyer/jdemeyer 177 2016-04-21 17:38 zzz-0.0.0/PKG-INFO\n-rw-rw-rw- jdemeyer/jdemeyer 113 2016-04-21 17:36 zzz-0.0.0/setup.py\n-rw-r--r-- jdemeyer/jdemeyer  59 2016-04-21 17:38 zzz-0.0.0/setup.cfg\n-rw-rw-rw- jdemeyer/jdemeyer  13 2016-04-21 17:28 zzz-0.0.0/zzz.py\n```",
    "created_at": "2016-04-21T15:38:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293260",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'>**Comment 22:**</a>
I made a project with the following files:

`zzz.py`:

```
print("zzz")
```

`setup.py`:

```
from setuptools import setup   # setuptools or distutils does not matter

setup(
    name="zzz",
    py_modules=["zzz"],
)
```

I changed the permissions of both these files to `0666` and then ran `python setup.py sdist`. The result:

```
drwxr-xr-x jdemeyer/jdemeyer 0 2016-04-21 17:38 zzz-0.0.0/
drwxr-xr-x jdemeyer/jdemeyer 0 2016-04-21 17:38 zzz-0.0.0/zzz.egg-info/
-rw-r--r-- jdemeyer/jdemeyer 1 2016-04-21 17:38 zzz-0.0.0/zzz.egg-info/dependency_links.txt
-rw-r--r-- jdemeyer/jdemeyer 177 2016-04-21 17:38 zzz-0.0.0/zzz.egg-info/PKG-INFO
-rw-r--r-- jdemeyer/jdemeyer 123 2016-04-21 17:38 zzz-0.0.0/zzz.egg-info/SOURCES.txt
-rw-r--r-- jdemeyer/jdemeyer   4 2016-04-21 17:38 zzz-0.0.0/zzz.egg-info/top_level.txt
-rw-r--r-- jdemeyer/jdemeyer 177 2016-04-21 17:38 zzz-0.0.0/PKG-INFO
-rw-rw-rw- jdemeyer/jdemeyer 113 2016-04-21 17:36 zzz-0.0.0/setup.py
-rw-r--r-- jdemeyer/jdemeyer  59 2016-04-21 17:38 zzz-0.0.0/setup.cfg
-rw-rw-rw- jdemeyer/jdemeyer  13 2016-04-21 17:28 zzz-0.0.0/zzz.py
```



---

archive/issue_comments_293261.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nMerge conflict.",
    "created_at": "2016-04-21T15:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293261",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'>**Comment 23:**</a>
Merge conflict.



---

archive/issue_events_246542.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-04-21T15:56:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246542"
}
```



---

archive/issue_events_246543.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-04-21T15:56:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246543"
}
```



---

archive/issue_comments_293262.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nBut what about directories? I'm more concerned with what permissions it sets for directories than for files.",
    "created_at": "2016-04-22T13:17:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293262",
    "user": "https://github.com/embray"
}
```

<a id='comment:24'>**Comment 24:**</a>
But what about directories? I'm more concerned with what permissions it sets for directories than for files.



---

archive/issue_comments_293263.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nReplying to [@embray](#comment%3A24):\n> But what about directories? I'm more concerned with what permissions it sets for directories than for files.\n\nI propose to use the `umask` for everything which is in the tarfile: files, directories, ...",
    "created_at": "2016-04-22T13:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293263",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'>**Comment 25:**</a>
Replying to [@embray](#comment%3A24):
> But what about directories? I'm more concerned with what permissions it sets for directories than for files.

I propose to use the `umask` for everything which is in the tarfile: files, directories, ...



---

archive/issue_comments_293264.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95dd93867b40cff33492190d08ebd22c7486dc88\">95dd938</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr></table>\n",
    "created_at": "2016-04-22T13:32:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293264",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'>**Comment 26:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95dd93867b40cff33492190d08ebd22c7486dc88">95dd938</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr></table>




---

archive/issue_comments_293265.json:
```json
{
    "body": "**Changing commit** from \"[7447ef236941c521fb730b0baa1a760d7d4aa15d](https://github.com/sagemath/sagetrac-mirror/commit/7447ef236941c521fb730b0baa1a760d7d4aa15d)\" to \"[95dd93867b40cff33492190d08ebd22c7486dc88](https://github.com/sagemath/sagetrac-mirror/commit/95dd93867b40cff33492190d08ebd22c7486dc88)\".",
    "created_at": "2016-04-22T13:32:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293265",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[7447ef236941c521fb730b0baa1a760d7d4aa15d](https://github.com/sagemath/sagetrac-mirror/commit/7447ef236941c521fb730b0baa1a760d7d4aa15d)" to "[95dd93867b40cff33492190d08ebd22c7486dc88](https://github.com/sagemath/sagetrac-mirror/commit/95dd93867b40cff33492190d08ebd22c7486dc88)".



---

archive/issue_comments_293266.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nAlso note that #14840 added lots of new Python packages, which might be installed using `pip`.",
    "created_at": "2016-04-22T13:42:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293266",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'>**Comment 27:**</a>
Also note that #14840 added lots of new Python packages, which might be installed using `pip`.



---

archive/issue_comments_293267.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nTypo: `insalled`",
    "created_at": "2016-04-22T13:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293267",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'>**Comment 28:**</a>
Typo: `insalled`



---

archive/issue_comments_293268.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nAh, that explains why I had to rebase, and why pytz started showing up.  Thanks, I'll update those as well.",
    "created_at": "2016-04-22T13:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293268",
    "user": "https://github.com/embray"
}
```

<a id='comment:29'>**Comment 29:**</a>
Ah, that explains why I had to rebase, and why pytz started showing up.  Thanks, I'll update those as well.



---

archive/issue_comments_293269.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nSomething else to potentially worry about: how is the upgrade path from non-pip-installed packages to pip-installed packages? What if a package was installed before using either distutils or setuptools and it's now re-installed using pip?",
    "created_at": "2016-04-22T13:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293269",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'>**Comment 30:**</a>
Something else to potentially worry about: how is the upgrade path from non-pip-installed packages to pip-installed packages? What if a package was installed before using either distutils or setuptools and it's now re-installed using pip?



---

archive/issue_comments_293270.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\npip will uninstall them, *mostly*.  If a package was installed without pip, it can't uninstall and scripts or data files that were not installed directly under site-packages/package_name(.egg-info)? because there's no install log like there is with pip.\n\nThat's no worse, and slightly better than the current situation where some packages were uninstalled first, but most weren't, and of those that were only did `rm -rf site-packages/packagename`.  Some were clever enough to do `rm -rf site-packages/packagename*` but that could actually have unintended consequences.  The former case is no good either because it leaves `.egg-info` directories, making it appear to tools that know how to process those like the package is \"installed\".",
    "created_at": "2016-04-22T14:24:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293270",
    "user": "https://github.com/embray"
}
```

<a id='comment:31'>**Comment 31:**</a>
pip will uninstall them, *mostly*.  If a package was installed without pip, it can't uninstall and scripts or data files that were not installed directly under site-packages/package_name(.egg-info)? because there's no install log like there is with pip.

That's no worse, and slightly better than the current situation where some packages were uninstalled first, but most weren't, and of those that were only did `rm -rf site-packages/packagename`.  Some were clever enough to do `rm -rf site-packages/packagename*` but that could actually have unintended consequences.  The former case is no good either because it leaves `.egg-info` directories, making it appear to tools that know how to process those like the package is "installed".



---

archive/issue_comments_293271.json:
```json
{
    "body": "<a id='comment:32'>**Comment 32:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2d0d740f933468ba4d6cbfaba1488f3423d5679\">d2d0d74</a></td><td><code>Ignore directory permissions when extracting tarballs.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fe154afb48510d212407e5a6c6b560fb91076a5\">4fe154a</a></td><td><code>Modified the custom TarFile to simply apply the user's umask to all files and directories, regardless what it may be--consistent with the default behavior of 'tar'.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c30cbe51dd8ec2812198d34b914809b400b2efb\">1c30cbe</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr></table>\n",
    "created_at": "2016-04-27T14:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293271",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'>**Comment 32:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2d0d740f933468ba4d6cbfaba1488f3423d5679">d2d0d74</a></td><td><code>Ignore directory permissions when extracting tarballs.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fe154afb48510d212407e5a6c6b560fb91076a5">4fe154a</a></td><td><code>Modified the custom TarFile to simply apply the user's umask to all files and directories, regardless what it may be--consistent with the default behavior of 'tar'.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c30cbe51dd8ec2812198d34b914809b400b2efb">1c30cbe</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr></table>




---

archive/issue_comments_293272.json:
```json
{
    "body": "**Changing commit** from \"[95dd93867b40cff33492190d08ebd22c7486dc88](https://github.com/sagemath/sagetrac-mirror/commit/95dd93867b40cff33492190d08ebd22c7486dc88)\" to \"[1c30cbe51dd8ec2812198d34b914809b400b2efb](https://github.com/sagemath/sagetrac-mirror/commit/1c30cbe51dd8ec2812198d34b914809b400b2efb)\".",
    "created_at": "2016-04-27T14:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293272",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[95dd93867b40cff33492190d08ebd22c7486dc88](https://github.com/sagemath/sagetrac-mirror/commit/95dd93867b40cff33492190d08ebd22c7486dc88)" to "[1c30cbe51dd8ec2812198d34b914809b400b2efb](https://github.com/sagemath/sagetrac-mirror/commit/1c30cbe51dd8ec2812198d34b914809b400b2efb)".



---

archive/issue_comments_293273.json:
```json
{
    "body": "**Dependencies:** #20481",
    "created_at": "2016-04-27T14:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293273",
    "user": "https://github.com/embray"
}
```

**Dependencies:** #20481



---

archive/issue_comments_293274.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\nRebased to include latest from `develop`, and to include #20481.  This allowed me to remove the `env PYTHONPATH=.` from all `pip` calls.  The only package that currently was affected by this issue was pyparsing, and #20481 effectively works around it.  There is a larger problem with pip that should be addressed, but it is no longer an immediate blocker for this issue.",
    "created_at": "2016-04-27T14:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293274",
    "user": "https://github.com/embray"
}
```

<a id='comment:33'>**Comment 33:**</a>
Rebased to include latest from `develop`, and to include #20481.  This allowed me to remove the `env PYTHONPATH=.` from all `pip` calls.  The only package that currently was affected by this issue was pyparsing, and #20481 effectively works around it.  There is a larger problem with pip that should be addressed, but it is no longer an immediate blocker for this issue.



---

archive/issue_comments_293275.json:
```json
{
    "body": "**Upstream:** Not yet reported upstream; Will do shortly.",
    "created_at": "2016-04-27T14:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293275",
    "user": "https://github.com/embray"
}
```

**Upstream:** Not yet reported upstream; Will do shortly.



---

archive/issue_comments_293276.json:
```json
{
    "body": "<a id='comment:34'>**Comment 34:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31b0f5f7a6803c8545b73251d3515adda9531827\">31b0f5f</a></td><td><code>This is no longer needed.</code></td></tr></table>\n",
    "created_at": "2016-04-27T14:22:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293276",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:34'>**Comment 34:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31b0f5f7a6803c8545b73251d3515adda9531827">31b0f5f</a></td><td><code>This is no longer needed.</code></td></tr></table>




---

archive/issue_comments_293277.json:
```json
{
    "body": "**Changing commit** from \"[1c30cbe51dd8ec2812198d34b914809b400b2efb](https://github.com/sagemath/sagetrac-mirror/commit/1c30cbe51dd8ec2812198d34b914809b400b2efb)\" to \"[31b0f5f7a6803c8545b73251d3515adda9531827](https://github.com/sagemath/sagetrac-mirror/commit/31b0f5f7a6803c8545b73251d3515adda9531827)\".",
    "created_at": "2016-04-27T14:22:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293277",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[1c30cbe51dd8ec2812198d34b914809b400b2efb](https://github.com/sagemath/sagetrac-mirror/commit/1c30cbe51dd8ec2812198d34b914809b400b2efb)" to "[31b0f5f7a6803c8545b73251d3515adda9531827](https://github.com/sagemath/sagetrac-mirror/commit/31b0f5f7a6803c8545b73251d3515adda9531827)".



---

archive/issue_comments_293278.json:
```json
{
    "body": "<a id='comment:35'>**Comment 35:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3b3cdf0a4dddfc5beed1de6e15d19167c86dd01\">f3b3cdf</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba037a82a2740b805f4fba54922923c562f1732e\">ba037a8</a></td><td><code>Fix accidental duplication of patch_subdir.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b17fb08f0dad3b74724851aa17e083e48e7832b6\">b17fb08</a></td><td><code>Forgot to change this to loop over the full list when I made $patches into a list.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cedf80a1e5b6923a47312636c107b620bb18a09e\">cedf80a</a></td><td><code>Mathjax doesn't have a source directory to cd into, so uses a different default patch path from most packages.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ce575e5d8e658c1ab4c5ef1e16b96fe54902479\">2ce575e</a></td><td><code>None of these packages currently have patches to apply.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29bd19903b16289c178e9468194318e5d1017dad\">29bd199</a></td><td><code>Add license notice.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dff74e54935912f470399344aabc78b1b9b2671b\">dff74e5</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07accc7cc7e5555d58bc269dcf4549d022587169\">07accc7</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60dfae1b8caf6ff2c300afb8a56068cc3b6c1ea3\">60dfae1</a></td><td><code>Adds patch to pip to allow it to be used without SSL support from Python</code></td></tr></table>\n",
    "created_at": "2016-05-27T11:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293278",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:35'>**Comment 35:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3b3cdf0a4dddfc5beed1de6e15d19167c86dd01">f3b3cdf</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba037a82a2740b805f4fba54922923c562f1732e">ba037a8</a></td><td><code>Fix accidental duplication of patch_subdir.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b17fb08f0dad3b74724851aa17e083e48e7832b6">b17fb08</a></td><td><code>Forgot to change this to loop over the full list when I made $patches into a list.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cedf80a1e5b6923a47312636c107b620bb18a09e">cedf80a</a></td><td><code>Mathjax doesn't have a source directory to cd into, so uses a different default patch path from most packages.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ce575e5d8e658c1ab4c5ef1e16b96fe54902479">2ce575e</a></td><td><code>None of these packages currently have patches to apply.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29bd19903b16289c178e9468194318e5d1017dad">29bd199</a></td><td><code>Add license notice.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dff74e54935912f470399344aabc78b1b9b2671b">dff74e5</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07accc7cc7e5555d58bc269dcf4549d022587169">07accc7</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60dfae1b8caf6ff2c300afb8a56068cc3b6c1ea3">60dfae1</a></td><td><code>Adds patch to pip to allow it to be used without SSL support from Python</code></td></tr></table>




---

archive/issue_comments_293279.json:
```json
{
    "body": "**Changing commit** from \"[31b0f5f7a6803c8545b73251d3515adda9531827](https://github.com/sagemath/sagetrac-mirror/commit/31b0f5f7a6803c8545b73251d3515adda9531827)\" to \"[60dfae1b8caf6ff2c300afb8a56068cc3b6c1ea3](https://github.com/sagemath/sagetrac-mirror/commit/60dfae1b8caf6ff2c300afb8a56068cc3b6c1ea3)\".",
    "created_at": "2016-05-27T11:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293279",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[31b0f5f7a6803c8545b73251d3515adda9531827](https://github.com/sagemath/sagetrac-mirror/commit/31b0f5f7a6803c8545b73251d3515adda9531827)" to "[60dfae1b8caf6ff2c300afb8a56068cc3b6c1ea3](https://github.com/sagemath/sagetrac-mirror/commit/60dfae1b8caf6ff2c300afb8a56068cc3b6c1ea3)".



---

archive/issue_comments_293280.json:
```json
{
    "body": "<a id='comment:36'>**Comment 36:**</a>\nI rebased this on top of my branch for #20692 (which itself is based on a recent version of develop) so that I could use it in applying a new patch to pip.  Other than that the dependency is loose, and can be extracted if #20692 is rejected for some reason or requires significant more work.\n\nI have also applied the necessary patch to `pip` so that it no longer requires SSL to work (at least for installing local packages).",
    "created_at": "2016-05-27T12:01:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293280",
    "user": "https://github.com/embray"
}
```

<a id='comment:36'>**Comment 36:**</a>
I rebased this on top of my branch for #20692 (which itself is based on a recent version of develop) so that I could use it in applying a new patch to pip.  Other than that the dependency is loose, and can be extracted if #20692 is rejected for some reason or requires significant more work.

I have also applied the necessary patch to `pip` so that it no longer requires SSL to work (at least for installing local packages).



---

archive/issue_comments_293281.json:
```json
{
    "body": "**Changing dependencies** from \"#20481\" to \"#20481 #20692\".",
    "created_at": "2016-05-27T12:01:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293281",
    "user": "https://github.com/embray"
}
```

**Changing dependencies** from "#20481" to "#20481 #20692".



---

archive/issue_events_246544.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-27T12:01:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246544"
}
```



---

archive/issue_events_246545.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-27T12:01:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246545"
}
```



---

archive/issue_comments_293282.json:
```json
{
    "body": "<a id='comment:37'>**Comment 37:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fe1d357600e60d3422141ba5a7fb16efb3a691b\">2fe1d35</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr></table>\n",
    "created_at": "2016-05-27T12:12:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293282",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:37'>**Comment 37:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fe1d357600e60d3422141ba5a7fb16efb3a691b">2fe1d35</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr></table>




---

archive/issue_comments_293283.json:
```json
{
    "body": "**Changing commit** from \"[60dfae1b8caf6ff2c300afb8a56068cc3b6c1ea3](https://github.com/sagemath/sagetrac-mirror/commit/60dfae1b8caf6ff2c300afb8a56068cc3b6c1ea3)\" to \"[2fe1d357600e60d3422141ba5a7fb16efb3a691b](https://github.com/sagemath/sagetrac-mirror/commit/2fe1d357600e60d3422141ba5a7fb16efb3a691b)\".",
    "created_at": "2016-05-27T12:12:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293283",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[60dfae1b8caf6ff2c300afb8a56068cc3b6c1ea3](https://github.com/sagemath/sagetrac-mirror/commit/60dfae1b8caf6ff2c300afb8a56068cc3b6c1ea3)" to "[2fe1d357600e60d3422141ba5a7fb16efb3a691b](https://github.com/sagemath/sagetrac-mirror/commit/2fe1d357600e60d3422141ba5a7fb16efb3a691b)".



---

archive/issue_comments_293284.json:
```json
{
    "body": "**Changing upstream** from \"Not yet reported upstream; Will do shortly.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2016-05-27T13:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293284",
    "user": "https://github.com/vbraun"
}
```

**Changing upstream** from "Not yet reported upstream; Will do shortly." to "Fixed upstream, in a later stable release.".



---

archive/issue_comments_293285.json:
```json
{
    "body": "<a id='comment:39'>**Comment 39:**</a>\nThe SSL issue was already known upstream before I made this ticket.  However, there is a different issue with pip that I described [here](https://github.com/sagemath/sage/issues/20218#comment:16) and that should still be reported upstream.  I haven't gotten around to it yet, but I will.",
    "created_at": "2016-05-27T14:06:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293285",
    "user": "https://github.com/embray"
}
```

<a id='comment:39'>**Comment 39:**</a>
The SSL issue was already known upstream before I made this ticket.  However, there is a different issue with pip that I described [here](https://github.com/sagemath/sage/issues/20218#comment:16) and that should still be reported upstream.  I haven't gotten around to it yet, but I will.



---

archive/issue_comments_293286.json:
```json
{
    "body": "**Changing upstream** from \"Fixed upstream, in a later stable release.\" to \"None of the above - read trac for reasoning.\".",
    "created_at": "2016-05-27T14:06:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293286",
    "user": "https://github.com/embray"
}
```

**Changing upstream** from "Fixed upstream, in a later stable release." to "None of the above - read trac for reasoning.".



---

archive/issue_comments_293287.json:
```json
{
    "body": "**Changing dependencies** from \"#20481 #20692\" to \"#20692\".",
    "created_at": "2016-05-27T15:28:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293287",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#20481 #20692" to "#20692".



---

archive/issue_events_246546.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-27T15:28:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246546"
}
```



---

archive/issue_events_246547.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-27T15:28:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246547"
}
```



---

archive/issue_comments_293288.json:
```json
{
    "body": "<a id='comment:40'>**Comment 40:**</a>\nYou need to increase the patchlevel of `pip`, otherwise the patch will not be applied.",
    "created_at": "2016-05-27T15:28:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293288",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'>**Comment 40:**</a>
You need to increase the patchlevel of `pip`, otherwise the patch will not be applied.



---

archive/issue_comments_293289.json:
```json
{
    "body": "<a id='comment:41'>**Comment 41:**</a>\nThis branch does a lot of stuff. It's not a disaster, but I would have preferred to see this as 3 tickets:\n1. Add the SSL patch to `pip`.\n2. Use `pip install` to install Python packages.\n3. Add `dependencies` to optional packages without dependency files.",
    "created_at": "2016-05-27T15:30:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293289",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'>**Comment 41:**</a>
This branch does a lot of stuff. It's not a disaster, but I would have preferred to see this as 3 tickets:
1. Add the SSL patch to `pip`.
2. Use `pip install` to install Python packages.
3. Add `dependencies` to optional packages without dependency files.



---

archive/issue_comments_293290.json:
```json
{
    "body": "<a id='comment:42'>**Comment 42:**</a>\nReplying to [@jdemeyer](#comment%3A41):\n> This branch does a lot of stuff. It's not a disaster, but I would have preferred to see this as 3 tickets:\n> 1. Add the SSL patch to `pip`.\n> 2. Use `pip install` to install Python packages.\n> 3. Add `dependencies` to optional packages without dependency files.\n\nOkay, that's fair.  I can break this up.\n\nNot exactly clear how to break up 2 and 3 though.  If optional packages are going to be installed with pip, they *have* to have dependency files listing at least pip first.  But if I do that *before* making them installed with pip then they would have an unnecessary dependency on pip.\n\nUnless I made a separate ticket that only adds the dependency files with no pip, and then later adds the pip dependency as part of 2).  But that would be a little more annoying.",
    "created_at": "2016-05-27T16:11:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293290",
    "user": "https://github.com/embray"
}
```

<a id='comment:42'>**Comment 42:**</a>
Replying to [@jdemeyer](#comment%3A41):
> This branch does a lot of stuff. It's not a disaster, but I would have preferred to see this as 3 tickets:
> 1. Add the SSL patch to `pip`.
> 2. Use `pip install` to install Python packages.
> 3. Add `dependencies` to optional packages without dependency files.

Okay, that's fair.  I can break this up.

Not exactly clear how to break up 2 and 3 though.  If optional packages are going to be installed with pip, they *have* to have dependency files listing at least pip first.  But if I do that *before* making them installed with pip then they would have an unnecessary dependency on pip.

Unless I made a separate ticket that only adds the dependency files with no pip, and then later adds the pip dependency as part of 2).  But that would be a little more annoying.



---

archive/issue_comments_293291.json:
```json
{
    "body": "**Changing commit** from \"[2fe1d357600e60d3422141ba5a7fb16efb3a691b](https://github.com/sagemath/sagetrac-mirror/commit/2fe1d357600e60d3422141ba5a7fb16efb3a691b)\" to \"[a30f722df2a57f741222cb78b8f0f1086e7aa1e7](https://github.com/sagemath/sagetrac-mirror/commit/a30f722df2a57f741222cb78b8f0f1086e7aa1e7)\".",
    "created_at": "2016-05-27T16:22:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293291",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[2fe1d357600e60d3422141ba5a7fb16efb3a691b](https://github.com/sagemath/sagetrac-mirror/commit/2fe1d357600e60d3422141ba5a7fb16efb3a691b)" to "[a30f722df2a57f741222cb78b8f0f1086e7aa1e7](https://github.com/sagemath/sagetrac-mirror/commit/a30f722df2a57f741222cb78b8f0f1086e7aa1e7)".



---

archive/issue_comments_293292.json:
```json
{
    "body": "<a id='comment:43'>**Comment 43:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3ddedd985a512d4dcc0ce61f76f04bd5603e077\">e3ddedd</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a30f722df2a57f741222cb78b8f0f1086e7aa1e7\">a30f722</a></td><td><code>Bump pip package patch level</code></td></tr></table>\n",
    "created_at": "2016-05-27T16:22:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293292",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:43'>**Comment 43:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3ddedd985a512d4dcc0ce61f76f04bd5603e077">e3ddedd</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a30f722df2a57f741222cb78b8f0f1086e7aa1e7">a30f722</a></td><td><code>Bump pip package patch level</code></td></tr></table>




---

archive/issue_comments_293293.json:
```json
{
    "body": "<a id='comment:44'>**Comment 44:**</a>\nOver at #20739, people are suggesting to use `--no-binary :all:`. I don't understand why, but maybe you do...",
    "created_at": "2016-06-01T20:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293293",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'>**Comment 44:**</a>
Over at #20739, people are suggesting to use `--no-binary :all:`. I don't understand why, but maybe you do...



---

archive/issue_comments_293294.json:
```json
{
    "body": "<a id='comment:45'>**Comment 45:**</a>\nThat shouldn't be relevant here since this has nothing to do with installing packages from PyPI (or any other PyPI-like Python package index).  That's an instruction for controlling what type of package to download if there are multiple options.",
    "created_at": "2016-06-02T09:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293294",
    "user": "https://github.com/embray"
}
```

<a id='comment:45'>**Comment 45:**</a>
That shouldn't be relevant here since this has nothing to do with installing packages from PyPI (or any other PyPI-like Python package index).  That's an instruction for controlling what type of package to download if there are multiple options.



---

archive/issue_comments_293295.json:
```json
{
    "body": "<a id='comment:46'>**Comment 46:**</a>\nRight, makes sense.",
    "created_at": "2016-06-02T09:40:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293295",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'>**Comment 46:**</a>
Right, makes sense.



---

archive/issue_comments_293296.json:
```json
{
    "body": "**Changing commit** from \"[a30f722df2a57f741222cb78b8f0f1086e7aa1e7](https://github.com/sagemath/sagetrac-mirror/commit/a30f722df2a57f741222cb78b8f0f1086e7aa1e7)\" to \"[708244570a2053395a1213acc862022e61e8f25a](https://github.com/sagemath/sagetrac-mirror/commit/708244570a2053395a1213acc862022e61e8f25a)\".",
    "created_at": "2016-06-30T16:07:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293296",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[a30f722df2a57f741222cb78b8f0f1086e7aa1e7](https://github.com/sagemath/sagetrac-mirror/commit/a30f722df2a57f741222cb78b8f0f1086e7aa1e7)" to "[708244570a2053395a1213acc862022e61e8f25a](https://github.com/sagemath/sagetrac-mirror/commit/708244570a2053395a1213acc862022e61e8f25a)".



---

archive/issue_comments_293297.json:
```json
{
    "body": "<a id='comment:47'>**Comment 47:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fd9cf674511704d4728edcc66edd31432955d1e\">2fd9cf6</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/985790a1453f90d4aefec0f3141b0482fa6753a4\">985790a</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a55518ae28e58ac435d8e915907354384e70fb6\">0a55518</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/708244570a2053395a1213acc862022e61e8f25a\">7082445</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr></table>\n",
    "created_at": "2016-06-30T16:07:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293297",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:47'>**Comment 47:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fd9cf674511704d4728edcc66edd31432955d1e">2fd9cf6</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/985790a1453f90d4aefec0f3141b0482fa6753a4">985790a</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a55518ae28e58ac435d8e915907354384e70fb6">0a55518</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/708244570a2053395a1213acc862022e61e8f25a">7082445</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr></table>




---

archive/issue_events_246548.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-06-30T16:09:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246548"
}
```



---

archive/issue_events_246549.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-06-30T16:09:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246549"
}
```



---

archive/issue_comments_293298.json:
```json
{
    "body": "<a id='comment:48'>**Comment 48:**</a>\nRebased, and simplified to no longer depend on #20692, and also removed the patch to pip for SSL, which has been broken out to #20913.\n\nThis doesn't have a strict dependence on #20913, but #20913 should still be merged first since otherwise this patch will break the sage build on platforms with no OpenSSL support.",
    "created_at": "2016-06-30T16:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293298",
    "user": "https://github.com/embray"
}
```

<a id='comment:48'>**Comment 48:**</a>
Rebased, and simplified to no longer depend on #20692, and also removed the patch to pip for SSL, which has been broken out to #20913.

This doesn't have a strict dependence on #20913, but #20913 should still be merged first since otherwise this patch will break the sage build on platforms with no OpenSSL support.



---

archive/issue_comments_293299.json:
```json
{
    "body": "**Changing dependencies** from \"#20692\" to \"#20913\".",
    "created_at": "2016-06-30T16:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293299",
    "user": "https://github.com/embray"
}
```

**Changing dependencies** from "#20692" to "#20913".



---

archive/issue_comments_293300.json:
```json
{
    "body": "<a id='comment:49'>**Comment 49:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/756d94a34ebfdc307c0a8f12ef3121236a69d323\">756d94a</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/70135d481f15ead7804b135220b620bf5730109c\">70135d4</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd0e2ca16725ac2c5da4c3c36266f1418262e65d\">bd0e2ca</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f028f6fcd96f74b9836a2a88558386d4eaa3cbb9\">f028f6f</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr></table>\n",
    "created_at": "2016-07-12T08:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293300",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:49'>**Comment 49:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/756d94a34ebfdc307c0a8f12ef3121236a69d323">756d94a</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/70135d481f15ead7804b135220b620bf5730109c">70135d4</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd0e2ca16725ac2c5da4c3c36266f1418262e65d">bd0e2ca</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f028f6fcd96f74b9836a2a88558386d4eaa3cbb9">f028f6f</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr></table>




---

archive/issue_comments_293301.json:
```json
{
    "body": "**Changing commit** from \"[708244570a2053395a1213acc862022e61e8f25a](https://github.com/sagemath/sagetrac-mirror/commit/708244570a2053395a1213acc862022e61e8f25a)\" to \"[f028f6fcd96f74b9836a2a88558386d4eaa3cbb9](https://github.com/sagemath/sagetrac-mirror/commit/f028f6fcd96f74b9836a2a88558386d4eaa3cbb9)\".",
    "created_at": "2016-07-12T08:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293301",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[708244570a2053395a1213acc862022e61e8f25a](https://github.com/sagemath/sagetrac-mirror/commit/708244570a2053395a1213acc862022e61e8f25a)" to "[f028f6fcd96f74b9836a2a88558386d4eaa3cbb9](https://github.com/sagemath/sagetrac-mirror/commit/f028f6fcd96f74b9836a2a88558386d4eaa3cbb9)".



---

archive/issue_comments_293302.json:
```json
{
    "body": "<a id='comment:50'>**Comment 50:**</a>\nRebased on recent develop branch.\n\nIt would be great to get this moving--I just a build fail on trying to install `flask_babel` (though it could have been any number of packages) because they all use setuptools, and hence running `./setup.py install` makes them use `easy_install` by default and check online for the package's dependencies even though it shouldn't have to.\n\nThis patch ensures that Python packages are installed without dependency on PyPI.",
    "created_at": "2016-07-12T08:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293302",
    "user": "https://github.com/embray"
}
```

<a id='comment:50'>**Comment 50:**</a>
Rebased on recent develop branch.

It would be great to get this moving--I just a build fail on trying to install `flask_babel` (though it could have been any number of packages) because they all use setuptools, and hence running `./setup.py install` makes them use `easy_install` by default and check online for the package's dependencies even though it shouldn't have to.

This patch ensures that Python packages are installed without dependency on PyPI.



---

archive/issue_events_246550.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-07-15T09:12:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246550"
}
```



---

archive/issue_events_246551.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-07-15T09:12:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246551"
}
```



---

archive/issue_events_246552.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-07-15T09:12:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246552"
}
```



---

archive/issue_events_246553.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-07-15T09:12:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246553"
}
```



---

archive/issue_comments_293303.json:
```json
{
    "body": "<a id='comment:51'>**Comment 51:**</a>\nMerge conflict.",
    "created_at": "2016-07-15T09:12:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293303",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:51'>**Comment 51:**</a>
Merge conflict.



---

archive/issue_comments_293304.json:
```json
{
    "body": "**Changing commit** from \"[f028f6fcd96f74b9836a2a88558386d4eaa3cbb9](https://github.com/sagemath/sagetrac-mirror/commit/f028f6fcd96f74b9836a2a88558386d4eaa3cbb9)\" to \"[7880aca0575e38126b2e6f510c6b8202d10d768b](https://github.com/sagemath/sagetrac-mirror/commit/7880aca0575e38126b2e6f510c6b8202d10d768b)\".",
    "created_at": "2016-07-15T09:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293304",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[f028f6fcd96f74b9836a2a88558386d4eaa3cbb9](https://github.com/sagemath/sagetrac-mirror/commit/f028f6fcd96f74b9836a2a88558386d4eaa3cbb9)" to "[7880aca0575e38126b2e6f510c6b8202d10d768b](https://github.com/sagemath/sagetrac-mirror/commit/7880aca0575e38126b2e6f510c6b8202d10d768b)".



---

archive/issue_comments_293305.json:
```json
{
    "body": "<a id='comment:52'>**Comment 52:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/067670828f4b0ed3a87362fc4721775e9348340a\">0676708</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cadba8802746aa9c19f2ba2f80e3f7cf4915694b\">cadba88</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e014d935a5c1c8f5aec013cec4f672ea409e70b\">3e014d9</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7880aca0575e38126b2e6f510c6b8202d10d768b\">7880aca</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr></table>\n",
    "created_at": "2016-07-15T09:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293305",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:52'>**Comment 52:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/067670828f4b0ed3a87362fc4721775e9348340a">0676708</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cadba8802746aa9c19f2ba2f80e3f7cf4915694b">cadba88</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e014d935a5c1c8f5aec013cec4f672ea409e70b">3e014d9</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7880aca0575e38126b2e6f510c6b8202d10d768b">7880aca</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr></table>




---

archive/issue_events_246554.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-07-15T09:57:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246554"
}
```



---

archive/issue_events_246555.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-07-15T09:57:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246555"
}
```



---

archive/issue_comments_293306.json:
```json
{
    "body": "<a id='comment:53'>**Comment 53:**</a>\nRebased again.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/067670828f4b0ed3a87362fc4721775e9348340a\">0676708</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cadba8802746aa9c19f2ba2f80e3f7cf4915694b\">cadba88</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e014d935a5c1c8f5aec013cec4f672ea409e70b\">3e014d9</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7880aca0575e38126b2e6f510c6b8202d10d768b\">7880aca</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr></table>\n",
    "created_at": "2016-07-15T09:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293306",
    "user": "https://github.com/embray"
}
```

<a id='comment:53'>**Comment 53:**</a>
Rebased again.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/067670828f4b0ed3a87362fc4721775e9348340a">0676708</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cadba8802746aa9c19f2ba2f80e3f7cf4915694b">cadba88</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e014d935a5c1c8f5aec013cec4f672ea409e70b">3e014d9</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7880aca0575e38126b2e6f510c6b8202d10d768b">7880aca</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr></table>




---

archive/issue_comments_293307.json:
```json
{
    "body": "**Changing dependencies** from \"#20913\" to \"\".",
    "created_at": "2016-07-15T16:21:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293307",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#20913" to "".



---

archive/issue_comments_293308.json:
```json
{
    "body": "<a id='comment:55'>**Comment 55:**</a>\nVolker, it would be good if you could test on the buildbot that this ticket works when building from scratch.",
    "created_at": "2016-07-15T16:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293308",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'>**Comment 55:**</a>
Volker, it would be good if you could test on the buildbot that this ticket works when building from scratch.



---

archive/issue_comments_293309.json:
```json
{
    "body": "**Dependencies:** #19295",
    "created_at": "2016-07-15T16:28:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293309",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #19295



---

archive/issue_events_246556.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-07-15T16:28:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246556"
}
```



---

archive/issue_events_246557.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-07-15T16:28:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246557"
}
```



---

archive/issue_comments_293310.json:
```json
{
    "body": "<a id='comment:56'>**Comment 56:**</a>\nSorry for the trouble again, but this conflicts with #19295. I guess you should rebase it to that ticket. Alternatively, wait for the new Sage beta release.\n\nApart from that, I see no obvious issue with this ticket. It mostly needs testing. I will try to do that in the following days.",
    "created_at": "2016-07-15T16:28:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293310",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'>**Comment 56:**</a>
Sorry for the trouble again, but this conflicts with #19295. I guess you should rebase it to that ticket. Alternatively, wait for the new Sage beta release.

Apart from that, I see no obvious issue with this ticket. It mostly needs testing. I will try to do that in the following days.



---

archive/issue_comments_293311.json:
```json
{
    "body": "<a id='comment:57'>**Comment 57:**</a>\nI mean, so long as #19295 is merged I can rebase this again on develop right?",
    "created_at": "2016-07-18T09:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293311",
    "user": "https://github.com/embray"
}
```

<a id='comment:57'>**Comment 57:**</a>
I mean, so long as #19295 is merged I can rebase this again on develop right?



---

archive/issue_comments_293312.json:
```json
{
    "body": "<a id='comment:58'>**Comment 58:**</a>\nReplying to [@embray](#comment%3A57):\n> I mean, so long as #19295 is merged I can rebase this again on develop right?\n\n...when the next beta/rc release comes out which includes #19295, yes.\n\nOr you just rebase right now on the branch of #19295.",
    "created_at": "2016-07-18T15:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293312",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:58'>**Comment 58:**</a>
Replying to [@embray](#comment%3A57):
> I mean, so long as #19295 is merged I can rebase this again on develop right?

...when the next beta/rc release comes out which includes #19295, yes.

Or you just rebase right now on the branch of #19295.



---

archive/issue_comments_293313.json:
```json
{
    "body": "<a id='comment:59'>**Comment 59:**</a>\nAs far as I can tell, this ticket works fine. So the only obstruction is #19295.",
    "created_at": "2016-07-19T18:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293313",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:59'>**Comment 59:**</a>
As far as I can tell, this ticket works fine. So the only obstruction is #19295.



---

archive/issue_comments_293314.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2016-07-19T18:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293314",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_comments_293315.json:
```json
{
    "body": "<a id='comment:61'>**Comment 61:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a90e69bc5e7a6b420d59d2f49f1a3b4ced4fc8f\">3a90e69</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c028d41e2da15f8e99c1f4287c3f794f4e189e15\">c028d41</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83061e1f731ac0a5de226d0ec61e63c78bb3c54c\">83061e1</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c899a4e207e59e437406f71016fbffe47dbe9a3\">0c899a4</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr></table>\n",
    "created_at": "2016-07-26T11:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293315",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:61'>**Comment 61:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a90e69bc5e7a6b420d59d2f49f1a3b4ced4fc8f">3a90e69</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c028d41e2da15f8e99c1f4287c3f794f4e189e15">c028d41</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83061e1f731ac0a5de226d0ec61e63c78bb3c54c">83061e1</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c899a4e207e59e437406f71016fbffe47dbe9a3">0c899a4</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr></table>




---

archive/issue_comments_293316.json:
```json
{
    "body": "**Changing commit** from \"[7880aca0575e38126b2e6f510c6b8202d10d768b](https://github.com/sagemath/sagetrac-mirror/commit/7880aca0575e38126b2e6f510c6b8202d10d768b)\" to \"[0c899a4e207e59e437406f71016fbffe47dbe9a3](https://github.com/sagemath/sagetrac-mirror/commit/0c899a4e207e59e437406f71016fbffe47dbe9a3)\".",
    "created_at": "2016-07-26T11:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293316",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[7880aca0575e38126b2e6f510c6b8202d10d768b](https://github.com/sagemath/sagetrac-mirror/commit/7880aca0575e38126b2e6f510c6b8202d10d768b)" to "[0c899a4e207e59e437406f71016fbffe47dbe9a3](https://github.com/sagemath/sagetrac-mirror/commit/0c899a4e207e59e437406f71016fbffe47dbe9a3)".



---

archive/issue_comments_293317.json:
```json
{
    "body": "<a id='comment:62'>**Comment 62:**</a>\nRebased",
    "created_at": "2016-07-26T11:47:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293317",
    "user": "https://github.com/embray"
}
```

<a id='comment:62'>**Comment 62:**</a>
Rebased



---

archive/issue_events_246558.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-07-26T11:47:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246558"
}
```



---

archive/issue_events_246559.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-07-26T11:47:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246559"
}
```



---

archive/issue_comments_293318.json:
```json
{
    "body": "**Changing reviewer** from \"Jeroen Demeyer\" to \"Jeroen Demeyer, Volker Braun\".",
    "created_at": "2016-08-04T18:39:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293318",
    "user": "https://github.com/vbraun"
}
```

**Changing reviewer** from "Jeroen Demeyer" to "Jeroen Demeyer, Volker Braun".



---

archive/issue_events_246560.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-04T18:39:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246560"
}
```



---

archive/issue_events_246561.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-04T18:39:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246561"
}
```



---

archive/issue_events_246562.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-05T08:36:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246562"
}
```



---

archive/issue_events_246563.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-05T08:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246563"
}
```



---

archive/issue_comments_293319.json:
```json
{
    "body": "<a id='comment:64'>**Comment 64:**</a>\nI actually need to modify this slightly.  The `$PIP_INSTALL` variable that's set in `build/make/install` is now needed for running the `spkg-install` for all the Python packages that use it.  This means `spkg-install` can't be run directly and *must* go through the `build/make/install` script.\n\nInstead, `$PIP_INSTALL` should probably be set in `sage-env`.",
    "created_at": "2016-08-05T08:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293319",
    "user": "https://github.com/embray"
}
```

<a id='comment:64'>**Comment 64:**</a>
I actually need to modify this slightly.  The `$PIP_INSTALL` variable that's set in `build/make/install` is now needed for running the `spkg-install` for all the Python packages that use it.  This means `spkg-install` can't be run directly and *must* go through the `build/make/install` script.

Instead, `$PIP_INSTALL` should probably be set in `sage-env`.



---

archive/issue_comments_293320.json:
```json
{
    "body": "**Changing commit** from \"[0c899a4e207e59e437406f71016fbffe47dbe9a3](https://github.com/sagemath/sagetrac-mirror/commit/0c899a4e207e59e437406f71016fbffe47dbe9a3)\" to \"[8df4b5f444557ad9c98c8ba0bdeb5ccc08211302](https://github.com/sagemath/sagetrac-mirror/commit/8df4b5f444557ad9c98c8ba0bdeb5ccc08211302)\".",
    "created_at": "2016-08-05T09:14:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293320",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[0c899a4e207e59e437406f71016fbffe47dbe9a3](https://github.com/sagemath/sagetrac-mirror/commit/0c899a4e207e59e437406f71016fbffe47dbe9a3)" to "[8df4b5f444557ad9c98c8ba0bdeb5ccc08211302](https://github.com/sagemath/sagetrac-mirror/commit/8df4b5f444557ad9c98c8ba0bdeb5ccc08211302)".



---

archive/issue_comments_293321.json:
```json
{
    "body": "<a id='comment:65'>**Comment 65:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8df4b5f444557ad9c98c8ba0bdeb5ccc08211302\">8df4b5f</a></td><td><code>Move PIP_INSTALL into sage-env so that it's available so long as the Sage environment is activated</code></td></tr></table>\n",
    "created_at": "2016-08-05T09:14:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293321",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:65'>**Comment 65:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8df4b5f444557ad9c98c8ba0bdeb5ccc08211302">8df4b5f</a></td><td><code>Move PIP_INSTALL into sage-env so that it's available so long as the Sage environment is activated</code></td></tr></table>




---

archive/issue_comments_293322.json:
```json
{
    "body": "<a id='comment:66'>**Comment 66:**</a>\nDone. Seems to work fine.\n  \n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8df4b5f444557ad9c98c8ba0bdeb5ccc08211302\">8df4b5f</a></td><td><code>Move PIP_INSTALL into sage-env so that it's available so long as the Sage environment is activated</code></td></tr></table>\n",
    "created_at": "2016-08-05T09:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293322",
    "user": "https://github.com/embray"
}
```

<a id='comment:66'>**Comment 66:**</a>
Done. Seems to work fine.
  
---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8df4b5f444557ad9c98c8ba0bdeb5ccc08211302">8df4b5f</a></td><td><code>Move PIP_INSTALL into sage-env so that it's available so long as the Sage environment is activated</code></td></tr></table>




---

archive/issue_events_246564.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-05T09:14:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246564"
}
```



---

archive/issue_events_246565.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-05T09:14:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246565"
}
```



---

archive/issue_events_246566.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-05T21:16:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246566"
}
```



---

archive/issue_events_246567.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-05T21:16:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246567"
}
```



---

archive/issue_events_246568.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-06T09:52:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246568"
}
```



---

archive/issue_events_246569.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-06T09:52:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246569"
}
```



---

archive/issue_comments_293323.json:
```json
{
    "body": "<a id='comment:68'>**Comment 68:**</a>\nFails for me when building after \"make distclean\" with\n\n```\nsagenb-export 2.0 is already the active version in easy-install.pth\nInstalling sagenb-export script to /mnt/disk/home/release/Sage/local/bin\n\nInstalled /mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sagenb_export-2.0-py2.7.egg\nProcessing dependencies for sagenb-export==2.0\nSearching for entrypoints\nReading https://pypi.python.org/simple/entrypoints/\n```\nThe buildbot is not allowed to download packages. \n\nThe nbconvert package lists entrypoints in `local/lib/python2.7/site-packages/nbconvert-4.2.0-py2.7.egg-info/requires.txt`, but only with this ticket. Without this ticket, the depenency is not picked up.\n\nPerhaps the easiest solution would be to package entrypoints...",
    "created_at": "2016-08-06T09:52:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293323",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:68'>**Comment 68:**</a>
Fails for me when building after "make distclean" with

```
sagenb-export 2.0 is already the active version in easy-install.pth
Installing sagenb-export script to /mnt/disk/home/release/Sage/local/bin

Installed /mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sagenb_export-2.0-py2.7.egg
Processing dependencies for sagenb-export==2.0
Searching for entrypoints
Reading https://pypi.python.org/simple/entrypoints/
```
The buildbot is not allowed to download packages. 

The nbconvert package lists entrypoints in `local/lib/python2.7/site-packages/nbconvert-4.2.0-py2.7.egg-info/requires.txt`, but only with this ticket. Without this ticket, the depenency is not picked up.

Perhaps the easiest solution would be to package entrypoints...



---

archive/issue_comments_293324.json:
```json
{
    "body": "<a id='comment:69'>**Comment 69:**</a>\n`sagenb_export` isn't even a sage package in this branch.  It must have been added since I last rebased.  I mean, until the commit I just pushed it wasn't even being installed with pip so I don't know what the relation would be.\n\nExcept that whoever added `sagenb_export` as an spkg did not also add all its dependencies which unfortunately you have to do.",
    "created_at": "2016-08-08T08:06:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293324",
    "user": "https://github.com/embray"
}
```

<a id='comment:69'>**Comment 69:**</a>
`sagenb_export` isn't even a sage package in this branch.  It must have been added since I last rebased.  I mean, until the commit I just pushed it wasn't even being installed with pip so I don't know what the relation would be.

Except that whoever added `sagenb_export` as an spkg did not also add all its dependencies which unfortunately you have to do.



---

archive/issue_comments_293325.json:
```json
{
    "body": "**Changing commit** from \"[8df4b5f444557ad9c98c8ba0bdeb5ccc08211302](https://github.com/sagemath/sagetrac-mirror/commit/8df4b5f444557ad9c98c8ba0bdeb5ccc08211302)\" to \"[de5cc9d73614faa62e52e6204266f6a38254c18f](https://github.com/sagemath/sagetrac-mirror/commit/de5cc9d73614faa62e52e6204266f6a38254c18f)\".",
    "created_at": "2016-08-08T08:08:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293325",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[8df4b5f444557ad9c98c8ba0bdeb5ccc08211302](https://github.com/sagemath/sagetrac-mirror/commit/8df4b5f444557ad9c98c8ba0bdeb5ccc08211302)" to "[de5cc9d73614faa62e52e6204266f6a38254c18f](https://github.com/sagemath/sagetrac-mirror/commit/de5cc9d73614faa62e52e6204266f6a38254c18f)".



---

archive/issue_comments_293326.json:
```json
{
    "body": "<a id='comment:70'>**Comment 70:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2680940a7fd73a53d1f4351dfb0b933958ad28d\">c268094</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5cfec2fcea2c168dc7860c6374b9355c01c494a\">a5cfec2</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aaf7a8c6100c014bd59db9218a3ba74a3ba84930\">aaf7a8c</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec6ca6c685fef13178b1fc86eb516428a3cb8740\">ec6ca6c</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/820314ecb31516e7acb28b34aa54c7f5e9e56ce7\">820314e</a></td><td><code>Move PIP_INSTALL into sage-env so that it's available so long as the Sage environment is activated</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de5cc9d73614faa62e52e6204266f6a38254c18f\">de5cc9d</a></td><td><code>pip install sagenb_exports</code></td></tr></table>\n",
    "created_at": "2016-08-08T08:08:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293326",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:70'>**Comment 70:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2680940a7fd73a53d1f4351dfb0b933958ad28d">c268094</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5cfec2fcea2c168dc7860c6374b9355c01c494a">a5cfec2</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aaf7a8c6100c014bd59db9218a3ba74a3ba84930">aaf7a8c</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec6ca6c685fef13178b1fc86eb516428a3cb8740">ec6ca6c</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/820314ecb31516e7acb28b34aa54c7f5e9e56ce7">820314e</a></td><td><code>Move PIP_INSTALL into sage-env so that it's available so long as the Sage environment is activated</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de5cc9d73614faa62e52e6204266f6a38254c18f">de5cc9d</a></td><td><code>pip install sagenb_exports</code></td></tr></table>




---

archive/issue_events_246570.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-16T09:08:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246570"
}
```



---

archive/issue_events_246571.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-16T09:08:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246571"
}
```



---

archive/issue_comments_293327.json:
```json
{
    "body": "**Changing dependencies** from \"#19295\" to \"\".",
    "created_at": "2016-08-16T09:08:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293327",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#19295" to "".



---

archive/issue_comments_293328.json:
```json
{
    "body": "<a id='comment:71'>**Comment 71:**</a>\nThis is proving to be difficult to do all at once. Maybe this should be split up to \"provide the base functionality\" like the `PIP_INSTALL` stuff and then we can fix individual packages or batches of packages in follow-up tickets.\n\nThen a comment about the implementation: making `PIP_INSTALL` an environment variable looks strange. Maybe a small script `build/bin/pip-install` would make more sense?",
    "created_at": "2016-08-16T09:08:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293328",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:71'>**Comment 71:**</a>
This is proving to be difficult to do all at once. Maybe this should be split up to "provide the base functionality" like the `PIP_INSTALL` stuff and then we can fix individual packages or batches of packages in follow-up tickets.

Then a comment about the implementation: making `PIP_INSTALL` an environment variable looks strange. Maybe a small script `build/bin/pip-install` would make more sense?



---

archive/issue_comments_293329.json:
```json
{
    "body": "<a id='comment:72'>**Comment 72:**</a>\nI don't think making `PIP_INSTALL` an environment variable \"looks strange\" any more than `CC` does.\n\nHow is it proving to be too difficult?  It works for me.",
    "created_at": "2016-08-16T09:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293329",
    "user": "https://github.com/embray"
}
```

<a id='comment:72'>**Comment 72:**</a>
I don't think making `PIP_INSTALL` an environment variable "looks strange" any more than `CC` does.

How is it proving to be too difficult?  It works for me.



---

archive/issue_comments_293330.json:
```json
{
    "body": "<a id='comment:73'>**Comment 73:**</a>\nAh, looks like it needs to be rebased again.  No problem.",
    "created_at": "2016-08-16T09:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293330",
    "user": "https://github.com/embray"
}
```

<a id='comment:73'>**Comment 73:**</a>
Ah, looks like it needs to be rebased again.  No problem.



---

archive/issue_comments_293331.json:
```json
{
    "body": "<a id='comment:74'>**Comment 74:**</a>\nReplying to [@embray](#comment%3A72):\n> How is it proving to be too difficult?\n\nDifficult to merge in the sense that it constantly conflicts with other tickets.",
    "created_at": "2016-08-16T09:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293331",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:74'>**Comment 74:**</a>
Replying to [@embray](#comment%3A72):
> How is it proving to be too difficult?

Difficult to merge in the sense that it constantly conflicts with other tickets.



---

archive/issue_comments_293332.json:
```json
{
    "body": "**Changing commit** from \"[de5cc9d73614faa62e52e6204266f6a38254c18f](https://github.com/sagemath/sagetrac-mirror/commit/de5cc9d73614faa62e52e6204266f6a38254c18f)\" to \"[d7218a077e4c2bffe8a8cd6a496e62313191a36b](https://github.com/sagemath/sagetrac-mirror/commit/d7218a077e4c2bffe8a8cd6a496e62313191a36b)\".",
    "created_at": "2016-08-16T09:37:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293332",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[de5cc9d73614faa62e52e6204266f6a38254c18f](https://github.com/sagemath/sagetrac-mirror/commit/de5cc9d73614faa62e52e6204266f6a38254c18f)" to "[d7218a077e4c2bffe8a8cd6a496e62313191a36b](https://github.com/sagemath/sagetrac-mirror/commit/d7218a077e4c2bffe8a8cd6a496e62313191a36b)".



---

archive/issue_comments_293333.json:
```json
{
    "body": "<a id='comment:75'>**Comment 75:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c9dffebd1e999be2ea752466085fb28ca1022c2\">6c9dffe</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63cade457c484ab1451998ffab0be665f53c10bd\">63cade4</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a692a300c47526f4ab7987bcc109ca23e9acee20\">a692a30</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e16e00113042fd2d0348db07310e0bfc57f815c\">3e16e00</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/332d91561b060f22f6af8539bc5440659403447a\">332d915</a></td><td><code>Move PIP_INSTALL into sage-env so that it's available so long as the Sage environment is activated</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6121b21c29ba65f71b8804edbd621282854bcd7\">d6121b2</a></td><td><code>pip install sagenb_exports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7218a077e4c2bffe8a8cd6a496e62313191a36b\">d7218a0</a></td><td><code>Three new Python packages were added that should use pip for installation</code></td></tr></table>\n",
    "created_at": "2016-08-16T09:37:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293333",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:75'>**Comment 75:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c9dffebd1e999be2ea752466085fb28ca1022c2">6c9dffe</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63cade457c484ab1451998ffab0be665f53c10bd">63cade4</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a692a300c47526f4ab7987bcc109ca23e9acee20">a692a30</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e16e00113042fd2d0348db07310e0bfc57f815c">3e16e00</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/332d91561b060f22f6af8539bc5440659403447a">332d915</a></td><td><code>Move PIP_INSTALL into sage-env so that it's available so long as the Sage environment is activated</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6121b21c29ba65f71b8804edbd621282854bcd7">d6121b2</a></td><td><code>pip install sagenb_exports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7218a077e4c2bffe8a8cd6a496e62313191a36b">d7218a0</a></td><td><code>Three new Python packages were added that should use pip for installation</code></td></tr></table>




---

archive/issue_comments_293334.json:
```json
{
    "body": "<a id='comment:76'>**Comment 76:**</a>\nAnother question that comes to mind: Where would be the best place in the documentation to document how an spkg for a Python package should be installed?  That should be updated ASAP to demonstrate using pip to install the package instead of the old-fashioned `python setup.py install`?\n\nAnyways the sooner we get this merged, and update the documentation, the less \"difficult\" this will be.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c9dffebd1e999be2ea752466085fb28ca1022c2\">6c9dffe</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63cade457c484ab1451998ffab0be665f53c10bd\">63cade4</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a692a300c47526f4ab7987bcc109ca23e9acee20\">a692a30</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e16e00113042fd2d0348db07310e0bfc57f815c\">3e16e00</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/332d91561b060f22f6af8539bc5440659403447a\">332d915</a></td><td><code>Move PIP_INSTALL into sage-env so that it's available so long as the Sage environment is activated</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6121b21c29ba65f71b8804edbd621282854bcd7\">d6121b2</a></td><td><code>pip install sagenb_exports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7218a077e4c2bffe8a8cd6a496e62313191a36b\">d7218a0</a></td><td><code>Three new Python packages were added that should use pip for installation</code></td></tr></table>\n",
    "created_at": "2016-08-16T09:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293334",
    "user": "https://github.com/embray"
}
```

<a id='comment:76'>**Comment 76:**</a>
Another question that comes to mind: Where would be the best place in the documentation to document how an spkg for a Python package should be installed?  That should be updated ASAP to demonstrate using pip to install the package instead of the old-fashioned `python setup.py install`?

Anyways the sooner we get this merged, and update the documentation, the less "difficult" this will be.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c9dffebd1e999be2ea752466085fb28ca1022c2">6c9dffe</a></td><td><code>Use pip to install most Python-based dependencies; see http://trac.sagemath.org/ticket/20218</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63cade457c484ab1451998ffab0be665f53c10bd">63cade4</a></td><td><code>This is no longer needed.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a692a300c47526f4ab7987bcc109ca23e9acee20">a692a30</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e16e00113042fd2d0348db07310e0bfc57f815c">3e16e00</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/332d91561b060f22f6af8539bc5440659403447a">332d915</a></td><td><code>Move PIP_INSTALL into sage-env so that it's available so long as the Sage environment is activated</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6121b21c29ba65f71b8804edbd621282854bcd7">d6121b2</a></td><td><code>pip install sagenb_exports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7218a077e4c2bffe8a8cd6a496e62313191a36b">d7218a0</a></td><td><code>Three new Python packages were added that should use pip for installation</code></td></tr></table>




---

archive/issue_comments_293335.json:
```json
{
    "body": "<a id='comment:77'>**Comment 77:**</a>\nJust a comment: I need this to fix the installation of `widgetsnbextension`, see #21256.",
    "created_at": "2016-08-16T10:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293335",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:77'>**Comment 77:**</a>
Just a comment: I need this to fix the installation of `widgetsnbextension`, see #21256.



---

archive/issue_comments_293336.json:
```json
{
    "body": "<a id='comment:78'>**Comment 78:**</a>\nIs this ready for review?",
    "created_at": "2016-08-16T10:19:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293336",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:78'>**Comment 78:**</a>
Is this ready for review?



---

archive/issue_comments_293337.json:
```json
{
    "body": "<a id='comment:79'>**Comment 79:**</a>\nReplying to [@jdemeyer](#comment%3A77):\n> Just a comment: I need this to fix the installation of `widgetsnbextension`, see #21256.\n\nAnd it needs the `--ignored-installed` option that you are adding here, otherwise the broken installation remains broken.",
    "created_at": "2016-08-16T10:23:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293337",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:79'>**Comment 79:**</a>
Replying to [@jdemeyer](#comment%3A77):
> Just a comment: I need this to fix the installation of `widgetsnbextension`, see #21256.

And it needs the `--ignored-installed` option that you are adding here, otherwise the broken installation remains broken.



---

archive/issue_comments_293338.json:
```json
{
    "body": "<a id='comment:80'>**Comment 80:**</a>\nI do not like the `--no-deps` flag: it used to be an error if dependencies were not installed, now you will silently have a broken installation.",
    "created_at": "2016-08-16T10:39:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293338",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:80'>**Comment 80:**</a>
I do not like the `--no-deps` flag: it used to be an error if dependencies were not installed, now you will silently have a broken installation.



---

archive/issue_comments_293339.json:
```json
{
    "body": "<a id='comment:81'>**Comment 81:**</a>\nI also like `--verbose`: it actually shows the output from `setup.py` instead of\n\n```\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: still running...\n    Running setup.py install for scipy: finished with status 'done'\n```",
    "created_at": "2016-08-16T11:37:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293339",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:81'>**Comment 81:**</a>
I also like `--verbose`: it actually shows the output from `setup.py` instead of

```
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: still running...
    Running setup.py install for scipy: finished with status 'done'
```



---

archive/issue_comments_293340.json:
```json
{
    "body": "<a id='comment:82'>**Comment 82:**</a>\nReplying to [@jdemeyer](#comment%3A80):\n> I do not like the `--no-deps` flag: it used to be an error if dependencies were not installed, now you will silently have a broken installation.\n\nThat's a problem that Sage's package distributions should be handling.  In other words, you're asking pip and PyPI to handle dependency resolution for you.  But if Sage wants to maintain its own package distribution system it's its responsibility to handle dependency resolution correctly.",
    "created_at": "2016-08-16T11:43:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293340",
    "user": "https://github.com/embray"
}
```

<a id='comment:82'>**Comment 82:**</a>
Replying to [@jdemeyer](#comment%3A80):
> I do not like the `--no-deps` flag: it used to be an error if dependencies were not installed, now you will silently have a broken installation.

That's a problem that Sage's package distributions should be handling.  In other words, you're asking pip and PyPI to handle dependency resolution for you.  But if Sage wants to maintain its own package distribution system it's its responsibility to handle dependency resolution correctly.



---

archive/issue_comments_293341.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/pip-install](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/pip-install)\" to \"[u/jdemeyer/pip-install](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/pip-install)\".",
    "created_at": "2016-08-16T11:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293341",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/embray/pip-install](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/pip-install)" to "[u/jdemeyer/pip-install](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/pip-install)".



---

archive/issue_comments_293342.json:
```json
{
    "body": "**Changing commit** from \"[d7218a077e4c2bffe8a8cd6a496e62313191a36b](https://github.com/sagemath/sagetrac-mirror/commit/d7218a077e4c2bffe8a8cd6a496e62313191a36b)\" to \"[c728bd8af325487e8d8578aa7dafe650c1b07492](https://github.com/sagemath/sagetrac-mirror/commit/c728bd8af325487e8d8578aa7dafe650c1b07492)\".",
    "created_at": "2016-08-16T11:46:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293342",
    "user": "https://github.com/embray"
}
```

**Changing commit** from "[d7218a077e4c2bffe8a8cd6a496e62313191a36b](https://github.com/sagemath/sagetrac-mirror/commit/d7218a077e4c2bffe8a8cd6a496e62313191a36b)" to "[c728bd8af325487e8d8578aa7dafe650c1b07492](https://github.com/sagemath/sagetrac-mirror/commit/c728bd8af325487e8d8578aa7dafe650c1b07492)".



---

archive/issue_comments_293343.json:
```json
{
    "body": "<a id='comment:84'>**Comment 84:**</a>\nI'm fine with adding the `--verbose` flag but -1 on removing `--no-deps`.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c728bd8af325487e8d8578aa7dafe650c1b07492\">c728bd8</a></td><td><code>Remove --no-deps and add --verbose flag to pip</code></td></tr></table>\n",
    "created_at": "2016-08-16T11:46:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293343",
    "user": "https://github.com/embray"
}
```

<a id='comment:84'>**Comment 84:**</a>
I'm fine with adding the `--verbose` flag but -1 on removing `--no-deps`.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c728bd8af325487e8d8578aa7dafe650c1b07492">c728bd8</a></td><td><code>Remove --no-deps and add --verbose flag to pip</code></td></tr></table>




---

archive/issue_comments_293344.json:
```json
{
    "body": "<a id='comment:85'>**Comment 85:**</a>\nReplying to [@embray](#comment%3A82):\n> That's a problem that Sage's package distributions should be handling.  In other words, you're asking pip and PyPI to handle dependency resolution for you.\n\nNot really. I want dependency *checking*, not dependency *resolution*.\n\nIt is completely normal for a package to check its dependencies upon installation: GNU `configure` scripts usually do this.\n\nThe flag `--no-index` does exactly that: it will not install dependencies but it will still check for dependencies.",
    "created_at": "2016-08-16T11:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293344",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:85'>**Comment 85:**</a>
Replying to [@embray](#comment%3A82):
> That's a problem that Sage's package distributions should be handling.  In other words, you're asking pip and PyPI to handle dependency resolution for you.

Not really. I want dependency *checking*, not dependency *resolution*.

It is completely normal for a package to check its dependencies upon installation: GNU `configure` scripts usually do this.

The flag `--no-index` does exactly that: it will not install dependencies but it will still check for dependencies.



---

archive/issue_comments_293345.json:
```json
{
    "body": "<a id='comment:86'>**Comment 86:**</a>\nOkay, as long as it isn't recursive--that is, as long as it doesn't also check the dependencies for the dependencies--you're right that `--no-index` seems to ensure that.",
    "created_at": "2016-08-16T11:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293345",
    "user": "https://github.com/embray"
}
```

<a id='comment:86'>**Comment 86:**</a>
Okay, as long as it isn't recursive--that is, as long as it doesn't also check the dependencies for the dependencies--you're right that `--no-index` seems to ensure that.



---

archive/issue_comments_293346.json:
```json
{
    "body": "<a id='comment:87'>**Comment 87:**</a>\nHmm, removing `--no-deps` breaks a lot of Jupyter stuff since they have `setup.py` containing stuff like\n\n```\nsetuptools_args = {}\ninstall_requires = setuptools_args['install_requires'] = [\n    'ipython>=4.0.0',\n    'traitlets',\n    'jupyter_client',\n    'tornado>=4.0',\n]\n\nif 'setuptools' in sys.modules:\n    setup_args.update(setuptools_args)\n```\n\nThese dependencies are not seen when installing using `python setup.py install`.",
    "created_at": "2016-08-16T11:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293346",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:87'>**Comment 87:**</a>
Hmm, removing `--no-deps` breaks a lot of Jupyter stuff since they have `setup.py` containing stuff like

```
setuptools_args = {}
install_requires = setuptools_args['install_requires'] = [
    'ipython>=4.0.0',
    'traitlets',
    'jupyter_client',
    'tornado>=4.0',
]

if 'setuptools' in sys.modules:
    setup_args.update(setuptools_args)
```

These dependencies are not seen when installing using `python setup.py install`.



---

archive/issue_comments_293347.json:
```json
{
    "body": "<a id='comment:88'>**Comment 88:**</a>\nI will try to fix those dependencies.",
    "created_at": "2016-08-16T12:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293347",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:88'>**Comment 88:**</a>
I will try to fix those dependencies.



---

archive/issue_comments_293348.json:
```json
{
    "body": "<a id='comment:89'>**Comment 89:**</a>\nHmm, `traitlets` thinks that `ipython_genutils` is not installed but in reality it is installed (and it is properly listed as dependency in Sage):\n\n```\n[traitlets-4.2.2] Processing /usr/local/src/sage-git/local/var/tmp/sage/build/traitlets-4.2.2/src\n[traitlets-4.2.2]   Running setup.py (path:/tmp/pip-TnBahx-build/setup.py) egg_info for package from file:///usr/local/src/sage-git/local/var/tmp/sage/build/traitlets-4.2.2/src\n[traitlets-4.2.2]     Running command python setup.py egg_info\n[traitlets-4.2.2]     running egg_info\n[traitlets-4.2.2]     creating pip-egg-info/traitlets.egg-info\n[traitlets-4.2.2]     writing requirements to pip-egg-info/traitlets.egg-info/requires.txt\n[traitlets-4.2.2]     writing pip-egg-info/traitlets.egg-info/PKG-INFO\n[traitlets-4.2.2]     writing top-level names to pip-egg-info/traitlets.egg-info/top_level.txt\n[traitlets-4.2.2]     writing dependency_links to pip-egg-info/traitlets.egg-info/dependency_links.txt\n[traitlets-4.2.2]     writing manifest file 'pip-egg-info/traitlets.egg-info/SOURCES.txt'\n[traitlets-4.2.2]     warning: manifest_maker: standard file '-c' not found\n[traitlets-4.2.2] \n[traitlets-4.2.2]     reading manifest file 'pip-egg-info/traitlets.egg-info/SOURCES.txt'\n[traitlets-4.2.2]     writing manifest file 'pip-egg-info/traitlets.egg-info/SOURCES.txt'\n[traitlets-4.2.2]   Source in /tmp/pip-TnBahx-build has version 4.2.2, which satisfies requirement traitlets==4.2.2 from file:///usr/local/src/sage-git/local/var/tmp/sage/build/traitlets-4.2.2/src\n[traitlets-4.2.2] Collecting ipython_genutils (from traitlets==4.2.2)\n[traitlets-4.2.2]   0 location(s) to search for versions of ipython-genutils:\n[traitlets-4.2.2]   Could not find a version that satisfies the requirement ipython_genutils (from traitlets==4.2.2) (from versions: )\n[traitlets-4.2.2] Cleaning up...\n[traitlets-4.2.2]   Removing source in /tmp/pip-TnBahx-build\n[traitlets-4.2.2] No matching distribution found for ipython_genutils (from traitlets==4.2.2)\n[traitlets-4.2.2] Exception information:\n[traitlets-4.2.2] Traceback (most recent call last):\n[traitlets-4.2.2]   File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/basecommand.py\", line 215, in main\n[traitlets-4.2.2]     status = self.run(options, args)\n[traitlets-4.2.2]   File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/commands/install.py\", line 299, in run\n[traitlets-4.2.2]     requirement_set.prepare_files(finder)\n[traitlets-4.2.2]   File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/req/req_set.py\", line 370, in prepare_files\n[traitlets-4.2.2]     ignore_dependencies=self.ignore_dependencies))\n[traitlets-4.2.2]   File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/req/req_set.py\", line 522, in _prepare_file\n[traitlets-4.2.2]     finder, self.upgrade, require_hashes)\n[traitlets-4.2.2]   File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/req/req_install.py\", line 268, in populate_link\n[traitlets-4.2.2]     self.link = finder.find_requirement(self, upgrade)\n[traitlets-4.2.2]   File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/index.py\", line 491, in find_requirement\n[traitlets-4.2.2]     'No matching distribution found for %s' % req\n[traitlets-4.2.2] DistributionNotFound: No matching distribution found for ipython_genutils (from traitlets==4.2.2)\n```",
    "created_at": "2016-08-16T12:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293348",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:89'>**Comment 89:**</a>
Hmm, `traitlets` thinks that `ipython_genutils` is not installed but in reality it is installed (and it is properly listed as dependency in Sage):

```
[traitlets-4.2.2] Processing /usr/local/src/sage-git/local/var/tmp/sage/build/traitlets-4.2.2/src
[traitlets-4.2.2]   Running setup.py (path:/tmp/pip-TnBahx-build/setup.py) egg_info for package from file:///usr/local/src/sage-git/local/var/tmp/sage/build/traitlets-4.2.2/src
[traitlets-4.2.2]     Running command python setup.py egg_info
[traitlets-4.2.2]     running egg_info
[traitlets-4.2.2]     creating pip-egg-info/traitlets.egg-info
[traitlets-4.2.2]     writing requirements to pip-egg-info/traitlets.egg-info/requires.txt
[traitlets-4.2.2]     writing pip-egg-info/traitlets.egg-info/PKG-INFO
[traitlets-4.2.2]     writing top-level names to pip-egg-info/traitlets.egg-info/top_level.txt
[traitlets-4.2.2]     writing dependency_links to pip-egg-info/traitlets.egg-info/dependency_links.txt
[traitlets-4.2.2]     writing manifest file 'pip-egg-info/traitlets.egg-info/SOURCES.txt'
[traitlets-4.2.2]     warning: manifest_maker: standard file '-c' not found
[traitlets-4.2.2] 
[traitlets-4.2.2]     reading manifest file 'pip-egg-info/traitlets.egg-info/SOURCES.txt'
[traitlets-4.2.2]     writing manifest file 'pip-egg-info/traitlets.egg-info/SOURCES.txt'
[traitlets-4.2.2]   Source in /tmp/pip-TnBahx-build has version 4.2.2, which satisfies requirement traitlets==4.2.2 from file:///usr/local/src/sage-git/local/var/tmp/sage/build/traitlets-4.2.2/src
[traitlets-4.2.2] Collecting ipython_genutils (from traitlets==4.2.2)
[traitlets-4.2.2]   0 location(s) to search for versions of ipython-genutils:
[traitlets-4.2.2]   Could not find a version that satisfies the requirement ipython_genutils (from traitlets==4.2.2) (from versions: )
[traitlets-4.2.2] Cleaning up...
[traitlets-4.2.2]   Removing source in /tmp/pip-TnBahx-build
[traitlets-4.2.2] No matching distribution found for ipython_genutils (from traitlets==4.2.2)
[traitlets-4.2.2] Exception information:
[traitlets-4.2.2] Traceback (most recent call last):
[traitlets-4.2.2]   File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/basecommand.py", line 215, in main
[traitlets-4.2.2]     status = self.run(options, args)
[traitlets-4.2.2]   File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/commands/install.py", line 299, in run
[traitlets-4.2.2]     requirement_set.prepare_files(finder)
[traitlets-4.2.2]   File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/req/req_set.py", line 370, in prepare_files
[traitlets-4.2.2]     ignore_dependencies=self.ignore_dependencies))
[traitlets-4.2.2]   File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/req/req_set.py", line 522, in _prepare_file
[traitlets-4.2.2]     finder, self.upgrade, require_hashes)
[traitlets-4.2.2]   File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/req/req_install.py", line 268, in populate_link
[traitlets-4.2.2]     self.link = finder.find_requirement(self, upgrade)
[traitlets-4.2.2]   File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/index.py", line 491, in find_requirement
[traitlets-4.2.2]     'No matching distribution found for %s' % req
[traitlets-4.2.2] DistributionNotFound: No matching distribution found for ipython_genutils (from traitlets==4.2.2)
```



---

archive/issue_comments_293349.json:
```json
{
    "body": "<a id='comment:90'>**Comment 90:**</a>\nHmm, could it be that the `--ignore-installed` option also ignores installed dependencies?",
    "created_at": "2016-08-16T12:12:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293349",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:90'>**Comment 90:**</a>
Hmm, could it be that the `--ignore-installed` option also ignores installed dependencies?



---

archive/issue_comments_293350.json:
```json
{
    "body": "<a id='comment:91'>**Comment 91:**</a>\nI'll look into it.",
    "created_at": "2016-08-16T12:16:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293350",
    "user": "https://github.com/embray"
}
```

<a id='comment:91'>**Comment 91:**</a>
I'll look into it.



---

archive/issue_comments_293351.json:
```json
{
    "body": "<a id='comment:92'>**Comment 92:**</a>\nI tried `--upgrade --force-reinstall` instead of `--ignore-installed` but that gives the same problem:\n\n```\n$ pip install --verbose --no-index --upgrade --force-reinstall .\nIgnoring indexes: https://pypi.python.org/simple\nProcessing /usr/local/src/sage-git/tmp/traitlets-4.2.2\n  Running setup.py (path:/tmp/pip-Eh8Et4-build/setup.py) egg_info for package from file:///usr/local/src/sage-git/tmp/traitlets-4.2.2\n    Running command python setup.py egg_info\n    running egg_info\n    creating pip-egg-info/traitlets.egg-info\n    writing requirements to pip-egg-info/traitlets.egg-info/requires.txt\n    writing pip-egg-info/traitlets.egg-info/PKG-INFO\n    writing top-level names to pip-egg-info/traitlets.egg-info/top_level.txt\n    writing dependency_links to pip-egg-info/traitlets.egg-info/dependency_links.txt\n    writing manifest file 'pip-egg-info/traitlets.egg-info/SOURCES.txt'\n    warning: manifest_maker: standard file '-c' not found\n\n    reading manifest file 'pip-egg-info/traitlets.egg-info/SOURCES.txt'\n    writing manifest file 'pip-egg-info/traitlets.egg-info/SOURCES.txt'\n  Source in /tmp/pip-Eh8Et4-build has version 4.2.2, which satisfies requirement traitlets==4.2.2 from file:///usr/local/src/sage-git/tmp/traitlets-4.2.2\nCollecting ipython_genutils (from traitlets==4.2.2)\n  0 location(s) to search for versions of ipython-genutils:\n  Could not find a version that satisfies the requirement ipython_genutils (from traitlets==4.2.2) (from versions: )\nCleaning up...\n  Removing source in /tmp/pip-Eh8Et4-build\nNo matching distribution found for ipython_genutils (from traitlets==4.2.2)\nException information:\nTraceback (most recent call last):\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/basecommand.py\", line 215, in main\n    status = self.run(options, args)\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/commands/install.py\", line 299, in run\n    requirement_set.prepare_files(finder)\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/req/req_set.py\", line 370, in prepare_files\n    ignore_dependencies=self.ignore_dependencies))\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/req/req_set.py\", line 522, in _prepare_file\n    finder, self.upgrade, require_hashes)\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/req/req_install.py\", line 268, in populate_link\n    self.link = finder.find_requirement(self, upgrade)\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/index.py\", line 491, in find_requirement\n    'No matching distribution found for %s' % req\nDistributionNotFound: No matching distribution found for ipython_genutils (from traitlets==4.2.2)\n```",
    "created_at": "2016-08-16T12:28:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293351",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:92'>**Comment 92:**</a>
I tried `--upgrade --force-reinstall` instead of `--ignore-installed` but that gives the same problem:

```
$ pip install --verbose --no-index --upgrade --force-reinstall .
Ignoring indexes: https://pypi.python.org/simple
Processing /usr/local/src/sage-git/tmp/traitlets-4.2.2
  Running setup.py (path:/tmp/pip-Eh8Et4-build/setup.py) egg_info for package from file:///usr/local/src/sage-git/tmp/traitlets-4.2.2
    Running command python setup.py egg_info
    running egg_info
    creating pip-egg-info/traitlets.egg-info
    writing requirements to pip-egg-info/traitlets.egg-info/requires.txt
    writing pip-egg-info/traitlets.egg-info/PKG-INFO
    writing top-level names to pip-egg-info/traitlets.egg-info/top_level.txt
    writing dependency_links to pip-egg-info/traitlets.egg-info/dependency_links.txt
    writing manifest file 'pip-egg-info/traitlets.egg-info/SOURCES.txt'
    warning: manifest_maker: standard file '-c' not found

    reading manifest file 'pip-egg-info/traitlets.egg-info/SOURCES.txt'
    writing manifest file 'pip-egg-info/traitlets.egg-info/SOURCES.txt'
  Source in /tmp/pip-Eh8Et4-build has version 4.2.2, which satisfies requirement traitlets==4.2.2 from file:///usr/local/src/sage-git/tmp/traitlets-4.2.2
Collecting ipython_genutils (from traitlets==4.2.2)
  0 location(s) to search for versions of ipython-genutils:
  Could not find a version that satisfies the requirement ipython_genutils (from traitlets==4.2.2) (from versions: )
Cleaning up...
  Removing source in /tmp/pip-Eh8Et4-build
No matching distribution found for ipython_genutils (from traitlets==4.2.2)
Exception information:
Traceback (most recent call last):
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/basecommand.py", line 215, in main
    status = self.run(options, args)
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/commands/install.py", line 299, in run
    requirement_set.prepare_files(finder)
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/req/req_set.py", line 370, in prepare_files
    ignore_dependencies=self.ignore_dependencies))
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/req/req_set.py", line 522, in _prepare_file
    finder, self.upgrade, require_hashes)
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/req/req_install.py", line 268, in populate_link
    self.link = finder.find_requirement(self, upgrade)
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/index.py", line 491, in find_requirement
    'No matching distribution found for %s' % req
DistributionNotFound: No matching distribution found for ipython_genutils (from traitlets==4.2.2)
```



---

archive/issue_comments_293352.json:
```json
{
    "body": "<a id='comment:93'>**Comment 93:**</a>\nYes, you're right.  It seems that `--ignore-installed` also ignores installed dependencies.  The fact that I also had `--no-deps` hid that.  That's disconcerting.  It looks like you can't do dependency checking the way you wanted after all, though I'll admit that's unfortunate.  You'd think it should work.  I might treat that as a defect in pip.\n\nBut I don't think it's a showstopper.  I still think it should be the responsibility of the sage packager to work this out and not blindly add new packages without making sure all its dependencies are correct too.",
    "created_at": "2016-08-16T12:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293352",
    "user": "https://github.com/embray"
}
```

<a id='comment:93'>**Comment 93:**</a>
Yes, you're right.  It seems that `--ignore-installed` also ignores installed dependencies.  The fact that I also had `--no-deps` hid that.  That's disconcerting.  It looks like you can't do dependency checking the way you wanted after all, though I'll admit that's unfortunate.  You'd think it should work.  I might treat that as a defect in pip.

But I don't think it's a showstopper.  I still think it should be the responsibility of the sage packager to work this out and not blindly add new packages without making sure all its dependencies are correct too.



---

archive/issue_comments_293353.json:
```json
{
    "body": "<a id='comment:94'>**Comment 94:**</a>\nReplying to [@embray](#comment%3A93):\n> I still think it should be the responsibility of the sage packager to work this out and not blindly add new packages without making sure all its dependencies are correct too.\n\nI would love this to become official Sage policy. The main culprit is mass-update tickets like #20625.",
    "created_at": "2016-08-16T12:37:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293353",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:94'>**Comment 94:**</a>
Replying to [@embray](#comment%3A93):
> I still think it should be the responsibility of the sage packager to work this out and not blindly add new packages without making sure all its dependencies are correct too.

I would love this to become official Sage policy. The main culprit is mass-update tickets like #20625.



---

archive/issue_comments_293354.json:
```json
{
    "body": "<a id='comment:95'>**Comment 95:**</a>\nA relevant ticket in pip: https://github.com/pypa/pip/issues/3261\n\nIt's mentioned there that there's also a new `pip check` command that will do a sanity-check on the system, so running that could also be policy (without necessarily requiring the check on every package install).",
    "created_at": "2016-08-16T12:41:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293354",
    "user": "https://github.com/embray"
}
```

<a id='comment:95'>**Comment 95:**</a>
A relevant ticket in pip: https://github.com/pypa/pip/issues/3261

It's mentioned there that there's also a new `pip check` command that will do a sanity-check on the system, so running that could also be policy (without necessarily requiring the check on every package install).



---

archive/issue_comments_293355.json:
```json
{
    "body": "<a id='comment:96'>**Comment 96:**</a>\nIt seems that `pip` is missing an option to force-reinstall a single package without recursion.",
    "created_at": "2016-08-16T12:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293355",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:96'>**Comment 96:**</a>
It seems that `pip` is missing an option to force-reinstall a single package without recursion.



---

archive/issue_comments_293356.json:
```json
{
    "body": "**Changing commit** from \"[c728bd8af325487e8d8578aa7dafe650c1b07492](https://github.com/sagemath/sagetrac-mirror/commit/c728bd8af325487e8d8578aa7dafe650c1b07492)\" to \"[fd131c1a550242299e367080fa1a77a5823daaed](https://github.com/sagemath/sagetrac-mirror/commit/fd131c1a550242299e367080fa1a77a5823daaed)\".",
    "created_at": "2016-08-16T12:45:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293356",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[c728bd8af325487e8d8578aa7dafe650c1b07492](https://github.com/sagemath/sagetrac-mirror/commit/c728bd8af325487e8d8578aa7dafe650c1b07492)" to "[fd131c1a550242299e367080fa1a77a5823daaed](https://github.com/sagemath/sagetrac-mirror/commit/fd131c1a550242299e367080fa1a77a5823daaed)".



---

archive/issue_comments_293357.json:
```json
{
    "body": "<a id='comment:97'>**Comment 97:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd131c1a550242299e367080fa1a77a5823daaed\">fd131c1</a></td><td><code>Add --verbose flag to pip</code></td></tr></table>\n",
    "created_at": "2016-08-16T12:45:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293357",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:97'>**Comment 97:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd131c1a550242299e367080fa1a77a5823daaed">fd131c1</a></td><td><code>Add --verbose flag to pip</code></td></tr></table>




---

archive/issue_comments_293358.json:
```json
{
    "body": "<a id='comment:98'>**Comment 98:**</a>\nOK, undid the removal of `--no-deps`.\n\nI would be fine with merging this now, but still thinking about future improvements.",
    "created_at": "2016-08-16T12:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293358",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:98'>**Comment 98:**</a>
OK, undid the removal of `--no-deps`.

I would be fine with merging this now, but still thinking about future improvements.



---

archive/issue_comments_293359.json:
```json
{
    "body": "<a id='comment:99'>**Comment 99:**</a>\nReplying to [@jdemeyer](#comment%3A96):\n> It seems that `pip` is missing an option to force-reinstall a single package without recursion.\n\n`pip install --upgrade --force --no-deps` does it.  I've used that in the past.",
    "created_at": "2016-08-16T12:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293359",
    "user": "https://github.com/embray"
}
```

<a id='comment:99'>**Comment 99:**</a>
Replying to [@jdemeyer](#comment%3A96):
> It seems that `pip` is missing an option to force-reinstall a single package without recursion.

`pip install --upgrade --force --no-deps` does it.  I've used that in the past.



---

archive/issue_comments_293360.json:
```json
{
    "body": "<a id='comment:100'>**Comment 100:**</a>\nReplying to [@embray](#comment%3A99):\n> Replying to [@jdemeyer](#comment%3A96):\n> > It seems that `pip` is missing an option to force-reinstall a single package without recursion.\n\n> \n> `pip install --upgrade --force --no-deps` does it.\n\n`--upgrade` does recursion:\n\n```\n  -U, --upgrade               Upgrade all specified packages to the newest available version. This process is recursive regardless of whether a dependency is already\n                              satisfied.\n```\n\nEdit: I see you added `--no-deps` but I don't want that since I do want dependency checking.",
    "created_at": "2016-08-16T12:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293360",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:100'>**Comment 100:**</a>
Replying to [@embray](#comment%3A99):
> Replying to [@jdemeyer](#comment%3A96):
> > It seems that `pip` is missing an option to force-reinstall a single package without recursion.

> 
> `pip install --upgrade --force --no-deps` does it.

`--upgrade` does recursion:

```
  -U, --upgrade               Upgrade all specified packages to the newest available version. This process is recursive regardless of whether a dependency is already
                              satisfied.
```

Edit: I see you added `--no-deps` but I don't want that since I do want dependency checking.



---

archive/issue_comments_293361.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nWell, yes, but now we know that dependency checking in the sense that you want doesn't work anyways.",
    "created_at": "2016-08-16T13:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293361",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'>**Comment 1:**</a>
Well, yes, but now we know that dependency checking in the sense that you want doesn't work anyways.



---

archive/issue_comments_293362.json:
```json
{
    "body": "<a id='comment:102'>**Comment 102:**</a>\nReplying to [@embray](#comment%3A101):\n> Well, yes, but now we know that dependency checking in the sense that you want doesn't work anyways.\n\nIt works by itself, but not in combination with the other options.",
    "created_at": "2016-08-16T13:19:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293362",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:102'>**Comment 102:**</a>
Replying to [@embray](#comment%3A101):
> Well, yes, but now we know that dependency checking in the sense that you want doesn't work anyways.

It works by itself, but not in combination with the other options.



---

archive/issue_comments_293363.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nSomething like\n\n```\npip uninstall PACKAGE\npip install --no-index .\n```\nwould work and correctly check dependencies. There is just not a single command which does that.",
    "created_at": "2016-08-16T13:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293363",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'>**Comment 3:**</a>
Something like

```
pip uninstall PACKAGE
pip install --no-index .
```
would work and correctly check dependencies. There is just not a single command which does that.



---

archive/issue_comments_293364.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nFor reasons that I do not understand, this breaks running Jupyter from the command line:\n\n```\n$ jupyter notebook\nTraceback (most recent call last):\n  File \"/usr/local/src/sage-git/local/bin/jupyter-notebook\", line 5, in <module>\n    from pkg_resources import load_entry_point\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2927, in <module>\n    @_call_aside\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2913, in _call_aside\n    f(*args, **kwargs)\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2940, in _initialize_master_working_set\n    working_set = WorkingSet._build_master()\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 635, in _build_master\n    ws.require(__requires__)\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 943, in require\n    needed = self.resolve(parse_requirements(requirements))\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 829, in resolve\n    raise DistributionNotFound(req, requirers)\npkg_resources.DistributionNotFound: The 'terminado>=0.3.3' distribution was not found and is required by notebook\n```",
    "created_at": "2016-08-16T13:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293364",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'>**Comment 4:**</a>
For reasons that I do not understand, this breaks running Jupyter from the command line:

```
$ jupyter notebook
Traceback (most recent call last):
  File "/usr/local/src/sage-git/local/bin/jupyter-notebook", line 5, in <module>
    from pkg_resources import load_entry_point
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2927, in <module>
    @_call_aside
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2913, in _call_aside
    f(*args, **kwargs)
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2940, in _initialize_master_working_set
    working_set = WorkingSet._build_master()
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 635, in _build_master
    ws.require(__requires__)
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 943, in require
    needed = self.resolve(parse_requirements(requirements))
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 829, in resolve
    raise DistributionNotFound(req, requirers)
pkg_resources.DistributionNotFound: The 'terminado>=0.3.3' distribution was not found and is required by notebook
```



---

archive/issue_comments_293365.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nThe obvious solution is to add a `terminado` package to Sage and have `notebook` depend on it.",
    "created_at": "2016-08-16T13:47:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293365",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'>**Comment 5:**</a>
The obvious solution is to add a `terminado` package to Sage and have `notebook` depend on it.



---

archive/issue_comments_293366.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nAlternative and simpler solution: keep using `distutils` instead of `pip` to install `notebook`.",
    "created_at": "2016-08-16T13:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293366",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'>**Comment 6:**</a>
Alternative and simpler solution: keep using `distutils` instead of `pip` to install `notebook`.



---

archive/issue_comments_293367.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b13184db417dbef7b75d28fdd821e93ae46584a\">9b13184</a></td><td><code>Install the Jupyter notebook using distutils to avoid dependency on terminado</code></td></tr></table>\n",
    "created_at": "2016-08-16T13:54:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293367",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>**Comment 7:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b13184db417dbef7b75d28fdd821e93ae46584a">9b13184</a></td><td><code>Install the Jupyter notebook using distutils to avoid dependency on terminado</code></td></tr></table>




---

archive/issue_comments_293368.json:
```json
{
    "body": "**Changing commit** from \"[fd131c1a550242299e367080fa1a77a5823daaed](https://github.com/sagemath/sagetrac-mirror/commit/fd131c1a550242299e367080fa1a77a5823daaed)\" to \"[9b13184db417dbef7b75d28fdd821e93ae46584a](https://github.com/sagemath/sagetrac-mirror/commit/9b13184db417dbef7b75d28fdd821e93ae46584a)\".",
    "created_at": "2016-08-16T13:54:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293368",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[fd131c1a550242299e367080fa1a77a5823daaed](https://github.com/sagemath/sagetrac-mirror/commit/fd131c1a550242299e367080fa1a77a5823daaed)" to "[9b13184db417dbef7b75d28fdd821e93ae46584a](https://github.com/sagemath/sagetrac-mirror/commit/9b13184db417dbef7b75d28fdd821e93ae46584a)".



---

archive/issue_comments_293369.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nThis is exactly the kind of problem which can happen because of `--no-deps`: `notebook` has an unsatisfied dependency (`terminado`). This breaks stuff but might pass automated tested since actually running `jupyter` is not tested.",
    "created_at": "2016-08-16T14:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293369",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'>**Comment 8:**</a>
This is exactly the kind of problem which can happen because of `--no-deps`: `notebook` has an unsatisfied dependency (`terminado`). This breaks stuff but might pass automated tested since actually running `jupyter` is not tested.



---

archive/issue_comments_293370.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nI'm not sure I'm following you.  Obviously jupyter notebook has a dependency that isn't satisfied because Sage doesn't include it.  Just forcing it to install without that dependency and leaving it broken is *not* a solution.",
    "created_at": "2016-08-16T14:10:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293370",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'>**Comment 9:**</a>
I'm not sure I'm following you.  Obviously jupyter notebook has a dependency that isn't satisfied because Sage doesn't include it.  Just forcing it to install without that dependency and leaving it broken is *not* a solution.



---

archive/issue_comments_293371.json:
```json
{
    "body": "<a id='comment:110'>**Comment 110:**</a>\nReplying to [@embray](#comment%3A109):\n> Obviously jupyter notebook has a dependency that isn't satisfied because Sage doesn't include it.  Just forcing it to install without that dependency and leaving it broken is *not* a solution.\n\nI would argue that the bug is in Jupyter's requirements list: it lists a dependency which in practice is not a dependency at all, but more like an optional add-on.\n\nI just want to get on with this and this is a simple solution which is known to work.",
    "created_at": "2016-08-16T14:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293371",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:110'>**Comment 110:**</a>
Replying to [@embray](#comment%3A109):
> Obviously jupyter notebook has a dependency that isn't satisfied because Sage doesn't include it.  Just forcing it to install without that dependency and leaving it broken is *not* a solution.

I would argue that the bug is in Jupyter's requirements list: it lists a dependency which in practice is not a dependency at all, but more like an optional add-on.

I just want to get on with this and this is a simple solution which is known to work.



---

archive/issue_comments_293372.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/feed1dceedc23e9662800483ee010f585a90c1ee\">feed1dc</a></td><td><code>Add a few missing dependencies</code></td></tr></table>\n",
    "created_at": "2016-08-16T14:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293372",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:1'>**Comment 1:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/feed1dceedc23e9662800483ee010f585a90c1ee">feed1dc</a></td><td><code>Add a few missing dependencies</code></td></tr></table>




---

archive/issue_comments_293373.json:
```json
{
    "body": "**Changing commit** from \"[9b13184db417dbef7b75d28fdd821e93ae46584a](https://github.com/sagemath/sagetrac-mirror/commit/9b13184db417dbef7b75d28fdd821e93ae46584a)\" to \"[feed1dceedc23e9662800483ee010f585a90c1ee](https://github.com/sagemath/sagetrac-mirror/commit/feed1dceedc23e9662800483ee010f585a90c1ee)\".",
    "created_at": "2016-08-16T14:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293373",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[9b13184db417dbef7b75d28fdd821e93ae46584a](https://github.com/sagemath/sagetrac-mirror/commit/9b13184db417dbef7b75d28fdd821e93ae46584a)" to "[feed1dceedc23e9662800483ee010f585a90c1ee](https://github.com/sagemath/sagetrac-mirror/commit/feed1dceedc23e9662800483ee010f585a90c1ee)".



---

archive/issue_comments_293374.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nThis last commit adds a few missing dependencies, exposed by #21256.",
    "created_at": "2016-08-16T14:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293374",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'>**Comment 2:**</a>
This last commit adds a few missing dependencies, exposed by #21256.



---

archive/issue_comments_293375.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nTo be fair, terminado supplies the terminal interface in the Notebook, so even if as you're claiming it's optional, it is certainly nice to have.  In any case you can say it's a bug or not but if they're including it in their requirements list then I say it's a requirement unless specified otherwise.  This is definitely no solution.",
    "created_at": "2016-08-16T14:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293375",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'>**Comment 3:**</a>
To be fair, terminado supplies the terminal interface in the Notebook, so even if as you're claiming it's optional, it is certainly nice to have.  In any case you can say it's a bug or not but if they're including it in their requirements list then I say it's a requirement unless specified otherwise.  This is definitely no solution.



---

archive/issue_comments_293376.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nSo what we should then? I see two options:\n\n1. Patch `notebook/setup.py` to remove `terminado` from the dependencies.\n\n2. Add a `terminado` package to Sage as dependency of this ticket.",
    "created_at": "2016-08-16T14:47:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293376",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'>**Comment 4:**</a>
So what we should then? I see two options:

1. Patch `notebook/setup.py` to remove `terminado` from the dependencies.

2. Add a `terminado` package to Sage as dependency of this ticket.



---

archive/issue_comments_293377.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nI suggest option 2.  As it is, for the Docker image for Sage I'm also installing terminado separately.  I don't see why it shouldn't be included.\n\nIf it helps, looking at the setup.py for notebook, it seems terminado *is* being considered a requirement on any non-Windows platform.  Probably because even though they've been careful to make it so that the notebook can work without it, not having it means missing functionality==a defect.  I don't think we should say that \"Sage includes the Jupyter notebook\" and then ship a defective product.\n\nThe reason you get this\n\n```\npkg_resources.DistributionNotFound: The 'terminado>=0.3.3' distribution was not found and is required by notebook\n```\n\nis that installing with setuptools also installs the autogenerated console script wrappers which do dependency checking when you run them, so it's right to say that it won't run without some dependency installed.",
    "created_at": "2016-08-16T15:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293377",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'>**Comment 5:**</a>
I suggest option 2.  As it is, for the Docker image for Sage I'm also installing terminado separately.  I don't see why it shouldn't be included.

If it helps, looking at the setup.py for notebook, it seems terminado *is* being considered a requirement on any non-Windows platform.  Probably because even though they've been careful to make it so that the notebook can work without it, not having it means missing functionality==a defect.  I don't think we should say that "Sage includes the Jupyter notebook" and then ship a defective product.

The reason you get this

```
pkg_resources.DistributionNotFound: The 'terminado>=0.3.3' distribution was not found and is required by notebook
```

is that installing with setuptools also installs the autogenerated console script wrappers which do dependency checking when you run them, so it's right to say that it won't run without some dependency installed.



---

archive/issue_comments_293378.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c47f0bd4d4342a0f22a9e61cf0721430b240276\">6c47f0b</a></td><td><code>Add a few missing dependencies</code></td></tr></table>\n",
    "created_at": "2016-08-17T08:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293378",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>**Comment 6:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c47f0bd4d4342a0f22a9e61cf0721430b240276">6c47f0b</a></td><td><code>Add a few missing dependencies</code></td></tr></table>




---

archive/issue_comments_293379.json:
```json
{
    "body": "**Changing commit** from \"[feed1dceedc23e9662800483ee010f585a90c1ee](https://github.com/sagemath/sagetrac-mirror/commit/feed1dceedc23e9662800483ee010f585a90c1ee)\" to \"[6c47f0bd4d4342a0f22a9e61cf0721430b240276](https://github.com/sagemath/sagetrac-mirror/commit/6c47f0bd4d4342a0f22a9e61cf0721430b240276)\".",
    "created_at": "2016-08-17T08:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293379",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[feed1dceedc23e9662800483ee010f585a90c1ee](https://github.com/sagemath/sagetrac-mirror/commit/feed1dceedc23e9662800483ee010f585a90c1ee)" to "[6c47f0bd4d4342a0f22a9e61cf0721430b240276](https://github.com/sagemath/sagetrac-mirror/commit/6c47f0bd4d4342a0f22a9e61cf0721430b240276)".



---

archive/issue_comments_293380.json:
```json
{
    "body": "**Changing commit** from \"[6c47f0bd4d4342a0f22a9e61cf0721430b240276](https://github.com/sagemath/sagetrac-mirror/commit/6c47f0bd4d4342a0f22a9e61cf0721430b240276)\" to \"[829a5b445e8f6b1e7eab56ae8e428f5995e4cebd](https://github.com/sagemath/sagetrac-mirror/commit/829a5b445e8f6b1e7eab56ae8e428f5995e4cebd)\".",
    "created_at": "2016-08-17T08:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293380",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[6c47f0bd4d4342a0f22a9e61cf0721430b240276](https://github.com/sagemath/sagetrac-mirror/commit/6c47f0bd4d4342a0f22a9e61cf0721430b240276)" to "[829a5b445e8f6b1e7eab56ae8e428f5995e4cebd](https://github.com/sagemath/sagetrac-mirror/commit/829a5b445e8f6b1e7eab56ae8e428f5995e4cebd)".



---

archive/issue_comments_293381.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/afc90d4e8b968e626ea54789f1e05b154b053759\">afc90d4</a></td><td><code>Add terminado as standard package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/115e77b54de0c11dd4972855f3a5fa94abfb6d4b\">115e77b</a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/add_a_terminado_package' into t/20218/pip-install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/829a5b445e8f6b1e7eab56ae8e428f5995e4cebd\">829a5b4</a></td><td><code>Add a few missing dependencies</code></td></tr></table>\n",
    "created_at": "2016-08-17T08:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293381",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>**Comment 7:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/afc90d4e8b968e626ea54789f1e05b154b053759">afc90d4</a></td><td><code>Add terminado as standard package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/115e77b54de0c11dd4972855f3a5fa94abfb6d4b">115e77b</a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/add_a_terminado_package' into t/20218/pip-install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/829a5b445e8f6b1e7eab56ae8e428f5995e4cebd">829a5b4</a></td><td><code>Add a few missing dependencies</code></td></tr></table>




---

archive/issue_comments_293382.json:
```json
{
    "body": "**Dependencies:** #21260",
    "created_at": "2016-08-17T08:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293382",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #21260



---

archive/issue_comments_293383.json:
```json
{
    "body": "**Changing dependencies** from \"#21260\" to \"#21260, #21261\".",
    "created_at": "2016-08-17T08:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293383",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#21260" to "#21260, #21261".



---

archive/issue_comments_293384.json:
```json
{
    "body": "**Changing commit** from \"[829a5b445e8f6b1e7eab56ae8e428f5995e4cebd](https://github.com/sagemath/sagetrac-mirror/commit/829a5b445e8f6b1e7eab56ae8e428f5995e4cebd)\" to \"[1e0a377879cd1e9eea3b6651d57ac1fd9564cf95](https://github.com/sagemath/sagetrac-mirror/commit/1e0a377879cd1e9eea3b6651d57ac1fd9564cf95)\".",
    "created_at": "2016-08-17T09:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293384",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[829a5b445e8f6b1e7eab56ae8e428f5995e4cebd](https://github.com/sagemath/sagetrac-mirror/commit/829a5b445e8f6b1e7eab56ae8e428f5995e4cebd)" to "[1e0a377879cd1e9eea3b6651d57ac1fd9564cf95](https://github.com/sagemath/sagetrac-mirror/commit/1e0a377879cd1e9eea3b6651d57ac1fd9564cf95)".



---

archive/issue_comments_293385.json:
```json
{
    "body": "<a id='comment:0'>**Comment 0:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdb403eb74130532900c41e73c54e5de8fb441d0\">fdb403e</a></td><td><code>Add entrypoints and configparser packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4fc97cd760ef5260bab0a80fb1dff9ca1cbfe3a\">c4fc97c</a></td><td><code>Merge remote-tracking branches 'trac/u/jdemeyer/add_a_terminado_package' and 'trac/u/jdemeyer/add_a_entrypoints_package' into t/20218/pip-install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e0a377879cd1e9eea3b6651d57ac1fd9564cf95\">1e0a377</a></td><td><code>Fix installation of Jupyter packages</code></td></tr></table>\n",
    "created_at": "2016-08-17T09:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293385",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:0'>**Comment 0:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdb403eb74130532900c41e73c54e5de8fb441d0">fdb403e</a></td><td><code>Add entrypoints and configparser packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4fc97cd760ef5260bab0a80fb1dff9ca1cbfe3a">c4fc97c</a></td><td><code>Merge remote-tracking branches 'trac/u/jdemeyer/add_a_terminado_package' and 'trac/u/jdemeyer/add_a_entrypoints_package' into t/20218/pip-install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e0a377879cd1e9eea3b6651d57ac1fd9564cf95">1e0a377</a></td><td><code>Fix installation of Jupyter packages</code></td></tr></table>




---

archive/issue_comments_293386.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727\">7054c41</a></td><td><code>Fix installation of Jupyter packages</code></td></tr></table>\n",
    "created_at": "2016-08-17T09:42:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293386",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:1'>**Comment 1:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727">7054c41</a></td><td><code>Fix installation of Jupyter packages</code></td></tr></table>




---

archive/issue_comments_293387.json:
```json
{
    "body": "**Changing commit** from \"[1e0a377879cd1e9eea3b6651d57ac1fd9564cf95](https://github.com/sagemath/sagetrac-mirror/commit/1e0a377879cd1e9eea3b6651d57ac1fd9564cf95)\" to \"[7054c41c14c7a619fee1ccaa79da1273e5713727](https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727)\".",
    "created_at": "2016-08-17T09:42:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293387",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[1e0a377879cd1e9eea3b6651d57ac1fd9564cf95](https://github.com/sagemath/sagetrac-mirror/commit/1e0a377879cd1e9eea3b6651d57ac1fd9564cf95)" to "[7054c41c14c7a619fee1ccaa79da1273e5713727](https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727)".



---

archive/issue_events_246572.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-17T09:47:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246572"
}
```



---

archive/issue_events_246573.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-17T09:47:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246573"
}
```



---

archive/issue_comments_293388.json:
```json
{
    "body": "**Changing author** from \"Erik Bray\" to \"Erik Bray, Jeroen Demeyer\".",
    "created_at": "2016-08-17T09:47:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293388",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Erik Bray" to "Erik Bray, Jeroen Demeyer".



---

archive/issue_events_246574.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-17T20:24:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246574"
}
```



---

archive/issue_events_246575.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-17T20:24:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246575"
}
```



---

archive/issue_comments_293389.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nThis is minor, but a few packages (configparser, terminado, entrypoints) still have an explicit `pip install` in their `spgk-install` instead of the `$PIP_INSTALL`.  The effect is the same, but if it's not fixed now but the idea was to have a standard way of invoking pip for all packages, and it could have surprising effects if some packages aren't getting the same arguments for pip.",
    "created_at": "2016-08-19T10:44:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293389",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'>**Comment 4:**</a>
This is minor, but a few packages (configparser, terminado, entrypoints) still have an explicit `pip install` in their `spgk-install` instead of the `$PIP_INSTALL`.  The effect is the same, but if it's not fixed now but the idea was to have a standard way of invoking pip for all packages, and it could have surprising effects if some packages aren't getting the same arguments for pip.



---

archive/issue_events_246576.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-19T10:44:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246576"
}
```



---

archive/issue_events_246577.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-19T10:44:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246577"
}
```



---

archive/issue_events_246578.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-19T11:05:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246578"
}
```



---

archive/issue_events_246579.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-19T11:05:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246579"
}
```



---

archive/issue_comments_293390.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nThat can be fixed in a follow-up ticket. There is no reason to hold up this ticket for that.",
    "created_at": "2016-08-19T11:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293390",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'>**Comment 5:**</a>
That can be fixed in a follow-up ticket. There is no reason to hold up this ticket for that.



---

archive/issue_events_246580.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-19T22:45:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246580"
}
```



---

archive/issue_events_246581.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-19T22:45:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246581"
}
```



---

archive/issue_comments_293391.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/pip-install](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/pip-install)\" to \"[7054c41c14c7a619fee1ccaa79da1273e5713727](https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727)\".",
    "created_at": "2016-08-19T22:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293391",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/pip-install](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/pip-install)" to "[7054c41c14c7a619fee1ccaa79da1273e5713727](https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727)".



---

archive/issue_comments_293392.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nBreaks OSX when compiling from scratch in numpy\n\n```\n[numpy-1.11.1] gcc version 4.9.3 (GCC) \n[numpy-1.11.1] ****************************************************\n[numpy-1.11.1] patching file numpy/core/function_base.py\n[numpy-1.11.1] patching file numpy/distutils/system_info.py\n[numpy-1.11.1] Hunk #1 succeeded at 1685 (offset -5 lines).\n[numpy-1.11.1] Hunk #2 succeeded at 1718 (offset -4 lines).\n[numpy-1.11.1] \n[numpy-1.11.1] Usage:   \n[numpy-1.11.1]   pip install [options] <requirement specifier> [package-index-options] ...\n[numpy-1.11.1]   pip install [options] -r <requirements file> [package-index-options] ...\n[numpy-1.11.1]   pip install [options] [-e] <vcs project url> ...\n[numpy-1.11.1]   pip install [options] [-e] <local project path> ...\n[numpy-1.11.1]   pip install [options] <archive url/path> ...\n[numpy-1.11.1] \n[numpy-1.11.1] no such option: ---global-option\n[numpy-1.11.1] \n[numpy-1.11.1] real\t0m0.519s\n[numpy-1.11.1] user\t0m0.269s\n[numpy-1.11.1] sys\t0m0.142s\n[numpy-1.11.1] ************************************************************************\n[numpy-1.11.1] Error installing package numpy-1.11.1\n```\nNote on OSX:\n\n```\nosx:build buildslave-sage$ NUMPY_FCONFIG=\"config_fc --noopt --noarch\"\nosx:build buildslave-sage$ echo $NUMPY_FCONFIG | sed -e 's/\\(\\S*\\)/--global-option \\1/g'\n--global-option c--global-option o--global-option n--global-option f--global-option i--global-option g--global-option _--global-option f--global-option c--global-option  --global-option ---global-option ---global-option n--global-option o--global-option o--global-option p--global-option t--global-option  --global-option ---global-option ---global-option n--global-option o--global-option a--global-option r--global-option c--global-option h--global-option \n```",
    "created_at": "2016-08-20T22:32:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293392",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'>**Comment 7:**</a>
Breaks OSX when compiling from scratch in numpy

```
[numpy-1.11.1] gcc version 4.9.3 (GCC) 
[numpy-1.11.1] ****************************************************
[numpy-1.11.1] patching file numpy/core/function_base.py
[numpy-1.11.1] patching file numpy/distutils/system_info.py
[numpy-1.11.1] Hunk #1 succeeded at 1685 (offset -5 lines).
[numpy-1.11.1] Hunk #2 succeeded at 1718 (offset -4 lines).
[numpy-1.11.1] 
[numpy-1.11.1] Usage:   
[numpy-1.11.1]   pip install [options] <requirement specifier> [package-index-options] ...
[numpy-1.11.1]   pip install [options] -r <requirements file> [package-index-options] ...
[numpy-1.11.1]   pip install [options] [-e] <vcs project url> ...
[numpy-1.11.1]   pip install [options] [-e] <local project path> ...
[numpy-1.11.1]   pip install [options] <archive url/path> ...
[numpy-1.11.1] 
[numpy-1.11.1] no such option: ---global-option
[numpy-1.11.1] 
[numpy-1.11.1] real	0m0.519s
[numpy-1.11.1] user	0m0.269s
[numpy-1.11.1] sys	0m0.142s
[numpy-1.11.1] ************************************************************************
[numpy-1.11.1] Error installing package numpy-1.11.1
```
Note on OSX:

```
osx:build buildslave-sage$ NUMPY_FCONFIG="config_fc --noopt --noarch"
osx:build buildslave-sage$ echo $NUMPY_FCONFIG | sed -e 's/\(\S*\)/--global-option \1/g'
--global-option c--global-option o--global-option n--global-option f--global-option i--global-option g--global-option _--global-option f--global-option c--global-option  --global-option ---global-option ---global-option n--global-option o--global-option o--global-option p--global-option t--global-option  --global-option ---global-option ---global-option n--global-option o--global-option a--global-option r--global-option c--global-option h--global-option 
```



---

archive/issue_comments_293393.json:
```json
{
    "body": "**Changing commit** from \"[7054c41c14c7a619fee1ccaa79da1273e5713727](https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727)\" to \"\".",
    "created_at": "2016-08-20T22:32:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293393",
    "user": "https://github.com/vbraun"
}
```

**Changing commit** from "[7054c41c14c7a619fee1ccaa79da1273e5713727](https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727)" to "".



---

archive/issue_comments_293394.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nApparently on OSX that should be `sed -E` not `sed -e` :(",
    "created_at": "2016-08-22T09:39:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293394",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'>**Comment 8:**</a>
Apparently on OSX that should be `sed -E` not `sed -e` :(



---

archive/issue_comments_293395.json:
```json
{
    "body": "<a id='comment:129'>**Comment 129:**</a>\nReplying to [@embray](#comment%3A128):\n> Apparently on OSX that should be `sed -E` not `sed -e` :(\n\nIn fact the `-e` doesn't really even need to be there. I'm not sure why I put it.  But on OSX it seems the `-E` is needed to interpret the command as a \"modern\" perl-style regexp.",
    "created_at": "2016-08-22T09:45:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293395",
    "user": "https://github.com/embray"
}
```

<a id='comment:129'>**Comment 129:**</a>
Replying to [@embray](#comment%3A128):
> Apparently on OSX that should be `sed -E` not `sed -e` :(

In fact the `-e` doesn't really even need to be there. I'm not sure why I put it.  But on OSX it seems the `-E` is needed to interpret the command as a "modern" perl-style regexp.



---

archive/issue_comments_293396.json:
```json
{
    "body": "<a id='comment:0'>**Comment 0:**</a>\nOr for a more portable way without invoking `sed` at all:\n\n```\n$(for opt in $NUMPY_FCONFIG; do printf ' %s %s' --global-option $opt; done)\n```",
    "created_at": "2016-08-22T09:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293396",
    "user": "https://github.com/embray"
}
```

<a id='comment:0'>**Comment 0:**</a>
Or for a more portable way without invoking `sed` at all:

```
$(for opt in $NUMPY_FCONFIG; do printf ' %s %s' --global-option $opt; done)
```



---

archive/issue_comments_293397.json:
```json
{
    "body": "**Commit:** [7054c41c14c7a619fee1ccaa79da1273e5713727](https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727)",
    "created_at": "2016-08-22T17:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293397",
    "user": "https://github.com/vbraun"
}
```

**Commit:** [7054c41c14c7a619fee1ccaa79da1273e5713727](https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727)



---

archive/issue_comments_293398.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nI don't really care which variant long as it works ;-)\n\n---\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a692a300c47526f4ab7987bcc109ca23e9acee20\">a692a30</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e16e00113042fd2d0348db07310e0bfc57f815c\">3e16e00</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/332d91561b060f22f6af8539bc5440659403447a\">332d915</a></td><td><code>Move PIP_INSTALL into sage-env so that it's available so long as the Sage environment is activated</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6121b21c29ba65f71b8804edbd621282854bcd7\">d6121b2</a></td><td><code>pip install sagenb_exports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7218a077e4c2bffe8a8cd6a496e62313191a36b\">d7218a0</a></td><td><code>Three new Python packages were added that should use pip for installation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd131c1a550242299e367080fa1a77a5823daaed\">fd131c1</a></td><td><code>Add --verbose flag to pip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/afc90d4e8b968e626ea54789f1e05b154b053759\">afc90d4</a></td><td><code>Add terminado as standard package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdb403eb74130532900c41e73c54e5de8fb441d0\">fdb403e</a></td><td><code>Add entrypoints and configparser packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4fc97cd760ef5260bab0a80fb1dff9ca1cbfe3a\">c4fc97c</a></td><td><code>Merge remote-tracking branches 'trac/u/jdemeyer/add_a_terminado_package' and 'trac/u/jdemeyer/add_a_entrypoints_package' into t/20218/pip-install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727\">7054c41</a></td><td><code>Fix installation of Jupyter packages</code></td></tr></table>\n",
    "created_at": "2016-08-22T17:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293398",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'>**Comment 1:**</a>
I don't really care which variant long as it works ;-)

---
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a692a300c47526f4ab7987bcc109ca23e9acee20">a692a30</a></td><td><code>Update some packages that were added since the start of this branch to use pip.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e16e00113042fd2d0348db07310e0bfc57f815c">3e16e00</a></td><td><code>Some of the packages changed to use pip in 2fe1d357600e60d3422141ba5a7fb16efb3a691b needed pip added to their build deps.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/332d91561b060f22f6af8539bc5440659403447a">332d915</a></td><td><code>Move PIP_INSTALL into sage-env so that it's available so long as the Sage environment is activated</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6121b21c29ba65f71b8804edbd621282854bcd7">d6121b2</a></td><td><code>pip install sagenb_exports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7218a077e4c2bffe8a8cd6a496e62313191a36b">d7218a0</a></td><td><code>Three new Python packages were added that should use pip for installation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd131c1a550242299e367080fa1a77a5823daaed">fd131c1</a></td><td><code>Add --verbose flag to pip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/afc90d4e8b968e626ea54789f1e05b154b053759">afc90d4</a></td><td><code>Add terminado as standard package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdb403eb74130532900c41e73c54e5de8fb441d0">fdb403e</a></td><td><code>Add entrypoints and configparser packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4fc97cd760ef5260bab0a80fb1dff9ca1cbfe3a">c4fc97c</a></td><td><code>Merge remote-tracking branches 'trac/u/jdemeyer/add_a_terminado_package' and 'trac/u/jdemeyer/add_a_entrypoints_package' into t/20218/pip-install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727">7054c41</a></td><td><code>Fix installation of Jupyter packages</code></td></tr></table>




---

archive/issue_comments_293399.json:
```json
{
    "body": "**Changing branch** from \"[7054c41c14c7a619fee1ccaa79da1273e5713727](https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727)\" to \"[u/jdemeyer/pip-install](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/pip-install)\".",
    "created_at": "2016-08-22T17:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293399",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[7054c41c14c7a619fee1ccaa79da1273e5713727](https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727)" to "[u/jdemeyer/pip-install](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/pip-install)".



---

archive/issue_comments_293400.json:
```json
{
    "body": "**Changing dependencies** from \"#21260, #21261\" to \"\".",
    "created_at": "2016-08-26T08:25:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293400",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#21260, #21261" to "".



---

archive/issue_comments_293401.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nIs this ready for review?",
    "created_at": "2016-08-26T08:25:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293401",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'>**Comment 2:**</a>
Is this ready for review?



---

archive/issue_comments_293402.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nI guess not, since no changes have been made :-)",
    "created_at": "2016-08-26T08:32:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293402",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'>**Comment 3:**</a>
I guess not, since no changes have been made :-)



---

archive/issue_comments_293403.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99e1494840eac3dbb10d57b4721c4ff281c47c4e\">99e1494</a></td><td><code>Revert changes to numpy</code></td></tr></table>\n",
    "created_at": "2016-08-26T08:58:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293403",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>**Comment 4:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99e1494840eac3dbb10d57b4721c4ff281c47c4e">99e1494</a></td><td><code>Revert changes to numpy</code></td></tr></table>




---

archive/issue_comments_293404.json:
```json
{
    "body": "**Changing commit** from \"[7054c41c14c7a619fee1ccaa79da1273e5713727](https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727)\" to \"[99e1494840eac3dbb10d57b4721c4ff281c47c4e](https://github.com/sagemath/sagetrac-mirror/commit/99e1494840eac3dbb10d57b4721c4ff281c47c4e)\".",
    "created_at": "2016-08-26T08:58:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293404",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[7054c41c14c7a619fee1ccaa79da1273e5713727](https://github.com/sagemath/sagetrac-mirror/commit/7054c41c14c7a619fee1ccaa79da1273e5713727)" to "[99e1494840eac3dbb10d57b4721c4ff281c47c4e](https://github.com/sagemath/sagetrac-mirror/commit/99e1494840eac3dbb10d57b4721c4ff281c47c4e)".



---

archive/issue_comments_293405.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5c0b161de6ad824e7eb8752c072c0adab105a41\">f5c0b16</a></td><td><code>wcwidth depends on pip</code></td></tr></table>\n",
    "created_at": "2016-08-26T09:26:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293405",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>**Comment 5:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5c0b161de6ad824e7eb8752c072c0adab105a41">f5c0b16</a></td><td><code>wcwidth depends on pip</code></td></tr></table>




---

archive/issue_comments_293406.json:
```json
{
    "body": "**Changing commit** from \"[99e1494840eac3dbb10d57b4721c4ff281c47c4e](https://github.com/sagemath/sagetrac-mirror/commit/99e1494840eac3dbb10d57b4721c4ff281c47c4e)\" to \"[f5c0b161de6ad824e7eb8752c072c0adab105a41](https://github.com/sagemath/sagetrac-mirror/commit/f5c0b161de6ad824e7eb8752c072c0adab105a41)\".",
    "created_at": "2016-08-26T09:26:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293406",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[99e1494840eac3dbb10d57b4721c4ff281c47c4e](https://github.com/sagemath/sagetrac-mirror/commit/99e1494840eac3dbb10d57b4721c4ff281c47c4e)" to "[f5c0b161de6ad824e7eb8752c072c0adab105a41](https://github.com/sagemath/sagetrac-mirror/commit/f5c0b161de6ad824e7eb8752c072c0adab105a41)".



---

archive/issue_comments_293407.json:
```json
{
    "body": "<a id='comment:136'>**Comment 136:**</a>\nReplying to [git](#comment%3A134):\n> Branch pushed to git repo; I updated commit sha1. **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99e1494840eac3dbb10d57b4721c4ff281c47c4e\">99e1494</a></td><td><code>Revert changes to numpy</code></td></tr></table>\n\nI mean that's fine--what this is doing is in effect the same.  But you could have taken one of my suggestions above.  I think the for loop is most effective.  I mean I would just do it but you sort of took over this ticket",
    "created_at": "2016-08-26T09:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293407",
    "user": "https://github.com/embray"
}
```

<a id='comment:136'>**Comment 136:**</a>
Replying to [git](#comment%3A134):
> Branch pushed to git repo; I updated commit sha1. **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99e1494840eac3dbb10d57b4721c4ff281c47c4e">99e1494</a></td><td><code>Revert changes to numpy</code></td></tr></table>

I mean that's fine--what this is doing is in effect the same.  But you could have taken one of my suggestions above.  I think the for loop is most effective.  I mean I would just do it but you sort of took over this ticket



---

archive/issue_comments_293408.json:
```json
{
    "body": "<a id='comment:137'>**Comment 137:**</a>\nI just want this ticket to get merged. We can deal with the difficult cases (like `numpy`) later.",
    "created_at": "2016-08-26T09:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293408",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:137'>**Comment 137:**</a>
I just want this ticket to get merged. We can deal with the difficult cases (like `numpy`) later.



---

archive/issue_events_246582.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-26T09:46:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246582"
}
```



---

archive/issue_comments_293409.json:
```json
{
    "body": "<a id='comment:138'>**Comment 138:**</a>\nReplying to [@embray](#comment%3A136):\n> I mean that's fine\n\nMay I take that as positive review?",
    "created_at": "2016-08-26T09:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293409",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:138'>**Comment 138:**</a>
Replying to [@embray](#comment%3A136):
> I mean that's fine

May I take that as positive review?



---

archive/issue_events_246583.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-26T09:46:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246583"
}
```



---

archive/issue_events_246584.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-26T09:46:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246584"
}
```



---

archive/issue_comments_293410.json:
```json
{
    "body": "<a id='comment:0'>**Comment 0:**</a>\nYeah, yeah :)  *fingers crossed*",
    "created_at": "2016-08-26T10:16:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293410",
    "user": "https://github.com/embray"
}
```

<a id='comment:0'>**Comment 0:**</a>
Yeah, yeah :)  *fingers crossed*



---

archive/issue_comments_293411.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nIPython on OSX appears to require a platform-specific package:\n\n```\nsage -t --long src/sage/tests/cmdline.py\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 476, in sage.tests.cmdline.test_executable\nFailed example:\n    out.find(\"5559060566555523\") >= 0\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 478, in sage.tests.cmdline.test_executable\nFailed example:\n    err\nExpected:\n    ''\nGot:\n    'Traceback (most recent call last):\\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/bin/ipython\", line 5, in <module>\\n    from pkg_resources import load_entry_point\\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2927, in <module>\\n    @_call_aside\\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2913, in _call_aside\\n    f(*args, **kwargs)\\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2940, in _initialize_master_working_set\\n    working_set = WorkingSet._build_master()\\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 635, in _build_master\\n    ws.require(__requires__)\\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 943, in require\\n    needed = self.resolve(parse_requirements(requirements))\\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 829, in resolve\\n    raise DistributionNotFound(req, requirers)\\npkg_resources.DistributionNotFound: The \\'appnope\\' distribution was not found and is required by ipython\\n'\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 480, in sage.tests.cmdline.test_executable\nFailed example:\n    ret\nExpected:\n    0\nGot:\n    1\n**********************************************************************\n1 item had failures:\n   3 of 239 in sage.tests.cmdline.test_executable\n    [238 tests, 3 failures, 71.27 s]\n```",
    "created_at": "2016-08-27T08:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293411",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'>**Comment 1:**</a>
IPython on OSX appears to require a platform-specific package:

```
sage -t --long src/sage/tests/cmdline.py
**********************************************************************
File "src/sage/tests/cmdline.py", line 476, in sage.tests.cmdline.test_executable
Failed example:
    out.find("5559060566555523") >= 0
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/tests/cmdline.py", line 478, in sage.tests.cmdline.test_executable
Failed example:
    err
Expected:
    ''
Got:
    'Traceback (most recent call last):\n  File "/Users/buildslave-sage/slave/sage_git/build/local/bin/ipython", line 5, in <module>\n    from pkg_resources import load_entry_point\n  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2927, in <module>\n    @_call_aside\n  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2913, in _call_aside\n    f(*args, **kwargs)\n  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2940, in _initialize_master_working_set\n    working_set = WorkingSet._build_master()\n  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 635, in _build_master\n    ws.require(__requires__)\n  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 943, in require\n    needed = self.resolve(parse_requirements(requirements))\n  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 829, in resolve\n    raise DistributionNotFound(req, requirers)\npkg_resources.DistributionNotFound: The \'appnope\' distribution was not found and is required by ipython\n'
**********************************************************************
File "src/sage/tests/cmdline.py", line 480, in sage.tests.cmdline.test_executable
Failed example:
    ret
Expected:
    0
Got:
    1
**********************************************************************
1 item had failures:
   3 of 239 in sage.tests.cmdline.test_executable
    [238 tests, 3 failures, 71.27 s]
```



---

archive/issue_events_246585.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-27T08:32:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246585"
}
```



---

archive/issue_events_246586.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-27T08:32:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246586"
}
```



---

archive/issue_comments_293412.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nhttps://pypi.python.org/pypi/appnope/",
    "created_at": "2016-08-27T08:32:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293412",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'>**Comment 2:**</a>
https://pypi.python.org/pypi/appnope/



---

archive/issue_comments_293413.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\n\n```\nosx:build buildslave-sage$ ./sage --ipython\nTraceback (most recent call last):\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/bin/ipython\", line 5, in <module>\n    from pkg_resources import load_entry_point\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2927, in <module>\n    @_call_aside\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2913, in _call_aside\n    f(*args, **kwargs)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2940, in _initialize_master_working_set\n    working_set = WorkingSet._build_master()\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 635, in _build_master\n    ws.require(__requires__)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 943, in require\n    needed = self.resolve(parse_requirements(requirements))\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 829, in resolve\n    raise DistributionNotFound(req, requirers)\npkg_resources.DistributionNotFound: The 'appnope' distribution was not found and is required by ipython\nosx:build buildslave-sage$ ./sage -pip install appnope\nCollecting appnope\n  Downloading appnope-0.1.0-py2.py3-none-any.whl\nInstalling collected packages: appnope\nSuccessfully installed appnope-0.1.0\nosx:build buildslave-sage$ ./sage --ipython\nPython 2.7.10 (default, Aug 27 2016, 01:49:52) \nType \"copyright\", \"credits\" or \"license\" for more information.\n\nIPython 5.0.0 -- An enhanced Interactive Python.\n?         -> Introduction and overview of IPython's features.\n%quickref -> Quick reference.\nhelp      -> Python's own help system.\nobject?   -> Details about 'object', use 'object??' for extra details.\n\nIn [1]: \n```",
    "created_at": "2016-08-27T08:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293413",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'>**Comment 3:**</a>

```
osx:build buildslave-sage$ ./sage --ipython
Traceback (most recent call last):
  File "/Users/buildslave-sage/slave/sage_git/build/local/bin/ipython", line 5, in <module>
    from pkg_resources import load_entry_point
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2927, in <module>
    @_call_aside
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2913, in _call_aside
    f(*args, **kwargs)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2940, in _initialize_master_working_set
    working_set = WorkingSet._build_master()
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 635, in _build_master
    ws.require(__requires__)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 943, in require
    needed = self.resolve(parse_requirements(requirements))
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 829, in resolve
    raise DistributionNotFound(req, requirers)
pkg_resources.DistributionNotFound: The 'appnope' distribution was not found and is required by ipython
osx:build buildslave-sage$ ./sage -pip install appnope
Collecting appnope
  Downloading appnope-0.1.0-py2.py3-none-any.whl
Installing collected packages: appnope
Successfully installed appnope-0.1.0
osx:build buildslave-sage$ ./sage --ipython
Python 2.7.10 (default, Aug 27 2016, 01:49:52) 
Type "copyright", "credits" or "license" for more information.

IPython 5.0.0 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.

In [1]: 
```



---

archive/issue_comments_293414.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55f9e9d6aa4e49777418dcfe74ddaa55fb4a269a\">55f9e9d</a></td><td><code>Add appnope package</code></td></tr></table>\n",
    "created_at": "2016-08-27T12:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293414",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>**Comment 4:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55f9e9d6aa4e49777418dcfe74ddaa55fb4a269a">55f9e9d</a></td><td><code>Add appnope package</code></td></tr></table>




---

archive/issue_comments_293415.json:
```json
{
    "body": "**Changing commit** from \"[f5c0b161de6ad824e7eb8752c072c0adab105a41](https://github.com/sagemath/sagetrac-mirror/commit/f5c0b161de6ad824e7eb8752c072c0adab105a41)\" to \"[55f9e9d6aa4e49777418dcfe74ddaa55fb4a269a](https://github.com/sagemath/sagetrac-mirror/commit/55f9e9d6aa4e49777418dcfe74ddaa55fb4a269a)\".",
    "created_at": "2016-08-27T12:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293415",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[f5c0b161de6ad824e7eb8752c072c0adab105a41](https://github.com/sagemath/sagetrac-mirror/commit/f5c0b161de6ad824e7eb8752c072c0adab105a41)" to "[55f9e9d6aa4e49777418dcfe74ddaa55fb4a269a](https://github.com/sagemath/sagetrac-mirror/commit/55f9e9d6aa4e49777418dcfe74ddaa55fb4a269a)".



---

archive/issue_events_246587.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-27T12:57:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246587"
}
```



---

archive/issue_events_246588.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-27T12:57:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246588"
}
```



---

archive/issue_comments_293416.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n+New tarball: https://pypi.python.org/packages/26/34/0f3a5efac31f27fabce64645f8c609de9d925fe2915304d1a40f544cff0e/appnope-0.1.0.tar.gz\n+\n+---\n+\n Work has already been done--for example in #19187--on using `pip` for `sage -i` where appropriate.  However, a normal build of sage does not use `pip` for installing any Python spkgs; rather, they run `python setup.py install` which until recently has always been *the* way to install Python packages.\n \n I can suggest several reasons why `pip` should be used instead of this method.  To be clear--as many people think of `pip` as a tool for installing packages from the internet--this is not strictly the case.  `pip` can be used to install an already downloaded tarball, or even straight from a source tree unpacked from a tarball or checked out from VCS.  The typical way to do this is to change directories to the directory containing the `setup.py` script and running `pip install .`.  This still ultimately calls `setup.py install`, among other `setup.py` commands, but with the right incantations to perform a pip-style flat install.  Now, why is this preferable?\n``````\n",
    "created_at": "2016-08-27T12:57:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293416",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
+New tarball: https://pypi.python.org/packages/26/34/0f3a5efac31f27fabce64645f8c609de9d925fe2915304d1a40f544cff0e/appnope-0.1.0.tar.gz
+
+---
+
 Work has already been done--for example in #19187--on using `pip` for `sage -i` where appropriate.  However, a normal build of sage does not use `pip` for installing any Python spkgs; rather, they run `python setup.py install` which until recently has always been *the* way to install Python packages.
 
 I can suggest several reasons why `pip` should be used instead of this method.  To be clear--as many people think of `pip` as a tool for installing packages from the internet--this is not strictly the case.  `pip` can be used to install an already downloaded tarball, or even straight from a source tree unpacked from a tarball or checked out from VCS.  The typical way to do this is to change directories to the directory containing the `setup.py` script and running `pip install .`.  This still ultimately calls `setup.py install`, among other `setup.py` commands, but with the right incantations to perform a pip-style flat install.  Now, why is this preferable?
``````




---

archive/issue_events_246589.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-27T14:44:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246589"
}
```



---

archive/issue_events_246590.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-27T14:44:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246590"
}
```



---

archive/issue_comments_293417.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n\n```\nsage -t --long src/sage/misc/package.py\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 24, in sage.misc.package\nFailed example:\n    sorted(pkgs.keys())\nExpected:\n    ['4ti2',\n     'alabaster',\n     'arb',\n     ...\n     'zlib',\n     'zn_poly',\n     'zope_interface']\nGot:\n    ['4ti2',\n     'alabaster',\n     'appnope',\n     'arb',\n```",
    "created_at": "2016-08-27T22:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293417",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'>**Comment 7:**</a>

```
sage -t --long src/sage/misc/package.py
**********************************************************************
File "src/sage/misc/package.py", line 24, in sage.misc.package
Failed example:
    sorted(pkgs.keys())
Expected:
    ['4ti2',
     'alabaster',
     'arb',
     ...
     'zlib',
     'zn_poly',
     'zope_interface']
Got:
    ['4ti2',
     'alabaster',
     'appnope',
     'arb',
```



---

archive/issue_events_246591.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-27T22:34:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246591"
}
```



---

archive/issue_events_246592.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-27T22:34:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246592"
}
```



---

archive/issue_comments_293418.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nHeh. What an insidious test :)",
    "created_at": "2016-08-29T10:53:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293418",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'>**Comment 8:**</a>
Heh. What an insidious test :)



---

archive/issue_comments_293419.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nThat test doesn't exist in this branch... all tests pass on my machine. It must have been added recently.",
    "created_at": "2016-08-30T08:11:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293419",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'>**Comment 9:**</a>
That test doesn't exist in this branch... all tests pass on my machine. It must have been added recently.



---

archive/issue_comments_293420.json:
```json
{
    "body": "<a id='comment:0'>**Comment 0:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f365e3b0d648976056e11d3e02918aca2b525a7\">7f365e3</a></td><td><code>Merge tag '7.4.beta2' into t/20218/pip-install</code></td></tr></table>\n",
    "created_at": "2016-08-30T08:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293420",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:0'>**Comment 0:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f365e3b0d648976056e11d3e02918aca2b525a7">7f365e3</a></td><td><code>Merge tag '7.4.beta2' into t/20218/pip-install</code></td></tr></table>




---

archive/issue_comments_293421.json:
```json
{
    "body": "**Changing commit** from \"[55f9e9d6aa4e49777418dcfe74ddaa55fb4a269a](https://github.com/sagemath/sagetrac-mirror/commit/55f9e9d6aa4e49777418dcfe74ddaa55fb4a269a)\" to \"[7f365e3b0d648976056e11d3e02918aca2b525a7](https://github.com/sagemath/sagetrac-mirror/commit/7f365e3b0d648976056e11d3e02918aca2b525a7)\".",
    "created_at": "2016-08-30T08:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293421",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[55f9e9d6aa4e49777418dcfe74ddaa55fb4a269a](https://github.com/sagemath/sagetrac-mirror/commit/55f9e9d6aa4e49777418dcfe74ddaa55fb4a269a)" to "[7f365e3b0d648976056e11d3e02918aca2b525a7](https://github.com/sagemath/sagetrac-mirror/commit/7f365e3b0d648976056e11d3e02918aca2b525a7)".



---

archive/issue_comments_293422.json:
```json
{
    "body": "**Changing commit** from \"[7f365e3b0d648976056e11d3e02918aca2b525a7](https://github.com/sagemath/sagetrac-mirror/commit/7f365e3b0d648976056e11d3e02918aca2b525a7)\" to \"[f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d](https://github.com/sagemath/sagetrac-mirror/commit/f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d)\".",
    "created_at": "2016-08-30T09:03:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293422",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[7f365e3b0d648976056e11d3e02918aca2b525a7](https://github.com/sagemath/sagetrac-mirror/commit/7f365e3b0d648976056e11d3e02918aca2b525a7)" to "[f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d](https://github.com/sagemath/sagetrac-mirror/commit/f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d)".



---

archive/issue_comments_293423.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d\">f6859c3</a></td><td><code>Mark package tests as random</code></td></tr></table>\n",
    "created_at": "2016-08-30T09:03:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293423",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:1'>**Comment 1:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d">f6859c3</a></td><td><code>Mark package tests as random</code></td></tr></table>




---

archive/issue_comments_293424.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nThat test is only used for documentation purposes, it makes no sense to hardcode the list of packages in a test. Therefore, I mark the test `# random`.",
    "created_at": "2016-08-30T09:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293424",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'>**Comment 2:**</a>
That test is only used for documentation purposes, it makes no sense to hardcode the list of packages in a test. Therefore, I mark the test `# random`.



---

archive/issue_events_246593.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-30T09:05:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246593"
}
```



---

archive/issue_events_246594.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-30T09:05:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246594"
}
```



---

archive/issue_comments_293425.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nPlease review this trivial fix...",
    "created_at": "2016-08-31T11:45:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293425",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'>**Comment 3:**</a>
Please review this trivial fix...



---

archive/issue_events_246595.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-31T12:55:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246595"
}
```



---

archive/issue_events_246596.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-31T12:55:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246596"
}
```



---

archive/issue_events_246597.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-01T06:44:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246597"
}
```



---

archive/issue_events_246598.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a052c90db74c5892e71cfa64681b65bbf34f6df3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-09-01T06:44:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20218#event-246598"
}
```



---

archive/issue_comments_293426.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/pip-install](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/pip-install)\" to \"[f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d](https://github.com/sagemath/sagetrac-mirror/commit/f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d)\".",
    "created_at": "2016-09-01T06:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293426",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/pip-install](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/pip-install)" to "[f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d](https://github.com/sagemath/sagetrac-mirror/commit/f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d)".



---

archive/issue_comments_293427.json:
```json
{
    "body": "<a id='comment:156'>**Comment 156:**</a>\nReplying to [@embray](#comment%3A31):\n> pip will uninstall them, *mostly*.\n\nThis doesn't happen, leading to breakage like #21441.",
    "created_at": "2016-09-06T20:29:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293427",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:156'>**Comment 156:**</a>
Replying to [@embray](#comment%3A31):
> pip will uninstall them, *mostly*.

This doesn't happen, leading to breakage like #21441.



---

archive/issue_comments_293428.json:
```json
{
    "body": "**Changing commit** from \"[f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d](https://github.com/sagemath/sagetrac-mirror/commit/f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d)\" to \"\".",
    "created_at": "2016-09-06T20:29:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293428",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d](https://github.com/sagemath/sagetrac-mirror/commit/f6859c31c0322c22d9ad2b6ab21b8e8c8948e16d)" to "".



---

archive/issue_comments_293429.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nIt does happen, normally.  I don't know why it didn't for you.  You might have already had 2 Cythons installed and maybe it only uninstalled one.",
    "created_at": "2016-09-07T08:41:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20218#issuecomment-293429",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'>**Comment 7:**</a>
It does happen, normally.  I don't know why it didn't for you.  You might have already had 2 Cythons installed and maybe it only uninstalled one.
