# Issue 20933: Update MathJax and other spkgs' patches to conform to same format as other patches

archive/issues_020696.json:
```json
{
    "body": "#20837 tried to bring all spkgs into a uniform format for patches to the upstream sources.  In particular it ensures that all patches are applied from within the root of the upstream sources.\n\nIn the process I missed a few more packages that were a bit unusual.\n\nThe following packages were patching from a different directory than `src`:\n\n* atlas\n* mathjax\n* ntl\n* singular\n\nThe following packages were copying complete files instead of using patches:\n\n* jmol\n* tachyon\n* rubiks: not in this ticket, see #21103\n\nI have updated these packages to use the new \"standard\" patch format, so this can be considered a followup to #20837.  Fixing this is needed for #20692 to be completed.\n\n\nBranch/Commit: 86279c4146a13f060f3ce05017478c499860ed59\n\nReviewer: Jeroen Demeyer\n\nAuthor: Erik Bray\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20933\n\n",
    "closed_at": "2016-07-28T17:44:21Z",
    "created_at": "2016-07-04T10:24:37Z",
    "labels": [
        "component: packages: standard",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Update MathJax and other spkgs' patches to conform to same format as other patches",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20933",
    "user": "https://github.com/embray"
}
```
#20837 tried to bring all spkgs into a uniform format for patches to the upstream sources.  In particular it ensures that all patches are applied from within the root of the upstream sources.

In the process I missed a few more packages that were a bit unusual.

The following packages were patching from a different directory than `src`:

* atlas
* mathjax
* ntl
* singular

The following packages were copying complete files instead of using patches:

* jmol
* tachyon
* rubiks: not in this ticket, see #21103

I have updated these packages to use the new "standard" patch format, so this can be considered a followup to #20837.  Fixing this is needed for #20692 to be completed.


Branch/Commit: 86279c4146a13f060f3ce05017478c499860ed59

Reviewer: Jeroen Demeyer

Author: Erik Bray

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20933





---

archive/issue_comments_304346.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-04T10:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304346",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_304347.json:
```json
{
    "body": "<a id='comment:2'></a>Found a few other examples since pushing this branch.  Will update this to include the others as well.",
    "created_at": "2016-07-04T10:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304347",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'></a>Found a few other examples since pushing this branch.  Will update this to include the others as well.



---

archive/issue_comments_304348.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-07-04T10:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304348",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_304349.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,15 @@\n #20837 tried to bring all spkgs into a uniform format for patches to the upstream sources.  In particular it ensures that all patches are applied from within the root of the upstream sources.\n \n-In the process I missed MathJax which was slightly different from other packages.  Fixing this is needed for #20692 to be completed.\n+In the process I missed a few more packages that were a bit unusual, including:\n+\n+* mathjax\n+* jmol\n+* atlas\n+* rubiks\n+* singular\n+* tachyon\n+\n+I have updated these packages to use the new \"standard\" patch format, so this can be considered a followup to #20837.  Fixing this is needed for #20692 to be completed.\n \n Author: Erik Bray\n \n```\n",
    "created_at": "2016-07-05T10:55:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304349",
    "user": "https://github.com/embray"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,15 @@
 #20837 tried to bring all spkgs into a uniform format for patches to the upstream sources.  In particular it ensures that all patches are applied from within the root of the upstream sources.
 
-In the process I missed MathJax which was slightly different from other packages.  Fixing this is needed for #20692 to be completed.
+In the process I missed a few more packages that were a bit unusual, including:
+
+* mathjax
+* jmol
+* atlas
+* rubiks
+* singular
+* tachyon
+
+I have updated these packages to use the new "standard" patch format, so this can be considered a followup to #20837.  Fixing this is needed for #20692 to be completed.
 
 Author: Erik Bray
 
```




---

archive/issue_comments_304350.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2016-07-05T10:55:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304350",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_304351.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-05T10:55:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304351",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_304352.json:
```json
{
    "body": "<a id='comment:5'></a>Probably people who have worked on these packages in the past should be put on the cc list. \nThey might remember from which source the patches were generated.",
    "created_at": "2016-07-07T04:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304352",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Probably people who have worked on these packages in the past should be put on the cc list. 
They might remember from which source the patches were generated.



---

archive/issue_comments_304353.json:
```json
{
    "body": "<a id='comment:6'></a>I doubt they would remember off-hand, in most cases.  Some of these packages haven't been touched in years--I would't remember something like that.  In any case what does it matter?",
    "created_at": "2016-07-07T08:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304353",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>I doubt they would remember off-hand, in most cases.  Some of these packages haven't been touched in years--I would't remember something like that.  In any case what does it matter?



---

archive/issue_comments_304354.json:
```json
{
    "body": "<a id='comment:7'></a>I've based #19430 on this one to get rid of strange \"patches\"",
    "created_at": "2016-07-24T22:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304354",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:7'></a>I've based #19430 on this one to get rid of strange "patches"



---

archive/issue_comments_304355.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,16 @@\n+#20837 tried to bring all spkgs into a uniform format for patches to the upstream sources.  In particular it ensures that all patches are applied from within the root of the upstream sources.\n \n+In the process I missed a few more packages that were a bit unusual, including:\n+\n+* atlas\n+* jmol\n+* mathjax\n+* ntl\n+* rubiks\n+* singular\n+* tachyon\n+\n+I have updated these packages to use the new \"standard\" patch format, so this can be considered a followup to #20837.  Fixing this is needed for #20692 to be completed.\n \n Author: Erik Bray\n \n```\n",
    "created_at": "2016-07-25T09:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304355",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,16 @@
+#20837 tried to bring all spkgs into a uniform format for patches to the upstream sources.  In particular it ensures that all patches are applied from within the root of the upstream sources.
 
+In the process I missed a few more packages that were a bit unusual, including:
+
+* atlas
+* jmol
+* mathjax
+* ntl
+* rubiks
+* singular
+* tachyon
+
+I have updated these packages to use the new "standard" patch format, so this can be considered a followup to #20837.  Fixing this is needed for #20692 to be completed.
 
 Author: Erik Bray
 
```




---

archive/issue_comments_304356.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,21 @@\n+#20837 tried to bring all spkgs into a uniform format for patches to the upstream sources.  In particular it ensures that all patches are applied from within the root of the upstream sources.\n \n+In the process I missed a few more packages that were a bit unusual.\n+\n+The following packages were patching from a different directory than \\`src\\`:\n+\n+* atlas\n+* mathjax\n+* ntl\n+* singular\n+\n+The following packages were copying complete files instead of using patches:\n+\n+* jmol\n+* rubiks\n+* tachyon\n+\n+I have updated these packages to use the new \"standard\" patch format, so this can be considered a followup to #20837.  Fixing this is needed for #20692 to be completed.\n \n Author: Erik Bray\n \n```\n",
    "created_at": "2016-07-25T09:29:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304356",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,21 @@
+#20837 tried to bring all spkgs into a uniform format for patches to the upstream sources.  In particular it ensures that all patches are applied from within the root of the upstream sources.
 
+In the process I missed a few more packages that were a bit unusual.
+
+The following packages were patching from a different directory than \`src\`:
+
+* atlas
+* mathjax
+* ntl
+* singular
+
+The following packages were copying complete files instead of using patches:
+
+* jmol
+* rubiks
+* tachyon
+
+I have updated these packages to use the new "standard" patch format, so this can be considered a followup to #20837.  Fixing this is needed for #20692 to be completed.
 
 Author: Erik Bray
 
```




---

archive/issue_comments_304357.json:
```json
{
    "body": "<a id='comment:10'></a>For NTL, could you use `../patches/*.patch` instead of `\"$CUR\"/patches/*.patch` to make it even more standard?\n\nSame for Singular.",
    "created_at": "2016-07-25T09:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304357",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>For NTL, could you use `../patches/*.patch` instead of `"$CUR"/patches/*.patch` to make it even more standard?

Same for Singular.



---

archive/issue_comments_304358.json:
```json
{
    "body": "<a id='comment:12'></a>With Sage 7.3.beta9, a patch was added to Singular which should also be treated.",
    "created_at": "2016-07-25T10:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304358",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>With Sage 7.3.beta9, a patch was added to Singular which should also be treated.



---

archive/issue_comments_304359.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-07-25T10:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304359",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_304360.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-07-26T12:15:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304360",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_304361.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:10 jdemeyer]:\n> For NTL, could you use `../patches/*.patch` instead of `\"$CUR\"/patches/*.patch` to make it even more standard?\n> \n> Same for Singular.\n\n\nDone.\n\nRebased and included fixing the new patch for Singular.",
    "created_at": "2016-07-26T12:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304361",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>Replying to [comment:10 jdemeyer]:
> For NTL, could you use `../patches/*.patch` instead of `"$CUR"/patches/*.patch` to make it even more standard?
> 
> Same for Singular.


Done.

Rebased and included fixing the new patch for Singular.



---

archive/issue_comments_304362.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-26T12:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304362",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_304363.json:
```json
{
    "body": "<a id='comment:16'></a>First test: Sage builds from scratch with this branch applied.",
    "created_at": "2016-07-26T15:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304363",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>First test: Sage builds from scratch with this branch applied.



---

archive/issue_comments_304364.json:
```json
{
    "body": "<a id='comment:17'></a>The four packages which just have their directories changed are fine.\n\nWith tachyon and jmol, the installed version with this branch is the same before this branch (as far as I can tell). So this is fine too.\n\nRubiks on the other hand has substantial changes, probably because of a different `Makefile`. I cannot immediately tell whether they are fine.",
    "created_at": "2016-07-27T08:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304364",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>The four packages which just have their directories changed are fine.

With tachyon and jmol, the installed version with this branch is the same before this branch (as far as I can tell). So this is fine too.

Rubiks on the other hand has substantial changes, probably because of a different `Makefile`. I cannot immediately tell whether they are fine.



---

archive/issue_comments_304365.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,21 @@\n+#20837 tried to bring all spkgs into a uniform format for patches to the upstream sources.  In particular it ensures that all patches are applied from within the root of the upstream sources.\n+\n+In the process I missed a few more packages that were a bit unusual.\n+\n+The following packages were patching from a different directory than \\`src\\`:\n+\n+* atlas\n+* mathjax\n+* ntl\n+* singular\n+\n+The following packages were copying complete files instead of using patches:\n+\n+* jmol\n+* tachyon\n+* rubiks: not in this ticket, see #21103\n+\n+I have updated these packages to use the new \"standard\" patch format, so this can be considered a followup to #20837.  Fixing this is needed for #20692 to be completed.\n \n \n Author: Erik Bray\n```\n",
    "created_at": "2016-07-27T08:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304365",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,21 @@
+#20837 tried to bring all spkgs into a uniform format for patches to the upstream sources.  In particular it ensures that all patches are applied from within the root of the upstream sources.
+
+In the process I missed a few more packages that were a bit unusual.
+
+The following packages were patching from a different directory than \`src\`:
+
+* atlas
+* mathjax
+* ntl
+* singular
+
+The following packages were copying complete files instead of using patches:
+
+* jmol
+* tachyon
+* rubiks: not in this ticket, see #21103
+
+I have updated these packages to use the new "standard" patch format, so this can be considered a followup to #20837.  Fixing this is needed for #20692 to be completed.
 
 
 Author: Erik Bray
```




---

archive/issue_comments_304366.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-27T08:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304366",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_304367.json:
```json
{
    "body": "<a id='comment:19'></a>New commits:",
    "created_at": "2016-07-27T08:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304367",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>New commits:



---

archive/issue_comments_304368.json:
```json
{
    "body": "<a id='comment:20'></a>positive_review to everything except `rubiks`. I removed the `rubiks` commit and will move it to #21103.",
    "created_at": "2016-07-27T08:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304368",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>positive_review to everything except `rubiks`. I removed the `rubiks` commit and will move it to #21103.



---

archive/issue_events_056058.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-28T17:44:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20933#event-56058"
}
```



---

archive/issue_comments_304369.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-07-28T17:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20933#issuecomment-304369",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
