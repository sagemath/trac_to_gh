# Issue 20741: Brial doesn't compile with gcc 6.1

archive/issues_020504.json:
```json
{
    "body": "Brial doesn't compile with gcc 6.1. The following is a snip of the error log from compiling compiling Sage 7.3.beta2 on Arch linux kernel 4.5.4-1, x86_64, 16GB ram.\n\nThe full brial error log is attached.\n\n```\n [install] [brial-0.8.4.3] In file included from /usr/include/c++/6.1.1/string:48:0,\n [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/bits/locale_classes.h:40,\n [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/bits/ios_base.h:41,\n [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/ios:42,\n [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/ostream:38,\n [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/iostream:39,\n [install] [brial-0.8.4.3] from ../../libpolybori/include/polybori/pbori_defs.h:24,\n [install] [brial-0.8.4.3] from ../../libpolybori/include/polybori/BoolePolyRing.h:21,\n [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/FGLMStrategy.h:12,\n [install] [brial-0.8.4.3] from FGLMStrategy.cc:9:\n [install] [brial-0.8.4.3] /usr/include/c++/6.1.1/bits/stl_function.h:387:20: note:   'const polybori::BooleExponent' is not derived from 'const std::__cxx11::basic_string<_CharT, _Traits, _Alloc>'\n [install] [brial-0.8.4.3] { return __x < __y; }\n [install] [brial-0.8.4.3] ~~~~^~~~~\n ... 200 errors like this ...\n [install] [brial-0.8.4.3] In file included from ../../libpolybori/include/polybori/polybori.h:23:0,\n [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/groebner_defs.h:10,\n [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/PairStatusSet.h:20,\n [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/groebner_alg.h:14,\n [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/FGLMStrategy.h:13,\n [install] [brial-0.8.4.3] from FGLMStrategy.cc:9:\n [install] [brial-0.8.4.3] ../../libpolybori/include/polybori/BooleMonomial.h:286:1: note: candidate: polybori::CAuxTypes::bool_type polybori::operator<(const polybori::BooleMonomial&, const polybori::BooleMonomial&)\n [install] [brial-0.8.4.3] operator<(const BooleMonomial& lhs, const BooleMonomial& rhs) {\n [install] [brial-0.8.4.3] ^~~~~~~~\n [install] [brial-0.8.4.3] ../../libpolybori/include/polybori/BooleMonomial.h:286:1: note:   no known conversion for argument 1 from 'const polybori::BooleExponent' to 'const polybori::BooleMonomial&'\n [install] [brial-0.8.4.3] Makefile:542: recipe for target 'libpolybori_groebner_la-FGLMStrategy.lo' failed\n [install] [brial-0.8.4.3] make[5]: *** [libpolybori_groebner_la-FGLMStrategy.lo] Error 1\n [install] [brial-0.8.4.3] make[5]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src/groebner/src'\n [install] [brial-0.8.4.3] Makefile:372: recipe for target 'all-recursive' failed\n [install] [brial-0.8.4.3] make[4]: *** [all-recursive] Error 1\n [install] [brial-0.8.4.3] make[4]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src/groebner'\n [install] [brial-0.8.4.3] Makefile:565: recipe for target 'all-recursive' failed\n [install] [brial-0.8.4.3] make[3]: *** [all-recursive] Error 1\n [install] [brial-0.8.4.3] make[3]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src'\n [install] [brial-0.8.4.3] Error building BRiAl\n [install] [brial-0.8.4.3]\n [install] [brial-0.8.4.3] real  0m33.364s\n [install] [brial-0.8.4.3] user  0m29.830s\n [install] [brial-0.8.4.3] sys   0m1.577s\n [install] [brial-0.8.4.3] ************************************************************************\n [install] [brial-0.8.4.3] Error installing package brial-0.8.4.3\n [install] [brial-0.8.4.3] ************************************************************************\n ...\n [install] real  39m8.848s\n [install] user  37m11.613s\n [install] sys   1m58.670s\n [install] ***************************************************************\n [install] Error building Sage.\n [install] \n [install] The following package(s) may have failed to build (not necessarily\n [install] during this run of 'make all'):\n [install] \n [install] * package: brial-0.8.4.3\n [install] log file: /home/jsrn/mat/sage_coding_project/logs/pkgs/brial-0.8.4.3.log\n [install] build directory: /home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3\n [install] \n [install] The build directory may contain configuration files and other potentially\n [install] helpful information. WARNING: if you now run 'make' again, the build\n [install] directory will, by default, be deleted. Set the environment variable\n [install] SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.\n [install] \n\n```\n\nNew release of BRial:\n[https://github.com/BRiAl/BRiAl/releases/download/0.8.5/brial-0.8.5.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.5/brial-0.8.5.tar.bz2)\n\n\nCC:  @dimpase @kiwifb\n\nKeywords: brial, compilation, c++\n\nUpstream: Fixed upstream, in a later stable release.\n\nReviewer: Volker Braun\n\nAuthor: Fran\u00e7ois Bissey\n\nBranch: da85dbda60dea5613616dead7abaa0e977d9ae00\n\nCommit: da85dbda60dea5613616dead7abaa0e977d9ae00\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20741\n\n",
    "closed_at": "2016-07-03T14:59:07Z",
    "created_at": "2016-06-01T06:50:31Z",
    "labels": [
        "component: build",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Brial doesn't compile with gcc 6.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20741",
    "user": "https://github.com/johanrosenkilde"
}
```
Brial doesn't compile with gcc 6.1. The following is a snip of the error log from compiling compiling Sage 7.3.beta2 on Arch linux kernel 4.5.4-1, x86_64, 16GB ram.

The full brial error log is attached.

```
 [install] [brial-0.8.4.3] In file included from /usr/include/c++/6.1.1/string:48:0,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/bits/locale_classes.h:40,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/bits/ios_base.h:41,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/ios:42,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/ostream:38,
 [install] [brial-0.8.4.3] from /usr/include/c++/6.1.1/iostream:39,
 [install] [brial-0.8.4.3] from ../../libpolybori/include/polybori/pbori_defs.h:24,
 [install] [brial-0.8.4.3] from ../../libpolybori/include/polybori/BoolePolyRing.h:21,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/FGLMStrategy.h:12,
 [install] [brial-0.8.4.3] from FGLMStrategy.cc:9:
 [install] [brial-0.8.4.3] /usr/include/c++/6.1.1/bits/stl_function.h:387:20: note:   'const polybori::BooleExponent' is not derived from 'const std::__cxx11::basic_string<_CharT, _Traits, _Alloc>'
 [install] [brial-0.8.4.3] { return __x < __y; }
 [install] [brial-0.8.4.3] ~~~~^~~~~
 ... 200 errors like this ...
 [install] [brial-0.8.4.3] In file included from ../../libpolybori/include/polybori/polybori.h:23:0,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/groebner_defs.h:10,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/PairStatusSet.h:20,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/groebner_alg.h:14,
 [install] [brial-0.8.4.3] from ../../groebner/include/polybori/groebner/FGLMStrategy.h:13,
 [install] [brial-0.8.4.3] from FGLMStrategy.cc:9:
 [install] [brial-0.8.4.3] ../../libpolybori/include/polybori/BooleMonomial.h:286:1: note: candidate: polybori::CAuxTypes::bool_type polybori::operator<(const polybori::BooleMonomial&, const polybori::BooleMonomial&)
 [install] [brial-0.8.4.3] operator<(const BooleMonomial& lhs, const BooleMonomial& rhs) {
 [install] [brial-0.8.4.3] ^~~~~~~~
 [install] [brial-0.8.4.3] ../../libpolybori/include/polybori/BooleMonomial.h:286:1: note:   no known conversion for argument 1 from 'const polybori::BooleExponent' to 'const polybori::BooleMonomial&'
 [install] [brial-0.8.4.3] Makefile:542: recipe for target 'libpolybori_groebner_la-FGLMStrategy.lo' failed
 [install] [brial-0.8.4.3] make[5]: *** [libpolybori_groebner_la-FGLMStrategy.lo] Error 1
 [install] [brial-0.8.4.3] make[5]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src/groebner/src'
 [install] [brial-0.8.4.3] Makefile:372: recipe for target 'all-recursive' failed
 [install] [brial-0.8.4.3] make[4]: *** [all-recursive] Error 1
 [install] [brial-0.8.4.3] make[4]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src/groebner'
 [install] [brial-0.8.4.3] Makefile:565: recipe for target 'all-recursive' failed
 [install] [brial-0.8.4.3] make[3]: *** [all-recursive] Error 1
 [install] [brial-0.8.4.3] make[3]: Leaving directory '/home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3/src'
 [install] [brial-0.8.4.3] Error building BRiAl
 [install] [brial-0.8.4.3]
 [install] [brial-0.8.4.3] real  0m33.364s
 [install] [brial-0.8.4.3] user  0m29.830s
 [install] [brial-0.8.4.3] sys   0m1.577s
 [install] [brial-0.8.4.3] ************************************************************************
 [install] [brial-0.8.4.3] Error installing package brial-0.8.4.3
 [install] [brial-0.8.4.3] ************************************************************************
 ...
 [install] real  39m8.848s
 [install] user  37m11.613s
 [install] sys   1m58.670s
 [install] ***************************************************************
 [install] Error building Sage.
 [install] 
 [install] The following package(s) may have failed to build (not necessarily
 [install] during this run of 'make all'):
 [install] 
 [install] * package: brial-0.8.4.3
 [install] log file: /home/jsrn/mat/sage_coding_project/logs/pkgs/brial-0.8.4.3.log
 [install] build directory: /home/jsrn/mat/sage_coding_project/local/var/tmp/sage/build/brial-0.8.4.3
 [install] 
 [install] The build directory may contain configuration files and other potentially
 [install] helpful information. WARNING: if you now run 'make' again, the build
 [install] directory will, by default, be deleted. Set the environment variable
 [install] SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.
 [install] 

```

New release of BRial:
[https://github.com/BRiAl/BRiAl/releases/download/0.8.5/brial-0.8.5.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.5/brial-0.8.5.tar.bz2)


CC:  @dimpase @kiwifb

Keywords: brial, compilation, c++

Upstream: Fixed upstream, in a later stable release.

Reviewer: Volker Braun

Author: François Bissey

Branch: da85dbda60dea5613616dead7abaa0e977d9ae00

Commit: da85dbda60dea5613616dead7abaa0e977d9ae00

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20741





---

archive/issue_comments_282747.json:
```json
{
    "body": "Full error log",
    "created_at": "2016-06-01T06:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20741#issuecomment-282747",
    "user": "https://github.com/johanrosenkilde"
}
```

Full error log



---

archive/issue_comments_282748.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [brial-0.8.4.3.log](tarball://root/attachments/some-uuid/ticket20741/brial-0.8.4.3.log) by @dimpase created at 2016-06-01 09:33:39\n\nI also reported this at \nhttps://github.com/BRiAl/BRiAl/issues/8",
    "created_at": "2016-06-01T09:33:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20741#issuecomment-282748",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>Attachment [brial-0.8.4.3.log](tarball://root/attachments/some-uuid/ticket20741/brial-0.8.4.3.log) by @dimpase created at 2016-06-01 09:33:39

I also reported this at 
https://github.com/BRiAl/BRiAl/issues/8



---

archive/issue_comments_282749.json:
```json
{
    "body": "<a id='comment:2'></a>Is anybody going to put the [\"upstream\" patch](https://github.com/BRiAl/BRiAl/pull/9/commits/e9b5109b44c80dc0137f0fb13dc03fd6113d9e4e)  (from vbraun/fbissey) into a branch here?\n\nI didn't find any changes to BRiAl's configure yet.",
    "created_at": "2016-06-29T19:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20741#issuecomment-282749",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:2'></a>Is anybody going to put the ["upstream" patch](https://github.com/BRiAl/BRiAl/pull/9/commits/e9b5109b44c80dc0137f0fb13dc03fd6113d9e4e)  (from vbraun/fbissey) into a branch here?

I didn't find any changes to BRiAl's configure yet.



---

archive/issue_comments_282750.json:
```json
{
    "body": "<a id='comment:3'></a>I should make a release of `brial` and it will need a little bit of changes here.",
    "created_at": "2016-06-29T20:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20741#issuecomment-282750",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'></a>I should make a release of `brial` and it will need a little bit of changes here.



---

archive/issue_comments_282751.json:
```json
{
    "body": "<a id='comment:4'></a>I need to check a few things before `brial` release, I think one of the changes needs a further adjustment. I may need a couple of days.",
    "created_at": "2016-06-30T01:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20741#issuecomment-282751",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>I need to check a few things before `brial` release, I think one of the changes needs a further adjustment. I may need a couple of days.



---

archive/issue_comments_282752.json:
```json
{
    "body": "<a id='comment:5'></a>OK I released a new `BRiAl`. It includes all the patches already in sage so we should be able to drop all the patches. There is a renaming of libpolybori to libbrial for which we will need to adjust. However the header are still in include/polybori. Arguably I should have also dealt with that before release.\n\nHopefully I will have time later today to push a branch to update `BRiAl`.",
    "created_at": "2016-07-02T22:10:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20741#issuecomment-282752",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>OK I released a new `BRiAl`. It includes all the patches already in sage so we should be able to drop all the patches. There is a renaming of libpolybori to libbrial for which we will need to adjust. However the header are still in include/polybori. Arguably I should have also dealt with that before release.

Hopefully I will have time later today to push a branch to update `BRiAl`.



---

archive/issue_comments_282753.json:
```json
{
    "body": "<a id='comment:6'></a>OK upgrade branch with fix by Volker. Bonus `polybori` was still listed instead of `brial` in the list of standard packages. Ready for review\n\n---\nNew commits:",
    "created_at": "2016-07-03T00:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20741#issuecomment-282753",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:6'></a>OK upgrade branch with fix by Volker. Bonus `polybori` was still listed instead of `brial` in the list of standard packages. Ready for review

---
New commits:



---

archive/issue_comments_282754.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-03T00:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20741#issuecomment-282754",
    "user": "https://github.com/kiwifb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_282755.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-03T10:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20741#issuecomment-282755",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_055738.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-03T14:59:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20741",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20741#event-55738"
}
```



---

archive/issue_comments_282756.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-07-03T14:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20741#issuecomment-282756",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
