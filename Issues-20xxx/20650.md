# Issue 20650: Add is_polynomial and normal_form to projective morphism

archive/issues_020413.json:
```json
{
    "body": "Assignee: rlmiller\n\nCC:  @bhutz\n\nAdded function to determine whether an equation is a polynomial or not by checking if it has a totally ramified fixed point. (is_polynomial)\n\nThen used this function to create make_look_poly, which puts polynomials in the form     \"x**n + a*x**(n-2) +...+c\", where a and c are constants.\n\nNeeds more examples, specifically for errors.\n\nIssue created by migration from https://trac.sagemath.org/ticket/20650\n\n",
    "closed_at": "2016-06-08T12:29:47Z",
    "created_at": "2016-05-21T21:37:55Z",
    "labels": [
        "component: algebraic geometry",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Add is_polynomial and normal_form to projective morphism",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20650",
    "user": "https://trac.sagemath.org/admin/accounts/users/rlmiller"
}
```
Assignee: rlmiller

CC:  @bhutz

Added function to determine whether an equation is a polynomial or not by checking if it has a totally ramified fixed point. (is_polynomial)

Then used this function to create make_look_poly, which puts polynomials in the form     "x**n + a*x**(n-2) +...+c", where a and c are constants.

Needs more examples, specifically for errors.

Issue created by migration from https://trac.sagemath.org/ticket/20650





---

archive/issue_comments_281059.json:
```json
{
    "body": "Changing assignee from Rebecca Lauren Miller to rlmiller.",
    "created_at": "2016-05-21T21:40:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281059",
    "user": "https://trac.sagemath.org/admin/accounts/users/rlmiller"
}
```

Changing assignee from Rebecca Lauren Miller to rlmiller.



---

archive/issue_comments_281060.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-05-21T21:40:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281060",
    "user": "https://trac.sagemath.org/admin/accounts/users/rlmiller"
}
```

New commits:



---

archive/issue_comments_281061.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2016-05-21T21:40:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281061",
    "user": "https://trac.sagemath.org/admin/accounts/users/rlmiller"
}
```

Changing priority from major to minor.



---

archive/issue_comments_281062.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-05-21T21:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281062",
    "user": "https://trac.sagemath.org/admin/accounts/users/rlmiller"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_281063.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-05-22T20:04:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281063",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_281064.json:
```json
{
    "body": "- The documentation does not build\n\n```\n[schemes  ] /home/ben/sage/sage-test/local/lib/python2.7/site-packages/sage/schemes/projective/projective_morphism.py:docstring of sage.schemes.projective.projective_morphism.SchemeMorphism_polynomial_projective_space_finite_field.make_look_poly:13: ERROR: Unexpected indentation.\nError building the documentation.\n```\n\n- Totally Rmified Fixed Point does not need initial caps.\n\n- \"x**n + a*x**(n-2) +...+c\" should not be \"\n\n- the examples sage:: should only have one :.\n\n- the doc tests pass, but only because the examples with :: are not being run.\n\n- formatting of the code needs some attention, such as spaces around =\n\n- these two functions were added to the finite field section of polynomial morphism. Should they work over other rings/fields as well?\n\n- make_look_poly could use a better name. How about 'normal_form'? Since it has only one keyword, you should use the keyword instead of the dict kwds",
    "created_at": "2016-05-22T20:04:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281064",
    "user": "https://github.com/bhutz"
}
```

- The documentation does not build

```
[schemes  ] /home/ben/sage/sage-test/local/lib/python2.7/site-packages/sage/schemes/projective/projective_morphism.py:docstring of sage.schemes.projective.projective_morphism.SchemeMorphism_polynomial_projective_space_finite_field.make_look_poly:13: ERROR: Unexpected indentation.
Error building the documentation.
```

- Totally Rmified Fixed Point does not need initial caps.

- "x**n + a*x**(n-2) +...+c" should not be "

- the examples sage:: should only have one :.

- the doc tests pass, but only because the examples with :: are not being run.

- formatting of the code needs some attention, such as spaces around =

- these two functions were added to the finite field section of polynomial morphism. Should they work over other rings/fields as well?

- make_look_poly could use a better name. How about 'normal_form'? Since it has only one keyword, you should use the keyword instead of the dict kwds



---

archive/issue_comments_281065.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-27T02:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281065",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_281066.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-05-27T02:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281066",
    "user": "https://trac.sagemath.org/admin/accounts/users/rlmiller"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_281067.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-05-27T14:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281067",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_281068.json:
```json
{
    "body": "I did some code clean-up. No functionality was changed except that instead of having to compute the inverses of the conjugation it now just computes the right one to start with.\n\nThere are still a few functionality issues: Other base rings that should work do not such as QQ\n\n```\nP.<x,y>=ProjectiveSpace(QQ,1)\nH=End(P)\nf=H([x^2+y^2,y^2])\nf.is_polynomial()\n```\n\nI think it likely these will work for finite fields as well\n\n```\nP.<x,y>=ProjectiveSpace(GF(13),1)\nH=End(P)\nf=H([x^2+y^2,y^2])\nf.is_polynomial()\n```\n\nFunction field base rings are not going to work, but this error isn't very informative\n\n```\nR.<c>=PolynomialRing(QQ)\nP.<x,y>=ProjectiveSpace(FractionField(R),1)\nH=End(P)\nf=H([x^2+c*y^2,y^2])\nf.is_polynomial()\n```\n\n```\nR.<c>=FunctionField(QQ)\nP.<x,y>=ProjectiveSpace(R,1)\nH=End(P)\nf=H([x^2+c*y^2,y^2])\nf.is_polynomial()\n```\n\nThe single rational preimage check is not sufficient\n\n```\nK.<w>=QuadraticField(4/27)\nP.<x,y>=ProjectiveSpace(K,1)\nH=End(P)\nS=P.coordinate_ring()\nf=H([x^3+w*y^3,x*y^2])\nf.is_polynomial()\n```\n\n---\nNew commits:",
    "created_at": "2016-05-27T14:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281068",
    "user": "https://github.com/bhutz"
}
```

I did some code clean-up. No functionality was changed except that instead of having to compute the inverses of the conjugation it now just computes the right one to start with.

There are still a few functionality issues: Other base rings that should work do not such as QQ

```
P.<x,y>=ProjectiveSpace(QQ,1)
H=End(P)
f=H([x^2+y^2,y^2])
f.is_polynomial()
```

I think it likely these will work for finite fields as well

```
P.<x,y>=ProjectiveSpace(GF(13),1)
H=End(P)
f=H([x^2+y^2,y^2])
f.is_polynomial()
```

Function field base rings are not going to work, but this error isn't very informative

```
R.<c>=PolynomialRing(QQ)
P.<x,y>=ProjectiveSpace(FractionField(R),1)
H=End(P)
f=H([x^2+c*y^2,y^2])
f.is_polynomial()
```

```
R.<c>=FunctionField(QQ)
P.<x,y>=ProjectiveSpace(R,1)
H=End(P)
f=H([x^2+c*y^2,y^2])
f.is_polynomial()
```

The single rational preimage check is not sufficient

```
K.<w>=QuadraticField(4/27)
P.<x,y>=ProjectiveSpace(K,1)
H=End(P)
S=P.coordinate_ring()
f=H([x^3+w*y^3,x*y^2])
f.is_polynomial()
```

---
New commits:



---

archive/issue_comments_281069.json:
```json
{
    "body": "One more thing: in dimension > 1 it should return a NotImplmentedError",
    "created_at": "2016-05-27T15:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281069",
    "user": "https://github.com/bhutz"
}
```

One more thing: in dimension > 1 it should return a NotImplmentedError



---

archive/issue_comments_281070.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-05-27T22:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281070",
    "user": "https://trac.sagemath.org/admin/accounts/users/rlmiller"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_281071.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-05-27T22:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281071",
    "user": "https://trac.sagemath.org/admin/accounts/users/rlmiller"
}
```

New commits:



---

archive/issue_comments_281072.json:
```json
{
    "body": "Changing component from algebra to algebraic geometry.",
    "created_at": "2016-06-01T17:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281072",
    "user": "https://github.com/bhutz"
}
```

Changing component from algebra to algebraic geometry.



---

archive/issue_comments_281073.json:
```json
{
    "body": "Going all the way to the splitting field was causing some slow performance, so I've reworked it to manage the fields directly. This includes special casing finite fields and managing the embeddings as well.\n\nit should be noted that a simple error in projective_morphism.conjugation() was corrected in this ticket as well as a simple error in affine_morphism.homogenize()\n\nThe new version is ready for review now.\n\n---\nNew commits:",
    "created_at": "2016-06-01T17:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281073",
    "user": "https://github.com/bhutz"
}
```

Going all the way to the splitting field was causing some slow performance, so I've reworked it to manage the fields directly. This includes special casing finite fields and managing the embeddings as well.

it should be noted that a simple error in projective_morphism.conjugation() was corrected in this ticket as well as a simple error in affine_morphism.homogenize()

The new version is ready for review now.

---
New commits:



---

archive/issue_comments_281074.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-06-07T22:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281074",
    "user": "https://trac.sagemath.org/admin/accounts/users/rlmiller"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_281075.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-06-08T12:29:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20650#issuecomment-281075",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_055597.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-08T12:29:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20650",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20650#event-55597"
}
```
