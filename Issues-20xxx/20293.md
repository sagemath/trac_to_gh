# Issue 20293: matrix constructor fails on numpy.matrix

archive/issues_020056.json:
```json
{
    "assignees": [],
    "body": "This failure seems to be new in Sage.7.2.beta0 \n\n```\nsage: import numpy\nsage: n = numpy.matrix([[1,2],[3,4]],float)\nsage: matrix(n)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-7-649197712655> in <module>()\n----> 1 matrix(n)\n\n/waste/cn/sage-git/src/sage/matrix/constructor.pyx in sage.matrix.constructor.MatrixFactory.__call__ (/waste/cn/sage-git/src/build/cythonized/sage/matrix/constructor.c:6357)()\n    741                     entries = arg\n    742                 else:\n--> 743                     raise TypeError(\"invalid matrix constructor: type matrix? for help\")\n    744         else:  # len(args) >= 2\n    745             raise TypeError(\"invalid matrix constructor: type matrix? for help\")\n\nTypeError: invalid matrix constructor: type matrix? for help\n```\n\nUsing `numpy.array` instead of `numpy.matrix` still works (and is doctested).  \n\n\nKeywords: **numpy, matrix**\n\nBranch/Commit: **[c5cad5d](https://github.com/sagemath/sagetrac-mirror/commit/c5cad5d6321d8755ce456370c6054f5206e64020)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Christian Nassau, Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20293_\n\n",
    "closed_at": "2016-04-13T17:05:16Z",
    "created_at": "2016-03-25T17:26:39Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20numerical",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "matrix constructor fails on numpy.matrix",
    "type": "issue",
    "updated_at": "2016-04-13T17:05:16Z",
    "url": "https://github.com/sagemath/sage/issues/20293",
    "user": "https://github.com/cnassau"
}
```
This failure seems to be new in Sage.7.2.beta0 

```
sage: import numpy
sage: n = numpy.matrix([[1,2],[3,4]],float)
sage: matrix(n)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-7-649197712655> in <module>()
----> 1 matrix(n)

/waste/cn/sage-git/src/sage/matrix/constructor.pyx in sage.matrix.constructor.MatrixFactory.__call__ (/waste/cn/sage-git/src/build/cythonized/sage/matrix/constructor.c:6357)()
    741                     entries = arg
    742                 else:
--> 743                     raise TypeError("invalid matrix constructor: type matrix? for help")
    744         else:  # len(args) >= 2
    745             raise TypeError("invalid matrix constructor: type matrix? for help")

TypeError: invalid matrix constructor: type matrix? for help
```

Using `numpy.array` instead of `numpy.matrix` still works (and is doctested).  


Keywords: **numpy, matrix**

Branch/Commit: **[c5cad5d](https://github.com/sagemath/sagetrac-mirror/commit/c5cad5d6321d8755ce456370c6054f5206e64020)**

Reviewer: **Vincent Delecroix**

Author: **Christian Nassau, Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/20293_





---

archive/issue_events_268548.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2016-03-25T17:26:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268548"
}
```



---

archive/issue_events_268549.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2016-03-25T17:26:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20numerical",
    "label_color": "0000ff",
    "label_name": "component: numerical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268549"
}
```



---

archive/issue_events_268550.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2016-03-25T17:26:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268550"
}
```



---

archive/issue_events_268551.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2016-03-25T17:26:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268551"
}
```



---

archive/issue_comments_294861.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nI think the reason might be that with Sage 7.2.beta0 the numpy.matrix is not recognized as a numpy type:\n\n```\nsage: import numpy\nsage: n = numpy.matrix([[1,2],[3,4]],float)\nsage: from sage.structure.coerce import is_numpy_type\nsage: is_numpy_type(type(n))\nFalse\n```\n\nThe code in `is_numpy_type` checks whether the `tp_name` field of its argument begins with \"numpy.\"; in this case the `tp_name` is just \"`matrix`\". Maybe we should check `type(n).__module__` instead, since the official doc \n   https://docs.python.org/2/c-api/typeobj.html#c.PyTypeObject.tp_name\nsays that \"dynamically allocated types\" should not contain the module name in the `tp_type`. \n\n```\nsage: n = numpy.matrix([[1,2],[3,4]],float)\nsage: type(n).__module__\n'numpy.matrixlib.defmatrix'\nsage: n = numpy.array([[1,2],[3,4]],float)\nsage: type(n).__module__\n'numpy'\n```\nI currently do not know how to code this check in cython, though.",
    "created_at": "2016-03-25T18:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294861",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:1" align="right">Comment 1</div>

I think the reason might be that with Sage 7.2.beta0 the numpy.matrix is not recognized as a numpy type:

```
sage: import numpy
sage: n = numpy.matrix([[1,2],[3,4]],float)
sage: from sage.structure.coerce import is_numpy_type
sage: is_numpy_type(type(n))
False
```

The code in `is_numpy_type` checks whether the `tp_name` field of its argument begins with "numpy."; in this case the `tp_name` is just "`matrix`". Maybe we should check `type(n).__module__` instead, since the official doc 
   https://docs.python.org/2/c-api/typeobj.html#c.PyTypeObject.tp_name
says that "dynamically allocated types" should not contain the module name in the `tp_type`. 

```
sage: n = numpy.matrix([[1,2],[3,4]],float)
sage: type(n).__module__
'numpy.matrixlib.defmatrix'
sage: n = numpy.array([[1,2],[3,4]],float)
sage: type(n).__module__
'numpy'
```
I currently do not know how to code this check in cython, though.



---

archive/issue_events_268552.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2016-03-25T21:36:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268552"
}
```



---

archive/issue_comments_294862.json:
```json
{
    "body": "Commit: **[d58e845](https://github.com/sagemath/sagetrac-mirror/commit/d58e8456583eb9adf25a06c555d9d0f9766ca2dd)**",
    "created_at": "2016-03-25T21:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294862",
    "user": "https://github.com/cnassau"
}
```

Commit: **[d58e845](https://github.com/sagemath/sagetrac-mirror/commit/d58e8456583eb9adf25a06c555d9d0f9766ca2dd)**



---

archive/issue_comments_294863.json:
```json
{
    "body": "Branch: **[u/cnassau/numpy-matrix](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix)**",
    "created_at": "2016-03-25T21:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294863",
    "user": "https://github.com/cnassau"
}
```

Branch: **[u/cnassau/numpy-matrix](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix)**



---

archive/issue_comments_294864.json:
```json
{
    "body": "Author: **Christian Nassau**",
    "created_at": "2016-03-25T21:37:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294864",
    "user": "https://github.com/cnassau"
}
```

Author: **Christian Nassau**



---

archive/issue_comments_294865.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8a5e9687a9991faada7a5079332d2ba9d7ece72\">c8a5e96</a></td><td><code>Ticket 20293: fix numpy type recognition</code></td></tr></table>\n",
    "created_at": "2016-03-26T06:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294865",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:4" align="right">Comment 4</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8a5e9687a9991faada7a5079332d2ba9d7ece72">c8a5e96</a></td><td><code>Ticket 20293: fix numpy type recognition</code></td></tr></table>




---

archive/issue_comments_294866.json:
```json
{
    "body": "Changed branch from **[u/cnassau/numpy-matrix](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix)** to **[u/cnassau/numpy-matrix-2](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-2)**",
    "created_at": "2016-03-26T06:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294866",
    "user": "https://github.com/cnassau"
}
```

Changed branch from **[u/cnassau/numpy-matrix](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix)** to **[u/cnassau/numpy-matrix-2](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-2)**



---

archive/issue_comments_294867.json:
```json
{
    "body": "Changed commit from **[d58e845](https://github.com/sagemath/sagetrac-mirror/commit/d58e8456583eb9adf25a06c555d9d0f9766ca2dd)** to **[c8a5e96](https://github.com/sagemath/sagetrac-mirror/commit/c8a5e9687a9991faada7a5079332d2ba9d7ece72)**",
    "created_at": "2016-03-26T06:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294867",
    "user": "https://github.com/cnassau"
}
```

Changed commit from **[d58e845](https://github.com/sagemath/sagetrac-mirror/commit/d58e8456583eb9adf25a06c555d9d0f9766ca2dd)** to **[c8a5e96](https://github.com/sagemath/sagetrac-mirror/commit/c8a5e9687a9991faada7a5079332d2ba9d7ece72)**



---

archive/issue_comments_294868.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nThis is silly:\n\n```\nstrncmp(t.__module__, \"numpy\", 5) == 0\n```\nEither you use Python or you use C, but I don't understand why this strange mixture. Anyway, I really want this check to be very fast, so we might need to think if we can make this more efficient.",
    "created_at": "2016-03-27T07:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294868",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">Comment 5</div>

This is silly:

```
strncmp(t.__module__, "numpy", 5) == 0
```
Either you use Python or you use C, but I don't understand why this strange mixture. Anyway, I really want this check to be very fast, so we might need to think if we can make this more efficient.



---

archive/issue_comments_294869.json:
```json
{
    "body": "Changed commit from **[c8a5e96](https://github.com/sagemath/sagetrac-mirror/commit/c8a5e9687a9991faada7a5079332d2ba9d7ece72)** to **[02fb331](https://github.com/sagemath/sagetrac-mirror/commit/02fb33195dffad7da19a5481aaade6253b8e3029)**",
    "created_at": "2016-03-27T08:56:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294869",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c8a5e96](https://github.com/sagemath/sagetrac-mirror/commit/c8a5e9687a9991faada7a5079332d2ba9d7ece72)** to **[02fb331](https://github.com/sagemath/sagetrac-mirror/commit/02fb33195dffad7da19a5481aaade6253b8e3029)**



---

archive/issue_comments_294870.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02fb33195dffad7da19a5481aaade6253b8e3029\">02fb331</a></td><td><code>Ticket 20293: cythonize checkfor t.__module__ in is_numpy_type</code></td></tr></table>\n",
    "created_at": "2016-03-27T08:56:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294870",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6" align="right">Comment 6</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02fb33195dffad7da19a5481aaade6253b8e3029">02fb331</a></td><td><code>Ticket 20293: cythonize checkfor t.__module__ in is_numpy_type</code></td></tr></table>




---

archive/issue_comments_294871.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nReplying to [@jdemeyer](#comment%3A5):\n> This is silly:\n> \n> ```\n> strncmp(t.__module__, \"numpy\", 5) == 0\n> ```\n> Either you use Python or you use C, but I don't understand why this strange mixture. Anyway, I really want this check to be very fast, so we might need to think if we can make this more efficient.\n\nHere you go, the check has now been cythonized (by a non-cython programmer who just hopes that the refcounts work out alright).",
    "created_at": "2016-03-27T09:03:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294871",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:7" align="right">Comment 7</div>

Replying to [@jdemeyer](#comment%3A5):
> This is silly:
> 
> ```
> strncmp(t.__module__, "numpy", 5) == 0
> ```
> Either you use Python or you use C, but I don't understand why this strange mixture. Anyway, I really want this check to be very fast, so we might need to think if we can make this more efficient.

Here you go, the check has now been cythonized (by a non-cython programmer who just hopes that the refcounts work out alright).



---

archive/issue_comments_294872.json:
```json
{
    "body": "Changed commit from **[02fb331](https://github.com/sagemath/sagetrac-mirror/commit/02fb33195dffad7da19a5481aaade6253b8e3029)** to **[2454442](https://github.com/sagemath/sagetrac-mirror/commit/245444216aa1a83bced97ee64dceddaf65aff751)**",
    "created_at": "2016-03-27T09:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294872",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[02fb331](https://github.com/sagemath/sagetrac-mirror/commit/02fb33195dffad7da19a5481aaade6253b8e3029)** to **[2454442](https://github.com/sagemath/sagetrac-mirror/commit/245444216aa1a83bced97ee64dceddaf65aff751)**



---

archive/issue_comments_294873.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/245444216aa1a83bced97ee64dceddaf65aff751\">2454442</a></td><td><code>Ticket 20293: remove old check for tp_name in is_numpy_type</code></td></tr></table>\n",
    "created_at": "2016-03-27T09:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294873",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/245444216aa1a83bced97ee64dceddaf65aff751">2454442</a></td><td><code>Ticket 20293: remove old check for tp_name in is_numpy_type</code></td></tr></table>




---

archive/issue_comments_294874.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76231ad55395fcdf8d7a166109dc85f23ada6a26\">76231ad</a></td><td><code>Ticket 20293: handle types without `__module__` attribute gracefully in is_numpy_type</code></td></tr></table>\n",
    "created_at": "2016-03-27T10:10:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294874",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9" align="right">Comment 9</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76231ad55395fcdf8d7a166109dc85f23ada6a26">76231ad</a></td><td><code>Ticket 20293: handle types without `__module__` attribute gracefully in is_numpy_type</code></td></tr></table>




---

archive/issue_comments_294875.json:
```json
{
    "body": "Changed commit from **[2454442](https://github.com/sagemath/sagetrac-mirror/commit/245444216aa1a83bced97ee64dceddaf65aff751)** to **[76231ad](https://github.com/sagemath/sagetrac-mirror/commit/76231ad55395fcdf8d7a166109dc85f23ada6a26)**",
    "created_at": "2016-03-27T10:10:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294875",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2454442](https://github.com/sagemath/sagetrac-mirror/commit/245444216aa1a83bced97ee64dceddaf65aff751)** to **[76231ad](https://github.com/sagemath/sagetrac-mirror/commit/76231ad55395fcdf8d7a166109dc85f23ada6a26)**



---

archive/issue_comments_294876.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nTo keep it fast, one way would be to acces to the `tp_bases` field and check whether one of them actually is a numpy type. Though it seems that Cython does not know its existence!",
    "created_at": "2016-03-29T03:17:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294876",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">Comment 10</div>

To keep it fast, one way would be to acces to the `tp_bases` field and check whether one of them actually is a numpy type. Though it seems that Cython does not know its existence!



---

archive/issue_comments_294877.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nOne other solution would be to leave `is_numpy_type` as it is since it seems to work for scalar types and that seems to be its main use-case in the sage library. Then only the matrix constructor should be changed: it should `import numpy` and check for `isinstance(arg,numpy.ndarray)`.\n\nI'm not going to implement that, though, since I'm away on vacation, starting now.",
    "created_at": "2016-03-29T08:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294877",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:11" align="right">Comment 11</div>

One other solution would be to leave `is_numpy_type` as it is since it seems to work for scalar types and that seems to be its main use-case in the sage library. Then only the matrix constructor should be changed: it should `import numpy` and check for `isinstance(arg,numpy.ndarray)`.

I'm not going to implement that, though, since I'm away on vacation, starting now.



---

archive/issue_events_268553.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2016-03-29T08:33:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268553"
}
```



---

archive/issue_events_268554.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2016-03-29T08:33:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268554"
}
```



---

archive/issue_comments_294878.json:
```json
{
    "body": "Changed commit from **[76231ad](https://github.com/sagemath/sagetrac-mirror/commit/76231ad55395fcdf8d7a166109dc85f23ada6a26)** to **[2a286db](https://github.com/sagemath/sagetrac-mirror/commit/2a286dbd5b51e5d3afe32fa09c1bb32ea3715922)**",
    "created_at": "2016-04-12T10:51:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294878",
    "user": "https://github.com/cnassau"
}
```

Changed commit from **[76231ad](https://github.com/sagemath/sagetrac-mirror/commit/76231ad55395fcdf8d7a166109dc85f23ada6a26)** to **[2a286db](https://github.com/sagemath/sagetrac-mirror/commit/2a286dbd5b51e5d3afe32fa09c1bb32ea3715922)**



---

archive/issue_comments_294879.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a286dbd5b51e5d3afe32fa09c1bb32ea3715922\">2a286db</a></td><td><code>Ticket 20293: make matrix constructor work again with numpy.matrix arguments</code></td></tr></table>\n",
    "created_at": "2016-04-12T10:51:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294879",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:13" align="right">Comment 13</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a286dbd5b51e5d3afe32fa09c1bb32ea3715922">2a286db</a></td><td><code>Ticket 20293: make matrix constructor work again with numpy.matrix arguments</code></td></tr></table>




---

archive/issue_comments_294880.json:
```json
{
    "body": "Changed branch from **[u/cnassau/numpy-matrix-2](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-2)** to **[u/cnassau/numpy-matrix-constructor](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-constructor)**",
    "created_at": "2016-04-12T10:51:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294880",
    "user": "https://github.com/cnassau"
}
```

Changed branch from **[u/cnassau/numpy-matrix-2](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-2)** to **[u/cnassau/numpy-matrix-constructor](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-constructor)**



---

archive/issue_comments_294881.json:
```json
{
    "body": "Changed commit from **[2a286db](https://github.com/sagemath/sagetrac-mirror/commit/2a286dbd5b51e5d3afe32fa09c1bb32ea3715922)** to **[5effdac](https://github.com/sagemath/sagetrac-mirror/commit/5effdac04626b8b165f12af5a90f8d802cd02208)**",
    "created_at": "2016-04-12T10:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294881",
    "user": "https://github.com/cnassau"
}
```

Changed commit from **[2a286db](https://github.com/sagemath/sagetrac-mirror/commit/2a286dbd5b51e5d3afe32fa09c1bb32ea3715922)** to **[5effdac](https://github.com/sagemath/sagetrac-mirror/commit/5effdac04626b8b165f12af5a90f8d802cd02208)**



---

archive/issue_comments_294882.json:
```json
{
    "body": "Changed branch from **[u/cnassau/numpy-matrix-constructor](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-constructor)** to **[u/cnassau/numpy-matrix-constructor-2](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-constructor-2)**",
    "created_at": "2016-04-12T10:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294882",
    "user": "https://github.com/cnassau"
}
```

Changed branch from **[u/cnassau/numpy-matrix-constructor](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-constructor)** to **[u/cnassau/numpy-matrix-constructor-2](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-constructor-2)**



---

archive/issue_comments_294883.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5effdac04626b8b165f12af5a90f8d802cd02208\">5effdac</a></td><td><code>Ticket 20293: make matrix constructor work again with numpy.matrix arguments</code></td></tr></table>\n",
    "created_at": "2016-04-12T10:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294883",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:14" align="right">Comment 14</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5effdac04626b8b165f12af5a90f8d802cd02208">5effdac</a></td><td><code>Ticket 20293: make matrix constructor work again with numpy.matrix arguments</code></td></tr></table>




---

archive/issue_comments_294884.json:
```json
{
    "body": "Changed branch from **[u/cnassau/numpy-matrix-constructor-2](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-constructor-2)** to **[u/cnassau/numpy-matrix-constructor-3](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-constructor-3)**",
    "created_at": "2016-04-12T10:59:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294884",
    "user": "https://github.com/cnassau"
}
```

Changed branch from **[u/cnassau/numpy-matrix-constructor-2](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-constructor-2)** to **[u/cnassau/numpy-matrix-constructor-3](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-constructor-3)**



---

archive/issue_comments_294885.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/050d97dd40dd56bf6d78e71129c24de3ae1d6bd2\">050d97d</a></td><td><code>Ticket 20293: make matrix constructor work again with numpy.matrix arguments</code></td></tr></table>\n\nThe matrix constructor has been slightly changed:\n\n* it uses a new function \"might_be_numpy_array\" to test for numpy array/matrix objects before actually importing numpy. This way the function \"is_numpy_type\" (which is geared towards numpy scalar types) can remain as fast as it was. The new function currently checks for the presence of the \"newbyteorder\" method.\n\n* the conversion from numpy array/matrix to python lists now uses the numpy \"tolist\" method. The old code no longer worked for numpy.matrix objects (only numpy.array).",
    "created_at": "2016-04-12T10:59:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294885",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:15" align="right">Comment 15</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/050d97dd40dd56bf6d78e71129c24de3ae1d6bd2">050d97d</a></td><td><code>Ticket 20293: make matrix constructor work again with numpy.matrix arguments</code></td></tr></table>

The matrix constructor has been slightly changed:

* it uses a new function "might_be_numpy_array" to test for numpy array/matrix objects before actually importing numpy. This way the function "is_numpy_type" (which is geared towards numpy scalar types) can remain as fast as it was. The new function currently checks for the presence of the "newbyteorder" method.

* the conversion from numpy array/matrix to python lists now uses the numpy "tolist" method. The old code no longer worked for numpy.matrix objects (only numpy.array).



---

archive/issue_comments_294886.json:
```json
{
    "body": "Changed commit from **[5effdac](https://github.com/sagemath/sagetrac-mirror/commit/5effdac04626b8b165f12af5a90f8d802cd02208)** to **[050d97d](https://github.com/sagemath/sagetrac-mirror/commit/050d97dd40dd56bf6d78e71129c24de3ae1d6bd2)**",
    "created_at": "2016-04-12T10:59:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294886",
    "user": "https://github.com/cnassau"
}
```

Changed commit from **[5effdac](https://github.com/sagemath/sagetrac-mirror/commit/5effdac04626b8b165f12af5a90f8d802cd02208)** to **[050d97d](https://github.com/sagemath/sagetrac-mirror/commit/050d97dd40dd56bf6d78e71129c24de3ae1d6bd2)**



---

archive/issue_events_268555.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2016-04-12T11:06:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268555"
}
```



---

archive/issue_events_268556.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2016-04-12T11:06:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268556"
}
```



---

archive/issue_comments_294887.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nI didn't realize that `matrix` was a subtype of `numpy.ndarray`. This actually gives a much simpler solution: just check the base type. I will look into this right now.",
    "created_at": "2016-04-12T11:22:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294887",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">Comment 17</div>

I didn't realize that `matrix` was a subtype of `numpy.ndarray`. This actually gives a much simpler solution: just check the base type. I will look into this right now.



---

archive/issue_events_268557.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-04-12T11:35:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268557"
}
```



---

archive/issue_events_268558.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-04-12T11:35:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268558"
}
```



---

archive/issue_comments_294888.json:
```json
{
    "body": "Changed author from **Christian Nassau** to **Christian Nassau, Jeroen Demeyer**",
    "created_at": "2016-04-12T11:35:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294888",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Christian Nassau** to **Christian Nassau, Jeroen Demeyer**



---

archive/issue_comments_294889.json:
```json
{
    "body": "Changed branch from **[u/cnassau/numpy-matrix-constructor-3](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-constructor-3)** to **[u/jdemeyer/numpy-matrix-constructor-3](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/numpy-matrix-constructor-3)**",
    "created_at": "2016-04-12T11:36:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294889",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/cnassau/numpy-matrix-constructor-3](https://github.com/sagemath/sagetrac-mirror/tree/u/cnassau/numpy-matrix-constructor-3)** to **[u/jdemeyer/numpy-matrix-constructor-3](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/numpy-matrix-constructor-3)**



---

archive/issue_events_268559.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-04-12T11:36:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268559"
}
```



---

archive/issue_events_268560.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-04-12T11:36:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268560"
}
```



---

archive/issue_comments_294890.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1ec418a0bdcb8a6a82d872e9deef6c660b9348f\">e1ec418</a></td><td><code>Support numpy.matrix in is_numpy_type()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5cad5d6321d8755ce456370c6054f5206e64020\">c5cad5d</a></td><td><code>Doctest conversion numpy.matrix -> Sage matrix</code></td></tr></table>\n",
    "created_at": "2016-04-12T11:36:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294890",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">Comment 20</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1ec418a0bdcb8a6a82d872e9deef6c660b9348f">e1ec418</a></td><td><code>Support numpy.matrix in is_numpy_type()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5cad5d6321d8755ce456370c6054f5206e64020">c5cad5d</a></td><td><code>Doctest conversion numpy.matrix -> Sage matrix</code></td></tr></table>




---

archive/issue_comments_294891.json:
```json
{
    "body": "Changed commit from **[050d97d](https://github.com/sagemath/sagetrac-mirror/commit/050d97dd40dd56bf6d78e71129c24de3ae1d6bd2)** to **[c5cad5d](https://github.com/sagemath/sagetrac-mirror/commit/c5cad5d6321d8755ce456370c6054f5206e64020)**",
    "created_at": "2016-04-12T11:36:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294891",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[050d97d](https://github.com/sagemath/sagetrac-mirror/commit/050d97dd40dd56bf6d78e71129c24de3ae1d6bd2)** to **[c5cad5d](https://github.com/sagemath/sagetrac-mirror/commit/c5cad5d6321d8755ce456370c6054f5206e64020)**



---

archive/issue_comments_294892.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nSimple solution! Though, Sage would recognize any extension type that inherits from ndarray as a numpy object, right?",
    "created_at": "2016-04-12T15:04:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294892",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">Comment 21</div>

Simple solution! Though, Sage would recognize any extension type that inherits from ndarray as a numpy object, right?



---

archive/issue_comments_294893.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@videlec](#comment%3A21):\n> Sage would recognize any extension type that inherits from ndarray as a numpy object, right?\n\nYes, and I think that's probably the right thing to do anyway.",
    "created_at": "2016-04-12T15:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294893",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@videlec](#comment%3A21):
> Sage would recognize any extension type that inherits from ndarray as a numpy object, right?

Yes, and I think that's probably the right thing to do anyway.



---

archive/issue_comments_294894.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nWhy not\n\n```\nreturn strncmp(T.tp_name, \"numpy.\", 6) == 0 or \\\n       strncmp(T.tp_base.tp_name, \"numpy.\", 6) == 0\n```",
    "created_at": "2016-04-12T15:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294894",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">Comment 23</div>

Why not

```
return strncmp(T.tp_name, "numpy.", 6) == 0 or \
       strncmp(T.tp_base.tp_name, "numpy.", 6) == 0
```



---

archive/issue_comments_294895.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReadability?",
    "created_at": "2016-04-12T15:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294895",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">Comment 24</div>

Readability?



---

archive/issue_comments_294896.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nI guess this is a personal matter...",
    "created_at": "2016-04-12T15:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294896",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">Comment 25</div>

I guess this is a personal matter...



---

archive/issue_comments_294897.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2016-04-12T15:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294897",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_268561.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-04-12T15:45:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268561"
}
```



---

archive/issue_events_268562.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-04-12T15:45:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268562"
}
```



---

archive/issue_comments_294898.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nReplying to [@jdemeyer](#comment%3A20):\n> New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1ec418a0bdcb8a6a82d872e9deef6c660b9348f\">e1ec418</a></td><td><code>Support numpy.matrix in is_numpy_type()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5cad5d6321d8755ce456370c6054f5206e64020\">c5cad5d</a></td><td><code>Doctest conversion numpy.matrix -> Sage matrix</code></td></tr></table>\n\nThanks for getting this fixed!",
    "created_at": "2016-04-12T18:16:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294898",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:26" align="right">Comment 26</div>

Replying to [@jdemeyer](#comment%3A20):
> New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1ec418a0bdcb8a6a82d872e9deef6c660b9348f">e1ec418</a></td><td><code>Support numpy.matrix in is_numpy_type()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5cad5d6321d8755ce456370c6054f5206e64020">c5cad5d</a></td><td><code>Doctest conversion numpy.matrix -> Sage matrix</code></td></tr></table>

Thanks for getting this fixed!



---

archive/issue_events_268563.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-13T17:05:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268563"
}
```



---

archive/issue_events_268564.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "59fabc5e7dc1c31e4a5406f5e40c093a1586706c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-04-13T17:05:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20293#event-268564"
}
```



---

archive/issue_comments_294899.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/numpy-matrix-constructor-3](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/numpy-matrix-constructor-3)** to **[c5cad5d](https://github.com/sagemath/sagetrac-mirror/commit/c5cad5d6321d8755ce456370c6054f5206e64020)**",
    "created_at": "2016-04-13T17:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20293",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20293#issuecomment-294899",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/numpy-matrix-constructor-3](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/numpy-matrix-constructor-3)** to **[c5cad5d](https://github.com/sagemath/sagetrac-mirror/commit/c5cad5d6321d8755ce456370c6054f5206e64020)**
