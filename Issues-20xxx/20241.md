# Issue 20241: Separate Sage-specific components from generic C-interface in PariInstance

archive/issues_020004.json:
```json
{
    "assignees": [],
    "body": "In preparation for #20238, take out of `PariInstance` all components specific to Sage.\n\nCC:  @jdemeyer\n\nBranch/Commit: **[`62f227e`](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Luca De Feo**\n\nComponent: **interfaces**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20241_\n\n",
    "closed_at": "2016-10-21T07:04:31Z",
    "created_at": "2016-03-21T14:34:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Separate Sage-specific components from generic C-interface in PariInstance",
    "type": "issue",
    "updated_at": "2023-01-08T15:48:26Z",
    "url": "https://github.com/sagemath/sage/issues/20241",
    "user": "https://github.com/defeo"
}
```
In preparation for #20238, take out of `PariInstance` all components specific to Sage.

CC:  @jdemeyer

Branch/Commit: **[`62f227e`](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)**

Reviewer: **Jeroen Demeyer**

Author: **Luca De Feo**

Component: **interfaces**

_Issue created by migration from https://trac.sagemath.org/ticket/20241_





---

archive/issue_events_283226.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2016-03-21T14:34:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-283226"
}
```



---

archive/issue_events_283227.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2016-03-21T14:34:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-283227"
}
```



---

archive/issue_events_283228.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2016-03-21T14:34:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-283228"
}
```



---

archive/issue_comments_291275.json:
```json
{
    "body": "Branch: **[u/defeo/trac/u/defeo/pari_instance](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/trac/u/defeo/pari_instance)**",
    "created_at": "2016-03-21T14:34:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291275",
    "user": "https://github.com/defeo"
}
```

Branch: **[u/defeo/trac/u/defeo/pari_instance](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/trac/u/defeo/pari_instance)**



---

archive/issue_comments_291276.json:
```json
{
    "body": "Commit: **[`799f255`](https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8)**",
    "created_at": "2016-03-21T14:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291276",
    "user": "https://github.com/defeo"
}
```

Commit: **[`799f255`](https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8)**



---

archive/issue_comments_291277.json:
```json
{
    "body": "Dependencies: **#20217**",
    "created_at": "2016-03-21T14:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291277",
    "user": "https://github.com/defeo"
}
```

Dependencies: **#20217**



---

archive/issue_comments_291278.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'm pushing a failed attempt at splitting `PariInstance` into a generic `PariInstance` cython type, and a Sage-specific `SagePariInstance`.\n\nThis is problematic because of the global `sage.libs.pari.pari_instance.pari` variable: it is not clear where this variable should go.\n\nSome concrete suggestions: `PariInstance` serves three main purposes:\n\n- As a wrapper around the pari stack,\n- As a collection of conversion methods to and from pari types,\n- As a namespace for a handful of functions, for lack of a better place (e.g. `primes`, `genus2_reduction`, ...)\n\nOf these, only the first one really needs a Cython type. I suggest:\n\n- To make a proper abstraction `PariStack` around the pari stack. This should not be handled as a global variable, but rather as a singleton class (we cannot have more than one pari stack, because of global variables).\n- Move conversion functions to a separate namespace, as #20226 started doing.\n- Have `PariInstance` hold a pointer to a `PariStack`. Have `gen`'s hold a pointer to a `PariInstance`. (Maybe this double wrapping is superfluous?)\n\nI don't know quite well what to do with utility functions such as `primes`. They may stay as methods of `PariInstance`, or maybe go to a different namespace as pure functions (they should take a `PariInstance` or `PariStack` as parameter, then).\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dce67fca49e515ce610539263e1e7a6f26c7bc69\"><code>dce67fc</code></a></td><td><code>Move memory functions to cysignals</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bb8337295ed82c93d1a9c9f7173a4c36f97151d\"><code>4bb8337</code></a></td><td><code>Rename sage_malloc -> sig_malloc and friends</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ab73c1c098478da766a061109a2a248d741e49e\"><code>5ab73c1</code></a></td><td><code>Get rid of factorint_withproof_sage in PARI interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0ed97a0b2a036c3a4677d8e5dbabf6b2a6d54fc\"><code>c0ed97a</code></a></td><td><code>Stop using deprecated PARI factoring features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edc5ce28655f157a13f27d2d94ae2e5d5d731bd6\"><code>edc5ce2</code></a></td><td><code>Merge branch 't/20205/get_rid_of_factorint_withproof_sage_in_pari_interface' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fb408dedb22e4147ee68ae5656e643b4f1df06c\"><code>5fb408d</code></a></td><td><code>Replace pari_catch_sig_on by sig_on</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5c934c5164255e352cee9ddbc780d0759b6e185\"><code>d5c934c</code></a></td><td><code>Deprecate PARI nth_prime and prime_list</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7d2d7df24760cdecf0d6585972d2bf6140c1123\"><code>d7d2d7d</code></a></td><td><code>Remove redundant functions from pari_instance.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/282b1878dd25528debef017d13057b68c05b3b5b\"><code>282b187</code></a></td><td><code>Failed attempt to split PariInstance</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8\"><code>799f255</code></a></td><td><code>Split pxd file too</code></td></tr></table>\n",
    "created_at": "2016-03-21T14:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291278",
    "user": "https://github.com/defeo"
}
```

<div id="comment:2" align="right">comment:2</div>

I'm pushing a failed attempt at splitting `PariInstance` into a generic `PariInstance` cython type, and a Sage-specific `SagePariInstance`.

This is problematic because of the global `sage.libs.pari.pari_instance.pari` variable: it is not clear where this variable should go.

Some concrete suggestions: `PariInstance` serves three main purposes:

- As a wrapper around the pari stack,
- As a collection of conversion methods to and from pari types,
- As a namespace for a handful of functions, for lack of a better place (e.g. `primes`, `genus2_reduction`, ...)

Of these, only the first one really needs a Cython type. I suggest:

- To make a proper abstraction `PariStack` around the pari stack. This should not be handled as a global variable, but rather as a singleton class (we cannot have more than one pari stack, because of global variables).
- Move conversion functions to a separate namespace, as #20226 started doing.
- Have `PariInstance` hold a pointer to a `PariStack`. Have `gen`'s hold a pointer to a `PariInstance`. (Maybe this double wrapping is superfluous?)

I don't know quite well what to do with utility functions such as `primes`. They may stay as methods of `PariInstance`, or maybe go to a different namespace as pure functions (they should take a `PariInstance` or `PariStack` as parameter, then).

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dce67fca49e515ce610539263e1e7a6f26c7bc69"><code>dce67fc</code></a></td><td><code>Move memory functions to cysignals</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bb8337295ed82c93d1a9c9f7173a4c36f97151d"><code>4bb8337</code></a></td><td><code>Rename sage_malloc -> sig_malloc and friends</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ab73c1c098478da766a061109a2a248d741e49e"><code>5ab73c1</code></a></td><td><code>Get rid of factorint_withproof_sage in PARI interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0ed97a0b2a036c3a4677d8e5dbabf6b2a6d54fc"><code>c0ed97a</code></a></td><td><code>Stop using deprecated PARI factoring features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edc5ce28655f157a13f27d2d94ae2e5d5d731bd6"><code>edc5ce2</code></a></td><td><code>Merge branch 't/20205/get_rid_of_factorint_withproof_sage_in_pari_interface' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fb408dedb22e4147ee68ae5656e643b4f1df06c"><code>5fb408d</code></a></td><td><code>Replace pari_catch_sig_on by sig_on</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5c934c5164255e352cee9ddbc780d0759b6e185"><code>d5c934c</code></a></td><td><code>Deprecate PARI nth_prime and prime_list</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7d2d7df24760cdecf0d6585972d2bf6140c1123"><code>d7d2d7d</code></a></td><td><code>Remove redundant functions from pari_instance.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/282b1878dd25528debef017d13057b68c05b3b5b"><code>282b187</code></a></td><td><code>Failed attempt to split PariInstance</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8"><code>799f255</code></a></td><td><code>Split pxd file too</code></td></tr></table>




---

archive/issue_comments_291279.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nRegarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).",
    "created_at": "2016-04-09T05:18:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291279",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:3" align="right">comment:3</div>

Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).



---

archive/issue_comments_291280.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@kedlaya](#comment:3):\n> Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).\n\nGood points. These would take a lengthy deprecation process, and are better handled after a successful separation of the interface (something we're still having a hard time with).\n\nI think the best place for this comment is in #20238, hence I'm copying it there.",
    "created_at": "2016-04-09T13:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291280",
    "user": "https://github.com/defeo"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@kedlaya](#comment:3):
> Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).

Good points. These would take a lengthy deprecation process, and are better handled after a successful separation of the interface (something we're still having a hard time with).

I think the best place for this comment is in #20238, hence I'm copying it there.



---

archive/issue_comments_291281.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n@kedlaya: I don't really understand your comment. This ticket is about the *interface* between Sage and PARI (which is a purely technical non-mathematical thing), not about how which PARI functions are used where.",
    "created_at": "2016-04-11T08:27:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291281",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

@kedlaya: I don't really understand your comment. This ticket is about the *interface* between Sage and PARI (which is a purely technical non-mathematical thing), not about how which PARI functions are used where.



---

archive/issue_comments_291282.json:
```json
{
    "body": "Changed branch from **[u/defeo/trac/u/defeo/pari_instance](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/trac/u/defeo/pari_instance)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**",
    "created_at": "2016-08-08T21:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291282",
    "user": "https://github.com/defeo"
}
```

Changed branch from **[u/defeo/trac/u/defeo/pari_instance](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/trac/u/defeo/pari_instance)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**



---

archive/issue_comments_291283.json:
```json
{
    "body": "Changed commit from **[`799f255`](https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8)** to **[`7ad5c61`](https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2)**",
    "created_at": "2016-08-08T21:47:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291283",
    "user": "https://github.com/defeo"
}
```

Changed commit from **[`799f255`](https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8)** to **[`7ad5c61`](https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2)**



---

archive/issue_comments_291284.json:
```json
{
    "body": "Changed dependencies from **#20217** to **#20217, #21158**",
    "created_at": "2016-08-08T21:47:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291284",
    "user": "https://github.com/defeo"
}
```

Changed dependencies from **#20217** to **#20217, #21158**



---

archive/issue_comments_291285.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12d9d3268f1eaeb8308f77666b56c9efb0549aec\"><code>12d9d32</code></a></td><td><code>Implement unary operations in interfaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aae48bd951f3dee458fafb9de558e0b174296142\"><code>aae48bd</code></a></td><td><code>Merge branch 'ticket/21152' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a44b082f08c742fbe564c5afdd2f7309fabbb52\"><code>0a44b08</code></a></td><td><code>Remove one doctest for __mul__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54b0fcdaf2fd69cd64978da526af6774b57a59a8\"><code>54b0fcd</code></a></td><td><code>Various minor fixes for the coercion model</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2405dde75db35323a1e33890e999388203a81de7\"><code>2405dde</code></a></td><td><code>Merge commit '0a44b082f08c742fbe564c5afdd2f7309fabbb52'; commit '54b0fcdaf2fd69cd64978da526af6774b57a59a8' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1d2ba46574273ec4d358e654ed195a82b81a654\"><code>e1d2ba4</code></a></td><td><code>Move arithmetic using coercion model to Element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3ea04f051d8a06788671e0678c903c8aae186fa\"><code>b3ea04f</code></a></td><td><code>Try reversed operation in richcmp if coercion fails</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/efc4fd0cbf32e078534020d6c3878bd015d5d07f\"><code>efc4fd0</code></a></td><td><code>Merge branch 't/21163/in_richcmp__fall_back_to_reversed_operation_if_coercion_fails' into t/21158/ticket/21158</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71f31a494aa21db6651797f582dd4aab2a908f40\"><code>71f31a4</code></a></td><td><code>Decouple PARI from the Sage coercion model</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2\"><code>7ad5c61</code></a></td><td><code>Step 1: make the unique PariInstance private</code></td></tr></table>\n",
    "created_at": "2016-08-08T21:47:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291285",
    "user": "https://github.com/defeo"
}
```

<div id="comment:7" align="right">comment:7</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12d9d3268f1eaeb8308f77666b56c9efb0549aec"><code>12d9d32</code></a></td><td><code>Implement unary operations in interfaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aae48bd951f3dee458fafb9de558e0b174296142"><code>aae48bd</code></a></td><td><code>Merge branch 'ticket/21152' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a44b082f08c742fbe564c5afdd2f7309fabbb52"><code>0a44b08</code></a></td><td><code>Remove one doctest for __mul__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54b0fcdaf2fd69cd64978da526af6774b57a59a8"><code>54b0fcd</code></a></td><td><code>Various minor fixes for the coercion model</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2405dde75db35323a1e33890e999388203a81de7"><code>2405dde</code></a></td><td><code>Merge commit '0a44b082f08c742fbe564c5afdd2f7309fabbb52'; commit '54b0fcdaf2fd69cd64978da526af6774b57a59a8' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1d2ba46574273ec4d358e654ed195a82b81a654"><code>e1d2ba4</code></a></td><td><code>Move arithmetic using coercion model to Element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3ea04f051d8a06788671e0678c903c8aae186fa"><code>b3ea04f</code></a></td><td><code>Try reversed operation in richcmp if coercion fails</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/efc4fd0cbf32e078534020d6c3878bd015d5d07f"><code>efc4fd0</code></a></td><td><code>Merge branch 't/21163/in_richcmp__fall_back_to_reversed_operation_if_coercion_fails' into t/21158/ticket/21158</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71f31a494aa21db6651797f582dd4aab2a908f40"><code>71f31a4</code></a></td><td><code>Decouple PARI from the Sage coercion model</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2"><code>7ad5c61</code></a></td><td><code>Step 1: make the unique PariInstance private</code></td></tr></table>




---

archive/issue_events_283229.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-09T07:51:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-283229"
}
```



---

archive/issue_events_283230.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-09T07:51:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-283230"
}
```



---

archive/issue_events_283231.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-09T07:51:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-283231"
}
```



---

archive/issue_comments_291286.json:
```json
{
    "body": "Changed dependencies from **#20217, #21158** to **#21158**",
    "created_at": "2016-08-09T07:51:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291286",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#20217, #21158** to **#21158**



---

archive/issue_comments_291287.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI don't really know where you are going with this branch, but I thought that we wanted to minimize the use of the global `pari` variable?\n\nFor example, `closure.pyx` should not need it, we just need to make `new_gen` and friends functions instead of methods of `PariInstance`.",
    "created_at": "2016-08-09T07:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291287",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

I don't really know where you are going with this branch, but I thought that we wanted to minimize the use of the global `pari` variable?

For example, `closure.pyx` should not need it, we just need to make `new_gen` and friends functions instead of methods of `PariInstance`.



---

archive/issue_comments_291288.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nYup. Second step. I needed to know who was using it anyway. Any module importing _pari_instance is doing bad, and I'm fixing it. I just pushed this to get help from patchbot.",
    "created_at": "2016-08-09T08:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291288",
    "user": "https://github.com/defeo"
}
```

<div id="comment:10" align="right">comment:10</div>

Yup. Second step. I needed to know who was using it anyway. Any module importing _pari_instance is doing bad, and I'm fixing it. I just pushed this to get help from patchbot.



---

archive/issue_comments_291289.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91c436752ba82d512efdf67e2890d5ecbe0b7234\"><code>91c4367</code></a></td><td><code>Remove useless \"return False\" in SR._coerce_map_from_()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c1adfac68890ce15f8426d48ef69958cdbf240c\"><code>2c1adfa</code></a></td><td><code>Merge branch 't/21158/ticket/21158' into t/20241/ticket/20241</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130\"><code>6a4d9bd</code></a></td><td><code>Taking new_gen and friends out of PariInstance. Does not compile.</code></td></tr></table>\n",
    "created_at": "2016-08-19T17:46:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291289",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91c436752ba82d512efdf67e2890d5ecbe0b7234"><code>91c4367</code></a></td><td><code>Remove useless "return False" in SR._coerce_map_from_()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c1adfac68890ce15f8426d48ef69958cdbf240c"><code>2c1adfa</code></a></td><td><code>Merge branch 't/21158/ticket/21158' into t/20241/ticket/20241</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130"><code>6a4d9bd</code></a></td><td><code>Taking new_gen and friends out of PariInstance. Does not compile.</code></td></tr></table>




---

archive/issue_comments_291290.json:
```json
{
    "body": "Changed commit from **[`7ad5c61`](https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2)** to **[`6a4d9bd`](https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130)**",
    "created_at": "2016-08-19T17:46:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291290",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7ad5c61`](https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2)** to **[`6a4d9bd`](https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130)**



---

archive/issue_comments_291291.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHi @jdemeyer. I'm having trouble compiling this code. gcc fails while compiling `complex_double.pyx`, but I cannot figure our the problem. Also `matrix_integer_dense.pyx` gives fishy warnings.\n\nChanging slightly L94 in `complex_double.pyx`, i.e., using `cimport .. as` or similar, it gets even worse: compilation freezes midway, I have to Ctrl-C it.\n\nI'm giving up for today. Do you have any idea?",
    "created_at": "2016-08-19T17:52:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291291",
    "user": "https://github.com/defeo"
}
```

<div id="comment:12" align="right">comment:12</div>

Hi @jdemeyer. I'm having trouble compiling this code. gcc fails while compiling `complex_double.pyx`, but I cannot figure our the problem. Also `matrix_integer_dense.pyx` gives fishy warnings.

Changing slightly L94 in `complex_double.pyx`, i.e., using `cimport .. as` or similar, it gets even worse: compilation freezes midway, I have to Ctrl-C it.

I'm giving up for today. Do you have any idea?



---

archive/issue_comments_291292.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nFor starters, you cannot *declare* a function to be `cdef inline` in a `.pxd` file unless you put the full function body also in the `.pxd` file. So this isn't correct:\n\n```\ncdef inline gen new_gen(GEN x)\n```\n\nYou have to understand how the compiler works: the compiler for a different module only sees the `.pxd` file, so it cannot possibly inline the function `new_gen` since it doesn't know what `new_gen` does.\n\nIt's a bit of a mystery why Cython still accepts this code. GCC gives a error (but sometimes just a warning, maybe it depends on the language) like\n\n```\n[sagelib-7.3.rc0] build/cythonized/sage/matrix/matrix_integer_dense.cpp:4828:72: error: \u2018__pyx_f_4sage_4libs_4pari_5stack_clear_stack\u2019 declared as an \u2018inline\u2019 variable\n[sagelib-7.3.rc0]  static CYTHON_INLINE void (*__pyx_f_4sage_4libs_4pari_5stack_clear_stack)(void); /*proto*/\n```",
    "created_at": "2016-08-19T19:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291292",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

For starters, you cannot *declare* a function to be `cdef inline` in a `.pxd` file unless you put the full function body also in the `.pxd` file. So this isn't correct:

```
cdef inline gen new_gen(GEN x)
```

You have to understand how the compiler works: the compiler for a different module only sees the `.pxd` file, so it cannot possibly inline the function `new_gen` since it doesn't know what `new_gen` does.

It's a bit of a mystery why Cython still accepts this code. GCC gives a error (but sometimes just a warning, maybe it depends on the language) like

```
[sagelib-7.3.rc0] build/cythonized/sage/matrix/matrix_integer_dense.cpp:4828:72: error: ‘__pyx_f_4sage_4libs_4pari_5stack_clear_stack’ declared as an ‘inline’ variable
[sagelib-7.3.rc0]  static CYTHON_INLINE void (*__pyx_f_4sage_4libs_4pari_5stack_clear_stack)(void); /*proto*/
```



---

archive/issue_comments_291293.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nNote that it is perfectly legal to have an inline function in a `.pyx` file and still export it in the `.pxd` file. Just don't put the `inline` in the `.pxd`. This way, the function can be inlined in the `.pyx` file (like the call from `new_gen` to `new_gen_noclear`) but other modules will do a non-inline function call.",
    "created_at": "2016-08-19T19:31:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291293",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Note that it is perfectly legal to have an inline function in a `.pyx` file and still export it in the `.pxd` file. Just don't put the `inline` in the `.pxd`. This way, the function can be inlined in the `.pyx` file (like the call from `new_gen` to `new_gen_noclear`) but other modules will do a non-inline function call.



---

archive/issue_comments_291294.json:
```json
{
    "body": "Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**",
    "created_at": "2016-08-19T19:31:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291294",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**



---

archive/issue_comments_291295.json:
```json
{
    "body": "Changed commit from **[`6a4d9bd`](https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130)** to **[`3740c06`](https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60)**",
    "created_at": "2016-08-19T19:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291295",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`6a4d9bd`](https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130)** to **[`3740c06`](https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60)**



---

archive/issue_comments_291296.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60\"><code>3740c06</code></a></td><td><code>Fix inlining in sage.libs.pari.stack</code></td></tr></table>\n",
    "created_at": "2016-08-19T19:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291296",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60"><code>3740c06</code></a></td><td><code>Fix inlining in sage.libs.pari.stack</code></td></tr></table>




---

archive/issue_comments_291297.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSage at least compiles now. It doesn't actually start, but I'll leave it to you to continue working on this.",
    "created_at": "2016-08-19T19:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291297",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Sage at least compiles now. It doesn't actually start, but I'll leave it to you to continue working on this.



---

archive/issue_comments_291298.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nMakes perfect sense. What I don't get is why you can put `cdef inline` in METHOD definitions in a `.pxd`. I just cut-pasted that line from the definition of `PariInstance`, and it had been actually compiling, booting, and passing tests (hadn't tried many tests, though) for quite some time before this... that's why I hate Cython!\n\nAnyway, thanks for your help. I'll keep chasing the breakages tomorrow.",
    "created_at": "2016-08-19T20:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291298",
    "user": "https://github.com/defeo"
}
```

<div id="comment:18" align="right">comment:18</div>

Makes perfect sense. What I don't get is why you can put `cdef inline` in METHOD definitions in a `.pxd`. I just cut-pasted that line from the definition of `PariInstance`, and it had been actually compiling, booting, and passing tests (hadn't tried many tests, though) for quite some time before this... that's why I hate Cython!

Anyway, thanks for your help. I'll keep chasing the breakages tomorrow.



---

archive/issue_comments_291299.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**",
    "created_at": "2016-08-20T11:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291299",
    "user": "https://github.com/defeo"
}
```

Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**



---

archive/issue_comments_291300.json:
```json
{
    "body": "Changed commit from **[`3740c06`](https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60)** to **[`341b49b`](https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4)**",
    "created_at": "2016-08-20T11:18:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291300",
    "user": "https://github.com/defeo"
}
```

Changed commit from **[`3740c06`](https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60)** to **[`341b49b`](https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4)**



---

archive/issue_comments_291301.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOk, fixed the startup bug, and tests (mostly) pass. Next step is to move all those conversion functions out of the way.\n\nI'm scratching my head about `allocatemem` and companions, though. `allocatemem` is a gp function, but it's tied to `gen` by `auto_gen.pxi`, so that you can do\n\n```\nsage: size = pari('10^8')\nsage: size.allocatemem()\n```\n\nwhich feels very bad. Wouldn't it make sense to blacklist this one?\n\nOn the other hand there is a manually coded `allocatemem` method in `PariInstance` which gives a much more sensible\n\n```\nsage: pari.allocatemem(10^8)\n```\n\nand also has an additional `silent` parameter to behave more like gp. There are also methods `stacksize` and `stacksizemax` to read the stack sizes. It seems more logical to put these three functions in `stack.pyx`, but if we want the user to call them from the command line, it is better to leave methods in `PariInstance`.\n\nQuestion: given the current handling of PARI's stack, do we still want the user to easily call these functions?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4\"><code>341b49b</code></a></td><td><code>Step 2: Move new_gen and related functions out of PariIinstance.</code></td></tr></table>\n",
    "created_at": "2016-08-20T11:18:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291301",
    "user": "https://github.com/defeo"
}
```

<div id="comment:20" align="right">comment:20</div>

Ok, fixed the startup bug, and tests (mostly) pass. Next step is to move all those conversion functions out of the way.

I'm scratching my head about `allocatemem` and companions, though. `allocatemem` is a gp function, but it's tied to `gen` by `auto_gen.pxi`, so that you can do

```
sage: size = pari('10^8')
sage: size.allocatemem()
```

which feels very bad. Wouldn't it make sense to blacklist this one?

On the other hand there is a manually coded `allocatemem` method in `PariInstance` which gives a much more sensible

```
sage: pari.allocatemem(10^8)
```

and also has an additional `silent` parameter to behave more like gp. There are also methods `stacksize` and `stacksizemax` to read the stack sizes. It seems more logical to put these three functions in `stack.pyx`, but if we want the user to call them from the command line, it is better to leave methods in `PariInstance`.

Question: given the current handling of PARI's stack, do we still want the user to easily call these functions?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4"><code>341b49b</code></a></td><td><code>Step 2: Move new_gen and related functions out of PariIinstance.</code></td></tr></table>




---

archive/issue_comments_291302.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@defeo](#comment:20):\n> Wouldn't it make sense to blacklist this one?\n\nSure.",
    "created_at": "2016-08-20T19:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291302",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@defeo](#comment:20):
> Wouldn't it make sense to blacklist this one?

Sure.



---

archive/issue_comments_291303.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@defeo](#comment:20):\n> Question: given the current handling of PARI's stack, do we still want the user to easily call these functions?\n\nI don't see the problem. They work perfectly fine and make sense. Unless they are problematic for the implementation, I would just keep them as they are. Another reason is that we should focus on finishing this deliverable. We can always clean up such details afterwards.",
    "created_at": "2016-08-20T19:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291303",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@defeo](#comment:20):
> Question: given the current handling of PARI's stack, do we still want the user to easily call these functions?

I don't see the problem. They work perfectly fine and make sense. Unless they are problematic for the implementation, I would just keep them as they are. Another reason is that we should focus on finishing this deliverable. We can always clean up such details afterwards.



---

archive/issue_comments_291304.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/decf7ac83ed9c21bc61449340487c75ef7e8f6c0\"><code>decf7ac</code></a></td><td><code>Fixed doctest in auto generation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2\"><code>a57e6c3</code></a></td><td><code>Reverted modifications to Python stack management methods</code></td></tr></table>\n",
    "created_at": "2016-08-24T14:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291304",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/decf7ac83ed9c21bc61449340487c75ef7e8f6c0"><code>decf7ac</code></a></td><td><code>Fixed doctest in auto generation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2"><code>a57e6c3</code></a></td><td><code>Reverted modifications to Python stack management methods</code></td></tr></table>




---

archive/issue_comments_291305.json:
```json
{
    "body": "Changed commit from **[`341b49b`](https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4)** to **[`a57e6c3`](https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2)**",
    "created_at": "2016-08-24T14:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291305",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`341b49b`](https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4)** to **[`a57e6c3`](https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2)**



---

archive/issue_comments_291306.json:
```json
{
    "body": "Changed commit from **[`a57e6c3`](https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2)** to **[`d23169a`](https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c)**",
    "created_at": "2016-08-25T00:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291306",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a57e6c3`](https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2)** to **[`d23169a`](https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c)**



---

archive/issue_comments_291307.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c\"><code>d23169a</code></a></td><td><code>Moved Sage-specific Pari conversion functions to separate file.</code></td></tr></table>\n",
    "created_at": "2016-08-25T00:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291307",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c"><code>d23169a</code></a></td><td><code>Moved Sage-specific Pari conversion functions to separate file.</code></td></tr></table>




---

archive/issue_comments_291308.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nOk, so I managed to move all Sage-specific conversion functions from `PariInstance` to a separate file. We're getting closer to the goal: the only imports left in `pari_instance.p??` from the sage library are\n\n```\nfrom sage.ext.memory import init_memory_functions\nfrom sage.misc.superseded import deprecation, deprecated_function_alias\n```\n\nThere's a couple of conversion functions left in `PariInstance` which are not specific to Sage:\n\n```\ncdef gen new_gen_from_int(self, int value)\ncdef gen new_t_POL_from_int_star(self, int *vals, int length, long varnum)\ncdef gen double_to_gen_c(self, double)\ncdef GEN double_to_GEN(self, double)\n```\n\nplus a python method `PariInstance.double_to_gen`. Should we put these in `convert.pyx`, or maybe another file?\n\nNote that `new_gen_from_int` is only called once in `padic_capped_relative_element.pyx`, and just to create 0.\n\nIt is also not very clear to me what the purpose of `double_to_gen` and `double_to_gen_c` is. `double_to_gen_c` is called only in line 1585 of `real_double.pyx`, and that's in a `def`ed function. Is this really faster than calling `double_to_gen`?\n\nAnd what's the meaning of this, anyway:\n\n```\nsage: pari(0.1) == pari.double_to_gen(0.1)\nFalse\nsage: pari(0.1) == pari(0.1)\nTrue\nsage: pari.double_to_gen(0.1) == pari.double_to_gen(0.1)\nTrue\nsage: pari(0.1) - pari.double_to_gen(0.1)\n-5.54975987041018 E-18\nsage: pari(0.1) - pari(0.1)\n0.E-20\nsage: pari.double_to_gen(0.1) - pari.double_to_gen(0.1)\n0.E-20\n```\n\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c\"><code>d23169a</code></a></td><td><code>Moved Sage-specific Pari conversion functions to separate file.</code></td></tr></table>\n",
    "created_at": "2016-08-25T01:08:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291308",
    "user": "https://github.com/defeo"
}
```

<div id="comment:25" align="right">comment:25</div>

Ok, so I managed to move all Sage-specific conversion functions from `PariInstance` to a separate file. We're getting closer to the goal: the only imports left in `pari_instance.p??` from the sage library are

```
from sage.ext.memory import init_memory_functions
from sage.misc.superseded import deprecation, deprecated_function_alias
```

There's a couple of conversion functions left in `PariInstance` which are not specific to Sage:

```
cdef gen new_gen_from_int(self, int value)
cdef gen new_t_POL_from_int_star(self, int *vals, int length, long varnum)
cdef gen double_to_gen_c(self, double)
cdef GEN double_to_GEN(self, double)
```

plus a python method `PariInstance.double_to_gen`. Should we put these in `convert.pyx`, or maybe another file?

Note that `new_gen_from_int` is only called once in `padic_capped_relative_element.pyx`, and just to create 0.

It is also not very clear to me what the purpose of `double_to_gen` and `double_to_gen_c` is. `double_to_gen_c` is called only in line 1585 of `real_double.pyx`, and that's in a `def`ed function. Is this really faster than calling `double_to_gen`?

And what's the meaning of this, anyway:

```
sage: pari(0.1) == pari.double_to_gen(0.1)
False
sage: pari(0.1) == pari(0.1)
True
sage: pari.double_to_gen(0.1) == pari.double_to_gen(0.1)
True
sage: pari(0.1) - pari.double_to_gen(0.1)
-5.54975987041018 E-18
sage: pari(0.1) - pari(0.1)
0.E-20
sage: pari.double_to_gen(0.1) - pari.double_to_gen(0.1)
0.E-20
```


---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c"><code>d23169a</code></a></td><td><code>Moved Sage-specific Pari conversion functions to separate file.</code></td></tr></table>




---

archive/issue_comments_291309.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@defeo](#comment:25):\n> Ok, so I managed to move all Sage-specific conversion functions from `PariInstance` to a separate file. We're getting closer to the goal: the only imports left in `pari_instance.p??` from the sage library are\n> \n> ```\n> from sage.ext.memory import init_memory_functions\n> from sage.misc.superseded import deprecation, deprecated_function_alias\n> ```\n> \n> There's a couple of conversion functions left in `PariInstance` which are not specific to Sage:\n> \n> ```\n> cdef gen new_gen_from_int(self, int value)\n> cdef gen new_t_POL_from_int_star(self, int *vals, int length, long varnum)\n> cdef gen double_to_gen_c(self, double)\n> cdef GEN double_to_GEN(self, double)\n> ```\n> \n> plus a python method `PariInstance.double_to_gen`. Should we put these in `convert.pyx`\n\nFine for me.\n\n> Note that `new_gen_from_int` is only called once in `padic_capped_relative_element.pyx`, and just to create 0.\n> \n> It is also not very clear to me what the purpose of `double_to_gen` and `double_to_gen_c` is.\n\n`double_to_gen` seems unused and untested. I do not mind removing it.\n\n> `double_to_gen_c` is called only in line 1585 of `real_double.pyx`, and that's in a `def`ed function. Is this really faster than calling `double_to_gen`?\n\nObviously yes. Calling a `cdef` function is much faster than calling a `def` function. It does not matter where it is called from. But I would suggest renaming `double_to_gen_c` to `double_to_gen`.",
    "created_at": "2016-08-27T18:54:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291309",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@defeo](#comment:25):
> Ok, so I managed to move all Sage-specific conversion functions from `PariInstance` to a separate file. We're getting closer to the goal: the only imports left in `pari_instance.p??` from the sage library are
> 
> ```
> from sage.ext.memory import init_memory_functions
> from sage.misc.superseded import deprecation, deprecated_function_alias
> ```
> 
> There's a couple of conversion functions left in `PariInstance` which are not specific to Sage:
> 
> ```
> cdef gen new_gen_from_int(self, int value)
> cdef gen new_t_POL_from_int_star(self, int *vals, int length, long varnum)
> cdef gen double_to_gen_c(self, double)
> cdef GEN double_to_GEN(self, double)
> ```
> 
> plus a python method `PariInstance.double_to_gen`. Should we put these in `convert.pyx`

Fine for me.

> Note that `new_gen_from_int` is only called once in `padic_capped_relative_element.pyx`, and just to create 0.
> 
> It is also not very clear to me what the purpose of `double_to_gen` and `double_to_gen_c` is.

`double_to_gen` seems unused and untested. I do not mind removing it.

> `double_to_gen_c` is called only in line 1585 of `real_double.pyx`, and that's in a `def`ed function. Is this really faster than calling `double_to_gen`?

Obviously yes. Calling a `cdef` function is much faster than calling a `def` function. It does not matter where it is called from. But I would suggest renaming `double_to_gen_c` to `double_to_gen`.



---

archive/issue_comments_291310.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@defeo](#comment:25):\n> \n> ```\n> sage: pari(0.1) == pari.double_to_gen(0.1)\n> False\n> ```\n\nThat's a \"feature\" because of `RealLiteral`:\n\n```\nsage: x = RR(0.1); y = RR(float(0.1))\nsage: x == y\nTrue\nsage: parent(x) is parent(y)\nTrue\nsage: RR64 = RealField(64)\nsage: RR64(x) == RR64(y)\nFalse\nsage: pari(x) == pari(y)\nFalse\n```",
    "created_at": "2016-08-27T19:06:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291310",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@defeo](#comment:25):
> 
> ```
> sage: pari(0.1) == pari.double_to_gen(0.1)
> False
> ```

That's a "feature" because of `RealLiteral`:

```
sage: x = RR(0.1); y = RR(float(0.1))
sage: x == y
True
sage: parent(x) is parent(y)
True
sage: RR64 = RealField(64)
sage: RR64(x) == RR64(y)
False
sage: pari(x) == pari(y)
False
```



---

archive/issue_comments_291311.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246\"><code>c7b5d6d</code></a></td><td><code>Moved more conversion functions to convert.pyx</code></td></tr></table>\n",
    "created_at": "2016-09-04T01:04:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291311",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246"><code>c7b5d6d</code></a></td><td><code>Moved more conversion functions to convert.pyx</code></td></tr></table>




---

archive/issue_comments_291312.json:
```json
{
    "body": "Changed commit from **[`d23169a`](https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c)** to **[`c7b5d6d`](https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246)**",
    "created_at": "2016-09-04T01:04:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291312",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d23169a`](https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c)** to **[`c7b5d6d`](https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246)**



---

archive/issue_comments_291313.json:
```json
{
    "body": "Changed commit from **[`c7b5d6d`](https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246)** to **[`a8b8b7c`](https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2)**",
    "created_at": "2016-09-04T01:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291313",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c7b5d6d`](https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246)** to **[`a8b8b7c`](https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2)**



---

archive/issue_comments_291314.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2\"><code>a8b8b7c</code></a></td><td><code>Fixed minor bugs, changed behaviour of `pari(complex(x,y))`</code></td></tr></table>\n",
    "created_at": "2016-09-04T01:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291314",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2"><code>a8b8b7c</code></a></td><td><code>Fixed minor bugs, changed behaviour of `pari(complex(x,y))`</code></td></tr></table>




---

archive/issue_comments_291315.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nYou might consider a separate ticket for moving the conversion functions.",
    "created_at": "2016-09-04T10:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291315",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

You might consider a separate ticket for moving the conversion functions.



---

archive/issue_comments_291316.json:
```json
{
    "body": "Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**",
    "created_at": "2016-09-05T15:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291316",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**



---

archive/issue_comments_291317.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nWhy did you remove `pari.stacksize()` and similar? I would keep them as methods of `pari`.",
    "created_at": "2016-09-05T15:24:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291317",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Why did you remove `pari.stacksize()` and similar? I would keep them as methods of `pari`.



---

archive/issue_comments_291318.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**",
    "created_at": "2016-09-05T15:24:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291318",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**



---

archive/issue_comments_291319.json:
```json
{
    "body": "Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**",
    "created_at": "2016-09-05T15:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291319",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**



---

archive/issue_comments_291320.json:
```json
{
    "body": "Changed commit from **[`a8b8b7c`](https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2)** to **[`eaa4be4`](https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6)**",
    "created_at": "2016-09-05T15:30:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291320",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`a8b8b7c`](https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2)** to **[`eaa4be4`](https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6)**



---

archive/issue_comments_291321.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI don't really see the point of this new `init()` function. What's wrong with using the `__init__` method for this?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6\"><code>eaa4be4</code></a></td><td><code>Merge tag '7.4.beta3' into t/20241/ticket/20241</code></td></tr></table>\n",
    "created_at": "2016-09-05T15:30:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291321",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">comment:34</div>

I don't really see the point of this new `init()` function. What's wrong with using the `__init__` method for this?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6"><code>eaa4be4</code></a></td><td><code>Merge tag '7.4.beta3' into t/20241/ticket/20241</code></td></tr></table>




---

archive/issue_comments_291322.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**",
    "created_at": "2016-09-06T16:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291322",
    "user": "https://github.com/defeo"
}
```

Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**



---

archive/issue_comments_291323.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nAgreed to revert to a normal constructor, no `init()` factory method.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66f7ca6de9bdcaaafe099d78a7981ce8f596fddb\"><code>66f7ca6</code></a></td><td><code>Updated docstrings and copyright headers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a252743b6dff88a93ba3bba8259efdf3149dce6a\"><code>a252743</code></a></td><td><code>Removed reduntant new_gen_from_int function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d28213581cbcd1793a6717f426acf7680d57c179\"><code>d282135</code></a></td><td><code>Reverted to constructor for PariInstance, no factory method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7852f1cf1e190db6da1bfe8b9ee1e0f76953f7b2\"><code>7852f1c</code></a></td><td><code>Cosmetic change</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2\"><code>69adf8c</code></a></td><td><code>Fixed docstring for deprecated method</code></td></tr></table>\n",
    "created_at": "2016-09-06T16:36:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291323",
    "user": "https://github.com/defeo"
}
```

<div id="comment:36" align="right">comment:36</div>

Agreed to revert to a normal constructor, no `init()` factory method.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66f7ca6de9bdcaaafe099d78a7981ce8f596fddb"><code>66f7ca6</code></a></td><td><code>Updated docstrings and copyright headers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a252743b6dff88a93ba3bba8259efdf3149dce6a"><code>a252743</code></a></td><td><code>Removed reduntant new_gen_from_int function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d28213581cbcd1793a6717f426acf7680d57c179"><code>d282135</code></a></td><td><code>Reverted to constructor for PariInstance, no factory method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7852f1cf1e190db6da1bfe8b9ee1e0f76953f7b2"><code>7852f1c</code></a></td><td><code>Cosmetic change</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2"><code>69adf8c</code></a></td><td><code>Fixed docstring for deprecated method</code></td></tr></table>




---

archive/issue_comments_291324.json:
```json
{
    "body": "Changed commit from **[`eaa4be4`](https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6)** to **[`69adf8c`](https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2)**",
    "created_at": "2016-09-06T16:36:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291324",
    "user": "https://github.com/defeo"
}
```

Changed commit from **[`eaa4be4`](https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6)** to **[`69adf8c`](https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2)**



---

archive/issue_events_283232.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2016-09-06T16:36:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-283232"
}
```



---

archive/issue_comments_291325.json:
```json
{
    "body": "Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**",
    "created_at": "2016-09-06T17:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291325",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**



---

archive/issue_comments_291326.json:
```json
{
    "body": "Changed commit from **[`69adf8c`](https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2)** to **[`3151ec4`](https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f)**",
    "created_at": "2016-09-06T17:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291326",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`69adf8c`](https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2)** to **[`3151ec4`](https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f)**



---

archive/issue_comments_291327.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bfd42ab7821cb8d9796b3b0b78bc7b80a58b629\"><code>7bfd42a</code></a></td><td><code>Merge tag '7.4.beta2' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/343131a9951dc842c462809b9366b13416382dfc\"><code>343131a</code></a></td><td><code>Fix doctest for Trac #20767</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a501048a8480fd66300c37ff614969469509d189\"><code>a501048</code></a></td><td><code>Move category attribute lookup to CategoryObject.getattr_from_category()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fabb7a5dc50518946d1913488bf4a0444730c0f\"><code>0fabb7a</code></a></td><td><code>Optimize CategoryObject.getattr_from_category()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74041f30d8de4c15055345f14340a4f443236ffa\"><code>74041f3</code></a></td><td><code>Mark broken testsuites as # known bug</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83cca0fe367c5757f9c590fd157a0ad8a2825315\"><code>83cca0f</code></a></td><td><code>Merge commit '343131a9951dc842c462809b9366b13416382dfc'; commit '91c436752ba82d512efdf67e2890d5ecbe0b7234'; commit '74041f30d8de4c15055345f14340a4f443236ffa' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f\"><code>3151ec4</code></a></td><td><code>Separate Sage-specific components from generic C-interface in PariInstance</code></td></tr></table>\n",
    "created_at": "2016-09-06T17:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291327",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bfd42ab7821cb8d9796b3b0b78bc7b80a58b629"><code>7bfd42a</code></a></td><td><code>Merge tag '7.4.beta2' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/343131a9951dc842c462809b9366b13416382dfc"><code>343131a</code></a></td><td><code>Fix doctest for Trac #20767</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a501048a8480fd66300c37ff614969469509d189"><code>a501048</code></a></td><td><code>Move category attribute lookup to CategoryObject.getattr_from_category()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fabb7a5dc50518946d1913488bf4a0444730c0f"><code>0fabb7a</code></a></td><td><code>Optimize CategoryObject.getattr_from_category()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74041f30d8de4c15055345f14340a4f443236ffa"><code>74041f3</code></a></td><td><code>Mark broken testsuites as # known bug</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83cca0fe367c5757f9c590fd157a0ad8a2825315"><code>83cca0f</code></a></td><td><code>Merge commit '343131a9951dc842c462809b9366b13416382dfc'; commit '91c436752ba82d512efdf67e2890d5ecbe0b7234'; commit '74041f30d8de4c15055345f14340a4f443236ffa' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f"><code>3151ec4</code></a></td><td><code>Separate Sage-specific components from generic C-interface in PariInstance</code></td></tr></table>




---

archive/issue_comments_291328.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5\"><code>f35e562</code></a></td><td><code>Separate Sage-specific components from generic C-interface in PariInstance</code></td></tr></table>\n",
    "created_at": "2016-09-06T17:35:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291328",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5"><code>f35e562</code></a></td><td><code>Separate Sage-specific components from generic C-interface in PariInstance</code></td></tr></table>




---

archive/issue_comments_291329.json:
```json
{
    "body": "Changed commit from **[`3151ec4`](https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f)** to **[`f35e562`](https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5)**",
    "created_at": "2016-09-06T17:35:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291329",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3151ec4`](https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f)** to **[`f35e562`](https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5)**



---

archive/issue_comments_291330.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899\"><code>e363e4c</code></a></td><td><code>Simplify module_list</code></td></tr></table>\n",
    "created_at": "2016-09-06T17:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291330",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899"><code>e363e4c</code></a></td><td><code>Simplify module_list</code></td></tr></table>




---

archive/issue_comments_291331.json:
```json
{
    "body": "Changed commit from **[`f35e562`](https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5)** to **[`e363e4c`](https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899)**",
    "created_at": "2016-09-06T17:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291331",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f35e562`](https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5)** to **[`e363e4c`](https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899)**



---

archive/issue_comments_291332.json:
```json
{
    "body": "Changed commit from **[`e363e4c`](https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899)** to **[`968519c`](https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515)**",
    "created_at": "2016-09-06T21:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291332",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e363e4c`](https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899)** to **[`968519c`](https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515)**



---

archive/issue_comments_291333.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515\"><code>968519c</code></a></td><td><code>Cleanup imports; add `__future__` statements</code></td></tr></table>\n",
    "created_at": "2016-09-06T21:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291333",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515"><code>968519c</code></a></td><td><code>Cleanup imports; add `__future__` statements</code></td></tr></table>




---

archive/issue_comments_291334.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**",
    "created_at": "2016-09-21T14:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291334",
    "user": "https://github.com/defeo"
}
```

Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**



---

archive/issue_comments_291335.json:
```json
{
    "body": "Changed commit from **[`968519c`](https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515)** to **[`e88d56c`](https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787)**",
    "created_at": "2016-09-21T15:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291335",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`968519c`](https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515)** to **[`e88d56c`](https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787)**



---

archive/issue_comments_291336.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787\"><code>e88d56c</code></a></td><td><code>Fixed broken doctest in auto-generationy</code></td></tr></table>\n",
    "created_at": "2016-09-21T15:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291336",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787"><code>e88d56c</code></a></td><td><code>Fixed broken doctest in auto-generationy</code></td></tr></table>




---

archive/issue_comments_291337.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nJust a reminder: I plan to review this when all dependencies have been merged. Unfortunately, this is currently blocked by #21441.",
    "created_at": "2016-09-21T15:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291337",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:44" align="right">comment:44</div>

Just a reminder: I plan to review this when all dependencies have been merged. Unfortunately, this is currently blocked by #21441.



---

archive/issue_comments_291338.json:
```json
{
    "body": "Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**",
    "created_at": "2016-10-10T08:28:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291338",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**



---

archive/issue_comments_291339.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nMerged latest develop.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d\"><code>57e1cba</code></a></td><td><code>Merge tag '7.4.rc0' into t/20241/ticket/20241</code></td></tr></table>\n",
    "created_at": "2016-10-10T08:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291339",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:46" align="right">comment:46</div>

Merged latest develop.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d"><code>57e1cba</code></a></td><td><code>Merge tag '7.4.rc0' into t/20241/ticket/20241</code></td></tr></table>




---

archive/issue_comments_291340.json:
```json
{
    "body": "Changed commit from **[`e88d56c`](https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787)** to **[`57e1cba`](https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d)**",
    "created_at": "2016-10-10T08:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291340",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`e88d56c`](https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787)** to **[`57e1cba`](https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d)**



---

archive/issue_comments_291341.json:
```json
{
    "body": "Changed dependencies from **#21158** to none",
    "created_at": "2016-10-10T08:35:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291341",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#21158** to none



---

archive/issue_comments_291342.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2016-10-10T08:35:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291342",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_291343.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9\"><code>6ef8de2</code></a></td><td><code>Cosmetic changes to sage.libs.pari.convert</code></td></tr></table>\n",
    "created_at": "2016-10-11T08:59:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291343",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9"><code>6ef8de2</code></a></td><td><code>Cosmetic changes to sage.libs.pari.convert</code></td></tr></table>




---

archive/issue_comments_291344.json:
```json
{
    "body": "Changed commit from **[`57e1cba`](https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d)** to **[`6ef8de2`](https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9)**",
    "created_at": "2016-10-11T08:59:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291344",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`57e1cba`](https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d)** to **[`6ef8de2`](https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9)**



---

archive/issue_comments_291345.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nI am wondering what to do with `convert_sage`. First of all, it contains conversions both to/from GMP as well as conversions to/from FLINT. These should be split up in two different modules (I will do that).\n\nBut a bigger question is: should these become part of Sage or part of CyPari? Those conversion routines are not directly related to Sage, but to GMP/FLINT which may be of interest to other libraries too.",
    "created_at": "2016-10-11T09:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291345",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:49" align="right">comment:49</div>

I am wondering what to do with `convert_sage`. First of all, it contains conversions both to/from GMP as well as conversions to/from FLINT. These should be split up in two different modules (I will do that).

But a bigger question is: should these become part of Sage or part of CyPari? Those conversion routines are not directly related to Sage, but to GMP/FLINT which may be of interest to other libraries too.



---

archive/issue_comments_291346.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd\"><code>fb54db3</code></a></td><td><code>Cosmetic changes to sage.libs.pari.convert</code></td></tr></table>\n",
    "created_at": "2016-10-11T09:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291346",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd"><code>fb54db3</code></a></td><td><code>Cosmetic changes to sage.libs.pari.convert</code></td></tr></table>




---

archive/issue_comments_291347.json:
```json
{
    "body": "Changed commit from **[`6ef8de2`](https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9)** to **[`fb54db3`](https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd)**",
    "created_at": "2016-10-11T09:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291347",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6ef8de2`](https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9)** to **[`fb54db3`](https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd)**



---

archive/issue_comments_291348.json:
```json
{
    "body": "Changed commit from **[`fb54db3`](https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd)** to **[`686d299`](https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580)**",
    "created_at": "2016-10-11T09:55:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291348",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fb54db3`](https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd)** to **[`686d299`](https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580)**



---

archive/issue_comments_291349.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580\"><code>686d299</code></a></td><td><code>Split convert_sage in convert_flint and convert_gmp</code></td></tr></table>\n",
    "created_at": "2016-10-11T09:55:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291349",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580"><code>686d299</code></a></td><td><code>Split convert_sage in convert_flint and convert_gmp</code></td></tr></table>




---

archive/issue_comments_291350.json:
```json
{
    "body": "Changed commit from **[`686d299`](https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580)** to **[`5411780`](https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c)**",
    "created_at": "2016-10-11T10:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291350",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`686d299`](https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580)** to **[`5411780`](https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c)**



---

archive/issue_comments_291351.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c\"><code>5411780</code></a></td><td><code>Undo moving of imports in gentoobj()</code></td></tr></table>\n",
    "created_at": "2016-10-11T10:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291351",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c"><code>5411780</code></a></td><td><code>Undo moving of imports in gentoobj()</code></td></tr></table>




---

archive/issue_comments_291352.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@jdemeyer](#comment:49):\n> I am wondering what to do with `convert_sage`. First of all, it contains conversions both to/from GMP as well as conversions to/from FLINT. These should be split up in two different modules (I will do that).\n\nGood. Thx.\n\n> But a bigger question is: should these become part of Sage or part of CyPari? Those conversion routines are not directly related to Sage, but to GMP/FLINT which may be of interest to other libraries too.\n\nIf they where in CyPari, then CyPari would need GMP/Flint in order to compile, wouldn't it?",
    "created_at": "2016-10-11T13:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291352",
    "user": "https://github.com/defeo"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@jdemeyer](#comment:49):
> I am wondering what to do with `convert_sage`. First of all, it contains conversions both to/from GMP as well as conversions to/from FLINT. These should be split up in two different modules (I will do that).

Good. Thx.

> But a bigger question is: should these become part of Sage or part of CyPari? Those conversion routines are not directly related to Sage, but to GMP/FLINT which may be of interest to other libraries too.

If they where in CyPari, then CyPari would need GMP/Flint in order to compile, wouldn't it?



---

archive/issue_comments_291353.json:
```json
{
    "body": "Changed commit from **[`5411780`](https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c)** to **[`d522155`](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c)**",
    "created_at": "2016-10-11T13:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291353",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5411780`](https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c)** to **[`d522155`](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c)**



---

archive/issue_comments_291354.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76db2470238ed9b1beff8296b89724ebe573f111\"><code>76db247</code></a></td><td><code>pari_objtogen -> objtogen</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d2ad6a97a3c0750768dfa770c113a7cd30c29de\"><code>4d2ad6a</code></a></td><td><code>Minor cleanup in pari imports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c\"><code>d522155</code></a></td><td><code>Use \"self\" to name self argument</code></td></tr></table>\n",
    "created_at": "2016-10-11T13:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291354",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76db2470238ed9b1beff8296b89724ebe573f111"><code>76db247</code></a></td><td><code>pari_objtogen -> objtogen</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d2ad6a97a3c0750768dfa770c113a7cd30c29de"><code>4d2ad6a</code></a></td><td><code>Minor cleanup in pari imports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c"><code>d522155</code></a></td><td><code>Use "self" to name self argument</code></td></tr></table>




---

archive/issue_comments_291355.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@defeo](#comment:53):\n> If they where in CyPari, then CyPari would need GMP/Flint in order to compile, wouldn't it?\n\nYes, but those could be optional dependencies (like optional packages in Sage).",
    "created_at": "2016-10-11T14:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291355",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@defeo](#comment:53):
> If they where in CyPari, then CyPari would need GMP/Flint in order to compile, wouldn't it?

Yes, but those could be optional dependencies (like optional packages in Sage).



---

archive/issue_comments_291356.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nAlso, `cysignals` currently has an *optional* dependency on PARI. It seems to work fine.",
    "created_at": "2016-10-11T14:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291356",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:56" align="right">comment:56</div>

Also, `cysignals` currently has an *optional* dependency on PARI. It seems to work fine.



---

archive/issue_comments_291357.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nFor me, this ticket is good to merge. Luca, can you look at the commits that I added (each of them is relatively small and self-contained)?",
    "created_at": "2016-10-11T14:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291357",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:57" align="right">comment:57</div>

For me, this ticket is good to merge. Luca, can you look at the commits that I added (each of them is relatively small and self-contained)?



---

archive/issue_comments_291358.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nI think commit [d522155ff2f79eed03f73a637d8164cff9cf6f6c](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c) is a little brittle. \n\nIf I understand auto-generation correctly, this doesn't break because no method of `PariInstance_auto` has a `PariArgumentSeriesPrec` argument (prototype `P`). I don't know if it is safe to assume that PARI will never have such a function.",
    "created_at": "2016-10-12T13:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291358",
    "user": "https://github.com/defeo"
}
```

<div id="comment:58" align="right">comment:58</div>

I think commit [d522155ff2f79eed03f73a637d8164cff9cf6f6c](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c) is a little brittle. 

If I understand auto-generation correctly, this doesn't break because no method of `PariInstance_auto` has a `PariArgumentSeriesPrec` argument (prototype `P`). I don't know if it is safe to assume that PARI will never have such a function.



---

archive/issue_comments_291359.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nAlso, I'm not completely happy about [4d2ad6a97a3c0750768dfa770c113a7cd30c29de](https://github.com/sagemath/sagetrac-mirror/commit/4d2ad6a97a3c0750768dfa770c113a7cd30c29de). I feel it's bad cimporting `pari_instace` in `padic_capped_relative_element.pyx`.\n\nIn my opinion, external software should use the \"public\" `pari` API whenever possible, unless it has good reasons to fiddle with the internals of CyPari. Is there any good reason here?",
    "created_at": "2016-10-12T14:25:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291359",
    "user": "https://github.com/defeo"
}
```

<div id="comment:59" align="right">comment:59</div>

Also, I'm not completely happy about [4d2ad6a97a3c0750768dfa770c113a7cd30c29de](https://github.com/sagemath/sagetrac-mirror/commit/4d2ad6a97a3c0750768dfa770c113a7cd30c29de). I feel it's bad cimporting `pari_instace` in `padic_capped_relative_element.pyx`.

In my opinion, external software should use the "public" `pari` API whenever possible, unless it has good reasons to fiddle with the internals of CyPari. Is there any good reason here?



---

archive/issue_comments_291360.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nConcerning `convert_gmp.pyx`, docstrings and function names are a bit schizophrenic on whether these are converstion to/from GMP or MPIR. Presumably they work with both?",
    "created_at": "2016-10-12T14:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291360",
    "user": "https://github.com/defeo"
}
```

<div id="comment:60" align="right">comment:60</div>

Concerning `convert_gmp.pyx`, docstrings and function names are a bit schizophrenic on whether these are converstion to/from GMP or MPIR. Presumably they work with both?



---

archive/issue_comments_291361.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@defeo](#comment:59):\n> In my opinion, external software should use the \"public\" `pari` API whenever possible\n\nI consider this as part of the public API.  Why do you consider the Python API public but the Cython API private?",
    "created_at": "2016-10-12T14:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291361",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@defeo](#comment:59):
> In my opinion, external software should use the "public" `pari` API whenever possible

I consider this as part of the public API.  Why do you consider the Python API public but the Cython API private?



---

archive/issue_comments_291362.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@jdemeyer](#comment:61):\n> Replying to [@defeo](#comment:59):\n> > In my opinion, external software should use the \"public\" `pari` API whenever possible\n\n> \n> I consider this as part of the public API.  Why do you consider the Python API public but the Cython API private?\n\nIt's not exactly that. I consider the Cython API also public (unless there are underscores). But when there is duplication of functionality (e.g., any `def`ed or `cpdef`ed method of `pari_instance`), I give priority to the Python API.\n\nI mean, if all you want is to get PARI's zero, just do like any common mortal and call `pari.zero()`. Shorter, more readable, easier to understand.\n\nOf course, it's not a big deal.",
    "created_at": "2016-10-12T14:55:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291362",
    "user": "https://github.com/defeo"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@jdemeyer](#comment:61):
> Replying to [@defeo](#comment:59):
> > In my opinion, external software should use the "public" `pari` API whenever possible

> 
> I consider this as part of the public API.  Why do you consider the Python API public but the Cython API private?

It's not exactly that. I consider the Cython API also public (unless there are underscores). But when there is duplication of functionality (e.g., any `def`ed or `cpdef`ed method of `pari_instance`), I give priority to the Python API.

I mean, if all you want is to get PARI's zero, just do like any common mortal and call `pari.zero()`. Shorter, more readable, easier to understand.

Of course, it's not a big deal.



---

archive/issue_comments_291363.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@defeo](#comment:62):\n> I mean, if all you want is to get PARI's zero, just do like any common mortal and call `pari.zero()`. Shorter, more readable, easier to understand.\n\n...but slower. I don't think it matters in this specific case, but we really want users to call `pari_instance.zero()` using Cython if speed is important.",
    "created_at": "2016-10-12T15:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291363",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@defeo](#comment:62):
> I mean, if all you want is to get PARI's zero, just do like any common mortal and call `pari.zero()`. Shorter, more readable, easier to understand.

...but slower. I don't think it matters in this specific case, but we really want users to call `pari_instance.zero()` using Cython if speed is important.



---

archive/issue_comments_291364.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\n> ...but slower.\n\nBy how much?\n\n> I don't think it matters in this specific case, but we really want users to call `pari_instance.zero()` using Cython if speed is important.\n\nThat's why there is no underscore in front of `pari_instance`. But, as you say, speed is not important here.",
    "created_at": "2016-10-12T15:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291364",
    "user": "https://github.com/defeo"
}
```

<div id="comment:64" align="right">comment:64</div>

> ...but slower.

By how much?

> I don't think it matters in this specific case, but we really want users to call `pari_instance.zero()` using Cython if speed is important.

That's why there is no underscore in front of `pari_instance`. But, as you say, speed is not important here.



---

archive/issue_comments_291365.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@defeo](#comment:64):\n> > ...but slower.\n\n> \n> By how much?\n\nI haven't profiled, but I would guess at least an order of magnitude. Python methods are slow.\n\nBut that doesn't matter, the point is that `pari_instance` and the `zero()` method are part of the public Cython API.",
    "created_at": "2016-10-12T15:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291365",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@defeo](#comment:64):
> > ...but slower.

> 
> By how much?

I haven't profiled, but I would guess at least an order of magnitude. Python methods are slow.

But that doesn't matter, the point is that `pari_instance` and the `zero()` method are part of the public Cython API.



---

archive/issue_comments_291366.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\n> > By how much?\n\n> \n> I haven't profiled, but I would guess at least an order of magnitude. Python methods are slow.\n\nI have. The overhead is ~50ns. `pari_instance.zero()` itself takes ~50ns.\n\n> But that doesn't matter,\n\nAs you say. Who cares about 50ns? So we agree that speed is not an argument here. In my opinion readability is, instead.\n\n> the point is that `pari_instance` and the `zero()` method are part of the public Cython API.\n\nI already replied to this point saying that `pari.zero()` is \"more public\". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is \"public enough\".\n\nI do not want to hold this ticket on this very minor detail. If we cannot convince each other, commit minimality wins, so the code stays as it is now.\n\nMy other two comments are more serious, though.",
    "created_at": "2016-10-12T16:16:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291366",
    "user": "https://github.com/defeo"
}
```

<div id="comment:66" align="right">comment:66</div>

> > By how much?

> 
> I haven't profiled, but I would guess at least an order of magnitude. Python methods are slow.

I have. The overhead is ~50ns. `pari_instance.zero()` itself takes ~50ns.

> But that doesn't matter,

As you say. Who cares about 50ns? So we agree that speed is not an argument here. In my opinion readability is, instead.

> the point is that `pari_instance` and the `zero()` method are part of the public Cython API.

I already replied to this point saying that `pari.zero()` is "more public". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is "public enough".

I do not want to hold this ticket on this very minor detail. If we cannot convince each other, commit minimality wins, so the code stays as it is now.

My other two comments are more serious, though.



---

archive/issue_comments_291367.json:
```json
{
    "body": "Changed commit from **[`d522155`](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c)** to **[`6f815cd`](https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716)**",
    "created_at": "2016-10-14T09:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291367",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d522155`](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c)** to **[`6f815cd`](https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716)**



---

archive/issue_comments_291368.json:
```json
{
    "body": "<div id=\"comment:67\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716\"><code>6f815cd</code></a></td><td><code>Put back convert_code for PariInstanceArgument</code></td></tr></table>\n",
    "created_at": "2016-10-14T09:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291368",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:67"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716"><code>6f815cd</code></a></td><td><code>Put back convert_code for PariInstanceArgument</code></td></tr></table>




---

archive/issue_comments_291369.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@defeo](#comment:66):\n> I already replied to this point saying that `pari.zero()` is \"more public\". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is \"public enough\".\n\nCould you be convinced by\n\n```\nfrom ... cimport pari_instance as pari\n```\nand then using `pari.zero()`? IMHO, that would be equally readable as the original code while still being fast.",
    "created_at": "2016-10-14T09:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291369",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@defeo](#comment:66):
> I already replied to this point saying that `pari.zero()` is "more public". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is "public enough".

Could you be convinced by

```
from ... cimport pari_instance as pari
```
and then using `pari.zero()`? IMHO, that would be equally readable as the original code while still being fast.



---

archive/issue_comments_291370.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@defeo](#comment:60):\n> Concerning `convert_gmp.pyx`, docstrings and function names are a bit schizophrenic on whether these are converstion to/from GMP or MPIR. Presumably they work with both?\n\nI totally agree that function names are really inconsistent. But I would keep the names for now, we can make a new ticket to change the names. I'll have a look at the docstrings.",
    "created_at": "2016-10-14T09:58:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291370",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@defeo](#comment:60):
> Concerning `convert_gmp.pyx`, docstrings and function names are a bit schizophrenic on whether these are converstion to/from GMP or MPIR. Presumably they work with both?

I totally agree that function names are really inconsistent. But I would keep the names for now, we can make a new ticket to change the names. I'll have a look at the docstrings.



---

archive/issue_comments_291371.json:
```json
{
    "body": "<div id=\"comment:70\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7278bcff6569664e3ee8874142142c169f367f9f\"><code>7278bcf</code></a></td><td><code>Improve docstrings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d\"><code>8b3013e</code></a></td><td><code>Change rational_matrix() nr/nc arguments to \"long\" to match PARI</code></td></tr></table>\n",
    "created_at": "2016-10-14T10:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291371",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7278bcff6569664e3ee8874142142c169f367f9f"><code>7278bcf</code></a></td><td><code>Improve docstrings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d"><code>8b3013e</code></a></td><td><code>Change rational_matrix() nr/nc arguments to "long" to match PARI</code></td></tr></table>




---

archive/issue_comments_291372.json:
```json
{
    "body": "Changed commit from **[`6f815cd`](https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716)** to **[`8b3013e`](https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d)**",
    "created_at": "2016-10-14T10:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291372",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6f815cd`](https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716)** to **[`8b3013e`](https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d)**



---

archive/issue_comments_291373.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nI think this takes care of your other comments. So that leaves the `pari_instance.zero()` issue. What do you think of [comment:68]",
    "created_at": "2016-10-14T11:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291373",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:71" align="right">comment:71</div>

I think this takes care of your other comments. So that leaves the `pari_instance.zero()` issue. What do you think of [comment:68]



---

archive/issue_comments_291374.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@sagetrac-git](#comment:67):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716\"><code>6f815cd</code></a></td><td><code>Put back convert_code for PariInstanceArgument</code></td></tr></table>\n\nOk, this addresses one of my concerns. But I'm curious: what's the rationale behind writing\n\n```\ndef ...(self, ...):\n    cdef PariInstance pari_instance = <PariInstance>self\n```\n\ninstead of simply writing\n\n```\ndef ...(pari_instance, ...):\n```",
    "created_at": "2016-10-14T15:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291374",
    "user": "https://github.com/defeo"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@sagetrac-git](#comment:67):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716"><code>6f815cd</code></a></td><td><code>Put back convert_code for PariInstanceArgument</code></td></tr></table>

Ok, this addresses one of my concerns. But I'm curious: what's the rationale behind writing

```
def ...(self, ...):
    cdef PariInstance pari_instance = <PariInstance>self
```

instead of simply writing

```
def ...(pari_instance, ...):
```



---

archive/issue_comments_291375.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@jdemeyer](#comment:68):\n> Replying to [@defeo](#comment:66):\n> > I already replied to this point saying that `pari.zero()` is \"more public\". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is \"public enough\".\n\n> \n> Could you be convinced by\n> \n> ```\n> from ... cimport pari_instance as pari\n> ```\n> and then using `pari.zero()`? IMHO, that would be equally readable as the original code while still being fast.\n\nSo it seems you care about speed, here? I thought you didn't. Why don't you retrun `pari_instance.PARI_ZERO`, then? I personally don't see how speed can matter here: it's a seldom executed if-branch in a function that is probably orders of magnitude slower than the python-call overhead.\n\nI agree that's more readable, though. I'd prefer that to the current situation.",
    "created_at": "2016-10-14T15:16:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291375",
    "user": "https://github.com/defeo"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@jdemeyer](#comment:68):
> Replying to [@defeo](#comment:66):
> > I already replied to this point saying that `pari.zero()` is "more public". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is "public enough".

> 
> Could you be convinced by
> 
> ```
> from ... cimport pari_instance as pari
> ```
> and then using `pari.zero()`? IMHO, that would be equally readable as the original code while still being fast.

So it seems you care about speed, here? I thought you didn't. Why don't you retrun `pari_instance.PARI_ZERO`, then? I personally don't see how speed can matter here: it's a seldom executed if-branch in a function that is probably orders of magnitude slower than the python-call overhead.

I agree that's more readable, though. I'd prefer that to the current situation.



---

archive/issue_comments_291376.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nReplying to [@defeo](#comment:72):\n> what's the rationale behind writing\n> \n> ```\n> def ...(self, ...):\n>     cdef PariInstance pari_instance = <PariInstance>self\n> ```\n> \n> instead of simply writing\n> \n> ```\n> def ...(pari_instance, ...):\n> ```\n\nThe only reason is the usual convention that the \"self\" argument of a method should be called `self`.\n\nAnd ideally, maybe we can get rid of the `pari_instance.get_series_precision()` call to avoid the `pari_instance` argument completely.",
    "created_at": "2016-10-14T16:04:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291376",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:74" align="right">comment:74</div>

Replying to [@defeo](#comment:72):
> what's the rationale behind writing
> 
> ```
> def ...(self, ...):
>     cdef PariInstance pari_instance = <PariInstance>self
> ```
> 
> instead of simply writing
> 
> ```
> def ...(pari_instance, ...):
> ```

The only reason is the usual convention that the "self" argument of a method should be called `self`.

And ideally, maybe we can get rid of the `pari_instance.get_series_precision()` call to avoid the `pari_instance` argument completely.



---

archive/issue_comments_291377.json:
```json
{
    "body": "Changed commit from **[`8b3013e`](https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d)** to **[`62f227e`](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)**",
    "created_at": "2016-10-15T15:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291377",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8b3013e`](https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d)** to **[`62f227e`](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)**



---

archive/issue_comments_291378.json:
```json
{
    "body": "<div id=\"comment:75\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953\"><code>62f227e</code></a></td><td><code>cimport pari_instance as pari</code></td></tr></table>\n",
    "created_at": "2016-10-15T15:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291378",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:75"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953"><code>62f227e</code></a></td><td><code>cimport pari_instance as pari</code></td></tr></table>




---

archive/issue_comments_291379.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nSorry for the delay, good to go for me.",
    "created_at": "2016-10-18T13:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291379",
    "user": "https://github.com/defeo"
}
```

<div id="comment:76" align="right">comment:76</div>

Sorry for the delay, good to go for me.



---

archive/issue_events_283233.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2016-10-18T13:50:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-283233"
}
```



---

archive/issue_events_283234.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2016-10-18T13:50:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-283234"
}
```



---

archive/issue_comments_291380.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nThanks! Could you also have a look at #21703 please?",
    "created_at": "2016-10-18T16:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291380",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:77" align="right">comment:77</div>

Thanks! Could you also have a look at #21703 please?



---

archive/issue_comments_291381.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nyup. looking at it.",
    "created_at": "2016-10-18T16:49:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291381",
    "user": "https://github.com/defeo"
}
```

<div id="comment:78" align="right">comment:78</div>

yup. looking at it.



---

archive/issue_events_283235.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-21T07:04:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-283235"
}
```



---

archive/issue_events_283236.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "395e999c38461d9cce177af9b1fde96f4ed27630",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-10-21T07:04:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-283236"
}
```



---

archive/issue_comments_291382.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[`62f227e`](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)**",
    "created_at": "2016-10-21T07:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-291382",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[`62f227e`](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)**
