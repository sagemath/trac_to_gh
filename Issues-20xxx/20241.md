# Issue 20241: Separate Sage-specific components from generic C-interface in PariInstance

archive/issues_020004.json:
```json
{
    "body": "In preparation for #20238, take out of `PariInstance` all components specific to Sage.\n\n**CC:**  @jdemeyer\n\n**Branch/Commit:** [62f227ebaf34601aa818b60ff6bf2b3d0641a953](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** Luca De Feo\n\nIssue created by migration from https://trac.sagemath.org/ticket/20241\n\n",
    "closed_at": "2016-10-21T07:04:31Z",
    "created_at": "2016-03-21T14:34:02Z",
    "labels": [
        "component: interfaces",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Separate Sage-specific components from generic C-interface in PariInstance",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20241",
    "user": "https://github.com/defeo"
}
```
In preparation for #20238, take out of `PariInstance` all components specific to Sage.

**CC:**  @jdemeyer

**Branch/Commit:** [62f227ebaf34601aa818b60ff6bf2b3d0641a953](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)

**Reviewer:** Jeroen Demeyer

**Author:** Luca De Feo

Issue created by migration from https://trac.sagemath.org/ticket/20241





---

archive/issue_comments_350659.json:
```json
{
    "body": "**Branch:** [u/defeo/trac/u/defeo/pari_instance](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/trac/u/defeo/pari_instance)",
    "created_at": "2016-03-21T14:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350659",
    "user": "https://github.com/defeo"
}
```

**Branch:** [u/defeo/trac/u/defeo/pari_instance](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/trac/u/defeo/pari_instance)



---

archive/issue_comments_350660.json:
```json
{
    "body": "**Dependencies:** #20217",
    "created_at": "2016-03-21T14:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350660",
    "user": "https://github.com/defeo"
}
```

**Dependencies:** #20217



---

archive/issue_comments_350661.json:
```json
{
    "body": "**Commit:** [799f2555869086a4a302313545a9b74d8e5597e8](https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8)",
    "created_at": "2016-03-21T14:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350661",
    "user": "https://github.com/defeo"
}
```

**Commit:** [799f2555869086a4a302313545a9b74d8e5597e8](https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8)



---

archive/issue_comments_350662.json:
```json
{
    "body": "<a id='comment:2'></a>\nI'm pushing a failed attempt at splitting `PariInstance` into a generic `PariInstance` cython type, and a Sage-specific `SagePariInstance`.\n\nThis is problematic because of the global `sage.libs.pari.pari_instance.pari` variable: it is not clear where this variable should go.\n\nSome concrete suggestions: `PariInstance` serves three main purposes:\n\n- As a wrapper around the pari stack,\n- As a collection of conversion methods to and from pari types,\n- As a namespace for a handful of functions, for lack of a better place (e.g. `primes`, `genus2_reduction`, ...)\n\nOf these, only the first one really needs a Cython type. I suggest:\n\n- To make a proper abstraction `PariStack` around the pari stack. This should not be handled as a global variable, but rather as a singleton class (we cannot have more than one pari stack, because of global variables).\n- Move conversion functions to a separate namespace, as #20226 started doing.\n- Have `PariInstance` hold a pointer to a `PariStack`. Have `gen`'s hold a pointer to a `PariInstance`. (Maybe this double wrapping is superfluous?)\n\nI don't know quite well what to do with utility functions such as `primes`. They may stay as methods of `PariInstance`, or maybe go to a different namespace as pure functions (they should take a `PariInstance` or `PariStack` as parameter, then).\n\n---\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dce67fca49e515ce610539263e1e7a6f26c7bc69\">dce67fc</a></td><td><code>Move memory functions to cysignals</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bb8337295ed82c93d1a9c9f7173a4c36f97151d\">4bb8337</a></td><td><code>Rename sage_malloc -> sig_malloc and friends</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ab73c1c098478da766a061109a2a248d741e49e\">5ab73c1</a></td><td><code>Get rid of factorint_withproof_sage in PARI interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0ed97a0b2a036c3a4677d8e5dbabf6b2a6d54fc\">c0ed97a</a></td><td><code>Stop using deprecated PARI factoring features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edc5ce28655f157a13f27d2d94ae2e5d5d731bd6\">edc5ce2</a></td><td><code>Merge branch 't/20205/get_rid_of_factorint_withproof_sage_in_pari_interface' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fb408dedb22e4147ee68ae5656e643b4f1df06c\">5fb408d</a></td><td><code>Replace pari_catch_sig_on by sig_on</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5c934c5164255e352cee9ddbc780d0759b6e185\">d5c934c</a></td><td><code>Deprecate PARI nth_prime and prime_list</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7d2d7df24760cdecf0d6585972d2bf6140c1123\">d7d2d7d</a></td><td><code>Remove redundant functions from pari_instance.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/282b1878dd25528debef017d13057b68c05b3b5b\">282b187</a></td><td><code>Failed attempt to split PariInstance</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8\">799f255</a></td><td><code>Split pxd file too</code></td></tr></table>\n",
    "created_at": "2016-03-21T14:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350662",
    "user": "https://github.com/defeo"
}
```

<a id='comment:2'></a>
I'm pushing a failed attempt at splitting `PariInstance` into a generic `PariInstance` cython type, and a Sage-specific `SagePariInstance`.

This is problematic because of the global `sage.libs.pari.pari_instance.pari` variable: it is not clear where this variable should go.

Some concrete suggestions: `PariInstance` serves three main purposes:

- As a wrapper around the pari stack,
- As a collection of conversion methods to and from pari types,
- As a namespace for a handful of functions, for lack of a better place (e.g. `primes`, `genus2_reduction`, ...)

Of these, only the first one really needs a Cython type. I suggest:

- To make a proper abstraction `PariStack` around the pari stack. This should not be handled as a global variable, but rather as a singleton class (we cannot have more than one pari stack, because of global variables).
- Move conversion functions to a separate namespace, as #20226 started doing.
- Have `PariInstance` hold a pointer to a `PariStack`. Have `gen`'s hold a pointer to a `PariInstance`. (Maybe this double wrapping is superfluous?)

I don't know quite well what to do with utility functions such as `primes`. They may stay as methods of `PariInstance`, or maybe go to a different namespace as pure functions (they should take a `PariInstance` or `PariStack` as parameter, then).

---
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dce67fca49e515ce610539263e1e7a6f26c7bc69">dce67fc</a></td><td><code>Move memory functions to cysignals</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bb8337295ed82c93d1a9c9f7173a4c36f97151d">4bb8337</a></td><td><code>Rename sage_malloc -> sig_malloc and friends</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ab73c1c098478da766a061109a2a248d741e49e">5ab73c1</a></td><td><code>Get rid of factorint_withproof_sage in PARI interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0ed97a0b2a036c3a4677d8e5dbabf6b2a6d54fc">c0ed97a</a></td><td><code>Stop using deprecated PARI factoring features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edc5ce28655f157a13f27d2d94ae2e5d5d731bd6">edc5ce2</a></td><td><code>Merge branch 't/20205/get_rid_of_factorint_withproof_sage_in_pari_interface' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fb408dedb22e4147ee68ae5656e643b4f1df06c">5fb408d</a></td><td><code>Replace pari_catch_sig_on by sig_on</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5c934c5164255e352cee9ddbc780d0759b6e185">d5c934c</a></td><td><code>Deprecate PARI nth_prime and prime_list</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7d2d7df24760cdecf0d6585972d2bf6140c1123">d7d2d7d</a></td><td><code>Remove redundant functions from pari_instance.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/282b1878dd25528debef017d13057b68c05b3b5b">282b187</a></td><td><code>Failed attempt to split PariInstance</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8">799f255</a></td><td><code>Split pxd file too</code></td></tr></table>




---

archive/issue_comments_350663.json:
```json
{
    "body": "<a id='comment:3'></a>\nRegarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).",
    "created_at": "2016-04-09T05:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350663",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:3'></a>
Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).



---

archive/issue_comments_350664.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [kedlaya](#comment%3A3):\n> Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).\n\n\nGood points. These would take a lengthy deprecation process, and are better handled after a successful separation of the interface (something we're still having a hard time with).\n\nI think the best place for this comment is in #20238, hence I'm copying it there.",
    "created_at": "2016-04-09T13:52:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350664",
    "user": "https://github.com/defeo"
}
```

<a id='comment:4'></a>
Replying to [kedlaya](#comment%3A3):
> Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).


Good points. These would take a lengthy deprecation process, and are better handled after a successful separation of the interface (something we're still having a hard time with).

I think the best place for this comment is in #20238, hence I'm copying it there.



---

archive/issue_comments_350665.json:
```json
{
    "body": "<a id='comment:5'></a>\n`@`kedleya: I don't really understand your comment. This ticket is about the *interface* between Sage and PARI (which is a purely technical non-mathematical thing), not about how which PARI functions are used where.",
    "created_at": "2016-04-11T08:27:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350665",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
`@`kedleya: I don't really understand your comment. This ticket is about the *interface* between Sage and PARI (which is a purely technical non-mathematical thing), not about how which PARI functions are used where.



---

archive/issue_comments_350666.json:
```json
{
    "body": "**Changing branch** from \"[u/defeo/trac/u/defeo/pari_instance](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/trac/u/defeo/pari_instance)\" to \"[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)\".",
    "created_at": "2016-08-08T21:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350666",
    "user": "https://github.com/defeo"
}
```

**Changing branch** from "[u/defeo/trac/u/defeo/pari_instance](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/trac/u/defeo/pari_instance)" to "[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)".



---

archive/issue_comments_350667.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12d9d3268f1eaeb8308f77666b56c9efb0549aec\">12d9d32</a></td><td><code>Implement unary operations in interfaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aae48bd951f3dee458fafb9de558e0b174296142\">aae48bd</a></td><td><code>Merge branch 'ticket/21152' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a44b082f08c742fbe564c5afdd2f7309fabbb52\">0a44b08</a></td><td><code>Remove one doctest for __mul__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54b0fcdaf2fd69cd64978da526af6774b57a59a8\">54b0fcd</a></td><td><code>Various minor fixes for the coercion model</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2405dde75db35323a1e33890e999388203a81de7\">2405dde</a></td><td><code>Merge commit '0a44b082f08c742fbe564c5afdd2f7309fabbb52'; commit '54b0fcdaf2fd69cd64978da526af6774b57a59a8' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1d2ba46574273ec4d358e654ed195a82b81a654\">e1d2ba4</a></td><td><code>Move arithmetic using coercion model to Element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3ea04f051d8a06788671e0678c903c8aae186fa\">b3ea04f</a></td><td><code>Try reversed operation in richcmp if coercion fails</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/efc4fd0cbf32e078534020d6c3878bd015d5d07f\">efc4fd0</a></td><td><code>Merge branch 't/21163/in_richcmp__fall_back_to_reversed_operation_if_coercion_fails' into t/21158/ticket/21158</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71f31a494aa21db6651797f582dd4aab2a908f40\">71f31a4</a></td><td><code>Decouple PARI from the Sage coercion model</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2\">7ad5c61</a></td><td><code>Step 1: make the unique PariInstance private</code></td></tr></table>\n",
    "created_at": "2016-08-08T21:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350667",
    "user": "https://github.com/defeo"
}
```

<a id='comment:7'></a>
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12d9d3268f1eaeb8308f77666b56c9efb0549aec">12d9d32</a></td><td><code>Implement unary operations in interfaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aae48bd951f3dee458fafb9de558e0b174296142">aae48bd</a></td><td><code>Merge branch 'ticket/21152' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a44b082f08c742fbe564c5afdd2f7309fabbb52">0a44b08</a></td><td><code>Remove one doctest for __mul__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54b0fcdaf2fd69cd64978da526af6774b57a59a8">54b0fcd</a></td><td><code>Various minor fixes for the coercion model</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2405dde75db35323a1e33890e999388203a81de7">2405dde</a></td><td><code>Merge commit '0a44b082f08c742fbe564c5afdd2f7309fabbb52'; commit '54b0fcdaf2fd69cd64978da526af6774b57a59a8' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1d2ba46574273ec4d358e654ed195a82b81a654">e1d2ba4</a></td><td><code>Move arithmetic using coercion model to Element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3ea04f051d8a06788671e0678c903c8aae186fa">b3ea04f</a></td><td><code>Try reversed operation in richcmp if coercion fails</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/efc4fd0cbf32e078534020d6c3878bd015d5d07f">efc4fd0</a></td><td><code>Merge branch 't/21163/in_richcmp__fall_back_to_reversed_operation_if_coercion_fails' into t/21158/ticket/21158</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71f31a494aa21db6651797f582dd4aab2a908f40">71f31a4</a></td><td><code>Decouple PARI from the Sage coercion model</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2">7ad5c61</a></td><td><code>Step 1: make the unique PariInstance private</code></td></tr></table>




---

archive/issue_comments_350668.json:
```json
{
    "body": "**Changing dependencies** from \"#20217\" to \"#20217, #21158\".",
    "created_at": "2016-08-08T21:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350668",
    "user": "https://github.com/defeo"
}
```

**Changing dependencies** from "#20217" to "#20217, #21158".



---

archive/issue_comments_350669.json:
```json
{
    "body": "**Changing commit** from \"[799f2555869086a4a302313545a9b74d8e5597e8](https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8)\" to \"[7ad5c616418f19d84a37311d750b6db0693c4ec2](https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2)\".",
    "created_at": "2016-08-08T21:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350669",
    "user": "https://github.com/defeo"
}
```

**Changing commit** from "[799f2555869086a4a302313545a9b74d8e5597e8](https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8)" to "[7ad5c616418f19d84a37311d750b6db0693c4ec2](https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2)".



---

archive/issue_events_062791.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-09T07:51:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20241#event-62791"
}
```



---

archive/issue_comments_350670.json:
```json
{
    "body": "**Changing dependencies** from \"#20217, #21158\" to \"#21158\".",
    "created_at": "2016-08-09T07:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350670",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#20217, #21158" to "#21158".



---

archive/issue_comments_350671.json:
```json
{
    "body": "<a id='comment:9'></a>\nI don't really know where you are going with this branch, but I thought that we wanted to minimize the use of the global `pari` variable?\n\nFor example, `closure.pyx` should not need it, we just need to make `new_gen` and friends functions instead of methods of `PariInstance`.",
    "created_at": "2016-08-09T07:57:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350671",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
I don't really know where you are going with this branch, but I thought that we wanted to minimize the use of the global `pari` variable?

For example, `closure.pyx` should not need it, we just need to make `new_gen` and friends functions instead of methods of `PariInstance`.



---

archive/issue_comments_350672.json:
```json
{
    "body": "<a id='comment:10'></a>\nYup. Second step. I needed to know who was using it anyway. Any module importing _pari_instance is doing bad, and I'm fixing it. I just pushed this to get help from patchbot.",
    "created_at": "2016-08-09T08:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350672",
    "user": "https://github.com/defeo"
}
```

<a id='comment:10'></a>
Yup. Second step. I needed to know who was using it anyway. Any module importing _pari_instance is doing bad, and I'm fixing it. I just pushed this to get help from patchbot.



---

archive/issue_comments_350673.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91c436752ba82d512efdf67e2890d5ecbe0b7234\">91c4367</a></td><td><code>Remove useless \"return False\" in SR._coerce_map_from_()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c1adfac68890ce15f8426d48ef69958cdbf240c\">2c1adfa</a></td><td><code>Merge branch 't/21158/ticket/21158' into t/20241/ticket/20241</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130\">6a4d9bd</a></td><td><code>Taking new_gen and friends out of PariInstance. Does not compile.</code></td></tr></table>\n",
    "created_at": "2016-08-19T17:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350673",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91c436752ba82d512efdf67e2890d5ecbe0b7234">91c4367</a></td><td><code>Remove useless "return False" in SR._coerce_map_from_()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c1adfac68890ce15f8426d48ef69958cdbf240c">2c1adfa</a></td><td><code>Merge branch 't/21158/ticket/21158' into t/20241/ticket/20241</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130">6a4d9bd</a></td><td><code>Taking new_gen and friends out of PariInstance. Does not compile.</code></td></tr></table>




---

archive/issue_comments_350674.json:
```json
{
    "body": "**Changing commit** from \"[7ad5c616418f19d84a37311d750b6db0693c4ec2](https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2)\" to \"[6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130](https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130)\".",
    "created_at": "2016-08-19T17:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7ad5c616418f19d84a37311d750b6db0693c4ec2](https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2)" to "[6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130](https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130)".



---

archive/issue_comments_350675.json:
```json
{
    "body": "<a id='comment:12'></a>\nHi `@`jdemeyer. I'm having trouble compiling this code. gcc fails while compiling `complex_double.pyx`, but I cannot figure our the problem. Also `matrix_integer_dense.pyx` gives fishy warnings.\n\nChanging slightly L94 in `complex_double.pyx`, i.e., using `cimport .. as` or similar, it gets even worse: compilation freezes midway, I have to Ctrl-C it.\n\nI'm giving up for today. Do you have any idea?",
    "created_at": "2016-08-19T17:52:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350675",
    "user": "https://github.com/defeo"
}
```

<a id='comment:12'></a>
Hi `@`jdemeyer. I'm having trouble compiling this code. gcc fails while compiling `complex_double.pyx`, but I cannot figure our the problem. Also `matrix_integer_dense.pyx` gives fishy warnings.

Changing slightly L94 in `complex_double.pyx`, i.e., using `cimport .. as` or similar, it gets even worse: compilation freezes midway, I have to Ctrl-C it.

I'm giving up for today. Do you have any idea?



---

archive/issue_comments_350676.json:
```json
{
    "body": "<a id='comment:13'></a>\nFor starters, you cannot *declare* a function to be `cdef inline` in a `.pxd` file unless you put the full function body also in the `.pxd` file. So this isn't correct:\n\n```\ncdef inline gen new_gen(GEN x)\n```\n\nYou have to understand how the compiler works: the compiler for a different module only sees the `.pxd` file, so it cannot possibly inline the function `new_gen` since it doesn't know what `new_gen` does.\n\nIt's a bit of a mystery why Cython still accepts this code. GCC gives a error (but sometimes just a warning, maybe it depends on the language) like\n\n```\n[sagelib-7.3.rc0] build/cythonized/sage/matrix/matrix_integer_dense.cpp:4828:72: error: \u2018__pyx_f_4sage_4libs_4pari_5stack_clear_stack\u2019 declared as an \u2018inline\u2019 variable\n[sagelib-7.3.rc0]  static CYTHON_INLINE void (*__pyx_f_4sage_4libs_4pari_5stack_clear_stack)(void); /*proto*/\n```",
    "created_at": "2016-08-19T19:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350676",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
For starters, you cannot *declare* a function to be `cdef inline` in a `.pxd` file unless you put the full function body also in the `.pxd` file. So this isn't correct:

```
cdef inline gen new_gen(GEN x)
```

You have to understand how the compiler works: the compiler for a different module only sees the `.pxd` file, so it cannot possibly inline the function `new_gen` since it doesn't know what `new_gen` does.

It's a bit of a mystery why Cython still accepts this code. GCC gives a error (but sometimes just a warning, maybe it depends on the language) like

```
[sagelib-7.3.rc0] build/cythonized/sage/matrix/matrix_integer_dense.cpp:4828:72: error: ‘__pyx_f_4sage_4libs_4pari_5stack_clear_stack’ declared as an ‘inline’ variable
[sagelib-7.3.rc0]  static CYTHON_INLINE void (*__pyx_f_4sage_4libs_4pari_5stack_clear_stack)(void); /*proto*/
```



---

archive/issue_comments_350677.json:
```json
{
    "body": "<a id='comment:14'></a>\nNote that it is perfectly legal to have an inline function in a `.pyx` file and still export it in the `.pxd` file. Just don't put the `inline` in the `.pxd`. This way, the function can be inlined in the `.pyx` file (like the call from `new_gen` to `new_gen_noclear`) but other modules will do a non-inline function call.",
    "created_at": "2016-08-19T19:31:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350677",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Note that it is perfectly legal to have an inline function in a `.pyx` file and still export it in the `.pxd` file. Just don't put the `inline` in the `.pxd`. This way, the function can be inlined in the `.pyx` file (like the call from `new_gen` to `new_gen_noclear`) but other modules will do a non-inline function call.



---

archive/issue_comments_350678.json:
```json
{
    "body": "**Changing branch** from \"[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)\" to \"[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)\".",
    "created_at": "2016-08-19T19:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350678",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)" to "[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)".



---

archive/issue_comments_350679.json:
```json
{
    "body": "**Changing commit** from \"[6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130](https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130)\" to \"[3740c06e738970213afc1af1dfe3457f8a8a3f60](https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60)\".",
    "created_at": "2016-08-19T19:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350679",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130](https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130)" to "[3740c06e738970213afc1af1dfe3457f8a8a3f60](https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60)".



---

archive/issue_comments_350680.json:
```json
{
    "body": "<a id='comment:16'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60\">3740c06</a></td><td><code>Fix inlining in sage.libs.pari.stack</code></td></tr></table>\n",
    "created_at": "2016-08-19T19:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350680",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60">3740c06</a></td><td><code>Fix inlining in sage.libs.pari.stack</code></td></tr></table>




---

archive/issue_comments_350681.json:
```json
{
    "body": "<a id='comment:17'></a>\nSage at least compiles now. It doesn't actually start, but I'll leave it to you to continue working on this.",
    "created_at": "2016-08-19T19:39:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350681",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
Sage at least compiles now. It doesn't actually start, but I'll leave it to you to continue working on this.



---

archive/issue_comments_350682.json:
```json
{
    "body": "<a id='comment:18'></a>\nMakes perfect sense. What I don't get is why you can put `cdef inline` in METHOD definitions in a `.pxd`. I just cut-pasted that line from the definition of `PariInstance`, and it had been actually compiling, booting, and passing tests (hadn't tried many tests, though) for quite some time before this... that's why I hate Cython!\n\nAnyway, thanks for your help. I'll keep chasing the breakages tomorrow.",
    "created_at": "2016-08-19T20:34:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350682",
    "user": "https://github.com/defeo"
}
```

<a id='comment:18'></a>
Makes perfect sense. What I don't get is why you can put `cdef inline` in METHOD definitions in a `.pxd`. I just cut-pasted that line from the definition of `PariInstance`, and it had been actually compiling, booting, and passing tests (hadn't tried many tests, though) for quite some time before this... that's why I hate Cython!

Anyway, thanks for your help. I'll keep chasing the breakages tomorrow.



---

archive/issue_comments_350683.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)\" to \"[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)\".",
    "created_at": "2016-08-20T11:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350683",
    "user": "https://github.com/defeo"
}
```

**Changing branch** from "[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)" to "[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)".



---

archive/issue_comments_350684.json:
```json
{
    "body": "**Changing commit** from \"[3740c06e738970213afc1af1dfe3457f8a8a3f60](https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60)\" to \"[341b49b925dea6aa815b42abec0cfd9d4ffd4da4](https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4)\".",
    "created_at": "2016-08-20T11:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350684",
    "user": "https://github.com/defeo"
}
```

**Changing commit** from "[3740c06e738970213afc1af1dfe3457f8a8a3f60](https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60)" to "[341b49b925dea6aa815b42abec0cfd9d4ffd4da4](https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4)".



---

archive/issue_comments_350685.json:
```json
{
    "body": "<a id='comment:20'></a>\nOk, fixed the startup bug, and tests (mostly) pass. Next step is to move all those conversion functions out of the way.\n\nI'm scratching my head about `allocatemem` and companions, though. `allocatemem` is a gp function, but it's tied to `gen` by `auto_gen.pxi`, so that you can do\n\n```\nsage: size = pari('10^8')\nsage: size.allocatemem()\n```\n\nwhich feels very bad. Wouldn't it make sense to blacklist this one?\n\nOn the other hand there is a manually coded `allocatemem` method in `PariInstance` which gives a much more sensible\n\n```\nsage: pari.allocatemem(10^8)\n```\n\nand also has an additional `silent` parameter to behave more like gp. There are also methods `stacksize` and `stacksizemax` to read the stack sizes. It seems more logical to put these three functions in `stack.pyx`, but if we want the user to call them from the command line, it is better to leave methods in `PariInstance`.\n\nQuestion: given the current handling of PARI's stack, do we still want the user to easily call these functions?\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4\">341b49b</a></td><td><code>Step 2: Move new_gen and related functions out of PariIinstance.</code></td></tr></table>\n",
    "created_at": "2016-08-20T11:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350685",
    "user": "https://github.com/defeo"
}
```

<a id='comment:20'></a>
Ok, fixed the startup bug, and tests (mostly) pass. Next step is to move all those conversion functions out of the way.

I'm scratching my head about `allocatemem` and companions, though. `allocatemem` is a gp function, but it's tied to `gen` by `auto_gen.pxi`, so that you can do

```
sage: size = pari('10^8')
sage: size.allocatemem()
```

which feels very bad. Wouldn't it make sense to blacklist this one?

On the other hand there is a manually coded `allocatemem` method in `PariInstance` which gives a much more sensible

```
sage: pari.allocatemem(10^8)
```

and also has an additional `silent` parameter to behave more like gp. There are also methods `stacksize` and `stacksizemax` to read the stack sizes. It seems more logical to put these three functions in `stack.pyx`, but if we want the user to call them from the command line, it is better to leave methods in `PariInstance`.

Question: given the current handling of PARI's stack, do we still want the user to easily call these functions?

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4">341b49b</a></td><td><code>Step 2: Move new_gen and related functions out of PariIinstance.</code></td></tr></table>




---

archive/issue_comments_350686.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [defeo](#comment%3A20):\n> Wouldn't it make sense to blacklist this one?\n\n\nSure.",
    "created_at": "2016-08-20T19:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350686",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>
Replying to [defeo](#comment%3A20):
> Wouldn't it make sense to blacklist this one?


Sure.



---

archive/issue_comments_350687.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [defeo](#comment%3A20):\n> Question: given the current handling of PARI's stack, do we still want the user to easily call these functions?\n\n\nI don't see the problem. They work perfectly fine and make sense. Unless they are problematic for the implementation, I would just keep them as they are. Another reason is that we should focus on finishing this deliverable. We can always clean up such details afterwards.",
    "created_at": "2016-08-20T19:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350687",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
Replying to [defeo](#comment%3A20):
> Question: given the current handling of PARI's stack, do we still want the user to easily call these functions?


I don't see the problem. They work perfectly fine and make sense. Unless they are problematic for the implementation, I would just keep them as they are. Another reason is that we should focus on finishing this deliverable. We can always clean up such details afterwards.



---

archive/issue_comments_350688.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/decf7ac83ed9c21bc61449340487c75ef7e8f6c0\">decf7ac</a></td><td><code>Fixed doctest in auto generation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2\">a57e6c3</a></td><td><code>Reverted modifications to Python stack management methods</code></td></tr></table>\n",
    "created_at": "2016-08-24T14:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350688",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/decf7ac83ed9c21bc61449340487c75ef7e8f6c0">decf7ac</a></td><td><code>Fixed doctest in auto generation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2">a57e6c3</a></td><td><code>Reverted modifications to Python stack management methods</code></td></tr></table>




---

archive/issue_comments_350689.json:
```json
{
    "body": "**Changing commit** from \"[341b49b925dea6aa815b42abec0cfd9d4ffd4da4](https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4)\" to \"[a57e6c37a7147426e8e3533bbcb736c6795daab2](https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2)\".",
    "created_at": "2016-08-24T14:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350689",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[341b49b925dea6aa815b42abec0cfd9d4ffd4da4](https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4)" to "[a57e6c37a7147426e8e3533bbcb736c6795daab2](https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2)".



---

archive/issue_comments_350690.json:
```json
{
    "body": "**Changing commit** from \"[a57e6c37a7147426e8e3533bbcb736c6795daab2](https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2)\" to \"[d23169ad79e100a44997c64492539961efd1c45c](https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c)\".",
    "created_at": "2016-08-25T00:46:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350690",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a57e6c37a7147426e8e3533bbcb736c6795daab2](https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2)" to "[d23169ad79e100a44997c64492539961efd1c45c](https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c)".



---

archive/issue_comments_350691.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c\">d23169a</a></td><td><code>Moved Sage-specific Pari conversion functions to separate file.</code></td></tr></table>\n",
    "created_at": "2016-08-25T00:46:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350691",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c">d23169a</a></td><td><code>Moved Sage-specific Pari conversion functions to separate file.</code></td></tr></table>




---

archive/issue_comments_350692.json:
```json
{
    "body": "<a id='comment:25'></a>\nOk, so I managed to move all Sage-specific conversion functions from `PariInstance` to a separate file. We're getting closer to the goal: the only imports left in `pari_instance.p??` from the sage library are\n\n```\nfrom sage.ext.memory import init_memory_functions\nfrom sage.misc.superseded import deprecation, deprecated_function_alias\n```\n\nThere's a couple of conversion functions left in `PariInstance` which are not specific to Sage:\n\n```\ncdef gen new_gen_from_int(self, int value)\ncdef gen new_t_POL_from_int_star(self, int *vals, int length, long varnum)\ncdef gen double_to_gen_c(self, double)\ncdef GEN double_to_GEN(self, double)\n```\n\nplus a python method `PariInstance.double_to_gen`. Should we put these in `convert.pyx`, or maybe another file?\n\nNote that `new_gen_from_int` is only called once in `padic_capped_relative_element.pyx`, and just to create 0.\n\nIt is also not very clear to me what the purpose of `double_to_gen` and `double_to_gen_c` is. `double_to_gen_c` is called only in line 1585 of `real_double.pyx`, and that's in a `def`ed function. Is this really faster than calling `double_to_gen`?\n\nAnd what's the meaning of this, anyway:\n\n```\nsage: pari(0.1) == pari.double_to_gen(0.1)\nFalse\nsage: pari(0.1) == pari(0.1)\nTrue\nsage: pari.double_to_gen(0.1) == pari.double_to_gen(0.1)\nTrue\nsage: pari(0.1) - pari.double_to_gen(0.1)\n-5.54975987041018 E-18\nsage: pari(0.1) - pari(0.1)\n0.E-20\nsage: pari.double_to_gen(0.1) - pari.double_to_gen(0.1)\n0.E-20\n```\n\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c\">d23169a</a></td><td><code>Moved Sage-specific Pari conversion functions to separate file.</code></td></tr></table>\n",
    "created_at": "2016-08-25T01:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350692",
    "user": "https://github.com/defeo"
}
```

<a id='comment:25'></a>
Ok, so I managed to move all Sage-specific conversion functions from `PariInstance` to a separate file. We're getting closer to the goal: the only imports left in `pari_instance.p??` from the sage library are

```
from sage.ext.memory import init_memory_functions
from sage.misc.superseded import deprecation, deprecated_function_alias
```

There's a couple of conversion functions left in `PariInstance` which are not specific to Sage:

```
cdef gen new_gen_from_int(self, int value)
cdef gen new_t_POL_from_int_star(self, int *vals, int length, long varnum)
cdef gen double_to_gen_c(self, double)
cdef GEN double_to_GEN(self, double)
```

plus a python method `PariInstance.double_to_gen`. Should we put these in `convert.pyx`, or maybe another file?

Note that `new_gen_from_int` is only called once in `padic_capped_relative_element.pyx`, and just to create 0.

It is also not very clear to me what the purpose of `double_to_gen` and `double_to_gen_c` is. `double_to_gen_c` is called only in line 1585 of `real_double.pyx`, and that's in a `def`ed function. Is this really faster than calling `double_to_gen`?

And what's the meaning of this, anyway:

```
sage: pari(0.1) == pari.double_to_gen(0.1)
False
sage: pari(0.1) == pari(0.1)
True
sage: pari.double_to_gen(0.1) == pari.double_to_gen(0.1)
True
sage: pari(0.1) - pari.double_to_gen(0.1)
-5.54975987041018 E-18
sage: pari(0.1) - pari(0.1)
0.E-20
sage: pari.double_to_gen(0.1) - pari.double_to_gen(0.1)
0.E-20
```


---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c">d23169a</a></td><td><code>Moved Sage-specific Pari conversion functions to separate file.</code></td></tr></table>




---

archive/issue_comments_350693.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [defeo](#comment%3A25):\n> Ok, so I managed to move all Sage-specific conversion functions from `PariInstance` to a separate file. We're getting closer to the goal: the only imports left in `pari_instance.p??` from the sage library are\n> \n> ```\n> from sage.ext.memory import init_memory_functions\n> from sage.misc.superseded import deprecation, deprecated_function_alias\n> ```\n> \n> There's a couple of conversion functions left in `PariInstance` which are not specific to Sage:\n> \n> ```\n> cdef gen new_gen_from_int(self, int value)\n> cdef gen new_t_POL_from_int_star(self, int *vals, int length, long varnum)\n> cdef gen double_to_gen_c(self, double)\n> cdef GEN double_to_GEN(self, double)\n> ```\n> \n> plus a python method `PariInstance.double_to_gen`. Should we put these in `convert.pyx`\n\n\nFine for me.\n\n> Note that `new_gen_from_int` is only called once in `padic_capped_relative_element.pyx`, and just to create 0.\n> \n> It is also not very clear to me what the purpose of `double_to_gen` and `double_to_gen_c` is.\n\n\n`double_to_gen` seems unused and untested. I do not mind removing it.\n\n> `double_to_gen_c` is called only in line 1585 of `real_double.pyx`, and that's in a `def`ed function. Is this really faster than calling `double_to_gen`?\n\n\nObviously yes. Calling a `cdef` function is much faster than calling a `def` function. It does not matter where it is called from. But I would suggest renaming `double_to_gen_c` to `double_to_gen`.",
    "created_at": "2016-08-27T18:54:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350693",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
Replying to [defeo](#comment%3A25):
> Ok, so I managed to move all Sage-specific conversion functions from `PariInstance` to a separate file. We're getting closer to the goal: the only imports left in `pari_instance.p??` from the sage library are
> 
> ```
> from sage.ext.memory import init_memory_functions
> from sage.misc.superseded import deprecation, deprecated_function_alias
> ```
> 
> There's a couple of conversion functions left in `PariInstance` which are not specific to Sage:
> 
> ```
> cdef gen new_gen_from_int(self, int value)
> cdef gen new_t_POL_from_int_star(self, int *vals, int length, long varnum)
> cdef gen double_to_gen_c(self, double)
> cdef GEN double_to_GEN(self, double)
> ```
> 
> plus a python method `PariInstance.double_to_gen`. Should we put these in `convert.pyx`


Fine for me.

> Note that `new_gen_from_int` is only called once in `padic_capped_relative_element.pyx`, and just to create 0.
> 
> It is also not very clear to me what the purpose of `double_to_gen` and `double_to_gen_c` is.


`double_to_gen` seems unused and untested. I do not mind removing it.

> `double_to_gen_c` is called only in line 1585 of `real_double.pyx`, and that's in a `def`ed function. Is this really faster than calling `double_to_gen`?


Obviously yes. Calling a `cdef` function is much faster than calling a `def` function. It does not matter where it is called from. But I would suggest renaming `double_to_gen_c` to `double_to_gen`.



---

archive/issue_comments_350694.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [defeo](#comment%3A25):\n> \n> ```\n> sage: pari(0.1) == pari.double_to_gen(0.1)\n> False\n> ```\n\n\nThat's a \"feature\" because of `RealLiteral`:\n\n```\nsage: x = RR(0.1); y = RR(float(0.1))\nsage: x == y\nTrue\nsage: parent(x) is parent(y)\nTrue\nsage: RR64 = RealField(64)\nsage: RR64(x) == RR64(y)\nFalse\nsage: pari(x) == pari(y)\nFalse\n```",
    "created_at": "2016-08-27T19:06:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350694",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>
Replying to [defeo](#comment%3A25):
> 
> ```
> sage: pari(0.1) == pari.double_to_gen(0.1)
> False
> ```


That's a "feature" because of `RealLiteral`:

```
sage: x = RR(0.1); y = RR(float(0.1))
sage: x == y
True
sage: parent(x) is parent(y)
True
sage: RR64 = RealField(64)
sage: RR64(x) == RR64(y)
False
sage: pari(x) == pari(y)
False
```



---

archive/issue_comments_350695.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246\">c7b5d6d</a></td><td><code>Moved more conversion functions to convert.pyx</code></td></tr></table>\n",
    "created_at": "2016-09-04T01:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350695",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246">c7b5d6d</a></td><td><code>Moved more conversion functions to convert.pyx</code></td></tr></table>




---

archive/issue_comments_350696.json:
```json
{
    "body": "**Changing commit** from \"[d23169ad79e100a44997c64492539961efd1c45c](https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c)\" to \"[c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246](https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246)\".",
    "created_at": "2016-09-04T01:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350696",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d23169ad79e100a44997c64492539961efd1c45c](https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c)" to "[c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246](https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246)".



---

archive/issue_comments_350697.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2\">a8b8b7c</a></td><td><code>Fixed minor bugs, changed behaviour of `pari(complex(x,y))`</code></td></tr></table>\n",
    "created_at": "2016-09-04T01:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350697",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2">a8b8b7c</a></td><td><code>Fixed minor bugs, changed behaviour of `pari(complex(x,y))`</code></td></tr></table>




---

archive/issue_comments_350698.json:
```json
{
    "body": "**Changing commit** from \"[c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246](https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246)\" to \"[a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2](https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2)\".",
    "created_at": "2016-09-04T01:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246](https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246)" to "[a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2](https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2)".



---

archive/issue_comments_350699.json:
```json
{
    "body": "<a id='comment:30'></a>\nYou might consider a separate ticket for moving the conversion functions.",
    "created_at": "2016-09-04T10:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350699",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
You might consider a separate ticket for moving the conversion functions.



---

archive/issue_comments_350700.json:
```json
{
    "body": "**Changing branch** from \"[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)\" to \"[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)\".",
    "created_at": "2016-09-05T15:21:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350700",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)" to "[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)".



---

archive/issue_comments_350701.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)\" to \"[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)\".",
    "created_at": "2016-09-05T15:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350701",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)" to "[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)".



---

archive/issue_comments_350702.json:
```json
{
    "body": "<a id='comment:32'></a>\nWhy did you remove `pari.stacksize()` and similar? I would keep them as methods of `pari`.",
    "created_at": "2016-09-05T15:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350702",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>
Why did you remove `pari.stacksize()` and similar? I would keep them as methods of `pari`.



---

archive/issue_comments_350703.json:
```json
{
    "body": "**Changing branch** from \"[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)\" to \"[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)\".",
    "created_at": "2016-09-05T15:26:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350703",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)" to "[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)".



---

archive/issue_comments_350704.json:
```json
{
    "body": "**Changing commit** from \"[a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2](https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2)\" to \"[eaa4be48d560a36c3f205381e742052d82db10b6](https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6)\".",
    "created_at": "2016-09-05T15:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350704",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2](https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2)" to "[eaa4be48d560a36c3f205381e742052d82db10b6](https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6)".



---

archive/issue_comments_350705.json:
```json
{
    "body": "<a id='comment:34'></a>\nI don't really see the point of this new `init()` function. What's wrong with using the `__init__` method for this?\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6\">eaa4be4</a></td><td><code>Merge tag '7.4.beta3' into t/20241/ticket/20241</code></td></tr></table>\n",
    "created_at": "2016-09-05T15:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350705",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
I don't really see the point of this new `init()` function. What's wrong with using the `__init__` method for this?

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6">eaa4be4</a></td><td><code>Merge tag '7.4.beta3' into t/20241/ticket/20241</code></td></tr></table>




---

archive/issue_comments_350706.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)\" to \"[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)\".",
    "created_at": "2016-09-06T16:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350706",
    "user": "https://github.com/defeo"
}
```

**Changing branch** from "[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)" to "[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)".



---

archive/issue_comments_350707.json:
```json
{
    "body": "**Changing commit** from \"[eaa4be48d560a36c3f205381e742052d82db10b6](https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6)\" to \"[69adf8c133e5b6a3871335b2fb47ad08cfb32ae2](https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2)\".",
    "created_at": "2016-09-06T16:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350707",
    "user": "https://github.com/defeo"
}
```

**Changing commit** from "[eaa4be48d560a36c3f205381e742052d82db10b6](https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6)" to "[69adf8c133e5b6a3871335b2fb47ad08cfb32ae2](https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2)".



---

archive/issue_comments_350708.json:
```json
{
    "body": "<a id='comment:36'></a>\nAgreed to revert to a normal constructor, no `init()` factory method.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66f7ca6de9bdcaaafe099d78a7981ce8f596fddb\">66f7ca6</a></td><td><code>Updated docstrings and copyright headers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a252743b6dff88a93ba3bba8259efdf3149dce6a\">a252743</a></td><td><code>Removed reduntant new_gen_from_int function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d28213581cbcd1793a6717f426acf7680d57c179\">d282135</a></td><td><code>Reverted to constructor for PariInstance, no factory method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7852f1cf1e190db6da1bfe8b9ee1e0f76953f7b2\">7852f1c</a></td><td><code>Cosmetic change</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2\">69adf8c</a></td><td><code>Fixed docstring for deprecated method</code></td></tr></table>\n",
    "created_at": "2016-09-06T16:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350708",
    "user": "https://github.com/defeo"
}
```

<a id='comment:36'></a>
Agreed to revert to a normal constructor, no `init()` factory method.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66f7ca6de9bdcaaafe099d78a7981ce8f596fddb">66f7ca6</a></td><td><code>Updated docstrings and copyright headers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a252743b6dff88a93ba3bba8259efdf3149dce6a">a252743</a></td><td><code>Removed reduntant new_gen_from_int function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d28213581cbcd1793a6717f426acf7680d57c179">d282135</a></td><td><code>Reverted to constructor for PariInstance, no factory method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7852f1cf1e190db6da1bfe8b9ee1e0f76953f7b2">7852f1c</a></td><td><code>Cosmetic change</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2">69adf8c</a></td><td><code>Fixed docstring for deprecated method</code></td></tr></table>




---

archive/issue_comments_350709.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2016-09-06T16:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350709",
    "user": "https://github.com/defeo"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_350710.json:
```json
{
    "body": "**Changing branch** from \"[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)\" to \"[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)\".",
    "created_at": "2016-09-06T17:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350710",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)" to "[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)".



---

archive/issue_comments_350711.json:
```json
{
    "body": "**Changing commit** from \"[69adf8c133e5b6a3871335b2fb47ad08cfb32ae2](https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2)\" to \"[3151ec4685b19979f21db9aa17afbc472f962d7f](https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f)\".",
    "created_at": "2016-09-06T17:28:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350711",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[69adf8c133e5b6a3871335b2fb47ad08cfb32ae2](https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2)" to "[3151ec4685b19979f21db9aa17afbc472f962d7f](https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f)".



---

archive/issue_comments_350712.json:
```json
{
    "body": "<a id='comment:38'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bfd42ab7821cb8d9796b3b0b78bc7b80a58b629\">7bfd42a</a></td><td><code>Merge tag '7.4.beta2' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/343131a9951dc842c462809b9366b13416382dfc\">343131a</a></td><td><code>Fix doctest for Trac #20767</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a501048a8480fd66300c37ff614969469509d189\">a501048</a></td><td><code>Move category attribute lookup to CategoryObject.getattr_from_category()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fabb7a5dc50518946d1913488bf4a0444730c0f\">0fabb7a</a></td><td><code>Optimize CategoryObject.getattr_from_category()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74041f30d8de4c15055345f14340a4f443236ffa\">74041f3</a></td><td><code>Mark broken testsuites as # known bug</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83cca0fe367c5757f9c590fd157a0ad8a2825315\">83cca0f</a></td><td><code>Merge commit '343131a9951dc842c462809b9366b13416382dfc'; commit '91c436752ba82d512efdf67e2890d5ecbe0b7234'; commit '74041f30d8de4c15055345f14340a4f443236ffa' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f\">3151ec4</a></td><td><code>Separate Sage-specific components from generic C-interface in PariInstance</code></td></tr></table>\n",
    "created_at": "2016-09-06T17:28:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350712",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bfd42ab7821cb8d9796b3b0b78bc7b80a58b629">7bfd42a</a></td><td><code>Merge tag '7.4.beta2' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/343131a9951dc842c462809b9366b13416382dfc">343131a</a></td><td><code>Fix doctest for Trac #20767</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a501048a8480fd66300c37ff614969469509d189">a501048</a></td><td><code>Move category attribute lookup to CategoryObject.getattr_from_category()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fabb7a5dc50518946d1913488bf4a0444730c0f">0fabb7a</a></td><td><code>Optimize CategoryObject.getattr_from_category()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74041f30d8de4c15055345f14340a4f443236ffa">74041f3</a></td><td><code>Mark broken testsuites as # known bug</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83cca0fe367c5757f9c590fd157a0ad8a2825315">83cca0f</a></td><td><code>Merge commit '343131a9951dc842c462809b9366b13416382dfc'; commit '91c436752ba82d512efdf67e2890d5ecbe0b7234'; commit '74041f30d8de4c15055345f14340a4f443236ffa' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f">3151ec4</a></td><td><code>Separate Sage-specific components from generic C-interface in PariInstance</code></td></tr></table>




---

archive/issue_comments_350713.json:
```json
{
    "body": "**Changing commit** from \"[3151ec4685b19979f21db9aa17afbc472f962d7f](https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f)\" to \"[f35e562311b954e66516d3e111311b4d573480a5](https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5)\".",
    "created_at": "2016-09-06T17:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350713",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3151ec4685b19979f21db9aa17afbc472f962d7f](https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f)" to "[f35e562311b954e66516d3e111311b4d573480a5](https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5)".



---

archive/issue_comments_350714.json:
```json
{
    "body": "<a id='comment:39'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5\">f35e562</a></td><td><code>Separate Sage-specific components from generic C-interface in PariInstance</code></td></tr></table>\n",
    "created_at": "2016-09-06T17:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350714",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5">f35e562</a></td><td><code>Separate Sage-specific components from generic C-interface in PariInstance</code></td></tr></table>




---

archive/issue_comments_350715.json:
```json
{
    "body": "**Changing commit** from \"[f35e562311b954e66516d3e111311b4d573480a5](https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5)\" to \"[e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899](https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899)\".",
    "created_at": "2016-09-06T17:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350715",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f35e562311b954e66516d3e111311b4d573480a5](https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5)" to "[e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899](https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899)".



---

archive/issue_comments_350716.json:
```json
{
    "body": "<a id='comment:40'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899\">e363e4c</a></td><td><code>Simplify module_list</code></td></tr></table>\n",
    "created_at": "2016-09-06T17:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350716",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899">e363e4c</a></td><td><code>Simplify module_list</code></td></tr></table>




---

archive/issue_comments_350717.json:
```json
{
    "body": "<a id='comment:41'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515\">968519c</a></td><td><code>Cleanup imports; add __future__ statements</code></td></tr></table>\n",
    "created_at": "2016-09-06T21:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350717",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515">968519c</a></td><td><code>Cleanup imports; add __future__ statements</code></td></tr></table>




---

archive/issue_comments_350718.json:
```json
{
    "body": "**Changing commit** from \"[e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899](https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899)\" to \"[968519c0b552d8e94262b58580fe2003619bd515](https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515)\".",
    "created_at": "2016-09-06T21:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350718",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899](https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899)" to "[968519c0b552d8e94262b58580fe2003619bd515](https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515)".



---

archive/issue_comments_350719.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)\" to \"[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)\".",
    "created_at": "2016-09-21T14:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350719",
    "user": "https://github.com/defeo"
}
```

**Changing branch** from "[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)" to "[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)".



---

archive/issue_comments_350720.json:
```json
{
    "body": "**Changing commit** from \"[968519c0b552d8e94262b58580fe2003619bd515](https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515)\" to \"[e88d56cdc1500da91142c11191b486fd1666a787](https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787)\".",
    "created_at": "2016-09-21T15:21:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350720",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[968519c0b552d8e94262b58580fe2003619bd515](https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515)" to "[e88d56cdc1500da91142c11191b486fd1666a787](https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787)".



---

archive/issue_comments_350721.json:
```json
{
    "body": "<a id='comment:43'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787\">e88d56c</a></td><td><code>Fixed broken doctest in auto-generationy</code></td></tr></table>\n",
    "created_at": "2016-09-21T15:21:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350721",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787">e88d56c</a></td><td><code>Fixed broken doctest in auto-generationy</code></td></tr></table>




---

archive/issue_comments_350722.json:
```json
{
    "body": "<a id='comment:44'></a>\nJust a reminder: I plan to review this when all dependencies have been merged. Unfortunately, this is currently blocked by #21441.",
    "created_at": "2016-09-21T15:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350722",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'></a>
Just a reminder: I plan to review this when all dependencies have been merged. Unfortunately, this is currently blocked by #21441.



---

archive/issue_comments_350723.json:
```json
{
    "body": "**Changing branch** from \"[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)\" to \"[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)\".",
    "created_at": "2016-10-10T08:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350723",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)" to "[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)".



---

archive/issue_comments_350724.json:
```json
{
    "body": "**Changing commit** from \"[e88d56cdc1500da91142c11191b486fd1666a787](https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787)\" to \"[57e1cbaf2c5a4d43d3796037577696a709a1138d](https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d)\".",
    "created_at": "2016-10-10T08:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350724",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[e88d56cdc1500da91142c11191b486fd1666a787](https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787)" to "[57e1cbaf2c5a4d43d3796037577696a709a1138d](https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d)".



---

archive/issue_comments_350725.json:
```json
{
    "body": "<a id='comment:46'></a>\nMerged latest develop.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d\">57e1cba</a></td><td><code>Merge tag '7.4.rc0' into t/20241/ticket/20241</code></td></tr></table>\n",
    "created_at": "2016-10-10T08:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350725",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'></a>
Merged latest develop.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d">57e1cba</a></td><td><code>Merge tag '7.4.rc0' into t/20241/ticket/20241</code></td></tr></table>




---

archive/issue_comments_350726.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2016-10-10T08:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350726",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_comments_350727.json:
```json
{
    "body": "**Changing dependencies** from \"#21158\" to \"\".",
    "created_at": "2016-10-10T08:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350727",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#21158" to "".



---

archive/issue_comments_350728.json:
```json
{
    "body": "<a id='comment:48'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9\">6ef8de2</a></td><td><code>Cosmetic changes to sage.libs.pari.convert</code></td></tr></table>\n",
    "created_at": "2016-10-11T08:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350728",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9">6ef8de2</a></td><td><code>Cosmetic changes to sage.libs.pari.convert</code></td></tr></table>




---

archive/issue_comments_350729.json:
```json
{
    "body": "**Changing commit** from \"[57e1cbaf2c5a4d43d3796037577696a709a1138d](https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d)\" to \"[6ef8de2e479449507cf2fddcc67c3b0733820fd9](https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9)\".",
    "created_at": "2016-10-11T08:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350729",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[57e1cbaf2c5a4d43d3796037577696a709a1138d](https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d)" to "[6ef8de2e479449507cf2fddcc67c3b0733820fd9](https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9)".



---

archive/issue_comments_350730.json:
```json
{
    "body": "<a id='comment:49'></a>\nI am wondering what to do with `convert_sage`. First of all, it contains conversions both to/from GMP as well as conversions to/from FLINT. These should be split up in two different modules (I will do that).\n\nBut a bigger question is: should these become part of Sage or part of CyPari? Those conversion routines are not directly related to Sage, but to GMP/FLINT which may be of interest to other libraries too.",
    "created_at": "2016-10-11T09:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350730",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:49'></a>
I am wondering what to do with `convert_sage`. First of all, it contains conversions both to/from GMP as well as conversions to/from FLINT. These should be split up in two different modules (I will do that).

But a bigger question is: should these become part of Sage or part of CyPari? Those conversion routines are not directly related to Sage, but to GMP/FLINT which may be of interest to other libraries too.



---

archive/issue_comments_350731.json:
```json
{
    "body": "<a id='comment:50'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd\">fb54db3</a></td><td><code>Cosmetic changes to sage.libs.pari.convert</code></td></tr></table>\n",
    "created_at": "2016-10-11T09:27:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350731",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd">fb54db3</a></td><td><code>Cosmetic changes to sage.libs.pari.convert</code></td></tr></table>




---

archive/issue_comments_350732.json:
```json
{
    "body": "**Changing commit** from \"[6ef8de2e479449507cf2fddcc67c3b0733820fd9](https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9)\" to \"[fb54db3ed52b3718cb9aef8eec29101c5ce5dadd](https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd)\".",
    "created_at": "2016-10-11T09:27:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350732",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6ef8de2e479449507cf2fddcc67c3b0733820fd9](https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9)" to "[fb54db3ed52b3718cb9aef8eec29101c5ce5dadd](https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd)".



---

archive/issue_comments_350733.json:
```json
{
    "body": "**Changing commit** from \"[fb54db3ed52b3718cb9aef8eec29101c5ce5dadd](https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd)\" to \"[686d2997e355918a4b73608ebd87638391eb4580](https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580)\".",
    "created_at": "2016-10-11T09:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350733",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fb54db3ed52b3718cb9aef8eec29101c5ce5dadd](https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd)" to "[686d2997e355918a4b73608ebd87638391eb4580](https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580)".



---

archive/issue_comments_350734.json:
```json
{
    "body": "<a id='comment:51'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580\">686d299</a></td><td><code>Split convert_sage in convert_flint and convert_gmp</code></td></tr></table>\n",
    "created_at": "2016-10-11T09:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350734",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580">686d299</a></td><td><code>Split convert_sage in convert_flint and convert_gmp</code></td></tr></table>




---

archive/issue_comments_350735.json:
```json
{
    "body": "<a id='comment:52'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c\">5411780</a></td><td><code>Undo moving of imports in gentoobj()</code></td></tr></table>\n",
    "created_at": "2016-10-11T10:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350735",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c">5411780</a></td><td><code>Undo moving of imports in gentoobj()</code></td></tr></table>




---

archive/issue_comments_350736.json:
```json
{
    "body": "**Changing commit** from \"[686d2997e355918a4b73608ebd87638391eb4580](https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580)\" to \"[54117801c99e58bf3ab0e981d3719ea11704fa4c](https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c)\".",
    "created_at": "2016-10-11T10:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350736",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[686d2997e355918a4b73608ebd87638391eb4580](https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580)" to "[54117801c99e58bf3ab0e981d3719ea11704fa4c](https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c)".



---

archive/issue_comments_350737.json:
```json
{
    "body": "<a id='comment:53'></a>\nReplying to [jdemeyer](#comment%3A49):\n> I am wondering what to do with `convert_sage`. First of all, it contains conversions both to/from GMP as well as conversions to/from FLINT. These should be split up in two different modules (I will do that).\n\n\nGood. Thx.\n\n> But a bigger question is: should these become part of Sage or part of CyPari? Those conversion routines are not directly related to Sage, but to GMP/FLINT which may be of interest to other libraries too.\n\n\nIf they where in CyPari, then CyPari would need GMP/Flint in order to compile, wouldn't it?",
    "created_at": "2016-10-11T13:29:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350737",
    "user": "https://github.com/defeo"
}
```

<a id='comment:53'></a>
Replying to [jdemeyer](#comment%3A49):
> I am wondering what to do with `convert_sage`. First of all, it contains conversions both to/from GMP as well as conversions to/from FLINT. These should be split up in two different modules (I will do that).


Good. Thx.

> But a bigger question is: should these become part of Sage or part of CyPari? Those conversion routines are not directly related to Sage, but to GMP/FLINT which may be of interest to other libraries too.


If they where in CyPari, then CyPari would need GMP/Flint in order to compile, wouldn't it?



---

archive/issue_comments_350738.json:
```json
{
    "body": "<a id='comment:54'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76db2470238ed9b1beff8296b89724ebe573f111\">76db247</a></td><td><code>pari_objtogen -> objtogen</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d2ad6a97a3c0750768dfa770c113a7cd30c29de\">4d2ad6a</a></td><td><code>Minor cleanup in pari imports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c\">d522155</a></td><td><code>Use \"self\" to name self argument</code></td></tr></table>\n",
    "created_at": "2016-10-11T13:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350738",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76db2470238ed9b1beff8296b89724ebe573f111">76db247</a></td><td><code>pari_objtogen -> objtogen</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d2ad6a97a3c0750768dfa770c113a7cd30c29de">4d2ad6a</a></td><td><code>Minor cleanup in pari imports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c">d522155</a></td><td><code>Use "self" to name self argument</code></td></tr></table>




---

archive/issue_comments_350739.json:
```json
{
    "body": "**Changing commit** from \"[54117801c99e58bf3ab0e981d3719ea11704fa4c](https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c)\" to \"[d522155ff2f79eed03f73a637d8164cff9cf6f6c](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c)\".",
    "created_at": "2016-10-11T13:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350739",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[54117801c99e58bf3ab0e981d3719ea11704fa4c](https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c)" to "[d522155ff2f79eed03f73a637d8164cff9cf6f6c](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c)".



---

archive/issue_comments_350740.json:
```json
{
    "body": "<a id='comment:55'></a>\nReplying to [defeo](#comment%3A53):\n> If they where in CyPari, then CyPari would need GMP/Flint in order to compile, wouldn't it?\n\n\nYes, but those could be optional dependencies (like optional packages in Sage).",
    "created_at": "2016-10-11T14:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350740",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'></a>
Replying to [defeo](#comment%3A53):
> If they where in CyPari, then CyPari would need GMP/Flint in order to compile, wouldn't it?


Yes, but those could be optional dependencies (like optional packages in Sage).



---

archive/issue_comments_350741.json:
```json
{
    "body": "<a id='comment:56'></a>\nAlso, `cysignals` currently has an *optional* dependency on PARI. It seems to work fine.",
    "created_at": "2016-10-11T14:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350741",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'></a>
Also, `cysignals` currently has an *optional* dependency on PARI. It seems to work fine.



---

archive/issue_comments_350742.json:
```json
{
    "body": "<a id='comment:57'></a>\nFor me, this ticket is good to merge. Luca, can you look at the commits that I added (each of them is relatively small and self-contained)?",
    "created_at": "2016-10-11T14:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350742",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:57'></a>
For me, this ticket is good to merge. Luca, can you look at the commits that I added (each of them is relatively small and self-contained)?



---

archive/issue_comments_350743.json:
```json
{
    "body": "<a id='comment:58'></a>\nI think commit [d522155ff2f79eed03f73a637d8164cff9cf6f6c](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c) is a little brittle. \n\nIf I understand auto-generation correctly, this doesn't break because no method of `PariInstance_auto` has a `PariArgumentSeriesPrec` argument (prototype `P`). I don't know if it is safe to assume that PARI will never have such a function.",
    "created_at": "2016-10-12T13:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350743",
    "user": "https://github.com/defeo"
}
```

<a id='comment:58'></a>
I think commit [d522155ff2f79eed03f73a637d8164cff9cf6f6c](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c) is a little brittle. 

If I understand auto-generation correctly, this doesn't break because no method of `PariInstance_auto` has a `PariArgumentSeriesPrec` argument (prototype `P`). I don't know if it is safe to assume that PARI will never have such a function.



---

archive/issue_comments_350744.json:
```json
{
    "body": "<a id='comment:59'></a>\nAlso, I'm not completely happy about [4d2ad6a97a3c0750768dfa770c113a7cd30c29de](https://github.com/sagemath/sagetrac-mirror/commit/4d2ad6a97a3c0750768dfa770c113a7cd30c29de). I feel it's bad cimporting `pari_instace` in `padic_capped_relative_element.pyx`.\n\nIn my opinion, external software should use the \"public\" `pari` API whenever possible, unless it has good reasons to fiddle with the internals of CyPari. Is there any good reason here?",
    "created_at": "2016-10-12T14:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350744",
    "user": "https://github.com/defeo"
}
```

<a id='comment:59'></a>
Also, I'm not completely happy about [4d2ad6a97a3c0750768dfa770c113a7cd30c29de](https://github.com/sagemath/sagetrac-mirror/commit/4d2ad6a97a3c0750768dfa770c113a7cd30c29de). I feel it's bad cimporting `pari_instace` in `padic_capped_relative_element.pyx`.

In my opinion, external software should use the "public" `pari` API whenever possible, unless it has good reasons to fiddle with the internals of CyPari. Is there any good reason here?



---

archive/issue_comments_350745.json:
```json
{
    "body": "<a id='comment:60'></a>\nConcerning `convert_gmp.pyx`, docstrings and function names are a bit schizophrenic on whether these are converstion to/from GMP or MPIR. Presumably they work with both?",
    "created_at": "2016-10-12T14:27:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350745",
    "user": "https://github.com/defeo"
}
```

<a id='comment:60'></a>
Concerning `convert_gmp.pyx`, docstrings and function names are a bit schizophrenic on whether these are converstion to/from GMP or MPIR. Presumably they work with both?



---

archive/issue_comments_350746.json:
```json
{
    "body": "<a id='comment:61'></a>\nReplying to [defeo](#comment%3A59):\n> In my opinion, external software should use the \"public\" `pari` API whenever possible\n\n\nI consider this as part of the public API.  Why do you consider the Python API public but the Cython API private?",
    "created_at": "2016-10-12T14:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350746",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:61'></a>
Replying to [defeo](#comment%3A59):
> In my opinion, external software should use the "public" `pari` API whenever possible


I consider this as part of the public API.  Why do you consider the Python API public but the Cython API private?



---

archive/issue_comments_350747.json:
```json
{
    "body": "<a id='comment:62'></a>\nReplying to [jdemeyer](#comment%3A61):\n> Replying to [defeo](#comment%3A59):\n> > In my opinion, external software should use the \"public\" `pari` API whenever possible\n\n> \n> I consider this as part of the public API.  Why do you consider the Python API public but the Cython API private?\n\n\nIt's not exactly that. I consider the Cython API also public (unless there are underscores). But when there is duplication of functionality (e.g., any `def`ed or `cpdef`ed method of `pari_instance`), I give priority to the Python API.\n\nI mean, if all you want is to get PARI's zero, just do like any common mortal and call `pari.zero()`. Shorter, more readable, easier to understand.\n\nOf course, it's not a big deal.",
    "created_at": "2016-10-12T14:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350747",
    "user": "https://github.com/defeo"
}
```

<a id='comment:62'></a>
Replying to [jdemeyer](#comment%3A61):
> Replying to [defeo](#comment%3A59):
> > In my opinion, external software should use the "public" `pari` API whenever possible

> 
> I consider this as part of the public API.  Why do you consider the Python API public but the Cython API private?


It's not exactly that. I consider the Cython API also public (unless there are underscores). But when there is duplication of functionality (e.g., any `def`ed or `cpdef`ed method of `pari_instance`), I give priority to the Python API.

I mean, if all you want is to get PARI's zero, just do like any common mortal and call `pari.zero()`. Shorter, more readable, easier to understand.

Of course, it's not a big deal.



---

archive/issue_comments_350748.json:
```json
{
    "body": "<a id='comment:63'></a>\nReplying to [defeo](#comment%3A62):\n> I mean, if all you want is to get PARI's zero, just do like any common mortal and call `pari.zero()`. Shorter, more readable, easier to understand.\n\n\n...but slower. I don't think it matters in this specific case, but we really want users to call `pari_instance.zero()` using Cython if speed is important.",
    "created_at": "2016-10-12T15:00:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350748",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:63'></a>
Replying to [defeo](#comment%3A62):
> I mean, if all you want is to get PARI's zero, just do like any common mortal and call `pari.zero()`. Shorter, more readable, easier to understand.


...but slower. I don't think it matters in this specific case, but we really want users to call `pari_instance.zero()` using Cython if speed is important.



---

archive/issue_comments_350749.json:
```json
{
    "body": "<a id='comment:64'></a>\n> ...but slower.\n\n\nBy how much?\n\n> I don't think it matters in this specific case, but we really want users to call `pari_instance.zero()` using Cython if speed is important.\n\n\nThat's why there is no underscore in front of `pari_instance`. But, as you say, speed is not important here.",
    "created_at": "2016-10-12T15:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350749",
    "user": "https://github.com/defeo"
}
```

<a id='comment:64'></a>
> ...but slower.


By how much?

> I don't think it matters in this specific case, but we really want users to call `pari_instance.zero()` using Cython if speed is important.


That's why there is no underscore in front of `pari_instance`. But, as you say, speed is not important here.



---

archive/issue_comments_350750.json:
```json
{
    "body": "<a id='comment:65'></a>\nReplying to [defeo](#comment%3A64):\n> > ...but slower.\n\n> \n> By how much?\n\n\nI haven't profiled, but I would guess at least an order of magnitude. Python methods are slow.\n\nBut that doesn't matter, the point is that `pari_instance` and the `zero()` method are part of the public Cython API.",
    "created_at": "2016-10-12T15:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350750",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:65'></a>
Replying to [defeo](#comment%3A64):
> > ...but slower.

> 
> By how much?


I haven't profiled, but I would guess at least an order of magnitude. Python methods are slow.

But that doesn't matter, the point is that `pari_instance` and the `zero()` method are part of the public Cython API.



---

archive/issue_comments_350751.json:
```json
{
    "body": "<a id='comment:66'></a>\n> > By how much?\n\n> \n> I haven't profiled, but I would guess at least an order of magnitude. Python methods are slow.\n\n\nI have. The overhead is ~50ns. `pari_instance.zero()` itself takes ~50ns.\n\n> But that doesn't matter,\n\n\nAs you say. Who cares about 50ns? So we agree that speed is not an argument here. In my opinion readability is, instead.\n\n> the point is that `pari_instance` and the `zero()` method are part of the public Cython API.\n\n\nI already replied to this point saying that `pari.zero()` is \"more public\". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is \"public enough\".\n\nI do not want to hold this ticket on this very minor detail. If we cannot convince each other, commit minimality wins, so the code stays as it is now.\n\nMy other two comments are more serious, though.",
    "created_at": "2016-10-12T16:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350751",
    "user": "https://github.com/defeo"
}
```

<a id='comment:66'></a>
> > By how much?

> 
> I haven't profiled, but I would guess at least an order of magnitude. Python methods are slow.


I have. The overhead is ~50ns. `pari_instance.zero()` itself takes ~50ns.

> But that doesn't matter,


As you say. Who cares about 50ns? So we agree that speed is not an argument here. In my opinion readability is, instead.

> the point is that `pari_instance` and the `zero()` method are part of the public Cython API.


I already replied to this point saying that `pari.zero()` is "more public". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is "public enough".

I do not want to hold this ticket on this very minor detail. If we cannot convince each other, commit minimality wins, so the code stays as it is now.

My other two comments are more serious, though.



---

archive/issue_comments_350752.json:
```json
{
    "body": "<a id='comment:67'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716\">6f815cd</a></td><td><code>Put back convert_code for PariInstanceArgument</code></td></tr></table>\n",
    "created_at": "2016-10-14T09:52:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350752",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:67'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716">6f815cd</a></td><td><code>Put back convert_code for PariInstanceArgument</code></td></tr></table>




---

archive/issue_comments_350753.json:
```json
{
    "body": "**Changing commit** from \"[d522155ff2f79eed03f73a637d8164cff9cf6f6c](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c)\" to \"[6f815cd0dcba998a748b59500d3820ff2efc9716](https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716)\".",
    "created_at": "2016-10-14T09:52:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350753",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d522155ff2f79eed03f73a637d8164cff9cf6f6c](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c)" to "[6f815cd0dcba998a748b59500d3820ff2efc9716](https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716)".



---

archive/issue_comments_350754.json:
```json
{
    "body": "<a id='comment:68'></a>\nReplying to [defeo](#comment%3A66):\n> I already replied to this point saying that `pari.zero()` is \"more public\". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is \"public enough\".\n\n\nCould you be convinced by\n\n```\nfrom ... cimport pari_instance as pari\n```\nand then using `pari.zero()`? IMHO, that would be equally readable as the original code while still being fast.",
    "created_at": "2016-10-14T09:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350754",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:68'></a>
Replying to [defeo](#comment%3A66):
> I already replied to this point saying that `pari.zero()` is "more public". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is "public enough".


Could you be convinced by

```
from ... cimport pari_instance as pari
```
and then using `pari.zero()`? IMHO, that would be equally readable as the original code while still being fast.



---

archive/issue_comments_350755.json:
```json
{
    "body": "<a id='comment:69'></a>\nReplying to [defeo](#comment%3A60):\n> Concerning `convert_gmp.pyx`, docstrings and function names are a bit schizophrenic on whether these are converstion to/from GMP or MPIR. Presumably they work with both?\n\n\nI totally agree that function names are really inconsistent. But I would keep the names for now, we can make a new ticket to change the names. I'll have a look at the docstrings.",
    "created_at": "2016-10-14T09:58:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350755",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:69'></a>
Replying to [defeo](#comment%3A60):
> Concerning `convert_gmp.pyx`, docstrings and function names are a bit schizophrenic on whether these are converstion to/from GMP or MPIR. Presumably they work with both?


I totally agree that function names are really inconsistent. But I would keep the names for now, we can make a new ticket to change the names. I'll have a look at the docstrings.



---

archive/issue_comments_350756.json:
```json
{
    "body": "<a id='comment:70'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7278bcff6569664e3ee8874142142c169f367f9f\">7278bcf</a></td><td><code>Improve docstrings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d\">8b3013e</a></td><td><code>Change rational_matrix() nr/nc arguments to \"long\" to match PARI</code></td></tr></table>\n",
    "created_at": "2016-10-14T10:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350756",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:70'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7278bcff6569664e3ee8874142142c169f367f9f">7278bcf</a></td><td><code>Improve docstrings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d">8b3013e</a></td><td><code>Change rational_matrix() nr/nc arguments to "long" to match PARI</code></td></tr></table>




---

archive/issue_comments_350757.json:
```json
{
    "body": "**Changing commit** from \"[6f815cd0dcba998a748b59500d3820ff2efc9716](https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716)\" to \"[8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d](https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d)\".",
    "created_at": "2016-10-14T10:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350757",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6f815cd0dcba998a748b59500d3820ff2efc9716](https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716)" to "[8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d](https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d)".



---

archive/issue_comments_350758.json:
```json
{
    "body": "<a id='comment:71'></a>\nI think this takes care of your other comments. So that leaves the `pari_instance.zero()` issue. What do you think of [comment:68]",
    "created_at": "2016-10-14T11:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350758",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:71'></a>
I think this takes care of your other comments. So that leaves the `pari_instance.zero()` issue. What do you think of [comment:68]



---

archive/issue_comments_350759.json:
```json
{
    "body": "<a id='comment:72'></a>\nReplying to [git](#comment%3A67):\n> Branch pushed to git repo; I updated commit sha1. **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716\">6f815cd</a></td><td><code>Put back convert_code for PariInstanceArgument</code></td></tr></table>\n\n\nOk, this addresses one of my concerns. But I'm curious: what's the rationale behind writing\n\n```\ndef ...(self, ...):\n    cdef PariInstance pari_instance = <PariInstance>self\n```\n\ninstead of simply writing\n\n```\ndef ...(pari_instance, ...):\n```",
    "created_at": "2016-10-14T15:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350759",
    "user": "https://github.com/defeo"
}
```

<a id='comment:72'></a>
Replying to [git](#comment%3A67):
> Branch pushed to git repo; I updated commit sha1. **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716">6f815cd</a></td><td><code>Put back convert_code for PariInstanceArgument</code></td></tr></table>


Ok, this addresses one of my concerns. But I'm curious: what's the rationale behind writing

```
def ...(self, ...):
    cdef PariInstance pari_instance = <PariInstance>self
```

instead of simply writing

```
def ...(pari_instance, ...):
```



---

archive/issue_comments_350760.json:
```json
{
    "body": "<a id='comment:73'></a>\nReplying to [jdemeyer](#comment%3A68):\n> Replying to [defeo](#comment%3A66):\n> > I already replied to this point saying that `pari.zero()` is \"more public\". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is \"public enough\".\n\n> \n> Could you be convinced by\n> \n> ```\n> from ... cimport pari_instance as pari\n> ```\n> and then using `pari.zero()`? IMHO, that would be equally readable as the original code while still being fast.\n\n\nSo it seems you care about speed, here? I thought you didn't. Why don't you retrun `pari_instance.PARI_ZERO`, then? I personally don't see how speed can matter here: it's a seldom executed if-branch in a function that is probably orders of magnitude slower than the python-call overhead.\n\nI agree that's more readable, though. I'd prefer that to the current situation.",
    "created_at": "2016-10-14T15:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350760",
    "user": "https://github.com/defeo"
}
```

<a id='comment:73'></a>
Replying to [jdemeyer](#comment%3A68):
> Replying to [defeo](#comment%3A66):
> > I already replied to this point saying that `pari.zero()` is "more public". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is "public enough".

> 
> Could you be convinced by
> 
> ```
> from ... cimport pari_instance as pari
> ```
> and then using `pari.zero()`? IMHO, that would be equally readable as the original code while still being fast.


So it seems you care about speed, here? I thought you didn't. Why don't you retrun `pari_instance.PARI_ZERO`, then? I personally don't see how speed can matter here: it's a seldom executed if-branch in a function that is probably orders of magnitude slower than the python-call overhead.

I agree that's more readable, though. I'd prefer that to the current situation.



---

archive/issue_comments_350761.json:
```json
{
    "body": "<a id='comment:74'></a>\nReplying to [defeo](#comment%3A72):\n> what's the rationale behind writing\n> \n> ```\n> def ...(self, ...):\n>     cdef PariInstance pari_instance = <PariInstance>self\n> ```\n> \n> instead of simply writing\n> \n> ```\n> def ...(pari_instance, ...):\n> ```\n\n\nThe only reason is the usual convention that the \"self\" argument of a method should be called `self`.\n\nAnd ideally, maybe we can get rid of the `pari_instance.get_series_precision()` call to avoid the `pari_instance` argument completely.",
    "created_at": "2016-10-14T16:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350761",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:74'></a>
Replying to [defeo](#comment%3A72):
> what's the rationale behind writing
> 
> ```
> def ...(self, ...):
>     cdef PariInstance pari_instance = <PariInstance>self
> ```
> 
> instead of simply writing
> 
> ```
> def ...(pari_instance, ...):
> ```


The only reason is the usual convention that the "self" argument of a method should be called `self`.

And ideally, maybe we can get rid of the `pari_instance.get_series_precision()` call to avoid the `pari_instance` argument completely.



---

archive/issue_comments_350762.json:
```json
{
    "body": "**Changing commit** from \"[8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d](https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d)\" to \"[62f227ebaf34601aa818b60ff6bf2b3d0641a953](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)\".",
    "created_at": "2016-10-15T15:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350762",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d](https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d)" to "[62f227ebaf34601aa818b60ff6bf2b3d0641a953](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)".



---

archive/issue_comments_350763.json:
```json
{
    "body": "<a id='comment:75'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953\">62f227e</a></td><td><code>cimport pari_instance as pari</code></td></tr></table>\n",
    "created_at": "2016-10-15T15:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350763",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:75'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953">62f227e</a></td><td><code>cimport pari_instance as pari</code></td></tr></table>




---

archive/issue_comments_350764.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2016-10-18T13:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350764",
    "user": "https://github.com/defeo"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_350765.json:
```json
{
    "body": "<a id='comment:76'></a>\nSorry for the delay, good to go for me.",
    "created_at": "2016-10-18T13:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350765",
    "user": "https://github.com/defeo"
}
```

<a id='comment:76'></a>
Sorry for the delay, good to go for me.



---

archive/issue_comments_350766.json:
```json
{
    "body": "<a id='comment:77'></a>\nThanks! Could you also have a look at #21703 please?",
    "created_at": "2016-10-18T16:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350766",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:77'></a>
Thanks! Could you also have a look at #21703 please?



---

archive/issue_comments_350767.json:
```json
{
    "body": "<a id='comment:78'></a>\nyup. looking at it.",
    "created_at": "2016-10-18T16:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350767",
    "user": "https://github.com/defeo"
}
```

<a id='comment:78'></a>
yup. looking at it.



---

archive/issue_events_062792.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-21T07:04:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20241#event-62792"
}
```



---

archive/issue_comments_350768.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)\" to \"[62f227ebaf34601aa818b60ff6bf2b3d0641a953](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)\".",
    "created_at": "2016-10-21T07:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20241#issuecomment-350768",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)" to "[62f227ebaf34601aa818b60ff6bf2b3d0641a953](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)".
