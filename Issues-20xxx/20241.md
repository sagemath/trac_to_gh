# Issue 20241: Separate Sage-specific components from generic C-interface in PariInstance

archive/issues_020004.json:
```json
{
    "assignees": [],
    "body": "In preparation for #20238, take out of `PariInstance` all components specific to Sage.\n\nCC:  @jdemeyer\n\nBranch/Commit: **[62f227e](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Luca De Feo**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20241_\n\n",
    "closed_at": "2016-10-21T07:04:31Z",
    "created_at": "2016-03-21T14:34:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Separate Sage-specific components from generic C-interface in PariInstance",
    "type": "issue",
    "updated_at": "2023-01-08T15:48:26Z",
    "url": "https://github.com/sagemath/sage/issues/20241",
    "user": "https://github.com/defeo"
}
```
In preparation for #20238, take out of `PariInstance` all components specific to Sage.

CC:  @jdemeyer

Branch/Commit: **[62f227e](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)**

Reviewer: **Jeroen Demeyer**

Author: **Luca De Feo**

_Issue created by migration from https://trac.sagemath.org/ticket/20241_





---

archive/issue_events_258247.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2016-03-21T14:34:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-258247"
}
```



---

archive/issue_events_258248.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2016-03-21T14:34:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "component: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-258248"
}
```



---

archive/issue_events_258249.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2016-03-21T14:34:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-258249"
}
```



---

archive/issue_comments_293905.json:
```json
{
    "body": "Branch: **[u/defeo/trac/u/defeo/pari_instance](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/trac/u/defeo/pari_instance)**",
    "created_at": "2016-03-21T14:34:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293905",
    "user": "https://github.com/defeo"
}
```

Branch: **[u/defeo/trac/u/defeo/pari_instance](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/trac/u/defeo/pari_instance)**



---

archive/issue_comments_293906.json:
```json
{
    "body": "Commit: **[799f255](https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8)**",
    "created_at": "2016-03-21T14:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293906",
    "user": "https://github.com/defeo"
}
```

Commit: **[799f255](https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8)**



---

archive/issue_comments_293907.json:
```json
{
    "body": "Dependencies: **#20217**",
    "created_at": "2016-03-21T14:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293907",
    "user": "https://github.com/defeo"
}
```

Dependencies: **#20217**



---

archive/issue_comments_293908.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI'm pushing a failed attempt at splitting `PariInstance` into a generic `PariInstance` cython type, and a Sage-specific `SagePariInstance`.\n\nThis is problematic because of the global `sage.libs.pari.pari_instance.pari` variable: it is not clear where this variable should go.\n\nSome concrete suggestions: `PariInstance` serves three main purposes:\n\n- As a wrapper around the pari stack,\n- As a collection of conversion methods to and from pari types,\n- As a namespace for a handful of functions, for lack of a better place (e.g. `primes`, `genus2_reduction`, ...)\n\nOf these, only the first one really needs a Cython type. I suggest:\n\n- To make a proper abstraction `PariStack` around the pari stack. This should not be handled as a global variable, but rather as a singleton class (we cannot have more than one pari stack, because of global variables).\n- Move conversion functions to a separate namespace, as #20226 started doing.\n- Have `PariInstance` hold a pointer to a `PariStack`. Have `gen`'s hold a pointer to a `PariInstance`. (Maybe this double wrapping is superfluous?)\n\nI don't know quite well what to do with utility functions such as `primes`. They may stay as methods of `PariInstance`, or maybe go to a different namespace as pure functions (they should take a `PariInstance` or `PariStack` as parameter, then).\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dce67fca49e515ce610539263e1e7a6f26c7bc69\">dce67fc</a></td><td><code>Move memory functions to cysignals</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bb8337295ed82c93d1a9c9f7173a4c36f97151d\">4bb8337</a></td><td><code>Rename sage_malloc -> sig_malloc and friends</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ab73c1c098478da766a061109a2a248d741e49e\">5ab73c1</a></td><td><code>Get rid of factorint_withproof_sage in PARI interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0ed97a0b2a036c3a4677d8e5dbabf6b2a6d54fc\">c0ed97a</a></td><td><code>Stop using deprecated PARI factoring features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edc5ce28655f157a13f27d2d94ae2e5d5d731bd6\">edc5ce2</a></td><td><code>Merge branch 't/20205/get_rid_of_factorint_withproof_sage_in_pari_interface' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fb408dedb22e4147ee68ae5656e643b4f1df06c\">5fb408d</a></td><td><code>Replace pari_catch_sig_on by sig_on</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5c934c5164255e352cee9ddbc780d0759b6e185\">d5c934c</a></td><td><code>Deprecate PARI nth_prime and prime_list</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7d2d7df24760cdecf0d6585972d2bf6140c1123\">d7d2d7d</a></td><td><code>Remove redundant functions from pari_instance.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/282b1878dd25528debef017d13057b68c05b3b5b\">282b187</a></td><td><code>Failed attempt to split PariInstance</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8\">799f255</a></td><td><code>Split pxd file too</code></td></tr></table>\n",
    "created_at": "2016-03-21T14:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293908",
    "user": "https://github.com/defeo"
}
```

<a id='comment:2'>Comment 2:</a>
I'm pushing a failed attempt at splitting `PariInstance` into a generic `PariInstance` cython type, and a Sage-specific `SagePariInstance`.

This is problematic because of the global `sage.libs.pari.pari_instance.pari` variable: it is not clear where this variable should go.

Some concrete suggestions: `PariInstance` serves three main purposes:

- As a wrapper around the pari stack,
- As a collection of conversion methods to and from pari types,
- As a namespace for a handful of functions, for lack of a better place (e.g. `primes`, `genus2_reduction`, ...)

Of these, only the first one really needs a Cython type. I suggest:

- To make a proper abstraction `PariStack` around the pari stack. This should not be handled as a global variable, but rather as a singleton class (we cannot have more than one pari stack, because of global variables).
- Move conversion functions to a separate namespace, as #20226 started doing.
- Have `PariInstance` hold a pointer to a `PariStack`. Have `gen`'s hold a pointer to a `PariInstance`. (Maybe this double wrapping is superfluous?)

I don't know quite well what to do with utility functions such as `primes`. They may stay as methods of `PariInstance`, or maybe go to a different namespace as pure functions (they should take a `PariInstance` or `PariStack` as parameter, then).

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dce67fca49e515ce610539263e1e7a6f26c7bc69">dce67fc</a></td><td><code>Move memory functions to cysignals</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bb8337295ed82c93d1a9c9f7173a4c36f97151d">4bb8337</a></td><td><code>Rename sage_malloc -> sig_malloc and friends</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ab73c1c098478da766a061109a2a248d741e49e">5ab73c1</a></td><td><code>Get rid of factorint_withproof_sage in PARI interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0ed97a0b2a036c3a4677d8e5dbabf6b2a6d54fc">c0ed97a</a></td><td><code>Stop using deprecated PARI factoring features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edc5ce28655f157a13f27d2d94ae2e5d5d731bd6">edc5ce2</a></td><td><code>Merge branch 't/20205/get_rid_of_factorint_withproof_sage_in_pari_interface' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fb408dedb22e4147ee68ae5656e643b4f1df06c">5fb408d</a></td><td><code>Replace pari_catch_sig_on by sig_on</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5c934c5164255e352cee9ddbc780d0759b6e185">d5c934c</a></td><td><code>Deprecate PARI nth_prime and prime_list</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7d2d7df24760cdecf0d6585972d2bf6140c1123">d7d2d7d</a></td><td><code>Remove redundant functions from pari_instance.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/282b1878dd25528debef017d13057b68c05b3b5b">282b187</a></td><td><code>Failed attempt to split PariInstance</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8">799f255</a></td><td><code>Split pxd file too</code></td></tr></table>




---

archive/issue_comments_293909.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nRegarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).",
    "created_at": "2016-04-09T05:18:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293909",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:3'>Comment 3:</a>
Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).



---

archive/issue_comments_293910.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nReplying to [@kedlaya](#comment%3A3):\n> Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).\n\nGood points. These would take a lengthy deprecation process, and are better handled after a successful separation of the interface (something we're still having a hard time with).\n\nI think the best place for this comment is in #20238, hence I'm copying it there.",
    "created_at": "2016-04-09T13:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293910",
    "user": "https://github.com/defeo"
}
```

<a id='comment:4'>Comment 4:</a>
Replying to [@kedlaya](#comment%3A3):
> Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).

Good points. These would take a lengthy deprecation process, and are better handled after a successful separation of the interface (something we're still having a hard time with).

I think the best place for this comment is in #20238, hence I'm copying it there.



---

archive/issue_comments_293911.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\n@kedlaya: I don't really understand your comment. This ticket is about the *interface* between Sage and PARI (which is a purely technical non-mathematical thing), not about how which PARI functions are used where.",
    "created_at": "2016-04-11T08:27:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293911",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'>Comment 5:</a>
@kedlaya: I don't really understand your comment. This ticket is about the *interface* between Sage and PARI (which is a purely technical non-mathematical thing), not about how which PARI functions are used where.



---

archive/issue_comments_293912.json:
```json
{
    "body": "Changed branch from **[u/defeo/trac/u/defeo/pari_instance](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/trac/u/defeo/pari_instance)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**",
    "created_at": "2016-08-08T21:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293912",
    "user": "https://github.com/defeo"
}
```

Changed branch from **[u/defeo/trac/u/defeo/pari_instance](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/trac/u/defeo/pari_instance)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**



---

archive/issue_comments_293913.json:
```json
{
    "body": "Changed commit from **[799f255](https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8)** to **[7ad5c61](https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2)**",
    "created_at": "2016-08-08T21:47:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293913",
    "user": "https://github.com/defeo"
}
```

Changed commit from **[799f255](https://github.com/sagemath/sagetrac-mirror/commit/799f2555869086a4a302313545a9b74d8e5597e8)** to **[7ad5c61](https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2)**



---

archive/issue_comments_293914.json:
```json
{
    "body": "Changed dependencies from **#20217** to **#20217, #21158**",
    "created_at": "2016-08-08T21:47:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293914",
    "user": "https://github.com/defeo"
}
```

Changed dependencies from **#20217** to **#20217, #21158**



---

archive/issue_comments_293915.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12d9d3268f1eaeb8308f77666b56c9efb0549aec\">12d9d32</a></td><td><code>Implement unary operations in interfaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aae48bd951f3dee458fafb9de558e0b174296142\">aae48bd</a></td><td><code>Merge branch 'ticket/21152' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a44b082f08c742fbe564c5afdd2f7309fabbb52\">0a44b08</a></td><td><code>Remove one doctest for __mul__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54b0fcdaf2fd69cd64978da526af6774b57a59a8\">54b0fcd</a></td><td><code>Various minor fixes for the coercion model</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2405dde75db35323a1e33890e999388203a81de7\">2405dde</a></td><td><code>Merge commit '0a44b082f08c742fbe564c5afdd2f7309fabbb52'; commit '54b0fcdaf2fd69cd64978da526af6774b57a59a8' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1d2ba46574273ec4d358e654ed195a82b81a654\">e1d2ba4</a></td><td><code>Move arithmetic using coercion model to Element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3ea04f051d8a06788671e0678c903c8aae186fa\">b3ea04f</a></td><td><code>Try reversed operation in richcmp if coercion fails</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/efc4fd0cbf32e078534020d6c3878bd015d5d07f\">efc4fd0</a></td><td><code>Merge branch 't/21163/in_richcmp__fall_back_to_reversed_operation_if_coercion_fails' into t/21158/ticket/21158</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71f31a494aa21db6651797f582dd4aab2a908f40\">71f31a4</a></td><td><code>Decouple PARI from the Sage coercion model</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2\">7ad5c61</a></td><td><code>Step 1: make the unique PariInstance private</code></td></tr></table>\n",
    "created_at": "2016-08-08T21:47:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293915",
    "user": "https://github.com/defeo"
}
```

<a id='comment:7'>Comment 7:</a>
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12d9d3268f1eaeb8308f77666b56c9efb0549aec">12d9d32</a></td><td><code>Implement unary operations in interfaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aae48bd951f3dee458fafb9de558e0b174296142">aae48bd</a></td><td><code>Merge branch 'ticket/21152' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a44b082f08c742fbe564c5afdd2f7309fabbb52">0a44b08</a></td><td><code>Remove one doctest for __mul__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54b0fcdaf2fd69cd64978da526af6774b57a59a8">54b0fcd</a></td><td><code>Various minor fixes for the coercion model</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2405dde75db35323a1e33890e999388203a81de7">2405dde</a></td><td><code>Merge commit '0a44b082f08c742fbe564c5afdd2f7309fabbb52'; commit '54b0fcdaf2fd69cd64978da526af6774b57a59a8' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1d2ba46574273ec4d358e654ed195a82b81a654">e1d2ba4</a></td><td><code>Move arithmetic using coercion model to Element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3ea04f051d8a06788671e0678c903c8aae186fa">b3ea04f</a></td><td><code>Try reversed operation in richcmp if coercion fails</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/efc4fd0cbf32e078534020d6c3878bd015d5d07f">efc4fd0</a></td><td><code>Merge branch 't/21163/in_richcmp__fall_back_to_reversed_operation_if_coercion_fails' into t/21158/ticket/21158</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71f31a494aa21db6651797f582dd4aab2a908f40">71f31a4</a></td><td><code>Decouple PARI from the Sage coercion model</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2">7ad5c61</a></td><td><code>Step 1: make the unique PariInstance private</code></td></tr></table>




---

archive/issue_events_258250.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-09T07:51:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-258250"
}
```



---

archive/issue_events_258251.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-09T07:51:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-258251"
}
```



---

archive/issue_events_258252.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-09T07:51:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-258252"
}
```



---

archive/issue_comments_293916.json:
```json
{
    "body": "Changed dependencies from **#20217, #21158** to **#21158**",
    "created_at": "2016-08-09T07:51:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293916",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#20217, #21158** to **#21158**



---

archive/issue_comments_293917.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI don't really know where you are going with this branch, but I thought that we wanted to minimize the use of the global `pari` variable?\n\nFor example, `closure.pyx` should not need it, we just need to make `new_gen` and friends functions instead of methods of `PariInstance`.",
    "created_at": "2016-08-09T07:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293917",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'>Comment 9:</a>
I don't really know where you are going with this branch, but I thought that we wanted to minimize the use of the global `pari` variable?

For example, `closure.pyx` should not need it, we just need to make `new_gen` and friends functions instead of methods of `PariInstance`.



---

archive/issue_comments_293918.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nYup. Second step. I needed to know who was using it anyway. Any module importing _pari_instance is doing bad, and I'm fixing it. I just pushed this to get help from patchbot.",
    "created_at": "2016-08-09T08:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293918",
    "user": "https://github.com/defeo"
}
```

<a id='comment:10'>Comment 10:</a>
Yup. Second step. I needed to know who was using it anyway. Any module importing _pari_instance is doing bad, and I'm fixing it. I just pushed this to get help from patchbot.



---

archive/issue_comments_293919.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91c436752ba82d512efdf67e2890d5ecbe0b7234\">91c4367</a></td><td><code>Remove useless \"return False\" in SR._coerce_map_from_()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c1adfac68890ce15f8426d48ef69958cdbf240c\">2c1adfa</a></td><td><code>Merge branch 't/21158/ticket/21158' into t/20241/ticket/20241</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130\">6a4d9bd</a></td><td><code>Taking new_gen and friends out of PariInstance. Does not compile.</code></td></tr></table>\n",
    "created_at": "2016-08-19T17:46:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293919",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>Comment 11:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91c436752ba82d512efdf67e2890d5ecbe0b7234">91c4367</a></td><td><code>Remove useless "return False" in SR._coerce_map_from_()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c1adfac68890ce15f8426d48ef69958cdbf240c">2c1adfa</a></td><td><code>Merge branch 't/21158/ticket/21158' into t/20241/ticket/20241</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130">6a4d9bd</a></td><td><code>Taking new_gen and friends out of PariInstance. Does not compile.</code></td></tr></table>




---

archive/issue_comments_293920.json:
```json
{
    "body": "Changed commit from **[7ad5c61](https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2)** to **[6a4d9bd](https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130)**",
    "created_at": "2016-08-19T17:46:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293920",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7ad5c61](https://github.com/sagemath/sagetrac-mirror/commit/7ad5c616418f19d84a37311d750b6db0693c4ec2)** to **[6a4d9bd](https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130)**



---

archive/issue_comments_293921.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nHi @jdemeyer. I'm having trouble compiling this code. gcc fails while compiling `complex_double.pyx`, but I cannot figure our the problem. Also `matrix_integer_dense.pyx` gives fishy warnings.\n\nChanging slightly L94 in `complex_double.pyx`, i.e., using `cimport .. as` or similar, it gets even worse: compilation freezes midway, I have to Ctrl-C it.\n\nI'm giving up for today. Do you have any idea?",
    "created_at": "2016-08-19T17:52:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293921",
    "user": "https://github.com/defeo"
}
```

<a id='comment:12'>Comment 12:</a>
Hi @jdemeyer. I'm having trouble compiling this code. gcc fails while compiling `complex_double.pyx`, but I cannot figure our the problem. Also `matrix_integer_dense.pyx` gives fishy warnings.

Changing slightly L94 in `complex_double.pyx`, i.e., using `cimport .. as` or similar, it gets even worse: compilation freezes midway, I have to Ctrl-C it.

I'm giving up for today. Do you have any idea?



---

archive/issue_comments_293922.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nFor starters, you cannot *declare* a function to be `cdef inline` in a `.pxd` file unless you put the full function body also in the `.pxd` file. So this isn't correct:\n\n```\ncdef inline gen new_gen(GEN x)\n```\n\nYou have to understand how the compiler works: the compiler for a different module only sees the `.pxd` file, so it cannot possibly inline the function `new_gen` since it doesn't know what `new_gen` does.\n\nIt's a bit of a mystery why Cython still accepts this code. GCC gives a error (but sometimes just a warning, maybe it depends on the language) like\n\n```\n[sagelib-7.3.rc0] build/cythonized/sage/matrix/matrix_integer_dense.cpp:4828:72: error: \u2018__pyx_f_4sage_4libs_4pari_5stack_clear_stack\u2019 declared as an \u2018inline\u2019 variable\n[sagelib-7.3.rc0]  static CYTHON_INLINE void (*__pyx_f_4sage_4libs_4pari_5stack_clear_stack)(void); /*proto*/\n```",
    "created_at": "2016-08-19T19:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293922",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'>Comment 13:</a>
For starters, you cannot *declare* a function to be `cdef inline` in a `.pxd` file unless you put the full function body also in the `.pxd` file. So this isn't correct:

```
cdef inline gen new_gen(GEN x)
```

You have to understand how the compiler works: the compiler for a different module only sees the `.pxd` file, so it cannot possibly inline the function `new_gen` since it doesn't know what `new_gen` does.

It's a bit of a mystery why Cython still accepts this code. GCC gives a error (but sometimes just a warning, maybe it depends on the language) like

```
[sagelib-7.3.rc0] build/cythonized/sage/matrix/matrix_integer_dense.cpp:4828:72: error: ‘__pyx_f_4sage_4libs_4pari_5stack_clear_stack’ declared as an ‘inline’ variable
[sagelib-7.3.rc0]  static CYTHON_INLINE void (*__pyx_f_4sage_4libs_4pari_5stack_clear_stack)(void); /*proto*/
```



---

archive/issue_comments_293923.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nNote that it is perfectly legal to have an inline function in a `.pyx` file and still export it in the `.pxd` file. Just don't put the `inline` in the `.pxd`. This way, the function can be inlined in the `.pyx` file (like the call from `new_gen` to `new_gen_noclear`) but other modules will do a non-inline function call.",
    "created_at": "2016-08-19T19:31:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293923",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'>Comment 14:</a>
Note that it is perfectly legal to have an inline function in a `.pyx` file and still export it in the `.pxd` file. Just don't put the `inline` in the `.pxd`. This way, the function can be inlined in the `.pyx` file (like the call from `new_gen` to `new_gen_noclear`) but other modules will do a non-inline function call.



---

archive/issue_comments_293924.json:
```json
{
    "body": "Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**",
    "created_at": "2016-08-19T19:31:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293924",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**



---

archive/issue_comments_293925.json:
```json
{
    "body": "Changed commit from **[6a4d9bd](https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130)** to **[3740c06](https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60)**",
    "created_at": "2016-08-19T19:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293925",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[6a4d9bd](https://github.com/sagemath/sagetrac-mirror/commit/6a4d9bdaff3f7806e3d85f2d5451a46a63b6e130)** to **[3740c06](https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60)**



---

archive/issue_comments_293926.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60\">3740c06</a></td><td><code>Fix inlining in sage.libs.pari.stack</code></td></tr></table>\n",
    "created_at": "2016-08-19T19:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293926",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'>Comment 16:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60">3740c06</a></td><td><code>Fix inlining in sage.libs.pari.stack</code></td></tr></table>




---

archive/issue_comments_293927.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nSage at least compiles now. It doesn't actually start, but I'll leave it to you to continue working on this.",
    "created_at": "2016-08-19T19:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293927",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'>Comment 17:</a>
Sage at least compiles now. It doesn't actually start, but I'll leave it to you to continue working on this.



---

archive/issue_comments_293928.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nMakes perfect sense. What I don't get is why you can put `cdef inline` in METHOD definitions in a `.pxd`. I just cut-pasted that line from the definition of `PariInstance`, and it had been actually compiling, booting, and passing tests (hadn't tried many tests, though) for quite some time before this... that's why I hate Cython!\n\nAnyway, thanks for your help. I'll keep chasing the breakages tomorrow.",
    "created_at": "2016-08-19T20:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293928",
    "user": "https://github.com/defeo"
}
```

<a id='comment:18'>Comment 18:</a>
Makes perfect sense. What I don't get is why you can put `cdef inline` in METHOD definitions in a `.pxd`. I just cut-pasted that line from the definition of `PariInstance`, and it had been actually compiling, booting, and passing tests (hadn't tried many tests, though) for quite some time before this... that's why I hate Cython!

Anyway, thanks for your help. I'll keep chasing the breakages tomorrow.



---

archive/issue_comments_293929.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**",
    "created_at": "2016-08-20T11:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293929",
    "user": "https://github.com/defeo"
}
```

Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**



---

archive/issue_comments_293930.json:
```json
{
    "body": "Changed commit from **[3740c06](https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60)** to **[341b49b](https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4)**",
    "created_at": "2016-08-20T11:18:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293930",
    "user": "https://github.com/defeo"
}
```

Changed commit from **[3740c06](https://github.com/sagemath/sagetrac-mirror/commit/3740c06e738970213afc1af1dfe3457f8a8a3f60)** to **[341b49b](https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4)**



---

archive/issue_comments_293931.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nOk, fixed the startup bug, and tests (mostly) pass. Next step is to move all those conversion functions out of the way.\n\nI'm scratching my head about `allocatemem` and companions, though. `allocatemem` is a gp function, but it's tied to `gen` by `auto_gen.pxi`, so that you can do\n\n```\nsage: size = pari('10^8')\nsage: size.allocatemem()\n```\n\nwhich feels very bad. Wouldn't it make sense to blacklist this one?\n\nOn the other hand there is a manually coded `allocatemem` method in `PariInstance` which gives a much more sensible\n\n```\nsage: pari.allocatemem(10^8)\n```\n\nand also has an additional `silent` parameter to behave more like gp. There are also methods `stacksize` and `stacksizemax` to read the stack sizes. It seems more logical to put these three functions in `stack.pyx`, but if we want the user to call them from the command line, it is better to leave methods in `PariInstance`.\n\nQuestion: given the current handling of PARI's stack, do we still want the user to easily call these functions?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4\">341b49b</a></td><td><code>Step 2: Move new_gen and related functions out of PariIinstance.</code></td></tr></table>\n",
    "created_at": "2016-08-20T11:18:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293931",
    "user": "https://github.com/defeo"
}
```

<a id='comment:20'>Comment 20:</a>
Ok, fixed the startup bug, and tests (mostly) pass. Next step is to move all those conversion functions out of the way.

I'm scratching my head about `allocatemem` and companions, though. `allocatemem` is a gp function, but it's tied to `gen` by `auto_gen.pxi`, so that you can do

```
sage: size = pari('10^8')
sage: size.allocatemem()
```

which feels very bad. Wouldn't it make sense to blacklist this one?

On the other hand there is a manually coded `allocatemem` method in `PariInstance` which gives a much more sensible

```
sage: pari.allocatemem(10^8)
```

and also has an additional `silent` parameter to behave more like gp. There are also methods `stacksize` and `stacksizemax` to read the stack sizes. It seems more logical to put these three functions in `stack.pyx`, but if we want the user to call them from the command line, it is better to leave methods in `PariInstance`.

Question: given the current handling of PARI's stack, do we still want the user to easily call these functions?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4">341b49b</a></td><td><code>Step 2: Move new_gen and related functions out of PariIinstance.</code></td></tr></table>




---

archive/issue_comments_293932.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@defeo](#comment%3A20):\n> Wouldn't it make sense to blacklist this one?\n\nSure.",
    "created_at": "2016-08-20T19:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293932",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@defeo](#comment%3A20):
> Wouldn't it make sense to blacklist this one?

Sure.



---

archive/issue_comments_293933.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nReplying to [@defeo](#comment%3A20):\n> Question: given the current handling of PARI's stack, do we still want the user to easily call these functions?\n\nI don't see the problem. They work perfectly fine and make sense. Unless they are problematic for the implementation, I would just keep them as they are. Another reason is that we should focus on finishing this deliverable. We can always clean up such details afterwards.",
    "created_at": "2016-08-20T19:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293933",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'>Comment 22:</a>
Replying to [@defeo](#comment%3A20):
> Question: given the current handling of PARI's stack, do we still want the user to easily call these functions?

I don't see the problem. They work perfectly fine and make sense. Unless they are problematic for the implementation, I would just keep them as they are. Another reason is that we should focus on finishing this deliverable. We can always clean up such details afterwards.



---

archive/issue_comments_293934.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/decf7ac83ed9c21bc61449340487c75ef7e8f6c0\">decf7ac</a></td><td><code>Fixed doctest in auto generation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2\">a57e6c3</a></td><td><code>Reverted modifications to Python stack management methods</code></td></tr></table>\n",
    "created_at": "2016-08-24T14:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293934",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>Comment 23:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/decf7ac83ed9c21bc61449340487c75ef7e8f6c0">decf7ac</a></td><td><code>Fixed doctest in auto generation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2">a57e6c3</a></td><td><code>Reverted modifications to Python stack management methods</code></td></tr></table>




---

archive/issue_comments_293935.json:
```json
{
    "body": "Changed commit from **[341b49b](https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4)** to **[a57e6c3](https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2)**",
    "created_at": "2016-08-24T14:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293935",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[341b49b](https://github.com/sagemath/sagetrac-mirror/commit/341b49b925dea6aa815b42abec0cfd9d4ffd4da4)** to **[a57e6c3](https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2)**



---

archive/issue_comments_293936.json:
```json
{
    "body": "Changed commit from **[a57e6c3](https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2)** to **[d23169a](https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c)**",
    "created_at": "2016-08-25T00:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293936",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a57e6c3](https://github.com/sagemath/sagetrac-mirror/commit/a57e6c37a7147426e8e3533bbcb736c6795daab2)** to **[d23169a](https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c)**



---

archive/issue_comments_293937.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c\">d23169a</a></td><td><code>Moved Sage-specific Pari conversion functions to separate file.</code></td></tr></table>\n",
    "created_at": "2016-08-25T00:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293937",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>Comment 24:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c">d23169a</a></td><td><code>Moved Sage-specific Pari conversion functions to separate file.</code></td></tr></table>




---

archive/issue_comments_293938.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nOk, so I managed to move all Sage-specific conversion functions from `PariInstance` to a separate file. We're getting closer to the goal: the only imports left in `pari_instance.p??` from the sage library are\n\n```\nfrom sage.ext.memory import init_memory_functions\nfrom sage.misc.superseded import deprecation, deprecated_function_alias\n```\n\nThere's a couple of conversion functions left in `PariInstance` which are not specific to Sage:\n\n```\ncdef gen new_gen_from_int(self, int value)\ncdef gen new_t_POL_from_int_star(self, int *vals, int length, long varnum)\ncdef gen double_to_gen_c(self, double)\ncdef GEN double_to_GEN(self, double)\n```\n\nplus a python method `PariInstance.double_to_gen`. Should we put these in `convert.pyx`, or maybe another file?\n\nNote that `new_gen_from_int` is only called once in `padic_capped_relative_element.pyx`, and just to create 0.\n\nIt is also not very clear to me what the purpose of `double_to_gen` and `double_to_gen_c` is. `double_to_gen_c` is called only in line 1585 of `real_double.pyx`, and that's in a `def`ed function. Is this really faster than calling `double_to_gen`?\n\nAnd what's the meaning of this, anyway:\n\n```\nsage: pari(0.1) == pari.double_to_gen(0.1)\nFalse\nsage: pari(0.1) == pari(0.1)\nTrue\nsage: pari.double_to_gen(0.1) == pari.double_to_gen(0.1)\nTrue\nsage: pari(0.1) - pari.double_to_gen(0.1)\n-5.54975987041018 E-18\nsage: pari(0.1) - pari(0.1)\n0.E-20\nsage: pari.double_to_gen(0.1) - pari.double_to_gen(0.1)\n0.E-20\n```\n\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c\">d23169a</a></td><td><code>Moved Sage-specific Pari conversion functions to separate file.</code></td></tr></table>\n",
    "created_at": "2016-08-25T01:08:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293938",
    "user": "https://github.com/defeo"
}
```

<a id='comment:25'>Comment 25:</a>
Ok, so I managed to move all Sage-specific conversion functions from `PariInstance` to a separate file. We're getting closer to the goal: the only imports left in `pari_instance.p??` from the sage library are

```
from sage.ext.memory import init_memory_functions
from sage.misc.superseded import deprecation, deprecated_function_alias
```

There's a couple of conversion functions left in `PariInstance` which are not specific to Sage:

```
cdef gen new_gen_from_int(self, int value)
cdef gen new_t_POL_from_int_star(self, int *vals, int length, long varnum)
cdef gen double_to_gen_c(self, double)
cdef GEN double_to_GEN(self, double)
```

plus a python method `PariInstance.double_to_gen`. Should we put these in `convert.pyx`, or maybe another file?

Note that `new_gen_from_int` is only called once in `padic_capped_relative_element.pyx`, and just to create 0.

It is also not very clear to me what the purpose of `double_to_gen` and `double_to_gen_c` is. `double_to_gen_c` is called only in line 1585 of `real_double.pyx`, and that's in a `def`ed function. Is this really faster than calling `double_to_gen`?

And what's the meaning of this, anyway:

```
sage: pari(0.1) == pari.double_to_gen(0.1)
False
sage: pari(0.1) == pari(0.1)
True
sage: pari.double_to_gen(0.1) == pari.double_to_gen(0.1)
True
sage: pari(0.1) - pari.double_to_gen(0.1)
-5.54975987041018 E-18
sage: pari(0.1) - pari(0.1)
0.E-20
sage: pari.double_to_gen(0.1) - pari.double_to_gen(0.1)
0.E-20
```


---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c">d23169a</a></td><td><code>Moved Sage-specific Pari conversion functions to separate file.</code></td></tr></table>




---

archive/issue_comments_293939.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nReplying to [@defeo](#comment%3A25):\n> Ok, so I managed to move all Sage-specific conversion functions from `PariInstance` to a separate file. We're getting closer to the goal: the only imports left in `pari_instance.p??` from the sage library are\n> \n> ```\n> from sage.ext.memory import init_memory_functions\n> from sage.misc.superseded import deprecation, deprecated_function_alias\n> ```\n> \n> There's a couple of conversion functions left in `PariInstance` which are not specific to Sage:\n> \n> ```\n> cdef gen new_gen_from_int(self, int value)\n> cdef gen new_t_POL_from_int_star(self, int *vals, int length, long varnum)\n> cdef gen double_to_gen_c(self, double)\n> cdef GEN double_to_GEN(self, double)\n> ```\n> \n> plus a python method `PariInstance.double_to_gen`. Should we put these in `convert.pyx`\n\nFine for me.\n\n> Note that `new_gen_from_int` is only called once in `padic_capped_relative_element.pyx`, and just to create 0.\n> \n> It is also not very clear to me what the purpose of `double_to_gen` and `double_to_gen_c` is.\n\n`double_to_gen` seems unused and untested. I do not mind removing it.\n\n> `double_to_gen_c` is called only in line 1585 of `real_double.pyx`, and that's in a `def`ed function. Is this really faster than calling `double_to_gen`?\n\nObviously yes. Calling a `cdef` function is much faster than calling a `def` function. It does not matter where it is called from. But I would suggest renaming `double_to_gen_c` to `double_to_gen`.",
    "created_at": "2016-08-27T18:54:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293939",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'>Comment 26:</a>
Replying to [@defeo](#comment%3A25):
> Ok, so I managed to move all Sage-specific conversion functions from `PariInstance` to a separate file. We're getting closer to the goal: the only imports left in `pari_instance.p??` from the sage library are
> 
> ```
> from sage.ext.memory import init_memory_functions
> from sage.misc.superseded import deprecation, deprecated_function_alias
> ```
> 
> There's a couple of conversion functions left in `PariInstance` which are not specific to Sage:
> 
> ```
> cdef gen new_gen_from_int(self, int value)
> cdef gen new_t_POL_from_int_star(self, int *vals, int length, long varnum)
> cdef gen double_to_gen_c(self, double)
> cdef GEN double_to_GEN(self, double)
> ```
> 
> plus a python method `PariInstance.double_to_gen`. Should we put these in `convert.pyx`

Fine for me.

> Note that `new_gen_from_int` is only called once in `padic_capped_relative_element.pyx`, and just to create 0.
> 
> It is also not very clear to me what the purpose of `double_to_gen` and `double_to_gen_c` is.

`double_to_gen` seems unused and untested. I do not mind removing it.

> `double_to_gen_c` is called only in line 1585 of `real_double.pyx`, and that's in a `def`ed function. Is this really faster than calling `double_to_gen`?

Obviously yes. Calling a `cdef` function is much faster than calling a `def` function. It does not matter where it is called from. But I would suggest renaming `double_to_gen_c` to `double_to_gen`.



---

archive/issue_comments_293940.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nReplying to [@defeo](#comment%3A25):\n> \n> ```\n> sage: pari(0.1) == pari.double_to_gen(0.1)\n> False\n> ```\n\nThat's a \"feature\" because of `RealLiteral`:\n\n```\nsage: x = RR(0.1); y = RR(float(0.1))\nsage: x == y\nTrue\nsage: parent(x) is parent(y)\nTrue\nsage: RR64 = RealField(64)\nsage: RR64(x) == RR64(y)\nFalse\nsage: pari(x) == pari(y)\nFalse\n```",
    "created_at": "2016-08-27T19:06:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293940",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'>Comment 27:</a>
Replying to [@defeo](#comment%3A25):
> 
> ```
> sage: pari(0.1) == pari.double_to_gen(0.1)
> False
> ```

That's a "feature" because of `RealLiteral`:

```
sage: x = RR(0.1); y = RR(float(0.1))
sage: x == y
True
sage: parent(x) is parent(y)
True
sage: RR64 = RealField(64)
sage: RR64(x) == RR64(y)
False
sage: pari(x) == pari(y)
False
```



---

archive/issue_comments_293941.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246\">c7b5d6d</a></td><td><code>Moved more conversion functions to convert.pyx</code></td></tr></table>\n",
    "created_at": "2016-09-04T01:04:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293941",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:28'>Comment 28:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246">c7b5d6d</a></td><td><code>Moved more conversion functions to convert.pyx</code></td></tr></table>




---

archive/issue_comments_293942.json:
```json
{
    "body": "Changed commit from **[d23169a](https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c)** to **[c7b5d6d](https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246)**",
    "created_at": "2016-09-04T01:04:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293942",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d23169a](https://github.com/sagemath/sagetrac-mirror/commit/d23169ad79e100a44997c64492539961efd1c45c)** to **[c7b5d6d](https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246)**



---

archive/issue_comments_293943.json:
```json
{
    "body": "Changed commit from **[c7b5d6d](https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246)** to **[a8b8b7c](https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2)**",
    "created_at": "2016-09-04T01:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293943",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c7b5d6d](https://github.com/sagemath/sagetrac-mirror/commit/c7b5d6d03ed6213a67dde4f8947e2d7f8bbb9246)** to **[a8b8b7c](https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2)**



---

archive/issue_comments_293944.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2\">a8b8b7c</a></td><td><code>Fixed minor bugs, changed behaviour of `pari(complex(x,y))`</code></td></tr></table>\n",
    "created_at": "2016-09-04T01:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293944",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:29'>Comment 29:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2">a8b8b7c</a></td><td><code>Fixed minor bugs, changed behaviour of `pari(complex(x,y))`</code></td></tr></table>




---

archive/issue_comments_293945.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nYou might consider a separate ticket for moving the conversion functions.",
    "created_at": "2016-09-04T10:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293945",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'>Comment 30:</a>
You might consider a separate ticket for moving the conversion functions.



---

archive/issue_comments_293946.json:
```json
{
    "body": "Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**",
    "created_at": "2016-09-05T15:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293946",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**



---

archive/issue_comments_293947.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nWhy did you remove `pari.stacksize()` and similar? I would keep them as methods of `pari`.",
    "created_at": "2016-09-05T15:24:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293947",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'>Comment 32:</a>
Why did you remove `pari.stacksize()` and similar? I would keep them as methods of `pari`.



---

archive/issue_comments_293948.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**",
    "created_at": "2016-09-05T15:24:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293948",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**



---

archive/issue_comments_293949.json:
```json
{
    "body": "Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**",
    "created_at": "2016-09-05T15:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293949",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**



---

archive/issue_comments_293950.json:
```json
{
    "body": "Changed commit from **[a8b8b7c](https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2)** to **[eaa4be4](https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6)**",
    "created_at": "2016-09-05T15:30:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293950",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[a8b8b7c](https://github.com/sagemath/sagetrac-mirror/commit/a8b8b7c5bfd6f412eb0f35e5009bc888a80e83b2)** to **[eaa4be4](https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6)**



---

archive/issue_comments_293951.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nI don't really see the point of this new `init()` function. What's wrong with using the `__init__` method for this?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6\">eaa4be4</a></td><td><code>Merge tag '7.4.beta3' into t/20241/ticket/20241</code></td></tr></table>\n",
    "created_at": "2016-09-05T15:30:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293951",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'>Comment 34:</a>
I don't really see the point of this new `init()` function. What's wrong with using the `__init__` method for this?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6">eaa4be4</a></td><td><code>Merge tag '7.4.beta3' into t/20241/ticket/20241</code></td></tr></table>




---

archive/issue_comments_293952.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**",
    "created_at": "2016-09-06T16:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293952",
    "user": "https://github.com/defeo"
}
```

Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**



---

archive/issue_comments_293953.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nAgreed to revert to a normal constructor, no `init()` factory method.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66f7ca6de9bdcaaafe099d78a7981ce8f596fddb\">66f7ca6</a></td><td><code>Updated docstrings and copyright headers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a252743b6dff88a93ba3bba8259efdf3149dce6a\">a252743</a></td><td><code>Removed reduntant new_gen_from_int function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d28213581cbcd1793a6717f426acf7680d57c179\">d282135</a></td><td><code>Reverted to constructor for PariInstance, no factory method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7852f1cf1e190db6da1bfe8b9ee1e0f76953f7b2\">7852f1c</a></td><td><code>Cosmetic change</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2\">69adf8c</a></td><td><code>Fixed docstring for deprecated method</code></td></tr></table>\n",
    "created_at": "2016-09-06T16:36:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293953",
    "user": "https://github.com/defeo"
}
```

<a id='comment:36'>Comment 36:</a>
Agreed to revert to a normal constructor, no `init()` factory method.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66f7ca6de9bdcaaafe099d78a7981ce8f596fddb">66f7ca6</a></td><td><code>Updated docstrings and copyright headers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a252743b6dff88a93ba3bba8259efdf3149dce6a">a252743</a></td><td><code>Removed reduntant new_gen_from_int function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d28213581cbcd1793a6717f426acf7680d57c179">d282135</a></td><td><code>Reverted to constructor for PariInstance, no factory method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7852f1cf1e190db6da1bfe8b9ee1e0f76953f7b2">7852f1c</a></td><td><code>Cosmetic change</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2">69adf8c</a></td><td><code>Fixed docstring for deprecated method</code></td></tr></table>




---

archive/issue_comments_293954.json:
```json
{
    "body": "Changed commit from **[eaa4be4](https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6)** to **[69adf8c](https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2)**",
    "created_at": "2016-09-06T16:36:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293954",
    "user": "https://github.com/defeo"
}
```

Changed commit from **[eaa4be4](https://github.com/sagemath/sagetrac-mirror/commit/eaa4be48d560a36c3f205381e742052d82db10b6)** to **[69adf8c](https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2)**



---

archive/issue_events_258253.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2016-09-06T16:36:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-258253"
}
```



---

archive/issue_comments_293955.json:
```json
{
    "body": "Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**",
    "created_at": "2016-09-06T17:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293955",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**



---

archive/issue_comments_293956.json:
```json
{
    "body": "Changed commit from **[69adf8c](https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2)** to **[3151ec4](https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f)**",
    "created_at": "2016-09-06T17:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293956",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[69adf8c](https://github.com/sagemath/sagetrac-mirror/commit/69adf8c133e5b6a3871335b2fb47ad08cfb32ae2)** to **[3151ec4](https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f)**



---

archive/issue_comments_293957.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bfd42ab7821cb8d9796b3b0b78bc7b80a58b629\">7bfd42a</a></td><td><code>Merge tag '7.4.beta2' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/343131a9951dc842c462809b9366b13416382dfc\">343131a</a></td><td><code>Fix doctest for Trac #20767</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a501048a8480fd66300c37ff614969469509d189\">a501048</a></td><td><code>Move category attribute lookup to CategoryObject.getattr_from_category()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fabb7a5dc50518946d1913488bf4a0444730c0f\">0fabb7a</a></td><td><code>Optimize CategoryObject.getattr_from_category()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74041f30d8de4c15055345f14340a4f443236ffa\">74041f3</a></td><td><code>Mark broken testsuites as # known bug</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83cca0fe367c5757f9c590fd157a0ad8a2825315\">83cca0f</a></td><td><code>Merge commit '343131a9951dc842c462809b9366b13416382dfc'; commit '91c436752ba82d512efdf67e2890d5ecbe0b7234'; commit '74041f30d8de4c15055345f14340a4f443236ffa' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f\">3151ec4</a></td><td><code>Separate Sage-specific components from generic C-interface in PariInstance</code></td></tr></table>\n",
    "created_at": "2016-09-06T17:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293957",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'>Comment 38:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bfd42ab7821cb8d9796b3b0b78bc7b80a58b629">7bfd42a</a></td><td><code>Merge tag '7.4.beta2' into t/20767/move_coercion_to_element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/343131a9951dc842c462809b9366b13416382dfc">343131a</a></td><td><code>Fix doctest for Trac #20767</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a501048a8480fd66300c37ff614969469509d189">a501048</a></td><td><code>Move category attribute lookup to CategoryObject.getattr_from_category()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fabb7a5dc50518946d1913488bf4a0444730c0f">0fabb7a</a></td><td><code>Optimize CategoryObject.getattr_from_category()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74041f30d8de4c15055345f14340a4f443236ffa">74041f3</a></td><td><code>Mark broken testsuites as # known bug</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83cca0fe367c5757f9c590fd157a0ad8a2825315">83cca0f</a></td><td><code>Merge commit '343131a9951dc842c462809b9366b13416382dfc'; commit '91c436752ba82d512efdf67e2890d5ecbe0b7234'; commit '74041f30d8de4c15055345f14340a4f443236ffa' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f">3151ec4</a></td><td><code>Separate Sage-specific components from generic C-interface in PariInstance</code></td></tr></table>




---

archive/issue_comments_293958.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5\">f35e562</a></td><td><code>Separate Sage-specific components from generic C-interface in PariInstance</code></td></tr></table>\n",
    "created_at": "2016-09-06T17:35:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293958",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:39'>Comment 39:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5">f35e562</a></td><td><code>Separate Sage-specific components from generic C-interface in PariInstance</code></td></tr></table>




---

archive/issue_comments_293959.json:
```json
{
    "body": "Changed commit from **[3151ec4](https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f)** to **[f35e562](https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5)**",
    "created_at": "2016-09-06T17:35:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293959",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3151ec4](https://github.com/sagemath/sagetrac-mirror/commit/3151ec4685b19979f21db9aa17afbc472f962d7f)** to **[f35e562](https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5)**



---

archive/issue_comments_293960.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899\">e363e4c</a></td><td><code>Simplify module_list</code></td></tr></table>\n",
    "created_at": "2016-09-06T17:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293960",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:40'>Comment 40:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899">e363e4c</a></td><td><code>Simplify module_list</code></td></tr></table>




---

archive/issue_comments_293961.json:
```json
{
    "body": "Changed commit from **[f35e562](https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5)** to **[e363e4c](https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899)**",
    "created_at": "2016-09-06T17:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293961",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f35e562](https://github.com/sagemath/sagetrac-mirror/commit/f35e562311b954e66516d3e111311b4d573480a5)** to **[e363e4c](https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899)**



---

archive/issue_comments_293962.json:
```json
{
    "body": "Changed commit from **[e363e4c](https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899)** to **[968519c](https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515)**",
    "created_at": "2016-09-06T21:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293962",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e363e4c](https://github.com/sagemath/sagetrac-mirror/commit/e363e4c6b7a4b9d5c71cbc37e4bf4e848f881899)** to **[968519c](https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515)**



---

archive/issue_comments_293963.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515\">968519c</a></td><td><code>Cleanup imports; add `__future__` statements</code></td></tr></table>\n",
    "created_at": "2016-09-06T21:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293963",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:41'>Comment 41:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515">968519c</a></td><td><code>Cleanup imports; add `__future__` statements</code></td></tr></table>




---

archive/issue_comments_293964.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**",
    "created_at": "2016-09-21T14:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293964",
    "user": "https://github.com/defeo"
}
```

Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)**



---

archive/issue_comments_293965.json:
```json
{
    "body": "Changed commit from **[968519c](https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515)** to **[e88d56c](https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787)**",
    "created_at": "2016-09-21T15:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293965",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[968519c](https://github.com/sagemath/sagetrac-mirror/commit/968519c0b552d8e94262b58580fe2003619bd515)** to **[e88d56c](https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787)**



---

archive/issue_comments_293966.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787\">e88d56c</a></td><td><code>Fixed broken doctest in auto-generationy</code></td></tr></table>\n",
    "created_at": "2016-09-21T15:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293966",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'>Comment 43:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787">e88d56c</a></td><td><code>Fixed broken doctest in auto-generationy</code></td></tr></table>




---

archive/issue_comments_293967.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nJust a reminder: I plan to review this when all dependencies have been merged. Unfortunately, this is currently blocked by #21441.",
    "created_at": "2016-09-21T15:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293967",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'>Comment 44:</a>
Just a reminder: I plan to review this when all dependencies have been merged. Unfortunately, this is currently blocked by #21441.



---

archive/issue_comments_293968.json:
```json
{
    "body": "Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**",
    "created_at": "2016-10-10T08:28:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293968",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/defeo/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/ticket/20241)** to **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)**



---

archive/issue_comments_293969.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nMerged latest develop.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d\">57e1cba</a></td><td><code>Merge tag '7.4.rc0' into t/20241/ticket/20241</code></td></tr></table>\n",
    "created_at": "2016-10-10T08:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293969",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'>Comment 46:</a>
Merged latest develop.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d">57e1cba</a></td><td><code>Merge tag '7.4.rc0' into t/20241/ticket/20241</code></td></tr></table>




---

archive/issue_comments_293970.json:
```json
{
    "body": "Changed commit from **[e88d56c](https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787)** to **[57e1cba](https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d)**",
    "created_at": "2016-10-10T08:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293970",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[e88d56c](https://github.com/sagemath/sagetrac-mirror/commit/e88d56cdc1500da91142c11191b486fd1666a787)** to **[57e1cba](https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d)**



---

archive/issue_comments_293971.json:
```json
{
    "body": "Changed dependencies from **#21158** to none",
    "created_at": "2016-10-10T08:35:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293971",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#21158** to none



---

archive/issue_comments_293972.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2016-10-10T08:35:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293972",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_293973.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9\">6ef8de2</a></td><td><code>Cosmetic changes to sage.libs.pari.convert</code></td></tr></table>\n",
    "created_at": "2016-10-11T08:59:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293973",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:48'>Comment 48:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9">6ef8de2</a></td><td><code>Cosmetic changes to sage.libs.pari.convert</code></td></tr></table>




---

archive/issue_comments_293974.json:
```json
{
    "body": "Changed commit from **[57e1cba](https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d)** to **[6ef8de2](https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9)**",
    "created_at": "2016-10-11T08:59:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293974",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[57e1cba](https://github.com/sagemath/sagetrac-mirror/commit/57e1cbaf2c5a4d43d3796037577696a709a1138d)** to **[6ef8de2](https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9)**



---

archive/issue_comments_293975.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nI am wondering what to do with `convert_sage`. First of all, it contains conversions both to/from GMP as well as conversions to/from FLINT. These should be split up in two different modules (I will do that).\n\nBut a bigger question is: should these become part of Sage or part of CyPari? Those conversion routines are not directly related to Sage, but to GMP/FLINT which may be of interest to other libraries too.",
    "created_at": "2016-10-11T09:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293975",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:49'>Comment 49:</a>
I am wondering what to do with `convert_sage`. First of all, it contains conversions both to/from GMP as well as conversions to/from FLINT. These should be split up in two different modules (I will do that).

But a bigger question is: should these become part of Sage or part of CyPari? Those conversion routines are not directly related to Sage, but to GMP/FLINT which may be of interest to other libraries too.



---

archive/issue_comments_293976.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd\">fb54db3</a></td><td><code>Cosmetic changes to sage.libs.pari.convert</code></td></tr></table>\n",
    "created_at": "2016-10-11T09:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293976",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:50'>Comment 50:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd">fb54db3</a></td><td><code>Cosmetic changes to sage.libs.pari.convert</code></td></tr></table>




---

archive/issue_comments_293977.json:
```json
{
    "body": "Changed commit from **[6ef8de2](https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9)** to **[fb54db3](https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd)**",
    "created_at": "2016-10-11T09:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293977",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6ef8de2](https://github.com/sagemath/sagetrac-mirror/commit/6ef8de2e479449507cf2fddcc67c3b0733820fd9)** to **[fb54db3](https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd)**



---

archive/issue_comments_293978.json:
```json
{
    "body": "Changed commit from **[fb54db3](https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd)** to **[686d299](https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580)**",
    "created_at": "2016-10-11T09:55:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293978",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fb54db3](https://github.com/sagemath/sagetrac-mirror/commit/fb54db3ed52b3718cb9aef8eec29101c5ce5dadd)** to **[686d299](https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580)**



---

archive/issue_comments_293979.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580\">686d299</a></td><td><code>Split convert_sage in convert_flint and convert_gmp</code></td></tr></table>\n",
    "created_at": "2016-10-11T09:55:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293979",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:51'>Comment 51:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580">686d299</a></td><td><code>Split convert_sage in convert_flint and convert_gmp</code></td></tr></table>




---

archive/issue_comments_293980.json:
```json
{
    "body": "Changed commit from **[686d299](https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580)** to **[5411780](https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c)**",
    "created_at": "2016-10-11T10:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293980",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[686d299](https://github.com/sagemath/sagetrac-mirror/commit/686d2997e355918a4b73608ebd87638391eb4580)** to **[5411780](https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c)**



---

archive/issue_comments_293981.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c\">5411780</a></td><td><code>Undo moving of imports in gentoobj()</code></td></tr></table>\n",
    "created_at": "2016-10-11T10:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293981",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:52'>Comment 52:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c">5411780</a></td><td><code>Undo moving of imports in gentoobj()</code></td></tr></table>




---

archive/issue_comments_293982.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nReplying to [@jdemeyer](#comment%3A49):\n> I am wondering what to do with `convert_sage`. First of all, it contains conversions both to/from GMP as well as conversions to/from FLINT. These should be split up in two different modules (I will do that).\n\nGood. Thx.\n\n> But a bigger question is: should these become part of Sage or part of CyPari? Those conversion routines are not directly related to Sage, but to GMP/FLINT which may be of interest to other libraries too.\n\nIf they where in CyPari, then CyPari would need GMP/Flint in order to compile, wouldn't it?",
    "created_at": "2016-10-11T13:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293982",
    "user": "https://github.com/defeo"
}
```

<a id='comment:53'>Comment 53:</a>
Replying to [@jdemeyer](#comment%3A49):
> I am wondering what to do with `convert_sage`. First of all, it contains conversions both to/from GMP as well as conversions to/from FLINT. These should be split up in two different modules (I will do that).

Good. Thx.

> But a bigger question is: should these become part of Sage or part of CyPari? Those conversion routines are not directly related to Sage, but to GMP/FLINT which may be of interest to other libraries too.

If they where in CyPari, then CyPari would need GMP/Flint in order to compile, wouldn't it?



---

archive/issue_comments_293983.json:
```json
{
    "body": "Changed commit from **[5411780](https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c)** to **[d522155](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c)**",
    "created_at": "2016-10-11T13:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293983",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5411780](https://github.com/sagemath/sagetrac-mirror/commit/54117801c99e58bf3ab0e981d3719ea11704fa4c)** to **[d522155](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c)**



---

archive/issue_comments_293984.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76db2470238ed9b1beff8296b89724ebe573f111\">76db247</a></td><td><code>pari_objtogen -> objtogen</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d2ad6a97a3c0750768dfa770c113a7cd30c29de\">4d2ad6a</a></td><td><code>Minor cleanup in pari imports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c\">d522155</a></td><td><code>Use \"self\" to name self argument</code></td></tr></table>\n",
    "created_at": "2016-10-11T13:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293984",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:54'>Comment 54:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76db2470238ed9b1beff8296b89724ebe573f111">76db247</a></td><td><code>pari_objtogen -> objtogen</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d2ad6a97a3c0750768dfa770c113a7cd30c29de">4d2ad6a</a></td><td><code>Minor cleanup in pari imports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c">d522155</a></td><td><code>Use "self" to name self argument</code></td></tr></table>




---

archive/issue_comments_293985.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nReplying to [@defeo](#comment%3A53):\n> If they where in CyPari, then CyPari would need GMP/Flint in order to compile, wouldn't it?\n\nYes, but those could be optional dependencies (like optional packages in Sage).",
    "created_at": "2016-10-11T14:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293985",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'>Comment 55:</a>
Replying to [@defeo](#comment%3A53):
> If they where in CyPari, then CyPari would need GMP/Flint in order to compile, wouldn't it?

Yes, but those could be optional dependencies (like optional packages in Sage).



---

archive/issue_comments_293986.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nAlso, `cysignals` currently has an *optional* dependency on PARI. It seems to work fine.",
    "created_at": "2016-10-11T14:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293986",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'>Comment 56:</a>
Also, `cysignals` currently has an *optional* dependency on PARI. It seems to work fine.



---

archive/issue_comments_293987.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nFor me, this ticket is good to merge. Luca, can you look at the commits that I added (each of them is relatively small and self-contained)?",
    "created_at": "2016-10-11T14:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293987",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:57'>Comment 57:</a>
For me, this ticket is good to merge. Luca, can you look at the commits that I added (each of them is relatively small and self-contained)?



---

archive/issue_comments_293988.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nI think commit [d522155ff2f79eed03f73a637d8164cff9cf6f6c](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c) is a little brittle. \n\nIf I understand auto-generation correctly, this doesn't break because no method of `PariInstance_auto` has a `PariArgumentSeriesPrec` argument (prototype `P`). I don't know if it is safe to assume that PARI will never have such a function.",
    "created_at": "2016-10-12T13:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293988",
    "user": "https://github.com/defeo"
}
```

<a id='comment:58'>Comment 58:</a>
I think commit [d522155ff2f79eed03f73a637d8164cff9cf6f6c](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c) is a little brittle. 

If I understand auto-generation correctly, this doesn't break because no method of `PariInstance_auto` has a `PariArgumentSeriesPrec` argument (prototype `P`). I don't know if it is safe to assume that PARI will never have such a function.



---

archive/issue_comments_293989.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nAlso, I'm not completely happy about [4d2ad6a97a3c0750768dfa770c113a7cd30c29de](https://github.com/sagemath/sagetrac-mirror/commit/4d2ad6a97a3c0750768dfa770c113a7cd30c29de). I feel it's bad cimporting `pari_instace` in `padic_capped_relative_element.pyx`.\n\nIn my opinion, external software should use the \"public\" `pari` API whenever possible, unless it has good reasons to fiddle with the internals of CyPari. Is there any good reason here?",
    "created_at": "2016-10-12T14:25:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293989",
    "user": "https://github.com/defeo"
}
```

<a id='comment:59'>Comment 59:</a>
Also, I'm not completely happy about [4d2ad6a97a3c0750768dfa770c113a7cd30c29de](https://github.com/sagemath/sagetrac-mirror/commit/4d2ad6a97a3c0750768dfa770c113a7cd30c29de). I feel it's bad cimporting `pari_instace` in `padic_capped_relative_element.pyx`.

In my opinion, external software should use the "public" `pari` API whenever possible, unless it has good reasons to fiddle with the internals of CyPari. Is there any good reason here?



---

archive/issue_comments_293990.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\nConcerning `convert_gmp.pyx`, docstrings and function names are a bit schizophrenic on whether these are converstion to/from GMP or MPIR. Presumably they work with both?",
    "created_at": "2016-10-12T14:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293990",
    "user": "https://github.com/defeo"
}
```

<a id='comment:60'>Comment 60:</a>
Concerning `convert_gmp.pyx`, docstrings and function names are a bit schizophrenic on whether these are converstion to/from GMP or MPIR. Presumably they work with both?



---

archive/issue_comments_293991.json:
```json
{
    "body": "<a id='comment:61'>Comment 61:</a>\nReplying to [@defeo](#comment%3A59):\n> In my opinion, external software should use the \"public\" `pari` API whenever possible\n\nI consider this as part of the public API.  Why do you consider the Python API public but the Cython API private?",
    "created_at": "2016-10-12T14:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293991",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:61'>Comment 61:</a>
Replying to [@defeo](#comment%3A59):
> In my opinion, external software should use the "public" `pari` API whenever possible

I consider this as part of the public API.  Why do you consider the Python API public but the Cython API private?



---

archive/issue_comments_293992.json:
```json
{
    "body": "<a id='comment:62'>Comment 62:</a>\nReplying to [@jdemeyer](#comment%3A61):\n> Replying to [@defeo](#comment%3A59):\n> > In my opinion, external software should use the \"public\" `pari` API whenever possible\n\n> \n> I consider this as part of the public API.  Why do you consider the Python API public but the Cython API private?\n\nIt's not exactly that. I consider the Cython API also public (unless there are underscores). But when there is duplication of functionality (e.g., any `def`ed or `cpdef`ed method of `pari_instance`), I give priority to the Python API.\n\nI mean, if all you want is to get PARI's zero, just do like any common mortal and call `pari.zero()`. Shorter, more readable, easier to understand.\n\nOf course, it's not a big deal.",
    "created_at": "2016-10-12T14:55:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293992",
    "user": "https://github.com/defeo"
}
```

<a id='comment:62'>Comment 62:</a>
Replying to [@jdemeyer](#comment%3A61):
> Replying to [@defeo](#comment%3A59):
> > In my opinion, external software should use the "public" `pari` API whenever possible

> 
> I consider this as part of the public API.  Why do you consider the Python API public but the Cython API private?

It's not exactly that. I consider the Cython API also public (unless there are underscores). But when there is duplication of functionality (e.g., any `def`ed or `cpdef`ed method of `pari_instance`), I give priority to the Python API.

I mean, if all you want is to get PARI's zero, just do like any common mortal and call `pari.zero()`. Shorter, more readable, easier to understand.

Of course, it's not a big deal.



---

archive/issue_comments_293993.json:
```json
{
    "body": "<a id='comment:63'>Comment 63:</a>\nReplying to [@defeo](#comment%3A62):\n> I mean, if all you want is to get PARI's zero, just do like any common mortal and call `pari.zero()`. Shorter, more readable, easier to understand.\n\n...but slower. I don't think it matters in this specific case, but we really want users to call `pari_instance.zero()` using Cython if speed is important.",
    "created_at": "2016-10-12T15:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293993",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:63'>Comment 63:</a>
Replying to [@defeo](#comment%3A62):
> I mean, if all you want is to get PARI's zero, just do like any common mortal and call `pari.zero()`. Shorter, more readable, easier to understand.

...but slower. I don't think it matters in this specific case, but we really want users to call `pari_instance.zero()` using Cython if speed is important.



---

archive/issue_comments_293994.json:
```json
{
    "body": "<a id='comment:64'>Comment 64:</a>\n> ...but slower.\n\nBy how much?\n\n> I don't think it matters in this specific case, but we really want users to call `pari_instance.zero()` using Cython if speed is important.\n\nThat's why there is no underscore in front of `pari_instance`. But, as you say, speed is not important here.",
    "created_at": "2016-10-12T15:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293994",
    "user": "https://github.com/defeo"
}
```

<a id='comment:64'>Comment 64:</a>
> ...but slower.

By how much?

> I don't think it matters in this specific case, but we really want users to call `pari_instance.zero()` using Cython if speed is important.

That's why there is no underscore in front of `pari_instance`. But, as you say, speed is not important here.



---

archive/issue_comments_293995.json:
```json
{
    "body": "<a id='comment:65'>Comment 65:</a>\nReplying to [@defeo](#comment%3A64):\n> > ...but slower.\n\n> \n> By how much?\n\nI haven't profiled, but I would guess at least an order of magnitude. Python methods are slow.\n\nBut that doesn't matter, the point is that `pari_instance` and the `zero()` method are part of the public Cython API.",
    "created_at": "2016-10-12T15:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293995",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:65'>Comment 65:</a>
Replying to [@defeo](#comment%3A64):
> > ...but slower.

> 
> By how much?

I haven't profiled, but I would guess at least an order of magnitude. Python methods are slow.

But that doesn't matter, the point is that `pari_instance` and the `zero()` method are part of the public Cython API.



---

archive/issue_comments_293996.json:
```json
{
    "body": "<a id='comment:66'>Comment 66:</a>\n> > By how much?\n\n> \n> I haven't profiled, but I would guess at least an order of magnitude. Python methods are slow.\n\nI have. The overhead is ~50ns. `pari_instance.zero()` itself takes ~50ns.\n\n> But that doesn't matter,\n\nAs you say. Who cares about 50ns? So we agree that speed is not an argument here. In my opinion readability is, instead.\n\n> the point is that `pari_instance` and the `zero()` method are part of the public Cython API.\n\nI already replied to this point saying that `pari.zero()` is \"more public\". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is \"public enough\".\n\nI do not want to hold this ticket on this very minor detail. If we cannot convince each other, commit minimality wins, so the code stays as it is now.\n\nMy other two comments are more serious, though.",
    "created_at": "2016-10-12T16:16:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293996",
    "user": "https://github.com/defeo"
}
```

<a id='comment:66'>Comment 66:</a>
> > By how much?

> 
> I haven't profiled, but I would guess at least an order of magnitude. Python methods are slow.

I have. The overhead is ~50ns. `pari_instance.zero()` itself takes ~50ns.

> But that doesn't matter,

As you say. Who cares about 50ns? So we agree that speed is not an argument here. In my opinion readability is, instead.

> the point is that `pari_instance` and the `zero()` method are part of the public Cython API.

I already replied to this point saying that `pari.zero()` is "more public". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is "public enough".

I do not want to hold this ticket on this very minor detail. If we cannot convince each other, commit minimality wins, so the code stays as it is now.

My other two comments are more serious, though.



---

archive/issue_comments_293997.json:
```json
{
    "body": "Changed commit from **[d522155](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c)** to **[6f815cd](https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716)**",
    "created_at": "2016-10-14T09:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293997",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d522155](https://github.com/sagemath/sagetrac-mirror/commit/d522155ff2f79eed03f73a637d8164cff9cf6f6c)** to **[6f815cd](https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716)**



---

archive/issue_comments_293998.json:
```json
{
    "body": "<a id='comment:67'>Comment 67:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716\">6f815cd</a></td><td><code>Put back convert_code for PariInstanceArgument</code></td></tr></table>\n",
    "created_at": "2016-10-14T09:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293998",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:67'>Comment 67:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716">6f815cd</a></td><td><code>Put back convert_code for PariInstanceArgument</code></td></tr></table>




---

archive/issue_comments_293999.json:
```json
{
    "body": "<a id='comment:68'>Comment 68:</a>\nReplying to [@defeo](#comment%3A66):\n> I already replied to this point saying that `pari.zero()` is \"more public\". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is \"public enough\".\n\nCould you be convinced by\n\n```\nfrom ... cimport pari_instance as pari\n```\nand then using `pari.zero()`? IMHO, that would be equally readable as the original code while still being fast.",
    "created_at": "2016-10-14T09:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-293999",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:68'>Comment 68:</a>
Replying to [@defeo](#comment%3A66):
> I already replied to this point saying that `pari.zero()` is "more public". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is "public enough".

Could you be convinced by

```
from ... cimport pari_instance as pari
```
and then using `pari.zero()`? IMHO, that would be equally readable as the original code while still being fast.



---

archive/issue_comments_294000.json:
```json
{
    "body": "<a id='comment:69'>Comment 69:</a>\nReplying to [@defeo](#comment%3A60):\n> Concerning `convert_gmp.pyx`, docstrings and function names are a bit schizophrenic on whether these are converstion to/from GMP or MPIR. Presumably they work with both?\n\nI totally agree that function names are really inconsistent. But I would keep the names for now, we can make a new ticket to change the names. I'll have a look at the docstrings.",
    "created_at": "2016-10-14T09:58:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294000",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:69'>Comment 69:</a>
Replying to [@defeo](#comment%3A60):
> Concerning `convert_gmp.pyx`, docstrings and function names are a bit schizophrenic on whether these are converstion to/from GMP or MPIR. Presumably they work with both?

I totally agree that function names are really inconsistent. But I would keep the names for now, we can make a new ticket to change the names. I'll have a look at the docstrings.



---

archive/issue_comments_294001.json:
```json
{
    "body": "<a id='comment:70'>Comment 70:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7278bcff6569664e3ee8874142142c169f367f9f\">7278bcf</a></td><td><code>Improve docstrings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d\">8b3013e</a></td><td><code>Change rational_matrix() nr/nc arguments to \"long\" to match PARI</code></td></tr></table>\n",
    "created_at": "2016-10-14T10:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294001",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:70'>Comment 70:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7278bcff6569664e3ee8874142142c169f367f9f">7278bcf</a></td><td><code>Improve docstrings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d">8b3013e</a></td><td><code>Change rational_matrix() nr/nc arguments to "long" to match PARI</code></td></tr></table>




---

archive/issue_comments_294002.json:
```json
{
    "body": "Changed commit from **[6f815cd](https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716)** to **[8b3013e](https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d)**",
    "created_at": "2016-10-14T10:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294002",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6f815cd](https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716)** to **[8b3013e](https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d)**



---

archive/issue_comments_294003.json:
```json
{
    "body": "<a id='comment:71'>Comment 71:</a>\nI think this takes care of your other comments. So that leaves the `pari_instance.zero()` issue. What do you think of [comment:68]",
    "created_at": "2016-10-14T11:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294003",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:71'>Comment 71:</a>
I think this takes care of your other comments. So that leaves the `pari_instance.zero()` issue. What do you think of [comment:68]



---

archive/issue_comments_294004.json:
```json
{
    "body": "<a id='comment:72'>Comment 72:</a>\nReplying to [git](#comment%3A67):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716\">6f815cd</a></td><td><code>Put back convert_code for PariInstanceArgument</code></td></tr></table>\n\nOk, this addresses one of my concerns. But I'm curious: what's the rationale behind writing\n\n```\ndef ...(self, ...):\n    cdef PariInstance pari_instance = <PariInstance>self\n```\n\ninstead of simply writing\n\n```\ndef ...(pari_instance, ...):\n```",
    "created_at": "2016-10-14T15:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294004",
    "user": "https://github.com/defeo"
}
```

<a id='comment:72'>Comment 72:</a>
Replying to [git](#comment%3A67):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f815cd0dcba998a748b59500d3820ff2efc9716">6f815cd</a></td><td><code>Put back convert_code for PariInstanceArgument</code></td></tr></table>

Ok, this addresses one of my concerns. But I'm curious: what's the rationale behind writing

```
def ...(self, ...):
    cdef PariInstance pari_instance = <PariInstance>self
```

instead of simply writing

```
def ...(pari_instance, ...):
```



---

archive/issue_comments_294005.json:
```json
{
    "body": "<a id='comment:73'>Comment 73:</a>\nReplying to [@jdemeyer](#comment%3A68):\n> Replying to [@defeo](#comment%3A66):\n> > I already replied to this point saying that `pari.zero()` is \"more public\". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is \"public enough\".\n\n> \n> Could you be convinced by\n> \n> ```\n> from ... cimport pari_instance as pari\n> ```\n> and then using `pari.zero()`? IMHO, that would be equally readable as the original code while still being fast.\n\nSo it seems you care about speed, here? I thought you didn't. Why don't you retrun `pari_instance.PARI_ZERO`, then? I personally don't see how speed can matter here: it's a seldom executed if-branch in a function that is probably orders of magnitude slower than the python-call overhead.\n\nI agree that's more readable, though. I'd prefer that to the current situation.",
    "created_at": "2016-10-14T15:16:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294005",
    "user": "https://github.com/defeo"
}
```

<a id='comment:73'>Comment 73:</a>
Replying to [@jdemeyer](#comment%3A68):
> Replying to [@defeo](#comment%3A66):
> > I already replied to this point saying that `pari.zero()` is "more public". You haven't given an explanation of why my point is not good, other than `pari_instance.zero()` is "public enough".

> 
> Could you be convinced by
> 
> ```
> from ... cimport pari_instance as pari
> ```
> and then using `pari.zero()`? IMHO, that would be equally readable as the original code while still being fast.

So it seems you care about speed, here? I thought you didn't. Why don't you retrun `pari_instance.PARI_ZERO`, then? I personally don't see how speed can matter here: it's a seldom executed if-branch in a function that is probably orders of magnitude slower than the python-call overhead.

I agree that's more readable, though. I'd prefer that to the current situation.



---

archive/issue_comments_294006.json:
```json
{
    "body": "<a id='comment:74'>Comment 74:</a>\nReplying to [@defeo](#comment%3A72):\n> what's the rationale behind writing\n> \n> ```\n> def ...(self, ...):\n>     cdef PariInstance pari_instance = <PariInstance>self\n> ```\n> \n> instead of simply writing\n> \n> ```\n> def ...(pari_instance, ...):\n> ```\n\nThe only reason is the usual convention that the \"self\" argument of a method should be called `self`.\n\nAnd ideally, maybe we can get rid of the `pari_instance.get_series_precision()` call to avoid the `pari_instance` argument completely.",
    "created_at": "2016-10-14T16:04:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294006",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:74'>Comment 74:</a>
Replying to [@defeo](#comment%3A72):
> what's the rationale behind writing
> 
> ```
> def ...(self, ...):
>     cdef PariInstance pari_instance = <PariInstance>self
> ```
> 
> instead of simply writing
> 
> ```
> def ...(pari_instance, ...):
> ```

The only reason is the usual convention that the "self" argument of a method should be called `self`.

And ideally, maybe we can get rid of the `pari_instance.get_series_precision()` call to avoid the `pari_instance` argument completely.



---

archive/issue_comments_294007.json:
```json
{
    "body": "Changed commit from **[8b3013e](https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d)** to **[62f227e](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)**",
    "created_at": "2016-10-15T15:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294007",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8b3013e](https://github.com/sagemath/sagetrac-mirror/commit/8b3013e1c2b698a5cd6bedef03bf90cc29cbb29d)** to **[62f227e](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)**



---

archive/issue_comments_294008.json:
```json
{
    "body": "<a id='comment:75'>Comment 75:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953\">62f227e</a></td><td><code>cimport pari_instance as pari</code></td></tr></table>\n",
    "created_at": "2016-10-15T15:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294008",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:75'>Comment 75:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953">62f227e</a></td><td><code>cimport pari_instance as pari</code></td></tr></table>




---

archive/issue_comments_294009.json:
```json
{
    "body": "<a id='comment:76'>Comment 76:</a>\nSorry for the delay, good to go for me.",
    "created_at": "2016-10-18T13:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294009",
    "user": "https://github.com/defeo"
}
```

<a id='comment:76'>Comment 76:</a>
Sorry for the delay, good to go for me.



---

archive/issue_events_258254.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2016-10-18T13:50:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-258254"
}
```



---

archive/issue_events_258255.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2016-10-18T13:50:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-258255"
}
```



---

archive/issue_comments_294010.json:
```json
{
    "body": "<a id='comment:77'>Comment 77:</a>\nThanks! Could you also have a look at #21703 please?",
    "created_at": "2016-10-18T16:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294010",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:77'>Comment 77:</a>
Thanks! Could you also have a look at #21703 please?



---

archive/issue_comments_294011.json:
```json
{
    "body": "<a id='comment:78'>Comment 78:</a>\nyup. looking at it.",
    "created_at": "2016-10-18T16:49:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294011",
    "user": "https://github.com/defeo"
}
```

<a id='comment:78'>Comment 78:</a>
yup. looking at it.



---

archive/issue_events_258256.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-21T07:04:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-258256"
}
```



---

archive/issue_events_258257.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "395e999c38461d9cce177af9b1fde96f4ed27630",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-10-21T07:04:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20241#event-258257"
}
```



---

archive/issue_comments_294012.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[62f227e](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)**",
    "created_at": "2016-10-21T07:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20241#issuecomment-294012",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/20241](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/20241)** to **[62f227e](https://github.com/sagemath/sagetrac-mirror/commit/62f227ebaf34601aa818b60ff6bf2b3d0641a953)**
