# Issue 20926: C++11 workarounds

archive/issues_020689.json:
```json
{
    "assignees": [],
    "body": "The purpose of this ticket is to get Sage to build with gcc6 asap; This requires some workarounds since gcc6 defaults to `std=gnu++14` and some of our packages aren't ready.\n\n---\n\n* BRiAl -- configure issue, see #20741\n* eclib -- builds with `-std=c++98`\n* LinBox -- builds with `-std=c++98`, see #20929\n* PPL -- builds with `-std=c++98`, but can be updated, see #20927\n* Singular -- see #20738\n* Sage library (because of inclusion of e.g LinBox headers)\n\n\nDepends on #20927\nDepends on #20741\nDepends on #20738\n\nKeywords: **gcc6 c++11 c++14**\n\nBranch: **[`86e6a4b`](https://github.com/sagemath/sagetrac-mirror/commit/86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Volker Braun**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20926_\n\n",
    "closed_at": "2016-07-16T20:06:30Z",
    "created_at": "2016-07-03T10:45:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "C++11 workarounds",
    "type": "issue",
    "updated_at": "2016-10-20T20:14:28Z",
    "url": "https://github.com/sagemath/sage/issues/20926",
    "user": "https://github.com/vbraun"
}
```
The purpose of this ticket is to get Sage to build with gcc6 asap; This requires some workarounds since gcc6 defaults to `std=gnu++14` and some of our packages aren't ready.

---

* BRiAl -- configure issue, see #20741
* eclib -- builds with `-std=c++98`
* LinBox -- builds with `-std=c++98`, see #20929
* PPL -- builds with `-std=c++98`, but can be updated, see #20927
* Singular -- see #20738
* Sage library (because of inclusion of e.g LinBox headers)


Depends on #20927
Depends on #20741
Depends on #20738

Keywords: **gcc6 c++11 c++14**

Branch: **[`86e6a4b`](https://github.com/sagemath/sagetrac-mirror/commit/86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13)**

Reviewer: **Dima Pasechnik**

Author: **Volker Braun**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/20926_





---

archive/issue_events_291868.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-03T10:45:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20926#event-291868"
}
```



---

archive/issue_events_291869.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-03T10:45:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20926#event-291869"
}
```



---

archive/issue_events_291870.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-03T10:48:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20926#event-291870"
}
```



---

archive/issue_events_291871.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-03T10:48:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20926#event-291871"
}
```



---

archive/issue_comments_303953.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Workaround for gcc6 which defaults to c++11\n``````\n",
    "created_at": "2016-07-03T10:48:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303953",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Workaround for gcc6 which defaults to c++11
``````




---

archive/issue_comments_303954.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2016-07-03T10:48:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303954",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_comments_303955.json:
```json
{
    "body": "Branch: **[u/vbraun/c__11_workarounds](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/c__11_workarounds)**",
    "created_at": "2016-07-03T10:49:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303955",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/c__11_workarounds](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/c__11_workarounds)**



---

archive/issue_comments_303956.json:
```json
{
    "body": "Commit: **[`1ff411e`](https://github.com/sagemath/sagetrac-mirror/commit/1ff411e1e19641262c9b4c9542bb49c21efd47b7)**",
    "created_at": "2016-07-03T10:49:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303956",
    "user": "https://github.com/vbraun"
}
```

Commit: **[`1ff411e`](https://github.com/sagemath/sagetrac-mirror/commit/1ff411e1e19641262c9b4c9542bb49c21efd47b7)**



---

archive/issue_comments_303957.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nProper fix for gfan shall go to #20925\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ff411e1e19641262c9b4c9542bb49c21efd47b7\"><code>1ff411e</code></a></td><td><code>Build gfan with gnu++98</code></td></tr></table>\n",
    "created_at": "2016-07-03T10:49:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303957",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">comment:3</div>

Proper fix for gfan shall go to #20925

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ff411e1e19641262c9b4c9542bb49c21efd47b7"><code>1ff411e</code></a></td><td><code>Build gfan with gnu++98</code></td></tr></table>




---

archive/issue_comments_303958.json:
```json
{
    "body": "Changed keywords from none to **gcc6 c++11**",
    "created_at": "2016-07-03T10:52:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303958",
    "user": "https://github.com/vbraun"
}
```

Changed keywords from none to **gcc6 c++11**



---

archive/issue_comments_303959.json:
```json
{
    "body": "Dependencies: **#20927**",
    "created_at": "2016-07-03T10:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303959",
    "user": "https://github.com/vbraun"
}
```

Dependencies: **#20927**



---

archive/issue_comments_303960.json:
```json
{
    "body": "Changed commit from **[`1ff411e`](https://github.com/sagemath/sagetrac-mirror/commit/1ff411e1e19641262c9b4c9542bb49c21efd47b7)** to **[`097b1ac`](https://github.com/sagemath/sagetrac-mirror/commit/097b1acd2f8e008acd45f1760e83778b6bbd4246)**",
    "created_at": "2016-07-03T10:59:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303960",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1ff411e`](https://github.com/sagemath/sagetrac-mirror/commit/1ff411e1e19641262c9b4c9542bb49c21efd47b7)** to **[`097b1ac`](https://github.com/sagemath/sagetrac-mirror/commit/097b1acd2f8e008acd45f1760e83778b6bbd4246)**



---

archive/issue_comments_303961.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0b13d7cb8c9188332be01e997a928fce190e48c\"><code>b0b13d7</code></a></td><td><code>Update to ppl-1.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/097b1acd2f8e008acd45f1760e83778b6bbd4246\"><code>097b1ac</code></a></td><td><code>Build gfan with gnu++98</code></td></tr></table>\n",
    "created_at": "2016-07-03T10:59:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303961",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0b13d7cb8c9188332be01e997a928fce190e48c"><code>b0b13d7</code></a></td><td><code>Update to ppl-1.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/097b1acd2f8e008acd45f1760e83778b6bbd4246"><code>097b1ac</code></a></td><td><code>Build gfan with gnu++98</code></td></tr></table>




---

archive/issue_comments_303962.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Workaround for gcc6 which defaults to c++11\n+The purpose of this ticket is to get Sage to build with gcc6 asap; This requires some workarounds since gcc6 defaults to c++11 and some of our packages aren't ready.\n``````\n",
    "created_at": "2016-07-03T11:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303962",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-Workaround for gcc6 which defaults to c++11
+The purpose of this ticket is to get Sage to build with gcc6 asap; This requires some workarounds since gcc6 defaults to c++11 and some of our packages aren't ready.
``````




---

archive/issue_comments_303963.json:
```json
{
    "body": "Changed dependencies from **#20927** to **#20927 #20741**",
    "created_at": "2016-07-03T11:07:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303963",
    "user": "https://github.com/vbraun"
}
```

Changed dependencies from **#20927** to **#20927 #20741**



---

archive/issue_comments_303964.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nProper fix for eclib shall go to #20928",
    "created_at": "2016-07-03T11:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303964",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">comment:9</div>

Proper fix for eclib shall go to #20928



---

archive/issue_comments_303965.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da85dbda60dea5613616dead7abaa0e977d9ae00\"><code>da85dbd</code></a></td><td><code>Update brial to 0.8.5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/386e1d32c8849fd25e57d289c7f0dc745e03dcc5\"><code>386e1d3</code></a></td><td><code>Merge #20741 into #20926</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd8be5f08e02a91bd8d3e98fa2c6ef5a393e08b4\"><code>dd8be5f</code></a></td><td><code>Build eclib with gnu++98</code></td></tr></table>\n",
    "created_at": "2016-07-03T11:17:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303965",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da85dbda60dea5613616dead7abaa0e977d9ae00"><code>da85dbd</code></a></td><td><code>Update brial to 0.8.5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/386e1d32c8849fd25e57d289c7f0dc745e03dcc5"><code>386e1d3</code></a></td><td><code>Merge #20741 into #20926</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd8be5f08e02a91bd8d3e98fa2c6ef5a393e08b4"><code>dd8be5f</code></a></td><td><code>Build eclib with gnu++98</code></td></tr></table>




---

archive/issue_comments_303966.json:
```json
{
    "body": "Changed commit from **[`097b1ac`](https://github.com/sagemath/sagetrac-mirror/commit/097b1acd2f8e008acd45f1760e83778b6bbd4246)** to **[`dd8be5f`](https://github.com/sagemath/sagetrac-mirror/commit/dd8be5f08e02a91bd8d3e98fa2c6ef5a393e08b4)**",
    "created_at": "2016-07-03T11:17:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303966",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`097b1ac`](https://github.com/sagemath/sagetrac-mirror/commit/097b1acd2f8e008acd45f1760e83778b6bbd4246)** to **[`dd8be5f`](https://github.com/sagemath/sagetrac-mirror/commit/dd8be5f08e02a91bd8d3e98fa2c6ef5a393e08b4)**



---

archive/issue_comments_303967.json:
```json
{
    "body": "Changed dependencies from **#20927 #20741** to **#20927 #20741 #20738**",
    "created_at": "2016-07-03T11:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303967",
    "user": "https://github.com/vbraun"
}
```

Changed dependencies from **#20927 #20741** to **#20927 #20741 #20738**



---

archive/issue_comments_303968.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,11 @@\n The purpose of this ticket is to get Sage to build with gcc6 asap; This requires some workarounds since gcc6 defaults to c++11 and some of our packages aren't ready.\n+\n+---\n+\n+* BRiAl -- configure issue, see #20741\n+* eclib -- builds with `-std=c++98`\n+* LinBox -- builds with `-std=c++98`\n+* PPL -- builds with `-std=c++98`, but can be updated, see #20927\n+* Singular -- see #20738\n+* Sage library (because of inclusion of e.g LinBox headers)\n+\n``````\n",
    "created_at": "2016-07-03T11:37:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303968",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,11 @@
 The purpose of this ticket is to get Sage to build with gcc6 asap; This requires some workarounds since gcc6 defaults to c++11 and some of our packages aren't ready.
+
+---
+
+* BRiAl -- configure issue, see #20741
+* eclib -- builds with `-std=c++98`
+* LinBox -- builds with `-std=c++98`
+* PPL -- builds with `-std=c++98`, but can be updated, see #20927
+* Singular -- see #20738
+* Sage library (because of inclusion of e.g LinBox headers)
+
``````




---

archive/issue_comments_303969.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI've posted a patch for the Sage library on sage-release.\n\nWhile Singular builds, the executable and libsingular (hence Sage) crash for me and others (cf. #20738 and sage-release).",
    "created_at": "2016-07-03T11:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303969",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:13" align="right">comment:13</div>

I've posted a patch for the Sage library on sage-release.

While Singular builds, the executable and libsingular (hence Sage) crash for me and others (cf. #20738 and sage-release).



---

archive/issue_comments_303970.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@nexttime](#comment%3A13):\n> I've posted a patch for the Sage library on sage-release.\n\n```patch\ndiff --git a/src/sage/libs/linbox/linbox.pxd b/src/sage/libs/linbox/linbox.pxd\nindex 0afd7bf..87a5e79 100644\n--- a/src/sage/libs/linbox/linbox.pxd\n+++ b/src/sage/libs/linbox/linbox.pxd\n@@ -1,3 +1,6 @@\n+# distutils: language = c++\n+# distutils: extra_compile_args = -std=c++98\n+\n from sage.libs.gmp.types cimport mpz_t\n \n include 'sage/modules/vector_modn_sparse_h.pxi'\ndiff --git a/src/sage/matrix/matrix_modn_sparse.pxd b/src/sage/matrix/matrix_modn_sparse.pxd\nindex 5273ec3..14a98e7 100644\n--- a/src/sage/matrix/matrix_modn_sparse.pxd\n+++ b/src/sage/matrix/matrix_modn_sparse.pxd\n@@ -1,3 +1,5 @@\n+# distutils: language = c\n+\n cimport matrix_sparse\n \n include 'sage/modules/vector_modn_sparse_h.pxi'\n```",
    "created_at": "2016-07-03T11:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303970",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@nexttime](#comment%3A13):
> I've posted a patch for the Sage library on sage-release.

```patch
diff --git a/src/sage/libs/linbox/linbox.pxd b/src/sage/libs/linbox/linbox.pxd
index 0afd7bf..87a5e79 100644
--- a/src/sage/libs/linbox/linbox.pxd
+++ b/src/sage/libs/linbox/linbox.pxd
@@ -1,3 +1,6 @@
+# distutils: language = c++
+# distutils: extra_compile_args = -std=c++98
+
 from sage.libs.gmp.types cimport mpz_t
 
 include 'sage/modules/vector_modn_sparse_h.pxi'
diff --git a/src/sage/matrix/matrix_modn_sparse.pxd b/src/sage/matrix/matrix_modn_sparse.pxd
index 5273ec3..14a98e7 100644
--- a/src/sage/matrix/matrix_modn_sparse.pxd
+++ b/src/sage/matrix/matrix_modn_sparse.pxd
@@ -1,3 +1,5 @@
+# distutils: language = c
+
 cimport matrix_sparse
 
 include 'sage/modules/vector_modn_sparse_h.pxi'
```



---

archive/issue_comments_303971.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nForgot the hunk for `module_list`:\n\n```patch\ndiff --git a/src/module_list.py b/src/module_list.py\nindex a49ed36..8441106 100644\n--- a/src/module_list.py\n+++ b/src/module_list.py\n@@ -926,7 +926,7 @@ ext_modules = [\n               libraries = ['ntl', 'linbox', 'givaro', 'mpfr', 'gmpxx', 'gmp'] + cblas_libs,\n               library_dirs = cblas_library_dirs,\n               include_dirs = cblas_include_dirs,\n-              extra_compile_args = ['-DDISABLE_COMMENTATOR'] + givaro_extra_compile_args),\n+              extra_compile_args = ['-std=c++98', '-DDISABLE_COMMENTATOR'] + givaro_extra_compile_args),\n \n     Extension('sage.matrix.matrix_modn_dense_double',\n               sources = ['sage/matrix/matrix_modn_dense_double.pyx'],\n@@ -934,7 +934,7 @@ ext_modules = [\n               libraries = ['ntl', 'linbox', 'givaro', 'mpfr', 'gmpxx', 'gmp'] + cblas_libs,\n               library_dirs = cblas_library_dirs,\n               include_dirs = cblas_include_dirs,\n-              extra_compile_args = [\"-D_XPG6\", \"-DDISABLE_COMMENTATOR\"]\n+              extra_compile_args = ['-std=c++98', \"-D_XPG6\", \"-DDISABLE_COMMENTATOR\"]\n                     + m4ri_extra_compile_args + givaro_extra_compile_args),\n \n     Extension('sage.matrix.matrix_modn_sparse',\n```",
    "created_at": "2016-07-03T11:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303971",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:15" align="right">comment:15</div>

Forgot the hunk for `module_list`:

```patch
diff --git a/src/module_list.py b/src/module_list.py
index a49ed36..8441106 100644
--- a/src/module_list.py
+++ b/src/module_list.py
@@ -926,7 +926,7 @@ ext_modules = [
               libraries = ['ntl', 'linbox', 'givaro', 'mpfr', 'gmpxx', 'gmp'] + cblas_libs,
               library_dirs = cblas_library_dirs,
               include_dirs = cblas_include_dirs,
-              extra_compile_args = ['-DDISABLE_COMMENTATOR'] + givaro_extra_compile_args),
+              extra_compile_args = ['-std=c++98', '-DDISABLE_COMMENTATOR'] + givaro_extra_compile_args),
 
     Extension('sage.matrix.matrix_modn_dense_double',
               sources = ['sage/matrix/matrix_modn_dense_double.pyx'],
@@ -934,7 +934,7 @@ ext_modules = [
               libraries = ['ntl', 'linbox', 'givaro', 'mpfr', 'gmpxx', 'gmp'] + cblas_libs,
               library_dirs = cblas_library_dirs,
               include_dirs = cblas_include_dirs,
-              extra_compile_args = ["-D_XPG6", "-DDISABLE_COMMENTATOR"]
+              extra_compile_args = ['-std=c++98', "-D_XPG6", "-DDISABLE_COMMENTATOR"]
                     + m4ri_extra_compile_args + givaro_extra_compile_args),
 
     Extension('sage.matrix.matrix_modn_sparse',
```



---

archive/issue_comments_303972.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The purpose of this ticket is to get Sage to build with gcc6 asap; This requires some workarounds since gcc6 defaults to c++11 and some of our packages aren't ready.\n+The purpose of this ticket is to get Sage to build with gcc6 asap; This requires some workarounds since gcc6 defaults to `std=gnu++14` and some of our packages aren't ready.\n \n ---\n \n``````\n",
    "created_at": "2016-07-03T12:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303972",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The purpose of this ticket is to get Sage to build with gcc6 asap; This requires some workarounds since gcc6 defaults to c++11 and some of our packages aren't ready.
+The purpose of this ticket is to get Sage to build with gcc6 asap; This requires some workarounds since gcc6 defaults to `std=gnu++14` and some of our packages aren't ready.
 
 ---
 
``````




---

archive/issue_comments_303973.json:
```json
{
    "body": "Changed keywords from **gcc6 c++11** to **gcc6 c++11 c++14**",
    "created_at": "2016-07-03T12:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303973",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from **gcc6 c++11** to **gcc6 c++11 c++14**



---

archive/issue_comments_303974.json:
```json
{
    "body": "Changed commit from **[`dd8be5f`](https://github.com/sagemath/sagetrac-mirror/commit/dd8be5f08e02a91bd8d3e98fa2c6ef5a393e08b4)** to **[`a277a57`](https://github.com/sagemath/sagetrac-mirror/commit/a277a5770f343af475c31e0ce79c718e04dfdaac)**",
    "created_at": "2016-07-03T12:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303974",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dd8be5f`](https://github.com/sagemath/sagetrac-mirror/commit/dd8be5f08e02a91bd8d3e98fa2c6ef5a393e08b4)** to **[`a277a57`](https://github.com/sagemath/sagetrac-mirror/commit/a277a5770f343af475c31e0ce79c718e04dfdaac)**



---

archive/issue_comments_303975.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0da72bc61a8cb5976b4762b01c051e482dbe4f6\"><code>d0da72b</code></a></td><td><code>singular: fix build with GCC6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04c0af9477f794f5d00a1c813725049d340bf4bd\"><code>04c0af9</code></a></td><td><code>replace &mach_o[0] by mach_o</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e32c597506240ba49ca2373872ad7235c9a1d49\"><code>2e32c59</code></a></td><td><code>Merge #20738 into #20926</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3352cab34cf8fa57eca64151d2f1f0a31842205\"><code>a3352ca</code></a></td><td><code>Build linbox with gnu++98</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a277a5770f343af475c31e0ce79c718e04dfdaac\"><code>a277a57</code></a></td><td><code>Use c++98 in the Sage library when compiling with linbox headers</code></td></tr></table>\n",
    "created_at": "2016-07-03T12:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303975",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0da72bc61a8cb5976b4762b01c051e482dbe4f6"><code>d0da72b</code></a></td><td><code>singular: fix build with GCC6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04c0af9477f794f5d00a1c813725049d340bf4bd"><code>04c0af9</code></a></td><td><code>replace &mach_o[0] by mach_o</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e32c597506240ba49ca2373872ad7235c9a1d49"><code>2e32c59</code></a></td><td><code>Merge #20738 into #20926</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3352cab34cf8fa57eca64151d2f1f0a31842205"><code>a3352ca</code></a></td><td><code>Build linbox with gnu++98</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a277a5770f343af475c31e0ce79c718e04dfdaac"><code>a277a57</code></a></td><td><code>Use c++98 in the Sage library when compiling with linbox headers</code></td></tr></table>




---

archive/issue_comments_303976.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI don't like adding `-std=gnu++98` when `-std=c++98` is sufficient.",
    "created_at": "2016-07-03T12:19:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303976",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:18" align="right">comment:18</div>

I don't like adding `-std=gnu++98` when `-std=c++98` is sufficient.



---

archive/issue_comments_303977.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n * BRiAl -- configure issue, see #20741\n * eclib -- builds with `-std=c++98`\n-* LinBox -- builds with `-std=c++98`\n+* LinBox -- builds with `-std=c++98`, see #20929\n * PPL -- builds with `-std=c++98`, but can be updated, see #20927\n * Singular -- see #20738\n * Sage library (because of inclusion of e.g LinBox headers)\n``````\n",
    "created_at": "2016-07-03T13:08:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303977",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 * BRiAl -- configure issue, see #20741
 * eclib -- builds with `-std=c++98`
-* LinBox -- builds with `-std=c++98`
+* LinBox -- builds with `-std=c++98`, see #20929
 * PPL -- builds with `-std=c++98`, but can be updated, see #20927
 * Singular -- see #20738
 * Sage library (because of inclusion of e.g LinBox headers)
``````




---

archive/issue_comments_303978.json:
```json
{
    "body": "Changed commit from **[`a277a57`](https://github.com/sagemath/sagetrac-mirror/commit/a277a5770f343af475c31e0ce79c718e04dfdaac)** to **[`a9f1b9a`](https://github.com/sagemath/sagetrac-mirror/commit/a9f1b9a7174b40a83ac998659799aa1538fac127)**",
    "created_at": "2016-07-03T15:26:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303978",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a277a57`](https://github.com/sagemath/sagetrac-mirror/commit/a277a5770f343af475c31e0ce79c718e04dfdaac)** to **[`a9f1b9a`](https://github.com/sagemath/sagetrac-mirror/commit/a9f1b9a7174b40a83ac998659799aa1538fac127)**



---

archive/issue_comments_303979.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b089732f6dce7e5194ba28348e3e1683e6ef7035\"><code>b089732</code></a></td><td><code>Workaround Singular segfault with gcc6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9f1b9a7174b40a83ac998659799aa1538fac127\"><code>a9f1b9a</code></a></td><td><code>Use c++98 instead of gnu++98</code></td></tr></table>\n",
    "created_at": "2016-07-03T15:26:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303979",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b089732f6dce7e5194ba28348e3e1683e6ef7035"><code>b089732</code></a></td><td><code>Workaround Singular segfault with gcc6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9f1b9a7174b40a83ac998659799aa1538fac127"><code>a9f1b9a</code></a></td><td><code>Use c++98 instead of gnu++98</code></td></tr></table>




---

archive/issue_comments_303980.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI'd prefer if we only add `-fno-delete-null-pointer-checks` when necessary, as neither GCC 4.9.x nor 5.x are broken w.r.t. this:\n\n```sh\ncase `$CXX -dumpversion` in\n    6|6.*)\n        CXXFLAGS=\"$CXXFLAGS -fno-delete-null-pointer-checks\"\n        ;;\nesac\n```\n\n(The `6` is necessary for OpenSuSE's GCC IIRC.  `CXXFLAGS` already get exported earlier in Singular's `spkg-install`.)",
    "created_at": "2016-07-03T16:57:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303980",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:21" align="right">comment:21</div>

I'd prefer if we only add `-fno-delete-null-pointer-checks` when necessary, as neither GCC 4.9.x nor 5.x are broken w.r.t. this:

```sh
case `$CXX -dumpversion` in
    6|6.*)
        CXXFLAGS="$CXXFLAGS -fno-delete-null-pointer-checks"
        ;;
esac
```

(The `6` is necessary for OpenSuSE's GCC IIRC.  `CXXFLAGS` already get exported earlier in Singular's `spkg-install`.)



---

archive/issue_comments_303981.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nFor singular, `-fno-strict-overflow` seems to be an even better flag. This does not surprise too much as there are numerous warnings about conversions between pointers and signed integers.",
    "created_at": "2016-07-03T19:48:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303981",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">comment:22</div>

For singular, `-fno-strict-overflow` seems to be an even better flag. This does not surprise too much as there are numerous warnings about conversions between pointers and signed integers.



---

archive/issue_comments_303982.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@vbraun](#comment%3A22):\n> For singular, `-fno-strict-overflow` seems to be an even better flag.\n\nYou mean *instead of* `-fno-delete-null-pointer-checks`?\n\n(In contrast to the latter, it's disabled with `-O1`, which worked for me, but only in conjunction with the latter, i.e. `-O1 -fno-delete-null-pointer-checks`, IIRC, cf. #20738 comment 6.)\n\n\\\\\n\n> This does not surprise too much as there are numerous warnings about conversions between pointers and signed integers.\n\nBesides a lot of other suspicious warnings...",
    "created_at": "2016-07-03T21:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303982",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@vbraun](#comment%3A22):
> For singular, `-fno-strict-overflow` seems to be an even better flag.

You mean *instead of* `-fno-delete-null-pointer-checks`?

(In contrast to the latter, it's disabled with `-O1`, which worked for me, but only in conjunction with the latter, i.e. `-O1 -fno-delete-null-pointer-checks`, IIRC, cf. #20738 comment 6.)

\\

> This does not surprise too much as there are numerous warnings about conversions between pointers and signed integers.

Besides a lot of other suspicious warnings...



---

archive/issue_comments_303983.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOr did you add some `extra_compile_args` in `src/sage/libs/singular/*.pxd` as well?",
    "created_at": "2016-07-03T21:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303983",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:24" align="right">comment:24</div>

Or did you add some `extra_compile_args` in `src/sage/libs/singular/*.pxd` as well?



---

archive/issue_comments_303984.json:
```json
{
    "body": "Changed commit from **[`a9f1b9a`](https://github.com/sagemath/sagetrac-mirror/commit/a9f1b9a7174b40a83ac998659799aa1538fac127)** to **[`7406306`](https://github.com/sagemath/sagetrac-mirror/commit/7406306748d076dd8278491ee612bb6130d509a1)**",
    "created_at": "2016-07-03T21:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303984",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a9f1b9a`](https://github.com/sagemath/sagetrac-mirror/commit/a9f1b9a7174b40a83ac998659799aa1538fac127)** to **[`7406306`](https://github.com/sagemath/sagetrac-mirror/commit/7406306748d076dd8278491ee612bb6130d509a1)**



---

archive/issue_comments_303985.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7406306748d076dd8278491ee612bb6130d509a1\"><code>7406306</code></a></td><td><code>Use -fno-strict-overflow when building Singular</code></td></tr></table>\n",
    "created_at": "2016-07-03T21:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303985",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7406306748d076dd8278491ee612bb6130d509a1"><code>7406306</code></a></td><td><code>Use -fno-strict-overflow when building Singular</code></td></tr></table>




---

archive/issue_comments_303986.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@nexttime](#comment%3A23):\n> Replying to [@vbraun](#comment%3A22):\n> > For singular, `-fno-strict-overflow` seems to be an even better flag.\n\n> \n> You mean *instead of* `-fno-delete-null-pointer-checks`?\n> \n> (In contrast to the latter, it's disabled with `-O1`, which worked for me, but only in conjunction with the latter, i.e. `-O1 -fno-delete-null-pointer-checks`, IIRC, cf. #20738 comment 6.)\n\nWith just `-fno-strict-overflow` added to (just) `CXXFLAGS`, `./sage --singular` immediately segfaults for me.",
    "created_at": "2016-07-03T21:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303986",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@nexttime](#comment%3A23):
> Replying to [@vbraun](#comment%3A22):
> > For singular, `-fno-strict-overflow` seems to be an even better flag.

> 
> You mean *instead of* `-fno-delete-null-pointer-checks`?
> 
> (In contrast to the latter, it's disabled with `-O1`, which worked for me, but only in conjunction with the latter, i.e. `-O1 -fno-delete-null-pointer-checks`, IIRC, cf. #20738 comment 6.)

With just `-fno-strict-overflow` added to (just) `CXXFLAGS`, `./sage --singular` immediately segfaults for me.



---

archive/issue_comments_303987.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThe remaining three failures seem to be due to brial/polybori\n\n```\nsage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to segmentation fault\nsage -t --long src/sage/crypto/mq/sr.py  # Killed due to segmentation fault\nsage -t --long src/sage/rings/polynomial/pbori.pyx  # Killed due to abort\n```",
    "created_at": "2016-07-03T21:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303987",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">comment:27</div>

The remaining three failures seem to be due to brial/polybori

```
sage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to segmentation fault
sage -t --long src/sage/crypto/mq/sr.py  # Killed due to segmentation fault
sage -t --long src/sage/rings/polynomial/pbori.pyx  # Killed due to abort
```



---

archive/issue_comments_303988.json:
```json
{
    "body": "Changed commit from **[`7406306`](https://github.com/sagemath/sagetrac-mirror/commit/7406306748d076dd8278491ee612bb6130d509a1)** to **[`04eac6f`](https://github.com/sagemath/sagetrac-mirror/commit/04eac6fa4e8b0329bc24d363c64765997f1329e9)**",
    "created_at": "2016-07-04T18:48:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303988",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7406306`](https://github.com/sagemath/sagetrac-mirror/commit/7406306748d076dd8278491ee612bb6130d509a1)** to **[`04eac6f`](https://github.com/sagemath/sagetrac-mirror/commit/04eac6fa4e8b0329bc24d363c64765997f1329e9)**



---

archive/issue_comments_303989.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04eac6fa4e8b0329bc24d363c64765997f1329e9\"><code>04eac6f</code></a></td><td><code>Use -fno-delete-null-pointer-checks -fno-strict-overflow when building Singular</code></td></tr></table>\n",
    "created_at": "2016-07-04T18:48:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303989",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04eac6fa4e8b0329bc24d363c64765997f1329e9"><code>04eac6f</code></a></td><td><code>Use -fno-delete-null-pointer-checks -fno-strict-overflow when building Singular</code></td></tr></table>




---

archive/issue_comments_303990.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13\"><code>86e6a4b</code></a></td><td><code>Build brial with c++98</code></td></tr></table>\n",
    "created_at": "2016-07-04T19:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303990",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13"><code>86e6a4b</code></a></td><td><code>Build brial with c++98</code></td></tr></table>




---

archive/issue_comments_303991.json:
```json
{
    "body": "Changed commit from **[`04eac6f`](https://github.com/sagemath/sagetrac-mirror/commit/04eac6fa4e8b0329bc24d363c64765997f1329e9)** to **[`86e6a4b`](https://github.com/sagemath/sagetrac-mirror/commit/86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13)**",
    "created_at": "2016-07-04T19:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303991",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`04eac6f`](https://github.com/sagemath/sagetrac-mirror/commit/04eac6fa4e8b0329bc24d363c64765997f1329e9)** to **[`86e6a4b`](https://github.com/sagemath/sagetrac-mirror/commit/86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13)**



---

archive/issue_comments_303992.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@sagetrac-git](#comment%3A29):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13\"><code>86e6a4b</code></a></td><td><code>Build brial with c++98</code></td></tr></table>\n\nAs I remember I advocated for something like that initially. Actually I said I should do something about the configure script and I forgot.",
    "created_at": "2016-07-04T21:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303992",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@sagetrac-git](#comment%3A29):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13"><code>86e6a4b</code></a></td><td><code>Build brial with c++98</code></td></tr></table>

As I remember I advocated for something like that initially. Actually I said I should do something about the configure script and I forgot.



---

archive/issue_comments_303993.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@kiwifb](#comment%3A30):\n> As I remember I advocated for something like that initially. Actually I said I should do something about the configure script and I forgot.\n\nThere is probably a bug in the Brial code path, this should be fixed on the C++ level. But in another ticket.",
    "created_at": "2016-07-06T07:26:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303993",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@kiwifb](#comment%3A30):
> As I remember I advocated for something like that initially. Actually I said I should do something about the configure script and I forgot.

There is probably a bug in the Brial code path, this should be fixed on the C++ level. But in another ticket.



---

archive/issue_comments_303994.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nAll tests pass for me, we should merge this asap...",
    "created_at": "2016-07-06T07:26:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303994",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:32" align="right">comment:32</div>

All tests pass for me, we should merge this asap...



---

archive/issue_events_291872.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-06T07:26:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20926#event-291872"
}
```



---

archive/issue_events_291873.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-06T07:26:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20926#event-291873"
}
```



---

archive/issue_events_291874.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-06T07:26:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20926#event-291874"
}
```



---

archive/issue_comments_303995.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI see *\"trac's automerging failed\"* (branch is colored red)...\n\n---\n\nGoing to test on top of beta7...",
    "created_at": "2016-07-09T13:47:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303995",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:33" align="right">comment:33</div>

I see *"trac's automerging failed"* (branch is colored red)...

---

Going to test on top of beta7...



---

archive/issue_comments_303996.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@vbraun](#comment%3A31):\n> There is probably a bug in the Brial code path, this should be fixed on the C++ level. But in another ticket.\n\nDoes this refer to the three segfaults / aborts in ptestlong you reported [above](#comment%3A27)?  How did you get these?\n\n\\\\\n\nWith Sage 7.3.beta7 (plus the branch here) and vanilla FSF GCC 6.1.0, GCC configured to produce native code by default, but otherwise no `*FLAGS` set, ptestlong passes for me (modulo the usual failure in one test due to numeric noise and another GAP-related which nearly always fails in the first place, but passes when rerun) on Linux x86_64 (Haswell-E).",
    "created_at": "2016-07-09T18:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303996",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@vbraun](#comment%3A31):
> There is probably a bug in the Brial code path, this should be fixed on the C++ level. But in another ticket.

Does this refer to the three segfaults / aborts in ptestlong you reported [above](#comment%3A27)?  How did you get these?

\\

With Sage 7.3.beta7 (plus the branch here) and vanilla FSF GCC 6.1.0, GCC configured to produce native code by default, but otherwise no `*FLAGS` set, ptestlong passes for me (modulo the usual failure in one test due to numeric noise and another GAP-related which nearly always fails in the first place, but passes when rerun) on Linux x86_64 (Haswell-E).



---

archive/issue_comments_303997.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\n[As mentioned](#comment%3A21), I'd prefer if we only mess with optimization flags when necessary (i.e., only disable some in Singular's `spkg-install` if `$CXX` is really GCC 6.x).\n\nOtherwise I'm ok with your changes, and mine as well... ;-)",
    "created_at": "2016-07-09T18:48:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303997",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:35" align="right">comment:35</div>

[As mentioned](#comment%3A21), I'd prefer if we only mess with optimization flags when necessary (i.e., only disable some in Singular's `spkg-install` if `$CXX` is really GCC 6.x).

Otherwise I'm ok with your changes, and mine as well... ;-)



---

archive/issue_comments_303998.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@nexttime](#comment%3A35):\n> [As mentioned](#comment%3A21), I'd prefer if we only mess with optimization flags when necessary (i.e., only disable some in Singular's `spkg-install` if `$CXX` is really GCC 6.x).\n\nP.S.:  There should be a `2>/dev/null` in <code>\\`$CXX -dumpversion\\`</code>, and while I don't mind re-exporting CXXFLAGS, I'd move their modification a bit up (to not mix it with changes to`MAKE`):\n\n```diff\ndiff --git a/build/pkgs/singular/spkg-install b/build/pkgs/singular/spkg-install\nindex 0b21be7..024b1e1 100755\n--- a/build/pkgs/singular/spkg-install\n+++ b/build/pkgs/singular/spkg-install\n@@ -73,10 +73,18 @@ export CPPFLAGS=\"-I$SAGE_LOCAL/include $CPPFLAGS\"\n export CXXFLAGS=\"$CXXFLAGS -fPIC\"\n export CFLAGS=\"$CFLAGS -fPIC\"\n \n+# Workaround for GCC6: https://trac.sagemath.org/ticket/20926\n+case `$CXX -dumpversion 2>/dev/null` in\n+    6|6.*)\n+        export CXXFLAGS=\"$CXXFLAGS -fno-delete-null-pointer-checks -fno-strict-overflow\"\n+        ;;\n+esac\n+\n # Singular does not respect LDFLAGS; Ugly hack:\n # Used on Linux and Darwin (see singular-3.1.7-use_cxx_for_linking.patch)\n export CXX=\"$CXX $LDFLAGS\"\n \n+\n # The Sun assembler has problems with -pipe, so disable it.\n # This only affects compile time, not the compiled programs/libraries.\n if [ \"$UNAME\" = \"SunOS\" ]; then\n@@ -88,8 +96,6 @@ fi\n # parallel sometimes fails (Trac #17774)\n export MAKE=\"$MAKE -j1\"\n \n-# Workaround for GCC6: https://trac.sagemath.org/ticket/20926\n-export CXXFLAGS=\"$CXXFLAGS -fno-delete-null-pointer-checks -fno-strict-overflow\"\n \n choose_patches()\n {\n```",
    "created_at": "2016-07-09T19:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303998",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@nexttime](#comment%3A35):
> [As mentioned](#comment%3A21), I'd prefer if we only mess with optimization flags when necessary (i.e., only disable some in Singular's `spkg-install` if `$CXX` is really GCC 6.x).

P.S.:  There should be a `2>/dev/null` in <code>\`$CXX -dumpversion\`</code>, and while I don't mind re-exporting CXXFLAGS, I'd move their modification a bit up (to not mix it with changes to`MAKE`):

```diff
diff --git a/build/pkgs/singular/spkg-install b/build/pkgs/singular/spkg-install
index 0b21be7..024b1e1 100755
--- a/build/pkgs/singular/spkg-install
+++ b/build/pkgs/singular/spkg-install
@@ -73,10 +73,18 @@ export CPPFLAGS="-I$SAGE_LOCAL/include $CPPFLAGS"
 export CXXFLAGS="$CXXFLAGS -fPIC"
 export CFLAGS="$CFLAGS -fPIC"
 
+# Workaround for GCC6: https://trac.sagemath.org/ticket/20926
+case `$CXX -dumpversion 2>/dev/null` in
+    6|6.*)
+        export CXXFLAGS="$CXXFLAGS -fno-delete-null-pointer-checks -fno-strict-overflow"
+        ;;
+esac
+
 # Singular does not respect LDFLAGS; Ugly hack:
 # Used on Linux and Darwin (see singular-3.1.7-use_cxx_for_linking.patch)
 export CXX="$CXX $LDFLAGS"
 
+
 # The Sun assembler has problems with -pipe, so disable it.
 # This only affects compile time, not the compiled programs/libraries.
 if [ "$UNAME" = "SunOS" ]; then
@@ -88,8 +96,6 @@ fi
 # parallel sometimes fails (Trac #17774)
 export MAKE="$MAKE -j1"
 
-# Workaround for GCC6: https://trac.sagemath.org/ticket/20926
-export CXXFLAGS="$CXXFLAGS -fno-delete-null-pointer-checks -fno-strict-overflow"
 
 choose_patches()
 {
```



---

archive/issue_comments_303999.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nImho it depends on whether the compiler or the source is at fault. In the case of Singular I don't think its a compiler bug. So it most likely won't go away with gcc 7...",
    "created_at": "2016-07-09T19:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-303999",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:37" align="right">comment:37</div>

Imho it depends on whether the compiler or the source is at fault. In the case of Singular I don't think its a compiler bug. So it most likely won't go away with gcc 7...



---

archive/issue_comments_304000.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@vbraun](#comment%3A37):\n> Imho it depends on whether the compiler or the source is at fault. In the case of Singular I don't think its a compiler bug. So it most likely won't go away with gcc 7...\n\nWell, it goes away with GCC < 6.x, and we shouldn't throw arbitrary options at `$CXX`, which might -- for example -- be `clang`.  (Most parts of Sage did build with the latter, at least a while ago.  `clang` accepts a couple of GCC options, but spits out warnings for others it doesn't, and I wouldn't rely on the latter, i.e. wouldn't risk breaking something which previously worked, for no reason.)",
    "created_at": "2016-07-09T19:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304000",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@vbraun](#comment%3A37):
> Imho it depends on whether the compiler or the source is at fault. In the case of Singular I don't think its a compiler bug. So it most likely won't go away with gcc 7...

Well, it goes away with GCC < 6.x, and we shouldn't throw arbitrary options at `$CXX`, which might -- for example -- be `clang`.  (Most parts of Sage did build with the latter, at least a while ago.  `clang` accepts a couple of GCC options, but spits out warnings for others it doesn't, and I wouldn't rely on the latter, i.e. wouldn't risk breaking something which previously worked, for no reason.)



---

archive/issue_comments_304001.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nPresumably, the fact that Singular ever built with gcc < 6 just was a bug in gcc (insufficient checking). This is a fugly workaround that hopefully can be removed with the Singular update. I'm against putting too much lipstick on a pig; If anything work on the Singular update.",
    "created_at": "2016-07-09T20:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304001",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:39" align="right">comment:39</div>

Presumably, the fact that Singular ever built with gcc < 6 just was a bug in gcc (insufficient checking). This is a fugly workaround that hopefully can be removed with the Singular update. I'm against putting too much lipstick on a pig; If anything work on the Singular update.



---

archive/issue_comments_304002.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nI'll just confirm that this patch makes Sage compile on my machine (Arch up-to-date, gcc 6.1.1, 64 bits).",
    "created_at": "2016-07-13T20:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304002",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:40" align="right">comment:40</div>

I'll just confirm that this patch makes Sage compile on my machine (Arch up-to-date, gcc 6.1.1, 64 bits).



---

archive/issue_comments_304003.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@johanrosenkilde](#comment%3A40):\n> I'll just confirm that this patch makes Sage compile on my machine (Arch up-to-date, gcc 6.1.1, 64 bits).\n\nThanks for testing.  Did you also run `make [p]testlong`?",
    "created_at": "2016-07-13T21:44:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304003",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@johanrosenkilde](#comment%3A40):
> I'll just confirm that this patch makes Sage compile on my machine (Arch up-to-date, gcc 6.1.1, 64 bits).

Thanks for testing.  Did you also run `make [p]testlong`?



---

archive/issue_comments_304004.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nI'm still having another issue -- many default packages do not get installed during make, after make distclaen -- so there's tons of doctests failing. It seems to me that this issue isn't related to the new gcc, but I don't know where to start looking for a solution.",
    "created_at": "2016-07-14T00:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304004",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:42" align="right">comment:42</div>

I'm still having another issue -- many default packages do not get installed during make, after make distclaen -- so there's tons of doctests failing. It seems to me that this issue isn't related to the new gcc, but I don't know where to start looking for a solution.



---

archive/issue_comments_304005.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@johanrosenkilde](#comment%3A42):\n> I'm still having another issue -- many default packages do not get installed during make, after make distclaen -- so there's tons of doctests failing. It seems to me that this issue isn't related to the new gcc, but I don't know where to start looking for a solution.\n\nOT (I think), but did you try downgrading `make` (to 4.1, say)?\n\n(Or debug the Sage build process with your version as suggested on sage-devel, e.g. by starting with `make -n pkg_which_didnt_get_built`, then perhaps successively adding some debug options until you see why the package doesn't get built.)",
    "created_at": "2016-07-14T01:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304005",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@johanrosenkilde](#comment%3A42):
> I'm still having another issue -- many default packages do not get installed during make, after make distclaen -- so there's tons of doctests failing. It seems to me that this issue isn't related to the new gcc, but I don't know where to start looking for a solution.

OT (I think), but did you try downgrading `make` (to 4.1, say)?

(Or debug the Sage build process with your version as suggested on sage-devel, e.g. by starting with `make -n pkg_which_didnt_get_built`, then perhaps successively adding some debug options until you see why the package doesn't get built.)



---

archive/issue_comments_304006.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\n> OT (I think), but did you try downgrading `make` (to 4.1, say)?\n> \n> (Or debug the Sage build process with your version as suggested on sage-devel, e.g. by starting with `make -n pkg_which_didnt_get_built`, then perhaps successively adding some debug options until you see why the package doesn't get built.)\n\nSorry, I missed your reply on sage-devel! I've downgraded make and tried another run, this time with --trace -bvjm. I'll report the results on sage-devel.",
    "created_at": "2016-07-15T02:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304006",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:44" align="right">comment:44</div>

> OT (I think), but did you try downgrading `make` (to 4.1, say)?
> 
> (Or debug the Sage build process with your version as suggested on sage-devel, e.g. by starting with `make -n pkg_which_didnt_get_built`, then perhaps successively adding some debug options until you see why the package doesn't get built.)

Sorry, I missed your reply on sage-devel! I've downgraded make and tried another run, this time with --trace -bvjm. I'll report the results on sage-devel.



---

archive/issue_comments_304007.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nPeople report [errors with gcc 6.1.1](https://groups.google.com/d/msg/sage-support/YQL8Do2lItI/qFYHYYDqCgAJ), but it's not even an official release, but some RH-only hack. How does one deal with this?",
    "created_at": "2016-07-16T08:36:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304007",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:45" align="right">comment:45</div>

People report [errors with gcc 6.1.1](https://groups.google.com/d/msg/sage-support/YQL8Do2lItI/qFYHYYDqCgAJ), but it's not even an official release, but some RH-only hack. How does one deal with this?



---

archive/issue_comments_304008.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@dimpase](#comment%3A45):\n> How does one deal with this?\n\nI'd say by merging this ticket asap; I checked that it allows Sage to build on Fedora 24.",
    "created_at": "2016-07-16T09:17:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304008",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@dimpase](#comment%3A45):
> How does one deal with this?

I'd say by merging this ticket asap; I checked that it allows Sage to build on Fedora 24.



---

archive/issue_events_291875.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-07-16T09:23:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20926#event-291875"
}
```



---

archive/issue_events_291876.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-07-16T09:23:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20926#event-291876"
}
```



---

archive/issue_comments_304009.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nhere you go",
    "created_at": "2016-07-16T09:23:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304009",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:47" align="right">comment:47</div>

here you go



---

archive/issue_comments_304010.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nwell, except that there is something funny with the branch...",
    "created_at": "2016-07-16T09:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304010",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

well, except that there is something funny with the branch...



---

archive/issue_comments_304011.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2016-07-16T09:49:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304011",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_304012.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nIts just the libgit (in the trac plugin) not managing the merge, but the command-line git does it just fine.",
    "created_at": "2016-07-16T09:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304012",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:50" align="right">comment:50</div>

Its just the libgit (in the trac plugin) not managing the merge, but the command-line git does it just fine.



---

archive/issue_comments_304013.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@dimpase](#comment%3A48):\n> well, except that there is something funny with the branch...\n\nPull the trigger, ask later... ;-)\n\nNasty people might think you didn't take a look at the patch, nor read the comments.",
    "created_at": "2016-07-16T10:23:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304013",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@dimpase](#comment%3A48):
> well, except that there is something funny with the branch...

Pull the trigger, ask later... ;-)

Nasty people might think you didn't take a look at the patch, nor read the comments.



---

archive/issue_comments_304014.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@nexttime](#comment%3A51):\n> Replying to [@dimpase](#comment%3A48):\n> > well, except that there is something funny with the branch...\n\n> \n> Pull the trigger, ask later... ;-)\n> Nasty people might think you didn't take a look at the patch, nor read the comments.\n\nI read individual commits, and did not find any surprises there...",
    "created_at": "2016-07-16T10:25:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304014",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@nexttime](#comment%3A51):
> Replying to [@dimpase](#comment%3A48):
> > well, except that there is something funny with the branch...

> 
> Pull the trigger, ask later... ;-)
> Nasty people might think you didn't take a look at the patch, nor read the comments.

I read individual commits, and did not find any surprises there...



---

archive/issue_comments_304015.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI would have been more happy if someone confirmed also the documentation now builds (and tests pass) on Arch (where the first reports originated from), since segfaults do not happen during the build, but when running Sage (or e.g. Singular).",
    "created_at": "2016-07-16T10:35:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304015",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:53" align="right">comment:53</div>

I would have been more happy if someone confirmed also the documentation now builds (and tests pass) on Arch (where the first reports originated from), since segfaults do not happen during the build, but when running Sage (or e.g. Singular).



---

archive/issue_comments_304016.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nI'll also be more than happy to have this tested on Arch, but since nobody did it in a timely manner our chances are better by releasing it first. Open a followup if there is still an issue.",
    "created_at": "2016-07-16T10:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304016",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:54" align="right">comment:54</div>

I'll also be more than happy to have this tested on Arch, but since nobody did it in a timely manner our chances are better by releasing it first. Open a followup if there is still an issue.



---

archive/issue_comments_304017.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@vbraun](#comment%3A54):\n> I'll also be more than happy to have this tested on Arch, but since nobody did it in a timely manner our chances are better by releasing it first.\n\nWell, you asked for further reviewers, but didn't rebase the branch here, nor anser [my question regarding the segfaults in BRiAl](#comment%3A34) [you reported yourself](#comment%3A27), within a week.\n\n(I don't see a related commit here or a follow-up ticket *\"fixing a bug in the BRiAl code path on the C++ level\"* either.)",
    "created_at": "2016-07-16T12:18:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304017",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@vbraun](#comment%3A54):
> I'll also be more than happy to have this tested on Arch, but since nobody did it in a timely manner our chances are better by releasing it first.

Well, you asked for further reviewers, but didn't rebase the branch here, nor anser [my question regarding the segfaults in BRiAl](#comment%3A34) [you reported yourself](#comment%3A27), within a week.

(I don't see a related commit here or a follow-up ticket *"fixing a bug in the BRiAl code path on the C++ level"* either.)



---

archive/issue_comments_304018.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nAfter running `./sage -i jmol` and `./sage pip install sympy`, I can build the documentation. It's running now, so far no problems. Assuming that the package problem is orthogonal to the gcc-issue, then it's looking good.",
    "created_at": "2016-07-16T12:36:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304018",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:56" align="right">comment:56</div>

After running `./sage -i jmol` and `./sage pip install sympy`, I can build the documentation. It's running now, so far no problems. Assuming that the package problem is orthogonal to the gcc-issue, then it's looking good.



---

archive/issue_comments_304019.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nFollowups to https://github.com/BRiAl/BRiAl/issues/11",
    "created_at": "2016-07-16T12:40:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304019",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:57" align="right">comment:57</div>

Followups to https://github.com/BRiAl/BRiAl/issues/11



---

archive/issue_events_291877.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-16T20:06:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20926#event-291877"
}
```



---

archive/issue_events_291878.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8e907e8ec4ef6c146f1d67ca8878f397d1ffbfc0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-07-16T20:06:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20926#event-291878"
}
```



---

archive/issue_comments_304020.json:
```json
{
    "body": "Changed branch from **[u/vbraun/c__11_workarounds](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/c__11_workarounds)** to **[`86e6a4b`](https://github.com/sagemath/sagetrac-mirror/commit/86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13)**",
    "created_at": "2016-07-16T20:06:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304020",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vbraun/c__11_workarounds](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/c__11_workarounds)** to **[`86e6a4b`](https://github.com/sagemath/sagetrac-mirror/commit/86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13)**



---

archive/issue_comments_304021.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@vbraun](#comment%3A57):\n> Followups to https://github.com/BRiAl/BRiAl/issues/11\n\nTo not lose this on trac, I've opened #21083 which refers to the issue on github (*\"Fix compilation with c++11 (default for gcc>=6)\"*).",
    "created_at": "2016-07-24T16:30:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304021",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@vbraun](#comment%3A57):
> Followups to https://github.com/BRiAl/BRiAl/issues/11

To not lose this on trac, I've opened #21083 which refers to the issue on github (*"Fix compilation with c++11 (default for gcc>=6)"*).



---

archive/issue_comments_304022.json:
```json
{
    "body": "Changed commit from **[`86e6a4b`](https://github.com/sagemath/sagetrac-mirror/commit/86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13)** to none",
    "created_at": "2016-07-24T16:30:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304022",
    "user": "https://github.com/nexttime"
}
```

Changed commit from **[`86e6a4b`](https://github.com/sagemath/sagetrac-mirror/commit/86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13)** to none



---

archive/issue_comments_304023.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nFor the record:  Givaro's testsuite also fails to build; builds with `-std=c++98`.",
    "created_at": "2016-07-30T04:55:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304023",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:60" align="right">comment:60</div>

For the record:  Givaro's testsuite also fails to build; builds with `-std=c++98`.



---

archive/issue_comments_304024.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@nexttime](#comment%3A60):\n> For the record:  Givaro's testsuite also fails to build; builds with `-std=c++98`.\n\nThis is now #21169.",
    "created_at": "2016-08-22T14:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304024",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@nexttime](#comment%3A60):
> For the record:  Givaro's testsuite also fails to build; builds with `-std=c++98`.

This is now #21169.



---

archive/issue_comments_304025.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nWhy was the line\n\n```\n# distutils: language = c\n```\nadded to `src/sage/matrix/matrix_modn_sparse.pxd`?\n\nDoes that even do something, given that `c` is the default?",
    "created_at": "2016-10-20T20:14:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20926#issuecomment-304025",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:62" align="right">comment:62</div>

Why was the line

```
# distutils: language = c
```
added to `src/sage/matrix/matrix_modn_sparse.pxd`?

Does that even do something, given that `c` is the default?
