# Issue 20926: C++11 workarounds

archive/issues_020689.json:
```json
{
    "body": "The purpose of this ticket is to get Sage to build with gcc6 asap; This requires some workarounds since gcc6 defaults to `std=gnu++14` and some of our packages aren't ready.\n\n---\n\n* BRiAl -- configure issue, see #20741\n* eclib -- builds with `-std=c++98`\n* LinBox -- builds with `-std=c++98`, see #20929\n* PPL -- builds with `-std=c++98`, but can be updated, see #20927\n* Singular -- see #20738\n* Sage library (because of inclusion of e.g LinBox headers)\n\n\nKeywords: gcc6 c++11 c++14\n\nReviewer: Dima Pasechnik\n\nAuthor: Volker Braun\n\nBranch: 86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13\n\nDependencies: #20927 #20741 #20738\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20926\n\n",
    "closed_at": "2016-07-16T20:06:30Z",
    "created_at": "2016-07-03T10:45:58Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "C++11 workarounds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20926",
    "user": "https://github.com/vbraun"
}
```
The purpose of this ticket is to get Sage to build with gcc6 asap; This requires some workarounds since gcc6 defaults to `std=gnu++14` and some of our packages aren't ready.

---

* BRiAl -- configure issue, see #20741
* eclib -- builds with `-std=c++98`
* LinBox -- builds with `-std=c++98`, see #20929
* PPL -- builds with `-std=c++98`, but can be updated, see #20927
* Singular -- see #20738
* Sage library (because of inclusion of e.g LinBox headers)


Keywords: gcc6 c++11 c++14

Reviewer: Dima Pasechnik

Author: Volker Braun

Branch: 86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13

Dependencies: #20927 #20741 #20738

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20926





---

archive/issue_comments_285515.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2016-07-03T10:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285515",
    "user": "https://github.com/vbraun"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_285516.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: standard.",
    "created_at": "2016-07-03T10:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285516",
    "user": "https://github.com/vbraun"
}
```

Changing component from PLEASE CHANGE to packages: standard.



---

archive/issue_comments_285517.json:
```json
{
    "body": "<a id='comment:3'></a>Proper fix for gfan shall go to #20925\n\n---\nNew commits:",
    "created_at": "2016-07-03T10:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285517",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>Proper fix for gfan shall go to #20925

---
New commits:



---

archive/issue_comments_285518.json:
```json
{
    "body": "Changing keywords from \"\" to \"gcc6 c++11\".",
    "created_at": "2016-07-03T10:52:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285518",
    "user": "https://github.com/vbraun"
}
```

Changing keywords from "" to "gcc6 c++11".



---

archive/issue_comments_285519.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-07-03T10:59:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285519",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_285520.json:
```json
{
    "body": "<a id='comment:9'></a>Proper fix for eclib shall go to #20928",
    "created_at": "2016-07-03T11:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285520",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>Proper fix for eclib shall go to #20928



---

archive/issue_comments_285521.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-03T11:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285521",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_285522.json:
```json
{
    "body": "<a id='comment:13'></a>I've posted a patch for the Sage library on sage-release.\n\nWhile Singular builds, the executable and libsingular (hence Sage) crash for me and others (cf. #20738 and sage-release).",
    "created_at": "2016-07-03T11:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285522",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:13'></a>I've posted a patch for the Sage library on sage-release.

While Singular builds, the executable and libsingular (hence Sage) crash for me and others (cf. #20738 and sage-release).



---

archive/issue_comments_285523.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 leif]:\n> I've posted a patch for the Sage library on sage-release.\n\n\n```patch\ndiff --git a/src/sage/libs/linbox/linbox.pxd b/src/sage/libs/linbox/linbox.pxd\nindex 0afd7bf..87a5e79 100644\n--- a/src/sage/libs/linbox/linbox.pxd\n+++ b/src/sage/libs/linbox/linbox.pxd\n@@ -1,3 +1,6 @@\n+# distutils: language = c++\n+# distutils: extra_compile_args = -std=c++98\n+\n from sage.libs.gmp.types cimport mpz_t\n \n include 'sage/modules/vector_modn_sparse_h.pxi'\ndiff --git a/src/sage/matrix/matrix_modn_sparse.pxd b/src/sage/matrix/matrix_modn_sparse.pxd\nindex 5273ec3..14a98e7 100644\n--- a/src/sage/matrix/matrix_modn_sparse.pxd\n+++ b/src/sage/matrix/matrix_modn_sparse.pxd\n@@ -1,3 +1,5 @@\n+# distutils: language = c\n+\n cimport matrix_sparse\n \n include 'sage/modules/vector_modn_sparse_h.pxi'\n```",
    "created_at": "2016-07-03T11:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285523",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:14'></a>Replying to [comment:13 leif]:
> I've posted a patch for the Sage library on sage-release.


```patch
diff --git a/src/sage/libs/linbox/linbox.pxd b/src/sage/libs/linbox/linbox.pxd
index 0afd7bf..87a5e79 100644
--- a/src/sage/libs/linbox/linbox.pxd
+++ b/src/sage/libs/linbox/linbox.pxd
@@ -1,3 +1,6 @@
+# distutils: language = c++
+# distutils: extra_compile_args = -std=c++98
+
 from sage.libs.gmp.types cimport mpz_t
 
 include 'sage/modules/vector_modn_sparse_h.pxi'
diff --git a/src/sage/matrix/matrix_modn_sparse.pxd b/src/sage/matrix/matrix_modn_sparse.pxd
index 5273ec3..14a98e7 100644
--- a/src/sage/matrix/matrix_modn_sparse.pxd
+++ b/src/sage/matrix/matrix_modn_sparse.pxd
@@ -1,3 +1,5 @@
+# distutils: language = c
+
 cimport matrix_sparse
 
 include 'sage/modules/vector_modn_sparse_h.pxi'
```



---

archive/issue_comments_285524.json:
```json
{
    "body": "<a id='comment:15'></a>Forgot the hunk for `module_list`:\n\n```patch\ndiff --git a/src/module_list.py b/src/module_list.py\nindex a49ed36..8441106 100644\n--- a/src/module_list.py\n+++ b/src/module_list.py\n@@ -926,7 +926,7 @@ ext_modules = [\n               libraries = ['ntl', 'linbox', 'givaro', 'mpfr', 'gmpxx', 'gmp'] + cblas_libs,\n               library_dirs = cblas_library_dirs,\n               include_dirs = cblas_include_dirs,\n-              extra_compile_args = ['-DDISABLE_COMMENTATOR'] + givaro_extra_compile_args),\n+              extra_compile_args = ['-std=c++98', '-DDISABLE_COMMENTATOR'] + givaro_extra_compile_args),\n \n     Extension('sage.matrix.matrix_modn_dense_double',\n               sources = ['sage/matrix/matrix_modn_dense_double.pyx'],\n@@ -934,7 +934,7 @@ ext_modules = [\n               libraries = ['ntl', 'linbox', 'givaro', 'mpfr', 'gmpxx', 'gmp'] + cblas_libs,\n               library_dirs = cblas_library_dirs,\n               include_dirs = cblas_include_dirs,\n-              extra_compile_args = [\"-D_XPG6\", \"-DDISABLE_COMMENTATOR\"]\n+              extra_compile_args = ['-std=c++98', \"-D_XPG6\", \"-DDISABLE_COMMENTATOR\"]\n                     + m4ri_extra_compile_args + givaro_extra_compile_args),\n \n     Extension('sage.matrix.matrix_modn_sparse',\n```",
    "created_at": "2016-07-03T11:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285524",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:15'></a>Forgot the hunk for `module_list`:

```patch
diff --git a/src/module_list.py b/src/module_list.py
index a49ed36..8441106 100644
--- a/src/module_list.py
+++ b/src/module_list.py
@@ -926,7 +926,7 @@ ext_modules = [
               libraries = ['ntl', 'linbox', 'givaro', 'mpfr', 'gmpxx', 'gmp'] + cblas_libs,
               library_dirs = cblas_library_dirs,
               include_dirs = cblas_include_dirs,
-              extra_compile_args = ['-DDISABLE_COMMENTATOR'] + givaro_extra_compile_args),
+              extra_compile_args = ['-std=c++98', '-DDISABLE_COMMENTATOR'] + givaro_extra_compile_args),
 
     Extension('sage.matrix.matrix_modn_dense_double',
               sources = ['sage/matrix/matrix_modn_dense_double.pyx'],
@@ -934,7 +934,7 @@ ext_modules = [
               libraries = ['ntl', 'linbox', 'givaro', 'mpfr', 'gmpxx', 'gmp'] + cblas_libs,
               library_dirs = cblas_library_dirs,
               include_dirs = cblas_include_dirs,
-              extra_compile_args = ["-D_XPG6", "-DDISABLE_COMMENTATOR"]
+              extra_compile_args = ['-std=c++98', "-D_XPG6", "-DDISABLE_COMMENTATOR"]
                     + m4ri_extra_compile_args + givaro_extra_compile_args),
 
     Extension('sage.matrix.matrix_modn_sparse',
```



---

archive/issue_comments_285525.json:
```json
{
    "body": "Changing keywords from \"gcc6 c++11\" to \"gcc6 c++11 c++14\".",
    "created_at": "2016-07-03T12:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285525",
    "user": "https://github.com/nexttime"
}
```

Changing keywords from "gcc6 c++11" to "gcc6 c++11 c++14".



---

archive/issue_comments_285526.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-03T12:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_285527.json:
```json
{
    "body": "<a id='comment:18'></a>I don't like adding `-std=gnu++98` when `-std=c++98` is sufficient.",
    "created_at": "2016-07-03T12:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285527",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:18'></a>I don't like adding `-std=gnu++98` when `-std=c++98` is sufficient.



---

archive/issue_comments_285528.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-03T15:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_285529.json:
```json
{
    "body": "<a id='comment:21'></a>I'd prefer if we only add `-fno-delete-null-pointer-checks` when necessary, as neither GCC 4.9.x nor 5.x are broken w.r.t. this:\n\n```sh\ncase `$CXX -dumpversion` in\n    6|6.*)\n        CXXFLAGS=\"$CXXFLAGS -fno-delete-null-pointer-checks\"\n        ;;\nesac\n```\n\n(The `6` is necessary for OpenSuSE's GCC IIRC.  `CXXFLAGS` already get exported earlier in Singular's `spkg-install`.)",
    "created_at": "2016-07-03T16:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285529",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:21'></a>I'd prefer if we only add `-fno-delete-null-pointer-checks` when necessary, as neither GCC 4.9.x nor 5.x are broken w.r.t. this:

```sh
case `$CXX -dumpversion` in
    6|6.*)
        CXXFLAGS="$CXXFLAGS -fno-delete-null-pointer-checks"
        ;;
esac
```

(The `6` is necessary for OpenSuSE's GCC IIRC.  `CXXFLAGS` already get exported earlier in Singular's `spkg-install`.)



---

archive/issue_comments_285530.json:
```json
{
    "body": "<a id='comment:22'></a>For singular, `-fno-strict-overflow` seems to be an even better flag. This does not surprise too much as there are numerous warnings about conversions between pointers and signed integers.",
    "created_at": "2016-07-03T19:48:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285530",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>For singular, `-fno-strict-overflow` seems to be an even better flag. This does not surprise too much as there are numerous warnings about conversions between pointers and signed integers.



---

archive/issue_comments_285531.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:22 vbraun]:\n> For singular, `-fno-strict-overflow` seems to be an even better flag.\n\n\nYou mean *instead of* `-fno-delete-null-pointer-checks`?\n\n(In contrast to the latter, it's disabled with `-O1`, which worked for me, but only in conjunction with the latter, i.e. `-O1 -fno-delete-null-pointer-checks`, IIRC, cf. #20738 comment 6.)\n\n\\\\\n\n> This does not surprise too much as there are numerous warnings about conversions between pointers and signed integers.\n\n\nBesides a lot of other suspicious warnings...",
    "created_at": "2016-07-03T21:12:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285531",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:23'></a>Replying to [comment:22 vbraun]:
> For singular, `-fno-strict-overflow` seems to be an even better flag.


You mean *instead of* `-fno-delete-null-pointer-checks`?

(In contrast to the latter, it's disabled with `-O1`, which worked for me, but only in conjunction with the latter, i.e. `-O1 -fno-delete-null-pointer-checks`, IIRC, cf. #20738 comment 6.)

\\

> This does not surprise too much as there are numerous warnings about conversions between pointers and signed integers.


Besides a lot of other suspicious warnings...



---

archive/issue_comments_285532.json:
```json
{
    "body": "<a id='comment:24'></a>Or did you add some `extra_compile_args` in `src/sage/libs/singular/*.pxd` as well?",
    "created_at": "2016-07-03T21:26:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285532",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:24'></a>Or did you add some `extra_compile_args` in `src/sage/libs/singular/*.pxd` as well?



---

archive/issue_comments_285533.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-03T21:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285533",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_285534.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:23 leif]:\n> Replying to [comment:22 vbraun]:\n> > For singular, `-fno-strict-overflow` seems to be an even better flag.\n\n> \n> You mean *instead of* `-fno-delete-null-pointer-checks`?\n> \n> (In contrast to the latter, it's disabled with `-O1`, which worked for me, but only in conjunction with the latter, i.e. `-O1 -fno-delete-null-pointer-checks`, IIRC, cf. #20738 comment 6.)\n\n\nWith just `-fno-strict-overflow` added to (just) `CXXFLAGS`, `./sage --singular` immediately segfaults for me.",
    "created_at": "2016-07-03T21:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285534",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:26'></a>Replying to [comment:23 leif]:
> Replying to [comment:22 vbraun]:
> > For singular, `-fno-strict-overflow` seems to be an even better flag.

> 
> You mean *instead of* `-fno-delete-null-pointer-checks`?
> 
> (In contrast to the latter, it's disabled with `-O1`, which worked for me, but only in conjunction with the latter, i.e. `-O1 -fno-delete-null-pointer-checks`, IIRC, cf. #20738 comment 6.)


With just `-fno-strict-overflow` added to (just) `CXXFLAGS`, `./sage --singular` immediately segfaults for me.



---

archive/issue_comments_285535.json:
```json
{
    "body": "<a id='comment:27'></a>The remaining three failures seem to be due to brial/polybori\n\n```\nsage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to segmentation fault\nsage -t --long src/sage/crypto/mq/sr.py  # Killed due to segmentation fault\nsage -t --long src/sage/rings/polynomial/pbori.pyx  # Killed due to abort\n```",
    "created_at": "2016-07-03T21:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285535",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:27'></a>The remaining three failures seem to be due to brial/polybori

```
sage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to segmentation fault
sage -t --long src/sage/crypto/mq/sr.py  # Killed due to segmentation fault
sage -t --long src/sage/rings/polynomial/pbori.pyx  # Killed due to abort
```



---

archive/issue_comments_285536.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-04T18:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285536",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_285537.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-04T19:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285537",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_285538.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:29 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                          |                        |\n> |------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n> |[86e6a4b](http://git.sagemath.org/sage.git/commit/?id=86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13)|`Build brial with c++98`|\n\n\nAs I remember I advocated for something like that initially. Actually I said I should do something about the configure script and I forgot.",
    "created_at": "2016-07-04T21:43:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285538",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:30'></a>Replying to [comment:29 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                          |                        |
> |------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
> |[86e6a4b](http://git.sagemath.org/sage.git/commit/?id=86e6a4b21cb4a51c2aa9ed8d01b62239b8fdbd13)|`Build brial with c++98`|


As I remember I advocated for something like that initially. Actually I said I should do something about the configure script and I forgot.



---

archive/issue_comments_285539.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:30 fbissey]:\n> As I remember I advocated for something like that initially. Actually I said I should do something about the configure script and I forgot.\n\n\nThere is probably a bug in the Brial code path, this should be fixed on the C++ level. But in another ticket.",
    "created_at": "2016-07-06T07:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285539",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:31'></a>Replying to [comment:30 fbissey]:
> As I remember I advocated for something like that initially. Actually I said I should do something about the configure script and I forgot.


There is probably a bug in the Brial code path, this should be fixed on the C++ level. But in another ticket.



---

archive/issue_comments_285540.json:
```json
{
    "body": "<a id='comment:32'></a>All tests pass for me, we should merge this asap...",
    "created_at": "2016-07-06T07:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285540",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:32'></a>All tests pass for me, we should merge this asap...



---

archive/issue_comments_285541.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2016-07-06T07:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285541",
    "user": "https://github.com/vbraun"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_285542.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-06T07:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285542",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_285543.json:
```json
{
    "body": "<a id='comment:33'></a>I see *\"trac's automerging failed\"* (branch is colored red)...\n\n---\n\nGoing to test on top of beta7...",
    "created_at": "2016-07-09T13:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285543",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:33'></a>I see *"trac's automerging failed"* (branch is colored red)...

---

Going to test on top of beta7...



---

archive/issue_comments_285544.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [comment:31 vbraun]:\n> There is probably a bug in the Brial code path, this should be fixed on the C++ level. But in another ticket.\n\n\nDoes this refer to the three segfaults / aborts in ptestlong you reported [comment:27 above]?  How did you get these?\n\n\\\\\n\nWith Sage 7.3.beta7 (plus the branch here) and vanilla FSF GCC 6.1.0, GCC configured to produce native code by default, but otherwise no `*FLAGS` set, ptestlong passes for me (modulo the usual failure in one test due to numeric noise and another GAP-related which nearly always fails in the first place, but passes when rerun) on Linux x86_64 (Haswell-E).",
    "created_at": "2016-07-09T18:29:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285544",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:34'></a>Replying to [comment:31 vbraun]:
> There is probably a bug in the Brial code path, this should be fixed on the C++ level. But in another ticket.


Does this refer to the three segfaults / aborts in ptestlong you reported [comment:27 above]?  How did you get these?

\\

With Sage 7.3.beta7 (plus the branch here) and vanilla FSF GCC 6.1.0, GCC configured to produce native code by default, but otherwise no `*FLAGS` set, ptestlong passes for me (modulo the usual failure in one test due to numeric noise and another GAP-related which nearly always fails in the first place, but passes when rerun) on Linux x86_64 (Haswell-E).



---

archive/issue_comments_285545.json:
```json
{
    "body": "<a id='comment:35'></a>[comment:21 As mentioned], I'd prefer if we only mess with optimization flags when necessary (i.e., only disable some in Singular's `spkg-install` if `$CXX` is really GCC 6.x).\n\nOtherwise I'm ok with your changes, and mine as well... ;-)",
    "created_at": "2016-07-09T18:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285545",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:35'></a>[comment:21 As mentioned], I'd prefer if we only mess with optimization flags when necessary (i.e., only disable some in Singular's `spkg-install` if `$CXX` is really GCC 6.x).

Otherwise I'm ok with your changes, and mine as well... ;-)



---

archive/issue_comments_285546.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:35 leif]:\n> [comment:21 As mentioned], I'd prefer if we only mess with optimization flags when necessary (i.e., only disable some in Singular's `spkg-install` if `$CXX` is really GCC 6.x).\n\n\nP.S.:  There should be a `2>/dev/null` in ``$CXX -dumpversion``, and while I don't mind re-exporting CXXFLAGS, I'd move their modification a bit up (to not mix it with changes to`MAKE`):\n\n```diff\ndiff --git a/build/pkgs/singular/spkg-install b/build/pkgs/singular/spkg-install\nindex 0b21be7..024b1e1 100755\n--- a/build/pkgs/singular/spkg-install\n+++ b/build/pkgs/singular/spkg-install\n@@ -73,10 +73,18 @@ export CPPFLAGS=\"-I$SAGE_LOCAL/include $CPPFLAGS\"\n export CXXFLAGS=\"$CXXFLAGS -fPIC\"\n export CFLAGS=\"$CFLAGS -fPIC\"\n \n+# Workaround for GCC6: https://trac.sagemath.org/ticket/20926\n+case `$CXX -dumpversion 2>/dev/null` in\n+    6|6.*)\n+        export CXXFLAGS=\"$CXXFLAGS -fno-delete-null-pointer-checks -fno-strict-overflow\"\n+        ;;\n+esac\n+\n # Singular does not respect LDFLAGS; Ugly hack:\n # Used on Linux and Darwin (see singular-3.1.7-use_cxx_for_linking.patch)\n export CXX=\"$CXX $LDFLAGS\"\n \n+\n # The Sun assembler has problems with -pipe, so disable it.\n # This only affects compile time, not the compiled programs/libraries.\n if [ \"$UNAME\" = \"SunOS\" ]; then\n@@ -88,8 +96,6 @@ fi\n # parallel sometimes fails (Trac #17774)\n export MAKE=\"$MAKE -j1\"\n \n-# Workaround for GCC6: https://trac.sagemath.org/ticket/20926\n-export CXXFLAGS=\"$CXXFLAGS -fno-delete-null-pointer-checks -fno-strict-overflow\"\n \n choose_patches()\n {\n```",
    "created_at": "2016-07-09T19:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285546",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:36'></a>Replying to [comment:35 leif]:
> [comment:21 As mentioned], I'd prefer if we only mess with optimization flags when necessary (i.e., only disable some in Singular's `spkg-install` if `$CXX` is really GCC 6.x).


P.S.:  There should be a `2>/dev/null` in ``$CXX -dumpversion``, and while I don't mind re-exporting CXXFLAGS, I'd move their modification a bit up (to not mix it with changes to`MAKE`):

```diff
diff --git a/build/pkgs/singular/spkg-install b/build/pkgs/singular/spkg-install
index 0b21be7..024b1e1 100755
--- a/build/pkgs/singular/spkg-install
+++ b/build/pkgs/singular/spkg-install
@@ -73,10 +73,18 @@ export CPPFLAGS="-I$SAGE_LOCAL/include $CPPFLAGS"
 export CXXFLAGS="$CXXFLAGS -fPIC"
 export CFLAGS="$CFLAGS -fPIC"
 
+# Workaround for GCC6: https://trac.sagemath.org/ticket/20926
+case `$CXX -dumpversion 2>/dev/null` in
+    6|6.*)
+        export CXXFLAGS="$CXXFLAGS -fno-delete-null-pointer-checks -fno-strict-overflow"
+        ;;
+esac
+
 # Singular does not respect LDFLAGS; Ugly hack:
 # Used on Linux and Darwin (see singular-3.1.7-use_cxx_for_linking.patch)
 export CXX="$CXX $LDFLAGS"
 
+
 # The Sun assembler has problems with -pipe, so disable it.
 # This only affects compile time, not the compiled programs/libraries.
 if [ "$UNAME" = "SunOS" ]; then
@@ -88,8 +96,6 @@ fi
 # parallel sometimes fails (Trac #17774)
 export MAKE="$MAKE -j1"
 
-# Workaround for GCC6: https://trac.sagemath.org/ticket/20926
-export CXXFLAGS="$CXXFLAGS -fno-delete-null-pointer-checks -fno-strict-overflow"
 
 choose_patches()
 {
```



---

archive/issue_comments_285547.json:
```json
{
    "body": "<a id='comment:37'></a>Imho it depends on whether the compiler or the source is at fault. In the case of Singular I don't think its a compiler bug. So it most likely won't go away with gcc 7...",
    "created_at": "2016-07-09T19:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285547",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:37'></a>Imho it depends on whether the compiler or the source is at fault. In the case of Singular I don't think its a compiler bug. So it most likely won't go away with gcc 7...



---

archive/issue_comments_285548.json:
```json
{
    "body": "<a id='comment:38'></a>Replying to [comment:37 vbraun]:\n> Imho it depends on whether the compiler or the source is at fault. In the case of Singular I don't think its a compiler bug. So it most likely won't go away with gcc 7...\n\n\nWell, it goes away with GCC < 6.x, and we shouldn't throw arbitrary options at `$CXX`, which might -- for example -- be `clang`.  (Most parts of Sage did build with the latter, at least a while ago.  `clang` accepts a couple of GCC options, but spits out warnings for others it doesn't, and I wouldn't rely on the latter, i.e. wouldn't risk breaking something which previously worked, for no reason.)",
    "created_at": "2016-07-09T19:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285548",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:38'></a>Replying to [comment:37 vbraun]:
> Imho it depends on whether the compiler or the source is at fault. In the case of Singular I don't think its a compiler bug. So it most likely won't go away with gcc 7...


Well, it goes away with GCC < 6.x, and we shouldn't throw arbitrary options at `$CXX`, which might -- for example -- be `clang`.  (Most parts of Sage did build with the latter, at least a while ago.  `clang` accepts a couple of GCC options, but spits out warnings for others it doesn't, and I wouldn't rely on the latter, i.e. wouldn't risk breaking something which previously worked, for no reason.)



---

archive/issue_comments_285549.json:
```json
{
    "body": "<a id='comment:39'></a>Presumably, the fact that Singular ever built with gcc < 6 just was a bug in gcc (insufficient checking). This is a fugly workaround that hopefully can be removed with the Singular update. I'm against putting too much lipstick on a pig; If anything work on the Singular update.",
    "created_at": "2016-07-09T20:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285549",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:39'></a>Presumably, the fact that Singular ever built with gcc < 6 just was a bug in gcc (insufficient checking). This is a fugly workaround that hopefully can be removed with the Singular update. I'm against putting too much lipstick on a pig; If anything work on the Singular update.



---

archive/issue_comments_285550.json:
```json
{
    "body": "<a id='comment:40'></a>I'll just confirm that this patch makes Sage compile on my machine (Arch up-to-date, gcc 6.1.1, 64 bits).",
    "created_at": "2016-07-13T20:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285550",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:40'></a>I'll just confirm that this patch makes Sage compile on my machine (Arch up-to-date, gcc 6.1.1, 64 bits).



---

archive/issue_comments_285551.json:
```json
{
    "body": "<a id='comment:41'></a>Replying to [comment:40 jsrn]:\n> I'll just confirm that this patch makes Sage compile on my machine (Arch up-to-date, gcc 6.1.1, 64 bits).\n\n\nThanks for testing.  Did you also run `make [p]testlong`?",
    "created_at": "2016-07-13T21:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285551",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:41'></a>Replying to [comment:40 jsrn]:
> I'll just confirm that this patch makes Sage compile on my machine (Arch up-to-date, gcc 6.1.1, 64 bits).


Thanks for testing.  Did you also run `make [p]testlong`?



---

archive/issue_comments_285552.json:
```json
{
    "body": "<a id='comment:42'></a>I'm still having another issue -- many default packages do not get installed during make, after make distclaen -- so there's tons of doctests failing. It seems to me that this issue isn't related to the new gcc, but I don't know where to start looking for a solution.",
    "created_at": "2016-07-14T00:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285552",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:42'></a>I'm still having another issue -- many default packages do not get installed during make, after make distclaen -- so there's tons of doctests failing. It seems to me that this issue isn't related to the new gcc, but I don't know where to start looking for a solution.



---

archive/issue_comments_285553.json:
```json
{
    "body": "<a id='comment:43'></a>Replying to [comment:42 jsrn]:\n> I'm still having another issue -- many default packages do not get installed during make, after make distclaen -- so there's tons of doctests failing. It seems to me that this issue isn't related to the new gcc, but I don't know where to start looking for a solution.\n\n\nOT (I think), but did you try downgrading `make` (to 4.1, say)?\n\n(Or debug the Sage build process with your version as suggested on sage-devel, e.g. by starting with `make -n pkg_which_didnt_get_built`, then perhaps successively adding some debug options until you see why the package doesn't get built.)",
    "created_at": "2016-07-14T01:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285553",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:43'></a>Replying to [comment:42 jsrn]:
> I'm still having another issue -- many default packages do not get installed during make, after make distclaen -- so there's tons of doctests failing. It seems to me that this issue isn't related to the new gcc, but I don't know where to start looking for a solution.


OT (I think), but did you try downgrading `make` (to 4.1, say)?

(Or debug the Sage build process with your version as suggested on sage-devel, e.g. by starting with `make -n pkg_which_didnt_get_built`, then perhaps successively adding some debug options until you see why the package doesn't get built.)



---

archive/issue_comments_285554.json:
```json
{
    "body": "<a id='comment:44'></a>> OT (I think), but did you try downgrading `make` (to 4.1, say)?\n> \n> (Or debug the Sage build process with your version as suggested on sage-devel, e.g. by starting with `make -n pkg_which_didnt_get_built`, then perhaps successively adding some debug options until you see why the package doesn't get built.)\n\n\nSorry, I missed your reply on sage-devel! I've downgraded make and tried another run, this time with --trace -bvjm. I'll report the results on sage-devel.",
    "created_at": "2016-07-15T02:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285554",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:44'></a>> OT (I think), but did you try downgrading `make` (to 4.1, say)?
> 
> (Or debug the Sage build process with your version as suggested on sage-devel, e.g. by starting with `make -n pkg_which_didnt_get_built`, then perhaps successively adding some debug options until you see why the package doesn't get built.)


Sorry, I missed your reply on sage-devel! I've downgraded make and tried another run, this time with --trace -bvjm. I'll report the results on sage-devel.



---

archive/issue_comments_285555.json:
```json
{
    "body": "<a id='comment:45'></a>People report [errors with gcc 6.1.1](https://groups.google.com/d/msg/sage-support/YQL8Do2lItI/qFYHYYDqCgAJ), but it's not even an official release, but some RH-only hack. How does one deal with this?",
    "created_at": "2016-07-16T08:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285555",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>People report [errors with gcc 6.1.1](https://groups.google.com/d/msg/sage-support/YQL8Do2lItI/qFYHYYDqCgAJ), but it's not even an official release, but some RH-only hack. How does one deal with this?



---

archive/issue_comments_285556.json:
```json
{
    "body": "<a id='comment:46'></a>Replying to [comment:45 dimpase]:\n> How does one deal with this?\n\n\nI'd say by merging this ticket asap; I checked that it allows Sage to build on Fedora 24.",
    "created_at": "2016-07-16T09:17:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285556",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:46'></a>Replying to [comment:45 dimpase]:
> How does one deal with this?


I'd say by merging this ticket asap; I checked that it allows Sage to build on Fedora 24.



---

archive/issue_comments_285557.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-16T09:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285557",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_285558.json:
```json
{
    "body": "<a id='comment:47'></a>here you go",
    "created_at": "2016-07-16T09:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285558",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:47'></a>here you go



---

archive/issue_comments_285559.json:
```json
{
    "body": "<a id='comment:48'></a>well, except that there is something funny with the branch...",
    "created_at": "2016-07-16T09:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285559",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'></a>well, except that there is something funny with the branch...



---

archive/issue_comments_285560.json:
```json
{
    "body": "<a id='comment:50'></a>Its just the libgit (in the trac plugin) not managing the merge, but the command-line git does it just fine.",
    "created_at": "2016-07-16T09:50:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285560",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:50'></a>Its just the libgit (in the trac plugin) not managing the merge, but the command-line git does it just fine.



---

archive/issue_comments_285561.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:48 dimpase]:\n> well, except that there is something funny with the branch...\n\n\nPull the trigger, ask later... ;-)\n\nNasty people might think you didn't take a look at the patch, nor read the comments.",
    "created_at": "2016-07-16T10:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285561",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:51'></a>Replying to [comment:48 dimpase]:
> well, except that there is something funny with the branch...


Pull the trigger, ask later... ;-)

Nasty people might think you didn't take a look at the patch, nor read the comments.



---

archive/issue_comments_285562.json:
```json
{
    "body": "<a id='comment:52'></a>Replying to [comment:51 leif]:\n> Replying to [comment:48 dimpase]:\n> > well, except that there is something funny with the branch...\n\n> \n> Pull the trigger, ask later... ;-)\n> Nasty people might think you didn't take a look at the patch, nor read the comments.\n\n\nI read individual commits, and did not find any surprises there...",
    "created_at": "2016-07-16T10:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285562",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:52'></a>Replying to [comment:51 leif]:
> Replying to [comment:48 dimpase]:
> > well, except that there is something funny with the branch...

> 
> Pull the trigger, ask later... ;-)
> Nasty people might think you didn't take a look at the patch, nor read the comments.


I read individual commits, and did not find any surprises there...



---

archive/issue_comments_285563.json:
```json
{
    "body": "<a id='comment:53'></a>I would have been more happy if someone confirmed also the documentation now builds (and tests pass) on Arch (where the first reports originated from), since segfaults do not happen during the build, but when running Sage (or e.g. Singular).",
    "created_at": "2016-07-16T10:35:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285563",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:53'></a>I would have been more happy if someone confirmed also the documentation now builds (and tests pass) on Arch (where the first reports originated from), since segfaults do not happen during the build, but when running Sage (or e.g. Singular).



---

archive/issue_comments_285564.json:
```json
{
    "body": "<a id='comment:54'></a>I'll also be more than happy to have this tested on Arch, but since nobody did it in a timely manner our chances are better by releasing it first. Open a followup if there is still an issue.",
    "created_at": "2016-07-16T10:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285564",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:54'></a>I'll also be more than happy to have this tested on Arch, but since nobody did it in a timely manner our chances are better by releasing it first. Open a followup if there is still an issue.



---

archive/issue_comments_285565.json:
```json
{
    "body": "<a id='comment:55'></a>Replying to [comment:54 vbraun]:\n> I'll also be more than happy to have this tested on Arch, but since nobody did it in a timely manner our chances are better by releasing it first.\n\n\nWell, you asked for further reviewers, but didn't rebase the branch here, nor anser [comment:34 my question regarding the segfaults in BRiAl] [comment:27 you reported yourself], within a week.\n\n(I don't see a related commit here or a follow-up ticket *\"fixing a bug in the BRiAl code path on the C++ level\"* either.)",
    "created_at": "2016-07-16T12:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285565",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:55'></a>Replying to [comment:54 vbraun]:
> I'll also be more than happy to have this tested on Arch, but since nobody did it in a timely manner our chances are better by releasing it first.


Well, you asked for further reviewers, but didn't rebase the branch here, nor anser [comment:34 my question regarding the segfaults in BRiAl] [comment:27 you reported yourself], within a week.

(I don't see a related commit here or a follow-up ticket *"fixing a bug in the BRiAl code path on the C++ level"* either.)



---

archive/issue_comments_285566.json:
```json
{
    "body": "<a id='comment:56'></a>After running `./sage -i jmol` and `./sage pip install sympy`, I can build the documentation. It's running now, so far no problems. Assuming that the package problem is orthogonal to the gcc-issue, then it's looking good.",
    "created_at": "2016-07-16T12:36:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285566",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:56'></a>After running `./sage -i jmol` and `./sage pip install sympy`, I can build the documentation. It's running now, so far no problems. Assuming that the package problem is orthogonal to the gcc-issue, then it's looking good.



---

archive/issue_comments_285567.json:
```json
{
    "body": "<a id='comment:57'></a>Followups to https://github.com/BRiAl/BRiAl/issues/11",
    "created_at": "2016-07-16T12:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285567",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:57'></a>Followups to https://github.com/BRiAl/BRiAl/issues/11



---

archive/issue_comments_285568.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-07-16T20:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285568",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_056047.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-16T20:06:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20926#event-56047"
}
```



---

archive/issue_comments_285569.json:
```json
{
    "body": "<a id='comment:59'></a>Replying to [comment:57 vbraun]:\n> Followups to https://github.com/BRiAl/BRiAl/issues/11\n\n\nTo not lose this on trac, I've opened #21083 which refers to the issue on github (*\"Fix compilation with c++11 (default for gcc>=6)\"*).",
    "created_at": "2016-07-24T16:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285569",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:59'></a>Replying to [comment:57 vbraun]:
> Followups to https://github.com/BRiAl/BRiAl/issues/11


To not lose this on trac, I've opened #21083 which refers to the issue on github (*"Fix compilation with c++11 (default for gcc>=6)"*).



---

archive/issue_comments_285570.json:
```json
{
    "body": "<a id='comment:60'></a>For the record:  Givaro's testsuite also fails to build; builds with `-std=c++98`.",
    "created_at": "2016-07-30T04:55:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285570",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:60'></a>For the record:  Givaro's testsuite also fails to build; builds with `-std=c++98`.



---

archive/issue_comments_285571.json:
```json
{
    "body": "<a id='comment:61'></a>Replying to [comment:60 leif]:\n> For the record:  Givaro's testsuite also fails to build; builds with `-std=c++98`.\n\n\nThis is now #21169.",
    "created_at": "2016-08-22T14:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285571",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:61'></a>Replying to [comment:60 leif]:
> For the record:  Givaro's testsuite also fails to build; builds with `-std=c++98`.


This is now #21169.



---

archive/issue_comments_285572.json:
```json
{
    "body": "<a id='comment:62'></a>Why was the line\n\n```\n# distutils: language = c\n```\nadded to `src/sage/matrix/matrix_modn_sparse.pxd`?\n\nDoes that even do something, given that `c` is the default?",
    "created_at": "2016-10-20T20:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20926#issuecomment-285572",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:62'></a>Why was the line

```
# distutils: language = c
```
added to `src/sage/matrix/matrix_modn_sparse.pxd`?

Does that even do something, given that `c` is the default?
