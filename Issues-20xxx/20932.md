# Issue 20932: Issues with p1list in modular symbols

archive/issues_020695.json:
```json
{
    "body": "Two related issues with modular symbols, originally reported by robharron on sage-nt: [https://groups.google.com/forum/#!msg/sage-nt/5HYpZKFB2qA/fRXgDkaICAAJ](https://groups.google.com/forum/#!msg/sage-nt/5HYpZKFB2qA/fRXgDkaICAAJ).\n\nIssue 1:\n\n```\nsage: chi = kronecker_character(3*34603)\nsage: M = ModularSymbols(chi, 2, sign=1, base_ring=GF(3))\n...\nFile \"/projects/sage/sage-6.10/local/lib/python2.7/site-packages/sage/modular/modsym/relation_matrix.py\", line 126, in modS_relations\n    assert j != -1\nAssertionError\n```\nThe underlying problem appears to be:\n\n```\nsage: import sage.modular.modsym.p1list as p1list\nsage: for (i,j) in p1list.P1List(103809):\nsage:    if i != 1 and i != 3: print (i,j)\n(0, 1) #should also return (34603, 1), (34603, 2), (34603, 3)\n```\n\nIssue 2:\n\n```\nsage: chi = kronecker_character(3*61379)\nsage: M = ModularSymbols(chi, 2, sign=1, base_ring=GF(3))\n...\n  File \"sage/rings/fast_arith.pyx\", line 381, in sage.rings.fast_arith.arith_llong.c_inverse_mod_longlong (/projects/sage/sage-6.10/src/build/cythonized/sage/rings/fast_arith.c:5546)\n    raise ArithmeticError(\"The inverse of %s modulo %s is not defined.\"%(a,m))\nArithmeticError: The inverse of -2142142713 modulo 184137 is not defined.\n```\nThe underlying issue appears to be:\n\n```\nsage: import sage.modular.modsym.p1list as p1list\nsage: N = 3*61379\nsage: p1 = p1list.P1List(N)\nsage: p1.normalize_with_scalar(21, -1) \n...\nArithmeticError: The inverse of -2142142713 modulo 184137 is not defined.\n\n\n**Assignee:** @kedlaya\n\n**CC:**  @rharron\n\n**Keywords:** modular symbols\n\n**Branch:** [cc5333fc4ff9b6664704e365c58067915ef18da9](https://github.com/sagemath/sagetrac-mirror/commit/cc5333fc4ff9b6664704e365c58067915ef18da9)\n\n**Reviewer:** Vincent Delecroix, John Cremona, Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Kiran Kedlaya\n\nIssue created by migration from https://trac.sagemath.org/ticket/20932\n\n",
    "closed_at": "2017-08-21T19:24:09Z",
    "created_at": "2016-07-03T16:47:19Z",
    "labels": [
        "component: modular forms",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.3",
    "title": "Issues with p1list in modular symbols",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/20932",
    "user": "https://github.com/kedlaya"
}
```
Two related issues with modular symbols, originally reported by robharron on sage-nt: [https://groups.google.com/forum/#!msg/sage-nt/5HYpZKFB2qA/fRXgDkaICAAJ](https://groups.google.com/forum/#!msg/sage-nt/5HYpZKFB2qA/fRXgDkaICAAJ).

Issue 1:

```
sage: chi = kronecker_character(3*34603)
sage: M = ModularSymbols(chi, 2, sign=1, base_ring=GF(3))
...
File "/projects/sage/sage-6.10/local/lib/python2.7/site-packages/sage/modular/modsym/relation_matrix.py", line 126, in modS_relations
    assert j != -1
AssertionError
```
The underlying problem appears to be:

```
sage: import sage.modular.modsym.p1list as p1list
sage: for (i,j) in p1list.P1List(103809):
sage:    if i != 1 and i != 3: print (i,j)
(0, 1) #should also return (34603, 1), (34603, 2), (34603, 3)
```

Issue 2:

```
sage: chi = kronecker_character(3*61379)
sage: M = ModularSymbols(chi, 2, sign=1, base_ring=GF(3))
...
  File "sage/rings/fast_arith.pyx", line 381, in sage.rings.fast_arith.arith_llong.c_inverse_mod_longlong (/projects/sage/sage-6.10/src/build/cythonized/sage/rings/fast_arith.c:5546)
    raise ArithmeticError("The inverse of %s modulo %s is not defined."%(a,m))
ArithmeticError: The inverse of -2142142713 modulo 184137 is not defined.
```
The underlying issue appears to be:

```
sage: import sage.modular.modsym.p1list as p1list
sage: N = 3*61379
sage: p1 = p1list.P1List(N)
sage: p1.normalize_with_scalar(21, -1) 
...
ArithmeticError: The inverse of -2142142713 modulo 184137 is not defined.


**Assignee:** @kedlaya

**CC:**  @rharron

**Keywords:** modular symbols

**Branch:** [cc5333fc4ff9b6664704e365c58067915ef18da9](https://github.com/sagemath/sagetrac-mirror/commit/cc5333fc4ff9b6664704e365c58067915ef18da9)

**Reviewer:** Vincent Delecroix, John Cremona, Frédéric Chapoton

**Author:** Kiran Kedlaya

Issue created by migration from https://trac.sagemath.org/ticket/20932





---

archive/issue_comments_306661.json:
```json
{
    "body": "<a id='comment:1'></a>\nIn `p1list`, one finds different code depending on the size of the level. For levels in this range, the relevant subroutine is `p1list_llong`, which contains:\n\n```\n    cmax = N/2\n    if N%2:   # N odd, max divisor is <= N/3\n        if N%5:  # N not a multiple of 3 either, max is N/5\n            cmax = N/5\n        else:\n            cmax = N/3\n```\nbut `N%5` should be `N%3`.",
    "created_at": "2016-07-03T16:49:23Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306661",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:1'></a>
In `p1list`, one finds different code depending on the size of the level. For levels in this range, the relevant subroutine is `p1list_llong`, which contains:

```
    cmax = N/2
    if N%2:   # N odd, max divisor is <= N/3
        if N%5:  # N not a multiple of 3 either, max is N/5
            cmax = N/5
        else:
            cmax = N/3
```
but `N%5` should be `N%3`.



---

archive/issue_comments_306662.json:
```json
{
    "body": "<a id='comment:2'></a>\nRe issue 2: the offending subroutine in `p1list` appears to be `c_p1_normalize_llong`, in which one finds:\n\n```\n    if compute_s:\n        ss[0] = <int> (arith_llong.c_inverse_mod_longlong(s*min_t, N) % ll_N)\n```\nAs written, this creates a 32-bit integer overflow. It should be:\n\n```\n    if compute_s:\n        ss[0] = <int> (arith_llong.c_inverse_mod_longlong((<llong> s)*(<llong> min_t), N) % ll_N)\n```",
    "created_at": "2016-07-04T15:28:19Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306662",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:2'></a>
Re issue 2: the offending subroutine in `p1list` appears to be `c_p1_normalize_llong`, in which one finds:

```
    if compute_s:
        ss[0] = <int> (arith_llong.c_inverse_mod_longlong(s*min_t, N) % ll_N)
```
As written, this creates a 32-bit integer overflow. It should be:

```
    if compute_s:
        ss[0] = <int> (arith_llong.c_inverse_mod_longlong((<llong> s)*(<llong> min_t), N) % ll_N)
```



---

archive/issue_comments_306663.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,16 @@\n-Originally reported by robharron on sage-nt: [https://groups.google.com/forum/#!msg/sage-nt/5HYpZKFB2qA/fRXgDkaICAAJ](https://groups.google.com/forum/#!msg/sage-nt/5HYpZKFB2qA/fRXgDkaICAAJ).\n+Two related issues with modular symbols, originally reported by robharron on sage-nt: [https://groups.google.com/forum/#!msg/sage-nt/5HYpZKFB2qA/fRXgDkaICAAJ](https://groups.google.com/forum/#!msg/sage-nt/5HYpZKFB2qA/fRXgDkaICAAJ).\n+\n+Issue 1:\n+\n+```\n+sage: chi = kronecker_character(3*34603)\n+sage: M = ModularSymbols(chi, 2, sign=1, base_ring=GF(3))\n+...\n+File \"/projects/sage/sage-6.10/local/lib/python2.7/site-packages/sage/modular/modsym/relation_matrix.py\", line 126, in modS_relations\n+    assert j != -1\n+AssertionError\n+```\n+The underlying problem appears to be:\n \n ```\n sage: import sage.modular.modsym.p1list as p1list\n@@ -7,3 +19,23 @@\n (0, 1) #should also return (34603, 1) and (34603, 2)\n ```\n \n+Issue 2:\n+\n+```\n+sage: chi = kronecker_character(3*61379)\n+sage: M = ModularSymbols(chi, 2, sign=1, base_ring=GF(3))\n+...\n+  File \"sage/rings/fast_arith.pyx\", line 381, in sage.rings.fast_arith.arith_llong.c_inverse_mod_longlong (/projects/sage/sage-6.10/src/build/cythonized/sage/rings/fast_arith.c:5546)\n+    raise ArithmeticError(\"The inverse of %s modulo %s is not defined.\"%(a,m))\n+ArithmeticError: The inverse of -2142142713 modulo 184137 is not defined.\n+```\n+The underlying issue appears to be:\n+\n+```\n+sage: import sage.modular.modsym.p1list as p1list\n+sage: N = 3*61379\n+sage: p1 = p1list.P1List(N)\n+sage: p1.normalize_with_scalar(21, -1) \n+...\n+ArithmeticError: The inverse of -2142142713 modulo 184137 is not defined.\n+\n``````\n",
    "created_at": "2016-07-04T15:28:19Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306663",
    "user": "https://github.com/kedlaya"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,16 @@
-Originally reported by robharron on sage-nt: [https://groups.google.com/forum/#!msg/sage-nt/5HYpZKFB2qA/fRXgDkaICAAJ](https://groups.google.com/forum/#!msg/sage-nt/5HYpZKFB2qA/fRXgDkaICAAJ).
+Two related issues with modular symbols, originally reported by robharron on sage-nt: [https://groups.google.com/forum/#!msg/sage-nt/5HYpZKFB2qA/fRXgDkaICAAJ](https://groups.google.com/forum/#!msg/sage-nt/5HYpZKFB2qA/fRXgDkaICAAJ).
+
+Issue 1:
+
+```
+sage: chi = kronecker_character(3*34603)
+sage: M = ModularSymbols(chi, 2, sign=1, base_ring=GF(3))
+...
+File "/projects/sage/sage-6.10/local/lib/python2.7/site-packages/sage/modular/modsym/relation_matrix.py", line 126, in modS_relations
+    assert j != -1
+AssertionError
+```
+The underlying problem appears to be:
 
 ```
 sage: import sage.modular.modsym.p1list as p1list
@@ -7,3 +19,23 @@
 (0, 1) #should also return (34603, 1) and (34603, 2)
 ```
 
+Issue 2:
+
+```
+sage: chi = kronecker_character(3*61379)
+sage: M = ModularSymbols(chi, 2, sign=1, base_ring=GF(3))
+...
+  File "sage/rings/fast_arith.pyx", line 381, in sage.rings.fast_arith.arith_llong.c_inverse_mod_longlong (/projects/sage/sage-6.10/src/build/cythonized/sage/rings/fast_arith.c:5546)
+    raise ArithmeticError("The inverse of %s modulo %s is not defined."%(a,m))
+ArithmeticError: The inverse of -2142142713 modulo 184137 is not defined.
+```
+The underlying issue appears to be:
+
+```
+sage: import sage.modular.modsym.p1list as p1list
+sage: N = 3*61379
+sage: p1 = p1list.P1List(N)
+sage: p1.normalize_with_scalar(21, -1) 
+...
+ArithmeticError: The inverse of -2142142713 modulo 184137 is not defined.
+
``````




---

archive/issue_events_187612.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2016-07-04T15:28:19Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "rename": {
        "from": "Incorrect generation of p1list in modular symbols",
        "to": "Issues with p1list in modular symbols"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187612"
}
```



---

archive/issue_comments_306664.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -16,7 +16,7 @@\n sage: import sage.modular.modsym.p1list as p1list\n sage: for (i,j) in p1list.P1List(103809):\n sage:    if i != 1 and i != 3: print (i,j)\n-(0, 1) #should also return (34603, 1) and (34603, 2)\n+(0, 1) #should also return (34603, 1), (34603, 2), (34603, 3)\n ```\n \n Issue 2:\n``````\n",
    "created_at": "2016-07-04T15:38:59Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306664",
    "user": "https://github.com/kedlaya"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -16,7 +16,7 @@
 sage: import sage.modular.modsym.p1list as p1list
 sage: for (i,j) in p1list.P1List(103809):
 sage:    if i != 1 and i != 3: print (i,j)
-(0, 1) #should also return (34603, 1) and (34603, 2)
+(0, 1) #should also return (34603, 1), (34603, 2), (34603, 3)
 ```
 
 Issue 2:
``````




---

archive/issue_comments_306665.json:
```json
{
    "body": "**Author:** Kiran Kedlaya",
    "created_at": "2016-07-04T20:34:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306665",
    "user": "https://github.com/kedlaya"
}
```

**Author:** Kiran Kedlaya



---

archive/issue_comments_306666.json:
```json
{
    "body": "**Commit:** [852b61bb0acf53fdc61a14637a243e8a5bcce7fe](https://github.com/sagemath/sagetrac-mirror/commit/852b61bb0acf53fdc61a14637a243e8a5bcce7fe)",
    "created_at": "2016-07-04T20:34:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306666",
    "user": "https://github.com/kedlaya"
}
```

**Commit:** [852b61bb0acf53fdc61a14637a243e8a5bcce7fe](https://github.com/sagemath/sagetrac-mirror/commit/852b61bb0acf53fdc61a14637a243e8a5bcce7fe)



---

archive/issue_comments_306667.json:
```json
{
    "body": "**Branch:** [u/kedlaya/issues_with_p1list_in_modular_symbols](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/issues_with_p1list_in_modular_symbols)",
    "created_at": "2016-07-04T20:34:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306667",
    "user": "https://github.com/kedlaya"
}
```

**Branch:** [u/kedlaya/issues_with_p1list_in_modular_symbols](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/issues_with_p1list_in_modular_symbols)



---

archive/issue_events_187613.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2016-07-04T20:34:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187613"
}
```



---

archive/issue_comments_306668.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis patch addresses both issues in the description. Besides doctesting the isolating code fragments, I added optional doctests for the construction of the spaces of modular symbols; however, these take far too long to be required even as long doctests.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/852b61bb0acf53fdc61a14637a243e8a5bcce7fe\">852b61b</a></td><td><code>Corrections to p1list</code></td></tr></table>\n",
    "created_at": "2016-07-04T20:34:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306668",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:4'></a>
This patch addresses both issues in the description. Besides doctesting the isolating code fragments, I added optional doctests for the construction of the spaces of modular symbols; however, these take far too long to be required even as long doctests.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/852b61bb0acf53fdc61a14637a243e8a5bcce7fe">852b61b</a></td><td><code>Corrections to p1list</code></td></tr></table>




---

archive/issue_comments_306669.json:
```json
{
    "body": "<a id='comment:5'></a>\nApologies for the typo which git blame attributes to me in April 2009.",
    "created_at": "2016-07-10T21:05:12Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306669",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'></a>
Apologies for the typo which git blame attributes to me in April 2009.



---

archive/issue_comments_306670.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe following syntax is wrong\n\n```\n+    TESTS::\n+    \n+    This test reflects :trac:`20932`::\n+        sage: N = 3*61379\n```\nIt should be changed to\n\n```\n    TESTS:    <--- only one colon\n\n    This test reflects :trac`20932`::\n                                         <--- line break\n        sage: N = 3*61379\n```",
    "created_at": "2016-07-25T01:45:44Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306670",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>
The following syntax is wrong

```
+    TESTS::
+    
+    This test reflects :trac:`20932`::
+        sage: N = 3*61379
```
It should be changed to

```
    TESTS:    <--- only one colon

    This test reflects :trac`20932`::
                                         <--- line break
        sage: N = 3*61379
```



---

archive/issue_comments_306671.json:
```json
{
    "body": "<a id='comment:7'></a>\nIn the doctest you mention <code>:trac:\\`20513\\`</code> which is another matter.",
    "created_at": "2016-07-25T01:47:11Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306671",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>
In the doctest you mention <code>:trac:\`20513\`</code> which is another matter.



---

archive/issue_events_187614.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-25T01:47:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187614"
}
```



---

archive/issue_events_187615.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-25T01:47:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187615"
}
```



---

archive/issue_comments_306672.json:
```json
{
    "body": "**Changing commit** from \"[852b61bb0acf53fdc61a14637a243e8a5bcce7fe](https://github.com/sagemath/sagetrac-mirror/commit/852b61bb0acf53fdc61a14637a243e8a5bcce7fe)\" to \"[6e5e20a90d1272d7308811709a84db6fa2de062c](https://github.com/sagemath/sagetrac-mirror/commit/6e5e20a90d1272d7308811709a84db6fa2de062c)\".",
    "created_at": "2016-07-25T21:58:09Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[852b61bb0acf53fdc61a14637a243e8a5bcce7fe](https://github.com/sagemath/sagetrac-mirror/commit/852b61bb0acf53fdc61a14637a243e8a5bcce7fe)" to "[6e5e20a90d1272d7308811709a84db6fa2de062c](https://github.com/sagemath/sagetrac-mirror/commit/6e5e20a90d1272d7308811709a84db6fa2de062c)".



---

archive/issue_comments_306673.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e5e20a90d1272d7308811709a84db6fa2de062c\">6e5e20a</a></td><td><code>Correct doctest formatting</code></td></tr></table>\n",
    "created_at": "2016-07-25T21:58:09Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306673",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e5e20a90d1272d7308811709a84db6fa2de062c">6e5e20a</a></td><td><code>Correct doctest formatting</code></td></tr></table>




---

archive/issue_events_187616.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2016-07-25T21:59:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187616"
}
```



---

archive/issue_events_187617.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2016-07-25T21:59:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187617"
}
```



---

archive/issue_comments_306674.json:
```json
{
    "body": "<a id='comment:9'></a>\nThe formatting should be fixed now.",
    "created_at": "2016-07-25T21:59:41Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306674",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:9'></a>
The formatting should be fixed now.



---

archive/issue_comments_306675.json:
```json
{
    "body": "<a id='comment:10'></a>\nwould it be possible to have faster (smaller) doctests ? 600s is too much and 1800s is *way* too much.. \n\nat worse, maybe keep only the 600s one..",
    "created_at": "2016-11-06T20:10:28Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306675",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>
would it be possible to have faster (smaller) doctests ? 600s is too much and 1800s is *way* too much.. 

at worse, maybe keep only the 600s one..



---

archive/issue_comments_306676.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [chapoton](#comment%3A10):\n> would it be possible to have faster (smaller) doctests ? 600s is too much and 1800s is *way* too much.. \n> \n> at worse, maybe keep only the 600s one..\n\n \nSadly no, this is precisely a bug that occurs only for large problem sizes (see comment 1), so any doctest that actually tests it will have to deal with large problems. Is it okay if all of the doctests that confirm the resolution of this issue are optional?",
    "created_at": "2016-11-06T20:54:34Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306676",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:11'></a>
Replying to [chapoton](#comment%3A10):
> would it be possible to have faster (smaller) doctests ? 600s is too much and 1800s is *way* too much.. 
> 
> at worse, maybe keep only the 600s one..

 
Sadly no, this is precisely a bug that occurs only for large problem sizes (see comment 1), so any doctest that actually tests it will have to deal with large problems. Is it okay if all of the doctests that confirm the resolution of this issue are optional?



---

archive/issue_comments_306677.json:
```json
{
    "body": "<a id='comment:12'></a>\nIf you want these 2 **long** tests to be never tested, they should be tagged `# not tested`, I think. In principle, `optional` should come with a parameter (like spkg name on which it depends), and will be tested whenever possible. As far as I know, there is no bare `optional`.",
    "created_at": "2016-11-07T20:59:06Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306677",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'></a>
If you want these 2 **long** tests to be never tested, they should be tagged `# not tested`, I think. In principle, `optional` should come with a parameter (like spkg name on which it depends), and will be tested whenever possible. As far as I know, there is no bare `optional`.



---

archive/issue_comments_306678.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f631070e48df2bfb6fff420b7dc3831ec9dd0e26\">f631070</a></td><td><code>Corrections to p1list</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05369688810d4c1684353b60b345354a0d722273\">0536968</a></td><td><code>Correct doctest formatting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebd477b226a070e9d4f015bc7df6662cdab5eb75\">ebd477b</a></td><td><code>Doctests marked as \"not tested\" due to excess runtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93a4b889e4a18ca7ce4ff9123c357b541816ee30\">93a4b88</a></td><td><code>Merge branch 'u/kedlaya/issues_with_p1list_in_modular_symbols' of git://trac.sagemath.org/sage into t/20932/incorrect_generation_of_p1list_in_modular_symbols</code></td></tr></table>\n",
    "created_at": "2017-08-14T19:56:08Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f631070e48df2bfb6fff420b7dc3831ec9dd0e26">f631070</a></td><td><code>Corrections to p1list</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05369688810d4c1684353b60b345354a0d722273">0536968</a></td><td><code>Correct doctest formatting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebd477b226a070e9d4f015bc7df6662cdab5eb75">ebd477b</a></td><td><code>Doctests marked as "not tested" due to excess runtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93a4b889e4a18ca7ce4ff9123c357b541816ee30">93a4b88</a></td><td><code>Merge branch 'u/kedlaya/issues_with_p1list_in_modular_symbols' of git://trac.sagemath.org/sage into t/20932/incorrect_generation_of_p1list_in_modular_symbols</code></td></tr></table>




---

archive/issue_comments_306679.json:
```json
{
    "body": "**Changing commit** from \"[6e5e20a90d1272d7308811709a84db6fa2de062c](https://github.com/sagemath/sagetrac-mirror/commit/6e5e20a90d1272d7308811709a84db6fa2de062c)\" to \"[93a4b889e4a18ca7ce4ff9123c357b541816ee30](https://github.com/sagemath/sagetrac-mirror/commit/93a4b889e4a18ca7ce4ff9123c357b541816ee30)\".",
    "created_at": "2017-08-14T19:56:08Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306679",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6e5e20a90d1272d7308811709a84db6fa2de062c](https://github.com/sagemath/sagetrac-mirror/commit/6e5e20a90d1272d7308811709a84db6fa2de062c)" to "[93a4b889e4a18ca7ce4ff9123c357b541816ee30](https://github.com/sagemath/sagetrac-mirror/commit/93a4b889e4a18ca7ce4ff9123c357b541816ee30)".



---

archive/issue_comments_306680.json:
```json
{
    "body": "<a id='comment:14'></a>\nI rebased and marked the doctests as \"not tested\".",
    "created_at": "2017-08-14T20:01:27Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306680",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:14'></a>
I rebased and marked the doctests as "not tested".



---

archive/issue_comments_306681.json:
```json
{
    "body": "**Assignee:** @kedlaya",
    "created_at": "2017-08-14T20:01:27Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306681",
    "user": "https://github.com/kedlaya"
}
```

**Assignee:** @kedlaya



---

archive/issue_comments_306682.json:
```json
{
    "body": "<a id='comment:15'></a>\nThere still remains 2 very long tests in src/sage/modular/modsym/modsym.py. I guess they should also be marked as \"not tested\".",
    "created_at": "2017-08-19T16:39:40Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306682",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>
There still remains 2 very long tests in src/sage/modular/modsym/modsym.py. I guess they should also be marked as "not tested".



---

archive/issue_comments_306683.json:
```json
{
    "body": "<a id='comment:16'></a>\nLook, there was a bug (my old typo); it has been fixed; there are doctests to show this which are marked \"not tested\" for good reasons.  That should be enough for this to pass.  If there are issues with different doctests i nthis file that should be made into a separate issue.  So I am giving this a positive review.",
    "created_at": "2017-08-19T16:51:22Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306683",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:16'></a>
Look, there was a bug (my old typo); it has been fixed; there are doctests to show this which are marked "not tested" for good reasons.  That should be enough for this to pass.  If there are issues with different doctests i nthis file that should be made into a separate issue.  So I am giving this a positive review.



---

archive/issue_comments_306684.json:
```json
{
    "body": "**Reviewer:** Vincent Delacroix, John Cremona, Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2017-08-19T16:51:22Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306684",
    "user": "https://github.com/JohnCremona"
}
```

**Reviewer:** Vincent Delacroix, John Cremona, Frédéric Chapoton



---

archive/issue_events_187618.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-08-19T16:51:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187618"
}
```



---

archive/issue_events_187619.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-08-19T16:51:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187619"
}
```



---

archive/issue_comments_306685.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc5333fc4ff9b6664704e365c58067915ef18da9\">cc5333f</a></td><td><code>Marked doctests in modsym.py as not tested</code></td></tr></table>\n",
    "created_at": "2017-08-19T17:09:13Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306685",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc5333fc4ff9b6664704e365c58067915ef18da9">cc5333f</a></td><td><code>Marked doctests in modsym.py as not tested</code></td></tr></table>




---

archive/issue_comments_306686.json:
```json
{
    "body": "**Changing commit** from \"[93a4b889e4a18ca7ce4ff9123c357b541816ee30](https://github.com/sagemath/sagetrac-mirror/commit/93a4b889e4a18ca7ce4ff9123c357b541816ee30)\" to \"[cc5333fc4ff9b6664704e365c58067915ef18da9](https://github.com/sagemath/sagetrac-mirror/commit/cc5333fc4ff9b6664704e365c58067915ef18da9)\".",
    "created_at": "2017-08-19T17:09:13Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306686",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[93a4b889e4a18ca7ce4ff9123c357b541816ee30](https://github.com/sagemath/sagetrac-mirror/commit/93a4b889e4a18ca7ce4ff9123c357b541816ee30)" to "[cc5333fc4ff9b6664704e365c58067915ef18da9](https://github.com/sagemath/sagetrac-mirror/commit/cc5333fc4ff9b6664704e365c58067915ef18da9)".



---

archive/issue_events_187620.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2017-08-19T17:09:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187620"
}
```



---

archive/issue_events_187621.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2017-08-19T17:09:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187621"
}
```



---

archive/issue_comments_306687.json:
```json
{
    "body": "<a id='comment:18'></a>\nPoint taken, when I changed the two doctests in p1list.pyx I should have also touched modsym.py. This is now done, but someone other than me should set this back to positive review.",
    "created_at": "2017-08-19T17:10:41Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306687",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:18'></a>
Point taken, when I changed the two doctests in p1list.pyx I should have also touched modsym.py. This is now done, but someone other than me should set this back to positive review.



---

archive/issue_events_187622.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-08-19T17:23:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187622"
}
```



---

archive/issue_events_187623.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-08-19T17:23:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187623"
}
```



---

archive/issue_comments_306688.json:
```json
{
    "body": "**Changing branch** from \"[u/kedlaya/issues_with_p1list_in_modular_symbols](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/issues_with_p1list_in_modular_symbols)\" to \"[cc5333fc4ff9b6664704e365c58067915ef18da9](https://github.com/sagemath/sagetrac-mirror/commit/cc5333fc4ff9b6664704e365c58067915ef18da9)\".",
    "created_at": "2017-08-21T19:24:09Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306688",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/kedlaya/issues_with_p1list_in_modular_symbols](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/issues_with_p1list_in_modular_symbols)" to "[cc5333fc4ff9b6664704e365c58067915ef18da9](https://github.com/sagemath/sagetrac-mirror/commit/cc5333fc4ff9b6664704e365c58067915ef18da9)".



---

archive/issue_events_187624.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-21T19:24:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187624"
}
```



---

archive/issue_events_187625.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "efaeac41d123c71a54bd821dceba75dda1ffb4e0",
    "created_at": "2017-08-21T19:24:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20932#event-187625"
}
```



---

archive/issue_comments_306689.json:
```json
{
    "body": "**Changing reviewer** from \"Vincent Delacroix, John Cremona, Fr\u00e9d\u00e9ric Chapoton\" to \"Vincent Delecroix, John Cremona, Fr\u00e9d\u00e9ric Chapoton\".",
    "created_at": "2017-12-08T14:53:50Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306689",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Vincent Delacroix, John Cremona, Frédéric Chapoton" to "Vincent Delecroix, John Cremona, Frédéric Chapoton".



---

archive/issue_comments_306690.json:
```json
{
    "body": "**Changing commit** from \"[cc5333fc4ff9b6664704e365c58067915ef18da9](https://github.com/sagemath/sagetrac-mirror/commit/cc5333fc4ff9b6664704e365c58067915ef18da9)\" to \"\".",
    "created_at": "2017-12-08T14:53:50Z",
    "issue": "https://github.com/sagemath/sage/issues/20932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20932#issuecomment-306690",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[cc5333fc4ff9b6664704e365c58067915ef18da9](https://github.com/sagemath/sagetrac-mirror/commit/cc5333fc4ff9b6664704e365c58067915ef18da9)" to "".
