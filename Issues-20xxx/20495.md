# Issue 20495: Add a function to generate random lattice (poset)

archive/issues_020258.json:
```json
{
    "body": "This patch will add a function to generate a random lattice with given number of elements.\n\nCurrently only \"dismantlable\" and \"planar\" are implemented as a property. Is this a good desing from user perspective? I hope to later add for example \"modular\", but of course most combinations will always just raise NotImplemented, as there are at least dozens of meaningful combinations that should be coded one by one.\n\nI am not satisfied of this code, but at least it works and is quite fast.\n\n\nCC:  @tscrim @fchapoton\n\nKeywords: latticeposet\n\nBranch/Commit: 5fc39b08f9ad24d57296b2e35c7a0552f126f715\n\nReviewer: Travis Scrimshaw\n\nAuthor: Jori M\u00e4ntysalo\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20495\n\n",
    "closed_at": "2016-09-12T19:02:23Z",
    "created_at": "2016-04-24T07:37:53Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Add a function to generate random lattice (poset)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20495",
    "user": "https://github.com/jm58660"
}
```
This patch will add a function to generate a random lattice with given number of elements.

Currently only "dismantlable" and "planar" are implemented as a property. Is this a good desing from user perspective? I hope to later add for example "modular", but of course most combinations will always just raise NotImplemented, as there are at least dozens of meaningful combinations that should be coded one by one.

I am not satisfied of this code, but at least it works and is quite fast.


CC:  @tscrim @fchapoton

Keywords: latticeposet

Branch/Commit: 5fc39b08f9ad24d57296b2e35c7a0552f126f715

Reviewer: Travis Scrimshaw

Author: Jori Mäntysalo

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20495





---

archive/issue_comments_372164.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jmantysalo/random-lattice\"",
    "created_at": "2016-08-29T10:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372164",
    "user": "https://github.com/jm58660"
}
```

Changing branch from "" to "u/jmantysalo/random-lattice"



---

archive/issue_comments_372165.json:
```json
{
    "body": "Changing author from \"\" to \"Jori M\u00e4ntysalo\"",
    "created_at": "2016-08-29T10:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372165",
    "user": "https://github.com/jm58660"
}
```

Changing author from "" to "Jori Mäntysalo"



---

archive/issue_comments_372166.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-Add a function to generate a random lattice with given number of elements.\n+This patch will add a function to generate a random lattice with given number of elements.\n+\n+Currently only \"dismantlable\" is implemented as a property. Is this a good desing from user perspective? I hope to later add for example \"modular\", but of course most combinations will always just raise NotImplemented, as there are at least dozens of meaningful combinations that should be coded one by one.\n+\n+I am not satisfied of this code, but at least it works and is quite fast.\n+\n``````\n",
    "created_at": "2016-08-29T10:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372166",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-Add a function to generate a random lattice with given number of elements.
+This patch will add a function to generate a random lattice with given number of elements.
+
+Currently only "dismantlable" is implemented as a property. Is this a good desing from user perspective? I hope to later add for example "modular", but of course most combinations will always just raise NotImplemented, as there are at least dozens of meaningful combinations that should be coded one by one.
+
+I am not satisfied of this code, but at least it works and is quite fast.
+
``````




---

archive/issue_comments_372167.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2016-08-29T10:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372167",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_372168.json:
```json
{
    "body": "Changing commit from \"\" to \"60eff31087c3784f997ae2f49bd5150e676fad85\"",
    "created_at": "2016-08-29T10:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372168",
    "user": "https://github.com/jm58660"
}
```

Changing commit from "" to "60eff31087c3784f997ae2f49bd5150e676fad85"



---

archive/issue_comments_372169.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-29T10:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372169",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_events_055389.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-29T10:30:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20495#event-55389"
}
```



---

archive/issue_comments_372170.json:
```json
{
    "body": "<a id='comment:3'></a>If you pass in a tuple for the `properties`, e.g., `('dismantlable')`, it will result in an error. If you're going to compare it to a list, you should cast `properties` into a list. You should also future-proof your code by checking `properties[0] == 'dismantlable'`.\n\nAlso, I feel that `p = 0` should be acceptable and return a chain, as it is the unique lattice with the minimal number of cover relations.\n\nIs this model of random lattices known (i.e., is there a literature reference for it)?",
    "created_at": "2016-08-29T14:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372170",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>If you pass in a tuple for the `properties`, e.g., `('dismantlable')`, it will result in an error. If you're going to compare it to a list, you should cast `properties` into a list. You should also future-proof your code by checking `properties[0] == 'dismantlable'`.

Also, I feel that `p = 0` should be acceptable and return a chain, as it is the unique lattice with the minimal number of cover relations.

Is this model of random lattices known (i.e., is there a literature reference for it)?



---

archive/issue_comments_372171.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 tscrim]:\n> If you pass in a tuple for the `properties`, e.g., `('dismantlable')`, it will result in an error. If you're going to compare it to a list, you should cast `properties` into a list. You should also future-proof your code by checking `properties[0] == 'dismantlable'`.\n\n\nThe code must be something like\n\n```\nprops = ['dismantlable', 'modular', 'planar' . . .]\nfor p in properties:\n    if p not in props:\n        Raise ValueError(...)\n```\n\nBut the most important question is the \"interface\", that is hard to change later. What kind of parameters would be possible to have for different kind of lattices? What if type `x` lattices can have five different numerical parameters to choise from, and type `y` has two?\n\nOr maybe I am planning too much for a code not yet written.\n\n> Also, I feel that `p = 0` should be acceptable and return a chain, as it is the unique lattice with the minimal number of cover relations.\n\n\nActually it kind of works now, but generates a random semilattice with minimal number of covers, i.e. a tree, and then adds the top element. Would be strange if `p=0` would always give the chain and `p=0.001` would give a tree (+top).\n\n> Is this model of random lattices known (i.e., is there a literature reference for it)?\n\n\nI found only https://www.emis.de/journals/MB/125.2/mb125_2_1.pdf and the code in that paper is... Well, take a look at yourself.\n\nI don't know if there is even a theoretical results about \"random lattice\", like \"What is the average width of all non-isomorphic lattices on 100 elements?\" So is there anything to compare to be able to say how good or bad an algorithm is?",
    "created_at": "2016-08-29T15:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372171",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:4'></a>Replying to [comment:3 tscrim]:
> If you pass in a tuple for the `properties`, e.g., `('dismantlable')`, it will result in an error. If you're going to compare it to a list, you should cast `properties` into a list. You should also future-proof your code by checking `properties[0] == 'dismantlable'`.


The code must be something like

```
props = ['dismantlable', 'modular', 'planar' . . .]
for p in properties:
    if p not in props:
        Raise ValueError(...)
```

But the most important question is the "interface", that is hard to change later. What kind of parameters would be possible to have for different kind of lattices? What if type `x` lattices can have five different numerical parameters to choise from, and type `y` has two?

Or maybe I am planning too much for a code not yet written.

> Also, I feel that `p = 0` should be acceptable and return a chain, as it is the unique lattice with the minimal number of cover relations.


Actually it kind of works now, but generates a random semilattice with minimal number of covers, i.e. a tree, and then adds the top element. Would be strange if `p=0` would always give the chain and `p=0.001` would give a tree (+top).

> Is this model of random lattices known (i.e., is there a literature reference for it)?


I found only https://www.emis.de/journals/MB/125.2/mb125_2_1.pdf and the code in that paper is... Well, take a look at yourself.

I don't know if there is even a theoretical results about "random lattice", like "What is the average width of all non-isomorphic lattices on 100 elements?" So is there anything to compare to be able to say how good or bad an algorithm is?



---

archive/issue_comments_372172.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 jmantysalo]:\n> Replying to [comment:3 tscrim]:\n> > If you pass in a tuple for the `properties`, e.g., `('dismantlable')`, it will result in an error. If you're going to compare it to a list, you should cast `properties` into a list. You should also future-proof your code by checking `properties[0] == 'dismantlable'`.\n\n> \n> The code must be something like\n> \n> \n> ```\n> props = ['dismantlable', 'modular', 'planar' . . .]\n> for p in properties:\n>     if p not in props:\n>         Raise ValueError(...)\n> ```\n\n\nYou can also do something like this:\n\n```python\nif not set('dismantlable', 'modular', 'planar', ...).is_superset(properties):\n    raise ValueError(\"invalid property\")\n```\n\n> But the most important question is the \"interface\", that is hard to change later. What kind of parameters would be possible to have for different kind of lattices? What if type `x` lattices can have five different numerical parameters to choise from, and type `y` has two?\n\n\nWe can easily add parameters and moderately easily change to an `*args` attribute if necessary.\n\n> Or maybe I am planning too much for a code not yet written.\n> \n> > Also, I feel that `p = 0` should be acceptable and return a chain, as it is the unique lattice with the minimal number of cover relations.\n\n> \n> Actually it kind of works now, but generates a random semilattice with minimal number of covers, i.e. a tree, and then adds the top element. Would be strange if `p=0` would always give the chain and `p=0.001` would give a tree (+top).\n\n\nThe minimal number of covers has to be a chain, because a tree + top will have E+k covers, where k is the number leaves that is not the root and `E` is the number of edges of the tree. 2 leaves with one being the root minimizes `k`, which implies the tree must be a path/chain. So it is not strange to me because boundary points (at least for Gnp random graphs) can behave different.\n\n> > Is this model of random lattices known (i.e., is there a literature reference for it)?\n\n> \n> I found only https://www.emis.de/journals/MB/125.2/mb125_2_1.pdf and the code in that paper is... Well, take a look at yourself.\n\n\nHmmm...I see your point. At least we could drop that C code in and link it easily in Sage to compare. Although it looks like it will generate a different distribution from a cursory look.\n\n> I don't know if there is even a theoretical results about \"random lattice\", like \"What is the average width of all non-isomorphic lattices on 100 elements?\" So is there anything to compare to be able to say how good or bad an algorithm is?\n\n\nWell, if its not known, it might result in a paper if you can determine some theoretical results. I was asking more if there was a reference that could be added.",
    "created_at": "2016-08-29T15:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372172",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>Replying to [comment:4 jmantysalo]:
> Replying to [comment:3 tscrim]:
> > If you pass in a tuple for the `properties`, e.g., `('dismantlable')`, it will result in an error. If you're going to compare it to a list, you should cast `properties` into a list. You should also future-proof your code by checking `properties[0] == 'dismantlable'`.

> 
> The code must be something like
> 
> 
> ```
> props = ['dismantlable', 'modular', 'planar' . . .]
> for p in properties:
>     if p not in props:
>         Raise ValueError(...)
> ```


You can also do something like this:

```python
if not set('dismantlable', 'modular', 'planar', ...).is_superset(properties):
    raise ValueError("invalid property")
```

> But the most important question is the "interface", that is hard to change later. What kind of parameters would be possible to have for different kind of lattices? What if type `x` lattices can have five different numerical parameters to choise from, and type `y` has two?


We can easily add parameters and moderately easily change to an `*args` attribute if necessary.

> Or maybe I am planning too much for a code not yet written.
> 
> > Also, I feel that `p = 0` should be acceptable and return a chain, as it is the unique lattice with the minimal number of cover relations.

> 
> Actually it kind of works now, but generates a random semilattice with minimal number of covers, i.e. a tree, and then adds the top element. Would be strange if `p=0` would always give the chain and `p=0.001` would give a tree (+top).


The minimal number of covers has to be a chain, because a tree + top will have E+k covers, where k is the number leaves that is not the root and `E` is the number of edges of the tree. 2 leaves with one being the root minimizes `k`, which implies the tree must be a path/chain. So it is not strange to me because boundary points (at least for Gnp random graphs) can behave different.

> > Is this model of random lattices known (i.e., is there a literature reference for it)?

> 
> I found only https://www.emis.de/journals/MB/125.2/mb125_2_1.pdf and the code in that paper is... Well, take a look at yourself.


Hmmm...I see your point. At least we could drop that C code in and link it easily in Sage to compare. Although it looks like it will generate a different distribution from a cursory look.

> I don't know if there is even a theoretical results about "random lattice", like "What is the average width of all non-isomorphic lattices on 100 elements?" So is there anything to compare to be able to say how good or bad an algorithm is?


Well, if its not known, it might result in a paper if you can determine some theoretical results. I was asking more if there was a reference that could be added.



---

archive/issue_comments_372173.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 tscrim]:\n\n> You can also do something like this:\n> \n> ```python\n> if not set('dismantlable', 'modular', 'planar', ...).is_superset(properties):\n>     raise ValueError(\"invalid property\")\n> ```\n\n\nBut then we can not raise exception saying *what* property was invalid.\n\n> We can easily add parameters and moderately easily change to an `*args` attribute if necessary.\n\n\nTrue. We could add something like `extra` parameter if needed for some special type of lattices.\n\n> > > Also, I feel that `p = 0` should be acceptable and return a chain, as it is the unique lattice with the minimal number of cover relations.\n\n> > \n> > Actually it kind of works now, but generates a random semilattice with minimal number of covers, i.e. a tree, and then adds the top element. Would be strange if `p=0` would always give the chain and `p=0.001` would give a tree (+top).\n\n> \n> The minimal number of covers has to be a chain\n\n\nYes for lattices. Not for semilattices.\n\nBut after all, I don't know if we really have to think about semilattices. I did the code such way that internal function generates a semilattice, which can be used directly as a meet-semilattice, inversed as a join-semilattice or after adding one element as a lattice.\n\n> > > Is this model of random lattices known (i.e., is there a literature reference for it)?\n\n> > \n> > I found only https://www.emis.de/journals/MB/125.2/mb125_2_1.pdf and the code in that paper is... Well, take a look at yourself.\n\n> \n> Hmmm...I see your point. At least we could drop that C code in and link it easily in Sage to compare. Although it looks like it will generate a different distribution from a cursory look.\n\n\nCan you copypaste and compile it from PDF? I think I tried and failed.\n\n> > I don't know if there is even a theoretical results about \"random lattice\", like \"What is the average width of all non-isomorphic lattices on 100 elements?\" So is there anything to compare to be able to say how good or bad an algorithm is?\n\n> \n> Well, if its not known, it might result in a paper if you can determine some theoretical results. I was asking more if there was a reference that could be added.\n\n\nTrue. The paper http://users.cecs.anu.edu.au/~bdm/papers/posets.pdf actually refers to a result about posets: \"Our results do not show this behaviour, emphasizing again that the convergence of posets to their asymptotic behaviour is quite slow.\"\n\nBut at least the average number of atoms equals to number of coatoms. My ad hoc code does not achieve this. I used `sqrt(random())` as a slight help to this direction.\n\nI tested that my code generates all lattices of given (small) size eventually, and it should be theoretically clear too.",
    "created_at": "2016-08-29T16:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372173",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'></a>Replying to [comment:5 tscrim]:

> You can also do something like this:
> 
> ```python
> if not set('dismantlable', 'modular', 'planar', ...).is_superset(properties):
>     raise ValueError("invalid property")
> ```


But then we can not raise exception saying *what* property was invalid.

> We can easily add parameters and moderately easily change to an `*args` attribute if necessary.


True. We could add something like `extra` parameter if needed for some special type of lattices.

> > > Also, I feel that `p = 0` should be acceptable and return a chain, as it is the unique lattice with the minimal number of cover relations.

> > 
> > Actually it kind of works now, but generates a random semilattice with minimal number of covers, i.e. a tree, and then adds the top element. Would be strange if `p=0` would always give the chain and `p=0.001` would give a tree (+top).

> 
> The minimal number of covers has to be a chain


Yes for lattices. Not for semilattices.

But after all, I don't know if we really have to think about semilattices. I did the code such way that internal function generates a semilattice, which can be used directly as a meet-semilattice, inversed as a join-semilattice or after adding one element as a lattice.

> > > Is this model of random lattices known (i.e., is there a literature reference for it)?

> > 
> > I found only https://www.emis.de/journals/MB/125.2/mb125_2_1.pdf and the code in that paper is... Well, take a look at yourself.

> 
> Hmmm...I see your point. At least we could drop that C code in and link it easily in Sage to compare. Although it looks like it will generate a different distribution from a cursory look.


Can you copypaste and compile it from PDF? I think I tried and failed.

> > I don't know if there is even a theoretical results about "random lattice", like "What is the average width of all non-isomorphic lattices on 100 elements?" So is there anything to compare to be able to say how good or bad an algorithm is?

> 
> Well, if its not known, it might result in a paper if you can determine some theoretical results. I was asking more if there was a reference that could be added.


True. The paper http://users.cecs.anu.edu.au/~bdm/papers/posets.pdf actually refers to a result about posets: "Our results do not show this behaviour, emphasizing again that the convergence of posets to their asymptotic behaviour is quite slow."

But at least the average number of atoms equals to number of coatoms. My ad hoc code does not achieve this. I used `sqrt(random())` as a slight help to this direction.

I tested that my code generates all lattices of given (small) size eventually, and it should be theoretically clear too.



---

archive/issue_comments_372174.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-30T12:50:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372174",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_372175.json:
```json
{
    "body": "Changing commit from \"60eff31087c3784f997ae2f49bd5150e676fad85\" to \"cd7104619519cee19b5c741888870d96d53f6ed2\"",
    "created_at": "2016-08-30T12:50:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372175",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "60eff31087c3784f997ae2f49bd5150e676fad85" to "cd7104619519cee19b5c741888870d96d53f6ed2"



---

archive/issue_comments_372176.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-08-30T12:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372176",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_372177.json:
```json
{
    "body": "<a id='comment:8'></a>How this looks? I think that this should still simplified, so that `RandomLattice` will contain only the parameters check and the logic to choise right function to do the job.",
    "created_at": "2016-08-30T12:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372177",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:8'></a>How this looks? I think that this should still simplified, so that `RandomLattice` will contain only the parameters check and the logic to choise right function to do the job.



---

archive/issue_comments_372178.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n This patch will add a function to generate a random lattice with given number of elements.\n \n-Currently only \"dismantlable\" is implemented as a property. Is this a good desing from user perspective? I hope to later add for example \"modular\", but of course most combinations will always just raise NotImplemented, as there are at least dozens of meaningful combinations that should be coded one by one.\n+Currently only \"dismantlable\" and \"planar\" are implemented as a property. Is this a good desing from user perspective? I hope to later add for example \"modular\", but of course most combinations will always just raise NotImplemented, as there are at least dozens of meaningful combinations that should be coded one by one.\n \n I am not satisfied of this code, but at least it works and is quite fast.\n \n``````\n",
    "created_at": "2016-08-30T12:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372178",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 This patch will add a function to generate a random lattice with given number of elements.
 
-Currently only "dismantlable" is implemented as a property. Is this a good desing from user perspective? I hope to later add for example "modular", but of course most combinations will always just raise NotImplemented, as there are at least dozens of meaningful combinations that should be coded one by one.
+Currently only "dismantlable" and "planar" are implemented as a property. Is this a good desing from user perspective? I hope to later add for example "modular", but of course most combinations will always just raise NotImplemented, as there are at least dozens of meaningful combinations that should be coded one by one.
 
 I am not satisfied of this code, but at least it works and is quite fast.
 
``````




---

archive/issue_comments_372179.json:
```json
{
    "body": "<a id='comment:9'></a>I think you should make `known_properties` into a `set` for faster checking. (Actually, to still have your desired error message, you could do `if properties.difference(known_properties):`, then pop an element off from that different for the error message.) There is a discrepancy between the doc and the code in that the doc says `p=0` is valid input, but the code will error out. Otherwise it seems okay.",
    "created_at": "2016-08-30T14:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372179",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>I think you should make `known_properties` into a `set` for faster checking. (Actually, to still have your desired error message, you could do `if properties.difference(known_properties):`, then pop an element off from that different for the error message.) There is a discrepancy between the doc and the code in that the doc says `p=0` is valid input, but the code will error out. Otherwise it seems okay.



---

archive/issue_comments_372180.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-31T09:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372180",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_372181.json:
```json
{
    "body": "Changing commit from \"cd7104619519cee19b5c741888870d96d53f6ed2\" to \"07ea77dcc7c146c652732ee269f72f6448d9d1ff\"",
    "created_at": "2016-08-31T09:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372181",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cd7104619519cee19b5c741888870d96d53f6ed2" to "07ea77dcc7c146c652732ee269f72f6448d9d1ff"



---

archive/issue_comments_372182.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-31T09:18:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372182",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_372183.json:
```json
{
    "body": "Changing commit from \"07ea77dcc7c146c652732ee269f72f6448d9d1ff\" to \"5fc39b08f9ad24d57296b2e35c7a0552f126f715\"",
    "created_at": "2016-08-31T09:18:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372183",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "07ea77dcc7c146c652732ee269f72f6448d9d1ff" to "5fc39b08f9ad24d57296b2e35c7a0552f126f715"



---

archive/issue_comments_372184.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-31T09:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372184",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_372185.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:9 tscrim]:\n> I think you should make `known_properties` into a `set` for faster checking. (Actually, to still have your desired error message, you could do `if properties.difference(known_properties):`, then pop an element off from that different for the error message.) There is a discrepancy between the doc and the code in that the doc says `p=0` is valid input, but the code will error out. Otherwise it seems okay.\n\n\nOK, done that, even if this should not be an issue: I suppose we wont have *that* many properties ever available.\n\nNow if someone says `Posets.RandomLattice(30, 0, properties='dismantlable')` it will also work, and not raise an error about parameter value 'd'. (See `set('hello')`.)\n\nI also rethinked something, but the algorithms themself have not changed. I added tests and docstrings.\n\nMaybe a time to close this and do other additions later. Will be a nice challenge, I guess, to make for example a random lattice that is both atomic and co-atomic.",
    "created_at": "2016-08-31T09:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372185",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:12'></a>Replying to [comment:9 tscrim]:
> I think you should make `known_properties` into a `set` for faster checking. (Actually, to still have your desired error message, you could do `if properties.difference(known_properties):`, then pop an element off from that different for the error message.) There is a discrepancy between the doc and the code in that the doc says `p=0` is valid input, but the code will error out. Otherwise it seems okay.


OK, done that, even if this should not be an issue: I suppose we wont have *that* many properties ever available.

Now if someone says `Posets.RandomLattice(30, 0, properties='dismantlable')` it will also work, and not raise an error about parameter value 'd'. (See `set('hello')`.)

I also rethinked something, but the algorithms themself have not changed. I added tests and docstrings.

Maybe a time to close this and do other additions later. Will be a nice challenge, I guess, to make for example a random lattice that is both atomic and co-atomic.



---

archive/issue_comments_372186.json:
```json
{
    "body": "<a id='comment:13'></a>I have already thinked about adding random atomic, distributive, modular and semimodular lattices. However I think it is easier to first integrate this patch to Sage and continue after that. Then patches are of manageable size.",
    "created_at": "2016-09-02T16:52:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372186",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:13'></a>I have already thinked about adding random atomic, distributive, modular and semimodular lattices. However I think it is easier to first integrate this patch to Sage and continue after that. Then patches are of manageable size.



---

archive/issue_comments_372187.json:
```json
{
    "body": "<a id='comment:14'></a>Just pinging. I think I did nothing very special after your comment \"Otherwise it seems okay.\"\n\nThis would be nice to have, as this can used for testing other functions.",
    "created_at": "2016-09-10T06:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372187",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:14'></a>Just pinging. I think I did nothing very special after your comment "Otherwise it seems okay."

This would be nice to have, as this can used for testing other functions.



---

archive/issue_comments_372188.json:
```json
{
    "body": "<a id='comment:15'></a>Sorry, forgot about this. Yes, LGTM now. Thanks.",
    "created_at": "2016-09-10T12:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372188",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>Sorry, forgot about this. Yes, LGTM now. Thanks.



---

archive/issue_comments_372189.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-09-10T12:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372189",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_372190.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2016-09-10T12:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372190",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_372191.json:
```json
{
    "body": "<a id='comment:16'></a>Thanks! Hopefully this will be used to test and optimize other parts of `lattices.py`.",
    "created_at": "2016-09-10T12:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372191",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:16'></a>Thanks! Hopefully this will be used to test and optimize other parts of `lattices.py`.



---

archive/issue_events_055390.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-12T19:02:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20495#event-55390"
}
```



---

archive/issue_comments_372192.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-09-12T19:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372192",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_372193.json:
```json
{
    "body": "Changing branch from \"u/jmantysalo/random-lattice\" to \"5fc39b08f9ad24d57296b2e35c7a0552f126f715\"",
    "created_at": "2016-09-12T19:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20495",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20495#issuecomment-372193",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jmantysalo/random-lattice" to "5fc39b08f9ad24d57296b2e35c7a0552f126f715"
