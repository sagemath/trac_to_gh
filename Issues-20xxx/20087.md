# Issue 20087: `__call__(message)` on a linear code or encoder should return a codeword.

archive/issues_019850.json:
```json
{
    "body": "If `E` is an `Encoder` for a `LinearCode` `C`, one can use `E.encode(message)`, where `message` is in the appropriate space. `E(message)` should default to the same behaviour. So should `C(message)`.\n\nBe aware that the category framework specifies that `C(c) = c` if `c in C`. This needs to be handled.\n\nCC:  dlucas @ClementPernet @jlavauzelle danielaugot\n\nKeywords: beginner, rd3\n\nBranch/Commit: 8ba64ee314241b1c905343eefa87dd694f13c8e0\n\nReviewer: Cl\u00e9ment Pernet\n\nAuthor: David Lucas\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20087\n\n",
    "closed_at": "2017-02-08T22:48:53Z",
    "created_at": "2016-02-19T15:58:59Z",
    "labels": [
        "component: coding theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "`__call__(message)` on a linear code or encoder should return a codeword.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20087",
    "user": "https://github.com/johanrosenkilde"
}
```
If `E` is an `Encoder` for a `LinearCode` `C`, one can use `E.encode(message)`, where `message` is in the appropriate space. `E(message)` should default to the same behaviour. So should `C(message)`.

Be aware that the category framework specifies that `C(c) = c` if `c in C`. This needs to be handled.

CC:  dlucas @ClementPernet @jlavauzelle danielaugot

Keywords: beginner, rd3

Branch/Commit: 8ba64ee314241b1c905343eefa87dd694f13c8e0

Reviewer: Cl√©ment Pernet

Author: David Lucas

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20087





---

archive/issue_comments_290298.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-22T11:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290298",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290299.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-02-22T11:59:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290299",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_290300.json:
```json
{
    "body": "<a id='comment:3'></a>`E(message)` now defaults to `E.encode(message)`.\nI added a few lines to the documentation of `encode` in `encoder.py` and in `GRSEvaluationPolynomialEncoder` to highlight this shortcut.\n\nSetting this as `needs_review`.\n\n---\nNew commits:",
    "created_at": "2016-02-22T11:59:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290300",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:3'></a>`E(message)` now defaults to `E.encode(message)`.
I added a few lines to the documentation of `encode` in `encoder.py` and in `GRSEvaluationPolynomialEncoder` to highlight this shortcut.

Setting this as `needs_review`.

---
New commits:



---

archive/issue_comments_290301.json:
```json
{
    "body": "Changing keywords from \"\" to \"beginner\".",
    "created_at": "2016-02-22T16:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290301",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing keywords from "" to "beginner".



---

archive/issue_comments_290302.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-25T15:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290302",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290303.json:
```json
{
    "body": "<a id='comment:6'></a>I added the same mechanism with codes: let `C` be a code, and `m` an element from the message space of the encoder `'encoder'`.\n\n`C(m, encoder_name='encoder')` is now a shortcut to `C.encode(m, encoder_name='encoder')`",
    "created_at": "2016-02-25T15:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290303",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:6'></a>I added the same mechanism with codes: let `C` be a code, and `m` an element from the message space of the encoder `'encoder'`.

`C(m, encoder_name='encoder')` is now a shortcut to `C.encode(m, encoder_name='encoder')`



---

archive/issue_comments_290304.json:
```json
{
    "body": "<a id='comment:7'></a>There's a doctest failing which indicates the test suite is broken for codes.\nThat's because in the test suite, there's an idempotency test for element construction.\n\nIt picks `c = C.an_element()` and then tries `C(c)`... Which of course fails in our case as `__call__` has been redefined as `encode` - and the input of encode cannot be an element of `C`.",
    "created_at": "2016-03-18T13:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290304",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:7'></a>There's a doctest failing which indicates the test suite is broken for codes.
That's because in the test suite, there's an idempotency test for element construction.

It picks `c = C.an_element()` and then tries `C(c)`... Which of course fails in our case as `__call__` has been redefined as `encode` - and the input of encode cannot be an element of `C`.



---

archive/issue_events_054684.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/dlucas",
    "created_at": "2016-03-18T14:53:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20087#event-54684"
}
```



---

archive/issue_comments_290305.json:
```json
{
    "body": "<a id='comment:8'></a>Because of the above, which is related to the way linear codes are set in the category framework, it seems impossible to do the proposed improvement.\n\nSetting this to invalid/won't fix.",
    "created_at": "2016-03-18T14:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290305",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:8'></a>Because of the above, which is related to the way linear codes are set in the category framework, it seems impossible to do the proposed improvement.

Setting this to invalid/won't fix.



---

archive/issue_comments_290306.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n-If `E` is an `Encoder` for a `LinearCode`, one can use `E.encode(message)`, where `message` is in the appropriate space. `E(message)` should default to the same behaviour.\n+If `E` is an `Encoder` for a `LinearCode` `C`, one can use `E.encode(message)`, where `message` is in the appropriate space. `E(message)` should default to the same behaviour. So should `C(message)`.\n+\n+Be aware that the category framework specifies that `C(c) = c` if `c in C`. This needs to be handled.\n \n Comment: 1\n \n``````\n",
    "created_at": "2016-03-31T12:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290306",
    "user": "https://github.com/johanrosenkilde"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
-If `E` is an `Encoder` for a `LinearCode`, one can use `E.encode(message)`, where `message` is in the appropriate space. `E(message)` should default to the same behaviour.
+If `E` is an `Encoder` for a `LinearCode` `C`, one can use `E.encode(message)`, where `message` is in the appropriate space. `E(message)` should default to the same behaviour. So should `C(message)`.
+
+Be aware that the category framework specifies that `C(c) = c` if `c in C`. This needs to be handled.
 
 Comment: 1
 
``````




---

archive/issue_comments_290307.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-31T12:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290307",
    "user": "https://github.com/johanrosenkilde"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_290308.json:
```json
{
    "body": "<a id='comment:9'></a>This issue is not a show-stopper: instead of `__call__` simply aliasing `self.encode`, it is a proper method which checks its input. If the input is a codeword, it returns that unchanged. If the input has the correct length of a message, return the encoded codeword, via `self.encode`. Otherwise, throw a `ValueError`.\n\nRe-opening.",
    "created_at": "2016-03-31T12:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290308",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:9'></a>This issue is not a show-stopper: instead of `__call__` simply aliasing `self.encode`, it is a proper method which checks its input. If the input is a codeword, it returns that unchanged. If the input has the correct length of a message, return the encoded codeword, via `self.encode`. Otherwise, throw a `ValueError`.

Re-opening.



---

archive/issue_events_054685.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2016-03-31T12:51:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20087#event-54685"
}
```



---

archive/issue_events_054686.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2016-03-31T12:51:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20087#event-54686"
}
```



---

archive/issue_comments_290309.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-31T14:25:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290309",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290310.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-31T14:29:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290310",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_290311.json:
```json
{
    "body": "<a id='comment:11'></a>Done.\nExcept for the `ValueError`. If the input is not a codeword, it passes it to `encode` which does the check. As `encode` knows the message space of the encoder to use, it returns a nice error message which specifies the expected input (e.g. \"The value to encode must be in Vector space of dimension 4 over Finite Field of size 2\").\n\nMaybe leave this review for Daniel as he wanted to do it? I just Cc'd him on this ticket.",
    "created_at": "2016-03-31T14:29:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290311",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:11'></a>Done.
Except for the `ValueError`. If the input is not a codeword, it passes it to `encode` which does the check. As `encode` knows the message space of the encoder to use, it returns a nice error message which specifies the expected input (e.g. "The value to encode must be in Vector space of dimension 4 over Finite Field of size 2").

Maybe leave this review for Daniel as he wanted to do it? I just Cc'd him on this ticket.



---

archive/issue_comments_290312.json:
```json
{
    "body": "<a id='comment:12'></a>Hi, Maybe the check of whether the vector passed is a codeword or not can be done before passing it to the encode function. That way if a user means to pass a codeword rather than the message, and passed th wrong vector, he/she will be notified.",
    "created_at": "2016-04-01T11:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290312",
    "user": "https://trac.sagemath.org/admin/accounts/users/panda314"
}
```

<a id='comment:12'></a>Hi, Maybe the check of whether the vector passed is a codeword or not can be done before passing it to the encode function. That way if a user means to pass a codeword rather than the message, and passed th wrong vector, he/she will be notified.



---

archive/issue_comments_290313.json:
```json
{
    "body": "<a id='comment:13'></a>David, didn't you accidentally put the Encoder-related code on the GRS encoder? It should be on the abstract class `Encoder`. Also, the check `if m in self` should be `if m in self.code()` on the Encoder. And your doc-test there doesn't test that method.\n\nReplying to [comment:12 panda314]:\n> Hi, Maybe the check of whether the vector passed is a codeword or not can be done before passing it to the encode function. That way if a user means to pass a codeword rather than the message, and passed th wrong vector, he/she will be notified. \n\n\nAs far as I can see, the check in `LinearCode` *does* check for code membership before passing it to the encoder.",
    "created_at": "2016-04-01T12:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290313",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:13'></a>David, didn't you accidentally put the Encoder-related code on the GRS encoder? It should be on the abstract class `Encoder`. Also, the check `if m in self` should be `if m in self.code()` on the Encoder. And your doc-test there doesn't test that method.

Replying to [comment:12 panda314]:
> Hi, Maybe the check of whether the vector passed is a codeword or not can be done before passing it to the encode function. That way if a user means to pass a codeword rather than the message, and passed th wrong vector, he/she will be notified. 


As far as I can see, the check in `LinearCode` *does* check for code membership before passing it to the encoder.



---

archive/issue_comments_290314.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-01T12:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290314",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290315.json:
```json
{
    "body": "<a id='comment:15'></a>Hello,\n\n> David, didn't you accidentally put the Encoder-related code on the GRS encoder? \n\n\nIndeed, I removed it.\n\n> It should be on the abstract class Encoder.\n\n\nShould it? IMHO, there's nothing elaborate to do for the encoder. If one creates a code `C` and an encoder `E` for `C`, and types `E(c)` for some `c`, if `c` does not belong to the message space of `E` it should fail. To me, the only purpose of an encoder is to transform elements of the message space into codeword. So if one passes an element which does not belong to the message space, failing makes sense.\n\n> As far as I can see, the check in LinearCode *does* check for code membership before passing it to the encoder.\n\n\nI think he meant if one tries to pass an element of the ambient space of the code which does not belong to the code. I added a check for that: as I cannot picture an encoder whose message space is the ambient space of the code, it makes sense to immediately reject vectors which are in the ambient space but not in the code, as it avoids calling `encode` and thus constructing an encoder for nothing.",
    "created_at": "2016-04-01T12:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290315",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:15'></a>Hello,

> David, didn't you accidentally put the Encoder-related code on the GRS encoder? 


Indeed, I removed it.

> It should be on the abstract class Encoder.


Should it? IMHO, there's nothing elaborate to do for the encoder. If one creates a code `C` and an encoder `E` for `C`, and types `E(c)` for some `c`, if `c` does not belong to the message space of `E` it should fail. To me, the only purpose of an encoder is to transform elements of the message space into codeword. So if one passes an element which does not belong to the message space, failing makes sense.

> As far as I can see, the check in LinearCode *does* check for code membership before passing it to the encoder.


I think he meant if one tries to pass an element of the ambient space of the code which does not belong to the code. I added a check for that: as I cannot picture an encoder whose message space is the ambient space of the code, it makes sense to immediately reject vectors which are in the ambient space but not in the code, as it avoids calling `encode` and thus constructing an encoder for nothing.



---

archive/issue_comments_290316.json:
```json
{
    "body": "<a id='comment:16'></a>> Should it? IMHO, there's nothing elaborate to do for the encoder. If one creates a code `C` and an encoder `E` for `C`, and types `E(c)` for some `c`, if `c` does not belong to the message space of `E` it should fail. To me, the only purpose of an encoder is to transform elements of the message space into codeword. So if one passes an element which does not belong to the message space, failing makes sense.\n\n\nOh yeah, you're right. But this patch then still adds the alias `Encoder.__call__` as `Encoder.encode`, I presume?\n\n> I think he meant if one tries to pass an element of the ambient space of the code which does not belong to the code. I added a check for that: as I cannot picture an encoder whose message space is the ambient space of the code, it makes sense to immediately reject vectors which are in the ambient space but not in the code, as it avoids calling `encode` and thus constructing an encoder for nothing.\n\n\nHm, makes sense. You have a typo in the error message though (is -> it)",
    "created_at": "2016-04-01T12:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290316",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:16'></a>> Should it? IMHO, there's nothing elaborate to do for the encoder. If one creates a code `C` and an encoder `E` for `C`, and types `E(c)` for some `c`, if `c` does not belong to the message space of `E` it should fail. To me, the only purpose of an encoder is to transform elements of the message space into codeword. So if one passes an element which does not belong to the message space, failing makes sense.


Oh yeah, you're right. But this patch then still adds the alias `Encoder.__call__` as `Encoder.encode`, I presume?

> I think he meant if one tries to pass an element of the ambient space of the code which does not belong to the code. I added a check for that: as I cannot picture an encoder whose message space is the ambient space of the code, it makes sense to immediately reject vectors which are in the ambient space but not in the code, as it avoids calling `encode` and thus constructing an encoder for nothing.


Hm, makes sense. You have a typo in the error message though (is -> it)



---

archive/issue_comments_290317.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-01T12:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290317",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290318.json:
```json
{
    "body": "<a id='comment:18'></a>> Oh yeah, you're right. But this patch then still adds the alias Encoder.__call__ as Encoder.encode, I presume?\n\n\nIndeed. I fixed that.\n\n> Hm, makes sense. You have a typo in the error message though (is -> it)\n\n\nOops. Fixed too.",
    "created_at": "2016-04-01T12:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290318",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:18'></a>> Oh yeah, you're right. But this patch then still adds the alias Encoder.__call__ as Encoder.encode, I presume?


Indeed. I fixed that.

> Hm, makes sense. You have a typo in the error message though (is -> it)


Oops. Fixed too.



---

archive/issue_comments_290319.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:18 dlucas]:\n> > Oh yeah, you're right. But this patch then still adds the alias Encoder.__call__ as Encoder.encode, I presume?\n\n> \n> Indeed. I fixed that.\n\n\nYou added it to GRS, not to Encoder...",
    "created_at": "2016-04-01T13:02:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290319",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:19'></a>Replying to [comment:18 dlucas]:
> > Oh yeah, you're right. But this patch then still adds the alias Encoder.__call__ as Encoder.encode, I presume?

> 
> Indeed. I fixed that.


You added it to GRS, not to Encoder...



---

archive/issue_comments_290320.json:
```json
{
    "body": "<a id='comment:20'></a>> You added it to GRS, not to Encoder...\n\n\nErr yes, because `encode` is overridden in the polynomial encoder for GRS codes.\nThe alias is already added to `encoder.py`, and `E(m)` encodes `m` if possible.",
    "created_at": "2016-04-01T13:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290320",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:20'></a>> You added it to GRS, not to Encoder...


Err yes, because `encode` is overridden in the polynomial encoder for GRS codes.
The alias is already added to `encoder.py`, and `E(m)` encodes `m` if possible.



---

archive/issue_comments_290321.json:
```json
{
    "body": "<a id='comment:21'></a>> Err yes, because `encode` is overridden in the polynomial encoder for GRS codes.\n> The alias is already added to `encoder.py`, and `E(m)` encodes `m` if possible.\n\n\nOuch, that's a super-nasty trap! All encoders written in the future will fall into this!\n\nI vote for *not* defining `Encoder.__call__` as an alias, then, but instead rely on dynamic dispatch to avoid the trap:\n\n```\n    def __call__(self, m):\n        return self.encode(m)\n```",
    "created_at": "2016-04-01T13:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290321",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:21'></a>> Err yes, because `encode` is overridden in the polynomial encoder for GRS codes.
> The alias is already added to `encoder.py`, and `E(m)` encodes `m` if possible.


Ouch, that's a super-nasty trap! All encoders written in the future will fall into this!

I vote for *not* defining `Encoder.__call__` as an alias, then, but instead rely on dynamic dispatch to avoid the trap:

```
    def __call__(self, m):
        return self.encode(m)
```



---

archive/issue_comments_290322.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-01T14:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290322",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290323.json:
```json
{
    "body": "<a id='comment:23'></a>> I vote for *not* defining `Encoder.__call__` as an alias, then, but instead rely on dynamic dispatch to avoid the trap\n\n\nYes, it's a good idea. Done in the last commit.",
    "created_at": "2016-04-01T14:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290323",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:23'></a>> I vote for *not* defining `Encoder.__call__` as an alias, then, but instead rely on dynamic dispatch to avoid the trap


Yes, it's a good idea. Done in the last commit.



---

archive/issue_comments_290324.json:
```json
{
    "body": "<a id='comment:24'></a>are the changes compiling? The copy of this branch is not compiling on my local pc (new to sage, am i missing something?). Here's the error:\nInternalError: Internal compiler error: 'cysignals/signals.pxi' not found\n\nDetailed message is,\n\nTraceback (most recent call last):\n\u00a0 File \"setup.py\", line 590, in <module>\n\u00a0\u00a0\u00a0 run_cythonize()\n\u00a0 File \"setup.py\", line 582, in run_cythonize\n\u00a0\u00a0\u00a0 'profile': profile,\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 758, in cythonize\n\u00a0\u00a0\u00a0 aliases=aliases)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 664, in create_extension_list\n\u00a0\u00a0\u00a0 kwds = deps.distutils_info(file, aliases, base).values\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 564, in distutils_info\n\u00a0\u00a0\u00a0 return (self.transitive_merge(filename, self.distutils_info0, DistutilsInfo.merge)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 574, in transitive_merge\n\u00a0\u00a0\u00a0 node, extract, merge, seen, {}, self.cimported_files)![0]\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 579, in transitive_merge_helper\n\u00a0\u00a0\u00a0 deps = extract(node)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 555, in distutils_info0\n\u00a0\u00a0\u00a0 externs = self.cimports_and_externs(filename)![1]\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Utils.py\", line 43, in wrapper\n\u00a0\u00a0\u00a0 res = cache[args] = f(self, *args)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 465, in cimports_and_externs\n\u00a0\u00a0\u00a0 for include in self.included_files(filename):\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Utils.py\", line 43, in wrapper\n\u00a0\u00a0\u00a0 res = cache[args] = f(self, *args)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 448, in included_files\n\u00a0\u00a0\u00a0 include_path = self.context.find_include_file(include, None)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Compiler/Main.py\", line 274, in find_include_file\n\u00a0\u00a0\u00a0 error(pos, \"'%s' not found\" % filename)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Compiler/Errors.py\", line 177, in error\n\u00a0\u00a0\u00a0 raise InternalError(message)\nInternalError: Internal compiler error: 'cysignals/signals.pxi' not found\n************************************************************************\nError building the Sage library\n************************************************************************\nmake: *** [sage] Error 1",
    "created_at": "2016-04-01T15:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290324",
    "user": "https://trac.sagemath.org/admin/accounts/users/panda314"
}
```

<a id='comment:24'></a>are the changes compiling? The copy of this branch is not compiling on my local pc (new to sage, am i missing something?). Here's the error:
InternalError: Internal compiler error: 'cysignals/signals.pxi' not found

Detailed message is,

Traceback (most recent call last):
¬† File "setup.py", line 590, in <module>
¬†¬†¬† run_cythonize()
¬† File "setup.py", line 582, in run_cythonize
¬†¬†¬† 'profile': profile,
¬† File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 758, in cythonize
¬†¬†¬† aliases=aliases)
¬† File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 664, in create_extension_list
¬†¬†¬† kwds = deps.distutils_info(file, aliases, base).values
¬† File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 564, in distutils_info
¬†¬†¬† return (self.transitive_merge(filename, self.distutils_info0, DistutilsInfo.merge)
¬† File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 574, in transitive_merge
¬†¬†¬† node, extract, merge, seen, {}, self.cimported_files)![0]
¬† File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 579, in transitive_merge_helper
¬†¬†¬† deps = extract(node)
¬† File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 555, in distutils_info0
¬†¬†¬† externs = self.cimports_and_externs(filename)![1]
¬† File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Utils.py", line 43, in wrapper
¬†¬†¬† res = cache[args] = f(self, *args)
¬† File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 465, in cimports_and_externs
¬†¬†¬† for include in self.included_files(filename):
¬† File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Utils.py", line 43, in wrapper
¬†¬†¬† res = cache[args] = f(self, *args)
¬† File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 448, in included_files
¬†¬†¬† include_path = self.context.find_include_file(include, None)
¬† File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Compiler/Main.py", line 274, in find_include_file
¬†¬†¬† error(pos, "'%s' not found" % filename)
¬† File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Compiler/Errors.py", line 177, in error
¬†¬†¬† raise InternalError(message)
InternalError: Internal compiler error: 'cysignals/signals.pxi' not found
************************************************************************
Error building the Sage library
************************************************************************
make: *** [sage] Error 1



---

archive/issue_comments_290325.json:
```json
{
    "body": "<a id='comment:25'></a>It's compiling on my side. According to the error report you sent, a file is missing on your side.\nI guess you'll have to download Sage again and recompile it...",
    "created_at": "2016-04-01T16:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290325",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:25'></a>It's compiling on my side. According to the error report you sent, a file is missing on your side.
I guess you'll have to download Sage again and recompile it...



---

archive/issue_comments_290326.json:
```json
{
    "body": "<a id='comment:27'></a>I used the terminology \"ambient space\" in the doc string, to avoid being specific in details. Daniel\n\n---\nNew commits:",
    "created_at": "2016-08-24T10:10:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290326",
    "user": "https://trac.sagemath.org/admin/accounts/users/danielaugot"
}
```

<a id='comment:27'></a>I used the terminology "ambient space" in the doc string, to avoid being specific in details. Daniel

---
New commits:



---

archive/issue_comments_290327.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-24T18:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290327",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290328.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-24T18:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290328",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290329.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-24T19:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290329",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290330.json:
```json
{
    "body": "<a id='comment:32'></a>I mistakenly pushed another branch on top of this one. I've reverted it now -- sorry for the noise.",
    "created_at": "2016-09-12T09:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290330",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:32'></a>I mistakenly pushed another branch on top of this one. I've reverted it now -- sorry for the noise.



---

archive/issue_comments_290331.json:
```json
{
    "body": "Changing keywords from \"beginner\" to \"beginner, rd3\".",
    "created_at": "2017-02-07T09:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290331",
    "user": "https://github.com/ClementPernet"
}
```

Changing keywords from "beginner" to "beginner, rd3".



---

archive/issue_comments_290332.json:
```json
{
    "body": "<a id='comment:33'></a>Doc string of the `__call__` method of encoder (encoder.py:187) should test whether `E(p)` works not `E.encode(p)`.",
    "created_at": "2017-02-07T09:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290332",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:33'></a>Doc string of the `__call__` method of encoder (encoder.py:187) should test whether `E(p)` works not `E.encode(p)`.



---

archive/issue_comments_290333.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-07T09:34:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290333",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290334.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-07T09:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290334",
    "user": "https://github.com/ClementPernet"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_290335.json:
```json
{
    "body": "<a id='comment:36'></a>It's all good, after the two minor docstring edits that I've pushed to the ticket. Positive review.",
    "created_at": "2017-02-07T09:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290335",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:36'></a>It's all good, after the two minor docstring edits that I've pushed to the ticket. Positive review.



---

archive/issue_events_054687.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2017-02-07T09:36:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20087#event-54687"
}
```



---

archive/issue_events_054688.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2017-02-07T09:36:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20087#event-54688"
}
```



---

archive/issue_comments_290336.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-08T22:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20087#issuecomment-290336",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_054689.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-08T22:48:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20087",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20087#event-54689"
}
```
