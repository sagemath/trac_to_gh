# Issue 20087: `__call__(message)` on a linear code or encoder should return a codeword.

archive/issues_019850.json:
```json
{
    "body": "If `E` is an `Encoder` for a `LinearCode` `C`, one can use `E.encode(message)`, where `message` is in the appropriate space. `E(message)` should default to the same behaviour. So should `C(message)`.\n\nBe aware that the category framework specifies that `C(c) = c` if `c in C`. This needs to be handled.\n\n**CC:**  dlucas @ClementPernet @jlavauzelle danielaugot\n\n**Keywords:** rd3\n\n**Branch/Commit:** [8ba64ee314241b1c905343eefa87dd694f13c8e0](https://github.com/sagemath/sagetrac-mirror/commit/8ba64ee314241b1c905343eefa87dd694f13c8e0)\n\n**Reviewer:** Cl\u00e9ment Pernet\n\n**Author:** David Lucas\n\nIssue created by migration from https://trac.sagemath.org/ticket/20087\n\n",
    "closed_at": "2017-02-08T22:48:53Z",
    "created_at": "2016-02-19T15:58:59Z",
    "labels": [
        "component: coding theory",
        "enhancement",
        "good first issue"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "title": "`__call__(message)` on a linear code or encoder should return a codeword.",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/20087",
    "user": "https://github.com/johanrosenkilde"
}
```
If `E` is an `Encoder` for a `LinearCode` `C`, one can use `E.encode(message)`, where `message` is in the appropriate space. `E(message)` should default to the same behaviour. So should `C(message)`.

Be aware that the category framework specifies that `C(c) = c` if `c in C`. This needs to be handled.

**CC:**  dlucas @ClementPernet @jlavauzelle danielaugot

**Keywords:** rd3

**Branch/Commit:** [8ba64ee314241b1c905343eefa87dd694f13c8e0](https://github.com/sagemath/sagetrac-mirror/commit/8ba64ee314241b1c905343eefa87dd694f13c8e0)

**Reviewer:** Clément Pernet

**Author:** David Lucas

Issue created by migration from https://trac.sagemath.org/ticket/20087





---

archive/issue_comments_290536.json:
```json
{
    "body": "**Branch:** [u/dlucas/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/shortcut_to_encode)",
    "created_at": "2016-02-22T11:52:11Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290536",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

**Branch:** [u/dlucas/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/shortcut_to_encode)



---

archive/issue_comments_290537.json:
```json
{
    "body": "**Commit:** [49c448862fa2c32dc283b05fa7a749f064c6ec39](https://github.com/sagemath/sagetrac-mirror/commit/49c448862fa2c32dc283b05fa7a749f064c6ec39)",
    "created_at": "2016-02-22T11:58:39Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290537",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [49c448862fa2c32dc283b05fa7a749f064c6ec39](https://github.com/sagemath/sagetrac-mirror/commit/49c448862fa2c32dc283b05fa7a749f064c6ec39)



---

archive/issue_comments_290538.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49c448862fa2c32dc283b05fa7a749f064c6ec39\">49c4488</a></td><td><code>Also defined this shortcut in GRSEvaluationPolynomialEncoder</code></td></tr></table>\n",
    "created_at": "2016-02-22T11:58:39Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290538",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49c448862fa2c32dc283b05fa7a749f064c6ec39">49c4488</a></td><td><code>Also defined this shortcut in GRSEvaluationPolynomialEncoder</code></td></tr></table>




---

archive/issue_events_180326.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/dlucas",
    "created_at": "2016-02-22T11:59:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180326"
}
```



---

archive/issue_comments_290539.json:
```json
{
    "body": "<a id='comment:3'></a>\n`E(message)` now defaults to `E.encode(message)`.\nI added a few lines to the documentation of `encode` in `encoder.py` and in `GRSEvaluationPolynomialEncoder` to highlight this shortcut.\n\nSetting this as `needs_review`.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02c1f6de5300fdd703a1f3e07a3a828c501012c7\">02c1f6d</a></td><td><code>Shortcut for method encode</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49c448862fa2c32dc283b05fa7a749f064c6ec39\">49c4488</a></td><td><code>Also defined this shortcut in GRSEvaluationPolynomialEncoder</code></td></tr></table>\n",
    "created_at": "2016-02-22T11:59:26Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290539",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:3'></a>
`E(message)` now defaults to `E.encode(message)`.
I added a few lines to the documentation of `encode` in `encoder.py` and in `GRSEvaluationPolynomialEncoder` to highlight this shortcut.

Setting this as `needs_review`.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02c1f6de5300fdd703a1f3e07a3a828c501012c7">02c1f6d</a></td><td><code>Shortcut for method encode</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49c448862fa2c32dc283b05fa7a749f064c6ec39">49c4488</a></td><td><code>Also defined this shortcut in GRSEvaluationPolynomialEncoder</code></td></tr></table>




---

archive/issue_comments_290540.json:
```json
{
    "body": "**Author:** David Lucas",
    "created_at": "2016-02-22T11:59:26Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290540",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

**Author:** David Lucas



---

archive/issue_events_180327.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/dlucas",
    "created_at": "2016-02-22T16:14:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "label": "good first issue",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180327"
}
```



---

archive/issue_comments_290541.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de7193894303ef9945d1f152b80cb46b9987affc\">de71938</a></td><td><code>Same shortcut for C(m)</code></td></tr></table>\n",
    "created_at": "2016-02-25T15:52:35Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290541",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de7193894303ef9945d1f152b80cb46b9987affc">de71938</a></td><td><code>Same shortcut for C(m)</code></td></tr></table>




---

archive/issue_comments_290542.json:
```json
{
    "body": "**Changing commit** from \"[49c448862fa2c32dc283b05fa7a749f064c6ec39](https://github.com/sagemath/sagetrac-mirror/commit/49c448862fa2c32dc283b05fa7a749f064c6ec39)\" to \"[de7193894303ef9945d1f152b80cb46b9987affc](https://github.com/sagemath/sagetrac-mirror/commit/de7193894303ef9945d1f152b80cb46b9987affc)\".",
    "created_at": "2016-02-25T15:52:35Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290542",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[49c448862fa2c32dc283b05fa7a749f064c6ec39](https://github.com/sagemath/sagetrac-mirror/commit/49c448862fa2c32dc283b05fa7a749f064c6ec39)" to "[de7193894303ef9945d1f152b80cb46b9987affc](https://github.com/sagemath/sagetrac-mirror/commit/de7193894303ef9945d1f152b80cb46b9987affc)".



---

archive/issue_comments_290543.json:
```json
{
    "body": "<a id='comment:6'></a>\nI added the same mechanism with codes: let `C` be a code, and `m` an element from the message space of the encoder `'encoder'`.\n\n`C(m, encoder_name='encoder')` is now a shortcut to `C.encode(m, encoder_name='encoder')`",
    "created_at": "2016-02-25T15:54:43Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290543",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:6'></a>
I added the same mechanism with codes: let `C` be a code, and `m` an element from the message space of the encoder `'encoder'`.

`C(m, encoder_name='encoder')` is now a shortcut to `C.encode(m, encoder_name='encoder')`



---

archive/issue_comments_290544.json:
```json
{
    "body": "<a id='comment:7'></a>\nThere's a doctest failing which indicates the test suite is broken for codes.\nThat's because in the test suite, there's an idempotency test for element construction.\n\nIt picks `c = C.an_element()` and then tries `C(c)`... Which of course fails in our case as `__call__` has been redefined as `encode` - and the input of encode cannot be an element of `C`.",
    "created_at": "2016-03-18T13:42:56Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290544",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:7'></a>
There's a doctest failing which indicates the test suite is broken for codes.
That's because in the test suite, there's an idempotency test for element construction.

It picks `c = C.an_element()` and then tries `C(c)`... Which of course fails in our case as `__call__` has been redefined as `encode` - and the input of encode cannot be an element of `C`.



---

archive/issue_events_180328.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/dlucas",
    "created_at": "2016-03-18T14:53:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180328"
}
```



---

archive/issue_events_180329.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/dlucas",
    "created_at": "2016-03-18T14:53:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "label": "invalid",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180329"
}
```



---

archive/issue_comments_290545.json:
```json
{
    "body": "<a id='comment:8'></a>\nBecause of the above, which is related to the way linear codes are set in the category framework, it seems impossible to do the proposed improvement.\n\nSetting this to invalid/won't fix.",
    "created_at": "2016-03-18T14:53:58Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290545",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:8'></a>
Because of the above, which is related to the way linear codes are set in the category framework, it seems impossible to do the proposed improvement.

Setting this to invalid/won't fix.



---

archive/issue_comments_290546.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-If `E` is an `Encoder` for a `LinearCode`, one can use `E.encode(message)`, where `message` is in the appropriate space. `E(message)` should default to the same behaviour.\n+If `E` is an `Encoder` for a `LinearCode` `C`, one can use `E.encode(message)`, where `message` is in the appropriate space. `E(message)` should default to the same behaviour. So should `C(message)`.\n+\n+Be aware that the category framework specifies that `C(c) = c` if `c in C`. This needs to be handled.\n``````\n",
    "created_at": "2016-03-31T12:51:36Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290546",
    "user": "https://github.com/johanrosenkilde"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-If `E` is an `Encoder` for a `LinearCode`, one can use `E.encode(message)`, where `message` is in the appropriate space. `E(message)` should default to the same behaviour.
+If `E` is an `Encoder` for a `LinearCode` `C`, one can use `E.encode(message)`, where `message` is in the appropriate space. `E(message)` should default to the same behaviour. So should `C(message)`.
+
+Be aware that the category framework specifies that `C(c) = c` if `c in C`. This needs to be handled.
``````




---

archive/issue_events_180330.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2016-03-31T12:51:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180330"
}
```



---

archive/issue_events_180331.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2016-03-31T12:51:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180331"
}
```



---

archive/issue_comments_290547.json:
```json
{
    "body": "<a id='comment:9'></a>\nThis issue is not a show-stopper: instead of `__call__` simply aliasing `self.encode`, it is a proper method which checks its input. If the input is a codeword, it returns that unchanged. If the input has the correct length of a message, return the encoded codeword, via `self.encode`. Otherwise, throw a `ValueError`.\n\nRe-opening.",
    "created_at": "2016-03-31T12:51:36Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290547",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:9'></a>
This issue is not a show-stopper: instead of `__call__` simply aliasing `self.encode`, it is a proper method which checks its input. If the input is a codeword, it returns that unchanged. If the input has the correct length of a message, return the encoded codeword, via `self.encode`. Otherwise, throw a `ValueError`.

Re-opening.



---

archive/issue_events_180332.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2016-03-31T12:51:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "rename": {
        "from": "`E(message)` for a linear code encoder `E` should encode `message`",
        "to": "`__call__(message)` on a linear code or encoder should return a codeword."
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180332"
}
```



---

archive/issue_events_180333.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2016-03-31T12:51:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180333"
}
```



---

archive/issue_comments_290548.json:
```json
{
    "body": "**Changing commit** from \"[de7193894303ef9945d1f152b80cb46b9987affc](https://github.com/sagemath/sagetrac-mirror/commit/de7193894303ef9945d1f152b80cb46b9987affc)\" to \"[872f5d79d4dc260c64ff1512aefaf796d6bc15a8](https://github.com/sagemath/sagetrac-mirror/commit/872f5d79d4dc260c64ff1512aefaf796d6bc15a8)\".",
    "created_at": "2016-03-31T14:25:46Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[de7193894303ef9945d1f152b80cb46b9987affc](https://github.com/sagemath/sagetrac-mirror/commit/de7193894303ef9945d1f152b80cb46b9987affc)" to "[872f5d79d4dc260c64ff1512aefaf796d6bc15a8](https://github.com/sagemath/sagetrac-mirror/commit/872f5d79d4dc260c64ff1512aefaf796d6bc15a8)".



---

archive/issue_comments_290549.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4cd4b266eff1b092aa112bd40539e62db053c54c\">4cd4b26</a></td><td><code>Merge branch 'develop' into shortcut_to_encode</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8d7b58bdbebafea8d7575ebc33530c180705e39\">e8d7b58</a></td><td><code>Merge branch 'develop' into shortcut_to_encode</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/872f5d79d4dc260c64ff1512aefaf796d6bc15a8\">872f5d7</a></td><td><code>Updated `__call__` method with a proper behaviour</code></td></tr></table>\n",
    "created_at": "2016-03-31T14:25:46Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4cd4b266eff1b092aa112bd40539e62db053c54c">4cd4b26</a></td><td><code>Merge branch 'develop' into shortcut_to_encode</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8d7b58bdbebafea8d7575ebc33530c180705e39">e8d7b58</a></td><td><code>Merge branch 'develop' into shortcut_to_encode</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/872f5d79d4dc260c64ff1512aefaf796d6bc15a8">872f5d7</a></td><td><code>Updated `__call__` method with a proper behaviour</code></td></tr></table>




---

archive/issue_events_180334.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/dlucas",
    "created_at": "2016-03-31T14:29:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180334"
}
```



---

archive/issue_events_180335.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/dlucas",
    "created_at": "2016-03-31T14:29:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180335"
}
```



---

archive/issue_comments_290550.json:
```json
{
    "body": "<a id='comment:11'></a>\nDone.\nExcept for the `ValueError`. If the input is not a codeword, it passes it to `encode` which does the check. As `encode` knows the message space of the encoder to use, it returns a nice error message which specifies the expected input (e.g. \"The value to encode must be in Vector space of dimension 4 over Finite Field of size 2\").\n\nMaybe leave this review for Daniel as he wanted to do it? I just Cc'd him on this ticket.",
    "created_at": "2016-03-31T14:29:38Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290550",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:11'></a>
Done.
Except for the `ValueError`. If the input is not a codeword, it passes it to `encode` which does the check. As `encode` knows the message space of the encoder to use, it returns a nice error message which specifies the expected input (e.g. "The value to encode must be in Vector space of dimension 4 over Finite Field of size 2").

Maybe leave this review for Daniel as he wanted to do it? I just Cc'd him on this ticket.



---

archive/issue_comments_290551.json:
```json
{
    "body": "<a id='comment:12'></a>\nHi, Maybe the check of whether the vector passed is a codeword or not can be done before passing it to the encode function. That way if a user means to pass a codeword rather than the message, and passed th wrong vector, he/she will be notified.",
    "created_at": "2016-04-01T11:40:51Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290551",
    "user": "https://trac.sagemath.org/admin/accounts/users/panda314"
}
```

<a id='comment:12'></a>
Hi, Maybe the check of whether the vector passed is a codeword or not can be done before passing it to the encode function. That way if a user means to pass a codeword rather than the message, and passed th wrong vector, he/she will be notified.



---

archive/issue_comments_290552.json:
```json
{
    "body": "<a id='comment:13'></a>\nDavid, didn't you accidentally put the Encoder-related code on the GRS encoder? It should be on the abstract class `Encoder`. Also, the check `if m in self` should be `if m in self.code()` on the Encoder. And your doc-test there doesn't test that method.\n\nReplying to [panda314](#comment%3A12):\n> Hi, Maybe the check of whether the vector passed is a codeword or not can be done before passing it to the encode function. That way if a user means to pass a codeword rather than the message, and passed th wrong vector, he/she will be notified. \n\n\nAs far as I can see, the check in `LinearCode` *does* check for code membership before passing it to the encoder.",
    "created_at": "2016-04-01T12:02:24Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290552",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:13'></a>
David, didn't you accidentally put the Encoder-related code on the GRS encoder? It should be on the abstract class `Encoder`. Also, the check `if m in self` should be `if m in self.code()` on the Encoder. And your doc-test there doesn't test that method.

Replying to [panda314](#comment%3A12):
> Hi, Maybe the check of whether the vector passed is a codeword or not can be done before passing it to the encode function. That way if a user means to pass a codeword rather than the message, and passed th wrong vector, he/she will be notified. 


As far as I can see, the check in `LinearCode` *does* check for code membership before passing it to the encoder.



---

archive/issue_comments_290553.json:
```json
{
    "body": "**Changing commit** from \"[872f5d79d4dc260c64ff1512aefaf796d6bc15a8](https://github.com/sagemath/sagetrac-mirror/commit/872f5d79d4dc260c64ff1512aefaf796d6bc15a8)\" to \"[92478fd38aa81b95324b2a3b4104416fcc068620](https://github.com/sagemath/sagetrac-mirror/commit/92478fd38aa81b95324b2a3b4104416fcc068620)\".",
    "created_at": "2016-04-01T12:15:14Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290553",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[872f5d79d4dc260c64ff1512aefaf796d6bc15a8](https://github.com/sagemath/sagetrac-mirror/commit/872f5d79d4dc260c64ff1512aefaf796d6bc15a8)" to "[92478fd38aa81b95324b2a3b4104416fcc068620](https://github.com/sagemath/sagetrac-mirror/commit/92478fd38aa81b95324b2a3b4104416fcc068620)".



---

archive/issue_comments_290554.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb813755bade865c2091931043665b8295a59359\">bb81375</a></td><td><code>Removed duplicated `__call__` method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92478fd38aa81b95324b2a3b4104416fcc068620\">92478fd</a></td><td><code>Better documentation and a new check for __call__</code></td></tr></table>\n",
    "created_at": "2016-04-01T12:15:14Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290554",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb813755bade865c2091931043665b8295a59359">bb81375</a></td><td><code>Removed duplicated `__call__` method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92478fd38aa81b95324b2a3b4104416fcc068620">92478fd</a></td><td><code>Better documentation and a new check for __call__</code></td></tr></table>




---

archive/issue_comments_290555.json:
```json
{
    "body": "<a id='comment:15'></a>\nHello,\n\n> David, didn't you accidentally put the Encoder-related code on the GRS encoder? \n\n\nIndeed, I removed it.\n\n> It should be on the abstract class Encoder.\n\n\nShould it? IMHO, there's nothing elaborate to do for the encoder. If one creates a code `C` and an encoder `E` for `C`, and types `E(c)` for some `c`, if `c` does not belong to the message space of `E` it should fail. To me, the only purpose of an encoder is to transform elements of the message space into codeword. So if one passes an element which does not belong to the message space, failing makes sense.\n\n> As far as I can see, the check in LinearCode *does* check for code membership before passing it to the encoder.\n\n\nI think he meant if one tries to pass an element of the ambient space of the code which does not belong to the code. I added a check for that: as I cannot picture an encoder whose message space is the ambient space of the code, it makes sense to immediately reject vectors which are in the ambient space but not in the code, as it avoids calling `encode` and thus constructing an encoder for nothing.",
    "created_at": "2016-04-01T12:21:53Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290555",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:15'></a>
Hello,

> David, didn't you accidentally put the Encoder-related code on the GRS encoder? 


Indeed, I removed it.

> It should be on the abstract class Encoder.


Should it? IMHO, there's nothing elaborate to do for the encoder. If one creates a code `C` and an encoder `E` for `C`, and types `E(c)` for some `c`, if `c` does not belong to the message space of `E` it should fail. To me, the only purpose of an encoder is to transform elements of the message space into codeword. So if one passes an element which does not belong to the message space, failing makes sense.

> As far as I can see, the check in LinearCode *does* check for code membership before passing it to the encoder.


I think he meant if one tries to pass an element of the ambient space of the code which does not belong to the code. I added a check for that: as I cannot picture an encoder whose message space is the ambient space of the code, it makes sense to immediately reject vectors which are in the ambient space but not in the code, as it avoids calling `encode` and thus constructing an encoder for nothing.



---

archive/issue_comments_290556.json:
```json
{
    "body": "<a id='comment:16'></a>\n> Should it? IMHO, there's nothing elaborate to do for the encoder. If one creates a code `C` and an encoder `E` for `C`, and types `E(c)` for some `c`, if `c` does not belong to the message space of `E` it should fail. To me, the only purpose of an encoder is to transform elements of the message space into codeword. So if one passes an element which does not belong to the message space, failing makes sense.\n\n\nOh yeah, you're right. But this patch then still adds the alias `Encoder.__call__` as `Encoder.encode`, I presume?\n\n> I think he meant if one tries to pass an element of the ambient space of the code which does not belong to the code. I added a check for that: as I cannot picture an encoder whose message space is the ambient space of the code, it makes sense to immediately reject vectors which are in the ambient space but not in the code, as it avoids calling `encode` and thus constructing an encoder for nothing.\n\n\nHm, makes sense. You have a typo in the error message though (is -> it)",
    "created_at": "2016-04-01T12:34:00Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290556",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:16'></a>
> Should it? IMHO, there's nothing elaborate to do for the encoder. If one creates a code `C` and an encoder `E` for `C`, and types `E(c)` for some `c`, if `c` does not belong to the message space of `E` it should fail. To me, the only purpose of an encoder is to transform elements of the message space into codeword. So if one passes an element which does not belong to the message space, failing makes sense.


Oh yeah, you're right. But this patch then still adds the alias `Encoder.__call__` as `Encoder.encode`, I presume?

> I think he meant if one tries to pass an element of the ambient space of the code which does not belong to the code. I added a check for that: as I cannot picture an encoder whose message space is the ambient space of the code, it makes sense to immediately reject vectors which are in the ambient space but not in the code, as it avoids calling `encode` and thus constructing an encoder for nothing.


Hm, makes sense. You have a typo in the error message though (is -> it)



---

archive/issue_comments_290557.json:
```json
{
    "body": "**Changing commit** from \"[92478fd38aa81b95324b2a3b4104416fcc068620](https://github.com/sagemath/sagetrac-mirror/commit/92478fd38aa81b95324b2a3b4104416fcc068620)\" to \"[6b32cf00bc4edcbaf17654e5c3f9546914160140](https://github.com/sagemath/sagetrac-mirror/commit/6b32cf00bc4edcbaf17654e5c3f9546914160140)\".",
    "created_at": "2016-04-01T12:51:05Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[92478fd38aa81b95324b2a3b4104416fcc068620](https://github.com/sagemath/sagetrac-mirror/commit/92478fd38aa81b95324b2a3b4104416fcc068620)" to "[6b32cf00bc4edcbaf17654e5c3f9546914160140](https://github.com/sagemath/sagetrac-mirror/commit/6b32cf00bc4edcbaf17654e5c3f9546914160140)".



---

archive/issue_comments_290558.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7f075e7d5c3cf52b0888915025b92f1aa12e5a4\">f7f075e</a></td><td><code>Fixed typo in error message</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b32cf00bc4edcbaf17654e5c3f9546914160140\">6b32cf0</a></td><td><code>__call__ has been added for an encoder in grs.py</code></td></tr></table>\n",
    "created_at": "2016-04-01T12:51:05Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290558",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7f075e7d5c3cf52b0888915025b92f1aa12e5a4">f7f075e</a></td><td><code>Fixed typo in error message</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b32cf00bc4edcbaf17654e5c3f9546914160140">6b32cf0</a></td><td><code>__call__ has been added for an encoder in grs.py</code></td></tr></table>




---

archive/issue_comments_290559.json:
```json
{
    "body": "<a id='comment:18'></a>\n> Oh yeah, you're right. But this patch then still adds the alias Encoder.__call__ as Encoder.encode, I presume?\n\n\nIndeed. I fixed that.\n\n> Hm, makes sense. You have a typo in the error message though (is -> it)\n\n\nOops. Fixed too.",
    "created_at": "2016-04-01T12:52:16Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290559",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:18'></a>
> Oh yeah, you're right. But this patch then still adds the alias Encoder.__call__ as Encoder.encode, I presume?


Indeed. I fixed that.

> Hm, makes sense. You have a typo in the error message though (is -> it)


Oops. Fixed too.



---

archive/issue_comments_290560.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [dlucas](#comment%3A18):\n> > Oh yeah, you're right. But this patch then still adds the alias Encoder.__call__ as Encoder.encode, I presume?\n\n> \n> Indeed. I fixed that.\n\n\nYou added it to GRS, not to Encoder...",
    "created_at": "2016-04-01T13:02:31Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290560",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:19'></a>
Replying to [dlucas](#comment%3A18):
> > Oh yeah, you're right. But this patch then still adds the alias Encoder.__call__ as Encoder.encode, I presume?

> 
> Indeed. I fixed that.


You added it to GRS, not to Encoder...



---

archive/issue_comments_290561.json:
```json
{
    "body": "<a id='comment:20'></a>\n> You added it to GRS, not to Encoder...\n\n\nErr yes, because `encode` is overridden in the polynomial encoder for GRS codes.\nThe alias is already added to `encoder.py`, and `E(m)` encodes `m` if possible.",
    "created_at": "2016-04-01T13:13:48Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290561",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:20'></a>
> You added it to GRS, not to Encoder...


Err yes, because `encode` is overridden in the polynomial encoder for GRS codes.
The alias is already added to `encoder.py`, and `E(m)` encodes `m` if possible.



---

archive/issue_comments_290562.json:
```json
{
    "body": "<a id='comment:21'></a>\n> Err yes, because `encode` is overridden in the polynomial encoder for GRS codes.\n> The alias is already added to `encoder.py`, and `E(m)` encodes `m` if possible.\n\n\nOuch, that's a super-nasty trap! All encoders written in the future will fall into this!\n\nI vote for *not* defining `Encoder.__call__` as an alias, then, but instead rely on dynamic dispatch to avoid the trap:\n\n```\n    def __call__(self, m):\n        return self.encode(m)\n```",
    "created_at": "2016-04-01T13:50:08Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290562",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:21'></a>
> Err yes, because `encode` is overridden in the polynomial encoder for GRS codes.
> The alias is already added to `encoder.py`, and `E(m)` encodes `m` if possible.


Ouch, that's a super-nasty trap! All encoders written in the future will fall into this!

I vote for *not* defining `Encoder.__call__` as an alias, then, but instead rely on dynamic dispatch to avoid the trap:

```
    def __call__(self, m):
        return self.encode(m)
```



---

archive/issue_comments_290563.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce8d798c14b0e4e419a150cf4c14c5028354694f\">ce8d798</a></td><td><code>Rewrote `__call__` in encoder.py, which is now more generic</code></td></tr></table>\n",
    "created_at": "2016-04-01T14:07:18Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290563",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce8d798c14b0e4e419a150cf4c14c5028354694f">ce8d798</a></td><td><code>Rewrote `__call__` in encoder.py, which is now more generic</code></td></tr></table>




---

archive/issue_comments_290564.json:
```json
{
    "body": "**Changing commit** from \"[6b32cf00bc4edcbaf17654e5c3f9546914160140](https://github.com/sagemath/sagetrac-mirror/commit/6b32cf00bc4edcbaf17654e5c3f9546914160140)\" to \"[ce8d798c14b0e4e419a150cf4c14c5028354694f](https://github.com/sagemath/sagetrac-mirror/commit/ce8d798c14b0e4e419a150cf4c14c5028354694f)\".",
    "created_at": "2016-04-01T14:07:18Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290564",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6b32cf00bc4edcbaf17654e5c3f9546914160140](https://github.com/sagemath/sagetrac-mirror/commit/6b32cf00bc4edcbaf17654e5c3f9546914160140)" to "[ce8d798c14b0e4e419a150cf4c14c5028354694f](https://github.com/sagemath/sagetrac-mirror/commit/ce8d798c14b0e4e419a150cf4c14c5028354694f)".



---

archive/issue_comments_290565.json:
```json
{
    "body": "<a id='comment:23'></a>\n> I vote for *not* defining `Encoder.__call__` as an alias, then, but instead rely on dynamic dispatch to avoid the trap\n\n\nYes, it's a good idea. Done in the last commit.",
    "created_at": "2016-04-01T14:08:06Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290565",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:23'></a>
> I vote for *not* defining `Encoder.__call__` as an alias, then, but instead rely on dynamic dispatch to avoid the trap


Yes, it's a good idea. Done in the last commit.



---

archive/issue_comments_290566.json:
```json
{
    "body": "<a id='comment:24'></a>\nare the changes compiling? The copy of this branch is not compiling on my local pc (new to sage, am i missing something?). Here's the error:\nInternalError: Internal compiler error: 'cysignals/signals.pxi' not found\n\nDetailed message is,\n\nTraceback (most recent call last):\n\u00a0 File \"setup.py\", line 590, in <module>\n\u00a0\u00a0\u00a0 run_cythonize()\n\u00a0 File \"setup.py\", line 582, in run_cythonize\n\u00a0\u00a0\u00a0 'profile': profile,\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 758, in cythonize\n\u00a0\u00a0\u00a0 aliases=aliases)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 664, in create_extension_list\n\u00a0\u00a0\u00a0 kwds = deps.distutils_info(file, aliases, base).values\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 564, in distutils_info\n\u00a0\u00a0\u00a0 return (self.transitive_merge(filename, self.distutils_info0, DistutilsInfo.merge)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 574, in transitive_merge\n\u00a0\u00a0\u00a0 node, extract, merge, seen, {}, self.cimported_files)![0]\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 579, in transitive_merge_helper\n\u00a0\u00a0\u00a0 deps = extract(node)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 555, in distutils_info0\n\u00a0\u00a0\u00a0 externs = self.cimports_and_externs(filename)![1]\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Utils.py\", line 43, in wrapper\n\u00a0\u00a0\u00a0 res = cache[args] = f(self, *args)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 465, in cimports_and_externs\n\u00a0\u00a0\u00a0 for include in self.included_files(filename):\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Utils.py\", line 43, in wrapper\n\u00a0\u00a0\u00a0 res = cache[args] = f(self, *args)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py\", line 448, in included_files\n\u00a0\u00a0\u00a0 include_path = self.context.find_include_file(include, None)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Compiler/Main.py\", line 274, in find_include_file\n\u00a0\u00a0\u00a0 error(pos, \"'%s' not found\" % filename)\n\u00a0 File \"/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Compiler/Errors.py\", line 177, in error\n\u00a0\u00a0\u00a0 raise InternalError(message)\nInternalError: Internal compiler error: 'cysignals/signals.pxi' not found\n************************************************************************\nError building the Sage library\n************************************************************************\nmake: *** [sage] Error 1",
    "created_at": "2016-04-01T15:45:18Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290566",
    "user": "https://trac.sagemath.org/admin/accounts/users/panda314"
}
```

<a id='comment:24'></a>
are the changes compiling? The copy of this branch is not compiling on my local pc (new to sage, am i missing something?). Here's the error:
InternalError: Internal compiler error: 'cysignals/signals.pxi' not found

Detailed message is,

Traceback (most recent call last):
  File "setup.py", line 590, in <module>
    run_cythonize()
  File "setup.py", line 582, in run_cythonize
    'profile': profile,
  File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 758, in cythonize
    aliases=aliases)
  File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 664, in create_extension_list
    kwds = deps.distutils_info(file, aliases, base).values
  File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 564, in distutils_info
    return (self.transitive_merge(filename, self.distutils_info0, DistutilsInfo.merge)
  File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 574, in transitive_merge
    node, extract, merge, seen, {}, self.cimported_files)![0]
  File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 579, in transitive_merge_helper
    deps = extract(node)
  File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 555, in distutils_info0
    externs = self.cimports_and_externs(filename)![1]
  File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Utils.py", line 43, in wrapper
    res = cache[args] = f(self, *args)
  File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 465, in cimports_and_externs
    for include in self.included_files(filename):
  File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Utils.py", line 43, in wrapper
    res = cache[args] = f(self, *args)
  File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 448, in included_files
    include_path = self.context.find_include_file(include, None)
  File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Compiler/Main.py", line 274, in find_include_file
    error(pos, "'%s' not found" % filename)
  File "/home/panda/sage/local/lib/python2.7/site-packages/Cython-0.23.3-py2.7-linux-x86_64.egg/Cython/Compiler/Errors.py", line 177, in error
    raise InternalError(message)
InternalError: Internal compiler error: 'cysignals/signals.pxi' not found
************************************************************************
Error building the Sage library
************************************************************************
make: *** [sage] Error 1



---

archive/issue_comments_290567.json:
```json
{
    "body": "<a id='comment:25'></a>\nIt's compiling on my side. According to the error report you sent, a file is missing on your side.\nI guess you'll have to download Sage again and recompile it...",
    "created_at": "2016-04-01T16:19:45Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290567",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:25'></a>
It's compiling on my side. According to the error report you sent, a file is missing on your side.
I guess you'll have to download Sage again and recompile it...



---

archive/issue_comments_290568.json:
```json
{
    "body": "**Changing branch** from \"[u/dlucas/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/shortcut_to_encode)\" to \"[u/danielaugot/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/danielaugot/shortcut_to_encode)\".",
    "created_at": "2016-08-24T10:08:15Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290568",
    "user": "https://trac.sagemath.org/admin/accounts/users/danielaugot"
}
```

**Changing branch** from "[u/dlucas/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/shortcut_to_encode)" to "[u/danielaugot/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/danielaugot/shortcut_to_encode)".



---

archive/issue_comments_290569.json:
```json
{
    "body": "**Changing commit** from \"[ce8d798c14b0e4e419a150cf4c14c5028354694f](https://github.com/sagemath/sagetrac-mirror/commit/ce8d798c14b0e4e419a150cf4c14c5028354694f)\" to \"[2fa1f175383fcf4ffd33166ce07d36b0db5c4a97](https://github.com/sagemath/sagetrac-mirror/commit/2fa1f175383fcf4ffd33166ce07d36b0db5c4a97)\".",
    "created_at": "2016-08-24T10:10:25Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290569",
    "user": "https://trac.sagemath.org/admin/accounts/users/danielaugot"
}
```

**Changing commit** from "[ce8d798c14b0e4e419a150cf4c14c5028354694f](https://github.com/sagemath/sagetrac-mirror/commit/ce8d798c14b0e4e419a150cf4c14c5028354694f)" to "[2fa1f175383fcf4ffd33166ce07d36b0db5c4a97](https://github.com/sagemath/sagetrac-mirror/commit/2fa1f175383fcf4ffd33166ce07d36b0db5c4a97)".



---

archive/issue_comments_290570.json:
```json
{
    "body": "<a id='comment:27'></a>\nI used the terminology \"ambient space\" in the doc string, to avoid being specific in details. Daniel\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fa1f175383fcf4ffd33166ce07d36b0db5c4a97\">2fa1f17</a></td><td><code>Better doc string for __call__</code></td></tr></table>\n",
    "created_at": "2016-08-24T10:10:25Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290570",
    "user": "https://trac.sagemath.org/admin/accounts/users/danielaugot"
}
```

<a id='comment:27'></a>
I used the terminology "ambient space" in the doc string, to avoid being specific in details. Daniel

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fa1f175383fcf4ffd33166ce07d36b0db5c4a97">2fa1f17</a></td><td><code>Better doc string for __call__</code></td></tr></table>




---

archive/issue_comments_290571.json:
```json
{
    "body": "**Changing commit** from \"[2fa1f175383fcf4ffd33166ce07d36b0db5c4a97](https://github.com/sagemath/sagetrac-mirror/commit/2fa1f175383fcf4ffd33166ce07d36b0db5c4a97)\" to \"[f25413e058c81e9dbaafa60dfbccc9876301d42d](https://github.com/sagemath/sagetrac-mirror/commit/f25413e058c81e9dbaafa60dfbccc9876301d42d)\".",
    "created_at": "2016-08-24T18:04:45Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290571",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2fa1f175383fcf4ffd33166ce07d36b0db5c4a97](https://github.com/sagemath/sagetrac-mirror/commit/2fa1f175383fcf4ffd33166ce07d36b0db5c4a97)" to "[f25413e058c81e9dbaafa60dfbccc9876301d42d](https://github.com/sagemath/sagetrac-mirror/commit/f25413e058c81e9dbaafa60dfbccc9876301d42d)".



---

archive/issue_comments_290572.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f25413e058c81e9dbaafa60dfbccc9876301d42d\">f25413e</a></td><td><code>Merge branch 'u/danielaugot/shortcut_to_encode' of git://trac.sagemath.org/sage into 20087/shortcut_to_encode</code></td></tr></table>\n",
    "created_at": "2016-08-24T18:04:45Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290572",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f25413e058c81e9dbaafa60dfbccc9876301d42d">f25413e</a></td><td><code>Merge branch 'u/danielaugot/shortcut_to_encode' of git://trac.sagemath.org/sage into 20087/shortcut_to_encode</code></td></tr></table>




---

archive/issue_comments_290573.json:
```json
{
    "body": "**Changing commit** from \"[f25413e058c81e9dbaafa60dfbccc9876301d42d](https://github.com/sagemath/sagetrac-mirror/commit/f25413e058c81e9dbaafa60dfbccc9876301d42d)\" to \"[3ec380cecd6657237c739a1baddeef0ee1126bb4](https://github.com/sagemath/sagetrac-mirror/commit/3ec380cecd6657237c739a1baddeef0ee1126bb4)\".",
    "created_at": "2016-08-24T18:56:40Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290573",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f25413e058c81e9dbaafa60dfbccc9876301d42d](https://github.com/sagemath/sagetrac-mirror/commit/f25413e058c81e9dbaafa60dfbccc9876301d42d)" to "[3ec380cecd6657237c739a1baddeef0ee1126bb4](https://github.com/sagemath/sagetrac-mirror/commit/3ec380cecd6657237c739a1baddeef0ee1126bb4)".



---

archive/issue_comments_290574.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ec380cecd6657237c739a1baddeef0ee1126bb4\">3ec380c</a></td><td><code>fixed the docstring to match the ErrorValue</code></td></tr></table>\n",
    "created_at": "2016-08-24T18:56:40Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290574",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ec380cecd6657237c739a1baddeef0ee1126bb4">3ec380c</a></td><td><code>fixed the docstring to match the ErrorValue</code></td></tr></table>




---

archive/issue_comments_290575.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fe5d5bcdb083e80d7b09122a5d021a83dbfa639\">1fe5d5b</a></td><td><code>easier to understand control structure using if-then-else</code></td></tr></table>\n",
    "created_at": "2016-08-24T19:03:25Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290575",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fe5d5bcdb083e80d7b09122a5d021a83dbfa639">1fe5d5b</a></td><td><code>easier to understand control structure using if-then-else</code></td></tr></table>




---

archive/issue_comments_290576.json:
```json
{
    "body": "**Changing commit** from \"[3ec380cecd6657237c739a1baddeef0ee1126bb4](https://github.com/sagemath/sagetrac-mirror/commit/3ec380cecd6657237c739a1baddeef0ee1126bb4)\" to \"[1fe5d5bcdb083e80d7b09122a5d021a83dbfa639](https://github.com/sagemath/sagetrac-mirror/commit/1fe5d5bcdb083e80d7b09122a5d021a83dbfa639)\".",
    "created_at": "2016-08-24T19:03:25Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290576",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3ec380cecd6657237c739a1baddeef0ee1126bb4](https://github.com/sagemath/sagetrac-mirror/commit/3ec380cecd6657237c739a1baddeef0ee1126bb4)" to "[1fe5d5bcdb083e80d7b09122a5d021a83dbfa639](https://github.com/sagemath/sagetrac-mirror/commit/1fe5d5bcdb083e80d7b09122a5d021a83dbfa639)".



---

archive/issue_comments_290577.json:
```json
{
    "body": "**Changing branch** from \"[u/danielaugot/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/danielaugot/shortcut_to_encode)\" to \"[u/jsrn/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/jsrn/shortcut_to_encode)\".",
    "created_at": "2016-09-12T09:02:45Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290577",
    "user": "https://github.com/johanrosenkilde"
}
```

**Changing branch** from "[u/danielaugot/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/danielaugot/shortcut_to_encode)" to "[u/jsrn/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/jsrn/shortcut_to_encode)".



---

archive/issue_comments_290578.json:
```json
{
    "body": "<a id='comment:32'></a>\nI mistakenly pushed another branch on top of this one. I've reverted it now -- sorry for the noise.",
    "created_at": "2016-09-12T09:09:30Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290578",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:32'></a>
I mistakenly pushed another branch on top of this one. I've reverted it now -- sorry for the noise.



---

archive/issue_comments_290579.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"rd3\".",
    "created_at": "2017-02-07T09:18:29Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290579",
    "user": "https://github.com/ClementPernet"
}
```

**Changing keywords** from "" to "rd3".



---

archive/issue_comments_290580.json:
```json
{
    "body": "<a id='comment:33'></a>\nDoc string of the `__call__` method of encoder (encoder.py:187) should test whether `E(p)` works not `E.encode(p)`.",
    "created_at": "2017-02-07T09:18:29Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290580",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:33'></a>
Doc string of the `__call__` method of encoder (encoder.py:187) should test whether `E(p)` works not `E.encode(p)`.



---

archive/issue_comments_290581.json:
```json
{
    "body": "**Reviewer:** Cl\u00e9ment Pernet",
    "created_at": "2017-02-07T09:18:29Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290581",
    "user": "https://github.com/ClementPernet"
}
```

**Reviewer:** Clément Pernet



---

archive/issue_comments_290582.json:
```json
{
    "body": "**Changing branch** from \"[u/jsrn/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/jsrn/shortcut_to_encode)\" to \"[u/cpernet/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/shortcut_to_encode)\".",
    "created_at": "2017-02-07T09:21:04Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290582",
    "user": "https://github.com/ClementPernet"
}
```

**Changing branch** from "[u/jsrn/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/jsrn/shortcut_to_encode)" to "[u/cpernet/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/shortcut_to_encode)".



---

archive/issue_comments_290583.json:
```json
{
    "body": "**Changing commit** from \"[1fe5d5bcdb083e80d7b09122a5d021a83dbfa639](https://github.com/sagemath/sagetrac-mirror/commit/1fe5d5bcdb083e80d7b09122a5d021a83dbfa639)\" to \"[8ba64ee314241b1c905343eefa87dd694f13c8e0](https://github.com/sagemath/sagetrac-mirror/commit/8ba64ee314241b1c905343eefa87dd694f13c8e0)\".",
    "created_at": "2017-02-07T09:34:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290583",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1fe5d5bcdb083e80d7b09122a5d021a83dbfa639](https://github.com/sagemath/sagetrac-mirror/commit/1fe5d5bcdb083e80d7b09122a5d021a83dbfa639)" to "[8ba64ee314241b1c905343eefa87dd694f13c8e0](https://github.com/sagemath/sagetrac-mirror/commit/8ba64ee314241b1c905343eefa87dd694f13c8e0)".



---

archive/issue_comments_290584.json:
```json
{
    "body": "<a id='comment:35'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ba64ee314241b1c905343eefa87dd694f13c8e0\">8ba64ee</a></td><td><code>add missing doctest for C(word)</code></td></tr></table>\n",
    "created_at": "2017-02-07T09:34:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290584",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ba64ee314241b1c905343eefa87dd694f13c8e0">8ba64ee</a></td><td><code>add missing doctest for C(word)</code></td></tr></table>




---

archive/issue_events_180336.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2017-02-07T09:36:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180336"
}
```



---

archive/issue_events_180337.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2017-02-07T09:36:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180337"
}
```



---

archive/issue_comments_290585.json:
```json
{
    "body": "<a id='comment:36'></a>\nIt's all good, after the two minor docstring edits that I've pushed to the ticket. Positive review.",
    "created_at": "2017-02-07T09:36:16Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290585",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:36'></a>
It's all good, after the two minor docstring edits that I've pushed to the ticket. Positive review.



---

archive/issue_events_180338.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2017-02-07T09:36:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180338"
}
```



---

archive/issue_events_180339.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2017-02-07T09:36:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180339"
}
```



---

archive/issue_comments_290586.json:
```json
{
    "body": "**Changing branch** from \"[u/cpernet/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/shortcut_to_encode)\" to \"[8ba64ee314241b1c905343eefa87dd694f13c8e0](https://github.com/sagemath/sagetrac-mirror/commit/8ba64ee314241b1c905343eefa87dd694f13c8e0)\".",
    "created_at": "2017-02-08T22:48:53Z",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20087#issuecomment-290586",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/cpernet/shortcut_to_encode](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/shortcut_to_encode)" to "[8ba64ee314241b1c905343eefa87dd694f13c8e0](https://github.com/sagemath/sagetrac-mirror/commit/8ba64ee314241b1c905343eefa87dd694f13c8e0)".



---

archive/issue_events_180340.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-08T22:48:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180340"
}
```



---

archive/issue_events_180341.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9d659d9fe54e07f2a458b17b2f7dcf61b6dbfd07",
    "created_at": "2017-02-08T22:48:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20087",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20087#event-180341"
}
```
