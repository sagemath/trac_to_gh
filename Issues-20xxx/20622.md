# Issue 20622: Potential refactoring of the species code

archive/issues_020385.json:
```json
{
    "assignees": [],
    "body": "The branch attached to this ticket propose a refactoring of the species code by Jean-Baptiste Priez\n\nSee src/sage/combinat/species2.\n\nCC:  @tscrim @fchapoton\n\nKeywords: **species, LazyPowerSeries**\n\nBranch/Commit: **[public/combinat/species-refactoring](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/species-refactoring) @ [4bdf1cb](https://github.com/sagemath/sagetrac-mirror/commit/4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa)**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20622_\n\n",
    "created_at": "2016-05-18T15:06:39Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid",
        "https://github.com/sagemath/sage/labels/needs%20review"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Potential refactoring of the species code",
    "type": "issue",
    "updated_at": "2022-10-28T06:50:53Z",
    "url": "https://github.com/sagemath/sage/issues/20622",
    "user": "https://github.com/nthiery"
}
```
The branch attached to this ticket propose a refactoring of the species code by Jean-Baptiste Priez

See src/sage/combinat/species2.

CC:  @tscrim @fchapoton

Keywords: **species, LazyPowerSeries**

Branch/Commit: **[public/combinat/species-refactoring](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/species-refactoring) @ [4bdf1cb](https://github.com/sagemath/sagetrac-mirror/commit/4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa)**

_Issue created by migration from https://trac.sagemath.org/ticket/20622_





---

archive/issue_events_272561.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2016-05-18T15:06:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-272561"
}
```



---

archive/issue_events_272562.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2016-05-18T15:06:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-272562"
}
```



---

archive/issue_events_272563.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2016-05-18T15:06:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-272563"
}
```



---

archive/issue_events_272564.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2016-05-18T15:06:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-272564"
}
```



---

archive/issue_comments_300787.json:
```json
{
    "body": "Branch: **[public/combinat/species-refactoring](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/species-refactoring)**",
    "created_at": "2016-05-18T15:07:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300787",
    "user": "https://github.com/nthiery"
}
```

Branch: **[public/combinat/species-refactoring](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/species-refactoring)**



---

archive/issue_comments_300788.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nThis is the original branch https://github.com/sagemath/sagetrac-mirror/commits/u/elixyre/species, with additional comments we added while sitting side by side.\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df98baf197b944942b2c7c10b0fa5a8224ea7ae7\">df98baf</a></td><td><code>ticket species : fix valuation of addition</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2234aae62eb531377db4ba16d8a5ff407103d79f\">2234aae</a></td><td><code>ticket species: fix distributivity of product of cis</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1bb5eddf0c7ff5965e01464ad6630219aa34f6d\">e1bb5ed</a></td><td><code>ticket species: remove a print</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28ad5ce9523adec697cb900134be820122e1a6d6\">28ad5ce</a></td><td><code>ticket species: fix product of formal power series</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6eaa5d477afed83b708c1e5bb222859e1ee0f5ca\">6eaa5d4</a></td><td><code>ticket species: fix species (product of formal series)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2dfcd85643ee822eccded29b260b3c152aaa4ed6\">2dfcd85</a></td><td><code>ticket species: add cycles index series of endofunctions species</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55aba79ed3d54bd7cf0236234830a5f28d388ed9\">55aba79</a></td><td><code>ticket species: fix some bug... (there is still some problem with ogs)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32a263b2464811474df910e8b425d3e7dd340136\">32a263b</a></td><td><code>ticket species: fix the valuation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd86a8f218feb4f032fbb1228bf3681e591a1212\">dd86a8f</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe\">b38a5c0</a></td><td><code>Added comments while discussing the code with Jean-Baptiste</code></td></tr></table>\n",
    "created_at": "2016-05-18T15:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300788",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:2" align="right">Comment 2</div>

This is the original branch https://github.com/sagemath/sagetrac-mirror/commits/u/elixyre/species, with additional comments we added while sitting side by side.

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df98baf197b944942b2c7c10b0fa5a8224ea7ae7">df98baf</a></td><td><code>ticket species : fix valuation of addition</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2234aae62eb531377db4ba16d8a5ff407103d79f">2234aae</a></td><td><code>ticket species: fix distributivity of product of cis</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1bb5eddf0c7ff5965e01464ad6630219aa34f6d">e1bb5ed</a></td><td><code>ticket species: remove a print</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28ad5ce9523adec697cb900134be820122e1a6d6">28ad5ce</a></td><td><code>ticket species: fix product of formal power series</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6eaa5d477afed83b708c1e5bb222859e1ee0f5ca">6eaa5d4</a></td><td><code>ticket species: fix species (product of formal series)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2dfcd85643ee822eccded29b260b3c152aaa4ed6">2dfcd85</a></td><td><code>ticket species: add cycles index series of endofunctions species</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55aba79ed3d54bd7cf0236234830a5f28d388ed9">55aba79</a></td><td><code>ticket species: fix some bug... (there is still some problem with ogs)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32a263b2464811474df910e8b425d3e7dd340136">32a263b</a></td><td><code>ticket species: fix the valuation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd86a8f218feb4f032fbb1228bf3681e591a1212">dd86a8f</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe">b38a5c0</a></td><td><code>Added comments while discussing the code with Jean-Baptiste</code></td></tr></table>




---

archive/issue_comments_300789.json:
```json
{
    "body": "Commit: **[b38a5c0](https://github.com/sagemath/sagetrac-mirror/commit/b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe)**",
    "created_at": "2016-05-18T15:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300789",
    "user": "https://github.com/nthiery"
}
```

Commit: **[b38a5c0](https://github.com/sagemath/sagetrac-mirror/commit/b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe)**



---

archive/issue_comments_300790.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057\">85d9cf3</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr></table>\n",
    "created_at": "2016-05-18T15:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300790",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057">85d9cf3</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr></table>




---

archive/issue_comments_300791.json:
```json
{
    "body": "Changed commit from **[b38a5c0](https://github.com/sagemath/sagetrac-mirror/commit/b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe)** to **[85d9cf3](https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057)**",
    "created_at": "2016-05-18T15:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300791",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b38a5c0](https://github.com/sagemath/sagetrac-mirror/commit/b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe)** to **[85d9cf3](https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057)**



---

archive/issue_comments_300792.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n The branch attached to this ticket propose a refactoring of the species code by Jean-Baptiste Priez\n+\n+See src/sage/combinat/species2.\n``````\n",
    "created_at": "2016-05-18T15:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300792",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 The branch attached to this ticket propose a refactoring of the species code by Jean-Baptiste Priez
+
+See src/sage/combinat/species2.
``````




---

archive/issue_comments_300793.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057\">85d9cf3</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr></table>\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057\">85d9cf3</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr></table>\n",
    "created_at": "2016-05-18T15:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300793",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:4" align="right">Comment 4</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057">85d9cf3</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr></table>

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057">85d9cf3</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr></table>




---

archive/issue_comments_300794.json:
```json
{
    "body": "Changed commit from **[85d9cf3](https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057)** to **[4bdf1cb](https://github.com/sagemath/sagetrac-mirror/commit/4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa)**",
    "created_at": "2020-11-01T10:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300794",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[85d9cf3](https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057)** to **[4bdf1cb](https://github.com/sagemath/sagetrac-mirror/commit/4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa)**



---

archive/issue_comments_300795.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa\">4bdf1cb</a></td><td><code>Merge branch 'develop' into t/20622/public/combinat/species-refactoring</code></td></tr></table>\n",
    "created_at": "2020-11-01T10:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300795",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa">4bdf1cb</a></td><td><code>Merge branch 'develop' into t/20622/public/combinat/species-refactoring</code></td></tr></table>




---

archive/issue_comments_300796.json:
```json
{
    "body": "Changed keywords from none to **species, LazyPowerSeries**",
    "created_at": "2022-09-27T21:01:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300796",
    "user": "https://github.com/mantepse"
}
```

Changed keywords from none to **species, LazyPowerSeries**



---

archive/issue_events_272565.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-10-17T11:43:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-272565"
}
```



---

archive/issue_events_272566.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-10-17T11:43:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-272566"
}
```



---

archive/issue_events_272567.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-10-17T11:43:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-272567"
}
```



---

archive/issue_comments_300797.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI think we can close this, since the new `LazyPowerSeries` code has been merged.",
    "created_at": "2022-10-17T11:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300797",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:7" align="right">Comment 7</div>

I think we can close this, since the new `LazyPowerSeries` code has been merged.



---

archive/issue_events_272568.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-10-17T11:43:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-272568"
}
```



---

archive/issue_comments_300798.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nPossibly, but there might be some other refactoring independent of the power series stuff that could be desired. It would be good if there was a little bit more information in this regard.",
    "created_at": "2022-10-28T06:50:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300798",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">Comment 8</div>

Possibly, but there might be some other refactoring independent of the power series stuff that could be desired. It would be good if there was a little bit more information in this regard.
