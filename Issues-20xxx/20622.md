# Issue 20622: Potential refactoring of the species code

archive/issues_020385.json:
```json
{
    "assignees": [],
    "body": "The branch attached to this ticket propose a refactoring of the species code by Jean-Baptiste Priez\n\nSee src/sage/combinat/species2.\n\n**CC:**  @tscrim @fchapoton\n\n**Keywords:** species, LazyPowerSeries\n\n**Branch:** [public/combinat/species-refactoring](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/species-refactoring)\n\n**Commit:** [4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa](https://github.com/sagemath/sagetrac-mirror/commit/4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa)\n\nIssue created by migration from https://trac.sagemath.org/ticket/20622\n\n",
    "created_at": "2016-05-18T15:06:39Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20review",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Potential refactoring of the species code",
    "type": "issue",
    "updated_at": "2022-10-28T06:50:53Z",
    "url": "https://github.com/sagemath/sage/issues/20622",
    "user": "https://github.com/nthiery"
}
```
The branch attached to this ticket propose a refactoring of the species code by Jean-Baptiste Priez

See src/sage/combinat/species2.

**CC:**  @tscrim @fchapoton

**Keywords:** species, LazyPowerSeries

**Branch:** [public/combinat/species-refactoring](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/species-refactoring)

**Commit:** [4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa](https://github.com/sagemath/sagetrac-mirror/commit/4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa)

Issue created by migration from https://trac.sagemath.org/ticket/20622





---

archive/issue_events_251079.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2016-05-18T15:06:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "08517b",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-251079"
}
```



---

archive/issue_events_251080.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2016-05-18T15:06:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-251080"
}
```



---

archive/issue_events_251081.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2016-05-18T15:06:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "008080",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-251081"
}
```



---

archive/issue_comments_300713.json:
```json
{
    "body": "**Branch:** [public/combinat/species-refactoring](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/species-refactoring)",
    "created_at": "2016-05-18T15:07:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300713",
    "user": "https://github.com/nthiery"
}
```

**Branch:** [public/combinat/species-refactoring](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/species-refactoring)



---

archive/issue_comments_300714.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis is the original branch https://github.com/sagemath/sagetrac-mirror/commits/u/elixyre/species, with additional comments we added while sitting side by side.\n\n---\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df98baf197b944942b2c7c10b0fa5a8224ea7ae7\">df98baf</a></td><td><code>ticket species : fix valuation of addition</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2234aae62eb531377db4ba16d8a5ff407103d79f\">2234aae</a></td><td><code>ticket species: fix distributivity of product of cis</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1bb5eddf0c7ff5965e01464ad6630219aa34f6d\">e1bb5ed</a></td><td><code>ticket species: remove a print</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28ad5ce9523adec697cb900134be820122e1a6d6\">28ad5ce</a></td><td><code>ticket species: fix product of formal power series</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6eaa5d477afed83b708c1e5bb222859e1ee0f5ca\">6eaa5d4</a></td><td><code>ticket species: fix species (product of formal series)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2dfcd85643ee822eccded29b260b3c152aaa4ed6\">2dfcd85</a></td><td><code>ticket species: add cycles index series of endofunctions species</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55aba79ed3d54bd7cf0236234830a5f28d388ed9\">55aba79</a></td><td><code>ticket species: fix some bug... (there is still some problem with ogs)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32a263b2464811474df910e8b425d3e7dd340136\">32a263b</a></td><td><code>ticket species: fix the valuation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd86a8f218feb4f032fbb1228bf3681e591a1212\">dd86a8f</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe\">b38a5c0</a></td><td><code>Added comments while discussing the code with Jean-Baptiste</code></td></tr></table>\n",
    "created_at": "2016-05-18T15:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300714",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:2'></a>
This is the original branch https://github.com/sagemath/sagetrac-mirror/commits/u/elixyre/species, with additional comments we added while sitting side by side.

---
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df98baf197b944942b2c7c10b0fa5a8224ea7ae7">df98baf</a></td><td><code>ticket species : fix valuation of addition</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2234aae62eb531377db4ba16d8a5ff407103d79f">2234aae</a></td><td><code>ticket species: fix distributivity of product of cis</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1bb5eddf0c7ff5965e01464ad6630219aa34f6d">e1bb5ed</a></td><td><code>ticket species: remove a print</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28ad5ce9523adec697cb900134be820122e1a6d6">28ad5ce</a></td><td><code>ticket species: fix product of formal power series</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6eaa5d477afed83b708c1e5bb222859e1ee0f5ca">6eaa5d4</a></td><td><code>ticket species: fix species (product of formal series)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2dfcd85643ee822eccded29b260b3c152aaa4ed6">2dfcd85</a></td><td><code>ticket species: add cycles index series of endofunctions species</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55aba79ed3d54bd7cf0236234830a5f28d388ed9">55aba79</a></td><td><code>ticket species: fix some bug... (there is still some problem with ogs)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32a263b2464811474df910e8b425d3e7dd340136">32a263b</a></td><td><code>ticket species: fix the valuation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd86a8f218feb4f032fbb1228bf3681e591a1212">dd86a8f</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe">b38a5c0</a></td><td><code>Added comments while discussing the code with Jean-Baptiste</code></td></tr></table>




---

archive/issue_comments_300715.json:
```json
{
    "body": "**Commit:** [b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe](https://github.com/sagemath/sagetrac-mirror/commit/b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe)",
    "created_at": "2016-05-18T15:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300715",
    "user": "https://github.com/nthiery"
}
```

**Commit:** [b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe](https://github.com/sagemath/sagetrac-mirror/commit/b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe)



---

archive/issue_comments_300716.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057\">85d9cf3</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr></table>\n",
    "created_at": "2016-05-18T15:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300716",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057">85d9cf3</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr></table>




---

archive/issue_comments_300717.json:
```json
{
    "body": "**Changing commit** from \"[b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe](https://github.com/sagemath/sagetrac-mirror/commit/b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe)\" to \"[85d9cf3577693b28c64aed5d0bc1ea6d592f2057](https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057)\".",
    "created_at": "2016-05-18T15:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300717",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe](https://github.com/sagemath/sagetrac-mirror/commit/b38a5c05ff79ff6a69788a8a8c4e0c44926dbffe)" to "[85d9cf3577693b28c64aed5d0bc1ea6d592f2057](https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057)".



---

archive/issue_comments_300718.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n The branch attached to this ticket propose a refactoring of the species code by Jean-Baptiste Priez\n+\n+See src/sage/combinat/species2.\n``````\n",
    "created_at": "2016-05-18T15:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300718",
    "user": "https://github.com/nthiery"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 The branch attached to this ticket propose a refactoring of the species code by Jean-Baptiste Priez
+
+See src/sage/combinat/species2.
``````




---

archive/issue_comments_300719.json:
```json
{
    "body": "<a id='comment:4'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057\">85d9cf3</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr></table>\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057\">85d9cf3</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr></table>\n",
    "created_at": "2016-05-18T15:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300719",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:4'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057">85d9cf3</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr></table>

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057">85d9cf3</a></td><td><code>Merge branch 'develop' into combinat/species</code></td></tr></table>




---

archive/issue_comments_300720.json:
```json
{
    "body": "**Changing commit** from \"[85d9cf3577693b28c64aed5d0bc1ea6d592f2057](https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057)\" to \"[4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa](https://github.com/sagemath/sagetrac-mirror/commit/4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa)\".",
    "created_at": "2020-11-01T10:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300720",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[85d9cf3577693b28c64aed5d0bc1ea6d592f2057](https://github.com/sagemath/sagetrac-mirror/commit/85d9cf3577693b28c64aed5d0bc1ea6d592f2057)" to "[4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa](https://github.com/sagemath/sagetrac-mirror/commit/4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa)".



---

archive/issue_comments_300721.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa\">4bdf1cb</a></td><td><code>Merge branch 'develop' into t/20622/public/combinat/species-refactoring</code></td></tr></table>\n",
    "created_at": "2020-11-01T10:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300721",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bdf1cbbb93de9376cbd75c9e6488d6b3aa8ebfa">4bdf1cb</a></td><td><code>Merge branch 'develop' into t/20622/public/combinat/species-refactoring</code></td></tr></table>




---

archive/issue_comments_300722.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"species, LazyPowerSeries\".",
    "created_at": "2022-09-27T21:01:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300722",
    "user": "https://github.com/mantepse"
}
```

**Changing keywords** from "" to "species, LazyPowerSeries".



---

archive/issue_events_251082.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-10-17T11:43:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-251082"
}
```



---

archive/issue_comments_300723.json:
```json
{
    "body": "<a id='comment:7'></a>\nI think we can close this, since the new `LazyPowerSeries` code has been merged.",
    "created_at": "2022-10-17T11:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300723",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:7'></a>
I think we can close this, since the new `LazyPowerSeries` code has been merged.



---

archive/issue_events_251083.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-10-17T11:43:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20622#event-251083"
}
```



---

archive/issue_comments_300724.json:
```json
{
    "body": "<a id='comment:8'></a>\nPossibly, but there might be some other refactoring independent of the power series stuff that could be desired. It would be good if there was a little bit more information in this regard.",
    "created_at": "2022-10-28T06:50:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20622#issuecomment-300724",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Possibly, but there might be some other refactoring independent of the power series stuff that could be desired. It would be good if there was a little bit more information in this regard.
