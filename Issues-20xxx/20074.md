# Issue 20074: QQbar cleaning 2

archive/issues_019837.json:
```json
{
    "body": "We further simplify QQbar code by:\n- using python operator to indentify binary operators instead of strings. In other words we replace `'+'` by `operator.add`, `'-'` by `operator.sub`, etc\n- writing only one function `binop` instead of `addsub` and `muldiv`.\n- removing the methods `kind`,  `is_exact`, `is_rational`, `is_field_element` of descriptors and instead use the class themselves\n- removing the method `rational_value` and directly access the `_value` attribute\n- detect unions earlier in the code to avoid constructing `ANBinaryExpr`\n\nAs a consequence of the last items, we have exactification detected earlier\n\n```\nsage: sqrt17 = QQbar(17).sqrt()\nsage: sqrt19 = QQbar(19).sqrt()\nsage: (sqrt17 + sqrt19).exactify()\nsage: sqrt17 * sqrt19 + sqrt17 - sqrt19 * sqrt17 - sqrt17\n0\n```\nInstead of `0.?e-17` on the current beta. See also the better output in doctests from the commit `7fa8ed4`.\n\nfollow up: #19955\n\nBranch/Commit: [5cc7c4946ca5524e4caec8de0ae2e5acf201943f](https://github.com/sagemath/sagetrac-mirror/commit/5cc7c4946ca5524e4caec8de0ae2e5acf201943f)\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton, Travis Scrimshaw\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20074\n\n",
    "closed_at": "2016-03-20T23:41:36Z",
    "created_at": "2016-02-17T02:55:18Z",
    "labels": [
        "component: number fields"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "QQbar cleaning 2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20074",
    "user": "https://github.com/videlec"
}
```
We further simplify QQbar code by:
- using python operator to indentify binary operators instead of strings. In other words we replace `'+'` by `operator.add`, `'-'` by `operator.sub`, etc
- writing only one function `binop` instead of `addsub` and `muldiv`.
- removing the methods `kind`,  `is_exact`, `is_rational`, `is_field_element` of descriptors and instead use the class themselves
- removing the method `rational_value` and directly access the `_value` attribute
- detect unions earlier in the code to avoid constructing `ANBinaryExpr`

As a consequence of the last items, we have exactification detected earlier

```
sage: sqrt17 = QQbar(17).sqrt()
sage: sqrt19 = QQbar(19).sqrt()
sage: (sqrt17 + sqrt19).exactify()
sage: sqrt17 * sqrt19 + sqrt17 - sqrt19 * sqrt17 - sqrt17
0
```
Instead of `0.?e-17` on the current beta. See also the better output in doctests from the commit `7fa8ed4`.

follow up: #19955

Branch/Commit: [5cc7c4946ca5524e4caec8de0ae2e5acf201943f](https://github.com/sagemath/sagetrac-mirror/commit/5cc7c4946ca5524e4caec8de0ae2e5acf201943f)

Reviewer: Frédéric Chapoton, Travis Scrimshaw

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20074





---

archive/issue_comments_365489.json:
```json
{
    "body": "Changing commit from \"\" to \"9264ff161e50900ce17ca62393d70b8abc4b4bb6\"",
    "created_at": "2016-02-17T02:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365489",
    "user": "https://github.com/videlec"
}
```

Changing commit from "" to "9264ff161e50900ce17ca62393d70b8abc4b4bb6"



---

archive/issue_comments_365490.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vdelecroix/20074\"",
    "created_at": "2016-02-17T02:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365490",
    "user": "https://github.com/videlec"
}
```

Changing branch from "" to "u/vdelecroix/20074"



---

archive/issue_comments_365491.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n - writing only one function `binop` instead of `addsub` and `muldiv`.\n - removing the method `kind` of descriptors and instead use the class themselves for dispatching\n - detect unions earlier in the code to avoid constructing `ANBinaryExpr`\n+\n+follow up: #19955\n``````\n",
    "created_at": "2016-02-17T02:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365491",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 - writing only one function `binop` instead of `addsub` and `muldiv`.
 - removing the method `kind` of descriptors and instead use the class themselves for dispatching
 - detect unions earlier in the code to avoid constructing `ANBinaryExpr`
+
+follow up: #19955
``````




---

archive/issue_comments_365492.json:
```json
{
    "body": "<a id='comment:1'></a>\nLast 10 new commits:\n|                                                                                                                                          |                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[b35d6f6](https://github.com/sagemath/sagetrac-mirror/commit/b35d6f613b69aec111336979bda0a7533eda31bf)|`Trac 19954: fix doctests`|\n|[9f39b58](https://github.com/sagemath/sagetrac-mirror/commit/9f39b58ca6e7ac2689507b727d0a7afc9adec31f)|`Trac 19954: fix sage_input doctests`|\n|[7ab3ffb](https://github.com/sagemath/sagetrac-mirror/commit/7ab3ffbfd3e824c73a1c78d59de84b37f4b94e2c)|`Trac 19954: move the 34-gon as a doctest`|\n|[ec2e9aa](https://github.com/sagemath/sagetrac-mirror/commit/ec2e9aa7e43597a00407eca5358e5c74362d98fb)|`Trac 19954: merge 7.1.beta1`|\n|[d1788a0](https://github.com/sagemath/sagetrac-mirror/commit/d1788a00924a77f218bbff8c74d0eb56a7afa55c)|`Trac 19954: fix doctests`|\n|[94629db](https://github.com/sagemath/sagetrac-mirror/commit/94629dbef9c590f0f748d1c0e40e5833f226c245)|`Trac 19954: doctest independent of execution order`|\n|[cb2592c](https://github.com/sagemath/sagetrac-mirror/commit/cb2592cf73f815ccb611babbd18a3be19e95b235)|`Trac 19954: typo in documentation`|\n|[1385753](https://github.com/sagemath/sagetrac-mirror/commit/13857532e159d281181bb1b839a5c4f4ab937db7)|`Trac 19954: documentation`|\n|[c1f5c5f](https://github.com/sagemath/sagetrac-mirror/commit/c1f5c5fb96bf5bb06c4dacdaf132d7ce2b3c8de3)|`Trac 19954: remove useless \"gaussian\" functions`|\n|[9264ff1](https://github.com/sagemath/sagetrac-mirror/commit/9264ff161e50900ce17ca62393d70b8abc4b4bb6)|`Trac 20074: qqbar cleaning`|",
    "created_at": "2016-02-17T02:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365492",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>
Last 10 new commits:
|                                                                                                                                          |                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[b35d6f6](https://github.com/sagemath/sagetrac-mirror/commit/b35d6f613b69aec111336979bda0a7533eda31bf)|`Trac 19954: fix doctests`|
|[9f39b58](https://github.com/sagemath/sagetrac-mirror/commit/9f39b58ca6e7ac2689507b727d0a7afc9adec31f)|`Trac 19954: fix sage_input doctests`|
|[7ab3ffb](https://github.com/sagemath/sagetrac-mirror/commit/7ab3ffbfd3e824c73a1c78d59de84b37f4b94e2c)|`Trac 19954: move the 34-gon as a doctest`|
|[ec2e9aa](https://github.com/sagemath/sagetrac-mirror/commit/ec2e9aa7e43597a00407eca5358e5c74362d98fb)|`Trac 19954: merge 7.1.beta1`|
|[d1788a0](https://github.com/sagemath/sagetrac-mirror/commit/d1788a00924a77f218bbff8c74d0eb56a7afa55c)|`Trac 19954: fix doctests`|
|[94629db](https://github.com/sagemath/sagetrac-mirror/commit/94629dbef9c590f0f748d1c0e40e5833f226c245)|`Trac 19954: doctest independent of execution order`|
|[cb2592c](https://github.com/sagemath/sagetrac-mirror/commit/cb2592cf73f815ccb611babbd18a3be19e95b235)|`Trac 19954: typo in documentation`|
|[1385753](https://github.com/sagemath/sagetrac-mirror/commit/13857532e159d281181bb1b839a5c4f4ab937db7)|`Trac 19954: documentation`|
|[c1f5c5f](https://github.com/sagemath/sagetrac-mirror/commit/c1f5c5fb96bf5bb06c4dacdaf132d7ce2b3c8de3)|`Trac 19954: remove useless "gaussian" functions`|
|[9264ff1](https://github.com/sagemath/sagetrac-mirror/commit/9264ff161e50900ce17ca62393d70b8abc4b4bb6)|`Trac 20074: qqbar cleaning`|



---

archive/issue_comments_365493.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-02-17T02:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365493",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_365494.json:
```json
{
    "body": "Changing commit from \"9264ff161e50900ce17ca62393d70b8abc4b4bb6\" to \"012ae1865e4c2ab7bdf422e58d4b806b69ebc069\"",
    "created_at": "2016-02-17T12:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365494",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9264ff161e50900ce17ca62393d70b8abc4b4bb6" to "012ae1865e4c2ab7bdf422e58d4b806b69ebc069"



---

archive/issue_comments_365495.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[012ae18](https://github.com/sagemath/sagetrac-mirror/commit/012ae1865e4c2ab7bdf422e58d4b806b69ebc069)|`Trac 20074: fix doctests`|",
    "created_at": "2016-02-17T12:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365495",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[012ae18](https://github.com/sagemath/sagetrac-mirror/commit/012ae1865e4c2ab7bdf422e58d4b806b69ebc069)|`Trac 20074: fix doctests`|



---

archive/issue_comments_365496.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,15 @@\n - removing the method `kind` of descriptors and instead use the class themselves for dispatching\n - detect unions earlier in the code to avoid constructing `ANBinaryExpr`\n \n+As a consequence, we have exactification detected earlier\n+\n+```\n+sage: sqrt17 = QQbar(17).sqrt()\n+sage: sqrt19 = QQbar(19).sqrt()\n+sage: (sqrt17 + sqrt19).exactify()\n+sage: sqrt17 * sqrt19 + sqrt17 - sqrt19 * sqrt17 - sqrt17\n+0\n+```\n+Instead of `0.?e-17` on the current beta.\n+\n follow up: #19955\n``````\n",
    "created_at": "2016-02-17T12:20:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365496",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,15 @@
 - removing the method `kind` of descriptors and instead use the class themselves for dispatching
 - detect unions earlier in the code to avoid constructing `ANBinaryExpr`
 
+As a consequence, we have exactification detected earlier
+
+```
+sage: sqrt17 = QQbar(17).sqrt()
+sage: sqrt19 = QQbar(19).sqrt()
+sage: (sqrt17 + sqrt19).exactify()
+sage: sqrt17 * sqrt19 + sqrt17 - sqrt19 * sqrt17 - sqrt17
+0
+```
+Instead of `0.?e-17` on the current beta.
+
 follow up: #19955
``````




---

archive/issue_comments_365497.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[ff5eccc](https://github.com/sagemath/sagetrac-mirror/commit/ff5eccce339affb2cbe56f2dee1383defa49727c)|`Trac 20074: merge 7.1.beta3`|\n|[c23b72b](https://github.com/sagemath/sagetrac-mirror/commit/c23b72b2200d6936d1bcf990b6d9b7f9efe02f38)|`Trac 20074: fix doctest`|\n|[66b22b5](https://github.com/sagemath/sagetrac-mirror/commit/66b22b5e512916c0d3f6cfb32cfc1603bb6b1980)|`Trac 20074: simplify descriptors`|",
    "created_at": "2016-02-17T13:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[ff5eccc](https://github.com/sagemath/sagetrac-mirror/commit/ff5eccce339affb2cbe56f2dee1383defa49727c)|`Trac 20074: merge 7.1.beta3`|
|[c23b72b](https://github.com/sagemath/sagetrac-mirror/commit/c23b72b2200d6936d1bcf990b6d9b7f9efe02f38)|`Trac 20074: fix doctest`|
|[66b22b5](https://github.com/sagemath/sagetrac-mirror/commit/66b22b5e512916c0d3f6cfb32cfc1603bb6b1980)|`Trac 20074: simplify descriptors`|



---

archive/issue_comments_365498.json:
```json
{
    "body": "Changing commit from \"012ae1865e4c2ab7bdf422e58d4b806b69ebc069\" to \"66b22b5e512916c0d3f6cfb32cfc1603bb6b1980\"",
    "created_at": "2016-02-17T13:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365498",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "012ae1865e4c2ab7bdf422e58d4b806b69ebc069" to "66b22b5e512916c0d3f6cfb32cfc1603bb6b1980"



---

archive/issue_comments_365499.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,11 @@\n We further simplify QQbar code by:\n - using python operator to indentify binary operators instead of strings. In other words we replace `'+'` by `operator.add`, `'-'` by `operator.sub`, etc\n - writing only one function `binop` instead of `addsub` and `muldiv`.\n-- removing the method `kind` of descriptors and instead use the class themselves for dispatching\n+- removing the methods `kind`,  `is_exact`, `is_rational`, `is_field_element` of descriptors and instead use the class themselves\n+- removing the method `rational_value` and directly access the `_value` attribute\n - detect unions earlier in the code to avoid constructing `ANBinaryExpr`\n \n-As a consequence, we have exactification detected earlier\n+As a consequence of the last items, we have exactification detected earlier\n \n ```\n sage: sqrt17 = QQbar(17).sqrt()\n@@ -13,6 +14,6 @@\n sage: sqrt17 * sqrt19 + sqrt17 - sqrt19 * sqrt17 - sqrt17\n 0\n ```\n-Instead of `0.?e-17` on the current beta.\n+Instead of `0.?e-17` on the current beta. See also the better output in doctests from the commit `012ae18`.\n \n follow up: #19955\n``````\n",
    "created_at": "2016-02-17T13:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365499",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,11 @@
 We further simplify QQbar code by:
 - using python operator to indentify binary operators instead of strings. In other words we replace `'+'` by `operator.add`, `'-'` by `operator.sub`, etc
 - writing only one function `binop` instead of `addsub` and `muldiv`.
-- removing the method `kind` of descriptors and instead use the class themselves for dispatching
+- removing the methods `kind`,  `is_exact`, `is_rational`, `is_field_element` of descriptors and instead use the class themselves
+- removing the method `rational_value` and directly access the `_value` attribute
 - detect unions earlier in the code to avoid constructing `ANBinaryExpr`
 
-As a consequence, we have exactification detected earlier
+As a consequence of the last items, we have exactification detected earlier
 
 ```
 sage: sqrt17 = QQbar(17).sqrt()
@@ -13,6 +14,6 @@
 sage: sqrt17 * sqrt19 + sqrt17 - sqrt19 * sqrt17 - sqrt17
 0
 ```
-Instead of `0.?e-17` on the current beta.
+Instead of `0.?e-17` on the current beta. See also the better output in doctests from the commit `012ae18`.
 
 follow up: #19955
``````




---

archive/issue_comments_365500.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-02-26T20:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365500",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_365501.json:
```json
{
    "body": "<a id='comment:6'></a>\ndoes not apply",
    "created_at": "2016-02-26T20:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365501",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
does not apply



---

archive/issue_comments_365502.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-07T17:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365502",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_365503.json:
```json
{
    "body": "Changing dependencies from \"#19954\" to \"\"",
    "created_at": "2016-03-07T17:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365503",
    "user": "https://github.com/videlec"
}
```

Changing dependencies from "#19954" to ""



---

archive/issue_comments_365504.json:
```json
{
    "body": "Changing commit from \"66b22b5e512916c0d3f6cfb32cfc1603bb6b1980\" to \"362a67b966045c2a89192df890a73e87e8354f84\"",
    "created_at": "2016-03-07T17:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "66b22b5e512916c0d3f6cfb32cfc1603bb6b1980" to "362a67b966045c2a89192df890a73e87e8354f84"



---

archive/issue_comments_365505.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[d716b88](https://github.com/sagemath/sagetrac-mirror/commit/d716b886711a924d1ccbe034d4070d9b2cad0b6f)|`Trac 20074: qqbar cleaning`|\n|[7fa8ed4](https://github.com/sagemath/sagetrac-mirror/commit/7fa8ed43ebd95ad9a4cb7ebe85f17d9d5ceb6c27)|`Trac 20074: fix doctests`|\n|[362a67b](https://github.com/sagemath/sagetrac-mirror/commit/362a67b966045c2a89192df890a73e87e8354f84)|`Trac 20074: simplify descriptors`|",
    "created_at": "2016-03-07T17:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[d716b88](https://github.com/sagemath/sagetrac-mirror/commit/d716b886711a924d1ccbe034d4070d9b2cad0b6f)|`Trac 20074: qqbar cleaning`|
|[7fa8ed4](https://github.com/sagemath/sagetrac-mirror/commit/7fa8ed43ebd95ad9a4cb7ebe85f17d9d5ceb6c27)|`Trac 20074: fix doctests`|
|[362a67b](https://github.com/sagemath/sagetrac-mirror/commit/362a67b966045c2a89192df890a73e87e8354f84)|`Trac 20074: simplify descriptors`|



---

archive/issue_comments_365506.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,6 +14,6 @@\n sage: sqrt17 * sqrt19 + sqrt17 - sqrt19 * sqrt17 - sqrt17\n 0\n ```\n-Instead of `0.?e-17` on the current beta. See also the better output in doctests from the commit `012ae18`.\n+Instead of `0.?e-17` on the current beta. See also the better output in doctests from the commit `7fa8ed4`.\n \n follow up: #19955\n``````\n",
    "created_at": "2016-03-07T17:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365506",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,6 +14,6 @@
 sage: sqrt17 * sqrt19 + sqrt17 - sqrt19 * sqrt17 - sqrt17
 0
 ```
-Instead of `0.?e-17` on the current beta. See also the better output in doctests from the commit `012ae18`.
+Instead of `0.?e-17` on the current beta. See also the better output in doctests from the commit `7fa8ed4`.
 
 follow up: #19955
``````




---

archive/issue_comments_365507.json:
```json
{
    "body": "<a id='comment:10'></a>\nFor this change:\n\n```diff\n@@ -7461,14 +7076,16 @@ class ANBinaryExpr(ANDescr):\n \n             op = self._op\n \n-            if op == '+':\n+            if op is operator.add:\n                 value = left_value + right_value\n-            if op == '-':\n+            elif op is operator.sub:\n                 value = left_value - right_value\n-            if op == '*':\n+            elif op is operator.mul:\n                 value = left_value * right_value\n-            if op == '/':\n+            elif op is operator.div:\n                 value = left_value / right_value\n+            else:\n+                raise RuntimeError(\"op is {}\".format(op))\n \n             if gen.is_trivial():\n                 return ANRational(value)\n```\nIs there a reason why you did not just do `value = op(left_value, right_value)`?\n\nHave you done any speed comparisons?",
    "created_at": "2016-03-07T22:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365507",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
For this change:

```diff
@@ -7461,14 +7076,16 @@ class ANBinaryExpr(ANDescr):
 
             op = self._op
 
-            if op == '+':
+            if op is operator.add:
                 value = left_value + right_value
-            if op == '-':
+            elif op is operator.sub:
                 value = left_value - right_value
-            if op == '*':
+            elif op is operator.mul:
                 value = left_value * right_value
-            if op == '/':
+            elif op is operator.div:
                 value = left_value / right_value
+            else:
+                raise RuntimeError("op is {}".format(op))
 
             if gen.is_trivial():
                 return ANRational(value)
```
Is there a reason why you did not just do `value = op(left_value, right_value)`?

Have you done any speed comparisons?



---

archive/issue_comments_365508.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [tscrim](#comment%3A10):\n> For this change:\n> ...\n> Is there a reason why you did not just do `value = op(left_value, right_value)`?\n\n\nNope.\n\n> Have you done any speed comparisons?\n\n\nI don't think it changes anything. The code is just much simpler.",
    "created_at": "2016-03-08T01:17:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365508",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'></a>
Replying to [tscrim](#comment%3A10):
> For this change:
> ...
> Is there a reason why you did not just do `value = op(left_value, right_value)`?


Nope.

> Have you done any speed comparisons?


I don't think it changes anything. The code is just much simpler.



---

archive/issue_comments_365509.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-08T01:17:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365509",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_365510.json:
```json
{
    "body": "Changing commit from \"362a67b966045c2a89192df890a73e87e8354f84\" to \"563e3892794a39bf6cee4cd625cef58ae32ff1d8\"",
    "created_at": "2016-03-08T13:46:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "362a67b966045c2a89192df890a73e87e8354f84" to "563e3892794a39bf6cee4cd625cef58ae32ff1d8"



---

archive/issue_comments_365511.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[563e389](https://github.com/sagemath/sagetrac-mirror/commit/563e3892794a39bf6cee4cd625cef58ae32ff1d8)|`Trac 20074: code simplification`|",
    "created_at": "2016-03-08T13:46:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365511",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[563e389](https://github.com/sagemath/sagetrac-mirror/commit/563e3892794a39bf6cee4cd625cef58ae32ff1d8)|`Trac 20074: code simplification`|



---

archive/issue_comments_365512.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-08T13:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365512",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_365513.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2016-03-08T19:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365513",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_365514.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-08T19:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365514",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_365515.json:
```json
{
    "body": "<a id='comment:14'></a>\nok, looks good to me. Patchbots are happy. Let it be.",
    "created_at": "2016-03-08T19:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365515",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>
ok, looks good to me. Patchbots are happy. Let it be.



---

archive/issue_comments_365516.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-03-08T23:34:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365516",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_365517.json:
```json
{
    "body": "<a id='comment:15'></a>\nMerge conflict, try the next beta...",
    "created_at": "2016-03-08T23:34:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365517",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>
Merge conflict, try the next beta...



---

archive/issue_comments_365518.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[c379250](https://github.com/sagemath/sagetrac-mirror/commit/c379250155830789d0d1a5f163b6314068286beb)|`Trac 20074: merge 7.1.rc0`|",
    "created_at": "2016-03-11T13:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365518",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[c379250](https://github.com/sagemath/sagetrac-mirror/commit/c379250155830789d0d1a5f163b6314068286beb)|`Trac 20074: merge 7.1.rc0`|



---

archive/issue_comments_365519.json:
```json
{
    "body": "Changing commit from \"563e3892794a39bf6cee4cd625cef58ae32ff1d8\" to \"c379250155830789d0d1a5f163b6314068286beb\"",
    "created_at": "2016-03-11T13:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365519",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "563e3892794a39bf6cee4cd625cef58ae32ff1d8" to "c379250155830789d0d1a5f163b6314068286beb"



---

archive/issue_comments_365520.json:
```json
{
    "body": "Changing reviewer from \"Fr\u00e9d\u00e9ric Chapoton\" to \"Fr\u00e9d\u00e9ric Chapoton, Travis Scrimshaw\"",
    "created_at": "2016-03-11T14:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365520",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "Frédéric Chapoton" to "Frédéric Chapoton, Travis Scrimshaw"



---

archive/issue_comments_365521.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-03-11T14:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365521",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_365522.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-03-11T14:40:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365522",
    "user": "https://github.com/videlec"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_365523.json:
```json
{
    "body": "<a id='comment:18'></a>\nI need to fix a doctest...",
    "created_at": "2016-03-11T14:40:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365523",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>
I need to fix a doctest...



---

archive/issue_comments_365524.json:
```json
{
    "body": "Changing commit from \"c379250155830789d0d1a5f163b6314068286beb\" to \"5cc7c4946ca5524e4caec8de0ae2e5acf201943f\"",
    "created_at": "2016-03-11T14:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365524",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c379250155830789d0d1a5f163b6314068286beb" to "5cc7c4946ca5524e4caec8de0ae2e5acf201943f"



---

archive/issue_comments_365525.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[5cc7c49](https://github.com/sagemath/sagetrac-mirror/commit/5cc7c4946ca5524e4caec8de0ae2e5acf201943f)|`Trac 20074: fix doctest`|",
    "created_at": "2016-03-11T14:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365525",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[5cc7c49](https://github.com/sagemath/sagetrac-mirror/commit/5cc7c4946ca5524e4caec8de0ae2e5acf201943f)|`Trac 20074: fix doctest`|



---

archive/issue_comments_365526.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-03-11T14:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365526",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_365527.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-20T23:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365527",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_062157.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-20T23:41:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20074#event-62157"
}
```



---

archive/issue_comments_365528.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/20074\" to \"5cc7c4946ca5524e4caec8de0ae2e5acf201943f\"",
    "created_at": "2016-03-20T23:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20074#issuecomment-365528",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vdelecroix/20074" to "5cc7c4946ca5524e4caec8de0ae2e5acf201943f"
