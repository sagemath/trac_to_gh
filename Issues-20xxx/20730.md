# Issue 20730: Break up sage_setup.autogen.interpreters into a package

archive/issues_020493.json:
```json
{
    "body": "`sage_setup.autogen.interpreters` was getting a bit long (over 4000 lines) and it was hard to understand how some of it was organized.  So I split it up into several logical modules.  This seemed to have [some support](https://groups.google.com/d/msg/sage-devel/RB4-A-p5pRI/0T8ZtGpzCwAJ).\n\nHow exactly I chose to break it up is certainly up for debate, but I thought this was fairly logical to start.  In the `__init__.py` I still import all from all submodules so that the API for the `sage_setup.autogen.interpreters` module is unchanged.\n\nI would like to get some version of this accepted soon, as I have a few tasks to work on in this module and it would be easier (though not necessary) to work on it on top of this change.\n\n**Branch/Commit:** [b34d5d8fc509f6773fe3c72c3d1b0e24a358efde](https://github.com/sagemath/sagetrac-mirror/commit/b34d5d8fc509f6773fe3c72c3d1b0e24a358efde)\n\n**Reviewer:** Jean-Pierre Flori\n\n**Author:** Erik Bray\n\n**Dependencies:** #20238\n\nIssue created by migration from https://trac.sagemath.org/ticket/20730\n\n",
    "closed_at": "2017-04-28T23:54:55Z",
    "created_at": "2016-05-31T10:42:55Z",
    "labels": [
        "component: fast callable"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Break up sage_setup.autogen.interpreters into a package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20730",
    "user": "https://github.com/embray"
}
```
`sage_setup.autogen.interpreters` was getting a bit long (over 4000 lines) and it was hard to understand how some of it was organized.  So I split it up into several logical modules.  This seemed to have [some support](https://groups.google.com/d/msg/sage-devel/RB4-A-p5pRI/0T8ZtGpzCwAJ).

How exactly I chose to break it up is certainly up for debate, but I thought this was fairly logical to start.  In the `__init__.py` I still import all from all submodules so that the API for the `sage_setup.autogen.interpreters` module is unchanged.

I would like to get some version of this accepted soon, as I have a few tasks to work on in this module and it would be easier (though not necessary) to work on it on top of this change.

**Branch/Commit:** [b34d5d8fc509f6773fe3c72c3d1b0e24a358efde](https://github.com/sagemath/sagetrac-mirror/commit/b34d5d8fc509f6773fe3c72c3d1b0e24a358efde)

**Reviewer:** Jean-Pierre Flori

**Author:** Erik Bray

**Dependencies:** #20238

Issue created by migration from https://trac.sagemath.org/ticket/20730





---

archive/issue_comments_304279.json:
```json
{
    "body": "<a id='comment:1'></a>\nI suggest to add `from `__future__` import absolute_import, print_function` to all those modules.",
    "created_at": "2016-05-31T10:57:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304279",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>
I suggest to add `from `__future__` import absolute_import, print_function` to all those modules.



---

archive/issue_comments_304280.json:
```json
{
    "body": "<a id='comment:2'></a>\nReplying to [jdemeyer](#comment%3A1):\n> I suggest to add `from `__future__` import absolute_import, print_function` to all those modules.\n\n\nFunny, I actually did that at first but then took it out since it wasn't strictly needed.  No problem adding them back in though.",
    "created_at": "2016-05-31T12:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304280",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'></a>
Replying to [jdemeyer](#comment%3A1):
> I suggest to add `from `__future__` import absolute_import, print_function` to all those modules.


Funny, I actually did that at first but then took it out since it wasn't strictly needed.  No problem adding them back in though.



---

archive/issue_events_189329.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-31T12:53:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189329"
}
```



---

archive/issue_comments_304281.json:
```json
{
    "body": "<a id='comment:3'></a>\nNot sure what component to put this under.  There isn't one for `fast_callable`.",
    "created_at": "2016-05-31T12:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304281",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>
Not sure what component to put this under.  There isn't one for `fast_callable`.



---

archive/issue_comments_304282.json:
```json
{
    "body": "**Changing commit** from \"[2e76f57321b6be633788af6172645b397ca3d0fd](https://github.com/sagemath/sagetrac-mirror/commit/2e76f57321b6be633788af6172645b397ca3d0fd)\" to \"[1a434e8a269cc7eb901817ae0dbd74dd9b804cab](https://github.com/sagemath/sagetrac-mirror/commit/1a434e8a269cc7eb901817ae0dbd74dd9b804cab)\".",
    "created_at": "2016-05-31T12:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304282",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2e76f57321b6be633788af6172645b397ca3d0fd](https://github.com/sagemath/sagetrac-mirror/commit/2e76f57321b6be633788af6172645b397ca3d0fd)" to "[1a434e8a269cc7eb901817ae0dbd74dd9b804cab](https://github.com/sagemath/sagetrac-mirror/commit/1a434e8a269cc7eb901817ae0dbd74dd9b804cab)".



---

archive/issue_comments_304283.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a434e8a269cc7eb901817ae0dbd74dd9b804cab\">1a434e8</a></td><td><code>Add from `__future__` import print_function, absolute_import to all (non-empty) modules for forward compatibility.</code></td></tr></table>\n",
    "created_at": "2016-05-31T12:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304283",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a434e8a269cc7eb901817ae0dbd74dd9b804cab">1a434e8</a></td><td><code>Add from `__future__` import print_function, absolute_import to all (non-empty) modules for forward compatibility.</code></td></tr></table>




---

archive/issue_comments_304284.json:
```json
{
    "body": "<a id='comment:5'></a>\nNow there is ;-)",
    "created_at": "2016-06-01T00:54:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304284",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>
Now there is ;-)



---

archive/issue_events_189330.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-06-01T00:54:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "component: fast callable",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189330"
}
```



---

archive/issue_comments_304285.json:
```json
{
    "body": "<a id='comment:6'></a>\nTrying to play with your branch I got\n\n```\n[install] [sagelib-7.3.beta2] make[3]: Entering directory '/opt/sage/src'\n[install] [sagelib-7.3.beta2] make[3]: warning: -jN forced in submake: disabling jobserver mode.\n[install] [sagelib-7.3.beta2] make[3]: *** No rule to make target 'sage_setup/autogen/interpreters.py', needed by 'sage/ext/interpreters/__init__.py'.  Stop.\n[install] [sagelib-7.3.beta2] make[3]: Leaving directory '/opt/sage/src'\n```",
    "created_at": "2016-06-01T00:57:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304285",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>
Trying to play with your branch I got

```
[install] [sagelib-7.3.beta2] make[3]: Entering directory '/opt/sage/src'
[install] [sagelib-7.3.beta2] make[3]: warning: -jN forced in submake: disabling jobserver mode.
[install] [sagelib-7.3.beta2] make[3]: *** No rule to make target 'sage_setup/autogen/interpreters.py', needed by 'sage/ext/interpreters/__init__.py'.  Stop.
[install] [sagelib-7.3.beta2] make[3]: Leaving directory '/opt/sage/src'
```



---

archive/issue_comments_304286.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [vdelecroix](#comment%3A6):\n> Trying to play with your branch I got\n> \n> ```\n> [install] [sagelib-7.3.beta2] make[3]: Entering directory '/opt/sage/src'\n> [install] [sagelib-7.3.beta2] make[3]: warning: -jN forced in submake: disabling jobserver mode.\n> [install] [sagelib-7.3.beta2] make[3]: *** No rule to make target 'sage_setup/autogen/interpreters.py', needed by 'sage/ext/interpreters/__init__.py'.  Stop.\n> [install] [sagelib-7.3.beta2] make[3]: Leaving directory '/opt/sage/src'\n> ```\n\n\nThanks. I don't run `make` that often for building sagelib (as opposed to just running `setup.py ` directly) so I didn't catch this.",
    "created_at": "2016-06-01T11:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304286",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
Replying to [vdelecroix](#comment%3A6):
> Trying to play with your branch I got
> 
> ```
> [install] [sagelib-7.3.beta2] make[3]: Entering directory '/opt/sage/src'
> [install] [sagelib-7.3.beta2] make[3]: warning: -jN forced in submake: disabling jobserver mode.
> [install] [sagelib-7.3.beta2] make[3]: *** No rule to make target 'sage_setup/autogen/interpreters.py', needed by 'sage/ext/interpreters/__init__.py'.  Stop.
> [install] [sagelib-7.3.beta2] make[3]: Leaving directory '/opt/sage/src'
> ```


Thanks. I don't run `make` that often for building sagelib (as opposed to just running `setup.py ` directly) so I didn't catch this.



---

archive/issue_comments_304287.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f0541dae4474d9afcc88103a51f1b3350071969\">3f0541d</a></td><td><code>Change the name attributes of the interpreter implementations to class</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0becca20bfab3373f41dc5c3d528dc267a40ef26\">0becca2</a></td><td><code>Update Makefile to more explicitly make targets for the files generated for the interpreters, as well as rebuild those targets when any of the autogen/interpreters sources change.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7c88ed2a04f32754cf727ee2eccd61d067ed34d\">a7c88ed</a></td><td><code>Make Makefile simpler to understand / more robust by calling a function in sage_setup.autogen.interpreters that explicitly prints the names of all interpreters.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6dbab6144024130f3edd0c29b421f9bf21347d9d\">6dbab61</a></td><td><code>Also avoid reexpansion of the $(INTERP_SRCS) variable.</code></td></tr></table>\n",
    "created_at": "2016-06-01T14:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304287",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f0541dae4474d9afcc88103a51f1b3350071969">3f0541d</a></td><td><code>Change the name attributes of the interpreter implementations to class</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0becca20bfab3373f41dc5c3d528dc267a40ef26">0becca2</a></td><td><code>Update Makefile to more explicitly make targets for the files generated for the interpreters, as well as rebuild those targets when any of the autogen/interpreters sources change.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7c88ed2a04f32754cf727ee2eccd61d067ed34d">a7c88ed</a></td><td><code>Make Makefile simpler to understand / more robust by calling a function in sage_setup.autogen.interpreters that explicitly prints the names of all interpreters.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6dbab6144024130f3edd0c29b421f9bf21347d9d">6dbab61</a></td><td><code>Also avoid reexpansion of the $(INTERP_SRCS) variable.</code></td></tr></table>




---

archive/issue_comments_304288.json:
```json
{
    "body": "**Changing commit** from \"[1a434e8a269cc7eb901817ae0dbd74dd9b804cab](https://github.com/sagemath/sagetrac-mirror/commit/1a434e8a269cc7eb901817ae0dbd74dd9b804cab)\" to \"[6dbab6144024130f3edd0c29b421f9bf21347d9d](https://github.com/sagemath/sagetrac-mirror/commit/6dbab6144024130f3edd0c29b421f9bf21347d9d)\".",
    "created_at": "2016-06-01T14:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304288",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1a434e8a269cc7eb901817ae0dbd74dd9b804cab](https://github.com/sagemath/sagetrac-mirror/commit/1a434e8a269cc7eb901817ae0dbd74dd9b804cab)" to "[6dbab6144024130f3edd0c29b421f9bf21347d9d](https://github.com/sagemath/sagetrac-mirror/commit/6dbab6144024130f3edd0c29b421f9bf21347d9d)".



---

archive/issue_comments_304289.json:
```json
{
    "body": "<a id='comment:9'></a>\nThat should fix it.",
    "created_at": "2016-06-01T14:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304289",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
That should fix it.



---

archive/issue_comments_304290.json:
```json
{
    "body": "<a id='comment:10'></a>\nWhy did you make `src/Makefile` so complicated? I find it hard to understand what you're doing there.",
    "created_at": "2016-06-01T15:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304290",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Why did you make `src/Makefile` so complicated? I find it hard to understand what you're doing there.



---

archive/issue_comments_304291.json:
```json
{
    "body": "<a id='comment:11'></a>\nWhich part is hard to understand?  The most important change is that since there is not a single `interpreters.py`, if any file in the `sage.autogen.inteprreters` package is changed the interpreter sources should be regenerated.  Even that's a rough approximation :)",
    "created_at": "2016-06-02T09:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304291",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>
Which part is hard to understand?  The most important change is that since there is not a single `interpreters.py`, if any file in the `sage.autogen.inteprreters` package is changed the interpreter sources should be regenerated.  Even that's a rough approximation :)



---

archive/issue_comments_304292.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [embray](#comment%3A11):\n> if any file in the `sage.autogen.intepreters` package is changed the interpreter sources should be regenerated.\n\n\nThat can be done with a single wildcard like we already do for the PARI stuff:\n\n```\nsage/libs/pari/auto_gen.pxi: $(SAGE_LOCAL)/share/pari/pari.desc \\\n        sage/libs/pari/decl.pxi sage_setup/autogen/pari/*.py\n    python -c \"from sage_setup.autogen.pari import rebuild; rebuild()\"\n```",
    "created_at": "2016-06-02T09:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304292",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
Replying to [embray](#comment%3A11):
> if any file in the `sage.autogen.intepreters` package is changed the interpreter sources should be regenerated.


That can be done with a single wildcard like we already do for the PARI stuff:

```
sage/libs/pari/auto_gen.pxi: $(SAGE_LOCAL)/share/pari/pari.desc \
        sage/libs/pari/decl.pxi sage_setup/autogen/pari/*.py
    python -c "from sage_setup.autogen.pari import rebuild; rebuild()"
```



---

archive/issue_comments_304293.json:
```json
{
    "body": "<a id='comment:13'></a>\nThe current layout I came up with has a `sage_setup.autogen.interpreters.specs` subpackage, so a single wildcard would not work.\n\nI could do away with the subpackage and that's arguable.  I think it makes it easier to find the implementations for the individual interpreter specs, rather than intermingling them with support modules.",
    "created_at": "2016-06-02T13:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304293",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'></a>
The current layout I came up with has a `sage_setup.autogen.interpreters.specs` subpackage, so a single wildcard would not work.

I could do away with the subpackage and that's arguable.  I think it makes it easier to find the implementations for the individual interpreter specs, rather than intermingling them with support modules.



---

archive/issue_comments_304294.json:
```json
{
    "body": "<a id='comment:14'></a>\nOne thing I could do that would definitely simplify this a bit would be instead of the `interpreters.print_names()` function I added, the interpreters module could (and probably should) have a function that returns the names of all the files it generates.  That way this wouldn't have to be duplicated in the Makefile, and it would be made simpler.",
    "created_at": "2016-06-02T13:14:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304294",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>
One thing I could do that would definitely simplify this a bit would be instead of the `interpreters.print_names()` function I added, the interpreters module could (and probably should) have a function that returns the names of all the files it generates.  That way this wouldn't have to be duplicated in the Makefile, and it would be made simpler.



---

archive/issue_comments_304295.json:
```json
{
    "body": "<a id='comment:15'></a>\nEven with the subdirectory you could still use wildcards...\n\nAnyway, there should be a solution which doesn't involve 20 new lines added to `src/Makefile`.",
    "created_at": "2016-06-02T13:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304295",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Even with the subdirectory you could still use wildcards...

Anyway, there should be a solution which doesn't involve 20 new lines added to `src/Makefile`.



---

archive/issue_comments_304296.json:
```json
{
    "body": "<a id='comment:16'></a>\nWell it's a difference of one `find` or two wildcard patterns.  I suppose the latter has the slight advantage of being more explicit.  I could try it and see how it looks.",
    "created_at": "2016-06-02T13:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304296",
    "user": "https://github.com/embray"
}
```

<a id='comment:16'></a>
Well it's a difference of one `find` or two wildcard patterns.  I suppose the latter has the slight advantage of being more explicit.  I could try it and see how it looks.



---

archive/issue_comments_304297.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/301fbe89797b718fe3ea31d9a528e5fb0fe3bcd0\">301fbe8</a></td><td><code>Deduplicate code in anticipation of adding more generated file(s) for interpreters.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65a05199a4422491e97934569f950cf8ae10ff39\">65a0519</a></td><td><code>Simplify Makefile further by replacing print_names() with a list_sources() that just prints the names of all generated source files.</code></td></tr></table>\n",
    "created_at": "2016-06-13T14:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304297",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/301fbe89797b718fe3ea31d9a528e5fb0fe3bcd0">301fbe8</a></td><td><code>Deduplicate code in anticipation of adding more generated file(s) for interpreters.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65a05199a4422491e97934569f950cf8ae10ff39">65a0519</a></td><td><code>Simplify Makefile further by replacing print_names() with a list_sources() that just prints the names of all generated source files.</code></td></tr></table>




---

archive/issue_comments_304298.json:
```json
{
    "body": "**Changing commit** from \"[6dbab6144024130f3edd0c29b421f9bf21347d9d](https://github.com/sagemath/sagetrac-mirror/commit/6dbab6144024130f3edd0c29b421f9bf21347d9d)\" to \"[65a05199a4422491e97934569f950cf8ae10ff39](https://github.com/sagemath/sagetrac-mirror/commit/65a05199a4422491e97934569f950cf8ae10ff39)\".",
    "created_at": "2016-06-13T14:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304298",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6dbab6144024130f3edd0c29b421f9bf21347d9d](https://github.com/sagemath/sagetrac-mirror/commit/6dbab6144024130f3edd0c29b421f9bf21347d9d)" to "[65a05199a4422491e97934569f950cf8ae10ff39](https://github.com/sagemath/sagetrac-mirror/commit/65a05199a4422491e97934569f950cf8ae10ff39)".



---

archive/issue_comments_304299.json:
```json
{
    "body": "<a id='comment:18'></a>\nSimplified the Makefile a smidge.  It's actually better this way than I had it before, because now `sage_setup.autogen.interpreters` alone is responsible for knowing the names of the files it outputs, reducing the need to keep track of that information in multiple places.",
    "created_at": "2016-06-13T14:31:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304299",
    "user": "https://github.com/embray"
}
```

<a id='comment:18'></a>
Simplified the Makefile a smidge.  It's actually better this way than I had it before, because now `sage_setup.autogen.interpreters` alone is responsible for knowing the names of the files it outputs, reducing the need to keep track of that information in multiple places.



---

archive/issue_comments_304300.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5225c350c9b7e01708f68dddff955857a9aea5d\">d5225c3</a></td><td><code>Simplify Makefile further by replacing print_names() with a list_sources() that just prints the names of all generated source files.</code></td></tr></table>\n",
    "created_at": "2016-08-16T11:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304300",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5225c350c9b7e01708f68dddff955857a9aea5d">d5225c3</a></td><td><code>Simplify Makefile further by replacing print_names() with a list_sources() that just prints the names of all generated source files.</code></td></tr></table>




---

archive/issue_comments_304301.json:
```json
{
    "body": "**Changing commit** from \"[65a05199a4422491e97934569f950cf8ae10ff39](https://github.com/sagemath/sagetrac-mirror/commit/65a05199a4422491e97934569f950cf8ae10ff39)\" to \"[d5225c350c9b7e01708f68dddff955857a9aea5d](https://github.com/sagemath/sagetrac-mirror/commit/d5225c350c9b7e01708f68dddff955857a9aea5d)\".",
    "created_at": "2016-08-16T11:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304301",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[65a05199a4422491e97934569f950cf8ae10ff39](https://github.com/sagemath/sagetrac-mirror/commit/65a05199a4422491e97934569f950cf8ae10ff39)" to "[d5225c350c9b7e01708f68dddff955857a9aea5d](https://github.com/sagemath/sagetrac-mirror/commit/d5225c350c9b7e01708f68dddff955857a9aea5d)".



---

archive/issue_comments_304302.json:
```json
{
    "body": "**Changing commit** from \"[d5225c350c9b7e01708f68dddff955857a9aea5d](https://github.com/sagemath/sagetrac-mirror/commit/d5225c350c9b7e01708f68dddff955857a9aea5d)\" to \"[206138aaf56066e5cac608a792590e45b82c20f3](https://github.com/sagemath/sagetrac-mirror/commit/206138aaf56066e5cac608a792590e45b82c20f3)\".",
    "created_at": "2016-08-24T09:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304302",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d5225c350c9b7e01708f68dddff955857a9aea5d](https://github.com/sagemath/sagetrac-mirror/commit/d5225c350c9b7e01708f68dddff955857a9aea5d)" to "[206138aaf56066e5cac608a792590e45b82c20f3](https://github.com/sagemath/sagetrac-mirror/commit/206138aaf56066e5cac608a792590e45b82c20f3)".



---

archive/issue_comments_304303.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/750a67dc0b20086165d87cbc83a92583f9ae9862\">750a67d</a></td><td><code>Add all of sage_setup to in_lib so that the doctest runner will not try to load the modules individually.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7621549c99e8d44ab95cd89511ecc14728908cb1\">7621549</a></td><td><code>Add from `__future__` import print_function, absolute_import to all (non-empty) modules for forward compatibility.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4570ef2b71f709571cf934340b5eb1186bdc3cfc\">4570ef2</a></td><td><code>Change the name attributes of the interpreter implementations to class</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e73f68efc9babddf9e21517558424118707dc3c0\">e73f68e</a></td><td><code>Update Makefile to more explicitly make targets for the files generated for the interpreters, as well as rebuild those targets when any of the autogen/interpreters sources change.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22a4ef548d7a7120e304501bf2253dc54431e3a3\">22a4ef5</a></td><td><code>Make Makefile simpler to understand / more robust by calling a function in sage_setup.autogen.interpreters that explicitly prints the names of all interpreters.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ffa16f40573a825413b9675e826bf519139bcfe9\">ffa16f4</a></td><td><code>Also avoid reexpansion of the $(INTERP_SRCS) variable.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d4dc46759275ce57091be664974fab8e53b02ac\">1d4dc46</a></td><td><code>Deduplicate code in anticipation of adding more generated file(s) for interpreters.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/baa34eb41acc5bcb3cf74f10c784f622e5910d2f\">baa34eb</a></td><td><code>Simplify Makefile further by replacing print_names() with a list_sources() that just prints the names of all generated source files.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f9c44d27f24871eff22f2e9aac3f6400a8f50ae\">9f9c44d</a></td><td><code>Fixes to testing sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/206138aaf56066e5cac608a792590e45b82c20f3\">206138a</a></td><td><code>Ensure that the value of in_lib is a bool.</code></td></tr></table>\n",
    "created_at": "2016-08-24T09:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304303",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/750a67dc0b20086165d87cbc83a92583f9ae9862">750a67d</a></td><td><code>Add all of sage_setup to in_lib so that the doctest runner will not try to load the modules individually.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7621549c99e8d44ab95cd89511ecc14728908cb1">7621549</a></td><td><code>Add from `__future__` import print_function, absolute_import to all (non-empty) modules for forward compatibility.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4570ef2b71f709571cf934340b5eb1186bdc3cfc">4570ef2</a></td><td><code>Change the name attributes of the interpreter implementations to class</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e73f68efc9babddf9e21517558424118707dc3c0">e73f68e</a></td><td><code>Update Makefile to more explicitly make targets for the files generated for the interpreters, as well as rebuild those targets when any of the autogen/interpreters sources change.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22a4ef548d7a7120e304501bf2253dc54431e3a3">22a4ef5</a></td><td><code>Make Makefile simpler to understand / more robust by calling a function in sage_setup.autogen.interpreters that explicitly prints the names of all interpreters.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ffa16f40573a825413b9675e826bf519139bcfe9">ffa16f4</a></td><td><code>Also avoid reexpansion of the $(INTERP_SRCS) variable.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d4dc46759275ce57091be664974fab8e53b02ac">1d4dc46</a></td><td><code>Deduplicate code in anticipation of adding more generated file(s) for interpreters.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/baa34eb41acc5bcb3cf74f10c784f622e5910d2f">baa34eb</a></td><td><code>Simplify Makefile further by replacing print_names() with a list_sources() that just prints the names of all generated source files.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f9c44d27f24871eff22f2e9aac3f6400a8f50ae">9f9c44d</a></td><td><code>Fixes to testing sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/206138aaf56066e5cac608a792590e45b82c20f3">206138a</a></td><td><code>Ensure that the value of in_lib is a bool.</code></td></tr></table>




---

archive/issue_comments_304304.json:
```json
{
    "body": "<a id='comment:21'></a>\nRebased again (incorporating some small Python3-compat fixes that were made in the meantime) and fixed some issues that were causing some tests to fail in the sage_setup package.",
    "created_at": "2016-08-24T09:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304304",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'></a>
Rebased again (incorporating some small Python3-compat fixes that were made in the meantime) and fixed some issues that were causing some tests to fail in the sage_setup package.



---

archive/issue_comments_304305.json:
```json
{
    "body": "<a id='comment:22'></a>\nJeroen, are you going to be finishing the review of this ticket?",
    "created_at": "2016-09-09T13:40:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304305",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>
Jeroen, are you going to be finishing the review of this ticket?



---

archive/issue_comments_304306.json:
```json
{
    "body": "<a id='comment:23'></a>\nWe should have talked about this ticket this week. I know I'm repeating myself, but I still don't like what you did to `src/Makefile`.\n\nAnyway, I'll look at the rest.",
    "created_at": "2016-09-09T13:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304306",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
We should have talked about this ticket this week. I know I'm repeating myself, but I still don't like what you did to `src/Makefile`.

Anyway, I'll look at the rest.



---

archive/issue_comments_304307.json:
```json
{
    "body": "<a id='comment:24'></a>\nWhat's the point of this:\n\n```\n# nodoctest -- __main__ modules are just for running the module from the\n# command line and should not be doctested\n```\n\nIt doesn't matter since the file doesn't have doctests anyway.",
    "created_at": "2016-09-09T13:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304307",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
What's the point of this:

```
# nodoctest -- __main__ modules are just for running the module from the
# command line and should not be doctested
```

It doesn't matter since the file doesn't have doctests anyway.



---

archive/issue_comments_304308.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [jdemeyer](#comment%3A24):\n> What's the point of this:\n> \n> ```\n> # nodoctest -- __main__ modules are just for running the module from the\n> # command line and should not be doctested\n> ```\n> \n> It doesn't matter since the file doesn't have doctests anyway.\n\n\nIf it didn't matter I wouldn't have even thought to put such a thing.  The doctest runner still imports a module to determine if there are any doctests in the module.  Since everything in a `__main__` module is is executed upon import, we don't want the doctest runner to even import it (there is no `if `__name__` == '__main__'` equivalent since it's a tautology in this case).",
    "created_at": "2016-09-09T14:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304308",
    "user": "https://github.com/embray"
}
```

<a id='comment:25'></a>
Replying to [jdemeyer](#comment%3A24):
> What's the point of this:
> 
> ```
> # nodoctest -- __main__ modules are just for running the module from the
> # command line and should not be doctested
> ```
> 
> It doesn't matter since the file doesn't have doctests anyway.


If it didn't matter I wouldn't have even thought to put such a thing.  The doctest runner still imports a module to determine if there are any doctests in the module.  Since everything in a `__main__` module is is executed upon import, we don't want the doctest runner to even import it (there is no `if `__name__` == '__main__'` equivalent since it's a tautology in this case).



---

archive/issue_comments_304309.json:
```json
{
    "body": "<a id='comment:26'></a>\nI agree with Jeroen (comment 23) that these Makefile tricks seem unnecessarily complicated.\nJust the list the few files that are there one by one in the Makefile.\n\nBy the way, #21480 puts this interpreter source generation business under control of setup.sh. So there would be an option to do these kind of things in Python, rather than in Makefile.",
    "created_at": "2016-09-16T04:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304309",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
I agree with Jeroen (comment 23) that these Makefile tricks seem unnecessarily complicated.
Just the list the few files that are there one by one in the Makefile.

By the way, #21480 puts this interpreter source generation business under control of setup.sh. So there would be an option to do these kind of things in Python, rather than in Makefile.



---

archive/issue_events_189331.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-18T21:17:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189331"
}
```



---

archive/issue_events_189332.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-18T21:17:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189332"
}
```



---

archive/issue_events_189333.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-18T21:17:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189333"
}
```



---

archive/issue_events_189334.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-18T21:17:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189334"
}
```



---

archive/issue_comments_304310.json:
```json
{
    "body": "<a id='comment:28'></a>\nSorry but I really need to push back on this one.  Earlier I did have a version of this that listed the files manually and then later one that was a little less manual but even then Jeroen complained that it made the file \"too long\" or something.\n\nI also reject the characterization of this has Makefile \"tricks\".  These are standard features of make that have been around forever.  These objections just sound like you've never encountered a non-trivial makefile before (which I know isn't true).\n\nHonestly I would just as soon get rid of this makefile entirely, but as long as it's there I see no problem here.",
    "created_at": "2016-09-22T15:35:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304310",
    "user": "https://github.com/embray"
}
```

<a id='comment:28'></a>
Sorry but I really need to push back on this one.  Earlier I did have a version of this that listed the files manually and then later one that was a little less manual but even then Jeroen complained that it made the file "too long" or something.

I also reject the characterization of this has Makefile "tricks".  These are standard features of make that have been around forever.  These objections just sound like you've never encountered a non-trivial makefile before (which I know isn't true).

Honestly I would just as soon get rid of this makefile entirely, but as long as it's there I see no problem here.



---

archive/issue_events_189335.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-09-22T15:35:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189335"
}
```



---

archive/issue_events_189336.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-09-22T15:35:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189336"
}
```



---

archive/issue_comments_304311.json:
```json
{
    "body": "<a id='comment:29'></a>\nIn the meantime you're holding up real work by bikeshedding over code that you arbitrarily think is \"too complicated\".",
    "created_at": "2016-09-22T15:36:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304311",
    "user": "https://github.com/embray"
}
```

<a id='comment:29'></a>
In the meantime you're holding up real work by bikeshedding over code that you arbitrarily think is "too complicated".



---

archive/issue_comments_304312.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [embray](#comment%3A28):\n> I also reject the characterization of this has Makefile \"tricks\".  These are standard features of make that have been around forever.  These objections just sound like you've never encountered a non-trivial makefile before (which I know isn't true).\n\n\nI've encountered too many.",
    "created_at": "2016-09-22T16:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304312",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Replying to [embray](#comment%3A28):
> I also reject the characterization of this has Makefile "tricks".  These are standard features of make that have been around forever.  These objections just sound like you've never encountered a non-trivial makefile before (which I know isn't true).


I've encountered too many.



---

archive/issue_comments_304313.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [embray](#comment%3A29):\n> In the meantime you're holding up real work by bikeshedding over code that you arbitrarily think is \"too complicated\".\n\n\nI understand but it's not just bikeshedding. It's also about readability. Every time I look at that `src/Makefile` I really have to think hard to understand what is going on. And usually, that is a bad sign.\n\nIf you convince me that all that extra complexity is really needed, then I don't mind to merge this. But at this point, I am not yet convinced.",
    "created_at": "2016-09-23T09:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304313",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
Replying to [embray](#comment%3A29):
> In the meantime you're holding up real work by bikeshedding over code that you arbitrarily think is "too complicated".


I understand but it's not just bikeshedding. It's also about readability. Every time I look at that `src/Makefile` I really have to think hard to understand what is going on. And usually, that is a bad sign.

If you convince me that all that extra complexity is really needed, then I don't mind to merge this. But at this point, I am not yet convinced.



---

archive/issue_comments_304314.json:
```json
{
    "body": "<a id='comment:32'></a>\nI find that unconvincing--have you ever looked at sage's toplevel Makefile?  *That's* confusing.  Given the other complexities of sage I do find nitpicking over the (highly subjective) \"readability\" of one makefile confusing.  Maybe you're just not used to reading makefiles that happen to make use of these features, but I have seen plenty before I don't think it's unreadable at all.\n\nIf we're going to remove this makefile eventually anyways, which we should, then just let it be.",
    "created_at": "2016-09-23T11:25:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304314",
    "user": "https://github.com/embray"
}
```

<a id='comment:32'></a>
I find that unconvincing--have you ever looked at sage's toplevel Makefile?  *That's* confusing.  Given the other complexities of sage I do find nitpicking over the (highly subjective) "readability" of one makefile confusing.  Maybe you're just not used to reading makefiles that happen to make use of these features, but I have seen plenty before I don't think it's unreadable at all.

If we're going to remove this makefile eventually anyways, which we should, then just let it be.



---

archive/issue_comments_304315.json:
```json
{
    "body": "<a id='comment:33'></a>\nAnd yes, it's needed, because the previous file was actually wrong.  I already demonstrated this to you before weeks ago.  If you're going to use make to require that generated files are up to date, then you have to actually provide the names of those generated files.  Most of the time that can be provided implicitly by a pattern (e.g. `%.c => %.o`) but that's not the case here.  In part because make was really not designed for stuff like this in the first place.",
    "created_at": "2016-09-23T11:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304315",
    "user": "https://github.com/embray"
}
```

<a id='comment:33'></a>
And yes, it's needed, because the previous file was actually wrong.  I already demonstrated this to you before weeks ago.  If you're going to use make to require that generated files are up to date, then you have to actually provide the names of those generated files.  Most of the time that can be provided implicitly by a pattern (e.g. `%.c => %.o`) but that's not the case here.  In part because make was really not designed for stuff like this in the first place.



---

archive/issue_comments_304316.json:
```json
{
    "body": "<a id='comment:34'></a>\nOn further reflection, by my own logic if my preference is to remove the makefile entirely then it doesn't matter what's in there. So if it'll help get this done I'll remove the changes changes and focus on helping the efforts to improve Sage's build.",
    "created_at": "2016-09-23T21:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304316",
    "user": "https://github.com/embray"
}
```

<a id='comment:34'></a>
On further reflection, by my own logic if my preference is to remove the makefile entirely then it doesn't matter what's in there. So if it'll help get this done I'll remove the changes changes and focus on helping the efforts to improve Sage's build.



---

archive/issue_comments_304317.json:
```json
{
    "body": "<a id='comment:35'></a>\nOK, maybe I already I asked you this, but why run a Python command to determine `INTERP_SOURCES`? Why not a simple wildcard?\n\nEdit: never mind, this `INTERP_SOURCES` has **generated** sources.",
    "created_at": "2016-09-24T13:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304317",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>
OK, maybe I already I asked you this, but why run a Python command to determine `INTERP_SOURCES`? Why not a simple wildcard?

Edit: never mind, this `INTERP_SOURCES` has **generated** sources.



---

archive/issue_comments_304318.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [embray](#comment%3A33):\n> And yes, it's needed, because the previous file was actually wrong.\n\n\nMaybe *technically* wrong but right for all practical purposes. Given that all these files are generated at the same time together, there is really nothing wrong with relying on the timestamp of just file.",
    "created_at": "2016-09-24T13:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304318",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>
Replying to [embray](#comment%3A33):
> And yes, it's needed, because the previous file was actually wrong.


Maybe *technically* wrong but right for all practical purposes. Given that all these files are generated at the same time together, there is really nothing wrong with relying on the timestamp of just file.



---

archive/issue_comments_304319.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [embray](#comment%3A25):\n> The doctest runner still imports a module to determine if there are any doctests in the module.\n\n\nSorry to say this, but that can't be right. The Sage doctester looks at the files textually to determine the doctests. If what you say is true, we would have the same problem for the docbuilder (`src/sage_setup/docbuild/__main__.py`) but we don't...\n\nFor the sake of simplicity, I would remove that `nodoctests` block.",
    "created_at": "2016-09-24T13:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304319",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
Replying to [embray](#comment%3A25):
> The doctest runner still imports a module to determine if there are any doctests in the module.


Sorry to say this, but that can't be right. The Sage doctester looks at the files textually to determine the doctests. If what you say is true, we would have the same problem for the docbuilder (`src/sage_setup/docbuild/__main__.py`) but we don't...

For the sake of simplicity, I would remove that `nodoctests` block.



---

archive/issue_comments_304320.json:
```json
{
    "body": "<a id='comment:38'></a>\nHowever the doctester determines the doctests, the fact remains that at some point it *imports* the module.  That happens here: https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/doctest/sources.py#n670\n\nThe reason that isn't a problem for `src/sage_setup/docbuild/__main__.py` (and believe me, this had me pulling my hair out) is that it is listed in this insidious [`in_lib`](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/doctest/sources.py#n575) attribute.  I described more problems with this in #20729.\n\nBut if you don't believe me try removing it yourself and see.  Like I said, I wouldn't have even thought to add such a thing in the first place if I didn't have a good reason.",
    "created_at": "2016-09-26T11:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304320",
    "user": "https://github.com/embray"
}
```

<a id='comment:38'></a>
However the doctester determines the doctests, the fact remains that at some point it *imports* the module.  That happens here: https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/doctest/sources.py#n670

The reason that isn't a problem for `src/sage_setup/docbuild/__main__.py` (and believe me, this had me pulling my hair out) is that it is listed in this insidious [`in_lib`](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/doctest/sources.py#n575) attribute.  I described more problems with this in #20729.

But if you don't believe me try removing it yourself and see.  Like I said, I wouldn't have even thought to add such a thing in the first place if I didn't have a good reason.



---

archive/issue_comments_304321.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [jdemeyer](#comment%3A36):\n> Replying to [embray](#comment%3A33):\n> > And yes, it's needed, because the previous file was actually wrong.\n\n> \n> Maybe *technically* wrong but right for all practical purposes. Given that all these files are generated at the same time together, there is really nothing wrong with relying on the timestamp of just file.\n\n\nI encountered cases in practice where this was not reliable.  But that was months ago now and I can't recall the specifics.  Like I said, it doesn't matter. I don't care anymore since I'm going to work on getting rid of the makefile anyways.",
    "created_at": "2016-09-26T11:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304321",
    "user": "https://github.com/embray"
}
```

<a id='comment:39'></a>
Replying to [jdemeyer](#comment%3A36):
> Replying to [embray](#comment%3A33):
> > And yes, it's needed, because the previous file was actually wrong.

> 
> Maybe *technically* wrong but right for all practical purposes. Given that all these files are generated at the same time together, there is really nothing wrong with relying on the timestamp of just file.


I encountered cases in practice where this was not reliable.  But that was months ago now and I can't recall the specifics.  Like I said, it doesn't matter. I don't care anymore since I'm going to work on getting rid of the makefile anyways.



---

archive/issue_comments_304322.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [embray](#comment%3A38):\n> However the doctester determines the doctests, the fact remains that at some point it *imports* the module.  That happens here: https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/doctest/sources.py#n670\n> \n> The reason that isn't a problem for `src/sage_setup/docbuild/__main__.py` (and believe me, this had me pulling my hair out) is that it is listed in this insidious [`in_lib`](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/doctest/sources.py#n575) attribute.  I described more problems with this in #20729.\n\n\nOK, I commented on that ticket. Let me know what you think.",
    "created_at": "2016-09-26T15:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304322",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>
Replying to [embray](#comment%3A38):
> However the doctester determines the doctests, the fact remains that at some point it *imports* the module.  That happens here: https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/doctest/sources.py#n670
> 
> The reason that isn't a problem for `src/sage_setup/docbuild/__main__.py` (and believe me, this had me pulling my hair out) is that it is listed in this insidious [`in_lib`](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/doctest/sources.py#n575) attribute.  I described more problems with this in #20729.


OK, I commented on that ticket. Let me know what you think.



---

archive/issue_events_189337.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-01-09T09:03:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189337"
}
```



---

archive/issue_events_189338.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-01-09T09:03:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189338"
}
```



---

archive/issue_comments_304323.json:
```json
{
    "body": "<a id='comment:42'></a>\nNeeds to be rebased again...\n\nAll the argument about the makefile is a moot point now that that makefile has been removed.",
    "created_at": "2017-03-03T13:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304323",
    "user": "https://github.com/embray"
}
```

<a id='comment:42'></a>
Needs to be rebased again...

All the argument about the makefile is a moot point now that that makefile has been removed.



---

archive/issue_comments_304324.json:
```json
{
    "body": "<a id='comment:43'></a>\nAlso #20729 has been fixed in the mean time, so you shouldn't need to mess with the doctester anymore...",
    "created_at": "2017-03-03T14:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304324",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>
Also #20729 has been fixed in the mean time, so you shouldn't need to mess with the doctester anymore...



---

archive/issue_comments_304325.json:
```json
{
    "body": "<a id='comment:44'></a>\nRight, thanks for the reminder.  I'll work on this when I get back from vacation.",
    "created_at": "2017-03-03T14:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304325",
    "user": "https://github.com/embray"
}
```

<a id='comment:44'></a>
Right, thanks for the reminder.  I'll work on this when I get back from vacation.



---

archive/issue_comments_304326.json:
```json
{
    "body": "<a id='comment:45'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bede9b3ad596b1fcddaa34a7b1d50b274d7301ae\">bede9b3</a></td><td><code>interpreters.py was quite long, so converted it to a package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/320b3c491fb1a1bb791aa888b4a2a02c118b25b1\">320b3c4</a></td><td><code>Changed indentation on several chunks of template code that was previously broken out of the normal Python indentation flow.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c34682461b6c80ecbce447cef66df8969676a3ac\">c346824</a></td><td><code>Fixes a newline that messed up the formtting a bit.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9eb811f093013373e6afe223e19d68f5fcafbaeb\">9eb811f</a></td><td><code>One more whitespae fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89b48bec1a665bbe5586e41765b519f1ce4c9384\">89b48be</a></td><td><code>Add some `__main__` modules for ease of testing.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55853a74189befbe78c8bfa6d374708fb639696b\">55853a7</a></td><td><code>Just import everything into the top-level `__init__` to rebuild the original sage_setup.autogen.interpreters namespace.  This enures that all the tests pass.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e5cf7546de425e11aea790b899c6193163d4f49\">9e5cf75</a></td><td><code>Add from `__future__` import print_function, absolute_import to all (non-empty) modules for forward compatibility.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45b2847a5e80c4e4642804107dfa3a95037e8d94\">45b2847</a></td><td><code>Change the name attributes of the interpreter implementations to class</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35300469c908556501b697067fdcb84ee4be0b44\">3530046</a></td><td><code>Deduplicate code in anticipation of adding more generated file(s) for interpreters.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04c22e9aba7758da14974d5a3ba53f09349ab628\">04c22e9</a></td><td><code>More programmatic discovery of interpreter types rather than manually listing them</code></td></tr></table>\n",
    "created_at": "2017-04-07T12:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304326",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bede9b3ad596b1fcddaa34a7b1d50b274d7301ae">bede9b3</a></td><td><code>interpreters.py was quite long, so converted it to a package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/320b3c491fb1a1bb791aa888b4a2a02c118b25b1">320b3c4</a></td><td><code>Changed indentation on several chunks of template code that was previously broken out of the normal Python indentation flow.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c34682461b6c80ecbce447cef66df8969676a3ac">c346824</a></td><td><code>Fixes a newline that messed up the formtting a bit.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9eb811f093013373e6afe223e19d68f5fcafbaeb">9eb811f</a></td><td><code>One more whitespae fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89b48bec1a665bbe5586e41765b519f1ce4c9384">89b48be</a></td><td><code>Add some `__main__` modules for ease of testing.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55853a74189befbe78c8bfa6d374708fb639696b">55853a7</a></td><td><code>Just import everything into the top-level `__init__` to rebuild the original sage_setup.autogen.interpreters namespace.  This enures that all the tests pass.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e5cf7546de425e11aea790b899c6193163d4f49">9e5cf75</a></td><td><code>Add from `__future__` import print_function, absolute_import to all (non-empty) modules for forward compatibility.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45b2847a5e80c4e4642804107dfa3a95037e8d94">45b2847</a></td><td><code>Change the name attributes of the interpreter implementations to class</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35300469c908556501b697067fdcb84ee4be0b44">3530046</a></td><td><code>Deduplicate code in anticipation of adding more generated file(s) for interpreters.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04c22e9aba7758da14974d5a3ba53f09349ab628">04c22e9</a></td><td><code>More programmatic discovery of interpreter types rather than manually listing them</code></td></tr></table>




---

archive/issue_comments_304327.json:
```json
{
    "body": "**Changing commit** from \"[206138aaf56066e5cac608a792590e45b82c20f3](https://github.com/sagemath/sagetrac-mirror/commit/206138aaf56066e5cac608a792590e45b82c20f3)\" to \"[04c22e9aba7758da14974d5a3ba53f09349ab628](https://github.com/sagemath/sagetrac-mirror/commit/04c22e9aba7758da14974d5a3ba53f09349ab628)\".",
    "created_at": "2017-04-07T12:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304327",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[206138aaf56066e5cac608a792590e45b82c20f3](https://github.com/sagemath/sagetrac-mirror/commit/206138aaf56066e5cac608a792590e45b82c20f3)" to "[04c22e9aba7758da14974d5a3ba53f09349ab628](https://github.com/sagemath/sagetrac-mirror/commit/04c22e9aba7758da14974d5a3ba53f09349ab628)".



---

archive/issue_comments_304328.json:
```json
{
    "body": "<a id='comment:46'></a>\nRebased again, on top of current develop.  That made this ticket much simpler, now that it doesn't require any build system changes.\n\nThere's not much to this now other than refactoring and code reformatting--no real substantive changes.  I made sure to incorporate changes to the `interpreters` module that have been made since I last worked on this.",
    "created_at": "2017-04-07T12:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304328",
    "user": "https://github.com/embray"
}
```

<a id='comment:46'></a>
Rebased again, on top of current develop.  That made this ticket much simpler, now that it doesn't require any build system changes.

There's not much to this now other than refactoring and code reformatting--no real substantive changes.  I made sure to incorporate changes to the `interpreters` module that have been made since I last worked on this.



---

archive/issue_comments_304329.json:
```json
{
    "body": "<a id='comment:47'></a>\nBack to needs review?",
    "created_at": "2017-04-07T15:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304329",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:47'></a>
Back to needs review?



---

archive/issue_events_189339.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-07T15:07:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189339"
}
```



---

archive/issue_events_189340.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-07T15:07:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189340"
}
```



---

archive/issue_comments_304330.json:
```json
{
    "body": "<a id='comment:48'></a>\nYeah, meant to do that.",
    "created_at": "2017-04-07T15:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304330",
    "user": "https://github.com/embray"
}
```

<a id='comment:48'></a>
Yeah, meant to do that.



---

archive/issue_events_189341.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-11T12:42:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189341"
}
```



---

archive/issue_events_189342.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-11T12:42:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189342"
}
```



---

archive/issue_comments_304331.json:
```json
{
    "body": "<a id='comment:49'></a>\nWould be nice to get this taken care of finally.",
    "created_at": "2017-04-11T12:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304331",
    "user": "https://github.com/embray"
}
```

<a id='comment:49'></a>
Would be nice to get this taken care of finally.



---

archive/issue_comments_304332.json:
```json
{
    "body": "<a id='comment:50'></a>\nConflicts with #20238 in various ways....",
    "created_at": "2017-04-11T13:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304332",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:50'></a>
Conflicts with #20238 in various ways....



---

archive/issue_comments_304333.json:
```json
{
    "body": "<a id='comment:51'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a47bb081f3a45dde575aabd8156e391006751988\">a47bb08</a></td><td><code>interpreters.py was quite long, so converted it to a package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4df82c86615db56f471f5510c84527b80c9d65fe\">4df82c8</a></td><td><code>Changed indentation on several chunks of template code that was previously broken out of the normal Python indentation flow.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/721cf507b4e25f70a14b5aa6e3f496f0bf861152\">721cf50</a></td><td><code>Fixes a newline that messed up the formtting a bit.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45ce2f173a868403eccb5db64a27745e70550608\">45ce2f1</a></td><td><code>One more whitespae fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6620390654dc1dab0fcbff980b6e3c22388005c3\">6620390</a></td><td><code>Add some `__main__` modules for ease of testing.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/241dc1b24009f1f0bfffde5d29fc4b1ca331e162\">241dc1b</a></td><td><code>Just import everything into the top-level `__init__` to rebuild the original sage_setup.autogen.interpreters namespace.  This enures that all the tests pass.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb5acf9882bdaae46fc74b39dd095c986c5fe565\">eb5acf9</a></td><td><code>Add from `__future__` import print_function, absolute_import to all (non-empty) modules for forward compatibility.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f46f30e57afb3c9532e3a4e6ed9c9b7bfce796f\">1f46f30</a></td><td><code>Change the name attributes of the interpreter implementations to class</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f039d8cd9a9c242b2c9f8adb88d1cfab6ff0bec6\">f039d8c</a></td><td><code>Deduplicate code in anticipation of adding more generated file(s) for interpreters.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b34d5d8fc509f6773fe3c72c3d1b0e24a358efde\">b34d5d8</a></td><td><code>More programmatic discovery of interpreter types rather than manually listing them</code></td></tr></table>\n",
    "created_at": "2017-04-11T13:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304333",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a47bb081f3a45dde575aabd8156e391006751988">a47bb08</a></td><td><code>interpreters.py was quite long, so converted it to a package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4df82c86615db56f471f5510c84527b80c9d65fe">4df82c8</a></td><td><code>Changed indentation on several chunks of template code that was previously broken out of the normal Python indentation flow.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/721cf507b4e25f70a14b5aa6e3f496f0bf861152">721cf50</a></td><td><code>Fixes a newline that messed up the formtting a bit.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45ce2f173a868403eccb5db64a27745e70550608">45ce2f1</a></td><td><code>One more whitespae fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6620390654dc1dab0fcbff980b6e3c22388005c3">6620390</a></td><td><code>Add some `__main__` modules for ease of testing.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/241dc1b24009f1f0bfffde5d29fc4b1ca331e162">241dc1b</a></td><td><code>Just import everything into the top-level `__init__` to rebuild the original sage_setup.autogen.interpreters namespace.  This enures that all the tests pass.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb5acf9882bdaae46fc74b39dd095c986c5fe565">eb5acf9</a></td><td><code>Add from `__future__` import print_function, absolute_import to all (non-empty) modules for forward compatibility.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f46f30e57afb3c9532e3a4e6ed9c9b7bfce796f">1f46f30</a></td><td><code>Change the name attributes of the interpreter implementations to class</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f039d8cd9a9c242b2c9f8adb88d1cfab6ff0bec6">f039d8c</a></td><td><code>Deduplicate code in anticipation of adding more generated file(s) for interpreters.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b34d5d8fc509f6773fe3c72c3d1b0e24a358efde">b34d5d8</a></td><td><code>More programmatic discovery of interpreter types rather than manually listing them</code></td></tr></table>




---

archive/issue_comments_304334.json:
```json
{
    "body": "**Changing commit** from \"[04c22e9aba7758da14974d5a3ba53f09349ab628](https://github.com/sagemath/sagetrac-mirror/commit/04c22e9aba7758da14974d5a3ba53f09349ab628)\" to \"[b34d5d8fc509f6773fe3c72c3d1b0e24a358efde](https://github.com/sagemath/sagetrac-mirror/commit/b34d5d8fc509f6773fe3c72c3d1b0e24a358efde)\".",
    "created_at": "2017-04-11T13:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304334",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[04c22e9aba7758da14974d5a3ba53f09349ab628](https://github.com/sagemath/sagetrac-mirror/commit/04c22e9aba7758da14974d5a3ba53f09349ab628)" to "[b34d5d8fc509f6773fe3c72c3d1b0e24a358efde](https://github.com/sagemath/sagetrac-mirror/commit/b34d5d8fc509f6773fe3c72c3d1b0e24a358efde)".



---

archive/issue_comments_304335.json:
```json
{
    "body": "**Dependencies:** #20238",
    "created_at": "2017-04-11T13:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304335",
    "user": "https://github.com/embray"
}
```

**Dependencies:** #20238



---

archive/issue_comments_304336.json:
```json
{
    "body": "<a id='comment:52'></a>\nOnly minor conflicts.  I've rebased on your branch in #20238.",
    "created_at": "2017-04-11T13:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304336",
    "user": "https://github.com/embray"
}
```

<a id='comment:52'></a>
Only minor conflicts.  I've rebased on your branch in #20238.



---

archive/issue_comments_304337.json:
```json
{
    "body": "<a id='comment:53'></a>\nThis looks like a good addition and will allow to close #21459 as a temporary but quick solution for Cygwin.\n\nWhat about the dependency on #20238?\nCan we make the dependency the other way around?\nOr will #20238 be finished soon?",
    "created_at": "2017-04-25T11:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304337",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:53'></a>
This looks like a good addition and will allow to close #21459 as a temporary but quick solution for Cygwin.

What about the dependency on #20238?
Can we make the dependency the other way around?
Or will #20238 be finished soon?



---

archive/issue_comments_304338.json:
```json
{
    "body": "**Reviewer:** Jean-Pierre Flori",
    "created_at": "2017-04-25T11:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304338",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Reviewer:** Jean-Pierre Flori



---

archive/issue_comments_304339.json:
```json
{
    "body": "<a id='comment:54'></a>\nReplying to [jpflori](#comment%3A53):\n> Or will #20238 be finished soon?\n\n\nIt is finished already since almost a month.",
    "created_at": "2017-04-25T12:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304339",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:54'></a>
Replying to [jpflori](#comment%3A53):
> Or will #20238 be finished soon?


It is finished already since almost a month.



---

archive/issue_comments_304340.json:
```json
{
    "body": "<a id='comment:55'></a>\nNow that you've given #20238 a positive review this should be fine as is.",
    "created_at": "2017-04-25T14:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304340",
    "user": "https://github.com/embray"
}
```

<a id='comment:55'></a>
Now that you've given #20238 a positive review this should be fine as is.



---

archive/issue_events_189343.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2017-04-27T11:51:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189343"
}
```



---

archive/issue_events_189344.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2017-04-27T11:51:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189344"
}
```



---

archive/issue_comments_304341.json:
```json
{
    "body": "<a id='comment:56'></a>\nThe split here is a very good idea.\nThe autogenerating file was huge and a pain to parse for a human.",
    "created_at": "2017-04-27T11:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304341",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:56'></a>
The split here is a very good idea.
The autogenerating file was huge and a pain to parse for a human.



---

archive/issue_events_189345.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-28T23:54:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189345"
}
```



---

archive/issue_events_189346.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-28T23:54:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20730#event-189346"
}
```



---

archive/issue_comments_304342.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/interpreters-refactor](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/interpreters-refactor)\" to \"[b34d5d8fc509f6773fe3c72c3d1b0e24a358efde](https://github.com/sagemath/sagetrac-mirror/commit/b34d5d8fc509f6773fe3c72c3d1b0e24a358efde)\".",
    "created_at": "2017-04-28T23:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20730#issuecomment-304342",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/embray/interpreters-refactor](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/interpreters-refactor)" to "[b34d5d8fc509f6773fe3c72c3d1b0e24a358efde](https://github.com/sagemath/sagetrac-mirror/commit/b34d5d8fc509f6773fe3c72c3d1b0e24a358efde)".
