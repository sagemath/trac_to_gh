# Issue 20354: PPLBackend: Add support for integer variables

archive/issues_020117.json:
```json
{
    "body": "PPL's solver is a rational *MIP* solver. \nIts support for integer variables should be exposed in Sage.\n#20351 does this for the PPL wrapper classes.\n\nThis ticket updates the `PPLBackend` class.\n\nCC:  @dimpase @videlec @jdemeyer\n\nKeywords: lp\n\nBranch/Commit: 144a970ae97b209acccf6d38de540401c8c8a587\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #20351,#20303\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20354\n\n",
    "closed_at": "2016-04-06T23:03:32Z",
    "created_at": "2016-04-04T07:30:19Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "PPLBackend: Add support for integer variables",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20354",
    "user": "https://github.com/mkoeppe"
}
```
PPL's solver is a rational *MIP* solver. 
Its support for integer variables should be exposed in Sage.
#20351 does this for the PPL wrapper classes.

This ticket updates the `PPLBackend` class.

CC:  @dimpase @videlec @jdemeyer

Keywords: lp

Branch/Commit: 144a970ae97b209acccf6d38de540401c8c8a587

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #20351,#20303

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20354





---

archive/issue_comments_295105.json:
```json
{
    "body": "<a id='comment:3'></a>Currently this branch is on top of the branches for #20351,#20303.\n\nNeeds review.\n\n---\nLast 10 new commits:",
    "created_at": "2016-04-05T18:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295105",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>Currently this branch is on top of the branches for #20351,#20303.

Needs review.

---
Last 10 new commits:



---

archive/issue_comments_295106.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-04-05T18:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295106",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_295107.json:
```json
{
    "body": "<a id='comment:5'></a>hmm:\n\n```\ncpdef int add_variable(self, lower_bound=0, upper_bound=None, binary=False, continuous=False, integer=False, obj=0, name=None) except -1:\n```\nshould we really pick a default (`continuous` seems to be the most natural) rather than being it total denial?",
    "created_at": "2016-04-05T19:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295107",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>hmm:

```
cpdef int add_variable(self, lower_bound=0, upper_bound=None, binary=False, continuous=False, integer=False, obj=0, name=None) except -1:
```
should we really pick a default (`continuous` seems to be the most natural) rather than being it total denial?



---

archive/issue_comments_295108.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 dimpase]:\n> hmm:\n> \n> ```\n> cpdef int add_variable(self, lower_bound=0, upper_bound=None, binary=False, continuous=False, integer=False, obj=0, name=None) except -1:\n> ```\n> should we really pick a default (`continuous` seems to be the most natural) rather than being it total denial?\n\n\nThis idiosyncratic interface (including the documentation that says that the default value of 'continuous' is True) matches that of the other backends. \nI would probably express this by making all arglist-default `None` to indicate complicated defaulting semantics. But it's not the job of this ticket to make changes throughout all backends.",
    "created_at": "2016-04-05T19:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295108",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>Replying to [comment:5 dimpase]:
> hmm:
> 
> ```
> cpdef int add_variable(self, lower_bound=0, upper_bound=None, binary=False, continuous=False, integer=False, obj=0, name=None) except -1:
> ```
> should we really pick a default (`continuous` seems to be the most natural) rather than being it total denial?


This idiosyncratic interface (including the documentation that says that the default value of 'continuous' is True) matches that of the other backends. 
I would probably express this by making all arglist-default `None` to indicate complicated defaulting semantics. But it's not the job of this ticket to make changes throughout all backends.



---

archive/issue_comments_295109.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 mkoeppe]:\n> Replying to [comment:5 dimpase]:\n> > hmm:\n> > \n> > ```\n> > cpdef int add_variable(self, lower_bound=0, upper_bound=None, binary=False, continuous=False, integer=False, obj=0, name=None) except -1:\n> > ```\n> > should we really pick a default (`continuous` seems to be the most natural) rather than being it total denial?\n\n> \n> This idiosyncratic interface (including the documentation that says that the default value of 'continuous' is True) matches that of the other backends. \n\n\nbut this is a line from your update, why do you set `continuous=False`?\nSomething you changed while developing and then forgot to revert?",
    "created_at": "2016-04-05T20:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295109",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>Replying to [comment:6 mkoeppe]:
> Replying to [comment:5 dimpase]:
> > hmm:
> > 
> > ```
> > cpdef int add_variable(self, lower_bound=0, upper_bound=None, binary=False, continuous=False, integer=False, obj=0, name=None) except -1:
> > ```
> > should we really pick a default (`continuous` seems to be the most natural) rather than being it total denial?

> 
> This idiosyncratic interface (including the documentation that says that the default value of 'continuous' is True) matches that of the other backends. 


but this is a line from your update, why do you set `continuous=False`?
Something you changed while developing and then forgot to revert?



---

archive/issue_comments_295110.json:
```json
{
    "body": "<a id='comment:8'></a>No, `continuous=True` in the arglist cannot work\nbecause then one cannot distinguish \n- `add_variable(..., binary=True)` (which should create a binary variable)\n- `add_variable(..., binary=True, continuous=True)` (which should raise an error).\nAll backends implement the defaulting to continuous variables imperatively.\n\nPreviously it did not matter because the PPL backend was simply ignoring these parameters altogether.\n\n(I've added a dicussion of this interface to ticket #20324.)",
    "created_at": "2016-04-05T20:17:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295110",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>No, `continuous=True` in the arglist cannot work
because then one cannot distinguish 
- `add_variable(..., binary=True)` (which should create a binary variable)
- `add_variable(..., binary=True, continuous=True)` (which should raise an error).
All backends implement the defaulting to continuous variables imperatively.

Previously it did not matter because the PPL backend was simply ignoring these parameters altogether.

(I've added a dicussion of this interface to ticket #20324.)



---

archive/issue_comments_295111.json:
```json
{
    "body": "<a id='comment:9'></a>OK, I see. I think that the design with these logical switches is just wrong. There should be `variable_type` parameter, defaulting to `continuous`, with other possible values `binary` and `integer`.",
    "created_at": "2016-04-05T20:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295111",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>OK, I see. I think that the design with these logical switches is just wrong. There should be `variable_type` parameter, defaulting to `continuous`, with other possible values `binary` and `integer`.



---

archive/issue_comments_295112.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 dimpase]:\n> I think that the design with these logical switches is just wrong. There should be `variable_type` parameter, defaulting to `continuous`, with other possible values `binary` and `integer`. \n\n\nI agree; at least it matches `is_variable_continuous` etc.; but see `set_variable_type`, which expresses the same thing using 1, 0, -1. \nIt's one of several idiosyncrasies of the backend interface.",
    "created_at": "2016-04-05T20:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295112",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Replying to [comment:9 dimpase]:
> I think that the design with these logical switches is just wrong. There should be `variable_type` parameter, defaulting to `continuous`, with other possible values `binary` and `integer`. 


I agree; at least it matches `is_variable_continuous` etc.; but see `set_variable_type`, which expresses the same thing using 1, 0, -1. 
It's one of several idiosyncrasies of the backend interface.



---

archive/issue_comments_295113.json:
```json
{
    "body": "<a id='comment:11'></a>How about introducing the `variable_type` parameter and deprecating the rest? (This is probably quite a bit of things to be changed then, in graphs/combinatorics code)\nSimilarly, let `set_variable_type` accept the same range of values, and deprecate 0,1,-1 ?",
    "created_at": "2016-04-05T20:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295113",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>How about introducing the `variable_type` parameter and deprecating the rest? (This is probably quite a bit of things to be changed then, in graphs/combinatorics code)
Similarly, let `set_variable_type` accept the same range of values, and deprecate 0,1,-1 ?



---

archive/issue_comments_295114.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 dimpase]:\n> How about introducing the `variable_type` parameter and deprecating the rest? (This is probably quite a bit of things to be changed then, in graphs/combinatorics code)\n> Similarly, let `set_variable_type` accept the same range of values, and deprecate 0,1,-1 ?\n\n\nSounds good; I have created ticket #20362 for this. Let's move further discussion of backend interface redesign there.\n\nIn the meantime, this ticket still needs review.",
    "created_at": "2016-04-05T21:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295114",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Replying to [comment:11 dimpase]:
> How about introducing the `variable_type` parameter and deprecating the rest? (This is probably quite a bit of things to be changed then, in graphs/combinatorics code)
> Similarly, let `set_variable_type` accept the same range of values, and deprecate 0,1,-1 ?


Sounds good; I have created ticket #20362 for this. Let's move further discussion of backend interface redesign there.

In the meantime, this ticket still needs review.



---

archive/issue_comments_295115.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-04-05T22:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295115",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_295116.json:
```json
{
    "body": "<a id='comment:13'></a>OK, looks good.",
    "created_at": "2016-04-05T22:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295116",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>OK, looks good.



---

archive/issue_comments_295117.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-04-06T23:03:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20354#issuecomment-295117",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_055182.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-06T23:03:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20354",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20354#event-55182"
}
```
