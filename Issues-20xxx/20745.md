# Issue 20745: Implement simplicial sets

archive/issues_020508.json:
```json
{
    "assignees": [],
    "body": "As the summary says...\n\nFor possible follow-up tickets:\n\n- simplicial abelian groups and Eilenberg-Mac Lane spaces.\n- effective homology and related computations that Kenzo can do but we can't yet.\n- mapping spaces.\n- Discrete Morse theory.\n- universal covering spaces for classifying spaces, support for maps between infinite simplicial sets.\n\n\nCC:  @tscrim @sagetrac-jeremy-l-martin @cnassau\n\nKeywords: **days74**\n\nBranch: **[35790d2](https://github.com/sagemath/sagetrac-mirror/commit/35790d29bdbe4a9b61b80076e4acc64eb650ea03)**\n\nReviewer: **Christian Nassau**\n\nAuthor: **John Palmieri**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20745_\n\n",
    "closed_at": "2017-01-18T20:39:53Z",
    "created_at": "2016-06-01T09:23:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20topology",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement simplicial sets",
    "type": "issue",
    "updated_at": "2017-03-18T10:22:57Z",
    "url": "https://github.com/sagemath/sage/issues/20745",
    "user": "https://github.com/jhpalmieri"
}
```
As the summary says...

For possible follow-up tickets:

- simplicial abelian groups and Eilenberg-Mac Lane spaces.
- effective homology and related computations that Kenzo can do but we can't yet.
- mapping spaces.
- Discrete Morse theory.
- universal covering spaces for classifying spaces, support for maps between infinite simplicial sets.


CC:  @tscrim @sagetrac-jeremy-l-martin @cnassau

Keywords: **days74**

Branch: **[35790d2](https://github.com/sagemath/sagetrac-mirror/commit/35790d29bdbe4a9b61b80076e4acc64eb650ea03)**

Reviewer: **Christian Nassau**

Author: **John Palmieri**

_Issue created by migration from https://trac.sagemath.org/ticket/20745_





---

archive/issue_events_274180.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-06-01T09:23:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274180"
}
```



---

archive/issue_events_274181.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-06-01T09:23:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20topology",
    "label_color": "0000ff",
    "label_name": "component: algebraic topology",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274181"
}
```



---

archive/issue_events_274182.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-06-01T09:23:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274182"
}
```



---

archive/issue_events_274183.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-06-01T09:23:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274183"
}
```



---

archive/issue_comments_303267.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nHere is an initial implementation. It is not ready for review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b63026d615a70df1e1c54be09df357da2f320150\">b63026d</a></td><td><code>simplicial sets, initial implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de4e351cf4f30b5a197fd302cd2c9e5a347f3f4d\">de4e351</a></td><td><code>simplicial sets: construct CP^n using Kenzo output.</code></td></tr></table>\n",
    "created_at": "2016-06-02T12:06:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303267",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">Comment 1</div>

Here is an initial implementation. It is not ready for review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b63026d615a70df1e1c54be09df357da2f320150">b63026d</a></td><td><code>simplicial sets, initial implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de4e351cf4f30b5a197fd302cd2c9e5a347f3f4d">de4e351</a></td><td><code>simplicial sets: construct CP^n using Kenzo output.</code></td></tr></table>




---

archive/issue_comments_303268.json:
```json
{
    "body": "Branch: **[u/jhpalmieri/simplicial_sets](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/simplicial_sets)**",
    "created_at": "2016-06-02T12:06:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303268",
    "user": "https://github.com/jhpalmieri"
}
```

Branch: **[u/jhpalmieri/simplicial_sets](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/simplicial_sets)**



---

archive/issue_comments_303269.json:
```json
{
    "body": "Commit: **[de4e351](https://github.com/sagemath/sagetrac-mirror/commit/de4e351cf4f30b5a197fd302cd2c9e5a347f3f4d)**",
    "created_at": "2016-06-02T12:06:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303269",
    "user": "https://github.com/jhpalmieri"
}
```

Commit: **[de4e351](https://github.com/sagemath/sagetrac-mirror/commit/de4e351cf4f30b5a197fd302cd2c9e5a347f3f4d)**



---

archive/issue_comments_303270.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e8f261d5f7d4700020668836d1dacba2660b801\">7e8f261</a></td><td><code>Simplicial sets: delete code for pushouts: it is incomplete and broken.</code></td></tr></table>\n",
    "created_at": "2016-06-02T12:07:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303270",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e8f261d5f7d4700020668836d1dacba2660b801">7e8f261</a></td><td><code>Simplicial sets: delete code for pushouts: it is incomplete and broken.</code></td></tr></table>




---

archive/issue_comments_303271.json:
```json
{
    "body": "Changed commit from **[de4e351](https://github.com/sagemath/sagetrac-mirror/commit/de4e351cf4f30b5a197fd302cd2c9e5a347f3f4d)** to **[7e8f261](https://github.com/sagemath/sagetrac-mirror/commit/7e8f261d5f7d4700020668836d1dacba2660b801)**",
    "created_at": "2016-06-02T12:07:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303271",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[de4e351](https://github.com/sagemath/sagetrac-mirror/commit/de4e351cf4f30b5a197fd302cd2c9e5a347f3f4d)** to **[7e8f261](https://github.com/sagemath/sagetrac-mirror/commit/7e8f261d5f7d4700020668836d1dacba2660b801)**



---

archive/issue_comments_303272.json:
```json
{
    "body": "Changed commit from **[7e8f261](https://github.com/sagemath/sagetrac-mirror/commit/7e8f261d5f7d4700020668836d1dacba2660b801)** to **[05bf228](https://github.com/sagemath/sagetrac-mirror/commit/05bf22845f13d6c6ea293aa3d067d383345bac39)**",
    "created_at": "2016-06-10T20:56:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303272",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7e8f261](https://github.com/sagemath/sagetrac-mirror/commit/7e8f261d5f7d4700020668836d1dacba2660b801)** to **[05bf228](https://github.com/sagemath/sagetrac-mirror/commit/05bf22845f13d6c6ea293aa3d067d383345bac39)**



---

archive/issue_comments_303273.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9bc215b42132225e2eac2a33c992fd8e3f39dd59\">9bc215b</a></td><td><code>Simplicial sets: pushouts, etc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05bf22845f13d6c6ea293aa3d067d383345bac39\">05bf228</a></td><td><code>Merge branch 'develop' into t/20745/simplicial_sets</code></td></tr></table>\n",
    "created_at": "2016-06-10T20:56:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303273",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9bc215b42132225e2eac2a33c992fd8e3f39dd59">9bc215b</a></td><td><code>Simplicial sets: pushouts, etc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05bf22845f13d6c6ea293aa3d067d383345bac39">05bf228</a></td><td><code>Merge branch 'develop' into t/20745/simplicial_sets</code></td></tr></table>




---

archive/issue_comments_303274.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nPushouts are now fixed.",
    "created_at": "2016-06-10T20:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303274",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">Comment 4</div>

Pushouts are now fixed.



---

archive/issue_comments_303275.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3eb08e9548fa604e5a2f9f43edec20ade5e4b8f\">b3eb08e</a></td><td><code>Simplicial sets: full-fledged pushouts and pullbacks</code></td></tr></table>\n",
    "created_at": "2016-06-16T01:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303275",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6" align="right">Comment 6</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3eb08e9548fa604e5a2f9f43edec20ade5e4b8f">b3eb08e</a></td><td><code>Simplicial sets: full-fledged pushouts and pullbacks</code></td></tr></table>




---

archive/issue_comments_303276.json:
```json
{
    "body": "Changed commit from **[05bf228](https://github.com/sagemath/sagetrac-mirror/commit/05bf22845f13d6c6ea293aa3d067d383345bac39)** to **[b3eb08e](https://github.com/sagemath/sagetrac-mirror/commit/b3eb08e9548fa604e5a2f9f43edec20ade5e4b8f)**",
    "created_at": "2016-06-16T01:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303276",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[05bf228](https://github.com/sagemath/sagetrac-mirror/commit/05bf22845f13d6c6ea293aa3d067d383345bac39)** to **[b3eb08e](https://github.com/sagemath/sagetrac-mirror/commit/b3eb08e9548fa604e5a2f9f43edec20ade5e4b8f)**



---

archive/issue_comments_303277.json:
```json
{
    "body": "Changed commit from **[b3eb08e](https://github.com/sagemath/sagetrac-mirror/commit/b3eb08e9548fa604e5a2f9f43edec20ade5e4b8f)** to **[c5f3a75](https://github.com/sagemath/sagetrac-mirror/commit/c5f3a75208f05542bd668ac4ba063de61949df4e)**",
    "created_at": "2016-06-16T22:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303277",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b3eb08e](https://github.com/sagemath/sagetrac-mirror/commit/b3eb08e9548fa604e5a2f9f43edec20ade5e4b8f)** to **[c5f3a75](https://github.com/sagemath/sagetrac-mirror/commit/c5f3a75208f05542bd668ac4ba063de61949df4e)**



---

archive/issue_comments_303278.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23ae53e29d552e0ac343d05bbc9fb6231ac5b428\">23ae53e</a></td><td><code>Merge branch 'develop' into t/20745/simplicial_sets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5f3a75208f05542bd668ac4ba063de61949df4e\">c5f3a75</a></td><td><code>simplicial sets: trivial changes to nerve construction</code></td></tr></table>\n",
    "created_at": "2016-06-16T22:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303278",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23ae53e29d552e0ac343d05bbc9fb6231ac5b428">23ae53e</a></td><td><code>Merge branch 'develop' into t/20745/simplicial_sets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5f3a75208f05542bd668ac4ba063de61949df4e">c5f3a75</a></td><td><code>simplicial sets: trivial changes to nerve construction</code></td></tr></table>




---

archive/issue_comments_303279.json:
```json
{
    "body": "Changed commit from **[c5f3a75](https://github.com/sagemath/sagetrac-mirror/commit/c5f3a75208f05542bd668ac4ba063de61949df4e)** to **[37f505e](https://github.com/sagemath/sagetrac-mirror/commit/37f505e97e341c4fb89d56b8f717e85e28c79e7b)**",
    "created_at": "2016-06-28T00:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303279",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c5f3a75](https://github.com/sagemath/sagetrac-mirror/commit/c5f3a75208f05542bd668ac4ba063de61949df4e)** to **[37f505e](https://github.com/sagemath/sagetrac-mirror/commit/37f505e97e341c4fb89d56b8f717e85e28c79e7b)**



---

archive/issue_comments_303280.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f73a4426092f43dbbd4a7aa5adf4fc7ab3c89b9\">5f73a44</a></td><td><code>simplicial sets: fix stupidity</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbee5f8e0b50726364058c787122dd97829244ce\">bbee5f8</a></td><td><code>Simplicial sets: implement possibly infinite simplicial sets.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37f505e97e341c4fb89d56b8f717e85e28c79e7b\">37f505e</a></td><td><code>Simplicial sets: simplicial model for the Hopf fibration.</code></td></tr></table>\n",
    "created_at": "2016-06-28T00:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303280",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f73a4426092f43dbbd4a7aa5adf4fc7ab3c89b9">5f73a44</a></td><td><code>simplicial sets: fix stupidity</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbee5f8e0b50726364058c787122dd97829244ce">bbee5f8</a></td><td><code>Simplicial sets: implement possibly infinite simplicial sets.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37f505e97e341c4fb89d56b8f717e85e28c79e7b">37f505e</a></td><td><code>Simplicial sets: simplicial model for the Hopf fibration.</code></td></tr></table>




---

archive/issue_comments_303281.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d4e7e56a4a83351469a9c516f5506218197d39f\">7d4e7e5</a></td><td><code>Simplicial sets: simplicial model for the Hopf fibration.</code></td></tr></table>\n",
    "created_at": "2016-06-28T16:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303281",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9" align="right">Comment 9</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d4e7e56a4a83351469a9c516f5506218197d39f">7d4e7e5</a></td><td><code>Simplicial sets: simplicial model for the Hopf fibration.</code></td></tr></table>




---

archive/issue_comments_303282.json:
```json
{
    "body": "Changed commit from **[37f505e](https://github.com/sagemath/sagetrac-mirror/commit/37f505e97e341c4fb89d56b8f717e85e28c79e7b)** to **[7d4e7e5](https://github.com/sagemath/sagetrac-mirror/commit/7d4e7e56a4a83351469a9c516f5506218197d39f)**",
    "created_at": "2016-06-28T16:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303282",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[37f505e](https://github.com/sagemath/sagetrac-mirror/commit/37f505e97e341c4fb89d56b8f717e85e28c79e7b)** to **[7d4e7e5](https://github.com/sagemath/sagetrac-mirror/commit/7d4e7e56a4a83351469a9c516f5506218197d39f)**



---

archive/issue_comments_303283.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fa29212cbcc452be6aae28dcca77072fdd58139\">4fa2921</a></td><td><code>Simplicial sets: define the constant map between pointed simplicial sets.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9d40ee2ceeceaf8465269131625cd6ccb6d17ad\">b9d40ee</a></td><td><code>Simplicial sets: iterator (slow!) for sets of morphisms.</code></td></tr></table>\n",
    "created_at": "2016-07-11T21:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303283",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10" align="right">Comment 10</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fa29212cbcc452be6aae28dcca77072fdd58139">4fa2921</a></td><td><code>Simplicial sets: define the constant map between pointed simplicial sets.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9d40ee2ceeceaf8465269131625cd6ccb6d17ad">b9d40ee</a></td><td><code>Simplicial sets: iterator (slow!) for sets of morphisms.</code></td></tr></table>




---

archive/issue_comments_303284.json:
```json
{
    "body": "Changed commit from **[7d4e7e5](https://github.com/sagemath/sagetrac-mirror/commit/7d4e7e56a4a83351469a9c516f5506218197d39f)** to **[b9d40ee](https://github.com/sagemath/sagetrac-mirror/commit/b9d40ee2ceeceaf8465269131625cd6ccb6d17ad)**",
    "created_at": "2016-07-11T21:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303284",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7d4e7e5](https://github.com/sagemath/sagetrac-mirror/commit/7d4e7e56a4a83351469a9c516f5506218197d39f)** to **[b9d40ee](https://github.com/sagemath/sagetrac-mirror/commit/b9d40ee2ceeceaf8465269131625cd6ccb6d17ad)**



---

archive/issue_comments_303285.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nI'm marking this as \"needs review\" now. One possible future development: mapping spaces for simplicial sets: given simplicial sets K and L, you can view Hom(K,L) as a simplicial set. This would be another example of an infinite simplicial set, so any computations would be done using an appropriate n-skeleton.",
    "created_at": "2016-07-11T21:59:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303285",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">Comment 11</div>

I'm marking this as "needs review" now. One possible future development: mapping spaces for simplicial sets: given simplicial sets K and L, you can view Hom(K,L) as a simplicial set. This would be another example of an infinite simplicial set, so any computations would be done using an appropriate n-skeleton.



---

archive/issue_events_274184.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-07-11T21:59:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274184"
}
```



---

archive/issue_comments_303286.json:
```json
{
    "body": "Author: **John Palmieri**",
    "created_at": "2016-07-11T22:00:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303286",
    "user": "https://github.com/jhpalmieri"
}
```

Author: **John Palmieri**



---

archive/issue_comments_303287.json:
```json
{
    "body": "Changed commit from **[b9d40ee](https://github.com/sagemath/sagetrac-mirror/commit/b9d40ee2ceeceaf8465269131625cd6ccb6d17ad)** to **[899e569](https://github.com/sagemath/sagetrac-mirror/commit/899e5698dc17532ebb158f4497de9aa2b20afeaa)**",
    "created_at": "2016-07-11T22:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303287",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b9d40ee](https://github.com/sagemath/sagetrac-mirror/commit/b9d40ee2ceeceaf8465269131625cd6ccb6d17ad)** to **[899e569](https://github.com/sagemath/sagetrac-mirror/commit/899e5698dc17532ebb158f4497de9aa2b20afeaa)**



---

archive/issue_comments_303288.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/899e5698dc17532ebb158f4497de9aa2b20afeaa\">899e569</a></td><td><code>Fix some Sphinx references.</code></td></tr></table>\n",
    "created_at": "2016-07-11T22:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303288",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13" align="right">Comment 13</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/899e5698dc17532ebb158f4497de9aa2b20afeaa">899e569</a></td><td><code>Fix some Sphinx references.</code></td></tr></table>




---

archive/issue_comments_303289.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1230ce16d2cd5c7cda4b26dcda0f7774ca46e437\">1230ce1</a></td><td><code>Simplicial sets: products and coproducts of maps.</code></td></tr></table>\n",
    "created_at": "2016-07-14T21:38:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303289",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14" align="right">Comment 14</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1230ce16d2cd5c7cda4b26dcda0f7774ca46e437">1230ce1</a></td><td><code>Simplicial sets: products and coproducts of maps.</code></td></tr></table>




---

archive/issue_comments_303290.json:
```json
{
    "body": "Changed commit from **[899e569](https://github.com/sagemath/sagetrac-mirror/commit/899e5698dc17532ebb158f4497de9aa2b20afeaa)** to **[1230ce1](https://github.com/sagemath/sagetrac-mirror/commit/1230ce16d2cd5c7cda4b26dcda0f7774ca46e437)**",
    "created_at": "2016-07-14T21:38:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303290",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[899e569](https://github.com/sagemath/sagetrac-mirror/commit/899e5698dc17532ebb158f4497de9aa2b20afeaa)** to **[1230ce1](https://github.com/sagemath/sagetrac-mirror/commit/1230ce16d2cd5c7cda4b26dcda0f7774ca46e437)**



---

archive/issue_events_274185.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-07-19T19:51:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274185"
}
```



---

archive/issue_events_274186.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-07-19T19:51:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274186"
}
```



---

archive/issue_comments_303291.json:
```json
{
    "body": "Changed commit from **[1230ce1](https://github.com/sagemath/sagetrac-mirror/commit/1230ce16d2cd5c7cda4b26dcda0f7774ca46e437)** to **[9fbfee6](https://github.com/sagemath/sagetrac-mirror/commit/9fbfee64243c72d653f7cada254eca756fa4622f)**",
    "created_at": "2016-08-10T23:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303291",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1230ce1](https://github.com/sagemath/sagetrac-mirror/commit/1230ce16d2cd5c7cda4b26dcda0f7774ca46e437)** to **[9fbfee6](https://github.com/sagemath/sagetrac-mirror/commit/9fbfee64243c72d653f7cada254eca756fa4622f)**



---

archive/issue_comments_303292.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a51823732d574c13fd948a1f23c3decf8beb0e59\">a518237</a></td><td><code>Add is_connected method to generic cell complexes.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b615cdd526ab42816893ca8902dbc745a577d84\">8b615cd</a></td><td><code>simplicial sets: start to improve implementation for infinite simplicial sets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0b13d9d720db2ff11cc26e9552b0624b17f234a\">d0b13d9</a></td><td><code>merging with 7.3.beta9</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1ddea1f9011f2f2398df2061da657386b0552c9\">c1ddea1</a></td><td><code>Simplicial sets: improve implementation for infinite simplicial sets.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56620b70211a2f214d359b1574ae55585c57f5a2\">56620b7</a></td><td><code>simplicial sets: make smash product class inherit from Factors.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d41a256e26f86869323d86a791d6a6bf8993498c\">d41a256</a></td><td><code>simplicial set: change a little terminology.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/456eb80d118f97722e74ffcf170249b501430ceb\">456eb80</a></td><td><code>fix some whitespace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac7f6eaf992a3e2ace990827eebceabdf59d4f11\">ac7f6ea</a></td><td><code>simplicial sets: minor editing of docstrings, some reorganization</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e628254d2c3a5093bcd08efabbb32b47195b5b18\">e628254</a></td><td><code>simplicial sets: documentation in categories/simplicial_sets.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9fbfee64243c72d653f7cada254eca756fa4622f\">9fbfee6</a></td><td><code>Simplicial sets: make Pushout, Pullback, etc., inherit from UniqueRepresentation:</code></td></tr></table>\n",
    "created_at": "2016-08-10T23:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303292",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16" align="right">Comment 16</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a51823732d574c13fd948a1f23c3decf8beb0e59">a518237</a></td><td><code>Add is_connected method to generic cell complexes.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b615cdd526ab42816893ca8902dbc745a577d84">8b615cd</a></td><td><code>simplicial sets: start to improve implementation for infinite simplicial sets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0b13d9d720db2ff11cc26e9552b0624b17f234a">d0b13d9</a></td><td><code>merging with 7.3.beta9</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1ddea1f9011f2f2398df2061da657386b0552c9">c1ddea1</a></td><td><code>Simplicial sets: improve implementation for infinite simplicial sets.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56620b70211a2f214d359b1574ae55585c57f5a2">56620b7</a></td><td><code>simplicial sets: make smash product class inherit from Factors.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d41a256e26f86869323d86a791d6a6bf8993498c">d41a256</a></td><td><code>simplicial set: change a little terminology.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/456eb80d118f97722e74ffcf170249b501430ceb">456eb80</a></td><td><code>fix some whitespace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac7f6eaf992a3e2ace990827eebceabdf59d4f11">ac7f6ea</a></td><td><code>simplicial sets: minor editing of docstrings, some reorganization</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e628254d2c3a5093bcd08efabbb32b47195b5b18">e628254</a></td><td><code>simplicial sets: documentation in categories/simplicial_sets.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9fbfee64243c72d653f7cada254eca756fa4622f">9fbfee6</a></td><td><code>Simplicial sets: make Pushout, Pullback, etc., inherit from UniqueRepresentation:</code></td></tr></table>




---

archive/issue_events_274187.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-08-10T23:03:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274187"
}
```



---

archive/issue_events_274188.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-08-10T23:03:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274188"
}
```



---

archive/issue_comments_303293.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nI'm marking this as \"needs_review\" now.",
    "created_at": "2016-08-10T23:07:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303293",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">Comment 18</div>

I'm marking this as "needs_review" now.



---

archive/issue_comments_303294.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,8 @@\n As the summary says...\n+\n+For possible follow-up tickets:\n+\n+- simplicial abelian groups and Eilenberg-Mac Lane spaces.\n+- effective homology and related computations that Kenzo can do but we can't yet.\n+- mapping spaces.\n+\n``````\n",
    "created_at": "2016-08-10T23:07:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303294",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,8 @@
 As the summary says...
+
+For possible follow-up tickets:
+
+- simplicial abelian groups and Eilenberg-Mac Lane spaces.
+- effective homology and related computations that Kenzo can do but we can't yet.
+- mapping spaces.
+
``````




---

archive/issue_comments_303295.json:
```json
{
    "body": "Changed commit from **[9fbfee6](https://github.com/sagemath/sagetrac-mirror/commit/9fbfee64243c72d653f7cada254eca756fa4622f)** to **[bcb0332](https://github.com/sagemath/sagetrac-mirror/commit/bcb0332845a09120cb294b77a70148c4d465b5d9)**",
    "created_at": "2016-08-24T16:00:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303295",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9fbfee6](https://github.com/sagemath/sagetrac-mirror/commit/9fbfee64243c72d653f7cada254eca756fa4622f)** to **[bcb0332](https://github.com/sagemath/sagetrac-mirror/commit/bcb0332845a09120cb294b77a70148c4d465b5d9)**



---

archive/issue_comments_303296.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bcb0332845a09120cb294b77a70148c4d465b5d9\">bcb0332</a></td><td><code>disambiguate two references</code></td></tr></table>\n",
    "created_at": "2016-08-24T16:00:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303296",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19" align="right">Comment 19</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bcb0332845a09120cb294b77a70148c4d465b5d9">bcb0332</a></td><td><code>disambiguate two references</code></td></tr></table>




---

archive/issue_comments_303297.json:
```json
{
    "body": "Changed commit from **[bcb0332](https://github.com/sagemath/sagetrac-mirror/commit/bcb0332845a09120cb294b77a70148c4d465b5d9)** to **[94c21df](https://github.com/sagemath/sagetrac-mirror/commit/94c21df3bb5018899dd23ff05e0881cb905f43e5)**",
    "created_at": "2016-08-24T18:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303297",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bcb0332](https://github.com/sagemath/sagetrac-mirror/commit/bcb0332845a09120cb294b77a70148c4d465b5d9)** to **[94c21df](https://github.com/sagemath/sagetrac-mirror/commit/94c21df3bb5018899dd23ff05e0881cb905f43e5)**



---

archive/issue_comments_303298.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8522c6653243d4dc0e43221d27951ca56c8a05a2\">8522c66</a></td><td><code>Merge branch 'develop' into simplicial_sets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94c21df3bb5018899dd23ff05e0881cb905f43e5\">94c21df</a></td><td><code>disambiguate two references</code></td></tr></table>\n",
    "created_at": "2016-08-24T18:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303298",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20" align="right">Comment 20</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8522c6653243d4dc0e43221d27951ca56c8a05a2">8522c66</a></td><td><code>Merge branch 'develop' into simplicial_sets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94c21df3bb5018899dd23ff05e0881cb905f43e5">94c21df</a></td><td><code>disambiguate two references</code></td></tr></table>




---

archive/issue_comments_303299.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nThis looks like a lot of very nice and very useful code! I have just started to play around with it and have two quick comments:\n\n- `SimplicialSets` is not in the global namespace, whereas `SimplicialComplex` is globally available per default. \n\n- I tried `TestSuite(RP7).run()` and got lots of errors, presumably because `an_element` is not implemented.\n\nI have no fixed opinion whether these observations count as faults or facts, though.",
    "created_at": "2016-09-15T18:13:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303299",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:21" align="right">Comment 21</div>

This looks like a lot of very nice and very useful code! I have just started to play around with it and have two quick comments:

- `SimplicialSets` is not in the global namespace, whereas `SimplicialComplex` is globally available per default. 

- I tried `TestSuite(RP7).run()` and got lots of errors, presumably because `an_element` is not implemented.

I have no fixed opinion whether these observations count as faults or facts, though.



---

archive/issue_comments_303300.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nHi Christian, thanks for taking a look!\n\nReplying to [@cnassau](#comment%3A21):\n> This looks like a lot of very nice and very useful code! I have just started to play around with it and have two quick comments:\n> \n> - `SimplicialSets` is not in the global namespace, whereas `SimplicialComplex` is globally available per default. \n\nIt is more fiddly to construct simplicial sets than simplicial complexes, to the point that I don't know if ordinary users will want to use `SimplicialSet` much. (With hindsight, I would also not have included `DeltaComplex` in the global namespace either.) My hope is that users will use the predefined simplicial sets (especially simplices and spheres) and build other simplicial sets from those using quotients, products, mapping cones, etc.\n\n> - I tried `TestSuite(RP7).run()` and got lots of errors, presumably because `an_element` is not implemented.\n\nI didn't try that. It might be worth looking into.",
    "created_at": "2016-09-15T19:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303300",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:23" align="right">Comment 23</div>

Hi Christian, thanks for taking a look!

Replying to [@cnassau](#comment%3A21):
> This looks like a lot of very nice and very useful code! I have just started to play around with it and have two quick comments:
> 
> - `SimplicialSets` is not in the global namespace, whereas `SimplicialComplex` is globally available per default. 

It is more fiddly to construct simplicial sets than simplicial complexes, to the point that I don't know if ordinary users will want to use `SimplicialSet` much. (With hindsight, I would also not have included `DeltaComplex` in the global namespace either.) My hope is that users will use the predefined simplicial sets (especially simplices and spheres) and build other simplicial sets from those using quotients, products, mapping cones, etc.

> - I tried `TestSuite(RP7).run()` and got lots of errors, presumably because `an_element` is not implemented.

I didn't try that. It might be worth looking into.



---

archive/issue_comments_303301.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nI just tried (and eventually succeeded) to construct the quotient `RP7/RP4` and to compute its cohomology. My first approach failed, since I found no way to define the inclusion map:\n\n```\nsage: RP4 = sage.homology.simplicial_set_catalog.RealProjectiveSpace(4)\nsage: RP7 = sage.homology.simplicial_set_catalog.RealProjectiveSpace(7)\nsage: X=Hom(RP4,RP7)\nsage: X({i:i for i in RP4.nondegenerate_simplices()})\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n...\nValueError: this simplex is not in this simplicial set\n```\nCan this be done somehow?\n\nA possibly related problem is that the ambient spaces are different; maybe they (and the projective spaces) should have unique representation?\n\n```\nsage: RP4.ambient_space() is RP7.ambient_space()\nFalse\n```\n\n(Apologies if this is explained in the documentation somewhere - I usually only read documentation as a last resort.)",
    "created_at": "2016-09-15T20:17:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303301",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:24" align="right">Comment 24</div>

I just tried (and eventually succeeded) to construct the quotient `RP7/RP4` and to compute its cohomology. My first approach failed, since I found no way to define the inclusion map:

```
sage: RP4 = sage.homology.simplicial_set_catalog.RealProjectiveSpace(4)
sage: RP7 = sage.homology.simplicial_set_catalog.RealProjectiveSpace(7)
sage: X=Hom(RP4,RP7)
sage: X({i:i for i in RP4.nondegenerate_simplices()})
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: this simplex is not in this simplicial set
```
Can this be done somehow?

A possibly related problem is that the ambient spaces are different; maybe they (and the projective spaces) should have unique representation?

```
sage: RP4.ambient_space() is RP7.ambient_space()
False
```

(Apologies if this is explained in the documentation somewhere - I usually only read documentation as a last resort.)



---

archive/issue_comments_303302.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nI thought about unique representation; my conclusion was that it was the wrong thing to do. If you construct two 4-spheres, you want them to be different so you can take their disjoint union, etc. A related implementation detail is that when you construct an abstract n-simplex, it is always distinct from previously created ones.\n\nThe easiest way to do what you're talking about is\n\n```\nsage: RP7 = simplicial_sets.RealProjectiveSpace(7)\nsage: RP4 = RP7.n_skeleton(4)\nsage: RP4.inclusion_map()\n...\nsage: RP7.quotient(RP4)\n...\n```\nOr I think you also do\n\n```\nsage: C2 = groups.misc.MultiplicativeAbelian([2])\nsage: BC2 = simplicial_sets.ClassifyingSpace(C2)\nsage: RP7 = BC2.n_skeleton(7)\nsage: RP4 = BC2.n_skeleton(4)\n```\nto get a common ambient space.",
    "created_at": "2016-09-15T21:23:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303302",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:25" align="right">Comment 25</div>

I thought about unique representation; my conclusion was that it was the wrong thing to do. If you construct two 4-spheres, you want them to be different so you can take their disjoint union, etc. A related implementation detail is that when you construct an abstract n-simplex, it is always distinct from previously created ones.

The easiest way to do what you're talking about is

```
sage: RP7 = simplicial_sets.RealProjectiveSpace(7)
sage: RP4 = RP7.n_skeleton(4)
sage: RP4.inclusion_map()
...
sage: RP7.quotient(RP4)
...
```
Or I think you also do

```
sage: C2 = groups.misc.MultiplicativeAbelian([2])
sage: BC2 = simplicial_sets.ClassifyingSpace(C2)
sage: RP7 = BC2.n_skeleton(7)
sage: RP4 = BC2.n_skeleton(4)
```
to get a common ambient space.



---

archive/issue_comments_303303.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nReplying to [@jhpalmieri](#comment%3A25):\n> I thought about unique representation; my conclusion was that it was the wrong thing to do. If you construct two 4-spheres, you want them to be different so you can take their disjoint union, etc. A related implementation detail is that when you construct an abstract n-simplex, it is always distinct from previously created ones.\n\nI get your point and I now see that this is also very well explained in the documentation.\n\nI don't understand the origin of the term `f_vector`: I can see that this is also used in the other cell complex related parts, but what might the \"f\" stand for? I'm just curious here...",
    "created_at": "2016-09-16T18:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303303",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:26" align="right">Comment 26</div>

Replying to [@jhpalmieri](#comment%3A25):
> I thought about unique representation; my conclusion was that it was the wrong thing to do. If you construct two 4-spheres, you want them to be different so you can take their disjoint union, etc. A related implementation detail is that when you construct an abstract n-simplex, it is always distinct from previously created ones.

I get your point and I now see that this is also very well explained in the documentation.

I don't understand the origin of the term `f_vector`: I can see that this is also used in the other cell complex related parts, but what might the "f" stand for? I'm just curious here...



---

archive/issue_comments_303304.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\n[\"f-vector\"](https://en.wikipedia.org/wiki/Simplicial_complex#Combinatorics) is standard in combinatorics, but I don't know what the \"f\" means. \"face\", I'm guessing?",
    "created_at": "2016-09-16T19:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303304",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:27" align="right">Comment 27</div>

["f-vector"](https://en.wikipedia.org/wiki/Simplicial_complex#Combinatorics) is standard in combinatorics, but I don't know what the "f" means. "face", I'm guessing?



---

archive/issue_comments_303305.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nI have just tried to implement the \"Catalan simplicial set\", modeled on your code for the nerve of a monoid. It seems to work fine, but I get this error from `all_n_simplices`:\n\n```\nsage: Cat.all_n_simplices(3)\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n...\nNotImplementedError: this simplicial set may be infinite, so specify max_dim\n```\n\nI think this could be fixed by changing one line in the definition of `all_n_simplices`, i.e. change\n\n```\n non_degen = [_ for _ in self.nondegenerate_simplices() if _.dimension() <= n]\n```\nto \n\n```\n non_degen = [_ for _ in self.nondegenerate_simplices(max_dim=n) if _.dimension() <= n]\n```\n\nI have noted that the classifying spaces currently do not have an \"all_n_simplices\" method.\n\n```\nsage: X\nClassifying space of Finite Field of size 3\nsage: X.all_n_simplices(5)\n...\nAttributeError: 'Nerve_with_category' object has no attribute 'all_n_simplices'\n```\nIs this deliberate?",
    "created_at": "2016-09-17T11:26:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303305",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:28" align="right">Comment 28</div>

I have just tried to implement the "Catalan simplicial set", modeled on your code for the nerve of a monoid. It seems to work fine, but I get this error from `all_n_simplices`:

```
sage: Cat.all_n_simplices(3)
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
...
NotImplementedError: this simplicial set may be infinite, so specify max_dim
```

I think this could be fixed by changing one line in the definition of `all_n_simplices`, i.e. change

```
 non_degen = [_ for _ in self.nondegenerate_simplices() if _.dimension() <= n]
```
to 

```
 non_degen = [_ for _ in self.nondegenerate_simplices(max_dim=n) if _.dimension() <= n]
```

I have noted that the classifying spaces currently do not have an "all_n_simplices" method.

```
sage: X
Classifying space of Finite Field of size 3
sage: X.all_n_simplices(5)
...
AttributeError: 'Nerve_with_category' object has no attribute 'all_n_simplices'
```
Is this deliberate?



---

archive/issue_comments_303306.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nThis isn't deliberate. I think it's a good idea to make the change you suggest and to implement `all_n_simplices` for classifying spaces. I'm testing this right now; I'll push the change if it works.",
    "created_at": "2016-09-17T16:39:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303306",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:29" align="right">Comment 29</div>

This isn't deliberate. I think it's a good idea to make the change you suggest and to implement `all_n_simplices` for classifying spaces. I'm testing this right now; I'll push the change if it works.



---

archive/issue_comments_303307.json:
```json
{
    "body": "Changed commit from **[94c21df](https://github.com/sagemath/sagetrac-mirror/commit/94c21df3bb5018899dd23ff05e0881cb905f43e5)** to **[8dac891](https://github.com/sagemath/sagetrac-mirror/commit/8dac89119b0fbcdad9505f32513d251da4aaaa33)**",
    "created_at": "2016-09-17T17:08:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303307",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[94c21df](https://github.com/sagemath/sagetrac-mirror/commit/94c21df3bb5018899dd23ff05e0881cb905f43e5)** to **[8dac891](https://github.com/sagemath/sagetrac-mirror/commit/8dac89119b0fbcdad9505f32513d251da4aaaa33)**



---

archive/issue_comments_303308.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6eb29f4f55326936989c2aab03a142abbb3c3276\">6eb29f4</a></td><td><code>Merge branch 'develop' into simplicial_sets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8dac89119b0fbcdad9505f32513d251da4aaaa33\">8dac891</a></td><td><code>simplicial sets: move all_n_simplices from the class of finite</code></td></tr></table>\n",
    "created_at": "2016-09-17T17:08:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303308",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30" align="right">Comment 30</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6eb29f4f55326936989c2aab03a142abbb3c3276">6eb29f4</a></td><td><code>Merge branch 'develop' into simplicial_sets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8dac89119b0fbcdad9505f32513d251da4aaaa33">8dac891</a></td><td><code>simplicial sets: move all_n_simplices from the class of finite</code></td></tr></table>




---

archive/issue_comments_303309.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nIt seems there are some other calls to `nondegenerate_simplices(...)` that should have an approriate `max_dim` value: if I try to compute the homology of this Catalan simplicial set I otherwise get an error:\n\n```\nsage: Cat.chain_complex(dimensions=range(5))\n...\nNotImplementedError: this simplicial set may be infinite, so specify max_dim\n```\nI'm attaching my code so that you can see what I'm doing.\n\nOne strange thing is that my `Cat` has a couple of useful methods (e.g. `homology`) that are missing from the classifying spaces. The only relevant difference that I'm aware of is their categories, though that should add *more* methods, not hide them:\n\n```\nsage: Cat.categories()\n[Category of simplicial sets,\n Category of sets,\n Category of sets with partial maps,\n Category of objects]\nsage: simplicial_sets.ClassifyingSpace(GF(3)).categories()\n[Category of pointed simplicial sets,\n Category of simplicial sets,\n Category of sets,\n Category of sets with partial maps,\n Category of objects]\n```\nI think something like \n\n```\nsimplicial_sets.ClassifyingSpace(GF(3)).betti(3)\n```\nshould probably work out of the box (i.e. without explicitly taking a skeleton).",
    "created_at": "2016-09-17T17:56:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303309",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:31" align="right">Comment 31</div>

It seems there are some other calls to `nondegenerate_simplices(...)` that should have an approriate `max_dim` value: if I try to compute the homology of this Catalan simplicial set I otherwise get an error:

```
sage: Cat.chain_complex(dimensions=range(5))
...
NotImplementedError: this simplicial set may be infinite, so specify max_dim
```
I'm attaching my code so that you can see what I'm doing.

One strange thing is that my `Cat` has a couple of useful methods (e.g. `homology`) that are missing from the classifying spaces. The only relevant difference that I'm aware of is their categories, though that should add *more* methods, not hide them:

```
sage: Cat.categories()
[Category of simplicial sets,
 Category of sets,
 Category of sets with partial maps,
 Category of objects]
sage: simplicial_sets.ClassifyingSpace(GF(3)).categories()
[Category of pointed simplicial sets,
 Category of simplicial sets,
 Category of sets,
 Category of sets with partial maps,
 Category of objects]
```
I think something like 

```
simplicial_sets.ClassifyingSpace(GF(3)).betti(3)
```
should probably work out of the box (i.e. without explicitly taking a skeleton).



---

archive/issue_comments_303310.json:
```json
{
    "body": "implementation of the catalan simplicial set",
    "created_at": "2016-09-17T17:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303310",
    "user": "https://github.com/cnassau"
}
```

implementation of the catalan simplicial set



---

archive/issue_comments_303311.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nAttachment: **[catalan.py.gz](https://github.com/sagemath/sage/files/ticket20745/catalan.py.gz)**\n\nReplying to [@cnassau](#comment%3A31):\n> It seems there are some other calls to `nondegenerate_simplices(...)` that should have an approriate `max_dim` value: if I try to compute the homology of this Catalan simplicial set I otherwise get an error:\n\nThe issue here is that your `Cat` inherits from `SimplicialSet`:\n\n```\nsage: sage.homology.simplicial_set.SimplicialSet?\nInit signature: sage.homology.simplicial_set.SimplicialSet(self, data, base_point=None, name=None, check=True, category=None)\nDocstring:     \n   A finite simplicial set.\n\n   ...\n```\nSo it is assumed to be finite, which means it has more methods defined for it, like `chain_complex`, which are not defined for (for example) classifying spaces. Classifying spaces instead inherit from `SimplicialSet_arbitrary`. Note that `SimplicialSet` is just an alias for `SimplicialSet_finite`, and we could get rid of this alias and delete `SimplicialSet` if it would be clearer that way.\n\n> I think something like \n> \n> ```\n> simplicial_sets.ClassifyingSpace(GF(3)).betti(3)\n> ```\n> should probably work out of the box (i.e. without explicitly taking a skeleton).\n\nMethods like `betti` come from the class `GenericCellComplex`, and those are assumed to be finite. So we would need to implement `betti` for `SimplicialSet_arbitrary`, which we could do. Maybe also `chain_complex` and `n_chains`.",
    "created_at": "2016-09-17T18:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303311",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:32" align="right">Comment 32</div>

Attachment: **[catalan.py.gz](https://github.com/sagemath/sage/files/ticket20745/catalan.py.gz)**

Replying to [@cnassau](#comment%3A31):
> It seems there are some other calls to `nondegenerate_simplices(...)` that should have an approriate `max_dim` value: if I try to compute the homology of this Catalan simplicial set I otherwise get an error:

The issue here is that your `Cat` inherits from `SimplicialSet`:

```
sage: sage.homology.simplicial_set.SimplicialSet?
Init signature: sage.homology.simplicial_set.SimplicialSet(self, data, base_point=None, name=None, check=True, category=None)
Docstring:     
   A finite simplicial set.

   ...
```
So it is assumed to be finite, which means it has more methods defined for it, like `chain_complex`, which are not defined for (for example) classifying spaces. Classifying spaces instead inherit from `SimplicialSet_arbitrary`. Note that `SimplicialSet` is just an alias for `SimplicialSet_finite`, and we could get rid of this alias and delete `SimplicialSet` if it would be clearer that way.

> I think something like 
> 
> ```
> simplicial_sets.ClassifyingSpace(GF(3)).betti(3)
> ```
> should probably work out of the box (i.e. without explicitly taking a skeleton).

Methods like `betti` come from the class `GenericCellComplex`, and those are assumed to be finite. So we would need to implement `betti` for `SimplicialSet_arbitrary`, which we could do. Maybe also `chain_complex` and `n_chains`.



---

archive/issue_comments_303312.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,5 @@\n - simplicial abelian groups and Eilenberg-Mac Lane spaces.\n - effective homology and related computations that Kenzo can do but we can't yet.\n - mapping spaces.\n+- Discrete Morse theory.\n \n``````\n",
    "created_at": "2016-09-17T19:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303312",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,5 @@
 - simplicial abelian groups and Eilenberg-Mac Lane spaces.
 - effective homology and related computations that Kenzo can do but we can't yet.
 - mapping spaces.
+- Discrete Morse theory.
 
``````




---

archive/issue_comments_303313.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nAt some point, we should lift up some of the things I did for Hochschild (co)homology to the chain complex and homology method to handle infinite-dimensional complexes (with each dimension a finite complex). Although, off-hand I can't think of a good way to handle the cases when there are an infinite number of cells in a given dimension.",
    "created_at": "2016-09-17T19:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303313",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:33" align="right">Comment 33</div>

At some point, we should lift up some of the things I did for Hochschild (co)homology to the chain complex and homology method to handle infinite-dimensional complexes (with each dimension a finite complex). Although, off-hand I can't think of a good way to handle the cases when there are an infinite number of cells in a given dimension.



---

archive/issue_comments_303314.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nI'm puzzled by the following output: the zeroeth cohomology only comes out right once:\n\n```\nsage: X=simplicial_sets.ClassifyingSpace(GF(3)) ; X\nClassifying space of Finite Field of size 3\nsage: X.cohomology(0)\nZ\nsage: X.cohomology((0,))\n{0: 0}\nsage: X.cohomology(range(4))\n{0: 0, 1: 0, 2: 0, 3: 0}\n```\n\nI could imagine that this is a pointed vs. non-pointed issue, but I see the same behaviour for my Catalan set, which has no basepoint.\n\nPS: I now see that the documentation specifies reduced homology, but the answer seems inconsistent nonetheless...",
    "created_at": "2016-09-17T19:50:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303314",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:34" align="right">Comment 34</div>

I'm puzzled by the following output: the zeroeth cohomology only comes out right once:

```
sage: X=simplicial_sets.ClassifyingSpace(GF(3)) ; X
Classifying space of Finite Field of size 3
sage: X.cohomology(0)
Z
sage: X.cohomology((0,))
{0: 0}
sage: X.cohomology(range(4))
{0: 0, 1: 0, 2: 0, 3: 0}
```

I could imagine that this is a pointed vs. non-pointed issue, but I see the same behaviour for my Catalan set, which has no basepoint.

PS: I now see that the documentation specifies reduced homology, but the answer seems inconsistent nonetheless...



---

archive/issue_comments_303315.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nThat's a bug in the simplicial set chain complex code. Here is a patched version, which also implements `chain_complex` and `n_chains` for arbitrary simplicial sets, not just finite ones.",
    "created_at": "2016-09-17T21:29:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303315",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:35" align="right">Comment 35</div>

That's a bug in the simplicial set chain complex code. Here is a patched version, which also implements `chain_complex` and `n_chains` for arbitrary simplicial sets, not just finite ones.



---

archive/issue_comments_303316.json:
```json
{
    "body": "Changed commit from **[8dac891](https://github.com/sagemath/sagetrac-mirror/commit/8dac89119b0fbcdad9505f32513d251da4aaaa33)** to **[1443151](https://github.com/sagemath/sagetrac-mirror/commit/1443151ed3285ccfa132d9edf784c8eb9960ea90)**",
    "created_at": "2016-09-17T21:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303316",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8dac891](https://github.com/sagemath/sagetrac-mirror/commit/8dac89119b0fbcdad9505f32513d251da4aaaa33)** to **[1443151](https://github.com/sagemath/sagetrac-mirror/commit/1443151ed3285ccfa132d9edf784c8eb9960ea90)**



---

archive/issue_comments_303317.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1443151ed3285ccfa132d9edf784c8eb9960ea90\">1443151</a></td><td><code>simplicial sets: implement betti, chain_complex, and n_chains for</code></td></tr></table>\n",
    "created_at": "2016-09-17T21:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303317",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36" align="right">Comment 36</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1443151ed3285ccfa132d9edf784c8eb9960ea90">1443151</a></td><td><code>simplicial sets: implement betti, chain_complex, and n_chains for</code></td></tr></table>




---

archive/issue_comments_303318.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cecb9bc13cc3167d0b6a6c73c7b71000db7b19ef\">cecb9bc</a></td><td><code>fix typo in documentation</code></td></tr></table>\n",
    "created_at": "2016-09-17T21:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303318",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37" align="right">Comment 37</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cecb9bc13cc3167d0b6a6c73c7b71000db7b19ef">cecb9bc</a></td><td><code>fix typo in documentation</code></td></tr></table>




---

archive/issue_comments_303319.json:
```json
{
    "body": "Changed commit from **[1443151](https://github.com/sagemath/sagetrac-mirror/commit/1443151ed3285ccfa132d9edf784c8eb9960ea90)** to **[cecb9bc](https://github.com/sagemath/sagetrac-mirror/commit/cecb9bc13cc3167d0b6a6c73c7b71000db7b19ef)**",
    "created_at": "2016-09-17T21:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303319",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1443151](https://github.com/sagemath/sagetrac-mirror/commit/1443151ed3285ccfa132d9edf784c8eb9960ea90)** to **[cecb9bc](https://github.com/sagemath/sagetrac-mirror/commit/cecb9bc13cc3167d0b6a6c73c7b71000db7b19ef)**



---

archive/issue_comments_303320.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nHere's a minor thing I just noted: latex() of cells in a classifying space doesn't print correctly:\n\n```\nsage: Q=simplicial_sets.ClassifyingSpace(groups.misc.WeylGroup('B2'))\nsage: Q.n_cells(1)\n[[ 0  1]\n [-1  0], [ 0 -1]\n [ 1  0], [ 0 -1]\n [-1  0], [ 1  0]\n [ 0 -1], [-1  0]\n [ 0  1], [-1  0]\n [ 0 -1], [0 1]\n [1 0]]\nsage: latex(Q.n_cells(1))\n\\left[\\Delta^{1}, \\Delta^{1}, \\Delta^{1}, \\Delta^{1}, \\Delta^{1}, \\Delta^{1}, \\Delta^{1}\\right]\n```\n\nOn a related note, I don't quite like the very verbose printing of degeneracies (but that might be a matter of taste). I would probably prefer something like \"`s_0(f * f)`\" instead of \"`Simplex obtained by applying degeneracy s_0 to f * f`\".",
    "created_at": "2016-09-18T09:08:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303320",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:38" align="right">Comment 38</div>

Here's a minor thing I just noted: latex() of cells in a classifying space doesn't print correctly:

```
sage: Q=simplicial_sets.ClassifyingSpace(groups.misc.WeylGroup('B2'))
sage: Q.n_cells(1)
[[ 0  1]
 [-1  0], [ 0 -1]
 [ 1  0], [ 0 -1]
 [-1  0], [ 1  0]
 [ 0 -1], [-1  0]
 [ 0  1], [-1  0]
 [ 0 -1], [0 1]
 [1 0]]
sage: latex(Q.n_cells(1))
\left[\Delta^{1}, \Delta^{1}, \Delta^{1}, \Delta^{1}, \Delta^{1}, \Delta^{1}, \Delta^{1}\right]
```

On a related note, I don't quite like the very verbose printing of degeneracies (but that might be a matter of taste). I would probably prefer something like "`s_0(f * f)`" instead of "`Simplex obtained by applying degeneracy s_0 to f * f`".



---

archive/issue_comments_303321.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nI think it would be valuable if one could construct simplices in a classifying space from the corresponding sequence of monoid elements. Here's how I currently construct a map from RP2 to BD8:\n\n```\nsage: D8=DihedralGroup(4)\nsage: X=simplicial_sets.ClassifyingSpace(D8)\nsage: g=D8((1,3))\nsage: RP2=simplicial_sets.RealProjectiveSpace(2)\nsage: e0,e1,e2 = RP2.nondegenerate_simplices()\nsage: H=Hom(RP2,X)\nsage: X.n_skeleton(2) ;# hack to create X._simplex_data\nSimplicial set with 57 non-degenerate simplices\nsage: i=H({e0:X.base_point(),e1:dict(X._simplex_data)[(g,)],e2:dict(X._simplex_data)[(g,g)]}) ; i\nSimplicial set morphism:\n  From: RP^2\n  To:   Classifying space of Dihedral group of order 8 as a permutation group\n  Defn: [1, f, f * f] --> [(), (1,3), (1,3) * (1,3)]\n```\nIt would be nice to have a method on X that wraps the `dict(X._simplex_data)[(g1,g2,...)]` (and is able to recognize degenerate simplices and implicitly constructs the required n-skeleton).\n\nI would also like to use the universal covering space for BD8 here, but since this is infinite there would currently be no way to construct the ED8 -> BD8 as a simplical map. I'll add this to the description of this ticket as a possible follow-up topic.",
    "created_at": "2016-09-18T09:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303321",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:39" align="right">Comment 39</div>

I think it would be valuable if one could construct simplices in a classifying space from the corresponding sequence of monoid elements. Here's how I currently construct a map from RP2 to BD8:

```
sage: D8=DihedralGroup(4)
sage: X=simplicial_sets.ClassifyingSpace(D8)
sage: g=D8((1,3))
sage: RP2=simplicial_sets.RealProjectiveSpace(2)
sage: e0,e1,e2 = RP2.nondegenerate_simplices()
sage: H=Hom(RP2,X)
sage: X.n_skeleton(2) ;# hack to create X._simplex_data
Simplicial set with 57 non-degenerate simplices
sage: i=H({e0:X.base_point(),e1:dict(X._simplex_data)[(g,)],e2:dict(X._simplex_data)[(g,g)]}) ; i
Simplicial set morphism:
  From: RP^2
  To:   Classifying space of Dihedral group of order 8 as a permutation group
  Defn: [1, f, f * f] --> [(), (1,3), (1,3) * (1,3)]
```
It would be nice to have a method on X that wraps the `dict(X._simplex_data)[(g1,g2,...)]` (and is able to recognize degenerate simplices and implicitly constructs the required n-skeleton).

I would also like to use the universal covering space for BD8 here, but since this is infinite there would currently be no way to construct the ED8 -> BD8 as a simplical map. I'll add this to the description of this ticket as a possible follow-up topic.



---

archive/issue_comments_303322.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,5 @@\n - effective homology and related computations that Kenzo can do but we can't yet.\n - mapping spaces.\n - Discrete Morse theory.\n+- universal covering spaces for classifying spaces, support for maps between infinite simplicial sets.\n \n``````\n",
    "created_at": "2016-09-18T09:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303322",
    "user": "https://github.com/cnassau"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,5 @@
 - effective homology and related computations that Kenzo can do but we can't yet.
 - mapping spaces.
 - Discrete Morse theory.
+- universal covering spaces for classifying spaces, support for maps between infinite simplicial sets.
 
``````




---

archive/issue_comments_303323.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nReplying to [@cnassau](#comment%3A38):\n> Here's a minor thing I just noted: latex() of cells in a classifying space doesn't print correctly:\n\nIs there a standard way of customizing the LaTeX names of `SageObjects`? We could fix this anyway, but as you say, it's pretty minor.\n\n> On a related note, I don't quite like the very verbose printing of degeneracies (but that might be a matter of taste). I would probably prefer something like \"`s_0(f * f)`\" instead of \"`Simplex obtained by applying degeneracy s_0 to f * f`\".\n\nThe standard way of printing a nondegenerate simplex is \"Non-degenerate simplex of dimension d\". I don't think that \"s_0 (Non-degenerate simplex ...)\" looks very good. I suppose we could check if the nondegenerate simplex has a custom name and use \"s_0 (name)\" if so, the verbose version if not.\n\nIf you feel like making these changes, go ahead. They're not at the top of my list, though.",
    "created_at": "2016-09-18T16:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303323",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:41" align="right">Comment 41</div>

Replying to [@cnassau](#comment%3A38):
> Here's a minor thing I just noted: latex() of cells in a classifying space doesn't print correctly:

Is there a standard way of customizing the LaTeX names of `SageObjects`? We could fix this anyway, but as you say, it's pretty minor.

> On a related note, I don't quite like the very verbose printing of degeneracies (but that might be a matter of taste). I would probably prefer something like "`s_0(f * f)`" instead of "`Simplex obtained by applying degeneracy s_0 to f * f`".

The standard way of printing a nondegenerate simplex is "Non-degenerate simplex of dimension d". I don't think that "s_0 (Non-degenerate simplex ...)" looks very good. I suppose we could check if the nondegenerate simplex has a custom name and use "s_0 (name)" if so, the verbose version if not.

If you feel like making these changes, go ahead. They're not at the top of my list, though.



---

archive/issue_comments_303324.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nReplying to [@cnassau](#comment%3A39):\n> I think it would be valuable if one could construct simplices in a classifying space from the corresponding sequence of monoid elements. Here's how I currently construct a map from RP2 to BD8:\n> \n> ```\n> sage: D8=DihedralGroup(4)\n> sage: X=simplicial_sets.ClassifyingSpace(D8)\n> sage: g=D8((1,3))\n> sage: RP2=simplicial_sets.RealProjectiveSpace(2)\n> sage: e0,e1,e2 = RP2.nondegenerate_simplices()\n> sage: H=Hom(RP2,X)\n> sage: X.n_skeleton(2) ;# hack to create X._simplex_data\n> Simplicial set with 57 non-degenerate simplices\n> sage: i=H({e0:X.base_point(),e1:dict(X._simplex_data)[(g,)],e2:dict(X._simplex_data)[(g,g)]}) ; i\n> Simplicial set morphism:\n>   From: RP^2\n>   To:   Classifying space of Dihedral group of order 8 as a permutation group\n>   Defn: [1, f, f * f] --> [(), (1,3), (1,3) * (1,3)]\n> ```\n> It would be nice to have a method on X that wraps the `dict(X._simplex_data)[(g1,g2,...)]` (and is able to recognize degenerate simplices and implicitly constructs the required n-skeleton).\n\nThat sounds like a good idea.",
    "created_at": "2016-09-18T16:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303324",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:42" align="right">Comment 42</div>

Replying to [@cnassau](#comment%3A39):
> I think it would be valuable if one could construct simplices in a classifying space from the corresponding sequence of monoid elements. Here's how I currently construct a map from RP2 to BD8:
> 
> ```
> sage: D8=DihedralGroup(4)
> sage: X=simplicial_sets.ClassifyingSpace(D8)
> sage: g=D8((1,3))
> sage: RP2=simplicial_sets.RealProjectiveSpace(2)
> sage: e0,e1,e2 = RP2.nondegenerate_simplices()
> sage: H=Hom(RP2,X)
> sage: X.n_skeleton(2) ;# hack to create X._simplex_data
> Simplicial set with 57 non-degenerate simplices
> sage: i=H({e0:X.base_point(),e1:dict(X._simplex_data)[(g,)],e2:dict(X._simplex_data)[(g,g)]}) ; i
> Simplicial set morphism:
>   From: RP^2
>   To:   Classifying space of Dihedral group of order 8 as a permutation group
>   Defn: [1, f, f * f] --> [(), (1,3), (1,3) * (1,3)]
> ```
> It would be nice to have a method on X that wraps the `dict(X._simplex_data)[(g1,g2,...)]` (and is able to recognize degenerate simplices and implicitly constructs the required n-skeleton).

That sounds like a good idea.



---

archive/issue_comments_303325.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nOne thing that strikes me as problematic is that you're not using the Parent/Element framework for the simplicial sets: currently, the sets themselves are declared to be Parent objects, but their simplices are implemented by a separate AbstractSimplex class. Shouldn't it be \"better\" (and more in line with the general Sage \"philosophy\") to realize the simplices as Element instances? or is there maybe a good reason why you did not take that course?\n\nI actually feel a bit bad about bringing this up, because re-wiring the code to use the Element framework would not just be a lot of work, but also potentially open a can of worms with somewhat unclear benefits.\n\nBut anyway, regarding the latex representation of cells in a BG, for example, it would be nice to have a dedicated element class for simplices in a nerve; these elements would remember the chain of monoid elements used to construct them and forward calls to `_repr_` and `_latex_` to those monoid elements. Among other things, this avoids setting a custom_name for all (nondegenerate) simplices, which might be regarded a little wasteful. [Of course, it does set a custom \"_chain\" attribute then, which takes up the same space - but this is arguably more \"valuable\"]\n\nActually, I just tried this approach out (i.e. the Nerve with a custom Element subclass). It seems to work fine - except that for the life of me I cannot get the sorting of these elements in line with the existing code from AbstractSimplex... so plenty of doctests fail. This is probably just a small indication of the nasty suprises that might be lurking here.\n\nAnyway, I'm just curious to hear what your view on this is!",
    "created_at": "2016-09-19T15:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303325",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:43" align="right">Comment 43</div>

One thing that strikes me as problematic is that you're not using the Parent/Element framework for the simplicial sets: currently, the sets themselves are declared to be Parent objects, but their simplices are implemented by a separate AbstractSimplex class. Shouldn't it be "better" (and more in line with the general Sage "philosophy") to realize the simplices as Element instances? or is there maybe a good reason why you did not take that course?

I actually feel a bit bad about bringing this up, because re-wiring the code to use the Element framework would not just be a lot of work, but also potentially open a can of worms with somewhat unclear benefits.

But anyway, regarding the latex representation of cells in a BG, for example, it would be nice to have a dedicated element class for simplices in a nerve; these elements would remember the chain of monoid elements used to construct them and forward calls to `_repr_` and `_latex_` to those monoid elements. Among other things, this avoids setting a custom_name for all (nondegenerate) simplices, which might be regarded a little wasteful. [Of course, it does set a custom "_chain" attribute then, which takes up the same space - but this is arguably more "valuable"]

Actually, I just tried this approach out (i.e. the Nerve with a custom Element subclass). It seems to work fine - except that for the life of me I cannot get the sorting of these elements in line with the existing code from AbstractSimplex... so plenty of doctests fail. This is probably just a small indication of the nasty suprises that might be lurking here.

Anyway, I'm just curious to hear what your view on this is!



---

archive/issue_comments_303326.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nOne benefit to using the !Parent/Element framework is coercion; in particular, for input of morphisms. Another is you can take advantage of coercion for rich comparisons (side note, IIRC, you do not need `__ne__` with `@total_ordering`). In principle, it should be as easy as changing the inheritance from `SageObject` to `Element` and setting `Element = AbstractSimplex` in the parent class. To get coercions, a few `_coerce_map_from_` might need to be implemented.\n\nFrom now (finally) having a moment to take a skim-through, I would separate the examples into a separate file for easier readability and separation-of-concerns.",
    "created_at": "2016-09-19T16:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303326",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:44" align="right">Comment 44</div>

One benefit to using the !Parent/Element framework is coercion; in particular, for input of morphisms. Another is you can take advantage of coercion for rich comparisons (side note, IIRC, you do not need `__ne__` with `@total_ordering`). In principle, it should be as easy as changing the inheritance from `SageObject` to `Element` and setting `Element = AbstractSimplex` in the parent class. To get coercions, a few `_coerce_map_from_` might need to be implemented.

From now (finally) having a moment to take a skim-through, I would separate the examples into a separate file for easier readability and separation-of-concerns.



---

archive/issue_comments_303327.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nI'm finally getting back to this.\n\n- I think you do need to define `__ne__` with `@total_ordering`: I think `@total_ordering` only deals with `<`, `>`, etc., not `!=`. Looking at the `@total_ordering` source code seems to confirm this; furthermore, if I delete that method, I get all sorts of breakages.\n\n- Now I remember why I'm not using the `Parent/Element` framework: when you define an `Element`, you are supposed to assign a parent to it, but when defining simplices for a simplicial set, you often want to define the simplices *first*, without assigning a parent to them. In particular, you should be able to define an abstract simplex without having a parent attached to it, and this disagrees with the documentation for the `Element` class in Sage:\n\n```\n    Subtypes must either call ``__init__()`` to set ``_parent``, or may\n    set ``_parent`` themselves if that would be more efficient.\n```\n You also might want one simplex to be an element of several different simplicial sets (not two copies of that simplex, but that exact simplex, for example when constructing subsimplices). Suggestions for how to get around this?",
    "created_at": "2016-09-26T21:49:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303327",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:45" align="right">Comment 45</div>

I'm finally getting back to this.

- I think you do need to define `__ne__` with `@total_ordering`: I think `@total_ordering` only deals with `<`, `>`, etc., not `!=`. Looking at the `@total_ordering` source code seems to confirm this; furthermore, if I delete that method, I get all sorts of breakages.

- Now I remember why I'm not using the `Parent/Element` framework: when you define an `Element`, you are supposed to assign a parent to it, but when defining simplices for a simplicial set, you often want to define the simplices *first*, without assigning a parent to them. In particular, you should be able to define an abstract simplex without having a parent attached to it, and this disagrees with the documentation for the `Element` class in Sage:

```
    Subtypes must either call ``__init__()`` to set ``_parent``, or may
    set ``_parent`` themselves if that would be more efficient.
```
 You also might want one simplex to be an element of several different simplicial sets (not two copies of that simplex, but that exact simplex, for example when constructing subsimplices). Suggestions for how to get around this?



---

archive/issue_comments_303328.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64c8d0a232bd0969978066607a6cd3ca42096d88\">64c8d0a</a></td><td><code>Simplicial sets: move examples to a separate file.</code></td></tr></table>\n",
    "created_at": "2016-09-27T16:27:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303328",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46" align="right">Comment 46</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64c8d0a232bd0969978066607a6cd3ca42096d88">64c8d0a</a></td><td><code>Simplicial sets: move examples to a separate file.</code></td></tr></table>




---

archive/issue_comments_303329.json:
```json
{
    "body": "Changed commit from **[cecb9bc](https://github.com/sagemath/sagetrac-mirror/commit/cecb9bc13cc3167d0b6a6c73c7b71000db7b19ef)** to **[64c8d0a](https://github.com/sagemath/sagetrac-mirror/commit/64c8d0a232bd0969978066607a6cd3ca42096d88)**",
    "created_at": "2016-09-27T16:27:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303329",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cecb9bc](https://github.com/sagemath/sagetrac-mirror/commit/cecb9bc13cc3167d0b6a6c73c7b71000db7b19ef)** to **[64c8d0a](https://github.com/sagemath/sagetrac-mirror/commit/64c8d0a232bd0969978066607a6cd3ca42096d88)**



---

archive/issue_comments_303330.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nReplying to [@jhpalmieri](#comment%3A45):\n> I'm finally getting back to this.\n> \n> - I think you do need to define `__ne__` with `@total_ordering`: I think `@total_ordering` only deals with `<`, `>`, etc., not `!=`. Looking at the `@total_ordering` source code seems to confirm this; furthermore, if I delete that method, I get all sorts of breakages.\n\nOkay, good to know. Thanks. I really wish we had a default `__ne__` for `SageObject` that just called `return not self == other`...\n\n> - Now I remember why I'm not using the `Parent/Element` framework: when you define an `Element`, you are supposed to assign a parent to it, but when defining simplices for a simplicial set, you often want to define the simplices *first*, without assigning a parent to them. In particular, you should be able to define an abstract simplex without having a parent attached to it, and this disagrees with the documentation for the `Element` class in Sage:\n> \n> ```\n>     Subtypes must either call ``__init__()`` to set ``_parent``, or may\n>     set ``_parent`` themselves if that would be more efficient.\n> ```\n>  You also might want one simplex to be an element of several different simplicial sets (not two copies of that simplex, but that exact simplex, for example when constructing subsimplices). Suggestions for how to get around this?\n\nYou can point to the underlying data between simplicies, which would minimize the overhead. The other option would be to have an `Element` version of an abstract simplex, where you copy all of the data. However, both of these have some drawbacks, and it might depend more on how this will be used what the best course of action is. The good news is that these are easy enough to refactor, so future changes should be straightforward if we decide to not change anything now.",
    "created_at": "2016-09-27T18:38:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303330",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:47" align="right">Comment 47</div>

Replying to [@jhpalmieri](#comment%3A45):
> I'm finally getting back to this.
> 
> - I think you do need to define `__ne__` with `@total_ordering`: I think `@total_ordering` only deals with `<`, `>`, etc., not `!=`. Looking at the `@total_ordering` source code seems to confirm this; furthermore, if I delete that method, I get all sorts of breakages.

Okay, good to know. Thanks. I really wish we had a default `__ne__` for `SageObject` that just called `return not self == other`...

> - Now I remember why I'm not using the `Parent/Element` framework: when you define an `Element`, you are supposed to assign a parent to it, but when defining simplices for a simplicial set, you often want to define the simplices *first*, without assigning a parent to them. In particular, you should be able to define an abstract simplex without having a parent attached to it, and this disagrees with the documentation for the `Element` class in Sage:
> 
> ```
>     Subtypes must either call ``__init__()`` to set ``_parent``, or may
>     set ``_parent`` themselves if that would be more efficient.
> ```
>  You also might want one simplex to be an element of several different simplicial sets (not two copies of that simplex, but that exact simplex, for example when constructing subsimplices). Suggestions for how to get around this?

You can point to the underlying data between simplicies, which would minimize the overhead. The other option would be to have an `Element` version of an abstract simplex, where you copy all of the data. However, both of these have some drawbacks, and it might depend more on how this will be used what the best course of action is. The good news is that these are easy enough to refactor, so future changes should be straightforward if we decide to not change anything now.



---

archive/issue_comments_303331.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nI'm inclined not to modify the `Element` structure right now.\n\nI looked into the `TestSuite`.\n\n- it's easy enough to implement `_an_element_`: just return a vertex (as long as it has one).\n- I also get a failure because `SimplicialSet_finite` inherits from `GenericCellComplex`, which has an `@abstract_method` which is not defined for simplicial sets: `join`. I will define a `join` method for simplicial sets which just raises a `NotImplementedError`, rather than just skip this test. (Or implement joins, but I don't think I want to do that right now.)\n- I also get a pickling error, and I don't know how to debug it:\n\n```\n    File \"sage/structure/sage_object.pyx\", line 436, in sage.structure.sage_object.SageObject.dumps (build/cythonized/sage/structure/sage_object.c:3727)\n      s = cPickle.dumps(self, protocol=2)\n  PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed\n```\n Any suggestions?",
    "created_at": "2016-09-30T20:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303331",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:48" align="right">Comment 48</div>

I'm inclined not to modify the `Element` structure right now.

I looked into the `TestSuite`.

- it's easy enough to implement `_an_element_`: just return a vertex (as long as it has one).
- I also get a failure because `SimplicialSet_finite` inherits from `GenericCellComplex`, which has an `@abstract_method` which is not defined for simplicial sets: `join`. I will define a `join` method for simplicial sets which just raises a `NotImplementedError`, rather than just skip this test. (Or implement joins, but I don't think I want to do that right now.)
- I also get a pickling error, and I don't know how to debug it:

```
    File "sage/structure/sage_object.pyx", line 436, in sage.structure.sage_object.SageObject.dumps (build/cythonized/sage/structure/sage_object.c:3727)
      s = cPickle.dumps(self, protocol=2)
  PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed
```
 Any suggestions?



---

archive/issue_comments_303332.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nReplying to [@jhpalmieri](#comment%3A45):\n> - Now I remember why I'm not using the `Parent/Element` framework: when you define an `Element`, you are supposed to assign a parent to it, but when defining simplices for a simplicial set, you often want to define the simplices *first*, without assigning a parent to them. In particular, you should be able to define an abstract simplex without having a parent attached to it, and this disagrees with the documentation for the `Element` class in Sage:\n> \n> ```\n>     Subtypes must either call ``__init__()`` to set ``_parent``, or may\n>     set ``_parent`` themselves if that would be more efficient.\n> ```\n>  You also might want one simplex to be an element of several different simplicial sets (not two copies of that simplex, but that exact simplex, for example when constructing subsimplices). Suggestions for how to get around this?\n\nI have to think about these questions a bit longer. You are probably referring to constructions like these from the doctests:\n\n```\nsage: v = AbstractSimplex(0, name='v')\nsage: a = AbstractSimplex(0, name='a')\nsage: b = AbstractSimplex(0, name='b')\nsage: c = AbstractSimplex(0, name='c')\nsage: e0 = AbstractSimplex(1, name='e_0')\nsage: e1 = AbstractSimplex(1, name='e_1')\nsage: e2 = AbstractSimplex(1, name='e_2')\nsage: X = SimplicialSet({e2: (b, a)})\nsage: Y0 = SimplicialSet({e2: (b,a), e0: (c,b), e1: (c,a)})\n```\nMy feeling is that `AbstractSimplex` could maybe become a `SimplicialSet` itself, namely an alias for a generic `n-simplex`. Whether this works out seems hard to say without actually trying to implement it.  I think there are potential benefits of sticking closer to the Sage parent/element framework, but whether this is worthwhile depends on the pain implied by the implementation.",
    "created_at": "2016-09-30T21:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303332",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:49" align="right">Comment 49</div>

Replying to [@jhpalmieri](#comment%3A45):
> - Now I remember why I'm not using the `Parent/Element` framework: when you define an `Element`, you are supposed to assign a parent to it, but when defining simplices for a simplicial set, you often want to define the simplices *first*, without assigning a parent to them. In particular, you should be able to define an abstract simplex without having a parent attached to it, and this disagrees with the documentation for the `Element` class in Sage:
> 
> ```
>     Subtypes must either call ``__init__()`` to set ``_parent``, or may
>     set ``_parent`` themselves if that would be more efficient.
> ```
>  You also might want one simplex to be an element of several different simplicial sets (not two copies of that simplex, but that exact simplex, for example when constructing subsimplices). Suggestions for how to get around this?

I have to think about these questions a bit longer. You are probably referring to constructions like these from the doctests:

```
sage: v = AbstractSimplex(0, name='v')
sage: a = AbstractSimplex(0, name='a')
sage: b = AbstractSimplex(0, name='b')
sage: c = AbstractSimplex(0, name='c')
sage: e0 = AbstractSimplex(1, name='e_0')
sage: e1 = AbstractSimplex(1, name='e_1')
sage: e2 = AbstractSimplex(1, name='e_2')
sage: X = SimplicialSet({e2: (b, a)})
sage: Y0 = SimplicialSet({e2: (b,a), e0: (c,b), e1: (c,a)})
```
My feeling is that `AbstractSimplex` could maybe become a `SimplicialSet` itself, namely an alias for a generic `n-simplex`. Whether this works out seems hard to say without actually trying to implement it.  I think there are potential benefits of sticking closer to the Sage parent/element framework, but whether this is worthwhile depends on the pain implied by the implementation.



---

archive/issue_comments_303333.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nIt looks like you're trying to pickle a lambda function, which you cannot do. IIRC, the usual workaround is to have an explicitly named function/method somewhere.",
    "created_at": "2016-09-30T21:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303333",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:50" align="right">Comment 50</div>

It looks like you're trying to pickle a lambda function, which you cannot do. IIRC, the usual workaround is to have an explicitly named function/method somewhere.



---

archive/issue_comments_303334.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nReplying to [@cnassau](#comment%3A49): \n> I have to think about these questions a bit longer. You are probably referring to constructions like these from the doctests:\n> \n> ```\n> sage: v = AbstractSimplex(0, name='v')\n> sage: a = AbstractSimplex(0, name='a')\n> sage: b = AbstractSimplex(0, name='b')\n> sage: c = AbstractSimplex(0, name='c')\n> sage: e0 = AbstractSimplex(1, name='e_0')\n> sage: e1 = AbstractSimplex(1, name='e_1')\n> sage: e2 = AbstractSimplex(1, name='e_2')\n> sage: X = SimplicialSet({e2: (b, a)})\n> sage: Y0 = SimplicialSet({e2: (b,a), e0: (c,b), e1: (c,a)})\n> ```\n> My feeling is that `AbstractSimplex` could maybe become a `SimplicialSet` itself, namely an alias for a generic `n-simplex`. Whether this works out seems hard to say without actually trying to implement it.  I think there are potential benefits of sticking closer to the Sage parent/element framework, but whether this is worthwhile depends on the pain implied by the implementation. \n\nIt's not just doctests. Any time you want to define a simplicial set in Sage, you build it out of instances of `AbstractSimplex`. To construct a sphere, you define a 0-simplex and an n-simplex, and then tell Sage what each face of the n-simplex is (= the unique degenerate (n-1)-simplex coming from the vertex).\n\nSo I guess we could have a hierarchy of classes: a basic simplicial set to model simplices, then a full-fledged simplicial set built out of those basic ones? Would the full-fledged simplicial sets have the basic ones as elements? I'm not sure how it would work. If you have ideas for an implementation, let me know.",
    "created_at": "2016-09-30T22:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303334",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:51" align="right">Comment 51</div>

Replying to [@cnassau](#comment%3A49): 
> I have to think about these questions a bit longer. You are probably referring to constructions like these from the doctests:
> 
> ```
> sage: v = AbstractSimplex(0, name='v')
> sage: a = AbstractSimplex(0, name='a')
> sage: b = AbstractSimplex(0, name='b')
> sage: c = AbstractSimplex(0, name='c')
> sage: e0 = AbstractSimplex(1, name='e_0')
> sage: e1 = AbstractSimplex(1, name='e_1')
> sage: e2 = AbstractSimplex(1, name='e_2')
> sage: X = SimplicialSet({e2: (b, a)})
> sage: Y0 = SimplicialSet({e2: (b,a), e0: (c,b), e1: (c,a)})
> ```
> My feeling is that `AbstractSimplex` could maybe become a `SimplicialSet` itself, namely an alias for a generic `n-simplex`. Whether this works out seems hard to say without actually trying to implement it.  I think there are potential benefits of sticking closer to the Sage parent/element framework, but whether this is worthwhile depends on the pain implied by the implementation. 

It's not just doctests. Any time you want to define a simplicial set in Sage, you build it out of instances of `AbstractSimplex`. To construct a sphere, you define a 0-simplex and an n-simplex, and then tell Sage what each face of the n-simplex is (= the unique degenerate (n-1)-simplex coming from the vertex).

So I guess we could have a hierarchy of classes: a basic simplicial set to model simplices, then a full-fledged simplicial set built out of those basic ones? Would the full-fledged simplicial sets have the basic ones as elements? I'm not sure how it would work. If you have ideas for an implementation, let me know.



---

archive/issue_comments_303335.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nReplying to [@tscrim](#comment%3A50):\n> It looks like you're trying to pickle a lambda function, which you cannot do. IIRC, the usual workaround is to have an explicitly named function/method somewhere.\n\nOh, I see. For some of the examples of simplicial sets, like the `n`-sphere, I have lines like\n\n```\n    S._latex_ = lambda: 'S^{{{}}}'.format(n)\n    return S\n```\nSo maybe the class `SimplicialSet_finite` (or `SimplicialSet_arbitrary`) should have a custom `latex_name` argument which gets used in its `_latex_` method, to avoid this sort of thing.",
    "created_at": "2016-09-30T22:36:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303335",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:52" align="right">Comment 52</div>

Replying to [@tscrim](#comment%3A50):
> It looks like you're trying to pickle a lambda function, which you cannot do. IIRC, the usual workaround is to have an explicitly named function/method somewhere.

Oh, I see. For some of the examples of simplicial sets, like the `n`-sphere, I have lines like

```
    S._latex_ = lambda: 'S^{{{}}}'.format(n)
    return S
```
So maybe the class `SimplicialSet_finite` (or `SimplicialSet_arbitrary`) should have a custom `latex_name` argument which gets used in its `_latex_` method, to avoid this sort of thing.



---

archive/issue_comments_303336.json:
```json
{
    "body": "Changed commit from **[64c8d0a](https://github.com/sagemath/sagetrac-mirror/commit/64c8d0a232bd0969978066607a6cd3ca42096d88)** to **[1871083](https://github.com/sagemath/sagetrac-mirror/commit/18710835161be845f2ea06e0ecfa7fdff1f995fd)**",
    "created_at": "2016-09-30T22:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303336",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[64c8d0a](https://github.com/sagemath/sagetrac-mirror/commit/64c8d0a232bd0969978066607a6cd3ca42096d88)** to **[1871083](https://github.com/sagemath/sagetrac-mirror/commit/18710835161be845f2ea06e0ecfa7fdff1f995fd)**



---

archive/issue_comments_303337.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18710835161be845f2ea06e0ecfa7fdff1f995fd\">1871083</a></td><td><code>Simplicial sets: move Nerve to simplicial_set_examples, add</code></td></tr></table>\n",
    "created_at": "2016-09-30T22:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303337",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53" align="right">Comment 53</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18710835161be845f2ea06e0ecfa7fdff1f995fd">1871083</a></td><td><code>Simplicial sets: move Nerve to simplicial_set_examples, add</code></td></tr></table>




---

archive/issue_comments_303338.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nHere is partial progress: latex names for `AbstractSimplex`. I'll work on latex names for simplicial sets and on the pickling issue later.",
    "created_at": "2016-09-30T22:38:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303338",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:54" align="right">Comment 54</div>

Here is partial progress: latex names for `AbstractSimplex`. I'll work on latex names for simplicial sets and on the pickling issue later.



---

archive/issue_comments_303339.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nReplying to [@cnassau](#comment%3A49):\n> My feeling is that `AbstractSimplex` could maybe become a `SimplicialSet` itself, namely an alias for a generic `n-simplex`. Whether this works out seems hard to say without actually trying to implement it.  I think there are potential benefits of sticking closer to the Sage parent/element framework, but whether this is worthwhile depends on the pain implied by the implementation. \n\nThis idea was somehwat off, but the following seems to work:\n  1) create a new parent singleton `SetOfAbstractSimplices` as a parent for all `AbstractSimplex` objects\n\n  2) make `SimplicialSets` a subcategory of `FacadeSets`, so they can all share their elements with the `SetOfAbstractSimplices`\n\nI have implemented this (very roughly) and think this might be a feasible approach. My changes are shown in this commit:\n   https://github.com/sagemath/sagetrac-mirror/commit/bcc53e3b9100163d7c1c2d0a42aceb9458f83c8a\nOne of the benefits is that simplicial sets can then have custom element classes: this is illustrated in the Nerve, where simplices only remember the chain of group elements, not their \"custom name\" or \"custom latex name\". And their names are only computed when somebody actually asks for them. \n\n(caveat: \"latex(degeneration(nerve-simplex))\" is still wrong with this code: there should probably be a `_latex_nondegenerate_` method that the Nerve.Element class should override, but these are details left for later).\n\nPickling remains a problem because of the lack of unique representation; I suggest to disable the _test_pickling for the simplicial stuff (have done that for elements in that commit).\n\nIn case you could warm up to these suggestions there might be a few further rearrangements, that might prove useful; much of the AbstractSimplex code should probably moved into the ElementMethods of the SimplicialSets category, for example.",
    "created_at": "2016-10-01T13:42:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303339",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:55" align="right">Comment 55</div>

Replying to [@cnassau](#comment%3A49):
> My feeling is that `AbstractSimplex` could maybe become a `SimplicialSet` itself, namely an alias for a generic `n-simplex`. Whether this works out seems hard to say without actually trying to implement it.  I think there are potential benefits of sticking closer to the Sage parent/element framework, but whether this is worthwhile depends on the pain implied by the implementation. 

This idea was somehwat off, but the following seems to work:
  1) create a new parent singleton `SetOfAbstractSimplices` as a parent for all `AbstractSimplex` objects

  2) make `SimplicialSets` a subcategory of `FacadeSets`, so they can all share their elements with the `SetOfAbstractSimplices`

I have implemented this (very roughly) and think this might be a feasible approach. My changes are shown in this commit:
   https://github.com/sagemath/sagetrac-mirror/commit/bcc53e3b9100163d7c1c2d0a42aceb9458f83c8a
One of the benefits is that simplicial sets can then have custom element classes: this is illustrated in the Nerve, where simplices only remember the chain of group elements, not their "custom name" or "custom latex name". And their names are only computed when somebody actually asks for them. 

(caveat: "latex(degeneration(nerve-simplex))" is still wrong with this code: there should probably be a `_latex_nondegenerate_` method that the Nerve.Element class should override, but these are details left for later).

Pickling remains a problem because of the lack of unique representation; I suggest to disable the _test_pickling for the simplicial stuff (have done that for elements in that commit).

In case you could warm up to these suggestions there might be a few further rearrangements, that might prove useful; much of the AbstractSimplex code should probably moved into the ElementMethods of the SimplicialSets category, for example.



---

archive/issue_comments_303340.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nReplying to [@cnassau](#comment%3A55):\n>   2) make `SimplicialSets` a subcategory of `FacadeSets`, so they can all share their elements with the `SetOfAbstractSimplices`\n\nPlease no, I've seen very subtle behavior problems with facade sets/parents. Facades don't \"share\" elements, they just allow you to do `P(foo)`, but you run into trouble when you really do want elements of `P`. A much better approach is to pass underlying data and have the elements behave like adapter classes (it just can require more lines of documentation). I'm +1 on having actual element classes, but it doesn't need to be here for this to get a positive review.\n\n> Pickling remains a problem because of the lack of unique representation; I suggest to disable the _test_pickling for the simplicial stuff (have done that for elements in that commit). \n\nUnique representation is just one way to deal with pickling, but it is not the only way. [comment:52](#comment%3A52) is the likely culprit to me, and I'm +1 on having a (customizable) `_latex_name` attribute/input. We do this, e.g., in `CombinatorialFreeModule` and in the manifolds.",
    "created_at": "2016-10-01T15:24:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303340",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:56" align="right">Comment 56</div>

Replying to [@cnassau](#comment%3A55):
>   2) make `SimplicialSets` a subcategory of `FacadeSets`, so they can all share their elements with the `SetOfAbstractSimplices`

Please no, I've seen very subtle behavior problems with facade sets/parents. Facades don't "share" elements, they just allow you to do `P(foo)`, but you run into trouble when you really do want elements of `P`. A much better approach is to pass underlying data and have the elements behave like adapter classes (it just can require more lines of documentation). I'm +1 on having actual element classes, but it doesn't need to be here for this to get a positive review.

> Pickling remains a problem because of the lack of unique representation; I suggest to disable the _test_pickling for the simplicial stuff (have done that for elements in that commit). 

Unique representation is just one way to deal with pickling, but it is not the only way. [comment:52](#comment%3A52) is the likely culprit to me, and I'm +1 on having a (customizable) `_latex_name` attribute/input. We do this, e.g., in `CombinatorialFreeModule` and in the manifolds.



---

archive/issue_comments_303341.json:
```json
{
    "body": "Changed commit from **[1871083](https://github.com/sagemath/sagetrac-mirror/commit/18710835161be845f2ea06e0ecfa7fdff1f995fd)** to **[cd9cfff](https://github.com/sagemath/sagetrac-mirror/commit/cd9cfffdf37d0c9e24ac5ecc0c255130f5945e23)**",
    "created_at": "2016-10-01T18:04:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303341",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1871083](https://github.com/sagemath/sagetrac-mirror/commit/18710835161be845f2ea06e0ecfa7fdff1f995fd)** to **[cd9cfff](https://github.com/sagemath/sagetrac-mirror/commit/cd9cfffdf37d0c9e24ac5ecc0c255130f5945e23)**



---

archive/issue_comments_303342.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd9cfffdf37d0c9e24ac5ecc0c255130f5945e23\">cd9cfff</a></td><td><code>simplicial sets: add latex_name for SimplicialSet_finite.</code></td></tr></table>\n",
    "created_at": "2016-10-01T18:04:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303342",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57" align="right">Comment 57</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd9cfffdf37d0c9e24ac5ecc0c255130f5945e23">cd9cfff</a></td><td><code>simplicial sets: add latex_name for SimplicialSet_finite.</code></td></tr></table>




---

archive/issue_comments_303343.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nI removed the lambda functions, but pickling still doesn't work, with a different error this time:\n\n```\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/sage/homology/simplicial_set.py\", line 3227, in __hash__\n    return hash(self._data)\n  File \"sage/structure/parent.pyx\", line 855, in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:8320)\n    attr = getattr_from_other_class(self, self._category.parent_class, name)\n  File \"sage/structure/misc.pyx\", line 253, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1755)\n    raise dummy_attribute_error\nAttributeError: 'SimplicialSet_finite_with_category' object has no attribute '_data'\n```\nI don't understand this because when I define a simplicial set, first of all, `self._data` is defined in the `__init__` method, and second of all, I can access `X._data` from the command line with no problem. I must be missing something obvious.",
    "created_at": "2016-10-01T18:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303343",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:58" align="right">Comment 58</div>

I removed the lambda functions, but pickling still doesn't work, with a different error this time:

```
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/sage/homology/simplicial_set.py", line 3227, in __hash__
    return hash(self._data)
  File "sage/structure/parent.pyx", line 855, in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:8320)
    attr = getattr_from_other_class(self, self._category.parent_class, name)
  File "sage/structure/misc.pyx", line 253, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1755)
    raise dummy_attribute_error
AttributeError: 'SimplicialSet_finite_with_category' object has no attribute '_data'
```
I don't understand this because when I define a simplicial set, first of all, `self._data` is defined in the `__init__` method, and second of all, I can access `X._data` from the command line with no problem. I must be missing something obvious.



---

archive/issue_comments_303344.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nReplying to [@jhpalmieri](#comment%3A58):\n> I removed the lambda functions, but pickling still doesn't work, with a different error this time:\n\nI don't think there's a chance to make pickling work to the satisfaction of the `TestSuite`: you can never have \"`loads(dumps(simplex)) == simplex`\" since both sides are different python objects and equality of `AbstractSimplex` objects is tied to their `id`. And since `SimplicialSet` objects are uniquely determined by their simplices this means that they too can't be recovered from their pickle.\n\nOf course, the \"loads(dumps(...))\" call itself should eventually work. It seems `pickle` takes the hash before the object is fully constructed:\n\n```\nsage: from sage.structure.sage_object import StringIO\nsage: pickle.load(StringIO(dumps(CP2,compress=false)))\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-7-695809fd4beb> in <module>()\n...\n/waste/cn/sage-git/local/lib/python/pickle.pyc in load_setitem(self)\n-> 1202         dict[key] = value\n   1203     dispatch[SETITEM] = load_setitem\n```\nI have no idea why this might be the case, though... a hidden recursive reference, maybe...? FWIW, pickling succeeds if the `__hash__` routine returns -1 in case of a missing `_data` member.",
    "created_at": "2016-10-01T19:54:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303344",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:59" align="right">Comment 59</div>

Replying to [@jhpalmieri](#comment%3A58):
> I removed the lambda functions, but pickling still doesn't work, with a different error this time:

I don't think there's a chance to make pickling work to the satisfaction of the `TestSuite`: you can never have "`loads(dumps(simplex)) == simplex`" since both sides are different python objects and equality of `AbstractSimplex` objects is tied to their `id`. And since `SimplicialSet` objects are uniquely determined by their simplices this means that they too can't be recovered from their pickle.

Of course, the "loads(dumps(...))" call itself should eventually work. It seems `pickle` takes the hash before the object is fully constructed:

```
sage: from sage.structure.sage_object import StringIO
sage: pickle.load(StringIO(dumps(CP2,compress=false)))
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-7-695809fd4beb> in <module>()
...
/waste/cn/sage-git/local/lib/python/pickle.pyc in load_setitem(self)
-> 1202         dict[key] = value
   1203     dispatch[SETITEM] = load_setitem
```
I have no idea why this might be the case, though... a hidden recursive reference, maybe...? FWIW, pickling succeeds if the `__hash__` routine returns -1 in case of a missing `_data` member.



---

archive/issue_comments_303345.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nReplying to [@cnassau](#comment%3A59):\n> Replying to [@jhpalmieri](#comment%3A58):\n> > I removed the lambda functions, but pickling still doesn't work, with a different error this time:\n\n> I don't think there's a chance to make pickling work to the satisfaction of the `TestSuite`: you can never have \"`loads(dumps(simplex)) == simplex`\" since both sides are different python objects and equality of `AbstractSimplex` objects is tied to their `id`. And since `SimplicialSet` objects are uniquely determined by their simplices this means that they too can't be recovered from their pickle.\n\nI would say that is a bad equality check (that is only for nondegenerate simplices). It should (along with the hash) compare the underlying simplices. I think the first check, which was suppose to be an optimization, should just be removed (likewise for `__hash__`).",
    "created_at": "2016-10-01T21:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303345",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:60" align="right">Comment 60</div>

Replying to [@cnassau](#comment%3A59):
> Replying to [@jhpalmieri](#comment%3A58):
> > I removed the lambda functions, but pickling still doesn't work, with a different error this time:

> I don't think there's a chance to make pickling work to the satisfaction of the `TestSuite`: you can never have "`loads(dumps(simplex)) == simplex`" since both sides are different python objects and equality of `AbstractSimplex` objects is tied to their `id`. And since `SimplicialSet` objects are uniquely determined by their simplices this means that they too can't be recovered from their pickle.

I would say that is a bad equality check (that is only for nondegenerate simplices). It should (along with the hash) compare the underlying simplices. I think the first check, which was suppose to be an optimization, should just be removed (likewise for `__hash__`).



---

archive/issue_comments_303346.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\nI can certainly make the change\n\n```diff\ndiff --git a/src/sage/homology/simplicial_set.py b/src/sage/homology/simplicial_set.py\nindex 2f9987a..3ef1c2f 100644\n--- a/src/sage/homology/simplicial_set.py\n+++ b/src/sage/homology/simplicial_set.py\n@@ -484,7 +484,7 @@ class AbstractSimplex(SageObject):\n         \"\"\"\n         if self.is_nondegenerate():\n             return id(self)\n-        return hash(self.nondegenerate()) ^ hash(self._degens)\n+        return id(self.nondegenerate()) ^ hash(self._degens)\n \n     def __eq__(self, other):\n         \"\"\"\n@@ -512,8 +512,6 @@ class AbstractSimplex(SageObject):\n         \"\"\"\n         if not isinstance(other, AbstractSimplex):\n             return False\n-        if self.is_nondegenerate() and other.is_nondegenerate():\n-            return self is other\n         return (self._degens == other._degens\n                 and self.nondegenerate() is other.nondegenerate())\n \n```\n`loads(dumps(x)) == x` will still fail, which is fine with me.\n\nThis is for `AbstractSimplex`, though. My other problem was for pickling with `SimplicialSet_finite`, which I still don't understand. (I agree with Christian that `loads(dumps(X)) == X` will fail, but I would like `loads(dumps(X))` to not raise an error.)",
    "created_at": "2016-10-02T00:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303346",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:61" align="right">Comment 61</div>

I can certainly make the change

```diff
diff --git a/src/sage/homology/simplicial_set.py b/src/sage/homology/simplicial_set.py
index 2f9987a..3ef1c2f 100644
--- a/src/sage/homology/simplicial_set.py
+++ b/src/sage/homology/simplicial_set.py
@@ -484,7 +484,7 @@ class AbstractSimplex(SageObject):
         """
         if self.is_nondegenerate():
             return id(self)
-        return hash(self.nondegenerate()) ^ hash(self._degens)
+        return id(self.nondegenerate()) ^ hash(self._degens)
 
     def __eq__(self, other):
         """
@@ -512,8 +512,6 @@ class AbstractSimplex(SageObject):
         """
         if not isinstance(other, AbstractSimplex):
             return False
-        if self.is_nondegenerate() and other.is_nondegenerate():
-            return self is other
         return (self._degens == other._degens
                 and self.nondegenerate() is other.nondegenerate())
 
```
`loads(dumps(x)) == x` will still fail, which is fine with me.

This is for `AbstractSimplex`, though. My other problem was for pickling with `SimplicialSet_finite`, which I still don't understand. (I agree with Christian that `loads(dumps(X)) == X` will fail, but I would like `loads(dumps(X))` to not raise an error.)



---

archive/issue_comments_303347.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nReplying to [@jhpalmieri](#comment%3A61):\n> My other problem was for pickling with `SimplicialSet_finite`, which I still don't understand. (I agree with Christian that `loads(dumps(X)) == X` will fail, but I would like `loads(dumps(X))` to not raise an error.)\n\nThe problem seems to be that every `AbstractSimplex` in a `SimplicialSet` keeps a list of its parents in the `_faces` attribute. I just deactivated these lines and \"loads(dumps(...))\" works again:\n\n```\n        # Finally, store the faces of each nondegenerate simplex as an\n        # attribute of the simplex itself.\n        for x in simplices:\n            x._faces[self] = data[x]\n``` \nI think during unpickling python tries to re-populate the `x._faces` for each x in its `_data`, and here it needs the hash of `self` even though `self` is not fully reconstructed, yet.\n\nFWIW, I think this `_faces` attribute in the `AbstractSimplex` should probably be removed. The category should specify a \"`faces(element)`\" parent method, while the actual parent implementations are free to implement this in whatever way they like.",
    "created_at": "2016-10-02T08:59:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303347",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:62" align="right">Comment 62</div>

Replying to [@jhpalmieri](#comment%3A61):
> My other problem was for pickling with `SimplicialSet_finite`, which I still don't understand. (I agree with Christian that `loads(dumps(X)) == X` will fail, but I would like `loads(dumps(X))` to not raise an error.)

The problem seems to be that every `AbstractSimplex` in a `SimplicialSet` keeps a list of its parents in the `_faces` attribute. I just deactivated these lines and "loads(dumps(...))" works again:

```
        # Finally, store the faces of each nondegenerate simplex as an
        # attribute of the simplex itself.
        for x in simplices:
            x._faces[self] = data[x]
``` 
I think during unpickling python tries to re-populate the `x._faces` for each x in its `_data`, and here it needs the hash of `self` even though `self` is not fully reconstructed, yet.

FWIW, I think this `_faces` attribute in the `AbstractSimplex` should probably be removed. The category should specify a "`faces(element)`" parent method, while the actual parent implementations are free to implement this in whatever way they like.



---

archive/issue_comments_303348.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nThe current data structure is flawed, I think. I think it's a good idea that two simplicial sets can contain the same `AbstractSimplex`, but then to make geometric sense, that `AbstractSimplex` should have the same faces in each of those simplicial sets (possibly up to some identifications, if a quotient operation is involved). In other words, I agree that the `._faces` attribute, keyed by simplicial sets, should be removed. \n\nSo I've been trying to think of other options. Here's one idea:\n\n- `PreSimplex` -- like the current `AbstractSimplex`, it would have a dimension and optionally, degeneracies, an underlying nondegenerate `PreSimplex`, a name, etc. It's not a full-fledged simplex because it doesn't have faces.\n\n- `SimplicialSet_finite`. Define by specifying a dictionary, as now, where each key is a `PreSimplex` and the corresponding value is its list of faces. At that point, each `PreSimplex` would define an `Element` of the simplicial set and would remember its faces. Could you also specify `Elements` of other simplicial sets as keys? If you specify the same `PreSimplex` as belonging to two different simplicial sets, what should happen? Raise an error unless the faces match up?",
    "created_at": "2016-10-03T20:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303348",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:63" align="right">Comment 63</div>

The current data structure is flawed, I think. I think it's a good idea that two simplicial sets can contain the same `AbstractSimplex`, but then to make geometric sense, that `AbstractSimplex` should have the same faces in each of those simplicial sets (possibly up to some identifications, if a quotient operation is involved). In other words, I agree that the `._faces` attribute, keyed by simplicial sets, should be removed. 

So I've been trying to think of other options. Here's one idea:

- `PreSimplex` -- like the current `AbstractSimplex`, it would have a dimension and optionally, degeneracies, an underlying nondegenerate `PreSimplex`, a name, etc. It's not a full-fledged simplex because it doesn't have faces.

- `SimplicialSet_finite`. Define by specifying a dictionary, as now, where each key is a `PreSimplex` and the corresponding value is its list of faces. At that point, each `PreSimplex` would define an `Element` of the simplicial set and would remember its faces. Could you also specify `Elements` of other simplicial sets as keys? If you specify the same `PreSimplex` as belonging to two different simplicial sets, what should happen? Raise an error unless the faces match up?



---

archive/issue_comments_303349.json:
```json
{
    "body": "Changed commit from **[cd9cfff](https://github.com/sagemath/sagetrac-mirror/commit/cd9cfffdf37d0c9e24ac5ecc0c255130f5945e23)** to **[2b2a2c9](https://github.com/sagemath/sagetrac-mirror/commit/2b2a2c9df6428459b2a0875f4e483842e2635335)**",
    "created_at": "2016-10-03T21:57:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303349",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cd9cfff](https://github.com/sagemath/sagetrac-mirror/commit/cd9cfffdf37d0c9e24ac5ecc0c255130f5945e23)** to **[2b2a2c9](https://github.com/sagemath/sagetrac-mirror/commit/2b2a2c9df6428459b2a0875f4e483842e2635335)**



---

archive/issue_comments_303350.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">Comment 64</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b2a2c9df6428459b2a0875f4e483842e2635335\">2b2a2c9</a></td><td><code>simplicial sets: remove ._faces attribute from AbstractSimplex. Minor cleanup.</code></td></tr></table>\n",
    "created_at": "2016-10-03T21:57:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303350",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64" align="right">Comment 64</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b2a2c9df6428459b2a0875f4e483842e2635335">2b2a2c9</a></td><td><code>simplicial sets: remove ._faces attribute from AbstractSimplex. Minor cleanup.</code></td></tr></table>




---

archive/issue_comments_303351.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\nHere are minor changes: remove the `._faces` attribute and other minor cleanup. It may still be a good idea to change the data structure more, though.",
    "created_at": "2016-10-03T21:58:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303351",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:65" align="right">Comment 65</div>

Here are minor changes: remove the `._faces` attribute and other minor cleanup. It may still be a good idea to change the data structure more, though.



---

archive/issue_comments_303352.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">Comment 66</div>\n\nI guess my proposal is not that different from the current branch, except that it also would involve a new `Element` class for any `PreSimplex`/`AbstractSimplex` contained in a simplicial set. This would have the advantage of using the parent/element framework. I still had a few questions in [comment:63](#comment%3A63). \n\nI'm open to other ideas, too.",
    "created_at": "2016-10-03T22:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303352",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:66" align="right">Comment 66</div>

I guess my proposal is not that different from the current branch, except that it also would involve a new `Element` class for any `PreSimplex`/`AbstractSimplex` contained in a simplicial set. This would have the advantage of using the parent/element framework. I still had a few questions in [comment:63](#comment%3A63). 

I'm open to other ideas, too.



---

archive/issue_comments_303353.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">Comment 67</div>\n\nReplying to [@jhpalmieri](#comment%3A63):\n> I think it's a good idea that two simplicial sets can contain the same `AbstractSimplex`, but then to make geometric sense, that `AbstractSimplex` should have the same faces in each of those simplicial sets (possibly up to some identifications, if a quotient operation is involved).\n\nI like your basic approach to construct a simplicial set from a collection of simplices + additional face information. However, instead of creating a `PreSimplex` class without faces we could also just *add* faces to the `AbstractSimplex`, which turns them into regular $n$-simplices (this should also be easier to explain). Consider the code\n\n```\nsage: a,b = [AbstractSimplex(0,name=x) for x in \"ab\"]\nsage: e,f = [AbstractSimplex(1,name=x) for x in \"ef\"]\nsage: X = SimplicialSet_finite({e:(a,b),f:(a,b)})\nsage: Y = SimplicialSet_finite({e:(e.face(0),e.face(1)),f:(e.face(0),e.face(1))})\nsage: Z = SimplicialSet_finite({e:(f.face(0),f.face(0)),f:(f.face(0),f.face(1))})\n```\n\nAs far as the `Parent/Element` framework is concerned, none of $a,b,e,f$ would be actual elements of $X$, $Y$, or $Z$; rather they would be Elements of the `SetOfAbstractSimplices` singleton (which models the infinite coproduct of all `\\Delta_n^{(x)}` where $x$ can be, say, any python object).\n\nTo create elements you would have to cast them to the parent (which might sometimes happen implicitly):\n\n```\nsage: X.n_cells(0) == [a,b]\nFalse\nsage: X.n_cells(0) == [X(a), X(b)]\nTrue\nsage: Y.n_cells(0)\n[ Face d0 of e, Face d1 of e]\nsage: Z.n_cells(0)\n[ Face d0 of f, Face d1 of f ]\nsage: Z(e.face(1)) == Z(e).face(1)\nTrue\nsage: Z(e).faces()\n( Face d0 of f, Face d0 of f )\n```\n\nHere my assumption is that we're *not* following my earlier suggestion to use `FacadeSets`; rather every element/simplex belongs to a unique parent, following the advice of Travis in comment 56.",
    "created_at": "2016-10-04T14:38:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303353",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:67" align="right">Comment 67</div>

Replying to [@jhpalmieri](#comment%3A63):
> I think it's a good idea that two simplicial sets can contain the same `AbstractSimplex`, but then to make geometric sense, that `AbstractSimplex` should have the same faces in each of those simplicial sets (possibly up to some identifications, if a quotient operation is involved).

I like your basic approach to construct a simplicial set from a collection of simplices + additional face information. However, instead of creating a `PreSimplex` class without faces we could also just *add* faces to the `AbstractSimplex`, which turns them into regular $n$-simplices (this should also be easier to explain). Consider the code

```
sage: a,b = [AbstractSimplex(0,name=x) for x in "ab"]
sage: e,f = [AbstractSimplex(1,name=x) for x in "ef"]
sage: X = SimplicialSet_finite({e:(a,b),f:(a,b)})
sage: Y = SimplicialSet_finite({e:(e.face(0),e.face(1)),f:(e.face(0),e.face(1))})
sage: Z = SimplicialSet_finite({e:(f.face(0),f.face(0)),f:(f.face(0),f.face(1))})
```

As far as the `Parent/Element` framework is concerned, none of $a,b,e,f$ would be actual elements of $X$, $Y$, or $Z$; rather they would be Elements of the `SetOfAbstractSimplices` singleton (which models the infinite coproduct of all `\Delta_n^{(x)}` where $x$ can be, say, any python object).

To create elements you would have to cast them to the parent (which might sometimes happen implicitly):

```
sage: X.n_cells(0) == [a,b]
False
sage: X.n_cells(0) == [X(a), X(b)]
True
sage: Y.n_cells(0)
[ Face d0 of e, Face d1 of e]
sage: Z.n_cells(0)
[ Face d0 of f, Face d1 of f ]
sage: Z(e.face(1)) == Z(e).face(1)
True
sage: Z(e).faces()
( Face d0 of f, Face d0 of f )
```

Here my assumption is that we're *not* following my earlier suggestion to use `FacadeSets`; rather every element/simplex belongs to a unique parent, following the advice of Travis in comment 56.



---

archive/issue_comments_303354.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">Comment 68</div>\n\nReplying to [@jhpalmieri](#comment%3A61):\n> I can certainly make the change\n\nNot quite, the change I was suggesting was \n\n```diff\ndiff --git a/src/sage/homology/simplicial_set.py b/src/sage/homology/simplicial_set.py\nindex 2f9987a..3ef1c2f 100644\n--- a/src/sage/homology/simplicial_set.py\n+++ b/src/sage/homology/simplicial_set.py\n@@ -484,7 +484,7 @@ class AbstractSimplex(SageObject):\n         \"\"\"\n-        if self.is_nondegenerate():\n-            return id(self)\n         return hash(self.nondegenerate()) ^ hash(self._degens)\n \n     def __eq__(self, other):\n         \"\"\"\n@@ -512,8 +512,6 @@ class AbstractSimplex(SageObject):\n         \"\"\"\n         if not isinstance(other, AbstractSimplex):\n             return False\n-        if self.is_nondegenerate() and other.is_nondegenerate():\n-            return self is other\n         return (self._degens == other._degens\n                 and self.nondegenerate() is other.nondegenerate())\n \n```",
    "created_at": "2016-10-04T14:44:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303354",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:68" align="right">Comment 68</div>

Replying to [@jhpalmieri](#comment%3A61):
> I can certainly make the change

Not quite, the change I was suggesting was 

```diff
diff --git a/src/sage/homology/simplicial_set.py b/src/sage/homology/simplicial_set.py
index 2f9987a..3ef1c2f 100644
--- a/src/sage/homology/simplicial_set.py
+++ b/src/sage/homology/simplicial_set.py
@@ -484,7 +484,7 @@ class AbstractSimplex(SageObject):
         """
-        if self.is_nondegenerate():
-            return id(self)
         return hash(self.nondegenerate()) ^ hash(self._degens)
 
     def __eq__(self, other):
         """
@@ -512,8 +512,6 @@ class AbstractSimplex(SageObject):
         """
         if not isinstance(other, AbstractSimplex):
             return False
-        if self.is_nondegenerate() and other.is_nondegenerate():
-            return self is other
         return (self._degens == other._degens
                 and self.nondegenerate() is other.nondegenerate())
 
```



---

archive/issue_comments_303355.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">Comment 69</div>\n\nTravis, with this change to `__hash__`, `hash(self.nondegenerate())` would not be defined. If you make your change plus change that to `id(self.nondegenerate()) ^ hash(self._degens)`, then it somehow messes up the ordering on simplices: the ordering becomes random, somehow depending on `id` more than with the current code. I don't know the details, but I also don't know why you object to keeping the original `if`.",
    "created_at": "2016-10-04T14:58:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303355",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:69" align="right">Comment 69</div>

Travis, with this change to `__hash__`, `hash(self.nondegenerate())` would not be defined. If you make your change plus change that to `id(self.nondegenerate()) ^ hash(self._degens)`, then it somehow messes up the ordering on simplices: the ordering becomes random, somehow depending on `id` more than with the current code. I don't know the details, but I also don't know why you object to keeping the original `if`.



---

archive/issue_comments_303356.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">Comment 70</div>\n\nAh, I see. I was thinking the non-degenerate simplex was an instance of `Simplex`. So this problem with picking is basically what we had to contend with for SageManifolds. What we did was use `UniqueRepresentation` with add a hidden key value that was the time the object was created. You could use the same trick here for non-degenerate simplicies. You could then also use `UniqueRepresentation` for the degenerate simplicies as well and would have a much faster equality and hash operations.",
    "created_at": "2016-10-04T15:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303356",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:70" align="right">Comment 70</div>

Ah, I see. I was thinking the non-degenerate simplex was an instance of `Simplex`. So this problem with picking is basically what we had to contend with for SageManifolds. What we did was use `UniqueRepresentation` with add a hidden key value that was the time the object was created. You could use the same trick here for non-degenerate simplicies. You could then also use `UniqueRepresentation` for the degenerate simplicies as well and would have a much faster equality and hash operations.



---

archive/issue_comments_303357.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">Comment 71</div>\n\nReplying to [@cnassau](#comment%3A67):\n> Replying to [@jhpalmieri](#comment%3A63):\n> > I think it's a good idea that two simplicial sets can contain the same `AbstractSimplex`, but then to make geometric sense, that `AbstractSimplex` should have the same faces in each of those simplicial sets (possibly up to some identifications, if a quotient operation is involved).\n\n> \n> I like your basic approach to construct a simplicial set from a collection of simplices + additional face information. However, instead of creating a `PreSimplex` class without faces we could also just *add* faces to the `AbstractSimplex`, which turns them into regular $n$-simplices (this should also be easier to explain). Consider the code\n> \n> ```\n> sage: a,b = [AbstractSimplex(0,name=x) for x in \"ab\"]\n> sage: e,f = [AbstractSimplex(1,name=x) for x in \"ef\"]\n> sage: X = SimplicialSet_finite({e:(a,b),f:(a,b)})\n> sage: Y = SimplicialSet_finite({e:(e.face(0),e.face(1)),f:(e.face(0),e.face(1))})\n> sage: Z = SimplicialSet_finite({e:(f.face(0),f.face(0)),f:(f.face(0),f.face(1))})\n> ```\n\nSo an `AbstractSimplex` may or may not have faces, right? In your example, `e` and `f` do not have faces at the start, but after defining `X`, they do. So I guess at the start, `e.face(0)` would raise an error.\n\nThis gets back to my questions: what should happen if you do\n\n```\nsage: a,b,c = [AbstractSimplex(0,name=x) for x in \"abc\"]\nsage: e,f = [AbstractSimplex(1,name=x) for x in \"ef\"]\nsage: K = SimplicialSet_finite({e:(a,b)})\nsage: L = SimplicialSet_finite({e:(b,c)})\n```\nRaise an error because of the inconsistent face data for `e`?\n\nShould you also be able to do\n\n```\nsage: M = SimplicialSet_finite({f:(a,b), e:True})\n```\nor some other non-iterable value for `e`, which would just mean: `e` has already been defined, so use its existing faces? Or pass a tuple instead of a dictionary as defining data, where each entry is either a full-fledged simplex or a pair `(instance of AbstractSimplex, list of its faces)`? Maybe implement the latter as follows: if `sigma` is an instance of `AbstractSimplex`, then `sigma[0]` would return `sigma` while `sigma[1]` would return its tuple of faces. Then you could easily deal with a tuple which has entries either of the form `(f: (a,b))` or `e`.\n\nIs the point of the `SetOfAbstractSimplices` construction is just to have a parent around, so that `AbstractSimplex` can inherit from `Element`?",
    "created_at": "2016-10-04T20:57:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303357",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:71" align="right">Comment 71</div>

Replying to [@cnassau](#comment%3A67):
> Replying to [@jhpalmieri](#comment%3A63):
> > I think it's a good idea that two simplicial sets can contain the same `AbstractSimplex`, but then to make geometric sense, that `AbstractSimplex` should have the same faces in each of those simplicial sets (possibly up to some identifications, if a quotient operation is involved).

> 
> I like your basic approach to construct a simplicial set from a collection of simplices + additional face information. However, instead of creating a `PreSimplex` class without faces we could also just *add* faces to the `AbstractSimplex`, which turns them into regular $n$-simplices (this should also be easier to explain). Consider the code
> 
> ```
> sage: a,b = [AbstractSimplex(0,name=x) for x in "ab"]
> sage: e,f = [AbstractSimplex(1,name=x) for x in "ef"]
> sage: X = SimplicialSet_finite({e:(a,b),f:(a,b)})
> sage: Y = SimplicialSet_finite({e:(e.face(0),e.face(1)),f:(e.face(0),e.face(1))})
> sage: Z = SimplicialSet_finite({e:(f.face(0),f.face(0)),f:(f.face(0),f.face(1))})
> ```

So an `AbstractSimplex` may or may not have faces, right? In your example, `e` and `f` do not have faces at the start, but after defining `X`, they do. So I guess at the start, `e.face(0)` would raise an error.

This gets back to my questions: what should happen if you do

```
sage: a,b,c = [AbstractSimplex(0,name=x) for x in "abc"]
sage: e,f = [AbstractSimplex(1,name=x) for x in "ef"]
sage: K = SimplicialSet_finite({e:(a,b)})
sage: L = SimplicialSet_finite({e:(b,c)})
```
Raise an error because of the inconsistent face data for `e`?

Should you also be able to do

```
sage: M = SimplicialSet_finite({f:(a,b), e:True})
```
or some other non-iterable value for `e`, which would just mean: `e` has already been defined, so use its existing faces? Or pass a tuple instead of a dictionary as defining data, where each entry is either a full-fledged simplex or a pair `(instance of AbstractSimplex, list of its faces)`? Maybe implement the latter as follows: if `sigma` is an instance of `AbstractSimplex`, then `sigma[0]` would return `sigma` while `sigma[1]` would return its tuple of faces. Then you could easily deal with a tuple which has entries either of the form `(f: (a,b))` or `e`.

Is the point of the `SetOfAbstractSimplices` construction is just to have a parent around, so that `AbstractSimplex` can inherit from `Element`?



---

archive/issue_comments_303358.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">Comment 72</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ac9b30d34cf8ef9c30d0617f002421a78f8c763\">7ac9b30</a></td><td><code>Simplicial sets: fix pickling by making NonDegenerateSimplex inherit</code></td></tr></table>\n",
    "created_at": "2016-10-04T22:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303358",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:72" align="right">Comment 72</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ac9b30d34cf8ef9c30d0617f002421a78f8c763">7ac9b30</a></td><td><code>Simplicial sets: fix pickling by making NonDegenerateSimplex inherit</code></td></tr></table>




---

archive/issue_comments_303359.json:
```json
{
    "body": "Changed commit from **[2b2a2c9](https://github.com/sagemath/sagetrac-mirror/commit/2b2a2c9df6428459b2a0875f4e483842e2635335)** to **[7ac9b30](https://github.com/sagemath/sagetrac-mirror/commit/7ac9b30d34cf8ef9c30d0617f002421a78f8c763)**",
    "created_at": "2016-10-04T22:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303359",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2b2a2c9](https://github.com/sagemath/sagetrac-mirror/commit/2b2a2c9df6428459b2a0875f4e483842e2635335)** to **[7ac9b30](https://github.com/sagemath/sagetrac-mirror/commit/7ac9b30d34cf8ef9c30d0617f002421a78f8c763)**



---

archive/issue_comments_303360.json:
```json
{
    "body": "Changed commit from **[7ac9b30](https://github.com/sagemath/sagetrac-mirror/commit/7ac9b30d34cf8ef9c30d0617f002421a78f8c763)** to **[afbad45](https://github.com/sagemath/sagetrac-mirror/commit/afbad4505350d79488d56067151c6f109782693a)**",
    "created_at": "2016-10-04T22:32:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303360",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7ac9b30](https://github.com/sagemath/sagetrac-mirror/commit/7ac9b30d34cf8ef9c30d0617f002421a78f8c763)** to **[afbad45](https://github.com/sagemath/sagetrac-mirror/commit/afbad4505350d79488d56067151c6f109782693a)**



---

archive/issue_comments_303361.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">Comment 73</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/afbad4505350d79488d56067151c6f109782693a\">afbad45</a></td><td><code>Simplicial sets: AbstractSimplex now inherits from UniqueRepresentation</code></td></tr></table>\n",
    "created_at": "2016-10-04T22:32:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303361",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73" align="right">Comment 73</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/afbad4505350d79488d56067151c6f109782693a">afbad45</a></td><td><code>Simplicial sets: AbstractSimplex now inherits from UniqueRepresentation</code></td></tr></table>




---

archive/issue_comments_303362.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">Comment 74</div>\n\nProgress toward Travis's remarks: this make `NonDegenerateSimplex` a new class which inherits from `UniqueRepresentation`. It fixes pickling, and now simplicial sets (at least the first few examples I tried) pass their test suite. `AbstractSimplex` now also inherits from `UniqueRepresentation`. I had to add new inequality methods, since as far as I can tell, `UniqueRepresentation` doesn't work with `@total_ordering`.",
    "created_at": "2016-10-04T22:33:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303362",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:74" align="right">Comment 74</div>

Progress toward Travis's remarks: this make `NonDegenerateSimplex` a new class which inherits from `UniqueRepresentation`. It fixes pickling, and now simplicial sets (at least the first few examples I tried) pass their test suite. `AbstractSimplex` now also inherits from `UniqueRepresentation`. I had to add new inequality methods, since as far as I can tell, `UniqueRepresentation` doesn't work with `@total_ordering`.



---

archive/issue_comments_303363.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">Comment 75</div>\n\nReplying to [@jhpalmieri](#comment%3A71):\n> So an `AbstractSimplex` may or may not have faces, right? In your example, `e` and `f` do not have faces at the start, but after defining `X`, they do. So I guess at the start, `e.face(0)` would raise an error.\n\nNo, sorry, what I meant is that `AbstractSimplex` should become a fully funcional simplex in its own right. So `e.face(0)` would print as `Face d0 of e` (and maybe still be an instance of `AbstractSimplex`, but I'm not sure on this).\n\n\n> This gets back to my questions: what should happen if you do\n> \n> ```\n> sage: a,b,c = [AbstractSimplex(0,name=x) for x in \"abc\"]\n> sage: e,f = [AbstractSimplex(1,name=x) for x in \"ef\"]\n> sage: K = SimplicialSet_finite({e:(a,b)})\n> sage: L = SimplicialSet_finite({e:(b,c)})\n> ```\n> Raise an error because of the inconsistent face data for `e`?\n\nNo, no error: the point is that `e` is neither a simplex of `K` nor of `L`, it can just be coerced into those sets. Then `K(e) != L(e)` since these simplices belong to different parents. And there's no problem with `K(e.face(0)) = K(e).face(0) != L(e).face(0)`. \n\n> Should you also be able to do\n> \n> ```\n> sage: M = SimplicialSet_finite({f:(a,b), e:True})\n> ```\n> or some other non-iterable value for `e`, which would just mean: `e` has already been defined, so use its existing faces? \n\nYes, I think that sounds like a good idea. This should be equivalent to `{f:(a,b), e:(e.face(0),e.face(1))}`, so `e` defines a disjoint 1-simplex (assuming that a,b are not faces of e).\n\n> Or pass a tuple instead of a dictionary as defining data, where each entry is either a full-fledged simplex or a pair `(instance of AbstractSimplex, list of its faces)`? Maybe implement the latter as follows: if `sigma` is an instance of `AbstractSimplex`, then `sigma[0]` would return `sigma` while `sigma[1]` would return its tuple of faces. Then you could easily deal with a tuple which has entries either of the form `(f: (a,b))` or `e`.\n\nThis sounds like a nice way to make the defining data a bit simpler to specify (although it's probably just syntactic sugar).\n\n> Is the point of the `SetOfAbstractSimplices` construction is just to have a parent around, so that `AbstractSimplex` can inherit from `Element`?\n\nEssentially yes. And it might make the AbstractSimplex business easier to grasp from a mathematical point of view: the face data defining a `SimplicialSet_finite` $X$ amount to the specification of an assembly map\n\n```\n\\coprod_{i\\in I} \\Delta_{n_i}  \\rightarrow   X\n```\nAn `AbstractSimplex` should be the tautological simplex $\\iota_n\\in\\Delta_n$ for one of these summands.",
    "created_at": "2016-10-05T09:05:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303363",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:75" align="right">Comment 75</div>

Replying to [@jhpalmieri](#comment%3A71):
> So an `AbstractSimplex` may or may not have faces, right? In your example, `e` and `f` do not have faces at the start, but after defining `X`, they do. So I guess at the start, `e.face(0)` would raise an error.

No, sorry, what I meant is that `AbstractSimplex` should become a fully funcional simplex in its own right. So `e.face(0)` would print as `Face d0 of e` (and maybe still be an instance of `AbstractSimplex`, but I'm not sure on this).


> This gets back to my questions: what should happen if you do
> 
> ```
> sage: a,b,c = [AbstractSimplex(0,name=x) for x in "abc"]
> sage: e,f = [AbstractSimplex(1,name=x) for x in "ef"]
> sage: K = SimplicialSet_finite({e:(a,b)})
> sage: L = SimplicialSet_finite({e:(b,c)})
> ```
> Raise an error because of the inconsistent face data for `e`?

No, no error: the point is that `e` is neither a simplex of `K` nor of `L`, it can just be coerced into those sets. Then `K(e) != L(e)` since these simplices belong to different parents. And there's no problem with `K(e.face(0)) = K(e).face(0) != L(e).face(0)`. 

> Should you also be able to do
> 
> ```
> sage: M = SimplicialSet_finite({f:(a,b), e:True})
> ```
> or some other non-iterable value for `e`, which would just mean: `e` has already been defined, so use its existing faces? 

Yes, I think that sounds like a good idea. This should be equivalent to `{f:(a,b), e:(e.face(0),e.face(1))}`, so `e` defines a disjoint 1-simplex (assuming that a,b are not faces of e).

> Or pass a tuple instead of a dictionary as defining data, where each entry is either a full-fledged simplex or a pair `(instance of AbstractSimplex, list of its faces)`? Maybe implement the latter as follows: if `sigma` is an instance of `AbstractSimplex`, then `sigma[0]` would return `sigma` while `sigma[1]` would return its tuple of faces. Then you could easily deal with a tuple which has entries either of the form `(f: (a,b))` or `e`.

This sounds like a nice way to make the defining data a bit simpler to specify (although it's probably just syntactic sugar).

> Is the point of the `SetOfAbstractSimplices` construction is just to have a parent around, so that `AbstractSimplex` can inherit from `Element`?

Essentially yes. And it might make the AbstractSimplex business easier to grasp from a mathematical point of view: the face data defining a `SimplicialSet_finite` $X$ amount to the specification of an assembly map

```
\coprod_{i\in I} \Delta_{n_i}  \rightarrow   X
```
An `AbstractSimplex` should be the tautological simplex $\iota_n\in\Delta_n$ for one of these summands.



---

archive/issue_comments_303364.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">Comment 76</div>\n\nOkay, I think I understand. I guess each *non-degenerate* `AbstractSimplex` corresponds to one of the `\\Delta_n`'s, and then the degeneracies are clear mathematically, and I think we handle them as in the current code. So then I have the same question you do, which is what structure should the face of a non-degenerate `AbstractSimplex` have? \n\n- We could just create a class `FaceOfAbstractSimplex` for any (iterated) face of one of the `\\Delta_n`'s. It wouldn't have to do much, since most manipulations will occur within a simplicial set other than `SetOfAbstractSimplices`.\n\n- Or we could think that when we define the `n`-dimensional `AbstractSimplex` indexed by `x`, we in fact define a family of `i`-simplices, `i <= n`, namely the actual simplex `\\Delta_{n,x}` and all of its faces, all indexed by `x`. Thus `e.face(0)` would be an `AbstractSimplex` with the same indexing element as `e`, but of one dimensional lower.",
    "created_at": "2016-10-05T20:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303364",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:76" align="right">Comment 76</div>

Okay, I think I understand. I guess each *non-degenerate* `AbstractSimplex` corresponds to one of the `\Delta_n`'s, and then the degeneracies are clear mathematically, and I think we handle them as in the current code. So then I have the same question you do, which is what structure should the face of a non-degenerate `AbstractSimplex` have? 

- We could just create a class `FaceOfAbstractSimplex` for any (iterated) face of one of the `\Delta_n`'s. It wouldn't have to do much, since most manipulations will occur within a simplicial set other than `SetOfAbstractSimplices`.

- Or we could think that when we define the `n`-dimensional `AbstractSimplex` indexed by `x`, we in fact define a family of `i`-simplices, `i <= n`, namely the actual simplex `\Delta_{n,x}` and all of its faces, all indexed by `x`. Thus `e.face(0)` would be an `AbstractSimplex` with the same indexing element as `e`, but of one dimensional lower.



---

archive/issue_comments_303365.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">Comment 77</div>\n\nUnless you pass a unique tag up in the `__classcall__`, it won't get put into the key for `UniqueRepresentation`. Actually, probably what you had before was good. (Sorry, I haven't had time to full digest the code, clearly stuff off my plate slowly but surely,) You probably could just put `UniqueRepresentation` first so its `__hash__` and `__eq__` get placed first by the MRO.\n\nYou might also consider having a separate class for degenerate simplicies and then have some constructor (e.g., a `ClasscallMetaclass` with `__classcall_private__` in `AbstractSimplex` or have a global function entry point of `Simplex`, which probably should become a subclass of `AbstractSimplex` and/or `NonDegenerateSimplex`).\n\nI am also against this idea of having a singleton parent for the set of all simplicies. It feels like overkill and I fear we could quickly find ourselves in a form of pointer hell (parent hell?) trying to keep everything organized.",
    "created_at": "2016-10-05T21:23:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303365",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:77" align="right">Comment 77</div>

Unless you pass a unique tag up in the `__classcall__`, it won't get put into the key for `UniqueRepresentation`. Actually, probably what you had before was good. (Sorry, I haven't had time to full digest the code, clearly stuff off my plate slowly but surely,) You probably could just put `UniqueRepresentation` first so its `__hash__` and `__eq__` get placed first by the MRO.

You might also consider having a separate class for degenerate simplicies and then have some constructor (e.g., a `ClasscallMetaclass` with `__classcall_private__` in `AbstractSimplex` or have a global function entry point of `Simplex`, which probably should become a subclass of `AbstractSimplex` and/or `NonDegenerateSimplex`).

I am also against this idea of having a singleton parent for the set of all simplicies. It feels like overkill and I fear we could quickly find ourselves in a form of pointer hell (parent hell?) trying to keep everything organized.



---

archive/issue_comments_303366.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">Comment 78</div>\n\nIn the most recent version, I got rid of the line `__hash__ = UniqueRepresentation.__hash__` or whatever it was. (In the earlier version, if I put `UniqueRepresentation` first, then it seemed that I had to override the four methods `__lt__`, `__gt__`, etc., instead of the two methods `__eq__` and `__hash__`. This is moot now.) The most recent version also has a global function entry point (now called `AbstractSimplex`) for both `AbstractSimplex_class` and `NonDegenerateSimplex`, although in practice, I think I really just need `NonDegenerateSimplex`. I have to examine that.\n\nAlso, I only want the unique tag for `NonDegenerateSimplex`, not for `AbstractSimplex_class`: `NonDegenerateSimplex` inherits from `AbstractSimplex_class`, and in particular, if I start with the same non-degenerate simplex and apply the same degeneracies two different times, I should get the degenerate simplex. So for `AbstractSimplex_class`, the determining data should be the underlying non-degenerate simplex plus the degeneracies, but not the time stamp. That is,\n\n```\nsage: sigma.apply_degeneracies(1, 0) == sigma.apply_degeneracies(1, 0)\n```\nshould return `True` (as opposed to `NonDegenerateSimplex(3) == NonDegenerateSimplex(3)`, which should return `False`).\n\nWith what I had a while ago, there were some pickling issues. I don't know at which stage in the revisions they went away, though.\n\nI am not sure about the singleton parent. I can see advantages and drawbacks. It might be good to have `AbstractSimplex_class` inherit from `Element`. An alternative is to have a separate `Element` class for `SimplicialSet_finite` (or for `SimplicialSet_arbitrary`) which inherits from `AbstractSimplex_class`.",
    "created_at": "2016-10-05T22:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303366",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:78" align="right">Comment 78</div>

In the most recent version, I got rid of the line `__hash__ = UniqueRepresentation.__hash__` or whatever it was. (In the earlier version, if I put `UniqueRepresentation` first, then it seemed that I had to override the four methods `__lt__`, `__gt__`, etc., instead of the two methods `__eq__` and `__hash__`. This is moot now.) The most recent version also has a global function entry point (now called `AbstractSimplex`) for both `AbstractSimplex_class` and `NonDegenerateSimplex`, although in practice, I think I really just need `NonDegenerateSimplex`. I have to examine that.

Also, I only want the unique tag for `NonDegenerateSimplex`, not for `AbstractSimplex_class`: `NonDegenerateSimplex` inherits from `AbstractSimplex_class`, and in particular, if I start with the same non-degenerate simplex and apply the same degeneracies two different times, I should get the degenerate simplex. So for `AbstractSimplex_class`, the determining data should be the underlying non-degenerate simplex plus the degeneracies, but not the time stamp. That is,

```
sage: sigma.apply_degeneracies(1, 0) == sigma.apply_degeneracies(1, 0)
```
should return `True` (as opposed to `NonDegenerateSimplex(3) == NonDegenerateSimplex(3)`, which should return `False`).

With what I had a while ago, there were some pickling issues. I don't know at which stage in the revisions they went away, though.

I am not sure about the singleton parent. I can see advantages and drawbacks. It might be good to have `AbstractSimplex_class` inherit from `Element`. An alternative is to have a separate `Element` class for `SimplicialSet_finite` (or for `SimplicialSet_arbitrary`) which inherits from `AbstractSimplex_class`.



---

archive/issue_comments_303367.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">Comment 79</div>\n\nReplying to [@tscrim](#comment%3A77):\n> I am also against this idea of having a singleton parent for the set of all simplicies. It feels like overkill and I fear we could quickly find ourselves in a form of pointer hell (parent hell?) trying to keep everything organized.\n\nThe only question is whether `AbstractSimplex` should become an `Element` or not: if they are `Element`s, they need a `Parent` and a singleton is the best choice (the alternative is one parent per `AbstractSimplex` which is the pointer/parent hell that you mention).",
    "created_at": "2016-10-06T07:04:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303367",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:79" align="right">Comment 79</div>

Replying to [@tscrim](#comment%3A77):
> I am also against this idea of having a singleton parent for the set of all simplicies. It feels like overkill and I fear we could quickly find ourselves in a form of pointer hell (parent hell?) trying to keep everything organized.

The only question is whether `AbstractSimplex` should become an `Element` or not: if they are `Element`s, they need a `Parent` and a singleton is the best choice (the alternative is one parent per `AbstractSimplex` which is the pointer/parent hell that you mention).



---

archive/issue_comments_303368.json:
```json
{
    "body": "Changed commit from **[afbad45](https://github.com/sagemath/sagetrac-mirror/commit/afbad4505350d79488d56067151c6f109782693a)** to **[6e2128d](https://github.com/sagemath/sagetrac-mirror/commit/6e2128d11f18858110557fc2d0506799dd1f177c)**",
    "created_at": "2016-10-06T17:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303368",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[afbad45](https://github.com/sagemath/sagetrac-mirror/commit/afbad4505350d79488d56067151c6f109782693a)** to **[6e2128d](https://github.com/sagemath/sagetrac-mirror/commit/6e2128d11f18858110557fc2d0506799dd1f177c)**



---

archive/issue_comments_303369.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">Comment 80</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e2128d11f18858110557fc2d0506799dd1f177c\">6e2128d</a></td><td><code>simplicial sets: add some documentation about uniqueness of simplices.</code></td></tr></table>\n",
    "created_at": "2016-10-06T17:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303369",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:80" align="right">Comment 80</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e2128d11f18858110557fc2d0506799dd1f177c">6e2128d</a></td><td><code>simplicial sets: add some documentation about uniqueness of simplices.</code></td></tr></table>




---

archive/issue_comments_303370.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">Comment 81</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/410d09f17b5a99ab40a70b29e25935785c59be52\">410d09f</a></td><td><code>simplicial sets: remove unique_tag from `__classcall_private__` for</code></td></tr></table>\n",
    "created_at": "2016-10-06T17:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303370",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:81" align="right">Comment 81</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/410d09f17b5a99ab40a70b29e25935785c59be52">410d09f</a></td><td><code>simplicial sets: remove unique_tag from `__classcall_private__` for</code></td></tr></table>




---

archive/issue_comments_303371.json:
```json
{
    "body": "Changed commit from **[6e2128d](https://github.com/sagemath/sagetrac-mirror/commit/6e2128d11f18858110557fc2d0506799dd1f177c)** to **[410d09f](https://github.com/sagemath/sagetrac-mirror/commit/410d09f17b5a99ab40a70b29e25935785c59be52)**",
    "created_at": "2016-10-06T17:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303371",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6e2128d](https://github.com/sagemath/sagetrac-mirror/commit/6e2128d11f18858110557fc2d0506799dd1f177c)** to **[410d09f](https://github.com/sagemath/sagetrac-mirror/commit/410d09f17b5a99ab40a70b29e25935785c59be52)**



---

archive/issue_comments_303372.json:
```json
{
    "body": "Changed commit from **[410d09f](https://github.com/sagemath/sagetrac-mirror/commit/410d09f17b5a99ab40a70b29e25935785c59be52)** to **[4f2e6fd](https://github.com/sagemath/sagetrac-mirror/commit/4f2e6fd77b81e80a2f18267c294b0e15d5e5b427)**",
    "created_at": "2016-10-06T19:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303372",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[410d09f](https://github.com/sagemath/sagetrac-mirror/commit/410d09f17b5a99ab40a70b29e25935785c59be52)** to **[4f2e6fd](https://github.com/sagemath/sagetrac-mirror/commit/4f2e6fd77b81e80a2f18267c294b0e15d5e5b427)**



---

archive/issue_comments_303373.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">Comment 82</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f2e6fd77b81e80a2f18267c294b0e15d5e5b427\">4f2e6fd</a></td><td><code>simplicial sets: improve the 'image' method for morphisms.</code></td></tr></table>\n",
    "created_at": "2016-10-06T19:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303373",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:82" align="right">Comment 82</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f2e6fd77b81e80a2f18267c294b0e15d5e5b427">4f2e6fd</a></td><td><code>simplicial sets: improve the 'image' method for morphisms.</code></td></tr></table>




---

archive/issue_comments_303374.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">Comment 83</div>\n\nBefore the last push I was seeing sporadic failures when doctesting `simplicial_set_morphism.py`. After that change, I ran tests 20 times and had no failures, so I think it is fixed.",
    "created_at": "2016-10-06T22:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303374",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:83" align="right">Comment 83</div>

Before the last push I was seeing sporadic failures when doctesting `simplicial_set_morphism.py`. After that change, I ran tests 20 times and had no failures, so I think it is fixed.



---

archive/issue_comments_303375.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">Comment 84</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/341ed16ec82b6bd074f6b55721315a8edfde334a\">341ed16</a></td><td><code>simplicial sets: less verbose printing of simplices</code></td></tr></table>\n",
    "created_at": "2016-10-07T18:27:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303375",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:84" align="right">Comment 84</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/341ed16ec82b6bd074f6b55721315a8edfde334a">341ed16</a></td><td><code>simplicial sets: less verbose printing of simplices</code></td></tr></table>




---

archive/issue_comments_303376.json:
```json
{
    "body": "Changed commit from **[4f2e6fd](https://github.com/sagemath/sagetrac-mirror/commit/4f2e6fd77b81e80a2f18267c294b0e15d5e5b427)** to **[341ed16](https://github.com/sagemath/sagetrac-mirror/commit/341ed16ec82b6bd074f6b55721315a8edfde334a)**",
    "created_at": "2016-10-07T18:27:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303376",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4f2e6fd](https://github.com/sagemath/sagetrac-mirror/commit/4f2e6fd77b81e80a2f18267c294b0e15d5e5b427)** to **[341ed16](https://github.com/sagemath/sagetrac-mirror/commit/341ed16ec82b6bd074f6b55721315a8edfde334a)**



---

archive/issue_comments_303377.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">Comment 85</div>\n\nThere are some issues with having a class inherit from both `Element` and `UniqueRepresentation`. If I get rid of `UniqueRepresentation`, I think I only lose pickling, and I'm not very concerned by that. So I'm thinking of replacing it with `WithEqualityById` for nondegenerate simplices.",
    "created_at": "2016-10-10T20:27:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303377",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:85" align="right">Comment 85</div>

There are some issues with having a class inherit from both `Element` and `UniqueRepresentation`. If I get rid of `UniqueRepresentation`, I think I only lose pickling, and I'm not very concerned by that. So I'm thinking of replacing it with `WithEqualityById` for nondegenerate simplices.



---

archive/issue_comments_303378.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">Comment 86</div>\n\nI also just did a little testing, timing creation of some simplicial set. Using `WithEqualityById` is always at least as fast as using `UniqueRepresentation`, in some cases about 25% faster. To clarify, I am suggesting making the changes\n\n```diff\ndiff --git a/src/sage/homology/simplicial_set.py b/src/sage/homology/simplicial_set.py\nindex bc2c114..721ae42 100644\n--- a/src/sage/homology/simplicial_set.py\n+++ b/src/sage/homology/simplicial_set.py\n@@ -285,7 +286,7 @@ lazy_import('sage.categories.simplicial_sets', 'SimplicialSets')\n ########################################################################\n # The classes for simplices.\n \n-class AbstractSimplex_class(UniqueRepresentation, SageObject):\n+class AbstractSimplex_class(SageObject):\n     \"\"\"\n     A simplex of dimension ``dim``.\n \n@@ -892,9 +942,8 @@ class AbstractSimplex_class(UniqueRepresentation, SageObject):\n         return simplex\n \n \n-class NonDegenerateSimplex(AbstractSimplex_class):\n-    def __init__(self, dim, name=None, latex_name=None,\n-                 unique_tag=None):\n+class NonDegenerateSimplex(WithEqualityById, AbstractSimplex_class):\n+    def __init__(self, dim, name=None, latex_name=None):\n         \"\"\"\n         A nondegenerate simplex.\n \n```\nand the necessary followups.",
    "created_at": "2016-10-10T21:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303378",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:86" align="right">Comment 86</div>

I also just did a little testing, timing creation of some simplicial set. Using `WithEqualityById` is always at least as fast as using `UniqueRepresentation`, in some cases about 25% faster. To clarify, I am suggesting making the changes

```diff
diff --git a/src/sage/homology/simplicial_set.py b/src/sage/homology/simplicial_set.py
index bc2c114..721ae42 100644
--- a/src/sage/homology/simplicial_set.py
+++ b/src/sage/homology/simplicial_set.py
@@ -285,7 +286,7 @@ lazy_import('sage.categories.simplicial_sets', 'SimplicialSets')
 ########################################################################
 # The classes for simplices.
 
-class AbstractSimplex_class(UniqueRepresentation, SageObject):
+class AbstractSimplex_class(SageObject):
     """
     A simplex of dimension ``dim``.
 
@@ -892,9 +942,8 @@ class AbstractSimplex_class(UniqueRepresentation, SageObject):
         return simplex
 
 
-class NonDegenerateSimplex(AbstractSimplex_class):
-    def __init__(self, dim, name=None, latex_name=None,
-                 unique_tag=None):
+class NonDegenerateSimplex(WithEqualityById, AbstractSimplex_class):
+    def __init__(self, dim, name=None, latex_name=None):
         """
         A nondegenerate simplex.
 
```
and the necessary followups.



---

archive/issue_comments_303379.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">Comment 87</div>\n\nReplying to [@jhpalmieri](#comment%3A86):\n> I also just did a little testing, timing creation of some simplicial set. Using `WithEqualityById` is always at least as fast as using `UniqueRepresentation`, in some cases about 25% faster.\n\nI think `UniqueRepresentation` should be reserved for `Parent`s, so this change seems to go in the right direction.",
    "created_at": "2016-10-10T21:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303379",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:87" align="right">Comment 87</div>

Replying to [@jhpalmieri](#comment%3A86):
> I also just did a little testing, timing creation of some simplicial set. Using `WithEqualityById` is always at least as fast as using `UniqueRepresentation`, in some cases about 25% faster.

I think `UniqueRepresentation` should be reserved for `Parent`s, so this change seems to go in the right direction.



---

archive/issue_comments_303380.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">Comment 88</div>\n\nReplying to [@cnassau](#comment%3A87):\n> Replying to [@jhpalmieri](#comment%3A86):\n> > I also just did a little testing, timing creation of some simplicial set. Using `WithEqualityById` is always at least as fast as using `UniqueRepresentation`, in some cases about 25% faster.\n\n> \n> I think `UniqueRepresentation` should be reserved for `Parent`s, so this change seems to go in the right direction.\n\nThat is a fallacy. Just because it is used frequently there, does not mean it must only be used there. It is designed to work with objects that are uniquely defined by their inputs.\n\nNow it is a hack, to perhaps a slight abuse, to use `UniqueRepresentation` for `NonDegenerateSimplex` pickling. However, good supporting support means it is much easier to pass between threads (maybe only processes?), where IIRC the pickling is used for that communication. Without good equality, then we cannot use `UniqueRepresentation` for `SimplicialSet` (I know we currently don't, but I'm just trying to say it imposes this limitation).\n\nI think the root of the problem is the design of the parent and elements. I'm thinking we might want to lean towards doing something closer to what we have for `SimplicialComplex`. We define `NonDegenerateSimplex` (uniquely) by its set of vertices (or just by its dimension). The names of the (abstract) simplices could become an attribute of `SimplicialSet` (given at initialization of `SimplicialSet`). Perhaps in some ways I'm also looking to simplify the constructor, which the fact you must import things is a code smell. It just feels like things are a bit overly complex.",
    "created_at": "2016-10-10T23:56:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303380",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:88" align="right">Comment 88</div>

Replying to [@cnassau](#comment%3A87):
> Replying to [@jhpalmieri](#comment%3A86):
> > I also just did a little testing, timing creation of some simplicial set. Using `WithEqualityById` is always at least as fast as using `UniqueRepresentation`, in some cases about 25% faster.

> 
> I think `UniqueRepresentation` should be reserved for `Parent`s, so this change seems to go in the right direction.

That is a fallacy. Just because it is used frequently there, does not mean it must only be used there. It is designed to work with objects that are uniquely defined by their inputs.

Now it is a hack, to perhaps a slight abuse, to use `UniqueRepresentation` for `NonDegenerateSimplex` pickling. However, good supporting support means it is much easier to pass between threads (maybe only processes?), where IIRC the pickling is used for that communication. Without good equality, then we cannot use `UniqueRepresentation` for `SimplicialSet` (I know we currently don't, but I'm just trying to say it imposes this limitation).

I think the root of the problem is the design of the parent and elements. I'm thinking we might want to lean towards doing something closer to what we have for `SimplicialComplex`. We define `NonDegenerateSimplex` (uniquely) by its set of vertices (or just by its dimension). The names of the (abstract) simplices could become an attribute of `SimplicialSet` (given at initialization of `SimplicialSet`). Perhaps in some ways I'm also looking to simplify the constructor, which the fact you must import things is a code smell. It just feels like things are a bit overly complex.



---

archive/issue_comments_303381.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">Comment 89</div>\n\nSimplicial sets are intrinsically more complicated to define than simplicial complexes. I also don't understand what you're suggesting. Can you give a sample of how you would like to be able to define a simplicial set? Here is one model for a circle, with two vertices and two edges:\n\n```\nsage: from sage.homology.simplicial_set import AbstractSimplex\nsage: v = AbstractSimplex(0)\nsage: w = AbstractSimplex(0)\nsage: e = AbstractSimplex(1)\nsage: f = AbstractSimplex(1)\nsage: SimplicialSet({e: (v,w), f: (v,w)})\n```\nHow else might this look?",
    "created_at": "2016-10-11T01:11:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303381",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:89" align="right">Comment 89</div>

Simplicial sets are intrinsically more complicated to define than simplicial complexes. I also don't understand what you're suggesting. Can you give a sample of how you would like to be able to define a simplicial set? Here is one model for a circle, with two vertices and two edges:

```
sage: from sage.homology.simplicial_set import AbstractSimplex
sage: v = AbstractSimplex(0)
sage: w = AbstractSimplex(0)
sage: e = AbstractSimplex(1)
sage: f = AbstractSimplex(1)
sage: SimplicialSet({e: (v,w), f: (v,w)})
```
How else might this look?



---

archive/issue_comments_303382.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">Comment 90</div>\n\nSomething like\n\n```\nSimplicialSet({0: (0, 1), 1: (0, 1)})\n```\nwhere the keys are the names of the top-dimensional simplices and the tuples are the vertices. So an n-sphere with a latex name to the (top) simplex would look like:\n\n```\nSimplicialSet({0: (0,)*n}, latex_names={0: \"\\\\mathbb{S}^{%s}\"%n)\n```\nInternally, we still have classes for the abstract simplicies, but the equality/construction is checking the set of vertices, degenerices, and (latex) name.\n\nPerhaps I'm oversimplifying things because I didn't see a complicated example.\n\nThere's also the question of do we want to allow mutable simplicial sets.",
    "created_at": "2016-10-11T02:14:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303382",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:90" align="right">Comment 90</div>

Something like

```
SimplicialSet({0: (0, 1), 1: (0, 1)})
```
where the keys are the names of the top-dimensional simplices and the tuples are the vertices. So an n-sphere with a latex name to the (top) simplex would look like:

```
SimplicialSet({0: (0,)*n}, latex_names={0: "\\mathbb{S}^{%s}"%n)
```
Internally, we still have classes for the abstract simplicies, but the equality/construction is checking the set of vertices, degenerices, and (latex) name.

Perhaps I'm oversimplifying things because I didn't see a complicated example.

There's also the question of do we want to allow mutable simplicial sets.



---

archive/issue_events_274189.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-11T02:14:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274189"
}
```



---

archive/issue_events_274190.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-11T02:14:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274190"
}
```



---

archive/issue_comments_303383.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">Comment 91</div>\n\nIn a simplicial set, simplices are not determined by their vertices, and not everything is determined by the top-dimensional faces. You can have an edge starting and ending at the same vertex, and then you can have a 2-simplex which has that edge for one of its faces. You can also have degenerate simplices, for example a vertex determines a degenerate 1-simplex. And then you can have a 2-simplex which has the same degenerate 1-simplex for all of its faces: this gives a 2-sphere, where you are collapsing the boundary of the 2-simplex to a single vertex.\n\nNote also that you have to distinguish between a 2-simplex one of whose faces is a degenerate 1-simplex (imagine a triangle where you collapse one edge to a point) and a 2-simplex one of whose faces is a non-degenerate edge starting and ending at the same vertex (a triangle where you have glued two corners together).\n\nFor every non-degenerate simplex in a simplicial set, you have to specify each of its faces, and each of those faces might be non-degenerate or might be obtained by applying a sequence of degeneracies to a lower-dimensional non-degenerate simplex. So I think you need a good way to define simplices of various dimensions so that you can have a specification like\n\n```\n{sigma: (face_0, face_1, ..., face_n)}\n```\nas part of the dictionary defining a simplicial set.",
    "created_at": "2016-10-11T04:10:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303383",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:91" align="right">Comment 91</div>

In a simplicial set, simplices are not determined by their vertices, and not everything is determined by the top-dimensional faces. You can have an edge starting and ending at the same vertex, and then you can have a 2-simplex which has that edge for one of its faces. You can also have degenerate simplices, for example a vertex determines a degenerate 1-simplex. And then you can have a 2-simplex which has the same degenerate 1-simplex for all of its faces: this gives a 2-sphere, where you are collapsing the boundary of the 2-simplex to a single vertex.

Note also that you have to distinguish between a 2-simplex one of whose faces is a degenerate 1-simplex (imagine a triangle where you collapse one edge to a point) and a 2-simplex one of whose faces is a non-degenerate edge starting and ending at the same vertex (a triangle where you have glued two corners together).

For every non-degenerate simplex in a simplicial set, you have to specify each of its faces, and each of those faces might be non-degenerate or might be obtained by applying a sequence of degeneracies to a lower-dimensional non-degenerate simplex. So I think you need a good way to define simplices of various dimensions so that you can have a specification like

```
{sigma: (face_0, face_1, ..., face_n)}
```
as part of the dictionary defining a simplicial set.



---

archive/issue_comments_303384.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">Comment 92</div>\n\nAlso, I should point out that an `n`-simplex determines `n+1` degenerate simplices one dimension higher, so if you have a 3-simplex `sigma` whose faces are obtained by applying degeneracies to 1-simplices, you can't just say `sigma: (e,f,g)` -- you have to say `sigma: (s_0 e, s_0 f, s_1 g)` or in Python syntax:\n\n```\nsigma: (e.apply_degeneracies(0), ...)\n```\n(or something along those lines).\n\nEdit: and if it's a 3-simplex, it should have 4 faces, not 3.",
    "created_at": "2016-10-11T04:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303384",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:92" align="right">Comment 92</div>

Also, I should point out that an `n`-simplex determines `n+1` degenerate simplices one dimension higher, so if you have a 3-simplex `sigma` whose faces are obtained by applying degeneracies to 1-simplices, you can't just say `sigma: (e,f,g)` -- you have to say `sigma: (s_0 e, s_0 f, s_1 g)` or in Python syntax:

```
sigma: (e.apply_degeneracies(0), ...)
```
(or something along those lines).

Edit: and if it's a 3-simplex, it should have 4 faces, not 3.



---

archive/issue_comments_303385.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">Comment 93</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eabd3f84717b4c9b59268528321b604eb01e7947\">eabd3f8</a></td><td><code>Simplicial sets: define `_latex_` method more widely and use it in Nerve</code></td></tr></table>\n",
    "created_at": "2016-10-11T21:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303385",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:93" align="right">Comment 93</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eabd3f84717b4c9b59268528321b604eb01e7947">eabd3f8</a></td><td><code>Simplicial sets: define `_latex_` method more widely and use it in Nerve</code></td></tr></table>




---

archive/issue_comments_303386.json:
```json
{
    "body": "Changed commit from **[341ed16](https://github.com/sagemath/sagetrac-mirror/commit/341ed16ec82b6bd074f6b55721315a8edfde334a)** to **[eabd3f8](https://github.com/sagemath/sagetrac-mirror/commit/eabd3f84717b4c9b59268528321b604eb01e7947)**",
    "created_at": "2016-10-11T21:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303386",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[341ed16](https://github.com/sagemath/sagetrac-mirror/commit/341ed16ec82b6bd074f6b55721315a8edfde334a)** to **[eabd3f8](https://github.com/sagemath/sagetrac-mirror/commit/eabd3f84717b4c9b59268528321b604eb01e7947)**



---

archive/issue_comments_303387.json:
```json
{
    "body": "Changed commit from **[eabd3f8](https://github.com/sagemath/sagetrac-mirror/commit/eabd3f84717b4c9b59268528321b604eb01e7947)** to **[603a3cf](https://github.com/sagemath/sagetrac-mirror/commit/603a3cf2b119ba8842be0bdc52b45b06bebbd9b0)**",
    "created_at": "2016-10-18T05:12:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303387",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[eabd3f8](https://github.com/sagemath/sagetrac-mirror/commit/eabd3f84717b4c9b59268528321b604eb01e7947)** to **[603a3cf](https://github.com/sagemath/sagetrac-mirror/commit/603a3cf2b119ba8842be0bdc52b45b06bebbd9b0)**



---

archive/issue_comments_303388.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">Comment 94</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/603a3cf2b119ba8842be0bdc52b45b06bebbd9b0\">603a3cf</a></td><td><code>Simplicial sets: use WithEqualityById instead of UniqueRepresentation</code></td></tr></table>\n",
    "created_at": "2016-10-18T05:12:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303388",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:94" align="right">Comment 94</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/603a3cf2b119ba8842be0bdc52b45b06bebbd9b0">603a3cf</a></td><td><code>Simplicial sets: use WithEqualityById instead of UniqueRepresentation</code></td></tr></table>




---

archive/issue_comments_303389.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">Comment 95</div>\n\nI've checked again, and simplicial set construction is faster this way, so I've pushed the change.\n\nI also tried to implement a Parent/Element structure, but I couldn't get it to work. It was easy enough to create a single parent for all instances of `AbstractSimplex_class`, but then assigning a parent to each simplex when creating a simplicial set was causing difficulties. I tried creating a new class, inheriting from `AbstractSimplex_class`, for a simplex as an element of a specific simplicial set. The main point was to assign a parent to each instance, and otherwise use the methods from `AbstractSimplex_class`, but something was going wrong with equality (I think), so (for example) morphisms weren't working: the simplices that were supposed to be in the codomain were claimed to not be in the codomain. I spent quite a while with it, and now I'm giving up because I don't see enough benefit to making the change.",
    "created_at": "2016-10-18T05:19:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303389",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:95" align="right">Comment 95</div>

I've checked again, and simplicial set construction is faster this way, so I've pushed the change.

I also tried to implement a Parent/Element structure, but I couldn't get it to work. It was easy enough to create a single parent for all instances of `AbstractSimplex_class`, but then assigning a parent to each simplex when creating a simplicial set was causing difficulties. I tried creating a new class, inheriting from `AbstractSimplex_class`, for a simplex as an element of a specific simplicial set. The main point was to assign a parent to each instance, and otherwise use the methods from `AbstractSimplex_class`, but something was going wrong with equality (I think), so (for example) morphisms weren't working: the simplices that were supposed to be in the codomain were claimed to not be in the codomain. I spent quite a while with it, and now I'm giving up because I don't see enough benefit to making the change.



---

archive/issue_comments_303390.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">Comment 96</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1ae3f24b2de53d401872c6b81c388280ca410c3\">e1ae3f2</a></td><td><code>Merge branch 'develop' into t/20745/simplicial_sets</code></td></tr></table>\n",
    "created_at": "2016-10-24T17:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303390",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:96" align="right">Comment 96</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1ae3f24b2de53d401872c6b81c388280ca410c3">e1ae3f2</a></td><td><code>Merge branch 'develop' into t/20745/simplicial_sets</code></td></tr></table>




---

archive/issue_comments_303391.json:
```json
{
    "body": "Changed commit from **[603a3cf](https://github.com/sagemath/sagetrac-mirror/commit/603a3cf2b119ba8842be0bdc52b45b06bebbd9b0)** to **[e1ae3f2](https://github.com/sagemath/sagetrac-mirror/commit/e1ae3f24b2de53d401872c6b81c388280ca410c3)**",
    "created_at": "2016-10-24T17:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303391",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[603a3cf](https://github.com/sagemath/sagetrac-mirror/commit/603a3cf2b119ba8842be0bdc52b45b06bebbd9b0)** to **[e1ae3f2](https://github.com/sagemath/sagetrac-mirror/commit/e1ae3f24b2de53d401872c6b81c388280ca410c3)**



---

archive/issue_comments_303392.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">Comment 97</div>\n\nMerged with 7.5.beta0, so I moved the references to the master bibliography file.",
    "created_at": "2016-10-24T17:24:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303392",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:97" align="right">Comment 97</div>

Merged with 7.5.beta0, so I moved the references to the master bibliography file.



---

archive/issue_comments_303393.json:
```json
{
    "body": "Changed commit from **[e1ae3f2](https://github.com/sagemath/sagetrac-mirror/commit/e1ae3f24b2de53d401872c6b81c388280ca410c3)** to **[600157d](https://github.com/sagemath/sagetrac-mirror/commit/600157d4d7b2e5cfa736a4eb3e2c4fc235cee074)**",
    "created_at": "2016-10-24T22:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303393",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e1ae3f2](https://github.com/sagemath/sagetrac-mirror/commit/e1ae3f24b2de53d401872c6b81c388280ca410c3)** to **[600157d](https://github.com/sagemath/sagetrac-mirror/commit/600157d4d7b2e5cfa736a4eb3e2c4fc235cee074)**



---

archive/issue_comments_303394.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">Comment 98</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/600157d4d7b2e5cfa736a4eb3e2c4fc235cee074\">600157d</a></td><td><code>Simplicial sets: add `_latex_` methods to the constructions.</code></td></tr></table>\n",
    "created_at": "2016-10-24T22:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303394",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:98" align="right">Comment 98</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/600157d4d7b2e5cfa736a4eb3e2c4fc235cee074">600157d</a></td><td><code>Simplicial sets: add `_latex_` methods to the constructions.</code></td></tr></table>




---

archive/issue_comments_303395.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">Comment 99</div>\n\nIt seems that morphisms and homsets in Sage don't have default `_latex_` methods. Odd.",
    "created_at": "2016-10-24T22:25:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303395",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:99" align="right">Comment 99</div>

It seems that morphisms and homsets in Sage don't have default `_latex_` methods. Odd.



---

archive/issue_comments_303396.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nPing.",
    "created_at": "2016-11-14T21:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303396",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:0" align="right">Comment 0</div>

Ping.



---

archive/issue_comments_303397.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">Comment 101</div>\n\nAttachment: **[suggestions.diff.gz](https://github.com/sagemath/sage/files/ticket20745/suggestions.diff.gz)**\n\nReplying to [@jhpalmieri](#comment%3A100):\n> Ping.\n\nPong (and sorry for the prolonged delay)!\n\nPart of me still thinks that it would be nice to use the Parent/Element framework, but since I don't see any non-intrusive way to incorporate this myself I think it is the wise choice to just go ahead with the code as it is. This is a significant amount of valuable code, after all, and it would be a pity if its inclusion into Sage would be delayed much further.\n\nI went over the code once more and noted a couple of very minor possible improvements; these are outlined in the file \"suggestions.diff\" that I have just attached. Please let me know what you think about those and let's hope to then close this ticket before christmas.\n\nCheers,\nChristian",
    "created_at": "2016-12-12T18:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303397",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:101" align="right">Comment 101</div>

Attachment: **[suggestions.diff.gz](https://github.com/sagemath/sage/files/ticket20745/suggestions.diff.gz)**

Replying to [@jhpalmieri](#comment%3A100):
> Ping.

Pong (and sorry for the prolonged delay)!

Part of me still thinks that it would be nice to use the Parent/Element framework, but since I don't see any non-intrusive way to incorporate this myself I think it is the wise choice to just go ahead with the code as it is. This is a significant amount of valuable code, after all, and it would be a pity if its inclusion into Sage would be delayed much further.

I went over the code once more and noted a couple of very minor possible improvements; these are outlined in the file "suggestions.diff" that I have just attached. Please let me know what you think about those and let's hope to then close this ticket before christmas.

Cheers,
Christian



---

archive/issue_comments_303398.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI like your suggested changes, so I've implemented them (here and there with minor rewordings). I also like using \"base\" much better than \"X\" for the simplicial set from which you build a cone or suspension, so I changed not only the public methods but also the code and the attribute `self._X`.",
    "created_at": "2016-12-14T22:06:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303398",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">Comment 2</div>

I like your suggested changes, so I've implemented them (here and there with minor rewordings). I also like using "base" much better than "X" for the simplicial set from which you build a cone or suspension, so I changed not only the public methods but also the code and the attribute `self._X`.



---

archive/issue_comments_303399.json:
```json
{
    "body": "Changed commit from **[600157d](https://github.com/sagemath/sagetrac-mirror/commit/600157d4d7b2e5cfa736a4eb3e2c4fc235cee074)** to **[6f01bda](https://github.com/sagemath/sagetrac-mirror/commit/6f01bda365933115981e6008b8c0a61915719fac)**",
    "created_at": "2016-12-14T22:07:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303399",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[600157d](https://github.com/sagemath/sagetrac-mirror/commit/600157d4d7b2e5cfa736a4eb3e2c4fc235cee074)** to **[6f01bda](https://github.com/sagemath/sagetrac-mirror/commit/6f01bda365933115981e6008b8c0a61915719fac)**



---

archive/issue_comments_303400.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3147f18133bb5c2ee164e1065ad3230d4e1a97fb\">3147f18</a></td><td><code>Merge branch 'develop' into t/20745/simplicial_sets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f01bda365933115981e6008b8c0a61915719fac\">6f01bda</a></td><td><code>trac 20745: some rewordings of docstrings and comments,</code></td></tr></table>\n",
    "created_at": "2016-12-14T22:07:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303400",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3147f18133bb5c2ee164e1065ad3230d4e1a97fb">3147f18</a></td><td><code>Merge branch 'develop' into t/20745/simplicial_sets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f01bda365933115981e6008b8c0a61915719fac">6f01bda</a></td><td><code>trac 20745: some rewordings of docstrings and comments,</code></td></tr></table>




---

archive/issue_comments_303401.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI think I stumbled over a little bug looking at products of the Point with itself. Using other simplicial sets seems to work:\n\n```\nsage: P=simplicial_sets.Point()\nsage: P.product(P)\n...\nValueError: the base point is not a simplex in this simplicial set\nsage: Q = sage.homology.simplicial_set_constructions.ProductOfSimplicialSets((P,P,P)) ; Q\nPoint x Point x Point\nsage: Q.all_n_simplices(2)\n...\nAttributeError: 'ProductOfSimplicialSets_with_category' object has no attribute '_simplices'\nsage: Q.n_skeleton(3)\n...\nTypeError: unbound method n_skeleton() must be called with SimplicialSet_finite instance as first argument (got ProductOfSimplicialSets_with_category instance instead)\n```",
    "created_at": "2016-12-15T12:24:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303401",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:4" align="right">Comment 4</div>

I think I stumbled over a little bug looking at products of the Point with itself. Using other simplicial sets seems to work:

```
sage: P=simplicial_sets.Point()
sage: P.product(P)
...
ValueError: the base point is not a simplex in this simplicial set
sage: Q = sage.homology.simplicial_set_constructions.ProductOfSimplicialSets((P,P,P)) ; Q
Point x Point x Point
sage: Q.all_n_simplices(2)
...
AttributeError: 'ProductOfSimplicialSets_with_category' object has no attribute '_simplices'
sage: Q.n_skeleton(3)
...
TypeError: unbound method n_skeleton() must be called with SimplicialSet_finite instance as first argument (got ProductOfSimplicialSets_with_category instance instead)
```



---

archive/issue_comments_303402.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35790d29bdbe4a9b61b80076e4acc64eb650ea03\">35790d2</a></td><td><code>trac 20745: fix bug with product of a point with itself</code></td></tr></table>\n",
    "created_at": "2016-12-15T20:38:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303402",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35790d29bdbe4a9b61b80076e4acc64eb650ea03">35790d2</a></td><td><code>trac 20745: fix bug with product of a point with itself</code></td></tr></table>




---

archive/issue_comments_303403.json:
```json
{
    "body": "Changed commit from **[6f01bda](https://github.com/sagemath/sagetrac-mirror/commit/6f01bda365933115981e6008b8c0a61915719fac)** to **[35790d2](https://github.com/sagemath/sagetrac-mirror/commit/35790d29bdbe4a9b61b80076e4acc64eb650ea03)**",
    "created_at": "2016-12-15T20:38:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303403",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6f01bda](https://github.com/sagemath/sagetrac-mirror/commit/6f01bda365933115981e6008b8c0a61915719fac)** to **[35790d2](https://github.com/sagemath/sagetrac-mirror/commit/35790d29bdbe4a9b61b80076e4acc64eb650ea03)**



---

archive/issue_comments_303404.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">Comment 106</div>\n\nReplying to [@cnassau](#comment%3A104):\n> I think I stumbled over a little bug looking at products of the Point with itself. Using other simplicial sets seems to work:\n> \n> ```\n> sage: P=simplicial_sets.Point()\n> sage: P.product(P)\n> ...\n> ValueError: the base point is not a simplex in this simplicial set\n> ```\n\nI can fix this one: see the latest commit.\n\n> ```\n> sage: Q = sage.homology.simplicial_set_constructions.ProductOfSimplicialSets((P,P,P)) ; Q\n> Point x Point x Point\n> sage: Q.all_n_simplices(2)\n> ...\n> AttributeError: 'ProductOfSimplicialSets_with_category' object has no attribute '_simplices'\n> sage: Q.n_skeleton(3)\n> ...\n> TypeError: unbound method n_skeleton() must be called with SimplicialSet_finite instance as first argument (got ProductOfSimplicialSets_with_category instance instead)\n> ```\n\nI don't know if this is a bug. The intended way to construct products is with the `product` method for simplicial sets. If you want to use a class constructor, you should use `ProductOfSimplicialSets_finite` if all of the arguments are finite. When I do that, I don't see any problems.",
    "created_at": "2016-12-15T20:41:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303404",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:106" align="right">Comment 106</div>

Replying to [@cnassau](#comment%3A104):
> I think I stumbled over a little bug looking at products of the Point with itself. Using other simplicial sets seems to work:
> 
> ```
> sage: P=simplicial_sets.Point()
> sage: P.product(P)
> ...
> ValueError: the base point is not a simplex in this simplicial set
> ```

I can fix this one: see the latest commit.

> ```
> sage: Q = sage.homology.simplicial_set_constructions.ProductOfSimplicialSets((P,P,P)) ; Q
> Point x Point x Point
> sage: Q.all_n_simplices(2)
> ...
> AttributeError: 'ProductOfSimplicialSets_with_category' object has no attribute '_simplices'
> sage: Q.n_skeleton(3)
> ...
> TypeError: unbound method n_skeleton() must be called with SimplicialSet_finite instance as first argument (got ProductOfSimplicialSets_with_category instance instead)
> ```

I don't know if this is a bug. The intended way to construct products is with the `product` method for simplicial sets. If you want to use a class constructor, you should use `ProductOfSimplicialSets_finite` if all of the arguments are finite. When I do that, I don't see any problems.



---

archive/issue_comments_303405.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI doubt it makes sense to wait for patchbot results; the failures reported for the last two months (\"Unable to read current working directory: No such file or directory\") are clearly bogus (not enough space under /tmp maybe). I manually tested src/categories and src/homology and all looks fine. The documentation can also be built and looks nice. I'd say this ticket is ready to go...",
    "created_at": "2016-12-15T21:31:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303405",
    "user": "https://github.com/cnassau"
}
```

<div id="comment:7" align="right">Comment 7</div>

I doubt it makes sense to wait for patchbot results; the failures reported for the last two months ("Unable to read current working directory: No such file or directory") are clearly bogus (not enough space under /tmp maybe). I manually tested src/categories and src/homology and all looks fine. The documentation can also be built and looks nice. I'd say this ticket is ready to go...



---

archive/issue_comments_303406.json:
```json
{
    "body": "Reviewer: **Christian Nassau**",
    "created_at": "2016-12-15T21:31:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303406",
    "user": "https://github.com/cnassau"
}
```

Reviewer: **Christian Nassau**



---

archive/issue_events_274191.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2016-12-15T21:31:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274191"
}
```



---

archive/issue_events_274192.json:
```json
{
    "actor": "https://github.com/cnassau",
    "created_at": "2016-12-15T21:31:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274192"
}
```



---

archive/issue_comments_303407.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nThat's great! Thanks very much.",
    "created_at": "2016-12-15T22:42:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303407",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">Comment 8</div>

That's great! Thanks very much.



---

archive/issue_comments_303408.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/simplicial_sets](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/simplicial_sets)** to **[35790d2](https://github.com/sagemath/sagetrac-mirror/commit/35790d29bdbe4a9b61b80076e4acc64eb650ea03)**",
    "created_at": "2017-01-18T20:39:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303408",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jhpalmieri/simplicial_sets](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/simplicial_sets)** to **[35790d2](https://github.com/sagemath/sagetrac-mirror/commit/35790d29bdbe4a9b61b80076e4acc64eb650ea03)**



---

archive/issue_events_274193.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-18T20:39:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274193"
}
```



---

archive/issue_events_274194.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5f54b5bff4d6bdbe801909cac6e55aaa4d1e5dc5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-01-18T20:39:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20745#event-274194"
}
```



---

archive/issue_comments_303409.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nAnother ticket which is using `SAGE_SRC` at runtime instead of something appropriate. You data is properly installed in `SAGE_EXTCODE`, use it. Follow up at #22220.",
    "created_at": "2017-01-21T08:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303409",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:0" align="right">Comment 0</div>

Another ticket which is using `SAGE_SRC` at runtime instead of something appropriate. You data is properly installed in `SAGE_EXTCODE`, use it. Follow up at #22220.



---

archive/issue_comments_303410.json:
```json
{
    "body": "Changed commit from **[35790d2](https://github.com/sagemath/sagetrac-mirror/commit/35790d29bdbe4a9b61b80076e4acc64eb650ea03)** to none",
    "created_at": "2017-01-21T08:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303410",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[35790d2](https://github.com/sagemath/sagetrac-mirror/commit/35790d29bdbe4a9b61b80076e4acc64eb650ea03)** to none



---

archive/issue_comments_303411.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nIt would have been nice to lazily-import all of this. Because of this ticket, Sage now requires `pyparsing` at startup (see `src/sage/homology/simplicial_set_examples.py`).",
    "created_at": "2017-03-18T10:22:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20745#issuecomment-303411",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">Comment 1</div>

It would have been nice to lazily-import all of this. Because of this ticket, Sage now requires `pyparsing` at startup (see `src/sage/homology/simplicial_set_examples.py`).
