# Issue 20525: gap_packages badly broken

archive/issues_020288.json:
```json
{
    "assignees": [],
    "body": "With Sage 7.2.beta6 with `gap_packages` installed, within a `sage --gap` session:\n\n```\ngap> LoadPackage(\"HAPcryst\");\n#I  polymake command not found. Please set POLYMAKE_COMMAND by hand\n----------------------------------------------------------------\nLoading  polymaking 0.8.1\n(A package for using polymake in GAP)\nby Marc Roeder\n----------------------------------------------------------------\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nLoading  Cryst 4.1.12 (Computing with crystallographic groups)\nby Bettina Eick (http://www.icm.tu-bs.de/~beick/),\n   Franz G\u00e4hler (http://www.math.uni-bielefeld.de/~gaehler/), and\n   Werner Nickel (http://www.mathematik.tu-darmstadt.de/~nickel/).\nHomepage: http://www.math.uni-bielefeld.de/~gaehler/gap45/packages.php\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nLoading  CrystCat 1.1.6 (The crystallographic groups catalog)\nby Volkmar Felsch (http://www.math.rwth-aachen.de/~Volkmar.Felsch/) and\n   Franz G\u00e4hler (http://www.math.uni-bielefeld.de/~gaehler/).\nHomepage: http://www.math.uni-bielefeld.de/~gaehler/gap45/packages.php\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nLoading  AClib 1.2 (Almost Crystallographic Groups - A Library and Algorithms)\nby Karel Dekimpe (http://www.kulak.ac.be/~dekimpe) and\n   Bettina Eick (http://www.icm.tu-bs.de/~beick).\nHomepage: http://www.icm.tu-bs.de/~beick/so.html\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n#I  HAP warning: Set POLYMAKE_PATH manually if needed. \n#I  HAP warning: Set NEATO_PATH manually if needed.\n#I  HAP warning: Set DISPLAY_PATH manually if needed.\nError, <opr> is not an operation called from\n<compiled or corrupted statement>  called from\n<function \"local function\">( <arguments> )\n called from read-eval loop at line 162 of /usr/local/src/sage-git/local/gap/latest/pkg/Hap1.11/lib/HapCocyclic/gap/ccgroup.gi\nyou can 'quit;' to quit to outer loop, or\nyou can 'return;' to continue\n```\n\nA second issue is a mis-installation of guava:\n\n```\ngap> DirectoriesPackagePrograms(\"guava\")[1];\ndir(\"/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/\")\n```\n\nbut this directory does not exist, `bin` is missing below:\n\n```\n$ ls -l /usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13\ntotal 168\n-rw-r--r-- 1 jdemeyer jdemeyer 11775 Mar 19 23:17 CHANGES.guava\n-rwxr-xr-x 1 jdemeyer jdemeyer  1918 Mar 19 23:17 configure\n-rw-r--r-- 1 jdemeyer jdemeyer 51189 Mar 19 23:17 COPYING.guava\ndrwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 doc\n-rw-r--r-- 1 jdemeyer jdemeyer   368 Mar 19 23:17 gapdoc.g\n-rw-r--r-- 1 jdemeyer jdemeyer  2059 Mar 19 23:17 HISTORY.guava\n-rw-r--r-- 1 jdemeyer jdemeyer  1364 Mar 19 23:17 init.g\ndrwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 lib\n-rw-r--r-- 1 jdemeyer jdemeyer 35120 Mar 19 23:17 LICENSE\n-rw-r--r-- 1 jdemeyer jdemeyer  2858 Mar 19 23:17 Makefile.in\n-rw-r--r-- 1 jdemeyer jdemeyer 11638 Mar 19 23:17 PackageInfo.g\n-rw-r--r-- 1 jdemeyer jdemeyer  1420 Mar 19 23:17 read.g\n-rw-r--r-- 1 jdemeyer jdemeyer  4882 Mar 19 23:17 README.guava\n-rw-r--r-- 1 jdemeyer jdemeyer    98 Mar 19 23:17 README.md\ndrwxr-xr-x 4 jdemeyer jdemeyer  4096 Mar 30 00:32 src\ndrwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 tbl\ndrwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 tst\n```\n\n---\n\nThis causes doctest failures:\n\n```\nsage -t --long src/sage/tests/gap_packages.py\n**********************************************************************\nFile \"src/sage/tests/gap_packages.py\", line 8, in sage.tests.gap_packages\nFailed example:\n    test_packages(pkgs, only_failures=True)    # optional - gap_packages\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.gap_packages[2]>\", line 1, in <module>\n        test_packages(pkgs, only_failures=True)    # optional - gap_packages\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 77, in test_packages\n        output = libgap.eval('LoadPackage(\"{0}\")'.format(pkg))\n      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n        return make_any_gap_element(self, gap_eval(gap_command))\n      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n        raise ValueError('libGAP: '+str(msg).strip())\n    ValueError: libGAP: Error, <opr> is not an operation\n**********************************************************************\nFile \"src/sage/tests/gap_packages.py\", line 47, in sage.tests.gap_packages.test_packages\nFailed example:\n    test_packages(['GAPDoc'])\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.gap_packages.test_packages[1]>\", line 1, in <module>\n        test_packages(['GAPDoc'])\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 77, in test_packages\n        output = libgap.eval('LoadPackage(\"{0}\")'.format(pkg))\n      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n        return make_any_gap_element(self, gap_eval(gap_command))\n      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n        raise ValueError('libGAP: '+str(msg).strip())\n    ValueError: libGAP: \n**********************************************************************\nFile \"src/sage/tests/gap_packages.py\", line 54, in sage.tests.gap_packages.test_packages\nFailed example:\n    pkgs = all_installed_packages()\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.gap_packages.test_packages[2]>\", line 1, in <module>\n        pkgs = all_installed_packages()\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 109, in all_installed_packages\n        for path in libgap.eval('GAP_ROOT_PATHS').sage():\n      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n        return make_any_gap_element(self, gap_eval(gap_command))\n      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n        raise ValueError('libGAP: '+str(msg).strip())\n    ValueError: libGAP: \n**********************************************************************\nFile \"src/sage/tests/gap_packages.py\", line 55, in sage.tests.gap_packages.test_packages\nFailed example:\n    test_packages(pkgs)    # random output\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.gap_packages.test_packages[3]>\", line 1, in <module>\n        test_packages(pkgs)    # random output\n    NameError: name 'pkgs' is not defined\n**********************************************************************\nFile \"src/sage/tests/gap_packages.py\", line 105, in sage.tests.gap_packages.all_installed_packages\nFailed example:\n    all_installed_packages()\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.gap_packages.all_installed_packages[1]>\", line 1, in <module>\n        all_installed_packages()\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 109, in all_installed_packages\n        for path in libgap.eval('GAP_ROOT_PATHS').sage():\n      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n        return make_any_gap_element(self, gap_eval(gap_command))\n      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n        raise ValueError('libGAP: '+str(msg).strip())\n    ValueError: libGAP: \n**********************************************************************\n3 items had failures:\n   1 of   4 in sage.tests.gap_packages\n   1 of   3 in sage.tests.gap_packages.all_installed_packages\n   3 of   5 in sage.tests.gap_packages.test_packages\n    [9 tests, 5 failures, 4.49 s]\nsage -t --long src/sage/coding/linear_code.py\n**********************************************************************\nFile \"src/sage/coding/linear_code.py\", line 3284, in sage.coding.linear_code.AbstractLinearCode.spectrum\nFailed example:\n    C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[8]>\", line 1, in <module>\n        C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n        errread, errwrite)\n      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n        raise child_exception\n    OSError: [Errno 2] No such file or directory\n**********************************************************************\nFile \"src/sage/coding/linear_code.py\", line 3292, in sage.coding.linear_code.AbstractLinearCode.spectrum\nFailed example:\n    C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[12]>\", line 1, in <module>\n        C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n        errread, errwrite)\n      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n        raise child_exception\n    OSError: [Errno 2] No such file or directory\n**********************************************************************\nFile \"src/sage/coding/linear_code.py\", line 3296, in sage.coding.linear_code.AbstractLinearCode.spectrum\nFailed example:\n    C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[14]>\", line 1, in <module>\n        C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n        errread, errwrite)\n      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n        raise child_exception\n    OSError: [Errno 2] No such file or directory\n**********************************************************************\nFile \"src/sage/coding/linear_code.py\", line 3300, in sage.coding.linear_code.AbstractLinearCode.spectrum\nFailed example:\n    C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[16]>\", line 1, in <module>\n        C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n        errread, errwrite)\n      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n        raise child_exception\n    OSError: [Errno 2] No such file or directory\n**********************************************************************\n1 item had failures:\n   4 of  18 in sage.coding.linear_code.AbstractLinearCode.spectrum\n    [634 tests, 4 failures, 26.04 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/tests/gap_packages.py  # 5 doctests failed\nsage -t --long src/sage/coding/linear_code.py  # 4 doctests failed\n----------------------------------------------------------------------\n```\n\nCC:  @vbraun @dimpase\n\nBranch/Commit: **[9afe2c3](https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Dima Pasechnik**\n\nComponent: **packages: optional**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20525_\n\n",
    "closed_at": "2016-05-06T22:10:45Z",
    "created_at": "2016-05-01T04:09:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "gap_packages badly broken",
    "type": "issue",
    "updated_at": "2016-05-06T22:10:45Z",
    "url": "https://github.com/sagemath/sage/issues/20525",
    "user": "https://github.com/videlec"
}
```
With Sage 7.2.beta6 with `gap_packages` installed, within a `sage --gap` session:

```
gap> LoadPackage("HAPcryst");
#I  polymake command not found. Please set POLYMAKE_COMMAND by hand
----------------------------------------------------------------
Loading  polymaking 0.8.1
(A package for using polymake in GAP)
by Marc Roeder
----------------------------------------------------------------
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Loading  Cryst 4.1.12 (Computing with crystallographic groups)
by Bettina Eick (http://www.icm.tu-bs.de/~beick/),
   Franz Gähler (http://www.math.uni-bielefeld.de/~gaehler/), and
   Werner Nickel (http://www.mathematik.tu-darmstadt.de/~nickel/).
Homepage: http://www.math.uni-bielefeld.de/~gaehler/gap45/packages.php
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Loading  CrystCat 1.1.6 (The crystallographic groups catalog)
by Volkmar Felsch (http://www.math.rwth-aachen.de/~Volkmar.Felsch/) and
   Franz Gähler (http://www.math.uni-bielefeld.de/~gaehler/).
Homepage: http://www.math.uni-bielefeld.de/~gaehler/gap45/packages.php
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Loading  AClib 1.2 (Almost Crystallographic Groups - A Library and Algorithms)
by Karel Dekimpe (http://www.kulak.ac.be/~dekimpe) and
   Bettina Eick (http://www.icm.tu-bs.de/~beick).
Homepage: http://www.icm.tu-bs.de/~beick/so.html
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
#I  HAP warning: Set POLYMAKE_PATH manually if needed. 
#I  HAP warning: Set NEATO_PATH manually if needed.
#I  HAP warning: Set DISPLAY_PATH manually if needed.
Error, <opr> is not an operation called from
<compiled or corrupted statement>  called from
<function "local function">( <arguments> )
 called from read-eval loop at line 162 of /usr/local/src/sage-git/local/gap/latest/pkg/Hap1.11/lib/HapCocyclic/gap/ccgroup.gi
you can 'quit;' to quit to outer loop, or
you can 'return;' to continue
```

A second issue is a mis-installation of guava:

```
gap> DirectoriesPackagePrograms("guava")[1];
dir("/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/")
```

but this directory does not exist, `bin` is missing below:

```
$ ls -l /usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13
total 168
-rw-r--r-- 1 jdemeyer jdemeyer 11775 Mar 19 23:17 CHANGES.guava
-rwxr-xr-x 1 jdemeyer jdemeyer  1918 Mar 19 23:17 configure
-rw-r--r-- 1 jdemeyer jdemeyer 51189 Mar 19 23:17 COPYING.guava
drwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 doc
-rw-r--r-- 1 jdemeyer jdemeyer   368 Mar 19 23:17 gapdoc.g
-rw-r--r-- 1 jdemeyer jdemeyer  2059 Mar 19 23:17 HISTORY.guava
-rw-r--r-- 1 jdemeyer jdemeyer  1364 Mar 19 23:17 init.g
drwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 lib
-rw-r--r-- 1 jdemeyer jdemeyer 35120 Mar 19 23:17 LICENSE
-rw-r--r-- 1 jdemeyer jdemeyer  2858 Mar 19 23:17 Makefile.in
-rw-r--r-- 1 jdemeyer jdemeyer 11638 Mar 19 23:17 PackageInfo.g
-rw-r--r-- 1 jdemeyer jdemeyer  1420 Mar 19 23:17 read.g
-rw-r--r-- 1 jdemeyer jdemeyer  4882 Mar 19 23:17 README.guava
-rw-r--r-- 1 jdemeyer jdemeyer    98 Mar 19 23:17 README.md
drwxr-xr-x 4 jdemeyer jdemeyer  4096 Mar 30 00:32 src
drwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 tbl
drwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 tst
```

---

This causes doctest failures:

```
sage -t --long src/sage/tests/gap_packages.py
**********************************************************************
File "src/sage/tests/gap_packages.py", line 8, in sage.tests.gap_packages
Failed example:
    test_packages(pkgs, only_failures=True)    # optional - gap_packages
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.gap_packages[2]>", line 1, in <module>
        test_packages(pkgs, only_failures=True)    # optional - gap_packages
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 77, in test_packages
        output = libgap.eval('LoadPackage("{0}")'.format(pkg))
      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
        return make_any_gap_element(self, gap_eval(gap_command))
      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
        raise ValueError('libGAP: '+str(msg).strip())
    ValueError: libGAP: Error, <opr> is not an operation
**********************************************************************
File "src/sage/tests/gap_packages.py", line 47, in sage.tests.gap_packages.test_packages
Failed example:
    test_packages(['GAPDoc'])
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.gap_packages.test_packages[1]>", line 1, in <module>
        test_packages(['GAPDoc'])
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 77, in test_packages
        output = libgap.eval('LoadPackage("{0}")'.format(pkg))
      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
        return make_any_gap_element(self, gap_eval(gap_command))
      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
        raise ValueError('libGAP: '+str(msg).strip())
    ValueError: libGAP: 
**********************************************************************
File "src/sage/tests/gap_packages.py", line 54, in sage.tests.gap_packages.test_packages
Failed example:
    pkgs = all_installed_packages()
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.gap_packages.test_packages[2]>", line 1, in <module>
        pkgs = all_installed_packages()
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 109, in all_installed_packages
        for path in libgap.eval('GAP_ROOT_PATHS').sage():
      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
        return make_any_gap_element(self, gap_eval(gap_command))
      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
        raise ValueError('libGAP: '+str(msg).strip())
    ValueError: libGAP: 
**********************************************************************
File "src/sage/tests/gap_packages.py", line 55, in sage.tests.gap_packages.test_packages
Failed example:
    test_packages(pkgs)    # random output
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.gap_packages.test_packages[3]>", line 1, in <module>
        test_packages(pkgs)    # random output
    NameError: name 'pkgs' is not defined
**********************************************************************
File "src/sage/tests/gap_packages.py", line 105, in sage.tests.gap_packages.all_installed_packages
Failed example:
    all_installed_packages()
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.gap_packages.all_installed_packages[1]>", line 1, in <module>
        all_installed_packages()
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 109, in all_installed_packages
        for path in libgap.eval('GAP_ROOT_PATHS').sage():
      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
        return make_any_gap_element(self, gap_eval(gap_command))
      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
        raise ValueError('libGAP: '+str(msg).strip())
    ValueError: libGAP: 
**********************************************************************
3 items had failures:
   1 of   4 in sage.tests.gap_packages
   1 of   3 in sage.tests.gap_packages.all_installed_packages
   3 of   5 in sage.tests.gap_packages.test_packages
    [9 tests, 5 failures, 4.49 s]
sage -t --long src/sage/coding/linear_code.py
**********************************************************************
File "src/sage/coding/linear_code.py", line 3284, in sage.coding.linear_code.AbstractLinearCode.spectrum
Failed example:
    C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[8]>", line 1, in <module>
        C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
        process = Popen(stdout=PIPE, *popenargs, **kwargs)
      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
        errread, errwrite)
      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
        raise child_exception
    OSError: [Errno 2] No such file or directory
**********************************************************************
File "src/sage/coding/linear_code.py", line 3292, in sage.coding.linear_code.AbstractLinearCode.spectrum
Failed example:
    C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[12]>", line 1, in <module>
        C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
        process = Popen(stdout=PIPE, *popenargs, **kwargs)
      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
        errread, errwrite)
      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
        raise child_exception
    OSError: [Errno 2] No such file or directory
**********************************************************************
File "src/sage/coding/linear_code.py", line 3296, in sage.coding.linear_code.AbstractLinearCode.spectrum
Failed example:
    C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[14]>", line 1, in <module>
        C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
        process = Popen(stdout=PIPE, *popenargs, **kwargs)
      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
        errread, errwrite)
      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
        raise child_exception
    OSError: [Errno 2] No such file or directory
**********************************************************************
File "src/sage/coding/linear_code.py", line 3300, in sage.coding.linear_code.AbstractLinearCode.spectrum
Failed example:
    C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[16]>", line 1, in <module>
        C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
        process = Popen(stdout=PIPE, *popenargs, **kwargs)
      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
        errread, errwrite)
      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
        raise child_exception
    OSError: [Errno 2] No such file or directory
**********************************************************************
1 item had failures:
   4 of  18 in sage.coding.linear_code.AbstractLinearCode.spectrum
    [634 tests, 4 failures, 26.04 s]
----------------------------------------------------------------------
sage -t --long src/sage/tests/gap_packages.py  # 5 doctests failed
sage -t --long src/sage/coding/linear_code.py  # 4 doctests failed
----------------------------------------------------------------------
```

CC:  @vbraun @dimpase

Branch/Commit: **[9afe2c3](https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731)**

Reviewer: **Jeroen Demeyer**

Author: **Dima Pasechnik**

Component: **packages: optional**

_Issue created by migration from https://trac.sagemath.org/ticket/20525_





---

archive/issue_events_289224.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-05-01T04:09:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289224"
}
```



---

archive/issue_events_289225.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-05-01T04:09:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "c: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289225"
}
```



---

archive/issue_events_289226.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-05-01T04:09:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289226"
}
```



---

archive/issue_events_289227.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-05-01T04:09:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289227"
}
```



---

archive/issue_comments_296478.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log)**",
    "created_at": "2016-05-01T04:16:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296478",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log)**



---

archive/issue_comments_296479.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n Since #20182 there are some failing doctests related to optional packages\n \n-- `coding/linear_code.py`: related to Guava (gap package)\n-- `tests/gap_packages.py`: related to gap packages\n+- `coding/linear_code.py`: related to Guava (gap package) (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))\n+- `tests/gap_packages.py`: related to gap packages (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))\n``````\n",
    "created_at": "2016-05-01T04:16:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296479",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 Since #20182 there are some failing doctests related to optional packages
 
-- `coding/linear_code.py`: related to Guava (gap package)
-- `tests/gap_packages.py`: related to gap packages
+- `coding/linear_code.py`: related to Guava (gap package) (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))
+- `tests/gap_packages.py`: related to gap packages (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))
``````




---

archive/issue_comments_296480.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAre you sure that #20182 has anything to do with this? It seems to me that something broke `gap_packages`.",
    "created_at": "2016-05-02T08:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296480",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

Are you sure that #20182 has anything to do with this? It seems to me that something broke `gap_packages`.



---

archive/issue_comments_296481.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReformulation: this was not *visible* before #20182.",
    "created_at": "2016-05-02T13:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296481",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Reformulation: this was not *visible* before #20182.



---

archive/issue_comments_296482.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nFirst of all, what is the *exact command* that you ran to get those doctest failures?\n\nReplying to [@videlec](#comment:3):\n> this was not *visible* before #20182.\n\nDid you actually check this or are you just guessing? I.e. by applying #20182 on top of 7.2.beta5 or reverting #20182 from 7.2.beta6?",
    "created_at": "2016-05-02T13:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296482",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

First of all, what is the *exact command* that you ran to get those doctest failures?

Replying to [@videlec](#comment:3):
> this was not *visible* before #20182.

Did you actually check this or are you just guessing? I.e. by applying #20182 on top of 7.2.beta5 or reverting #20182 from 7.2.beta6?



---

archive/issue_comments_296483.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@jdemeyer](#comment:4):\n> First of all, what is the *exact command* that you ran to get those doctest failures?\n\nAnd did you verify that the same exact command on Sage 7.2.beta5 did not give failures?",
    "created_at": "2016-05-02T13:24:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296483",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@jdemeyer](#comment:4):
> First of all, what is the *exact command* that you ran to get those doctest failures?

And did you verify that the same exact command on Sage 7.2.beta5 did not give failures?



---

archive/issue_comments_296484.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe exact command I ran was\n\n```\nfor pkg in A_LOT_OF_THINGS\ndo\n    sage -p $pkg\ndone\n\nsage -patchbot\n```\n\nNote that the failing doctests are optional (precisely `# optional - gap_packages`). The patchbot did not ran those before #20182.",
    "created_at": "2016-05-02T13:24:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296484",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

The exact command I ran was

```
for pkg in A_LOT_OF_THINGS
do
    sage -p $pkg
done

sage -patchbot
```

Note that the failing doctests are optional (precisely `# optional - gap_packages`). The patchbot did not ran those before #20182.



---

archive/issue_comments_296485.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nFirst of all, using `./sage -p $pkg` to install packages is not at all recommended (use `./sage -i $pkg` instead). Second, not running `make` before starting the patchbot is really wrong.",
    "created_at": "2016-05-02T13:46:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296485",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

First of all, using `./sage -p $pkg` to install packages is not at all recommended (use `./sage -i $pkg` instead). Second, not running `make` before starting the patchbot is really wrong.



---

archive/issue_comments_296486.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nDo you know the answer to [comment:5]?",
    "created_at": "2016-05-02T13:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296486",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Do you know the answer to [comment:5]?



---

archive/issue_comments_296487.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nFor the record, I can reproduce the problem. I'm just not convinced that #20182 is to blame.",
    "created_at": "2016-05-02T13:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296487",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

For the record, I can reproduce the problem. I'm just not convinced that #20182 is to blame.



---

archive/issue_comments_296488.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,193 @@\n Since #20182 there are some failing doctests related to optional packages\n \n-- `coding/linear_code.py`: related to Guava (gap package) (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))\n-- `tests/gap_packages.py`: related to gap packages (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))\n+```\n+sage -t --long src/sage/tests/gap_packages.py\n+**********************************************************************\n+File \"src/sage/tests/gap_packages.py\", line 8, in sage.tests.gap_packages\n+Failed example:\n+    test_packages(pkgs, only_failures=True)    # optional - gap_packages\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.tests.gap_packages[2]>\", line 1, in <module>\n+        test_packages(pkgs, only_failures=True)    # optional - gap_packages\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 77, in test_packages\n+        output = libgap.eval('LoadPackage(\"{0}\")'.format(pkg))\n+      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n+        return make_any_gap_element(self, gap_eval(gap_command))\n+      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n+        raise ValueError('libGAP: '+str(msg).strip())\n+    ValueError: libGAP: Error, <opr> is not an operation\n+**********************************************************************\n+File \"src/sage/tests/gap_packages.py\", line 47, in sage.tests.gap_packages.test_packages\n+Failed example:\n+    test_packages(['GAPDoc'])\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.tests.gap_packages.test_packages[1]>\", line 1, in <module>\n+        test_packages(['GAPDoc'])\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 77, in test_packages\n+        output = libgap.eval('LoadPackage(\"{0}\")'.format(pkg))\n+      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n+        return make_any_gap_element(self, gap_eval(gap_command))\n+      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n+        raise ValueError('libGAP: '+str(msg).strip())\n+    ValueError: libGAP: \n+**********************************************************************\n+File \"src/sage/tests/gap_packages.py\", line 54, in sage.tests.gap_packages.test_packages\n+Failed example:\n+    pkgs = all_installed_packages()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.tests.gap_packages.test_packages[2]>\", line 1, in <module>\n+        pkgs = all_installed_packages()\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 109, in all_installed_packages\n+        for path in libgap.eval('GAP_ROOT_PATHS').sage():\n+      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n+        return make_any_gap_element(self, gap_eval(gap_command))\n+      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n+        raise ValueError('libGAP: '+str(msg).strip())\n+    ValueError: libGAP: \n+**********************************************************************\n+File \"src/sage/tests/gap_packages.py\", line 55, in sage.tests.gap_packages.test_packages\n+Failed example:\n+    test_packages(pkgs)    # random output\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.tests.gap_packages.test_packages[3]>\", line 1, in <module>\n+        test_packages(pkgs)    # random output\n+    NameError: name 'pkgs' is not defined\n+**********************************************************************\n+File \"src/sage/tests/gap_packages.py\", line 105, in sage.tests.gap_packages.all_installed_packages\n+Failed example:\n+    all_installed_packages()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.tests.gap_packages.all_installed_packages[1]>\", line 1, in <module>\n+        all_installed_packages()\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 109, in all_installed_packages\n+        for path in libgap.eval('GAP_ROOT_PATHS').sage():\n+      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n+        return make_any_gap_element(self, gap_eval(gap_command))\n+      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n+        raise ValueError('libGAP: '+str(msg).strip())\n+    ValueError: libGAP: \n+**********************************************************************\n+3 items had failures:\n+   1 of   4 in sage.tests.gap_packages\n+   1 of   3 in sage.tests.gap_packages.all_installed_packages\n+   3 of   5 in sage.tests.gap_packages.test_packages\n+    [9 tests, 5 failures, 4.49 s]\n+sage -t --long src/sage/coding/linear_code.py\n+**********************************************************************\n+File \"src/sage/coding/linear_code.py\", line 3284, in sage.coding.linear_code.AbstractLinearCode.spectrum\n+Failed example:\n+    C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[8]>\", line 1, in <module>\n+        C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n+        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n+        errread, errwrite)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n+        raise child_exception\n+    OSError: [Errno 2] No such file or directory\n+**********************************************************************\n+File \"src/sage/coding/linear_code.py\", line 3292, in sage.coding.linear_code.AbstractLinearCode.spectrum\n+Failed example:\n+    C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[12]>\", line 1, in <module>\n+        C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n+        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n+        errread, errwrite)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n+        raise child_exception\n+    OSError: [Errno 2] No such file or directory\n+**********************************************************************\n+File \"src/sage/coding/linear_code.py\", line 3296, in sage.coding.linear_code.AbstractLinearCode.spectrum\n+Failed example:\n+    C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[14]>\", line 1, in <module>\n+        C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n+        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n+        errread, errwrite)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n+        raise child_exception\n+    OSError: [Errno 2] No such file or directory\n+**********************************************************************\n+File \"src/sage/coding/linear_code.py\", line 3300, in sage.coding.linear_code.AbstractLinearCode.spectrum\n+Failed example:\n+    C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[16]>\", line 1, in <module>\n+        C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n+        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n+        errread, errwrite)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n+        raise child_exception\n+    OSError: [Errno 2] No such file or directory\n+**********************************************************************\n+1 item had failures:\n+   4 of  18 in sage.coding.linear_code.AbstractLinearCode.spectrum\n+    [634 tests, 4 failures, 26.04 s]\n+----------------------------------------------------------------------\n+sage -t --long src/sage/tests/gap_packages.py  # 5 doctests failed\n+sage -t --long src/sage/coding/linear_code.py  # 4 doctests failed\n+----------------------------------------------------------------------\n+```\n``````\n",
    "created_at": "2016-05-02T13:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296488",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,193 @@
 Since #20182 there are some failing doctests related to optional packages
 
-- `coding/linear_code.py`: related to Guava (gap package) (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))
-- `tests/gap_packages.py`: related to gap packages (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))
+```
+sage -t --long src/sage/tests/gap_packages.py
+**********************************************************************
+File "src/sage/tests/gap_packages.py", line 8, in sage.tests.gap_packages
+Failed example:
+    test_packages(pkgs, only_failures=True)    # optional - gap_packages
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.tests.gap_packages[2]>", line 1, in <module>
+        test_packages(pkgs, only_failures=True)    # optional - gap_packages
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 77, in test_packages
+        output = libgap.eval('LoadPackage("{0}")'.format(pkg))
+      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
+        return make_any_gap_element(self, gap_eval(gap_command))
+      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
+        raise ValueError('libGAP: '+str(msg).strip())
+    ValueError: libGAP: Error, <opr> is not an operation
+**********************************************************************
+File "src/sage/tests/gap_packages.py", line 47, in sage.tests.gap_packages.test_packages
+Failed example:
+    test_packages(['GAPDoc'])
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.tests.gap_packages.test_packages[1]>", line 1, in <module>
+        test_packages(['GAPDoc'])
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 77, in test_packages
+        output = libgap.eval('LoadPackage("{0}")'.format(pkg))
+      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
+        return make_any_gap_element(self, gap_eval(gap_command))
+      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
+        raise ValueError('libGAP: '+str(msg).strip())
+    ValueError: libGAP: 
+**********************************************************************
+File "src/sage/tests/gap_packages.py", line 54, in sage.tests.gap_packages.test_packages
+Failed example:
+    pkgs = all_installed_packages()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.tests.gap_packages.test_packages[2]>", line 1, in <module>
+        pkgs = all_installed_packages()
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 109, in all_installed_packages
+        for path in libgap.eval('GAP_ROOT_PATHS').sage():
+      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
+        return make_any_gap_element(self, gap_eval(gap_command))
+      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
+        raise ValueError('libGAP: '+str(msg).strip())
+    ValueError: libGAP: 
+**********************************************************************
+File "src/sage/tests/gap_packages.py", line 55, in sage.tests.gap_packages.test_packages
+Failed example:
+    test_packages(pkgs)    # random output
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.tests.gap_packages.test_packages[3]>", line 1, in <module>
+        test_packages(pkgs)    # random output
+    NameError: name 'pkgs' is not defined
+**********************************************************************
+File "src/sage/tests/gap_packages.py", line 105, in sage.tests.gap_packages.all_installed_packages
+Failed example:
+    all_installed_packages()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.tests.gap_packages.all_installed_packages[1]>", line 1, in <module>
+        all_installed_packages()
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 109, in all_installed_packages
+        for path in libgap.eval('GAP_ROOT_PATHS').sage():
+      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
+        return make_any_gap_element(self, gap_eval(gap_command))
+      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
+        raise ValueError('libGAP: '+str(msg).strip())
+    ValueError: libGAP: 
+**********************************************************************
+3 items had failures:
+   1 of   4 in sage.tests.gap_packages
+   1 of   3 in sage.tests.gap_packages.all_installed_packages
+   3 of   5 in sage.tests.gap_packages.test_packages
+    [9 tests, 5 failures, 4.49 s]
+sage -t --long src/sage/coding/linear_code.py
+**********************************************************************
+File "src/sage/coding/linear_code.py", line 3284, in sage.coding.linear_code.AbstractLinearCode.spectrum
+Failed example:
+    C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[8]>", line 1, in <module>
+        C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
+        process = Popen(stdout=PIPE, *popenargs, **kwargs)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
+        errread, errwrite)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
+        raise child_exception
+    OSError: [Errno 2] No such file or directory
+**********************************************************************
+File "src/sage/coding/linear_code.py", line 3292, in sage.coding.linear_code.AbstractLinearCode.spectrum
+Failed example:
+    C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[12]>", line 1, in <module>
+        C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
+        process = Popen(stdout=PIPE, *popenargs, **kwargs)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
+        errread, errwrite)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
+        raise child_exception
+    OSError: [Errno 2] No such file or directory
+**********************************************************************
+File "src/sage/coding/linear_code.py", line 3296, in sage.coding.linear_code.AbstractLinearCode.spectrum
+Failed example:
+    C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[14]>", line 1, in <module>
+        C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
+        process = Popen(stdout=PIPE, *popenargs, **kwargs)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
+        errread, errwrite)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
+        raise child_exception
+    OSError: [Errno 2] No such file or directory
+**********************************************************************
+File "src/sage/coding/linear_code.py", line 3300, in sage.coding.linear_code.AbstractLinearCode.spectrum
+Failed example:
+    C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[16]>", line 1, in <module>
+        C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
+        process = Popen(stdout=PIPE, *popenargs, **kwargs)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
+        errread, errwrite)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
+        raise child_exception
+    OSError: [Errno 2] No such file or directory
+**********************************************************************
+1 item had failures:
+   4 of  18 in sage.coding.linear_code.AbstractLinearCode.spectrum
+    [634 tests, 4 failures, 26.04 s]
+----------------------------------------------------------------------
+sage -t --long src/sage/tests/gap_packages.py  # 5 doctests failed
+sage -t --long src/sage/coding/linear_code.py  # 4 doctests failed
+----------------------------------------------------------------------
+```
``````




---

archive/issue_events_289228.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T13:51:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "c: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289228"
}
```



---

archive/issue_events_289229.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T13:51:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289229"
}
```



---

archive/issue_comments_296489.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAutomatic testing of all installed optional packages was introduced in #18558",
    "created_at": "2016-05-02T14:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296489",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:11" align="right">comment:11</div>

Automatic testing of all installed optional packages was introduced in #18558



---

archive/issue_comments_296490.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,193 +1,4 @@\n Since #20182 there are some failing doctests related to optional packages\n \n-```\n-sage -t --long src/sage/tests/gap_packages.py\n-**********************************************************************\n-File \"src/sage/tests/gap_packages.py\", line 8, in sage.tests.gap_packages\n-Failed example:\n-    test_packages(pkgs, only_failures=True)    # optional - gap_packages\n-Exception raised:\n-    Traceback (most recent call last):\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n-        self.compile_and_execute(example, compiler, test.globs)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n-        exec(compiled, globs)\n-      File \"<doctest sage.tests.gap_packages[2]>\", line 1, in <module>\n-        test_packages(pkgs, only_failures=True)    # optional - gap_packages\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 77, in test_packages\n-        output = libgap.eval('LoadPackage(\"{0}\")'.format(pkg))\n-      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n-        return make_any_gap_element(self, gap_eval(gap_command))\n-      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n-        raise ValueError('libGAP: '+str(msg).strip())\n-    ValueError: libGAP: Error, <opr> is not an operation\n-**********************************************************************\n-File \"src/sage/tests/gap_packages.py\", line 47, in sage.tests.gap_packages.test_packages\n-Failed example:\n-    test_packages(['GAPDoc'])\n-Exception raised:\n-    Traceback (most recent call last):\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n-        self.compile_and_execute(example, compiler, test.globs)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n-        exec(compiled, globs)\n-      File \"<doctest sage.tests.gap_packages.test_packages[1]>\", line 1, in <module>\n-        test_packages(['GAPDoc'])\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 77, in test_packages\n-        output = libgap.eval('LoadPackage(\"{0}\")'.format(pkg))\n-      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n-        return make_any_gap_element(self, gap_eval(gap_command))\n-      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n-        raise ValueError('libGAP: '+str(msg).strip())\n-    ValueError: libGAP: \n-**********************************************************************\n-File \"src/sage/tests/gap_packages.py\", line 54, in sage.tests.gap_packages.test_packages\n-Failed example:\n-    pkgs = all_installed_packages()\n-Exception raised:\n-    Traceback (most recent call last):\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n-        self.compile_and_execute(example, compiler, test.globs)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n-        exec(compiled, globs)\n-      File \"<doctest sage.tests.gap_packages.test_packages[2]>\", line 1, in <module>\n-        pkgs = all_installed_packages()\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 109, in all_installed_packages\n-        for path in libgap.eval('GAP_ROOT_PATHS').sage():\n-      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n-        return make_any_gap_element(self, gap_eval(gap_command))\n-      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n-        raise ValueError('libGAP: '+str(msg).strip())\n-    ValueError: libGAP: \n-**********************************************************************\n-File \"src/sage/tests/gap_packages.py\", line 55, in sage.tests.gap_packages.test_packages\n-Failed example:\n-    test_packages(pkgs)    # random output\n-Exception raised:\n-    Traceback (most recent call last):\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n-        self.compile_and_execute(example, compiler, test.globs)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n-        exec(compiled, globs)\n-      File \"<doctest sage.tests.gap_packages.test_packages[3]>\", line 1, in <module>\n-        test_packages(pkgs)    # random output\n-    NameError: name 'pkgs' is not defined\n-**********************************************************************\n-File \"src/sage/tests/gap_packages.py\", line 105, in sage.tests.gap_packages.all_installed_packages\n-Failed example:\n-    all_installed_packages()\n-Exception raised:\n-    Traceback (most recent call last):\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n-        self.compile_and_execute(example, compiler, test.globs)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n-        exec(compiled, globs)\n-      File \"<doctest sage.tests.gap_packages.all_installed_packages[1]>\", line 1, in <module>\n-        all_installed_packages()\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 109, in all_installed_packages\n-        for path in libgap.eval('GAP_ROOT_PATHS').sage():\n-      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n-        return make_any_gap_element(self, gap_eval(gap_command))\n-      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n-        raise ValueError('libGAP: '+str(msg).strip())\n-    ValueError: libGAP: \n-**********************************************************************\n-3 items had failures:\n-   1 of   4 in sage.tests.gap_packages\n-   1 of   3 in sage.tests.gap_packages.all_installed_packages\n-   3 of   5 in sage.tests.gap_packages.test_packages\n-    [9 tests, 5 failures, 4.49 s]\n-sage -t --long src/sage/coding/linear_code.py\n-**********************************************************************\n-File \"src/sage/coding/linear_code.py\", line 3284, in sage.coding.linear_code.AbstractLinearCode.spectrum\n-Failed example:\n-    C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n-Exception raised:\n-    Traceback (most recent call last):\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n-        self.compile_and_execute(example, compiler, test.globs)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n-        exec(compiled, globs)\n-      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[8]>\", line 1, in <module>\n-        C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n-        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n-      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n-        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n-      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n-        errread, errwrite)\n-      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n-        raise child_exception\n-    OSError: [Errno 2] No such file or directory\n-**********************************************************************\n-File \"src/sage/coding/linear_code.py\", line 3292, in sage.coding.linear_code.AbstractLinearCode.spectrum\n-Failed example:\n-    C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n-Exception raised:\n-    Traceback (most recent call last):\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n-        self.compile_and_execute(example, compiler, test.globs)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n-        exec(compiled, globs)\n-      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[12]>\", line 1, in <module>\n-        C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n-        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n-      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n-        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n-      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n-        errread, errwrite)\n-      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n-        raise child_exception\n-    OSError: [Errno 2] No such file or directory\n-**********************************************************************\n-File \"src/sage/coding/linear_code.py\", line 3296, in sage.coding.linear_code.AbstractLinearCode.spectrum\n-Failed example:\n-    C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n-Exception raised:\n-    Traceback (most recent call last):\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n-        self.compile_and_execute(example, compiler, test.globs)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n-        exec(compiled, globs)\n-      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[14]>\", line 1, in <module>\n-        C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n-        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n-      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n-        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n-      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n-        errread, errwrite)\n-      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n-        raise child_exception\n-    OSError: [Errno 2] No such file or directory\n-**********************************************************************\n-File \"src/sage/coding/linear_code.py\", line 3300, in sage.coding.linear_code.AbstractLinearCode.spectrum\n-Failed example:\n-    C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n-Exception raised:\n-    Traceback (most recent call last):\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n-        self.compile_and_execute(example, compiler, test.globs)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n-        exec(compiled, globs)\n-      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[16]>\", line 1, in <module>\n-        C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n-      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n-        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n-      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n-        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n-      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n-        errread, errwrite)\n-      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n-        raise child_exception\n-    OSError: [Errno 2] No such file or directory\n-**********************************************************************\n-1 item had failures:\n-   4 of  18 in sage.coding.linear_code.AbstractLinearCode.spectrum\n-    [634 tests, 4 failures, 26.04 s]\n-----------------------------------------------------------------------\n-sage -t --long src/sage/tests/gap_packages.py  # 5 doctests failed\n-sage -t --long src/sage/coding/linear_code.py  # 4 doctests failed\n-----------------------------------------------------------------------\n-```\n+- `coding/linear_code.py`: related to Guava (gap package) (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))\n+- `tests/gap_packages.py`: related to gap packages (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))\n``````\n",
    "created_at": "2016-05-02T14:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296490",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,193 +1,4 @@
 Since #20182 there are some failing doctests related to optional packages
 
-```
-sage -t --long src/sage/tests/gap_packages.py
-**********************************************************************
-File "src/sage/tests/gap_packages.py", line 8, in sage.tests.gap_packages
-Failed example:
-    test_packages(pkgs, only_failures=True)    # optional - gap_packages
-Exception raised:
-    Traceback (most recent call last):
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
-        self.compile_and_execute(example, compiler, test.globs)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
-        exec(compiled, globs)
-      File "<doctest sage.tests.gap_packages[2]>", line 1, in <module>
-        test_packages(pkgs, only_failures=True)    # optional - gap_packages
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 77, in test_packages
-        output = libgap.eval('LoadPackage("{0}")'.format(pkg))
-      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
-        return make_any_gap_element(self, gap_eval(gap_command))
-      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
-        raise ValueError('libGAP: '+str(msg).strip())
-    ValueError: libGAP: Error, <opr> is not an operation
-**********************************************************************
-File "src/sage/tests/gap_packages.py", line 47, in sage.tests.gap_packages.test_packages
-Failed example:
-    test_packages(['GAPDoc'])
-Exception raised:
-    Traceback (most recent call last):
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
-        self.compile_and_execute(example, compiler, test.globs)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
-        exec(compiled, globs)
-      File "<doctest sage.tests.gap_packages.test_packages[1]>", line 1, in <module>
-        test_packages(['GAPDoc'])
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 77, in test_packages
-        output = libgap.eval('LoadPackage("{0}")'.format(pkg))
-      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
-        return make_any_gap_element(self, gap_eval(gap_command))
-      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
-        raise ValueError('libGAP: '+str(msg).strip())
-    ValueError: libGAP: 
-**********************************************************************
-File "src/sage/tests/gap_packages.py", line 54, in sage.tests.gap_packages.test_packages
-Failed example:
-    pkgs = all_installed_packages()
-Exception raised:
-    Traceback (most recent call last):
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
-        self.compile_and_execute(example, compiler, test.globs)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
-        exec(compiled, globs)
-      File "<doctest sage.tests.gap_packages.test_packages[2]>", line 1, in <module>
-        pkgs = all_installed_packages()
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 109, in all_installed_packages
-        for path in libgap.eval('GAP_ROOT_PATHS').sage():
-      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
-        return make_any_gap_element(self, gap_eval(gap_command))
-      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
-        raise ValueError('libGAP: '+str(msg).strip())
-    ValueError: libGAP: 
-**********************************************************************
-File "src/sage/tests/gap_packages.py", line 55, in sage.tests.gap_packages.test_packages
-Failed example:
-    test_packages(pkgs)    # random output
-Exception raised:
-    Traceback (most recent call last):
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
-        self.compile_and_execute(example, compiler, test.globs)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
-        exec(compiled, globs)
-      File "<doctest sage.tests.gap_packages.test_packages[3]>", line 1, in <module>
-        test_packages(pkgs)    # random output
-    NameError: name 'pkgs' is not defined
-**********************************************************************
-File "src/sage/tests/gap_packages.py", line 105, in sage.tests.gap_packages.all_installed_packages
-Failed example:
-    all_installed_packages()
-Exception raised:
-    Traceback (most recent call last):
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
-        self.compile_and_execute(example, compiler, test.globs)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
-        exec(compiled, globs)
-      File "<doctest sage.tests.gap_packages.all_installed_packages[1]>", line 1, in <module>
-        all_installed_packages()
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 109, in all_installed_packages
-        for path in libgap.eval('GAP_ROOT_PATHS').sage():
-      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
-        return make_any_gap_element(self, gap_eval(gap_command))
-      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
-        raise ValueError('libGAP: '+str(msg).strip())
-    ValueError: libGAP: 
-**********************************************************************
-3 items had failures:
-   1 of   4 in sage.tests.gap_packages
-   1 of   3 in sage.tests.gap_packages.all_installed_packages
-   3 of   5 in sage.tests.gap_packages.test_packages
-    [9 tests, 5 failures, 4.49 s]
-sage -t --long src/sage/coding/linear_code.py
-**********************************************************************
-File "src/sage/coding/linear_code.py", line 3284, in sage.coding.linear_code.AbstractLinearCode.spectrum
-Failed example:
-    C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
-Exception raised:
-    Traceback (most recent call last):
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
-        self.compile_and_execute(example, compiler, test.globs)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
-        exec(compiled, globs)
-      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[8]>", line 1, in <module>
-        C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
-        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
-      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
-        process = Popen(stdout=PIPE, *popenargs, **kwargs)
-      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
-        errread, errwrite)
-      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
-        raise child_exception
-    OSError: [Errno 2] No such file or directory
-**********************************************************************
-File "src/sage/coding/linear_code.py", line 3292, in sage.coding.linear_code.AbstractLinearCode.spectrum
-Failed example:
-    C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
-Exception raised:
-    Traceback (most recent call last):
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
-        self.compile_and_execute(example, compiler, test.globs)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
-        exec(compiled, globs)
-      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[12]>", line 1, in <module>
-        C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
-        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
-      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
-        process = Popen(stdout=PIPE, *popenargs, **kwargs)
-      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
-        errread, errwrite)
-      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
-        raise child_exception
-    OSError: [Errno 2] No such file or directory
-**********************************************************************
-File "src/sage/coding/linear_code.py", line 3296, in sage.coding.linear_code.AbstractLinearCode.spectrum
-Failed example:
-    C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
-Exception raised:
-    Traceback (most recent call last):
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
-        self.compile_and_execute(example, compiler, test.globs)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
-        exec(compiled, globs)
-      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[14]>", line 1, in <module>
-        C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
-        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
-      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
-        process = Popen(stdout=PIPE, *popenargs, **kwargs)
-      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
-        errread, errwrite)
-      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
-        raise child_exception
-    OSError: [Errno 2] No such file or directory
-**********************************************************************
-File "src/sage/coding/linear_code.py", line 3300, in sage.coding.linear_code.AbstractLinearCode.spectrum
-Failed example:
-    C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
-Exception raised:
-    Traceback (most recent call last):
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
-        self.compile_and_execute(example, compiler, test.globs)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
-        exec(compiled, globs)
-      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[16]>", line 1, in <module>
-        C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
-      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
-        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
-      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
-        process = Popen(stdout=PIPE, *popenargs, **kwargs)
-      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
-        errread, errwrite)
-      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
-        raise child_exception
-    OSError: [Errno 2] No such file or directory
-**********************************************************************
-1 item had failures:
-   4 of  18 in sage.coding.linear_code.AbstractLinearCode.spectrum
-    [634 tests, 4 failures, 26.04 s]
-----------------------------------------------------------------------
-sage -t --long src/sage/tests/gap_packages.py  # 5 doctests failed
-sage -t --long src/sage/coding/linear_code.py  # 4 doctests failed
-----------------------------------------------------------------------
-```
+- `coding/linear_code.py`: related to Guava (gap package) (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))
+- `tests/gap_packages.py`: related to gap packages (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))
``````




---

archive/issue_events_289230.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-05-02T14:06:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289230"
}
```



---

archive/issue_events_289231.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-05-02T14:06:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "c: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289231"
}
```



---

archive/issue_comments_296491.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,193 @@\n-Since #20182 there are some failing doctests related to optional packages\n+With Sage 7.2.beta6:\n \n-- `coding/linear_code.py`: related to Guava (gap package) (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))\n-- `tests/gap_packages.py`: related to gap packages (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))\n+```\n+sage -t --long src/sage/tests/gap_packages.py\n+**********************************************************************\n+File \"src/sage/tests/gap_packages.py\", line 8, in sage.tests.gap_packages\n+Failed example:\n+    test_packages(pkgs, only_failures=True)    # optional - gap_packages\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.tests.gap_packages[2]>\", line 1, in <module>\n+        test_packages(pkgs, only_failures=True)    # optional - gap_packages\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 77, in test_packages\n+        output = libgap.eval('LoadPackage(\"{0}\")'.format(pkg))\n+      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n+        return make_any_gap_element(self, gap_eval(gap_command))\n+      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n+        raise ValueError('libGAP: '+str(msg).strip())\n+    ValueError: libGAP: Error, <opr> is not an operation\n+**********************************************************************\n+File \"src/sage/tests/gap_packages.py\", line 47, in sage.tests.gap_packages.test_packages\n+Failed example:\n+    test_packages(['GAPDoc'])\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.tests.gap_packages.test_packages[1]>\", line 1, in <module>\n+        test_packages(['GAPDoc'])\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 77, in test_packages\n+        output = libgap.eval('LoadPackage(\"{0}\")'.format(pkg))\n+      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n+        return make_any_gap_element(self, gap_eval(gap_command))\n+      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n+        raise ValueError('libGAP: '+str(msg).strip())\n+    ValueError: libGAP: \n+**********************************************************************\n+File \"src/sage/tests/gap_packages.py\", line 54, in sage.tests.gap_packages.test_packages\n+Failed example:\n+    pkgs = all_installed_packages()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.tests.gap_packages.test_packages[2]>\", line 1, in <module>\n+        pkgs = all_installed_packages()\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 109, in all_installed_packages\n+        for path in libgap.eval('GAP_ROOT_PATHS').sage():\n+      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n+        return make_any_gap_element(self, gap_eval(gap_command))\n+      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n+        raise ValueError('libGAP: '+str(msg).strip())\n+    ValueError: libGAP: \n+**********************************************************************\n+File \"src/sage/tests/gap_packages.py\", line 55, in sage.tests.gap_packages.test_packages\n+Failed example:\n+    test_packages(pkgs)    # random output\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.tests.gap_packages.test_packages[3]>\", line 1, in <module>\n+        test_packages(pkgs)    # random output\n+    NameError: name 'pkgs' is not defined\n+**********************************************************************\n+File \"src/sage/tests/gap_packages.py\", line 105, in sage.tests.gap_packages.all_installed_packages\n+Failed example:\n+    all_installed_packages()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.tests.gap_packages.all_installed_packages[1]>\", line 1, in <module>\n+        all_installed_packages()\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py\", line 109, in all_installed_packages\n+        for path in libgap.eval('GAP_ROOT_PATHS').sage():\n+      File \"sage/libs/gap/libgap.pyx\", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)\n+        return make_any_gap_element(self, gap_eval(gap_command))\n+      File \"sage/libs/gap/util.pyx\", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)\n+        raise ValueError('libGAP: '+str(msg).strip())\n+    ValueError: libGAP: \n+**********************************************************************\n+3 items had failures:\n+   1 of   4 in sage.tests.gap_packages\n+   1 of   3 in sage.tests.gap_packages.all_installed_packages\n+   3 of   5 in sage.tests.gap_packages.test_packages\n+    [9 tests, 5 failures, 4.49 s]\n+sage -t --long src/sage/coding/linear_code.py\n+**********************************************************************\n+File \"src/sage/coding/linear_code.py\", line 3284, in sage.coding.linear_code.AbstractLinearCode.spectrum\n+Failed example:\n+    C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[8]>\", line 1, in <module>\n+        C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n+        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n+        errread, errwrite)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n+        raise child_exception\n+    OSError: [Errno 2] No such file or directory\n+**********************************************************************\n+File \"src/sage/coding/linear_code.py\", line 3292, in sage.coding.linear_code.AbstractLinearCode.spectrum\n+Failed example:\n+    C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[12]>\", line 1, in <module>\n+        C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n+        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n+        errread, errwrite)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n+        raise child_exception\n+    OSError: [Errno 2] No such file or directory\n+**********************************************************************\n+File \"src/sage/coding/linear_code.py\", line 3296, in sage.coding.linear_code.AbstractLinearCode.spectrum\n+Failed example:\n+    C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[14]>\", line 1, in <module>\n+        C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n+        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n+        errread, errwrite)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n+        raise child_exception\n+    OSError: [Errno 2] No such file or directory\n+**********************************************************************\n+File \"src/sage/coding/linear_code.py\", line 3300, in sage.coding.linear_code.AbstractLinearCode.spectrum\n+Failed example:\n+    C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[16]>\", line 1, in <module>\n+        C.spectrum() == C.spectrum(algorithm=\"leon\")   # optional - gap_packages (Guava package)\n+      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py\", line 3328, in spectrum\n+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 566, in check_output\n+        process = Popen(stdout=PIPE, *popenargs, **kwargs)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 710, in __init__\n+        errread, errwrite)\n+      File \"/usr/local/src/sage-git/local/lib/python/subprocess.py\", line 1335, in _execute_child\n+        raise child_exception\n+    OSError: [Errno 2] No such file or directory\n+**********************************************************************\n+1 item had failures:\n+   4 of  18 in sage.coding.linear_code.AbstractLinearCode.spectrum\n+    [634 tests, 4 failures, 26.04 s]\n+----------------------------------------------------------------------\n+sage -t --long src/sage/tests/gap_packages.py  # 5 doctests failed\n+sage -t --long src/sage/coding/linear_code.py  # 4 doctests failed\n+----------------------------------------------------------------------\n+```\n``````\n",
    "created_at": "2016-05-02T14:42:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296491",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,193 @@
-Since #20182 there are some failing doctests related to optional packages
+With Sage 7.2.beta6:
 
-- `coding/linear_code.py`: related to Guava (gap package) (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))
-- `tests/gap_packages.py`: related to gap packages (see [failing_doctests-librae.log](https://github.com/sagemath/sage/files/ticket20525/failing_doctests-librae.log))
+```
+sage -t --long src/sage/tests/gap_packages.py
+**********************************************************************
+File "src/sage/tests/gap_packages.py", line 8, in sage.tests.gap_packages
+Failed example:
+    test_packages(pkgs, only_failures=True)    # optional - gap_packages
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.tests.gap_packages[2]>", line 1, in <module>
+        test_packages(pkgs, only_failures=True)    # optional - gap_packages
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 77, in test_packages
+        output = libgap.eval('LoadPackage("{0}")'.format(pkg))
+      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
+        return make_any_gap_element(self, gap_eval(gap_command))
+      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
+        raise ValueError('libGAP: '+str(msg).strip())
+    ValueError: libGAP: Error, <opr> is not an operation
+**********************************************************************
+File "src/sage/tests/gap_packages.py", line 47, in sage.tests.gap_packages.test_packages
+Failed example:
+    test_packages(['GAPDoc'])
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.tests.gap_packages.test_packages[1]>", line 1, in <module>
+        test_packages(['GAPDoc'])
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 77, in test_packages
+        output = libgap.eval('LoadPackage("{0}")'.format(pkg))
+      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
+        return make_any_gap_element(self, gap_eval(gap_command))
+      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
+        raise ValueError('libGAP: '+str(msg).strip())
+    ValueError: libGAP: 
+**********************************************************************
+File "src/sage/tests/gap_packages.py", line 54, in sage.tests.gap_packages.test_packages
+Failed example:
+    pkgs = all_installed_packages()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.tests.gap_packages.test_packages[2]>", line 1, in <module>
+        pkgs = all_installed_packages()
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 109, in all_installed_packages
+        for path in libgap.eval('GAP_ROOT_PATHS').sage():
+      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
+        return make_any_gap_element(self, gap_eval(gap_command))
+      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
+        raise ValueError('libGAP: '+str(msg).strip())
+    ValueError: libGAP: 
+**********************************************************************
+File "src/sage/tests/gap_packages.py", line 55, in sage.tests.gap_packages.test_packages
+Failed example:
+    test_packages(pkgs)    # random output
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.tests.gap_packages.test_packages[3]>", line 1, in <module>
+        test_packages(pkgs)    # random output
+    NameError: name 'pkgs' is not defined
+**********************************************************************
+File "src/sage/tests/gap_packages.py", line 105, in sage.tests.gap_packages.all_installed_packages
+Failed example:
+    all_installed_packages()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.tests.gap_packages.all_installed_packages[1]>", line 1, in <module>
+        all_installed_packages()
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/tests/gap_packages.py", line 109, in all_installed_packages
+        for path in libgap.eval('GAP_ROOT_PATHS').sage():
+      File "sage/libs/gap/libgap.pyx", line 431, in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4183)
+        return make_any_gap_element(self, gap_eval(gap_command))
+      File "sage/libs/gap/util.pyx", line 288, in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4947)
+        raise ValueError('libGAP: '+str(msg).strip())
+    ValueError: libGAP: 
+**********************************************************************
+3 items had failures:
+   1 of   4 in sage.tests.gap_packages
+   1 of   3 in sage.tests.gap_packages.all_installed_packages
+   3 of   5 in sage.tests.gap_packages.test_packages
+    [9 tests, 5 failures, 4.49 s]
+sage -t --long src/sage/coding/linear_code.py
+**********************************************************************
+File "src/sage/coding/linear_code.py", line 3284, in sage.coding.linear_code.AbstractLinearCode.spectrum
+Failed example:
+    C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[8]>", line 1, in <module>
+        C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
+        process = Popen(stdout=PIPE, *popenargs, **kwargs)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
+        errread, errwrite)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
+        raise child_exception
+    OSError: [Errno 2] No such file or directory
+**********************************************************************
+File "src/sage/coding/linear_code.py", line 3292, in sage.coding.linear_code.AbstractLinearCode.spectrum
+Failed example:
+    C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[12]>", line 1, in <module>
+        C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
+        process = Popen(stdout=PIPE, *popenargs, **kwargs)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
+        errread, errwrite)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
+        raise child_exception
+    OSError: [Errno 2] No such file or directory
+**********************************************************************
+File "src/sage/coding/linear_code.py", line 3296, in sage.coding.linear_code.AbstractLinearCode.spectrum
+Failed example:
+    C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[14]>", line 1, in <module>
+        C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
+        process = Popen(stdout=PIPE, *popenargs, **kwargs)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
+        errread, errwrite)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
+        raise child_exception
+    OSError: [Errno 2] No such file or directory
+**********************************************************************
+File "src/sage/coding/linear_code.py", line 3300, in sage.coding.linear_code.AbstractLinearCode.spectrum
+Failed example:
+    C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.linear_code.AbstractLinearCode.spectrum[16]>", line 1, in <module>
+        C.spectrum() == C.spectrum(algorithm="leon")   # optional - gap_packages (Guava package)
+      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/coding/linear_code.py", line 3328, in spectrum
+        lines = subprocess.check_output([os.path.join(guava_bin_dir, 'wtdist'), input])
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 566, in check_output
+        process = Popen(stdout=PIPE, *popenargs, **kwargs)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 710, in __init__
+        errread, errwrite)
+      File "/usr/local/src/sage-git/local/lib/python/subprocess.py", line 1335, in _execute_child
+        raise child_exception
+    OSError: [Errno 2] No such file or directory
+**********************************************************************
+1 item had failures:
+   4 of  18 in sage.coding.linear_code.AbstractLinearCode.spectrum
+    [634 tests, 4 failures, 26.04 s]
+----------------------------------------------------------------------
+sage -t --long src/sage/tests/gap_packages.py  # 5 doctests failed
+sage -t --long src/sage/coding/linear_code.py  # 4 doctests failed
+----------------------------------------------------------------------
+```
``````




---

archive/issue_events_289232.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T14:42:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "c: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289232"
}
```



---

archive/issue_events_289233.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T14:42:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289233"
}
```



---

archive/issue_events_289234.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T14:42:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289234"
}
```



---

archive/issue_events_289235.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T14:42:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289235"
}
```



---

archive/issue_events_289236.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T14:42:17Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "title_is": "Failing gap_packages doctests",
    "title_was": "failing optional doctests",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289236"
}
```



---

archive/issue_comments_296492.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -191,3 +191,29 @@\n sage -t --long src/sage/coding/linear_code.py  # 4 doctests failed\n ----------------------------------------------------------------------\n ```\n+\n+The failures in `gap_packages.py` are because of\n+\n+```\n+sage: libgap.eval('LoadPackage(\"HAPcryst\")')\n+---------------------------------------------------------------------------\n+ValueError                                Traceback (most recent call last)\n+<ipython-input-1-90cb9d4fcac6> in <module>()\n+----> 1 libgap.eval('LoadPackage(\"HAPcryst\")')\n+\n+/usr/local/src/sage-git/src/sage/libs/gap/libgap.pyx in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4168)()\n+    429         if not isinstance(gap_command, basestring):\n+    430             gap_command = str(gap_command._gap_init_())\n+--> 431         return make_any_gap_element(self, gap_eval(gap_command))\n+    432 \n+    433     @cached_method\n+\n+/usr/local/src/sage-git/src/sage/libs/gap/util.pyx in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4932)()\n+    286             sig_off()\n+    287         except RuntimeError as msg:\n+--> 288             raise ValueError('libGAP: '+str(msg).strip())\n+    289 \n+    290         if libGAP_Symbol != libGAP_S_SEMICOLON:\n+\n+ValueError: libGAP: Error, <opr> is not an operation\n+```\n``````\n",
    "created_at": "2016-05-02T14:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296492",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -191,3 +191,29 @@
 sage -t --long src/sage/coding/linear_code.py  # 4 doctests failed
 ----------------------------------------------------------------------
 ```
+
+The failures in `gap_packages.py` are because of
+
+```
+sage: libgap.eval('LoadPackage("HAPcryst")')
+---------------------------------------------------------------------------
+ValueError                                Traceback (most recent call last)
+<ipython-input-1-90cb9d4fcac6> in <module>()
+----> 1 libgap.eval('LoadPackage("HAPcryst")')
+
+/usr/local/src/sage-git/src/sage/libs/gap/libgap.pyx in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4168)()
+    429         if not isinstance(gap_command, basestring):
+    430             gap_command = str(gap_command._gap_init_())
+--> 431         return make_any_gap_element(self, gap_eval(gap_command))
+    432 
+    433     @cached_method
+
+/usr/local/src/sage-git/src/sage/libs/gap/util.pyx in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4932)()
+    286             sig_off()
+    287         except RuntimeError as msg:
+--> 288             raise ValueError('libGAP: '+str(msg).strip())
+    289 
+    290         if libGAP_Symbol != libGAP_S_SEMICOLON:
+
+ValueError: libGAP: Error, <opr> is not an operation
+```
``````




---

archive/issue_comments_296493.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -217,3 +217,11 @@\n \n ValueError: libGAP: Error, <opr> is not an operation\n ```\n+\n+The failures in `linear_code.pyx` are because of\n+\n+```\n+sage: print gap.eval('DirectoriesPackagePrograms(\"guava\")[1]')\n+dir(\"/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/\")\n+```\n+but this directory does not exist!\n``````\n",
    "created_at": "2016-05-02T14:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296493",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -217,3 +217,11 @@
 
 ValueError: libGAP: Error, <opr> is not an operation
 ```
+
+The failures in `linear_code.pyx` are because of
+
+```
+sage: print gap.eval('DirectoriesPackagePrograms("guava")[1]')
+dir("/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/")
+```
+but this directory does not exist!
``````




---

archive/issue_events_289237.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T14:55:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "title_is": "gap_packages badly broken",
    "title_was": "Failing gap_packages doctests",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289237"
}
```



---

archive/issue_comments_296494.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,40 @@\n With Sage 7.2.beta6:\n+\n+```\n+sage: libgap.eval('LoadPackage(\"HAPcryst\")')\n+---------------------------------------------------------------------------\n+ValueError                                Traceback (most recent call last)\n+<ipython-input-1-90cb9d4fcac6> in <module>()\n+----> 1 libgap.eval('LoadPackage(\"HAPcryst\")')\n+\n+/usr/local/src/sage-git/src/sage/libs/gap/libgap.pyx in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4168)()\n+    429         if not isinstance(gap_command, basestring):\n+    430             gap_command = str(gap_command._gap_init_())\n+--> 431         return make_any_gap_element(self, gap_eval(gap_command))\n+    432 \n+    433     @cached_method\n+\n+/usr/local/src/sage-git/src/sage/libs/gap/util.pyx in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4932)()\n+    286             sig_off()\n+    287         except RuntimeError as msg:\n+--> 288             raise ValueError('libGAP: '+str(msg).strip())\n+    289 \n+    290         if libGAP_Symbol != libGAP_S_SEMICOLON:\n+\n+ValueError: libGAP: Error, <opr> is not an operation\n+```\n+\n+A second issue is a mis-installation of guava:\n+\n+```\n+sage: print gap.eval('DirectoriesPackagePrograms(\"guava\")[1]')\n+dir(\"/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/\")\n+```\n+but this directory does not exist!\n+\n+---\n+\n+This causes doctest failures\n \n ```\n sage -t --long src/sage/tests/gap_packages.py\n@@ -191,37 +227,3 @@\n sage -t --long src/sage/coding/linear_code.py  # 4 doctests failed\n ----------------------------------------------------------------------\n ```\n-\n-The failures in `gap_packages.py` are because of\n-\n-```\n-sage: libgap.eval('LoadPackage(\"HAPcryst\")')\n----------------------------------------------------------------------------\n-ValueError                                Traceback (most recent call last)\n-<ipython-input-1-90cb9d4fcac6> in <module>()\n-----> 1 libgap.eval('LoadPackage(\"HAPcryst\")')\n-\n-/usr/local/src/sage-git/src/sage/libs/gap/libgap.pyx in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4168)()\n-    429         if not isinstance(gap_command, basestring):\n-    430             gap_command = str(gap_command._gap_init_())\n---> 431         return make_any_gap_element(self, gap_eval(gap_command))\n-    432 \n-    433     @cached_method\n-\n-/usr/local/src/sage-git/src/sage/libs/gap/util.pyx in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4932)()\n-    286             sig_off()\n-    287         except RuntimeError as msg:\n---> 288             raise ValueError('libGAP: '+str(msg).strip())\n-    289 \n-    290         if libGAP_Symbol != libGAP_S_SEMICOLON:\n-\n-ValueError: libGAP: Error, <opr> is not an operation\n-```\n-\n-The failures in `linear_code.pyx` are because of\n-\n-```\n-sage: print gap.eval('DirectoriesPackagePrograms(\"guava\")[1]')\n-dir(\"/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/\")\n-```\n-but this directory does not exist!\n``````\n",
    "created_at": "2016-05-02T14:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296494",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,40 @@
 With Sage 7.2.beta6:
+
+```
+sage: libgap.eval('LoadPackage("HAPcryst")')
+---------------------------------------------------------------------------
+ValueError                                Traceback (most recent call last)
+<ipython-input-1-90cb9d4fcac6> in <module>()
+----> 1 libgap.eval('LoadPackage("HAPcryst")')
+
+/usr/local/src/sage-git/src/sage/libs/gap/libgap.pyx in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4168)()
+    429         if not isinstance(gap_command, basestring):
+    430             gap_command = str(gap_command._gap_init_())
+--> 431         return make_any_gap_element(self, gap_eval(gap_command))
+    432 
+    433     @cached_method
+
+/usr/local/src/sage-git/src/sage/libs/gap/util.pyx in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4932)()
+    286             sig_off()
+    287         except RuntimeError as msg:
+--> 288             raise ValueError('libGAP: '+str(msg).strip())
+    289 
+    290         if libGAP_Symbol != libGAP_S_SEMICOLON:
+
+ValueError: libGAP: Error, <opr> is not an operation
+```
+
+A second issue is a mis-installation of guava:
+
+```
+sage: print gap.eval('DirectoriesPackagePrograms("guava")[1]')
+dir("/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/")
+```
+but this directory does not exist!
+
+---
+
+This causes doctest failures
 
 ```
 sage -t --long src/sage/tests/gap_packages.py
@@ -191,37 +227,3 @@
 sage -t --long src/sage/coding/linear_code.py  # 4 doctests failed
 ----------------------------------------------------------------------
 ```
-
-The failures in `gap_packages.py` are because of
-
-```
-sage: libgap.eval('LoadPackage("HAPcryst")')
----------------------------------------------------------------------------
-ValueError                                Traceback (most recent call last)
-<ipython-input-1-90cb9d4fcac6> in <module>()
-----> 1 libgap.eval('LoadPackage("HAPcryst")')
-
-/usr/local/src/sage-git/src/sage/libs/gap/libgap.pyx in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4168)()
-    429         if not isinstance(gap_command, basestring):
-    430             gap_command = str(gap_command._gap_init_())
---> 431         return make_any_gap_element(self, gap_eval(gap_command))
-    432 
-    433     @cached_method
-
-/usr/local/src/sage-git/src/sage/libs/gap/util.pyx in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4932)()
-    286             sig_off()
-    287         except RuntimeError as msg:
---> 288             raise ValueError('libGAP: '+str(msg).strip())
-    289 
-    290         if libGAP_Symbol != libGAP_S_SEMICOLON:
-
-ValueError: libGAP: Error, <opr> is not an operation
-```
-
-The failures in `linear_code.pyx` are because of
-
-```
-sage: print gap.eval('DirectoriesPackagePrograms("guava")[1]')
-dir("/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/")
-```
-but this directory does not exist!
``````




---

archive/issue_comments_296495.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nthese tests work for me. Must be patchbot madness...",
    "created_at": "2016-05-02T14:57:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296495",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">comment:16</div>

these tests work for me. Must be patchbot madness...



---

archive/issue_comments_296496.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,40 +1,4 @@\n With Sage 7.2.beta6:\n-\n-```\n-sage: libgap.eval('LoadPackage(\"HAPcryst\")')\n----------------------------------------------------------------------------\n-ValueError                                Traceback (most recent call last)\n-<ipython-input-1-90cb9d4fcac6> in <module>()\n-----> 1 libgap.eval('LoadPackage(\"HAPcryst\")')\n-\n-/usr/local/src/sage-git/src/sage/libs/gap/libgap.pyx in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4168)()\n-    429         if not isinstance(gap_command, basestring):\n-    430             gap_command = str(gap_command._gap_init_())\n---> 431         return make_any_gap_element(self, gap_eval(gap_command))\n-    432 \n-    433     @cached_method\n-\n-/usr/local/src/sage-git/src/sage/libs/gap/util.pyx in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4932)()\n-    286             sig_off()\n-    287         except RuntimeError as msg:\n---> 288             raise ValueError('libGAP: '+str(msg).strip())\n-    289 \n-    290         if libGAP_Symbol != libGAP_S_SEMICOLON:\n-\n-ValueError: libGAP: Error, <opr> is not an operation\n-```\n-\n-A second issue is a mis-installation of guava:\n-\n-```\n-sage: print gap.eval('DirectoriesPackagePrograms(\"guava\")[1]')\n-dir(\"/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/\")\n-```\n-but this directory does not exist!\n-\n----\n-\n-This causes doctest failures\n \n ```\n sage -t --long src/sage/tests/gap_packages.py\n``````\n",
    "created_at": "2016-05-02T14:57:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296496",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,40 +1,4 @@
 With Sage 7.2.beta6:
-
-```
-sage: libgap.eval('LoadPackage("HAPcryst")')
----------------------------------------------------------------------------
-ValueError                                Traceback (most recent call last)
-<ipython-input-1-90cb9d4fcac6> in <module>()
-----> 1 libgap.eval('LoadPackage("HAPcryst")')
-
-/usr/local/src/sage-git/src/sage/libs/gap/libgap.pyx in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4168)()
-    429         if not isinstance(gap_command, basestring):
-    430             gap_command = str(gap_command._gap_init_())
---> 431         return make_any_gap_element(self, gap_eval(gap_command))
-    432 
-    433     @cached_method
-
-/usr/local/src/sage-git/src/sage/libs/gap/util.pyx in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4932)()
-    286             sig_off()
-    287         except RuntimeError as msg:
---> 288             raise ValueError('libGAP: '+str(msg).strip())
-    289 
-    290         if libGAP_Symbol != libGAP_S_SEMICOLON:
-
-ValueError: libGAP: Error, <opr> is not an operation
-```
-
-A second issue is a mis-installation of guava:
-
-```
-sage: print gap.eval('DirectoriesPackagePrograms("guava")[1]')
-dir("/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/")
-```
-but this directory does not exist!
-
----
-
-This causes doctest failures
 
 ```
 sage -t --long src/sage/tests/gap_packages.py
``````




---

archive/issue_events_289238.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-02T14:57:12Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "title_is": "Failing gap_packages doctests",
    "title_was": "gap_packages badly broken",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289238"
}
```



---

archive/issue_events_289239.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T15:00:02Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "title_is": "gap_packages badly broken",
    "title_was": "Failing gap_packages doctests",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289239"
}
```



---

archive/issue_comments_296497.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@dimpase](#comment:16):\n> these tests work for me.\n\nNot for me.\n\n> Must be patchbot madness...\n\nNo, this is unrelated to the patchbot.",
    "created_at": "2016-05-02T15:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296497",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@dimpase](#comment:16):
> these tests work for me.

Not for me.

> Must be patchbot madness...

No, this is unrelated to the patchbot.



---

archive/issue_comments_296498.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nPlease don't revert the changes I make to the ticket :-)",
    "created_at": "2016-05-02T15:03:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296498",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Please don't revert the changes I make to the ticket :-)



---

archive/issue_comments_296499.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,39 @@\n With Sage 7.2.beta6:\n+\n+```\n+sage: libgap.eval('LoadPackage(\"HAPcryst\")')\n+---------------------------------------------------------------------------\n+ValueError                                Traceback (most recent call last)\n+<ipython-input-1-90cb9d4fcac6> in <module>()\n+----> 1 libgap.eval('LoadPackage(\"HAPcryst\")')\n+\n+/usr/local/src/sage-git/src/sage/libs/gap/libgap.pyx in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4168)()\n+    429         if not isinstance(gap_command, basestring):\n+    430             gap_command = str(gap_command._gap_init_())\n+--> 431         return make_any_gap_element(self, gap_eval(gap_command))\n+    432 \n+    433     @cached_method\n+\n+/usr/local/src/sage-git/src/sage/libs/gap/util.pyx in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4932)()\n+    286             sig_off()\n+    287         except RuntimeError as msg:\n+--> 288             raise ValueError('libGAP: '+str(msg).strip())\n+    289 \n+    290         if libGAP_Symbol != libGAP_S_SEMICOLON:\n+\n+ValueError: libGAP: Error, <opr> is not an operation\n+```\n+\n+A second issue is a mis-installation of guava:\n+\n+```\n+sage: print gap.eval('DirectoriesPackagePrograms(\"guava\")[1]')\n+dir(\"/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/\")\n+```\n+\n+but this directory does not exist!\n+\n+---\n \n ```\n sage -t --long src/sage/tests/gap_packages.py\n``````\n",
    "created_at": "2016-05-02T15:03:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296499",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,39 @@
 With Sage 7.2.beta6:
+
+```
+sage: libgap.eval('LoadPackage("HAPcryst")')
+---------------------------------------------------------------------------
+ValueError                                Traceback (most recent call last)
+<ipython-input-1-90cb9d4fcac6> in <module>()
+----> 1 libgap.eval('LoadPackage("HAPcryst")')
+
+/usr/local/src/sage-git/src/sage/libs/gap/libgap.pyx in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4168)()
+    429         if not isinstance(gap_command, basestring):
+    430             gap_command = str(gap_command._gap_init_())
+--> 431         return make_any_gap_element(self, gap_eval(gap_command))
+    432 
+    433     @cached_method
+
+/usr/local/src/sage-git/src/sage/libs/gap/util.pyx in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4932)()
+    286             sig_off()
+    287         except RuntimeError as msg:
+--> 288             raise ValueError('libGAP: '+str(msg).strip())
+    289 
+    290         if libGAP_Symbol != libGAP_S_SEMICOLON:
+
+ValueError: libGAP: Error, <opr> is not an operation
+```
+
+A second issue is a mis-installation of guava:
+
+```
+sage: print gap.eval('DirectoriesPackagePrograms("guava")[1]')
+dir("/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/")
+```
+
+but this directory does not exist!
+
+---
 
 ```
 sage -t --long src/sage/tests/gap_packages.py
``````




---

archive/issue_comments_296500.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,27 +1,42 @@\n With Sage 7.2.beta6:\n \n ```\n-sage: libgap.eval('LoadPackage(\"HAPcryst\")')\n----------------------------------------------------------------------------\n-ValueError                                Traceback (most recent call last)\n-<ipython-input-1-90cb9d4fcac6> in <module>()\n-----> 1 libgap.eval('LoadPackage(\"HAPcryst\")')\n-\n-/usr/local/src/sage-git/src/sage/libs/gap/libgap.pyx in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4168)()\n-    429         if not isinstance(gap_command, basestring):\n-    430             gap_command = str(gap_command._gap_init_())\n---> 431         return make_any_gap_element(self, gap_eval(gap_command))\n-    432 \n-    433     @cached_method\n-\n-/usr/local/src/sage-git/src/sage/libs/gap/util.pyx in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4932)()\n-    286             sig_off()\n-    287         except RuntimeError as msg:\n---> 288             raise ValueError('libGAP: '+str(msg).strip())\n-    289 \n-    290         if libGAP_Symbol != libGAP_S_SEMICOLON:\n-\n-ValueError: libGAP: Error, <opr> is not an operation\n+$ ./sage --gap\n+gap> LoadPackage(\"HAPcryst\");\n+#I  polymake command not found. Please set POLYMAKE_COMMAND by hand\n+----------------------------------------------------------------\n+Loading  polymaking 0.8.1\n+(A package for using polymake in GAP)\n+by Marc Roeder\n+----------------------------------------------------------------\n+\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n+Loading  Cryst 4.1.12 (Computing with crystallographic groups)\n+by Bettina Eick (http://www.icm.tu-bs.de/~beick/),\n+   Franz G\u00e4hler (http://www.math.uni-bielefeld.de/~gaehler/), and\n+   Werner Nickel (http://www.mathematik.tu-darmstadt.de/~nickel/).\n+Homepage: http://www.math.uni-bielefeld.de/~gaehler/gap45/packages.php\n+\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n+\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n+Loading  CrystCat 1.1.6 (The crystallographic groups catalog)\n+by Volkmar Felsch (http://www.math.rwth-aachen.de/~Volkmar.Felsch/) and\n+   Franz G\u00e4hler (http://www.math.uni-bielefeld.de/~gaehler/).\n+Homepage: http://www.math.uni-bielefeld.de/~gaehler/gap45/packages.php\n+\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n+\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n+Loading  AClib 1.2 (Almost Crystallographic Groups - A Library and Algorithms)\n+by Karel Dekimpe (http://www.kulak.ac.be/~dekimpe) and\n+   Bettina Eick (http://www.icm.tu-bs.de/~beick).\n+Homepage: http://www.icm.tu-bs.de/~beick/so.html\n+\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n+#I  HAP warning: Set POLYMAKE_PATH manually if needed. \n+#I  HAP warning: Set NEATO_PATH manually if needed.\n+#I  HAP warning: Set DISPLAY_PATH manually if needed.\n+Error, <opr> is not an operation called from\n+<compiled or corrupted statement>  called from\n+<function \"local function\">( <arguments> )\n+ called from read-eval loop at line 162 of /usr/local/src/sage-git/local/gap/latest/pkg/Hap1.11/lib/HapCocyclic/gap/ccgroup.gi\n+you can 'quit;' to quit to outer loop, or\n+you can 'return;' to continue\n ```\n \n A second issue is a mis-installation of guava:\n``````\n",
    "created_at": "2016-05-02T15:07:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296500",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,27 +1,42 @@
 With Sage 7.2.beta6:
 
 ```
-sage: libgap.eval('LoadPackage("HAPcryst")')
----------------------------------------------------------------------------
-ValueError                                Traceback (most recent call last)
-<ipython-input-1-90cb9d4fcac6> in <module>()
-----> 1 libgap.eval('LoadPackage("HAPcryst")')
-
-/usr/local/src/sage-git/src/sage/libs/gap/libgap.pyx in sage.libs.gap.libgap.Gap.eval (build/cythonized/sage/libs/gap/libgap.c:4168)()
-    429         if not isinstance(gap_command, basestring):
-    430             gap_command = str(gap_command._gap_init_())
---> 431         return make_any_gap_element(self, gap_eval(gap_command))
-    432 
-    433     @cached_method
-
-/usr/local/src/sage-git/src/sage/libs/gap/util.pyx in sage.libs.gap.util.gap_eval (build/cythonized/sage/libs/gap/util.c:4932)()
-    286             sig_off()
-    287         except RuntimeError as msg:
---> 288             raise ValueError('libGAP: '+str(msg).strip())
-    289 
-    290         if libGAP_Symbol != libGAP_S_SEMICOLON:
-
-ValueError: libGAP: Error, <opr> is not an operation
+$ ./sage --gap
+gap> LoadPackage("HAPcryst");
+#I  polymake command not found. Please set POLYMAKE_COMMAND by hand
+----------------------------------------------------------------
+Loading  polymaking 0.8.1
+(A package for using polymake in GAP)
+by Marc Roeder
+----------------------------------------------------------------
+─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
+Loading  Cryst 4.1.12 (Computing with crystallographic groups)
+by Bettina Eick (http://www.icm.tu-bs.de/~beick/),
+   Franz Gähler (http://www.math.uni-bielefeld.de/~gaehler/), and
+   Werner Nickel (http://www.mathematik.tu-darmstadt.de/~nickel/).
+Homepage: http://www.math.uni-bielefeld.de/~gaehler/gap45/packages.php
+─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
+─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
+Loading  CrystCat 1.1.6 (The crystallographic groups catalog)
+by Volkmar Felsch (http://www.math.rwth-aachen.de/~Volkmar.Felsch/) and
+   Franz Gähler (http://www.math.uni-bielefeld.de/~gaehler/).
+Homepage: http://www.math.uni-bielefeld.de/~gaehler/gap45/packages.php
+─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
+─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
+Loading  AClib 1.2 (Almost Crystallographic Groups - A Library and Algorithms)
+by Karel Dekimpe (http://www.kulak.ac.be/~dekimpe) and
+   Bettina Eick (http://www.icm.tu-bs.de/~beick).
+Homepage: http://www.icm.tu-bs.de/~beick/so.html
+─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
+#I  HAP warning: Set POLYMAKE_PATH manually if needed. 
+#I  HAP warning: Set NEATO_PATH manually if needed.
+#I  HAP warning: Set DISPLAY_PATH manually if needed.
+Error, <opr> is not an operation called from
+<compiled or corrupted statement>  called from
+<function "local function">( <arguments> )
+ called from read-eval loop at line 162 of /usr/local/src/sage-git/local/gap/latest/pkg/Hap1.11/lib/HapCocyclic/gap/ccgroup.gi
+you can 'quit;' to quit to outer loop, or
+you can 'return;' to continue
 ```
 
 A second issue is a mis-installation of guava:
``````




---

archive/issue_comments_296501.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -42,7 +42,7 @@\n A second issue is a mis-installation of guava:\n \n ```\n-sage: print gap.eval('DirectoriesPackagePrograms(\"guava\")[1]')\n+gap> DirectoriesPackagePrograms(\"guava\")[1];\n dir(\"/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/\")\n ```\n \n``````\n",
    "created_at": "2016-05-02T15:08:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296501",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -42,7 +42,7 @@
 A second issue is a mis-installation of guava:
 
 ```
-sage: print gap.eval('DirectoriesPackagePrograms("guava")[1]')
+gap> DirectoriesPackagePrograms("guava")[1];
 dir("/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/")
 ```
 
``````




---

archive/issue_comments_296502.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -46,7 +46,29 @@\n dir(\"/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/\")\n ```\n \n-but this directory does not exist!\n+but this directory does not exist:\n+\n+```\n+$ ls -l /usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13\n+total 168\n+-rw-r--r-- 1 jdemeyer jdemeyer 11775 Mar 19 23:17 CHANGES.guava\n+-rwxr-xr-x 1 jdemeyer jdemeyer  1918 Mar 19 23:17 configure\n+-rw-r--r-- 1 jdemeyer jdemeyer 51189 Mar 19 23:17 COPYING.guava\n+drwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 doc\n+-rw-r--r-- 1 jdemeyer jdemeyer   368 Mar 19 23:17 gapdoc.g\n+-rw-r--r-- 1 jdemeyer jdemeyer  2059 Mar 19 23:17 HISTORY.guava\n+-rw-r--r-- 1 jdemeyer jdemeyer  1364 Mar 19 23:17 init.g\n+drwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 lib\n+-rw-r--r-- 1 jdemeyer jdemeyer 35120 Mar 19 23:17 LICENSE\n+-rw-r--r-- 1 jdemeyer jdemeyer  2858 Mar 19 23:17 Makefile.in\n+-rw-r--r-- 1 jdemeyer jdemeyer 11638 Mar 19 23:17 PackageInfo.g\n+-rw-r--r-- 1 jdemeyer jdemeyer  1420 Mar 19 23:17 read.g\n+-rw-r--r-- 1 jdemeyer jdemeyer  4882 Mar 19 23:17 README.guava\n+-rw-r--r-- 1 jdemeyer jdemeyer    98 Mar 19 23:17 README.md\n+drwxr-xr-x 4 jdemeyer jdemeyer  4096 Mar 30 00:32 src\n+drwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 tbl\n+drwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 tst\n+```\n \n ---\n \n``````\n",
    "created_at": "2016-05-02T15:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296502",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -46,7 +46,29 @@
 dir("/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/")
 ```
 
-but this directory does not exist!
+but this directory does not exist:
+
+```
+$ ls -l /usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13
+total 168
+-rw-r--r-- 1 jdemeyer jdemeyer 11775 Mar 19 23:17 CHANGES.guava
+-rwxr-xr-x 1 jdemeyer jdemeyer  1918 Mar 19 23:17 configure
+-rw-r--r-- 1 jdemeyer jdemeyer 51189 Mar 19 23:17 COPYING.guava
+drwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 doc
+-rw-r--r-- 1 jdemeyer jdemeyer   368 Mar 19 23:17 gapdoc.g
+-rw-r--r-- 1 jdemeyer jdemeyer  2059 Mar 19 23:17 HISTORY.guava
+-rw-r--r-- 1 jdemeyer jdemeyer  1364 Mar 19 23:17 init.g
+drwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 lib
+-rw-r--r-- 1 jdemeyer jdemeyer 35120 Mar 19 23:17 LICENSE
+-rw-r--r-- 1 jdemeyer jdemeyer  2858 Mar 19 23:17 Makefile.in
+-rw-r--r-- 1 jdemeyer jdemeyer 11638 Mar 19 23:17 PackageInfo.g
+-rw-r--r-- 1 jdemeyer jdemeyer  1420 Mar 19 23:17 read.g
+-rw-r--r-- 1 jdemeyer jdemeyer  4882 Mar 19 23:17 README.guava
+-rw-r--r-- 1 jdemeyer jdemeyer    98 Mar 19 23:17 README.md
+drwxr-xr-x 4 jdemeyer jdemeyer  4096 Mar 30 00:32 src
+drwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 tbl
+drwxr-xr-x 2 jdemeyer jdemeyer  4096 Mar 30 00:32 tst
+```
 
 ---
 
``````




---

archive/issue_comments_296503.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -46,7 +46,7 @@\n dir(\"/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/\")\n ```\n \n-but this directory does not exist:\n+but this directory does not exist, `bin` is missing below:\n \n ```\n $ ls -l /usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13\n``````\n",
    "created_at": "2016-05-02T15:09:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296503",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -46,7 +46,7 @@
 dir("/usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13/bin/x86_64-unknown-linux-gnu-gcc-default64/")
 ```
 
-but this directory does not exist:
+but this directory does not exist, `bin` is missing below:
 
 ```
 $ ls -l /usr/local/src/sage-git/local/gap/latest/pkg/guava-3.13
``````




---

archive/issue_comments_296504.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -72,6 +72,8 @@\n \n ---\n \n+This causes doctest failures:\n+\n ```\n sage -t --long src/sage/tests/gap_packages.py\n **********************************************************************\n``````\n",
    "created_at": "2016-05-02T15:09:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296504",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -72,6 +72,8 @@
 
 ---
 
+This causes doctest failures:
+
 ```
 sage -t --long src/sage/tests/gap_packages.py
 **********************************************************************
``````




---

archive/issue_comments_296505.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,6 @@\n-With Sage 7.2.beta6:\n-\n-```\n-$ ./sage --gap\n+With Sage 7.2.beta6, within a `sage --gap` session:\n+\n+```\n gap> LoadPackage(\"HAPcryst\");\n #I  polymake command not found. Please set POLYMAKE_COMMAND by hand\n ----------------------------------------------------------------\n``````\n",
    "created_at": "2016-05-02T15:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296505",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,6 @@
-With Sage 7.2.beta6:
-
-```
-$ ./sage --gap
+With Sage 7.2.beta6, within a `sage --gap` session:
+
+```
 gap> LoadPackage("HAPcryst");
 #I  polymake command not found. Please set POLYMAKE_COMMAND by hand
 ----------------------------------------------------------------
``````




---

archive/issue_comments_296506.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-With Sage 7.2.beta6, within a `sage --gap` session:\n+With Sage 7.2.beta6 with `gap_packages` installed, within a `sage --gap` session:\n \n ```\n gap> LoadPackage(\"HAPcryst\");\n``````\n",
    "created_at": "2016-05-02T15:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296506",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-With Sage 7.2.beta6, within a `sage --gap` session:
+With Sage 7.2.beta6 with `gap_packages` installed, within a `sage --gap` session:
 
 ```
 gap> LoadPackage("HAPcryst");
``````




---

archive/issue_comments_296507.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-With Sage 7.2.beta6 with `gap_packages` installed, within a `sage --gap` session:\n+With Sage 7.2.beta6, within a `sage --gap` session:\n \n ```\n gap> LoadPackage(\"HAPcryst\");\n``````\n",
    "created_at": "2016-05-02T15:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296507",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-With Sage 7.2.beta6 with `gap_packages` installed, within a `sage --gap` session:
+With Sage 7.2.beta6, within a `sage --gap` session:
 
 ```
 gap> LoadPackage("HAPcryst");
``````




---

archive/issue_comments_296508.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nok: `./spkg-install: line 72: cd: /home/scratch/dimpase/sage/sage/local/gap/latest/pkg/guava-3*: No such file or directory`\n\nbut why?! This is expansion of `cd \"$PKG_DIR/guava-3*\"`. And it seems to work:\n\n```\n$ cd /home/scratch/dimpase/sage/sage/local/gap/latest/pkg/guava-3*\nclpc171[/home/scratch/dimpase/sage/sage/local/gap/latest/pkg/guava-3.13]$ \n```",
    "created_at": "2016-05-02T15:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296508",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

ok: `./spkg-install: line 72: cd: /home/scratch/dimpase/sage/sage/local/gap/latest/pkg/guava-3*: No such file or directory`

but why?! This is expansion of `cd "$PKG_DIR/guava-3*"`. And it seems to work:

```
$ cd /home/scratch/dimpase/sage/sage/local/gap/latest/pkg/guava-3*
clpc171[/home/scratch/dimpase/sage/sage/local/gap/latest/pkg/guava-3.13]$ 
```



---

archive/issue_comments_296509.json:
```json
{
    "body": "Commit: **[8860e47](https://github.com/sagemath/sagetrac-mirror/commit/8860e47d4a417760bcceda638e60e6900660b982)**",
    "created_at": "2016-05-02T15:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296509",
    "user": "https://github.com/dimpase"
}
```

Commit: **[8860e47](https://github.com/sagemath/sagetrac-mirror/commit/8860e47d4a417760bcceda638e60e6900660b982)**



---

archive/issue_comments_296510.json:
```json
{
    "body": "Branch: **[public/20525](https://github.com/sagemath/sagetrac-mirror/tree/public/20525)**",
    "created_at": "2016-05-02T15:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296510",
    "user": "https://github.com/dimpase"
}
```

Branch: **[public/20525](https://github.com/sagemath/sagetrac-mirror/tree/public/20525)**



---

archive/issue_comments_296511.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nguava issue fix - see the commit\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8860e47d4a417760bcceda638e60e6900660b982\">8860e47</a></td><td><code>guaba path fix</code></td></tr></table>\n",
    "created_at": "2016-05-02T15:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296511",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">comment:28</div>

guava issue fix - see the commit

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8860e47d4a417760bcceda638e60e6900660b982">8860e47</a></td><td><code>guaba path fix</code></td></tr></table>




---

archive/issue_events_289240.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-02T15:43:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289240"
}
```



---

archive/issue_comments_296512.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI cannot reproduce the HAPcryst thing though. I get \n\n```\n$ sage -t --long src/sage/tests/gap_packages.py\nRunning doctests with ID 2016-05-02-16-39-21-92780109.\nGit branch: gappacs\nUsing --optional=cbc,csdp,database_gap,gap_packages,mpir,python2,sage\nDoctesting 1 file.\nsage -t --long --warn-long 56.7 src/sage/tests/gap_packages.py\n    [10 tests, 3.75 s]\n----------------------------------------------------------------------\nAll tests passed!\n```\nAs I get 10 tests run as opposed to 9 above, I probably have more packages installed...\n\nand \n\n```\n$ sage --gap\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   GAP 4.8.3, 19-Mar-2016, build of 2016-04-06 10:34:11 (BST)\n \u2502  GAP  \u2502   http://www.gap-system.org\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   Architecture: x86_64-unknown-linux-gnu-gcc-default64\n Libs used:  gmp, readline\n Loading the library and packages ...\n Components: trans 1.0, prim 2.1, small* 1.0, id* 1.0\n Packages:   Alnuth 3.0.0, AtlasRep 1.5.0, AutPGrp 1.6, CTblLib 1.2.2, FactInt 1.5.3, GAPDoc 1.5.1, LAGUNA 3.7.0, \n             Polycyclic 2.11, TomLib 1.2.5\n Try '?help' for help. See also  '?copyright' and  '?authors'\ngap> LoadPackage(\"HAPcryst\");\n#I  polymake command not found. Please set POLYMAKE_COMMAND by hand\n----------------------------------------------------------------\nLoading  polymaking 0.8.1\n(A package for using polymake in GAP)\nby Marc Roeder\n----------------------------------------------------------------\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nLoading  Cryst 4.1.12 (Computing with crystallographic groups)\nby Bettina Eick (http://www.icm.tu-bs.de/~beick/),\n   Franz G\u00e4hler (http://www.math.uni-bielefeld.de/~gaehler/), and\n   Werner Nickel (http://www.mathematik.tu-darmstadt.de/~nickel/).\nHomepage: http://www.math.uni-bielefeld.de/~gaehler/gap45/packages.php\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nLoading  CrystCat 1.1.6 (The crystallographic groups catalog)\nby Volkmar Felsch (http://www.math.rwth-aachen.de/~Volkmar.Felsch/) and\n   Franz G\u00e4hler (http://www.math.uni-bielefeld.de/~gaehler/).\nHomepage: http://www.math.uni-bielefeld.de/~gaehler/gap45/packages.php\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nLoading  AClib 1.2 (Almost Crystallographic Groups - A Library and Algorithms)\nby Karel Dekimpe (http://www.kulak.ac.be/~dekimpe) and\n   Bettina Eick (http://www.icm.tu-bs.de/~beick).\nHomepage: http://www.icm.tu-bs.de/~beick/so.html\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n#I  HAP warning: Set POLYMAKE_PATH manually if needed. \n#I  MakeReadOnlyGlobal: GradedAlgebraPresentationType no value bound\nLoading HAP 1.11.13 ...\n----------------------------------------------------------------\nThis is HAPcryst version 0.1.11\nby Marc Roeder\n----------------------------------------------------------------\ntrue\ngap> \n```\nlooks OK to me.",
    "created_at": "2016-05-02T15:43:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296512",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

I cannot reproduce the HAPcryst thing though. I get 

```
$ sage -t --long src/sage/tests/gap_packages.py
Running doctests with ID 2016-05-02-16-39-21-92780109.
Git branch: gappacs
Using --optional=cbc,csdp,database_gap,gap_packages,mpir,python2,sage
Doctesting 1 file.
sage -t --long --warn-long 56.7 src/sage/tests/gap_packages.py
    [10 tests, 3.75 s]
----------------------------------------------------------------------
All tests passed!
```
As I get 10 tests run as opposed to 9 above, I probably have more packages installed...

and 

```
$ sage --gap
 ┌───────┐   GAP 4.8.3, 19-Mar-2016, build of 2016-04-06 10:34:11 (BST)
 │  GAP  │   http://www.gap-system.org
 └───────┘   Architecture: x86_64-unknown-linux-gnu-gcc-default64
 Libs used:  gmp, readline
 Loading the library and packages ...
 Components: trans 1.0, prim 2.1, small* 1.0, id* 1.0
 Packages:   Alnuth 3.0.0, AtlasRep 1.5.0, AutPGrp 1.6, CTblLib 1.2.2, FactInt 1.5.3, GAPDoc 1.5.1, LAGUNA 3.7.0, 
             Polycyclic 2.11, TomLib 1.2.5
 Try '?help' for help. See also  '?copyright' and  '?authors'
gap> LoadPackage("HAPcryst");
#I  polymake command not found. Please set POLYMAKE_COMMAND by hand
----------------------------------------------------------------
Loading  polymaking 0.8.1
(A package for using polymake in GAP)
by Marc Roeder
----------------------------------------------------------------
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Loading  Cryst 4.1.12 (Computing with crystallographic groups)
by Bettina Eick (http://www.icm.tu-bs.de/~beick/),
   Franz Gähler (http://www.math.uni-bielefeld.de/~gaehler/), and
   Werner Nickel (http://www.mathematik.tu-darmstadt.de/~nickel/).
Homepage: http://www.math.uni-bielefeld.de/~gaehler/gap45/packages.php
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Loading  CrystCat 1.1.6 (The crystallographic groups catalog)
by Volkmar Felsch (http://www.math.rwth-aachen.de/~Volkmar.Felsch/) and
   Franz Gähler (http://www.math.uni-bielefeld.de/~gaehler/).
Homepage: http://www.math.uni-bielefeld.de/~gaehler/gap45/packages.php
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Loading  AClib 1.2 (Almost Crystallographic Groups - A Library and Algorithms)
by Karel Dekimpe (http://www.kulak.ac.be/~dekimpe) and
   Bettina Eick (http://www.icm.tu-bs.de/~beick).
Homepage: http://www.icm.tu-bs.de/~beick/so.html
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────
#I  HAP warning: Set POLYMAKE_PATH manually if needed. 
#I  MakeReadOnlyGlobal: GradedAlgebraPresentationType no value bound
Loading HAP 1.11.13 ...
----------------------------------------------------------------
This is HAPcryst version 0.1.11
by Marc Roeder
----------------------------------------------------------------
true
gap> 
```
looks OK to me.



---

archive/issue_comments_296513.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI guess you have polymake working on your computer?",
    "created_at": "2016-05-02T15:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296513",
    "user": "https://github.com/videlec"
}
```

<div id="comment:30" align="right">comment:30</div>

I guess you have polymake working on your computer?



---

archive/issue_events_289241.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T15:55:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289241"
}
```



---

archive/issue_events_289242.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T15:55:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289242"
}
```



---

archive/issue_comments_296514.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nYou need to bump the patchlevel of the `gap_packages` package to ensure the change has effect.",
    "created_at": "2016-05-02T15:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296514",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">comment:31</div>

You need to bump the patchlevel of the `gap_packages` package to ensure the change has effect.



---

archive/issue_comments_296515.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nAlso, you better check the result of that `cd` operation, for example\n\n```\ncd \"$PKG_DIR\"/guava-3* && ./configure \"$GAP_DIR\"\n```",
    "created_at": "2016-05-02T15:57:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296515",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Also, you better check the result of that `cd` operation, for example

```
cd "$PKG_DIR"/guava-3* && ./configure "$GAP_DIR"
```



---

archive/issue_comments_296516.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\n...or use `set -e`.",
    "created_at": "2016-05-02T15:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296516",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

...or use `set -e`.



---

archive/issue_comments_296517.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@videlec](#comment:30):\n> I guess you have polymake working on your computer?\n\nno, I don't have polymake at all.",
    "created_at": "2016-05-02T15:59:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296517",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@videlec](#comment:30):
> I guess you have polymake working on your computer?

no, I don't have polymake at all.



---

archive/issue_comments_296518.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@jdemeyer](#comment:31):\n> You need to bump the patchlevel of the `gap_packages` package to ensure the change has effect.\n\nwhy? the tarball is the same, no removed/added/changed patches. Since when a change to spkg-install does need a version change?!\n\n(this is an optional package, so it won't magically rebuild by bumping anything, no?)",
    "created_at": "2016-05-02T16:01:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296518",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@jdemeyer](#comment:31):
> You need to bump the patchlevel of the `gap_packages` package to ensure the change has effect.

why? the tarball is the same, no removed/added/changed patches. Since when a change to spkg-install does need a version change?!

(this is an optional package, so it won't magically rebuild by bumping anything, no?)



---

archive/issue_comments_296519.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca9607d1f7c8c23404449013317e9bf3bed3686c\">ca9607d</a></td><td><code>check 'cd.. *' success</code></td></tr></table>\n",
    "created_at": "2016-05-02T16:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296519",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca9607d1f7c8c23404449013317e9bf3bed3686c">ca9607d</a></td><td><code>check 'cd.. *' success</code></td></tr></table>




---

archive/issue_comments_296520.json:
```json
{
    "body": "Changed commit from **[8860e47](https://github.com/sagemath/sagetrac-mirror/commit/8860e47d4a417760bcceda638e60e6900660b982)** to **[ca9607d](https://github.com/sagemath/sagetrac-mirror/commit/ca9607d1f7c8c23404449013317e9bf3bed3686c)**",
    "created_at": "2016-05-02T16:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296520",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8860e47](https://github.com/sagemath/sagetrac-mirror/commit/8860e47d4a417760bcceda638e60e6900660b982)** to **[ca9607d](https://github.com/sagemath/sagetrac-mirror/commit/ca9607d1f7c8c23404449013317e9bf3bed3686c)**



---

archive/issue_comments_296521.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@dimpase](#comment:35):\n> Since when a change to spkg-install does need a version change?!\n\nSince you need to fix broken installations of `gap_packages`. People who install `gap_packages` today have a broken version of it. Just changing `spkg-install` doesn't fix that: you need to actually reinstall `gap_packages`.",
    "created_at": "2016-05-02T21:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296521",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@dimpase](#comment:35):
> Since when a change to spkg-install does need a version change?!

Since you need to fix broken installations of `gap_packages`. People who install `gap_packages` today have a broken version of it. Just changing `spkg-install` doesn't fix that: you need to actually reinstall `gap_packages`.



---

archive/issue_comments_296522.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@jdemeyer](#comment:37):\n> Replying to [@dimpase](#comment:35):\n> > Since when a change to spkg-install does need a version change?!\n\n> \n> Since you need to fix broken installations of `gap_packages`. People who install `gap_packages` today have a broken version of it. Just changing `spkg-install` doesn't fix that: you need to actually reinstall `gap_packages`.\n\nyes, but it won't happen without human interaction, would it?",
    "created_at": "2016-05-02T22:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296522",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@jdemeyer](#comment:37):
> Replying to [@dimpase](#comment:35):
> > Since when a change to spkg-install does need a version change?!

> 
> Since you need to fix broken installations of `gap_packages`. People who install `gap_packages` today have a broken version of it. Just changing `spkg-install` doesn't fix that: you need to actually reinstall `gap_packages`.

yes, but it won't happen without human interaction, would it?



---

archive/issue_comments_296523.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@dimpase](#comment:38):\n> yes, but it won't happen without human interaction, would it?\n\nInstalled optional packages are upgraded just like standard packages are. So, running `make` should be sufficient to rebuild `gap_packages` if it was built before.",
    "created_at": "2016-05-03T07:10:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296523",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@dimpase](#comment:38):
> yes, but it won't happen without human interaction, would it?

Installed optional packages are upgraded just like standard packages are. So, running `make` should be sufficient to rebuild `gap_packages` if it was built before.



---

archive/issue_comments_296524.json:
```json
{
    "body": "Changed commit from **[ca9607d](https://github.com/sagemath/sagetrac-mirror/commit/ca9607d1f7c8c23404449013317e9bf3bed3686c)** to **[44d9d61](https://github.com/sagemath/sagetrac-mirror/commit/44d9d6110f41a520dcd2575a9b717452e8d605df)**",
    "created_at": "2016-05-03T08:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296524",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ca9607d](https://github.com/sagemath/sagetrac-mirror/commit/ca9607d1f7c8c23404449013317e9bf3bed3686c)** to **[44d9d61](https://github.com/sagemath/sagetrac-mirror/commit/44d9d6110f41a520dcd2575a9b717452e8d605df)**



---

archive/issue_comments_296525.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44d9d6110f41a520dcd2575a9b717452e8d605df\">44d9d61</a></td><td><code>bump up the version</code></td></tr></table>\n",
    "created_at": "2016-05-03T08:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296525",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44d9d6110f41a520dcd2575a9b717452e8d605df">44d9d61</a></td><td><code>bump up the version</code></td></tr></table>




---

archive/issue_comments_296526.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2016-05-03T08:36:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296526",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_events_289243.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-03T08:36:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289243"
}
```



---

archive/issue_events_289244.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-03T08:36:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289244"
}
```



---

archive/issue_comments_296527.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nOK, done.",
    "created_at": "2016-05-03T08:36:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296527",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:41" align="right">comment:41</div>

OK, done.



---

archive/issue_comments_296528.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThis fixes the second issue, but not the first.",
    "created_at": "2016-05-03T08:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296528",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:42" align="right">comment:42</div>

This fixes the second issue, but not the first.



---

archive/issue_comments_296529.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-With Sage 7.2.beta6, within a `sage --gap` session:\n+With Sage 7.2.beta6 with `gap_packages` installed, within a `sage --gap` session:\n \n ```\n gap> LoadPackage(\"HAPcryst\");\n``````\n",
    "created_at": "2016-05-03T08:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296529",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-With Sage 7.2.beta6, within a `sage --gap` session:
+With Sage 7.2.beta6 with `gap_packages` installed, within a `sage --gap` session:
 
 ```
 gap> LoadPackage("HAPcryst");
``````




---

archive/issue_comments_296530.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nthe first issue is not trivial to reproduce. I managed to do so on OSX, and on UGent's sage4. (But all of that works on my laptop and on my desktop). This has to do with selective GAP packages loading, and is an upstream<sup>2</sup> bug, as far as I can see. (A bug in a GAP package, that is).",
    "created_at": "2016-05-03T09:50:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296530",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:43" align="right">comment:43</div>

the first issue is not trivial to reproduce. I managed to do so on OSX, and on UGent's sage4. (But all of that works on my laptop and on my desktop). This has to do with selective GAP packages loading, and is an upstream<sup>2</sup> bug, as far as I can see. (A bug in a GAP package, that is).



---

archive/issue_comments_296531.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nOK, I see. If database_gap is installed then the error does not occur\n(it's because it needs `SmallGroup` functionality, specifically, the error comes from `IdGroup` being of wrong type, a function, not an attribute). Looks like a missing dependence in Hap.\nI will make database_gap a dependency of gap_packages.",
    "created_at": "2016-05-03T10:26:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296531",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44" align="right">comment:44</div>

OK, I see. If database_gap is installed then the error does not occur
(it's because it needs `SmallGroup` functionality, specifically, the error comes from `IdGroup` being of wrong type, a function, not an attribute). Looks like a missing dependence in Hap.
I will make database_gap a dependency of gap_packages.



---

archive/issue_comments_296532.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a7af2ae235b8c37c259c5792e3aa57ef1d3549a\">4a7af2a</a></td><td><code>Hap needs IdGroup being an attribute</code></td></tr></table>\n",
    "created_at": "2016-05-03T10:32:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296532",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a7af2ae235b8c37c259c5792e3aa57ef1d3549a">4a7af2a</a></td><td><code>Hap needs IdGroup being an attribute</code></td></tr></table>




---

archive/issue_comments_296533.json:
```json
{
    "body": "Changed commit from **[44d9d61](https://github.com/sagemath/sagetrac-mirror/commit/44d9d6110f41a520dcd2575a9b717452e8d605df)** to **[4a7af2a](https://github.com/sagemath/sagetrac-mirror/commit/4a7af2ae235b8c37c259c5792e3aa57ef1d3549a)**",
    "created_at": "2016-05-03T10:32:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296533",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[44d9d61](https://github.com/sagemath/sagetrac-mirror/commit/44d9d6110f41a520dcd2575a9b717452e8d605df)** to **[4a7af2a](https://github.com/sagemath/sagetrac-mirror/commit/4a7af2ae235b8c37c259c5792e3aa57ef1d3549a)**



---

archive/issue_comments_296534.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nAll works now.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a7af2ae235b8c37c259c5792e3aa57ef1d3549a\">4a7af2a</a></td><td><code>Hap needs IdGroup being an attribute</code></td></tr></table>\n",
    "created_at": "2016-05-03T10:38:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296534",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:46" align="right">comment:46</div>

All works now.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a7af2ae235b8c37c259c5792e3aa57ef1d3549a">4a7af2a</a></td><td><code>Hap needs IdGroup being an attribute</code></td></tr></table>




---

archive/issue_comments_296535.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nShouldn't this be an order-only dependency `| database_gap`?",
    "created_at": "2016-05-03T11:14:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296535",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">comment:47</div>

Shouldn't this be an order-only dependency `| database_gap`?



---

archive/issue_events_289245.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-03T11:14:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289245"
}
```



---

archive/issue_events_289246.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-03T11:14:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289246"
}
```



---

archive/issue_comments_296536.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI don't understand what this is, an order-only dependency...",
    "created_at": "2016-05-03T11:19:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296536",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

I don't understand what this is, an order-only dependency...



---

archive/issue_comments_296537.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nSee http://doc.sagemath.org/html/en/developer/packaging.html#package-dependencies or https://www.gnu.org/software/make/manual/html_node/Prerequisite-Types.html",
    "created_at": "2016-05-03T11:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296537",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:49" align="right">comment:49</div>

See http://doc.sagemath.org/html/en/developer/packaging.html#package-dependencies or https://www.gnu.org/software/make/manual/html_node/Prerequisite-Types.html



---

archive/issue_events_289247.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-03T13:01:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289247"
}
```



---

archive/issue_events_289248.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-03T13:01:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289248"
}
```



---

archive/issue_comments_296538.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@jdemeyer](#comment:47):\n> Shouldn't this be an order-only dependency `| database_gap`?\n\nI don't think one wants a stale buggy  version of database_gap lying around, just because it is an order-only dependence.\nOn a practical side of things, database_gap is updated infrequently, so one would potentially pay very little in efficiency by having it as a normal dependency.",
    "created_at": "2016-05-03T13:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296538",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@jdemeyer](#comment:47):
> Shouldn't this be an order-only dependency `| database_gap`?

I don't think one wants a stale buggy  version of database_gap lying around, just because it is an order-only dependence.
On a practical side of things, database_gap is updated infrequently, so one would potentially pay very little in efficiency by having it as a normal dependency.



---

archive/issue_comments_296539.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@dimpase](#comment:50):\n> database_gap is updated infrequently, so one would potentially pay very little in efficiency by having it as a normal dependency. \n\nOne would pay *even less* by having it an order-only dependency. You could add a dependency of `gap_packages` on `zn_poly` and argue that it doesn't hurt because `zn_poly` is not updated often. But that's besides the point: I just want the dependencies to correctly reflect reality.",
    "created_at": "2016-05-03T13:06:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296539",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@dimpase](#comment:50):
> database_gap is updated infrequently, so one would potentially pay very little in efficiency by having it as a normal dependency. 

One would pay *even less* by having it an order-only dependency. You could add a dependency of `gap_packages` on `zn_poly` and argue that it doesn't hurt because `zn_poly` is not updated often. But that's besides the point: I just want the dependencies to correctly reflect reality.



---

archive/issue_events_289249.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-03T13:06:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289249"
}
```



---

archive/issue_events_289250.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-03T13:06:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289250"
}
```



---

archive/issue_comments_296540.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nSpeaking of dependencies: you should also consider whether `gap_packages` depends on `gap` (I don't know if it does?)",
    "created_at": "2016-05-03T13:08:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296540",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:52" align="right">comment:52</div>

Speaking of dependencies: you should also consider whether `gap_packages` depends on `gap` (I don't know if it does?)



---

archive/issue_comments_296541.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@jdemeyer](#comment:52):\n> Speaking of dependencies: you should also consider whether `gap_packages` depends on `gap` (I don't know if it does?)\n\nthat's right, gap (and libgap) are dependencies, too. I will add them.",
    "created_at": "2016-05-03T13:14:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296541",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@jdemeyer](#comment:52):
> Speaking of dependencies: you should also consider whether `gap_packages` depends on `gap` (I don't know if it does?)

that's right, gap (and libgap) are dependencies, too. I will add them.



---

archive/issue_comments_296542.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@jdemeyer](#comment:51):\n> Replying to [@dimpase](#comment:50):\n> > database_gap is updated infrequently, so one would potentially pay very little in efficiency by having it as a normal dependency. \n\n> \n> One would pay *even less* by having it an order-only dependency. You could add a dependency of `gap_packages` on `zn_poly` and argue that it doesn't hurt because `zn_poly` is not updated often. But that's besides the point: I just want the dependencies to correctly reflect reality.\n\nThe reality is that if database_gap has a bug, then an output of gap_packages might be wrong. A new release of gap_packages might silently need an newer database_gap, too. \n\nOrder-only dependencies are invented to deal with completely different scenarios, IMHO.",
    "created_at": "2016-05-03T13:18:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296542",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@jdemeyer](#comment:51):
> Replying to [@dimpase](#comment:50):
> > database_gap is updated infrequently, so one would potentially pay very little in efficiency by having it as a normal dependency. 

> 
> One would pay *even less* by having it an order-only dependency. You could add a dependency of `gap_packages` on `zn_poly` and argue that it doesn't hurt because `zn_poly` is not updated often. But that's besides the point: I just want the dependencies to correctly reflect reality.

The reality is that if database_gap has a bug, then an output of gap_packages might be wrong. A new release of gap_packages might silently need an newer database_gap, too. 

Order-only dependencies are invented to deal with completely different scenarios, IMHO.



---

archive/issue_comments_296543.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0363f2fe1ed8a33a9066fb89c0e608e3d0c11c2\">f0363f2</a></td><td><code>more deps added</code></td></tr></table>\n",
    "created_at": "2016-05-03T13:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296543",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0363f2fe1ed8a33a9066fb89c0e608e3d0c11c2">f0363f2</a></td><td><code>more deps added</code></td></tr></table>




---

archive/issue_comments_296544.json:
```json
{
    "body": "Changed commit from **[4a7af2a](https://github.com/sagemath/sagetrac-mirror/commit/4a7af2ae235b8c37c259c5792e3aa57ef1d3549a)** to **[f0363f2](https://github.com/sagemath/sagetrac-mirror/commit/f0363f2fe1ed8a33a9066fb89c0e608e3d0c11c2)**",
    "created_at": "2016-05-03T13:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296544",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4a7af2a](https://github.com/sagemath/sagetrac-mirror/commit/4a7af2ae235b8c37c259c5792e3aa57ef1d3549a)** to **[f0363f2](https://github.com/sagemath/sagetrac-mirror/commit/f0363f2fe1ed8a33a9066fb89c0e608e3d0c11c2)**



---

archive/issue_events_289251.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-03T13:30:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289251"
}
```



---

archive/issue_events_289252.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-03T13:30:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289252"
}
```



---

archive/issue_comments_296545.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@dimpase](#comment:54):\n> A new release of gap_packages might silently need an newer database_gap, too.\n\nSage always installs the latest version of installed standard and optional packages, so `database_gap` will always be up-to-date. That's not something which affects the dependencies of `gap_packages`.",
    "created_at": "2016-05-03T13:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296545",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@dimpase](#comment:54):
> A new release of gap_packages might silently need an newer database_gap, too.

Sage always installs the latest version of installed standard and optional packages, so `database_gap` will always be up-to-date. That's not something which affects the dependencies of `gap_packages`.



---

archive/issue_events_289253.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-03T13:30:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289253"
}
```



---

archive/issue_events_289254.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-03T13:30:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289254"
}
```



---

archive/issue_comments_296546.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nThe question you need to answer is a different one: if `database_gap` is reinstalled (either because of an upgrade of `database_gap` of because somebody did `sage -f database_gap`), should this force a reinstallation of `gap_packages`?\n\nIf the answer is \"yes\": use a normal dependency\n\nIf the answer is \"no\": use an order-only dependency",
    "created_at": "2016-05-03T13:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296546",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:58" align="right">comment:58</div>

The question you need to answer is a different one: if `database_gap` is reinstalled (either because of an upgrade of `database_gap` of because somebody did `sage -f database_gap`), should this force a reinstallation of `gap_packages`?

If the answer is "yes": use a normal dependency

If the answer is "no": use an order-only dependency



---

archive/issue_comments_296547.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nI read the doc you provided, and it said something else:\n\n*If package A has an order-only dependency on B, it simply means that B must be built before A can be built. The version of B does not matter, only the fact that B is installed matters. This should be used if the dependency is purely a build-time dependency (for example, a dependency on Python simply because the spkg-install file is written in Python).*\n\nAgainst this background, the answer is that B is a runtime dependency, not a build-time dependency, and thus it should not be order-only.",
    "created_at": "2016-05-03T13:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296547",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:59" align="right">comment:59</div>

I read the doc you provided, and it said something else:

*If package A has an order-only dependency on B, it simply means that B must be built before A can be built. The version of B does not matter, only the fact that B is installed matters. This should be used if the dependency is purely a build-time dependency (for example, a dependency on Python simply because the spkg-install file is written in Python).*

Against this background, the answer is that B is a runtime dependency, not a build-time dependency, and thus it should not be order-only.



---

archive/issue_comments_296548.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@dimpase](#comment:59):\n> This should be used **if** the dependency is purely a build-time dependency\n\nThat is an **if**, not **if and only if**.\n\nIt's not because it's not a build-time dependency, that it should not be an order-only dependency.",
    "created_at": "2016-05-03T14:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296548",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@dimpase](#comment:59):
> This should be used **if** the dependency is purely a build-time dependency

That is an **if**, not **if and only if**.

It's not because it's not a build-time dependency, that it should not be an order-only dependency.



---

archive/issue_comments_296549.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nI do not know all the details to be sure that an order-only dependency is OK. Probably yes, but not 100% certainly.\n\nAlso, regarding the upstream opinion on whether it is a bug, see https://github.com/gap-system/gap/issues/775\nThey think that non-GPL'd libs in database_gap are parts of \"GAP core system\", whatever they mean.",
    "created_at": "2016-05-03T14:14:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296549",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:61" align="right">comment:61</div>

I do not know all the details to be sure that an order-only dependency is OK. Probably yes, but not 100% certainly.

Also, regarding the upstream opinion on whether it is a bug, see https://github.com/gap-system/gap/issues/775
They think that non-GPL'd libs in database_gap are parts of "GAP core system", whatever they mean.



---

archive/issue_comments_296550.json:
```json
{
    "body": "Upstream: **Reported upstream. Developers deny it's a bug.**",
    "created_at": "2016-05-03T14:14:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296550",
    "user": "https://github.com/dimpase"
}
```

Upstream: **Reported upstream. Developers deny it's a bug.**



---

archive/issue_events_289255.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-03T19:37:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289255"
}
```



---

archive/issue_events_289256.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-03T19:37:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289256"
}
```



---

archive/issue_comments_296551.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nI think it is time for me to crash the party. First I notice that you made `gap_packages` and `database_gap` depend on `libgap`. Only `gap` is needed.\n\nI think it is time for me to point out that `grape` includes an old version of `nauty` and can use either `nauty` (now a standard package) or `bliss` (now an optional package). Look at `GRAPE_DREADNAUT_EXE` in `grape/lib/grape.g` (and the variable `GRAPE_NAUTY` and `GRAPE_BLISS_EXE` in the same file if you are curious).\nI recommend removal of the `configure` and other makefiles in `spkg-src`. The only point of that bit in the `grape` package is to build the `dreadnaut` executable from `nauty`.\n\nI am OK if you want to spin that as a separate ticket.",
    "created_at": "2016-05-03T22:04:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296551",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:63" align="right">comment:63</div>

I think it is time for me to crash the party. First I notice that you made `gap_packages` and `database_gap` depend on `libgap`. Only `gap` is needed.

I think it is time for me to point out that `grape` includes an old version of `nauty` and can use either `nauty` (now a standard package) or `bliss` (now an optional package). Look at `GRAPE_DREADNAUT_EXE` in `grape/lib/grape.g` (and the variable `GRAPE_NAUTY` and `GRAPE_BLISS_EXE` in the same file if you are curious).
I recommend removal of the `configure` and other makefiles in `spkg-src`. The only point of that bit in the `grape` package is to build the `dreadnaut` executable from `nauty`.

I am OK if you want to spin that as a separate ticket.



---

archive/issue_comments_296552.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@kiwifb](#comment:63):\n> I think it is time for me to crash the party. First I notice that you made `gap_packages` and `database_gap` depend on `libgap`. Only `gap` is needed.\n\nAs soon as we start supporting building GAP kernel extensions in libgap, things \nwill change, and libgap will be a real dependence. At the moment, as gap and libgap are updated in lockstep, it does not matter anyway.\n\n> \n> I think it is time for me to point out that `grape` includes an old version of `nauty` and can use either `nauty` (now a standard package) or `bliss` (now an optional package). Look at `GRAPE_DREADNAUT_EXE` in `grape/lib/grape.g` (and the variable `GRAPE_NAUTY` and `GRAPE_BLISS_EXE` in the same file if you are curious).\n> I recommend removal of the `configure` and other makefiles in `spkg-src`. The only point of that bit in the `grape` package is to build the `dreadnaut` executable from `nauty`.\n> \n> I am OK if you want to spin that as a separate ticket.\n\nI don't see why you want to override GRAPE's author on this. He told be that he keeps old nauty as he did not do a lot of tests with the new one, yet.",
    "created_at": "2016-05-04T08:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296552",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@kiwifb](#comment:63):
> I think it is time for me to crash the party. First I notice that you made `gap_packages` and `database_gap` depend on `libgap`. Only `gap` is needed.

As soon as we start supporting building GAP kernel extensions in libgap, things 
will change, and libgap will be a real dependence. At the moment, as gap and libgap are updated in lockstep, it does not matter anyway.

> 
> I think it is time for me to point out that `grape` includes an old version of `nauty` and can use either `nauty` (now a standard package) or `bliss` (now an optional package). Look at `GRAPE_DREADNAUT_EXE` in `grape/lib/grape.g` (and the variable `GRAPE_NAUTY` and `GRAPE_BLISS_EXE` in the same file if you are curious).
> I recommend removal of the `configure` and other makefiles in `spkg-src`. The only point of that bit in the `grape` package is to build the `dreadnaut` executable from `nauty`.
> 
> I am OK if you want to spin that as a separate ticket.

I don't see why you want to override GRAPE's author on this. He told be that he keeps old nauty as he did not do a lot of tests with the new one, yet.



---

archive/issue_comments_296553.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\n> I do not know all the details to be sure that an order-only dependency is OK. Probably yes, but not 100% certainly.\n\nIt has always been an order-only dependency (the default dependencies of optional packages is an order-only dependency on every standard package), so I guess it's safe.\n\n> As soon as we start supporting building GAP kernel extensions in libgap, things \n> will change\n\nThen the dependencies of `database_gap` and `gap_packages` should be changed in that ticket. I don't see the point of adding dependencies just in case they will be needed in the future. It reminds me of somebody adding `webassets` to `sagenb` because they planned to use it in the future... which of course never happened.",
    "created_at": "2016-05-04T09:04:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296553",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">comment:65</div>

> I do not know all the details to be sure that an order-only dependency is OK. Probably yes, but not 100% certainly.

It has always been an order-only dependency (the default dependencies of optional packages is an order-only dependency on every standard package), so I guess it's safe.

> As soon as we start supporting building GAP kernel extensions in libgap, things 
> will change

Then the dependencies of `database_gap` and `gap_packages` should be changed in that ticket. I don't see the point of adding dependencies just in case they will be needed in the future. It reminds me of somebody adding `webassets` to `sagenb` because they planned to use it in the future... which of course never happened.



---

archive/issue_events_289257.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-04T09:04:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289257"
}
```



---

archive/issue_events_289258.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-04T09:04:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289258"
}
```



---

archive/issue_comments_296554.json:
```json
{
    "body": "Changed commit from **[f0363f2](https://github.com/sagemath/sagetrac-mirror/commit/f0363f2fe1ed8a33a9066fb89c0e608e3d0c11c2)** to **[9afe2c3](https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731)**",
    "created_at": "2016-05-04T09:29:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296554",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f0363f2](https://github.com/sagemath/sagetrac-mirror/commit/f0363f2fe1ed8a33a9066fb89c0e608e3d0c11c2)** to **[9afe2c3](https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731)**



---

archive/issue_comments_296555.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731\">9afe2c3</a></td><td><code>more deps added</code></td></tr></table>\n",
    "created_at": "2016-05-04T09:29:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296555",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731">9afe2c3</a></td><td><code>more deps added</code></td></tr></table>




---

archive/issue_comments_296556.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@jdemeyer](#comment:65):\n> > I do not know all the details to be sure that an order-only dependency is OK. Probably yes, but not 100% certainly.\n\n> \n> It has always been an order-only dependency (the default dependencies of optional packages is an order-only dependency on every standard package), so I guess it's safe.\n\nwe talk about dependency of one optional package on another.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731\">9afe2c3</a></td><td><code>more deps added</code></td></tr></table>\n",
    "created_at": "2016-05-04T09:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296556",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@jdemeyer](#comment:65):
> > I do not know all the details to be sure that an order-only dependency is OK. Probably yes, but not 100% certainly.

> 
> It has always been an order-only dependency (the default dependencies of optional packages is an order-only dependency on every standard package), so I guess it's safe.

we talk about dependency of one optional package on another.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731">9afe2c3</a></td><td><code>more deps added</code></td></tr></table>




---

archive/issue_comments_296557.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Developers deny it's a bug.** to none",
    "created_at": "2016-05-04T09:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296557",
    "user": "https://github.com/dimpase"
}
```

Changed upstream from **Reported upstream. Developers deny it's a bug.** to none



---

archive/issue_events_289259.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-04T09:32:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289259"
}
```



---

archive/issue_events_289260.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-05-04T09:32:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289260"
}
```



---

archive/issue_comments_296558.json:
```json
{
    "body": "<div id=\"comment:68\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731\">9afe2c3</a></td><td><code>more deps added</code></td></tr></table>\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731\">9afe2c3</a></td><td><code>more deps added</code></td></tr></table>\n",
    "created_at": "2016-05-04T09:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296558",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:68"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731">9afe2c3</a></td><td><code>more deps added</code></td></tr></table>

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731">9afe2c3</a></td><td><code>more deps added</code></td></tr></table>




---

archive/issue_comments_296559.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\ngap, libgap, gap_packages, and database_gap are tightly interconnected packages, usually updated all together, and I don't see much harm in declaring them to be a bit more interdependent than might be strictly necessary. Especially in absence of clear, and not open to grammatical (mis)interpretations, guidelines on dependencies in Sage.",
    "created_at": "2016-05-04T10:02:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296559",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:69" align="right">comment:69</div>

gap, libgap, gap_packages, and database_gap are tightly interconnected packages, usually updated all together, and I don't see much harm in declaring them to be a bit more interdependent than might be strictly necessary. Especially in absence of clear, and not open to grammatical (mis)interpretations, guidelines on dependencies in Sage.



---

archive/issue_events_289261.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-05T07:52:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289261"
}
```



---

archive/issue_events_289262.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-05T07:52:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289262"
}
```



---

archive/issue_comments_296560.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2016-05-05T07:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296560",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_296561.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nI still think that the current branch is wrong, but let's stop the bikeshedding...",
    "created_at": "2016-05-05T07:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296561",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:70" align="right">comment:70</div>

I still think that the current branch is wrong, but let's stop the bikeshedding...



---

archive/issue_comments_296562.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nI think there are files there that do not need that import from future at all. I don't know whether this import makes it python3-incompatible.",
    "created_at": "2016-05-05T07:59:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296562",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:71" align="right">comment:71</div>

I think there are files there that do not need that import from future at all. I don't know whether this import makes it python3-incompatible.



---

archive/issue_comments_296563.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@dimpase](#comment:71):\n> I think there are files there that do not need that import from future at all. I don't know whether this import makes it python3-incompatible.\n\nI suppose this comment was meant for a different ticket?",
    "created_at": "2016-05-05T08:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296563",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@dimpase](#comment:71):
> I think there are files there that do not need that import from future at all. I don't know whether this import makes it python3-incompatible.

I suppose this comment was meant for a different ticket?



---

archive/issue_comments_296564.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@jdemeyer](#comment:72):\n> Replying to [@dimpase](#comment:71):\n> > I think there are files there that do not need that import from future at all. I don't know whether this import makes it python3-incompatible.\n\n> \n> I suppose this comment was meant for a different ticket?\n\noops, indeed, sorry...",
    "created_at": "2016-05-05T08:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296564",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@jdemeyer](#comment:72):
> Replying to [@dimpase](#comment:71):
> > I think there are files there that do not need that import from future at all. I don't know whether this import makes it python3-incompatible.

> 
> I suppose this comment was meant for a different ticket?

oops, indeed, sorry...



---

archive/issue_comments_296565.json:
```json
{
    "body": "Changed branch from **[public/20525](https://github.com/sagemath/sagetrac-mirror/tree/public/20525)** to **[9afe2c3](https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731)**",
    "created_at": "2016-05-06T22:10:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20525#issuecomment-296565",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/20525](https://github.com/sagemath/sagetrac-mirror/tree/public/20525)** to **[9afe2c3](https://github.com/sagemath/sagetrac-mirror/commit/9afe2c3e4b7ebd82729d21439d684dbc0fdc5731)**



---

archive/issue_events_289263.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-06T22:10:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289263"
}
```



---

archive/issue_events_289264.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e08e5849cba03076bbd02ca9071a8ea0f1baa9a3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-05-06T22:10:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20525",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20525#event-289264"
}
```
