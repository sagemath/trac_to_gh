# Issue 20629: some absolute imports in the rings folder

archive/issues_020392.json:
```json
{
    "body": "convert some of the files in the rings folder to absolute import.\n\na small step towards py3\n\nThis involved untangling (partly) the import-hell in the rings folder.\n\nCC:  @jdemeyer @embray @tscrim\n\nKeywords: days74\n\nReviewer: Jeroen Demeyer, Travis Scrimshaw\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nBranch: 5be6969acc605b0149c8770361eb52bbfbf62a93\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20629\n\n",
    "closed_at": "2016-06-26T07:30:39Z",
    "created_at": "2016-05-19T13:08:46Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "some absolute imports in the rings folder",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20629",
    "user": "https://github.com/fchapoton"
}
```
convert some of the files in the rings folder to absolute import.

a small step towards py3

This involved untangling (partly) the import-hell in the rings folder.

CC:  @jdemeyer @embray @tscrim

Keywords: days74

Reviewer: Jeroen Demeyer, Travis Scrimshaw

Author: Frédéric Chapoton

Branch: 5be6969acc605b0149c8770361eb52bbfbf62a93

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20629





---

archive/issue_comments_299136.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2016-05-19T13:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299136",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_299137.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-05-19T13:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299137",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_299138.json:
```json
{
    "body": "<a id='comment:2'></a>Do we really need this in `src/sage/rings/asymptotic/__init__.py` and `src/sage/rings/semirings/__init__.py`, why aren't these files just empty?\n\n```\nfrom __future__ import absolute_import\n\nfrom . import all\n```",
    "created_at": "2016-05-19T13:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299138",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>Do we really need this in `src/sage/rings/asymptotic/__init__.py` and `src/sage/rings/semirings/__init__.py`, why aren't these files just empty?

```
from __future__ import absolute_import

from . import all
```



---

archive/issue_comments_299139.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-19T13:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299139",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299140.json:
```json
{
    "body": "<a id='comment:4'></a>Style issue: better use\n\n```\nfrom .padic_base_leaves import (pAdicRingCappedRelative,\n        pAdicRingCappedAbsolute, pAdicRingFixedMod,\n        pAdicFieldCappedRelative)\n```\ninstead of\n\n```\nfrom .padic_base_leaves import pAdicRingCappedRelative, \\\n                               pAdicRingCappedAbsolute, \\\n                               pAdicRingFixedMod, \\\n                               pAdicFieldCappedRelative\n```",
    "created_at": "2016-05-19T13:29:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299140",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>Style issue: better use

```
from .padic_base_leaves import (pAdicRingCappedRelative,
        pAdicRingCappedAbsolute, pAdicRingFixedMod,
        pAdicFieldCappedRelative)
```
instead of

```
from .padic_base_leaves import pAdicRingCappedRelative, \
                               pAdicRingCappedAbsolute, \
                               pAdicRingFixedMod, \
                               pAdicFieldCappedRelative
```



---

archive/issue_comments_299141.json:
```json
{
    "body": "<a id='comment:5'></a>Question: why do you only consider Python (`.py`) files and not Cython (`.pyx`)? I'm NOT saying that you should do this in this ticket, just asking why...",
    "created_at": "2016-05-19T13:31:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299141",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>Question: why do you only consider Python (`.py`) files and not Cython (`.pyx`)? I'm NOT saying that you should do this in this ticket, just asking why...



---

archive/issue_comments_299142.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-19T13:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299142",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299143.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:5 jdemeyer]:\n> Question: why do you only consider Python (`.py`) files and not Cython (`.pyx`)? I'm NOT saying that you should do this in this ticket, just asking why...\n\n\noh, I just made a grep restricted to py files. Anyway, this is only a very partial change.",
    "created_at": "2016-05-19T13:32:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299143",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>Replying to [comment:5 jdemeyer]:
> Question: why do you only consider Python (`.py`) files and not Cython (`.pyx`)? I'm NOT saying that you should do this in this ticket, just asking why...


oh, I just made a grep restricted to py files. Anyway, this is only a very partial change.



---

archive/issue_comments_299144.json:
```json
{
    "body": "<a id='comment:8'></a>positive_review if this passes buildbot testing",
    "created_at": "2016-05-19T13:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299144",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>positive_review if this passes buildbot testing



---

archive/issue_comments_299145.json:
```json
{
    "body": "<a id='comment:9'></a>Hum, it seems that there is a problem with the **correct** python3 syntax\n\n```\nfrom . import rational\n```\nwhen the module `rational` is a cython module.\n\nIs there some cython expert in the neighborhood ?",
    "created_at": "2016-05-19T17:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299145",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>Hum, it seems that there is a problem with the **correct** python3 syntax

```
from . import rational
```
when the module `rational` is a cython module.

Is there some cython expert in the neighborhood ?



---

archive/issue_comments_299146.json:
```json
{
    "body": "<a id='comment:10'></a>I don't know if it's really a Cython problem.",
    "created_at": "2016-05-19T18:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299146",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>I don't know if it's really a Cython problem.



---

archive/issue_comments_299147.json:
```json
{
    "body": "<a id='comment:11'></a>maybe a circular dependency ?",
    "created_at": "2016-05-19T18:39:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299147",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>maybe a circular dependency ?



---

archive/issue_comments_299148.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-05-20T15:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299148",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_299149.json:
```json
{
    "body": "<a id='comment:12'></a>It seems that this involves some kind of circular import hell.",
    "created_at": "2016-05-20T15:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299149",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'></a>It seems that this involves some kind of circular import hell.



---

archive/issue_comments_299150.json:
```json
{
    "body": "<a id='comment:13'></a>Probably, although it's not clear why something would fail as relative import but not as normal import...",
    "created_at": "2016-05-20T16:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299150",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Probably, although it's not clear why something would fail as relative import but not as normal import...



---

archive/issue_comments_299151.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-24T18:35:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299151",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299152.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-24T19:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299152",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299153.json:
```json
{
    "body": "<a id='comment:16'></a>After a long battling against the import hell in the rings folder, I think I have now a working branch.\n\nReview, please !",
    "created_at": "2016-05-24T19:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299153",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>After a long battling against the import hell in the rings folder, I think I have now a working branch.

Review, please !



---

archive/issue_comments_299154.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-05-24T19:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299154",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_299155.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-25T06:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299155",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299156.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-25T09:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299156",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299157.json:
```json
{
    "body": "<a id='comment:19'></a>ok, let me put this in `needs_works`, as there is still some failing doctests. This is a tricky ticket.",
    "created_at": "2016-05-25T10:03:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299157",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:19'></a>ok, let me put this in `needs_works`, as there is still some failing doctests. This is a tricky ticket.



---

archive/issue_comments_299158.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-05-25T10:03:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299158",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_299159.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-25T13:53:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299159",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299160.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-25T18:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299160",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299161.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n convert some of the files in the rings folder to absolute import.\n \n a small step towards py3\n+\n+This involved untangling (partly) the import-hell in the rings folder.\n \n Author: Fr\u00e9d\u00e9ric Chapoton\n \n```\n",
    "created_at": "2016-05-26T06:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299161",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,8 @@
 convert some of the files in the rings folder to absolute import.
 
 a small step towards py3
+
+This involved untangling (partly) the import-hell in the rings folder.
 
 Author: Frédéric Chapoton
 
```




---

archive/issue_comments_299162.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-05-26T06:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299162",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_299163.json:
```json
{
    "body": "<a id='comment:22'></a>hurray ! bot is green ! Please review",
    "created_at": "2016-05-26T06:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299163",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'></a>hurray ! bot is green ! Please review



---

archive/issue_comments_299164.json:
```json
{
    "body": "<a id='comment:23'></a>One of the reasons why you might have started to see the import hell is that you imported a few things directly from the modules, rather than importing the entire module. In order to do the former, Python needs to evaluate the module at the moment you call the `from foo import bar`, whereas the latter is done when first calling `foo.bar` (not at `import foo`). This is why the \"Pythonic\" way is to `import foo` and then do `foo.bar`, but IMO, it just means we have to do more reading and/or work for maintenance.",
    "created_at": "2016-05-26T06:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299164",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>One of the reasons why you might have started to see the import hell is that you imported a few things directly from the modules, rather than importing the entire module. In order to do the former, Python needs to evaluate the module at the moment you call the `from foo import bar`, whereas the latter is done when first calling `foo.bar` (not at `import foo`). This is why the "Pythonic" way is to `import foo` and then do `foo.bar`, but IMO, it just means we have to do more reading and/or work for maintenance.



---

archive/issue_comments_299165.json:
```json
{
    "body": "<a id='comment:24'></a>Hmm, not sure I understand your conclusion. Did I do something \"wrong\" ? Should we try to use `import foo` as much as possible, or the contrary ?\n\nI just started wanting to convert to python3-compatible imports, and then had to resolve\na whole lot of circular imports. I did that by moving some imports inside functions, instead\nof being on top of the files.",
    "created_at": "2016-05-26T06:33:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299165",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>Hmm, not sure I understand your conclusion. Did I do something "wrong" ? Should we try to use `import foo` as much as possible, or the contrary ?

I just started wanting to convert to python3-compatible imports, and then had to resolve
a whole lot of circular imports. I did that by moving some imports inside functions, instead
of being on top of the files.



---

archive/issue_comments_299166.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 chapoton]:\n> Hmm, not sure I understand your conclusion. Did I do something \"wrong\" ? Should we try to use `import foo` as much as possible, or the contrary ?\n\n\nWell...there's my diagnosis of what might have caused the problem, and the \"pythonic\" treatment. However, I disagree with it being the best way to fix things.\n\n> I just started wanting to convert to python3-compatible imports, and then had to resolve\n> a whole lot of circular imports. I did that by moving some imports inside functions, instead\n> of being on top of the files.\n\n\nI think you did the right thing. Moreover, this is in agreement with what we normally do in Sage. Does that clarify things?",
    "created_at": "2016-05-26T07:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299166",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>Replying to [comment:24 chapoton]:
> Hmm, not sure I understand your conclusion. Did I do something "wrong" ? Should we try to use `import foo` as much as possible, or the contrary ?


Well...there's my diagnosis of what might have caused the problem, and the "pythonic" treatment. However, I disagree with it being the best way to fix things.

> I just started wanting to convert to python3-compatible imports, and then had to resolve
> a whole lot of circular imports. I did that by moving some imports inside functions, instead
> of being on top of the files.


I think you did the right thing. Moreover, this is in agreement with what we normally do in Sage. Does that clarify things?



---

archive/issue_comments_299167.json:
```json
{
    "body": "<a id='comment:26'></a>ping ?",
    "created_at": "2016-05-28T19:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299167",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:26'></a>ping ?



---

archive/issue_comments_299168.json:
```json
{
    "body": "<a id='comment:27'></a>**ping** ?",
    "created_at": "2016-06-01T08:04:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299168",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'></a>**ping** ?



---

archive/issue_comments_299169.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-06-01T13:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299169",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_299170.json:
```json
{
    "body": "Changing keywords from \"\" to \"days74\".",
    "created_at": "2016-06-01T13:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299170",
    "user": "https://github.com/tscrim"
}
```

Changing keywords from "" to "days74".



---

archive/issue_comments_299171.json:
```json
{
    "body": "<a id='comment:29'></a>Sage doesn't start with patch\n\n```\n\n/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/rational_field.py in <module>()\n     41     True\n     42 \n     43 AUTHORS:\n     44 \n     45 - Niles Johnson (2010-08): :trac:`3893`: ``random_element()`` should pass on\n     46   ``*args`` and ``**kwds``.\n     47 \n     48 - Travis Scrimshaw (2012-10-18): Added additional docstrings for full coverage.\n     49   Removed duplicates of ``discriminant()`` and ``signature()``.\n     50 \n     51 \"\"\"\n     52 from __future__ import print_function, absolute_import\n     53 \n     54 from .rational import Rational\n     55 from .integer import Integer\n---> 56 from . import infinity\n        global infinity = undefined\n     57 ZZ = None\n     58 \n     59 from sage.structure.parent_gens import ParentWithGens\n     60 import sage.rings.number_field.number_field_base as number_field_base\n     61 from sage.misc.fast_methods import Singleton\n     62 \n     63 class RationalField(Singleton, number_field_base.NumberField):\n     64     r\"\"\"\n     65     The class ``RationalField`` represents the field `\\QQ` of rational numbers.\n     66 \n     67     EXAMPLES::\n     68 \n     69         sage: a = long(901824309821093821093812093810928309183091832091)\n     70         sage: b = QQ(a); b\n     71         901824309821093821093812093810928309183091832091\n\nImportError: cannot import name infinity\n```",
    "created_at": "2016-06-01T21:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299171",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'></a>Sage doesn't start with patch

```

/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/rational_field.py in <module>()
     41     True
     42 
     43 AUTHORS:
     44 
     45 - Niles Johnson (2010-08): :trac:`3893`: ``random_element()`` should pass on
     46   ``*args`` and ``**kwds``.
     47 
     48 - Travis Scrimshaw (2012-10-18): Added additional docstrings for full coverage.
     49   Removed duplicates of ``discriminant()`` and ``signature()``.
     50 
     51 """
     52 from __future__ import print_function, absolute_import
     53 
     54 from .rational import Rational
     55 from .integer import Integer
---> 56 from . import infinity
        global infinity = undefined
     57 ZZ = None
     58 
     59 from sage.structure.parent_gens import ParentWithGens
     60 import sage.rings.number_field.number_field_base as number_field_base
     61 from sage.misc.fast_methods import Singleton
     62 
     63 class RationalField(Singleton, number_field_base.NumberField):
     64     r"""
     65     The class ``RationalField`` represents the field `\QQ` of rational numbers.
     66 
     67     EXAMPLES::
     68 
     69         sage: a = long(901824309821093821093812093810928309183091832091)
     70         sage: b = QQ(a); b
     71         901824309821093821093812093810928309183091832091

ImportError: cannot import name infinity
```



---

archive/issue_comments_299172.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-06-01T21:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299172",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_299173.json:
```json
{
    "body": "<a id='comment:30'></a>I do not see this. And two bots were green. Maybe a conflict with another ticket ?",
    "created_at": "2016-06-02T06:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299173",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:30'></a>I do not see this. And two bots were green. Maybe a conflict with another ticket ?



---

archive/issue_comments_299174.json:
```json
{
    "body": "<a id='comment:31'></a>I moved the working part of this branch to #20785. That reduces the problematic part, which can then be investigated more easily.",
    "created_at": "2016-06-08T13:58:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299174",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>I moved the working part of this branch to #20785. That reduces the problematic part, which can then be investigated more easily.



---

archive/issue_comments_299175.json:
```json
{
    "body": "<a id='comment:32'></a>I suggest to wait until #20785 is merged and then look at this again.",
    "created_at": "2016-06-08T15:28:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299175",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>I suggest to wait until #20785 is merged and then look at this again.



---

archive/issue_comments_299176.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-13T20:16:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299176",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299177.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-21T15:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299177",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299178.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-06-21T15:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299178",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_299179.json:
```json
{
    "body": "<a id='comment:36'></a>bot is green ! **ping** ?",
    "created_at": "2016-06-24T16:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299179",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:36'></a>bot is green ! **ping** ?



---

archive/issue_comments_299180.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-06-24T16:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299180",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_299181.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-06-26T07:30:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299181",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_055570.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-26T07:30:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20629#event-55570"
}
```



---

archive/issue_comments_299182.json:
```json
{
    "body": "<a id='comment:39'></a>Hah, wish I had seen this ticket earlier.  I hit this the other day and thought it was just me.  Thanks!",
    "created_at": "2016-06-27T08:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20629#issuecomment-299182",
    "user": "https://github.com/embray"
}
```

<a id='comment:39'></a>Hah, wish I had seen this ticket earlier.  I hit this the other day and thought it was just me.  Thanks!
