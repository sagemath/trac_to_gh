# Issue 20382: Replace is_package_installed with Features

archive/issues_020145.json:
```json
{
    "assignees": [
        "https://github.com/jdemeyer"
    ],
    "body": "\n\nCC:  @mkoeppe @jdemeyer @nexttime @embray @defeo @isuruf @slel\n\nKeywords: **days85**\n\nBranch: **[`ad6dcc6`](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)**\n\nReviewer: **Nicolas M. Thi\u00e9ry, Fran\u00e7ois Bissey, Julian R\u00fcth**\n\nAuthor: **Julian R\u00fcth, Jeroen Demeyer**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20382_\n\n",
    "closed_at": "2018-05-08T17:27:34Z",
    "created_at": "2016-04-07T17:03:13Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Replace is_package_installed with Features",
    "type": "issue",
    "updated_at": "2018-05-19T08:18:39Z",
    "url": "https://github.com/sagemath/sage/issues/20382",
    "user": "https://github.com/saraedum"
}
```


CC:  @mkoeppe @jdemeyer @nexttime @embray @defeo @isuruf @slel

Keywords: **days85**

Branch: **[`ad6dcc6`](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)**

Reviewer: **Nicolas M. Thiéry, François Bissey, Julian Rüth**

Author: **Julian Rüth, Jeroen Demeyer**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/20382_





---

archive/issue_events_287544.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-04-07T17:03:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287544"
}
```



---

archive/issue_events_287545.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-04-07T17:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287545"
}
```



---

archive/issue_events_287546.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-04-07T17:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287546"
}
```



---

archive/issue_events_287547.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-04-07T17:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287547"
}
```



---

archive/issue_comments_294026.json:
```json
{
    "body": "Branch: **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)**",
    "created_at": "2016-04-07T17:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294026",
    "user": "https://github.com/saraedum"
}
```

Branch: **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)**



---

archive/issue_comments_294027.json:
```json
{
    "body": "Commit: **[`7c1ca31`](https://github.com/sagemath/sagetrac-mirror/commit/7c1ca312c14f1b777563607d919a245e1d48e557)**",
    "created_at": "2016-04-07T23:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294027",
    "user": "https://github.com/kiwifb"
}
```

Commit: **[`7c1ca31`](https://github.com/sagemath/sagetrac-mirror/commit/7c1ca312c14f1b777563607d919a245e1d48e557)**



---

archive/issue_comments_294028.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIndeed same kind of work. Much more sophisticated on your part I must say. Do I understand well that you need an executable class for any external binaries that you want to call?\n\nIt could also solve the issue that I was thinking about executables and other files requirement. You should be able to find and use something already installed in a standard location. `theta` being already present in `/usr/local/bin` instead of `$SAGE_LOCAL/bin` (which resolves to `/usr/bin` in sage-on-gentoo) or anywhere in the `PATH`. Similarly you can install `gap` packages in `~/.gap/pkg` and there is no reasons why you shouldn't be able to use those.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3233147cd8405017499bead56e27132cd62216a5\">3233147</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dfd97f8480d64e5547362b6f8c7f92ebffab9030\">dfd97f8</a></td><td><code>Check for grape with GapPackage instead of is_package_installed()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c1ca312c14f1b777563607d919a245e1d48e557\">7c1ca31</a></td><td><code>Check for a working CSDP binary instead of is_package_installed()</code></td></tr></table>\n",
    "created_at": "2016-04-07T23:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294028",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:2" align="right">comment:2</div>

Indeed same kind of work. Much more sophisticated on your part I must say. Do I understand well that you need an executable class for any external binaries that you want to call?

It could also solve the issue that I was thinking about executables and other files requirement. You should be able to find and use something already installed in a standard location. `theta` being already present in `/usr/local/bin` instead of `$SAGE_LOCAL/bin` (which resolves to `/usr/bin` in sage-on-gentoo) or anywhere in the `PATH`. Similarly you can install `gap` packages in `~/.gap/pkg` and there is no reasons why you shouldn't be able to use those.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3233147cd8405017499bead56e27132cd62216a5">3233147</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dfd97f8480d64e5547362b6f8c7f92ebffab9030">dfd97f8</a></td><td><code>Check for grape with GapPackage instead of is_package_installed()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c1ca312c14f1b777563607d919a245e1d48e557">7c1ca31</a></td><td><code>Check for a working CSDP binary instead of is_package_installed()</code></td></tr></table>




---

archive/issue_comments_294029.json:
```json
{
    "body": "Changed branch from **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)** to **[u/nthiery/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/replace_is_package_installed_with_features)**",
    "created_at": "2016-04-07T23:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294029",
    "user": "https://github.com/nthiery"
}
```

Changed branch from **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)** to **[u/nthiery/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/replace_is_package_installed_with_features)**



---

archive/issue_comments_294030.json:
```json
{
    "body": "Changed commit from **[`7c1ca31`](https://github.com/sagemath/sagetrac-mirror/commit/7c1ca312c14f1b777563607d919a245e1d48e557)** to **[`97d47af`](https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863)**",
    "created_at": "2016-04-07T23:26:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294030",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7c1ca31`](https://github.com/sagemath/sagetrac-mirror/commit/7c1ca312c14f1b777563607d919a245e1d48e557)** to **[`97d47af`](https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863)**



---

archive/issue_comments_294031.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863\">97d47af</a></td><td><code>20382: missing docstring</code></td></tr></table>\n",
    "created_at": "2016-04-07T23:26:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294031",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863">97d47af</a></td><td><code>20382: missing docstring</code></td></tr></table>




---

archive/issue_comments_294032.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af\">8b6fcc9</a></td><td><code>20382: desirable error message + typo</code></td></tr></table>\n",
    "created_at": "2016-04-07T23:31:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294032",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af">8b6fcc9</a></td><td><code>20382: desirable error message + typo</code></td></tr></table>




---

archive/issue_comments_294033.json:
```json
{
    "body": "Changed commit from **[`97d47af`](https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863)** to **[`8b6fcc9`](https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af)**",
    "created_at": "2016-04-07T23:31:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294033",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`97d47af`](https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863)** to **[`8b6fcc9`](https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af)**



---

archive/issue_comments_294034.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHandling of `database_gap` will be delicate. The spkg includes bits removed stuff from `gap` that are expected by default (no need to load if present) and one \"real\" gap package that one would need to load (`tomlib`). \n\nThat may require special consideration.",
    "created_at": "2016-04-07T23:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294034",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:6" align="right">comment:6</div>

Handling of `database_gap` will be delicate. The spkg includes bits removed stuff from `gap` that are expected by default (no need to load if present) and one "real" gap package that one would need to load (`tomlib`). 

That may require special consideration.



---

archive/issue_comments_294035.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThanks for the pointer about database_gap. I should have a complete proposal up on the other ticket in the next 24 hours.",
    "created_at": "2016-04-07T23:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294035",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:7" align="right">comment:7</div>

Thanks for the pointer about database_gap. I should have a complete proposal up on the other ticket in the next 24 hours.



---

archive/issue_comments_294036.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI think this ticket should replace the other one unless you have a plan. I am making a list of stuff that needs to come from the other ticket and stuff that should use your feature detection. I guess we could split it along those lines.",
    "created_at": "2016-04-08T00:03:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294036",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">comment:8</div>

I think this ticket should replace the other one unless you have a plan. I am making a list of stuff that needs to come from the other ticket and stuff that should use your feature detection. I guess we could split it along those lines.



---

archive/issue_comments_294037.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nGoing through the files that I have changed in #20377 which this ticket should supersede:\n* `sage/databases/cremona.py` we need to check the real presence of a file in a specific location in this case. Adding something to feature may be overkill for that particular case.\n* `sage/game_theory/normal_form_game.py` + `sage/geometry/polyhedron/base.py` look for the `lrs` executable\n* `sage/graphs/generators/classical_geometries.py` already covered in this ticket\n* `sage/graphs/generic_graph.py` I think my stuff should stay. It is mostly straight `try...expect` whether or not a python module is available.\n* `sage/graphs/graph_generators.py` 3 different executables to detect\n* `sage/graphs/lovasz_theta.py` covered here\n* `sage/groups/generic.py` possibly detect if gap package tomlib is present\n* `sage/groups/perm_gps/permgroup.py` again dodgy database_gap detection in one part. The part using the gap `hap` package would need a nice rework not just migration. I'd like to pick the mind of the person who wrote this.\n* `sage/misc/all.py` my stuff should stay. It is removal of `import` no one uses.\n* `sage/rings/polynomial/multi_polynomial_sequence.py` finding one executable",
    "created_at": "2016-04-08T00:13:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294037",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

Going through the files that I have changed in #20377 which this ticket should supersede:
* `sage/databases/cremona.py` we need to check the real presence of a file in a specific location in this case. Adding something to feature may be overkill for that particular case.
* `sage/game_theory/normal_form_game.py` + `sage/geometry/polyhedron/base.py` look for the `lrs` executable
* `sage/graphs/generators/classical_geometries.py` already covered in this ticket
* `sage/graphs/generic_graph.py` I think my stuff should stay. It is mostly straight `try...expect` whether or not a python module is available.
* `sage/graphs/graph_generators.py` 3 different executables to detect
* `sage/graphs/lovasz_theta.py` covered here
* `sage/groups/generic.py` possibly detect if gap package tomlib is present
* `sage/groups/perm_gps/permgroup.py` again dodgy database_gap detection in one part. The part using the gap `hap` package would need a nice rework not just migration. I'd like to pick the mind of the person who wrote this.
* `sage/misc/all.py` my stuff should stay. It is removal of `import` no one uses.
* `sage/rings/polynomial/multi_polynomial_sequence.py` finding one executable



---

archive/issue_comments_294038.json:
```json
{
    "body": "Changed branch from **[u/nthiery/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/replace_is_package_installed_with_features)** to **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)**",
    "created_at": "2016-04-08T11:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294038",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/nthiery/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/replace_is_package_installed_with_features)** to **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)**



---

archive/issue_comments_294039.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nIs there overlap with #20182? Should #20182 be rewritten to use this?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e275a8db635e5c9a0f63f9e37acc245616e94dd\">1e275a8</a></td><td><code>Merge branch 'develop' into t/20382/replace_is_package_installed_with_features</code></td></tr></table>\n",
    "created_at": "2016-04-08T15:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294039",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

Is there overlap with #20182? Should #20182 be rewritten to use this?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e275a8db635e5c9a0f63f9e37acc245616e94dd">1e275a8</a></td><td><code>Merge branch 'develop' into t/20382/replace_is_package_installed_with_features</code></td></tr></table>




---

archive/issue_comments_294040.json:
```json
{
    "body": "Changed commit from **[`8b6fcc9`](https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af)** to **[`1e275a8`](https://github.com/sagemath/sagetrac-mirror/commit/1e275a8db635e5c9a0f63f9e37acc245616e94dd)**",
    "created_at": "2016-04-08T15:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294040",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`8b6fcc9`](https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af)** to **[`1e275a8`](https://github.com/sagemath/sagetrac-mirror/commit/1e275a8db635e5c9a0f63f9e37acc245616e94dd)**



---

archive/issue_comments_294041.json:
```json
{
    "body": "Reviewer: **Nicolas M. Thi\u00e9ry, ...**",
    "created_at": "2016-04-10T05:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294041",
    "user": "https://github.com/nthiery"
}
```

Reviewer: **Nicolas M. Thiéry, ...**



---

archive/issue_comments_294042.json:
```json
{
    "body": "Author: **Julian R\u00fcth**",
    "created_at": "2016-04-10T05:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294042",
    "user": "https://github.com/nthiery"
}
```

Author: **Julian Rüth**



---

archive/issue_comments_294043.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHi Julian,\n\nJust some rambling, thinking about use cases for this ticket or some follow up:\n\nWhile discussing with the Debian people, it was stressed out that we\nwill eventually want to be able to support simultaneously a stable\nversion of software X (as provided by distributions), and a devel\nversion of it (e.g. for our researchers that need the very latest\nfeatures). Therefore we probably will want to have code that could\nlook like:\n\n```\n        def latest_feature():\n            \"\"\"\n            ...\n\n            EXAMPLES::\n\n                sage: X = ...\n                sage: X.latest_feature()    # optional gap >= 3.5\n            \"\"\"\n            GAP(min_version=3.5).require()      # or some better syntax\n            ...\n            return gap.latest_feature()\n```\n\nTo support this use case we would need:\n\n- support for version checking in the Feature code (probably in a follow up ticket).\n\n  Probably not much can be written generically, except possibly for Executables,\n  trying to pass the --version and scanning the output for something that looks\n  like a version number\n\n- some updates to the doctesting framework to support version\n  annotations (definitely in another ticket)\n\n- mapping feature names appearing in the #optional annotations to actual Feature's\n  (it's going in this direction in #20182).\n\n\nNot directly related to this ticket, but building on the discussion we had while walking in Cernay, we may want to be able to write the annotation as::\n\n```\n        def latest_feature():\n            \"\"\"\n            ...\n\n            .. REQUIRES:: gap >= 3.5\n\n            EXAMPLES::\n\n                sage: X = ...\n                sage: X.latest_feature()\n            \"\"\"\n```\n\nCheers,\n                           Nicolas",
    "created_at": "2016-04-10T05:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294043",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:12" align="right">comment:12</div>

Hi Julian,

Just some rambling, thinking about use cases for this ticket or some follow up:

While discussing with the Debian people, it was stressed out that we
will eventually want to be able to support simultaneously a stable
version of software X (as provided by distributions), and a devel
version of it (e.g. for our researchers that need the very latest
features). Therefore we probably will want to have code that could
look like:

```
        def latest_feature():
            """
            ...

            EXAMPLES::

                sage: X = ...
                sage: X.latest_feature()    # optional gap >= 3.5
            """
            GAP(min_version=3.5).require()      # or some better syntax
            ...
            return gap.latest_feature()
```

To support this use case we would need:

- support for version checking in the Feature code (probably in a follow up ticket).

  Probably not much can be written generically, except possibly for Executables,
  trying to pass the --version and scanning the output for something that looks
  like a version number

- some updates to the doctesting framework to support version
  annotations (definitely in another ticket)

- mapping feature names appearing in the #optional annotations to actual Feature's
  (it's going in this direction in #20182).


Not directly related to this ticket, but building on the discussion we had while walking in Cernay, we may want to be able to write the annotation as::

```
        def latest_feature():
            """
            ...

            .. REQUIRES:: gap >= 3.5

            EXAMPLES::

                sage: X = ...
                sage: X.latest_feature()
            """
```

Cheers,
                           Nicolas



---

archive/issue_comments_294044.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/340d36e6eae99706c816bbd57897aa30b09d6fbf\">340d36e</a></td><td><code>Improve reporting of Features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fc00d9374340e6b8de764be36567ed4f2851be9\">0fc00d9</a></td><td><code>grape is in the gap_packages SPKG</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa12d10964c683b19119e500e6a90f2a739f2e15\">aa12d10</a></td><td><code>Fixed typos in Features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76aedb46c3a9b5813db9ffe30e84e3cd0ff113eb\">76aedb4</a></td><td><code>check for GAP package \"hap\" through a Feature test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e451b444e358ca5128cccb3cc4220161d9a4d0d\">2e451b4</a></td><td><code>20382: Proofreading</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863\">97d47af</a></td><td><code>20382: missing docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af\">8b6fcc9</a></td><td><code>20382: desirable error message + typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bba301b7255d4725a0cb0e758ada93025b3e53b\">1bba301</a></td><td><code>Merge branch 'u/nthiery/replace_is_package_installed_with_features' of git://trac.sagemath.org/sage into t/20382/replace_is_package_installed_with_features</code></td></tr></table>\n",
    "created_at": "2016-04-11T02:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294044",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/340d36e6eae99706c816bbd57897aa30b09d6fbf">340d36e</a></td><td><code>Improve reporting of Features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fc00d9374340e6b8de764be36567ed4f2851be9">0fc00d9</a></td><td><code>grape is in the gap_packages SPKG</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa12d10964c683b19119e500e6a90f2a739f2e15">aa12d10</a></td><td><code>Fixed typos in Features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76aedb46c3a9b5813db9ffe30e84e3cd0ff113eb">76aedb4</a></td><td><code>check for GAP package "hap" through a Feature test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e451b444e358ca5128cccb3cc4220161d9a4d0d">2e451b4</a></td><td><code>20382: Proofreading</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863">97d47af</a></td><td><code>20382: missing docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af">8b6fcc9</a></td><td><code>20382: desirable error message + typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bba301b7255d4725a0cb0e758ada93025b3e53b">1bba301</a></td><td><code>Merge branch 'u/nthiery/replace_is_package_installed_with_features' of git://trac.sagemath.org/sage into t/20382/replace_is_package_installed_with_features</code></td></tr></table>




---

archive/issue_comments_294045.json:
```json
{
    "body": "Changed commit from **[`1e275a8`](https://github.com/sagemath/sagetrac-mirror/commit/1e275a8db635e5c9a0f63f9e37acc245616e94dd)** to **[`1bba301`](https://github.com/sagemath/sagetrac-mirror/commit/1bba301b7255d4725a0cb0e758ada93025b3e53b)**",
    "created_at": "2016-04-11T02:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294045",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1e275a8`](https://github.com/sagemath/sagetrac-mirror/commit/1e275a8db635e5c9a0f63f9e37acc245616e94dd)** to **[`1bba301`](https://github.com/sagemath/sagetrac-mirror/commit/1bba301b7255d4725a0cb0e758ada93025b3e53b)**



---

archive/issue_comments_294046.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nnthiery: About version checks. I think it would be easy to add this in the current setup. However, I would recommend to follow the philosophy of autoconf here. I.e., we should not check for a version because you need to keep track which version range supportes the feature you are looking for (and often things are heavily patched so the version might be misleading.) Instead, we should check for the actual feature/interface required. It is a bit more work of course but usually better and much easier to maintain.",
    "created_at": "2016-04-11T02:36:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294046",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:14" align="right">comment:14</div>

nthiery: About version checks. I think it would be easy to add this in the current setup. However, I would recommend to follow the philosophy of autoconf here. I.e., we should not check for a version because you need to keep track which version range supportes the feature you are looking for (and often things are heavily patched so the version might be misleading.) Instead, we should check for the actual feature/interface required. It is a bit more work of course but usually better and much easier to maintain.



---

archive/issue_comments_294047.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nYep there is value in the autoconf approach. On the other hand, since this is mostly about doctests at this point, a version information is more useful for the user: \"oh, I need to upgrade to 3.5\" is simpler than \"oh, I need to upgrade to a recent enough version that supports method xxx on object yyy\". We could do both: make a feature check, and provide a version number for user reporting; but that's more work. Another advantage of version checking is that you just need to fetch the version once, and don't need to relaunch, e.g a GAP command, each time you want to check another feature.",
    "created_at": "2016-04-11T07:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294047",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:15" align="right">comment:15</div>

Yep there is value in the autoconf approach. On the other hand, since this is mostly about doctests at this point, a version information is more useful for the user: "oh, I need to upgrade to 3.5" is simpler than "oh, I need to upgrade to a recent enough version that supports method xxx on object yyy". We could do both: make a feature check, and provide a version number for user reporting; but that's more work. Another advantage of version checking is that you just need to fetch the version once, and don't need to relaunch, e.g a GAP command, each time you want to check another feature.



---

archive/issue_comments_294048.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI like more the centralized approach in this ticket rather than the one in #20377 in which each feature needs a special care. Though many things looks very complicated and the related #20182 is much more readable (though using inheritance from this ticket would save some efforts). Moreover #20182 implements some *database of available features* which is not discussed here. The latter has the advantage of minimizing the requests time after the first call. With the architecture proposed here, each check involves a `Feature` class creation and some associated test...\n\nSome more specific remarks:\n\n- Do we really care about the class `FeatureTestResult`? If the result is `True` then we mostly don't care about explanation and if it is `False` we likely want an error (with an explicit error message). Similarly, I would get rid of `FeatureNotPresentError`. Instead, I would add an `error` and a `message` arguments in the `require` method (with of course some reasonable default which would mimic the current behavior using the standard `RuntimeError`).\n\n- Are you sure `CSDP` is better inside the file `lovasz_theta.py`? Do we want to spread the `Features` all around the modules or should they be centralized?\n\n- Finally class names might be confusing. `GapPackage` is not a handle on a gap package nor something describing what is inside a given package (what I would guess from the name). Similarly, with having `CSDP` has a class when `CSDP` is the name of the program. It would be fine if all of them belong to a fixed module.",
    "created_at": "2016-04-12T13:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294048",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">comment:16</div>

I like more the centralized approach in this ticket rather than the one in #20377 in which each feature needs a special care. Though many things looks very complicated and the related #20182 is much more readable (though using inheritance from this ticket would save some efforts). Moreover #20182 implements some *database of available features* which is not discussed here. The latter has the advantage of minimizing the requests time after the first call. With the architecture proposed here, each check involves a `Feature` class creation and some associated test...

Some more specific remarks:

- Do we really care about the class `FeatureTestResult`? If the result is `True` then we mostly don't care about explanation and if it is `False` we likely want an error (with an explicit error message). Similarly, I would get rid of `FeatureNotPresentError`. Instead, I would add an `error` and a `message` arguments in the `require` method (with of course some reasonable default which would mimic the current behavior using the standard `RuntimeError`).

- Are you sure `CSDP` is better inside the file `lovasz_theta.py`? Do we want to spread the `Features` all around the modules or should they be centralized?

- Finally class names might be confusing. `GapPackage` is not a handle on a gap package nor something describing what is inside a given package (what I would guess from the name). Similarly, with having `CSDP` has a class when `CSDP` is the name of the program. It would be fine if all of them belong to a fixed module.



---

archive/issue_comments_294049.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAnd last but not the least: what about having the \"packages\" part directly attached to executable?\n\n```\nsage.interfaces.gap.gap.require_package('grape')\n```\ninstead of\n\n```\nsage.misc.features.GapPackage('grape').require()\n```",
    "created_at": "2016-04-12T13:11:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294049",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">comment:17</div>

And last but not the least: what about having the "packages" part directly attached to executable?

```
sage.interfaces.gap.gap.require_package('grape')
```
instead of

```
sage.misc.features.GapPackage('grape').require()
```



---

archive/issue_comments_294050.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b6df602825964090d13ecdfed09aaee1b14de3e\">7b6df60</a></td><td><code>Buckygen feature</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0529a0746053770b60274a94598525009a41d7be\">0529a07</a></td><td><code>ignore stderr output of theta</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/baf2eedc46e855199030b50357c0e5efefd68d35\">baf2eed</a></td><td><code>Benzene feature test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b2bbf9c9683e9b78cecbdd5fc45fd1602a83bed\">2b2bbf9</a></td><td><code>Added Feature for plantri</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30caced635e1b5f86339de2abca56fc08b3c5249\">30caced</a></td><td><code>Added features for bliss and igraph</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a2f8d20b29861a2d264830e29662055ad300892\">3a2f8d2</a></td><td><code>is_package_installed() is deprecated</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a594ee16f72f7bebd06f82d0fdadfe8a526f178\">2a594ee</a></td><td><code>Feature for lrslib</code></td></tr></table>\n",
    "created_at": "2016-04-12T13:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294050",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b6df602825964090d13ecdfed09aaee1b14de3e">7b6df60</a></td><td><code>Buckygen feature</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0529a0746053770b60274a94598525009a41d7be">0529a07</a></td><td><code>ignore stderr output of theta</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/baf2eedc46e855199030b50357c0e5efefd68d35">baf2eed</a></td><td><code>Benzene feature test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b2bbf9c9683e9b78cecbdd5fc45fd1602a83bed">2b2bbf9</a></td><td><code>Added Feature for plantri</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30caced635e1b5f86339de2abca56fc08b3c5249">30caced</a></td><td><code>Added features for bliss and igraph</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a2f8d20b29861a2d264830e29662055ad300892">3a2f8d2</a></td><td><code>is_package_installed() is deprecated</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a594ee16f72f7bebd06f82d0fdadfe8a526f178">2a594ee</a></td><td><code>Feature for lrslib</code></td></tr></table>




---

archive/issue_comments_294051.json:
```json
{
    "body": "Changed commit from **[`1bba301`](https://github.com/sagemath/sagetrac-mirror/commit/1bba301b7255d4725a0cb0e758ada93025b3e53b)** to **[`2a594ee`](https://github.com/sagemath/sagetrac-mirror/commit/2a594ee16f72f7bebd06f82d0fdadfe8a526f178)**",
    "created_at": "2016-04-12T13:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294051",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1bba301`](https://github.com/sagemath/sagetrac-mirror/commit/1bba301b7255d4725a0cb0e758ada93025b3e53b)** to **[`2a594ee`](https://github.com/sagemath/sagetrac-mirror/commit/2a594ee16f72f7bebd06f82d0fdadfe8a526f178)**



---

archive/issue_comments_294052.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@videlec](#comment:17):\n> And last but not the least: what about having the \"packages\" part directly attached to executable?\n\nSure. A followup ticket could define `gap.require_package` as a call out\nto `GapPackage().require`.",
    "created_at": "2016-04-12T13:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294052",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@videlec](#comment:17):
> And last but not the least: what about having the "packages" part directly attached to executable?

Sure. A followup ticket could define `gap.require_package` as a call out
to `GapPackage().require`.



---

archive/issue_comments_294053.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@videlec](#comment:16):\n>  Moreover #20182 implements some *database of available features* which\n>  is not discussed here. The latter has the advantage of minimizing the\n>  requests time after the first call. With the architecture proposed here,\n>  each check involves a `Feature` class creation and some associated test...\n\nThe docstring tells you that you might want to cache the result if you think it\nis a performance problem. Most of the time you are going to call out to a\nbinary anyway so I do not see the point of caching it as a default. \"Premature\noptimization is the root of all evil\u2026\"\nWe could centralize the checks. I do not really have an opinion on that.\n\n> - Do we really care about the class `FeatureTestResult`? If the result is\n>  `True` then we mostly don't care about explanation and if it is `False` we\n>  likely want an error (with an explicit error message).\n\nThat's what `is_present` vs `require` is about. There are places where the default algorithm is chosen depending on the\npresence of some feature.\n\n>  Similarly, I would\n>  get rid of `FeatureNotPresentError`. Instead, I would add an `error` and a\n>  `message` arguments in the `require` method (with of course some\n>  reasonable default which would mimic the current behavior using the\n>  standard `RuntimeError`).\n\nSo you have to catch whatever RuntimeError instead of being able to catch\nsomething specific? I do not see the advantage of that. Also, if I understand\nyour proposal, each caller has to cook up their own error message. I think it\nis nice to have a central place where these error messages and resolutions\nlive.\nFinally, with your approach you do not get the granularity between `abc is not\non the path` vs `abc is there but does not work`. That's something that some\npeople requested.\n\n> - Are you sure `CSDP` is better inside the file `lovasz_theta.py`? Do we\n>  want to spread the `Features` all around the modules or should they be\n>  centralized?\n\nSee above.\n\n> - Finally class names might be confusing. `GapPackage` is not a handle on\n>  a gap package nor something describing what is inside a given package\n>  (what I would guess from the name).\n\nGapPackage lives in sage.misc.feature. So it should be clear that this is not\nthe actual package. We can suffix everything with Feature if that is preferred.\nI prefer short class names if possible.\n\n>  Similarly, with having `CSDP` has a\n>  class when `CSDP` is the name of the program. It would be fine if all of\n>  them belong to a fixed module.\n\nSee above. (Sorry if I misunderstood you. It seems you are raising the\ncentralization vs localization issue several times in your comment.)",
    "created_at": "2016-04-12T13:51:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294053",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@videlec](#comment:16):
>  Moreover #20182 implements some *database of available features* which
>  is not discussed here. The latter has the advantage of minimizing the
>  requests time after the first call. With the architecture proposed here,
>  each check involves a `Feature` class creation and some associated test...

The docstring tells you that you might want to cache the result if you think it
is a performance problem. Most of the time you are going to call out to a
binary anyway so I do not see the point of caching it as a default. "Premature
optimization is the root of all evil…"
We could centralize the checks. I do not really have an opinion on that.

> - Do we really care about the class `FeatureTestResult`? If the result is
>  `True` then we mostly don't care about explanation and if it is `False` we
>  likely want an error (with an explicit error message).

That's what `is_present` vs `require` is about. There are places where the default algorithm is chosen depending on the
presence of some feature.

>  Similarly, I would
>  get rid of `FeatureNotPresentError`. Instead, I would add an `error` and a
>  `message` arguments in the `require` method (with of course some
>  reasonable default which would mimic the current behavior using the
>  standard `RuntimeError`).

So you have to catch whatever RuntimeError instead of being able to catch
something specific? I do not see the advantage of that. Also, if I understand
your proposal, each caller has to cook up their own error message. I think it
is nice to have a central place where these error messages and resolutions
live.
Finally, with your approach you do not get the granularity between `abc is not
on the path` vs `abc is there but does not work`. That's something that some
people requested.

> - Are you sure `CSDP` is better inside the file `lovasz_theta.py`? Do we
>  want to spread the `Features` all around the modules or should they be
>  centralized?

See above.

> - Finally class names might be confusing. `GapPackage` is not a handle on
>  a gap package nor something describing what is inside a given package
>  (what I would guess from the name).

GapPackage lives in sage.misc.feature. So it should be clear that this is not
the actual package. We can suffix everything with Feature if that is preferred.
I prefer short class names if possible.

>  Similarly, with having `CSDP` has a
>  class when `CSDP` is the name of the program. It would be fine if all of
>  them belong to a fixed module.

See above. (Sorry if I misunderstood you. It seems you are raising the
centralization vs localization issue several times in your comment.)



---

archive/issue_comments_294054.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@nthiery](#comment:15):\n> Yep there is value in the autoconf approach. On the other hand, since this is mostly about doctests at this point, a version information is more useful for the user: \"oh, I need to upgrade to 3.5\" is simpler than \"oh, I need to upgrade to a recent enough version that supports method xxx on object yyy\". We could do both: make a feature check, and provide a version number for user reporting; but that's more work. Another advantage of version checking is that you just need to fetch the version once, and don't need to relaunch, e.g a GAP command, each time you want to check another feature.\n> \n\nSure. Both options are valid. They are not in the scope of this ticket I\nthink. In either case, such \"features\" can easily be added to Feature.",
    "created_at": "2016-04-12T13:52:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294054",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@nthiery](#comment:15):
> Yep there is value in the autoconf approach. On the other hand, since this is mostly about doctests at this point, a version information is more useful for the user: "oh, I need to upgrade to 3.5" is simpler than "oh, I need to upgrade to a recent enough version that supports method xxx on object yyy". We could do both: make a feature check, and provide a version number for user reporting; but that's more work. Another advantage of version checking is that you just need to fetch the version once, and don't need to relaunch, e.g a GAP command, each time you want to check another feature.
> 

Sure. Both options are valid. They are not in the scope of this ticket I
think. In either case, such "features" can easily be added to Feature.



---

archive/issue_comments_294055.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90be504cc586943c6cccc57e5d349d4ca0f56b19\">90be504</a></td><td><code>Centralize feature tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da5e89310026e46c75adbb47560c14342ac5456c\">da5e893</a></td><td><code>More checks for Lrs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9cbda32ec480854c3e857543bd9fed5dd7df2e5\">a9cbda3</a></td><td><code>Move generic resolution information from Executable to Feature</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2007e1822e0684078323677211c3a893d5af414e\">2007e18</a></td><td><code>Add Feature CremonaDatabase</code></td></tr></table>\n",
    "created_at": "2016-04-13T21:25:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294055",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90be504cc586943c6cccc57e5d349d4ca0f56b19">90be504</a></td><td><code>Centralize feature tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da5e89310026e46c75adbb47560c14342ac5456c">da5e893</a></td><td><code>More checks for Lrs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9cbda32ec480854c3e857543bd9fed5dd7df2e5">a9cbda3</a></td><td><code>Move generic resolution information from Executable to Feature</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2007e1822e0684078323677211c3a893d5af414e">2007e18</a></td><td><code>Add Feature CremonaDatabase</code></td></tr></table>




---

archive/issue_comments_294056.json:
```json
{
    "body": "Changed commit from **[`2a594ee`](https://github.com/sagemath/sagetrac-mirror/commit/2a594ee16f72f7bebd06f82d0fdadfe8a526f178)** to **[`2007e18`](https://github.com/sagemath/sagetrac-mirror/commit/2007e1822e0684078323677211c3a893d5af414e)**",
    "created_at": "2016-04-13T21:25:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294056",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2a594ee`](https://github.com/sagemath/sagetrac-mirror/commit/2a594ee16f72f7bebd06f82d0fdadfe8a526f178)** to **[`2007e18`](https://github.com/sagemath/sagetrac-mirror/commit/2007e1822e0684078323677211c3a893d5af414e)**



---

archive/issue_comments_294057.json:
```json
{
    "body": "Work Issues: **reorder classes in sage.misc.feature**",
    "created_at": "2016-04-13T21:26:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294057",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **reorder classes in sage.misc.feature**



---

archive/issue_comments_294058.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIf I do `ls` in `sage/misc` directory and I see the file `feature.py` listed, I would never be able to guess its content. Can the filename be more verbose maybe `package_feature.py`?",
    "created_at": "2016-04-15T21:32:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294058",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:24" align="right">comment:24</div>

If I do `ls` in `sage/misc` directory and I see the file `feature.py` listed, I would never be able to guess its content. Can the filename be more verbose maybe `package_feature.py`?



---

archive/issue_comments_294059.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@seblabbe](#comment:24):\n> If I do `ls` in `sage/misc` directory and I see the file `feature.py` listed, I would never be able to guess its content. Can the filename be more verbose maybe `package_feature.py`?\n\nWould not make sense. It is not only about packages but also system softwares and libraries on the system. However, it could contains the words `dependencies` or `requirement`. I am not sure what would be the clearest.",
    "created_at": "2016-04-16T12:40:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294059",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@seblabbe](#comment:24):
> If I do `ls` in `sage/misc` directory and I see the file `feature.py` listed, I would never be able to guess its content. Can the filename be more verbose maybe `package_feature.py`?

Would not make sense. It is not only about packages but also system softwares and libraries on the system. However, it could contains the words `dependencies` or `requirement`. I am not sure what would be the clearest.



---

archive/issue_comments_294060.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nMaybe something like ``feature_test``? This seems to be consistent with autoconf's vocabulary.",
    "created_at": "2016-04-18T00:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294060",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:26" align="right">comment:26</div>

Maybe something like ``feature_test``? This seems to be consistent with autoconf's vocabulary.



---

archive/issue_comments_294061.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI like `feature_test`. I will rename it to that.",
    "created_at": "2016-04-21T09:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294061",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:27" align="right">comment:27</div>

I like `feature_test`. I will rename it to that.



---

archive/issue_comments_294062.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nHello,\n\nThis code is mostly Sage agnostic right? Would it be possible to move this code out of Sage source code? It would better be in `sage/src/sage_setup/` or whatever appropriate (even possibly an external python module). We might want to use it outside of Sage or before Sage is built to track possible dependencies.",
    "created_at": "2016-04-27T01:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294062",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

Hello,

This code is mostly Sage agnostic right? Would it be possible to move this code out of Sage source code? It would better be in `sage/src/sage_setup/` or whatever appropriate (even possibly an external python module). We might want to use it outside of Sage or before Sage is built to track possible dependencies.



---

archive/issue_comments_294063.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nAs far as I am concerned `sage_setup` is only used at install time and shouldn't be used at runtime. But spinning it as a separate python package sounds like an interesting idea. Other packages could probably benefits from those mechanism.",
    "created_at": "2016-04-27T01:30:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294063",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

As far as I am concerned `sage_setup` is only used at install time and shouldn't be used at runtime. But spinning it as a separate python package sounds like an interesting idea. Other packages could probably benefits from those mechanism.



---

archive/issue_comments_294064.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI already thought about moving parts of this out of the source tree. I have not really reached a conclusion yet. It certainly needs to be used during build time. Currently, we have `sage_setup/optional_extension.py` which calls `sage.misc.package.is_package_installed`. So, at least in a first version, I would certainly mimic this behaviour and check for a feature (in this case, whether Cython can build against a library) at build time.\n\nReplying to [@videlec](#comment:28):\n> This code is mostly Sage agnostic right?\n\nThe idea is Sage agnostic. The features it checks for are of course relatively Sage specific.\n\n> Would it be possible to move this code out of Sage source code? It would better be in `sage/src/sage_setup/` or whatever appropriate (even possibly an external python module). We might want to use it outside of Sage or before Sage is built to track possible dependencies.\n\nI am not sure about moving it to `sage_setup`. We need this at runtime. Can we (and should we?) access things in `sage_setup` at runtime?\nIt is an interesting idea to make it a separate package. There seems to be no python package around which does anything similar. I would be happy to pursue such a path but would like to postpone this to a followup ticket.",
    "created_at": "2016-04-27T13:31:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294064",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:30" align="right">comment:30</div>

I already thought about moving parts of this out of the source tree. I have not really reached a conclusion yet. It certainly needs to be used during build time. Currently, we have `sage_setup/optional_extension.py` which calls `sage.misc.package.is_package_installed`. So, at least in a first version, I would certainly mimic this behaviour and check for a feature (in this case, whether Cython can build against a library) at build time.

Replying to [@videlec](#comment:28):
> This code is mostly Sage agnostic right?

The idea is Sage agnostic. The features it checks for are of course relatively Sage specific.

> Would it be possible to move this code out of Sage source code? It would better be in `sage/src/sage_setup/` or whatever appropriate (even possibly an external python module). We might want to use it outside of Sage or before Sage is built to track possible dependencies.

I am not sure about moving it to `sage_setup`. We need this at runtime. Can we (and should we?) access things in `sage_setup` at runtime?
It is an interesting idea to make it a separate package. There seems to be no python package around which does anything similar. I would be happy to pursue such a path but would like to postpone this to a followup ticket.



---

archive/issue_comments_294065.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef9cf7d1eacb9195ab41611c2f05e634a1bf3d03\">ef9cf7d</a></td><td><code>Merge branch 'develop' into t/20382/replace_is_package_installed_with_features</code></td></tr></table>\n",
    "created_at": "2016-07-08T23:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294065",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef9cf7d1eacb9195ab41611c2f05e634a1bf3d03">ef9cf7d</a></td><td><code>Merge branch 'develop' into t/20382/replace_is_package_installed_with_features</code></td></tr></table>




---

archive/issue_comments_294066.json:
```json
{
    "body": "Changed commit from **[`2007e18`](https://github.com/sagemath/sagetrac-mirror/commit/2007e1822e0684078323677211c3a893d5af414e)** to **[`ef9cf7d`](https://github.com/sagemath/sagetrac-mirror/commit/ef9cf7d1eacb9195ab41611c2f05e634a1bf3d03)**",
    "created_at": "2016-07-08T23:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294066",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2007e18`](https://github.com/sagemath/sagetrac-mirror/commit/2007e1822e0684078323677211c3a893d5af414e)** to **[`ef9cf7d`](https://github.com/sagemath/sagetrac-mirror/commit/ef9cf7d1eacb9195ab41611c2f05e634a1bf3d03)**



---

archive/issue_comments_294067.json:
```json
{
    "body": "Changed commit from **[`ef9cf7d`](https://github.com/sagemath/sagetrac-mirror/commit/ef9cf7d1eacb9195ab41611c2f05e634a1bf3d03)** to **[`074a318`](https://github.com/sagemath/sagetrac-mirror/commit/074a31801df66eb96116e3f59ab6b2d0e42bd951)**",
    "created_at": "2016-07-09T00:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294067",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ef9cf7d`](https://github.com/sagemath/sagetrac-mirror/commit/ef9cf7d1eacb9195ab41611c2f05e634a1bf3d03)** to **[`074a318`](https://github.com/sagemath/sagetrac-mirror/commit/074a31801df66eb96116e3f59ab6b2d0e42bd951)**



---

archive/issue_comments_294068.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/095b40264690d0d87897cc25c7e8aea00e357682\">095b402</a></td><td><code>fixed incorrect import statement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/670a3e22ba7c50484b8f01959a463e764071293c\">670a3e2</a></td><td><code>Merge branch 'u/saraedum/replace_is_package_installed_with_features' of git://trac.sagemath.org/sage into t/20382/replace_is_package_installed_with_features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f5dc211b7ef3754de2d04d25d4eecd4d3d3e98e\">6f5dc21</a></td><td><code>Completed implementation of CremonaDatabase feature</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/074a31801df66eb96116e3f59ab6b2d0e42bd951\">074a318</a></td><td><code>Implement SmallGroupsLibrary feature</code></td></tr></table>\n",
    "created_at": "2016-07-09T00:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294068",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/095b40264690d0d87897cc25c7e8aea00e357682">095b402</a></td><td><code>fixed incorrect import statement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/670a3e22ba7c50484b8f01959a463e764071293c">670a3e2</a></td><td><code>Merge branch 'u/saraedum/replace_is_package_installed_with_features' of git://trac.sagemath.org/sage into t/20382/replace_is_package_installed_with_features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f5dc211b7ef3754de2d04d25d4eecd4d3d3e98e">6f5dc21</a></td><td><code>Completed implementation of CremonaDatabase feature</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/074a31801df66eb96116e3f59ab6b2d0e42bd951">074a318</a></td><td><code>Implement SmallGroupsLibrary feature</code></td></tr></table>




---

archive/issue_comments_294069.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d508a11632ef2f8931c3f8b2ad709e6dffe5446\">6d508a1</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into t/20382/replace_is_package_installed_with_features</code></td></tr></table>\n",
    "created_at": "2016-07-15T01:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294069",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d508a11632ef2f8931c3f8b2ad709e6dffe5446">6d508a1</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into t/20382/replace_is_package_installed_with_features</code></td></tr></table>




---

archive/issue_comments_294070.json:
```json
{
    "body": "Changed commit from **[`074a318`](https://github.com/sagemath/sagetrac-mirror/commit/074a31801df66eb96116e3f59ab6b2d0e42bd951)** to **[`6d508a1`](https://github.com/sagemath/sagetrac-mirror/commit/6d508a11632ef2f8931c3f8b2ad709e6dffe5446)**",
    "created_at": "2016-07-15T01:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294070",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`074a318`](https://github.com/sagemath/sagetrac-mirror/commit/074a31801df66eb96116e3f59ab6b2d0e42bd951)** to **[`6d508a1`](https://github.com/sagemath/sagetrac-mirror/commit/6d508a11632ef2f8931c3f8b2ad709e6dffe5446)**



---

archive/issue_comments_294071.json:
```json
{
    "body": "Changed commit from **[`6d508a1`](https://github.com/sagemath/sagetrac-mirror/commit/6d508a11632ef2f8931c3f8b2ad709e6dffe5446)** to **[`b6c4797`](https://github.com/sagemath/sagetrac-mirror/commit/b6c4797ace44ecb6b85ec1d17e53258970866e7d)**",
    "created_at": "2016-07-20T02:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294071",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6d508a1`](https://github.com/sagemath/sagetrac-mirror/commit/6d508a11632ef2f8931c3f8b2ad709e6dffe5446)** to **[`b6c4797`](https://github.com/sagemath/sagetrac-mirror/commit/b6c4797ace44ecb6b85ec1d17e53258970866e7d)**



---

archive/issue_comments_294072.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10c1a47fb662b6d5dfb86f261c962f874171fdb8\">10c1a47</a></td><td><code>Asking whether a package is installed is not deprecated</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/680c19a8f070a38b2ebc05ab3d1104278434ffb4\">680c19a</a></td><td><code>removed unused import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb47ef0fad3797123516251375fef7679a5d3183\">bb47ef0</a></td><td><code>Replace is_installed with SmallGroupsLibrary.require</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3acffa79653a8e80cd6de5c5acdebe37a6dc32cc\">3acffa7</a></td><td><code>A note on is_package_installed versus features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6c4797ace44ecb6b85ec1d17e53258970866e7d\">b6c4797</a></td><td><code>Optional sage modules and shared libraries as features</code></td></tr></table>\n",
    "created_at": "2016-07-20T02:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294072",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10c1a47fb662b6d5dfb86f261c962f874171fdb8">10c1a47</a></td><td><code>Asking whether a package is installed is not deprecated</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/680c19a8f070a38b2ebc05ab3d1104278434ffb4">680c19a</a></td><td><code>removed unused import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb47ef0fad3797123516251375fef7679a5d3183">bb47ef0</a></td><td><code>Replace is_installed with SmallGroupsLibrary.require</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3acffa79653a8e80cd6de5c5acdebe37a6dc32cc">3acffa7</a></td><td><code>A note on is_package_installed versus features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6c4797ace44ecb6b85ec1d17e53258970866e7d">b6c4797</a></td><td><code>Optional sage modules and shared libraries as features</code></td></tr></table>




---

archive/issue_comments_294073.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThis seems to be essentially complete now. Some docstrings are still missing and I also need to do some testing but I replaced all occurrences of `is_package_installed` if the code is just checking whether an optional package is installed.\nAny feedback is already very welcome until I find the time to polish all the docstrings.",
    "created_at": "2016-07-20T02:45:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294073",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:35" align="right">comment:35</div>

This seems to be essentially complete now. Some docstrings are still missing and I also need to do some testing but I replaced all occurrences of `is_package_installed` if the code is just checking whether an optional package is installed.
Any feedback is already very welcome until I find the time to polish all the docstrings.



---

archive/issue_comments_294074.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThat's really cool. I will give it a good look. I may even try it in sage-on-gentoo.",
    "created_at": "2016-07-20T02:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294074",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:36" align="right">comment:36</div>

That's really cool. I will give it a good look. I may even try it in sage-on-gentoo.



---

archive/issue_comments_294075.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI was actually a little confused that `is_package_installed` gets used in so few places. (Or maybe `search_src` is lying about it.)",
    "created_at": "2016-07-20T04:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294075",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:37" align="right">comment:37</div>

I was actually a little confused that `is_package_installed` gets used in so few places. (Or maybe `search_src` is lying about it.)



---

archive/issue_comments_294076.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nLooks good to me. There is one last thing that I think should be done, but I wouldn't hold the ticket for it, is remove\n\n```\nfrom .package import (install_package,\n        installed_packages, is_package_installed,\n        standard_packages, optional_packages, experimental_packages,\n        upgrade, package_versions)\n```\nfrom `sage/misc/all.py` we don't really want those to be directly exposed in my opinion - and they are/were always called explicitly in sage itself.",
    "created_at": "2016-07-20T10:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294076",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:38" align="right">comment:38</div>

Looks good to me. There is one last thing that I think should be done, but I wouldn't hold the ticket for it, is remove

```
from .package import (install_package,
        installed_packages, is_package_installed,
        standard_packages, optional_packages, experimental_packages,
        upgrade, package_versions)
```
from `sage/misc/all.py` we don't really want those to be directly exposed in my opinion - and they are/were always called explicitly in sage itself.



---

archive/issue_comments_294077.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nMy wish above may be best served by different ticket. Can you put this one in \"need review\".",
    "created_at": "2016-07-21T11:08:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294077",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:39" align="right">comment:39</div>

My wish above may be best served by different ticket. Can you put this one in "need review".



---

archive/issue_comments_294078.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nChecking availability of a Python module as you did has consequences\n\n```\nsage: def is_present(module):\n....:    import importlib\n....:    try:\n....:        importlib.import_module(module)\n....:        return True\n....:    except ImportError:\n....:        return False\nsage: print len(sys.modules), 'numpy' in sys.modules\n2625 False\nsage: is_present('numpy')\nTrue\nsage: print len(sys.modules), 'numpy' in sys.modules\n2710 True\n```\nThis would better be documented.",
    "created_at": "2016-07-22T20:34:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294078",
    "user": "https://github.com/videlec"
}
```

<div id="comment:40" align="right">comment:40</div>

Checking availability of a Python module as you did has consequences

```
sage: def is_present(module):
....:    import importlib
....:    try:
....:        importlib.import_module(module)
....:        return True
....:    except ImportError:
....:        return False
sage: print len(sys.modules), 'numpy' in sys.modules
2625 False
sage: is_present('numpy')
True
sage: print len(sys.modules), 'numpy' in sys.modules
2710 True
```
This would better be documented.



---

archive/issue_comments_294079.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI would be very happy to use this ticket to solve #21135 where I need to set the octave parameters for its Sage interface depending on its version... hence I am asking whether it would be possible to have a `version` method on `Features` (or at least on `Executable`)? For executable it is reasonable to just have an attribute `_version_cmd_option` (that would generally be `-v` or `--version` or `--dumpversion`) with a default implementation that runs the command with the option `_version_cmd_option`. What do you think?",
    "created_at": "2016-08-01T14:54:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294079",
    "user": "https://github.com/videlec"
}
```

<div id="comment:41" align="right">comment:41</div>

I would be very happy to use this ticket to solve #21135 where I need to set the octave parameters for its Sage interface depending on its version... hence I am asking whether it would be possible to have a `version` method on `Features` (or at least on `Executable`)? For executable it is reasonable to just have an attribute `_version_cmd_option` (that would generally be `-v` or `--version` or `--dumpversion`) with a default implementation that runs the command with the option `_version_cmd_option`. What do you think?



---

archive/issue_comments_294080.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nNote also that for interfaces we allow remote programs with possibly subtle commands (see #20388 and the file `sage/interfaces/expect.py`). For example, I can access magma and get it work within sage by doing\n\n```\n$ SAGE_MAGMA_COMMAND=\"module load magma/2.11.13; magma\"\n$ SAGE_MAGMA_SERVER=\"plafrim\"\n$ export SAGE_MAGMA_COMMAND SAGE_MAGMA_SERVER\n$ sage -q\nsage: magma('1+1')\n2\n```\nDoes a magma feature should take care of this?",
    "created_at": "2016-08-01T15:03:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294080",
    "user": "https://github.com/videlec"
}
```

<div id="comment:42" align="right">comment:42</div>

Note also that for interfaces we allow remote programs with possibly subtle commands (see #20388 and the file `sage/interfaces/expect.py`). For example, I can access magma and get it work within sage by doing

```
$ SAGE_MAGMA_COMMAND="module load magma/2.11.13; magma"
$ SAGE_MAGMA_SERVER="plafrim"
$ export SAGE_MAGMA_COMMAND SAGE_MAGMA_SERVER
$ sage -q
sage: magma('1+1')
2
```
Does a magma feature should take care of this?



---

archive/issue_comments_294081.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@videlec](#comment:41):\n> I would be very happy to use this ticket to solve #21135 where I need to set the octave parameters for its Sage interface depending on its version...\n\nIt would be great to see somebody use this interface already :)\nI have completing this Ticket high on my priority list. I hope I find the time to do this soon.\n\n> hence I am asking whether it would be possible to have a `version` method on `Features` (or at least on `Executable`)? For executable it is reasonable to just have an attribute `_version_cmd_option` (that would generally be `-v` or `--version` or `--dumpversion`) with a default implementation that runs the command with the option `_version_cmd_option`. What do you think?\n\nSometimes version checking is a good thing to do but I generally follow the autoconf tradition here that sees version numbers as something very unreliable. I think you should check whether the executable provides the interface that you need.\n\nSo, I would be reluctant to provide a general interface for version checks. I should certainly add a comment about this somewhere. Anyway, you can extend any Feature. To check for a version you might want to roughly do something like what I did for `StaticFile.absolute_path`.",
    "created_at": "2016-08-01T22:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294081",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@videlec](#comment:41):
> I would be very happy to use this ticket to solve #21135 where I need to set the octave parameters for its Sage interface depending on its version...

It would be great to see somebody use this interface already :)
I have completing this Ticket high on my priority list. I hope I find the time to do this soon.

> hence I am asking whether it would be possible to have a `version` method on `Features` (or at least on `Executable`)? For executable it is reasonable to just have an attribute `_version_cmd_option` (that would generally be `-v` or `--version` or `--dumpversion`) with a default implementation that runs the command with the option `_version_cmd_option`. What do you think?

Sometimes version checking is a good thing to do but I generally follow the autoconf tradition here that sees version numbers as something very unreliable. I think you should check whether the executable provides the interface that you need.

So, I would be reluctant to provide a general interface for version checks. I should certainly add a comment about this somewhere. Anyway, you can extend any Feature. To check for a version you might want to roughly do something like what I did for `StaticFile.absolute_path`.



---

archive/issue_comments_294082.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@videlec](#comment:42):\n> Note also that for interfaces we allow remote programs with possibly subtle commands (see #20388 and the file `sage/interfaces/expect.py`). For example, I can access magma and get it work within sage by doing\n> \n> ```\n> $ SAGE_MAGMA_COMMAND=\"module load magma/2.11.13; magma\"\n> $ SAGE_MAGMA_SERVER=\"plafrim\"\n> $ export SAGE_MAGMA_COMMAND SAGE_MAGMA_SERVER\n> $ sage -q\n> sage: magma('1+1')\n> 2\n> ```\n> Does a magma feature should take care of this?\n\nSorry, but I am not sure whether I understand your question. Do you mean whether a `Magma` Feature should look at `SAGE_MAGMA_COMMAND` and `SAGE_MAGMA_SERVER`? Yes, absolutely.",
    "created_at": "2016-08-01T22:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294082",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@videlec](#comment:42):
> Note also that for interfaces we allow remote programs with possibly subtle commands (see #20388 and the file `sage/interfaces/expect.py`). For example, I can access magma and get it work within sage by doing
> 
> ```
> $ SAGE_MAGMA_COMMAND="module load magma/2.11.13; magma"
> $ SAGE_MAGMA_SERVER="plafrim"
> $ export SAGE_MAGMA_COMMAND SAGE_MAGMA_SERVER
> $ sage -q
> sage: magma('1+1')
> 2
> ```
> Does a magma feature should take care of this?

Sorry, but I am not sure whether I understand your question. Do you mean whether a `Magma` Feature should look at `SAGE_MAGMA_COMMAND` and `SAGE_MAGMA_SERVER`? Yes, absolutely.



---

archive/issue_comments_294083.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@saraedum](#comment:44):\n> Replying to [@videlec](#comment:42):\n> > Note also that for interfaces we allow remote programs with possibly subtle commands (see #20388 and the file `sage/interfaces/expect.py`). For example, I can access magma and get it work within sage by doing\n> > \n> > ```\n> > $ SAGE_MAGMA_COMMAND=\"module load magma/2.11.13; magma\"\n> > $ SAGE_MAGMA_SERVER=\"plafrim\"\n> > $ export SAGE_MAGMA_COMMAND SAGE_MAGMA_SERVER\n> > $ sage -q\n> > sage: magma('1+1')\n> > 2\n> > ```\n> > Does a magma feature should take care of this?\n\n> \n> Sorry, but I am not sure whether I understand your question. Do you mean whether a `Magma` Feature should look at `SAGE_MAGMA_COMMAND` and `SAGE_MAGMA_SERVER`? Yes, absolutely.\n\nYes. That was mostly the question ;-) There are some interferences between the branch provided here and how software are detected (and configured) in `sage/interfaces/`. This should be done in one place and I guess features is the right one.",
    "created_at": "2016-08-01T22:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294083",
    "user": "https://github.com/videlec"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@saraedum](#comment:44):
> Replying to [@videlec](#comment:42):
> > Note also that for interfaces we allow remote programs with possibly subtle commands (see #20388 and the file `sage/interfaces/expect.py`). For example, I can access magma and get it work within sage by doing
> > 
> > ```
> > $ SAGE_MAGMA_COMMAND="module load magma/2.11.13; magma"
> > $ SAGE_MAGMA_SERVER="plafrim"
> > $ export SAGE_MAGMA_COMMAND SAGE_MAGMA_SERVER
> > $ sage -q
> > sage: magma('1+1')
> > 2
> > ```
> > Does a magma feature should take care of this?

> 
> Sorry, but I am not sure whether I understand your question. Do you mean whether a `Magma` Feature should look at `SAGE_MAGMA_COMMAND` and `SAGE_MAGMA_SERVER`? Yes, absolutely.

Yes. That was mostly the question ;-) There are some interferences between the branch provided here and how software are detected (and configured) in `sage/interfaces/`. This should be done in one place and I guess features is the right one.



---

archive/issue_comments_294084.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@saraedum](#comment:43):\n> Replying to [@videlec](#comment:41):\n> > [...]\n\n> \n> Sometimes version checking is a good thing to do but I generally follow the autoconf tradition here that sees version numbers as something very unreliable. I think you should check whether the executable provides the interface that you need.\n\nArgh. I do not see how I can check that `octave` does not launch the GUI... I can check whether `octave --no-gui` is available. If octave does not exist I got a `OSError` and if it does not accept `--no-gui` I get a `1` return code. Is that what I should do? Does that should be part of an `Octave` feature?",
    "created_at": "2016-08-01T22:39:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294084",
    "user": "https://github.com/videlec"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@saraedum](#comment:43):
> Replying to [@videlec](#comment:41):
> > [...]

> 
> Sometimes version checking is a good thing to do but I generally follow the autoconf tradition here that sees version numbers as something very unreliable. I think you should check whether the executable provides the interface that you need.

Argh. I do not see how I can check that `octave` does not launch the GUI... I can check whether `octave --no-gui` is available. If octave does not exist I got a `OSError` and if it does not accept `--no-gui` I get a `1` return code. Is that what I should do? Does that should be part of an `Octave` feature?



---

archive/issue_comments_294085.json:
```json
{
    "body": "Changed commit from **[`b6c4797`](https://github.com/sagemath/sagetrac-mirror/commit/b6c4797ace44ecb6b85ec1d17e53258970866e7d)** to **[`2a67f26`](https://github.com/sagemath/sagetrac-mirror/commit/2a67f26dbe72f17af0500772b8370013d89f44d2)**",
    "created_at": "2016-08-04T05:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294085",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b6c4797`](https://github.com/sagemath/sagetrac-mirror/commit/b6c4797ace44ecb6b85ec1d17e53258970866e7d)** to **[`2a67f26`](https://github.com/sagemath/sagetrac-mirror/commit/2a67f26dbe72f17af0500772b8370013d89f44d2)**



---

archive/issue_comments_294086.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a67f26dbe72f17af0500772b8370013d89f44d2\">2a67f26</a></td><td><code>Trivial doctest fixes in sage.misc.feature</code></td></tr></table>\n",
    "created_at": "2016-08-04T05:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294086",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a67f26dbe72f17af0500772b8370013d89f44d2">2a67f26</a></td><td><code>Trivial doctest fixes in sage.misc.feature</code></td></tr></table>




---

archive/issue_comments_294087.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/948bb459cccead366a9c98b93c7743c88583c78f\">948bb45</a></td><td><code>Fill in missing doctests for sage.misc.feature</code></td></tr></table>\n",
    "created_at": "2016-08-17T04:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294087",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/948bb459cccead366a9c98b93c7743c88583c78f">948bb45</a></td><td><code>Fill in missing doctests for sage.misc.feature</code></td></tr></table>




---

archive/issue_comments_294088.json:
```json
{
    "body": "Changed commit from **[`2a67f26`](https://github.com/sagemath/sagetrac-mirror/commit/2a67f26dbe72f17af0500772b8370013d89f44d2)** to **[`948bb45`](https://github.com/sagemath/sagetrac-mirror/commit/948bb459cccead366a9c98b93c7743c88583c78f)**",
    "created_at": "2016-08-17T04:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294088",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2a67f26`](https://github.com/sagemath/sagetrac-mirror/commit/2a67f26dbe72f17af0500772b8370013d89f44d2)** to **[`948bb45`](https://github.com/sagemath/sagetrac-mirror/commit/948bb459cccead366a9c98b93c7743c88583c78f)**



---

archive/issue_comments_294089.json:
```json
{
    "body": "Changed commit from **[`948bb45`](https://github.com/sagemath/sagetrac-mirror/commit/948bb459cccead366a9c98b93c7743c88583c78f)** to **[`e824e0d`](https://github.com/sagemath/sagetrac-mirror/commit/e824e0d72c3e8195c8e23582192e55e6acf4907a)**",
    "created_at": "2016-08-17T04:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294089",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`948bb45`](https://github.com/sagemath/sagetrac-mirror/commit/948bb459cccead366a9c98b93c7743c88583c78f)** to **[`e824e0d`](https://github.com/sagemath/sagetrac-mirror/commit/e824e0d72c3e8195c8e23582192e55e6acf4907a)**



---

archive/issue_comments_294090.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e824e0d72c3e8195c8e23582192e55e6acf4907a\">e824e0d</a></td><td><code>Fixed doctests in sage.misc.feature</code></td></tr></table>\n",
    "created_at": "2016-08-17T04:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294090",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e824e0d72c3e8195c8e23582192e55e6acf4907a">e824e0d</a></td><td><code>Fixed doctests in sage.misc.feature</code></td></tr></table>




---

archive/issue_comments_294091.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cf972c3f7a78e4c064e0174ae7ae1bf1a6e003e\">7cf972c</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into t/20382/replace_is_package_installed_with_features</code></td></tr></table>\n",
    "created_at": "2016-08-18T03:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294091",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cf972c3f7a78e4c064e0174ae7ae1bf1a6e003e">7cf972c</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into t/20382/replace_is_package_installed_with_features</code></td></tr></table>




---

archive/issue_comments_294092.json:
```json
{
    "body": "Changed commit from **[`e824e0d`](https://github.com/sagemath/sagetrac-mirror/commit/e824e0d72c3e8195c8e23582192e55e6acf4907a)** to **[`7cf972c`](https://github.com/sagemath/sagetrac-mirror/commit/7cf972c3f7a78e4c064e0174ae7ae1bf1a6e003e)**",
    "created_at": "2016-08-18T03:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294092",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e824e0d`](https://github.com/sagemath/sagetrac-mirror/commit/e824e0d72c3e8195c8e23582192e55e6acf4907a)** to **[`7cf972c`](https://github.com/sagemath/sagetrac-mirror/commit/7cf972c3f7a78e4c064e0174ae7ae1bf1a6e003e)**



---

archive/issue_comments_294093.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@kiwifb](#comment:2):\n> [...] Do I understand well that you need an executable class for any external binaries that you want to call?\n\nIts up to you. You can create a new class and make it easier for others to use or you could just write `Executable(...).require()` to check for an executable in one place.",
    "created_at": "2016-08-18T03:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294093",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@kiwifb](#comment:2):
> [...] Do I understand well that you need an executable class for any external binaries that you want to call?

Its up to you. You can create a new class and make it easier for others to use or you could just write `Executable(...).require()` to check for an executable in one place.



---

archive/issue_comments_294094.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@kiwifb](#comment:6):\n> Handling of `database_gap` will be delicate. The spkg includes bits removed stuff from `gap` that are expected by default (no need to load if present) and one \"real\" gap package that one would need to load (`tomlib`). \n\nI tried to check for the package that was actually needed whenever the old code queried the `gap_packages` SPKG. I am not sure I fully understand your comment here. Could you point me to an example in the code where this is a problem?",
    "created_at": "2016-08-18T03:46:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294094",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@kiwifb](#comment:6):
> Handling of `database_gap` will be delicate. The spkg includes bits removed stuff from `gap` that are expected by default (no need to load if present) and one "real" gap package that one would need to load (`tomlib`). 

I tried to check for the package that was actually needed whenever the old code queried the `gap_packages` SPKG. I am not sure I fully understand your comment here. Could you point me to an example in the code where this is a problem?



---

archive/issue_comments_294095.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@kiwifb](#comment:9):\n> Going through the files that I have changed in #20377 which this ticket should supersede:\n> * `sage/databases/cremona.py` we need to check the real presence of a file in a specific location in this case. Adding something to feature may be overkill for that particular case.\n\n`sage/databases/cremona.py` loads the cremona DB from a very specific place, namely `SAGE_SHARE`. This is certainly not ideal. But making that code more flexible should imho go into a followup ticket. Should I create one?\n> * `sage/game_theory/normal_form_game.py` + `sage/geometry/polyhedron/base.py` look for the `lrs` executable\n\nAddressed with the `Lrs` feature.\n> * `sage/graphs/generators/classical_geometries.py` already covered in this ticket\n> * `sage/graphs/generic_graph.py` I think my stuff should stay. It is mostly straight `try...expect` whether or not a python module is available.\n\nI am checking this now with a `PythonModule` feature.\n> * `sage/graphs/graph_generators.py` 3 different executables to detect\n\nI am checking for these executables (and run them on trivial inputs.)\n> * `sage/graphs/lovasz_theta.py` covered here\n> * `sage/groups/generic.py` possibly detect if gap package tomlib is present\n\nI am checking for the presence of the small groups library. Is that the same somehow?\n> * `sage/groups/perm_gps/permgroup.py` again dodgy database_gap detection in one part. The part using the gap `hap` package would need a nice rework not just migration. I'd like to pick the mind of the person who wrote this.\n\nI am checking for the hap package here. Is there anything else that should happen?\n> * `sage/misc/all.py` my stuff should stay. It is removal of `import` no one uses.\n\nSure. But I am not addressing this here.\n>    * `sage/rings/polynomial/multi_polynomial_sequence.py` finding one executable\n\nActually you need to check for the presence of the fes library. Not only that but also whether the sage interface to that library has been built (which only happens if sage can find the library, i.e., SPKG at build time.)",
    "created_at": "2016-08-18T03:54:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294095",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@kiwifb](#comment:9):
> Going through the files that I have changed in #20377 which this ticket should supersede:
> * `sage/databases/cremona.py` we need to check the real presence of a file in a specific location in this case. Adding something to feature may be overkill for that particular case.

`sage/databases/cremona.py` loads the cremona DB from a very specific place, namely `SAGE_SHARE`. This is certainly not ideal. But making that code more flexible should imho go into a followup ticket. Should I create one?
> * `sage/game_theory/normal_form_game.py` + `sage/geometry/polyhedron/base.py` look for the `lrs` executable

Addressed with the `Lrs` feature.
> * `sage/graphs/generators/classical_geometries.py` already covered in this ticket
> * `sage/graphs/generic_graph.py` I think my stuff should stay. It is mostly straight `try...expect` whether or not a python module is available.

I am checking this now with a `PythonModule` feature.
> * `sage/graphs/graph_generators.py` 3 different executables to detect

I am checking for these executables (and run them on trivial inputs.)
> * `sage/graphs/lovasz_theta.py` covered here
> * `sage/groups/generic.py` possibly detect if gap package tomlib is present

I am checking for the presence of the small groups library. Is that the same somehow?
> * `sage/groups/perm_gps/permgroup.py` again dodgy database_gap detection in one part. The part using the gap `hap` package would need a nice rework not just migration. I'd like to pick the mind of the person who wrote this.

I am checking for the hap package here. Is there anything else that should happen?
> * `sage/misc/all.py` my stuff should stay. It is removal of `import` no one uses.

Sure. But I am not addressing this here.
>    * `sage/rings/polynomial/multi_polynomial_sequence.py` finding one executable

Actually you need to check for the presence of the fes library. Not only that but also whether the sage interface to that library has been built (which only happens if sage can find the library, i.e., SPKG at build time.)



---

archive/issue_comments_294096.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@nthiery](#comment:15):\n> Yep there is value in the autoconf approach. On the other hand, since this is mostly about doctests at this point, a version information is more useful for the user: \"oh, I need to upgrade to 3.5\" is simpler than \"oh, I need to upgrade to a recent enough version that supports method xxx on object yyy\". We could do both: make a feature check, and provide a version number for user reporting; but that's more work.\n\nThat's the approach I would like to follow. Currently there is no code like this in here because I am just replacing `is_package_installed` which also did not do any version checks. But, yes, people should check for a certain feature of a package and then the `reason` of a test failure should say \"Your X does not support Y.\" and the `resolution` should say \"You need at least version Z of X. Try sage -i X to fix this.\" or something along these lines.",
    "created_at": "2016-08-18T04:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294096",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@nthiery](#comment:15):
> Yep there is value in the autoconf approach. On the other hand, since this is mostly about doctests at this point, a version information is more useful for the user: "oh, I need to upgrade to 3.5" is simpler than "oh, I need to upgrade to a recent enough version that supports method xxx on object yyy". We could do both: make a feature check, and provide a version number for user reporting; but that's more work.

That's the approach I would like to follow. Currently there is no code like this in here because I am just replacing `is_package_installed` which also did not do any version checks. But, yes, people should check for a certain feature of a package and then the `reason` of a test failure should say "Your X does not support Y." and the `resolution` should say "You need at least version Z of X. Try sage -i X to fix this." or something along these lines.



---

archive/issue_comments_294097.json:
```json
{
    "body": "Changed commit from **[`7cf972c`](https://github.com/sagemath/sagetrac-mirror/commit/7cf972c3f7a78e4c064e0174ae7ae1bf1a6e003e)** to **[`7d38138`](https://github.com/sagemath/sagetrac-mirror/commit/7d381385007870e353d1d63e4f995162e3c7285a)**",
    "created_at": "2016-08-18T04:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294097",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7cf972c`](https://github.com/sagemath/sagetrac-mirror/commit/7cf972c3f7a78e4c064e0174ae7ae1bf1a6e003e)** to **[`7d38138`](https://github.com/sagemath/sagetrac-mirror/commit/7d381385007870e353d1d63e4f995162e3c7285a)**



---

archive/issue_comments_294098.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d381385007870e353d1d63e4f995162e3c7285a\">7d38138</a></td><td><code>Renamed sage.misc.feature to sage.misc.feature_test</code></td></tr></table>\n",
    "created_at": "2016-08-18T04:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294098",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d381385007870e353d1d63e4f995162e3c7285a">7d38138</a></td><td><code>Renamed sage.misc.feature to sage.misc.feature_test</code></td></tr></table>




---

archive/issue_comments_294099.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@videlec](#comment:40):\n> Checking availability of a Python module as you did has consequences\n> \n> ```\n> sage: def is_present(module):\n> ....:    import importlib\n> ....:    try:\n> ....:        importlib.import_module(module)\n> ....:        return True\n> ....:    except ImportError:\n> ....:        return False\n> sage: print len(sys.modules), 'numpy' in sys.modules\n> 2625 False\n> sage: is_present('numpy')\n> True\n> sage: print len(sys.modules), 'numpy' in sys.modules\n> 2710 True\n> ```\n> This would better be documented.\n\nYou are right. I documented that.",
    "created_at": "2016-08-18T04:14:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294099",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@videlec](#comment:40):
> Checking availability of a Python module as you did has consequences
> 
> ```
> sage: def is_present(module):
> ....:    import importlib
> ....:    try:
> ....:        importlib.import_module(module)
> ....:        return True
> ....:    except ImportError:
> ....:        return False
> sage: print len(sys.modules), 'numpy' in sys.modules
> 2625 False
> sage: is_present('numpy')
> True
> sage: print len(sys.modules), 'numpy' in sys.modules
> 2710 True
> ```
> This would better be documented.

You are right. I documented that.



---

archive/issue_comments_294100.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@videlec](#comment:46):\n> Replying to [@saraedum](#comment:43):\n> > Replying to [@videlec](#comment:41):\n> > > [...]\n\n> > \n> > Sometimes version checking is a good thing to do but I generally follow the autoconf tradition here that sees version numbers as something very unreliable. I think you should check whether the executable provides the interface that you need.\n\n> \n> Argh. I do not see how I can check that `octave` does not launch the GUI... I can check whether `octave --no-gui` is available. If octave does not exist I got a `OSError` and if it does not accept `--no-gui` I get a `1` return code. Is that what I should do? Does that should be part of an `Octave` feature?\n\nI have a feeling that I already answered this one. But apparently I have not.\nI would write an `Octave` feature that checks whether there is an `octave` binary and then checks whether it accepts `--no-gui`. Sort of like `StaticFile` has an `absolute_path()` that tells you something about how this feature works, `Octave` could expose information about which parameters are needed to actually invoke it so it reads from stdin.",
    "created_at": "2016-08-18T04:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294100",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@videlec](#comment:46):
> Replying to [@saraedum](#comment:43):
> > Replying to [@videlec](#comment:41):
> > > [...]

> > 
> > Sometimes version checking is a good thing to do but I generally follow the autoconf tradition here that sees version numbers as something very unreliable. I think you should check whether the executable provides the interface that you need.

> 
> Argh. I do not see how I can check that `octave` does not launch the GUI... I can check whether `octave --no-gui` is available. If octave does not exist I got a `OSError` and if it does not accept `--no-gui` I get a `1` return code. Is that what I should do? Does that should be part of an `Octave` feature?

I have a feeling that I already answered this one. But apparently I have not.
I would write an `Octave` feature that checks whether there is an `octave` binary and then checks whether it accepts `--no-gui`. Sort of like `StaticFile` has an `absolute_path()` that tells you something about how this feature works, `Octave` could expose information about which parameters are needed to actually invoke it so it reads from stdin.



---

archive/issue_comments_294101.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nI hope I addressed all comments on this ticket. I did not have a chance to run all doctests yet (my sage 7.4 is still building) but essentially this is ready for review now.",
    "created_at": "2016-08-18T04:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294101",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:60" align="right">comment:60</div>

I hope I addressed all comments on this ticket. I did not have a chance to run all doctests yet (my sage 7.4 is still building) but essentially this is ready for review now.



---

archive/issue_comments_294102.json:
```json
{
    "body": "Changed work issues from **reorder classes in sage.misc.feature** to none",
    "created_at": "2016-08-18T04:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294102",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **reorder classes in sage.misc.feature** to none



---

archive/issue_comments_294103.json:
```json
{
    "body": "Changed commit from **[`7d38138`](https://github.com/sagemath/sagetrac-mirror/commit/7d381385007870e353d1d63e4f995162e3c7285a)** to **[`edd4f6e`](https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447)**",
    "created_at": "2016-08-18T04:40:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294103",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7d38138`](https://github.com/sagemath/sagetrac-mirror/commit/7d381385007870e353d1d63e4f995162e3c7285a)** to **[`edd4f6e`](https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447)**



---

archive/issue_comments_294104.json:
```json
{
    "body": "<div id=\"comment:62\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/052963745bf9de80896ca216c41716f777e87fc8\">0529637</a></td><td><code>Reordered classes in sage.misc.feature_test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f2d596f9445a8bf5e9b8d8b2f73155c4dd42872\">6f2d596</a></td><td><code>Fixed doctests which failed because of the feature -> feature_test renaming</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447\">edd4f6e</a></td><td><code>add missing sig_off to doctest</code></td></tr></table>\n",
    "created_at": "2016-08-18T04:40:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294104",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/052963745bf9de80896ca216c41716f777e87fc8">0529637</a></td><td><code>Reordered classes in sage.misc.feature_test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f2d596f9445a8bf5e9b8d8b2f73155c4dd42872">6f2d596</a></td><td><code>Fixed doctests which failed because of the feature -> feature_test renaming</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447">edd4f6e</a></td><td><code>add missing sig_off to doctest</code></td></tr></table>




---

archive/issue_comments_294105.json:
```json
{
    "body": "<div id=\"comment:63\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/052963745bf9de80896ca216c41716f777e87fc8\">0529637</a></td><td><code>Reordered classes in sage.misc.feature_test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f2d596f9445a8bf5e9b8d8b2f73155c4dd42872\">6f2d596</a></td><td><code>Fixed doctests which failed because of the feature -> feature_test renaming</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447\">edd4f6e</a></td><td><code>add missing sig_off to doctest</code></td></tr></table>\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/052963745bf9de80896ca216c41716f777e87fc8\">0529637</a></td><td><code>Reordered classes in sage.misc.feature_test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f2d596f9445a8bf5e9b8d8b2f73155c4dd42872\">6f2d596</a></td><td><code>Fixed doctests which failed because of the feature -> feature_test renaming</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447\">edd4f6e</a></td><td><code>add missing sig_off to doctest</code></td></tr></table>\n",
    "created_at": "2016-08-18T04:40:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294105",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:63"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/052963745bf9de80896ca216c41716f777e87fc8">0529637</a></td><td><code>Reordered classes in sage.misc.feature_test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f2d596f9445a8bf5e9b8d8b2f73155c4dd42872">6f2d596</a></td><td><code>Fixed doctests which failed because of the feature -> feature_test renaming</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447">edd4f6e</a></td><td><code>add missing sig_off to doctest</code></td></tr></table>

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/052963745bf9de80896ca216c41716f777e87fc8">0529637</a></td><td><code>Reordered classes in sage.misc.feature_test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f2d596f9445a8bf5e9b8d8b2f73155c4dd42872">6f2d596</a></td><td><code>Fixed doctests which failed because of the feature -> feature_test renaming</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447">edd4f6e</a></td><td><code>add missing sig_off to doctest</code></td></tr></table>




---

archive/issue_events_287548.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-08-18T04:40:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287548"
}
```



---

archive/issue_events_287549.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-22T06:23:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287549"
}
```



---

archive/issue_events_287550.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-22T06:23:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287550"
}
```



---

archive/issue_comments_294106.json:
```json
{
    "body": "Changed commit from **[`edd4f6e`](https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447)** to **[`2111eb3`](https://github.com/sagemath/sagetrac-mirror/commit/2111eb35d8a7ca8a13ee477ee0839d98c24b4fa2)**",
    "created_at": "2016-08-25T18:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294106",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`edd4f6e`](https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447)** to **[`2111eb3`](https://github.com/sagemath/sagetrac-mirror/commit/2111eb35d8a7ca8a13ee477ee0839d98c24b4fa2)**



---

archive/issue_comments_294107.json:
```json
{
    "body": "<div id=\"comment:65\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2111eb35d8a7ca8a13ee477ee0839d98c24b4fa2\">2111eb3</a></td><td><code>Move Bliss feature test to feature_test.py</code></td></tr></table>\n",
    "created_at": "2016-08-25T18:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294107",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:65"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2111eb35d8a7ca8a13ee477ee0839d98c24b4fa2">2111eb3</a></td><td><code>Move Bliss feature test to feature_test.py</code></td></tr></table>




---

archive/issue_comments_294108.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nSince `is_package_installed` is very sage (the distribution) specific, it causes trouble for package managers which would like to refer to check whether a package is available on the local system instead of whether it has been installed with `sage -i` (or similar.)\nThis replaces all occurrences of `is_package_installed` (which are not part of sage the distribution) with a \"feature\" check which is performed much in the spirit of autoconf: check for the presence of the features needed, not for version numbers.\nThese checks are certainly not perfect yet and will need to evolve over time.",
    "created_at": "2016-08-25T19:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294108",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:66" align="right">comment:66</div>

Since `is_package_installed` is very sage (the distribution) specific, it causes trouble for package managers which would like to refer to check whether a package is available on the local system instead of whether it has been installed with `sage -i` (or similar.)
This replaces all occurrences of `is_package_installed` (which are not part of sage the distribution) with a "feature" check which is performed much in the spirit of autoconf: check for the presence of the features needed, not for version numbers.
These checks are certainly not perfect yet and will need to evolve over time.



---

archive/issue_comments_294109.json:
```json
{
    "body": "<div id=\"comment:67\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3857a626302fc69a23fcff0fae2336f7b85464a\">c3857a6</a></td><td><code>Bliss feature is an OptionalModule</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44e9a5f46a85a3c9c5835a66c65f38edc4483b0c\">44e9a5f</a></td><td><code>Fix suffix of cythonized files</code></td></tr></table>\n",
    "created_at": "2016-08-25T19:50:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294109",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:67"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3857a626302fc69a23fcff0fae2336f7b85464a">c3857a6</a></td><td><code>Bliss feature is an OptionalModule</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44e9a5f46a85a3c9c5835a66c65f38edc4483b0c">44e9a5f</a></td><td><code>Fix suffix of cythonized files</code></td></tr></table>




---

archive/issue_comments_294110.json:
```json
{
    "body": "Changed commit from **[`2111eb3`](https://github.com/sagemath/sagetrac-mirror/commit/2111eb35d8a7ca8a13ee477ee0839d98c24b4fa2)** to **[`44e9a5f`](https://github.com/sagemath/sagetrac-mirror/commit/44e9a5f46a85a3c9c5835a66c65f38edc4483b0c)**",
    "created_at": "2016-08-25T19:50:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294110",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2111eb3`](https://github.com/sagemath/sagetrac-mirror/commit/2111eb35d8a7ca8a13ee477ee0839d98c24b4fa2)** to **[`44e9a5f`](https://github.com/sagemath/sagetrac-mirror/commit/44e9a5f46a85a3c9c5835a66c65f38edc4483b0c)**



---

archive/issue_comments_294111.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nNeeds to be merged with Sage 7.4.beta2.",
    "created_at": "2016-08-26T11:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294111",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:68" align="right">comment:68</div>

Needs to be merged with Sage 7.4.beta2.



---

archive/issue_events_287551.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-26T11:43:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287551"
}
```



---

archive/issue_events_287552.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-26T11:43:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287552"
}
```



---

archive/issue_comments_294112.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nFor `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence in Sage, but that doesn't have to be the case.\n\nAnd once you do this, you can use the library check in `src/sage_setup/optional_extension.py` to decide which optional extensions to build.",
    "created_at": "2016-08-26T11:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294112",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:69" align="right">comment:69</div>

For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence in Sage, but that doesn't have to be the case.

And once you do this, you can use the library check in `src/sage_setup/optional_extension.py` to decide which optional extensions to build.



---

archive/issue_comments_294113.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nThe changes to `src/sage/misc/cython.py` might make sense but do not belong to this ticket.",
    "created_at": "2016-08-26T12:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294113",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:70" align="right">comment:70</div>

The changes to `src/sage/misc/cython.py` might make sense but do not belong to this ticket.



---

archive/issue_comments_294114.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nI must say to me in sage-on-gentoo the fact that the current `OptionalModule` only require presence to build the extension is problematic but I don't expect a solution to that particular aspect in the near future.\nIn effect the fact that you only check for presence/availability as a signal for building is introducing automagic dependencies.\n\nI currently have a variable mechanism to signal that the dependency should be present and I want to build. A `setup.cfg` could be a viable solution. I realise that it would be a burden in the current sage model in the short term.",
    "created_at": "2016-08-26T12:14:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294114",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:71" align="right">comment:71</div>

I must say to me in sage-on-gentoo the fact that the current `OptionalModule` only require presence to build the extension is problematic but I don't expect a solution to that particular aspect in the near future.
In effect the fact that you only check for presence/availability as a signal for building is introducing automagic dependencies.

I currently have a variable mechanism to signal that the dependency should be present and I want to build. A `setup.cfg` could be a viable solution. I realise that it would be a burden in the current sage model in the short term.



---

archive/issue_comments_294115.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@kiwifb](#comment:71):\n> I must say to me in sage-on-gentoo the fact that the current `OptionalModule` only require presence to build the extension is problematic but I don't expect a solution to that particular aspect in the near future.\n\nIdeally, Sage should have something like Gentoo's `USE` flags for optional dependencies...",
    "created_at": "2016-08-26T12:16:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294115",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@kiwifb](#comment:71):
> I must say to me in sage-on-gentoo the fact that the current `OptionalModule` only require presence to build the extension is problematic but I don't expect a solution to that particular aspect in the near future.

Ideally, Sage should have something like Gentoo's `USE` flags for optional dependencies...



---

archive/issue_comments_294116.json:
```json
{
    "body": "<div id=\"comment:74\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a427d751fb1531306c8e35fe8cdfc7f755b8f243\">a427d75</a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/20382/replace_is_package_installed_with_features</code></td></tr></table>\n",
    "created_at": "2016-09-01T20:11:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294116",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:74"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a427d751fb1531306c8e35fe8cdfc7f755b8f243">a427d75</a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/20382/replace_is_package_installed_with_features</code></td></tr></table>




---

archive/issue_comments_294117.json:
```json
{
    "body": "Changed commit from **[`44e9a5f`](https://github.com/sagemath/sagetrac-mirror/commit/44e9a5f46a85a3c9c5835a66c65f38edc4483b0c)** to **[`a427d75`](https://github.com/sagemath/sagetrac-mirror/commit/a427d751fb1531306c8e35fe8cdfc7f755b8f243)**",
    "created_at": "2016-09-01T20:11:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294117",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`44e9a5f`](https://github.com/sagemath/sagetrac-mirror/commit/44e9a5f46a85a3c9c5835a66c65f38edc4483b0c)** to **[`a427d75`](https://github.com/sagemath/sagetrac-mirror/commit/a427d751fb1531306c8e35fe8cdfc7f755b8f243)**



---

archive/issue_comments_294118.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@jdemeyer](#comment:69):\n> For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence  in Sage, but that doesn't have to be the case.\n\nOk. I am splitting this up.\n\n> And once you do this, you can use the library check in `src/sage_setup/optional_extension.py` to decide which optional extensions to build.\n\nThat would be a followup ticket I believe.",
    "created_at": "2016-09-01T20:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294118",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@jdemeyer](#comment:69):
> For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence  in Sage, but that doesn't have to be the case.

Ok. I am splitting this up.

> And once you do this, you can use the library check in `src/sage_setup/optional_extension.py` to decide which optional extensions to build.

That would be a followup ticket I believe.



---

archive/issue_comments_294119.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@jdemeyer](#comment:70):\n> The changes to `src/sage/misc/cython.py` might make sense but do not belong to this ticket.\n\nI'd prefer to sneak this change in here. The shared library test code in here actually tests that this does the right thing and I'd prefer not to write some constructed doctest for something like this.",
    "created_at": "2016-09-01T21:21:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294119",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@jdemeyer](#comment:70):
> The changes to `src/sage/misc/cython.py` might make sense but do not belong to this ticket.

I'd prefer to sneak this change in here. The shared library test code in here actually tests that this does the right thing and I'd prefer not to write some constructed doctest for something like this.



---

archive/issue_comments_294120.json:
```json
{
    "body": "Changed commit from **[`a427d75`](https://github.com/sagemath/sagetrac-mirror/commit/a427d751fb1531306c8e35fe8cdfc7f755b8f243)** to **[`2086217`](https://github.com/sagemath/sagetrac-mirror/commit/20862171588e5dbcd0d08e77cf8b0ab8cc718581)**",
    "created_at": "2016-09-01T21:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294120",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a427d75`](https://github.com/sagemath/sagetrac-mirror/commit/a427d751fb1531306c8e35fe8cdfc7f755b8f243)** to **[`2086217`](https://github.com/sagemath/sagetrac-mirror/commit/20862171588e5dbcd0d08e77cf8b0ab8cc718581)**



---

archive/issue_comments_294121.json:
```json
{
    "body": "<div id=\"comment:77\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20862171588e5dbcd0d08e77cf8b0ab8cc718581\">2086217</a></td><td><code>Isolate library checks from the OptionalModule implementation code</code></td></tr></table>\n",
    "created_at": "2016-09-01T21:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294121",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:77"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20862171588e5dbcd0d08e77cf8b0ab8cc718581">2086217</a></td><td><code>Isolate library checks from the OptionalModule implementation code</code></td></tr></table>




---

archive/issue_events_287553.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-09-01T21:28:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287553"
}
```



---

archive/issue_events_287554.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-09-01T21:28:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287554"
}
```



---

archive/issue_comments_294122.json:
```json
{
    "body": "Dependencies: **#21289**",
    "created_at": "2016-09-01T21:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294122",
    "user": "https://github.com/kiwifb"
}
```

Dependencies: **#21289**



---

archive/issue_events_287555.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-09-01T21:36:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287555"
}
```



---

archive/issue_events_287556.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-09-01T21:36:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287556"
}
```



---

archive/issue_comments_294123.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nSorry, but it will need rebasing against #21289 which is already merged for the next beta.",
    "created_at": "2016-09-01T21:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294123",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:79" align="right">comment:79</div>

Sorry, but it will need rebasing against #21289 which is already merged for the next beta.



---

archive/issue_comments_294124.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@saraedum](#comment:75):\n> Replying to [@jdemeyer](#comment:69):\n> > For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence  in Sage, but that doesn't have to be the case.\n\n> Ok. I am splitting this up.\n\nWell, I meant *really* splitting those it up: get rid of `OptionalModule` altogether and replace it by `Module`. And remove the dependencies: if the dependencies are not satisfied, the module will not import. There is no need for an additional check.\n\n> > And once you do this, you can use the library check in `src/sage_setup/optional_extension.py` to decide which optional extensions to build.\n\n> That would be a followup ticket I believe.\n\nFair enough.",
    "created_at": "2016-09-02T12:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294124",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@saraedum](#comment:75):
> Replying to [@jdemeyer](#comment:69):
> > For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence  in Sage, but that doesn't have to be the case.

> Ok. I am splitting this up.

Well, I meant *really* splitting those it up: get rid of `OptionalModule` altogether and replace it by `Module`. And remove the dependencies: if the dependencies are not satisfied, the module will not import. There is no need for an additional check.

> > And once you do this, you can use the library check in `src/sage_setup/optional_extension.py` to decide which optional extensions to build.

> That would be a followup ticket I believe.

Fair enough.



---

archive/issue_comments_294125.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@jdemeyer](#comment:80):\n> Replying to [@saraedum](#comment:75):\n> > Replying to [@jdemeyer](#comment:69):\n> > > For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence  in Sage, but that doesn't have to be the case.\n\n> > Ok. I am splitting this up.\n\n> \n> Well, I meant *really* splitting those it up: get rid of `OptionalModule` altogether and replace it by `Module`. And remove the dependencies: if the dependencies are not satisfied, the module will not import. There is no need for an additional check.\n\nSure, the check is not necessary. But I would like to tell people what is the problem here. In that particular case, the module also would not import but that's more obscure than telling people that the required library is missing. More generally, an `OptionalModule` checks whether the module imports and is functional. Running some tests to make sure that the underlying library is working properly is a reasonable thing to do imho.",
    "created_at": "2016-09-08T01:28:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294125",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@jdemeyer](#comment:80):
> Replying to [@saraedum](#comment:75):
> > Replying to [@jdemeyer](#comment:69):
> > > For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence  in Sage, but that doesn't have to be the case.

> > Ok. I am splitting this up.

> 
> Well, I meant *really* splitting those it up: get rid of `OptionalModule` altogether and replace it by `Module`. And remove the dependencies: if the dependencies are not satisfied, the module will not import. There is no need for an additional check.

Sure, the check is not necessary. But I would like to tell people what is the problem here. In that particular case, the module also would not import but that's more obscure than telling people that the required library is missing. More generally, an `OptionalModule` checks whether the module imports and is functional. Running some tests to make sure that the underlying library is working properly is a reasonable thing to do imho.



---

archive/issue_comments_294126.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [@saraedum](#comment:81):\n> But I would like to tell people what is the problem here.\n\nThe problem is that they need to install the optional Sage package. That's what you should tell.\n\n> In that particular case, the module also would not import but that's more obscure than telling people that the required library is missing.\n\nBut the `OptionalModule` machine checks whether the optional Sage package is installed. Having the library available from the OS would not help.\n\n> Running some tests to make sure that the underlying library is working properly is a reasonable thing to do imho.\n\nI don't like to put the same information in different places. That way, you will eventually end up with inconsistencies. The information that the module needs the library should be in exactly one place, namely the build system which decides when the module is compiled.",
    "created_at": "2016-09-08T06:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294126",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [@saraedum](#comment:81):
> But I would like to tell people what is the problem here.

The problem is that they need to install the optional Sage package. That's what you should tell.

> In that particular case, the module also would not import but that's more obscure than telling people that the required library is missing.

But the `OptionalModule` machine checks whether the optional Sage package is installed. Having the library available from the OS would not help.

> Running some tests to make sure that the underlying library is working properly is a reasonable thing to do imho.

I don't like to put the same information in different places. That way, you will eventually end up with inconsistencies. The information that the module needs the library should be in exactly one place, namely the build system which decides when the module is compiled.



---

archive/issue_comments_294127.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [@jdemeyer](#comment:82):\n> Replying to [@saraedum](#comment:81):\n> > But I would like to tell people what is the problem here.\n\n> \n> The problem is that they need to install the optional Sage package. That's what you should tell.\n> \n> > In that particular case, the module also would not import but that's more obscure than telling people that the required library is missing.\n\n> \n> But the `OptionalModule` machine checks whether the optional Sage package is installed. Having the library available from the OS would not help.\n> \n\nIndeed. The current build system assumes that if the package is installed it is because I explicitly want it in sage. It is a long standing convention which from where I sit on the outside is called automagic detection. The reality is that it belongs to configuration space (with availability checking - autoconf style). Sure it is possibly more risky to use an outside package but if it satisfy the availability checking, why not?\n\nAfter all, at least some of us want to push sage down that way. \n\nAlso note that for executables `Features` only cares about availability in the path, from sage or not (as it should as far as I am concerned). So not caring whether it is from sage or not is in spirit. \n\nI'll admit to have a bias since I want most of `sage/misc/package.py` to be gone with a top priority on `is_package_installed` in particular.",
    "created_at": "2016-09-08T07:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294127",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [@jdemeyer](#comment:82):
> Replying to [@saraedum](#comment:81):
> > But I would like to tell people what is the problem here.

> 
> The problem is that they need to install the optional Sage package. That's what you should tell.
> 
> > In that particular case, the module also would not import but that's more obscure than telling people that the required library is missing.

> 
> But the `OptionalModule` machine checks whether the optional Sage package is installed. Having the library available from the OS would not help.
> 

Indeed. The current build system assumes that if the package is installed it is because I explicitly want it in sage. It is a long standing convention which from where I sit on the outside is called automagic detection. The reality is that it belongs to configuration space (with availability checking - autoconf style). Sure it is possibly more risky to use an outside package but if it satisfy the availability checking, why not?

After all, at least some of us want to push sage down that way. 

Also note that for executables `Features` only cares about availability in the path, from sage or not (as it should as far as I am concerned). So not caring whether it is from sage or not is in spirit. 

I'll admit to have a bias since I want most of `sage/misc/package.py` to be gone with a top priority on `is_package_installed` in particular.



---

archive/issue_comments_294128.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nReplying to [@kiwifb](#comment:83):\n> The reality is that it belongs to configuration space (with availability checking - autoconf style). Sure it is possibly more risky to use an outside package but if it satisfy the availability checking, why not?\n\nI'm not disagreeing with that. However, it is besides the point. This ticket should implement the current reality, not some future plan.",
    "created_at": "2016-09-08T07:33:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294128",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:84" align="right">comment:84</div>

Replying to [@kiwifb](#comment:83):
> The reality is that it belongs to configuration space (with availability checking - autoconf style). Sure it is possibly more risky to use an outside package but if it satisfy the availability checking, why not?

I'm not disagreeing with that. However, it is besides the point. This ticket should implement the current reality, not some future plan.



---

archive/issue_comments_294129.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nI don't think `feature` can replace the current reality of what happens in `OptionalExtension`. It should be strictly future work. I am OK for it to be left as is until we decide it is time to move.",
    "created_at": "2016-09-08T07:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294129",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:85" align="right">comment:85</div>

I don't think `feature` can replace the current reality of what happens in `OptionalExtension`. It should be strictly future work. I am OK for it to be left as is until we decide it is time to move.



---

archive/issue_comments_294130.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nI guess if building and possibly documentation are the only place left using stuff from `package.py` it could be moved to `sage_setup` where things not needed at run-time belongs in my opinion.",
    "created_at": "2016-09-08T08:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294130",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:86" align="right">comment:86</div>

I guess if building and possibly documentation are the only place left using stuff from `package.py` it could be moved to `sage_setup` where things not needed at run-time belongs in my opinion.



---

archive/issue_comments_294131.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\ndocumentation -> doctesting",
    "created_at": "2016-09-08T08:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294131",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:87" align="right">comment:87</div>

documentation -> doctesting



---

archive/issue_comments_294132.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nI think I have not made my point clear in [comment:82]\n\nWhat I wanted to say: you should remove the check for libraries from the `OptionalModule` features. It is *currently* (whether you like it or not) the job of `OptionalExtension` in `sage_setup` to decide whether or not to build the Python module. I don't see the point of the redundant check in `OptionalModule`. It needlessly complicates things and it is actually wrong (`OptionalModule` requires a Sage package, not a system package).",
    "created_at": "2016-09-16T08:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294132",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:88" align="right">comment:88</div>

I think I have not made my point clear in [comment:82]

What I wanted to say: you should remove the check for libraries from the `OptionalModule` features. It is *currently* (whether you like it or not) the job of `OptionalExtension` in `sage_setup` to decide whether or not to build the Python module. I don't see the point of the redundant check in `OptionalModule`. It needlessly complicates things and it is actually wrong (`OptionalModule` requires a Sage package, not a system package).



---

archive/issue_comments_294133.json:
```json
{
    "body": "Changed commit from **[`2086217`](https://github.com/sagemath/sagetrac-mirror/commit/20862171588e5dbcd0d08e77cf8b0ab8cc718581)** to **[`e23341d`](https://github.com/sagemath/sagetrac-mirror/commit/e23341dacc43e5bc691dd7585d639ce8ef9a0cf7)**",
    "created_at": "2016-10-02T09:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294133",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[`2086217`](https://github.com/sagemath/sagetrac-mirror/commit/20862171588e5dbcd0d08e77cf8b0ab8cc718581)** to **[`e23341d`](https://github.com/sagemath/sagetrac-mirror/commit/e23341dacc43e5bc691dd7585d639ce8ef9a0cf7)**



---

archive/issue_comments_294134.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nRebasing on current develop. Someone else should check that I did everything right. One worry when building in parallel building of documentation kept on failing on `:module:` in `package.py`. When I built serial it just worked.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e23341dacc43e5bc691dd7585d639ce8ef9a0cf7\">e23341d</a></td><td><code>Merge branch 'develop' into features</code></td></tr></table>\n",
    "created_at": "2016-10-02T09:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294134",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:89" align="right">comment:89</div>

Rebasing on current develop. Someone else should check that I did everything right. One worry when building in parallel building of documentation kept on failing on `:module:` in `package.py`. When I built serial it just worked.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e23341dacc43e5bc691dd7585d639ce8ef9a0cf7">e23341d</a></td><td><code>Merge branch 'develop' into features</code></td></tr></table>




---

archive/issue_comments_294135.json:
```json
{
    "body": "Changed branch from **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)** to **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)**",
    "created_at": "2016-10-02T09:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294135",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)** to **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)**



---

archive/issue_comments_294136.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nReplying to [@jdemeyer](#comment:88):\n> I think I have not made my point clear in [comment:82]\n> \n> What I wanted to say: you should remove the check for libraries from the `OptionalModule` features. It is *currently* (whether you like it or not) the job of `OptionalExtension` in `sage_setup` to decide whether or not to build the Python module. I don't see the point of the redundant check in `OptionalModule`. It needlessly complicates things and it is actually wrong (`OptionalModule` requires a Sage package, not a system package).\n\nI don't understand. I meant to write this so it works for a sage that has not been installed through sage-the-distribution. So, for the module to work, I have to check that it has been compiled and that the library it uses actually works. For sage-the-distribution the second part is redundant for other distributions it may not be.",
    "created_at": "2016-11-28T10:00:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294136",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:90" align="right">comment:90</div>

Replying to [@jdemeyer](#comment:88):
> I think I have not made my point clear in [comment:82]
> 
> What I wanted to say: you should remove the check for libraries from the `OptionalModule` features. It is *currently* (whether you like it or not) the job of `OptionalExtension` in `sage_setup` to decide whether or not to build the Python module. I don't see the point of the redundant check in `OptionalModule`. It needlessly complicates things and it is actually wrong (`OptionalModule` requires a Sage package, not a system package).

I don't understand. I meant to write this so it works for a sage that has not been installed through sage-the-distribution. So, for the module to work, I have to check that it has been compiled and that the library it uses actually works. For sage-the-distribution the second part is redundant for other distributions it may not be.



---

archive/issue_comments_294137.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nReplying to [@saraedum](#comment:90):\n> So, for the module to work, I have to check that it has been compiled and that the library it uses actually works.\n\nNo, you don't need to check anything. The module is linked against the library. If the library didn't work, the module probably wouldn't even compile and it certainly wouldn't be importable. If you can import the module, then surely the library works.",
    "created_at": "2017-01-05T16:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294137",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:92" align="right">comment:92</div>

Replying to [@saraedum](#comment:90):
> So, for the module to work, I have to check that it has been compiled and that the library it uses actually works.

No, you don't need to check anything. The module is linked against the library. If the library didn't work, the module probably wouldn't even compile and it certainly wouldn't be importable. If you can import the module, then surely the library works.



---

archive/issue_comments_294138.json:
```json
{
    "body": "Work Issues: **does not apply**",
    "created_at": "2017-01-12T01:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294138",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **does not apply**



---

archive/issue_comments_294139.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nSomething I don't quite get about this:  It seems to be purely for runtime feature checks, which is fine and a good thing to have.  But is there also any intention or thought put into making this usable for build-time feature checks when building Sage?  Is there any way this could be used to check the system for features during `./configure` (i.e. as a replacement for a m4 scripts to do the same)?",
    "created_at": "2017-01-12T09:44:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294139",
    "user": "https://github.com/embray"
}
```

<div id="comment:94" align="right">comment:94</div>

Something I don't quite get about this:  It seems to be purely for runtime feature checks, which is fine and a good thing to have.  But is there also any intention or thought put into making this usable for build-time feature checks when building Sage?  Is there any way this could be used to check the system for features during `./configure` (i.e. as a replacement for a m4 scripts to do the same)?



---

archive/issue_comments_294140.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nWhen we originally discussed this during Sage days the idea was to eventually use it for both, build and compile time. For that it would have to be moved out of the sage library probably. So yes, we thought about this as a possible second step.",
    "created_at": "2017-01-12T17:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294140",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:95" align="right">comment:95</div>

When we originally discussed this during Sage days the idea was to eventually use it for both, build and compile time. For that it would have to be moved out of the sage library probably. So yes, we thought about this as a possible second step.



---

archive/issue_comments_294141.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nThanks for clarifying that.  Yes, for that reason alone it would make sense to have as a stand-alone package of sorts.\n\nIs there anything I can do to help move this forward?  I think getting this to a state where it can also detect already installed dependencies will help massively speed up development time in some cases.",
    "created_at": "2017-01-13T11:07:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294141",
    "user": "https://github.com/embray"
}
```

<div id="comment:96" align="right">comment:96</div>

Thanks for clarifying that.  Yes, for that reason alone it would make sense to have as a stand-alone package of sorts.

Is there anything I can do to help move this forward?  I think getting this to a state where it can also detect already installed dependencies will help massively speed up development time in some cases.



---

archive/issue_comments_294142.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nI am quite happy to have it for run-time only in the first instance. One issue for building is that we are not quite ready to use non sage installed optional package at this stage (i.e. finding optional package not installed by sage).\n\nFixing runtime would remove a burden from sage-on-distro, especially the bits depending on `is_package_installed` that we don't want to use in a distro. Build time can be fixed if the distro decides to support a particular option. But ideally we would want something more fine grained. Ideally it would tie up with a proper configuration phase.",
    "created_at": "2017-01-14T09:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294142",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:97" align="right">comment:97</div>

I am quite happy to have it for run-time only in the first instance. One issue for building is that we are not quite ready to use non sage installed optional package at this stage (i.e. finding optional package not installed by sage).

Fixing runtime would remove a burden from sage-on-distro, especially the bits depending on `is_package_installed` that we don't want to use in a distro. Build time can be fixed if the distro decides to support a particular option. But ideally we would want something more fine grained. Ideally it would tie up with a proper configuration phase.



---

archive/issue_comments_294143.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nReplying to [@kiwifb](#comment:97):\n> I am quite happy to have it for run-time only in the first instance. One issue for building is that we are not quite ready to use non sage installed optional package at this stage (i.e. finding optional package not installed by sage).\n\nI'm not sure what you mean exactly by this.  Why should optional packages be a problem as long as this can be useful for non-optional packages?\n\n> Fixing runtime would remove a burden from sage-on-distro, especially the bits depending on `is_package_installed` that we don't want to use in a distro. Build time can be fixed if the distro decides to support a particular option. But ideally we would want something more fine grained. Ideally it would tie up with a proper configuration phase.\n\nYes, that work is going on in #21566 and other associated tickets.\n\nTo be clear, I think we're in agreement that *this ticket* should not handle any tasks directly related to enabling build-time detection of dependencies.  I agree that's a separate issue.  My point is that we should keep that use-case in mind for this ticket insofar as the checks its provides don't depend on having a fully working Sage install already, and that it exists outside the main Sage package.\n\nIn other words, this ticket could remain focused on fixing the `is_package_installed` issue, but just keep in mind the other use case that this code could help resolve.",
    "created_at": "2017-01-16T13:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294143",
    "user": "https://github.com/embray"
}
```

<div id="comment:98" align="right">comment:98</div>

Replying to [@kiwifb](#comment:97):
> I am quite happy to have it for run-time only in the first instance. One issue for building is that we are not quite ready to use non sage installed optional package at this stage (i.e. finding optional package not installed by sage).

I'm not sure what you mean exactly by this.  Why should optional packages be a problem as long as this can be useful for non-optional packages?

> Fixing runtime would remove a burden from sage-on-distro, especially the bits depending on `is_package_installed` that we don't want to use in a distro. Build time can be fixed if the distro decides to support a particular option. But ideally we would want something more fine grained. Ideally it would tie up with a proper configuration phase.

Yes, that work is going on in #21566 and other associated tickets.

To be clear, I think we're in agreement that *this ticket* should not handle any tasks directly related to enabling build-time detection of dependencies.  I agree that's a separate issue.  My point is that we should keep that use-case in mind for this ticket insofar as the checks its provides don't depend on having a fully working Sage install already, and that it exists outside the main Sage package.

In other words, this ticket could remain focused on fixing the `is_package_installed` issue, but just keep in mind the other use case that this code could help resolve.



---

archive/issue_comments_294144.json:
```json
{
    "body": "Changed branch from **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)** to **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)**",
    "created_at": "2017-03-13T22:34:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294144",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)** to **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)**



---

archive/issue_comments_294145.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nAfter some discussion with jdemeyer, I'll remove the current checks OptionalModule. I'll leave the possibility for such checks in though.",
    "created_at": "2017-03-13T22:35:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294145",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:0" align="right">comment:0</div>

After some discussion with jdemeyer, I'll remove the current checks OptionalModule. I'll leave the possibility for such checks in though.



---

archive/issue_comments_294146.json:
```json
{
    "body": "Changed branch from **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)** to **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)**",
    "created_at": "2017-03-13T22:35:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294146",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)** to **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)**



---

archive/issue_events_287557.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-03-13T22:41:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287557"
}
```



---

archive/issue_events_287558.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-03-13T22:41:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287558"
}
```



---

archive/issue_comments_294147.json:
```json
{
    "body": "Changed branch from **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)** to **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)**",
    "created_at": "2017-03-13T22:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294147",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)** to **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)**



---

archive/issue_comments_294148.json:
```json
{
    "body": "Changed reviewer from **Nicolas M. Thi\u00e9ry, ...** to **Nicolas M. Thi\u00e9ry**",
    "created_at": "2017-03-13T23:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294148",
    "user": "https://github.com/saraedum"
}
```

Changed reviewer from **Nicolas M. Thiéry, ...** to **Nicolas M. Thiéry**



---

archive/issue_comments_294149.json:
```json
{
    "body": "Changed commit from **[`e23341d`](https://github.com/sagemath/sagetrac-mirror/commit/e23341dacc43e5bc691dd7585d639ce8ef9a0cf7)** to **[`c809deb`](https://github.com/sagemath/sagetrac-mirror/commit/c809debf750e7ee2fb3d2792f4ff73ab5626120e)**",
    "created_at": "2017-03-13T23:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294149",
    "user": "https://github.com/saraedum"
}
```

Changed commit from **[`e23341d`](https://github.com/sagemath/sagetrac-mirror/commit/e23341dacc43e5bc691dd7585d639ce8ef9a0cf7)** to **[`c809deb`](https://github.com/sagemath/sagetrac-mirror/commit/c809debf750e7ee2fb3d2792f4ff73ab5626120e)**



---

archive/issue_comments_294150.json:
```json
{
    "body": "Changed work issues from **does not apply** to none",
    "created_at": "2017-03-13T23:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294150",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **does not apply** to none



---

archive/issue_comments_294151.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3947c4fae87db8a06cb250627c9b1fe48a7fb47\">a3947c4</a></td><td><code>Merge branch 'develop' into t/20382/features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c809debf750e7ee2fb3d2792f4ff73ab5626120e\">c809deb</a></td><td><code>Remove runtime dependencies on shared libraries</code></td></tr></table>\n",
    "created_at": "2017-03-13T23:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294151",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3947c4fae87db8a06cb250627c9b1fe48a7fb47">a3947c4</a></td><td><code>Merge branch 'develop' into t/20382/features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c809debf750e7ee2fb3d2792f4ff73ab5626120e">c809deb</a></td><td><code>Remove runtime dependencies on shared libraries</code></td></tr></table>




---

archive/issue_comments_294152.json:
```json
{
    "body": "Changed keywords from none to **days85**",
    "created_at": "2017-03-14T16:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294152",
    "user": "https://github.com/saraedum"
}
```

Changed keywords from none to **days85**



---

archive/issue_comments_294153.json:
```json
{
    "body": "Changed dependencies from **#21289** to none",
    "created_at": "2017-03-14T16:27:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294153",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#21289** to none



---

archive/issue_comments_294154.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nShouldn't *all* feature checks be cached?",
    "created_at": "2017-03-14T16:34:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294154",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

Shouldn't *all* feature checks be cached?



---

archive/issue_comments_294155.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nCopy-paste typo:\n\n```python\nclass Bliss(OptionalModule):\n    r\"\"\"\n    A :class:`Feature` which describes whether the ;module:`sage.graphs.bliss`\n    module has been enabled for this build of Sage and is functional.\n\n    .. NOTE::\n\n------> This module does not depend on :class:`LibFESLibrary`. If the module\n        imports we just assume that the library is working.\n```",
    "created_at": "2017-03-14T16:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294155",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Copy-paste typo:

```python
class Bliss(OptionalModule):
    r"""
    A :class:`Feature` which describes whether the ;module:`sage.graphs.bliss`
    module has been enabled for this build of Sage and is functional.

    .. NOTE::

------> This module does not depend on :class:`LibFESLibrary`. If the module
        imports we just assume that the library is working.
```



---

archive/issue_comments_294156.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI don't like `_test_code`: you define the attribute `_test_code`, pass it through `__init__` and then assign it as the `test_code` attribute. Why so convoluted, you might as well assign `test_code` directly.",
    "created_at": "2017-03-14T16:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294156",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

I don't like `_test_code`: you define the attribute `_test_code`, pass it through `__init__` and then assign it as the `test_code` attribute. Why so convoluted, you might as well assign `test_code` directly.



---

archive/issue_comments_294157.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nSpeaking of test code, wouldn't it be cleaner to move the test code snippets to separate files? Right now, I find it a bit distracting to have the Cython test code in between the Python code implementing the testing logic.",
    "created_at": "2017-03-14T16:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294157",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Speaking of test code, wouldn't it be cleaner to move the test code snippets to separate files? Right now, I find it a bit distracting to have the Cython test code in between the Python code implementing the testing logic.



---

archive/issue_comments_294158.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nTypo: <code>;module:\\`sage.libs.fes\\`</code>",
    "created_at": "2017-03-14T16:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294158",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:0" align="right">comment:0</div>

Typo: <code>;module:\`sage.libs.fes\`</code>



---

archive/issue_comments_294159.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nReplying to [@saraedum](#comment:100):\n> After some discussion with jdemeyer, I'll remove the current checks OptionalModule.\n\nGiven that `OptionalModule` and `Module` essentially do the same thing, can you just get rid of the `OptionalModule` class completely?",
    "created_at": "2017-03-14T16:49:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294159",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:111" align="right">comment:111</div>

Replying to [@saraedum](#comment:100):
> After some discussion with jdemeyer, I'll remove the current checks OptionalModule.

Given that `OptionalModule` and `Module` essentially do the same thing, can you just get rid of the `OptionalModule` class completely?



---

archive/issue_comments_294160.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI don't really like the names `LibFES` and `Bliss`. I would prefer something which clearly reminds that this is just about the module: I would call them `FESModule` and `BlissModule`.",
    "created_at": "2017-03-14T16:50:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294160",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

I don't really like the names `LibFES` and `Bliss`. I would prefer something which clearly reminds that this is just about the module: I would call them `FESModule` and `BlissModule`.



---

archive/issue_comments_294161.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAnother suggestion: split this one big file `src/sage/misc/feature_test.py` up. It would be good to separate the abstract base classes (like `Executable`, `SharedLibrary`,...) from the actual concrete tests.\n\nPersonally, I would even have one file for each package, for example `src/sage/misc/feature_test/bliss.py` for `BlissLibrary` and `BlissModule`. In this case, you can define the Cython test code as module global, which would solve [comment:109] too.",
    "created_at": "2017-03-14T16:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294161",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

Another suggestion: split this one big file `src/sage/misc/feature_test.py` up. It would be good to separate the abstract base classes (like `Executable`, `SharedLibrary`,...) from the actual concrete tests.

Personally, I would even have one file for each package, for example `src/sage/misc/feature_test/bliss.py` for `BlissLibrary` and `BlissModule`. In this case, you can define the Cython test code as module global, which would solve [comment:109] too.



---

archive/issue_comments_294162.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nExcept for the typos, we do not fully agree on whether the above should be changed or not. jdemeyer agreed to split up the module, introduce caching, and do the renamings himself.",
    "created_at": "2017-03-14T19:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294162",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:4" align="right">comment:4</div>

Except for the typos, we do not fully agree on whether the above should be changed or not. jdemeyer agreed to split up the module, introduce caching, and do the renamings himself.



---

archive/issue_events_287559.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-03-14T19:22:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287559"
}
```



---

archive/issue_events_287560.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-03-14T19:22:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287560"
}
```



---

archive/issue_events_287561.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-14T19:22:54Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "subject": "https://github.com/saraedum",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287561"
}
```



---

archive/issue_comments_294163.json:
```json
{
    "body": "Dependencies: **#22113**",
    "created_at": "2017-03-15T15:02:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294163",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#22113**



---

archive/issue_comments_294164.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThis is a minor nit, but is there a reason this isn't using `super().__init__` for calling the base-class `__init__`s?",
    "created_at": "2017-04-03T07:06:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294164",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">comment:7</div>

This is a minor nit, but is there a reason this isn't using `super().__init__` for calling the base-class `__init__`s?



---

archive/issue_comments_294165.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nWhat should we do about this issue? I had put a lot of work into this and I would like to get this merged.\n\nJeroen: Would you agree to merge this as is now (after fixing patchbot errors)? Or can I expect a patch anytime soon?",
    "created_at": "2018-01-31T15:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294165",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:9" align="right">comment:9</div>

What should we do about this issue? I had put a lot of work into this and I would like to get this merged.

Jeroen: Would you agree to merge this as is now (after fixing patchbot errors)? Or can I expect a patch anytime soon?



---

archive/issue_events_287562.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-01-31T15:13:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287562"
}
```



---

archive/issue_events_287563.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-01-31T15:13:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287563"
}
```



---

archive/issue_comments_294166.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nI've in the meantime started moving in a different direction for build-time feature dependency checks, so to me at least my earlier questions about using this for that purpose are moot.  But I'm still +1 on having it for runtime feature checks.\n\nIt looks like the patch does not apply so I think you'll have to set this back to needs_work.  I'd be happy to help rebasing your patch if need be.",
    "created_at": "2018-01-31T15:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294166",
    "user": "https://github.com/embray"
}
```

<div id="comment:0" align="right">comment:0</div>

I've in the meantime started moving in a different direction for build-time feature dependency checks, so to me at least my earlier questions about using this for that purpose are moot.  But I'm still +1 on having it for runtime feature checks.

It looks like the patch does not apply so I think you'll have to set this back to needs_work.  I'd be happy to help rebasing your patch if need be.



---

archive/issue_comments_294167.json:
```json
{
    "body": "Changed branch from **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)** to **[u/jdemeyer/features](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/features)**",
    "created_at": "2018-02-12T14:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294167",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)** to **[u/jdemeyer/features](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/features)**



---

archive/issue_comments_294168.json:
```json
{
    "body": "Changed dependencies from **#22113** to none",
    "created_at": "2018-02-12T14:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294168",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#22113** to none



---

archive/issue_comments_294169.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'll clean this up.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3deea8282218b1549179972183d37b354da9d2e4\">3deea82</a></td><td><code>Add Features to check the environment at runtime</code></td></tr></table>\n",
    "created_at": "2018-02-12T14:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294169",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

I'll clean this up.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3deea8282218b1549179972183d37b354da9d2e4">3deea82</a></td><td><code>Add Features to check the environment at runtime</code></td></tr></table>




---

archive/issue_comments_294170.json:
```json
{
    "body": "Changed author from **Julian R\u00fcth** to **Julian R\u00fcth, Jeroen Demeyer**",
    "created_at": "2018-02-12T14:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294170",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Julian Rüth** to **Julian Rüth, Jeroen Demeyer**



---

archive/issue_comments_294171.json:
```json
{
    "body": "Changed commit from **[`c809deb`](https://github.com/sagemath/sagetrac-mirror/commit/c809debf750e7ee2fb3d2792f4ff73ab5626120e)** to **[`3deea82`](https://github.com/sagemath/sagetrac-mirror/commit/3deea8282218b1549179972183d37b354da9d2e4)**",
    "created_at": "2018-02-12T14:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294171",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`c809deb`](https://github.com/sagemath/sagetrac-mirror/commit/c809debf750e7ee2fb3d2792f4ff73ab5626120e)** to **[`3deea82`](https://github.com/sagemath/sagetrac-mirror/commit/3deea8282218b1549179972183d37b354da9d2e4)**



---

archive/issue_events_287564.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T14:37:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287564"
}
```



---

archive/issue_events_287565.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T14:37:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287565"
}
```



---

archive/issue_comments_294172.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIn some cases, bigger changes were made than just using this new `Features` framework. I'll split those off as separate tickets.",
    "created_at": "2018-02-12T14:40:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294172",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

In some cases, bigger changes were made than just using this new `Features` framework. I'll split those off as separate tickets.



---

archive/issue_comments_294173.json:
```json
{
    "body": "Changed commit from **[`3deea82`](https://github.com/sagemath/sagetrac-mirror/commit/3deea8282218b1549179972183d37b354da9d2e4)** to **[`c244878`](https://github.com/sagemath/sagetrac-mirror/commit/c244878077536ad9bca90b09b8279447bbe2114d)**",
    "created_at": "2018-02-12T14:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294173",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3deea82`](https://github.com/sagemath/sagetrac-mirror/commit/3deea8282218b1549179972183d37b354da9d2e4)** to **[`c244878`](https://github.com/sagemath/sagetrac-mirror/commit/c244878077536ad9bca90b09b8279447bbe2114d)**



---

archive/issue_comments_294174.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c244878077536ad9bca90b09b8279447bbe2114d\">c244878</a></td><td><code>Add Features to check the environment at runtime</code></td></tr></table>\n",
    "created_at": "2018-02-12T14:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294174",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c244878077536ad9bca90b09b8279447bbe2114d">c244878</a></td><td><code>Add Features to check the environment at runtime</code></td></tr></table>




---

archive/issue_comments_294175.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIt seems that `SharedLibrary` is not checking for libraries at all: it just tries to compile some Cython code. So it would be better to rename it as `CythonFeature` or whatever better name I can come up with...",
    "created_at": "2018-02-12T15:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294175",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

It seems that `SharedLibrary` is not checking for libraries at all: it just tries to compile some Cython code. So it would be better to rename it as `CythonFeature` or whatever better name I can come up with...



---

archive/issue_comments_294176.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nReplying to [@jdemeyer](#comment:111):\n> Given that `OptionalModule` and `Module` essentially do the same thing, can you just get rid of the `OptionalModule` class completely?\n\nI will remove `OptionalModule` and also rename `Module` -> `PythonModule`.",
    "created_at": "2018-02-12T15:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294176",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:126" align="right">comment:126</div>

Replying to [@jdemeyer](#comment:111):
> Given that `OptionalModule` and `Module` essentially do the same thing, can you just get rid of the `OptionalModule` class completely?

I will remove `OptionalModule` and also rename `Module` -> `PythonModule`.



---

archive/issue_comments_294177.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI just found a problem which is not easy to fix: there is no way as far as I can tell to silence compiler error in distutils. This means that feature checks will show messages like\n\n```\n/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.4/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lxxxxxxxx\ncollect2: error: ld returned 1 exit status\n```",
    "created_at": "2018-02-12T15:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294177",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

I just found a problem which is not easy to fix: there is no way as far as I can tell to silence compiler error in distutils. This means that feature checks will show messages like

```
/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.4/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lxxxxxxxx
collect2: error: ld returned 1 exit status
```



---

archive/issue_comments_294178.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI could take a look at that. I feel like that's a problem I've solved once before, also when using distutils for feature checks (even if it means temporarily redirecting stdio or something).",
    "created_at": "2018-02-12T16:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294178",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">comment:8</div>

I could take a look at that. I feel like that's a problem I've solved once before, also when using distutils for feature checks (even if it means temporarily redirecting stdio or something).



---

archive/issue_comments_294179.json:
```json
{
    "body": "Changed commit from **[`c244878`](https://github.com/sagemath/sagetrac-mirror/commit/c244878077536ad9bca90b09b8279447bbe2114d)** to **[`91558bd`](https://github.com/sagemath/sagetrac-mirror/commit/91558bd79ce6acfd5afec7089d57f66f5d891950)**",
    "created_at": "2018-02-12T16:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294179",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c244878`](https://github.com/sagemath/sagetrac-mirror/commit/c244878077536ad9bca90b09b8279447bbe2114d)** to **[`91558bd`](https://github.com/sagemath/sagetrac-mirror/commit/91558bd79ce6acfd5afec7089d57f66f5d891950)**



---

archive/issue_comments_294180.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00cb88ee22fcd3596bc665d81a965ca602bde98f\">00cb88e</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91558bd79ce6acfd5afec7089d57f66f5d891950\">91558bd</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T16:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294180",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00cb88ee22fcd3596bc665d81a965ca602bde98f">00cb88e</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91558bd79ce6acfd5afec7089d57f66f5d891950">91558bd</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_294181.json:
```json
{
    "body": "Changed commit from **[`91558bd`](https://github.com/sagemath/sagetrac-mirror/commit/91558bd79ce6acfd5afec7089d57f66f5d891950)** to **[`92f9e79`](https://github.com/sagemath/sagetrac-mirror/commit/92f9e79f10da8b1ef9e32f0db49aa185908cdb59)**",
    "created_at": "2018-02-12T16:17:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294181",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`91558bd`](https://github.com/sagemath/sagetrac-mirror/commit/91558bd79ce6acfd5afec7089d57f66f5d891950)** to **[`92f9e79`](https://github.com/sagemath/sagetrac-mirror/commit/92f9e79f10da8b1ef9e32f0db49aa185908cdb59)**



---

archive/issue_comments_294182.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d85c54746493d24b3ed49dee6913863eb84c28b\">5d85c54</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92f9e79f10da8b1ef9e32f0db49aa185908cdb59\">92f9e79</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T16:17:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294182",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d85c54746493d24b3ed49dee6913863eb84c28b">5d85c54</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92f9e79f10da8b1ef9e32f0db49aa185908cdb59">92f9e79</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_294183.json:
```json
{
    "body": "Changed commit from **[`92f9e79`](https://github.com/sagemath/sagetrac-mirror/commit/92f9e79f10da8b1ef9e32f0db49aa185908cdb59)** to **[`35f6601`](https://github.com/sagemath/sagetrac-mirror/commit/35f6601ed41d1e1f767c46a26b4dea2cadf0fa1f)**",
    "created_at": "2018-02-12T16:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294183",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`92f9e79`](https://github.com/sagemath/sagetrac-mirror/commit/92f9e79f10da8b1ef9e32f0db49aa185908cdb59)** to **[`35f6601`](https://github.com/sagemath/sagetrac-mirror/commit/35f6601ed41d1e1f767c46a26b4dea2cadf0fa1f)**



---

archive/issue_comments_294184.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35f6601ed41d1e1f767c46a26b4dea2cadf0fa1f\">35f6601</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T16:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294184",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35f6601ed41d1e1f767c46a26b4dea2cadf0fa1f">35f6601</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_events_287566.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T16:22:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287566"
}
```



---

archive/issue_events_287567.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T16:22:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287567"
}
```



---

archive/issue_comments_294185.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'm setting this to needs_review mainly for patchbot testing. It's probably going to break somewhere, but it should mostly work.",
    "created_at": "2018-02-12T16:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294185",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

I'm setting this to needs_review mainly for patchbot testing. It's probably going to break somewhere, but it should mostly work.



---

archive/issue_comments_294186.json:
```json
{
    "body": "Dependencies: **#24720**",
    "created_at": "2018-02-12T20:23:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294186",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#24720**



---

archive/issue_comments_294187.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e3ede550ab51759d2cdb3e0598eb34e7dab277a\">5e3ede5</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T20:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294187",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e3ede550ab51759d2cdb3e0598eb34e7dab277a">5e3ede5</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_294188.json:
```json
{
    "body": "Changed commit from **[`35f6601`](https://github.com/sagemath/sagetrac-mirror/commit/35f6601ed41d1e1f767c46a26b4dea2cadf0fa1f)** to **[`5e3ede5`](https://github.com/sagemath/sagetrac-mirror/commit/5e3ede550ab51759d2cdb3e0598eb34e7dab277a)**",
    "created_at": "2018-02-12T20:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294188",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`35f6601`](https://github.com/sagemath/sagetrac-mirror/commit/35f6601ed41d1e1f767c46a26b4dea2cadf0fa1f)** to **[`5e3ede5`](https://github.com/sagemath/sagetrac-mirror/commit/5e3ede550ab51759d2cdb3e0598eb34e7dab277a)**



---

archive/issue_comments_294189.json:
```json
{
    "body": "Changed commit from **[`5e3ede5`](https://github.com/sagemath/sagetrac-mirror/commit/5e3ede550ab51759d2cdb3e0598eb34e7dab277a)** to **[`56a0531`](https://github.com/sagemath/sagetrac-mirror/commit/56a05312a139ea6f77f727a3fc379b563b386f9a)**",
    "created_at": "2018-02-12T20:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294189",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5e3ede5`](https://github.com/sagemath/sagetrac-mirror/commit/5e3ede550ab51759d2cdb3e0598eb34e7dab277a)** to **[`56a0531`](https://github.com/sagemath/sagetrac-mirror/commit/56a05312a139ea6f77f727a3fc379b563b386f9a)**



---

archive/issue_comments_294190.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56a05312a139ea6f77f727a3fc379b563b386f9a\">56a0531</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T20:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294190",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56a05312a139ea6f77f727a3fc379b563b386f9a">56a0531</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_events_287568.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T20:48:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287568"
}
```



---

archive/issue_events_287569.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T20:48:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287569"
}
```



---

archive/issue_comments_294191.json:
```json
{
    "body": "Changed commit from **[`56a0531`](https://github.com/sagemath/sagetrac-mirror/commit/56a05312a139ea6f77f727a3fc379b563b386f9a)** to **[`69ad200`](https://github.com/sagemath/sagetrac-mirror/commit/69ad20017c57129525a4a6b34f0cdb4711021467)**",
    "created_at": "2018-02-12T21:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294191",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`56a0531`](https://github.com/sagemath/sagetrac-mirror/commit/56a05312a139ea6f77f727a3fc379b563b386f9a)** to **[`69ad200`](https://github.com/sagemath/sagetrac-mirror/commit/69ad20017c57129525a4a6b34f0cdb4711021467)**



---

archive/issue_comments_294192.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69ad20017c57129525a4a6b34f0cdb4711021467\">69ad200</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T21:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294192",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69ad20017c57129525a4a6b34f0cdb4711021467">69ad200</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_294193.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI now consider this finished, apart from #24720.",
    "created_at": "2018-02-12T21:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294193",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

I now consider this finished, apart from #24720.



---

archive/issue_comments_294194.json:
```json
{
    "body": "Changed commit from **[`69ad200`](https://github.com/sagemath/sagetrac-mirror/commit/69ad20017c57129525a4a6b34f0cdb4711021467)** to **[`af22cc4`](https://github.com/sagemath/sagetrac-mirror/commit/af22cc45791b95046ae5e50a7f989290257e224b)**",
    "created_at": "2018-02-12T21:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294194",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`69ad200`](https://github.com/sagemath/sagetrac-mirror/commit/69ad20017c57129525a4a6b34f0cdb4711021467)** to **[`af22cc4`](https://github.com/sagemath/sagetrac-mirror/commit/af22cc45791b95046ae5e50a7f989290257e224b)**



---

archive/issue_comments_294195.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af22cc45791b95046ae5e50a7f989290257e224b\">af22cc4</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T21:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294195",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af22cc45791b95046ae5e50a7f989290257e224b">af22cc4</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_294196.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3696d1979dc71abb9a3206eb95f5af725a8b1c6f\">3696d19</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T21:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294196",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3696d1979dc71abb9a3206eb95f5af725a8b1c6f">3696d19</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_294197.json:
```json
{
    "body": "Changed commit from **[`af22cc4`](https://github.com/sagemath/sagetrac-mirror/commit/af22cc45791b95046ae5e50a7f989290257e224b)** to **[`3696d19`](https://github.com/sagemath/sagetrac-mirror/commit/3696d1979dc71abb9a3206eb95f5af725a8b1c6f)**",
    "created_at": "2018-02-12T21:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294197",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`af22cc4`](https://github.com/sagemath/sagetrac-mirror/commit/af22cc45791b95046ae5e50a7f989290257e224b)** to **[`3696d19`](https://github.com/sagemath/sagetrac-mirror/commit/3696d1979dc71abb9a3206eb95f5af725a8b1c6f)**



---

archive/issue_comments_294198.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32a8eab55a755a24faf4b3ba9bc8c796bbfa4fe6\">32a8eab</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T21:52:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294198",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32a8eab55a755a24faf4b3ba9bc8c796bbfa4fe6">32a8eab</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_294199.json:
```json
{
    "body": "Changed commit from **[`3696d19`](https://github.com/sagemath/sagetrac-mirror/commit/3696d1979dc71abb9a3206eb95f5af725a8b1c6f)** to **[`32a8eab`](https://github.com/sagemath/sagetrac-mirror/commit/32a8eab55a755a24faf4b3ba9bc8c796bbfa4fe6)**",
    "created_at": "2018-02-12T21:52:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294199",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3696d19`](https://github.com/sagemath/sagetrac-mirror/commit/3696d1979dc71abb9a3206eb95f5af725a8b1c6f)** to **[`32a8eab`](https://github.com/sagemath/sagetrac-mirror/commit/32a8eab55a755a24faf4b3ba9bc8c796bbfa4fe6)**



---

archive/issue_comments_294200.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIt looks really good. There are a few files remaining to migrate to \"features\" not covered here but that's good for a first iteration and will prove that the concept work. One more file should be migrated in this ticket I think, `databases/cremona.py`  because it is the only file that would use `features/databases.py` as it currently stands.\n\nFor info the following files have stuff to convert\n* coding/linear_code.py\n* coding/guava.py\n* coding/databases.py\n* graphs/generators/smallgraphs.py\n* groups/abelian_gps/abelian_group.py\nAll of these are about some gap packages.",
    "created_at": "2018-02-12T22:09:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294200",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:2" align="right">comment:2</div>

It looks really good. There are a few files remaining to migrate to "features" not covered here but that's good for a first iteration and will prove that the concept work. One more file should be migrated in this ticket I think, `databases/cremona.py`  because it is the only file that would use `features/databases.py` as it currently stands.

For info the following files have stuff to convert
* coding/linear_code.py
* coding/guava.py
* coding/databases.py
* graphs/generators/smallgraphs.py
* groups/abelian_gps/abelian_group.py
All of these are about some gap packages.



---

archive/issue_comments_294201.json:
```json
{
    "body": "<div id=\"comment:143\" align=\"right\">comment:143</div>\n\nReplying to [@kiwifb](#comment:142):\n> One more file should be migrated in this ticket I think, `databases/cremona.py`  because it is the only file that would use `features/databases.py` as it currently stands.\n\nI split that off as #24718.",
    "created_at": "2018-02-13T06:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294201",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:143" align="right">comment:143</div>

Replying to [@kiwifb](#comment:142):
> One more file should be migrated in this ticket I think, `databases/cremona.py`  because it is the only file that would use `features/databases.py` as it currently stands.

I split that off as #24718.



---

archive/issue_comments_294202.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIf you care about this ticket, please review #24722, #24724, #24720 which all deal with improving `sage.misc.cython` to allow for silent operation.",
    "created_at": "2018-02-13T15:41:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294202",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

If you care about this ticket, please review #24722, #24724, #24720 which all deal with improving `sage.misc.cython` to allow for silent operation.



---

archive/issue_comments_294203.json:
```json
{
    "body": "Changed reviewer from **Nicolas M. Thi\u00e9ry** to **Nicolas M. Thi\u00e9ry, Fran\u00e7ois Bissey**",
    "created_at": "2018-02-25T22:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294203",
    "user": "https://github.com/kiwifb"
}
```

Changed reviewer from **Nicolas M. Thiéry** to **Nicolas M. Thiéry, François Bissey**



---

archive/issue_comments_294204.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOK I think it is time to move this ticket further.",
    "created_at": "2018-02-25T22:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294204",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

OK I think it is time to move this ticket further.



---

archive/issue_events_287570.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-02-25T22:23:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287570"
}
```



---

archive/issue_events_287571.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-02-25T22:23:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287571"
}
```



---

archive/issue_events_287572.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-02-25T22:23:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287572"
}
```



---

archive/issue_events_287573.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-02-25T22:23:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287573"
}
```



---

archive/issue_comments_294205.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI never set this to needs_review.",
    "created_at": "2018-02-26T08:55:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294205",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

I never set this to needs_review.



---

archive/issue_events_287574.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-26T08:55:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287574"
}
```



---

archive/issue_events_287575.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-26T08:55:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287575"
}
```



---

archive/issue_comments_294206.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThere is one issue remaining: this shouldn't use `cython_import()` but a direct `cython()` call. For simplicity, I plan to do that once all dependencies are merged.",
    "created_at": "2018-02-26T08:56:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294206",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

There is one issue remaining: this shouldn't use `cython_import()` but a direct `cython()` call. For simplicity, I plan to do that once all dependencies are merged.



---

archive/issue_comments_294207.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOk, at [#20382 comment:138](https://github.com/sagemath/sage/issues/20382#comment:138) you said you considered this done. So I assumed too much out of that. Works well as far as I am concerned.",
    "created_at": "2018-02-26T09:21:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294207",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">comment:8</div>

Ok, at [#20382 comment:138](https://github.com/sagemath/sage/issues/20382#comment:138) you said you considered this done. So I assumed too much out of that. Works well as far as I am concerned.



---

archive/issue_comments_294208.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI guess I meant more broadly \"apart from issues with Cython\".",
    "created_at": "2018-02-26T21:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294208",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

I guess I meant more broadly "apart from issues with Cython".



---

archive/issue_comments_294209.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nIt looks like the dependencies that you listed will be in the next beta - which could turn out to be a rc at this stage. Are there any more tickets that need to go in prior to this one in your opinion?",
    "created_at": "2018-02-26T21:05:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294209",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:0" align="right">comment:0</div>

It looks like the dependencies that you listed will be in the next beta - which could turn out to be a rc at this stage. Are there any more tickets that need to go in prior to this one in your opinion?



---

archive/issue_comments_294210.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\n#24764 would be nice because it touches the same code.",
    "created_at": "2018-02-26T21:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294210",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">comment:1</div>

#24764 would be nice because it touches the same code.



---

archive/issue_comments_294211.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n#24764 is in.",
    "created_at": "2018-03-13T09:18:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294211",
    "user": "https://github.com/slel"
}
```

<div id="comment:2" align="right">comment:2</div>

#24764 is in.



---

archive/issue_comments_294212.json:
```json
{
    "body": "Changed dependencies from **#24720** to none",
    "created_at": "2018-03-13T11:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294212",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#24720** to none



---

archive/issue_comments_294213.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e4c504f07e540d67a18645bed3f234d48828404\">8e4c504</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca\">ad6dcc6</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-03-13T14:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294213",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e4c504f07e540d67a18645bed3f234d48828404">8e4c504</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca">ad6dcc6</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_294214.json:
```json
{
    "body": "Changed commit from **[`32a8eab`](https://github.com/sagemath/sagetrac-mirror/commit/32a8eab55a755a24faf4b3ba9bc8c796bbfa4fe6)** to **[`ad6dcc6`](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)**",
    "created_at": "2018-03-13T14:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294214",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`32a8eab`](https://github.com/sagemath/sagetrac-mirror/commit/32a8eab55a755a24faf4b3ba9bc8c796bbfa4fe6)** to **[`ad6dcc6`](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)**



---

archive/issue_events_287576.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-13T14:50:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287576"
}
```



---

archive/issue_events_287577.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-13T14:50:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287577"
}
```



---

archive/issue_comments_294215.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSetting milestone to sage-pending because I think that this ticket should **not** be merged in Sage 8.2. The reason is that this ticket has a lot of potential to break stuff because it involves optional packages and those are tested poorly. This would be an ideal ticket to merge in 8.3.beta0.",
    "created_at": "2018-03-13T14:50:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294215",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Setting milestone to sage-pending because I think that this ticket should **not** be merged in Sage 8.2. The reason is that this ticket has a lot of potential to break stuff because it involves optional packages and those are tested poorly. This would be an ideal ticket to merge in 8.3.beta0.



---

archive/issue_events_287578.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-13T14:50:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287578"
}
```



---

archive/issue_events_287579.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-13T14:50:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287579"
}
```



---

archive/issue_comments_294216.json:
```json
{
    "body": "Changed reviewer from **Nicolas M. Thi\u00e9ry, Fran\u00e7ois Bissey** to **Nicolas M. Thi\u00e9ry, Fran\u00e7ois Bissey, Julian R\u00fcth**",
    "created_at": "2018-03-23T21:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294216",
    "user": "https://github.com/saraedum"
}
```

Changed reviewer from **Nicolas M. Thiéry, François Bissey** to **Nicolas M. Thiéry, François Bissey, Julian Rüth**



---

archive/issue_events_287580.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-03-23T21:42:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287580"
}
```



---

archive/issue_events_287581.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-03-23T21:42:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287581"
}
```



---

archive/issue_events_287582.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-26T09:54:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287582"
}
```



---

archive/issue_events_287583.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-26T09:54:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287583"
}
```



---

archive/issue_events_287584.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-08T17:27:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287584"
}
```



---

archive/issue_events_287585.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "417875c3004f5996d50a30b9752e5fa96a36e67c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-05-08T17:27:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-287585"
}
```



---

archive/issue_comments_294217.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/features](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/features)** to **[`ad6dcc6`](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)**",
    "created_at": "2018-05-08T17:27:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294217",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/features](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/features)** to **[`ad6dcc6`](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)**



---

archive/issue_comments_294218.json:
```json
{
    "body": "<div id=\"comment:159\" align=\"right\">comment:159</div>\n\nReplying to [@jdemeyer](#comment:155):\n> Setting milestone to sage-pending because I think that this ticket should **not** be merged in Sage 8.2. The reason is that this ticket has a lot of potential to break stuff because it involves optional packages and those are tested poorly. This would be an ideal ticket to merge in 8.3.beta0.\n\nIndeed... help for fixing the consequences in: #25332\n\nAnd one question: the LattE feature from #25400 needs to check for two executables. Should I introduce an abstract class feature \"Executables\" (whose constructor argument would be a list of `Executable` classes)?",
    "created_at": "2018-05-19T08:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294218",
    "user": "https://github.com/videlec"
}
```

<div id="comment:159" align="right">comment:159</div>

Replying to [@jdemeyer](#comment:155):
> Setting milestone to sage-pending because I think that this ticket should **not** be merged in Sage 8.2. The reason is that this ticket has a lot of potential to break stuff because it involves optional packages and those are tested poorly. This would be an ideal ticket to merge in 8.3.beta0.

Indeed... help for fixing the consequences in: #25332

And one question: the LattE feature from #25400 needs to check for two executables. Should I introduce an abstract class feature "Executables" (whose constructor argument would be a list of `Executable` classes)?



---

archive/issue_comments_294219.json:
```json
{
    "body": "Changed commit from **[`ad6dcc6`](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)** to none",
    "created_at": "2018-05-19T08:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-294219",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`ad6dcc6`](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)** to none
