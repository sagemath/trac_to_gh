# Issue 20382: Replace is_package_installed with Features

archive/issues_020145.json:
```json
{
    "assignees": [],
    "body": "\n\nAssignee: **@jdemeyer**\n\nCC:  @mkoeppe @jdemeyer @nexttime @embray @defeo @isuruf @slel\n\nKeywords: **days85**\n\nBranch: **[ad6dcc6](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)**\n\nReviewer: **Nicolas M. Thi\u00e9ry, Fran\u00e7ois Bissey, Julian R\u00fcth**\n\nAuthor: **Julian R\u00fcth, Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20382_\n\n",
    "closed_at": "2018-05-08T17:27:34Z",
    "created_at": "2016-04-07T17:03:13Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Replace is_package_installed with Features",
    "type": "issue",
    "updated_at": "2018-05-19T08:18:39Z",
    "url": "https://github.com/sagemath/sage/issues/20382",
    "user": "https://github.com/saraedum"
}
```


Assignee: **@jdemeyer**

CC:  @mkoeppe @jdemeyer @nexttime @embray @defeo @isuruf @slel

Keywords: **days85**

Branch: **[ad6dcc6](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)**

Reviewer: **Nicolas M. Thiéry, François Bissey, Julian Rüth**

Author: **Julian Rüth, Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/20382_





---

archive/issue_events_259926.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-04-07T17:03:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259926"
}
```



---

archive/issue_events_259927.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-04-07T17:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259927"
}
```



---

archive/issue_events_259928.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-04-07T17:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259928"
}
```



---

archive/issue_events_259929.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-04-07T17:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259929"
}
```



---

archive/issue_comments_296573.json:
```json
{
    "body": "Branch: **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)**",
    "created_at": "2016-04-07T17:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296573",
    "user": "https://github.com/saraedum"
}
```

Branch: **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)**



---

archive/issue_comments_296574.json:
```json
{
    "body": "Commit: **[7c1ca31](https://github.com/sagemath/sagetrac-mirror/commit/7c1ca312c14f1b777563607d919a245e1d48e557)**",
    "created_at": "2016-04-07T23:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296574",
    "user": "https://github.com/kiwifb"
}
```

Commit: **[7c1ca31](https://github.com/sagemath/sagetrac-mirror/commit/7c1ca312c14f1b777563607d919a245e1d48e557)**



---

archive/issue_comments_296575.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nIndeed same kind of work. Much more sophisticated on your part I must say. Do I understand well that you need an executable class for any external binaries that you want to call?\n\nIt could also solve the issue that I was thinking about executables and other files requirement. You should be able to find and use something already installed in a standard location. `theta` being already present in `/usr/local/bin` instead of `$SAGE_LOCAL/bin` (which resolves to `/usr/bin` in sage-on-gentoo) or anywhere in the `PATH`. Similarly you can install `gap` packages in `~/.gap/pkg` and there is no reasons why you shouldn't be able to use those.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3233147cd8405017499bead56e27132cd62216a5\">3233147</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dfd97f8480d64e5547362b6f8c7f92ebffab9030\">dfd97f8</a></td><td><code>Check for grape with GapPackage instead of is_package_installed()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c1ca312c14f1b777563607d919a245e1d48e557\">7c1ca31</a></td><td><code>Check for a working CSDP binary instead of is_package_installed()</code></td></tr></table>\n",
    "created_at": "2016-04-07T23:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296575",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:2'>Comment 2:</a>
Indeed same kind of work. Much more sophisticated on your part I must say. Do I understand well that you need an executable class for any external binaries that you want to call?

It could also solve the issue that I was thinking about executables and other files requirement. You should be able to find and use something already installed in a standard location. `theta` being already present in `/usr/local/bin` instead of `$SAGE_LOCAL/bin` (which resolves to `/usr/bin` in sage-on-gentoo) or anywhere in the `PATH`. Similarly you can install `gap` packages in `~/.gap/pkg` and there is no reasons why you shouldn't be able to use those.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3233147cd8405017499bead56e27132cd62216a5">3233147</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dfd97f8480d64e5547362b6f8c7f92ebffab9030">dfd97f8</a></td><td><code>Check for grape with GapPackage instead of is_package_installed()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c1ca312c14f1b777563607d919a245e1d48e557">7c1ca31</a></td><td><code>Check for a working CSDP binary instead of is_package_installed()</code></td></tr></table>




---

archive/issue_comments_296576.json:
```json
{
    "body": "Changed branch from **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)** to **[u/nthiery/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/replace_is_package_installed_with_features)**",
    "created_at": "2016-04-07T23:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296576",
    "user": "https://github.com/nthiery"
}
```

Changed branch from **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)** to **[u/nthiery/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/replace_is_package_installed_with_features)**



---

archive/issue_comments_296577.json:
```json
{
    "body": "Changed commit from **[7c1ca31](https://github.com/sagemath/sagetrac-mirror/commit/7c1ca312c14f1b777563607d919a245e1d48e557)** to **[97d47af](https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863)**",
    "created_at": "2016-04-07T23:26:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296577",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7c1ca31](https://github.com/sagemath/sagetrac-mirror/commit/7c1ca312c14f1b777563607d919a245e1d48e557)** to **[97d47af](https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863)**



---

archive/issue_comments_296578.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863\">97d47af</a></td><td><code>20382: missing docstring</code></td></tr></table>\n",
    "created_at": "2016-04-07T23:26:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296578",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>Comment 4:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863">97d47af</a></td><td><code>20382: missing docstring</code></td></tr></table>




---

archive/issue_comments_296579.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af\">8b6fcc9</a></td><td><code>20382: desirable error message + typo</code></td></tr></table>\n",
    "created_at": "2016-04-07T23:31:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296579",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af">8b6fcc9</a></td><td><code>20382: desirable error message + typo</code></td></tr></table>




---

archive/issue_comments_296580.json:
```json
{
    "body": "Changed commit from **[97d47af](https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863)** to **[8b6fcc9](https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af)**",
    "created_at": "2016-04-07T23:31:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296580",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[97d47af](https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863)** to **[8b6fcc9](https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af)**



---

archive/issue_comments_296581.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nHandling of `database_gap` will be delicate. The spkg includes bits removed stuff from `gap` that are expected by default (no need to load if present) and one \"real\" gap package that one would need to load (`tomlib`). \n\nThat may require special consideration.",
    "created_at": "2016-04-07T23:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296581",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:6'>Comment 6:</a>
Handling of `database_gap` will be delicate. The spkg includes bits removed stuff from `gap` that are expected by default (no need to load if present) and one "real" gap package that one would need to load (`tomlib`). 

That may require special consideration.



---

archive/issue_comments_296582.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThanks for the pointer about database_gap. I should have a complete proposal up on the other ticket in the next 24 hours.",
    "created_at": "2016-04-07T23:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296582",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'>Comment 7:</a>
Thanks for the pointer about database_gap. I should have a complete proposal up on the other ticket in the next 24 hours.



---

archive/issue_comments_296583.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI think this ticket should replace the other one unless you have a plan. I am making a list of stuff that needs to come from the other ticket and stuff that should use your feature detection. I guess we could split it along those lines.",
    "created_at": "2016-04-08T00:03:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296583",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'>Comment 8:</a>
I think this ticket should replace the other one unless you have a plan. I am making a list of stuff that needs to come from the other ticket and stuff that should use your feature detection. I guess we could split it along those lines.



---

archive/issue_comments_296584.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nGoing through the files that I have changed in #20377 which this ticket should supersede:\n* `sage/databases/cremona.py` we need to check the real presence of a file in a specific location in this case. Adding something to feature may be overkill for that particular case.\n* `sage/game_theory/normal_form_game.py` + `sage/geometry/polyhedron/base.py` look for the `lrs` executable\n* `sage/graphs/generators/classical_geometries.py` already covered in this ticket\n* `sage/graphs/generic_graph.py` I think my stuff should stay. It is mostly straight `try...expect` whether or not a python module is available.\n* `sage/graphs/graph_generators.py` 3 different executables to detect\n* `sage/graphs/lovasz_theta.py` covered here\n* `sage/groups/generic.py` possibly detect if gap package tomlib is present\n* `sage/groups/perm_gps/permgroup.py` again dodgy database_gap detection in one part. The part using the gap `hap` package would need a nice rework not just migration. I'd like to pick the mind of the person who wrote this.\n* `sage/misc/all.py` my stuff should stay. It is removal of `import` no one uses.\n* `sage/rings/polynomial/multi_polynomial_sequence.py` finding one executable",
    "created_at": "2016-04-08T00:13:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296584",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'>Comment 9:</a>
Going through the files that I have changed in #20377 which this ticket should supersede:
* `sage/databases/cremona.py` we need to check the real presence of a file in a specific location in this case. Adding something to feature may be overkill for that particular case.
* `sage/game_theory/normal_form_game.py` + `sage/geometry/polyhedron/base.py` look for the `lrs` executable
* `sage/graphs/generators/classical_geometries.py` already covered in this ticket
* `sage/graphs/generic_graph.py` I think my stuff should stay. It is mostly straight `try...expect` whether or not a python module is available.
* `sage/graphs/graph_generators.py` 3 different executables to detect
* `sage/graphs/lovasz_theta.py` covered here
* `sage/groups/generic.py` possibly detect if gap package tomlib is present
* `sage/groups/perm_gps/permgroup.py` again dodgy database_gap detection in one part. The part using the gap `hap` package would need a nice rework not just migration. I'd like to pick the mind of the person who wrote this.
* `sage/misc/all.py` my stuff should stay. It is removal of `import` no one uses.
* `sage/rings/polynomial/multi_polynomial_sequence.py` finding one executable



---

archive/issue_comments_296585.json:
```json
{
    "body": "Changed branch from **[u/nthiery/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/replace_is_package_installed_with_features)** to **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)**",
    "created_at": "2016-04-08T11:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296585",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/nthiery/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/replace_is_package_installed_with_features)** to **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)**



---

archive/issue_comments_296586.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nIs there overlap with #20182? Should #20182 be rewritten to use this?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e275a8db635e5c9a0f63f9e37acc245616e94dd\">1e275a8</a></td><td><code>Merge branch 'develop' into t/20382/replace_is_package_installed_with_features</code></td></tr></table>\n",
    "created_at": "2016-04-08T15:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296586",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'>Comment 11:</a>
Is there overlap with #20182? Should #20182 be rewritten to use this?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e275a8db635e5c9a0f63f9e37acc245616e94dd">1e275a8</a></td><td><code>Merge branch 'develop' into t/20382/replace_is_package_installed_with_features</code></td></tr></table>




---

archive/issue_comments_296587.json:
```json
{
    "body": "Changed commit from **[8b6fcc9](https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af)** to **[1e275a8](https://github.com/sagemath/sagetrac-mirror/commit/1e275a8db635e5c9a0f63f9e37acc245616e94dd)**",
    "created_at": "2016-04-08T15:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296587",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[8b6fcc9](https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af)** to **[1e275a8](https://github.com/sagemath/sagetrac-mirror/commit/1e275a8db635e5c9a0f63f9e37acc245616e94dd)**



---

archive/issue_comments_296588.json:
```json
{
    "body": "Reviewer: **Nicolas M. Thi\u00e9ry, ...**",
    "created_at": "2016-04-10T05:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296588",
    "user": "https://github.com/nthiery"
}
```

Reviewer: **Nicolas M. Thiéry, ...**



---

archive/issue_comments_296589.json:
```json
{
    "body": "Author: **Julian R\u00fcth**",
    "created_at": "2016-04-10T05:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296589",
    "user": "https://github.com/nthiery"
}
```

Author: **Julian Rüth**



---

archive/issue_comments_296590.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nHi Julian,\n\nJust some rambling, thinking about use cases for this ticket or some follow up:\n\nWhile discussing with the Debian people, it was stressed out that we\nwill eventually want to be able to support simultaneously a stable\nversion of software X (as provided by distributions), and a devel\nversion of it (e.g. for our researchers that need the very latest\nfeatures). Therefore we probably will want to have code that could\nlook like:\n\n```\n        def latest_feature():\n            \"\"\"\n            ...\n\n            EXAMPLES::\n\n                sage: X = ...\n                sage: X.latest_feature()    # optional gap >= 3.5\n            \"\"\"\n            GAP(min_version=3.5).require()      # or some better syntax\n            ...\n            return gap.latest_feature()\n```\n\nTo support this use case we would need:\n\n- support for version checking in the Feature code (probably in a follow up ticket).\n\n  Probably not much can be written generically, except possibly for Executables,\n  trying to pass the --version and scanning the output for something that looks\n  like a version number\n\n- some updates to the doctesting framework to support version\n  annotations (definitely in another ticket)\n\n- mapping feature names appearing in the #optional annotations to actual Feature's\n  (it's going in this direction in #20182).\n\n\nNot directly related to this ticket, but building on the discussion we had while walking in Cernay, we may want to be able to write the annotation as::\n\n```\n        def latest_feature():\n            \"\"\"\n            ...\n\n            .. REQUIRES:: gap >= 3.5\n\n            EXAMPLES::\n\n                sage: X = ...\n                sage: X.latest_feature()\n            \"\"\"\n```\n\nCheers,\n                           Nicolas",
    "created_at": "2016-04-10T05:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296590",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:12'>Comment 12:</a>
Hi Julian,

Just some rambling, thinking about use cases for this ticket or some follow up:

While discussing with the Debian people, it was stressed out that we
will eventually want to be able to support simultaneously a stable
version of software X (as provided by distributions), and a devel
version of it (e.g. for our researchers that need the very latest
features). Therefore we probably will want to have code that could
look like:

```
        def latest_feature():
            """
            ...

            EXAMPLES::

                sage: X = ...
                sage: X.latest_feature()    # optional gap >= 3.5
            """
            GAP(min_version=3.5).require()      # or some better syntax
            ...
            return gap.latest_feature()
```

To support this use case we would need:

- support for version checking in the Feature code (probably in a follow up ticket).

  Probably not much can be written generically, except possibly for Executables,
  trying to pass the --version and scanning the output for something that looks
  like a version number

- some updates to the doctesting framework to support version
  annotations (definitely in another ticket)

- mapping feature names appearing in the #optional annotations to actual Feature's
  (it's going in this direction in #20182).


Not directly related to this ticket, but building on the discussion we had while walking in Cernay, we may want to be able to write the annotation as::

```
        def latest_feature():
            """
            ...

            .. REQUIRES:: gap >= 3.5

            EXAMPLES::

                sage: X = ...
                sage: X.latest_feature()
            """
```

Cheers,
                           Nicolas



---

archive/issue_comments_296591.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/340d36e6eae99706c816bbd57897aa30b09d6fbf\">340d36e</a></td><td><code>Improve reporting of Features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fc00d9374340e6b8de764be36567ed4f2851be9\">0fc00d9</a></td><td><code>grape is in the gap_packages SPKG</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa12d10964c683b19119e500e6a90f2a739f2e15\">aa12d10</a></td><td><code>Fixed typos in Features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76aedb46c3a9b5813db9ffe30e84e3cd0ff113eb\">76aedb4</a></td><td><code>check for GAP package \"hap\" through a Feature test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e451b444e358ca5128cccb3cc4220161d9a4d0d\">2e451b4</a></td><td><code>20382: Proofreading</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863\">97d47af</a></td><td><code>20382: missing docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af\">8b6fcc9</a></td><td><code>20382: desirable error message + typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bba301b7255d4725a0cb0e758ada93025b3e53b\">1bba301</a></td><td><code>Merge branch 'u/nthiery/replace_is_package_installed_with_features' of git://trac.sagemath.org/sage into t/20382/replace_is_package_installed_with_features</code></td></tr></table>\n",
    "created_at": "2016-04-11T02:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296591",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/340d36e6eae99706c816bbd57897aa30b09d6fbf">340d36e</a></td><td><code>Improve reporting of Features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fc00d9374340e6b8de764be36567ed4f2851be9">0fc00d9</a></td><td><code>grape is in the gap_packages SPKG</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa12d10964c683b19119e500e6a90f2a739f2e15">aa12d10</a></td><td><code>Fixed typos in Features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76aedb46c3a9b5813db9ffe30e84e3cd0ff113eb">76aedb4</a></td><td><code>check for GAP package "hap" through a Feature test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e451b444e358ca5128cccb3cc4220161d9a4d0d">2e451b4</a></td><td><code>20382: Proofreading</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97d47afe5405f899e63e655f2aedf409ad35e863">97d47af</a></td><td><code>20382: missing docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b6fcc990f756d34e16c0439815ffbc4155e47af">8b6fcc9</a></td><td><code>20382: desirable error message + typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bba301b7255d4725a0cb0e758ada93025b3e53b">1bba301</a></td><td><code>Merge branch 'u/nthiery/replace_is_package_installed_with_features' of git://trac.sagemath.org/sage into t/20382/replace_is_package_installed_with_features</code></td></tr></table>




---

archive/issue_comments_296592.json:
```json
{
    "body": "Changed commit from **[1e275a8](https://github.com/sagemath/sagetrac-mirror/commit/1e275a8db635e5c9a0f63f9e37acc245616e94dd)** to **[1bba301](https://github.com/sagemath/sagetrac-mirror/commit/1bba301b7255d4725a0cb0e758ada93025b3e53b)**",
    "created_at": "2016-04-11T02:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296592",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1e275a8](https://github.com/sagemath/sagetrac-mirror/commit/1e275a8db635e5c9a0f63f9e37acc245616e94dd)** to **[1bba301](https://github.com/sagemath/sagetrac-mirror/commit/1bba301b7255d4725a0cb0e758ada93025b3e53b)**



---

archive/issue_comments_296593.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nnthiery: About version checks. I think it would be easy to add this in the current setup. However, I would recommend to follow the philosophy of autoconf here. I.e., we should not check for a version because you need to keep track which version range supportes the feature you are looking for (and often things are heavily patched so the version might be misleading.) Instead, we should check for the actual feature/interface required. It is a bit more work of course but usually better and much easier to maintain.",
    "created_at": "2016-04-11T02:36:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296593",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:14'>Comment 14:</a>
nthiery: About version checks. I think it would be easy to add this in the current setup. However, I would recommend to follow the philosophy of autoconf here. I.e., we should not check for a version because you need to keep track which version range supportes the feature you are looking for (and often things are heavily patched so the version might be misleading.) Instead, we should check for the actual feature/interface required. It is a bit more work of course but usually better and much easier to maintain.



---

archive/issue_comments_296594.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nYep there is value in the autoconf approach. On the other hand, since this is mostly about doctests at this point, a version information is more useful for the user: \"oh, I need to upgrade to 3.5\" is simpler than \"oh, I need to upgrade to a recent enough version that supports method xxx on object yyy\". We could do both: make a feature check, and provide a version number for user reporting; but that's more work. Another advantage of version checking is that you just need to fetch the version once, and don't need to relaunch, e.g a GAP command, each time you want to check another feature.",
    "created_at": "2016-04-11T07:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296594",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:15'>Comment 15:</a>
Yep there is value in the autoconf approach. On the other hand, since this is mostly about doctests at this point, a version information is more useful for the user: "oh, I need to upgrade to 3.5" is simpler than "oh, I need to upgrade to a recent enough version that supports method xxx on object yyy". We could do both: make a feature check, and provide a version number for user reporting; but that's more work. Another advantage of version checking is that you just need to fetch the version once, and don't need to relaunch, e.g a GAP command, each time you want to check another feature.



---

archive/issue_comments_296595.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nI like more the centralized approach in this ticket rather than the one in #20377 in which each feature needs a special care. Though many things looks very complicated and the related #20182 is much more readable (though using inheritance from this ticket would save some efforts). Moreover #20182 implements some *database of available features* which is not discussed here. The latter has the advantage of minimizing the requests time after the first call. With the architecture proposed here, each check involves a `Feature` class creation and some associated test...\n\nSome more specific remarks:\n\n- Do we really care about the class `FeatureTestResult`? If the result is `True` then we mostly don't care about explanation and if it is `False` we likely want an error (with an explicit error message). Similarly, I would get rid of `FeatureNotPresentError`. Instead, I would add an `error` and a `message` arguments in the `require` method (with of course some reasonable default which would mimic the current behavior using the standard `RuntimeError`).\n\n- Are you sure `CSDP` is better inside the file `lovasz_theta.py`? Do we want to spread the `Features` all around the modules or should they be centralized?\n\n- Finally class names might be confusing. `GapPackage` is not a handle on a gap package nor something describing what is inside a given package (what I would guess from the name). Similarly, with having `CSDP` has a class when `CSDP` is the name of the program. It would be fine if all of them belong to a fixed module.",
    "created_at": "2016-04-12T13:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296595",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'>Comment 16:</a>
I like more the centralized approach in this ticket rather than the one in #20377 in which each feature needs a special care. Though many things looks very complicated and the related #20182 is much more readable (though using inheritance from this ticket would save some efforts). Moreover #20182 implements some *database of available features* which is not discussed here. The latter has the advantage of minimizing the requests time after the first call. With the architecture proposed here, each check involves a `Feature` class creation and some associated test...

Some more specific remarks:

- Do we really care about the class `FeatureTestResult`? If the result is `True` then we mostly don't care about explanation and if it is `False` we likely want an error (with an explicit error message). Similarly, I would get rid of `FeatureNotPresentError`. Instead, I would add an `error` and a `message` arguments in the `require` method (with of course some reasonable default which would mimic the current behavior using the standard `RuntimeError`).

- Are you sure `CSDP` is better inside the file `lovasz_theta.py`? Do we want to spread the `Features` all around the modules or should they be centralized?

- Finally class names might be confusing. `GapPackage` is not a handle on a gap package nor something describing what is inside a given package (what I would guess from the name). Similarly, with having `CSDP` has a class when `CSDP` is the name of the program. It would be fine if all of them belong to a fixed module.



---

archive/issue_comments_296596.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nAnd last but not the least: what about having the \"packages\" part directly attached to executable?\n\n```\nsage.interfaces.gap.gap.require_package('grape')\n```\ninstead of\n\n```\nsage.misc.features.GapPackage('grape').require()\n```",
    "created_at": "2016-04-12T13:11:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296596",
    "user": "https://github.com/videlec"
}
```

<a id='comment:17'>Comment 17:</a>
And last but not the least: what about having the "packages" part directly attached to executable?

```
sage.interfaces.gap.gap.require_package('grape')
```
instead of

```
sage.misc.features.GapPackage('grape').require()
```



---

archive/issue_comments_296597.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b6df602825964090d13ecdfed09aaee1b14de3e\">7b6df60</a></td><td><code>Buckygen feature</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0529a0746053770b60274a94598525009a41d7be\">0529a07</a></td><td><code>ignore stderr output of theta</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/baf2eedc46e855199030b50357c0e5efefd68d35\">baf2eed</a></td><td><code>Benzene feature test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b2bbf9c9683e9b78cecbdd5fc45fd1602a83bed\">2b2bbf9</a></td><td><code>Added Feature for plantri</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30caced635e1b5f86339de2abca56fc08b3c5249\">30caced</a></td><td><code>Added features for bliss and igraph</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a2f8d20b29861a2d264830e29662055ad300892\">3a2f8d2</a></td><td><code>is_package_installed() is deprecated</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a594ee16f72f7bebd06f82d0fdadfe8a526f178\">2a594ee</a></td><td><code>Feature for lrslib</code></td></tr></table>\n",
    "created_at": "2016-04-12T13:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296597",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b6df602825964090d13ecdfed09aaee1b14de3e">7b6df60</a></td><td><code>Buckygen feature</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0529a0746053770b60274a94598525009a41d7be">0529a07</a></td><td><code>ignore stderr output of theta</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/baf2eedc46e855199030b50357c0e5efefd68d35">baf2eed</a></td><td><code>Benzene feature test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b2bbf9c9683e9b78cecbdd5fc45fd1602a83bed">2b2bbf9</a></td><td><code>Added Feature for plantri</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30caced635e1b5f86339de2abca56fc08b3c5249">30caced</a></td><td><code>Added features for bliss and igraph</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a2f8d20b29861a2d264830e29662055ad300892">3a2f8d2</a></td><td><code>is_package_installed() is deprecated</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a594ee16f72f7bebd06f82d0fdadfe8a526f178">2a594ee</a></td><td><code>Feature for lrslib</code></td></tr></table>




---

archive/issue_comments_296598.json:
```json
{
    "body": "Changed commit from **[1bba301](https://github.com/sagemath/sagetrac-mirror/commit/1bba301b7255d4725a0cb0e758ada93025b3e53b)** to **[2a594ee](https://github.com/sagemath/sagetrac-mirror/commit/2a594ee16f72f7bebd06f82d0fdadfe8a526f178)**",
    "created_at": "2016-04-12T13:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296598",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1bba301](https://github.com/sagemath/sagetrac-mirror/commit/1bba301b7255d4725a0cb0e758ada93025b3e53b)** to **[2a594ee](https://github.com/sagemath/sagetrac-mirror/commit/2a594ee16f72f7bebd06f82d0fdadfe8a526f178)**



---

archive/issue_comments_296599.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@videlec](#comment%3A17):\n> And last but not the least: what about having the \"packages\" part directly attached to executable?\n\nSure. A followup ticket could define `gap.require_package` as a call out\nto `GapPackage().require`.",
    "created_at": "2016-04-12T13:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296599",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@videlec](#comment%3A17):
> And last but not the least: what about having the "packages" part directly attached to executable?

Sure. A followup ticket could define `gap.require_package` as a call out
to `GapPackage().require`.



---

archive/issue_comments_296600.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@videlec](#comment%3A16):\n>  Moreover #20182 implements some *database of available features* which\n>  is not discussed here. The latter has the advantage of minimizing the\n>  requests time after the first call. With the architecture proposed here,\n>  each check involves a `Feature` class creation and some associated test...\n\nThe docstring tells you that you might want to cache the result if you think it\nis a performance problem. Most of the time you are going to call out to a\nbinary anyway so I do not see the point of caching it as a default. \"Premature\noptimization is the root of all evil\u2026\"\nWe could centralize the checks. I do not really have an opinion on that.\n\n> - Do we really care about the class `FeatureTestResult`? If the result is\n>  `True` then we mostly don't care about explanation and if it is `False` we\n>  likely want an error (with an explicit error message).\n\nThat's what `is_present` vs `require` is about. There are places where the default algorithm is chosen depending on the\npresence of some feature.\n\n>  Similarly, I would\n>  get rid of `FeatureNotPresentError`. Instead, I would add an `error` and a\n>  `message` arguments in the `require` method (with of course some\n>  reasonable default which would mimic the current behavior using the\n>  standard `RuntimeError`).\n\nSo you have to catch whatever RuntimeError instead of being able to catch\nsomething specific? I do not see the advantage of that. Also, if I understand\nyour proposal, each caller has to cook up their own error message. I think it\nis nice to have a central place where these error messages and resolutions\nlive.\nFinally, with your approach you do not get the granularity between `abc is not\non the path` vs `abc is there but does not work`. That's something that some\npeople requested.\n\n> - Are you sure `CSDP` is better inside the file `lovasz_theta.py`? Do we\n>  want to spread the `Features` all around the modules or should they be\n>  centralized?\n\nSee above.\n\n> - Finally class names might be confusing. `GapPackage` is not a handle on\n>  a gap package nor something describing what is inside a given package\n>  (what I would guess from the name).\n\nGapPackage lives in sage.misc.feature. So it should be clear that this is not\nthe actual package. We can suffix everything with Feature if that is preferred.\nI prefer short class names if possible.\n\n>  Similarly, with having `CSDP` has a\n>  class when `CSDP` is the name of the program. It would be fine if all of\n>  them belong to a fixed module.\n\nSee above. (Sorry if I misunderstood you. It seems you are raising the\ncentralization vs localization issue several times in your comment.)",
    "created_at": "2016-04-12T13:51:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296600",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@videlec](#comment%3A16):
>  Moreover #20182 implements some *database of available features* which
>  is not discussed here. The latter has the advantage of minimizing the
>  requests time after the first call. With the architecture proposed here,
>  each check involves a `Feature` class creation and some associated test...

The docstring tells you that you might want to cache the result if you think it
is a performance problem. Most of the time you are going to call out to a
binary anyway so I do not see the point of caching it as a default. "Premature
optimization is the root of all evil…"
We could centralize the checks. I do not really have an opinion on that.

> - Do we really care about the class `FeatureTestResult`? If the result is
>  `True` then we mostly don't care about explanation and if it is `False` we
>  likely want an error (with an explicit error message).

That's what `is_present` vs `require` is about. There are places where the default algorithm is chosen depending on the
presence of some feature.

>  Similarly, I would
>  get rid of `FeatureNotPresentError`. Instead, I would add an `error` and a
>  `message` arguments in the `require` method (with of course some
>  reasonable default which would mimic the current behavior using the
>  standard `RuntimeError`).

So you have to catch whatever RuntimeError instead of being able to catch
something specific? I do not see the advantage of that. Also, if I understand
your proposal, each caller has to cook up their own error message. I think it
is nice to have a central place where these error messages and resolutions
live.
Finally, with your approach you do not get the granularity between `abc is not
on the path` vs `abc is there but does not work`. That's something that some
people requested.

> - Are you sure `CSDP` is better inside the file `lovasz_theta.py`? Do we
>  want to spread the `Features` all around the modules or should they be
>  centralized?

See above.

> - Finally class names might be confusing. `GapPackage` is not a handle on
>  a gap package nor something describing what is inside a given package
>  (what I would guess from the name).

GapPackage lives in sage.misc.feature. So it should be clear that this is not
the actual package. We can suffix everything with Feature if that is preferred.
I prefer short class names if possible.

>  Similarly, with having `CSDP` has a
>  class when `CSDP` is the name of the program. It would be fine if all of
>  them belong to a fixed module.

See above. (Sorry if I misunderstood you. It seems you are raising the
centralization vs localization issue several times in your comment.)



---

archive/issue_comments_296601.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@nthiery](#comment%3A15):\n> Yep there is value in the autoconf approach. On the other hand, since this is mostly about doctests at this point, a version information is more useful for the user: \"oh, I need to upgrade to 3.5\" is simpler than \"oh, I need to upgrade to a recent enough version that supports method xxx on object yyy\". We could do both: make a feature check, and provide a version number for user reporting; but that's more work. Another advantage of version checking is that you just need to fetch the version once, and don't need to relaunch, e.g a GAP command, each time you want to check another feature.\n> \n\nSure. Both options are valid. They are not in the scope of this ticket I\nthink. In either case, such \"features\" can easily be added to Feature.",
    "created_at": "2016-04-12T13:52:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296601",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@nthiery](#comment%3A15):
> Yep there is value in the autoconf approach. On the other hand, since this is mostly about doctests at this point, a version information is more useful for the user: "oh, I need to upgrade to 3.5" is simpler than "oh, I need to upgrade to a recent enough version that supports method xxx on object yyy". We could do both: make a feature check, and provide a version number for user reporting; but that's more work. Another advantage of version checking is that you just need to fetch the version once, and don't need to relaunch, e.g a GAP command, each time you want to check another feature.
> 

Sure. Both options are valid. They are not in the scope of this ticket I
think. In either case, such "features" can easily be added to Feature.



---

archive/issue_comments_296602.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90be504cc586943c6cccc57e5d349d4ca0f56b19\">90be504</a></td><td><code>Centralize feature tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da5e89310026e46c75adbb47560c14342ac5456c\">da5e893</a></td><td><code>More checks for Lrs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9cbda32ec480854c3e857543bd9fed5dd7df2e5\">a9cbda3</a></td><td><code>Move generic resolution information from Executable to Feature</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2007e1822e0684078323677211c3a893d5af414e\">2007e18</a></td><td><code>Add Feature CremonaDatabase</code></td></tr></table>\n",
    "created_at": "2016-04-13T21:25:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296602",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>Comment 22:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90be504cc586943c6cccc57e5d349d4ca0f56b19">90be504</a></td><td><code>Centralize feature tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da5e89310026e46c75adbb47560c14342ac5456c">da5e893</a></td><td><code>More checks for Lrs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9cbda32ec480854c3e857543bd9fed5dd7df2e5">a9cbda3</a></td><td><code>Move generic resolution information from Executable to Feature</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2007e1822e0684078323677211c3a893d5af414e">2007e18</a></td><td><code>Add Feature CremonaDatabase</code></td></tr></table>




---

archive/issue_comments_296603.json:
```json
{
    "body": "Changed commit from **[2a594ee](https://github.com/sagemath/sagetrac-mirror/commit/2a594ee16f72f7bebd06f82d0fdadfe8a526f178)** to **[2007e18](https://github.com/sagemath/sagetrac-mirror/commit/2007e1822e0684078323677211c3a893d5af414e)**",
    "created_at": "2016-04-13T21:25:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296603",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2a594ee](https://github.com/sagemath/sagetrac-mirror/commit/2a594ee16f72f7bebd06f82d0fdadfe8a526f178)** to **[2007e18](https://github.com/sagemath/sagetrac-mirror/commit/2007e1822e0684078323677211c3a893d5af414e)**



---

archive/issue_comments_296604.json:
```json
{
    "body": "Work Issues: **reorder classes in sage.misc.feature**",
    "created_at": "2016-04-13T21:26:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296604",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **reorder classes in sage.misc.feature**



---

archive/issue_comments_296605.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nIf I do `ls` in `sage/misc` directory and I see the file `feature.py` listed, I would never be able to guess its content. Can the filename be more verbose maybe `package_feature.py`?",
    "created_at": "2016-04-15T21:32:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296605",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:24'>Comment 24:</a>
If I do `ls` in `sage/misc` directory and I see the file `feature.py` listed, I would never be able to guess its content. Can the filename be more verbose maybe `package_feature.py`?



---

archive/issue_comments_296606.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nReplying to [@seblabbe](#comment%3A24):\n> If I do `ls` in `sage/misc` directory and I see the file `feature.py` listed, I would never be able to guess its content. Can the filename be more verbose maybe `package_feature.py`?\n\nWould not make sense. It is not only about packages but also system softwares and libraries on the system. However, it could contains the words `dependencies` or `requirement`. I am not sure what would be the clearest.",
    "created_at": "2016-04-16T12:40:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296606",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'>Comment 25:</a>
Replying to [@seblabbe](#comment%3A24):
> If I do `ls` in `sage/misc` directory and I see the file `feature.py` listed, I would never be able to guess its content. Can the filename be more verbose maybe `package_feature.py`?

Would not make sense. It is not only about packages but also system softwares and libraries on the system. However, it could contains the words `dependencies` or `requirement`. I am not sure what would be the clearest.



---

archive/issue_comments_296607.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nMaybe something like ``feature_test``? This seems to be consistent with autoconf's vocabulary.",
    "created_at": "2016-04-18T00:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296607",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:26'>Comment 26:</a>
Maybe something like ``feature_test``? This seems to be consistent with autoconf's vocabulary.



---

archive/issue_comments_296608.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nI like `feature_test`. I will rename it to that.",
    "created_at": "2016-04-21T09:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296608",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:27'>Comment 27:</a>
I like `feature_test`. I will rename it to that.



---

archive/issue_comments_296609.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nHello,\n\nThis code is mostly Sage agnostic right? Would it be possible to move this code out of Sage source code? It would better be in `sage/src/sage_setup/` or whatever appropriate (even possibly an external python module). We might want to use it outside of Sage or before Sage is built to track possible dependencies.",
    "created_at": "2016-04-27T01:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296609",
    "user": "https://github.com/videlec"
}
```

<a id='comment:28'>Comment 28:</a>
Hello,

This code is mostly Sage agnostic right? Would it be possible to move this code out of Sage source code? It would better be in `sage/src/sage_setup/` or whatever appropriate (even possibly an external python module). We might want to use it outside of Sage or before Sage is built to track possible dependencies.



---

archive/issue_comments_296610.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nAs far as I am concerned `sage_setup` is only used at install time and shouldn't be used at runtime. But spinning it as a separate python package sounds like an interesting idea. Other packages could probably benefits from those mechanism.",
    "created_at": "2016-04-27T01:30:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296610",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:29'>Comment 29:</a>
As far as I am concerned `sage_setup` is only used at install time and shouldn't be used at runtime. But spinning it as a separate python package sounds like an interesting idea. Other packages could probably benefits from those mechanism.



---

archive/issue_comments_296611.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nI already thought about moving parts of this out of the source tree. I have not really reached a conclusion yet. It certainly needs to be used during build time. Currently, we have `sage_setup/optional_extension.py` which calls `sage.misc.package.is_package_installed`. So, at least in a first version, I would certainly mimic this behaviour and check for a feature (in this case, whether Cython can build against a library) at build time.\n\nReplying to [@videlec](#comment%3A28):\n> This code is mostly Sage agnostic right?\n\nThe idea is Sage agnostic. The features it checks for are of course relatively Sage specific.\n\n> Would it be possible to move this code out of Sage source code? It would better be in `sage/src/sage_setup/` or whatever appropriate (even possibly an external python module). We might want to use it outside of Sage or before Sage is built to track possible dependencies.\n\nI am not sure about moving it to `sage_setup`. We need this at runtime. Can we (and should we?) access things in `sage_setup` at runtime?\nIt is an interesting idea to make it a separate package. There seems to be no python package around which does anything similar. I would be happy to pursue such a path but would like to postpone this to a followup ticket.",
    "created_at": "2016-04-27T13:31:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296611",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:30'>Comment 30:</a>
I already thought about moving parts of this out of the source tree. I have not really reached a conclusion yet. It certainly needs to be used during build time. Currently, we have `sage_setup/optional_extension.py` which calls `sage.misc.package.is_package_installed`. So, at least in a first version, I would certainly mimic this behaviour and check for a feature (in this case, whether Cython can build against a library) at build time.

Replying to [@videlec](#comment%3A28):
> This code is mostly Sage agnostic right?

The idea is Sage agnostic. The features it checks for are of course relatively Sage specific.

> Would it be possible to move this code out of Sage source code? It would better be in `sage/src/sage_setup/` or whatever appropriate (even possibly an external python module). We might want to use it outside of Sage or before Sage is built to track possible dependencies.

I am not sure about moving it to `sage_setup`. We need this at runtime. Can we (and should we?) access things in `sage_setup` at runtime?
It is an interesting idea to make it a separate package. There seems to be no python package around which does anything similar. I would be happy to pursue such a path but would like to postpone this to a followup ticket.



---

archive/issue_comments_296612.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef9cf7d1eacb9195ab41611c2f05e634a1bf3d03\">ef9cf7d</a></td><td><code>Merge branch 'develop' into t/20382/replace_is_package_installed_with_features</code></td></tr></table>\n",
    "created_at": "2016-07-08T23:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296612",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:31'>Comment 31:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef9cf7d1eacb9195ab41611c2f05e634a1bf3d03">ef9cf7d</a></td><td><code>Merge branch 'develop' into t/20382/replace_is_package_installed_with_features</code></td></tr></table>




---

archive/issue_comments_296613.json:
```json
{
    "body": "Changed commit from **[2007e18](https://github.com/sagemath/sagetrac-mirror/commit/2007e1822e0684078323677211c3a893d5af414e)** to **[ef9cf7d](https://github.com/sagemath/sagetrac-mirror/commit/ef9cf7d1eacb9195ab41611c2f05e634a1bf3d03)**",
    "created_at": "2016-07-08T23:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296613",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2007e18](https://github.com/sagemath/sagetrac-mirror/commit/2007e1822e0684078323677211c3a893d5af414e)** to **[ef9cf7d](https://github.com/sagemath/sagetrac-mirror/commit/ef9cf7d1eacb9195ab41611c2f05e634a1bf3d03)**



---

archive/issue_comments_296614.json:
```json
{
    "body": "Changed commit from **[ef9cf7d](https://github.com/sagemath/sagetrac-mirror/commit/ef9cf7d1eacb9195ab41611c2f05e634a1bf3d03)** to **[074a318](https://github.com/sagemath/sagetrac-mirror/commit/074a31801df66eb96116e3f59ab6b2d0e42bd951)**",
    "created_at": "2016-07-09T00:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296614",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ef9cf7d](https://github.com/sagemath/sagetrac-mirror/commit/ef9cf7d1eacb9195ab41611c2f05e634a1bf3d03)** to **[074a318](https://github.com/sagemath/sagetrac-mirror/commit/074a31801df66eb96116e3f59ab6b2d0e42bd951)**



---

archive/issue_comments_296615.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/095b40264690d0d87897cc25c7e8aea00e357682\">095b402</a></td><td><code>fixed incorrect import statement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/670a3e22ba7c50484b8f01959a463e764071293c\">670a3e2</a></td><td><code>Merge branch 'u/saraedum/replace_is_package_installed_with_features' of git://trac.sagemath.org/sage into t/20382/replace_is_package_installed_with_features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f5dc211b7ef3754de2d04d25d4eecd4d3d3e98e\">6f5dc21</a></td><td><code>Completed implementation of CremonaDatabase feature</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/074a31801df66eb96116e3f59ab6b2d0e42bd951\">074a318</a></td><td><code>Implement SmallGroupsLibrary feature</code></td></tr></table>\n",
    "created_at": "2016-07-09T00:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296615",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'>Comment 32:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/095b40264690d0d87897cc25c7e8aea00e357682">095b402</a></td><td><code>fixed incorrect import statement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/670a3e22ba7c50484b8f01959a463e764071293c">670a3e2</a></td><td><code>Merge branch 'u/saraedum/replace_is_package_installed_with_features' of git://trac.sagemath.org/sage into t/20382/replace_is_package_installed_with_features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f5dc211b7ef3754de2d04d25d4eecd4d3d3e98e">6f5dc21</a></td><td><code>Completed implementation of CremonaDatabase feature</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/074a31801df66eb96116e3f59ab6b2d0e42bd951">074a318</a></td><td><code>Implement SmallGroupsLibrary feature</code></td></tr></table>




---

archive/issue_comments_296616.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d508a11632ef2f8931c3f8b2ad709e6dffe5446\">6d508a1</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into t/20382/replace_is_package_installed_with_features</code></td></tr></table>\n",
    "created_at": "2016-07-15T01:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296616",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:33'>Comment 33:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d508a11632ef2f8931c3f8b2ad709e6dffe5446">6d508a1</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into t/20382/replace_is_package_installed_with_features</code></td></tr></table>




---

archive/issue_comments_296617.json:
```json
{
    "body": "Changed commit from **[074a318](https://github.com/sagemath/sagetrac-mirror/commit/074a31801df66eb96116e3f59ab6b2d0e42bd951)** to **[6d508a1](https://github.com/sagemath/sagetrac-mirror/commit/6d508a11632ef2f8931c3f8b2ad709e6dffe5446)**",
    "created_at": "2016-07-15T01:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296617",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[074a318](https://github.com/sagemath/sagetrac-mirror/commit/074a31801df66eb96116e3f59ab6b2d0e42bd951)** to **[6d508a1](https://github.com/sagemath/sagetrac-mirror/commit/6d508a11632ef2f8931c3f8b2ad709e6dffe5446)**



---

archive/issue_comments_296618.json:
```json
{
    "body": "Changed commit from **[6d508a1](https://github.com/sagemath/sagetrac-mirror/commit/6d508a11632ef2f8931c3f8b2ad709e6dffe5446)** to **[b6c4797](https://github.com/sagemath/sagetrac-mirror/commit/b6c4797ace44ecb6b85ec1d17e53258970866e7d)**",
    "created_at": "2016-07-20T02:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296618",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6d508a1](https://github.com/sagemath/sagetrac-mirror/commit/6d508a11632ef2f8931c3f8b2ad709e6dffe5446)** to **[b6c4797](https://github.com/sagemath/sagetrac-mirror/commit/b6c4797ace44ecb6b85ec1d17e53258970866e7d)**



---

archive/issue_comments_296619.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10c1a47fb662b6d5dfb86f261c962f874171fdb8\">10c1a47</a></td><td><code>Asking whether a package is installed is not deprecated</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/680c19a8f070a38b2ebc05ab3d1104278434ffb4\">680c19a</a></td><td><code>removed unused import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb47ef0fad3797123516251375fef7679a5d3183\">bb47ef0</a></td><td><code>Replace is_installed with SmallGroupsLibrary.require</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3acffa79653a8e80cd6de5c5acdebe37a6dc32cc\">3acffa7</a></td><td><code>A note on is_package_installed versus features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6c4797ace44ecb6b85ec1d17e53258970866e7d\">b6c4797</a></td><td><code>Optional sage modules and shared libraries as features</code></td></tr></table>\n",
    "created_at": "2016-07-20T02:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296619",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:34'>Comment 34:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10c1a47fb662b6d5dfb86f261c962f874171fdb8">10c1a47</a></td><td><code>Asking whether a package is installed is not deprecated</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/680c19a8f070a38b2ebc05ab3d1104278434ffb4">680c19a</a></td><td><code>removed unused import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb47ef0fad3797123516251375fef7679a5d3183">bb47ef0</a></td><td><code>Replace is_installed with SmallGroupsLibrary.require</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3acffa79653a8e80cd6de5c5acdebe37a6dc32cc">3acffa7</a></td><td><code>A note on is_package_installed versus features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6c4797ace44ecb6b85ec1d17e53258970866e7d">b6c4797</a></td><td><code>Optional sage modules and shared libraries as features</code></td></tr></table>




---

archive/issue_comments_296620.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nThis seems to be essentially complete now. Some docstrings are still missing and I also need to do some testing but I replaced all occurrences of `is_package_installed` if the code is just checking whether an optional package is installed.\nAny feedback is already very welcome until I find the time to polish all the docstrings.",
    "created_at": "2016-07-20T02:45:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296620",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:35'>Comment 35:</a>
This seems to be essentially complete now. Some docstrings are still missing and I also need to do some testing but I replaced all occurrences of `is_package_installed` if the code is just checking whether an optional package is installed.
Any feedback is already very welcome until I find the time to polish all the docstrings.



---

archive/issue_comments_296621.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nThat's really cool. I will give it a good look. I may even try it in sage-on-gentoo.",
    "created_at": "2016-07-20T02:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296621",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:36'>Comment 36:</a>
That's really cool. I will give it a good look. I may even try it in sage-on-gentoo.



---

archive/issue_comments_296622.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nI was actually a little confused that `is_package_installed` gets used in so few places. (Or maybe `search_src` is lying about it.)",
    "created_at": "2016-07-20T04:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296622",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:37'>Comment 37:</a>
I was actually a little confused that `is_package_installed` gets used in so few places. (Or maybe `search_src` is lying about it.)



---

archive/issue_comments_296623.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nLooks good to me. There is one last thing that I think should be done, but I wouldn't hold the ticket for it, is remove\n\n```\nfrom .package import (install_package,\n        installed_packages, is_package_installed,\n        standard_packages, optional_packages, experimental_packages,\n        upgrade, package_versions)\n```\nfrom `sage/misc/all.py` we don't really want those to be directly exposed in my opinion - and they are/were always called explicitly in sage itself.",
    "created_at": "2016-07-20T10:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296623",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:38'>Comment 38:</a>
Looks good to me. There is one last thing that I think should be done, but I wouldn't hold the ticket for it, is remove

```
from .package import (install_package,
        installed_packages, is_package_installed,
        standard_packages, optional_packages, experimental_packages,
        upgrade, package_versions)
```
from `sage/misc/all.py` we don't really want those to be directly exposed in my opinion - and they are/were always called explicitly in sage itself.



---

archive/issue_comments_296624.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nMy wish above may be best served by different ticket. Can you put this one in \"need review\".",
    "created_at": "2016-07-21T11:08:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296624",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:39'>Comment 39:</a>
My wish above may be best served by different ticket. Can you put this one in "need review".



---

archive/issue_comments_296625.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nChecking availability of a Python module as you did has consequences\n\n```\nsage: def is_present(module):\n....:    import importlib\n....:    try:\n....:        importlib.import_module(module)\n....:        return True\n....:    except ImportError:\n....:        return False\nsage: print len(sys.modules), 'numpy' in sys.modules\n2625 False\nsage: is_present('numpy')\nTrue\nsage: print len(sys.modules), 'numpy' in sys.modules\n2710 True\n```\nThis would better be documented.",
    "created_at": "2016-07-22T20:34:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296625",
    "user": "https://github.com/videlec"
}
```

<a id='comment:40'>Comment 40:</a>
Checking availability of a Python module as you did has consequences

```
sage: def is_present(module):
....:    import importlib
....:    try:
....:        importlib.import_module(module)
....:        return True
....:    except ImportError:
....:        return False
sage: print len(sys.modules), 'numpy' in sys.modules
2625 False
sage: is_present('numpy')
True
sage: print len(sys.modules), 'numpy' in sys.modules
2710 True
```
This would better be documented.



---

archive/issue_comments_296626.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nI would be very happy to use this ticket to solve #21135 where I need to set the octave parameters for its Sage interface depending on its version... hence I am asking whether it would be possible to have a `version` method on `Features` (or at least on `Executable`)? For executable it is reasonable to just have an attribute `_version_cmd_option` (that would generally be `-v` or `--version` or `--dumpversion`) with a default implementation that runs the command with the option `_version_cmd_option`. What do you think?",
    "created_at": "2016-08-01T14:54:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296626",
    "user": "https://github.com/videlec"
}
```

<a id='comment:41'>Comment 41:</a>
I would be very happy to use this ticket to solve #21135 where I need to set the octave parameters for its Sage interface depending on its version... hence I am asking whether it would be possible to have a `version` method on `Features` (or at least on `Executable`)? For executable it is reasonable to just have an attribute `_version_cmd_option` (that would generally be `-v` or `--version` or `--dumpversion`) with a default implementation that runs the command with the option `_version_cmd_option`. What do you think?



---

archive/issue_comments_296627.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nNote also that for interfaces we allow remote programs with possibly subtle commands (see #20388 and the file `sage/interfaces/expect.py`). For example, I can access magma and get it work within sage by doing\n\n```\n$ SAGE_MAGMA_COMMAND=\"module load magma/2.11.13; magma\"\n$ SAGE_MAGMA_SERVER=\"plafrim\"\n$ export SAGE_MAGMA_COMMAND SAGE_MAGMA_SERVER\n$ sage -q\nsage: magma('1+1')\n2\n```\nDoes a magma feature should take care of this?",
    "created_at": "2016-08-01T15:03:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296627",
    "user": "https://github.com/videlec"
}
```

<a id='comment:42'>Comment 42:</a>
Note also that for interfaces we allow remote programs with possibly subtle commands (see #20388 and the file `sage/interfaces/expect.py`). For example, I can access magma and get it work within sage by doing

```
$ SAGE_MAGMA_COMMAND="module load magma/2.11.13; magma"
$ SAGE_MAGMA_SERVER="plafrim"
$ export SAGE_MAGMA_COMMAND SAGE_MAGMA_SERVER
$ sage -q
sage: magma('1+1')
2
```
Does a magma feature should take care of this?



---

archive/issue_comments_296628.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nReplying to [@videlec](#comment%3A41):\n> I would be very happy to use this ticket to solve #21135 where I need to set the octave parameters for its Sage interface depending on its version...\n\nIt would be great to see somebody use this interface already :)\nI have completing this Ticket high on my priority list. I hope I find the time to do this soon.\n\n> hence I am asking whether it would be possible to have a `version` method on `Features` (or at least on `Executable`)? For executable it is reasonable to just have an attribute `_version_cmd_option` (that would generally be `-v` or `--version` or `--dumpversion`) with a default implementation that runs the command with the option `_version_cmd_option`. What do you think?\n\nSometimes version checking is a good thing to do but I generally follow the autoconf tradition here that sees version numbers as something very unreliable. I think you should check whether the executable provides the interface that you need.\n\nSo, I would be reluctant to provide a general interface for version checks. I should certainly add a comment about this somewhere. Anyway, you can extend any Feature. To check for a version you might want to roughly do something like what I did for `StaticFile.absolute_path`.",
    "created_at": "2016-08-01T22:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296628",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:43'>Comment 43:</a>
Replying to [@videlec](#comment%3A41):
> I would be very happy to use this ticket to solve #21135 where I need to set the octave parameters for its Sage interface depending on its version...

It would be great to see somebody use this interface already :)
I have completing this Ticket high on my priority list. I hope I find the time to do this soon.

> hence I am asking whether it would be possible to have a `version` method on `Features` (or at least on `Executable`)? For executable it is reasonable to just have an attribute `_version_cmd_option` (that would generally be `-v` or `--version` or `--dumpversion`) with a default implementation that runs the command with the option `_version_cmd_option`. What do you think?

Sometimes version checking is a good thing to do but I generally follow the autoconf tradition here that sees version numbers as something very unreliable. I think you should check whether the executable provides the interface that you need.

So, I would be reluctant to provide a general interface for version checks. I should certainly add a comment about this somewhere. Anyway, you can extend any Feature. To check for a version you might want to roughly do something like what I did for `StaticFile.absolute_path`.



---

archive/issue_comments_296629.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nReplying to [@videlec](#comment%3A42):\n> Note also that for interfaces we allow remote programs with possibly subtle commands (see #20388 and the file `sage/interfaces/expect.py`). For example, I can access magma and get it work within sage by doing\n> \n> ```\n> $ SAGE_MAGMA_COMMAND=\"module load magma/2.11.13; magma\"\n> $ SAGE_MAGMA_SERVER=\"plafrim\"\n> $ export SAGE_MAGMA_COMMAND SAGE_MAGMA_SERVER\n> $ sage -q\n> sage: magma('1+1')\n> 2\n> ```\n> Does a magma feature should take care of this?\n\nSorry, but I am not sure whether I understand your question. Do you mean whether a `Magma` Feature should look at `SAGE_MAGMA_COMMAND` and `SAGE_MAGMA_SERVER`? Yes, absolutely.",
    "created_at": "2016-08-01T22:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296629",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:44'>Comment 44:</a>
Replying to [@videlec](#comment%3A42):
> Note also that for interfaces we allow remote programs with possibly subtle commands (see #20388 and the file `sage/interfaces/expect.py`). For example, I can access magma and get it work within sage by doing
> 
> ```
> $ SAGE_MAGMA_COMMAND="module load magma/2.11.13; magma"
> $ SAGE_MAGMA_SERVER="plafrim"
> $ export SAGE_MAGMA_COMMAND SAGE_MAGMA_SERVER
> $ sage -q
> sage: magma('1+1')
> 2
> ```
> Does a magma feature should take care of this?

Sorry, but I am not sure whether I understand your question. Do you mean whether a `Magma` Feature should look at `SAGE_MAGMA_COMMAND` and `SAGE_MAGMA_SERVER`? Yes, absolutely.



---

archive/issue_comments_296630.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nReplying to [@saraedum](#comment%3A44):\n> Replying to [@videlec](#comment%3A42):\n> > Note also that for interfaces we allow remote programs with possibly subtle commands (see #20388 and the file `sage/interfaces/expect.py`). For example, I can access magma and get it work within sage by doing\n> > \n> > ```\n> > $ SAGE_MAGMA_COMMAND=\"module load magma/2.11.13; magma\"\n> > $ SAGE_MAGMA_SERVER=\"plafrim\"\n> > $ export SAGE_MAGMA_COMMAND SAGE_MAGMA_SERVER\n> > $ sage -q\n> > sage: magma('1+1')\n> > 2\n> > ```\n> > Does a magma feature should take care of this?\n\n> \n> Sorry, but I am not sure whether I understand your question. Do you mean whether a `Magma` Feature should look at `SAGE_MAGMA_COMMAND` and `SAGE_MAGMA_SERVER`? Yes, absolutely.\n\nYes. That was mostly the question ;-) There are some interferences between the branch provided here and how software are detected (and configured) in `sage/interfaces/`. This should be done in one place and I guess features is the right one.",
    "created_at": "2016-08-01T22:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296630",
    "user": "https://github.com/videlec"
}
```

<a id='comment:45'>Comment 45:</a>
Replying to [@saraedum](#comment%3A44):
> Replying to [@videlec](#comment%3A42):
> > Note also that for interfaces we allow remote programs with possibly subtle commands (see #20388 and the file `sage/interfaces/expect.py`). For example, I can access magma and get it work within sage by doing
> > 
> > ```
> > $ SAGE_MAGMA_COMMAND="module load magma/2.11.13; magma"
> > $ SAGE_MAGMA_SERVER="plafrim"
> > $ export SAGE_MAGMA_COMMAND SAGE_MAGMA_SERVER
> > $ sage -q
> > sage: magma('1+1')
> > 2
> > ```
> > Does a magma feature should take care of this?

> 
> Sorry, but I am not sure whether I understand your question. Do you mean whether a `Magma` Feature should look at `SAGE_MAGMA_COMMAND` and `SAGE_MAGMA_SERVER`? Yes, absolutely.

Yes. That was mostly the question ;-) There are some interferences between the branch provided here and how software are detected (and configured) in `sage/interfaces/`. This should be done in one place and I guess features is the right one.



---

archive/issue_comments_296631.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nReplying to [@saraedum](#comment%3A43):\n> Replying to [@videlec](#comment%3A41):\n> > [...]\n\n> \n> Sometimes version checking is a good thing to do but I generally follow the autoconf tradition here that sees version numbers as something very unreliable. I think you should check whether the executable provides the interface that you need.\n\nArgh. I do not see how I can check that `octave` does not launch the GUI... I can check whether `octave --no-gui` is available. If octave does not exist I got a `OSError` and if it does not accept `--no-gui` I get a `1` return code. Is that what I should do? Does that should be part of an `Octave` feature?",
    "created_at": "2016-08-01T22:39:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296631",
    "user": "https://github.com/videlec"
}
```

<a id='comment:46'>Comment 46:</a>
Replying to [@saraedum](#comment%3A43):
> Replying to [@videlec](#comment%3A41):
> > [...]

> 
> Sometimes version checking is a good thing to do but I generally follow the autoconf tradition here that sees version numbers as something very unreliable. I think you should check whether the executable provides the interface that you need.

Argh. I do not see how I can check that `octave` does not launch the GUI... I can check whether `octave --no-gui` is available. If octave does not exist I got a `OSError` and if it does not accept `--no-gui` I get a `1` return code. Is that what I should do? Does that should be part of an `Octave` feature?



---

archive/issue_comments_296632.json:
```json
{
    "body": "Changed commit from **[b6c4797](https://github.com/sagemath/sagetrac-mirror/commit/b6c4797ace44ecb6b85ec1d17e53258970866e7d)** to **[2a67f26](https://github.com/sagemath/sagetrac-mirror/commit/2a67f26dbe72f17af0500772b8370013d89f44d2)**",
    "created_at": "2016-08-04T05:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296632",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b6c4797](https://github.com/sagemath/sagetrac-mirror/commit/b6c4797ace44ecb6b85ec1d17e53258970866e7d)** to **[2a67f26](https://github.com/sagemath/sagetrac-mirror/commit/2a67f26dbe72f17af0500772b8370013d89f44d2)**



---

archive/issue_comments_296633.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a67f26dbe72f17af0500772b8370013d89f44d2\">2a67f26</a></td><td><code>Trivial doctest fixes in sage.misc.feature</code></td></tr></table>\n",
    "created_at": "2016-08-04T05:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296633",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:47'>Comment 47:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a67f26dbe72f17af0500772b8370013d89f44d2">2a67f26</a></td><td><code>Trivial doctest fixes in sage.misc.feature</code></td></tr></table>




---

archive/issue_comments_296634.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/948bb459cccead366a9c98b93c7743c88583c78f\">948bb45</a></td><td><code>Fill in missing doctests for sage.misc.feature</code></td></tr></table>\n",
    "created_at": "2016-08-17T04:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296634",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:48'>Comment 48:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/948bb459cccead366a9c98b93c7743c88583c78f">948bb45</a></td><td><code>Fill in missing doctests for sage.misc.feature</code></td></tr></table>




---

archive/issue_comments_296635.json:
```json
{
    "body": "Changed commit from **[2a67f26](https://github.com/sagemath/sagetrac-mirror/commit/2a67f26dbe72f17af0500772b8370013d89f44d2)** to **[948bb45](https://github.com/sagemath/sagetrac-mirror/commit/948bb459cccead366a9c98b93c7743c88583c78f)**",
    "created_at": "2016-08-17T04:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296635",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2a67f26](https://github.com/sagemath/sagetrac-mirror/commit/2a67f26dbe72f17af0500772b8370013d89f44d2)** to **[948bb45](https://github.com/sagemath/sagetrac-mirror/commit/948bb459cccead366a9c98b93c7743c88583c78f)**



---

archive/issue_comments_296636.json:
```json
{
    "body": "Changed commit from **[948bb45](https://github.com/sagemath/sagetrac-mirror/commit/948bb459cccead366a9c98b93c7743c88583c78f)** to **[e824e0d](https://github.com/sagemath/sagetrac-mirror/commit/e824e0d72c3e8195c8e23582192e55e6acf4907a)**",
    "created_at": "2016-08-17T04:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296636",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[948bb45](https://github.com/sagemath/sagetrac-mirror/commit/948bb459cccead366a9c98b93c7743c88583c78f)** to **[e824e0d](https://github.com/sagemath/sagetrac-mirror/commit/e824e0d72c3e8195c8e23582192e55e6acf4907a)**



---

archive/issue_comments_296637.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e824e0d72c3e8195c8e23582192e55e6acf4907a\">e824e0d</a></td><td><code>Fixed doctests in sage.misc.feature</code></td></tr></table>\n",
    "created_at": "2016-08-17T04:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296637",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:49'>Comment 49:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e824e0d72c3e8195c8e23582192e55e6acf4907a">e824e0d</a></td><td><code>Fixed doctests in sage.misc.feature</code></td></tr></table>




---

archive/issue_comments_296638.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cf972c3f7a78e4c064e0174ae7ae1bf1a6e003e\">7cf972c</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into t/20382/replace_is_package_installed_with_features</code></td></tr></table>\n",
    "created_at": "2016-08-18T03:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296638",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:50'>Comment 50:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cf972c3f7a78e4c064e0174ae7ae1bf1a6e003e">7cf972c</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into t/20382/replace_is_package_installed_with_features</code></td></tr></table>




---

archive/issue_comments_296639.json:
```json
{
    "body": "Changed commit from **[e824e0d](https://github.com/sagemath/sagetrac-mirror/commit/e824e0d72c3e8195c8e23582192e55e6acf4907a)** to **[7cf972c](https://github.com/sagemath/sagetrac-mirror/commit/7cf972c3f7a78e4c064e0174ae7ae1bf1a6e003e)**",
    "created_at": "2016-08-18T03:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296639",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e824e0d](https://github.com/sagemath/sagetrac-mirror/commit/e824e0d72c3e8195c8e23582192e55e6acf4907a)** to **[7cf972c](https://github.com/sagemath/sagetrac-mirror/commit/7cf972c3f7a78e4c064e0174ae7ae1bf1a6e003e)**



---

archive/issue_comments_296640.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nReplying to [@kiwifb](#comment%3A2):\n> [...] Do I understand well that you need an executable class for any external binaries that you want to call?\n\nIts up to you. You can create a new class and make it easier for others to use or you could just write `Executable(...).require()` to check for an executable in one place.",
    "created_at": "2016-08-18T03:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296640",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:51'>Comment 51:</a>
Replying to [@kiwifb](#comment%3A2):
> [...] Do I understand well that you need an executable class for any external binaries that you want to call?

Its up to you. You can create a new class and make it easier for others to use or you could just write `Executable(...).require()` to check for an executable in one place.



---

archive/issue_comments_296641.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nReplying to [@kiwifb](#comment%3A6):\n> Handling of `database_gap` will be delicate. The spkg includes bits removed stuff from `gap` that are expected by default (no need to load if present) and one \"real\" gap package that one would need to load (`tomlib`). \n\nI tried to check for the package that was actually needed whenever the old code queried the `gap_packages` SPKG. I am not sure I fully understand your comment here. Could you point me to an example in the code where this is a problem?",
    "created_at": "2016-08-18T03:46:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296641",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:52'>Comment 52:</a>
Replying to [@kiwifb](#comment%3A6):
> Handling of `database_gap` will be delicate. The spkg includes bits removed stuff from `gap` that are expected by default (no need to load if present) and one "real" gap package that one would need to load (`tomlib`). 

I tried to check for the package that was actually needed whenever the old code queried the `gap_packages` SPKG. I am not sure I fully understand your comment here. Could you point me to an example in the code where this is a problem?



---

archive/issue_comments_296642.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nReplying to [@kiwifb](#comment%3A9):\n> Going through the files that I have changed in #20377 which this ticket should supersede:\n> * `sage/databases/cremona.py` we need to check the real presence of a file in a specific location in this case. Adding something to feature may be overkill for that particular case.\n\n`sage/databases/cremona.py` loads the cremona DB from a very specific place, namely `SAGE_SHARE`. This is certainly not ideal. But making that code more flexible should imho go into a followup ticket. Should I create one?\n> * `sage/game_theory/normal_form_game.py` + `sage/geometry/polyhedron/base.py` look for the `lrs` executable\n\nAddressed with the `Lrs` feature.\n> * `sage/graphs/generators/classical_geometries.py` already covered in this ticket\n> * `sage/graphs/generic_graph.py` I think my stuff should stay. It is mostly straight `try...expect` whether or not a python module is available.\n\nI am checking this now with a `PythonModule` feature.\n> * `sage/graphs/graph_generators.py` 3 different executables to detect\n\nI am checking for these executables (and run them on trivial inputs.)\n> * `sage/graphs/lovasz_theta.py` covered here\n> * `sage/groups/generic.py` possibly detect if gap package tomlib is present\n\nI am checking for the presence of the small groups library. Is that the same somehow?\n> * `sage/groups/perm_gps/permgroup.py` again dodgy database_gap detection in one part. The part using the gap `hap` package would need a nice rework not just migration. I'd like to pick the mind of the person who wrote this.\n\nI am checking for the hap package here. Is there anything else that should happen?\n> * `sage/misc/all.py` my stuff should stay. It is removal of `import` no one uses.\n\nSure. But I am not addressing this here.\n>    * `sage/rings/polynomial/multi_polynomial_sequence.py` finding one executable\n\nActually you need to check for the presence of the fes library. Not only that but also whether the sage interface to that library has been built (which only happens if sage can find the library, i.e., SPKG at build time.)",
    "created_at": "2016-08-18T03:54:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296642",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:53'>Comment 53:</a>
Replying to [@kiwifb](#comment%3A9):
> Going through the files that I have changed in #20377 which this ticket should supersede:
> * `sage/databases/cremona.py` we need to check the real presence of a file in a specific location in this case. Adding something to feature may be overkill for that particular case.

`sage/databases/cremona.py` loads the cremona DB from a very specific place, namely `SAGE_SHARE`. This is certainly not ideal. But making that code more flexible should imho go into a followup ticket. Should I create one?
> * `sage/game_theory/normal_form_game.py` + `sage/geometry/polyhedron/base.py` look for the `lrs` executable

Addressed with the `Lrs` feature.
> * `sage/graphs/generators/classical_geometries.py` already covered in this ticket
> * `sage/graphs/generic_graph.py` I think my stuff should stay. It is mostly straight `try...expect` whether or not a python module is available.

I am checking this now with a `PythonModule` feature.
> * `sage/graphs/graph_generators.py` 3 different executables to detect

I am checking for these executables (and run them on trivial inputs.)
> * `sage/graphs/lovasz_theta.py` covered here
> * `sage/groups/generic.py` possibly detect if gap package tomlib is present

I am checking for the presence of the small groups library. Is that the same somehow?
> * `sage/groups/perm_gps/permgroup.py` again dodgy database_gap detection in one part. The part using the gap `hap` package would need a nice rework not just migration. I'd like to pick the mind of the person who wrote this.

I am checking for the hap package here. Is there anything else that should happen?
> * `sage/misc/all.py` my stuff should stay. It is removal of `import` no one uses.

Sure. But I am not addressing this here.
>    * `sage/rings/polynomial/multi_polynomial_sequence.py` finding one executable

Actually you need to check for the presence of the fes library. Not only that but also whether the sage interface to that library has been built (which only happens if sage can find the library, i.e., SPKG at build time.)



---

archive/issue_comments_296643.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nReplying to [@nthiery](#comment%3A15):\n> Yep there is value in the autoconf approach. On the other hand, since this is mostly about doctests at this point, a version information is more useful for the user: \"oh, I need to upgrade to 3.5\" is simpler than \"oh, I need to upgrade to a recent enough version that supports method xxx on object yyy\". We could do both: make a feature check, and provide a version number for user reporting; but that's more work.\n\nThat's the approach I would like to follow. Currently there is no code like this in here because I am just replacing `is_package_installed` which also did not do any version checks. But, yes, people should check for a certain feature of a package and then the `reason` of a test failure should say \"Your X does not support Y.\" and the `resolution` should say \"You need at least version Z of X. Try sage -i X to fix this.\" or something along these lines.",
    "created_at": "2016-08-18T04:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296643",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:54'>Comment 54:</a>
Replying to [@nthiery](#comment%3A15):
> Yep there is value in the autoconf approach. On the other hand, since this is mostly about doctests at this point, a version information is more useful for the user: "oh, I need to upgrade to 3.5" is simpler than "oh, I need to upgrade to a recent enough version that supports method xxx on object yyy". We could do both: make a feature check, and provide a version number for user reporting; but that's more work.

That's the approach I would like to follow. Currently there is no code like this in here because I am just replacing `is_package_installed` which also did not do any version checks. But, yes, people should check for a certain feature of a package and then the `reason` of a test failure should say "Your X does not support Y." and the `resolution` should say "You need at least version Z of X. Try sage -i X to fix this." or something along these lines.



---

archive/issue_comments_296644.json:
```json
{
    "body": "Changed commit from **[7cf972c](https://github.com/sagemath/sagetrac-mirror/commit/7cf972c3f7a78e4c064e0174ae7ae1bf1a6e003e)** to **[7d38138](https://github.com/sagemath/sagetrac-mirror/commit/7d381385007870e353d1d63e4f995162e3c7285a)**",
    "created_at": "2016-08-18T04:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296644",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7cf972c](https://github.com/sagemath/sagetrac-mirror/commit/7cf972c3f7a78e4c064e0174ae7ae1bf1a6e003e)** to **[7d38138](https://github.com/sagemath/sagetrac-mirror/commit/7d381385007870e353d1d63e4f995162e3c7285a)**



---

archive/issue_comments_296645.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d381385007870e353d1d63e4f995162e3c7285a\">7d38138</a></td><td><code>Renamed sage.misc.feature to sage.misc.feature_test</code></td></tr></table>\n",
    "created_at": "2016-08-18T04:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296645",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:57'>Comment 57:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d381385007870e353d1d63e4f995162e3c7285a">7d38138</a></td><td><code>Renamed sage.misc.feature to sage.misc.feature_test</code></td></tr></table>




---

archive/issue_comments_296646.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nReplying to [@videlec](#comment%3A40):\n> Checking availability of a Python module as you did has consequences\n> \n> ```\n> sage: def is_present(module):\n> ....:    import importlib\n> ....:    try:\n> ....:        importlib.import_module(module)\n> ....:        return True\n> ....:    except ImportError:\n> ....:        return False\n> sage: print len(sys.modules), 'numpy' in sys.modules\n> 2625 False\n> sage: is_present('numpy')\n> True\n> sage: print len(sys.modules), 'numpy' in sys.modules\n> 2710 True\n> ```\n> This would better be documented.\n\nYou are right. I documented that.",
    "created_at": "2016-08-18T04:14:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296646",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:58'>Comment 58:</a>
Replying to [@videlec](#comment%3A40):
> Checking availability of a Python module as you did has consequences
> 
> ```
> sage: def is_present(module):
> ....:    import importlib
> ....:    try:
> ....:        importlib.import_module(module)
> ....:        return True
> ....:    except ImportError:
> ....:        return False
> sage: print len(sys.modules), 'numpy' in sys.modules
> 2625 False
> sage: is_present('numpy')
> True
> sage: print len(sys.modules), 'numpy' in sys.modules
> 2710 True
> ```
> This would better be documented.

You are right. I documented that.



---

archive/issue_comments_296647.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nReplying to [@videlec](#comment%3A46):\n> Replying to [@saraedum](#comment%3A43):\n> > Replying to [@videlec](#comment%3A41):\n> > > [...]\n\n> > \n> > Sometimes version checking is a good thing to do but I generally follow the autoconf tradition here that sees version numbers as something very unreliable. I think you should check whether the executable provides the interface that you need.\n\n> \n> Argh. I do not see how I can check that `octave` does not launch the GUI... I can check whether `octave --no-gui` is available. If octave does not exist I got a `OSError` and if it does not accept `--no-gui` I get a `1` return code. Is that what I should do? Does that should be part of an `Octave` feature?\n\nI have a feeling that I already answered this one. But apparently I have not.\nI would write an `Octave` feature that checks whether there is an `octave` binary and then checks whether it accepts `--no-gui`. Sort of like `StaticFile` has an `absolute_path()` that tells you something about how this feature works, `Octave` could expose information about which parameters are needed to actually invoke it so it reads from stdin.",
    "created_at": "2016-08-18T04:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296647",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:59'>Comment 59:</a>
Replying to [@videlec](#comment%3A46):
> Replying to [@saraedum](#comment%3A43):
> > Replying to [@videlec](#comment%3A41):
> > > [...]

> > 
> > Sometimes version checking is a good thing to do but I generally follow the autoconf tradition here that sees version numbers as something very unreliable. I think you should check whether the executable provides the interface that you need.

> 
> Argh. I do not see how I can check that `octave` does not launch the GUI... I can check whether `octave --no-gui` is available. If octave does not exist I got a `OSError` and if it does not accept `--no-gui` I get a `1` return code. Is that what I should do? Does that should be part of an `Octave` feature?

I have a feeling that I already answered this one. But apparently I have not.
I would write an `Octave` feature that checks whether there is an `octave` binary and then checks whether it accepts `--no-gui`. Sort of like `StaticFile` has an `absolute_path()` that tells you something about how this feature works, `Octave` could expose information about which parameters are needed to actually invoke it so it reads from stdin.



---

archive/issue_comments_296648.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\nI hope I addressed all comments on this ticket. I did not have a chance to run all doctests yet (my sage 7.4 is still building) but essentially this is ready for review now.",
    "created_at": "2016-08-18T04:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296648",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:60'>Comment 60:</a>
I hope I addressed all comments on this ticket. I did not have a chance to run all doctests yet (my sage 7.4 is still building) but essentially this is ready for review now.



---

archive/issue_comments_296649.json:
```json
{
    "body": "Changed work issues from **reorder classes in sage.misc.feature** to none",
    "created_at": "2016-08-18T04:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296649",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **reorder classes in sage.misc.feature** to none



---

archive/issue_comments_296650.json:
```json
{
    "body": "Changed commit from **[7d38138](https://github.com/sagemath/sagetrac-mirror/commit/7d381385007870e353d1d63e4f995162e3c7285a)** to **[edd4f6e](https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447)**",
    "created_at": "2016-08-18T04:40:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296650",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7d38138](https://github.com/sagemath/sagetrac-mirror/commit/7d381385007870e353d1d63e4f995162e3c7285a)** to **[edd4f6e](https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447)**



---

archive/issue_comments_296651.json:
```json
{
    "body": "<a id='comment:62'>Comment 62:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/052963745bf9de80896ca216c41716f777e87fc8\">0529637</a></td><td><code>Reordered classes in sage.misc.feature_test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f2d596f9445a8bf5e9b8d8b2f73155c4dd42872\">6f2d596</a></td><td><code>Fixed doctests which failed because of the feature -> feature_test renaming</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447\">edd4f6e</a></td><td><code>add missing sig_off to doctest</code></td></tr></table>\n",
    "created_at": "2016-08-18T04:40:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296651",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:62'>Comment 62:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/052963745bf9de80896ca216c41716f777e87fc8">0529637</a></td><td><code>Reordered classes in sage.misc.feature_test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f2d596f9445a8bf5e9b8d8b2f73155c4dd42872">6f2d596</a></td><td><code>Fixed doctests which failed because of the feature -> feature_test renaming</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447">edd4f6e</a></td><td><code>add missing sig_off to doctest</code></td></tr></table>




---

archive/issue_comments_296652.json:
```json
{
    "body": "<a id='comment:63'>Comment 63:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/052963745bf9de80896ca216c41716f777e87fc8\">0529637</a></td><td><code>Reordered classes in sage.misc.feature_test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f2d596f9445a8bf5e9b8d8b2f73155c4dd42872\">6f2d596</a></td><td><code>Fixed doctests which failed because of the feature -> feature_test renaming</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447\">edd4f6e</a></td><td><code>add missing sig_off to doctest</code></td></tr></table>\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/052963745bf9de80896ca216c41716f777e87fc8\">0529637</a></td><td><code>Reordered classes in sage.misc.feature_test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f2d596f9445a8bf5e9b8d8b2f73155c4dd42872\">6f2d596</a></td><td><code>Fixed doctests which failed because of the feature -> feature_test renaming</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447\">edd4f6e</a></td><td><code>add missing sig_off to doctest</code></td></tr></table>\n",
    "created_at": "2016-08-18T04:40:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296652",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:63'>Comment 63:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/052963745bf9de80896ca216c41716f777e87fc8">0529637</a></td><td><code>Reordered classes in sage.misc.feature_test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f2d596f9445a8bf5e9b8d8b2f73155c4dd42872">6f2d596</a></td><td><code>Fixed doctests which failed because of the feature -> feature_test renaming</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447">edd4f6e</a></td><td><code>add missing sig_off to doctest</code></td></tr></table>

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/052963745bf9de80896ca216c41716f777e87fc8">0529637</a></td><td><code>Reordered classes in sage.misc.feature_test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f2d596f9445a8bf5e9b8d8b2f73155c4dd42872">6f2d596</a></td><td><code>Fixed doctests which failed because of the feature -> feature_test renaming</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447">edd4f6e</a></td><td><code>add missing sig_off to doctest</code></td></tr></table>




---

archive/issue_events_259930.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-08-18T04:40:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259930"
}
```



---

archive/issue_events_259931.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-22T06:23:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259931"
}
```



---

archive/issue_events_259932.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-22T06:23:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259932"
}
```



---

archive/issue_comments_296653.json:
```json
{
    "body": "Changed commit from **[edd4f6e](https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447)** to **[2111eb3](https://github.com/sagemath/sagetrac-mirror/commit/2111eb35d8a7ca8a13ee477ee0839d98c24b4fa2)**",
    "created_at": "2016-08-25T18:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296653",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[edd4f6e](https://github.com/sagemath/sagetrac-mirror/commit/edd4f6ed42b58f9b8b88e6349b0439ea7fbc3447)** to **[2111eb3](https://github.com/sagemath/sagetrac-mirror/commit/2111eb35d8a7ca8a13ee477ee0839d98c24b4fa2)**



---

archive/issue_comments_296654.json:
```json
{
    "body": "<a id='comment:65'>Comment 65:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2111eb35d8a7ca8a13ee477ee0839d98c24b4fa2\">2111eb3</a></td><td><code>Move Bliss feature test to feature_test.py</code></td></tr></table>\n",
    "created_at": "2016-08-25T18:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296654",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:65'>Comment 65:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2111eb35d8a7ca8a13ee477ee0839d98c24b4fa2">2111eb3</a></td><td><code>Move Bliss feature test to feature_test.py</code></td></tr></table>




---

archive/issue_comments_296655.json:
```json
{
    "body": "<a id='comment:66'>Comment 66:</a>\nSince `is_package_installed` is very sage (the distribution) specific, it causes trouble for package managers which would like to refer to check whether a package is available on the local system instead of whether it has been installed with `sage -i` (or similar.)\nThis replaces all occurrences of `is_package_installed` (which are not part of sage the distribution) with a \"feature\" check which is performed much in the spirit of autoconf: check for the presence of the features needed, not for version numbers.\nThese checks are certainly not perfect yet and will need to evolve over time.",
    "created_at": "2016-08-25T19:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296655",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:66'>Comment 66:</a>
Since `is_package_installed` is very sage (the distribution) specific, it causes trouble for package managers which would like to refer to check whether a package is available on the local system instead of whether it has been installed with `sage -i` (or similar.)
This replaces all occurrences of `is_package_installed` (which are not part of sage the distribution) with a "feature" check which is performed much in the spirit of autoconf: check for the presence of the features needed, not for version numbers.
These checks are certainly not perfect yet and will need to evolve over time.



---

archive/issue_comments_296656.json:
```json
{
    "body": "<a id='comment:67'>Comment 67:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3857a626302fc69a23fcff0fae2336f7b85464a\">c3857a6</a></td><td><code>Bliss feature is an OptionalModule</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44e9a5f46a85a3c9c5835a66c65f38edc4483b0c\">44e9a5f</a></td><td><code>Fix suffix of cythonized files</code></td></tr></table>\n",
    "created_at": "2016-08-25T19:50:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296656",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:67'>Comment 67:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3857a626302fc69a23fcff0fae2336f7b85464a">c3857a6</a></td><td><code>Bliss feature is an OptionalModule</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44e9a5f46a85a3c9c5835a66c65f38edc4483b0c">44e9a5f</a></td><td><code>Fix suffix of cythonized files</code></td></tr></table>




---

archive/issue_comments_296657.json:
```json
{
    "body": "Changed commit from **[2111eb3](https://github.com/sagemath/sagetrac-mirror/commit/2111eb35d8a7ca8a13ee477ee0839d98c24b4fa2)** to **[44e9a5f](https://github.com/sagemath/sagetrac-mirror/commit/44e9a5f46a85a3c9c5835a66c65f38edc4483b0c)**",
    "created_at": "2016-08-25T19:50:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296657",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2111eb3](https://github.com/sagemath/sagetrac-mirror/commit/2111eb35d8a7ca8a13ee477ee0839d98c24b4fa2)** to **[44e9a5f](https://github.com/sagemath/sagetrac-mirror/commit/44e9a5f46a85a3c9c5835a66c65f38edc4483b0c)**



---

archive/issue_comments_296658.json:
```json
{
    "body": "<a id='comment:68'>Comment 68:</a>\nNeeds to be merged with Sage 7.4.beta2.",
    "created_at": "2016-08-26T11:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296658",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:68'>Comment 68:</a>
Needs to be merged with Sage 7.4.beta2.



---

archive/issue_events_259933.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-26T11:43:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259933"
}
```



---

archive/issue_events_259934.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-26T11:43:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259934"
}
```



---

archive/issue_comments_296659.json:
```json
{
    "body": "<a id='comment:69'>Comment 69:</a>\nFor `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence in Sage, but that doesn't have to be the case.\n\nAnd once you do this, you can use the library check in `src/sage_setup/optional_extension.py` to decide which optional extensions to build.",
    "created_at": "2016-08-26T11:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296659",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:69'>Comment 69:</a>
For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence in Sage, but that doesn't have to be the case.

And once you do this, you can use the library check in `src/sage_setup/optional_extension.py` to decide which optional extensions to build.



---

archive/issue_comments_296660.json:
```json
{
    "body": "<a id='comment:70'>Comment 70:</a>\nThe changes to `src/sage/misc/cython.py` might make sense but do not belong to this ticket.",
    "created_at": "2016-08-26T12:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296660",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:70'>Comment 70:</a>
The changes to `src/sage/misc/cython.py` might make sense but do not belong to this ticket.



---

archive/issue_comments_296661.json:
```json
{
    "body": "<a id='comment:71'>Comment 71:</a>\nI must say to me in sage-on-gentoo the fact that the current `OptionalModule` only require presence to build the extension is problematic but I don't expect a solution to that particular aspect in the near future.\nIn effect the fact that you only check for presence/availability as a signal for building is introducing automagic dependencies.\n\nI currently have a variable mechanism to signal that the dependency should be present and I want to build. A `setup.cfg` could be a viable solution. I realise that it would be a burden in the current sage model in the short term.",
    "created_at": "2016-08-26T12:14:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296661",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:71'>Comment 71:</a>
I must say to me in sage-on-gentoo the fact that the current `OptionalModule` only require presence to build the extension is problematic but I don't expect a solution to that particular aspect in the near future.
In effect the fact that you only check for presence/availability as a signal for building is introducing automagic dependencies.

I currently have a variable mechanism to signal that the dependency should be present and I want to build. A `setup.cfg` could be a viable solution. I realise that it would be a burden in the current sage model in the short term.



---

archive/issue_comments_296662.json:
```json
{
    "body": "<a id='comment:72'>Comment 72:</a>\nReplying to [@kiwifb](#comment%3A71):\n> I must say to me in sage-on-gentoo the fact that the current `OptionalModule` only require presence to build the extension is problematic but I don't expect a solution to that particular aspect in the near future.\n\nIdeally, Sage should have something like Gentoo's `USE` flags for optional dependencies...",
    "created_at": "2016-08-26T12:16:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296662",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:72'>Comment 72:</a>
Replying to [@kiwifb](#comment%3A71):
> I must say to me in sage-on-gentoo the fact that the current `OptionalModule` only require presence to build the extension is problematic but I don't expect a solution to that particular aspect in the near future.

Ideally, Sage should have something like Gentoo's `USE` flags for optional dependencies...



---

archive/issue_comments_296663.json:
```json
{
    "body": "<a id='comment:74'>Comment 74:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a427d751fb1531306c8e35fe8cdfc7f755b8f243\">a427d75</a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/20382/replace_is_package_installed_with_features</code></td></tr></table>\n",
    "created_at": "2016-09-01T20:11:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296663",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:74'>Comment 74:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a427d751fb1531306c8e35fe8cdfc7f755b8f243">a427d75</a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/20382/replace_is_package_installed_with_features</code></td></tr></table>




---

archive/issue_comments_296664.json:
```json
{
    "body": "Changed commit from **[44e9a5f](https://github.com/sagemath/sagetrac-mirror/commit/44e9a5f46a85a3c9c5835a66c65f38edc4483b0c)** to **[a427d75](https://github.com/sagemath/sagetrac-mirror/commit/a427d751fb1531306c8e35fe8cdfc7f755b8f243)**",
    "created_at": "2016-09-01T20:11:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296664",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[44e9a5f](https://github.com/sagemath/sagetrac-mirror/commit/44e9a5f46a85a3c9c5835a66c65f38edc4483b0c)** to **[a427d75](https://github.com/sagemath/sagetrac-mirror/commit/a427d751fb1531306c8e35fe8cdfc7f755b8f243)**



---

archive/issue_comments_296665.json:
```json
{
    "body": "<a id='comment:75'>Comment 75:</a>\nReplying to [@jdemeyer](#comment%3A69):\n> For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence  in Sage, but that doesn't have to be the case.\n\nOk. I am splitting this up.\n\n> And once you do this, you can use the library check in `src/sage_setup/optional_extension.py` to decide which optional extensions to build.\n\nThat would be a followup ticket I believe.",
    "created_at": "2016-09-01T20:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296665",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:75'>Comment 75:</a>
Replying to [@jdemeyer](#comment%3A69):
> For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence  in Sage, but that doesn't have to be the case.

Ok. I am splitting this up.

> And once you do this, you can use the library check in `src/sage_setup/optional_extension.py` to decide which optional extensions to build.

That would be a followup ticket I believe.



---

archive/issue_comments_296666.json:
```json
{
    "body": "<a id='comment:76'>Comment 76:</a>\nReplying to [@jdemeyer](#comment%3A70):\n> The changes to `src/sage/misc/cython.py` might make sense but do not belong to this ticket.\n\nI'd prefer to sneak this change in here. The shared library test code in here actually tests that this does the right thing and I'd prefer not to write some constructed doctest for something like this.",
    "created_at": "2016-09-01T21:21:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296666",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:76'>Comment 76:</a>
Replying to [@jdemeyer](#comment%3A70):
> The changes to `src/sage/misc/cython.py` might make sense but do not belong to this ticket.

I'd prefer to sneak this change in here. The shared library test code in here actually tests that this does the right thing and I'd prefer not to write some constructed doctest for something like this.



---

archive/issue_comments_296667.json:
```json
{
    "body": "Changed commit from **[a427d75](https://github.com/sagemath/sagetrac-mirror/commit/a427d751fb1531306c8e35fe8cdfc7f755b8f243)** to **[2086217](https://github.com/sagemath/sagetrac-mirror/commit/20862171588e5dbcd0d08e77cf8b0ab8cc718581)**",
    "created_at": "2016-09-01T21:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296667",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a427d75](https://github.com/sagemath/sagetrac-mirror/commit/a427d751fb1531306c8e35fe8cdfc7f755b8f243)** to **[2086217](https://github.com/sagemath/sagetrac-mirror/commit/20862171588e5dbcd0d08e77cf8b0ab8cc718581)**



---

archive/issue_comments_296668.json:
```json
{
    "body": "<a id='comment:77'>Comment 77:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20862171588e5dbcd0d08e77cf8b0ab8cc718581\">2086217</a></td><td><code>Isolate library checks from the OptionalModule implementation code</code></td></tr></table>\n",
    "created_at": "2016-09-01T21:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296668",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:77'>Comment 77:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20862171588e5dbcd0d08e77cf8b0ab8cc718581">2086217</a></td><td><code>Isolate library checks from the OptionalModule implementation code</code></td></tr></table>




---

archive/issue_events_259935.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-09-01T21:28:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259935"
}
```



---

archive/issue_events_259936.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-09-01T21:28:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259936"
}
```



---

archive/issue_comments_296669.json:
```json
{
    "body": "Dependencies: **#21289**",
    "created_at": "2016-09-01T21:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296669",
    "user": "https://github.com/kiwifb"
}
```

Dependencies: **#21289**



---

archive/issue_events_259937.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-09-01T21:36:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259937"
}
```



---

archive/issue_events_259938.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-09-01T21:36:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259938"
}
```



---

archive/issue_comments_296670.json:
```json
{
    "body": "<a id='comment:79'>Comment 79:</a>\nSorry, but it will need rebasing against #21289 which is already merged for the next beta.",
    "created_at": "2016-09-01T21:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296670",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:79'>Comment 79:</a>
Sorry, but it will need rebasing against #21289 which is already merged for the next beta.



---

archive/issue_comments_296671.json:
```json
{
    "body": "<a id='comment:80'>Comment 80:</a>\nReplying to [@saraedum](#comment%3A75):\n> Replying to [@jdemeyer](#comment%3A69):\n> > For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence  in Sage, but that doesn't have to be the case.\n\n> Ok. I am splitting this up.\n\nWell, I meant *really* splitting those it up: get rid of `OptionalModule` altogether and replace it by `Module`. And remove the dependencies: if the dependencies are not satisfied, the module will not import. There is no need for an additional check.\n\n> > And once you do this, you can use the library check in `src/sage_setup/optional_extension.py` to decide which optional extensions to build.\n\n> That would be a followup ticket I believe.\n\nFair enough.",
    "created_at": "2016-09-02T12:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296671",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:80'>Comment 80:</a>
Replying to [@saraedum](#comment%3A75):
> Replying to [@jdemeyer](#comment%3A69):
> > For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence  in Sage, but that doesn't have to be the case.

> Ok. I am splitting this up.

Well, I meant *really* splitting those it up: get rid of `OptionalModule` altogether and replace it by `Module`. And remove the dependencies: if the dependencies are not satisfied, the module will not import. There is no need for an additional check.

> > And once you do this, you can use the library check in `src/sage_setup/optional_extension.py` to decide which optional extensions to build.

> That would be a followup ticket I believe.

Fair enough.



---

archive/issue_comments_296672.json:
```json
{
    "body": "<a id='comment:81'>Comment 81:</a>\nReplying to [@jdemeyer](#comment%3A80):\n> Replying to [@saraedum](#comment%3A75):\n> > Replying to [@jdemeyer](#comment%3A69):\n> > > For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence  in Sage, but that doesn't have to be the case.\n\n> > Ok. I am splitting this up.\n\n> \n> Well, I meant *really* splitting those it up: get rid of `OptionalModule` altogether and replace it by `Module`. And remove the dependencies: if the dependencies are not satisfied, the module will not import. There is no need for an additional check.\n\nSure, the check is not necessary. But I would like to tell people what is the problem here. In that particular case, the module also would not import but that's more obscure than telling people that the required library is missing. More generally, an `OptionalModule` checks whether the module imports and is functional. Running some tests to make sure that the underlying library is working properly is a reasonable thing to do imho.",
    "created_at": "2016-09-08T01:28:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296672",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:81'>Comment 81:</a>
Replying to [@jdemeyer](#comment%3A80):
> Replying to [@saraedum](#comment%3A75):
> > Replying to [@jdemeyer](#comment%3A69):
> > > For `OptionalModule`, you should separate the library check from the Python module check. They really are independent things. It just happens that there is essentially a one-to-one correspondence  in Sage, but that doesn't have to be the case.

> > Ok. I am splitting this up.

> 
> Well, I meant *really* splitting those it up: get rid of `OptionalModule` altogether and replace it by `Module`. And remove the dependencies: if the dependencies are not satisfied, the module will not import. There is no need for an additional check.

Sure, the check is not necessary. But I would like to tell people what is the problem here. In that particular case, the module also would not import but that's more obscure than telling people that the required library is missing. More generally, an `OptionalModule` checks whether the module imports and is functional. Running some tests to make sure that the underlying library is working properly is a reasonable thing to do imho.



---

archive/issue_comments_296673.json:
```json
{
    "body": "<a id='comment:82'>Comment 82:</a>\nReplying to [@saraedum](#comment%3A81):\n> But I would like to tell people what is the problem here.\n\nThe problem is that they need to install the optional Sage package. That's what you should tell.\n\n> In that particular case, the module also would not import but that's more obscure than telling people that the required library is missing.\n\nBut the `OptionalModule` machine checks whether the optional Sage package is installed. Having the library available from the OS would not help.\n\n> Running some tests to make sure that the underlying library is working properly is a reasonable thing to do imho.\n\nI don't like to put the same information in different places. That way, you will eventually end up with inconsistencies. The information that the module needs the library should be in exactly one place, namely the build system which decides when the module is compiled.",
    "created_at": "2016-09-08T06:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296673",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:82'>Comment 82:</a>
Replying to [@saraedum](#comment%3A81):
> But I would like to tell people what is the problem here.

The problem is that they need to install the optional Sage package. That's what you should tell.

> In that particular case, the module also would not import but that's more obscure than telling people that the required library is missing.

But the `OptionalModule` machine checks whether the optional Sage package is installed. Having the library available from the OS would not help.

> Running some tests to make sure that the underlying library is working properly is a reasonable thing to do imho.

I don't like to put the same information in different places. That way, you will eventually end up with inconsistencies. The information that the module needs the library should be in exactly one place, namely the build system which decides when the module is compiled.



---

archive/issue_comments_296674.json:
```json
{
    "body": "<a id='comment:83'>Comment 83:</a>\nReplying to [@jdemeyer](#comment%3A82):\n> Replying to [@saraedum](#comment%3A81):\n> > But I would like to tell people what is the problem here.\n\n> \n> The problem is that they need to install the optional Sage package. That's what you should tell.\n> \n> > In that particular case, the module also would not import but that's more obscure than telling people that the required library is missing.\n\n> \n> But the `OptionalModule` machine checks whether the optional Sage package is installed. Having the library available from the OS would not help.\n> \n\nIndeed. The current build system assumes that if the package is installed it is because I explicitly want it in sage. It is a long standing convention which from where I sit on the outside is called automagic detection. The reality is that it belongs to configuration space (with availability checking - autoconf style). Sure it is possibly more risky to use an outside package but if it satisfy the availability checking, why not?\n\nAfter all, at least some of us want to push sage down that way. \n\nAlso note that for executables `Features` only cares about availability in the path, from sage or not (as it should as far as I am concerned). So not caring whether it is from sage or not is in spirit. \n\nI'll admit to have a bias since I want most of `sage/misc/package.py` to be gone with a top priority on `is_package_installed` in particular.",
    "created_at": "2016-09-08T07:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296674",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:83'>Comment 83:</a>
Replying to [@jdemeyer](#comment%3A82):
> Replying to [@saraedum](#comment%3A81):
> > But I would like to tell people what is the problem here.

> 
> The problem is that they need to install the optional Sage package. That's what you should tell.
> 
> > In that particular case, the module also would not import but that's more obscure than telling people that the required library is missing.

> 
> But the `OptionalModule` machine checks whether the optional Sage package is installed. Having the library available from the OS would not help.
> 

Indeed. The current build system assumes that if the package is installed it is because I explicitly want it in sage. It is a long standing convention which from where I sit on the outside is called automagic detection. The reality is that it belongs to configuration space (with availability checking - autoconf style). Sure it is possibly more risky to use an outside package but if it satisfy the availability checking, why not?

After all, at least some of us want to push sage down that way. 

Also note that for executables `Features` only cares about availability in the path, from sage or not (as it should as far as I am concerned). So not caring whether it is from sage or not is in spirit. 

I'll admit to have a bias since I want most of `sage/misc/package.py` to be gone with a top priority on `is_package_installed` in particular.



---

archive/issue_comments_296675.json:
```json
{
    "body": "<a id='comment:84'>Comment 84:</a>\nReplying to [@kiwifb](#comment%3A83):\n> The reality is that it belongs to configuration space (with availability checking - autoconf style). Sure it is possibly more risky to use an outside package but if it satisfy the availability checking, why not?\n\nI'm not disagreeing with that. However, it is besides the point. This ticket should implement the current reality, not some future plan.",
    "created_at": "2016-09-08T07:33:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296675",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:84'>Comment 84:</a>
Replying to [@kiwifb](#comment%3A83):
> The reality is that it belongs to configuration space (with availability checking - autoconf style). Sure it is possibly more risky to use an outside package but if it satisfy the availability checking, why not?

I'm not disagreeing with that. However, it is besides the point. This ticket should implement the current reality, not some future plan.



---

archive/issue_comments_296676.json:
```json
{
    "body": "<a id='comment:85'>Comment 85:</a>\nI don't think `feature` can replace the current reality of what happens in `OptionalExtension`. It should be strictly future work. I am OK for it to be left as is until we decide it is time to move.",
    "created_at": "2016-09-08T07:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296676",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:85'>Comment 85:</a>
I don't think `feature` can replace the current reality of what happens in `OptionalExtension`. It should be strictly future work. I am OK for it to be left as is until we decide it is time to move.



---

archive/issue_comments_296677.json:
```json
{
    "body": "<a id='comment:86'>Comment 86:</a>\nI guess if building and possibly documentation are the only place left using stuff from `package.py` it could be moved to `sage_setup` where things not needed at run-time belongs in my opinion.",
    "created_at": "2016-09-08T08:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296677",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:86'>Comment 86:</a>
I guess if building and possibly documentation are the only place left using stuff from `package.py` it could be moved to `sage_setup` where things not needed at run-time belongs in my opinion.



---

archive/issue_comments_296678.json:
```json
{
    "body": "<a id='comment:87'>Comment 87:</a>\ndocumentation -> doctesting",
    "created_at": "2016-09-08T08:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296678",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:87'>Comment 87:</a>
documentation -> doctesting



---

archive/issue_comments_296679.json:
```json
{
    "body": "<a id='comment:88'>Comment 88:</a>\nI think I have not made my point clear in [comment:82]\n\nWhat I wanted to say: you should remove the check for libraries from the `OptionalModule` features. It is *currently* (whether you like it or not) the job of `OptionalExtension` in `sage_setup` to decide whether or not to build the Python module. I don't see the point of the redundant check in `OptionalModule`. It needlessly complicates things and it is actually wrong (`OptionalModule` requires a Sage package, not a system package).",
    "created_at": "2016-09-16T08:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296679",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:88'>Comment 88:</a>
I think I have not made my point clear in [comment:82]

What I wanted to say: you should remove the check for libraries from the `OptionalModule` features. It is *currently* (whether you like it or not) the job of `OptionalExtension` in `sage_setup` to decide whether or not to build the Python module. I don't see the point of the redundant check in `OptionalModule`. It needlessly complicates things and it is actually wrong (`OptionalModule` requires a Sage package, not a system package).



---

archive/issue_comments_296680.json:
```json
{
    "body": "Changed commit from **[2086217](https://github.com/sagemath/sagetrac-mirror/commit/20862171588e5dbcd0d08e77cf8b0ab8cc718581)** to **[e23341d](https://github.com/sagemath/sagetrac-mirror/commit/e23341dacc43e5bc691dd7585d639ce8ef9a0cf7)**",
    "created_at": "2016-10-02T09:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296680",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[2086217](https://github.com/sagemath/sagetrac-mirror/commit/20862171588e5dbcd0d08e77cf8b0ab8cc718581)** to **[e23341d](https://github.com/sagemath/sagetrac-mirror/commit/e23341dacc43e5bc691dd7585d639ce8ef9a0cf7)**



---

archive/issue_comments_296681.json:
```json
{
    "body": "<a id='comment:89'>Comment 89:</a>\nRebasing on current develop. Someone else should check that I did everything right. One worry when building in parallel building of documentation kept on failing on `:module:` in `package.py`. When I built serial it just worked.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e23341dacc43e5bc691dd7585d639ce8ef9a0cf7\">e23341d</a></td><td><code>Merge branch 'develop' into features</code></td></tr></table>\n",
    "created_at": "2016-10-02T09:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296681",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:89'>Comment 89:</a>
Rebasing on current develop. Someone else should check that I did everything right. One worry when building in parallel building of documentation kept on failing on `:module:` in `package.py`. When I built serial it just worked.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e23341dacc43e5bc691dd7585d639ce8ef9a0cf7">e23341d</a></td><td><code>Merge branch 'develop' into features</code></td></tr></table>




---

archive/issue_comments_296682.json:
```json
{
    "body": "Changed branch from **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)** to **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)**",
    "created_at": "2016-10-02T09:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296682",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/saraedum/replace_is_package_installed_with_features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/replace_is_package_installed_with_features)** to **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)**



---

archive/issue_comments_296683.json:
```json
{
    "body": "<a id='comment:90'>Comment 90:</a>\nReplying to [@jdemeyer](#comment%3A88):\n> I think I have not made my point clear in [comment:82]\n> \n> What I wanted to say: you should remove the check for libraries from the `OptionalModule` features. It is *currently* (whether you like it or not) the job of `OptionalExtension` in `sage_setup` to decide whether or not to build the Python module. I don't see the point of the redundant check in `OptionalModule`. It needlessly complicates things and it is actually wrong (`OptionalModule` requires a Sage package, not a system package).\n\nI don't understand. I meant to write this so it works for a sage that has not been installed through sage-the-distribution. So, for the module to work, I have to check that it has been compiled and that the library it uses actually works. For sage-the-distribution the second part is redundant for other distributions it may not be.",
    "created_at": "2016-11-28T10:00:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296683",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:90'>Comment 90:</a>
Replying to [@jdemeyer](#comment%3A88):
> I think I have not made my point clear in [comment:82]
> 
> What I wanted to say: you should remove the check for libraries from the `OptionalModule` features. It is *currently* (whether you like it or not) the job of `OptionalExtension` in `sage_setup` to decide whether or not to build the Python module. I don't see the point of the redundant check in `OptionalModule`. It needlessly complicates things and it is actually wrong (`OptionalModule` requires a Sage package, not a system package).

I don't understand. I meant to write this so it works for a sage that has not been installed through sage-the-distribution. So, for the module to work, I have to check that it has been compiled and that the library it uses actually works. For sage-the-distribution the second part is redundant for other distributions it may not be.



---

archive/issue_comments_296684.json:
```json
{
    "body": "<a id='comment:92'>Comment 92:</a>\nReplying to [@saraedum](#comment%3A90):\n> So, for the module to work, I have to check that it has been compiled and that the library it uses actually works.\n\nNo, you don't need to check anything. The module is linked against the library. If the library didn't work, the module probably wouldn't even compile and it certainly wouldn't be importable. If you can import the module, then surely the library works.",
    "created_at": "2017-01-05T16:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296684",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:92'>Comment 92:</a>
Replying to [@saraedum](#comment%3A90):
> So, for the module to work, I have to check that it has been compiled and that the library it uses actually works.

No, you don't need to check anything. The module is linked against the library. If the library didn't work, the module probably wouldn't even compile and it certainly wouldn't be importable. If you can import the module, then surely the library works.



---

archive/issue_comments_296685.json:
```json
{
    "body": "Work Issues: **does not apply**",
    "created_at": "2017-01-12T01:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296685",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **does not apply**



---

archive/issue_comments_296686.json:
```json
{
    "body": "<a id='comment:94'>Comment 94:</a>\nSomething I don't quite get about this:  It seems to be purely for runtime feature checks, which is fine and a good thing to have.  But is there also any intention or thought put into making this usable for build-time feature checks when building Sage?  Is there any way this could be used to check the system for features during `./configure` (i.e. as a replacement for a m4 scripts to do the same)?",
    "created_at": "2017-01-12T09:44:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296686",
    "user": "https://github.com/embray"
}
```

<a id='comment:94'>Comment 94:</a>
Something I don't quite get about this:  It seems to be purely for runtime feature checks, which is fine and a good thing to have.  But is there also any intention or thought put into making this usable for build-time feature checks when building Sage?  Is there any way this could be used to check the system for features during `./configure` (i.e. as a replacement for a m4 scripts to do the same)?



---

archive/issue_comments_296687.json:
```json
{
    "body": "<a id='comment:95'>Comment 95:</a>\nWhen we originally discussed this during Sage days the idea was to eventually use it for both, build and compile time. For that it would have to be moved out of the sage library probably. So yes, we thought about this as a possible second step.",
    "created_at": "2017-01-12T17:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296687",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:95'>Comment 95:</a>
When we originally discussed this during Sage days the idea was to eventually use it for both, build and compile time. For that it would have to be moved out of the sage library probably. So yes, we thought about this as a possible second step.



---

archive/issue_comments_296688.json:
```json
{
    "body": "<a id='comment:96'>Comment 96:</a>\nThanks for clarifying that.  Yes, for that reason alone it would make sense to have as a stand-alone package of sorts.\n\nIs there anything I can do to help move this forward?  I think getting this to a state where it can also detect already installed dependencies will help massively speed up development time in some cases.",
    "created_at": "2017-01-13T11:07:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296688",
    "user": "https://github.com/embray"
}
```

<a id='comment:96'>Comment 96:</a>
Thanks for clarifying that.  Yes, for that reason alone it would make sense to have as a stand-alone package of sorts.

Is there anything I can do to help move this forward?  I think getting this to a state where it can also detect already installed dependencies will help massively speed up development time in some cases.



---

archive/issue_comments_296689.json:
```json
{
    "body": "<a id='comment:97'>Comment 97:</a>\nI am quite happy to have it for run-time only in the first instance. One issue for building is that we are not quite ready to use non sage installed optional package at this stage (i.e. finding optional package not installed by sage).\n\nFixing runtime would remove a burden from sage-on-distro, especially the bits depending on `is_package_installed` that we don't want to use in a distro. Build time can be fixed if the distro decides to support a particular option. But ideally we would want something more fine grained. Ideally it would tie up with a proper configuration phase.",
    "created_at": "2017-01-14T09:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296689",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:97'>Comment 97:</a>
I am quite happy to have it for run-time only in the first instance. One issue for building is that we are not quite ready to use non sage installed optional package at this stage (i.e. finding optional package not installed by sage).

Fixing runtime would remove a burden from sage-on-distro, especially the bits depending on `is_package_installed` that we don't want to use in a distro. Build time can be fixed if the distro decides to support a particular option. But ideally we would want something more fine grained. Ideally it would tie up with a proper configuration phase.



---

archive/issue_comments_296690.json:
```json
{
    "body": "<a id='comment:98'>Comment 98:</a>\nReplying to [@kiwifb](#comment%3A97):\n> I am quite happy to have it for run-time only in the first instance. One issue for building is that we are not quite ready to use non sage installed optional package at this stage (i.e. finding optional package not installed by sage).\n\nI'm not sure what you mean exactly by this.  Why should optional packages be a problem as long as this can be useful for non-optional packages?\n\n> Fixing runtime would remove a burden from sage-on-distro, especially the bits depending on `is_package_installed` that we don't want to use in a distro. Build time can be fixed if the distro decides to support a particular option. But ideally we would want something more fine grained. Ideally it would tie up with a proper configuration phase.\n\nYes, that work is going on in #21566 and other associated tickets.\n\nTo be clear, I think we're in agreement that *this ticket* should not handle any tasks directly related to enabling build-time detection of dependencies.  I agree that's a separate issue.  My point is that we should keep that use-case in mind for this ticket insofar as the checks its provides don't depend on having a fully working Sage install already, and that it exists outside the main Sage package.\n\nIn other words, this ticket could remain focused on fixing the `is_package_installed` issue, but just keep in mind the other use case that this code could help resolve.",
    "created_at": "2017-01-16T13:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296690",
    "user": "https://github.com/embray"
}
```

<a id='comment:98'>Comment 98:</a>
Replying to [@kiwifb](#comment%3A97):
> I am quite happy to have it for run-time only in the first instance. One issue for building is that we are not quite ready to use non sage installed optional package at this stage (i.e. finding optional package not installed by sage).

I'm not sure what you mean exactly by this.  Why should optional packages be a problem as long as this can be useful for non-optional packages?

> Fixing runtime would remove a burden from sage-on-distro, especially the bits depending on `is_package_installed` that we don't want to use in a distro. Build time can be fixed if the distro decides to support a particular option. But ideally we would want something more fine grained. Ideally it would tie up with a proper configuration phase.

Yes, that work is going on in #21566 and other associated tickets.

To be clear, I think we're in agreement that *this ticket* should not handle any tasks directly related to enabling build-time detection of dependencies.  I agree that's a separate issue.  My point is that we should keep that use-case in mind for this ticket insofar as the checks its provides don't depend on having a fully working Sage install already, and that it exists outside the main Sage package.

In other words, this ticket could remain focused on fixing the `is_package_installed` issue, but just keep in mind the other use case that this code could help resolve.



---

archive/issue_comments_296691.json:
```json
{
    "body": "Changed branch from **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)** to **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)**",
    "created_at": "2017-03-13T22:34:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296691",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)** to **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)**



---

archive/issue_comments_296692.json:
```json
{
    "body": "<a id='comment:0'>Comment 0:</a>\nAfter some discussion with jdemeyer, I'll remove the current checks OptionalModule. I'll leave the possibility for such checks in though.",
    "created_at": "2017-03-13T22:35:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296692",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:0'>Comment 0:</a>
After some discussion with jdemeyer, I'll remove the current checks OptionalModule. I'll leave the possibility for such checks in though.



---

archive/issue_comments_296693.json:
```json
{
    "body": "Changed branch from **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)** to **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)**",
    "created_at": "2017-03-13T22:35:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296693",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)** to **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)**



---

archive/issue_events_259939.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-03-13T22:41:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259939"
}
```



---

archive/issue_events_259940.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-03-13T22:41:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259940"
}
```



---

archive/issue_comments_296694.json:
```json
{
    "body": "Changed branch from **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)** to **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)**",
    "created_at": "2017-03-13T22:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296694",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/fbissey/features](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/features)** to **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)**



---

archive/issue_comments_296695.json:
```json
{
    "body": "Changed reviewer from **Nicolas M. Thi\u00e9ry, ...** to **Nicolas M. Thi\u00e9ry**",
    "created_at": "2017-03-13T23:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296695",
    "user": "https://github.com/saraedum"
}
```

Changed reviewer from **Nicolas M. Thiéry, ...** to **Nicolas M. Thiéry**



---

archive/issue_comments_296696.json:
```json
{
    "body": "Changed commit from **[e23341d](https://github.com/sagemath/sagetrac-mirror/commit/e23341dacc43e5bc691dd7585d639ce8ef9a0cf7)** to **[c809deb](https://github.com/sagemath/sagetrac-mirror/commit/c809debf750e7ee2fb3d2792f4ff73ab5626120e)**",
    "created_at": "2017-03-13T23:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296696",
    "user": "https://github.com/saraedum"
}
```

Changed commit from **[e23341d](https://github.com/sagemath/sagetrac-mirror/commit/e23341dacc43e5bc691dd7585d639ce8ef9a0cf7)** to **[c809deb](https://github.com/sagemath/sagetrac-mirror/commit/c809debf750e7ee2fb3d2792f4ff73ab5626120e)**



---

archive/issue_comments_296697.json:
```json
{
    "body": "Changed work issues from **does not apply** to none",
    "created_at": "2017-03-13T23:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296697",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **does not apply** to none



---

archive/issue_comments_296698.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3947c4fae87db8a06cb250627c9b1fe48a7fb47\">a3947c4</a></td><td><code>Merge branch 'develop' into t/20382/features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c809debf750e7ee2fb3d2792f4ff73ab5626120e\">c809deb</a></td><td><code>Remove runtime dependencies on shared libraries</code></td></tr></table>\n",
    "created_at": "2017-03-13T23:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296698",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:3'>Comment 3:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3947c4fae87db8a06cb250627c9b1fe48a7fb47">a3947c4</a></td><td><code>Merge branch 'develop' into t/20382/features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c809debf750e7ee2fb3d2792f4ff73ab5626120e">c809deb</a></td><td><code>Remove runtime dependencies on shared libraries</code></td></tr></table>




---

archive/issue_comments_296699.json:
```json
{
    "body": "Changed keywords from **** to **days85**",
    "created_at": "2017-03-14T16:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296699",
    "user": "https://github.com/saraedum"
}
```

Changed keywords from **** to **days85**



---

archive/issue_comments_296700.json:
```json
{
    "body": "Changed dependencies from **#21289** to none",
    "created_at": "2017-03-14T16:27:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296700",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#21289** to none



---

archive/issue_comments_296701.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nShouldn't *all* feature checks be cached?",
    "created_at": "2017-03-14T16:34:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296701",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'>Comment 6:</a>
Shouldn't *all* feature checks be cached?



---

archive/issue_comments_296702.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nCopy-paste typo:\n\n```python\nclass Bliss(OptionalModule):\n    r\"\"\"\n    A :class:`Feature` which describes whether the ;module:`sage.graphs.bliss`\n    module has been enabled for this build of Sage and is functional.\n\n    .. NOTE::\n\n------> This module does not depend on :class:`LibFESLibrary`. If the module\n        imports we just assume that the library is working.\n```",
    "created_at": "2017-03-14T16:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296702",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'>Comment 7:</a>
Copy-paste typo:

```python
class Bliss(OptionalModule):
    r"""
    A :class:`Feature` which describes whether the ;module:`sage.graphs.bliss`
    module has been enabled for this build of Sage and is functional.

    .. NOTE::

------> This module does not depend on :class:`LibFESLibrary`. If the module
        imports we just assume that the library is working.
```



---

archive/issue_comments_296703.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI don't like `_test_code`: you define the attribute `_test_code`, pass it through `__init__` and then assign it as the `test_code` attribute. Why so convoluted, you might as well assign `test_code` directly.",
    "created_at": "2017-03-14T16:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296703",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'>Comment 8:</a>
I don't like `_test_code`: you define the attribute `_test_code`, pass it through `__init__` and then assign it as the `test_code` attribute. Why so convoluted, you might as well assign `test_code` directly.



---

archive/issue_comments_296704.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nSpeaking of test code, wouldn't it be cleaner to move the test code snippets to separate files? Right now, I find it a bit distracting to have the Cython test code in between the Python code implementing the testing logic.",
    "created_at": "2017-03-14T16:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296704",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'>Comment 9:</a>
Speaking of test code, wouldn't it be cleaner to move the test code snippets to separate files? Right now, I find it a bit distracting to have the Cython test code in between the Python code implementing the testing logic.



---

archive/issue_comments_296705.json:
```json
{
    "body": "<a id='comment:0'>Comment 0:</a>\nTypo: <code>;module:\\`sage.libs.fes\\`</code>",
    "created_at": "2017-03-14T16:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296705",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:0'>Comment 0:</a>
Typo: <code>;module:\`sage.libs.fes\`</code>



---

archive/issue_comments_296706.json:
```json
{
    "body": "<a id='comment:111'>Comment 111:</a>\nReplying to [@saraedum](#comment%3A100):\n> After some discussion with jdemeyer, I'll remove the current checks OptionalModule.\n\nGiven that `OptionalModule` and `Module` essentially do the same thing, can you just get rid of the `OptionalModule` class completely?",
    "created_at": "2017-03-14T16:49:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296706",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:111'>Comment 111:</a>
Replying to [@saraedum](#comment%3A100):
> After some discussion with jdemeyer, I'll remove the current checks OptionalModule.

Given that `OptionalModule` and `Module` essentially do the same thing, can you just get rid of the `OptionalModule` class completely?



---

archive/issue_comments_296707.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI don't really like the names `LibFES` and `Bliss`. I would prefer something which clearly reminds that this is just about the module: I would call them `FESModule` and `BlissModule`.",
    "created_at": "2017-03-14T16:50:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296707",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'>Comment 2:</a>
I don't really like the names `LibFES` and `Bliss`. I would prefer something which clearly reminds that this is just about the module: I would call them `FESModule` and `BlissModule`.



---

archive/issue_comments_296708.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nAnother suggestion: split this one big file `src/sage/misc/feature_test.py` up. It would be good to separate the abstract base classes (like `Executable`, `SharedLibrary`,...) from the actual concrete tests.\n\nPersonally, I would even have one file for each package, for example `src/sage/misc/feature_test/bliss.py` for `BlissLibrary` and `BlissModule`. In this case, you can define the Cython test code as module global, which would solve [comment:109] too.",
    "created_at": "2017-03-14T16:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296708",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'>Comment 3:</a>
Another suggestion: split this one big file `src/sage/misc/feature_test.py` up. It would be good to separate the abstract base classes (like `Executable`, `SharedLibrary`,...) from the actual concrete tests.

Personally, I would even have one file for each package, for example `src/sage/misc/feature_test/bliss.py` for `BlissLibrary` and `BlissModule`. In this case, you can define the Cython test code as module global, which would solve [comment:109] too.



---

archive/issue_comments_296709.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nExcept for the typos, we do not fully agree on whether the above should be changed or not. jdemeyer agreed to split up the module, introduce caching, and do the renamings himself.",
    "created_at": "2017-03-14T19:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296709",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:4'>Comment 4:</a>
Except for the typos, we do not fully agree on whether the above should be changed or not. jdemeyer agreed to split up the module, introduce caching, and do the renamings himself.



---

archive/issue_events_259941.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-03-14T19:22:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259941"
}
```



---

archive/issue_events_259942.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-03-14T19:22:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259942"
}
```



---

archive/issue_comments_296710.json:
```json
{
    "body": "Assignee: **@jdemeyer**",
    "created_at": "2017-03-14T19:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296710",
    "user": "https://github.com/saraedum"
}
```

Assignee: **@jdemeyer**



---

archive/issue_comments_296711.json:
```json
{
    "body": "Dependencies: **#22113**",
    "created_at": "2017-03-15T15:02:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296711",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#22113**



---

archive/issue_comments_296712.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThis is a minor nit, but is there a reason this isn't using `super().__init__` for calling the base-class `__init__`s?",
    "created_at": "2017-04-03T07:06:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296712",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'>Comment 7:</a>
This is a minor nit, but is there a reason this isn't using `super().__init__` for calling the base-class `__init__`s?



---

archive/issue_comments_296713.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nWhat should we do about this issue? I had put a lot of work into this and I would like to get this merged.\n\nJeroen: Would you agree to merge this as is now (after fixing patchbot errors)? Or can I expect a patch anytime soon?",
    "created_at": "2018-01-31T15:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296713",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:9'>Comment 9:</a>
What should we do about this issue? I had put a lot of work into this and I would like to get this merged.

Jeroen: Would you agree to merge this as is now (after fixing patchbot errors)? Or can I expect a patch anytime soon?



---

archive/issue_events_259943.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-01-31T15:13:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259943"
}
```



---

archive/issue_events_259944.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-01-31T15:13:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259944"
}
```



---

archive/issue_comments_296714.json:
```json
{
    "body": "<a id='comment:0'>Comment 0:</a>\nI've in the meantime started moving in a different direction for build-time feature dependency checks, so to me at least my earlier questions about using this for that purpose are moot.  But I'm still +1 on having it for runtime feature checks.\n\nIt looks like the patch does not apply so I think you'll have to set this back to needs_work.  I'd be happy to help rebasing your patch if need be.",
    "created_at": "2018-01-31T15:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296714",
    "user": "https://github.com/embray"
}
```

<a id='comment:0'>Comment 0:</a>
I've in the meantime started moving in a different direction for build-time feature dependency checks, so to me at least my earlier questions about using this for that purpose are moot.  But I'm still +1 on having it for runtime feature checks.

It looks like the patch does not apply so I think you'll have to set this back to needs_work.  I'd be happy to help rebasing your patch if need be.



---

archive/issue_comments_296715.json:
```json
{
    "body": "Changed branch from **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)** to **[u/jdemeyer/features](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/features)**",
    "created_at": "2018-02-12T14:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296715",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/saraedum/features](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/features)** to **[u/jdemeyer/features](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/features)**



---

archive/issue_comments_296716.json:
```json
{
    "body": "Changed dependencies from **#22113** to none",
    "created_at": "2018-02-12T14:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296716",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#22113** to none



---

archive/issue_comments_296717.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI'll clean this up.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3deea8282218b1549179972183d37b354da9d2e4\">3deea82</a></td><td><code>Add Features to check the environment at runtime</code></td></tr></table>\n",
    "created_at": "2018-02-12T14:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296717",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'>Comment 2:</a>
I'll clean this up.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3deea8282218b1549179972183d37b354da9d2e4">3deea82</a></td><td><code>Add Features to check the environment at runtime</code></td></tr></table>




---

archive/issue_comments_296718.json:
```json
{
    "body": "Changed author from **Julian R\u00fcth** to **Julian R\u00fcth, Jeroen Demeyer**",
    "created_at": "2018-02-12T14:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296718",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Julian Rüth** to **Julian Rüth, Jeroen Demeyer**



---

archive/issue_comments_296719.json:
```json
{
    "body": "Changed commit from **[c809deb](https://github.com/sagemath/sagetrac-mirror/commit/c809debf750e7ee2fb3d2792f4ff73ab5626120e)** to **[3deea82](https://github.com/sagemath/sagetrac-mirror/commit/3deea8282218b1549179972183d37b354da9d2e4)**",
    "created_at": "2018-02-12T14:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296719",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[c809deb](https://github.com/sagemath/sagetrac-mirror/commit/c809debf750e7ee2fb3d2792f4ff73ab5626120e)** to **[3deea82](https://github.com/sagemath/sagetrac-mirror/commit/3deea8282218b1549179972183d37b354da9d2e4)**



---

archive/issue_events_259945.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T14:37:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259945"
}
```



---

archive/issue_events_259946.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T14:37:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259946"
}
```



---

archive/issue_comments_296720.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nIn some cases, bigger changes were made than just using this new `Features` framework. I'll split those off as separate tickets.",
    "created_at": "2018-02-12T14:40:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296720",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'>Comment 3:</a>
In some cases, bigger changes were made than just using this new `Features` framework. I'll split those off as separate tickets.



---

archive/issue_comments_296721.json:
```json
{
    "body": "Changed commit from **[3deea82](https://github.com/sagemath/sagetrac-mirror/commit/3deea8282218b1549179972183d37b354da9d2e4)** to **[c244878](https://github.com/sagemath/sagetrac-mirror/commit/c244878077536ad9bca90b09b8279447bbe2114d)**",
    "created_at": "2018-02-12T14:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296721",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3deea82](https://github.com/sagemath/sagetrac-mirror/commit/3deea8282218b1549179972183d37b354da9d2e4)** to **[c244878](https://github.com/sagemath/sagetrac-mirror/commit/c244878077536ad9bca90b09b8279447bbe2114d)**



---

archive/issue_comments_296722.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c244878077536ad9bca90b09b8279447bbe2114d\">c244878</a></td><td><code>Add Features to check the environment at runtime</code></td></tr></table>\n",
    "created_at": "2018-02-12T14:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296722",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>Comment 4:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c244878077536ad9bca90b09b8279447bbe2114d">c244878</a></td><td><code>Add Features to check the environment at runtime</code></td></tr></table>




---

archive/issue_comments_296723.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nIt seems that `SharedLibrary` is not checking for libraries at all: it just tries to compile some Cython code. So it would be better to rename it as `CythonFeature` or whatever better name I can come up with...",
    "created_at": "2018-02-12T15:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296723",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'>Comment 5:</a>
It seems that `SharedLibrary` is not checking for libraries at all: it just tries to compile some Cython code. So it would be better to rename it as `CythonFeature` or whatever better name I can come up with...



---

archive/issue_comments_296724.json:
```json
{
    "body": "<a id='comment:126'>Comment 126:</a>\nReplying to [@jdemeyer](#comment%3A111):\n> Given that `OptionalModule` and `Module` essentially do the same thing, can you just get rid of the `OptionalModule` class completely?\n\nI will remove `OptionalModule` and also rename `Module` -> `PythonModule`.",
    "created_at": "2018-02-12T15:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296724",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:126'>Comment 126:</a>
Replying to [@jdemeyer](#comment%3A111):
> Given that `OptionalModule` and `Module` essentially do the same thing, can you just get rid of the `OptionalModule` class completely?

I will remove `OptionalModule` and also rename `Module` -> `PythonModule`.



---

archive/issue_comments_296725.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nI just found a problem which is not easy to fix: there is no way as far as I can tell to silence compiler error in distutils. This means that feature checks will show messages like\n\n```\n/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.4/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lxxxxxxxx\ncollect2: error: ld returned 1 exit status\n```",
    "created_at": "2018-02-12T15:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296725",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'>Comment 7:</a>
I just found a problem which is not easy to fix: there is no way as far as I can tell to silence compiler error in distutils. This means that feature checks will show messages like

```
/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.4/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lxxxxxxxx
collect2: error: ld returned 1 exit status
```



---

archive/issue_comments_296726.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI could take a look at that. I feel like that's a problem I've solved once before, also when using distutils for feature checks (even if it means temporarily redirecting stdio or something).",
    "created_at": "2018-02-12T16:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296726",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'>Comment 8:</a>
I could take a look at that. I feel like that's a problem I've solved once before, also when using distutils for feature checks (even if it means temporarily redirecting stdio or something).



---

archive/issue_comments_296727.json:
```json
{
    "body": "Changed commit from **[c244878](https://github.com/sagemath/sagetrac-mirror/commit/c244878077536ad9bca90b09b8279447bbe2114d)** to **[91558bd](https://github.com/sagemath/sagetrac-mirror/commit/91558bd79ce6acfd5afec7089d57f66f5d891950)**",
    "created_at": "2018-02-12T16:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296727",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c244878](https://github.com/sagemath/sagetrac-mirror/commit/c244878077536ad9bca90b09b8279447bbe2114d)** to **[91558bd](https://github.com/sagemath/sagetrac-mirror/commit/91558bd79ce6acfd5afec7089d57f66f5d891950)**



---

archive/issue_comments_296728.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00cb88ee22fcd3596bc665d81a965ca602bde98f\">00cb88e</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91558bd79ce6acfd5afec7089d57f66f5d891950\">91558bd</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T16:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296728",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00cb88ee22fcd3596bc665d81a965ca602bde98f">00cb88e</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91558bd79ce6acfd5afec7089d57f66f5d891950">91558bd</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_296729.json:
```json
{
    "body": "Changed commit from **[91558bd](https://github.com/sagemath/sagetrac-mirror/commit/91558bd79ce6acfd5afec7089d57f66f5d891950)** to **[92f9e79](https://github.com/sagemath/sagetrac-mirror/commit/92f9e79f10da8b1ef9e32f0db49aa185908cdb59)**",
    "created_at": "2018-02-12T16:17:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296729",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[91558bd](https://github.com/sagemath/sagetrac-mirror/commit/91558bd79ce6acfd5afec7089d57f66f5d891950)** to **[92f9e79](https://github.com/sagemath/sagetrac-mirror/commit/92f9e79f10da8b1ef9e32f0db49aa185908cdb59)**



---

archive/issue_comments_296730.json:
```json
{
    "body": "<a id='comment:0'>Comment 0:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d85c54746493d24b3ed49dee6913863eb84c28b\">5d85c54</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92f9e79f10da8b1ef9e32f0db49aa185908cdb59\">92f9e79</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T16:17:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296730",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:0'>Comment 0:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d85c54746493d24b3ed49dee6913863eb84c28b">5d85c54</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92f9e79f10da8b1ef9e32f0db49aa185908cdb59">92f9e79</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_296731.json:
```json
{
    "body": "Changed commit from **[92f9e79](https://github.com/sagemath/sagetrac-mirror/commit/92f9e79f10da8b1ef9e32f0db49aa185908cdb59)** to **[35f6601](https://github.com/sagemath/sagetrac-mirror/commit/35f6601ed41d1e1f767c46a26b4dea2cadf0fa1f)**",
    "created_at": "2018-02-12T16:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296731",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[92f9e79](https://github.com/sagemath/sagetrac-mirror/commit/92f9e79f10da8b1ef9e32f0db49aa185908cdb59)** to **[35f6601](https://github.com/sagemath/sagetrac-mirror/commit/35f6601ed41d1e1f767c46a26b4dea2cadf0fa1f)**



---

archive/issue_comments_296732.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35f6601ed41d1e1f767c46a26b4dea2cadf0fa1f\">35f6601</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T16:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296732",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:1'>Comment 1:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35f6601ed41d1e1f767c46a26b4dea2cadf0fa1f">35f6601</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_events_259947.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T16:22:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259947"
}
```



---

archive/issue_events_259948.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T16:22:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259948"
}
```



---

archive/issue_comments_296733.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI'm setting this to needs_review mainly for patchbot testing. It's probably going to break somewhere, but it should mostly work.",
    "created_at": "2018-02-12T16:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296733",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'>Comment 2:</a>
I'm setting this to needs_review mainly for patchbot testing. It's probably going to break somewhere, but it should mostly work.



---

archive/issue_comments_296734.json:
```json
{
    "body": "Dependencies: **#24720**",
    "created_at": "2018-02-12T20:23:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296734",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#24720**



---

archive/issue_comments_296735.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e3ede550ab51759d2cdb3e0598eb34e7dab277a\">5e3ede5</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T20:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296735",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>Comment 4:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e3ede550ab51759d2cdb3e0598eb34e7dab277a">5e3ede5</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_296736.json:
```json
{
    "body": "Changed commit from **[35f6601](https://github.com/sagemath/sagetrac-mirror/commit/35f6601ed41d1e1f767c46a26b4dea2cadf0fa1f)** to **[5e3ede5](https://github.com/sagemath/sagetrac-mirror/commit/5e3ede550ab51759d2cdb3e0598eb34e7dab277a)**",
    "created_at": "2018-02-12T20:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296736",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[35f6601](https://github.com/sagemath/sagetrac-mirror/commit/35f6601ed41d1e1f767c46a26b4dea2cadf0fa1f)** to **[5e3ede5](https://github.com/sagemath/sagetrac-mirror/commit/5e3ede550ab51759d2cdb3e0598eb34e7dab277a)**



---

archive/issue_comments_296737.json:
```json
{
    "body": "Changed commit from **[5e3ede5](https://github.com/sagemath/sagetrac-mirror/commit/5e3ede550ab51759d2cdb3e0598eb34e7dab277a)** to **[56a0531](https://github.com/sagemath/sagetrac-mirror/commit/56a05312a139ea6f77f727a3fc379b563b386f9a)**",
    "created_at": "2018-02-12T20:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296737",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5e3ede5](https://github.com/sagemath/sagetrac-mirror/commit/5e3ede550ab51759d2cdb3e0598eb34e7dab277a)** to **[56a0531](https://github.com/sagemath/sagetrac-mirror/commit/56a05312a139ea6f77f727a3fc379b563b386f9a)**



---

archive/issue_comments_296738.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56a05312a139ea6f77f727a3fc379b563b386f9a\">56a0531</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T20:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296738",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56a05312a139ea6f77f727a3fc379b563b386f9a">56a0531</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_events_259949.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T20:48:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259949"
}
```



---

archive/issue_events_259950.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T20:48:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259950"
}
```



---

archive/issue_comments_296739.json:
```json
{
    "body": "Changed commit from **[56a0531](https://github.com/sagemath/sagetrac-mirror/commit/56a05312a139ea6f77f727a3fc379b563b386f9a)** to **[69ad200](https://github.com/sagemath/sagetrac-mirror/commit/69ad20017c57129525a4a6b34f0cdb4711021467)**",
    "created_at": "2018-02-12T21:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296739",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[56a0531](https://github.com/sagemath/sagetrac-mirror/commit/56a05312a139ea6f77f727a3fc379b563b386f9a)** to **[69ad200](https://github.com/sagemath/sagetrac-mirror/commit/69ad20017c57129525a4a6b34f0cdb4711021467)**



---

archive/issue_comments_296740.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69ad20017c57129525a4a6b34f0cdb4711021467\">69ad200</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T21:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296740",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69ad20017c57129525a4a6b34f0cdb4711021467">69ad200</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_296741.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI now consider this finished, apart from #24720.",
    "created_at": "2018-02-12T21:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296741",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'>Comment 8:</a>
I now consider this finished, apart from #24720.



---

archive/issue_comments_296742.json:
```json
{
    "body": "Changed commit from **[69ad200](https://github.com/sagemath/sagetrac-mirror/commit/69ad20017c57129525a4a6b34f0cdb4711021467)** to **[af22cc4](https://github.com/sagemath/sagetrac-mirror/commit/af22cc45791b95046ae5e50a7f989290257e224b)**",
    "created_at": "2018-02-12T21:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296742",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[69ad200](https://github.com/sagemath/sagetrac-mirror/commit/69ad20017c57129525a4a6b34f0cdb4711021467)** to **[af22cc4](https://github.com/sagemath/sagetrac-mirror/commit/af22cc45791b95046ae5e50a7f989290257e224b)**



---

archive/issue_comments_296743.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af22cc45791b95046ae5e50a7f989290257e224b\">af22cc4</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T21:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296743",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af22cc45791b95046ae5e50a7f989290257e224b">af22cc4</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_296744.json:
```json
{
    "body": "<a id='comment:0'>Comment 0:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3696d1979dc71abb9a3206eb95f5af725a8b1c6f\">3696d19</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T21:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296744",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:0'>Comment 0:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3696d1979dc71abb9a3206eb95f5af725a8b1c6f">3696d19</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_296745.json:
```json
{
    "body": "Changed commit from **[af22cc4](https://github.com/sagemath/sagetrac-mirror/commit/af22cc45791b95046ae5e50a7f989290257e224b)** to **[3696d19](https://github.com/sagemath/sagetrac-mirror/commit/3696d1979dc71abb9a3206eb95f5af725a8b1c6f)**",
    "created_at": "2018-02-12T21:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296745",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[af22cc4](https://github.com/sagemath/sagetrac-mirror/commit/af22cc45791b95046ae5e50a7f989290257e224b)** to **[3696d19](https://github.com/sagemath/sagetrac-mirror/commit/3696d1979dc71abb9a3206eb95f5af725a8b1c6f)**



---

archive/issue_comments_296746.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32a8eab55a755a24faf4b3ba9bc8c796bbfa4fe6\">32a8eab</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-02-12T21:52:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296746",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:1'>Comment 1:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32a8eab55a755a24faf4b3ba9bc8c796bbfa4fe6">32a8eab</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_296747.json:
```json
{
    "body": "Changed commit from **[3696d19](https://github.com/sagemath/sagetrac-mirror/commit/3696d1979dc71abb9a3206eb95f5af725a8b1c6f)** to **[32a8eab](https://github.com/sagemath/sagetrac-mirror/commit/32a8eab55a755a24faf4b3ba9bc8c796bbfa4fe6)**",
    "created_at": "2018-02-12T21:52:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296747",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3696d19](https://github.com/sagemath/sagetrac-mirror/commit/3696d1979dc71abb9a3206eb95f5af725a8b1c6f)** to **[32a8eab](https://github.com/sagemath/sagetrac-mirror/commit/32a8eab55a755a24faf4b3ba9bc8c796bbfa4fe6)**



---

archive/issue_comments_296748.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nIt looks really good. There are a few files remaining to migrate to \"features\" not covered here but that's good for a first iteration and will prove that the concept work. One more file should be migrated in this ticket I think, `databases/cremona.py`  because it is the only file that would use `features/databases.py` as it currently stands.\n\nFor info the following files have stuff to convert\n* coding/linear_code.py\n* coding/guava.py\n* coding/databases.py\n* graphs/generators/smallgraphs.py\n* groups/abelian_gps/abelian_group.py\nAll of these are about some gap packages.",
    "created_at": "2018-02-12T22:09:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296748",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:2'>Comment 2:</a>
It looks really good. There are a few files remaining to migrate to "features" not covered here but that's good for a first iteration and will prove that the concept work. One more file should be migrated in this ticket I think, `databases/cremona.py`  because it is the only file that would use `features/databases.py` as it currently stands.

For info the following files have stuff to convert
* coding/linear_code.py
* coding/guava.py
* coding/databases.py
* graphs/generators/smallgraphs.py
* groups/abelian_gps/abelian_group.py
All of these are about some gap packages.



---

archive/issue_comments_296749.json:
```json
{
    "body": "<a id='comment:143'>Comment 143:</a>\nReplying to [@kiwifb](#comment%3A142):\n> One more file should be migrated in this ticket I think, `databases/cremona.py`  because it is the only file that would use `features/databases.py` as it currently stands.\n\nI split that off as #24718.",
    "created_at": "2018-02-13T06:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296749",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:143'>Comment 143:</a>
Replying to [@kiwifb](#comment%3A142):
> One more file should be migrated in this ticket I think, `databases/cremona.py`  because it is the only file that would use `features/databases.py` as it currently stands.

I split that off as #24718.



---

archive/issue_comments_296750.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nIf you care about this ticket, please review #24722, #24724, #24720 which all deal with improving `sage.misc.cython` to allow for silent operation.",
    "created_at": "2018-02-13T15:41:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296750",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'>Comment 4:</a>
If you care about this ticket, please review #24722, #24724, #24720 which all deal with improving `sage.misc.cython` to allow for silent operation.



---

archive/issue_comments_296751.json:
```json
{
    "body": "Changed reviewer from **Nicolas M. Thi\u00e9ry** to **Nicolas M. Thi\u00e9ry, Fran\u00e7ois Bissey**",
    "created_at": "2018-02-25T22:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296751",
    "user": "https://github.com/kiwifb"
}
```

Changed reviewer from **Nicolas M. Thiéry** to **Nicolas M. Thiéry, François Bissey**



---

archive/issue_comments_296752.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nOK I think it is time to move this ticket further.",
    "created_at": "2018-02-25T22:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296752",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'>Comment 5:</a>
OK I think it is time to move this ticket further.



---

archive/issue_events_259951.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-02-25T22:23:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259951"
}
```



---

archive/issue_events_259952.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-02-25T22:23:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259952"
}
```



---

archive/issue_events_259953.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-02-25T22:23:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259953"
}
```



---

archive/issue_events_259954.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-02-25T22:23:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259954"
}
```



---

archive/issue_comments_296753.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nI never set this to needs_review.",
    "created_at": "2018-02-26T08:55:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296753",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'>Comment 6:</a>
I never set this to needs_review.



---

archive/issue_events_259955.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-26T08:55:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259955"
}
```



---

archive/issue_events_259956.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-26T08:55:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259956"
}
```



---

archive/issue_comments_296754.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThere is one issue remaining: this shouldn't use `cython_import()` but a direct `cython()` call. For simplicity, I plan to do that once all dependencies are merged.",
    "created_at": "2018-02-26T08:56:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296754",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'>Comment 7:</a>
There is one issue remaining: this shouldn't use `cython_import()` but a direct `cython()` call. For simplicity, I plan to do that once all dependencies are merged.



---

archive/issue_comments_296755.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nOk, at [#20382 comment:138](https://github.com/sagemath/sage/issues/20382#comment:138) you said you considered this done. So I assumed too much out of that. Works well as far as I am concerned.",
    "created_at": "2018-02-26T09:21:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296755",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'>Comment 8:</a>
Ok, at [#20382 comment:138](https://github.com/sagemath/sage/issues/20382#comment:138) you said you considered this done. So I assumed too much out of that. Works well as far as I am concerned.



---

archive/issue_comments_296756.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI guess I meant more broadly \"apart from issues with Cython\".",
    "created_at": "2018-02-26T21:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296756",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'>Comment 9:</a>
I guess I meant more broadly "apart from issues with Cython".



---

archive/issue_comments_296757.json:
```json
{
    "body": "<a id='comment:0'>Comment 0:</a>\nIt looks like the dependencies that you listed will be in the next beta - which could turn out to be a rc at this stage. Are there any more tickets that need to go in prior to this one in your opinion?",
    "created_at": "2018-02-26T21:05:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296757",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:0'>Comment 0:</a>
It looks like the dependencies that you listed will be in the next beta - which could turn out to be a rc at this stage. Are there any more tickets that need to go in prior to this one in your opinion?



---

archive/issue_comments_296758.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\n#24764 would be nice because it touches the same code.",
    "created_at": "2018-02-26T21:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296758",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'>Comment 1:</a>
#24764 would be nice because it touches the same code.



---

archive/issue_comments_296759.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\n#24764 is in.",
    "created_at": "2018-03-13T09:18:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296759",
    "user": "https://github.com/slel"
}
```

<a id='comment:2'>Comment 2:</a>
#24764 is in.



---

archive/issue_comments_296760.json:
```json
{
    "body": "Changed dependencies from **#24720** to none",
    "created_at": "2018-03-13T11:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296760",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#24720** to none



---

archive/issue_comments_296761.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e4c504f07e540d67a18645bed3f234d48828404\">8e4c504</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca\">ad6dcc6</a></td><td><code>Cleanup feature tests</code></td></tr></table>\n",
    "created_at": "2018-03-13T14:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296761",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>Comment 4:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e4c504f07e540d67a18645bed3f234d48828404">8e4c504</a></td><td><code>Add Features to check the environment at runtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca">ad6dcc6</a></td><td><code>Cleanup feature tests</code></td></tr></table>




---

archive/issue_comments_296762.json:
```json
{
    "body": "Changed commit from **[32a8eab](https://github.com/sagemath/sagetrac-mirror/commit/32a8eab55a755a24faf4b3ba9bc8c796bbfa4fe6)** to **[ad6dcc6](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)**",
    "created_at": "2018-03-13T14:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296762",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[32a8eab](https://github.com/sagemath/sagetrac-mirror/commit/32a8eab55a755a24faf4b3ba9bc8c796bbfa4fe6)** to **[ad6dcc6](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)**



---

archive/issue_events_259957.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-13T14:50:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259957"
}
```



---

archive/issue_events_259958.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-13T14:50:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259958"
}
```



---

archive/issue_comments_296763.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nSetting milestone to sage-pending because I think that this ticket should **not** be merged in Sage 8.2. The reason is that this ticket has a lot of potential to break stuff because it involves optional packages and those are tested poorly. This would be an ideal ticket to merge in 8.3.beta0.",
    "created_at": "2018-03-13T14:50:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296763",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'>Comment 5:</a>
Setting milestone to sage-pending because I think that this ticket should **not** be merged in Sage 8.2. The reason is that this ticket has a lot of potential to break stuff because it involves optional packages and those are tested poorly. This would be an ideal ticket to merge in 8.3.beta0.



---

archive/issue_events_259959.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-13T14:50:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259959"
}
```



---

archive/issue_events_259960.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-13T14:50:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259960"
}
```



---

archive/issue_comments_296764.json:
```json
{
    "body": "Changed reviewer from **Nicolas M. Thi\u00e9ry, Fran\u00e7ois Bissey** to **Nicolas M. Thi\u00e9ry, Fran\u00e7ois Bissey, Julian R\u00fcth**",
    "created_at": "2018-03-23T21:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296764",
    "user": "https://github.com/saraedum"
}
```

Changed reviewer from **Nicolas M. Thiéry, François Bissey** to **Nicolas M. Thiéry, François Bissey, Julian Rüth**



---

archive/issue_events_259961.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-03-23T21:42:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259961"
}
```



---

archive/issue_events_259962.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-03-23T21:42:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259962"
}
```



---

archive/issue_events_259963.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-26T09:54:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259963"
}
```



---

archive/issue_events_259964.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-26T09:54:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259964"
}
```



---

archive/issue_events_259965.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-08T17:27:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259965"
}
```



---

archive/issue_events_259966.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "417875c3004f5996d50a30b9752e5fa96a36e67c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-05-08T17:27:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20382#event-259966"
}
```



---

archive/issue_comments_296765.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/features](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/features)** to **[ad6dcc6](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)**",
    "created_at": "2018-05-08T17:27:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296765",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/features](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/features)** to **[ad6dcc6](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)**



---

archive/issue_comments_296766.json:
```json
{
    "body": "<a id='comment:159'>Comment 159:</a>\nReplying to [@jdemeyer](#comment%3A155):\n> Setting milestone to sage-pending because I think that this ticket should **not** be merged in Sage 8.2. The reason is that this ticket has a lot of potential to break stuff because it involves optional packages and those are tested poorly. This would be an ideal ticket to merge in 8.3.beta0.\n\nIndeed... help for fixing the consequences in: #25332\n\nAnd one question: the LattE feature from #25400 needs to check for two executables. Should I introduce an abstract class feature \"Executables\" (whose constructor argument would be a list of `Executable` classes)?",
    "created_at": "2018-05-19T08:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296766",
    "user": "https://github.com/videlec"
}
```

<a id='comment:159'>Comment 159:</a>
Replying to [@jdemeyer](#comment%3A155):
> Setting milestone to sage-pending because I think that this ticket should **not** be merged in Sage 8.2. The reason is that this ticket has a lot of potential to break stuff because it involves optional packages and those are tested poorly. This would be an ideal ticket to merge in 8.3.beta0.

Indeed... help for fixing the consequences in: #25332

And one question: the LattE feature from #25400 needs to check for two executables. Should I introduce an abstract class feature "Executables" (whose constructor argument would be a list of `Executable` classes)?



---

archive/issue_comments_296767.json:
```json
{
    "body": "Changed commit from **[ad6dcc6](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)** to none",
    "created_at": "2018-05-19T08:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20382#issuecomment-296767",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[ad6dcc6](https://github.com/sagemath/sagetrac-mirror/commit/ad6dcc6fc50723b616ae32f23ea592c8a27da5ca)** to none
