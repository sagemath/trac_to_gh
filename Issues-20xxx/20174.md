# Issue 20174: Avoid recomputing vacancy numbers for rigged configurations

archive/issues_019937.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  sage-combinat @anneschilling @bsalisbury1\n\nKeywords: rigged configurations\n\nMany of rigged configuration operations, such as `e()` and `f()`, needlessly recompute the vacancy numbers. We simply need to tell the constructor to avoid doing these computations.\n\nAlso, because the Cartan matrices are sparse and general matrix implementation details, it is relatively expensive to iterate over the row. Instead, it is much fast to get the specific entry by `CM[i,j]`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/20174\n\n",
    "closed_at": "2016-03-26T11:30:54Z",
    "created_at": "2016-03-07T08:25:05Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "Avoid recomputing vacancy numbers for rigged configurations",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20174",
    "user": "https://github.com/tscrim"
}
```
Assignee: sage-combinat

CC:  sage-combinat @anneschilling @bsalisbury1

Keywords: rigged configurations

Many of rigged configuration operations, such as `e()` and `f()`, needlessly recompute the vacancy numbers. We simply need to tell the constructor to avoid doing these computations.

Also, because the Cartan matrices are sparse and general matrix implementation details, it is relatively expensive to iterate over the row. Instead, it is much fast to get the specific entry by `CM[i,j]`.

Issue created by migration from https://trac.sagemath.org/ticket/20174





---

archive/issue_comments_274076.json:
```json
{
    "body": "With branch:\n\n```\nsage: RC = RiggedConfigurations(['B',4,1], [[2,1],[3,1]])\nsage: %time len(list(RC))\nCPU times: user 3.33 s, sys: 19.6 ms, total: 3.35 s\nWall time: 3.33 s\n3441\nsage: RC = RiggedConfigurations(['A',4,1], [[2,1],[3,1]])\nsage: %time len(list(RC))\nCPU times: user 41.9 ms, sys: 4.27 ms, total: 46.1 ms\nWall time: 38.8 ms\n100\nsage: RC = RiggedConfigurations(['D',6,1], [[2,1],[3,1]])\nsage: %time len(list(RC))\nCPU times: user 7.17 s, sys: 36 ms, total: 7.21 s\nWall time: 7.19 s\n15544\n```\nvs old version\n\n```\nsage: RC = RiggedConfigurations(['B',4,1], [[2,1],[3,1]])\nsage: %time len(list(RC))\nCPU times: user 12.5 s, sys: 45 ms, total: 12.5 s\nWall time: 12.5 s\n3441\nsage: RC = RiggedConfigurations(['A',4,1], [[2,1],[3,1]])\nsage: %time len(list(RC))\nCPU times: user 97.5 ms, sys: 4.16 ms, total: 102 ms\nWall time: 88.4 ms\n100\nsage: RC = RiggedConfigurations(['D',6,1], [[2,1],[3,1]])\nsage: %time len(list(RC))\nCPU times: user 26.5 s, sys: 52.1 ms, total: 26.6 s\nWall time: 26.5 s\n15544\n```\n\nSlightly annoying how simple changes these were and resulting in such a large speed gain...\n\n---\nNew commits:",
    "created_at": "2016-03-07T08:29:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20174",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20174#issuecomment-274076",
    "user": "https://github.com/tscrim"
}
```

With branch:

```
sage: RC = RiggedConfigurations(['B',4,1], [[2,1],[3,1]])
sage: %time len(list(RC))
CPU times: user 3.33 s, sys: 19.6 ms, total: 3.35 s
Wall time: 3.33 s
3441
sage: RC = RiggedConfigurations(['A',4,1], [[2,1],[3,1]])
sage: %time len(list(RC))
CPU times: user 41.9 ms, sys: 4.27 ms, total: 46.1 ms
Wall time: 38.8 ms
100
sage: RC = RiggedConfigurations(['D',6,1], [[2,1],[3,1]])
sage: %time len(list(RC))
CPU times: user 7.17 s, sys: 36 ms, total: 7.21 s
Wall time: 7.19 s
15544
```
vs old version

```
sage: RC = RiggedConfigurations(['B',4,1], [[2,1],[3,1]])
sage: %time len(list(RC))
CPU times: user 12.5 s, sys: 45 ms, total: 12.5 s
Wall time: 12.5 s
3441
sage: RC = RiggedConfigurations(['A',4,1], [[2,1],[3,1]])
sage: %time len(list(RC))
CPU times: user 97.5 ms, sys: 4.16 ms, total: 102 ms
Wall time: 88.4 ms
100
sage: RC = RiggedConfigurations(['D',6,1], [[2,1],[3,1]])
sage: %time len(list(RC))
CPU times: user 26.5 s, sys: 52.1 ms, total: 26.6 s
Wall time: 26.5 s
15544
```

Slightly annoying how simple changes these were and resulting in such a large speed gain...

---
New commits:



---

archive/issue_comments_274077.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-03-07T08:29:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20174",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20174#issuecomment-274077",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_274078.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-07T08:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20174",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20174#issuecomment-274078",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_274079.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-25T05:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20174",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20174#issuecomment-274079",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_054828.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2016-03-25T05:56:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20174",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20174#event-54828"
}
```



---

archive/issue_events_054829.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-26T11:30:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20174",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20174#event-54829"
}
```



---

archive/issue_comments_274080.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-26T11:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20174",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20174#issuecomment-274080",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
