# Issue 20137: Define "gcc" as standard package

archive/issues_019900.json:
```json
{
    "body": "NOTE: This ticket is about changing the internal configure/install logic, not about changing behaviour.\n\n\"gcc\" is a special Sage package because it's currently the only package which is either installed in Sage or used from the system if it's available.\n\nIn the future, we probably want more packages like this. It makes sense to mark all these packages as \"standard\" with some logic in `configure.ac` to skip the installation of certain standard packages.\n\nI propose to define a *standard package* as a package which will always be available in Sage, either installed by Sage or taken from the system. The logic which is introduced in this ticket for gcc could be used for all those packages.\n\n**Tarball for buildbot**: http://sage.ugent.be/www/jdemeyer/sage/configure-149.tar.gz\n\nCC:  @etn40ff\n\nReviewer: Volker Braun\n\nAuthor: Jeroen Demeyer\n\nBranch: 12034a216056eb0abfccd9d97b362acdf040c6b0\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20137\n\n",
    "closed_at": "2016-03-09T17:31:09Z",
    "created_at": "2016-02-29T15:47:03Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "Define \"gcc\" as standard package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20137",
    "user": "https://github.com/jdemeyer"
}
```
NOTE: This ticket is about changing the internal configure/install logic, not about changing behaviour.

"gcc" is a special Sage package because it's currently the only package which is either installed in Sage or used from the system if it's available.

In the future, we probably want more packages like this. It makes sense to mark all these packages as "standard" with some logic in `configure.ac` to skip the installation of certain standard packages.

I propose to define a *standard package* as a package which will always be available in Sage, either installed by Sage or taken from the system. The logic which is introduced in this ticket for gcc could be used for all those packages.

**Tarball for buildbot**: http://sage.ugent.be/www/jdemeyer/sage/configure-149.tar.gz

CC:  @etn40ff

Reviewer: Volker Braun

Author: Jeroen Demeyer

Branch: 12034a216056eb0abfccd9d97b362acdf040c6b0

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20137





---

archive/issue_comments_291253.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2016-02-29T16:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291253",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_291254.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-02-29T16:22:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291254",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_291255.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-03-02T09:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291255",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_291256.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n-This ticket is about changing the internal configure/install logic, not about changing behaviour.\n+NOTE: This ticket is about changing the internal configure/install logic, not about changing behaviour.\n \n \"gcc\" is a special Sage package because it's currently the only package which is either installed in Sage or used from the system if it's available.\n \n In the future, we probably want more packages like this. It makes sense to mark all these packages as \"standard\" with some logic in \\`configure.ac\\` to skip the installation of certain standard packages.\n \n-I propose to define a *standard package* as a package which will always be available in Sage, either installed by Sage or taken from the system.\n+I propose to define a *standard package* as a package which will always be available in Sage, either installed by Sage or taken from the system. The logic which is introduced in this ticket for gcc could be used for all those packages.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2016-03-04T08:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291256",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,10 +1,10 @@
-This ticket is about changing the internal configure/install logic, not about changing behaviour.
+NOTE: This ticket is about changing the internal configure/install logic, not about changing behaviour.
 
 "gcc" is a special Sage package because it's currently the only package which is either installed in Sage or used from the system if it's available.
 
 In the future, we probably want more packages like this. It makes sense to mark all these packages as "standard" with some logic in \`configure.ac\` to skip the installation of certain standard packages.
 
-I propose to define a *standard package* as a package which will always be available in Sage, either installed by Sage or taken from the system.
+I propose to define a *standard package* as a package which will always be available in Sage, either installed by Sage or taken from the system. The logic which is introduced in this ticket for gcc could be used for all those packages.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_291257.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-03-04T09:13:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291257",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_291258.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-03-04T10:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291258",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_291259.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-03-04T10:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291259",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_291260.json:
```json
{
    "body": "<a id='comment:11'></a>Regarding your `configure.ac` note, if I understand your point correctly, the DebianScience folks have added a set of autoconf rules for detecting many of Sage's packages:\n\nhttp://anonscm.debian.org/cgit/debian-science/packages/sagemath.git/tree/debian/pruner/configure.ac\n\nIt's not exhaustive or fully up to date, and may not be well-enough specified in many cases (i.e. version checks).  But it may provide a nice starting point.  I think though that if more autoconf rules are added for Sage packages they should live in the per-package directories in `build/pkgs` in order to keep things more organized.",
    "created_at": "2016-03-04T11:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291260",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>Regarding your `configure.ac` note, if I understand your point correctly, the DebianScience folks have added a set of autoconf rules for detecting many of Sage's packages:

http://anonscm.debian.org/cgit/debian-science/packages/sagemath.git/tree/debian/pruner/configure.ac

It's not exhaustive or fully up to date, and may not be well-enough specified in many cases (i.e. version checks).  But it may provide a nice starting point.  I think though that if more autoconf rules are added for Sage packages they should live in the per-package directories in `build/pkgs` in order to keep things more organized.



---

archive/issue_comments_291261.json:
```json
{
    "body": "<a id='comment:12'></a>As for the actual patch, it looks good to me.\n\nOne thing that might be worth considering is rather than setting `$PKG_VAR = \\$(INST)/.dummy` for skipped packages, still keep an explicit record of skipped packages in some `$(SKIPPED)/$PKG_VERSION`.  Or maybe better yet determine the version of the package that is being used from the system and write that to a file too.\n\nBut I'm not sure--for now it might be YAGNI. But one might also be able to imagine cases where it would be nice to have a record of what Sage *is* using for that package if not the one that was built as part of Sage.",
    "created_at": "2016-03-04T11:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291261",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'></a>As for the actual patch, it looks good to me.

One thing that might be worth considering is rather than setting `$PKG_VAR = \$(INST)/.dummy` for skipped packages, still keep an explicit record of skipped packages in some `$(SKIPPED)/$PKG_VERSION`.  Or maybe better yet determine the version of the package that is being used from the system and write that to a file too.

But I'm not sure--for now it might be YAGNI. But one might also be able to imagine cases where it would be nice to have a record of what Sage *is* using for that package if not the one that was built as part of Sage.



---

archive/issue_comments_291262.json:
```json
{
    "body": "<a id='comment:13'></a>The following sentence in the developer guide is not understood (by me) conforming to the definition of the standard package:\n\n**standard** packages are built by default unless ``configure`` determines that they are not needed.\n\nShouldn't this be like this:\n\n**standard** packages are built by default unless ``configure`` determines that they are available from the system.\n\nor something close?",
    "created_at": "2016-03-04T14:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291262",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:13'></a>The following sentence in the developer guide is not understood (by me) conforming to the definition of the standard package:

**standard** packages are built by default unless ``configure`` determines that they are not needed.

Shouldn't this be like this:

**standard** packages are built by default unless ``configure`` determines that they are available from the system.

or something close?



---

archive/issue_comments_291263.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-04T20:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291263",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_291264.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:12 embray]:\n> As for the actual patch, it looks good to me.\n\nGood enough for positive_review?\n\n> One thing that might be worth considering is rather than setting `$PKG_VAR = \\$(INST)/.dummy` for skipped packages, still keep an explicit record of skipped packages in some `$(SKIPPED)/$PKG_VERSION`.  Or maybe better yet determine the version of the package that is being used from the system and write that to a file too.\n> \n> But I'm not sure--for now it might be YAGNI.\n\nExactly, I don't really see the point. Moreover, I don't want to assume that this information is constant: it could very well be that Sage is installed and then the system is updated.",
    "created_at": "2016-03-04T20:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291264",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>Replying to [comment:12 embray]:
> As for the actual patch, it looks good to me.

Good enough for positive_review?

> One thing that might be worth considering is rather than setting `$PKG_VAR = \$(INST)/.dummy` for skipped packages, still keep an explicit record of skipped packages in some `$(SKIPPED)/$PKG_VERSION`.  Or maybe better yet determine the version of the package that is being used from the system and write that to a file too.
> 
> But I'm not sure--for now it might be YAGNI.

Exactly, I don't really see the point. Moreover, I don't want to assume that this information is constant: it could very well be that Sage is installed and then the system is updated.



---

archive/issue_comments_291265.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-05T09:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291265",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_291266.json:
```json
{
    "body": "<a id='comment:16'></a>LGTM\n\nIt would be nice to use that mechanism for python and mpir as well and then get rid of the SAGE_INSTALL_FETCH_ONLY hack... The source tarball should contain exactly the standard packages.",
    "created_at": "2016-03-05T09:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291266",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>LGTM

It would be nice to use that mechanism for python and mpir as well and then get rid of the SAGE_INSTALL_FETCH_ONLY hack... The source tarball should contain exactly the standard packages.



---

archive/issue_comments_291267.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 vbraun]:\n> It would be nice to use that mechanism for python and mpir as well and then get rid of the SAGE_INSTALL_FETCH_ONLY hack... The source tarball should contain exactly the standard packages.\n\n\nOf course...",
    "created_at": "2016-03-05T09:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291267",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>Replying to [comment:16 vbraun]:
> It would be nice to use that mechanism for python and mpir as well and then get rid of the SAGE_INSTALL_FETCH_ONLY hack... The source tarball should contain exactly the standard packages.


Of course...



---

archive/issue_comments_291268.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-03-05T12:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291268",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_291269.json:
```json
{
    "body": "<a id='comment:18'></a>There is a doctest for all standard packages:\n\n```\nsage -t --long src/sage/misc/package.py\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 300, in sage.misc.package._package_lists_from_sage_output\nFailed example:\n    bool(not_installed)\nExpected:\n    False\nGot:\n    True\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.misc.package._package_lists_from_sage_output\n    [25 tests, 1 failure, 0.19 s]\n```",
    "created_at": "2016-03-05T12:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291269",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>There is a doctest for all standard packages:

```
sage -t --long src/sage/misc/package.py
**********************************************************************
File "src/sage/misc/package.py", line 300, in sage.misc.package._package_lists_from_sage_output
Failed example:
    bool(not_installed)
Expected:
    False
Got:
    True
**********************************************************************
1 item had failures:
   1 of   6 in sage.misc.package._package_lists_from_sage_output
    [25 tests, 1 failure, 0.19 s]
```



---

archive/issue_comments_291270.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-05T13:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291270",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_291271.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-06T17:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_291272.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-06T17:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291272",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_291273.json:
```json
{
    "body": "<a id='comment:21'></a>I removed that doctest. I also added back `gcc` to the list of packages to download, since GCC may or not be part of `$(STANDARD_PACKAGES)`. The rule `download-for-sdist` should be improved, but not in this ticket.",
    "created_at": "2016-03-06T17:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291273",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>I removed that doctest. I also added back `gcc` to the list of packages to download, since GCC may or not be part of `$(STANDARD_PACKAGES)`. The rule `download-for-sdist` should be improved, but not in this ticket.



---

archive/issue_comments_291274.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-06T18:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291274",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_054767.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-06T23:16:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20137#event-54767"
}
```



---

archive/issue_comments_291275.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-06T23:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291275",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_291276.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:15 jdemeyer]:\n> Replying to [comment:12 embray]:\n> > One thing that might be worth considering is rather than setting `$PKG_VAR = \\$(INST)/.dummy` for skipped packages, still keep an explicit record of skipped packages in some `$(SKIPPED)/$PKG_VERSION`.  Or maybe better yet determine the version of the package that is being used from the system and write that to a file too.\n> > \n> > But I'm not sure--for now it might be YAGNI.\n\n> Exactly, I don't really see the point. Moreover, I don't want to assume that this information is constant: it could very well be that Sage is installed and then the system is updated.\n\nI could make an argument for it. In particular for build dependencies it would be helpful for recording what packages everything was built with--as you say it's not necessarily useful information about what is currently running on the system.\n\nBut it would be easy enough to add later if a specific need arises.",
    "created_at": "2016-03-07T09:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291276",
    "user": "https://github.com/embray"
}
```

<a id='comment:24'></a>Replying to [comment:15 jdemeyer]:
> Replying to [comment:12 embray]:
> > One thing that might be worth considering is rather than setting `$PKG_VAR = \$(INST)/.dummy` for skipped packages, still keep an explicit record of skipped packages in some `$(SKIPPED)/$PKG_VERSION`.  Or maybe better yet determine the version of the package that is being used from the system and write that to a file too.
> > 
> > But I'm not sure--for now it might be YAGNI.

> Exactly, I don't really see the point. Moreover, I don't want to assume that this information is constant: it could very well be that Sage is installed and then the system is updated.

I could make an argument for it. In particular for build dependencies it would be helpful for recording what packages everything was built with--as you say it's not necessarily useful information about what is currently running on the system.

But it would be easy enough to add later if a specific need arises.



---

archive/issue_comments_291277.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2016-03-07T20:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291277",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_054768.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-07T20:07:18Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20137#event-54768"
}
```



---

archive/issue_comments_291278.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2016-03-07T20:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291278",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_291279.json:
```json
{
    "body": "<a id='comment:25'></a>This now unconditionally builds GCC; probably because it is in `$(STANDARD_PACKAGES)`.\n\n---\nNew commits:",
    "created_at": "2016-03-07T20:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291279",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>This now unconditionally builds GCC; probably because it is in `$(STANDARD_PACKAGES)`.

---
New commits:



---

archive/issue_comments_291280.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 vbraun]:\n> This now unconditionally builds GCC\n\n\nIn \"reality\" or only on the buildbot? ;-)",
    "created_at": "2016-03-07T20:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291280",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>Replying to [comment:25 vbraun]:
> This now unconditionally builds GCC


In "reality" or only on the buildbot? ;-)



---

archive/issue_comments_291281.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-07T20:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_291282.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+NOTE: This ticket is about changing the internal configure/install logic, not about changing behaviour.\n \n+\"gcc\" is a special Sage package because it's currently the only package which is either installed in Sage or used from the system if it's available.\n+\n+In the future, we probably want more packages like this. It makes sense to mark all these packages as \"standard\" with some logic in \\`configure.ac\\` to skip the installation of certain standard packages.\n+\n+I propose to define a *standard package* as a package which will always be available in Sage, either installed by Sage or taken from the system. The logic which is introduced in this ticket for gcc could be used for all those packages.\n+\n+**Tarball for buildbot**: http://sage.ugent.be/www/jdemeyer/sage/configure-149.tar.gz\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2016-03-07T20:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291282",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,12 @@
+NOTE: This ticket is about changing the internal configure/install logic, not about changing behaviour.
 
+"gcc" is a special Sage package because it's currently the only package which is either installed in Sage or used from the system if it's available.
+
+In the future, we probably want more packages like this. It makes sense to mark all these packages as "standard" with some logic in \`configure.ac\` to skip the installation of certain standard packages.
+
+I propose to define a *standard package* as a package which will always be available in Sage, either installed by Sage or taken from the system. The logic which is introduced in this ticket for gcc could be used for all those packages.
+
+**Tarball for buildbot**: http://sage.ugent.be/www/jdemeyer/sage/configure-149.tar.gz
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_291283.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-03-07T20:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291283",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_291284.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-07T20:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291284",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_291285.json:
```json
{
    "body": "<a id='comment:30'></a>Still builds gcc.\n\nThe buildbot runs \"make start\" for the record.",
    "created_at": "2016-03-08T12:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291285",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>Still builds gcc.

The buildbot runs "make start" for the record.



---

archive/issue_comments_291286.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-03-08T12:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291286",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_291287.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:30 vbraun]:\n> Still builds gcc.\n\n\nI cannot reproduce it. Do you have a link to the full install log?",
    "created_at": "2016-03-08T13:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291287",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>Replying to [comment:30 vbraun]:
> Still builds gcc.


I cannot reproduce it. Do you have a link to the full install log?



---

archive/issue_comments_291288.json:
```json
{
    "body": "<a id='comment:33'></a>* with this ticket: http://build.sagedev.org/release/builders/%20%20slow%20AIMS%20bu1510_64s02%20%28Ubuntu%2015.10%2064%20bit%29%20full/builds/32\n* without this ticket: http://build.sagedev.org/release/builders/%20%20slow%20AIMS%20bu1510_64s02%20%28Ubuntu%2015.10%2064%20bit%29%20full/builds/33",
    "created_at": "2016-03-08T16:11:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291288",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>* with this ticket: http://build.sagedev.org/release/builders/%20%20slow%20AIMS%20bu1510_64s02%20%28Ubuntu%2015.10%2064%20bit%29%20full/builds/32
* without this ticket: http://build.sagedev.org/release/builders/%20%20slow%20AIMS%20bu1510_64s02%20%28Ubuntu%2015.10%2064%20bit%29%20full/builds/33



---

archive/issue_comments_291289.json:
```json
{
    "body": "<a id='comment:34'></a>I will have a look on that machine.",
    "created_at": "2016-03-08T16:20:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291289",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>I will have a look on that machine.



---

archive/issue_comments_291290.json:
```json
{
    "body": "<a id='comment:35'></a>When I'm trying on the same machine, it works as it should.\n\nCan you please keep the build directory (i.e. do not do a new build on that buildbot).",
    "created_at": "2016-03-08T16:25:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291290",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>When I'm trying on the same machine, it works as it should.

Can you please keep the build directory (i.e. do not do a new build on that buildbot).



---

archive/issue_comments_291291.json:
```json
{
    "body": "<a id='comment:37'></a>...or maybe you already did start a new build?",
    "created_at": "2016-03-08T16:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291291",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>...or maybe you already did start a new build?



---

archive/issue_comments_291292.json:
```json
{
    "body": "<a id='comment:38'></a>Can you double-check that you really tested the correct commit of this ticket?",
    "created_at": "2016-03-08T16:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291292",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'></a>Can you double-check that you really tested the correct commit of this ticket?



---

archive/issue_comments_291293.json:
```json
{
    "body": "<a id='comment:39'></a>Please re-test and keep the build directory on the buildbot. I have no idea why it fails on the buildbot...",
    "created_at": "2016-03-08T16:40:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291293",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>Please re-test and keep the build directory on the buildbot. I have no idea why it fails on the buildbot...



---

archive/issue_comments_291294.json:
```json
{
    "body": "<a id='comment:40'></a>If you look at the stdio of build step 2 \"git update\" it tells you\n\n```\nHEAD is now at b91dec3 Trac #20137: Define \"gcc\" as standard package\n```",
    "created_at": "2016-03-08T16:41:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291294",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:40'></a>If you look at the stdio of build step 2 "git update" it tells you

```
HEAD is now at b91dec3 Trac #20137: Define "gcc" as standard package
```



---

archive/issue_comments_291295.json:
```json
{
    "body": "<a id='comment:41'></a>And I already started a new build, too late...",
    "created_at": "2016-03-08T16:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291295",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:41'></a>And I already started a new build, too late...



---

archive/issue_comments_291296.json:
```json
{
    "body": "<a id='comment:42'></a>What is `b91dec3`? It's not a commit from my branch...",
    "created_at": "2016-03-08T16:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291296",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:42'></a>What is `b91dec3`? It's not a commit from my branch...



---

archive/issue_comments_291297.json:
```json
{
    "body": "<a id='comment:43'></a>Normally, this `make` rule should have caused `bootstrap` to run, but it didn't:\n\n```\nconfigure: configure.ac src/bin/sage-version.sh m4/*.m4\n    ./bootstrap -d\n```\nDoes the buildbot somehow mess with timestamps?",
    "created_at": "2016-03-08T16:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291297",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>Normally, this `make` rule should have caused `bootstrap` to run, but it didn't:

```
configure: configure.ac src/bin/sage-version.sh m4/*.m4
    ./bootstrap -d
```
Does the buildbot somehow mess with timestamps?



---

archive/issue_comments_291298.json:
```json
{
    "body": "<a id='comment:44'></a>b91dec3 is (was) the merge commit\n\n```\n$ git log --graph --oneline b91dec3\n*   b91dec3 Trac #20137: Define \"gcc\" as standard package\n* |   6ff2ede Trac #20106: Upgrade to MPFR 3.1.4\n* |   e3cdc3e Trac #20172: Matroid Basis Axiom Test has a bug\n```",
    "created_at": "2016-03-08T16:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291298",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:44'></a>b91dec3 is (was) the merge commit

```
$ git log --graph --oneline b91dec3
*   b91dec3 Trac #20137: Define "gcc" as standard package
* |   6ff2ede Trac #20106: Upgrade to MPFR 3.1.4
* |   e3cdc3e Trac #20172: Matroid Basis Axiom Test has a bug
```



---

archive/issue_comments_291299.json:
```json
{
    "body": "<a id='comment:45'></a>And the buildbot doesn't do anything special with timestamps...",
    "created_at": "2016-03-08T16:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291299",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:45'></a>And the buildbot doesn't do anything special with timestamps...



---

archive/issue_comments_291300.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-03-09T07:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291300",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_291301.json:
```json
{
    "body": "<a id='comment:46'></a>I'm setting this back to positive_review in order to test again on the buildbot. I need to see the build directory to understand what the problem is that I cannot reproduce myself.",
    "created_at": "2016-03-09T07:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291301",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'></a>I'm setting this back to positive_review in order to test again on the buildbot. I need to see the build directory to understand what the problem is that I cannot reproduce myself.



---

archive/issue_events_054769.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-09T17:31:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20137#event-54769"
}
```



---

archive/issue_comments_291302.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-09T17:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291302",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_291303.json:
```json
{
    "body": "<a id='comment:48'></a>???",
    "created_at": "2016-03-09T19:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291303",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:48'></a>???



---

archive/issue_comments_291304.json:
```json
{
    "body": "<a id='comment:49'></a>Worked this time...",
    "created_at": "2016-03-09T20:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20137#issuecomment-291304",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:49'></a>Worked this time...
