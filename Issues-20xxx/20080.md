# Issue 20080: Meta-ticket: Sage docbuild

archive/issues_019843.json:
```json
{
    "assignees": [],
    "body": "Docbuild tickets:\n\n- #30010 Split sage_setup.docbuild out to a separate distribution (distutils package)\n- #31353 `sage --docbuild`: Add options to list all documents\n- #31936 docbuild: Japanese characters creeping into other parts of Sage documentation\n- #31366 docbuild: switch from `optparse` to `argparse`\n- #31948 Reimplement parallel docbuild using `make`\n- #29868 pip-installable packages `sage-doc-html`, `sage-doc-pdf`\n- #30369 Parallel docbuild, cythonization: Use GNU make's POSIX jobserver protocol\n- #30475 `sage -docbuild`: error building docs of single file with relative imports\n- #6389 expose building documentation for user modules not in the Sage library\n- #30418 Missing PDF icons in the Sage documentation website\n- #28376 Shrink Documentation\n- #31415 GH Actions workflow that deploys built documentation\n- #29868 pip-installable packages sagemath-doc-src, sagemath-doc-inventory, sagemath-doc-html, sagemath-doc-pdf\n- https://github.com/sagemath/documentation/issues/24 (Versioned Sage documentation)\n\nSphinx tickets:\n\n- #31696 Sphinx/docutils update for Sage 9.4\n- #27578 Use `sphinx.util.inspect.Signature` not `sphinx.ext.autodoc.inspector.formatargspec`\n- #27164 link sphinx docs of Sage components in reference manual\n- #29231 add intersphinx mapping for SciPy\n- #27495 Use `sphinx.ext.extlinks` to add Sphinx roles for links to external package docs\n- #30893 Replace sage autodoc extension by built-in one\n- #30894 Add typing info to documentation using `sphinx_autodoc_typehints`\n\nSee also: \n\n- #20893 Meta-ticket: Improve live documentation in the Jupyter notebook\n\n---\n\n**Overview of Sphinx custom code in Sage's documentation build system**\n\nThe goal of this ticket is to write an overview of the various bits and pieces of custom Sphinx code in Sage, with the long term goal to see which pieces could be:\n- thrown away, using features that are now in Sphinx\n- generalized and submitted upstream\n- cleaned up\n\nHere is a list of files with their relative roles:\n\n**src/sage/docs**\n\n- `__init__.py`: empty file\n\n- `conf.py`: standard Sphinx configuration file.\n\n**src/sage_docbuild** (was `src/sage_setup/docbuild`)\n\n- `__init__.py`: top-level docbuilder, contains classes for the various documents (e.g. reference manual).\n\n- `__main__.py`: stub entry point for `sage --docbuild`, calls `main()` from `__init__.py`\n\n- `build_options.py`: Parse the option for building.\n\n- `sphinxbuild.py`: Sage's version of the sphinx-build script\n\n   mainly deals with logging and error reporting.\n\n**src/sage_docbuild/ext** (was `src/sage_setup/docbuild/ext`)\n\n\n- `inventory_builder.py`:\n\n    A customized HTML builder which only generates intersphinx \"object.inv\"\n    inventory files and pickle files. The documentation files are not written.\n    This is supposed to be used with multidocs below.\n\n- `multidocs.py`:\n\n    The goal of this extension is to manage a multi documentation in Sphinx.\n    To be able to compile Sage's huge documentation in parallel, the\n    documentation is cut into a bunch of independent documentations called\n    \"subdocs\", which are compiled separately. There is a master document which\n    points to all the subdocs. The intersphinx extension ensures that the\n    cross-link between the subdocs are correctly resolved. However some work\n    is needed to build a global index. This is the goal of multidocs.\n\n    More precisely this extension ensures the correct merging of\n\n        1. the todo list if this extension is activated;\n        2. the python indexes;\n        3. the list of python modules;\n        4. the javascript index;\n        5. the citations.\n\n- `sage_autodoc.py`\n\n    This is a patched version of sphinx.ext.autodoc, which started to diverge\n    before 2011. As far as I (Florent) understand, the role here is to\n\n        1. allows to correctly fetch the Cython doc and argspec\n        2. get correctly the argspec of callable (from the `_sage_argspec_`\n           attribute) #9976\n        3. deals correctly with LazyImport #17455\n        4. In particular document CachedFunction as a function and not a class\n           instance #9976.\n        5. correctly handles classe aliases and nested classed #7448 #5986\n\n    This file probably need to be completely reworked since Sphinx seems to\n    have now various plugin and Mixin.\n\n**src/sage/misc**\n\n- `sphinxify.py`\n\n    script which calls Sphinx to format a single docstring for help from the\n    command line or the notebook. Has its own configuration.\n\n\n**CC:**  @egourgoulhon @jhpalmieri @dimpase @kwankyu @haraldschilly\n\nIssue created by migration from https://trac.sagemath.org/ticket/20080\n\n",
    "created_at": "2016-02-18T14:52:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20documentation"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Meta-ticket: Sage docbuild",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/20080",
    "user": "https://github.com/nthiery"
}
```
Docbuild tickets:

- #30010 Split sage_setup.docbuild out to a separate distribution (distutils package)
- #31353 `sage --docbuild`: Add options to list all documents
- #31936 docbuild: Japanese characters creeping into other parts of Sage documentation
- #31366 docbuild: switch from `optparse` to `argparse`
- #31948 Reimplement parallel docbuild using `make`
- #29868 pip-installable packages `sage-doc-html`, `sage-doc-pdf`
- #30369 Parallel docbuild, cythonization: Use GNU make's POSIX jobserver protocol
- #30475 `sage -docbuild`: error building docs of single file with relative imports
- #6389 expose building documentation for user modules not in the Sage library
- #30418 Missing PDF icons in the Sage documentation website
- #28376 Shrink Documentation
- #31415 GH Actions workflow that deploys built documentation
- #29868 pip-installable packages sagemath-doc-src, sagemath-doc-inventory, sagemath-doc-html, sagemath-doc-pdf
- https://github.com/sagemath/documentation/issues/24 (Versioned Sage documentation)

Sphinx tickets:

- #31696 Sphinx/docutils update for Sage 9.4
- #27578 Use `sphinx.util.inspect.Signature` not `sphinx.ext.autodoc.inspector.formatargspec`
- #27164 link sphinx docs of Sage components in reference manual
- #29231 add intersphinx mapping for SciPy
- #27495 Use `sphinx.ext.extlinks` to add Sphinx roles for links to external package docs
- #30893 Replace sage autodoc extension by built-in one
- #30894 Add typing info to documentation using `sphinx_autodoc_typehints`

See also: 

- #20893 Meta-ticket: Improve live documentation in the Jupyter notebook

---

**Overview of Sphinx custom code in Sage's documentation build system**

The goal of this ticket is to write an overview of the various bits and pieces of custom Sphinx code in Sage, with the long term goal to see which pieces could be:
- thrown away, using features that are now in Sphinx
- generalized and submitted upstream
- cleaned up

Here is a list of files with their relative roles:

**src/sage/docs**

- `__init__.py`: empty file

- `conf.py`: standard Sphinx configuration file.

**src/sage_docbuild** (was `src/sage_setup/docbuild`)

- `__init__.py`: top-level docbuilder, contains classes for the various documents (e.g. reference manual).

- `__main__.py`: stub entry point for `sage --docbuild`, calls `main()` from `__init__.py`

- `build_options.py`: Parse the option for building.

- `sphinxbuild.py`: Sage's version of the sphinx-build script

   mainly deals with logging and error reporting.

**src/sage_docbuild/ext** (was `src/sage_setup/docbuild/ext`)


- `inventory_builder.py`:

    A customized HTML builder which only generates intersphinx "object.inv"
    inventory files and pickle files. The documentation files are not written.
    This is supposed to be used with multidocs below.

- `multidocs.py`:

    The goal of this extension is to manage a multi documentation in Sphinx.
    To be able to compile Sage's huge documentation in parallel, the
    documentation is cut into a bunch of independent documentations called
    "subdocs", which are compiled separately. There is a master document which
    points to all the subdocs. The intersphinx extension ensures that the
    cross-link between the subdocs are correctly resolved. However some work
    is needed to build a global index. This is the goal of multidocs.

    More precisely this extension ensures the correct merging of

        1. the todo list if this extension is activated;
        2. the python indexes;
        3. the list of python modules;
        4. the javascript index;
        5. the citations.

- `sage_autodoc.py`

    This is a patched version of sphinx.ext.autodoc, which started to diverge
    before 2011. As far as I (Florent) understand, the role here is to

        1. allows to correctly fetch the Cython doc and argspec
        2. get correctly the argspec of callable (from the `_sage_argspec_`
           attribute) #9976
        3. deals correctly with LazyImport #17455
        4. In particular document CachedFunction as a function and not a class
           instance #9976.
        5. correctly handles classe aliases and nested classed #7448 #5986

    This file probably need to be completely reworked since Sphinx seems to
    have now various plugin and Mixin.

**src/sage/misc**

- `sphinxify.py`

    script which calls Sphinx to format a single docstring for help from the
    command line or the notebook. Has its own configuration.


**CC:**  @egourgoulhon @jhpalmieri @dimpase @kwankyu @haraldschilly

Issue created by migration from https://trac.sagemath.org/ticket/20080





---

archive/issue_events_244864.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2016-02-18T14:52:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244864"
}
```



---

archive/issue_events_244865.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2016-02-18T14:52:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20documentation",
    "label_color": "08517b",
    "label_name": "component: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244865"
}
```



---

archive/issue_comments_290319.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,8 +5,3 @@\n - cleaned up\n \n }}}\n-\n-\n-\n-\n-}}}\n``````\n",
    "created_at": "2016-02-18T14:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290319",
    "user": "https://github.com/nthiery"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,8 +5,3 @@
 - cleaned up
 
 }}}
-
-
-
-
-}}}
``````




---

archive/issue_comments_290320.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,5 @@\n-{{{!rst\n The goal of this ticket is to write an overview of the various bits and pieces of custom Sphinx code in Sage, with the long term goal to see which pieces could be:\n - thrown away, using features that are now in Sphinx\n - generalized and submitted upstream\n - cleaned up\n \n-}}}\n``````\n",
    "created_at": "2016-02-18T14:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290320",
    "user": "https://github.com/nthiery"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,5 @@
-{{{!rst
 The goal of this ticket is to write an overview of the various bits and pieces of custom Sphinx code in Sage, with the long term goal to see which pieces could be:
 - thrown away, using features that are now in Sphinx
 - generalized and submitted upstream
 - cleaned up
 
-}}}
``````




---

archive/issue_comments_290321.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,40 @@\n - generalized and submitted upstream\n - cleaned up\n \n+Here is a lists of file in `src/doc/common` with their relative roles:\n+\n+- builder.py\n+- build_options.py\n+- conf.py\n+- custom-sphinx-build.py\n+- __init__.py :\n+\n+    empty file\n+\n+- inventory_builder.py:\n+\n+    A customized HTML builder which only generates intersphinx \"object.inv\"\n+    inventory files and pickle files. The documentation files are not written.\n+\n+\n+- multidocs.py:\n+\n+    This is a slightly hacked-up version of the Sphinx-multidoc plugin\n+\n+    The goal of this extension is to manage a multi documentation in Sphinx.\n+    To be able to compile Sage's huge documentation in parallel, the\n+    documentation is cut into a bunch of independent documentations called\n+    \"subdocs\", which are compiled separately. There is a master document which\n+    points to all the subdocs. The intersphinx extension ensures that the\n+    cross-link between the subdocs are correctly resolved. However some work\n+    is needed to build a global index. This is the goal of multidocs.\n+\n+    More precisely this extension ensures the correct merging of\n+    - the todo list if this extension is activated;\n+    - the python indexes;\n+    - the list of python modules;\n+    - the javascript index;\n+    - the citations.\n+\n+- sage_autodoc.py\n+\n``````\n",
    "created_at": "2016-02-18T15:06:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290321",
    "user": "https://github.com/hivert"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,40 @@
 - generalized and submitted upstream
 - cleaned up
 
+Here is a lists of file in `src/doc/common` with their relative roles:
+
+- builder.py
+- build_options.py
+- conf.py
+- custom-sphinx-build.py
+- __init__.py :
+
+    empty file
+
+- inventory_builder.py:
+
+    A customized HTML builder which only generates intersphinx "object.inv"
+    inventory files and pickle files. The documentation files are not written.
+
+
+- multidocs.py:
+
+    This is a slightly hacked-up version of the Sphinx-multidoc plugin
+
+    The goal of this extension is to manage a multi documentation in Sphinx.
+    To be able to compile Sage's huge documentation in parallel, the
+    documentation is cut into a bunch of independent documentations called
+    "subdocs", which are compiled separately. There is a master document which
+    points to all the subdocs. The intersphinx extension ensures that the
+    cross-link between the subdocs are correctly resolved. However some work
+    is needed to build a global index. This is the goal of multidocs.
+
+    More precisely this extension ensures the correct merging of
+    - the todo list if this extension is activated;
+    - the python indexes;
+    - the list of python modules;
+    - the javascript index;
+    - the citations.
+
+- sage_autodoc.py
+
``````




---

archive/issue_comments_290322.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,23 +3,28 @@\n - generalized and submitted upstream\n - cleaned up\n \n-Here is a lists of file in `src/doc/common` with their relative roles:\n+Here is a list of files in `src/doc/common` with their relative roles:\n \n-- builder.py\n-- build_options.py\n-- conf.py\n-- custom-sphinx-build.py\n-- __init__.py :\n+- `__init__.py`:\n \n     empty file\n \n-- inventory_builder.py:\n+- `conf.py`\n+\n+Here is a list of files in `srcsrc/sage_setup/docbuild` with their relative roles:\n+\n+- `builder.py`\n+\n+- `build_options.py`\n+\n+- `custom-sphinx-build.py`\n+\n+- `ext/inventory_builder.py`:\n \n     A customized HTML builder which only generates intersphinx \"object.inv\"\n     inventory files and pickle files. The documentation files are not written.\n \n-\n-- multidocs.py:\n+- `ext/multidocs.py`:\n \n     This is a slightly hacked-up version of the Sphinx-multidoc plugin\n \n@@ -38,5 +43,4 @@\n     - the javascript index;\n     - the citations.\n \n-- sage_autodoc.py\n-\n+- `ext/sage_autodoc.py`\n``````\n",
    "created_at": "2016-02-18T15:23:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290322",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,23 +3,28 @@
 - generalized and submitted upstream
 - cleaned up
 
-Here is a lists of file in `src/doc/common` with their relative roles:
+Here is a list of files in `src/doc/common` with their relative roles:
 
-- builder.py
-- build_options.py
-- conf.py
-- custom-sphinx-build.py
-- __init__.py :
+- `__init__.py`:
 
     empty file
 
-- inventory_builder.py:
+- `conf.py`
+
+Here is a list of files in `srcsrc/sage_setup/docbuild` with their relative roles:
+
+- `builder.py`
+
+- `build_options.py`
+
+- `custom-sphinx-build.py`
+
+- `ext/inventory_builder.py`:
 
     A customized HTML builder which only generates intersphinx "object.inv"
     inventory files and pickle files. The documentation files are not written.
 
-
-- multidocs.py:
+- `ext/multidocs.py`:
 
     This is a slightly hacked-up version of the Sphinx-multidoc plugin
 
@@ -38,5 +43,4 @@
     - the javascript index;
     - the citations.
 
-- sage_autodoc.py
-
+- `ext/sage_autodoc.py`
``````




---

archive/issue_comments_290323.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,19 +5,19 @@\n \n Here is a list of files in `src/doc/common` with their relative roles:\n \n-- `__init__.py`:\n-\n-    empty file\n+- `__init__.py`: empty file\n \n - `conf.py`\n \n Here is a list of files in `srcsrc/sage_setup/docbuild` with their relative roles:\n \n-- `builder.py`\n+- `__init__.py`: top-level docbuilder, contains classes \n+\n+- `__main__.py`: entry point for `sage --docbuild`, calls `main()` from `__init__.py`\n \n - `build_options.py`\n \n-- `custom-sphinx-build.py`\n+- `sphinxbuild.py`\n \n - `ext/inventory_builder.py`:\n \n``````\n",
    "created_at": "2016-02-18T16:01:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290323",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,19 +5,19 @@
 
 Here is a list of files in `src/doc/common` with their relative roles:
 
-- `__init__.py`:
-
-    empty file
+- `__init__.py`: empty file
 
 - `conf.py`
 
 Here is a list of files in `srcsrc/sage_setup/docbuild` with their relative roles:
 
-- `builder.py`
+- `__init__.py`: top-level docbuilder, contains classes 
+
+- `__main__.py`: entry point for `sage --docbuild`, calls `main()` from `__init__.py`
 
 - `build_options.py`
 
-- `custom-sphinx-build.py`
+- `sphinxbuild.py`
 
 - `ext/inventory_builder.py`:
 
``````




---

archive/issue_comments_290324.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nI would like to mention `sphinxify.py` which is currently part of `sagenb` but should be moved to inside `sage` proper ASAP. `sphinxify` is called from `sage/misc/sagedoc.py` both at doc building time and run time.",
    "created_at": "2016-02-18T20:09:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290324",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:6'>**Comment 6:**</a>
I would like to mention `sphinxify.py` which is currently part of `sagenb` but should be moved to inside `sage` proper ASAP. `sphinxify` is called from `sage/misc/sagedoc.py` both at doc building time and run time.



---

archive/issue_comments_290325.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,13 +3,15 @@\n - generalized and submitted upstream\n - cleaned up\n \n-Here is a list of files in `src/doc/common` with their relative roles:\n+Here is a list of files with their relative roles:\n+\n+**src/doc/common**\n \n - `__init__.py`: empty file\n \n - `conf.py`\n \n-Here is a list of files in `srcsrc/sage_setup/docbuild` with their relative roles:\n+**src/sage_setup/docbuild**\n \n - `__init__.py`: top-level docbuilder, contains classes \n \n@@ -19,12 +21,14 @@\n \n - `sphinxbuild.py`\n \n-- `ext/inventory_builder.py`:\n+**src/sage_setup/docbuild/ext**\n+\n+- `inventory_builder.py`:\n \n     A customized HTML builder which only generates intersphinx \"object.inv\"\n     inventory files and pickle files. The documentation files are not written.\n \n-- `ext/multidocs.py`:\n+- `multidocs.py`:\n \n     This is a slightly hacked-up version of the Sphinx-multidoc plugin\n \n@@ -43,4 +47,8 @@\n     - the javascript index;\n     - the citations.\n \n-- `ext/sage_autodoc.py`\n+- `sage_autodoc.py`\n+\n+**sagenb/sagenb/misc**\n+\n+- `sphinxify.py`\n``````\n",
    "created_at": "2016-02-18T20:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290325",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,13 +3,15 @@
 - generalized and submitted upstream
 - cleaned up
 
-Here is a list of files in `src/doc/common` with their relative roles:
+Here is a list of files with their relative roles:
+
+**src/doc/common**
 
 - `__init__.py`: empty file
 
 - `conf.py`
 
-Here is a list of files in `srcsrc/sage_setup/docbuild` with their relative roles:
+**src/sage_setup/docbuild**
 
 - `__init__.py`: top-level docbuilder, contains classes 
 
@@ -19,12 +21,14 @@
 
 - `sphinxbuild.py`
 
-- `ext/inventory_builder.py`:
+**src/sage_setup/docbuild/ext**
+
+- `inventory_builder.py`:
 
     A customized HTML builder which only generates intersphinx "object.inv"
     inventory files and pickle files. The documentation files are not written.
 
-- `ext/multidocs.py`:
+- `multidocs.py`:
 
     This is a slightly hacked-up version of the Sphinx-multidoc plugin
 
@@ -43,4 +47,8 @@
     - the javascript index;
     - the citations.
 
-- `ext/sage_autodoc.py`
+- `sage_autodoc.py`
+
+**sagenb/sagenb/misc**
+
+- `sphinxify.py`
``````




---

archive/issue_comments_290326.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,7 +13,7 @@\n \n **src/sage_setup/docbuild**\n \n-- `__init__.py`: top-level docbuilder, contains classes \n+- `__init__.py`: top-level docbuilder, contains classes for the various documents (e.g. reference manual).\n \n - `__main__.py`: entry point for `sage --docbuild`, calls `main()` from `__init__.py`\n \n``````\n",
    "created_at": "2016-02-18T20:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290326",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -13,7 +13,7 @@
 
 **src/sage_setup/docbuild**
 
-- `__init__.py`: top-level docbuilder, contains classes 
+- `__init__.py`: top-level docbuilder, contains classes for the various documents (e.g. reference manual).
 
 - `__main__.py`: entry point for `sage --docbuild`, calls `main()` from `__init__.py`
 
``````




---

archive/issue_comments_290327.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\n> I would like to mention `sphinxify.py` which is currently part of `sagenb` but should be moved to inside `sage` proper ASAP. `sphinxify` is called from `sage/misc/sagedoc.py` both at doc building time and run time. \n\nI'm open to PRs, as this seems pretty reasonable - docbuild shouldn't depend on sagenb, though we would still want the doc to work from within it.",
    "created_at": "2016-02-23T18:04:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290327",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'>**Comment 10:**</a>
> I would like to mention `sphinxify.py` which is currently part of `sagenb` but should be moved to inside `sage` proper ASAP. `sphinxify` is called from `sage/misc/sagedoc.py` both at doc building time and run time. 

I'm open to PRs, as this seems pretty reasonable - docbuild shouldn't depend on sagenb, though we would still want the doc to work from within it.



---

archive/issue_comments_290328.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,17 +9,19 @@\n \n - `__init__.py`: empty file\n \n-- `conf.py`\n+- `conf.py`: standard Sphinx configuration file.\n \n **src/sage_setup/docbuild**\n \n - `__init__.py`: top-level docbuilder, contains classes for the various documents (e.g. reference manual).\n \n-- `__main__.py`: entry point for `sage --docbuild`, calls `main()` from `__init__.py`\n+- `__main__.py`: stub entry point for `sage --docbuild`, calls `main()` from `__init__.py`\n \n-- `build_options.py`\n+- `build_options.py`: Parse the option for building.\n \n-- `sphinxbuild.py`\n+- `sphinxbuild.py`: Sage's version of the sphinx-build script\n+\n+   mainly deals with logging and error reporting.\n \n **src/sage_setup/docbuild/ext**\n \n@@ -27,6 +29,7 @@\n \n     A customized HTML builder which only generates intersphinx \"object.inv\"\n     inventory files and pickle files. The documentation files are not written.\n+    This is supposed to be used with multidocs below.\n \n - `multidocs.py`:\n \n@@ -41,14 +44,33 @@\n     is needed to build a global index. This is the goal of multidocs.\n \n     More precisely this extension ensures the correct merging of\n-    - the todo list if this extension is activated;\n-    - the python indexes;\n-    - the list of python modules;\n-    - the javascript index;\n-    - the citations.\n+\n+        1. the todo list if this extension is activated;\n+        2. the python indexes;\n+        3. the list of python modules;\n+        4. the javascript index;\n+        5. the citations.\n \n - `sage_autodoc.py`\n+\n+    This is a patched version of sphinx.ext.autodoc, which started to diverge\n+    before 2011. As far as I (Florent) understand, the role here is to\n+\n+        1. allows to correctly fetch the Cython doc and argspec\n+        2. get correctly the argspec of callable (from the `_sage_argspec_`\n+           attribute) #9976\n+        3. deals correctly with LazyImport #17455\n+        4. In particular document CachedFunction as a function and not a class\n+           instance #9976.\n+        5. correctly handles classe aliases and nested classed #7448 #5986\n+\n+    This file probably need to be completely reworked since Sphinx seems to\n+    have now various plugin and Mixin.\n \n **sagenb/sagenb/misc**\n \n - `sphinxify.py`\n+\n+    script which calls Sphinx to format a single docstring for help from the\n+    command line or the notebook. Has its own configuration.\n+\n``````\n",
    "created_at": "2016-04-01T10:42:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290328",
    "user": "https://github.com/hivert"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,17 +9,19 @@
 
 - `__init__.py`: empty file
 
-- `conf.py`
+- `conf.py`: standard Sphinx configuration file.
 
 **src/sage_setup/docbuild**
 
 - `__init__.py`: top-level docbuilder, contains classes for the various documents (e.g. reference manual).
 
-- `__main__.py`: entry point for `sage --docbuild`, calls `main()` from `__init__.py`
+- `__main__.py`: stub entry point for `sage --docbuild`, calls `main()` from `__init__.py`
 
-- `build_options.py`
+- `build_options.py`: Parse the option for building.
 
-- `sphinxbuild.py`
+- `sphinxbuild.py`: Sage's version of the sphinx-build script
+
+   mainly deals with logging and error reporting.
 
 **src/sage_setup/docbuild/ext**
 
@@ -27,6 +29,7 @@
 
     A customized HTML builder which only generates intersphinx "object.inv"
     inventory files and pickle files. The documentation files are not written.
+    This is supposed to be used with multidocs below.
 
 - `multidocs.py`:
 
@@ -41,14 +44,33 @@
     is needed to build a global index. This is the goal of multidocs.
 
     More precisely this extension ensures the correct merging of
-    - the todo list if this extension is activated;
-    - the python indexes;
-    - the list of python modules;
-    - the javascript index;
-    - the citations.
+
+        1. the todo list if this extension is activated;
+        2. the python indexes;
+        3. the list of python modules;
+        4. the javascript index;
+        5. the citations.
 
 - `sage_autodoc.py`
+
+    This is a patched version of sphinx.ext.autodoc, which started to diverge
+    before 2011. As far as I (Florent) understand, the role here is to
+
+        1. allows to correctly fetch the Cython doc and argspec
+        2. get correctly the argspec of callable (from the `_sage_argspec_`
+           attribute) #9976
+        3. deals correctly with LazyImport #17455
+        4. In particular document CachedFunction as a function and not a class
+           instance #9976.
+        5. correctly handles classe aliases and nested classed #7448 #5986
+
+    This file probably need to be completely reworked since Sphinx seems to
+    have now various plugin and Mixin.
 
 **sagenb/sagenb/misc**
 
 - `sphinxify.py`
+
+    script which calls Sphinx to format a single docstring for help from the
+    command line or the notebook. Has its own configuration.
+
``````




---

archive/issue_comments_290329.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nCould someone clarify what\n\n> This is a slightly hacked-up version of the Sphinx-multidoc plugin\n\nmeans?\n\nI can't find any reference to a Sphinx multidoc plugin outside of Sage.",
    "created_at": "2016-07-27T10:09:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290329",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'>**Comment 12:**</a>
Could someone clarify what

> This is a slightly hacked-up version of the Sphinx-multidoc plugin

means?

I can't find any reference to a Sphinx multidoc plugin outside of Sage.



---

archive/issue_comments_290330.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -32,8 +32,6 @@\n     This is supposed to be used with multidocs below.\n \n - `multidocs.py`:\n-\n-    This is a slightly hacked-up version of the Sphinx-multidoc plugin\n \n     The goal of this extension is to manage a multi documentation in Sphinx.\n     To be able to compile Sage's huge documentation in parallel, the\n``````\n",
    "created_at": "2016-07-27T10:13:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290330",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -32,8 +32,6 @@
     This is supposed to be used with multidocs below.
 
 - `multidocs.py`:
-
-    This is a slightly hacked-up version of the Sphinx-multidoc plugin
 
     The goal of this extension is to manage a multi documentation in Sphinx.
     To be able to compile Sage's huge documentation in parallel, the
``````




---

archive/issue_comments_290331.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nFixed :-)",
    "created_at": "2016-07-27T10:13:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290331",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'>**Comment 13:**</a>
Fixed :-)



---

archive/issue_comments_290332.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -65,7 +65,7 @@\n     This file probably need to be completely reworked since Sphinx seems to\n     have now various plugin and Mixin.\n \n-**sagenb/sagenb/misc**\n+**src/sage/misc**\n \n - `sphinxify.py`\n \n``````\n",
    "created_at": "2016-07-27T10:18:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290332",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -65,7 +65,7 @@
     This file probably need to be completely reworked since Sphinx seems to
     have now various plugin and Mixin.
 
-**sagenb/sagenb/misc**
+**src/sage/misc**
 
 - `sphinxify.py`
 
``````




---

archive/issue_comments_290333.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nI'm having \"fun\" finally taking the time to fully understand the doc builds system... :)",
    "created_at": "2016-07-27T10:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290333",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'>**Comment 15:**</a>
I'm having "fun" finally taking the time to fully understand the doc builds system... :)



---

archive/issue_comments_290334.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nit would be a good idea to revise this, or perhaps just start from scratch. It's not clear to me whether most/all of this can be achieved with vanilla Sphinx 3 or 4.",
    "created_at": "2020-06-29T09:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290334",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'>**Comment 16:**</a>
it would be a good idea to revise this, or perhaps just start from scratch. It's not clear to me whether most/all of this can be achieved with vanilla Sphinx 3 or 4.



---

archive/issue_comments_290335.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nRelated: #30010\t- Split sage_setup.docbuild out to a separate distribution (distutils package)",
    "created_at": "2020-07-16T19:39:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290335",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'>**Comment 17:**</a>
Related: #30010	- Split sage_setup.docbuild out to a separate distribution (distutils package)



---

archive/issue_comments_290336.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nOne of sphinx devs, \nTakeshi KOMIYA, is going to do a comparison with \"native\" sphinx for the reference manual - https://github.com/sphinx-doc/sphinx/issues/7891",
    "created_at": "2020-07-17T07:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290336",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'>**Comment 18:**</a>
One of sphinx devs, 
Takeshi KOMIYA, is going to do a comparison with "native" sphinx for the reference manual - https://github.com/sphinx-doc/sphinx/issues/7891



---

archive/issue_comments_290337.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nCool!",
    "created_at": "2020-07-21T07:28:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290337",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:19'>**Comment 19:**</a>
Cool!



---

archive/issue_events_244866.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-08T23:11:03Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "rename": {
        "from": "Overview of Sphinx custom code in Sage's documentation build system",
        "to": "Meta-ticket: Sage docbuild"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244866"
}
```



---

archive/issue_events_244867.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-08T23:11:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244867"
}
```



---

archive/issue_events_244868.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-08T23:11:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244868"
}
```



---

archive/issue_comments_290338.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,22 @@\n+- #30010 Split sage_setup.docbuild out to a separate distribution (distutils package)\n+\n+- #29868 pip-installable packages `sage-doc-html`, `sage-doc-pdf`\n+\n+- #30369 Parallel docbuild, cythonization: Use GNU make's POSIX jobserver protocol\n+\n+- #30475 `sage -docbuild`: error building docs of single file with relative imports\n+\n+- #6389 expose building documentation for user modules not in the Sage library\n+\n+\n+See also: \n+\n+- #20893 Meta-ticket: Improve live documentation in the Jupyter notebook\n+\n+---\n+\n+**Overview of Sphinx custom code in Sage's documentation build system**\n+\n The goal of this ticket is to write an overview of the various bits and pieces of custom Sphinx code in Sage, with the long term goal to see which pieces could be:\n - thrown away, using features that are now in Sphinx\n - generalized and submitted upstream\n``````\n",
    "created_at": "2020-09-08T23:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290338",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,22 @@
+- #30010 Split sage_setup.docbuild out to a separate distribution (distutils package)
+
+- #29868 pip-installable packages `sage-doc-html`, `sage-doc-pdf`
+
+- #30369 Parallel docbuild, cythonization: Use GNU make's POSIX jobserver protocol
+
+- #30475 `sage -docbuild`: error building docs of single file with relative imports
+
+- #6389 expose building documentation for user modules not in the Sage library
+
+
+See also: 
+
+- #20893 Meta-ticket: Improve live documentation in the Jupyter notebook
+
+---
+
+**Overview of Sphinx custom code in Sage's documentation build system**
+
 The goal of this ticket is to write an overview of the various bits and pieces of custom Sphinx code in Sage, with the long term goal to see which pieces could be:
 - thrown away, using features that are now in Sphinx
 - generalized and submitted upstream
``````




---

archive/issue_comments_290339.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,6 +7,8 @@\n - #30475 `sage -docbuild`: error building docs of single file with relative imports\n \n - #6389 expose building documentation for user modules not in the Sage library\n+\n+- #30418 Missing PDF icons in the Sage documentation website\n \n \n See also: \n``````\n",
    "created_at": "2020-09-09T02:36:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290339",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,6 +7,8 @@
 - #30475 `sage -docbuild`: error building docs of single file with relative imports
 
 - #6389 expose building documentation for user modules not in the Sage library
+
+- #30418 Missing PDF icons in the Sage documentation website
 
 
 See also: 
``````




---

archive/issue_comments_290340.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -26,7 +26,7 @@\n \n Here is a list of files with their relative roles:\n \n-**src/doc/common**\n+**src/sage/docs**\n \n - `__init__.py`: empty file\n \n``````\n",
    "created_at": "2020-09-09T07:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290340",
    "user": "https://github.com/egourgoulhon"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -26,7 +26,7 @@
 
 Here is a list of files with their relative roles:
 
-**src/doc/common**
+**src/sage/docs**
 
 - `__init__.py`: empty file
 
``````




---

archive/issue_comments_290341.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290341",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'>**Comment 23:**</a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_244869.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244869"
}
```



---

archive/issue_events_244870.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244870"
}
```



---

archive/issue_comments_290342.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,15 +1,14 @@\n+Tickets:\n+\n - #30010 Split sage_setup.docbuild out to a separate distribution (distutils package)\n-\n - #29868 pip-installable packages `sage-doc-html`, `sage-doc-pdf`\n-\n - #30369 Parallel docbuild, cythonization: Use GNU make's POSIX jobserver protocol\n-\n - #30475 `sage -docbuild`: error building docs of single file with relative imports\n-\n - #6389 expose building documentation for user modules not in the Sage library\n-\n - #30418 Missing PDF icons in the Sage documentation website\n-\n+- #28376 Shrink Documentation\n+- #31415 GH Actions workflow that deploys built documentation\n+- #29868 pip-installable packages sagemath-doc-src, sagemath-doc-inventory, sagemath-doc-html, sagemath-doc-pdf\n \n See also: \n \n``````\n",
    "created_at": "2021-03-08T07:07:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290342",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,15 +1,14 @@
+Tickets:
+
 - #30010 Split sage_setup.docbuild out to a separate distribution (distutils package)
-
 - #29868 pip-installable packages `sage-doc-html`, `sage-doc-pdf`
-
 - #30369 Parallel docbuild, cythonization: Use GNU make's POSIX jobserver protocol
-
 - #30475 `sage -docbuild`: error building docs of single file with relative imports
-
 - #6389 expose building documentation for user modules not in the Sage library
-
 - #30418 Missing PDF icons in the Sage documentation website
-
+- #28376 Shrink Documentation
+- #31415 GH Actions workflow that deploys built documentation
+- #29868 pip-installable packages sagemath-doc-src, sagemath-doc-inventory, sagemath-doc-html, sagemath-doc-pdf
 
 See also: 
 
``````




---

archive/issue_comments_290343.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,9 @@\n Tickets:\n \n - #30010 Split sage_setup.docbuild out to a separate distribution (distutils package)\n+- #31353 `sage --docbuild`: Add options to list all documents\n+- #31936 docbuild: Japanese characters creeping into other parts of Sage documentation\n+- #31948 Reimplement parallel docbuild using `make`\n - #29868 pip-installable packages `sage-doc-html`, `sage-doc-pdf`\n - #30369 Parallel docbuild, cythonization: Use GNU make's POSIX jobserver protocol\n - #30475 `sage -docbuild`: error building docs of single file with relative imports\n``````\n",
    "created_at": "2021-06-10T03:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290343",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,9 @@
 Tickets:
 
 - #30010 Split sage_setup.docbuild out to a separate distribution (distutils package)
+- #31353 `sage --docbuild`: Add options to list all documents
+- #31936 docbuild: Japanese characters creeping into other parts of Sage documentation
+- #31948 Reimplement parallel docbuild using `make`
 - #29868 pip-installable packages `sage-doc-html`, `sage-doc-pdf`
 - #30369 Parallel docbuild, cythonization: Use GNU make's POSIX jobserver protocol
 - #30475 `sage -docbuild`: error building docs of single file with relative imports
``````




---

archive/issue_comments_290344.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,6 +3,7 @@\n - #30010 Split sage_setup.docbuild out to a separate distribution (distutils package)\n - #31353 `sage --docbuild`: Add options to list all documents\n - #31936 docbuild: Japanese characters creeping into other parts of Sage documentation\n+- #31366 docbuild: switch from `optparse` to `argparse`\n - #31948 Reimplement parallel docbuild using `make`\n - #29868 pip-installable packages `sage-doc-html`, `sage-doc-pdf`\n - #30369 Parallel docbuild, cythonization: Use GNU make's POSIX jobserver protocol\n``````\n",
    "created_at": "2021-06-10T03:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290344",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,6 +3,7 @@
 - #30010 Split sage_setup.docbuild out to a separate distribution (distutils package)
 - #31353 `sage --docbuild`: Add options to list all documents
 - #31936 docbuild: Japanese characters creeping into other parts of Sage documentation
+- #31366 docbuild: switch from `optparse` to `argparse`
 - #31948 Reimplement parallel docbuild using `make`
 - #29868 pip-installable packages `sage-doc-html`, `sage-doc-pdf`
 - #30369 Parallel docbuild, cythonization: Use GNU make's POSIX jobserver protocol
``````




---

archive/issue_comments_290345.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -35,7 +35,7 @@\n \n - `conf.py`: standard Sphinx configuration file.\n \n-**src/sage_setup/docbuild**\n+**src/sage_docbuild** (was `src/sage_setup/docbuild`)\n \n - `__init__.py`: top-level docbuilder, contains classes for the various documents (e.g. reference manual).\n \n@@ -47,7 +47,8 @@\n \n    mainly deals with logging and error reporting.\n \n-**src/sage_setup/docbuild/ext**\n+**src/sage_docbuild/ext** (was `src/sage_setup/docbuild/ext`)\n+\n \n - `inventory_builder.py`:\n \n``````\n",
    "created_at": "2021-06-10T03:28:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290345",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -35,7 +35,7 @@
 
 - `conf.py`: standard Sphinx configuration file.
 
-**src/sage_setup/docbuild**
+**src/sage_docbuild** (was `src/sage_setup/docbuild`)
 
 - `__init__.py`: top-level docbuilder, contains classes for the various documents (e.g. reference manual).
 
@@ -47,7 +47,8 @@
 
    mainly deals with logging and error reporting.
 
-**src/sage_setup/docbuild/ext**
+**src/sage_docbuild/ext** (was `src/sage_setup/docbuild/ext`)
+
 
 - `inventory_builder.py`:
 
``````




---

archive/issue_comments_290346.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Tickets:\n+Docbuild tickets:\n \n - #30010 Split sage_setup.docbuild out to a separate distribution (distutils package)\n - #31353 `sage --docbuild`: Add options to list all documents\n@@ -13,6 +13,15 @@\n - #28376 Shrink Documentation\n - #31415 GH Actions workflow that deploys built documentation\n - #29868 pip-installable packages sagemath-doc-src, sagemath-doc-inventory, sagemath-doc-html, sagemath-doc-pdf\n+\n+Sphinx tickets:\n+\n+- #31696 Sphinx/docutils update for Sage 9.4\n+- #27578 Use `sphinx.util.inspect.Signature` not `sphinx.ext.autodoc.inspector.formatargspec`\n+- #27164 link sphinx docs of Sage components in reference manual\n+- #29231 add intersphinx mapping for SciPy\n+- #27495 Use `sphinx.ext.extlinks` to add Sphinx roles for links to external package docs\n+- #30894 Add typing info to documentation using `sphinx_autodoc_typehints`\n \n See also: \n \n``````\n",
    "created_at": "2021-06-10T03:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290346",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Tickets:
+Docbuild tickets:
 
 - #30010 Split sage_setup.docbuild out to a separate distribution (distutils package)
 - #31353 `sage --docbuild`: Add options to list all documents
@@ -13,6 +13,15 @@
 - #28376 Shrink Documentation
 - #31415 GH Actions workflow that deploys built documentation
 - #29868 pip-installable packages sagemath-doc-src, sagemath-doc-inventory, sagemath-doc-html, sagemath-doc-pdf
+
+Sphinx tickets:
+
+- #31696 Sphinx/docutils update for Sage 9.4
+- #27578 Use `sphinx.util.inspect.Signature` not `sphinx.ext.autodoc.inspector.formatargspec`
+- #27164 link sphinx docs of Sage components in reference manual
+- #29231 add intersphinx mapping for SciPy
+- #27495 Use `sphinx.ext.extlinks` to add Sphinx roles for links to external package docs
+- #30894 Add typing info to documentation using `sphinx_autodoc_typehints`
 
 See also: 
 
``````




---

archive/issue_comments_290347.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,6 +21,7 @@\n - #27164 link sphinx docs of Sage components in reference manual\n - #29231 add intersphinx mapping for SciPy\n - #27495 Use `sphinx.ext.extlinks` to add Sphinx roles for links to external package docs\n+- #30893 Replace sage autodoc extension by built-in one\n - #30894 Add typing info to documentation using `sphinx_autodoc_typehints`\n \n See also: \n``````\n",
    "created_at": "2021-06-12T02:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290347",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -21,6 +21,7 @@
 - #27164 link sphinx docs of Sage components in reference manual
 - #29231 add intersphinx mapping for SciPy
 - #27495 Use `sphinx.ext.extlinks` to add Sphinx roles for links to external package docs
+- #30893 Replace sage autodoc extension by built-in one
 - #30894 Add typing info to documentation using `sphinx_autodoc_typehints`
 
 See also: 
``````




---

archive/issue_events_244871.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244871"
}
```



---

archive/issue_events_244872.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244872"
}
```



---

archive/issue_events_244873.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244873"
}
```



---

archive/issue_events_244874.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244874"
}
```



---

archive/issue_comments_290348.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,6 +13,7 @@\n - #28376 Shrink Documentation\n - #31415 GH Actions workflow that deploys built documentation\n - #29868 pip-installable packages sagemath-doc-src, sagemath-doc-inventory, sagemath-doc-html, sagemath-doc-pdf\n+- https://github.com/sagemath/documentation/issues/24 (Versioned Sage documentation)\n \n Sphinx tickets:\n \n``````\n",
    "created_at": "2022-04-24T19:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20080#issuecomment-290348",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -13,6 +13,7 @@
 - #28376 Shrink Documentation
 - #31415 GH Actions workflow that deploys built documentation
 - #29868 pip-installable packages sagemath-doc-src, sagemath-doc-inventory, sagemath-doc-html, sagemath-doc-pdf
+- https://github.com/sagemath/documentation/issues/24 (Versioned Sage documentation)
 
 Sphinx tickets:
 
``````




---

archive/issue_events_244875.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244875"
}
```



---

archive/issue_events_244876.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244876"
}
```



---

archive/issue_events_244877.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244877"
}
```



---

archive/issue_events_244878.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20080",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20080#event-244878"
}
```
