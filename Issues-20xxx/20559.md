# Issue 20559: InteractiveLPProblem, dictionaries: add_constraint / add_row methods

archive/issues_020322.json:
```json
{
    "assignees": [],
    "body": "This ticket adds `add_constraint` and `add_row` methods. \nFollowing the suggestion at \n[#18805 comment:27](https://github.com/sagemath/sage/issues/18805#comment:27)\nthese methods create new problems / dictionaries, leaving the original ones unmodified.\n\n(Split out from the larger ticket #18805.)\n\n\nDepends on #20500\n\nCC:  @novoselt @pgxiao\n\nBranch/Commit: **[`c8559f3`](https://github.com/sagemath/sagetrac-mirror/commit/c8559f3cb19ded99c11ff5eda108be8ab211a3eb)**\n\nReviewer: **Andrey Novoseltsev**\n\nAuthor: **Peijun Xiao, Matthias Koeppe, Andrey Novoseltsev**\n\nComponent: **linear programming**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20559_\n\n",
    "closed_at": "2016-07-23T18:41:03Z",
    "created_at": "2016-05-04T22:20:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20programming",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "InteractiveLPProblem, dictionaries: add_constraint / add_row methods",
    "type": "issue",
    "updated_at": "2016-07-23T18:41:03Z",
    "url": "https://github.com/sagemath/sage/issues/20559",
    "user": "https://github.com/mkoeppe"
}
```
This ticket adds `add_constraint` and `add_row` methods. 
Following the suggestion at 
[#18805 comment:27](https://github.com/sagemath/sage/issues/18805#comment:27)
these methods create new problems / dictionaries, leaving the original ones unmodified.

(Split out from the larger ticket #18805.)


Depends on #20500

CC:  @novoselt @pgxiao

Branch/Commit: **[`c8559f3`](https://github.com/sagemath/sagetrac-mirror/commit/c8559f3cb19ded99c11ff5eda108be8ab211a3eb)**

Reviewer: **Andrey Novoseltsev**

Author: **Peijun Xiao, Matthias Koeppe, Andrey Novoseltsev**

Component: **linear programming**

_Issue created by migration from https://trac.sagemath.org/ticket/20559_





---

archive/issue_events_291042.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-05-04T22:20:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291042"
}
```



---

archive/issue_events_291043.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-05-04T22:20:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20programming",
    "label_color": "0000ff",
    "label_name": "c: linear programming",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291043"
}
```



---

archive/issue_events_291044.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-05-04T22:20:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291044"
}
```



---

archive/issue_events_291045.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-05-04T22:20:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291045"
}
```



---

archive/issue_comments_297049.json:
```json
{
    "body": "Branch: **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**",
    "created_at": "2016-05-05T00:07:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297049",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**



---

archive/issue_comments_297050.json:
```json
{
    "body": "Commit: **[`5849980`](https://github.com/sagemath/sagetrac-mirror/commit/58499805624d848b2c7852bb59931b82b35e9c8d)**",
    "created_at": "2016-05-05T00:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297050",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`5849980`](https://github.com/sagemath/sagetrac-mirror/commit/58499805624d848b2c7852bb59931b82b35e9c8d)**



---

archive/issue_comments_297051.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6ee048f324cc6aaaff2168c75ca9e3e6b7e337e\"><code>d6ee048</code></a></td><td><code>Refactor leaving_coefficients in terms of new method row_coefficients</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cbdeef954d18a45b33920911dffbc0f0e1442c9\"><code>3cbdeef</code></a></td><td><code>Fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db52d0eb5b345453270a1b50c90f24fada275f1f\"><code>db52d0e</code></a></td><td><code>Add @abstract_method methods to LPAbstractDictionary</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e9955ec46e63490c8c884b9ca74111b42282fdb\"><code>4e9955e</code></a></td><td><code>Refactor entering_coefficients in terms of new method column_coefficients</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a382ec183561102e10c979a0f47d90b3f7625d59\"><code>a382ec1</code></a></td><td><code>Fix documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b292e638ad9ca0466a0a3577e8949a0d289877a2\"><code>b292e63</code></a></td><td><code>Merge branch 't/20500/lpabstractdictionary__refactor_leaving_coefficients__entering_coefficients_using_new_methods_row_coefficients__column_coefficients' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58499805624d848b2c7852bb59931b82b35e9c8d\"><code>5849980</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr></table>\n",
    "created_at": "2016-05-05T00:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297051",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6ee048f324cc6aaaff2168c75ca9e3e6b7e337e"><code>d6ee048</code></a></td><td><code>Refactor leaving_coefficients in terms of new method row_coefficients</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cbdeef954d18a45b33920911dffbc0f0e1442c9"><code>3cbdeef</code></a></td><td><code>Fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db52d0eb5b345453270a1b50c90f24fada275f1f"><code>db52d0e</code></a></td><td><code>Add @abstract_method methods to LPAbstractDictionary</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e9955ec46e63490c8c884b9ca74111b42282fdb"><code>4e9955e</code></a></td><td><code>Refactor entering_coefficients in terms of new method column_coefficients</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a382ec183561102e10c979a0f47d90b3f7625d59"><code>a382ec1</code></a></td><td><code>Fix documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b292e638ad9ca0466a0a3577e8949a0d289877a2"><code>b292e63</code></a></td><td><code>Merge branch 't/20500/lpabstractdictionary__refactor_leaving_coefficients__entering_coefficients_using_new_methods_row_coefficients__column_coefficients' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58499805624d848b2c7852bb59931b82b35e9c8d"><code>5849980</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr></table>




---

archive/issue_events_291046.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-05-05T00:08:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291046"
}
```



---

archive/issue_comments_297052.json:
```json
{
    "body": "Dependencies: **#20500**",
    "created_at": "2016-05-05T00:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297052",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#20500**



---

archive/issue_comments_297053.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/639865c9245136e33d51c1175252525dc4d619ea\"><code>639865c</code></a></td><td><code>Merge tag '7.2.rc1' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5b39004786d11dc7ce772849ff5972e8ca4c9f2\"><code>f5b3900</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr></table>\n",
    "created_at": "2016-05-08T01:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297053",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/639865c9245136e33d51c1175252525dc4d619ea"><code>639865c</code></a></td><td><code>Merge tag '7.2.rc1' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5b39004786d11dc7ce772849ff5972e8ca4c9f2"><code>f5b3900</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr></table>




---

archive/issue_comments_297054.json:
```json
{
    "body": "Changed commit from **[`5849980`](https://github.com/sagemath/sagetrac-mirror/commit/58499805624d848b2c7852bb59931b82b35e9c8d)** to **[`f5b3900`](https://github.com/sagemath/sagetrac-mirror/commit/f5b39004786d11dc7ce772849ff5972e8ca4c9f2)**",
    "created_at": "2016-05-08T01:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297054",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5849980`](https://github.com/sagemath/sagetrac-mirror/commit/58499805624d848b2c7852bb59931b82b35e9c8d)** to **[`f5b3900`](https://github.com/sagemath/sagetrac-mirror/commit/f5b39004786d11dc7ce772849ff5972e8ca4c9f2)**



---

archive/issue_comments_297055.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9c54486e8351c71320d7a1df662090f05d2096c\"><code>f9c5448</code></a></td><td><code>fixup</code></td></tr></table>\n",
    "created_at": "2016-05-08T01:12:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297055",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9c54486e8351c71320d7a1df662090f05d2096c"><code>f9c5448</code></a></td><td><code>fixup</code></td></tr></table>




---

archive/issue_comments_297056.json:
```json
{
    "body": "Changed commit from **[`f5b3900`](https://github.com/sagemath/sagetrac-mirror/commit/f5b39004786d11dc7ce772849ff5972e8ca4c9f2)** to **[`f9c5448`](https://github.com/sagemath/sagetrac-mirror/commit/f9c54486e8351c71320d7a1df662090f05d2096c)**",
    "created_at": "2016-05-08T01:12:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297056",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f5b3900`](https://github.com/sagemath/sagetrac-mirror/commit/f5b39004786d11dc7ce772849ff5972e8ca4c9f2)** to **[`f9c5448`](https://github.com/sagemath/sagetrac-mirror/commit/f9c54486e8351c71320d7a1df662090f05d2096c)**



---

archive/issue_comments_297057.json:
```json
{
    "body": "Reviewer: **Andrey Novoseltsev**",
    "created_at": "2016-05-21T22:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297057",
    "user": "https://github.com/novoselt"
}
```

Reviewer: **Andrey Novoseltsev**



---

archive/issue_events_291047.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2016-05-21T22:16:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291047"
}
```



---

archive/issue_events_291048.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2016-05-21T22:16:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291048"
}
```



---

archive/issue_comments_297058.json:
```json
{
    "body": "Work Issues: **rebasing**",
    "created_at": "2016-05-21T22:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297058",
    "user": "https://github.com/novoselt"
}
```

Work Issues: **rebasing**



---

archive/issue_comments_297059.json:
```json
{
    "body": "Changed commit from **[`f9c5448`](https://github.com/sagemath/sagetrac-mirror/commit/f9c54486e8351c71320d7a1df662090f05d2096c)** to **[`2d444bc`](https://github.com/sagemath/sagetrac-mirror/commit/2d444bc2f4c5ebca4003ce6b0e20a762e41f49b2)**",
    "created_at": "2016-05-23T15:54:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297059",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f9c5448`](https://github.com/sagemath/sagetrac-mirror/commit/f9c54486e8351c71320d7a1df662090f05d2096c)** to **[`2d444bc`](https://github.com/sagemath/sagetrac-mirror/commit/2d444bc2f4c5ebca4003ce6b0e20a762e41f49b2)**



---

archive/issue_comments_297060.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9a6356fa6b537a08dbede354d7f417d41490589\"><code>d9a6356</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77e0a00afa6c23bfd9015755f09e40cacfa69875\"><code>77e0a00</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d444bc2f4c5ebca4003ce6b0e20a762e41f49b2\"><code>2d444bc</code></a></td><td><code>fixup</code></td></tr></table>\n",
    "created_at": "2016-05-23T15:54:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297060",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9a6356fa6b537a08dbede354d7f417d41490589"><code>d9a6356</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77e0a00afa6c23bfd9015755f09e40cacfa69875"><code>77e0a00</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d444bc2f4c5ebca4003ce6b0e20a762e41f49b2"><code>2d444bc</code></a></td><td><code>fixup</code></td></tr></table>




---

archive/issue_events_291049.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-05-23T15:56:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291049"
}
```



---

archive/issue_events_291050.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-05-23T15:56:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291050"
}
```



---

archive/issue_comments_297061.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nRebased on 7.3.beta0",
    "created_at": "2016-05-23T15:57:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297061",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Rebased on 7.3.beta0



---

archive/issue_comments_297062.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nping?",
    "created_at": "2016-06-02T13:29:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297062",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

ping?



---

archive/issue_comments_297063.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n1. \"a 1 by n matrix of the new constraint coefficients\" is a bit weird, especially since examples show using a list rather than a matrix. I'd write just \"coefficients of the new constraint\"\n2. `new_row` does not reflect very well the meaning, how about `coefficients`?..\n3. I think the method for adding constraints should not do input check that can be done by the problem constructor - it will reduce code duplication and lead to more uniform error messages.\n4. When constructing a new problem, as much of the old one as possible should be preserved. The current version does not keep even the type of the problem!!!\n5. It should not be necessary to explicitly name a new slack variable.\n6. It would be better not to construct polynomial rings where variables leave directly - leave it to the constructor of the problem in case we want to do something else later.\n7. I don't think that `add_row` should be supported by abstract dictionaries - for the current revised dictionaries I'd say it is confusing what does it even mean. And the convoluted code to achieve it agrees with me ;-) Rather I'd suggest having it for regular dictionaries (perhaps `add_relation` would be a better name). For the revised ones `add_constraint`, the same as for the problem with more or less the same parameters, would make more sense - since revised dictionaries are linked to the problem, they can construct the new one and then based on it construct a new suitable dictionary.",
    "created_at": "2016-06-10T04:23:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297063",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:10" align="right">comment:10</div>

1. "a 1 by n matrix of the new constraint coefficients" is a bit weird, especially since examples show using a list rather than a matrix. I'd write just "coefficients of the new constraint"
2. `new_row` does not reflect very well the meaning, how about `coefficients`?..
3. I think the method for adding constraints should not do input check that can be done by the problem constructor - it will reduce code duplication and lead to more uniform error messages.
4. When constructing a new problem, as much of the old one as possible should be preserved. The current version does not keep even the type of the problem!!!
5. It should not be necessary to explicitly name a new slack variable.
6. It would be better not to construct polynomial rings where variables leave directly - leave it to the constructor of the problem in case we want to do something else later.
7. I don't think that `add_row` should be supported by abstract dictionaries - for the current revised dictionaries I'd say it is confusing what does it even mean. And the convoluted code to achieve it agrees with me ;-) Rather I'd suggest having it for regular dictionaries (perhaps `add_relation` would be a better name). For the revised ones `add_constraint`, the same as for the problem with more or less the same parameters, would make more sense - since revised dictionaries are linked to the problem, they can construct the new one and then based on it construct a new suitable dictionary.



---

archive/issue_events_291051.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2016-06-10T04:23:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291051"
}
```



---

archive/issue_events_291052.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2016-06-10T04:23:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291052"
}
```



---

archive/issue_comments_297064.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nJust a quick reply to point 7:\n\nReplying to [@novoselt](#comment:10):\n> 7. I don't think that `add_row` should be supported by abstract dictionaries - for the current revised dictionaries I'd say it is confusing what does it even mean. And the convoluted code to achieve it agrees with me ;-) Rather I'd suggest having it for regular dictionaries (perhaps `add_relation` would be a better name). For the revised ones `add_constraint`, the same as for the problem with more or less the same parameters, would make more sense - since revised dictionaries are linked to the problem, they can construct the new one and then based on it construct a new suitable dictionary.\n\nNo, no, it's crucial that `add_row` is supported by abstract dictionaries. \nThe whole point is to have a method that adds a row to the dictionary, no matter how the dictionary is internally represented. This is the operation needed by tableau cutting plane procedures.\nIn the revised dictionary, one needs to do this kind of transformation to compute the new row of the problem, which gives the desired tableau row. (This is how tableau cutting planes are actually implemented in numerical solvers.)",
    "created_at": "2016-06-10T05:10:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297064",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Just a quick reply to point 7:

Replying to [@novoselt](#comment:10):
> 7. I don't think that `add_row` should be supported by abstract dictionaries - for the current revised dictionaries I'd say it is confusing what does it even mean. And the convoluted code to achieve it agrees with me ;-) Rather I'd suggest having it for regular dictionaries (perhaps `add_relation` would be a better name). For the revised ones `add_constraint`, the same as for the problem with more or less the same parameters, would make more sense - since revised dictionaries are linked to the problem, they can construct the new one and then based on it construct a new suitable dictionary.

No, no, it's crucial that `add_row` is supported by abstract dictionaries. 
The whole point is to have a method that adds a row to the dictionary, no matter how the dictionary is internally represented. This is the operation needed by tableau cutting plane procedures.
In the revised dictionary, one needs to do this kind of transformation to compute the new row of the problem, which gives the desired tableau row. (This is how tableau cutting planes are actually implemented in numerical solvers.)



---

archive/issue_comments_297065.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@novoselt](#comment:10):\n> 5. It should not be necessary to explicitly name a new slack variable.\n\nAgreed, this argument should be optional; and a name should be generated if it is not provided.",
    "created_at": "2016-06-10T16:18:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297065",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@novoselt](#comment:10):
> 5. It should not be necessary to explicitly name a new slack variable.

Agreed, this argument should be optional; and a name should be generated if it is not provided.



---

archive/issue_comments_297066.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@novoselt](#comment:10):\n> 6. It would be better not to construct polynomial rings where variables leave directly - leave it to the constructor of the problem in case we want to do something else later.\n\nWhat do you mean by \"where variables leave\"?",
    "created_at": "2016-06-10T16:25:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297066",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@novoselt](#comment:10):
> 6. It would be better not to construct polynomial rings where variables leave directly - leave it to the constructor of the problem in case we want to do something else later.

What do you mean by "where variables leave"?



---

archive/issue_comments_297067.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**",
    "created_at": "2016-06-12T00:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297067",
    "user": "https://github.com/pgxiao"
}
```

Changed branch from **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**



---

archive/issue_comments_297068.json:
```json
{
    "body": "Changed commit from **[`2d444bc`](https://github.com/sagemath/sagetrac-mirror/commit/2d444bc2f4c5ebca4003ce6b0e20a762e41f49b2)** to none",
    "created_at": "2016-06-12T00:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297068",
    "user": "https://github.com/pgxiao"
}
```

Changed commit from **[`2d444bc`](https://github.com/sagemath/sagetrac-mirror/commit/2d444bc2f4c5ebca4003ce6b0e20a762e41f49b2)** to none



---

archive/issue_comments_297069.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b292e638ad9ca0466a0a3577e8949a0d289877a2\"><code>b292e63</code></a></td><td><code>Merge branch 't/20500/lpabstractdictionary__refactor_leaving_coefficients__entering_coefficients_using_new_methods_row_coefficients__column_coefficients' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58499805624d848b2c7852bb59931b82b35e9c8d\"><code>5849980</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/639865c9245136e33d51c1175252525dc4d619ea\"><code>639865c</code></a></td><td><code>Merge tag '7.2.rc1' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5b39004786d11dc7ce772849ff5972e8ca4c9f2\"><code>f5b3900</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9c54486e8351c71320d7a1df662090f05d2096c\"><code>f9c5448</code></a></td><td><code>fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/119c8c61ea1dff7ca19d158525d617b2eb73ad11\"><code>119c8c6</code></a></td><td><code>Rewording</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7d809bbb27e5665b775ca28410fd7b301d3a94c\"><code>d7d809b</code></a></td><td><code>The argument for new slack variable is optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f73fc57d12596752224ad3b5ff456574efab178d\"><code>f73fc57</code></a></td><td><code>Preserve information when construct a new problem</code></td></tr></table>\n",
    "created_at": "2016-06-12T00:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297069",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b292e638ad9ca0466a0a3577e8949a0d289877a2"><code>b292e63</code></a></td><td><code>Merge branch 't/20500/lpabstractdictionary__refactor_leaving_coefficients__entering_coefficients_using_new_methods_row_coefficients__column_coefficients' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58499805624d848b2c7852bb59931b82b35e9c8d"><code>5849980</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/639865c9245136e33d51c1175252525dc4d619ea"><code>639865c</code></a></td><td><code>Merge tag '7.2.rc1' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5b39004786d11dc7ce772849ff5972e8ca4c9f2"><code>f5b3900</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9c54486e8351c71320d7a1df662090f05d2096c"><code>f9c5448</code></a></td><td><code>fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/119c8c61ea1dff7ca19d158525d617b2eb73ad11"><code>119c8c6</code></a></td><td><code>Rewording</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7d809bbb27e5665b775ca28410fd7b301d3a94c"><code>d7d809b</code></a></td><td><code>The argument for new slack variable is optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f73fc57d12596752224ad3b5ff456574efab178d"><code>f73fc57</code></a></td><td><code>Preserve information when construct a new problem</code></td></tr></table>




---

archive/issue_comments_297070.json:
```json
{
    "body": "Commit: **[`f73fc57`](https://github.com/sagemath/sagetrac-mirror/commit/f73fc57d12596752224ad3b5ff456574efab178d)**",
    "created_at": "2016-06-12T00:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297070",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`f73fc57`](https://github.com/sagemath/sagetrac-mirror/commit/f73fc57d12596752224ad3b5ff456574efab178d)**



---

archive/issue_comments_297071.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI fixed the problems your comments 1, 2, 4, and 5. \n\nReplying to [@novoselt](#comment:10):\n> 1. \"a 1 by n matrix of the new constraint coefficients\" is a bit weird, especially since examples show using a list rather than a matrix. I'd write just \"coefficients of the new constraint\"\n> 2. `new_row` does not reflect very well the meaning, how about `coefficients`?..\n> ...\n> 4. When constructing a new problem, as much of the old one as possible should be preserved. The current version does not keep even the type of the problem!!!\n> 5. It should not be necessary to explicitly name a new slack variable.\n\n\nPlease take a look at the last three commits listed in [comment:15](#comment:15).\n\nThanks!",
    "created_at": "2016-06-12T00:17:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297071",
    "user": "https://github.com/pgxiao"
}
```

<div id="comment:16" align="right">comment:16</div>

I fixed the problems your comments 1, 2, 4, and 5. 

Replying to [@novoselt](#comment:10):
> 1. "a 1 by n matrix of the new constraint coefficients" is a bit weird, especially since examples show using a list rather than a matrix. I'd write just "coefficients of the new constraint"
> 2. `new_row` does not reflect very well the meaning, how about `coefficients`?..
> ...
> 4. When constructing a new problem, as much of the old one as possible should be preserved. The current version does not keep even the type of the problem!!!
> 5. It should not be necessary to explicitly name a new slack variable.


Please take a look at the last three commits listed in [comment:15](#comment:15).

Thanks!



---

archive/issue_comments_297072.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@mkoeppe](#comment:11):\n> No, no, it's crucial that `add_row` is supported by abstract dictionaries. \n> The whole point is to have a method that adds a row to the dictionary, no matter how the dictionary is internally represented. This is the operation needed by tableau cutting plane procedures.\n> In the revised dictionary, one needs to do this kind of transformation to compute the new row of the problem, which gives the desired tableau row. (This is how tableau cutting planes are actually implemented in numerical solvers.)\n\nOK, let's have it, but I still find the name confusing - can it be `add_relation`? While for the revised dictionaries it will add a row to the only of the two tables that can get an extra row, data there will not be the provided coefficients. Hence I'd like something more conceptual than layout reference.",
    "created_at": "2016-06-12T05:07:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297072",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@mkoeppe](#comment:11):
> No, no, it's crucial that `add_row` is supported by abstract dictionaries. 
> The whole point is to have a method that adds a row to the dictionary, no matter how the dictionary is internally represented. This is the operation needed by tableau cutting plane procedures.
> In the revised dictionary, one needs to do this kind of transformation to compute the new row of the problem, which gives the desired tableau row. (This is how tableau cutting planes are actually implemented in numerical solvers.)

OK, let's have it, but I still find the name confusing - can it be `add_relation`? While for the revised dictionaries it will add a row to the only of the two tables that can get an extra row, data there will not be the provided coefficients. Hence I'd like something more conceptual than layout reference.



---

archive/issue_comments_297073.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@mkoeppe](#comment:13):\n> Replying to [@novoselt](#comment:10):\n> > 6. It would be better not to construct polynomial rings where variables leave directly - leave it to the constructor of the problem in case we want to do something else later.\n\n> What do you mean by \"where variables leave\"?\n\nSorry, I meant \"where variables live\" - I am not a native speaker ;-)",
    "created_at": "2016-06-12T05:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297073",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@mkoeppe](#comment:13):
> Replying to [@novoselt](#comment:10):
> > 6. It would be better not to construct polynomial rings where variables leave directly - leave it to the constructor of the problem in case we want to do something else later.

> What do you mean by "where variables leave"?

Sorry, I meant "where variables live" - I am not a native speaker ;-)



---

archive/issue_comments_297074.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI can no longer see cumulative changes, please rebase!",
    "created_at": "2016-06-12T05:14:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297074",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:19" align="right">comment:19</div>

I can no longer see cumulative changes, please rebase!



---

archive/issue_comments_297075.json:
```json
{
    "body": "Changed branch from **[u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**",
    "created_at": "2016-06-12T05:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297075",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**



---

archive/issue_comments_297076.json:
```json
{
    "body": "Changed commit from **[`f73fc57`](https://github.com/sagemath/sagetrac-mirror/commit/f73fc57d12596752224ad3b5ff456574efab178d)** to **[`206d5ca`](https://github.com/sagemath/sagetrac-mirror/commit/206d5ca51bb4a2cfe121caf21db7f1afb76e9037)**",
    "created_at": "2016-06-12T05:55:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297076",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`f73fc57`](https://github.com/sagemath/sagetrac-mirror/commit/f73fc57d12596752224ad3b5ff456574efab178d)** to **[`206d5ca`](https://github.com/sagemath/sagetrac-mirror/commit/206d5ca51bb4a2cfe121caf21db7f1afb76e9037)**



---

archive/issue_comments_297077.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nrebased on 7.2.beta3\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7d61fc57b9a5b60689c349a4634998e461a038e\"><code>b7d61fc</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34f22abba76f4c6c797f495e9dc386af5190cbda\"><code>34f22ab</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d739251dea5c4a6a2406155d3b46cccbf80f4a1\"><code>1d73925</code></a></td><td><code>fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56d4a14a6e5763b60248f7590eea76e5429464f8\"><code>56d4a14</code></a></td><td><code>Rewording</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/206d5ca51bb4a2cfe121caf21db7f1afb76e9037\"><code>206d5ca</code></a></td><td><code>Preserve information when construct a new problem</code></td></tr></table>\n",
    "created_at": "2016-06-12T05:55:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297077",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

rebased on 7.2.beta3

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7d61fc57b9a5b60689c349a4634998e461a038e"><code>b7d61fc</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34f22abba76f4c6c797f495e9dc386af5190cbda"><code>34f22ab</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d739251dea5c4a6a2406155d3b46cccbf80f4a1"><code>1d73925</code></a></td><td><code>fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56d4a14a6e5763b60248f7590eea76e5429464f8"><code>56d4a14</code></a></td><td><code>Rewording</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/206d5ca51bb4a2cfe121caf21db7f1afb76e9037"><code>206d5ca</code></a></td><td><code>Preserve information when construct a new problem</code></td></tr></table>




---

archive/issue_comments_297078.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@novoselt](#comment:17):\n> Replying to [@mkoeppe](#comment:11):\n> > No, no, it's crucial that `add_row` is supported by abstract dictionaries. \n> > The whole point is to have a method that adds a row to the dictionary, no matter how the dictionary is internally represented. This is the operation needed by tableau cutting plane procedures.\n> > In the revised dictionary, one needs to do this kind of transformation to compute the new row of the problem, which gives the desired tableau row. (This is how tableau cutting planes are actually implemented in numerical solvers.)\n\n> \n> OK, let's have it, but I still find the name confusing - can it be `add_relation`? While for the revised dictionaries it will add a row to the only of the two tables that can get an extra row, data there will not be the provided coefficients. Hence I'd like something more conceptual than layout reference.\n\n\"add_relation\" wouldn't express the operation well; because we're not just adding a relation but also a new basic variable. \nI've never heard anyone call this operation other than \"adding a row\" (whether it's a textbook dictionary or a revised dictionary). \nAlso note that \"row\" matches the method `row_coefficients`.",
    "created_at": "2016-06-12T06:10:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297078",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@novoselt](#comment:17):
> Replying to [@mkoeppe](#comment:11):
> > No, no, it's crucial that `add_row` is supported by abstract dictionaries. 
> > The whole point is to have a method that adds a row to the dictionary, no matter how the dictionary is internally represented. This is the operation needed by tableau cutting plane procedures.
> > In the revised dictionary, one needs to do this kind of transformation to compute the new row of the problem, which gives the desired tableau row. (This is how tableau cutting planes are actually implemented in numerical solvers.)

> 
> OK, let's have it, but I still find the name confusing - can it be `add_relation`? While for the revised dictionaries it will add a row to the only of the two tables that can get an extra row, data there will not be the provided coefficients. Hence I'd like something more conceptual than layout reference.

"add_relation" wouldn't express the operation well; because we're not just adding a relation but also a new basic variable. 
I've never heard anyone call this operation other than "adding a row" (whether it's a textbook dictionary or a revised dictionary). 
Also note that "row" matches the method `row_coefficients`.



---

archive/issue_comments_297079.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**",
    "created_at": "2016-06-13T17:01:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297079",
    "user": "https://github.com/pgxiao"
}
```

Changed branch from **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**



---

archive/issue_comments_297080.json:
```json
{
    "body": "Changed commit from **[`206d5ca`](https://github.com/sagemath/sagetrac-mirror/commit/206d5ca51bb4a2cfe121caf21db7f1afb76e9037)** to **[`f73fc57`](https://github.com/sagemath/sagetrac-mirror/commit/f73fc57d12596752224ad3b5ff456574efab178d)**",
    "created_at": "2016-06-13T17:01:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297080",
    "user": "https://github.com/pgxiao"
}
```

Changed commit from **[`206d5ca`](https://github.com/sagemath/sagetrac-mirror/commit/206d5ca51bb4a2cfe121caf21db7f1afb76e9037)** to **[`f73fc57`](https://github.com/sagemath/sagetrac-mirror/commit/f73fc57d12596752224ad3b5ff456574efab178d)**



---

archive/issue_comments_297081.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b292e638ad9ca0466a0a3577e8949a0d289877a2\"><code>b292e63</code></a></td><td><code>Merge branch 't/20500/lpabstractdictionary__refactor_leaving_coefficients__entering_coefficients_using_new_methods_row_coefficients__column_coefficients' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58499805624d848b2c7852bb59931b82b35e9c8d\"><code>5849980</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/639865c9245136e33d51c1175252525dc4d619ea\"><code>639865c</code></a></td><td><code>Merge tag '7.2.rc1' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5b39004786d11dc7ce772849ff5972e8ca4c9f2\"><code>f5b3900</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9c54486e8351c71320d7a1df662090f05d2096c\"><code>f9c5448</code></a></td><td><code>fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/119c8c61ea1dff7ca19d158525d617b2eb73ad11\"><code>119c8c6</code></a></td><td><code>Rewording</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7d809bbb27e5665b775ca28410fd7b301d3a94c\"><code>d7d809b</code></a></td><td><code>The argument for new slack variable is optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f73fc57d12596752224ad3b5ff456574efab178d\"><code>f73fc57</code></a></td><td><code>Preserve information when construct a new problem</code></td></tr></table>\n",
    "created_at": "2016-06-13T17:01:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297081",
    "user": "https://github.com/pgxiao"
}
```

<div id="comment:23"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b292e638ad9ca0466a0a3577e8949a0d289877a2"><code>b292e63</code></a></td><td><code>Merge branch 't/20500/lpabstractdictionary__refactor_leaving_coefficients__entering_coefficients_using_new_methods_row_coefficients__column_coefficients' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58499805624d848b2c7852bb59931b82b35e9c8d"><code>5849980</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/639865c9245136e33d51c1175252525dc4d619ea"><code>639865c</code></a></td><td><code>Merge tag '7.2.rc1' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5b39004786d11dc7ce772849ff5972e8ca4c9f2"><code>f5b3900</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9c54486e8351c71320d7a1df662090f05d2096c"><code>f9c5448</code></a></td><td><code>fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/119c8c61ea1dff7ca19d158525d617b2eb73ad11"><code>119c8c6</code></a></td><td><code>Rewording</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7d809bbb27e5665b775ca28410fd7b301d3a94c"><code>d7d809b</code></a></td><td><code>The argument for new slack variable is optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f73fc57d12596752224ad3b5ff456574efab178d"><code>f73fc57</code></a></td><td><code>Preserve information when construct a new problem</code></td></tr></table>




---

archive/issue_comments_297082.json:
```json
{
    "body": "Changed branch from **[u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**",
    "created_at": "2016-06-13T17:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297082",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**



---

archive/issue_comments_297083.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**",
    "created_at": "2016-06-13T18:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297083",
    "user": "https://github.com/pgxiao"
}
```

Changed branch from **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**



---

archive/issue_comments_297084.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7d61fc57b9a5b60689c349a4634998e461a038e\"><code>b7d61fc</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34f22abba76f4c6c797f495e9dc386af5190cbda\"><code>34f22ab</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d739251dea5c4a6a2406155d3b46cccbf80f4a1\"><code>1d73925</code></a></td><td><code>fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56d4a14a6e5763b60248f7590eea76e5429464f8\"><code>56d4a14</code></a></td><td><code>Rewording</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/206d5ca51bb4a2cfe121caf21db7f1afb76e9037\"><code>206d5ca</code></a></td><td><code>Preserve information when construct a new problem</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3d934bde9cb612c76afacddd2d44611d24f175f\"><code>e3d934b</code></a></td><td><code>The argument for new slack variable is optional</code></td></tr></table>\n",
    "created_at": "2016-06-18T17:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297084",
    "user": "https://github.com/pgxiao"
}
```

<div id="comment:26"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7d61fc57b9a5b60689c349a4634998e461a038e"><code>b7d61fc</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34f22abba76f4c6c797f495e9dc386af5190cbda"><code>34f22ab</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d739251dea5c4a6a2406155d3b46cccbf80f4a1"><code>1d73925</code></a></td><td><code>fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56d4a14a6e5763b60248f7590eea76e5429464f8"><code>56d4a14</code></a></td><td><code>Rewording</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/206d5ca51bb4a2cfe121caf21db7f1afb76e9037"><code>206d5ca</code></a></td><td><code>Preserve information when construct a new problem</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3d934bde9cb612c76afacddd2d44611d24f175f"><code>e3d934b</code></a></td><td><code>The argument for new slack variable is optional</code></td></tr></table>




---

archive/issue_comments_297085.json:
```json
{
    "body": "Changed commit from **[`f73fc57`](https://github.com/sagemath/sagetrac-mirror/commit/f73fc57d12596752224ad3b5ff456574efab178d)** to **[`e3d934b`](https://github.com/sagemath/sagetrac-mirror/commit/e3d934bde9cb612c76afacddd2d44611d24f175f)**",
    "created_at": "2016-06-18T17:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297085",
    "user": "https://github.com/pgxiao"
}
```

Changed commit from **[`f73fc57`](https://github.com/sagemath/sagetrac-mirror/commit/f73fc57d12596752224ad3b5ff456574efab178d)** to **[`e3d934b`](https://github.com/sagemath/sagetrac-mirror/commit/e3d934bde9cb612c76afacddd2d44611d24f175f)**



---

archive/issue_events_291053.json:
```json
{
    "actor": "https://github.com/pgxiao",
    "created_at": "2016-06-18T17:13:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291053"
}
```



---

archive/issue_events_291054.json:
```json
{
    "actor": "https://github.com/pgxiao",
    "created_at": "2016-06-18T17:13:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291054"
}
```



---

archive/issue_comments_297086.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\n7 is retracted, 3 and 6 still stand. And I wanted to look closer and do some changes but was not able to checkout due to trac problems...",
    "created_at": "2016-06-20T02:40:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297086",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:27" align="right">comment:27</div>

7 is retracted, 3 and 6 still stand. And I wanted to look closer and do some changes but was not able to checkout due to trac problems...



---

archive/issue_comments_297087.json:
```json
{
    "body": "Changed branch from **[u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**",
    "created_at": "2016-06-24T21:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297087",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/pjxiao/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**



---

archive/issue_comments_297088.json:
```json
{
    "body": "Changed author from **Peijun Xiao** to **Peijun Xiao, Matthias Koeppe**",
    "created_at": "2016-06-24T21:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297088",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Peijun Xiao** to **Peijun Xiao, Matthias Koeppe**



---

archive/issue_comments_297089.json:
```json
{
    "body": "Changed work issues from **rebasing** to none",
    "created_at": "2016-06-24T21:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297089",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **rebasing** to none



---

archive/issue_comments_297090.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI've made some changes that address points 3 and 6.\nAlso rebased on latest beta.\nReady for review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a931dd80072197691a9d75f60fb06be21b06bbc\"><code>1a931dd</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f52596002f1c6160ab9d06d3c6ff1847e039bbe6\"><code>f525960</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5925a79c9f44ada3a4bfdcf0b6a602217549555\"><code>e5925a7</code></a></td><td><code>fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f41037165b476feebb077ca0a70e78e32d830c2\"><code>6f41037</code></a></td><td><code>Rewording</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6404ab6e00c47c7a0c8fb913fa6ecc19391b6f8\"><code>e6404ab</code></a></td><td><code>Preserve information when construct a new problem</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cb5622f81bd4af8e44d9d386e59312508e40f41\"><code>6cb5622</code></a></td><td><code>The argument for new slack variable is optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8af9686b1136c2a9ce8b2143551665059e89416\"><code>a8af968</code></a></td><td><code>Simplify code, don't create unnecessary rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d5f8615332af65715f5c6e19a7e5742df3ce7d1\"><code>6d5f861</code></a></td><td><code>add_row methods: Rename slack_variable to basic_variable, new_b to constant</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c93d94e81987b9eed1432cbbe04064444c86048\"><code>7c93d94</code></a></td><td><code>add_constraint: Delegate error checking to constructor</code></td></tr></table>\n",
    "created_at": "2016-06-24T21:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297090",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

I've made some changes that address points 3 and 6.
Also rebased on latest beta.
Ready for review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a931dd80072197691a9d75f60fb06be21b06bbc"><code>1a931dd</code></a></td><td><code>InteractiveLPProblem, dictionaries: add_constraint / add_row methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f52596002f1c6160ab9d06d3c6ff1847e039bbe6"><code>f525960</code></a></td><td><code>add_row: Use @abstract_method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5925a79c9f44ada3a4bfdcf0b6a602217549555"><code>e5925a7</code></a></td><td><code>fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f41037165b476feebb077ca0a70e78e32d830c2"><code>6f41037</code></a></td><td><code>Rewording</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6404ab6e00c47c7a0c8fb913fa6ecc19391b6f8"><code>e6404ab</code></a></td><td><code>Preserve information when construct a new problem</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cb5622f81bd4af8e44d9d386e59312508e40f41"><code>6cb5622</code></a></td><td><code>The argument for new slack variable is optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8af9686b1136c2a9ce8b2143551665059e89416"><code>a8af968</code></a></td><td><code>Simplify code, don't create unnecessary rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d5f8615332af65715f5c6e19a7e5742df3ce7d1"><code>6d5f861</code></a></td><td><code>add_row methods: Rename slack_variable to basic_variable, new_b to constant</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c93d94e81987b9eed1432cbbe04064444c86048"><code>7c93d94</code></a></td><td><code>add_constraint: Delegate error checking to constructor</code></td></tr></table>




---

archive/issue_comments_297091.json:
```json
{
    "body": "Changed commit from **[`e3d934b`](https://github.com/sagemath/sagetrac-mirror/commit/e3d934bde9cb612c76afacddd2d44611d24f175f)** to **[`7c93d94`](https://github.com/sagemath/sagetrac-mirror/commit/7c93d94e81987b9eed1432cbbe04064444c86048)**",
    "created_at": "2016-06-24T21:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297091",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`e3d934b`](https://github.com/sagemath/sagetrac-mirror/commit/e3d934bde9cb612c76afacddd2d44611d24f175f)** to **[`7c93d94`](https://github.com/sagemath/sagetrac-mirror/commit/7c93d94e81987b9eed1432cbbe04064444c86048)**



---

archive/issue_comments_297092.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/novoselt/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/novoselt/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**",
    "created_at": "2016-06-26T05:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297092",
    "user": "https://github.com/novoselt"
}
```

Changed branch from **[u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[u/novoselt/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/novoselt/interactivelpproblem__dictionaries__add_constraint___add_row_methods)**



---

archive/issue_comments_297093.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nGoing carefully doing some tweaks, not done yet, but have to stop for the moment.\n\n- I thought it is clear that if `new_` prefix is not great for one argument, it is not great for another ;-)\n- There were still some data of problems not preserved, I think everything that can be preserved should be.\n- `a number of the constant term for the new row`?..\n- Explicit hard-coded ring `LPDictionary(matrix(QQ, A)`?!?!?!\n \n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92f48681fb17e29065b4ca2f2fbad3992d5d4c58\"><code>92f4868</code></a></td><td><code>Reviewer tweaks, part 1.</code></td></tr></table>\n",
    "created_at": "2016-06-26T05:39:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297093",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:31" align="right">comment:31</div>

Going carefully doing some tweaks, not done yet, but have to stop for the moment.

- I thought it is clear that if `new_` prefix is not great for one argument, it is not great for another ;-)
- There were still some data of problems not preserved, I think everything that can be preserved should be.
- `a number of the constant term for the new row`?..
- Explicit hard-coded ring `LPDictionary(matrix(QQ, A)`?!?!?!
 
---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92f48681fb17e29065b4ca2f2fbad3992d5d4c58"><code>92f4868</code></a></td><td><code>Reviewer tweaks, part 1.</code></td></tr></table>




---

archive/issue_comments_297094.json:
```json
{
    "body": "Changed commit from **[`7c93d94`](https://github.com/sagemath/sagetrac-mirror/commit/7c93d94e81987b9eed1432cbbe04064444c86048)** to **[`92f4868`](https://github.com/sagemath/sagetrac-mirror/commit/92f48681fb17e29065b4ca2f2fbad3992d5d4c58)**",
    "created_at": "2016-06-26T05:39:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297094",
    "user": "https://github.com/novoselt"
}
```

Changed commit from **[`7c93d94`](https://github.com/sagemath/sagetrac-mirror/commit/7c93d94e81987b9eed1432cbbe04064444c86048)** to **[`92f4868`](https://github.com/sagemath/sagetrac-mirror/commit/92f48681fb17e29065b4ca2f2fbad3992d5d4c58)**



---

archive/issue_comments_297095.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThanks for fixing these.",
    "created_at": "2016-06-26T21:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297095",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Thanks for fixing these.



---

archive/issue_comments_297096.json:
```json
{
    "body": "Changed commit from **[`92f4868`](https://github.com/sagemath/sagetrac-mirror/commit/92f48681fb17e29065b4ca2f2fbad3992d5d4c58)** to **[`a931471`](https://github.com/sagemath/sagetrac-mirror/commit/a931471a742ea7c6350b833b67341c9052bf1d9b)**",
    "created_at": "2016-07-19T03:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297096",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`92f4868`](https://github.com/sagemath/sagetrac-mirror/commit/92f48681fb17e29065b4ca2f2fbad3992d5d4c58)** to **[`a931471`](https://github.com/sagemath/sagetrac-mirror/commit/a931471a742ea7c6350b833b67341c9052bf1d9b)**



---

archive/issue_comments_297097.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98471573f9c5a29ce44ed64b5954df1d8b46a5b8\"><code>9847157</code></a></td><td><code>Merge branch 'develop' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a931471a742ea7c6350b833b67341c9052bf1d9b\"><code>a931471</code></a></td><td><code>Reviewer's rewrite of add_row methods for dictionaries</code></td></tr></table>\n",
    "created_at": "2016-07-19T03:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297097",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98471573f9c5a29ce44ed64b5954df1d8b46a5b8"><code>9847157</code></a></td><td><code>Merge branch 'develop' into t/20559/interactivelpproblem__dictionaries__add_constraint___add_row_methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a931471a742ea7c6350b833b67341c9052bf1d9b"><code>a931471</code></a></td><td><code>Reviewer's rewrite of add_row methods for dictionaries</code></td></tr></table>




---

archive/issue_comments_297098.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nWith all due respect the old code for `add_row` for revised dictionaries was incomprehensible and extremely unnecessary complicated.\n\nThe current code will probably break on a dictionary for an auxiliary problem - is there any point in properly supporting these or there is never a need to add rows there and we can just throw an exception?\n\nDocumentation of `add_row` and `row_coefficients` needs some clarification with respect to signs (since I got confused and presumably some poor students may get as well). How about something like `These are the coefficients with which nonbasic variables are subtracted in the relation of this basic variable.` ?",
    "created_at": "2016-07-19T03:27:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297098",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:34" align="right">comment:34</div>

With all due respect the old code for `add_row` for revised dictionaries was incomprehensible and extremely unnecessary complicated.

The current code will probably break on a dictionary for an auxiliary problem - is there any point in properly supporting these or there is never a need to add rows there and we can just throw an exception?

Documentation of `add_row` and `row_coefficients` needs some clarification with respect to signs (since I got confused and presumably some poor students may get as well). How about something like `These are the coefficients with which nonbasic variables are subtracted in the relation of this basic variable.` ?



---

archive/issue_comments_297099.json:
```json
{
    "body": "Changed author from **Peijun Xiao, Matthias Koeppe** to **Peijun Xiao, Matthias Koeppe, Andrey Novoseltsev**",
    "created_at": "2016-07-19T03:27:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297099",
    "user": "https://github.com/novoselt"
}
```

Changed author from **Peijun Xiao, Matthias Koeppe** to **Peijun Xiao, Matthias Koeppe, Andrey Novoseltsev**



---

archive/issue_comments_297100.json:
```json
{
    "body": "Changed commit from **[`a931471`](https://github.com/sagemath/sagetrac-mirror/commit/a931471a742ea7c6350b833b67341c9052bf1d9b)** to **[`c8559f3`](https://github.com/sagemath/sagetrac-mirror/commit/c8559f3cb19ded99c11ff5eda108be8ab211a3eb)**",
    "created_at": "2016-07-20T00:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297100",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a931471`](https://github.com/sagemath/sagetrac-mirror/commit/a931471a742ea7c6350b833b67341c9052bf1d9b)** to **[`c8559f3`](https://github.com/sagemath/sagetrac-mirror/commit/c8559f3cb19ded99c11ff5eda108be8ab211a3eb)**



---

archive/issue_comments_297101.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a5998f64d658f092e9f667b9f5a086feecdf798\"><code>6a5998f</code></a></td><td><code>Add consistency check for adding a row to the auxiliary problem</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8559f3cb19ded99c11ff5eda108be8ab211a3eb\"><code>c8559f3</code></a></td><td><code>Clarify the sign of row coefficients.</code></td></tr></table>\n",
    "created_at": "2016-07-20T00:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297101",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a5998f64d658f092e9f667b9f5a086feecdf798"><code>6a5998f</code></a></td><td><code>Add consistency check for adding a row to the auxiliary problem</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8559f3cb19ded99c11ff5eda108be8ab211a3eb"><code>c8559f3</code></a></td><td><code>Clarify the sign of row coefficients.</code></td></tr></table>




---

archive/issue_comments_297102.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nAfter some more thinking, it is perfectly fine to add rows to auxiliary problems with this code, but there is a constraint on input.\n\nIf you are OK with my changes, set to positive review.",
    "created_at": "2016-07-20T00:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297102",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:36" align="right">comment:36</div>

After some more thinking, it is perfectly fine to add rows to auxiliary problems with this code, but there is a constraint on input.

If you are OK with my changes, set to positive review.



---

archive/issue_comments_297103.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThank you for your work! They look fine.",
    "created_at": "2016-07-22T00:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297103",
    "user": "https://github.com/pgxiao"
}
```

<div id="comment:37" align="right">comment:37</div>

Thank you for your work! They look fine.



---

archive/issue_events_291055.json:
```json
{
    "actor": "https://github.com/pgxiao",
    "created_at": "2016-07-22T00:55:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291055"
}
```



---

archive/issue_events_291056.json:
```json
{
    "actor": "https://github.com/pgxiao",
    "created_at": "2016-07-22T00:55:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291056"
}
```



---

archive/issue_comments_297104.json:
```json
{
    "body": "Changed branch from **[u/novoselt/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/novoselt/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[`c8559f3`](https://github.com/sagemath/sagetrac-mirror/commit/c8559f3cb19ded99c11ff5eda108be8ab211a3eb)**",
    "created_at": "2016-07-23T18:41:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20559#issuecomment-297104",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/novoselt/interactivelpproblem__dictionaries__add_constraint___add_row_methods](https://github.com/sagemath/sagetrac-mirror/tree/u/novoselt/interactivelpproblem__dictionaries__add_constraint___add_row_methods)** to **[`c8559f3`](https://github.com/sagemath/sagetrac-mirror/commit/c8559f3cb19ded99c11ff5eda108be8ab211a3eb)**



---

archive/issue_events_291057.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-23T18:41:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291057"
}
```



---

archive/issue_events_291058.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "2de0e18fc12223c830226e676776c9ebbe57cff7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-07-23T18:41:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20559",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20559#event-291058"
}
```
