# Issue 20676: Projective closure and affine patches for algebraic curves

archive/issues_020439.json:
```json
{
    "assignees": [],
    "body": "Given a curve in affine space, find its projective closure. Conversely, given a projective curve, find its affine patches with respect to the standard affine coordinate charts.\n\nThis could be done more efficiently by using the projective_embedding/affine patches functionality for affine/projective subschemes. Currently the projective_embedding function for affine subschemes doesn't always have the right codomain:\n\n```\nA.<x,y,z> = AffineSpace(3,QQ)\nX = A.subscheme([y-x^2,z-x^3])\nX.projective_embedding().codomain()\n```\n\nso this should be addressed here, along with creating a projective_closure function for affine subschemes.\n\nDepends on #20697\nDepends on #20698\n\nCC:  @bhutz @miguelmarco\n\nKeywords: **gsoc2016**\n\nBranch/Commit: **[91bc630](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)**\n\nReviewer: **Ben Hutz**\n\nAuthor: **Grayson Jorgenson**\n\nComponent: **algebraic geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20676_\n\n",
    "closed_at": "2016-06-09T20:28:20Z",
    "created_at": "2016-05-25T04:38:11Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Projective closure and affine patches for algebraic curves",
    "type": "issue",
    "updated_at": "2016-06-09T20:28:20Z",
    "url": "https://github.com/sagemath/sage/issues/20676",
    "user": "https://github.com/sagetrac-gjorgenson"
}
```
Given a curve in affine space, find its projective closure. Conversely, given a projective curve, find its affine patches with respect to the standard affine coordinate charts.

This could be done more efficiently by using the projective_embedding/affine patches functionality for affine/projective subschemes. Currently the projective_embedding function for affine subschemes doesn't always have the right codomain:

```
A.<x,y,z> = AffineSpace(3,QQ)
X = A.subscheme([y-x^2,z-x^3])
X.projective_embedding().codomain()
```

so this should be addressed here, along with creating a projective_closure function for affine subschemes.

Depends on #20697
Depends on #20698

CC:  @bhutz @miguelmarco

Keywords: **gsoc2016**

Branch/Commit: **[91bc630](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)**

Reviewer: **Ben Hutz**

Author: **Grayson Jorgenson**

Component: **algebraic geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/20676_





---

archive/issue_events_291087.json:
```json
{
    "actor": "https://github.com/sagetrac-gjorgenson",
    "created_at": "2016-05-25T04:38:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291087"
}
```



---

archive/issue_events_291088.json:
```json
{
    "actor": "https://github.com/sagetrac-gjorgenson",
    "created_at": "2016-05-25T04:38:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291088"
}
```



---

archive/issue_events_291089.json:
```json
{
    "actor": "https://github.com/sagetrac-gjorgenson",
    "created_at": "2016-05-25T04:38:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291089"
}
```



---

archive/issue_events_291090.json:
```json
{
    "actor": "https://github.com/sagetrac-gjorgenson",
    "created_at": "2016-05-25T04:38:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291090"
}
```



---

archive/issue_comments_298946.json:
```json
{
    "body": "Branch: **[u/gjorgenson/ticket/20676](https://github.com/sagemath/sagetrac-mirror/tree/u/gjorgenson/ticket/20676)**",
    "created_at": "2016-05-25T04:41:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298946",
    "user": "https://github.com/sagetrac-gjorgenson"
}
```

Branch: **[u/gjorgenson/ticket/20676](https://github.com/sagemath/sagetrac-mirror/tree/u/gjorgenson/ticket/20676)**



---

archive/issue_comments_298947.json:
```json
{
    "body": "Commit: **[b3002ef](https://github.com/sagemath/sagetrac-mirror/commit/b3002ef28b0b1f9ae39b1222c446625037420db9)**",
    "created_at": "2016-05-25T21:19:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298947",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[b3002ef](https://github.com/sagemath/sagetrac-mirror/commit/b3002ef28b0b1f9ae39b1222c446625037420db9)**



---

archive/issue_comments_298948.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3002ef28b0b1f9ae39b1222c446625037420db9\">b3002ef</a></td><td><code>20676: First pass at implementation.</code></td></tr></table>\n",
    "created_at": "2016-05-25T21:19:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298948",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3002ef28b0b1f9ae39b1222c446625037420db9">b3002ef</a></td><td><code>20676: First pass at implementation.</code></td></tr></table>




---

archive/issue_comments_298949.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI have two questions:\n\n1) Are you sure you really need to compute the groebner basis to compute the projective closue? If I am not missing something, just homogenizing the generators, you should get the generators of the projective ideal.\n\n2) I think it would be better to keep the names of the variables when we compute the affine patches (or at least, to have an option to do so). It can be confusing to the user to force a change in the name of the coordinates. An option to choose the names of the new variables in the projective closure would be nice too.",
    "created_at": "2016-05-25T22:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298949",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:3" align="right">comment:3</div>

I have two questions:

1) Are you sure you really need to compute the groebner basis to compute the projective closue? If I am not missing something, just homogenizing the generators, you should get the generators of the projective ideal.

2) I think it would be better to keep the names of the variables when we compute the affine patches (or at least, to have an option to do so). It can be confusing to the user to force a change in the name of the coordinates. An option to choose the names of the new variables in the projective closure would be nice too.



---

archive/issue_comments_298950.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@miguelmarco](#comment:3):\n\nThanks for looking at this. I think it's not always the case that a given set of generators is sufficient for finding generators for the ideal of the projective closure. One example I have seen referenced in some texts is the twisted cubic in A3 defined by the ideal `(y-x^2, z-x^3)`. Its projective closure is `(x^2 \u2212 wy, xy \u2212 wz, y^2 \u2212 xz)`, but if the given generators of the first ideal are homogenized we get `(wy-x^2, zw<sup>2-x</sup>3)` instead.\n\nA proof is given in the book ideals, varieties, algorithms that if the generators of a groebner basis (with respect to a graded monomial ordering) for the defining ideal of an affine variety are homogenized, then the result is a set of generators for the ideal of the projective closure, so I tried to emulate that here.\n\nI'll work on getting some flexibility with the variable names.",
    "created_at": "2016-05-25T23:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298950",
    "user": "https://github.com/sagetrac-gjorgenson"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@miguelmarco](#comment:3):

Thanks for looking at this. I think it's not always the case that a given set of generators is sufficient for finding generators for the ideal of the projective closure. One example I have seen referenced in some texts is the twisted cubic in A3 defined by the ideal `(y-x^2, z-x^3)`. Its projective closure is `(x^2 − wy, xy − wz, y^2 − xz)`, but if the given generators of the first ideal are homogenized we get `(wy-x^2, zw<sup>2-x</sup>3)` instead.

A proof is given in the book ideals, varieties, algorithms that if the generators of a groebner basis (with respect to a graded monomial ordering) for the defining ideal of an affine variety are homogenized, then the result is a set of generators for the ideal of the projective closure, so I tried to emulate that here.

I'll work on getting some flexibility with the variable names.



---

archive/issue_comments_298951.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAs Grayson pointed out the twisted cubic is the typical example for needing the gb.\n\nFor the variables. Actually it is not a good idea to name them the same as they really aren't the same variables.  More importantly, you need to be careful to keep track of the embedding as well, since if you homogenize the affine patch, you would expect to get something back in the same projective space. Take a look at the functionality for projective space and projective subschemes (or in #16838) to see what I mean.",
    "created_at": "2016-05-26T00:09:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298951",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:5" align="right">comment:5</div>

As Grayson pointed out the twisted cubic is the typical example for needing the gb.

For the variables. Actually it is not a good idea to name them the same as they really aren't the same variables.  More importantly, you need to be careful to keep track of the embedding as well, since if you homogenize the affine patch, you would expect to get something back in the same projective space. Take a look at the functionality for projective space and projective subschemes (or in #16838) to see what I mean.



---

archive/issue_comments_298952.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThanks for the correction. I knew I was missing something.\n\nAbout the names of the variables... right now they might be named the same or not deppending on what were the original names. So I still think that there should be at least on option to let the user decide how are the new variables named: the same way as before, maybe adding a \"bar\" at the end, or completely new ones.\n\nAnd bhutz is totally right about the morphisms: that is the important thing to compute (either in this methods or in separated ones).",
    "created_at": "2016-05-26T07:32:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298952",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:6" align="right">comment:6</div>

Thanks for the correction. I knew I was missing something.

About the names of the variables... right now they might be named the same or not deppending on what were the original names. So I still think that there should be at least on option to let the user decide how are the new variables named: the same way as before, maybe adding a "bar" at the end, or completely new ones.

And bhutz is totally right about the morphisms: that is the important thing to compute (either in this methods or in separated ones).



---

archive/issue_comments_298953.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39dd215adb96f07bc67854c5debd1f1b49c08032\">39dd215</a></td><td><code>20676: Attempt to keep track of ambient spaces.</code></td></tr></table>\n",
    "created_at": "2016-05-26T08:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298953",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39dd215adb96f07bc67854c5debd1f1b49c08032">39dd215</a></td><td><code>20676: Attempt to keep track of ambient spaces.</code></td></tr></table>




---

archive/issue_comments_298954.json:
```json
{
    "body": "Changed commit from **[b3002ef](https://github.com/sagemath/sagetrac-mirror/commit/b3002ef28b0b1f9ae39b1222c446625037420db9)** to **[39dd215](https://github.com/sagemath/sagetrac-mirror/commit/39dd215adb96f07bc67854c5debd1f1b49c08032)**",
    "created_at": "2016-05-26T08:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298954",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b3002ef](https://github.com/sagemath/sagetrac-mirror/commit/b3002ef28b0b1f9ae39b1222c446625037420db9)** to **[39dd215](https://github.com/sagemath/sagetrac-mirror/commit/39dd215adb96f07bc67854c5debd1f1b49c08032)**



---

archive/issue_comments_298955.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOkay, I actually just finished up an attempt to better manage the creation of ambient spaces in the projective closure/affine patches computation. I tried piggy-backing off of the existing projective_embedding and affine_patch functionality for projective/affine spaces, and it seems to be working so far. Things like:\n\n```\nP.<x,y,z,w> = ProjectiveSpace(QQ,3)\nC = Curve([y*z - x^2,w^2 - x*y])\nC.ambient_space() == C.affine_patch(0).projective_closure().ambient_space()\n```\nand\n\n```\nA.<x,y,z> = AffineSpace(QQ,3)\nC = Curve([y-x^2,z-x^3])\nC.ambient_space() == C.projective_closure().affine_patch(0).ambient_space()\n```\nshould now return true. Is this the right way to keep track of everything?\n\nI also found something that seems strange:\n\n```\nA.<x,y,z> = AffineSpace(QQ,3)\nC = Curve([y-x^2,z-x^3])\nA == C.ambient_space()\n```\nreturns false. As far as I can tell, this isn't an issue for projective space curves. Also, there seems to be an issue with the class structure of space curves vs plane curves. Right now there is a ProjectiveSpaceCurve_generic class, and a ProjectiveCurve_generic class, with the latter corresponding to plane curves, but the plane curve class does not inherit from the space curve class. Similarly for affine curves. Is there a reason why plane curves shouldn't inherit from the space curve class?",
    "created_at": "2016-05-26T08:15:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298955",
    "user": "https://github.com/sagetrac-gjorgenson"
}
```

<div id="comment:8" align="right">comment:8</div>

Okay, I actually just finished up an attempt to better manage the creation of ambient spaces in the projective closure/affine patches computation. I tried piggy-backing off of the existing projective_embedding and affine_patch functionality for projective/affine spaces, and it seems to be working so far. Things like:

```
P.<x,y,z,w> = ProjectiveSpace(QQ,3)
C = Curve([y*z - x^2,w^2 - x*y])
C.ambient_space() == C.affine_patch(0).projective_closure().ambient_space()
```
and

```
A.<x,y,z> = AffineSpace(QQ,3)
C = Curve([y-x^2,z-x^3])
C.ambient_space() == C.projective_closure().affine_patch(0).ambient_space()
```
should now return true. Is this the right way to keep track of everything?

I also found something that seems strange:

```
A.<x,y,z> = AffineSpace(QQ,3)
C = Curve([y-x^2,z-x^3])
A == C.ambient_space()
```
returns false. As far as I can tell, this isn't an issue for projective space curves. Also, there seems to be an issue with the class structure of space curves vs plane curves. Right now there is a ProjectiveSpaceCurve_generic class, and a ProjectiveCurve_generic class, with the latter corresponding to plane curves, but the plane curve class does not inherit from the space curve class. Similarly for affine curves. Is there a reason why plane curves shouldn't inherit from the space curve class?



---

archive/issue_comments_298956.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI would say it is a bug in Sage. Apparently, schemes don't have rich comparison implemented.",
    "created_at": "2016-05-26T12:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298956",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:9" align="right">comment:9</div>

I would say it is a bug in Sage. Apparently, schemes don't have rich comparison implemented.



---

archive/issue_comments_298957.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nre: variable names.\n\nThe way this is handled for general affine and projective subschemes is to allow the user to specify the space that it will be embedded into (or dehomogenized into). This is better functionality than just specifying the variable names, since you can then embedded different curves into the same space.\n\nre: ambient space\n\n```\nA.<x,y,z> = AffineSpace(QQ,3)\nC = Curve([y-x^2,z-x^3])\nA == C.ambient_space()\n```\nI haven't looked at the code, but it looks like Curve assumes you are passing in elements from a polynomial ring and doesn't see if they are actually from a particular affine space and hence creates a new affine space. This is a bug. If you pass in elements of the coordinate ring of an affine space, then the curve should be in that space. It may be that you need to include an optional parameter for the space and/or perhaps have an A.curve() function.\n\none last thought: Should these curve classes inherit from affine and projective subscheme as well? This could save you a fair amount of code duplication (such as for affine_patch and projective_embedding.",
    "created_at": "2016-05-26T13:00:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298957",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:10" align="right">comment:10</div>

re: variable names.

The way this is handled for general affine and projective subschemes is to allow the user to specify the space that it will be embedded into (or dehomogenized into). This is better functionality than just specifying the variable names, since you can then embedded different curves into the same space.

re: ambient space

```
A.<x,y,z> = AffineSpace(QQ,3)
C = Curve([y-x^2,z-x^3])
A == C.ambient_space()
```
I haven't looked at the code, but it looks like Curve assumes you are passing in elements from a polynomial ring and doesn't see if they are actually from a particular affine space and hence creates a new affine space. This is a bug. If you pass in elements of the coordinate ring of an affine space, then the curve should be in that space. It may be that you need to include an optional parameter for the space and/or perhaps have an A.curve() function.

one last thought: Should these curve classes inherit from affine and projective subscheme as well? This could save you a fair amount of code duplication (such as for affine_patch and projective_embedding.



---

archive/issue_comments_298958.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,11 @@\n Given a curve in affine space, find its projective closure. Conversely, given a projective curve, find its affine patches with respect to the standard affine coordinate charts.\n+\n+This could be done more efficiently by using the projective_embedding/affine patches functionality for affine/projective subschemes. Currently the projective_embedding function for affine subschemes doesn't always have the right codomain:\n+\n+```\n+A.<x,y,z> = AffineSpace(3,QQ)\n+X = A.subscheme([y-x^2,z-x^3])\n+X.projective_embedding().codomain()\n+```\n+\n+so this should be addressed here, along with creating a projective_closure function for affine subschemes.\n``````\n",
    "created_at": "2016-05-29T01:30:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298958",
    "user": "https://github.com/sagetrac-gjorgenson"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,11 @@
 Given a curve in affine space, find its projective closure. Conversely, given a projective curve, find its affine patches with respect to the standard affine coordinate charts.
+
+This could be done more efficiently by using the projective_embedding/affine patches functionality for affine/projective subschemes. Currently the projective_embedding function for affine subschemes doesn't always have the right codomain:
+
+```
+A.<x,y,z> = AffineSpace(3,QQ)
+X = A.subscheme([y-x^2,z-x^3])
+X.projective_embedding().codomain()
+```
+
+so this should be addressed here, along with creating a projective_closure function for affine subschemes.
``````




---

archive/issue_comments_298959.json:
```json
{
    "body": "Dependencies: **#20697, #20698**",
    "created_at": "2016-05-29T01:30:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298959",
    "user": "https://github.com/sagetrac-gjorgenson"
}
```

Dependencies: **#20697, #20698**



---

archive/issue_comments_298960.json:
```json
{
    "body": "Changed commit from **[39dd215](https://github.com/sagemath/sagetrac-mirror/commit/39dd215adb96f07bc67854c5debd1f1b49c08032)** to **[c6fe840](https://github.com/sagemath/sagetrac-mirror/commit/c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3)**",
    "created_at": "2016-05-30T00:01:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298960",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[39dd215](https://github.com/sagemath/sagetrac-mirror/commit/39dd215adb96f07bc67854c5debd1f1b49c08032)** to **[c6fe840](https://github.com/sagemath/sagetrac-mirror/commit/c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3)**



---

archive/issue_comments_298961.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02349fe0fe9b2db2c4d3c66e19cf2de5e6591636\">02349fe</a></td><td><code>20676: projective_embedding revision and projective_closure.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5de70c9c1041a9aea0d4edbb66c43d82ce5bf4ef\">5de70c9</a></td><td><code>20697: plane curve classes now inherit from the space curve classes.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef65acaab97ed5a1de6fa6ca9900ef942bc6f9f0\">ef65aca</a></td><td><code>20676: Merge ticket 20697 into this ticket.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9cbdab3fdfa24144e1aacdf2b7c29d032f016049\">9cbdab3</a></td><td><code>20698: revised initialization of generic curves.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b718afabfb2e2233c67aca3ba92cb0150c28e100\">b718afa</a></td><td><code>20698: documentation and error formatting fixes.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4eb8d44b2e878582e19eafae0261b0214704a6c\">d4eb8d4</a></td><td><code>20698: documentation spacing fixes.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ffc3aabc0b17be5658c69bf0b54b87f8d8ccc31\">3ffc3aa</a></td><td><code>20676: Merge ticket 20698 into this ticket.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3\">c6fe840</a></td><td><code>20676: implemented curve-level functions.</code></td></tr></table>\n",
    "created_at": "2016-05-30T00:01:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298961",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02349fe0fe9b2db2c4d3c66e19cf2de5e6591636">02349fe</a></td><td><code>20676: projective_embedding revision and projective_closure.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5de70c9c1041a9aea0d4edbb66c43d82ce5bf4ef">5de70c9</a></td><td><code>20697: plane curve classes now inherit from the space curve classes.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef65acaab97ed5a1de6fa6ca9900ef942bc6f9f0">ef65aca</a></td><td><code>20676: Merge ticket 20697 into this ticket.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9cbdab3fdfa24144e1aacdf2b7c29d032f016049">9cbdab3</a></td><td><code>20698: revised initialization of generic curves.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b718afabfb2e2233c67aca3ba92cb0150c28e100">b718afa</a></td><td><code>20698: documentation and error formatting fixes.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4eb8d44b2e878582e19eafae0261b0214704a6c">d4eb8d4</a></td><td><code>20698: documentation spacing fixes.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ffc3aabc0b17be5658c69bf0b54b87f8d8ccc31">3ffc3aa</a></td><td><code>20676: Merge ticket 20698 into this ticket.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3">c6fe840</a></td><td><code>20676: implemented curve-level functions.</code></td></tr></table>




---

archive/issue_comments_298962.json:
```json
{
    "body": "Changed commit from **[c6fe840](https://github.com/sagemath/sagetrac-mirror/commit/c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3)** to **[0039d7b](https://github.com/sagemath/sagetrac-mirror/commit/0039d7b13dad64025ef70542f407bf3af7423e1a)**",
    "created_at": "2016-06-02T20:50:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298962",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c6fe840](https://github.com/sagemath/sagetrac-mirror/commit/c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3)** to **[0039d7b](https://github.com/sagemath/sagetrac-mirror/commit/0039d7b13dad64025ef70542f407bf3af7423e1a)**



---

archive/issue_comments_298963.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/058b909d312143e883a8020dae61f74d7b888abf\">058b909</a></td><td><code>20697: Change class names.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a5fe9a942ea9ba0e14039bcd4d1c9695545f035\">5a5fe9a</a></td><td><code>20697: change \"plane_curves\" folder name to \"curves\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3e8447d20c03a4c1970133728c49773335dbe36\">b3e8447</a></td><td><code>20697: Merge with latest beta.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b5fdf87be6c45877ab234f60143a2891ab7aa6c\">3b5fdf8</a></td><td><code>20697: Merge in 20698 for access to better initialization of curves.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85415915be7bf80ae7819e8ecdf3d0b66a2ce157\">8541591</a></td><td><code>20697: Added documentation and made curve string labels match class names.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b918e772276ed7ed576e8eae9936eeca9b2671cf\">b918e77</a></td><td><code>20697: documentation adjustment, and attempt to fix pickle issue.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3809671bae3c03fe2407471a1e908cdbdc22a00\">b380967</a></td><td><code>20697: Missed name changes.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54f4e623b5e676bc746e1f1da1aa5bb627b0826a\">54f4e62</a></td><td><code>20676: Merge again with 20697.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0039d7b13dad64025ef70542f407bf3af7423e1a\">0039d7b</a></td><td><code>20676: Update example strings to match changes from 20697.</code></td></tr></table>\n",
    "created_at": "2016-06-02T20:50:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298963",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/058b909d312143e883a8020dae61f74d7b888abf">058b909</a></td><td><code>20697: Change class names.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a5fe9a942ea9ba0e14039bcd4d1c9695545f035">5a5fe9a</a></td><td><code>20697: change "plane_curves" folder name to "curves"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3e8447d20c03a4c1970133728c49773335dbe36">b3e8447</a></td><td><code>20697: Merge with latest beta.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b5fdf87be6c45877ab234f60143a2891ab7aa6c">3b5fdf8</a></td><td><code>20697: Merge in 20698 for access to better initialization of curves.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85415915be7bf80ae7819e8ecdf3d0b66a2ce157">8541591</a></td><td><code>20697: Added documentation and made curve string labels match class names.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b918e772276ed7ed576e8eae9936eeca9b2671cf">b918e77</a></td><td><code>20697: documentation adjustment, and attempt to fix pickle issue.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3809671bae3c03fe2407471a1e908cdbdc22a00">b380967</a></td><td><code>20697: Missed name changes.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54f4e623b5e676bc746e1f1da1aa5bb627b0826a">54f4e62</a></td><td><code>20676: Merge again with 20697.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0039d7b13dad64025ef70542f407bf3af7423e1a">0039d7b</a></td><td><code>20676: Update example strings to match changes from 20697.</code></td></tr></table>




---

archive/issue_events_291091.json:
```json
{
    "actor": "https://github.com/sagetrac-gjorgenson",
    "created_at": "2016-06-02T20:54:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291091"
}
```



---

archive/issue_comments_298964.json:
```json
{
    "body": "Reviewer: **Ben Hutz**",
    "created_at": "2016-06-04T13:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298964",
    "user": "https://github.com/bhutz"
}
```

Reviewer: **Ben Hutz**



---

archive/issue_comments_298965.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n- line 1916:\n\n`R.ideal([R(f) for f in self.defining_polynomials()])`\ncould be replaced with\n`self.defining_ideal()`\n\n- projective closure should take projective space parameter\n\n```\nA.<x,y> = AffineSpace(QQ, 2)\nP.<u,v,w>=ProjectiveSpace(QQ,2)\nC = Curve([y-x^2], A)\nD=C.projective_closure(1,P)\n```\n\n- Affine patch should take affine space parameter\n\n```\nA.<x,y> = AffineSpace(QQ, 2)\nP.<u,v,w>=ProjectiveSpace(QQ,2)\nC = Curve([u^2-v^2], P)\nC.affine_patch(1,A)\n```\n\n- Affine patch should have a default patch and that default should match up with the projective closure default\n\n```\nA.<x,y,z> = AffineSpace(GF(3), 3)\nC = Curve([y-x^2,z-x^3], A)\nD=C.projective_closure()\nD.affine_patch()==C\n```\n\n- you should mention in the doc for projective embedding that the image is the projective closure",
    "created_at": "2016-06-04T13:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298965",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:15" align="right">comment:15</div>

- line 1916:

`R.ideal([R(f) for f in self.defining_polynomials()])`
could be replaced with
`self.defining_ideal()`

- projective closure should take projective space parameter

```
A.<x,y> = AffineSpace(QQ, 2)
P.<u,v,w>=ProjectiveSpace(QQ,2)
C = Curve([y-x^2], A)
D=C.projective_closure(1,P)
```

- Affine patch should take affine space parameter

```
A.<x,y> = AffineSpace(QQ, 2)
P.<u,v,w>=ProjectiveSpace(QQ,2)
C = Curve([u^2-v^2], P)
C.affine_patch(1,A)
```

- Affine patch should have a default patch and that default should match up with the projective closure default

```
A.<x,y,z> = AffineSpace(GF(3), 3)
C = Curve([y-x^2,z-x^3], A)
D=C.projective_closure()
D.affine_patch()==C
```

- you should mention in the doc for projective embedding that the image is the projective closure



---

archive/issue_events_291092.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2016-06-04T13:00:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291092"
}
```



---

archive/issue_events_291093.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2016-06-04T13:00:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291093"
}
```



---

archive/issue_comments_298966.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nerr...having a default for affine_patch() doesn't really make sense, so ignore that part.",
    "created_at": "2016-06-04T14:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298966",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:16" align="right">comment:16</div>

err...having a default for affine_patch() doesn't really make sense, so ignore that part.



---

archive/issue_comments_298967.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9262ae5923e1c14192b87314288902d50e08b104\">9262ae5</a></td><td><code>20676: changes from review, and spacing fixes.</code></td></tr></table>\n",
    "created_at": "2016-06-04T22:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298967",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9262ae5923e1c14192b87314288902d50e08b104">9262ae5</a></td><td><code>20676: changes from review, and spacing fixes.</code></td></tr></table>




---

archive/issue_comments_298968.json:
```json
{
    "body": "Changed commit from **[0039d7b](https://github.com/sagemath/sagetrac-mirror/commit/0039d7b13dad64025ef70542f407bf3af7423e1a)** to **[9262ae5](https://github.com/sagemath/sagetrac-mirror/commit/9262ae5923e1c14192b87314288902d50e08b104)**",
    "created_at": "2016-06-04T22:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298968",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0039d7b](https://github.com/sagemath/sagetrac-mirror/commit/0039d7b13dad64025ef70542f407bf3af7423e1a)** to **[9262ae5](https://github.com/sagemath/sagetrac-mirror/commit/9262ae5923e1c14192b87314288902d50e08b104)**



---

archive/issue_comments_298969.json:
```json
{
    "body": "Changed keywords from none to **gsoc2016**",
    "created_at": "2016-06-04T22:39:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298969",
    "user": "https://github.com/sagetrac-gjorgenson"
}
```

Changed keywords from none to **gsoc2016**



---

archive/issue_events_291094.json:
```json
{
    "actor": "https://github.com/sagetrac-gjorgenson",
    "created_at": "2016-06-04T22:39:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291094"
}
```



---

archive/issue_events_291095.json:
```json
{
    "actor": "https://github.com/sagetrac-gjorgenson",
    "created_at": "2016-06-04T22:39:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291095"
}
```



---

archive/issue_comments_298970.json:
```json
{
    "body": "Changed commit from **[9262ae5](https://github.com/sagemath/sagetrac-mirror/commit/9262ae5923e1c14192b87314288902d50e08b104)** to **[91bc630](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)**",
    "created_at": "2016-06-07T23:07:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298970",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9262ae5](https://github.com/sagemath/sagetrac-mirror/commit/9262ae5923e1c14192b87314288902d50e08b104)** to **[91bc630](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)**



---

archive/issue_comments_298971.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5\">91bc630</a></td><td><code>20676: Merge this ticket with 7.3 beta3.</code></td></tr></table>\n",
    "created_at": "2016-06-07T23:07:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298971",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5">91bc630</a></td><td><code>20676: Merge this ticket with 7.3 beta3.</code></td></tr></table>




---

archive/issue_comments_298972.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nthis looks good now",
    "created_at": "2016-06-09T01:46:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298972",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:20" align="right">comment:20</div>

this looks good now



---

archive/issue_events_291096.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2016-06-09T01:46:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291096"
}
```



---

archive/issue_events_291097.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2016-06-09T01:46:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291097"
}
```



---

archive/issue_events_291098.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-09T20:28:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291098"
}
```



---

archive/issue_events_291099.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6348bb7519f290b94d995e2e009f7ee42c0a83e5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-06-09T20:28:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20676#event-291099"
}
```



---

archive/issue_comments_298973.json:
```json
{
    "body": "Changed branch from **[u/gjorgenson/ticket/20676](https://github.com/sagemath/sagetrac-mirror/tree/u/gjorgenson/ticket/20676)** to **[91bc630](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)**",
    "created_at": "2016-06-09T20:28:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20676#issuecomment-298973",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gjorgenson/ticket/20676](https://github.com/sagemath/sagetrac-mirror/tree/u/gjorgenson/ticket/20676)** to **[91bc630](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)**
