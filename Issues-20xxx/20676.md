# Issue 20676: Projective closure and affine patches for algebraic curves

archive/issues_020439.json:
```json
{
    "body": "Given a curve in affine space, find its projective closure. Conversely, given a projective curve, find its affine patches with respect to the standard affine coordinate charts.\n\nThis could be done more efficiently by using the projective_embedding/affine patches functionality for affine/projective subschemes. Currently the projective_embedding function for affine subschemes doesn't always have the right codomain:\n\n```\nA.<x,y,z> = AffineSpace(3,QQ)\nX = A.subscheme([y-x^2,z-x^3])\nX.projective_embedding().codomain()\n```\n\nso this should be addressed here, along with creating a projective_closure function for affine subschemes.\n\nCC:  @bhutz @miguelmarco\n\nKeywords: gsoc2016\n\nBranch/Commit: [91bc630bfa994e8a2dfa587cae62bda2afb475a5](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)\n\nReviewer: Ben Hutz\n\nAuthor: Grayson Jorgenson\n\nDependencies: #20697, #20698\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20676\n\n",
    "closed_at": "2016-06-09T20:28:20Z",
    "created_at": "2016-05-25T04:38:11Z",
    "labels": [
        "component: algebraic geometry",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Projective closure and affine patches for algebraic curves",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20676",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```
Given a curve in affine space, find its projective closure. Conversely, given a projective curve, find its affine patches with respect to the standard affine coordinate charts.

This could be done more efficiently by using the projective_embedding/affine patches functionality for affine/projective subschemes. Currently the projective_embedding function for affine subschemes doesn't always have the right codomain:

```
A.<x,y,z> = AffineSpace(3,QQ)
X = A.subscheme([y-x^2,z-x^3])
X.projective_embedding().codomain()
```

so this should be addressed here, along with creating a projective_closure function for affine subschemes.

CC:  @bhutz @miguelmarco

Keywords: gsoc2016

Branch/Commit: [91bc630bfa994e8a2dfa587cae62bda2afb475a5](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)

Reviewer: Ben Hutz

Author: Grayson Jorgenson

Dependencies: #20697, #20698

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20676





---

archive/issue_comments_379030.json:
```json
{
    "body": "Branch: [u/gjorgenson/ticket/20676](https://github.com/sagemath/sagetrac-mirror/tree/u/gjorgenson/ticket/20676)",
    "created_at": "2016-05-25T04:41:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379030",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

Branch: [u/gjorgenson/ticket/20676](https://github.com/sagemath/sagetrac-mirror/tree/u/gjorgenson/ticket/20676)



---

archive/issue_comments_379031.json:
```json
{
    "body": "Commit: [b3002ef28b0b1f9ae39b1222c446625037420db9](https://github.com/sagemath/sagetrac-mirror/commit/b3002ef28b0b1f9ae39b1222c446625037420db9)",
    "created_at": "2016-05-25T21:19:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379031",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Commit: [b3002ef28b0b1f9ae39b1222c446625037420db9](https://github.com/sagemath/sagetrac-mirror/commit/b3002ef28b0b1f9ae39b1222c446625037420db9)



---

archive/issue_comments_379032.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[b3002ef](https://github.com/sagemath/sagetrac-mirror/commit/b3002ef28b0b1f9ae39b1222c446625037420db9)|`20676: First pass at implementation.`|",
    "created_at": "2016-05-25T21:19:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379032",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[b3002ef](https://github.com/sagemath/sagetrac-mirror/commit/b3002ef28b0b1f9ae39b1222c446625037420db9)|`20676: First pass at implementation.`|



---

archive/issue_comments_379033.json:
```json
{
    "body": "<a id='comment:3'></a>\nI have two questions:\n\n1) Are you sure you really need to compute the groebner basis to compute the projective closue? If I am not missing something, just homogenizing the generators, you should get the generators of the projective ideal.\n\n2) I think it would be better to keep the names of the variables when we compute the affine patches (or at least, to have an option to do so). It can be confusing to the user to force a change in the name of the coordinates. An option to choose the names of the new variables in the projective closure would be nice too.",
    "created_at": "2016-05-25T22:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379033",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:3'></a>
I have two questions:

1) Are you sure you really need to compute the groebner basis to compute the projective closue? If I am not missing something, just homogenizing the generators, you should get the generators of the projective ideal.

2) I think it would be better to keep the names of the variables when we compute the affine patches (or at least, to have an option to do so). It can be confusing to the user to force a change in the name of the coordinates. An option to choose the names of the new variables in the projective closure would be nice too.



---

archive/issue_comments_379034.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [mmarco](#comment%3A3):\n\nThanks for looking at this. I think it's not always the case that a given set of generators is sufficient for finding generators for the ideal of the projective closure. One example I have seen referenced in some texts is the twisted cubic in A3 defined by the ideal `(y-x^2, z-x^3)`. Its projective closure is `(x^2 \u2212 wy, xy \u2212 wz, y^2 \u2212 xz)`, but if the given generators of the first ideal are homogenized we get `(wy-x^2, zw<sup>2-x</sup>3)` instead.\n\nA proof is given in the book ideals, varieties, algorithms that if the generators of a groebner basis (with respect to a graded monomial ordering) for the defining ideal of an affine variety are homogenized, then the result is a set of generators for the ideal of the projective closure, so I tried to emulate that here.\n\nI'll work on getting some flexibility with the variable names.",
    "created_at": "2016-05-25T23:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379034",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

<a id='comment:4'></a>
Replying to [mmarco](#comment%3A3):

Thanks for looking at this. I think it's not always the case that a given set of generators is sufficient for finding generators for the ideal of the projective closure. One example I have seen referenced in some texts is the twisted cubic in A3 defined by the ideal `(y-x^2, z-x^3)`. Its projective closure is `(x^2 − wy, xy − wz, y^2 − xz)`, but if the given generators of the first ideal are homogenized we get `(wy-x^2, zw<sup>2-x</sup>3)` instead.

A proof is given in the book ideals, varieties, algorithms that if the generators of a groebner basis (with respect to a graded monomial ordering) for the defining ideal of an affine variety are homogenized, then the result is a set of generators for the ideal of the projective closure, so I tried to emulate that here.

I'll work on getting some flexibility with the variable names.



---

archive/issue_comments_379035.json:
```json
{
    "body": "<a id='comment:5'></a>\nAs Grayson pointed out the twisted cubic is the typical example for needing the gb.\n\nFor the variables. Actually it is not a good idea to name them the same as they really aren't the same variables.  More importantly, you need to be careful to keep track of the embedding as well, since if you homogenize the affine patch, you would expect to get something back in the same projective space. Take a look at the functionality for projective space and projective subschemes (or in #16838) to see what I mean.",
    "created_at": "2016-05-26T00:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379035",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:5'></a>
As Grayson pointed out the twisted cubic is the typical example for needing the gb.

For the variables. Actually it is not a good idea to name them the same as they really aren't the same variables.  More importantly, you need to be careful to keep track of the embedding as well, since if you homogenize the affine patch, you would expect to get something back in the same projective space. Take a look at the functionality for projective space and projective subschemes (or in #16838) to see what I mean.



---

archive/issue_comments_379036.json:
```json
{
    "body": "<a id='comment:6'></a>\nThanks for the correction. I knew I was missing something.\n\nAbout the names of the variables... right now they might be named the same or not deppending on what were the original names. So I still think that there should be at least on option to let the user decide how are the new variables named: the same way as before, maybe adding a \"bar\" at the end, or completely new ones.\n\nAnd bhutz is totally right about the morphisms: that is the important thing to compute (either in this methods or in separated ones).",
    "created_at": "2016-05-26T07:32:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379036",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:6'></a>
Thanks for the correction. I knew I was missing something.

About the names of the variables... right now they might be named the same or not deppending on what were the original names. So I still think that there should be at least on option to let the user decide how are the new variables named: the same way as before, maybe adding a "bar" at the end, or completely new ones.

And bhutz is totally right about the morphisms: that is the important thing to compute (either in this methods or in separated ones).



---

archive/issue_comments_379037.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[39dd215](https://github.com/sagemath/sagetrac-mirror/commit/39dd215adb96f07bc67854c5debd1f1b49c08032)|`20676: Attempt to keep track of ambient spaces.`|",
    "created_at": "2016-05-26T08:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379037",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[39dd215](https://github.com/sagemath/sagetrac-mirror/commit/39dd215adb96f07bc67854c5debd1f1b49c08032)|`20676: Attempt to keep track of ambient spaces.`|



---

archive/issue_comments_379038.json:
```json
{
    "body": "Changing commit from \"[b3002ef28b0b1f9ae39b1222c446625037420db9](https://github.com/sagemath/sagetrac-mirror/commit/b3002ef28b0b1f9ae39b1222c446625037420db9)\" to \"[39dd215adb96f07bc67854c5debd1f1b49c08032](https://github.com/sagemath/sagetrac-mirror/commit/39dd215adb96f07bc67854c5debd1f1b49c08032)\"",
    "created_at": "2016-05-26T08:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379038",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[b3002ef28b0b1f9ae39b1222c446625037420db9](https://github.com/sagemath/sagetrac-mirror/commit/b3002ef28b0b1f9ae39b1222c446625037420db9)" to "[39dd215adb96f07bc67854c5debd1f1b49c08032](https://github.com/sagemath/sagetrac-mirror/commit/39dd215adb96f07bc67854c5debd1f1b49c08032)"



---

archive/issue_comments_379039.json:
```json
{
    "body": "<a id='comment:8'></a>\nOkay, I actually just finished up an attempt to better manage the creation of ambient spaces in the projective closure/affine patches computation. I tried piggy-backing off of the existing projective_embedding and affine_patch functionality for projective/affine spaces, and it seems to be working so far. Things like:\n\n```\nP.<x,y,z,w> = ProjectiveSpace(QQ,3)\nC = Curve([y*z - x^2,w^2 - x*y])\nC.ambient_space() == C.affine_patch(0).projective_closure().ambient_space()\n```\nand\n\n```\nA.<x,y,z> = AffineSpace(QQ,3)\nC = Curve([y-x^2,z-x^3])\nC.ambient_space() == C.projective_closure().affine_patch(0).ambient_space()\n```\nshould now return true. Is this the right way to keep track of everything?\n\nI also found something that seems strange:\n\n```\nA.<x,y,z> = AffineSpace(QQ,3)\nC = Curve([y-x^2,z-x^3])\nA == C.ambient_space()\n```\nreturns false. As far as I can tell, this isn't an issue for projective space curves. Also, there seems to be an issue with the class structure of space curves vs plane curves. Right now there is a ProjectiveSpaceCurve_generic class, and a ProjectiveCurve_generic class, with the latter corresponding to plane curves, but the plane curve class does not inherit from the space curve class. Similarly for affine curves. Is there a reason why plane curves shouldn't inherit from the space curve class?",
    "created_at": "2016-05-26T08:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379039",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

<a id='comment:8'></a>
Okay, I actually just finished up an attempt to better manage the creation of ambient spaces in the projective closure/affine patches computation. I tried piggy-backing off of the existing projective_embedding and affine_patch functionality for projective/affine spaces, and it seems to be working so far. Things like:

```
P.<x,y,z,w> = ProjectiveSpace(QQ,3)
C = Curve([y*z - x^2,w^2 - x*y])
C.ambient_space() == C.affine_patch(0).projective_closure().ambient_space()
```
and

```
A.<x,y,z> = AffineSpace(QQ,3)
C = Curve([y-x^2,z-x^3])
C.ambient_space() == C.projective_closure().affine_patch(0).ambient_space()
```
should now return true. Is this the right way to keep track of everything?

I also found something that seems strange:

```
A.<x,y,z> = AffineSpace(QQ,3)
C = Curve([y-x^2,z-x^3])
A == C.ambient_space()
```
returns false. As far as I can tell, this isn't an issue for projective space curves. Also, there seems to be an issue with the class structure of space curves vs plane curves. Right now there is a ProjectiveSpaceCurve_generic class, and a ProjectiveCurve_generic class, with the latter corresponding to plane curves, but the plane curve class does not inherit from the space curve class. Similarly for affine curves. Is there a reason why plane curves shouldn't inherit from the space curve class?



---

archive/issue_comments_379040.json:
```json
{
    "body": "<a id='comment:9'></a>\nI would say it is a bug in Sage. Apparently, schemes don't have rich comparison implemented.",
    "created_at": "2016-05-26T12:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379040",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:9'></a>
I would say it is a bug in Sage. Apparently, schemes don't have rich comparison implemented.



---

archive/issue_comments_379041.json:
```json
{
    "body": "<a id='comment:10'></a>\nre: variable names.\n\nThe way this is handled for general affine and projective subschemes is to allow the user to specify the space that it will be embedded into (or dehomogenized into). This is better functionality than just specifying the variable names, since you can then embedded different curves into the same space.\n\nre: ambient space\n\n```\nA.<x,y,z> = AffineSpace(QQ,3)\nC = Curve([y-x^2,z-x^3])\nA == C.ambient_space()\n```\nI haven't looked at the code, but it looks like Curve assumes you are passing in elements from a polynomial ring and doesn't see if they are actually from a particular affine space and hence creates a new affine space. This is a bug. If you pass in elements of the coordinate ring of an affine space, then the curve should be in that space. It may be that you need to include an optional parameter for the space and/or perhaps have an A.curve() function.\n\none last thought: Should these curve classes inherit from affine and projective subscheme as well? This could save you a fair amount of code duplication (such as for affine_patch and projective_embedding.",
    "created_at": "2016-05-26T13:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379041",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:10'></a>
re: variable names.

The way this is handled for general affine and projective subschemes is to allow the user to specify the space that it will be embedded into (or dehomogenized into). This is better functionality than just specifying the variable names, since you can then embedded different curves into the same space.

re: ambient space

```
A.<x,y,z> = AffineSpace(QQ,3)
C = Curve([y-x^2,z-x^3])
A == C.ambient_space()
```
I haven't looked at the code, but it looks like Curve assumes you are passing in elements from a polynomial ring and doesn't see if they are actually from a particular affine space and hence creates a new affine space. This is a bug. If you pass in elements of the coordinate ring of an affine space, then the curve should be in that space. It may be that you need to include an optional parameter for the space and/or perhaps have an A.curve() function.

one last thought: Should these curve classes inherit from affine and projective subscheme as well? This could save you a fair amount of code duplication (such as for affine_patch and projective_embedding.



---

archive/issue_comments_379042.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,11 @@\n Given a curve in affine space, find its projective closure. Conversely, given a projective curve, find its affine patches with respect to the standard affine coordinate charts.\n+\n+This could be done more efficiently by using the projective_embedding/affine patches functionality for affine/projective subschemes. Currently the projective_embedding function for affine subschemes doesn't always have the right codomain:\n+\n+```\n+A.<x,y,z> = AffineSpace(3,QQ)\n+X = A.subscheme([y-x^2,z-x^3])\n+X.projective_embedding().codomain()\n+```\n+\n+so this should be addressed here, along with creating a projective_closure function for affine subschemes.\n``````\n",
    "created_at": "2016-05-29T01:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379042",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,11 @@
 Given a curve in affine space, find its projective closure. Conversely, given a projective curve, find its affine patches with respect to the standard affine coordinate charts.
+
+This could be done more efficiently by using the projective_embedding/affine patches functionality for affine/projective subschemes. Currently the projective_embedding function for affine subschemes doesn't always have the right codomain:
+
+```
+A.<x,y,z> = AffineSpace(3,QQ)
+X = A.subscheme([y-x^2,z-x^3])
+X.projective_embedding().codomain()
+```
+
+so this should be addressed here, along with creating a projective_closure function for affine subschemes.
``````




---

archive/issue_comments_379043.json:
```json
{
    "body": "Dependencies: #20697, #20698",
    "created_at": "2016-05-29T01:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379043",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

Dependencies: #20697, #20698



---

archive/issue_comments_379044.json:
```json
{
    "body": "Changing commit from \"[39dd215adb96f07bc67854c5debd1f1b49c08032](https://github.com/sagemath/sagetrac-mirror/commit/39dd215adb96f07bc67854c5debd1f1b49c08032)\" to \"[c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3](https://github.com/sagemath/sagetrac-mirror/commit/c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3)\"",
    "created_at": "2016-05-30T00:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379044",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[39dd215adb96f07bc67854c5debd1f1b49c08032](https://github.com/sagemath/sagetrac-mirror/commit/39dd215adb96f07bc67854c5debd1f1b49c08032)" to "[c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3](https://github.com/sagemath/sagetrac-mirror/commit/c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3)"



---

archive/issue_comments_379045.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n|[02349fe](https://github.com/sagemath/sagetrac-mirror/commit/02349fe0fe9b2db2c4d3c66e19cf2de5e6591636)|`20676: projective_embedding revision and projective_closure.`|\n|[5de70c9](https://github.com/sagemath/sagetrac-mirror/commit/5de70c9c1041a9aea0d4edbb66c43d82ce5bf4ef)|`20697: plane curve classes now inherit from the space curve classes.`|\n|[ef65aca](https://github.com/sagemath/sagetrac-mirror/commit/ef65acaab97ed5a1de6fa6ca9900ef942bc6f9f0)|`20676: Merge ticket 20697 into this ticket.`|\n|[9cbdab3](https://github.com/sagemath/sagetrac-mirror/commit/9cbdab3fdfa24144e1aacdf2b7c29d032f016049)|`20698: revised initialization of generic curves.`|\n|[b718afa](https://github.com/sagemath/sagetrac-mirror/commit/b718afabfb2e2233c67aca3ba92cb0150c28e100)|`20698: documentation and error formatting fixes.`|\n|[d4eb8d4](https://github.com/sagemath/sagetrac-mirror/commit/d4eb8d44b2e878582e19eafae0261b0214704a6c)|`20698: documentation spacing fixes.`|\n|[3ffc3aa](https://github.com/sagemath/sagetrac-mirror/commit/3ffc3aabc0b17be5658c69bf0b54b87f8d8ccc31)|`20676: Merge ticket 20698 into this ticket.`|\n|[c6fe840](https://github.com/sagemath/sagetrac-mirror/commit/c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3)|`20676: implemented curve-level functions.`|",
    "created_at": "2016-05-30T00:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379045",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
|[02349fe](https://github.com/sagemath/sagetrac-mirror/commit/02349fe0fe9b2db2c4d3c66e19cf2de5e6591636)|`20676: projective_embedding revision and projective_closure.`|
|[5de70c9](https://github.com/sagemath/sagetrac-mirror/commit/5de70c9c1041a9aea0d4edbb66c43d82ce5bf4ef)|`20697: plane curve classes now inherit from the space curve classes.`|
|[ef65aca](https://github.com/sagemath/sagetrac-mirror/commit/ef65acaab97ed5a1de6fa6ca9900ef942bc6f9f0)|`20676: Merge ticket 20697 into this ticket.`|
|[9cbdab3](https://github.com/sagemath/sagetrac-mirror/commit/9cbdab3fdfa24144e1aacdf2b7c29d032f016049)|`20698: revised initialization of generic curves.`|
|[b718afa](https://github.com/sagemath/sagetrac-mirror/commit/b718afabfb2e2233c67aca3ba92cb0150c28e100)|`20698: documentation and error formatting fixes.`|
|[d4eb8d4](https://github.com/sagemath/sagetrac-mirror/commit/d4eb8d44b2e878582e19eafae0261b0214704a6c)|`20698: documentation spacing fixes.`|
|[3ffc3aa](https://github.com/sagemath/sagetrac-mirror/commit/3ffc3aabc0b17be5658c69bf0b54b87f8d8ccc31)|`20676: Merge ticket 20698 into this ticket.`|
|[c6fe840](https://github.com/sagemath/sagetrac-mirror/commit/c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3)|`20676: implemented curve-level functions.`|



---

archive/issue_comments_379046.json:
```json
{
    "body": "Changing commit from \"[c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3](https://github.com/sagemath/sagetrac-mirror/commit/c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3)\" to \"[0039d7b13dad64025ef70542f407bf3af7423e1a](https://github.com/sagemath/sagetrac-mirror/commit/0039d7b13dad64025ef70542f407bf3af7423e1a)\"",
    "created_at": "2016-06-02T20:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379046",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3](https://github.com/sagemath/sagetrac-mirror/commit/c6fe8401f1ddf7d53f6af060e5db2d9766f05ed3)" to "[0039d7b13dad64025ef70542f407bf3af7423e1a](https://github.com/sagemath/sagetrac-mirror/commit/0039d7b13dad64025ef70542f407bf3af7423e1a)"



---

archive/issue_comments_379047.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[058b909](https://github.com/sagemath/sagetrac-mirror/commit/058b909d312143e883a8020dae61f74d7b888abf)|`20697: Change class names.`|\n|[5a5fe9a](https://github.com/sagemath/sagetrac-mirror/commit/5a5fe9a942ea9ba0e14039bcd4d1c9695545f035)|`20697: change \"plane_curves\" folder name to \"curves\"`|\n|[b3e8447](https://github.com/sagemath/sagetrac-mirror/commit/b3e8447d20c03a4c1970133728c49773335dbe36)|`20697: Merge with latest beta.`|\n|[3b5fdf8](https://github.com/sagemath/sagetrac-mirror/commit/3b5fdf87be6c45877ab234f60143a2891ab7aa6c)|`20697: Merge in 20698 for access to better initialization of curves.`|\n|[8541591](https://github.com/sagemath/sagetrac-mirror/commit/85415915be7bf80ae7819e8ecdf3d0b66a2ce157)|`20697: Added documentation and made curve string labels match class names.`|\n|[b918e77](https://github.com/sagemath/sagetrac-mirror/commit/b918e772276ed7ed576e8eae9936eeca9b2671cf)|`20697: documentation adjustment, and attempt to fix pickle issue.`|\n|[b380967](https://github.com/sagemath/sagetrac-mirror/commit/b3809671bae3c03fe2407471a1e908cdbdc22a00)|`20697: Missed name changes.`|\n|[54f4e62](https://github.com/sagemath/sagetrac-mirror/commit/54f4e623b5e676bc746e1f1da1aa5bb627b0826a)|`20676: Merge again with 20697.`|\n|[0039d7b](https://github.com/sagemath/sagetrac-mirror/commit/0039d7b13dad64025ef70542f407bf3af7423e1a)|`20676: Update example strings to match changes from 20697.`|",
    "created_at": "2016-06-02T20:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379047",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[058b909](https://github.com/sagemath/sagetrac-mirror/commit/058b909d312143e883a8020dae61f74d7b888abf)|`20697: Change class names.`|
|[5a5fe9a](https://github.com/sagemath/sagetrac-mirror/commit/5a5fe9a942ea9ba0e14039bcd4d1c9695545f035)|`20697: change "plane_curves" folder name to "curves"`|
|[b3e8447](https://github.com/sagemath/sagetrac-mirror/commit/b3e8447d20c03a4c1970133728c49773335dbe36)|`20697: Merge with latest beta.`|
|[3b5fdf8](https://github.com/sagemath/sagetrac-mirror/commit/3b5fdf87be6c45877ab234f60143a2891ab7aa6c)|`20697: Merge in 20698 for access to better initialization of curves.`|
|[8541591](https://github.com/sagemath/sagetrac-mirror/commit/85415915be7bf80ae7819e8ecdf3d0b66a2ce157)|`20697: Added documentation and made curve string labels match class names.`|
|[b918e77](https://github.com/sagemath/sagetrac-mirror/commit/b918e772276ed7ed576e8eae9936eeca9b2671cf)|`20697: documentation adjustment, and attempt to fix pickle issue.`|
|[b380967](https://github.com/sagemath/sagetrac-mirror/commit/b3809671bae3c03fe2407471a1e908cdbdc22a00)|`20697: Missed name changes.`|
|[54f4e62](https://github.com/sagemath/sagetrac-mirror/commit/54f4e623b5e676bc746e1f1da1aa5bb627b0826a)|`20676: Merge again with 20697.`|
|[0039d7b](https://github.com/sagemath/sagetrac-mirror/commit/0039d7b13dad64025ef70542f407bf3af7423e1a)|`20676: Update example strings to match changes from 20697.`|



---

archive/issue_comments_379048.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-06-02T20:54:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379048",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_379049.json:
```json
{
    "body": "Reviewer: Ben Hutz",
    "created_at": "2016-06-04T13:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379049",
    "user": "https://github.com/bhutz"
}
```

Reviewer: Ben Hutz



---

archive/issue_comments_379050.json:
```json
{
    "body": "<a id='comment:15'></a>\n- line 1916:\n\n`R.ideal([R(f) for f in self.defining_polynomials()])`\ncould be replaced with\n`self.defining_ideal()`\n\n- projective closure should take projective space parameter\n\n```\nA.<x,y> = AffineSpace(QQ, 2)\nP.<u,v,w>=ProjectiveSpace(QQ,2)\nC = Curve([y-x^2], A)\nD=C.projective_closure(1,P)\n```\n\n- Affine patch should take affine space parameter\n\n```\nA.<x,y> = AffineSpace(QQ, 2)\nP.<u,v,w>=ProjectiveSpace(QQ,2)\nC = Curve([u^2-v^2], P)\nC.affine_patch(1,A)\n```\n\n- Affine patch should have a default patch and that default should match up with the projective closure default\n\n```\nA.<x,y,z> = AffineSpace(GF(3), 3)\nC = Curve([y-x^2,z-x^3], A)\nD=C.projective_closure()\nD.affine_patch()==C\n```\n\n- you should mention in the doc for projective embedding that the image is the projective closure",
    "created_at": "2016-06-04T13:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379050",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:15'></a>
- line 1916:

`R.ideal([R(f) for f in self.defining_polynomials()])`
could be replaced with
`self.defining_ideal()`

- projective closure should take projective space parameter

```
A.<x,y> = AffineSpace(QQ, 2)
P.<u,v,w>=ProjectiveSpace(QQ,2)
C = Curve([y-x^2], A)
D=C.projective_closure(1,P)
```

- Affine patch should take affine space parameter

```
A.<x,y> = AffineSpace(QQ, 2)
P.<u,v,w>=ProjectiveSpace(QQ,2)
C = Curve([u^2-v^2], P)
C.affine_patch(1,A)
```

- Affine patch should have a default patch and that default should match up with the projective closure default

```
A.<x,y,z> = AffineSpace(GF(3), 3)
C = Curve([y-x^2,z-x^3], A)
D=C.projective_closure()
D.affine_patch()==C
```

- you should mention in the doc for projective embedding that the image is the projective closure



---

archive/issue_comments_379051.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-06-04T13:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379051",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_379052.json:
```json
{
    "body": "<a id='comment:16'></a>\nerr...having a default for affine_patch() doesn't really make sense, so ignore that part.",
    "created_at": "2016-06-04T14:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379052",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:16'></a>
err...having a default for affine_patch() doesn't really make sense, so ignore that part.



---

archive/issue_comments_379053.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[9262ae5](https://github.com/sagemath/sagetrac-mirror/commit/9262ae5923e1c14192b87314288902d50e08b104)|`20676: changes from review, and spacing fixes.`|",
    "created_at": "2016-06-04T22:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379053",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[9262ae5](https://github.com/sagemath/sagetrac-mirror/commit/9262ae5923e1c14192b87314288902d50e08b104)|`20676: changes from review, and spacing fixes.`|



---

archive/issue_comments_379054.json:
```json
{
    "body": "Changing commit from \"[0039d7b13dad64025ef70542f407bf3af7423e1a](https://github.com/sagemath/sagetrac-mirror/commit/0039d7b13dad64025ef70542f407bf3af7423e1a)\" to \"[9262ae5923e1c14192b87314288902d50e08b104](https://github.com/sagemath/sagetrac-mirror/commit/9262ae5923e1c14192b87314288902d50e08b104)\"",
    "created_at": "2016-06-04T22:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379054",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[0039d7b13dad64025ef70542f407bf3af7423e1a](https://github.com/sagemath/sagetrac-mirror/commit/0039d7b13dad64025ef70542f407bf3af7423e1a)" to "[9262ae5923e1c14192b87314288902d50e08b104](https://github.com/sagemath/sagetrac-mirror/commit/9262ae5923e1c14192b87314288902d50e08b104)"



---

archive/issue_comments_379055.json:
```json
{
    "body": "Changing keywords from \"\" to \"gsoc2016\".",
    "created_at": "2016-06-04T22:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379055",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

Changing keywords from "" to "gsoc2016".



---

archive/issue_comments_379056.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-06-04T22:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379056",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_379057.json:
```json
{
    "body": "Changing commit from \"[9262ae5923e1c14192b87314288902d50e08b104](https://github.com/sagemath/sagetrac-mirror/commit/9262ae5923e1c14192b87314288902d50e08b104)\" to \"[91bc630bfa994e8a2dfa587cae62bda2afb475a5](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)\"",
    "created_at": "2016-06-07T23:07:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379057",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[9262ae5923e1c14192b87314288902d50e08b104](https://github.com/sagemath/sagetrac-mirror/commit/9262ae5923e1c14192b87314288902d50e08b104)" to "[91bc630bfa994e8a2dfa587cae62bda2afb475a5](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)"



---

archive/issue_comments_379058.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[91bc630](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)|`20676: Merge this ticket with 7.3 beta3.`|",
    "created_at": "2016-06-07T23:07:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379058",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[91bc630](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)|`20676: Merge this ticket with 7.3 beta3.`|



---

archive/issue_comments_379059.json:
```json
{
    "body": "<a id='comment:20'></a>\nthis looks good now",
    "created_at": "2016-06-09T01:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379059",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:20'></a>
this looks good now



---

archive/issue_comments_379060.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-06-09T01:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379060",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_063280.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-09T20:28:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20676#event-63280"
}
```



---

archive/issue_comments_379061.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-06-09T20:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379061",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_379062.json:
```json
{
    "body": "Changing branch from \"[u/gjorgenson/ticket/20676](https://github.com/sagemath/sagetrac-mirror/tree/u/gjorgenson/ticket/20676)\" to \"[91bc630bfa994e8a2dfa587cae62bda2afb475a5](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)\"",
    "created_at": "2016-06-09T20:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20676#issuecomment-379062",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/gjorgenson/ticket/20676](https://github.com/sagemath/sagetrac-mirror/tree/u/gjorgenson/ticket/20676)" to "[91bc630bfa994e8a2dfa587cae62bda2afb475a5](https://github.com/sagemath/sagetrac-mirror/commit/91bc630bfa994e8a2dfa587cae62bda2afb475a5)"
