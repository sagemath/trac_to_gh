# Issue 20692: Add sage-apply-patches helper script for use in spkg-install scripts

archive/issues_020455.json:
```json
{
    "assignees": [],
    "body": "This adds a new script to `build/bin` called `sage-apply-patches` which implements the same code that is copy/pasted through many of the `spkg-install` scripts (albeit often inconsistently). The patches in `build/pkgs/PKGNAME/patches` are now applied automatically.\n\nI'm not attached to any of the details of how the script works--the implementation was designed mostly to make it easiest to automatically replace the existing repeated code snippet with minimal effort.\n\nBranch: **[b6b33cd](https://github.com/sagemath/sagetrac-mirror/commit/b6b33cdbb33ba7eb856cb283c296250976e1638c)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Erik Bray**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20692_\n\n",
    "closed_at": "2016-11-30T19:36:11Z",
    "created_at": "2016-05-27T11:33:29Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add sage-apply-patches helper script for use in spkg-install scripts",
    "type": "issue",
    "updated_at": "2016-12-02T10:37:29Z",
    "url": "https://github.com/sagemath/sage/issues/20692",
    "user": "https://github.com/embray"
}
```
This adds a new script to `build/bin` called `sage-apply-patches` which implements the same code that is copy/pasted through many of the `spkg-install` scripts (albeit often inconsistently). The patches in `build/pkgs/PKGNAME/patches` are now applied automatically.

I'm not attached to any of the details of how the script works--the implementation was designed mostly to make it easiest to automatically replace the existing repeated code snippet with minimal effort.

Branch: **[b6b33cd](https://github.com/sagemath/sagetrac-mirror/commit/b6b33cdbb33ba7eb856cb283c296250976e1638c)**

Reviewer: **Jeroen Demeyer**

Author: **Erik Bray**

_Issue created by migration from https://trac.sagemath.org/ticket/20692_





---

archive/issue_events_263576.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-27T11:33:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263576"
}
```



---

archive/issue_events_263577.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-27T11:33:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263577"
}
```



---

archive/issue_events_263578.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-27T11:33:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263578"
}
```



---

archive/issue_events_263579.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-27T11:33:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263579"
}
```



---

archive/issue_events_263580.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-27T11:33:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263580"
}
```



---

archive/issue_comments_301950.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nSeems I have to undust my `bash` scripting skills...\n\nWhy is it an error if there are no patches to apply? I would remove\n\n```\nif [[ -r \"${patches[0]}\" ]]; then\nelse\n    >&2 echo \"No patch files found in $patchdir\"\n    exit 1\nfi\n```\nand just apply all patches, which may be the empty set.",
    "created_at": "2016-05-27T15:06:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301950",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'>Comment 2:</a>
Seems I have to undust my `bash` scripting skills...

Why is it an error if there are no patches to apply? I would remove

```
if [[ -r "${patches[0]}" ]]; then
else
    >&2 echo "No patch files found in $patchdir"
    exit 1
fi
```
and just apply all patches, which may be the empty set.



---

archive/issue_comments_301951.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nA minor thing: I would prefer to remove the `-pNUM` option. It's better if we consistently use `-p1` in all cases. That's also how `git` generates its patches.",
    "created_at": "2016-05-27T15:07:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301951",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'>Comment 3:</a>
A minor thing: I would prefer to remove the `-pNUM` option. It's better if we consistently use `-p1` in all cases. That's also how `git` generates its patches.



---

archive/issue_comments_301952.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nI don't get this:\n\n```\nand it is assumed that the patches are being applied from\nthe root of the package source\n```",
    "created_at": "2016-05-27T15:10:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301952",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'>Comment 4:</a>
I don't get this:

```
and it is assumed that the patches are being applied from
the root of the package source
```



---

archive/issue_comments_301953.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nWhy not always use the option `--no-backup-if-mismatch` instead of only for PARI?",
    "created_at": "2016-05-27T15:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301953",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'>Comment 5:</a>
Why not always use the option `--no-backup-if-mismatch` instead of only for PARI?



---

archive/issue_events_263581.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-27T15:12:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263581"
}
```



---

archive/issue_events_263582.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-27T15:12:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263582"
}
```



---

archive/issue_comments_301954.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2016-05-27T15:12:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301954",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_301955.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nFollowing up on [comment:2]: it's very useful to support an empty set of patches. For example, when upgrading a package, it can happen that all patches need to be removed. You don't want that to break the build. That is also the reason why many packages have code to apply patches when they don't have patches. I would not remove such code since it allows easily adding a new patch. Ideally, every `spkg-install` script would call `spkg-apply-patches`.",
    "created_at": "2016-05-27T15:17:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301955",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'>Comment 7:</a>
Following up on [comment:2]: it's very useful to support an empty set of patches. For example, when upgrading a package, it can happen that all patches need to be removed. You don't want that to break the build. That is also the reason why many packages have code to apply patches when they don't have patches. I would not remove such code since it allows easily adding a new patch. Ideally, every `spkg-install` script would call `spkg-apply-patches`.



---

archive/issue_comments_301956.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@jdemeyer](#comment%3A7):\n> Following up on [comment:2]: it's very useful to support an empty set of patches. For example, when upgrading a package, it can happen that all patches need to be removed. You don't want that to break the build. That is also the reason why many packages have code to apply patches when they don't have patches. I would not remove such code since it allows easily adding a new patch. Ideally, every `spkg-install` script would call `spkg-apply-patches`.\n\nI guess I was thinking it was wasteful to call a process (especially on Windows where process creation is much slower) when it's not needed.  Granted, when this was inline in every script it didn't require a process creation (more on that in a followup).  I think if someone wants to add a patch to a package they should explicitly add `spkg-appy-patches` as well.  If they forget to do that, well, then they clearly didn't test that their patch applies at build time :)\n\nAs for it being an error when no patches are found, I have no strong feelings.  I liked that it was explicit, but it could just as will either print a message, or go completely silent.\n\n> A minor thing: I would prefer to remove the -pNUM option. It's better if we consistently use -p1 in all cases. That's also how git generates its patches.\n\nThat's fine by me.  I think there was one case, maybe two where it was needed, but it would be just as easy to update those patch files and keep things consistent throughout.\n\n> Why not always use the option `--no-backup-if-mismatch` instead of only for PARI?\n\nI figured maybe there was a reason to prefer to keep backups in general.  Would be fine with me to apply in general though.  Previously there was one other case where additional arguments had to be passed to `patch`, but then I realized that package had no patches anymore.\n\n> I don't get this:\n\n   and it is assumed that the patches are being applied from\n   the root of the package source\n\nMeaning the patches are applied after `cd`-ing into the upstream source, hence the default path to search for patches being `../patches`.  No reason it has to be that way but it was the most minimal change from the existing code.",
    "created_at": "2016-05-27T16:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301956",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@jdemeyer](#comment%3A7):
> Following up on [comment:2]: it's very useful to support an empty set of patches. For example, when upgrading a package, it can happen that all patches need to be removed. You don't want that to break the build. That is also the reason why many packages have code to apply patches when they don't have patches. I would not remove such code since it allows easily adding a new patch. Ideally, every `spkg-install` script would call `spkg-apply-patches`.

I guess I was thinking it was wasteful to call a process (especially on Windows where process creation is much slower) when it's not needed.  Granted, when this was inline in every script it didn't require a process creation (more on that in a followup).  I think if someone wants to add a patch to a package they should explicitly add `spkg-appy-patches` as well.  If they forget to do that, well, then they clearly didn't test that their patch applies at build time :)

As for it being an error when no patches are found, I have no strong feelings.  I liked that it was explicit, but it could just as will either print a message, or go completely silent.

> A minor thing: I would prefer to remove the -pNUM option. It's better if we consistently use -p1 in all cases. That's also how git generates its patches.

That's fine by me.  I think there was one case, maybe two where it was needed, but it would be just as easy to update those patch files and keep things consistent throughout.

> Why not always use the option `--no-backup-if-mismatch` instead of only for PARI?

I figured maybe there was a reason to prefer to keep backups in general.  Would be fine with me to apply in general though.  Previously there was one other case where additional arguments had to be passed to `patch`, but then I realized that package had no patches anymore.

> I don't get this:

   and it is assumed that the patches are being applied from
   the root of the package source

Meaning the patches are applied after `cd`-ing into the upstream source, hence the default path to search for patches being `../patches`.  No reason it has to be that way but it was the most minimal change from the existing code.



---

archive/issue_comments_301957.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nAn alternative I considered to adding a new script was to create a little library of functions that is sourced in every spkg-install.  It would include `sage-apply-patches` reimplemented as a function, along with a few other bits that are repeated a lot.  This would save on process creations too.\n\nI'd still be happy to revisit that idea too if it sounds good, but right now I just wanted to focus on the patch thing since that's what was irking me specifically :)",
    "created_at": "2016-05-27T16:06:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301957",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'>Comment 9:</a>
An alternative I considered to adding a new script was to create a little library of functions that is sourced in every spkg-install.  It would include `sage-apply-patches` reimplemented as a function, along with a few other bits that are repeated a lot.  This would save on process creations too.

I'd still be happy to revisit that idea too if it sounds good, but right now I just wanted to focus on the patch thing since that's what was irking me specifically :)



---

archive/issue_comments_301958.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@embray](#comment%3A8):\n> I guess I was thinking it was wasteful to call a process (especially on Windows where process creation is much slower) when it's not needed.\n\nHow much slower is it really? Surely it's negligible compared to the time to build Sage.\n\n> I think if someone wants to add a patch to a package they should explicitly add `spkg-appy-patches` as well.\n\nThat's really annoying. Please keep the call to `spkg-apply-patches` even when there are no patches.",
    "created_at": "2016-05-28T20:53:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301958",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@embray](#comment%3A8):
> I guess I was thinking it was wasteful to call a process (especially on Windows where process creation is much slower) when it's not needed.

How much slower is it really? Surely it's negligible compared to the time to build Sage.

> I think if someone wants to add a patch to a package they should explicitly add `spkg-appy-patches` as well.

That's really annoying. Please keep the call to `spkg-apply-patches` even when there are no patches.



---

archive/issue_comments_301959.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nIf you feel that strongly about it. I think it's pointless.  Especially considering that it was already inconsistent.  Instead you should be asking me to put `sage-apply-patches` in every `spkg-install` that didn't have it before :)",
    "created_at": "2016-05-30T08:57:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301959",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'>Comment 11:</a>
If you feel that strongly about it. I think it's pointless.  Especially considering that it was already inconsistent.  Instead you should be asking me to put `sage-apply-patches` in every `spkg-install` that didn't have it before :)



---

archive/issue_comments_301960.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@embray](#comment%3A11):\n> Instead you should be asking me to put `sage-apply-patches` in every `spkg-install` that didn't have it before :)\n\nWell, that's essentially what I wrote in [comment:7].\n\nAnd yes, I feel strongly about because I don't want to always add/remove the call to `spkg-apply-patches` depending on whether or not the number of patches to apply equals zero.\n\nDetail: for consistency, I would prefer the script to be called `spkg-apply-patches` instead of `sage-apply-patches`.",
    "created_at": "2016-05-30T09:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301960",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@embray](#comment%3A11):
> Instead you should be asking me to put `sage-apply-patches` in every `spkg-install` that didn't have it before :)

Well, that's essentially what I wrote in [comment:7].

And yes, I feel strongly about because I don't want to always add/remove the call to `spkg-apply-patches` depending on whether or not the number of patches to apply equals zero.

Detail: for consistency, I would prefer the script to be called `spkg-apply-patches` instead of `sage-apply-patches`.



---

archive/issue_comments_301961.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nWhat would that be consistent with?  Every other script in `build/bin` starts with `sage-`.  In fact very nearly every, if not every executable installed by sage starts with `sage-` which is good and consistent, and completely free of potential for overlap with anything else.",
    "created_at": "2016-05-30T09:40:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301961",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'>Comment 13:</a>
What would that be consistent with?  Every other script in `build/bin` starts with `sage-`.  In fact very nearly every, if not every executable installed by sage starts with `sage-` which is good and consistent, and completely free of potential for overlap with anything else.



---

archive/issue_comments_301962.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nConsistent with `spkg-install`, `spkg-check`, `spkg-src`. Basically, anything related to building Sage packages.",
    "created_at": "2016-05-30T09:46:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301962",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'>Comment 14:</a>
Consistent with `spkg-install`, `spkg-check`, `spkg-src`. Basically, anything related to building Sage packages.



---

archive/issue_comments_301963.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nThose scripts are only ever in spkg directories though and are specific to each spkg. They are not in bin/ paths added to `$PATH`.  This is a helper script used in installation like the rest in build/bin, all of which (sensibly) start with `sage-`.\n\nI'm probably also going to add a `sage-spkg-python` (or something, I don't care what it's called) that will be exec'd by the `spkg-install` for most Python packages since the vast majority of them are cookie-cutter anyways (especially if you also want to have every one of them calling `whatever-apply-patches` by default).  This would be to provide a solution for #16897 which also calls out this fact.  (I think it's important for every package to have a file called `spkg-install`, but it's fine if its sole function is to call some other generic script).",
    "created_at": "2016-05-30T09:53:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301963",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'>Comment 15:</a>
Those scripts are only ever in spkg directories though and are specific to each spkg. They are not in bin/ paths added to `$PATH`.  This is a helper script used in installation like the rest in build/bin, all of which (sensibly) start with `sage-`.

I'm probably also going to add a `sage-spkg-python` (or something, I don't care what it's called) that will be exec'd by the `spkg-install` for most Python packages since the vast majority of them are cookie-cutter anyways (especially if you also want to have every one of them calling `whatever-apply-patches` by default).  This would be to provide a solution for #16897 which also calls out this fact.  (I think it's important for every package to have a file called `spkg-install`, but it's fine if its sole function is to call some other generic script).



---

archive/issue_comments_301964.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nFor the record: I just wanted to comment over the name, I'm not going to reject this patch over such bikeshedding.",
    "created_at": "2016-05-30T09:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301964",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'>Comment 16:</a>
For the record: I just wanted to comment over the name, I'm not going to reject this patch over such bikeshedding.



---

archive/issue_comments_301965.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nWhile I am OK with the stuff as it is, I have a bold suggestion for further work: may be it should be put in `sage-spkg` and always be run. We already leave it when there is no patches anymore. What would be the overhead of always running it?",
    "created_at": "2016-05-30T10:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301965",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'>Comment 17:</a>
While I am OK with the stuff as it is, I have a bold suggestion for further work: may be it should be put in `sage-spkg` and always be run. We already leave it when there is no patches anymore. What would be the overhead of always running it?



---

archive/issue_comments_301966.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [@kiwifb](#comment%3A17):\n> may be it should be put in `sage-spkg` and always be run.\n\nNot easily. We need to guess in which source directory to run the script. Usually, it's `src` but not always.",
    "created_at": "2016-05-30T10:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301966",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [@kiwifb](#comment%3A17):
> may be it should be put in `sage-spkg` and always be run.

Not easily. We need to guess in which source directory to run the script. Usually, it's `src` but not always.



---

archive/issue_comments_301967.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@jdemeyer](#comment%3A18):\n> Replying to [@kiwifb](#comment%3A17):\n> > may be it should be put in `sage-spkg` and always be run.\n\n> \n> Not easily. We need to guess in which source directory to run the script. Usually, it's `src` but not always.\n\nTricky. I didn't remember we had those outliers.",
    "created_at": "2016-05-30T11:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301967",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@jdemeyer](#comment%3A18):
> Replying to [@kiwifb](#comment%3A17):
> > may be it should be put in `sage-spkg` and always be run.

> 
> Not easily. We need to guess in which source directory to run the script. Usually, it's `src` but not always.

Tricky. I didn't remember we had those outliers.



---

archive/issue_comments_301968.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nLet me think about that a bit more though.  If it were done in `sage-spkg` it would do away with the need for a separate script entirely, and would cut down that much more on the duplication which is what I want.\n\nOne possibility would be to rewrite the patch files to include the source directory in the paths, but that could be annoying and error-prone.  The other would be to standardize `src`.  I knew there were outliers but I never looked into why.  Is there really no way those could be changed?",
    "created_at": "2016-05-30T11:18:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301968",
    "user": "https://github.com/embray"
}
```

<a id='comment:20'>Comment 20:</a>
Let me think about that a bit more though.  If it were done in `sage-spkg` it would do away with the need for a separate script entirely, and would cut down that much more on the duplication which is what I want.

One possibility would be to rewrite the patch files to include the source directory in the paths, but that could be annoying and error-prone.  The other would be to standardize `src`.  I knew there were outliers but I never looked into why.  Is there really no way those could be changed?



---

archive/issue_comments_301969.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\n`sage-spkg` contains the following:\n\n```\n     # Strip file extension from the archive file and hope (as per\n     # automake standards) that this is the same as the directory name\n     # inside; move the directory to \"src\".  (This goes wrong for\n     # upstream package archives that have been renamed to appease some\n     # other Sage script, such as \"latte-int\", whose archive is renamed\n     # to \"latte_int\".)\n     mv \"$(echo \"$PKG_NAME_UPSTREAM\" | sed 's/\\.zip$//g;s/\\.tgz$//g;s/\\.tar\\.    gz$//g;s/\\.tar\\.xz$//g;s/\\.tar\\.lz$//g;s/\\.tar\\.bz2$//g;s/\\.tar$//g')\"* src\n```\n\nMaybe this should be redone.  There are a number of ways it might be done differently.  One possibility is that it could be made `sage-uncompress-spkg`'s job to always extract to `src`.  It could handle checking for the top-level directory in the archive and extracting it instead as `src`.  For those handful of packages (are there any? I suspect probably...) that don't have a top-level directory it would create `src` and extract all the archive contents into it.",
    "created_at": "2016-05-30T11:31:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301969",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'>Comment 21:</a>
`sage-spkg` contains the following:

```
     # Strip file extension from the archive file and hope (as per
     # automake standards) that this is the same as the directory name
     # inside; move the directory to "src".  (This goes wrong for
     # upstream package archives that have been renamed to appease some
     # other Sage script, such as "latte-int", whose archive is renamed
     # to "latte_int".)
     mv "$(echo "$PKG_NAME_UPSTREAM" | sed 's/\.zip$//g;s/\.tgz$//g;s/\.tar\.    gz$//g;s/\.tar\.xz$//g;s/\.tar\.lz$//g;s/\.tar\.bz2$//g;s/\.tar$//g')"* src
```

Maybe this should be redone.  There are a number of ways it might be done differently.  One possibility is that it could be made `sage-uncompress-spkg`'s job to always extract to `src`.  It could handle checking for the top-level directory in the archive and extracting it instead as `src`.  For those handful of packages (are there any? I suspect probably...) that don't have a top-level directory it would create `src` and extract all the archive contents into it.



---

archive/issue_comments_301970.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nThis is getting out of the original scope (and I am sorry to have started it) but it would be a good idea to have something more robust for unpacking in a standard folder. May be we should just get this in now and move that idea to another ticket?",
    "created_at": "2016-05-30T11:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301970",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:22'>Comment 22:</a>
This is getting out of the original scope (and I am sorry to have started it) but it would be a good idea to have something more robust for unpacking in a standard folder. May be we should just get this in now and move that idea to another ticket?



---

archive/issue_comments_301971.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nReplying to [@kiwifb](#comment%3A22):\n> This is getting out of the original scope (and I am sorry to have started it) but it would be a good idea to have something more robust for unpacking in a standard folder. May be we should just get this in now and move that idea to another ticket?\n\nI was going to suggest the same.  Though I might address the subject of extracting to a standard location before coming back to and reworking this ticket.  I've gone through the list of spkgs that *don't* wind up with their sources in `src` and in each case there's no good reason really, except that the hack above doesn't work for it (or the last time the file was touched predates that hack).\n\nI think a patch to `sage-uncompress-spkg` would be a good idea and I'll put something to that effect in a separate ticket.",
    "created_at": "2016-05-30T11:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301971",
    "user": "https://github.com/embray"
}
```

<a id='comment:23'>Comment 23:</a>
Replying to [@kiwifb](#comment%3A22):
> This is getting out of the original scope (and I am sorry to have started it) but it would be a good idea to have something more robust for unpacking in a standard folder. May be we should just get this in now and move that idea to another ticket?

I was going to suggest the same.  Though I might address the subject of extracting to a standard location before coming back to and reworking this ticket.  I've gone through the list of spkgs that *don't* wind up with their sources in `src` and in each case there's no good reason really, except that the hack above doesn't work for it (or the last time the file was touched predates that hack).

I think a patch to `sage-uncompress-spkg` would be a good idea and I'll put something to that effect in a separate ticket.



---

archive/issue_comments_301972.json:
```json
{
    "body": "Dependencies: **#20721**",
    "created_at": "2016-05-30T17:14:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301972",
    "user": "https://github.com/embray"
}
```

Dependencies: **#20721**



---

archive/issue_comments_301973.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI think #20721, or something like it, should be a prerequisite to this ticket (or any like it depending on how much I end up reworking this).",
    "created_at": "2016-05-30T17:14:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301973",
    "user": "https://github.com/embray"
}
```

<a id='comment:24'>Comment 24:</a>
I think #20721, or something like it, should be a prerequisite to this ticket (or any like it depending on how much I end up reworking this).



---

archive/issue_comments_301974.json:
```json
{
    "body": "Changed dependencies from **#20721** to **#20721 20837**",
    "created_at": "2016-06-16T15:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301974",
    "user": "https://github.com/embray"
}
```

Changed dependencies from **#20721** to **#20721 20837**



---

archive/issue_comments_301975.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\n#20837 cleans up the handful of spkgs that don't conform to a format where calling `patch -p1 < ../patches/*.patch` should work from within the source root.\n\nThen we can move forward on appling `sage-apply-patches` by default on all spkgs.",
    "created_at": "2016-06-16T15:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301975",
    "user": "https://github.com/embray"
}
```

<a id='comment:25'>Comment 25:</a>
#20837 cleans up the handful of spkgs that don't conform to a format where calling `patch -p1 < ../patches/*.patch` should work from within the source root.

Then we can move forward on appling `sage-apply-patches` by default on all spkgs.



---

archive/issue_comments_301976.json:
```json
{
    "body": "Changed dependencies from **#20721 20837** to **#20721, #20837**",
    "created_at": "2016-06-25T05:56:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301976",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#20721 20837** to **#20721, #20837**



---

archive/issue_comments_301977.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nWhat remains to be done for this ticket?\nWould be good to use this for #20892.",
    "created_at": "2016-06-28T04:02:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301977",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'>Comment 27:</a>
What remains to be done for this ticket?
Would be good to use this for #20892.



---

archive/issue_comments_301978.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nMainly: `sage-apply-patches` needs to be changed to fail quietly if no patches are found (I think I already did this; might still be on a local branch)\n\nThen remove all, or almost all calls to `sage-apply-patches` from individual `spkg-install` scripts, and instead call it on all packages as a standard step in `sage-spkg`.\n\nI can get this done soon.",
    "created_at": "2016-06-28T08:49:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301978",
    "user": "https://github.com/embray"
}
```

<a id='comment:28'>Comment 28:</a>
Mainly: `sage-apply-patches` needs to be changed to fail quietly if no patches are found (I think I already did this; might still be on a local branch)

Then remove all, or almost all calls to `sage-apply-patches` from individual `spkg-install` scripts, and instead call it on all packages as a standard step in `sage-spkg`.

I can get this done soon.



---

archive/issue_comments_301979.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nStrange, I thought I rebased this.  Maybe I just forgot to push.",
    "created_at": "2016-07-04T09:32:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301979",
    "user": "https://github.com/embray"
}
```

<a id='comment:29'>Comment 29:</a>
Strange, I thought I rebased this.  Maybe I just forgot to push.



---

archive/issue_comments_301980.json:
```json
{
    "body": "Changed dependencies from **#20721, #20837** to **#20721, #20837, #20933**",
    "created_at": "2016-07-04T10:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301980",
    "user": "https://github.com/embray"
}
```

Changed dependencies from **#20721, #20837** to **#20721, #20837, #20933**



---

archive/issue_comments_301981.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nTurns out the patches for MathJax needed a bit more tweaking, as they were not uniform with the other packages.",
    "created_at": "2016-07-04T10:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301981",
    "user": "https://github.com/embray"
}
```

<a id='comment:30'>Comment 30:</a>
Turns out the patches for MathJax needed a bit more tweaking, as they were not uniform with the other packages.



---

archive/issue_comments_301982.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nShould there be a way to control the order in which patches are applied?\nFor example Debian uses a file \"series\" that controls this. See for example #20901, for which I'd like to lift the patches from debian.",
    "created_at": "2016-07-07T05:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301982",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'>Comment 31:</a>
Should there be a way to control the order in which patches are applied?
For example Debian uses a file "series" that controls this. See for example #20901, for which I'd like to lift the patches from debian.



---

archive/issue_comments_301983.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nCould we just prefix the patch filenames with numbers?",
    "created_at": "2016-07-07T09:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301983",
    "user": "https://github.com/embray"
}
```

<a id='comment:32'>Comment 32:</a>
Could we just prefix the patch filenames with numbers?



---

archive/issue_comments_301984.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nReplying to [@embray](#comment%3A32):\n> Could we just prefix the patch filenames with numbers?\n\n+1 that's the easiest way to get order.",
    "created_at": "2016-07-07T10:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301984",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:33'>Comment 33:</a>
Replying to [@embray](#comment%3A32):
> Could we just prefix the patch filenames with numbers?

+1 that's the easiest way to get order.



---

archive/issue_comments_301985.json:
```json
{
    "body": "Changed commit from **[29bd199](https://github.com/sagemath/sagetrac-mirror/commit/29bd19903b16289c178e9468194318e5d1017dad)** to **[2c1ec4f](https://github.com/sagemath/sagetrac-mirror/commit/2c1ec4f6d168d43c3cde20b5b3b7fcb39450b717)**",
    "created_at": "2016-08-16T13:25:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301985",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[29bd199](https://github.com/sagemath/sagetrac-mirror/commit/29bd19903b16289c178e9468194318e5d1017dad)** to **[2c1ec4f](https://github.com/sagemath/sagetrac-mirror/commit/2c1ec4f6d168d43c3cde20b5b3b7fcb39450b717)**



---

archive/issue_comments_301986.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/589144877739dd0c9b491ca210d458e707af8151\">5891448</a></td><td><code>Clean up patching of rubiks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18139d85c47cd9c6a6d1ca14020f34c00cfa4e0d\">18139d8</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a46a816ed30a3da4952b6094599836e4c3ce3398\">a46a816</a></td><td><code>Fix accidental duplication of patch_subdir.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54589594446ca0571cebc67dd7d4dc15c4c1a693\">5458959</a></td><td><code>Forgot to change this to loop over the full list when I made $patches into a list.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39645a98d1271dc416a9b3eaf67ae90e7b36f196\">39645a9</a></td><td><code>Mathjax doesn't have a source directory to cd into, so uses a different default patch path from most packages.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78a151b3fa1d2ef100589c488987dc3e240e2e37\">78a151b</a></td><td><code>None of these packages currently have patches to apply.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d15fb437a2a59ff3896057048514bd2a6a991b69\">d15fb43</a></td><td><code>Add license notice.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca832e3395c923302f4b82c32770b9eed79c2742\">ca832e3</a></td><td><code>Warn but don't fail if there are no patches to apply</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c1ec4f6d168d43c3cde20b5b3b7fcb39450b717\">2c1ec4f</a></td><td><code>Apply sage-apply-patches standard on all packages during spkg-install</code></td></tr></table>\n",
    "created_at": "2016-08-16T13:25:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301986",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:34'>Comment 34:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/589144877739dd0c9b491ca210d458e707af8151">5891448</a></td><td><code>Clean up patching of rubiks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18139d85c47cd9c6a6d1ca14020f34c00cfa4e0d">18139d8</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a46a816ed30a3da4952b6094599836e4c3ce3398">a46a816</a></td><td><code>Fix accidental duplication of patch_subdir.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54589594446ca0571cebc67dd7d4dc15c4c1a693">5458959</a></td><td><code>Forgot to change this to loop over the full list when I made $patches into a list.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39645a98d1271dc416a9b3eaf67ae90e7b36f196">39645a9</a></td><td><code>Mathjax doesn't have a source directory to cd into, so uses a different default patch path from most packages.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78a151b3fa1d2ef100589c488987dc3e240e2e37">78a151b</a></td><td><code>None of these packages currently have patches to apply.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d15fb437a2a59ff3896057048514bd2a6a991b69">d15fb43</a></td><td><code>Add license notice.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca832e3395c923302f4b82c32770b9eed79c2742">ca832e3</a></td><td><code>Warn but don't fail if there are no patches to apply</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c1ec4f6d168d43c3cde20b5b3b7fcb39450b717">2c1ec4f</a></td><td><code>Apply sage-apply-patches standard on all packages during spkg-install</code></td></tr></table>




---

archive/issue_comments_301987.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nLast I poked at this not all the dependencies were satisfied.  Now they are, and I have rebased the branch again on develop.\n\nJust did a test build of this on Linux and everything (modulo optional packages which were not tested) works, but YMMV?",
    "created_at": "2016-08-16T13:27:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301987",
    "user": "https://github.com/embray"
}
```

<a id='comment:35'>Comment 35:</a>
Last I poked at this not all the dependencies were satisfied.  Now they are, and I have rebased the branch again on develop.

Just did a test build of this on Linux and everything (modulo optional packages which were not tested) works, but YMMV?



---

archive/issue_events_263583.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-16T13:27:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263583"
}
```



---

archive/issue_events_263584.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-16T13:27:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263584"
}
```



---

archive/issue_events_263585.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-16T13:28:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263585"
}
```



---

archive/issue_events_263586.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-16T13:28:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263586"
}
```



---

archive/issue_comments_301988.json:
```json
{
    "body": "Changed dependencies from **#20721, #20837, #20933** to **#21103**",
    "created_at": "2016-08-16T13:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301988",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#20721, #20837, #20933** to **#21103**



---

archive/issue_comments_301989.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nThis should still depend on #21103.",
    "created_at": "2016-08-16T13:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301989",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'>Comment 37:</a>
This should still depend on #21103.



---

archive/issue_comments_301990.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nNote that I might look at #21103 and this ticket, but not right now since I'm working on #20218 and #21256.",
    "created_at": "2016-08-16T13:29:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301990",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'>Comment 38:</a>
Note that I might look at #21103 and this ticket, but not right now since I'm working on #20218 and #21256.



---

archive/issue_comments_301991.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nReplying to [@embray](#comment%3A9):\n> An alternative I considered to adding a new script was to create a little library of functions that is sourced in every spkg-install.  It would include `sage-apply-patches` reimplemented as a function, along with a few other bits that are repeated a lot.  This would save on process creations too.\n> \n> I'd still be happy to revisit that idea too if it sounds good, but right now I just wanted to focus on the patch thing since that's what was irking me specifically :)\n\n+1  (You're not the first suggesting this...)",
    "created_at": "2016-08-27T17:50:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301991",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:39'>Comment 39:</a>
Replying to [@embray](#comment%3A9):
> An alternative I considered to adding a new script was to create a little library of functions that is sourced in every spkg-install.  It would include `sage-apply-patches` reimplemented as a function, along with a few other bits that are repeated a lot.  This would save on process creations too.
> 
> I'd still be happy to revisit that idea too if it sounds good, but right now I just wanted to focus on the patch thing since that's what was irking me specifically :)

+1  (You're not the first suggesting this...)



---

archive/issue_comments_301992.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nP.S.:  The main problem to that time was that (legacy) spkgs didn't depend on the Sage version, so we would have had to add fall-backs first (if the script to source from wasn't available).\n\nError-handling (i.e., the messages) is another thing that should be standardized.",
    "created_at": "2016-08-27T17:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301992",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:40'>Comment 40:</a>
P.S.:  The main problem to that time was that (legacy) spkgs didn't depend on the Sage version, so we would have had to add fall-backs first (if the script to source from wasn't available).

Error-handling (i.e., the messages) is another thing that should be standardized.



---

archive/issue_comments_301993.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nSounds good--I'll revisit that later in a separate ticket.  As it is this is a step in the right direction since it just standardizes the \"apply patches (if any)\" step across all spkgs.",
    "created_at": "2016-08-29T10:47:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301993",
    "user": "https://github.com/embray"
}
```

<a id='comment:41'>Comment 41:</a>
Sounds good--I'll revisit that later in a separate ticket.  As it is this is a step in the right direction since it just standardizes the "apply patches (if any)" step across all spkgs.



---

archive/issue_comments_301994.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6bee0dfa5f9c779c1049fe569828d4d20ca97379\">6bee0df</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc0d29469dee5d2688bd3716379ac5b2223f5a62\">fc0d294</a></td><td><code>Fix accidental duplication of patch_subdir.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e1b32cd8166303f2856afefd330389654d28a8b\">0e1b32c</a></td><td><code>Forgot to change this to loop over the full list when I made $patches into a list.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47c69f113560cf18c9e629699474f52d584f79b9\">47c69f1</a></td><td><code>Mathjax doesn't have a source directory to cd into, so uses a different default patch path from most packages.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2f3eaa159663dd06d33a5bb756f33f04054c466\">d2f3eaa</a></td><td><code>None of these packages currently have patches to apply.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27cc968cd38843efe132a5981b69f8f6efca9e5f\">27cc968</a></td><td><code>Add license notice.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c9d6d1df2f8cef29ee9e575409241ee4618e289\">6c9d6d1</a></td><td><code>Warn but don't fail if there are no patches to apply</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/229199fc1ccde3034a9d6f58d016456423da16c5\">229199f</a></td><td><code>Apply sage-apply-patches standard on all packages during spkg-install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b00b256eabda6e610a9a09c9eeebac5549ea8b8\">5b00b25</a></td><td><code>Fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5343f3bef75da86de5bf2d9d8fffc1ab39f76de3\">5343f3b</a></td><td><code>Use sage-apply-patches in more packages.</code></td></tr></table>\n",
    "created_at": "2016-10-14T12:29:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301994",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:42'>Comment 42:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6bee0dfa5f9c779c1049fe569828d4d20ca97379">6bee0df</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc0d29469dee5d2688bd3716379ac5b2223f5a62">fc0d294</a></td><td><code>Fix accidental duplication of patch_subdir.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e1b32cd8166303f2856afefd330389654d28a8b">0e1b32c</a></td><td><code>Forgot to change this to loop over the full list when I made $patches into a list.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47c69f113560cf18c9e629699474f52d584f79b9">47c69f1</a></td><td><code>Mathjax doesn't have a source directory to cd into, so uses a different default patch path from most packages.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2f3eaa159663dd06d33a5bb756f33f04054c466">d2f3eaa</a></td><td><code>None of these packages currently have patches to apply.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27cc968cd38843efe132a5981b69f8f6efca9e5f">27cc968</a></td><td><code>Add license notice.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c9d6d1df2f8cef29ee9e575409241ee4618e289">6c9d6d1</a></td><td><code>Warn but don't fail if there are no patches to apply</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/229199fc1ccde3034a9d6f58d016456423da16c5">229199f</a></td><td><code>Apply sage-apply-patches standard on all packages during spkg-install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b00b256eabda6e610a9a09c9eeebac5549ea8b8">5b00b25</a></td><td><code>Fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5343f3bef75da86de5bf2d9d8fffc1ab39f76de3">5343f3b</a></td><td><code>Use sage-apply-patches in more packages.</code></td></tr></table>




---

archive/issue_comments_301995.json:
```json
{
    "body": "Changed commit from **[2c1ec4f](https://github.com/sagemath/sagetrac-mirror/commit/2c1ec4f6d168d43c3cde20b5b3b7fcb39450b717)** to **[5343f3b](https://github.com/sagemath/sagetrac-mirror/commit/5343f3bef75da86de5bf2d9d8fffc1ab39f76de3)**",
    "created_at": "2016-10-14T12:29:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301995",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2c1ec4f](https://github.com/sagemath/sagetrac-mirror/commit/2c1ec4f6d168d43c3cde20b5b3b7fcb39450b717)** to **[5343f3b](https://github.com/sagemath/sagetrac-mirror/commit/5343f3bef75da86de5bf2d9d8fffc1ab39f76de3)**



---

archive/issue_events_263587.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-14T12:31:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263587"
}
```



---

archive/issue_comments_301996.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nRebased this yet again, incorporating changes for new packages that were added or updated.  Did a build/test of this branch on Linux and everything looks fine.\n\nI'm clearing the old milestone--will leave it to the release manager to set an appropriate one.",
    "created_at": "2016-10-14T12:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301996",
    "user": "https://github.com/embray"
}
```

<a id='comment:43'>Comment 43:</a>
Rebased this yet again, incorporating changes for new packages that were added or updated.  Did a build/test of this branch on Linux and everything looks fine.

I'm clearing the old milestone--will leave it to the release manager to set an appropriate one.



---

archive/issue_events_263588.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-14T12:31:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263588"
}
```



---

archive/issue_events_263589.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-14T12:31:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263589"
}
```



---

archive/issue_comments_301997.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nFrom reading the documentation in `sage-apply-patches`, I don't quite understand the meaning of the `[-d patch-subdir]` and `[patch-dir]` arguments. Are these arguments related? If yes, why is it not just 1 argument?",
    "created_at": "2016-10-14T12:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301997",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'>Comment 44:</a>
From reading the documentation in `sage-apply-patches`, I don't quite understand the meaning of the `[-d patch-subdir]` and `[patch-dir]` arguments. Are these arguments related? If yes, why is it not just 1 argument?



---

archive/issue_comments_301998.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nIn `build/pkgs/openblas/spkg-install`, you make a non-trivial change. Why that?",
    "created_at": "2016-10-14T13:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301998",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:45'>Comment 45:</a>
In `build/pkgs/openblas/spkg-install`, you make a non-trivial change. Why that?



---

archive/issue_events_263590.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-14T13:05:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263590"
}
```



---

archive/issue_events_263591.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-14T13:05:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263591"
}
```



---

archive/issue_comments_301999.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nAlso, you are deleting `rubiks` patches...",
    "created_at": "2016-10-14T13:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-301999",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'>Comment 46:</a>
Also, you are deleting `rubiks` patches...



---

archive/issue_comments_302000.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nAnd since you rewrote `git` history anyway, you might as well squash everything to 1 commit.",
    "created_at": "2016-10-14T13:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302000",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:47'>Comment 47:</a>
And since you rewrote `git` history anyway, you might as well squash everything to 1 commit.



---

archive/issue_comments_302001.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nThe change in openblas is a mistake made in resolving a merge conflict; will revert.",
    "created_at": "2016-10-14T13:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302001",
    "user": "https://github.com/embray"
}
```

<a id='comment:48'>Comment 48:</a>
The change in openblas is a mistake made in resolving a merge conflict; will revert.



---

archive/issue_comments_302002.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nReplying to [@jdemeyer](#comment%3A44):\n> From reading the documentation in `sage-apply-patches`, I don't quite understand the meaning of the `[-d patch-subdir]` and `[patch-dir]` arguments. Are these arguments related? If yes, why is it not just 1 argument?\n\nI think earlier, before #20837, it was more necessary to have separate arguments.  But I still kind of like it as is.\n\nThe assumption here is that there is a standard root for patches to a package with *may* have subdirectories.  The reason it's useful to have separate arguments is that `spkg-install` scripts don't need to care where the patch root is, but sometimes it's useful to select subdirectories within it from which to apply other patches.\n\nI'm open to other ideas though.",
    "created_at": "2016-10-14T13:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302002",
    "user": "https://github.com/embray"
}
```

<a id='comment:49'>Comment 49:</a>
Replying to [@jdemeyer](#comment%3A44):
> From reading the documentation in `sage-apply-patches`, I don't quite understand the meaning of the `[-d patch-subdir]` and `[patch-dir]` arguments. Are these arguments related? If yes, why is it not just 1 argument?

I think earlier, before #20837, it was more necessary to have separate arguments.  But I still kind of like it as is.

The assumption here is that there is a standard root for patches to a package with *may* have subdirectories.  The reason it's useful to have separate arguments is that `spkg-install` scripts don't need to care where the patch root is, but sometimes it's useful to select subdirectories within it from which to apply other patches.

I'm open to other ideas though.



---

archive/issue_comments_302003.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nReplying to [@jdemeyer](#comment%3A46):\n> Also, you are deleting `rubiks` patches...\n\nLooks like that's left over from before #21103--it wasn't intentional.  What's odd is that everything worked fine without them so now I question whether they're even necessary but I won't think about that for now.",
    "created_at": "2016-10-14T13:57:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302003",
    "user": "https://github.com/embray"
}
```

<a id='comment:50'>Comment 50:</a>
Replying to [@jdemeyer](#comment%3A46):
> Also, you are deleting `rubiks` patches...

Looks like that's left over from before #21103--it wasn't intentional.  What's odd is that everything worked fine without them so now I question whether they're even necessary but I won't think about that for now.



---

archive/issue_comments_302004.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nAs you probably know, I absolutely hate needless complexity. I see no reason to have two arguments doing essentially the same thing. In your current branch, both kinds of arguments are used, but all use cases could be done with either the `-d patch-subdir` argument or the `patch-dir` argument. So just pick one.",
    "created_at": "2016-10-14T14:02:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302004",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:51'>Comment 51:</a>
As you probably know, I absolutely hate needless complexity. I see no reason to have two arguments doing essentially the same thing. In your current branch, both kinds of arguments are used, but all use cases could be done with either the `-d patch-subdir` argument or the `patch-dir` argument. So just pick one.



---

archive/issue_comments_302005.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b058fae6f1be3ca0a85007a3a3eb48daff97dab7\">b058fae</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr></table>\n",
    "created_at": "2016-10-14T14:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302005",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:52'>Comment 52:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b058fae6f1be3ca0a85007a3a3eb48daff97dab7">b058fae</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr></table>




---

archive/issue_comments_302006.json:
```json
{
    "body": "Changed commit from **[5343f3b](https://github.com/sagemath/sagetrac-mirror/commit/5343f3bef75da86de5bf2d9d8fffc1ab39f76de3)** to **[b058fae](https://github.com/sagemath/sagetrac-mirror/commit/b058fae6f1be3ca0a85007a3a3eb48daff97dab7)**",
    "created_at": "2016-10-14T14:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302006",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5343f3b](https://github.com/sagemath/sagetrac-mirror/commit/5343f3bef75da86de5bf2d9d8fffc1ab39f76de3)** to **[b058fae](https://github.com/sagemath/sagetrac-mirror/commit/b058fae6f1be3ca0a85007a3a3eb48daff97dab7)**



---

archive/issue_comments_302007.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nI reverted the accidental changes and squashed.  I also want to add documentation about this to the developer docs for maintaining packages.",
    "created_at": "2016-10-14T14:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302007",
    "user": "https://github.com/embray"
}
```

<a id='comment:53'>Comment 53:</a>
I reverted the accidental changes and squashed.  I also want to add documentation about this to the developer docs for maintaining packages.



---

archive/issue_comments_302008.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nReplying to [@jdemeyer](#comment%3A51):\n> As you probably know, I absolutely hate needless complexity. I see no reason to have two arguments doing essentially the same thing. In your current branch, both kinds of arguments are used, but all use cases could be done with either the `-d patch-subdir` argument or the `patch-dir` argument. So just pick one.\n\nI see what you mean about using it inconsistently--well really there's one case of that in singular.  There's a reason for that though.  The way the `spkg-install` for singular is written (talk about \"needless complexity\") is it has a bunch of sub-routine that executes in a loop.  Before each subroutine it cd's in to the `src/` directory (of the *singular* sources, so from the point of view of `spkg-install` that's `src/src` which is different from the default assumption made in `sage-apply-patches`.  \n\nReally if I were using `sage-apply-patches` as I intended here, it should call `sage-apply-patches -d debug \"$PATCH\"` :)  (though it looks like I `cd ..` first, so I guess the `$PATCH` part can go away, maybe...)",
    "created_at": "2016-10-14T14:19:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302008",
    "user": "https://github.com/embray"
}
```

<a id='comment:54'>Comment 54:</a>
Replying to [@jdemeyer](#comment%3A51):
> As you probably know, I absolutely hate needless complexity. I see no reason to have two arguments doing essentially the same thing. In your current branch, both kinds of arguments are used, but all use cases could be done with either the `-d patch-subdir` argument or the `patch-dir` argument. So just pick one.

I see what you mean about using it inconsistently--well really there's one case of that in singular.  There's a reason for that though.  The way the `spkg-install` for singular is written (talk about "needless complexity") is it has a bunch of sub-routine that executes in a loop.  Before each subroutine it cd's in to the `src/` directory (of the *singular* sources, so from the point of view of `spkg-install` that's `src/src` which is different from the default assumption made in `sage-apply-patches`.  

Really if I were using `sage-apply-patches` as I intended here, it should call `sage-apply-patches -d debug "$PATCH"` :)  (though it looks like I `cd ..` first, so I guess the `$PATCH` part can go away, maybe...)



---

archive/issue_comments_302009.json:
```json
{
    "body": "Changed commit from **[b058fae](https://github.com/sagemath/sagetrac-mirror/commit/b058fae6f1be3ca0a85007a3a3eb48daff97dab7)** to **[f92d0ef](https://github.com/sagemath/sagetrac-mirror/commit/f92d0eff9c063c6f418208ac25ac9f42bf4502a9)**",
    "created_at": "2016-10-14T14:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302009",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b058fae](https://github.com/sagemath/sagetrac-mirror/commit/b058fae6f1be3ca0a85007a3a3eb48daff97dab7)** to **[f92d0ef](https://github.com/sagemath/sagetrac-mirror/commit/f92d0eff9c063c6f418208ac25ac9f42bf4502a9)**



---

archive/issue_comments_302010.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f92d0eff9c063c6f418208ac25ac9f42bf4502a9\">f92d0ef</a></td><td><code>Use the -d argument to sage-apply-patches instead</code></td></tr></table>\n",
    "created_at": "2016-10-14T14:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302010",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:55'>Comment 55:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f92d0eff9c063c6f418208ac25ac9f42bf4502a9">f92d0ef</a></td><td><code>Use the -d argument to sage-apply-patches instead</code></td></tr></table>




---

archive/issue_comments_302011.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nAs for the arguments I think I'll leave them as is.  As of now the `patch-dir` argument is not used explicitly which is *good*, as it implies uniformity across the `spkg-installs` (previously there was less uniformity and I think both use cases were used).\n\nThat said, it would be more work now to remove it than to leave it as is, as it is completely harmless.  And not having it limits the script's applicability to other problems that may arise in the future.  I do not think it is \"needless complexity\".",
    "created_at": "2016-10-14T14:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302011",
    "user": "https://github.com/embray"
}
```

<a id='comment:56'>Comment 56:</a>
As for the arguments I think I'll leave them as is.  As of now the `patch-dir` argument is not used explicitly which is *good*, as it implies uniformity across the `spkg-installs` (previously there was less uniformity and I think both use cases were used).

That said, it would be more work now to remove it than to leave it as is, as it is completely harmless.  And not having it limits the script's applicability to other problems that may arise in the future.  I do not think it is "needless complexity".



---

archive/issue_events_263592.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-14T14:31:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263592"
}
```



---

archive/issue_events_263593.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-14T14:31:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263593"
}
```



---

archive/issue_comments_302012.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nReplying to [@embray](#comment%3A56):\n> As for the arguments I think I'll leave them as is.  As of now the `patch-dir` argument is not used explicitly which is *good*, as it implies uniformity across the `spkg-installs` (previously there was less uniformity and I think both use cases were used).\n> \n> That said, it would be more work now to remove it than to leave it as is, as it is completely harmless.  And not having it limits the script's applicability to other problems that may arise in the future.  I do not think it is \"needless complexity\".\n\n(FWIW if I were to choose one to remove it would be `patch-dir` since now it's not used.)\n\nAlso setting back to needs_work because I still need to update the documentation.",
    "created_at": "2016-10-14T14:43:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302012",
    "user": "https://github.com/embray"
}
```

<a id='comment:58'>Comment 58:</a>
Replying to [@embray](#comment%3A56):
> As for the arguments I think I'll leave them as is.  As of now the `patch-dir` argument is not used explicitly which is *good*, as it implies uniformity across the `spkg-installs` (previously there was less uniformity and I think both use cases were used).
> 
> That said, it would be more work now to remove it than to leave it as is, as it is completely harmless.  And not having it limits the script's applicability to other problems that may arise in the future.  I do not think it is "needless complexity".

(FWIW if I were to choose one to remove it would be `patch-dir` since now it's not used.)

Also setting back to needs_work because I still need to update the documentation.



---

archive/issue_events_263594.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-14T14:43:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263594"
}
```



---

archive/issue_events_263595.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-14T14:43:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263595"
}
```



---

archive/issue_comments_302013.json:
```json
{
    "body": "Changed commit from **[f92d0ef](https://github.com/sagemath/sagetrac-mirror/commit/f92d0eff9c063c6f418208ac25ac9f42bf4502a9)** to **[ed68c76](https://github.com/sagemath/sagetrac-mirror/commit/ed68c76ed23b611db471f60aac37b5222b4f740b)**",
    "created_at": "2016-10-17T11:48:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302013",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f92d0ef](https://github.com/sagemath/sagetrac-mirror/commit/f92d0eff9c063c6f418208ac25ac9f42bf4502a9)** to **[ed68c76](https://github.com/sagemath/sagetrac-mirror/commit/ed68c76ed23b611db471f60aac37b5222b4f740b)**



---

archive/issue_comments_302014.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/928528c64944f5f64a4d97eccf037ef2ad6e0dc6\">928528c</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f76324a8781aedfdca7dba9966ce48e217ddaa3\">5f76324</a></td><td><code>Use the -d argument to sage-apply-patches instead</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed68c76ed23b611db471f60aac37b5222b4f740b\">ed68c76</a></td><td><code>Added some updated documentation about how to apply patches</code></td></tr></table>\n",
    "created_at": "2016-10-17T11:48:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302014",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:59'>Comment 59:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/928528c64944f5f64a4d97eccf037ef2ad6e0dc6">928528c</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f76324a8781aedfdca7dba9966ce48e217ddaa3">5f76324</a></td><td><code>Use the -d argument to sage-apply-patches instead</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed68c76ed23b611db471f60aac37b5222b4f740b">ed68c76</a></td><td><code>Added some updated documentation about how to apply patches</code></td></tr></table>




---

archive/issue_events_263596.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-17T11:51:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263596"
}
```



---

archive/issue_events_263597.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-17T11:51:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263597"
}
```



---

archive/issue_comments_302015.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\nRebased again, and updated the docs.  Can we please move forward on merging this before I have to rebase again?  If you *really* want to change something about `sage-apply-patches` we can do that separately, but this works now as-is.",
    "created_at": "2016-10-17T11:51:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302015",
    "user": "https://github.com/embray"
}
```

<a id='comment:60'>Comment 60:</a>
Rebased again, and updated the docs.  Can we please move forward on merging this before I have to rebase again?  If you *really* want to change something about `sage-apply-patches` we can do that separately, but this works now as-is.



---

archive/issue_comments_302016.json:
```json
{
    "body": "<a id='comment:61'>Comment 61:</a>\nNote to self: double-check `fricas`, `frobby`, `gap3`, `gfan`, `scipoptsuite`",
    "created_at": "2016-10-18T08:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302016",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:61'>Comment 61:</a>
Note to self: double-check `fricas`, `frobby`, `gap3`, `gfan`, `scipoptsuite`



---

archive/issue_events_263598.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-18T10:33:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263598"
}
```



---

archive/issue_events_263599.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-18T10:33:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263599"
}
```



---

archive/issue_comments_302017.json:
```json
{
    "body": "<a id='comment:62'>Comment 62:</a>\nThis conflicts with #17254. I suggest that you merge that branch.",
    "created_at": "2016-10-18T10:33:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302017",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:62'>Comment 62:</a>
This conflicts with #17254. I suggest that you merge that branch.



---

archive/issue_comments_302018.json:
```json
{
    "body": "Changed dependencies from **#21103** to **#17254**",
    "created_at": "2016-10-18T10:33:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302018",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#21103** to **#17254**



---

archive/issue_comments_302019.json:
```json
{
    "body": "<a id='comment:63'>Comment 63:</a>\nAlso, since you have to change this branch anyway: could you remove the line `echo \"Applying Sage-specific patches\"` from `sage-spkg`? That is not needed since `sage-apply-patches` is sufficiently verbose. That message could actually be confusing if there are no patches to apply.",
    "created_at": "2016-10-18T10:35:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302019",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:63'>Comment 63:</a>
Also, since you have to change this branch anyway: could you remove the line `echo "Applying Sage-specific patches"` from `sage-spkg`? That is not needed since `sage-apply-patches` is sufficiently verbose. That message could actually be confusing if there are no patches to apply.



---

archive/issue_comments_302020.json:
```json
{
    "body": "<a id='comment:64'>Comment 64:</a>\nAnother detail: the `pushd`/`popd` is also verbose:\n\n```\n[gsl-2.1] Finished extraction\n[gsl-2.1] Applying Sage-specific patches\n[gsl-2.1] /usr/local/src/sage-git/local/var/tmp/sage/build/gsl-2.1/src /usr/local/src/sage-git/local/var/tmp/sage/build/gsl-2.1\n[gsl-2.1] No patch files found in ../patches\n[gsl-2.1] /usr/local/src/sage-git/local/var/tmp/sage/build/gsl-2.1\n[gsl-2.1] ****************************************************\n```\nThis should be silenced",
    "created_at": "2016-10-18T11:32:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302020",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:64'>Comment 64:</a>
Another detail: the `pushd`/`popd` is also verbose:

```
[gsl-2.1] Finished extraction
[gsl-2.1] Applying Sage-specific patches
[gsl-2.1] /usr/local/src/sage-git/local/var/tmp/sage/build/gsl-2.1/src /usr/local/src/sage-git/local/var/tmp/sage/build/gsl-2.1
[gsl-2.1] No patch files found in ../patches
[gsl-2.1] /usr/local/src/sage-git/local/var/tmp/sage/build/gsl-2.1
[gsl-2.1] ****************************************************
```
This should be silenced



---

archive/issue_comments_302021.json:
```json
{
    "body": "Changed dependencies from **#17254** to **#17254, #21721**",
    "created_at": "2016-10-18T13:29:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302021",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#17254** to **#17254, #21721**



---

archive/issue_comments_302022.json:
```json
{
    "body": "<a id='comment:65'>Comment 65:</a>\nSome packages still use non-standard patching: #21721",
    "created_at": "2016-10-18T13:29:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302022",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:65'>Comment 65:</a>
Some packages still use non-standard patching: #21721



---

archive/issue_comments_302023.json:
```json
{
    "body": "<a id='comment:66'>Comment 66:</a>\nIn `build/pkgs/scipoptsuite/spkg-install`, you are still using both directory arguments:\n\n```\nsage-apply-patches -d scip $SPKGDIR/patches || exit 1\n```\nThis could be\n\n```\nsage-apply-patches \"$SPKGDIR/patches/scip\" || exit $?\n```",
    "created_at": "2016-10-18T13:34:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302023",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:66'>Comment 66:</a>
In `build/pkgs/scipoptsuite/spkg-install`, you are still using both directory arguments:

```
sage-apply-patches -d scip $SPKGDIR/patches || exit 1
```
This could be

```
sage-apply-patches "$SPKGDIR/patches/scip" || exit $?
```



---

archive/issue_comments_302024.json:
```json
{
    "body": "Changed dependencies from **#17254, #21721** to **#17254, #21721, #21722**",
    "created_at": "2016-10-18T14:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302024",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#17254, #21721** to **#17254, #21721, #21722**



---

archive/issue_comments_302025.json:
```json
{
    "body": "<a id='comment:67'>Comment 67:</a>\n`gap3` had more issues, so I created a separate ticket: #21722",
    "created_at": "2016-10-18T14:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302025",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:67'>Comment 67:</a>
`gap3` had more issues, so I created a separate ticket: #21722



---

archive/issue_comments_302026.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-This adds a new script to `build/bin` called `sage-apply-patches` which implements the same code that is copy/pasted through many of the `spkg-install` scripts (albeit often inconsistently).  It also updates those `spkg-install`s to use it where appropriate.\n+This adds a new script to `build/bin` called `sage-apply-patches` which implements the same code that is copy/pasted through many of the `spkg-install` scripts (albeit often inconsistently). The patches in `build/pkgs/PKGNAME/patches` are now applied automatically.\n \n I'm not attached to any of the details of how the script works--the implementation was designed mostly to make it easiest to automatically replace the existing repeated code snippet with minimal effort.\n``````\n",
    "created_at": "2016-10-28T23:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302026",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-This adds a new script to `build/bin` called `sage-apply-patches` which implements the same code that is copy/pasted through many of the `spkg-install` scripts (albeit often inconsistently).  It also updates those `spkg-install`s to use it where appropriate.
+This adds a new script to `build/bin` called `sage-apply-patches` which implements the same code that is copy/pasted through many of the `spkg-install` scripts (albeit often inconsistently). The patches in `build/pkgs/PKGNAME/patches` are now applied automatically.
 
 I'm not attached to any of the details of how the script works--the implementation was designed mostly to make it easiest to automatically replace the existing repeated code snippet with minimal effort.
``````




---

archive/issue_comments_302027.json:
```json
{
    "body": "Changed dependencies from **#17254, #21721, #21722** to **#21721, #21722**",
    "created_at": "2016-10-28T23:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302027",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#17254, #21721, #21722** to **#21721, #21722**



---

archive/issue_comments_302028.json:
```json
{
    "body": "<a id='comment:69'>Comment 69:</a>\nAll dependencies are merged now, so please rebase to latest `7.5.beta1`.",
    "created_at": "2016-10-31T21:09:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302028",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:69'>Comment 69:</a>
All dependencies are merged now, so please rebase to latest `7.5.beta1`.



---

archive/issue_comments_302029.json:
```json
{
    "body": "Changed dependencies from **#21721, #21722** to none",
    "created_at": "2016-10-31T21:09:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302029",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#21721, #21722** to none



---

archive/issue_comments_302030.json:
```json
{
    "body": "Dependencies: **#21676, #21792**",
    "created_at": "2016-11-01T09:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302030",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#21676, #21792**



---

archive/issue_comments_302031.json:
```json
{
    "body": "<a id='comment:71'>Comment 71:</a>\nAll dependencies are not merged now....",
    "created_at": "2016-11-07T13:34:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302031",
    "user": "https://github.com/embray"
}
```

<a id='comment:71'>Comment 71:</a>
All dependencies are not merged now....



---

archive/issue_comments_302032.json:
```json
{
    "body": "<a id='comment:72'>Comment 72:</a>\nReplying to [@embray](#comment%3A71):\n> All dependencies are not merged now....\n\nNo, because I added two dependencies which would otherwise conflict.",
    "created_at": "2016-11-07T13:42:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302032",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:72'>Comment 72:</a>
Replying to [@embray](#comment%3A71):
> All dependencies are not merged now....

No, because I added two dependencies which would otherwise conflict.



---

archive/issue_comments_302033.json:
```json
{
    "body": "<a id='comment:73'>Comment 73:</a>\nYou could just merge those two dependencies in this branch.",
    "created_at": "2016-11-07T13:42:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302033",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:73'>Comment 73:</a>
You could just merge those two dependencies in this branch.



---

archive/issue_comments_302034.json:
```json
{
    "body": "<a id='comment:74'>Comment 74:</a>\nneeds rebasing",
    "created_at": "2016-11-18T01:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302034",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:74'>Comment 74:</a>
needs rebasing



---

archive/issue_comments_302035.json:
```json
{
    "body": "Changed dependencies from **#21676, #21792** to none",
    "created_at": "2016-11-18T06:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302035",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#21676, #21792** to none



---

archive/issue_comments_302036.json:
```json
{
    "body": "Changed commit from **[ed68c76](https://github.com/sagemath/sagetrac-mirror/commit/ed68c76ed23b611db471f60aac37b5222b4f740b)** to **[0968ec0](https://github.com/sagemath/sagetrac-mirror/commit/0968ec08336fe9d90df740a514c39e91495a9930)**",
    "created_at": "2016-11-21T14:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302036",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ed68c76](https://github.com/sagemath/sagetrac-mirror/commit/ed68c76ed23b611db471f60aac37b5222b4f740b)** to **[0968ec0](https://github.com/sagemath/sagetrac-mirror/commit/0968ec08336fe9d90df740a514c39e91495a9930)**



---

archive/issue_comments_302037.json:
```json
{
    "body": "<a id='comment:76'>Comment 76:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f187f9ccb5faed5b15eb0c22673de25956935c35\">f187f9c</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0968ec08336fe9d90df740a514c39e91495a9930\">0968ec0</a></td><td><code>Added some updated documentation about how to apply patches</code></td></tr></table>\n",
    "created_at": "2016-11-21T14:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302037",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:76'>Comment 76:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f187f9ccb5faed5b15eb0c22673de25956935c35">f187f9c</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0968ec08336fe9d90df740a514c39e91495a9930">0968ec0</a></td><td><code>Added some updated documentation about how to apply patches</code></td></tr></table>




---

archive/issue_comments_302038.json:
```json
{
    "body": "<a id='comment:77'>Comment 77:</a>\nRebased again.",
    "created_at": "2016-11-21T14:58:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302038",
    "user": "https://github.com/embray"
}
```

<a id='comment:77'>Comment 77:</a>
Rebased again.



---

archive/issue_events_263600.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-21T14:58:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263600"
}
```



---

archive/issue_events_263601.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-21T14:58:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263601"
}
```



---

archive/issue_events_263602.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-21T14:58:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263602"
}
```



---

archive/issue_events_263603.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-21T14:58:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263603"
}
```



---

archive/issue_events_263604.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-21T14:58:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263604"
}
```



---

archive/issue_events_263605.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-21T14:58:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263605"
}
```



---

archive/issue_comments_302039.json:
```json
{
    "body": "<a id='comment:79'>Comment 79:</a>\nSorry--misclicked.",
    "created_at": "2016-11-21T14:58:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302039",
    "user": "https://github.com/embray"
}
```

<a id='comment:79'>Comment 79:</a>
Sorry--misclicked.



---

archive/issue_comments_302040.json:
```json
{
    "body": "<a id='comment:80'>Comment 80:</a>\nPlease fix [comment:63], [comment:64], [comment:66]. Those are trivial things which can easily be fixed.",
    "created_at": "2016-11-22T16:04:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302040",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:80'>Comment 80:</a>
Please fix [comment:63], [comment:64], [comment:66]. Those are trivial things which can easily be fixed.



---

archive/issue_events_263606.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-22T16:04:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263606"
}
```



---

archive/issue_events_263607.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-22T16:04:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263607"
}
```



---

archive/issue_comments_302041.json:
```json
{
    "body": "<a id='comment:81'>Comment 81:</a>\nThe way `sage-apply-patches` is being invoked in scipoptsuite/spkg-install is actually exactly how those options are meant to be used but whatever.",
    "created_at": "2016-11-23T10:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302041",
    "user": "https://github.com/embray"
}
```

<a id='comment:81'>Comment 81:</a>
The way `sage-apply-patches` is being invoked in scipoptsuite/spkg-install is actually exactly how those options are meant to be used but whatever.



---

archive/issue_comments_302042.json:
```json
{
    "body": "Changed commit from **[0968ec0](https://github.com/sagemath/sagetrac-mirror/commit/0968ec08336fe9d90df740a514c39e91495a9930)** to **[addd3ee](https://github.com/sagemath/sagetrac-mirror/commit/addd3ee9804571bcca63da0667100a7bce4fffe0)**",
    "created_at": "2016-11-23T10:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302042",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0968ec0](https://github.com/sagemath/sagetrac-mirror/commit/0968ec08336fe9d90df740a514c39e91495a9930)** to **[addd3ee](https://github.com/sagemath/sagetrac-mirror/commit/addd3ee9804571bcca63da0667100a7bce4fffe0)**



---

archive/issue_comments_302043.json:
```json
{
    "body": "<a id='comment:82'>Comment 82:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8426898c5869f6e6ecd653aa75f759ebfd0d35c\">e842689</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02e8b04173662bc2ead0284a2cb37f9891375c57\">02e8b04</a></td><td><code>Added some updated documentation about how to apply patches</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/addd3ee9804571bcca63da0667100a7bce4fffe0\">addd3ee</a></td><td><code>Reduce verbosity--no need for the 'Applying' message, and no real need to use pushd/popd either since sage-apply-patches does not change directories.</code></td></tr></table>\n",
    "created_at": "2016-11-23T10:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302043",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:82'>Comment 82:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8426898c5869f6e6ecd653aa75f759ebfd0d35c">e842689</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02e8b04173662bc2ead0284a2cb37f9891375c57">02e8b04</a></td><td><code>Added some updated documentation about how to apply patches</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/addd3ee9804571bcca63da0667100a7bce4fffe0">addd3ee</a></td><td><code>Reduce verbosity--no need for the 'Applying' message, and no real need to use pushd/popd either since sage-apply-patches does not change directories.</code></td></tr></table>




---

archive/issue_comments_302044.json:
```json
{
    "body": "<a id='comment:83'>Comment 83:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8426898c5869f6e6ecd653aa75f759ebfd0d35c\">e842689</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02e8b04173662bc2ead0284a2cb37f9891375c57\">02e8b04</a></td><td><code>Added some updated documentation about how to apply patches</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/addd3ee9804571bcca63da0667100a7bce4fffe0\">addd3ee</a></td><td><code>Reduce verbosity--no need for the 'Applying' message, and no real need to use pushd/popd either since sage-apply-patches does not change directories.</code></td></tr></table>\n",
    "created_at": "2016-11-23T10:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302044",
    "user": "https://github.com/embray"
}
```

<a id='comment:83'>Comment 83:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8426898c5869f6e6ecd653aa75f759ebfd0d35c">e842689</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02e8b04173662bc2ead0284a2cb37f9891375c57">02e8b04</a></td><td><code>Added some updated documentation about how to apply patches</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/addd3ee9804571bcca63da0667100a7bce4fffe0">addd3ee</a></td><td><code>Reduce verbosity--no need for the 'Applying' message, and no real need to use pushd/popd either since sage-apply-patches does not change directories.</code></td></tr></table>




---

archive/issue_events_263608.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-23T10:55:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263608"
}
```



---

archive/issue_events_263609.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-23T10:55:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263609"
}
```



---

archive/issue_comments_302045.json:
```json
{
    "body": "<a id='comment:84'>Comment 84:</a>\nI have no further objections. I'm currently building Sage from scratch with this branch. If this works fine, I will set this to positive_review (hoping that there are no conflicts).",
    "created_at": "2016-11-23T14:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302045",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:84'>Comment 84:</a>
I have no further objections. I'm currently building Sage from scratch with this branch. If this works fine, I will set this to positive_review (hoping that there are no conflicts).



---

archive/issue_comments_302046.json:
```json
{
    "body": "<a id='comment:85'>Comment 85:</a>\nAwesome, thanks!",
    "created_at": "2016-11-23T15:01:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302046",
    "user": "https://github.com/embray"
}
```

<a id='comment:85'>Comment 85:</a>
Awesome, thanks!



---

archive/issue_events_263610.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-23T21:59:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263610"
}
```



---

archive/issue_events_263611.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-23T21:59:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263611"
}
```



---

archive/issue_events_263612.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-23T21:59:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263612"
}
```



---

archive/issue_comments_302047.json:
```json
{
    "body": "<a id='comment:87'>Comment 87:</a>\nMerge conflict",
    "created_at": "2016-11-24T23:43:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302047",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:87'>Comment 87:</a>
Merge conflict



---

archive/issue_events_263613.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-24T23:43:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263613"
}
```



---

archive/issue_events_263614.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-24T23:43:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263614"
}
```



---

archive/issue_comments_302048.json:
```json
{
    "body": "<a id='comment:88'>Comment 88:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad5dcd6c07baf4550b20c4b6d78002659ae8095f\">ad5dcd6</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2858b5f1b7077c354a39777a440d2f08e2afd8c5\">2858b5f</a></td><td><code>Added some updated documentation about how to apply patches</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52a8ca0bafb373c7af7955f9b979fa9438b9d391\">52a8ca0</a></td><td><code>Reduce verbosity--no need for the 'Applying' message, and no real need to use pushd/popd either since sage-apply-patches does not change directories.</code></td></tr></table>\n",
    "created_at": "2016-11-29T09:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302048",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:88'>Comment 88:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad5dcd6c07baf4550b20c4b6d78002659ae8095f">ad5dcd6</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2858b5f1b7077c354a39777a440d2f08e2afd8c5">2858b5f</a></td><td><code>Added some updated documentation about how to apply patches</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52a8ca0bafb373c7af7955f9b979fa9438b9d391">52a8ca0</a></td><td><code>Reduce verbosity--no need for the 'Applying' message, and no real need to use pushd/popd either since sage-apply-patches does not change directories.</code></td></tr></table>




---

archive/issue_comments_302049.json:
```json
{
    "body": "Changed commit from **[addd3ee](https://github.com/sagemath/sagetrac-mirror/commit/addd3ee9804571bcca63da0667100a7bce4fffe0)** to **[52a8ca0](https://github.com/sagemath/sagetrac-mirror/commit/52a8ca0bafb373c7af7955f9b979fa9438b9d391)**",
    "created_at": "2016-11-29T09:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302049",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[addd3ee](https://github.com/sagemath/sagetrac-mirror/commit/addd3ee9804571bcca63da0667100a7bce4fffe0)** to **[52a8ca0](https://github.com/sagemath/sagetrac-mirror/commit/52a8ca0bafb373c7af7955f9b979fa9438b9d391)**



---

archive/issue_comments_302050.json:
```json
{
    "body": "<a id='comment:89'>Comment 89:</a>\nRebased.",
    "created_at": "2016-11-29T09:42:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302050",
    "user": "https://github.com/embray"
}
```

<a id='comment:89'>Comment 89:</a>
Rebased.



---

archive/issue_events_263615.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-29T09:42:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263615"
}
```



---

archive/issue_events_263616.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-29T09:42:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263616"
}
```



---

archive/issue_comments_302051.json:
```json
{
    "body": "Changed branch from **[u/embray/patch-cleanup](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/patch-cleanup)** to **[u/jdemeyer/patch-cleanup](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/patch-cleanup)**",
    "created_at": "2016-11-29T11:19:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302051",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/embray/patch-cleanup](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/patch-cleanup)** to **[u/jdemeyer/patch-cleanup](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/patch-cleanup)**



---

archive/issue_comments_302052.json:
```json
{
    "body": "<a id='comment:91'>Comment 91:</a>\nI fixed a minor bikeshed: I prefer no newline after `./configure` in\n\n```\n./configure ...\n\nif [ $? -ne 0 ]; then\n    ...\nfi\n```\nIt makes it more clear that the `if` really belongs with the `./configure`.\n\nI don't know if you intentionally added a newline there in `build/pkgs/cysignals/spkg-install`, but I removed it now. I also squashed the commits together.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6b33cdbb33ba7eb856cb283c296250976e1638c\">b6b33cd</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr></table>\n",
    "created_at": "2016-11-29T11:21:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302052",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:91'>Comment 91:</a>
I fixed a minor bikeshed: I prefer no newline after `./configure` in

```
./configure ...

if [ $? -ne 0 ]; then
    ...
fi
```
It makes it more clear that the `if` really belongs with the `./configure`.

I don't know if you intentionally added a newline there in `build/pkgs/cysignals/spkg-install`, but I removed it now. I also squashed the commits together.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6b33cdbb33ba7eb856cb283c296250976e1638c">b6b33cd</a></td><td><code>Adds a new sage-apply-patches script.</code></td></tr></table>




---

archive/issue_comments_302053.json:
```json
{
    "body": "Changed commit from **[52a8ca0](https://github.com/sagemath/sagetrac-mirror/commit/52a8ca0bafb373c7af7955f9b979fa9438b9d391)** to **[b6b33cd](https://github.com/sagemath/sagetrac-mirror/commit/b6b33cdbb33ba7eb856cb283c296250976e1638c)**",
    "created_at": "2016-11-29T11:21:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302053",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[52a8ca0](https://github.com/sagemath/sagetrac-mirror/commit/52a8ca0bafb373c7af7955f9b979fa9438b9d391)** to **[b6b33cd](https://github.com/sagemath/sagetrac-mirror/commit/b6b33cdbb33ba7eb856cb283c296250976e1638c)**



---

archive/issue_events_263617.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-30T19:36:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263617"
}
```



---

archive/issue_events_263618.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "4baf341dfaa6c290a246bd2406c83712960eae42",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-11-30T19:36:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20692#event-263618"
}
```



---

archive/issue_comments_302054.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/patch-cleanup](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/patch-cleanup)** to **[b6b33cd](https://github.com/sagemath/sagetrac-mirror/commit/b6b33cdbb33ba7eb856cb283c296250976e1638c)**",
    "created_at": "2016-11-30T19:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302054",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/patch-cleanup](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/patch-cleanup)** to **[b6b33cd](https://github.com/sagemath/sagetrac-mirror/commit/b6b33cdbb33ba7eb856cb283c296250976e1638c)**



---

archive/issue_comments_302055.json:
```json
{
    "body": "<a id='comment:93'>Comment 93:</a>\nFinally merged, thanks Erik!",
    "created_at": "2016-12-02T06:05:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302055",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:93'>Comment 93:</a>
Finally merged, thanks Erik!



---

archive/issue_comments_302056.json:
```json
{
    "body": "Changed commit from **[b6b33cd](https://github.com/sagemath/sagetrac-mirror/commit/b6b33cdbb33ba7eb856cb283c296250976e1638c)** to none",
    "created_at": "2016-12-02T06:05:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302056",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[b6b33cd](https://github.com/sagemath/sagetrac-mirror/commit/b6b33cdbb33ba7eb856cb283c296250976e1638c)** to none



---

archive/issue_comments_302057.json:
```json
{
    "body": "<a id='comment:94'>Comment 94:</a>\nHooray!\n*pours you a champagne*",
    "created_at": "2016-12-02T10:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20692",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20692#issuecomment-302057",
    "user": "https://github.com/embray"
}
```

<a id='comment:94'>Comment 94:</a>
Hooray!
*pours you a champagne*
