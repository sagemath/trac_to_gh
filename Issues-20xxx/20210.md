# Issue 20210: Move memory functions to cysignals

archive/issues_019973.json:
```json
{
    "body": "Move all memory-allocation functions like `sage_malloc` to cysignals (renaming `sage_` -> `sig_`).\n\n**Upstream**: https://github.com/sagemath/cysignals/releases/download/1.1.0/cysignals-1.1.0.tar.bz2\n\nCC:  @defeo @malb\n\nReviewer: Martin Albrecht\n\nAuthor: Jeroen Demeyer\n\nBranch: 4bb8337295ed82c93d1a9c9f7173a4c36f97151d\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20210\n\n",
    "closed_at": "2016-03-20T23:41:58Z",
    "created_at": "2016-03-15T08:49:33Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "Move memory functions to cysignals",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20210",
    "user": "https://github.com/jdemeyer"
}
```
Move all memory-allocation functions like `sage_malloc` to cysignals (renaming `sage_` -> `sig_`).

**Upstream**: https://github.com/sagemath/cysignals/releases/download/1.1.0/cysignals-1.1.0.tar.bz2

CC:  @defeo @malb

Reviewer: Martin Albrecht

Author: Jeroen Demeyer

Branch: 4bb8337295ed82c93d1a9c9f7173a4c36f97151d

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20210





---

archive/issue_comments_368920.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Move all memory-allocation functions like `sage_malloc` to cysignals (renaming `sage_` -> `sig_`).\n+\n+**Upstream**: https://github.com/sagemath/cysignals/releases/download/1.1.0/cysignals-1.1.0.tar.bz2\n``````\n",
    "created_at": "2016-03-15T08:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368920",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Move all memory-allocation functions like `sage_malloc` to cysignals (renaming `sage_` -> `sig_`).
+
+**Upstream**: https://github.com/sagemath/cysignals/releases/download/1.1.0/cysignals-1.1.0.tar.bz2
``````




---

archive/issue_comments_368921.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/cysignals_memory\"",
    "created_at": "2016-03-15T12:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368921",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/cysignals_memory"



---

archive/issue_comments_368922.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[03458ea](https://github.com/sagemath/sagetrac-mirror/commit/03458ea28f8d10c4103f6cdecbf018115c71e889)|`Upgrade cysignals package`|\n|[dce67fc](https://github.com/sagemath/sagetrac-mirror/commit/dce67fca49e515ce610539263e1e7a6f26c7bc69)|`Move memory functions to cysignals`|\n|[4bb8337](https://github.com/sagemath/sagetrac-mirror/commit/4bb8337295ed82c93d1a9c9f7173a4c36f97151d)|`Rename sage_malloc -> sig_malloc and friends`|",
    "created_at": "2016-03-15T12:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368922",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[03458ea](https://github.com/sagemath/sagetrac-mirror/commit/03458ea28f8d10c4103f6cdecbf018115c71e889)|`Upgrade cysignals package`|
|[dce67fc](https://github.com/sagemath/sagetrac-mirror/commit/dce67fca49e515ce610539263e1e7a6f26c7bc69)|`Move memory functions to cysignals`|
|[4bb8337](https://github.com/sagemath/sagetrac-mirror/commit/4bb8337295ed82c93d1a9c9f7173a4c36f97151d)|`Rename sage_malloc -> sig_malloc and friends`|



---

archive/issue_comments_368923.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-03-15T12:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368923",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_368924.json:
```json
{
    "body": "Changing commit from \"\" to \"4bb8337295ed82c93d1a9c9f7173a4c36f97151d\"",
    "created_at": "2016-03-15T12:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368924",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "4bb8337295ed82c93d1a9c9f7173a4c36f97151d"



---

archive/issue_comments_368925.json:
```json
{
    "body": "<a id='comment:4'></a>\nFor easier reviewing, I separated the commits:\n\n> |                                                                                                                                          |                           |\n> |------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n> |[03458ea](https://github.com/sagemath/sagetrac-mirror/commit/03458ea28f8d10c4103f6cdecbf018115c71e889)|`Upgrade cysignals package`|\n\nThis is literally just the upgrade of the package.\n\n> |                                                                                                                                          |                                    |\n> |------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n> |[dce67fc](https://github.com/sagemath/sagetrac-mirror/commit/dce67fca49e515ce610539263e1e7a6f26c7bc69)|`Move memory functions to cysignals`|\n\nThis contains all changes to the Sage library (mostly changing include paths), except for renaming `sage_malloc` -> `sig_malloc` and similar.\n\n> |                                                                                                                                          |                                              |\n> |------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n> |[4bb8337](https://github.com/sagemath/sagetrac-mirror/commit/4bb8337295ed82c93d1a9c9f7173a4c36f97151d)|`Rename sage_malloc -> sig_malloc and friends`|\n\nThis was made with a simple `sed` script, it deals only with renaming `sage_malloc` -> `sig_malloc` and similar.",
    "created_at": "2016-03-15T12:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368925",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
For easier reviewing, I separated the commits:

> |                                                                                                                                          |                           |
> |------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
> |[03458ea](https://github.com/sagemath/sagetrac-mirror/commit/03458ea28f8d10c4103f6cdecbf018115c71e889)|`Upgrade cysignals package`|

This is literally just the upgrade of the package.

> |                                                                                                                                          |                                    |
> |------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
> |[dce67fc](https://github.com/sagemath/sagetrac-mirror/commit/dce67fca49e515ce610539263e1e7a6f26c7bc69)|`Move memory functions to cysignals`|

This contains all changes to the Sage library (mostly changing include paths), except for renaming `sage_malloc` -> `sig_malloc` and similar.

> |                                                                                                                                          |                                              |
> |------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
> |[4bb8337](https://github.com/sagemath/sagetrac-mirror/commit/4bb8337295ed82c93d1a9c9f7173a4c36f97151d)|`Rename sage_malloc -> sig_malloc and friends`|

This was made with a simple `sed` script, it deals only with renaming `sage_malloc` -> `sig_malloc` and similar.



---

archive/issue_comments_368926.json:
```json
{
    "body": "<a id='comment:5'></a>\nWhy do we have to `include \"cysignals/memory.pxi\"` and cannot `cimport`? Patch looks good, but I didn't check all lines of 4bb8337.",
    "created_at": "2016-03-16T09:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368926",
    "user": "https://github.com/malb"
}
```

<a id='comment:5'></a>
Why do we have to `include "cysignals/memory.pxi"` and cannot `cimport`? Patch looks good, but I didn't check all lines of 4bb8337.



---

archive/issue_comments_368927.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [malb](#comment%3A5):\n> Why do we have to `include \"cysignals/memory.pxi\"` and cannot `cimport`?\n\n\nBecause `cysignals/memory.pxi` includes `cysignals/signals.pxi` so it's really by transitivity.",
    "created_at": "2016-03-16T09:25:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368927",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
Replying to [malb](#comment%3A5):
> Why do we have to `include "cysignals/memory.pxi"` and cannot `cimport`?


Because `cysignals/memory.pxi` includes `cysignals/signals.pxi` so it's really by transitivity.



---

archive/issue_comments_368928.json:
```json
{
    "body": "<a id='comment:7'></a>\nI am currently in Orsay discussing with Erik Bray and Nicolas Thi\u00e9ry to see if we can use `cimport` instead of `include` for `cysignals/signals.pxi` but it doesn't look easy.",
    "created_at": "2016-03-16T09:27:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368928",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
I am currently in Orsay discussing with Erik Bray and Nicolas Thiéry to see if we can use `cimport` instead of `include` for `cysignals/signals.pxi` but it doesn't look easy.



---

archive/issue_comments_368929.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Martin Albrecht\"",
    "created_at": "2016-03-16T10:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368929",
    "user": "https://github.com/malb"
}
```

Changing reviewer from "" to "Martin Albrecht"



---

archive/issue_comments_368930.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-16T10:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368930",
    "user": "https://github.com/malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_368931.json:
```json
{
    "body": "<a id='comment:8'></a>\nOkay, looks good then. I didn't run tests, though.",
    "created_at": "2016-03-16T10:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368931",
    "user": "https://github.com/malb"
}
```

<a id='comment:8'></a>
Okay, looks good then. I didn't run tests, though.



---

archive/issue_comments_368932.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-20T23:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368932",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_368933.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/cysignals_memory\" to \"4bb8337295ed82c93d1a9c9f7173a4c36f97151d\"",
    "created_at": "2016-03-20T23:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368933",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/cysignals_memory" to "4bb8337295ed82c93d1a9c9f7173a4c36f97151d"



---

archive/issue_events_062436.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-20T23:41:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20210#event-62436"
}
```



---

archive/issue_comments_368934.json:
```json
{
    "body": "Changing commit from \"4bb8337295ed82c93d1a9c9f7173a4c36f97151d\" to \"\"",
    "created_at": "2016-03-22T15:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368934",
    "user": "https://github.com/adeines"
}
```

Changing commit from "4bb8337295ed82c93d1a9c9f7173a4c36f97151d" to ""



---

archive/issue_comments_368935.json:
```json
{
    "body": "<a id='comment:10'></a>\nI've been working on ticket #14304 which now depends on this ticket.  Since it's been rebased, it now has doctests failing that aren't touched by the ticket.  So I ran all the doctests with just this ticket applied and the following one fails:\n\n```\nsage -t src/sage/tests/cmdline.py  # 3 doctests failed\n```\n\nHowever, the following are failing for #14304\n\n```\nsage -t src/sage/interacts/debugger.py  # 1 doctest failed\nsage -t src/sage/tests/cmdline.py  # 14 doctests failed\nsage -t src/sage/tests/french_book/nonlinear_doctest.py  # 1 doctest failed\nsage -t src/sage/doctest/forker.py  # 1 doctest failed\nsage -t src/sage/doctest/test.py  # 1 doctest failed\nsage -t src/sage/repl/attach.py  # 2 doctests failed\nsage -t src/sage/repl/interpreter.py  # 22 doctests failed\nsage -t src/sage/repl/inputhook.pyx  # 2 doctests failed\nsage -t src/sage/repl/ipython_extension.py  # 9 doctests failed\nsage -t src/sage/repl/ipython_tests.py  # 4 doctests failed\nsage -t src/sage/repl/interface_magic.py  # 3 doctests failed\nsage -t src/sage/repl/display/formatter.py  # 10 doctests failed\nsage -t src/sage/repl/rich_output/backend_ipython.py  # 3 doctests failed\nsage -t src/sage/repl/ipython_kernel/install.py  # 1 doctest failed\nsage -t src/sage/repl/ipython_kernel/kernel.py  # 4 doctests failed\nsage -t src/sage/quivers/algebra_elements.pxi  # 1 doctest failed\nsage -t src/sage/dev/trac_interface.py  # 1 doctest failed\nsage -t src/sage/typeset/ascii_art.py  # 2 doctests failed\nsage -t src/sage/misc/temporary_file.py  # 1 doctest failed\nsage -t src/sage/structure/misc.pyx  # 1 doctest failed\nsage -t src/sage/structure/sage_object.pyx  # 4 doctests failed\nsage -t src/sage/combinat/shard_order.py  # 1 doctest failed\nsage -t src/sage/combinat/root_system/root_lattice_realizations.py  # 1 doctest failed\nsage -t src/sage/combinat/rigged_configurations/rigged_configurations.py  # 1 doctest failed\nsage -t src/sage/combinat/rigged_configurations/rigged_configuration_element.py  # 1 doctest failed\nsage -t src/sage/combinat/rigged_configurations/rc_crystal.py  # 1 doctest failed\nsage -t src/sage/combinat/rigged_configurations/rc_infinity.py  # 1 doctest failed\nsage -t src/sage/interfaces/sage0.py  # 1 doctest failed\n```\n\nAny idea what's up?",
    "created_at": "2016-03-22T15:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368935",
    "user": "https://github.com/adeines"
}
```

<a id='comment:10'></a>
I've been working on ticket #14304 which now depends on this ticket.  Since it's been rebased, it now has doctests failing that aren't touched by the ticket.  So I ran all the doctests with just this ticket applied and the following one fails:

```
sage -t src/sage/tests/cmdline.py  # 3 doctests failed
```

However, the following are failing for #14304

```
sage -t src/sage/interacts/debugger.py  # 1 doctest failed
sage -t src/sage/tests/cmdline.py  # 14 doctests failed
sage -t src/sage/tests/french_book/nonlinear_doctest.py  # 1 doctest failed
sage -t src/sage/doctest/forker.py  # 1 doctest failed
sage -t src/sage/doctest/test.py  # 1 doctest failed
sage -t src/sage/repl/attach.py  # 2 doctests failed
sage -t src/sage/repl/interpreter.py  # 22 doctests failed
sage -t src/sage/repl/inputhook.pyx  # 2 doctests failed
sage -t src/sage/repl/ipython_extension.py  # 9 doctests failed
sage -t src/sage/repl/ipython_tests.py  # 4 doctests failed
sage -t src/sage/repl/interface_magic.py  # 3 doctests failed
sage -t src/sage/repl/display/formatter.py  # 10 doctests failed
sage -t src/sage/repl/rich_output/backend_ipython.py  # 3 doctests failed
sage -t src/sage/repl/ipython_kernel/install.py  # 1 doctest failed
sage -t src/sage/repl/ipython_kernel/kernel.py  # 4 doctests failed
sage -t src/sage/quivers/algebra_elements.pxi  # 1 doctest failed
sage -t src/sage/dev/trac_interface.py  # 1 doctest failed
sage -t src/sage/typeset/ascii_art.py  # 2 doctests failed
sage -t src/sage/misc/temporary_file.py  # 1 doctest failed
sage -t src/sage/structure/misc.pyx  # 1 doctest failed
sage -t src/sage/structure/sage_object.pyx  # 4 doctests failed
sage -t src/sage/combinat/shard_order.py  # 1 doctest failed
sage -t src/sage/combinat/root_system/root_lattice_realizations.py  # 1 doctest failed
sage -t src/sage/combinat/rigged_configurations/rigged_configurations.py  # 1 doctest failed
sage -t src/sage/combinat/rigged_configurations/rigged_configuration_element.py  # 1 doctest failed
sage -t src/sage/combinat/rigged_configurations/rc_crystal.py  # 1 doctest failed
sage -t src/sage/combinat/rigged_configurations/rc_infinity.py  # 1 doctest failed
sage -t src/sage/interfaces/sage0.py  # 1 doctest failed
```

Any idea what's up?



---

archive/issue_comments_368936.json:
```json
{
    "body": "<a id='comment:11'></a>\nWhat are the actual failures?",
    "created_at": "2016-03-22T15:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368936",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
What are the actual failures?



---

archive/issue_comments_368937.json:
```json
{
    "body": "<a id='comment:12'></a>\nThey are:\n\n```\naly@aly-laptop:~/Sage/sage$ ./sage -t src/sage/tests/cmdline.py \nRunning doctests with ID 2016-03-22-16-00-06-1cfb21fa.\nGit branch: ticket/20210\nUsing --optional=ccache,mpir,python2,sage\nDoctesting 1 file.\nsage -t --warn-long 18.2 src/sage/tests/cmdline.py\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 106, in sage.tests.cmdline.test_executable\nFailed example:\n    out.find(version()) >= 0\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 114, in sage.tests.cmdline.test_executable\nFailed example:\n    out.find(version()) >= 0\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 186, in sage.tests.cmdline.test_executable\nFailed example:\n    out.find(version()) >= 0\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   3 of 235 in sage.tests.cmdline.test_executable\n    [234 tests, 3 failures, 30.61 s]\n----------------------------------------------------------------------\nsage -t --warn-long 18.2 src/sage/tests/cmdline.py  # 3 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 30.7 seconds\n    cpu time: 0.3 seconds\n    cumulative wall time: 30.6 seconds\n\n```",
    "created_at": "2016-03-22T16:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368937",
    "user": "https://github.com/adeines"
}
```

<a id='comment:12'></a>
They are:

```
aly@aly-laptop:~/Sage/sage$ ./sage -t src/sage/tests/cmdline.py 
Running doctests with ID 2016-03-22-16-00-06-1cfb21fa.
Git branch: ticket/20210
Using --optional=ccache,mpir,python2,sage
Doctesting 1 file.
sage -t --warn-long 18.2 src/sage/tests/cmdline.py
**********************************************************************
File "src/sage/tests/cmdline.py", line 106, in sage.tests.cmdline.test_executable
Failed example:
    out.find(version()) >= 0
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/tests/cmdline.py", line 114, in sage.tests.cmdline.test_executable
Failed example:
    out.find(version()) >= 0
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/tests/cmdline.py", line 186, in sage.tests.cmdline.test_executable
Failed example:
    out.find(version()) >= 0
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   3 of 235 in sage.tests.cmdline.test_executable
    [234 tests, 3 failures, 30.61 s]
----------------------------------------------------------------------
sage -t --warn-long 18.2 src/sage/tests/cmdline.py  # 3 doctests failed
----------------------------------------------------------------------
Total time for all tests: 30.7 seconds
    cpu time: 0.3 seconds
    cumulative wall time: 30.6 seconds

```



---

archive/issue_comments_368938.json:
```json
{
    "body": "<a id='comment:13'></a>\nWell, that doesn't look related to this ticket... Are you sure you ran `make`?",
    "created_at": "2016-03-22T16:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368938",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Well, that doesn't look related to this ticket... Are you sure you ran `make`?



---

archive/issue_comments_368939.json:
```json
{
    "body": "<a id='comment:14'></a>\nUgg.  I think you're right.  I'm running make now and will rerun the doctests.",
    "created_at": "2016-03-22T16:06:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368939",
    "user": "https://github.com/adeines"
}
```

<a id='comment:14'></a>
Ugg.  I think you're right.  I'm running make now and will rerun the doctests.



---

archive/issue_comments_368940.json:
```json
{
    "body": "<a id='comment:15'></a>\nDo you remember which commands you did run and why you ran them instead of something involving `make`? Did somebody tell you to run those commands or did you read it somewhere in the documentation? How could we make it more clear that people really should run `make` before testing or running Sage?",
    "created_at": "2016-03-22T16:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368940",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Do you remember which commands you did run and why you ran them instead of something involving `make`? Did somebody tell you to run those commands or did you read it somewhere in the documentation? How could we make it more clear that people really should run `make` before testing or running Sage?



---

archive/issue_comments_368941.json:
```json
{
    "body": "<a id='comment:16'></a>\nI've been running\n\n```\n./sage -b\n```\nfor most tickets.  I thought I only needed to run make when spkg changed, and just forgot to do so on this ticket out of habit of running the Sage build.  Should I more generally run make?",
    "created_at": "2016-03-22T16:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368941",
    "user": "https://github.com/adeines"
}
```

<a id='comment:16'></a>
I've been running

```
./sage -b
```
for most tickets.  I thought I only needed to run make when spkg changed, and just forgot to do so on this ticket out of habit of running the Sage build.  Should I more generally run make?



---

archive/issue_comments_368942.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [aly.deines](#comment%3A16):\n>  I thought I only needed to run make when spkg changed\n\n\nThat is still true.\n\nHowever: most of the time this spkg change is implicit when changing branches. When you move from a branch based on one Sage version to a branch based on a different Sage version, chances are high that some spkg has changed between those branches.\n\n> Should I more generally run make?\n\n\nAt least when changing branches, yes. Once you did this and you then make changes only to the Sage library, then `./sage -b` should be sufficient. But run `make` when in doubt.\n\nNote that you can also use `make build` instead of `make` to skip the documentation build which can take a while.",
    "created_at": "2016-03-22T17:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368942",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
Replying to [aly.deines](#comment%3A16):
>  I thought I only needed to run make when spkg changed


That is still true.

However: most of the time this spkg change is implicit when changing branches. When you move from a branch based on one Sage version to a branch based on a different Sage version, chances are high that some spkg has changed between those branches.

> Should I more generally run make?


At least when changing branches, yes. Once you did this and you then make changes only to the Sage library, then `./sage -b` should be sufficient. But run `make` when in doubt.

Note that you can also use `make build` instead of `make` to skip the documentation build which can take a while.



---

archive/issue_comments_368943.json:
```json
{
    "body": "<a id='comment:18'></a>\nAn easy way to run all doctests safely is to use `make ptest` or `make ptestlong`. That will do the build and run all doctests in one simple command.",
    "created_at": "2016-03-22T17:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368943",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
An easy way to run all doctests safely is to use `make ptest` or `make ptestlong`. That will do the build and run all doctests in one simple command.



---

archive/issue_comments_368944.json:
```json
{
    "body": "<a id='comment:19'></a>\nAwesome!  Thanks!  I might update some of the developer's guide to make this a bit clearer.  :)",
    "created_at": "2016-03-22T17:07:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368944",
    "user": "https://github.com/adeines"
}
```

<a id='comment:19'></a>
Awesome!  Thanks!  I might update some of the developer's guide to make this a bit clearer.  :)



---

archive/issue_comments_368945.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [aly.deines](#comment%3A19):\n> Awesome!  Thanks!  I might update some of the developer's guide to make this a bit clearer.  :)\n\n\nThat would be really great! Still, the hard part is making people read it.",
    "created_at": "2016-03-22T17:09:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20210",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20210#issuecomment-368945",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
Replying to [aly.deines](#comment%3A19):
> Awesome!  Thanks!  I might update some of the developer's guide to make this a bit clearer.  :)


That would be really great! Still, the hard part is making people read it.
