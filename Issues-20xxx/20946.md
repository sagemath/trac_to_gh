# Issue 20946: update giac spkg

archive/issues_020709.json:
```json
{
    "body": "Update the spkg to upstream 1.2.2-95\n\nThe giac tarball built from spkg-src to put in upstream/ is there:\n\nhttp://webusers.imj-prg.fr/~frederic.han/xcas/sage/giac-1.2.2.95.tar.bz2\n\nSwitch to .bz2 as wished in #18826\n\nadd --disable-ao in spkg-install to avoid libao dependency.\nremove the --disable-gmpxx in spkg-install. The built seems not broken anymore.\n\nupdtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.\nThe tarball to put in upstream is:\nhttp://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.tar.gz\n\nThe modifications about giacpy are there:\nhttps://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage\n\n\nThe 1.2.2.85 version of giac should fix a race condition in icas that could appear during the test suite.\n\nKeywords: giac\n\nBranch/Commit: c709c1ee6a931eb906284a038e52acd4b200fcc4\n\nReviewer: Ralf Stephan\n\nAuthor: Frederic Han\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20946\n\n",
    "closed_at": "2016-10-21T07:03:41Z",
    "created_at": "2016-07-05T19:02:00Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "update giac spkg",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20946",
    "user": "https://github.com/frederichan-IMJPRG"
}
```
Update the spkg to upstream 1.2.2-95

The giac tarball built from spkg-src to put in upstream/ is there:

http://webusers.imj-prg.fr/~frederic.han/xcas/sage/giac-1.2.2.95.tar.bz2

Switch to .bz2 as wished in #18826

add --disable-ao in spkg-install to avoid libao dependency.
remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.

updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.
The tarball to put in upstream is:
http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.tar.gz

The modifications about giacpy are there:
https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage


The 1.2.2.85 version of giac should fix a race condition in icas that could appear during the test suite.

Keywords: giac

Branch/Commit: c709c1ee6a931eb906284a038e52acd4b200fcc4

Reviewer: Ralf Stephan

Author: Frederic Han

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20946





---

archive/issue_comments_304553.json:
```json
{
    "body": "<a id='comment:1'></a>You're not (yet?) listed [here](https://trac.sagemath.org/wiki#AccountNamesMappedtoRealNames), so hopefully I've not misspelled your name.",
    "created_at": "2016-07-05T20:32:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304553",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:1'></a>You're not (yet?) listed [here](https://trac.sagemath.org/wiki#AccountNamesMappedtoRealNames), so hopefully I've not misspelled your name.



---

archive/issue_comments_304554.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-05T20:32:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304554",
    "user": "https://github.com/nexttime"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_304555.json:
```json
{
    "body": "<a id='comment:2'></a>Replying to [comment:1 leif]:\n> You're not (yet?) listed [here](https://trac.sagemath.org/wiki#AccountNamesMappedtoRealNames), so hopefully I've not misspelled your name.\n\nits done.\n\nI need to test more. Ex:\n\n```\nFailed example:\n[giacpy-0.5.6]     f=1/(5+cos(4*x));f.int(x)\n[giacpy-0.5.6] Expected:\n[giacpy-0.5.6]     1/2/(2*sqrt(6))*(atan(2*tan(4*x/2)/sqrt(6))+pi*floor(4*x/2/pi+1/2))\n[giacpy-0.5.6] Got:\n[giacpy-0.5.6]     1/2/(2*sqrt(6))*(atan((-sqrt(6)*sin(4*x)+2*sin(4*x))/(sqrt(6)*cos(4*x)+sqrt(6)-2*cos(4*x)+2))+4*x/2)\n```",
    "created_at": "2016-07-06T07:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304555",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:2'></a>Replying to [comment:1 leif]:
> You're not (yet?) listed [here](https://trac.sagemath.org/wiki#AccountNamesMappedtoRealNames), so hopefully I've not misspelled your name.

its done.

I need to test more. Ex:

```
Failed example:
[giacpy-0.5.6]     f=1/(5+cos(4*x));f.int(x)
[giacpy-0.5.6] Expected:
[giacpy-0.5.6]     1/2/(2*sqrt(6))*(atan(2*tan(4*x/2)/sqrt(6))+pi*floor(4*x/2/pi+1/2))
[giacpy-0.5.6] Got:
[giacpy-0.5.6]     1/2/(2*sqrt(6))*(atan((-sqrt(6)*sin(4*x)+2*sin(4*x))/(sqrt(6)*cos(4*x)+sqrt(6)-2*cos(4*x)+2))+4*x/2)
```



---

archive/issue_comments_304556.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-07-06T07:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304556",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_304557.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-06T10:10:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304558.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -9,6 +9,14 @@\n add --disable-ao in spkg-install to avoid libao dependency.\n remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.\n \n+updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.\n+The tarball to put in upstream is:\n+http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy-0.6.tar.gz\n+\n+The modifications about giacpy are there:\n+https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage\n+\n+\n Comment: 1\n \n Branch: public/giacupdate\n```\n",
    "created_at": "2016-07-06T10:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304558",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Description changed:
```diff
--- 
+++ 
@@ -9,6 +9,14 @@
 add --disable-ao in spkg-install to avoid libao dependency.
 remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.
 
+updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.
+The tarball to put in upstream is:
+http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy-0.6.tar.gz
+
+The modifications about giacpy are there:
+https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage
+
+
 Comment: 1
 
 Branch: public/giacupdate
```




---

archive/issue_comments_304559.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-06T12:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304559",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304560.json:
```json
{
    "body": "<a id='comment:7'></a>Comment 2 is not a problem. This change was done on purpose in giac, both answer are correct. giacpy-0.6 doctests can deal with both answers.\n\nI am waiting a bit more because I have found a bug in 1.2.2.67 \nhttp://xcas.e.ujf-grenoble.fr/XCAS/viewtopic.php?f=3&t=1731",
    "created_at": "2016-07-07T11:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304560",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:7'></a>Comment 2 is not a problem. This change was done on purpose in giac, both answer are correct. giacpy-0.6 doctests can deal with both answers.

I am waiting a bit more because I have found a bug in 1.2.2.67 
http://xcas.e.ujf-grenoble.fr/XCAS/viewtopic.php?f=3&t=1731



---

archive/issue_comments_304561.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-07T11:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304562.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,20 @@\n+Update the spkg to upstream 1.2.2-69\n+\n+The giac tarball built from spkg-src to put in upstream/ is there:\n+\n+http://webusers.imj-prg.fr/~frederic.han/xcas/sage/giac-1.2.2.69.tar.bz2\n+\n+Switch to .bz2 as wished in #18826\n+\n+add --disable-ao in spkg-install to avoid libao dependency.\n+remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.\n+\n+updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.\n+The tarball to put in upstream is:\n+http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy-0.6.tar.gz\n+\n+The modifications about giacpy are there:\n+https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage\n \n \n Comment: 1\n```\n",
    "created_at": "2016-07-07T12:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304562",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,20 @@
+Update the spkg to upstream 1.2.2-69
+
+The giac tarball built from spkg-src to put in upstream/ is there:
+
+http://webusers.imj-prg.fr/~frederic.han/xcas/sage/giac-1.2.2.69.tar.bz2
+
+Switch to .bz2 as wished in #18826
+
+add --disable-ao in spkg-install to avoid libao dependency.
+remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.
+
+updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.
+The tarball to put in upstream is:
+http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy-0.6.tar.gz
+
+The modifications about giacpy are there:
+https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage
 
 
 Comment: 1
```




---

archive/issue_comments_304563.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-07T12:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304563",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_304564.json:
```json
{
    "body": "<a id='comment:11'></a>Darn, I have to update my ebuild for Gentoo. Since we have a `spkg-src` already should i fix it to get `lapack` in sage like I did in sage-on-gentoo or should we wait a bit?\nI would also prefer if the tarball and the folder in which giacpy_sage unfold were matching the new package name.",
    "created_at": "2016-07-07T21:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304564",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'></a>Darn, I have to update my ebuild for Gentoo. Since we have a `spkg-src` already should i fix it to get `lapack` in sage like I did in sage-on-gentoo or should we wait a bit?
I would also prefer if the tarball and the folder in which giacpy_sage unfold were matching the new package name.



---

archive/issue_comments_304565.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,20 @@\n+Update the spkg to upstream 1.2.2-69\n+\n+The giac tarball built from spkg-src to put in upstream/ is there:\n+\n+http://webusers.imj-prg.fr/~frederic.han/xcas/sage/giac-1.2.2.69.tar.bz2\n+\n+Switch to .bz2 as wished in #18826\n+\n+add --disable-ao in spkg-install to avoid libao dependency.\n+remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.\n+\n+updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.\n+The tarball to put in upstream is:\n+http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.tar.gz\n+\n+The modifications about giacpy are there:\n+https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage\n \n \n Comment: 1\n```\n",
    "created_at": "2016-07-08T05:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304565",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,20 @@
+Update the spkg to upstream 1.2.2-69
+
+The giac tarball built from spkg-src to put in upstream/ is there:
+
+http://webusers.imj-prg.fr/~frederic.han/xcas/sage/giac-1.2.2.69.tar.bz2
+
+Switch to .bz2 as wished in #18826
+
+add --disable-ao in spkg-install to avoid libao dependency.
+remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.
+
+updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.
+The tarball to put in upstream is:
+http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.tar.gz
+
+The modifications about giacpy are there:
+https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage
 
 
 Comment: 1
```




---

archive/issue_comments_304566.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-08T05:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304566",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304567.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:11 fbissey]:\n> Darn, I have to update my ebuild for Gentoo. Since we have a `spkg-src` already should i fix it to get `lapack` in sage like I did in sage-on-gentoo or should we wait a bit?\n\nFeel free to modify as you want, I have put it on a public branch for this. I have no news from parisse about a lapack change except the discussion on sage-devel.\n> I would also prefer if the tarball and the folder in which giacpy_sage unfold were matching the new package name.\n\nshould be done now",
    "created_at": "2016-07-08T06:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304567",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:14'></a>Replying to [comment:11 fbissey]:
> Darn, I have to update my ebuild for Gentoo. Since we have a `spkg-src` already should i fix it to get `lapack` in sage like I did in sage-on-gentoo or should we wait a bit?

Feel free to modify as you want, I have put it on a public branch for this. I have no news from parisse about a lapack change except the discussion on sage-devel.
> I would also prefer if the tarball and the folder in which giacpy_sage unfold were matching the new package name.

should be done now



---

archive/issue_comments_304568.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 frederichan]:\n> Replying to [comment:11 fbissey]:\n> > Darn, I have to update my ebuild for Gentoo. Since we have a `spkg-src` already should i fix it to get `lapack` in sage like I did in sage-on-gentoo or should we wait a bit?\n\n> Feel free to modify as you want, I have put it on a public branch for this. I have no news from parisse about a lapack change except the discussion on sage-devel.\n\nYes I can do a simple thing that will work in sage as it works on gentoo since we have .pc files for blas/lapack. Probably won't work for parisse.\n\n> > I would also prefer if the tarball and the folder in which giacpy_sage unfold were matching the new package name.\n\n> should be done now\n\nThank you.",
    "created_at": "2016-07-08T08:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304568",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:15'></a>Replying to [comment:14 frederichan]:
> Replying to [comment:11 fbissey]:
> > Darn, I have to update my ebuild for Gentoo. Since we have a `spkg-src` already should i fix it to get `lapack` in sage like I did in sage-on-gentoo or should we wait a bit?

> Feel free to modify as you want, I have put it on a public branch for this. I have no news from parisse about a lapack change except the discussion on sage-devel.

Yes I can do a simple thing that will work in sage as it works on gentoo since we have .pc files for blas/lapack. Probably won't work for parisse.

> > I would also prefer if the tarball and the folder in which giacpy_sage unfold were matching the new package name.

> should be done now

Thank you.



---

archive/issue_comments_304569.json:
```json
{
    "body": "<a id='comment:16'></a>Hum I am unwilling to touch the `spkg-src` while I don't completely understand it. I would regenerate `Makefile.in` and co and probably wreak havoc in the current setup. Better ship it as it is now. If we really want lapack support we'll work it out later. \n\nActually the current configuration will work on OS X I think and it is ok not to disable it as the runtime involved comes with the OS.\n\nWhat is the last bit of `spkg-inst` supposed to do?\n\n```\n# create the script_subdirectory for the pexpect giac interface by running a trivial instruction\nsage -c \"giac(1)\"\nif [ $? -ne 0 ]; then\n    echo >&2 \"Error running the pexpect interface of giac\"\n    exit 1\nfi\n```\nWhere is the directory supposed to be created? I cannot see anything new when I run `./sage -p giac` with this branch. I was, possibly, expecting something in `local/share/sage/ext` but found nothing there.\nRunning `./sage -c \"giac(1)\"` manually afterwards didn't have an impact either.",
    "created_at": "2016-07-11T00:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304569",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'></a>Hum I am unwilling to touch the `spkg-src` while I don't completely understand it. I would regenerate `Makefile.in` and co and probably wreak havoc in the current setup. Better ship it as it is now. If we really want lapack support we'll work it out later. 

Actually the current configuration will work on OS X I think and it is ok not to disable it as the runtime involved comes with the OS.

What is the last bit of `spkg-inst` supposed to do?

```
# create the script_subdirectory for the pexpect giac interface by running a trivial instruction
sage -c "giac(1)"
if [ $? -ne 0 ]; then
    echo >&2 "Error running the pexpect interface of giac"
    exit 1
fi
```
Where is the directory supposed to be created? I cannot see anything new when I run `./sage -p giac` with this branch. I was, possibly, expecting something in `local/share/sage/ext` but found nothing there.
Running `./sage -c "giac(1)"` manually afterwards didn't have an impact either.



---

archive/issue_comments_304570.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 fbissey]:\n> Hum I am unwilling to touch the `spkg-src` while I don't completely understand it. I would regenerate `Makefile.in` and co and probably wreak havoc in the current setup. Better ship it as it is now. If we really want lapack support we'll work it out later. \n> \n> Actually the current configuration will work on OS X I think and it is ok not to disable it as the runtime involved comes with the OS.\n> \n> What is the last bit of `spkg-inst` supposed to do?\n> \n> ```\n> # create the script_subdirectory for the pexpect giac interface by running a trivial instruction\n> sage -c \"giac(1)\"\n> if [ $? -ne 0 ]; then\n>     echo >&2 \"Error running the pexpect interface of giac\"\n>     exit 1\n> fi\n> ```\n> Where is the directory supposed to be created? I cannot see anything new when I run `./sage -p giac` with this branch. I was, possibly, expecting something in `local/share/sage/ext` but found nothing there.\n> Running `./sage -c \"giac(1)\"` manually afterwards didn't have an impact either.\n\n\nIndeed It looks obsolete. may by since #17044. Moreover I think that it is the only dependency of SAGE_RUNTIMES cf #19672 comment 6 and jeroen answer. I am trying to remove both.",
    "created_at": "2016-07-11T09:20:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304570",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:17'></a>Replying to [comment:16 fbissey]:
> Hum I am unwilling to touch the `spkg-src` while I don't completely understand it. I would regenerate `Makefile.in` and co and probably wreak havoc in the current setup. Better ship it as it is now. If we really want lapack support we'll work it out later. 
> 
> Actually the current configuration will work on OS X I think and it is ok not to disable it as the runtime involved comes with the OS.
> 
> What is the last bit of `spkg-inst` supposed to do?
> 
> ```
> # create the script_subdirectory for the pexpect giac interface by running a trivial instruction
> sage -c "giac(1)"
> if [ $? -ne 0 ]; then
>     echo >&2 "Error running the pexpect interface of giac"
>     exit 1
> fi
> ```
> Where is the directory supposed to be created? I cannot see anything new when I run `./sage -p giac` with this branch. I was, possibly, expecting something in `local/share/sage/ext` but found nothing there.
> Running `./sage -c "giac(1)"` manually afterwards didn't have an impact either.


Indeed It looks obsolete. may by since #17044. Moreover I think that it is the only dependency of SAGE_RUNTIMES cf #19672 comment 6 and jeroen answer. I am trying to remove both.



---

archive/issue_comments_304571.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-11T11:33:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304571",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304572.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-11T12:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304572",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304573.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-14T10:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304573",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_304574.json:
```json
{
    "body": "<a id='comment:21'></a>The branch no longer applies.",
    "created_at": "2016-09-14T10:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304574",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>The branch no longer applies.



---

archive/issue_comments_304575.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-14T13:55:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304575",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304576.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,20 @@\n+Update the spkg to upstream 1.2.2-81\n+\n+The giac tarball built from spkg-src to put in upstream/ is there:\n+\n+http://webusers.imj-prg.fr/~frederic.han/xcas/sage/giac-1.2.2.81.tar.bz2\n+\n+Switch to .bz2 as wished in #18826\n+\n+add --disable-ao in spkg-install to avoid libao dependency.\n+remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.\n+\n+updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.\n+The tarball to put in upstream is:\n+http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.tar.gz\n+\n+The modifications about giacpy are there:\n+https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage\n \n \n Comment: 1\n```\n",
    "created_at": "2016-09-14T13:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304576",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,20 @@
+Update the spkg to upstream 1.2.2-81
+
+The giac tarball built from spkg-src to put in upstream/ is there:
+
+http://webusers.imj-prg.fr/~frederic.han/xcas/sage/giac-1.2.2.81.tar.bz2
+
+Switch to .bz2 as wished in #18826
+
+add --disable-ao in spkg-install to avoid libao dependency.
+remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.
+
+updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.
+The tarball to put in upstream is:
+http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.tar.gz
+
+The modifications about giacpy are there:
+https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage
 
 
 Comment: 1
```




---

archive/issue_comments_304577.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-22T18:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304577",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304578.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,23 @@\n+Update the spkg to upstream 1.2.2-85\n \n+The giac tarball built from spkg-src to put in upstream/ is there:\n+\n+http://webusers.imj-prg.fr/~frederic.han/xcas/sage/giac-1.2.2.85.tar.bz2\n+\n+Switch to .bz2 as wished in #18826\n+\n+add --disable-ao in spkg-install to avoid libao dependency.\n+remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.\n+\n+updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.\n+The tarball to put in upstream is:\n+http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.tar.gz\n+\n+The modifications about giacpy are there:\n+https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage\n+\n+\n+The 1.2.2.85 version of giac should fix a race condition in icas that could appear during the test suite.\n \n Comment: 1\n \n```\n",
    "created_at": "2016-09-22T18:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304578",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,23 @@
+Update the spkg to upstream 1.2.2-85
 
+The giac tarball built from spkg-src to put in upstream/ is there:
+
+http://webusers.imj-prg.fr/~frederic.han/xcas/sage/giac-1.2.2.85.tar.bz2
+
+Switch to .bz2 as wished in #18826
+
+add --disable-ao in spkg-install to avoid libao dependency.
+remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.
+
+updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.
+The tarball to put in upstream is:
+http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.tar.gz
+
+The modifications about giacpy are there:
+https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage
+
+
+The 1.2.2.85 version of giac should fix a race condition in icas that could appear during the test suite.
 
 Comment: 1
 
```




---

archive/issue_comments_304579.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-09-22T18:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304579",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_304580.json:
```json
{
    "body": "<a id='comment:27'></a>Passes `make ptestlong` with `optional=atlas,ccache,giac,git_trac,mpir,python2,sage` on a system where the old version was installed. I don't think there is something amiss in the package updates. Anyway it's an optional package and an improvement so I'll set positive.",
    "created_at": "2016-09-29T14:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304580",
    "user": "https://github.com/rwst"
}
```

<a id='comment:27'></a>Passes `make ptestlong` with `optional=atlas,ccache,giac,git_trac,mpir,python2,sage` on a system where the old version was installed. I don't think there is something amiss in the package updates. Anyway it's an optional package and an improvement so I'll set positive.



---

archive/issue_comments_304581.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-09-29T14:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304581",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_304582.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-09-30T11:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304582",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_304583.json:
```json
{
    "body": "<a id='comment:28'></a>This conflicts with blocker ticket #21441, please rebase on top of that.",
    "created_at": "2016-09-30T11:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304583",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>This conflicts with blocker ticket #21441, please rebase on top of that.



---

archive/issue_comments_304584.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-10-01T07:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304584",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_304585.json:
```json
{
    "body": "<a id='comment:31'></a>So I have rebased on u/jdemeyer/sage-pip-install",
    "created_at": "2016-10-01T22:57:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304585",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:31'></a>So I have rebased on u/jdemeyer/sage-pip-install



---

archive/issue_comments_304586.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-10-01T22:57:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304586",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_304587.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-19T14:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304587",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304588.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,23 @@\n+Update the spkg to upstream 1.2.2-95\n \n+The giac tarball built from spkg-src to put in upstream/ is there:\n+\n+http://webusers.imj-prg.fr/~frederic.han/xcas/sage/giac-1.2.2.95.tar.bz2\n+\n+Switch to .bz2 as wished in #18826\n+\n+add --disable-ao in spkg-install to avoid libao dependency.\n+remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.\n+\n+updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.\n+The tarball to put in upstream is:\n+http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.tar.gz\n+\n+The modifications about giacpy are there:\n+https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage\n+\n+\n+The 1.2.2.85 version of giac should fix a race condition in icas that could appear during the test suite.\n \n Comment: 1\n \n```\n",
    "created_at": "2016-10-19T14:09:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304588",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,23 @@
+Update the spkg to upstream 1.2.2-95
 
+The giac tarball built from spkg-src to put in upstream/ is there:
+
+http://webusers.imj-prg.fr/~frederic.han/xcas/sage/giac-1.2.2.95.tar.bz2
+
+Switch to .bz2 as wished in #18826
+
+add --disable-ao in spkg-install to avoid libao dependency.
+remove the --disable-gmpxx in spkg-install. The built seems not broken anymore.
+
+updtate giacpy to 0.6 doctest fix + change of name to giacpy_sage.
+The tarball to put in upstream is:
+http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.tar.gz
+
+The modifications about giacpy are there:
+https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage
+
+
+The 1.2.2.85 version of giac should fix a race condition in icas that could appear during the test suite.
 
 Comment: 1
 
```




---

archive/issue_events_056075.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-20T06:32:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20946#event-56075"
}
```



---

archive/issue_comments_304589.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-10-20T06:32:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304589",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_304590.json:
```json
{
    "body": "<a id='comment:34'></a>I am not sure why this is not back to positive review. Let's try again.",
    "created_at": "2016-10-20T06:32:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304590",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:34'></a>I am not sure why this is not back to positive review. Let's try again.



---

archive/issue_comments_304591.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-10-21T07:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20946#issuecomment-304591",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_056076.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-21T07:03:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20946",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20946#event-56076"
}
```
