# Issue 20296: MixedIntegerLinearProgram: New backend using InteractiveLPProblem

archive/issues_020059.json:
```json
{
    "body": "If one has to solve a small LP with irrational (say, `AA`) data (and needs access to the exact solution), the only available tool is the didactical implementation of the simplex method in `InteractiveLPProblem` (but see #18735). This ticket implements a `MixedIntegerLinearProgram` backend using `InteractiveLPProblem`.\n\nExample:\n\n```\n            sage: poly = polytopes.dodecahedron(base_ring=AA)\n            sage: lp = poly.to_linear_program(solver='InteractiveLP')\n            sage: b = lp.get_backend()\n            sage: b.set_objective([1, 1, 1])\n            sage: lp.solve()\n            2.291796067500631?\n```\n(This example uses backend functions because of #20301; and the `base_ring=AA` is there because of #13041.)\n\nCC:  @dimpase @novoselt @nathanncohen @videlec @fchapoton\n\nKeywords: lp\n\nBranch/Commit: 8c1fd4ac48dac291a2cd0af8668287254977977a\n\nReviewer: Andrey Novoseltsev, Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20296\n\n",
    "closed_at": "2016-04-06T23:03:29Z",
    "created_at": "2016-03-26T02:40:10Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "MixedIntegerLinearProgram: New backend using InteractiveLPProblem",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20296",
    "user": "https://github.com/mkoeppe"
}
```
If one has to solve a small LP with irrational (say, `AA`) data (and needs access to the exact solution), the only available tool is the didactical implementation of the simplex method in `InteractiveLPProblem` (but see #18735). This ticket implements a `MixedIntegerLinearProgram` backend using `InteractiveLPProblem`.

Example:

```
            sage: poly = polytopes.dodecahedron(base_ring=AA)
            sage: lp = poly.to_linear_program(solver='InteractiveLP')
            sage: b = lp.get_backend()
            sage: b.set_objective([1, 1, 1])
            sage: lp.solve()
            2.291796067500631?
```
(This example uses backend functions because of #20301; and the `base_ring=AA` is there because of #13041.)

CC:  @dimpase @novoselt @nathanncohen @videlec @fchapoton

Keywords: lp

Branch/Commit: 8c1fd4ac48dac291a2cd0af8668287254977977a

Reviewer: Andrey Novoseltsev, Dima Pasechnik

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20296





---

archive/issue_comments_293942.json:
```json
{
    "body": "<a id='comment:2'></a>Needs review.\n\nSome remarks:\n- I'm using some _internals of `InteractiveLPProblem` (`_constraint_types`, `_variable_types`, `_problem_type`, `_is_negative`) because some accessor methods are missing. Should I be adding them?\n- There's should be a way to choose the base ring for the solver (right now I'm using AA -- but ultimately I'd like to use an embedded number field), but I'm not sure about the interface... perhaps  ` MixedIntegerLinearProgram(solver=('InteractiveLP', AA)) ` or `MixedIntegerLinearProgram(solver='InteractiveLP', base_ring=AA`\n\n---\nNew commits:",
    "created_at": "2016-03-27T00:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293942",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Needs review.

Some remarks:
- I'm using some _internals of `InteractiveLPProblem` (`_constraint_types`, `_variable_types`, `_problem_type`, `_is_negative`) because some accessor methods are missing. Should I be adding them?
- There's should be a way to choose the base ring for the solver (right now I'm using AA -- but ultimately I'd like to use an embedded number field), but I'm not sure about the interface... perhaps  ` MixedIntegerLinearProgram(solver=('InteractiveLP', AA)) ` or `MixedIntegerLinearProgram(solver='InteractiveLP', base_ring=AA`

---
New commits:



---

archive/issue_comments_293943.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-03-27T00:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293943",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_293944.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,16 @@\n-If one has to solve a small LP with irrational (say, AA) data (and needs access to the exact solution), the only available tool is the didactical implementation of the simplex method in `InteractiveLPProblem` (but see #18735). This ticket implements a `MixedIntegerLinearProgram` backend using `InteractiveLPProblem`.\n+If one has to solve a small LP with irrational (say, `AA`) data (and needs access to the exact solution), the only available tool is the didactical implementation of the simplex method in `InteractiveLPProblem` (but see #18735). This ticket implements a `MixedIntegerLinearProgram` backend using `InteractiveLPProblem`.\n+\n+Example:\n+\n+```\n+            sage: poly = polytopes.dodecahedron(base_ring=AA)\n+            sage: lp = poly.to_linear_program(solver='InteractiveLP')\n+            sage: b = lp.get_backend()\n+            sage: b.set_objective([1, 1, 1])\n+            sage: lp.solve()\n+            2.291796067500631?\n+```\n+(This example uses backend functions because of #20301 .)\n \n Comment: 1\n \n``````\n",
    "created_at": "2016-03-27T00:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293944",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,16 @@
-If one has to solve a small LP with irrational (say, AA) data (and needs access to the exact solution), the only available tool is the didactical implementation of the simplex method in `InteractiveLPProblem` (but see #18735). This ticket implements a `MixedIntegerLinearProgram` backend using `InteractiveLPProblem`.
+If one has to solve a small LP with irrational (say, `AA`) data (and needs access to the exact solution), the only available tool is the didactical implementation of the simplex method in `InteractiveLPProblem` (but see #18735). This ticket implements a `MixedIntegerLinearProgram` backend using `InteractiveLPProblem`.
+
+Example:
+
+```
+            sage: poly = polytopes.dodecahedron(base_ring=AA)
+            sage: lp = poly.to_linear_program(solver='InteractiveLP')
+            sage: b = lp.get_backend()
+            sage: b.set_objective([1, 1, 1])
+            sage: lp.solve()
+            2.291796067500631?
+```
+(This example uses backend functions because of #20301 .)
 
 Comment: 1
 
``````




---

archive/issue_comments_293945.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,16 @@\n+If one has to solve a small LP with irrational (say, `AA`) data (and needs access to the exact solution), the only available tool is the didactical implementation of the simplex method in `InteractiveLPProblem` (but see #18735). This ticket implements a `MixedIntegerLinearProgram` backend using `InteractiveLPProblem`.\n \n+Example:\n+\n+```\n+            sage: poly = polytopes.dodecahedron(base_ring=AA)\n+            sage: lp = poly.to_linear_program(solver='InteractiveLP')\n+            sage: b = lp.get_backend()\n+            sage: b.set_objective([1, 1, 1])\n+            sage: lp.solve()\n+            2.291796067500631?\n+```\n+(This example uses backend functions because of #20301; and the `base_ring=AA` is there because of #13041.)\n \n Comment: 1\n \n``````\n",
    "created_at": "2016-03-27T02:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293945",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,16 @@
+If one has to solve a small LP with irrational (say, `AA`) data (and needs access to the exact solution), the only available tool is the didactical implementation of the simplex method in `InteractiveLPProblem` (but see #18735). This ticket implements a `MixedIntegerLinearProgram` backend using `InteractiveLPProblem`.
 
+Example:
+
+```
+            sage: poly = polytopes.dodecahedron(base_ring=AA)
+            sage: lp = poly.to_linear_program(solver='InteractiveLP')
+            sage: b = lp.get_backend()
+            sage: b.set_objective([1, 1, 1])
+            sage: lp.solve()
+            2.291796067500631?
+```
+(This example uses backend functions because of #20301; and the `base_ring=AA` is there because of #13041.)
 
 Comment: 1
 
``````




---

archive/issue_comments_293946.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:2 mkoeppe]:\n> Some remarks:\n> - I'm using some _internals of `InteractiveLPProblem` (`_constraint_types`, `_variable_types`, `_problem_type`, `_is_negative`) because some accessor methods are missing. Should I be adding them?\n\n\nI think so - the reason they are missing is that they were never needed before. Using guts directly makes sense inside of ILLP itself, but now that you have a dependent module there has to be documented and tested way to access them.\n\n>  - There's should be a way to choose the base ring for the solver (right now I'm using AA -- but ultimately I'd like to use an embedded number field), but I'm not sure about the interface... perhaps  ` MixedIntegerLinearProgram(solver=('InteractiveLP', AA)) ` or `MixedIntegerLinearProgram(solver='InteractiveLP', base_ring=AA`\n\n\n`base_ring=AA` seems to be more common (and I think it is common to use `ring` even when only field would really make sense).",
    "created_at": "2016-03-27T05:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293946",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'></a>Replying to [comment:2 mkoeppe]:
> Some remarks:
> - I'm using some _internals of `InteractiveLPProblem` (`_constraint_types`, `_variable_types`, `_problem_type`, `_is_negative`) because some accessor methods are missing. Should I be adding them?


I think so - the reason they are missing is that they were never needed before. Using guts directly makes sense inside of ILLP itself, but now that you have a dependent module there has to be documented and tested way to access them.

>  - There's should be a way to choose the base ring for the solver (right now I'm using AA -- but ultimately I'd like to use an embedded number field), but I'm not sure about the interface... perhaps  ` MixedIntegerLinearProgram(solver=('InteractiveLP', AA)) ` or `MixedIntegerLinearProgram(solver='InteractiveLP', base_ring=AA`


`base_ring=AA` seems to be more common (and I think it is common to use `ring` even when only field would really make sense).



---

archive/issue_comments_293947.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-27T05:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293948.json:
```json
{
    "body": "<a id='comment:6'></a>I've added these accessor methods and changed my code to use them.\nTwo more things regarding `InteractiveLPProblem`:\n- I think `InteractiveLPProblem.standard_form` should allow the user to pass names for the slack variables\n- It would be nice if `InteractiveLPProblem`would support an additive constant in the objective function (see `obj_constant_term` in my code)",
    "created_at": "2016-03-27T06:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293948",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>I've added these accessor methods and changed my code to use them.
Two more things regarding `InteractiveLPProblem`:
- I think `InteractiveLPProblem.standard_form` should allow the user to pass names for the slack variables
- It would be nice if `InteractiveLPProblem`would support an additive constant in the objective function (see `obj_constant_term` in my code)



---

archive/issue_comments_293949.json:
```json
{
    "body": "<a id='comment:7'></a>Regarding `problem_type` method - why do you add minus there? It seems to me that your old code was not adding it so either it was wrong or it is wrong now. And for the method itself I think it makes more sense to return just `self._problem_type` as is and mention in documentation that there is also `is_negative` method and they need to be used together.\n\nPassing through parameters to the constructor would make sense. And adding a constant to non-standard form would be handy. Let me work on it today actually and take a break from digging in JavaScript!\n\nAlso, it would be nice if someone closer to LP backends did the full review of this ticket.",
    "created_at": "2016-03-27T17:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293949",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:7'></a>Regarding `problem_type` method - why do you add minus there? It seems to me that your old code was not adding it so either it was wrong or it is wrong now. And for the method itself I think it makes more sense to return just `self._problem_type` as is and mention in documentation that there is also `is_negative` method and they need to be used together.

Passing through parameters to the constructor would make sense. And adding a constant to non-standard form would be handy. Let me work on it today actually and take a break from digging in JavaScript!

Also, it would be nice if someone closer to LP backends did the full review of this ticket.



---

archive/issue_comments_293950.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-27T18:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293950",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293951.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:7 novoselt]:\n> Regarding `problem_type` method - why do you add minus there? It seems to me that your old code was not adding it so either it was wrong or it is wrong now. And for the method itself I think it makes more sense to return just `self._problem_type` as is and mention in documentation that there is also `is_negative` method and they need to be used together.\n\n\nOK, I've changed it. \nFor my code, it does not make any difference because I don't construct \"-max\" or \"-min\" problems. \nI only have to deal with `is_negative` once, for the standard-form problem that is created while solving.\n\n> Passing through parameters to the constructor would make sense. And adding a constant to non-standard form would be handy. Let me work on it today actually and take a break from digging in JavaScript!\n\n\nThanks!\n\n> Also, it would be nice if someone closer to LP backends did the full review of this ticket.\n\n\nYes, I'm hoping that someone on the Cc list could take a look...",
    "created_at": "2016-03-27T18:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293951",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>Replying to [comment:7 novoselt]:
> Regarding `problem_type` method - why do you add minus there? It seems to me that your old code was not adding it so either it was wrong or it is wrong now. And for the method itself I think it makes more sense to return just `self._problem_type` as is and mention in documentation that there is also `is_negative` method and they need to be used together.


OK, I've changed it. 
For my code, it does not make any difference because I don't construct "-max" or "-min" problems. 
I only have to deal with `is_negative` once, for the standard-form problem that is created while solving.

> Passing through parameters to the constructor would make sense. And adding a constant to non-standard form would be handy. Let me work on it today actually and take a break from digging in JavaScript!


Thanks!

> Also, it would be nice if someone closer to LP backends did the full review of this ticket.


Yes, I'm hoping that someone on the Cc list could take a look...



---

archive/issue_comments_293952.json:
```json
{
    "body": "<a id='comment:10'></a>By the way, the `interactive_simplex_method` code should probably check for variable-name clashes between auto-generated and user-supplied variable names. It gets quite confused, for example, when a variable named \"x0\" is introduced because it thinks it is the primal-phase-1 auxiliary variable.",
    "created_at": "2016-03-27T19:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293952",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>By the way, the `interactive_simplex_method` code should probably check for variable-name clashes between auto-generated and user-supplied variable names. It gets quite confused, for example, when a variable named "x0" is introduced because it thinks it is the primal-phase-1 auxiliary variable.



---

archive/issue_comments_293953.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-27T19:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293953",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293954.json:
```json
{
    "body": "<a id='comment:12'></a>Another wishlist item for `interactive_simplex_method`: `standard_form` should provide a linear map that transforms a solution back to the original variables. (If `InteractiveLPProblem` wants to support arbitrary variable bounds in the future, it would have to be an affine linear map.)",
    "created_at": "2016-03-27T19:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293954",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Another wishlist item for `interactive_simplex_method`: `standard_form` should provide a linear map that transforms a solution back to the original variables. (If `InteractiveLPProblem` wants to support arbitrary variable bounds in the future, it would have to be an affine linear map.)



---

archive/issue_comments_293955.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-27T20:16:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293955",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293956.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-27T21:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293956",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293957.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-27T21:47:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293957",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293958.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-27T21:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293959.json:
```json
{
    "body": "<a id='comment:17'></a>I think everything and a little more but name clashes are implemented in #20311.\n\nRegarding variable names, it is sort of by design that auxiliary variable can be one of the decision ones - that's how auxiliary problems are distinguished. It may not be the best choice but changing it should be done carefully. In all other cases name clashes should throw errors and users are responsible for either adjusting their choices or overriding defaults to avoid conflict.",
    "created_at": "2016-03-27T23:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293959",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:17'></a>I think everything and a little more but name clashes are implemented in #20311.

Regarding variable names, it is sort of by design that auxiliary variable can be one of the decision ones - that's how auxiliary problems are distinguished. It may not be the best choice but changing it should be done carefully. In all other cases name clashes should throw errors and users are responsible for either adjusting their choices or overriding defaults to avoid conflict.



---

archive/issue_comments_293960.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-28T01:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293960",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293961.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-30T03:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293961",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293962.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-31T18:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293962",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293963.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-31T20:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293963",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293964.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-03T19:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293964",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293965.json:
```json
{
    "body": "<a id='comment:23'></a>there are long commented out blocks, like `cpdef solver_parameter`, and ones for file output. Can you remove them?",
    "created_at": "2016-04-05T15:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293965",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>there are long commented out blocks, like `cpdef solver_parameter`, and ones for file output. Can you remove them?



---

archive/issue_comments_293966.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-05T15:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293966",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293967.json:
```json
{
    "body": "<a id='comment:25'></a>Can we have a real example of solving an LP over algebraic numbers?\nI tried to create one by using #20301, but it does not quite fly:\n\n```\nsage: d=polytopes.dodecahedron()\nsage: p,x=d.to_linear_program(solver='InteractiveLP',return_variable=True)\nsage: p.set_objective(x[0]+x[1]+x[2])\nsage: p.solve()\n2.291796067500631?\nsage: p.get_values()\n[]\nsage: p.get_values(x)\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n<ipython-input-21-d8eb94d9ce26> in <module>()\n----> 1 p.get_values(x)\n\n/home/dima/software/sage/src/sage/numerical/mip.pyx in sage.numerical.mip.MixedIntegerLinearProgram.get_values (build/cythonized/sage/numerical/mip.c:9812)()\n   1366                 c = {}\n   1367                 for (k,v) in l.items():\n-> 1368                     c[k] = self._backend.get_variable_value(self._variables[v])\n   1369                 val.append(c)\n   1370             elif isinstance(l, list):\n\n/home/dima/software/sage/src/sage/numerical/backends/interactivelp_backend.pyx in sage.numerical.backends.interactivelp_backend.InteractiveLPBackend.get_variable_value (build/cythonized/sage/numerical/backends/interactivelp_backend.c:8385)()\n    700         \"\"\"\n    701         if str(self.lp.decision_variables()[variable]) != str(self.lp_std_form.decision_variables()[variable]):\n--> 702             raise NotImplementedError(\"Undoing the standard-form transformation is not implemented\")\n    703         return self.final_dictionary.basic_solution()[variable]\n    704 \n\nNotImplementedError: Undoing the standard-form transformation is not implemented\n```\n\nanyway, that `p.get_values(x)` ought to be fixed, perhaps on another ticket. By now you can still make this ticket depend on #20301, and give the above (without `p.get_values(x)`) as a doctest. \nOr perhaps you know a workaround to get the values regardless?",
    "created_at": "2016-04-05T15:28:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293967",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>Can we have a real example of solving an LP over algebraic numbers?
I tried to create one by using #20301, but it does not quite fly:

```
sage: d=polytopes.dodecahedron()
sage: p,x=d.to_linear_program(solver='InteractiveLP',return_variable=True)
sage: p.set_objective(x[0]+x[1]+x[2])
sage: p.solve()
2.291796067500631?
sage: p.get_values()
[]
sage: p.get_values(x)
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
<ipython-input-21-d8eb94d9ce26> in <module>()
----> 1 p.get_values(x)

/home/dima/software/sage/src/sage/numerical/mip.pyx in sage.numerical.mip.MixedIntegerLinearProgram.get_values (build/cythonized/sage/numerical/mip.c:9812)()
   1366                 c = {}
   1367                 for (k,v) in l.items():
-> 1368                     c[k] = self._backend.get_variable_value(self._variables[v])
   1369                 val.append(c)
   1370             elif isinstance(l, list):

/home/dima/software/sage/src/sage/numerical/backends/interactivelp_backend.pyx in sage.numerical.backends.interactivelp_backend.InteractiveLPBackend.get_variable_value (build/cythonized/sage/numerical/backends/interactivelp_backend.c:8385)()
    700         """
    701         if str(self.lp.decision_variables()[variable]) != str(self.lp_std_form.decision_variables()[variable]):
--> 702             raise NotImplementedError("Undoing the standard-form transformation is not implemented")
    703         return self.final_dictionary.basic_solution()[variable]
    704 

NotImplementedError: Undoing the standard-form transformation is not implemented
```

anyway, that `p.get_values(x)` ought to be fixed, perhaps on another ticket. By now you can still make this ticket depend on #20301, and give the above (without `p.get_values(x)`) as a doctest. 
Or perhaps you know a workaround to get the values regardless?



---

archive/issue_comments_293968.json:
```json
{
    "body": "<a id='comment:26'></a>#20311 implements going back from the standard form, so will allow to address this problem.",
    "created_at": "2016-04-05T15:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293968",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:26'></a>#20311 implements going back from the standard form, so will allow to address this problem.



---

archive/issue_comments_293969.json:
```json
{
    "body": "<a id='comment:27'></a>Until #20301 and #20311 are merged into develop, I will modify the test with algebraic numbers as follows so you can see the solution vector, using backend methods:\n\n```\n            sage: poly = polytopes.dodecahedron(base_ring=AA)\n            sage: lp = poly.to_linear_program(solver='InteractiveLP')\n            sage: b = lp.get_backend()\n            sage: for k in range(3): b.variable_lower_bound(k, 0)\n            sage: b.set_objective([1, 1, 1])\n            sage: lp.solve()\n            2.291796067500631?\n            sage: [b.get_variable_value(k) for k in range(3)]\n            [0.763932022500211?, 0.763932022500211?, 0.763932022500211?]\n```\n(I already have a patch on a branch that uses these tickets and has a prettier version of this example.)",
    "created_at": "2016-04-05T15:49:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293969",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Until #20301 and #20311 are merged into develop, I will modify the test with algebraic numbers as follows so you can see the solution vector, using backend methods:

```
            sage: poly = polytopes.dodecahedron(base_ring=AA)
            sage: lp = poly.to_linear_program(solver='InteractiveLP')
            sage: b = lp.get_backend()
            sage: for k in range(3): b.variable_lower_bound(k, 0)
            sage: b.set_objective([1, 1, 1])
            sage: lp.solve()
            2.291796067500631?
            sage: [b.get_variable_value(k) for k in range(3)]
            [0.763932022500211?, 0.763932022500211?, 0.763932022500211?]
```
(I already have a patch on a branch that uses these tickets and has a prettier version of this example.)



---

archive/issue_comments_293970.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-05T16:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293970",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293971.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-05T16:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293972.json:
```json
{
    "body": "<a id='comment:30'></a>in the last commit, the line \n\n```\nsage: p = get_solver('InteractiveLP', base_ring=QQ)\n```\nshould be\n\n```\nsage: p = get_solver('InteractiveLP', base_ring=QQ); p\n```\n\notherwise the doctest fails",
    "created_at": "2016-04-05T22:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293972",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:30'></a>in the last commit, the line 

```
sage: p = get_solver('InteractiveLP', base_ring=QQ)
```
should be

```
sage: p = get_solver('InteractiveLP', base_ring=QQ); p
```

otherwise the doctest fails



---

archive/issue_comments_293973.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-05T23:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293973",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_293974.json:
```json
{
    "body": "<a id='comment:32'></a>Thanks. \nAnother thing was wrong with this simple line. Annoyingly, the first argument to `get_solver` is not the solver name but rather the obscure argument `constraint_generation`.",
    "created_at": "2016-04-05T23:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293974",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Thanks. 
Another thing was wrong with this simple line. Annoyingly, the first argument to `get_solver` is not the solver name but rather the obscure argument `constraint_generation`.



---

archive/issue_comments_293975.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-04-05T23:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293975",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_293976.json:
```json
{
    "body": "<a id='comment:33'></a>OK, good.",
    "created_at": "2016-04-05T23:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293976",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>OK, good.



---

archive/issue_comments_293977.json:
```json
{
    "body": "<a id='comment:34'></a>Thanks for reviewing!",
    "created_at": "2016-04-05T23:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293977",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>Thanks for reviewing!



---

archive/issue_comments_293978.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-04-06T23:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20296#issuecomment-293978",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_055059.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-06T23:03:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20296",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20296#event-55059"
}
```
