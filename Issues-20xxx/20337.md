# Issue 20337: MIP: Several fixes regarding constant terms in the objective function

archive/issues_020100.json:
```json
{
    "body": "Contrary to documentation, one cannot set a constantly zero objective function by passing 0 to `set_objective`.\n\n```\n    sage: p = MixedIntegerLinearProgram(maximization=True)\n    sage: x = p.new_variable(nonnegative=True)\n    sage: p.set_objective(0)\n    AttributeError: 'sage.rings.integer.Integer' object has no attribute 'dict'\n```\nThis ticket fixes that and actually allows any field number (which ends up in the `obj_constant_term`). \n\nMoreover, the backend slot `obj_constant_term` is accessed directly by `MixedIntegerLinearProgram.show`; it should instead be exposed by a backend method, which this ticket adds as well.\n\nFinally, the `show` method added an extraneous blank line when a nonzero `obj_constant_term` was present.  Fixed and doctest added.\n\nCC:  @dimpase @videlec @jdemeyer\n\nKeywords: lp\n\nBranch/Commit: ad40508934049090580c678ec4249588273b43cf\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20337\n\n",
    "closed_at": "2016-04-05T12:34:58Z",
    "created_at": "2016-03-31T17:56:38Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "MIP: Several fixes regarding constant terms in the objective function",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20337",
    "user": "https://github.com/mkoeppe"
}
```
Contrary to documentation, one cannot set a constantly zero objective function by passing 0 to `set_objective`.

```
    sage: p = MixedIntegerLinearProgram(maximization=True)
    sage: x = p.new_variable(nonnegative=True)
    sage: p.set_objective(0)
    AttributeError: 'sage.rings.integer.Integer' object has no attribute 'dict'
```
This ticket fixes that and actually allows any field number (which ends up in the `obj_constant_term`). 

Moreover, the backend slot `obj_constant_term` is accessed directly by `MixedIntegerLinearProgram.show`; it should instead be exposed by a backend method, which this ticket adds as well.

Finally, the `show` method added an extraneous blank line when a nonzero `obj_constant_term` was present.  Fixed and doctest added.

CC:  @dimpase @videlec @jdemeyer

Keywords: lp

Branch/Commit: ad40508934049090580c678ec4249588273b43cf

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20337





---

archive/issue_comments_368947.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/mip_backends__obj_constant_term_should_be_exposed_by_a_backend_method\"",
    "created_at": "2016-04-02T05:48:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368947",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/mip_backends__obj_constant_term_should_be_exposed_by_a_backend_method"



---

archive/issue_comments_368948.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2016-04-02T05:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368948",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_368949.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-04-02T05:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368949",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_368950.json:
```json
{
    "body": "Changing commit from \"\" to \"ad40508934049090580c678ec4249588273b43cf\"",
    "created_at": "2016-04-02T05:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368950",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "ad40508934049090580c678ec4249588273b43cf"



---

archive/issue_comments_368951.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,13 @@\n-... rather than being accessed directly in `MixedIntegerLinearProgram.show`\n+Contrary to documentation, one cannot set a constantly zero objective function by passing 0 to `set_objective`.\n \n+```\n+    sage: p = MixedIntegerLinearProgram(maximization=True)\n+    sage: x = p.new_variable(nonnegative=True)\n+    sage: p.set_objective(0)\n+    AttributeError: 'sage.rings.integer.Integer' object has no attribute 'dict'\n+```\n+This ticket fixes that and actually allows any field number (which ends up in the `obj_constant_term`). \n+\n+Moreover, the backend slot `obj_constant_term` is accessed directly by `MixedIntegerLinearProgram.show`; it should instead be exposed by a backend method, which this ticket adds as well.\n+\n+Finally, the `show` method added an extraneous blank line when a nonzero `obj_constant_term` was present.  Fixed and doctest added.\n``````\n",
    "created_at": "2016-04-02T05:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368951",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,13 @@
-... rather than being accessed directly in `MixedIntegerLinearProgram.show`
+Contrary to documentation, one cannot set a constantly zero objective function by passing 0 to `set_objective`.
 
+```
+    sage: p = MixedIntegerLinearProgram(maximization=True)
+    sage: x = p.new_variable(nonnegative=True)
+    sage: p.set_objective(0)
+    AttributeError: 'sage.rings.integer.Integer' object has no attribute 'dict'
+```
+This ticket fixes that and actually allows any field number (which ends up in the `obj_constant_term`). 
+
+Moreover, the backend slot `obj_constant_term` is accessed directly by `MixedIntegerLinearProgram.show`; it should instead be exposed by a backend method, which this ticket adds as well.
+
+Finally, the `show` method added an extraneous blank line when a nonzero `obj_constant_term` was present.  Fixed and doctest added.
``````




---

archive/issue_comments_368952.json:
```json
{
    "body": "<a id='comment:3'></a>do all backends support this? how do we know?",
    "created_at": "2016-04-03T17:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368952",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>do all backends support this? how do we know?



---

archive/issue_comments_368953.json:
```json
{
    "body": "<a id='comment:4'></a>Objective constant terms are already part of the backend interface.\n\n#20323 addresses the issue of making the testing of backends more rigorous.",
    "created_at": "2016-04-03T17:40:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368953",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>Objective constant terms are already part of the backend interface.

#20323 addresses the issue of making the testing of backends more rigorous.



---

archive/issue_comments_368954.json:
```json
{
    "body": "<a id='comment:5'></a>ok.",
    "created_at": "2016-04-03T17:51:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368954",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>ok.



---

archive/issue_comments_368955.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-04-03T17:51:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368955",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_368956.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2016-04-03T17:51:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368956",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_368957.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-04-03T23:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368957",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_368958.json:
```json
{
    "body": "<a id='comment:6'></a>Author name",
    "created_at": "2016-04-03T23:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368958",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>Author name



---

archive/issue_comments_368959.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2016-04-03T23:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368959",
    "user": "https://github.com/dimpase"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_368960.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-04-03T23:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368960",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_368961.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-04-05T12:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368961",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_368962.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/mip_backends__obj_constant_term_should_be_exposed_by_a_backend_method\" to \"ad40508934049090580c678ec4249588273b43cf\"",
    "created_at": "2016-04-05T12:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20337#issuecomment-368962",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/mip_backends__obj_constant_term_should_be_exposed_by_a_backend_method" to "ad40508934049090580c678ec4249588273b43cf"



---

archive/issue_events_055154.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-05T12:34:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20337",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20337#event-55154"
}
```
