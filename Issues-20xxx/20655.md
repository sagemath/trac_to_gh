# Issue 20655: R installation failing on Cygwin

archive/issues_020418.json:
```json
{
    "assignees": [],
    "body": "When running a `make` of Sage on Cygwin the build fails upon installation of R.  I will attach the full log, but the relevant error is:\n\n```\nmake[4]: Entering directory '/home/embray/src/sagemath/sage/local/var/tmp/sage/build/r-3.2.4-revised.p0/R-revised/src/library/Recommended'\nbegin installing recommended package MASS\nINSTALL: unknown option -- pkglock\nTry 'INSTALL --help' for more information.\nMakefile:51: recipe for target 'MASS.ts' failed\nmake[4]: *** [MASS.ts] Error 1\nmake[4]: Leaving directory '/home/embray/src/sagemath/sage/local/var/tmp/sage/build/r-3.2.4-revised.p0/R-revised/src/library/Recommended'\nMakefile:39: recipe for target 'recommended-packages' failed\n```\n\n`--pkglock` is an argument to the `INSTALL` script for installing R packages.  But it seems it's been passed in as literally `-- pkglock` (with a space).  Not sure why.\n\nThis issue also raises the question again about whether to make R an optional package (as well as whether to allow Sage to use a system install of R).\n\nKeywords: **windows cygwin R**\n\nBranch/Commit: **[`b2ebe0b`](https://github.com/sagemath/sagetrac-mirror/commit/b2ebe0b1c13b61aeccbbf87fbf44351a82044455)**\n\nUpstream: **None of the above - read trac for reasoning.**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Erik Bray**\n\nComponent: **porting: Cygwin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20655_\n\n",
    "closed_at": "2016-08-19T22:45:12Z",
    "created_at": "2016-05-23T08:49:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "R installation failing on Cygwin",
    "type": "issue",
    "updated_at": "2016-08-19T22:45:12Z",
    "url": "https://github.com/sagemath/sage/issues/20655",
    "user": "https://github.com/embray"
}
```
When running a `make` of Sage on Cygwin the build fails upon installation of R.  I will attach the full log, but the relevant error is:

```
make[4]: Entering directory '/home/embray/src/sagemath/sage/local/var/tmp/sage/build/r-3.2.4-revised.p0/R-revised/src/library/Recommended'
begin installing recommended package MASS
INSTALL: unknown option -- pkglock
Try 'INSTALL --help' for more information.
Makefile:51: recipe for target 'MASS.ts' failed
make[4]: *** [MASS.ts] Error 1
make[4]: Leaving directory '/home/embray/src/sagemath/sage/local/var/tmp/sage/build/r-3.2.4-revised.p0/R-revised/src/library/Recommended'
Makefile:39: recipe for target 'recommended-packages' failed
```

`--pkglock` is an argument to the `INSTALL` script for installing R packages.  But it seems it's been passed in as literally `-- pkglock` (with a space).  Not sure why.

This issue also raises the question again about whether to make R an optional package (as well as whether to allow Sage to use a system install of R).

Keywords: **windows cygwin R**

Branch/Commit: **[`b2ebe0b`](https://github.com/sagemath/sagetrac-mirror/commit/b2ebe0b1c13b61aeccbbf87fbf44351a82044455)**

Upstream: **None of the above - read trac for reasoning.**

Reviewer: **Jeroen Demeyer**

Author: **Erik Bray**

Component: **porting: Cygwin**

_Issue created by migration from https://trac.sagemath.org/ticket/20655_





---

archive/issue_events_292213.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-23T08:49:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292213"
}
```



---

archive/issue_events_292214.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-23T08:49:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "000080",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292214"
}
```



---

archive/issue_events_292215.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-23T08:49:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292215"
}
```



---

archive/issue_events_292216.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-23T08:49:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292216"
}
```



---

archive/issue_events_292217.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-23T08:49:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "000080",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292217"
}
```



---

archive/issue_comments_298590.json:
```json
{
    "body": "Attachment: **[r-3.2.4-revised.p0.log](https://github.com/sagemath/sage/files/ticket20655/r-3.2.4-revised.p0.log)**",
    "created_at": "2016-05-23T08:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298590",
    "user": "https://github.com/embray"
}
```

Attachment: **[r-3.2.4-revised.p0.log](https://github.com/sagemath/sage/files/ticket20655/r-3.2.4-revised.p0.log)**



---

archive/issue_comments_298591.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAhahahahah  I at least slightly understand better.  I was losing my mind because I could not for the life of me find where this error message could be coming from.\n\nTurns out it's coming from the GNU `install` command, which gets confused for R's `INSTALL` command on Windows because case-insensitivity.",
    "created_at": "2016-05-24T14:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298591",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">comment:1</div>

Ahahahahah  I at least slightly understand better.  I was losing my mind because I could not for the life of me find where this error message could be coming from.

Turns out it's coming from the GNU `install` command, which gets confused for R's `INSTALL` command on Windows because case-insensitivity.



---

archive/issue_comments_298592.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nOkay, I think this is a bug in R IMO.\n\nR installs a bunch of \"scripts\" particular to R with names like `BUILD` and `INSTALL`.  R's install mistakenly marks these \"scripts\" as executable even though they do not contain a shebang line, so they are technically not executable in that sense.  Instead it runs those scripts from a main script (called `Rcmd`) using `exec`.\n\nThe problem here is that `Rcmd` only run these R-specific scripts *if* they are executable, and exist in `$R_HOME/bin`.  Realistically just whether they exist and are files in `$R_HOME/bin` should be good enough, since there shouldn't be any non-executable files in there.   If nothing else it should try to exec and if that fails it will return a permission error.  On Cygwin `exec` doesn't care if the file is marked executable or not, for this reason.  It will just try to execute it.",
    "created_at": "2016-05-24T15:38:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298592",
    "user": "https://github.com/embray"
}
```

<div id="comment:2" align="right">comment:2</div>

Okay, I think this is a bug in R IMO.

R installs a bunch of "scripts" particular to R with names like `BUILD` and `INSTALL`.  R's install mistakenly marks these "scripts" as executable even though they do not contain a shebang line, so they are technically not executable in that sense.  Instead it runs those scripts from a main script (called `Rcmd`) using `exec`.

The problem here is that `Rcmd` only run these R-specific scripts *if* they are executable, and exist in `$R_HOME/bin`.  Realistically just whether they exist and are files in `$R_HOME/bin` should be good enough, since there shouldn't be any non-executable files in there.   If nothing else it should try to exec and if that fails it will return a permission error.  On Cygwin `exec` doesn't care if the file is marked executable or not, for this reason.  It will just try to execute it.



---

archive/issue_comments_298593.json:
```json
{
    "body": "Upstream: **Not yet reported upstream; Will do shortly.**",
    "created_at": "2016-05-24T15:38:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298593",
    "user": "https://github.com/embray"
}
```

Upstream: **Not yet reported upstream; Will do shortly.**



---

archive/issue_comments_298594.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI guess on *nix it still has to mark those scripts as executable in order for them to work with `exec`, even though they are not strictly executable on their own.  Without a shebang line the shell will still try to execute them in the current shell process so I guess I rescind my complaint about them being marked executable.\n\nNevertheless the `test -x` used before executing them won't work sometimes on Cygwin :/",
    "created_at": "2016-05-24T15:51:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298594",
    "user": "https://github.com/embray"
}
```

<div id="comment:4" align="right">comment:4</div>

I guess on *nix it still has to mark those scripts as executable in order for them to work with `exec`, even though they are not strictly executable on their own.  Without a shebang line the shell will still try to execute them in the current shell process so I guess I rescind my complaint about them being marked executable.

Nevertheless the `test -x` used before executing them won't work sometimes on Cygwin :/



---

archive/issue_comments_298595.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThis adds a patch that is the bare minimum to work around the issue and is essentially harmless.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04d57eb05c1d473352c1d0fd482d7a5b89fd3f5d\"><code>04d57eb</code></a></td><td><code>Add patch for R needed for the 'R CMD' command to work on Cygwin.</code></td></tr></table>\n",
    "created_at": "2016-05-25T12:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298595",
    "user": "https://github.com/embray"
}
```

<div id="comment:5" align="right">comment:5</div>

This adds a patch that is the bare minimum to work around the issue and is essentially harmless.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04d57eb05c1d473352c1d0fd482d7a5b89fd3f5d"><code>04d57eb</code></a></td><td><code>Add patch for R needed for the 'R CMD' command to work on Cygwin.</code></td></tr></table>




---

archive/issue_comments_298596.json:
```json
{
    "body": "Author: **Erik Bray**",
    "created_at": "2016-05-25T12:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298596",
    "user": "https://github.com/embray"
}
```

Author: **Erik Bray**



---

archive/issue_comments_298597.json:
```json
{
    "body": "Commit: **[`04d57eb`](https://github.com/sagemath/sagetrac-mirror/commit/04d57eb05c1d473352c1d0fd482d7a5b89fd3f5d)**",
    "created_at": "2016-05-25T12:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298597",
    "user": "https://github.com/embray"
}
```

Commit: **[`04d57eb`](https://github.com/sagemath/sagetrac-mirror/commit/04d57eb05c1d473352c1d0fd482d7a5b89fd3f5d)**



---

archive/issue_events_292218.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-25T12:23:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292218"
}
```



---

archive/issue_comments_298598.json:
```json
{
    "body": "Branch: **[u/embray/cygwin-r-issue](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin-r-issue)**",
    "created_at": "2016-05-25T12:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298598",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/cygwin-r-issue](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin-r-issue)**



---

archive/issue_comments_298599.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to **None of the above - read trac for reasoning.**",
    "created_at": "2016-05-25T12:36:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298599",
    "user": "https://github.com/embray"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to **None of the above - read trac for reasoning.**



---

archive/issue_comments_298600.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nChanged my mind about reporting upstream.  According to [this issue, and a few others](https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15607) it seems they don't want to officially support Cygwin builds and will close Cygwin issues as wontfix.  This is also environment specific.  It only affects you if you're building sage on a Cygwin filesystem that is mounted with noacl.  So maybe this doesn't affect most users.\n\nI still think the patch is worth keeping for the sake of least resistance on trying to build Sage on Cygwin.  This was a very mysterious and hard to track down problem.",
    "created_at": "2016-05-25T12:36:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298600",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">comment:6</div>

Changed my mind about reporting upstream.  According to [this issue, and a few others](https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15607) it seems they don't want to officially support Cygwin builds and will close Cygwin issues as wontfix.  This is also environment specific.  It only affects you if you're building sage on a Cygwin filesystem that is mounted with noacl.  So maybe this doesn't affect most users.

I still think the patch is worth keeping for the sake of least resistance on trying to build Sage on Cygwin.  This was a very mysterious and hard to track down problem.



---

archive/issue_comments_298601.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nneeds some documentation (in the patch header)",
    "created_at": "2016-05-25T23:31:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298601",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">comment:7</div>

needs some documentation (in the patch header)



---

archive/issue_events_292219.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-27T22:43:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292219"
}
```



---

archive/issue_events_292220.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-27T22:43:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292220"
}
```



---

archive/issue_comments_298602.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nDone!",
    "created_at": "2016-05-30T16:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298602",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

Done!



---

archive/issue_events_292221.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-30T16:41:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292221"
}
```



---

archive/issue_events_292222.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-05-30T16:41:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292222"
}
```



---

archive/issue_comments_298603.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI was able to build R on cygwin32 using 7.3 without this. Still waiting on my cygwin64.",
    "created_at": "2016-08-07T14:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298603",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

I was able to build R on cygwin32 using 7.3 without this. Still waiting on my cygwin64.



---

archive/issue_comments_298604.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAlso built okay without this patch on cygwin64. Should we close this as wont-fix?",
    "created_at": "2016-08-07T15:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298604",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

Also built okay without this patch on cygwin64. Should we close this as wont-fix?



---

archive/issue_comments_298605.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@tscrim](#comment:11):\n> Also built okay without this patch on cygwin64. Should we close this as wont-fix?\n\nThis issue only impacts if you're building in a directory mounted with `noacl` or with a messed up ACL which happens not infrequently if you have non-Cygwin processes messing with the permissions on files.\n\nThe end result is that setting executable flags may not always work.",
    "created_at": "2016-08-08T08:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298605",
    "user": "https://github.com/embray"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@tscrim](#comment:11):
> Also built okay without this patch on cygwin64. Should we close this as wont-fix?

This issue only impacts if you're building in a directory mounted with `noacl` or with a messed up ACL which happens not infrequently if you have non-Cygwin processes messing with the permissions on files.

The end result is that setting executable flags may not always work.



---

archive/issue_comments_298606.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nSo it's something more with the configuration then? I will try rebuilding R with this branch later tonight.",
    "created_at": "2016-08-08T11:37:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298606",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

So it's something more with the configuration then? I will try rebuilding R with this branch later tonight.



---

archive/issue_comments_298607.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nIt worries me when executable permissions don't work correctly. I think that false positives (`test -x` returning true on a non-executable file) are not so bad, but false negatives (`test -x` returning false on an executable file) seem more problematic. I would not be surprised if there would be more programs (even just the shell) behaving badly for this reason.",
    "created_at": "2016-08-08T12:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298607",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

It worries me when executable permissions don't work correctly. I think that false positives (`test -x` returning true on a non-executable file) are not so bad, but false negatives (`test -x` returning false on an executable file) seem more problematic. I would not be surprised if there would be more programs (even just the shell) behaving badly for this reason.



---

archive/issue_comments_298608.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nIt's not really a problem in the shell so much.  Cygwin relies on a lot more than the `x` flag to determine whether or not a file is executable, precisely because of the unreliability of emulating UNIX permissions on top of Windows ACL.  At most, Cygwin just relies on the `x` permission as a hint.",
    "created_at": "2016-08-08T12:58:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298608",
    "user": "https://github.com/embray"
}
```

<div id="comment:15" align="right">comment:15</div>

It's not really a problem in the shell so much.  Cygwin relies on a lot more than the `x` flag to determine whether or not a file is executable, precisely because of the unreliability of emulating UNIX permissions on top of Windows ACL.  At most, Cygwin just relies on the `x` permission as a hint.



---

archive/issue_comments_298609.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nSo then should we consider merging this ticket Jeroen? I'm not sure what changing `-x` to `-f` really does with regards to how things are built.",
    "created_at": "2016-08-08T13:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298609",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">comment:16</div>

So then should we consider merging this ticket Jeroen? I'm not sure what changing `-x` to `-f` really does with regards to how things are built.



---

archive/issue_comments_298610.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI having nothing against adding this patch to R. I am only saying that it's an ugly workaround and not really a fix.\n\nJust one thing: the patch is missing documentation. At the very least, it should refer to this Trac ticket.",
    "created_at": "2016-08-08T14:00:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298610",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

I having nothing against adding this patch to R. I am only saying that it's an ugly workaround and not really a fix.

Just one thing: the patch is missing documentation. At the very least, it should refer to this Trac ticket.



---

archive/issue_events_292223.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-08T16:49:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292223"
}
```



---

archive/issue_events_292224.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-08T16:49:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292224"
}
```



---

archive/issue_comments_298611.json:
```json
{
    "body": "Work Issues: **patch description**",
    "created_at": "2016-08-08T16:49:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298611",
    "user": "https://github.com/jdemeyer"
}
```

Work Issues: **patch description**



---

archive/issue_comments_298612.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jdemeyer](#comment:17):\n> I having nothing against adding this patch to R. I am only saying that it's an ugly workaround and not really a fix.\n\nNo disagreement there.  And really what it's working around is a shortcoming in Cygwin.  If you prefer, it could be a Cygwin-only patch.  It's just there's no real reason that the patched line strictly needs to `test -x` (and the code being patched is an ugly mess to begin with).",
    "created_at": "2016-08-09T09:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298612",
    "user": "https://github.com/embray"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jdemeyer](#comment:17):
> I having nothing against adding this patch to R. I am only saying that it's an ugly workaround and not really a fix.

No disagreement there.  And really what it's working around is a shortcoming in Cygwin.  If you prefer, it could be a Cygwin-only patch.  It's just there's no real reason that the patched line strictly needs to `test -x` (and the code being patched is an ugly mess to begin with).



---

archive/issue_comments_298613.json:
```json
{
    "body": "Changed commit from **[`04d57eb`](https://github.com/sagemath/sagetrac-mirror/commit/04d57eb05c1d473352c1d0fd482d7a5b89fd3f5d)** to **[`b2ebe0b`](https://github.com/sagemath/sagetrac-mirror/commit/b2ebe0b1c13b61aeccbbf87fbf44351a82044455)**",
    "created_at": "2016-08-16T14:04:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298613",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`04d57eb`](https://github.com/sagemath/sagetrac-mirror/commit/04d57eb05c1d473352c1d0fd482d7a5b89fd3f5d)** to **[`b2ebe0b`](https://github.com/sagemath/sagetrac-mirror/commit/b2ebe0b1c13b61aeccbbf87fbf44351a82044455)**



---

archive/issue_comments_298614.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2ebe0b1c13b61aeccbbf87fbf44351a82044455\"><code>b2ebe0b</code></a></td><td><code>Added patch description</code></td></tr></table>\n",
    "created_at": "2016-08-16T14:04:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298614",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2ebe0b1c13b61aeccbbf87fbf44351a82044455"><code>b2ebe0b</code></a></td><td><code>Added patch description</code></td></tr></table>




---

archive/issue_events_292225.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-16T14:04:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292225"
}
```



---

archive/issue_events_292226.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-16T14:04:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292226"
}
```



---

archive/issue_comments_298615.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2ebe0b1c13b61aeccbbf87fbf44351a82044455\"><code>b2ebe0b</code></a></td><td><code>Added patch description</code></td></tr></table>\n",
    "created_at": "2016-08-16T14:04:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298615",
    "user": "https://github.com/embray"
}
```

<div id="comment:21"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2ebe0b1c13b61aeccbbf87fbf44351a82044455"><code>b2ebe0b</code></a></td><td><code>Added patch description</code></td></tr></table>




---

archive/issue_events_292227.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-16T14:11:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292227"
}
```



---

archive/issue_events_292228.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-16T14:11:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292228"
}
```



---

archive/issue_comments_298616.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nIf this works for you...",
    "created_at": "2016-08-16T14:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298616",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

If this works for you...



---

archive/issue_comments_298617.json:
```json
{
    "body": "Changed work issues from **patch description** to none",
    "created_at": "2016-08-16T14:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298617",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **patch description** to none



---

archive/issue_comments_298618.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2016-08-16T14:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298618",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_298619.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n> because they do no contain a shebang line\n\nI guess this is the real bug.",
    "created_at": "2016-08-16T14:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298619",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

> because they do no contain a shebang line

I guess this is the real bug.



---

archive/issue_comments_298620.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@jdemeyer](#comment:23):\n> > because they do no contain a shebang line\n\n> \n> I guess this is the real bug.\n\nYes and no.  I think the real bug is that it requires them to be executable, because the way those particular scripts are invoked, IIRC, is by sourcing them from an actual executable.  In other words, they shouldn't be considered executables in their own right in the first place.\n\nOtherwise yes, I agree they should have a shebang line.",
    "created_at": "2016-08-16T14:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298620",
    "user": "https://github.com/embray"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@jdemeyer](#comment:23):
> > because they do no contain a shebang line

> 
> I guess this is the real bug.

Yes and no.  I think the real bug is that it requires them to be executable, because the way those particular scripts are invoked, IIRC, is by sourcing them from an actual executable.  In other words, they shouldn't be considered executables in their own right in the first place.

Otherwise yes, I agree they should have a shebang line.



---

archive/issue_comments_298621.json:
```json
{
    "body": "Changed branch from **[u/embray/cygwin-r-issue](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin-r-issue)** to **[`b2ebe0b`](https://github.com/sagemath/sagetrac-mirror/commit/b2ebe0b1c13b61aeccbbf87fbf44351a82044455)**",
    "created_at": "2016-08-19T22:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20655#issuecomment-298621",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/embray/cygwin-r-issue](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin-r-issue)** to **[`b2ebe0b`](https://github.com/sagemath/sagetrac-mirror/commit/b2ebe0b1c13b61aeccbbf87fbf44351a82044455)**



---

archive/issue_events_292229.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-19T22:45:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292229"
}
```



---

archive/issue_events_292230.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "51e318b2331d7187121a4083c4d70e931e5714b8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-08-19T22:45:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20655",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20655#event-292230"
}
```
