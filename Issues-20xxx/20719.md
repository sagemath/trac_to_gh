# Issue 20719: Number of reflections in Weyl and Coxeter groups can be computed faster

archive/issues_020719.json:
```json
{
    "body": "CC:  @tscrim @fchapoton @nthiery\n\nKeywords: reflection group, coxeter group, subword complex, days80\n\nFor Weyl groups, we have\n\n```\nsage: W = WeylGroup(['E',7])\nsage: %timeit len(W.long_element(as_word=True))\n10 loops, best of 3: 98.6 ms per loop\nsage: %timeit W.number_of_reflections()\n1 loop, best of 3: 208 ms per loop\n```\nand for Coxeter groups, we have\n\n```\nsage: W = CoxeterGroup(['E',7])\nsage: %timeit len(W.long_element(as_word=True))\n1 loop, best of 3: 206 ms per loop\nsage: %timeit W.number_of_reflections()\n1 loop, best of 3: 378 ms per loop\n```\n\nI think that we should either use the longest element, or, even better, to speed the computations of the degrees (which are used to compute the number of reflections).\n\nIssue created by migration from https://trac.sagemath.org/ticket/20956\n\n",
    "closed_at": "2016-08-30T13:32:25Z",
    "created_at": "2016-07-06T12:33:37Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Number of reflections in Weyl and Coxeter groups can be computed faster",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20719",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
CC:  @tscrim @fchapoton @nthiery

Keywords: reflection group, coxeter group, subword complex, days80

For Weyl groups, we have

```
sage: W = WeylGroup(['E',7])
sage: %timeit len(W.long_element(as_word=True))
10 loops, best of 3: 98.6 ms per loop
sage: %timeit W.number_of_reflections()
1 loop, best of 3: 208 ms per loop
```
and for Coxeter groups, we have

```
sage: W = CoxeterGroup(['E',7])
sage: %timeit len(W.long_element(as_word=True))
1 loop, best of 3: 206 ms per loop
sage: %timeit W.number_of_reflections()
1 loop, best of 3: 378 ms per loop
```

I think that we should either use the longest element, or, even better, to speed the computations of the degrees (which are used to compute the number of reflections).

Issue created by migration from https://trac.sagemath.org/ticket/20956





---

archive/issue_comments_285968.json:
```json
{
    "body": "Some timings with the branch of #20943\n\n```\nsage: sage: W = WeylGroup(['E',7])\nsage: sage: %timeit len(W.long_element(as_word=True))\n10 loops, best of 3: 41.6 ms per loop\nsage: sage: %timeit W.number_of_reflections()\nThe slowest run took 1047579.52 times longer than the fastest.\nThis could mean that an intermediate result is being cached.\n10000000 loops, best of 3: 57.2 ns per loop\nsage: sage: %timeit sum(d-1 for d in W.degrees())\n10 loops, best of 3: 41.1 ms per loop\n```",
    "created_at": "2016-07-06T13:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20719#issuecomment-285968",
    "user": "https://github.com/fchapoton"
}
```

Some timings with the branch of #20943

```
sage: sage: W = WeylGroup(['E',7])
sage: sage: %timeit len(W.long_element(as_word=True))
10 loops, best of 3: 41.6 ms per loop
sage: sage: %timeit W.number_of_reflections()
The slowest run took 1047579.52 times longer than the fastest.
This could mean that an intermediate result is being cached.
10000000 loops, best of 3: 57.2 ns per loop
sage: sage: %timeit sum(d-1 for d in W.degrees())
10 loops, best of 3: 41.1 ms per loop
```



---

archive/issue_comments_285969.json:
```json
{
    "body": "Okay, I think we should close this as duplicate.",
    "created_at": "2016-07-06T13:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20719#issuecomment-285969",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Okay, I think we should close this as duplicate.



---

archive/issue_comments_285970.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-06T13:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20719#issuecomment-285970",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_285971.json:
```json
{
    "body": "agreed.",
    "created_at": "2016-07-06T13:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20719#issuecomment-285971",
    "user": "https://github.com/fchapoton"
}
```

agreed.



---

archive/issue_comments_285972.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-06T13:41:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20719#issuecomment-285972",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_056087.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-07-06T13:41:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20719",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20719#event-56087"
}
```



---

archive/issue_events_056088.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-30T13:32:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20719",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20719#event-56088"
}
```



---

archive/issue_comments_285973.json:
```json
{
    "body": "Determined to be invalid/duplicate/wontfix (closing as \"wontfix\" as a catch-all resolution).",
    "created_at": "2016-08-30T13:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20719#issuecomment-285973",
    "user": "https://github.com/embray"
}
```

Determined to be invalid/duplicate/wontfix (closing as "wontfix" as a catch-all resolution).



---

archive/issue_comments_285974.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2016-08-30T13:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20719#issuecomment-285974",
    "user": "https://github.com/embray"
}
```

Resolution: wontfix
