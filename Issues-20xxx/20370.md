# Issue 20370: generic GCD-free basis

archive/issues_020133.json:
```json
{
    "assignees": [],
    "body": "\n\nBranch/Commit: **[49660c6](https://github.com/sagemath/sagetrac-mirror/commit/49660c68deb9f70de6772a383c1dd8845c9e74ce)**\n\nReviewer: **Bruno Grenet**\n\nAuthor: **Marc Mezzarobba**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20370_\n\n",
    "closed_at": "2016-05-19T22:38:59Z",
    "created_at": "2016-04-06T12:12:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "generic GCD-free basis",
    "type": "issue",
    "updated_at": "2016-05-19T22:38:59Z",
    "url": "https://github.com/sagemath/sage/issues/20370",
    "user": "https://github.com/mezzarobba"
}
```


Branch/Commit: **[49660c6](https://github.com/sagemath/sagetrac-mirror/commit/49660c68deb9f70de6772a383c1dd8845c9e74ce)**

Reviewer: **Bruno Grenet**

Author: **Marc Mezzarobba**

_Issue created by migration from https://trac.sagemath.org/ticket/20370_





---

archive/issue_events_259812.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-04-06T12:12:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20370#event-259812"
}
```



---

archive/issue_events_259813.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-04-06T12:12:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "component: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20370#event-259813"
}
```



---

archive/issue_events_259814.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-04-06T12:12:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20370#event-259814"
}
```



---

archive/issue_events_259815.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-04-06T12:12:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20370#event-259815"
}
```



---

archive/issue_comments_296384.json:
```json
{
    "body": "Commit: **[a0a246a](https://github.com/sagemath/sagetrac-mirror/commit/a0a246ad399f4e2bd9c69d32e91fd8de1321c7fa)**",
    "created_at": "2016-04-06T12:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296384",
    "user": "https://github.com/mezzarobba"
}
```

Commit: **[a0a246a](https://github.com/sagemath/sagetrac-mirror/commit/a0a246ad399f4e2bd9c69d32e91fd8de1321c7fa)**



---

archive/issue_comments_296385.json:
```json
{
    "body": "Branch: **[u/mmezzarobba/20370-gcd_free_basis](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/20370-gcd_free_basis)**",
    "created_at": "2016-04-06T12:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296385",
    "user": "https://github.com/mezzarobba"
}
```

Branch: **[u/mmezzarobba/20370-gcd_free_basis](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/20370-gcd_free_basis)**



---

archive/issue_events_259816.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-04-06T12:13:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20370#event-259816"
}
```



---

archive/issue_comments_296386.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0a246ad399f4e2bd9c69d32e91fd8de1321c7fa\">a0a246a</a></td><td><code>generic implementation of gcd_free_basis()</code></td></tr></table>\n",
    "created_at": "2016-04-06T12:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296386",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0a246ad399f4e2bd9c69d32e91fd8de1321c7fa">a0a246a</a></td><td><code>generic implementation of gcd_free_basis()</code></td></tr></table>




---

archive/issue_comments_296387.json:
```json
{
    "body": "Author: **Marc Mezzarobba**",
    "created_at": "2016-04-06T12:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296387",
    "user": "https://github.com/mezzarobba"
}
```

Author: **Marc Mezzarobba**



---

archive/issue_comments_296388.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nSalut Marc ! I have doubts concerning the return type of this new function. First, I always wonder one should use Python's `set` or Sage's `Set`. But also I wonder whether these bases should be returned as sets: In all cases I've found (\u2260 all cases, probably), bases are returned as lists (or `PolynomialSequence_generic` for polynomials) and not sets. Wouldn't it be more consistent to return a list there too?",
    "created_at": "2016-04-18T09:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296388",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:2'>Comment 2:</a>
Salut Marc ! I have doubts concerning the return type of this new function. First, I always wonder one should use Python's `set` or Sage's `Set`. But also I wonder whether these bases should be returned as sets: In all cases I've found (≠ all cases, probably), bases are returned as lists (or `PolynomialSequence_generic` for polynomials) and not sets. Wouldn't it be more consistent to return a list there too?



---

archive/issue_comments_296389.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nHi Bruno,\n\nReplying to [@bgrenet](#comment%3A2):\n> Salut Marc ! I have doubts concerning the return type of this new function. First, I always wonder one should use Python's `set` or Sage's `Set`. But also I wonder whether these bases should be returned as sets: In all cases I've found (\u2260 all cases, probably), bases are returned as lists (or `PolynomialSequence_generic` for polynomials) and not sets. Wouldn't it be more consistent to return a list there too?\n\nThanks for your comment. I have no opinion on the matter, and I'd be happy to change the return type to whatever you prefer.",
    "created_at": "2016-04-18T11:10:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296389",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:3'>Comment 3:</a>
Hi Bruno,

Replying to [@bgrenet](#comment%3A2):
> Salut Marc ! I have doubts concerning the return type of this new function. First, I always wonder one should use Python's `set` or Sage's `Set`. But also I wonder whether these bases should be returned as sets: In all cases I've found (≠ all cases, probably), bases are returned as lists (or `PolynomialSequence_generic` for polynomials) and not sets. Wouldn't it be more consistent to return a list there too?

Thanks for your comment. I have no opinion on the matter, and I'd be happy to change the return type to whatever you prefer.



---

archive/issue_comments_296390.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nReplying to [@mezzarobba](#comment%3A3):\n> Hi Bruno,\n> \n> Replying to [@bgrenet](#comment%3A2):\n> > Salut Marc ! I have doubts concerning the return type of this new function. First, I always wonder one should use Python's `set` or Sage's `Set`. But also I wonder whether these bases should be returned as sets: In all cases I've found (\u2260 all cases, probably), bases are returned as lists (or `PolynomialSequence_generic` for polynomials) and not sets. Wouldn't it be more consistent to return a list there too?\n\n> \n> Thanks for your comment. I have no opinion on the matter, and I'd be happy to change the return type to whatever you prefer.\n\nI propose you to return a `Sequence` with `universe=self`. \n\nAnother (minor) point: If the elements in the sequence do not belong to `self`, the exception is not very clear. For instance:\n\n```python\nsage: R.<x> = QQ[]\nsage: QQ.gcd_free_basis([x+1,x+2])\nTraceback (most recent call last):\n...\nTypeError: not a constant polynomial\n```\n\nYou may catch the exception and raise your own `TypeError: the elements you provided do not belong to QQ` (or something similar). Actually I ran into the exact example I paste above...\n\nApart from this remarks, this looks good to me!",
    "created_at": "2016-04-19T08:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296390",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:4'>Comment 4:</a>
Replying to [@mezzarobba](#comment%3A3):
> Hi Bruno,
> 
> Replying to [@bgrenet](#comment%3A2):
> > Salut Marc ! I have doubts concerning the return type of this new function. First, I always wonder one should use Python's `set` or Sage's `Set`. But also I wonder whether these bases should be returned as sets: In all cases I've found (≠ all cases, probably), bases are returned as lists (or `PolynomialSequence_generic` for polynomials) and not sets. Wouldn't it be more consistent to return a list there too?

> 
> Thanks for your comment. I have no opinion on the matter, and I'd be happy to change the return type to whatever you prefer.

I propose you to return a `Sequence` with `universe=self`. 

Another (minor) point: If the elements in the sequence do not belong to `self`, the exception is not very clear. For instance:

```python
sage: R.<x> = QQ[]
sage: QQ.gcd_free_basis([x+1,x+2])
Traceback (most recent call last):
...
TypeError: not a constant polynomial
```

You may catch the exception and raise your own `TypeError: the elements you provided do not belong to QQ` (or something similar). Actually I ran into the exact example I paste above...

Apart from this remarks, this looks good to me!



---

archive/issue_comments_296391.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c74b7d868a23af3f800af039ec302e0c5d32954b\">c74b7d8</a></td><td><code>generic implementation of gcd_free_basis()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49660c68deb9f70de6772a383c1dd8845c9e74ce\">49660c6</a></td><td><code>gcd_free_basis: return a Sequence instead of a set</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4d2423c0ecc4fcc4d849c5e4a2b411826632771\">d4d2423</a></td><td><code>Sequence: more user-friendly error message</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0895632b8cc12e990f859dbdbb0d086601a6afe\">e089563</a></td><td><code>gcd_free_basis: doctest error messages</code></td></tr></table>\n",
    "created_at": "2016-05-18T08:59:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296391",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c74b7d868a23af3f800af039ec302e0c5d32954b">c74b7d8</a></td><td><code>generic implementation of gcd_free_basis()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49660c68deb9f70de6772a383c1dd8845c9e74ce">49660c6</a></td><td><code>gcd_free_basis: return a Sequence instead of a set</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4d2423c0ecc4fcc4d849c5e4a2b411826632771">d4d2423</a></td><td><code>Sequence: more user-friendly error message</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0895632b8cc12e990f859dbdbb0d086601a6afe">e089563</a></td><td><code>gcd_free_basis: doctest error messages</code></td></tr></table>




---

archive/issue_comments_296392.json:
```json
{
    "body": "Changed commit from **[a0a246a](https://github.com/sagemath/sagetrac-mirror/commit/a0a246ad399f4e2bd9c69d32e91fd8de1321c7fa)** to **[e089563](https://github.com/sagemath/sagetrac-mirror/commit/e0895632b8cc12e990f859dbdbb0d086601a6afe)**",
    "created_at": "2016-05-18T08:59:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296392",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a0a246a](https://github.com/sagemath/sagetrac-mirror/commit/a0a246ad399f4e2bd9c69d32e91fd8de1321c7fa)** to **[e089563](https://github.com/sagemath/sagetrac-mirror/commit/e0895632b8cc12e990f859dbdbb0d086601a6afe)**



---

archive/issue_comments_296393.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@bgrenet](#comment%3A4):\n> I propose you to return a `Sequence` with `universe=self`. \n\nDone.\n\n> You may catch the exception and raise your own `TypeError: the elements you provided do not belong to QQ` (or something similar). Actually I ran into the exact example I paste above...\n\nI improved `Sequence()` itself instead. Of course, I can move the corresponding commits to another ticket if you don't feel like reviewing them.",
    "created_at": "2016-05-18T09:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296393",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@bgrenet](#comment%3A4):
> I propose you to return a `Sequence` with `universe=self`. 

Done.

> You may catch the exception and raise your own `TypeError: the elements you provided do not belong to QQ` (or something similar). Actually I ran into the exact example I paste above...

I improved `Sequence()` itself instead. Of course, I can move the corresponding commits to another ticket if you don't feel like reviewing them.



---

archive/issue_comments_296394.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@mezzarobba](#comment%3A6):\n> > You may catch the exception and raise your own `TypeError: the elements you provided do not belong to QQ` (or something similar). Actually I ran into the exact example I paste above...\n\n> \n> I improved `Sequence()` itself instead. Of course, I can move the corresponding commits to another ticket if you don't feel like reviewing them.\n\nI would prefer another ticket: As it is, if you remove the commits about `Sequence()`, I am ready to set it to positive review. I am much less confident on the code involving `Sequence` and need more time (or another reviewer...)!\n\nA comment still on the `Sequence()` part: Should'nt the error message explicitly mention that there is a conflict with the universe? Something like \n`unable to convert {} to an element of the universe ({})\".format(x[i], universe))`",
    "created_at": "2016-05-18T13:13:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296394",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@mezzarobba](#comment%3A6):
> > You may catch the exception and raise your own `TypeError: the elements you provided do not belong to QQ` (or something similar). Actually I ran into the exact example I paste above...

> 
> I improved `Sequence()` itself instead. Of course, I can move the corresponding commits to another ticket if you don't feel like reviewing them.

I would prefer another ticket: As it is, if you remove the commits about `Sequence()`, I am ready to set it to positive review. I am much less confident on the code involving `Sequence` and need more time (or another reviewer...)!

A comment still on the `Sequence()` part: Should'nt the error message explicitly mention that there is a conflict with the universe? Something like 
`unable to convert {} to an element of the universe ({})".format(x[i], universe))`



---

archive/issue_comments_296395.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-05-18T13:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296395",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_296396.json:
```json
{
    "body": "Changed commit from **[e089563](https://github.com/sagemath/sagetrac-mirror/commit/e0895632b8cc12e990f859dbdbb0d086601a6afe)** to **[49660c6](https://github.com/sagemath/sagetrac-mirror/commit/49660c68deb9f70de6772a383c1dd8845c9e74ce)**",
    "created_at": "2016-05-18T13:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296396",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e089563](https://github.com/sagemath/sagetrac-mirror/commit/e0895632b8cc12e990f859dbdbb0d086601a6afe)** to **[49660c6](https://github.com/sagemath/sagetrac-mirror/commit/49660c68deb9f70de6772a383c1dd8845c9e74ce)**



---

archive/issue_events_259817.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2016-05-18T13:48:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20370#event-259817"
}
```



---

archive/issue_events_259818.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2016-05-18T13:48:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20370#event-259818"
}
```



---

archive/issue_comments_296397.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nLooks good to me!",
    "created_at": "2016-05-18T13:48:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296397",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:9'>Comment 9:</a>
Looks good to me!



---

archive/issue_comments_296398.json:
```json
{
    "body": "Reviewer: **Bruno Grenet**",
    "created_at": "2016-05-18T13:48:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296398",
    "user": "https://github.com/bgrenet"
}
```

Reviewer: **Bruno Grenet**



---

archive/issue_comments_296399.json:
```json
{
    "body": "Changed reviewer from **Bruno Grenet** to none",
    "created_at": "2016-05-18T13:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296399",
    "user": "https://github.com/mezzarobba"
}
```

Changed reviewer from **Bruno Grenet** to none



---

archive/issue_comments_296400.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nThanks for the review!\n\nReplying to [@bgrenet](#comment%3A7):\n> I would prefer another ticket: As it is, if you remove the commits about `Sequence()`, I am ready to set it to positive review. I am much less confident on the code involving `Sequence` and need more time (or another reviewer...)!\n\nDone (#20621).\n\n> A comment still on the `Sequence()` part: Should'nt the error message explicitly mention that there is a conflict with the universe? Something like \n> `unable to convert {} to an element of the universe ({})\".format(x[i], universe))` \n\nI don't think so: when `Sequence()` is used internally by another function (e.g. in the present case), it will be clear that the function needs to somehow convert some elements to a given parent, but it doesn't matter that this parent is the universe of some Sequence (and that may even make the error more confusing to casual users)...",
    "created_at": "2016-05-18T13:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296400",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:11'>Comment 11:</a>
Thanks for the review!

Replying to [@bgrenet](#comment%3A7):
> I would prefer another ticket: As it is, if you remove the commits about `Sequence()`, I am ready to set it to positive review. I am much less confident on the code involving `Sequence` and need more time (or another reviewer...)!

Done (#20621).

> A comment still on the `Sequence()` part: Should'nt the error message explicitly mention that there is a conflict with the universe? Something like 
> `unable to convert {} to an element of the universe ({})".format(x[i], universe))` 

I don't think so: when `Sequence()` is used internally by another function (e.g. in the present case), it will be clear that the function needs to somehow convert some elements to a given parent, but it doesn't matter that this parent is the universe of some Sequence (and that may even make the error more confusing to casual users)...



---

archive/issue_comments_296401.json:
```json
{
    "body": "Reviewer: **Bruno Grenet**",
    "created_at": "2016-05-18T13:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296401",
    "user": "https://github.com/mezzarobba"
}
```

Reviewer: **Bruno Grenet**



---

archive/issue_events_259819.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-19T22:38:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20370#event-259819"
}
```



---

archive/issue_events_259820.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fb937d5182696b98088c11c564efd50e7843f6dd",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-05-19T22:38:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20370#event-259820"
}
```



---

archive/issue_comments_296402.json:
```json
{
    "body": "Changed branch from **[u/mmezzarobba/20370-gcd_free_basis](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/20370-gcd_free_basis)** to **[49660c6](https://github.com/sagemath/sagetrac-mirror/commit/49660c68deb9f70de6772a383c1dd8845c9e74ce)**",
    "created_at": "2016-05-19T22:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20370#issuecomment-296402",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mmezzarobba/20370-gcd_free_basis](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/20370-gcd_free_basis)** to **[49660c6](https://github.com/sagemath/sagetrac-mirror/commit/49660c68deb9f70de6772a383c1dd8845c9e74ce)**
