# Issue 20898: Syndrome decoder for a linear code sometimes sets wrong decoder type

archive/issues_020661.json:
```json
{
    "body": "There is a bug in how the decoder type is set for the syndrome decoder. Consider\n\n```\nsage: C = codes.HammingCode(GF(5), 3)\nsage: D = C.decoder(\"Syndrome\")\nsage: C.minimum_distance()\n3\nsage: D.maximum_error_weight()\n1\nsage: D.decoder_type()\n{'complete', 'hard-decision', 'might-error', 'unique'}\n```\n\nThe last line should not have had \"might-error\" but instead should have had \"always-succeed\" and \"minimum-distance\".\n\nCC:  dlucas\n\nKeywords: linear code, syndrome, rd3\n\nBranch/Commit: f152ea833b7fb8be9831bf36175e6ed37e4eeca1\n\nReviewer: Bruno Grenet\n\nAuthor: Cl\u00e9ment Pernet\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20898\n\n",
    "closed_at": "2017-02-08T22:48:51Z",
    "created_at": "2016-06-28T15:16:34Z",
    "labels": [
        "component: coding theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Syndrome decoder for a linear code sometimes sets wrong decoder type",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20898",
    "user": "https://github.com/johanrosenkilde"
}
```
There is a bug in how the decoder type is set for the syndrome decoder. Consider

```
sage: C = codes.HammingCode(GF(5), 3)
sage: D = C.decoder("Syndrome")
sage: C.minimum_distance()
3
sage: D.maximum_error_weight()
1
sage: D.decoder_type()
{'complete', 'hard-decision', 'might-error', 'unique'}
```

The last line should not have had "might-error" but instead should have had "always-succeed" and "minimum-distance".

CC:  dlucas

Keywords: linear code, syndrome, rd3

Branch/Commit: f152ea833b7fb8be9831bf36175e6ed37e4eeca1

Reviewer: Bruno Grenet

Author: Clément Pernet

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20898





---

archive/issue_comments_381499.json:
```json
{
    "body": "Changing branch from \"\" to \"u/cpernet/syndrome_decoder_type\"",
    "created_at": "2017-02-07T13:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381499",
    "user": "https://github.com/ClementPernet"
}
```

Changing branch from "" to "u/cpernet/syndrome_decoder_type"



---

archive/issue_comments_381500.json:
```json
{
    "body": "Changing author from \"\" to \"Cl\u00e9ment Pernet\"",
    "created_at": "2017-02-07T13:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381500",
    "user": "https://github.com/ClementPernet"
}
```

Changing author from "" to "Clément Pernet"



---

archive/issue_comments_381501.json:
```json
{
    "body": "<a id='comment:2'></a>\nThere was actually 2 bugs: the decoding_radius tested for this decision was not updated with the value found during the construction of the lookup table. Then some set.add needed to be changed.\n\nI also added the ticket's code as a doctest.\n\nAttached branch should fix the pb. Open for review.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[ffb9bdc](https://git.sagemath.org/sage.git/commit?id=ffb9bdcac274f4898ff08a3001624854bcaf4ead)|`fix 2 bugs: the updated max_error_weight was not tested + add->union`|\n|[6f8bf3c](https://git.sagemath.org/sage.git/commit?id=6f8bf3c3f1bc863ac78e485915fb0f81b6730d6b)|`Need to get the result that union returns`|\n|[d581d76](https://git.sagemath.org/sage.git/commit?id=d581d76152e369ec40e08254bafe61e1d34aa951)|`add #20898 code as a doctest`|",
    "created_at": "2017-02-07T13:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381501",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:2'></a>
There was actually 2 bugs: the decoding_radius tested for this decision was not updated with the value found during the construction of the lookup table. Then some set.add needed to be changed.

I also added the ticket's code as a doctest.

Attached branch should fix the pb. Open for review.

---
New commits:
|                                                                                                                                          |                                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[ffb9bdc](https://git.sagemath.org/sage.git/commit?id=ffb9bdcac274f4898ff08a3001624854bcaf4ead)|`fix 2 bugs: the updated max_error_weight was not tested + add->union`|
|[6f8bf3c](https://git.sagemath.org/sage.git/commit?id=6f8bf3c3f1bc863ac78e485915fb0f81b6730d6b)|`Need to get the result that union returns`|
|[d581d76](https://git.sagemath.org/sage.git/commit?id=d581d76152e369ec40e08254bafe61e1d34aa951)|`add #20898 code as a doctest`|



---

archive/issue_comments_381502.json:
```json
{
    "body": "Changing keywords from \"linear code, syndrome\" to \"linear code, syndrome, rd3\".",
    "created_at": "2017-02-07T13:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381502",
    "user": "https://github.com/ClementPernet"
}
```

Changing keywords from "linear code, syndrome" to "linear code, syndrome, rd3".



---

archive/issue_comments_381503.json:
```json
{
    "body": "Changing commit from \"\" to \"d581d76152e369ec40e08254bafe61e1d34aa951\"",
    "created_at": "2017-02-07T13:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381503",
    "user": "https://github.com/ClementPernet"
}
```

Changing commit from "" to "d581d76152e369ec40e08254bafe61e1d34aa951"



---

archive/issue_comments_381504.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-02-07T13:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381504",
    "user": "https://github.com/ClementPernet"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_381505.json:
```json
{
    "body": "Changing commit from \"d581d76152e369ec40e08254bafe61e1d34aa951\" to \"f152ea833b7fb8be9831bf36175e6ed37e4eeca1\"",
    "created_at": "2017-02-07T14:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d581d76152e369ec40e08254bafe61e1d34aa951" to "f152ea833b7fb8be9831bf36175e6ed37e4eeca1"



---

archive/issue_comments_381506.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[f152ea8](https://git.sagemath.org/sage.git/commit/?id=f152ea833b7fb8be9831bf36175e6ed37e4eeca1)|`replace union by update`|",
    "created_at": "2017-02-07T14:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[f152ea8](https://git.sagemath.org/sage.git/commit/?id=f152ea833b7fb8be9831bf36175e6ed37e4eeca1)|`replace union by update`|



---

archive/issue_comments_381507.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Bruno Grenet\"",
    "created_at": "2017-02-07T14:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381507",
    "user": "https://github.com/bgrenet"
}
```

Changing reviewer from "" to "Bruno Grenet"



---

archive/issue_comments_381508.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-07T14:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381508",
    "user": "https://github.com/bgrenet"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_381509.json:
```json
{
    "body": "<a id='comment:4'></a>\nLooks OK!",
    "created_at": "2017-02-07T14:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381509",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:4'></a>
Looks OK!



---

archive/issue_comments_381510.json:
```json
{
    "body": "Changing branch from \"u/cpernet/syndrome_decoder_type\" to \"f152ea833b7fb8be9831bf36175e6ed37e4eeca1\"",
    "created_at": "2017-02-08T22:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381510",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/cpernet/syndrome_decoder_type" to "f152ea833b7fb8be9831bf36175e6ed37e4eeca1"



---

archive/issue_events_055998.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-08T22:48:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20898#event-55998"
}
```



---

archive/issue_comments_381511.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-08T22:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20898#issuecomment-381511",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
