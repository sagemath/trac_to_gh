# Issue 20581: Upgrade PARI to latest master

archive/issues_020344.json:
```json
{
    "body": "Some recent fixes needed to correctly count points on hyperelliptic curves.\n\n**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2771-gb70b447.tar.gz\n\n**CC:**  @jdemeyer @kedlaya @kiwifb\n\n**Keywords:** days74\n\n**Branch/Commit:** [bedff7be09d52fc7eba721074eaab6ad5607876b](https://github.com/sagemath/sagetrac-mirror/commit/bedff7be09d52fc7eba721074eaab6ad5607876b)\n\n**Reviewer:** Jean-Pierre Flori, Peter Bruin\n\n**Author:** Jeroen Demeyer\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20581\n\n",
    "closed_at": "2016-06-23T17:14:00Z",
    "created_at": "2016-05-09T22:45:28Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Upgrade PARI to latest master",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20581",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
Some recent fixes needed to correctly count points on hyperelliptic curves.

**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2771-gb70b447.tar.gz

**CC:**  @jdemeyer @kedlaya @kiwifb

**Keywords:** days74

**Branch/Commit:** [bedff7be09d52fc7eba721074eaab6ad5607876b](https://github.com/sagemath/sagetrac-mirror/commit/bedff7be09d52fc7eba721074eaab6ad5607876b)

**Reviewer:** Jean-Pierre Flori, Peter Bruin

**Author:** Jeroen Demeyer

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/20581





---

archive/issue_comments_377298.json:
```json
{
    "body": "<a id='comment:1'></a>\n`@`Jeroen: you already did the upgrade a bunch of time IIRC.\nI could try to review the ticket (which should be trivial) while I have some time this week.\n(Later than that I can not promise anything.)",
    "created_at": "2016-05-09T22:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377298",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:1'></a>
`@`Jeroen: you already did the upgrade a bunch of time IIRC.
I could try to review the ticket (which should be trivial) while I have some time this week.
(Later than that I can not promise anything.)



---

archive/issue_comments_377299.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2016-05-10T07:48:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377299",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_377300.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Some recent fixes needed to correctly count points on hyperelliptic curves.\n+\n+**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2670-g9b4a64c.tar.gz\n``````\n",
    "created_at": "2016-05-10T08:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377300",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Some recent fixes needed to correctly count points on hyperelliptic curves.
+
+**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2670-g9b4a64c.tar.gz
``````




---

archive/issue_comments_377301.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_pari_to_latest_master)",
    "created_at": "2016-05-10T16:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377301",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_pari_to_latest_master)



---

archive/issue_comments_377302.json:
```json
{
    "body": "<a id='comment:6'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7\">1f90f95</a></td><td><code>Upgrade PARI to latest master</code></td></tr></table>\n",
    "created_at": "2016-05-10T16:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377302",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7">1f90f95</a></td><td><code>Upgrade PARI to latest master</code></td></tr></table>




---

archive/issue_comments_377303.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2016-05-10T16:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377303",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_377304.json:
```json
{
    "body": "**Commit:** [1f90f95e7c12901dba8078c84a588d9b3cd231a7](https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7)",
    "created_at": "2016-05-10T16:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377304",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [1f90f95e7c12901dba8078c84a588d9b3cd231a7](https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7)



---

archive/issue_comments_377305.json:
```json
{
    "body": "<a id='comment:7'></a>\nI see a lot of functions' signatures changed because of the addition of the const modifier.\nWas it on purpose? (IIRC Cython does not care about constness anyway.)",
    "created_at": "2016-05-11T15:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377305",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:7'></a>
I see a lot of functions' signatures changed because of the addition of the const modifier.
Was it on purpose? (IIRC Cython does not care about constness anyway.)



---

archive/issue_comments_377306.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [jpflori](#comment%3A7):\n> Was it on purpose? (IIRC Cython does not care about constness anyway.)\n\n\nWell, I just took the declarations from PARI and they have `const` in them. And it's true that it probably does not matter for Cython anyway.",
    "created_at": "2016-05-11T15:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377306",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Replying to [jpflori](#comment%3A7):
> Was it on purpose? (IIRC Cython does not care about constness anyway.)


Well, I just took the declarations from PARI and they have `const` in them. And it's true that it probably does not matter for Cython anyway.



---

archive/issue_comments_377307.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2016-05-11T22:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377307",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_377308.json:
```json
{
    "body": "**Reviewer:** Jean-Pierre Flori",
    "created_at": "2016-05-11T22:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377308",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Reviewer:** Jean-Pierre Flori



---

archive/issue_comments_377309.json:
```json
{
    "body": "<a id='comment:10'></a>\nI'm getting failures on OSX\n\n```\nIn file included from /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.c:324:0:\n/Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h:16:48: error: unknown type name 'ulong'\n hashtable *hashstr_import_static(hashentry *e, ulong size);\n                                                ^\nIn file included from /Users/buildslave-sage/slave/sage_git/build/local/include/pari/pari.h:39:0,\n                 from /Users/buildslave-sage/slave/sage_git/build/src/sage/libs/pari/parisage.h:3,\n                 from /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.c:320:\n/Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h: In function 'clone_lock':\n/Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h:36:25: error: 'ulong' undeclared (first use in this function)\n clone_lock(GEN C) { if (isclone(C)) ++bl_refc(C); }\n\n```",
    "created_at": "2016-05-19T17:27:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377309",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>
I'm getting failures on OSX

```
In file included from /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.c:324:0:
/Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h:16:48: error: unknown type name 'ulong'
 hashtable *hashstr_import_static(hashentry *e, ulong size);
                                                ^
In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/pari/pari.h:39:0,
                 from /Users/buildslave-sage/slave/sage_git/build/src/sage/libs/pari/parisage.h:3,
                 from /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.c:320:
/Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h: In function 'clone_lock':
/Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h:36:25: error: 'ulong' undeclared (first use in this function)
 clone_lock(GEN C) { if (isclone(C)) ++bl_refc(C); }

```



---

archive/issue_comments_377310.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2016-05-19T17:27:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377310",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_377311.json:
```json
{
    "body": "<a id='comment:11'></a>\nFLINT and PARI `ulong` mess...\nI guess that `handle_error.pxd` pulls the PARI headers and `parisage.h` which undefs `ulong` and when `handle_error.pyx` is treated and pulls in `paripriv.h` which wants `ulong` we lose...\nNot sure what the cleanest solution would be.\nMaybe `#define pari_ulong` in `parisage.h` and define/undefine `ulong` in a custom `pariprivsage.h` which pulls `paripriv.h` in (just as `parisage.h` does for `pari.h`).",
    "created_at": "2016-05-23T08:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377311",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:11'></a>
FLINT and PARI `ulong` mess...
I guess that `handle_error.pxd` pulls the PARI headers and `parisage.h` which undefs `ulong` and when `handle_error.pyx` is treated and pulls in `paripriv.h` which wants `ulong` we lose...
Not sure what the cleanest solution would be.
Maybe `#define pari_ulong` in `parisage.h` and define/undefine `ulong` in a custom `pariprivsage.h` which pulls `paripriv.h` in (just as `parisage.h` does for `pari.h`).



---

archive/issue_comments_377312.json:
```json
{
    "body": "<a id='comment:12'></a>\nI don't understand why anything would change on OS X...\n\nI do plan to investigate this, but maybe not this week.",
    "created_at": "2016-05-23T08:38:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377312",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
I don't understand why anything would change on OS X...

I do plan to investigate this, but maybe not this week.



---

archive/issue_comments_377313.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [jdemeyer](#comment%3A12):\n> I don't understand why anything would change on OS X...\n\nYes that's a mystery as well.",
    "created_at": "2016-05-23T08:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377313",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:13'></a>
Replying to [jdemeyer](#comment%3A12):
> I don't understand why anything would change on OS X...

Yes that's a mystery as well.



---

archive/issue_comments_377314.json:
```json
{
    "body": "<a id='comment:14'></a>\n`@`Volker: can you post the generated C file (`handle_error.c`)?",
    "created_at": "2016-05-23T08:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377314",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:14'></a>
`@`Volker: can you post the generated C file (`handle_error.c`)?



---

archive/issue_comments_377315.json:
```json
{
    "body": "<a id='comment:15'></a>\nYou have an account on the OSX buildbot, right?",
    "created_at": "2016-05-23T09:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377315",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>
You have an account on the OSX buildbot, right?



---

archive/issue_comments_377316.json:
```json
{
    "body": "<a id='comment:16'></a>\nCannot remember if I have one, nor it's name...",
    "created_at": "2016-05-23T09:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377316",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:16'></a>
Cannot remember if I have one, nor it's name...



---

archive/issue_comments_377317.json:
```json
{
    "body": "<a id='comment:17'></a>\nOk apparently not... if you send me privately your desired account name and Apple ID (for login) then I can make one.",
    "created_at": "2016-05-23T11:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377317",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
Ok apparently not... if you send me privately your desired account name and Apple ID (for login) then I can make one.



---

archive/issue_comments_377318.json:
```json
{
    "body": "<a id='comment:18'></a>\nThis works by accident on Linux due to this bit in `/usr/include/sys/types.h`:\n\n```\n#ifdef __USE_MISC\n/* Old compatibility names for C types.  */\ntypedef unsigned long int ulong;\ntypedef unsigned short int ushort;\ntypedef unsigned int uint;\n#endif\n```",
    "created_at": "2016-05-30T15:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377318",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
This works by accident on Linux due to this bit in `/usr/include/sys/types.h`:

```
#ifdef __USE_MISC
/* Old compatibility names for C types.  */
typedef unsigned long int ulong;
typedef unsigned short int ushort;
typedef unsigned int uint;
#endif
```



---

archive/issue_comments_377319.json:
```json
{
    "body": "**Changing commit** from \"[1f90f95e7c12901dba8078c84a588d9b3cd231a7](https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7)\" to \"[7690e7cfc166d6026e8be2c09c24ee80ef73426b](https://github.com/sagemath/sagetrac-mirror/commit/7690e7cfc166d6026e8be2c09c24ee80ef73426b)\".",
    "created_at": "2016-05-30T15:25:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377319",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1f90f95e7c12901dba8078c84a588d9b3cd231a7](https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7)" to "[7690e7cfc166d6026e8be2c09c24ee80ef73426b](https://github.com/sagemath/sagetrac-mirror/commit/7690e7cfc166d6026e8be2c09c24ee80ef73426b)".



---

archive/issue_comments_377320.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1a28882be7edf2d938a5abc22cf2f1e3e6b8398\">b1a2888</a></td><td><code>Upgrade PARI to latest master</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7690e7cfc166d6026e8be2c09c24ee80ef73426b\">7690e7c</a></td><td><code>Safely include paripriv.h</code></td></tr></table>\n",
    "created_at": "2016-05-30T15:25:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377320",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1a28882be7edf2d938a5abc22cf2f1e3e6b8398">b1a2888</a></td><td><code>Upgrade PARI to latest master</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7690e7cfc166d6026e8be2c09c24ee80ef73426b">7690e7c</a></td><td><code>Safely include paripriv.h</code></td></tr></table>




---

archive/issue_comments_377321.json:
```json
{
    "body": "**Changing commit** from \"[7690e7cfc166d6026e8be2c09c24ee80ef73426b](https://github.com/sagemath/sagetrac-mirror/commit/7690e7cfc166d6026e8be2c09c24ee80ef73426b)\" to \"[3b7c89077f2319c88fc92297685e47ced319aa87](https://github.com/sagemath/sagetrac-mirror/commit/3b7c89077f2319c88fc92297685e47ced319aa87)\".",
    "created_at": "2016-05-31T08:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377321",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7690e7cfc166d6026e8be2c09c24ee80ef73426b](https://github.com/sagemath/sagetrac-mirror/commit/7690e7cfc166d6026e8be2c09c24ee80ef73426b)" to "[3b7c89077f2319c88fc92297685e47ced319aa87](https://github.com/sagemath/sagetrac-mirror/commit/3b7c89077f2319c88fc92297685e47ced319aa87)".



---

archive/issue_comments_377322.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b7c89077f2319c88fc92297685e47ced319aa87\">3b7c890</a></td><td><code>Undefining ulong does not work</code></td></tr></table>\n",
    "created_at": "2016-05-31T08:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377322",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b7c89077f2319c88fc92297685e47ced319aa87">3b7c890</a></td><td><code>Undefining ulong does not work</code></td></tr></table>




---

archive/issue_comments_377323.json:
```json
{
    "body": "<a id='comment:21'></a>\nIs that because of typedef?",
    "created_at": "2016-05-31T08:56:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377323",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:21'></a>
Is that because of typedef?



---

archive/issue_comments_377324.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [jpflori](#comment%3A21):\n> Is that because of typedef?\n\n\nNo, the problem is that `ulong` appears also indirectly in macros. For example, the `typ()` macro in PARI uses `ulong`.",
    "created_at": "2016-05-31T09:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377324",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
Replying to [jpflori](#comment%3A21):
> Is that because of typedef?


No, the problem is that `ulong` appears also indirectly in macros. For example, the `typ()` macro in PARI uses `ulong`.



---

archive/issue_comments_377325.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2016-05-31T09:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377325",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_377326.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"days74\".",
    "created_at": "2016-06-01T05:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377326",
    "user": "https://github.com/tscrim"
}
```

**Changing keywords** from "" to "days74".



---

archive/issue_comments_377327.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9a3a3e7c3dd7e4071b7a4285321080b2f09f6c9\">e9a3a3e</a></td><td><code>Upgrade PARI to latest master</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a461395244933a16e9b578eeca63b586f861e91\">5a46139</a></td><td><code>Undefining ulong does not work</code></td></tr></table>\n",
    "created_at": "2016-06-15T13:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377327",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9a3a3e7c3dd7e4071b7a4285321080b2f09f6c9">e9a3a3e</a></td><td><code>Upgrade PARI to latest master</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a461395244933a16e9b578eeca63b586f861e91">5a46139</a></td><td><code>Undefining ulong does not work</code></td></tr></table>




---

archive/issue_comments_377328.json:
```json
{
    "body": "**Changing commit** from \"[3b7c89077f2319c88fc92297685e47ced319aa87](https://github.com/sagemath/sagetrac-mirror/commit/3b7c89077f2319c88fc92297685e47ced319aa87)\" to \"[5a461395244933a16e9b578eeca63b586f861e91](https://github.com/sagemath/sagetrac-mirror/commit/5a461395244933a16e9b578eeca63b586f861e91)\".",
    "created_at": "2016-06-15T13:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377328",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3b7c89077f2319c88fc92297685e47ced319aa87](https://github.com/sagemath/sagetrac-mirror/commit/3b7c89077f2319c88fc92297685e47ced319aa87)" to "[5a461395244933a16e9b578eeca63b586f861e91](https://github.com/sagemath/sagetrac-mirror/commit/5a461395244933a16e9b578eeca63b586f861e91)".



---

archive/issue_comments_377329.json:
```json
{
    "body": "<a id='comment:26'></a>\nRebased on latest develop.",
    "created_at": "2016-06-15T13:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377329",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
Rebased on latest develop.



---

archive/issue_comments_377330.json:
```json
{
    "body": "<a id='comment:27'></a>\nNote in case you intend to update this ticket to the very latest PARI version: if you do so, you can remove `build/pkgs/pari/patches/do_QXQ_eval.patch` (added in #20749, corresponding to upstream commit 6db8fba).",
    "created_at": "2016-06-15T13:31:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377330",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:27'></a>
Note in case you intend to update this ticket to the very latest PARI version: if you do so, you can remove `build/pkgs/pari/patches/do_QXQ_eval.patch` (added in #20749, corresponding to upstream commit 6db8fba).



---

archive/issue_comments_377331.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n Some recent fixes needed to correctly count points on hyperelliptic curves.\n \n-**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2670-g9b4a64c.tar.gz\n+**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2771-gb70b447.tar.gz\n``````\n",
    "created_at": "2016-06-15T15:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377331",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 Some recent fixes needed to correctly count points on hyperelliptic curves.
 
-**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2670-g9b4a64c.tar.gz
+**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2771-gb70b447.tar.gz
``````




---

archive/issue_comments_377332.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2016-06-15T15:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377332",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_377333.json:
```json
{
    "body": "**Changing commit** from \"[5a461395244933a16e9b578eeca63b586f861e91](https://github.com/sagemath/sagetrac-mirror/commit/5a461395244933a16e9b578eeca63b586f861e91)\" to \"[e796224eafee210bc2711d67afc9ffc59779208c](https://github.com/sagemath/sagetrac-mirror/commit/e796224eafee210bc2711d67afc9ffc59779208c)\".",
    "created_at": "2016-06-15T16:43:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377333",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5a461395244933a16e9b578eeca63b586f861e91](https://github.com/sagemath/sagetrac-mirror/commit/5a461395244933a16e9b578eeca63b586f861e91)" to "[e796224eafee210bc2711d67afc9ffc59779208c](https://github.com/sagemath/sagetrac-mirror/commit/e796224eafee210bc2711d67afc9ffc59779208c)".



---

archive/issue_comments_377334.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e796224eafee210bc2711d67afc9ffc59779208c\">e796224</a></td><td><code>Upgrade PARI to latest master</code></td></tr></table>\n",
    "created_at": "2016-06-15T16:43:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377334",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e796224eafee210bc2711d67afc9ffc59779208c">e796224</a></td><td><code>Upgrade PARI to latest master</code></td></tr></table>




---

archive/issue_comments_377335.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2016-06-15T16:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377335",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_377336.json:
```json
{
    "body": "<a id='comment:30'></a>\nUpgraded to really latest master.",
    "created_at": "2016-06-15T16:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377336",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
Upgraded to really latest master.



---

archive/issue_comments_377337.json:
```json
{
    "body": "**Changing reviewer** from \"Jean-Pierre Flori\" to \"Jean-Pierre Flori, Peter Bruin\".",
    "created_at": "2016-06-20T09:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377337",
    "user": "https://github.com/pjbruin"
}
```

**Changing reviewer** from "Jean-Pierre Flori" to "Jean-Pierre Flori, Peter Bruin".



---

archive/issue_comments_377338.json:
```json
{
    "body": "**Changing commit** from \"[e796224eafee210bc2711d67afc9ffc59779208c](https://github.com/sagemath/sagetrac-mirror/commit/e796224eafee210bc2711d67afc9ffc59779208c)\" to \"[bedff7be09d52fc7eba721074eaab6ad5607876b](https://github.com/sagemath/sagetrac-mirror/commit/bedff7be09d52fc7eba721074eaab6ad5607876b)\".",
    "created_at": "2016-06-20T09:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377338",
    "user": "https://github.com/pjbruin"
}
```

**Changing commit** from "[e796224eafee210bc2711d67afc9ffc59779208c](https://github.com/sagemath/sagetrac-mirror/commit/e796224eafee210bc2711d67afc9ffc59779208c)" to "[bedff7be09d52fc7eba721074eaab6ad5607876b](https://github.com/sagemath/sagetrac-mirror/commit/bedff7be09d52fc7eba721074eaab6ad5607876b)".



---

archive/issue_comments_377339.json:
```json
{
    "body": "<a id='comment:31'></a>\nTwo small patches; the second one mirrors the changes to `paridecl.h` made in upstream commit 0d28865 (split FpXQX_factor.c from FpX_factor.c).",
    "created_at": "2016-06-20T09:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377339",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:31'></a>
Two small patches; the second one mirrors the changes to `paridecl.h` made in upstream commit 0d28865 (split FpXQX_factor.c from FpX_factor.c).



---

archive/issue_comments_377340.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_pari_to_latest_master)\" to \"[u/pbruin/20581-upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/20581-upgrade_pari_to_latest_master)\".",
    "created_at": "2016-06-20T09:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377340",
    "user": "https://github.com/pjbruin"
}
```

**Changing branch** from "[u/jdemeyer/upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_pari_to_latest_master)" to "[u/pbruin/20581-upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/20581-upgrade_pari_to_latest_master)".



---

archive/issue_comments_377341.json:
```json
{
    "body": "<a id='comment:32'></a>\nLooks good to me, and doctests pass on GNU/Linux x86_64.  If you are happy with the above patches and the `ulong` problem on OSX has been resolved, this can get a positive review as far as I'm concerned.",
    "created_at": "2016-06-20T09:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377341",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:32'></a>
Looks good to me, and doctests pass on GNU/Linux x86_64.  If you are happy with the above patches and the `ulong` problem on OSX has been resolved, this can get a positive review as far as I'm concerned.



---

archive/issue_comments_377342.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2016-06-20T10:01:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377342",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_377343.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2016-06-21T20:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377343",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_377344.json:
```json
{
    "body": "<a id='comment:34'></a>\n\n```\nsage -t --long src/sage/modular/dirichlet.py  # 1 doctest failed\nsage -t --long src/sage/modular/overconvergent/weightspace.py  # 2 doctests failed\n```",
    "created_at": "2016-06-21T20:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377344",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:34'></a>

```
sage -t --long src/sage/modular/dirichlet.py  # 1 doctest failed
sage -t --long src/sage/modular/overconvergent/weightspace.py  # 2 doctests failed
```



---

archive/issue_comments_377345.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [vbraun](#comment%3A34):\n> \n> ```\n> sage -t --long src/sage/modular/dirichlet.py  # 1 doctest failed\n> sage -t --long src/sage/modular/overconvergent/weightspace.py  # 2 doctests failed\n> ```\n\n\nI honestly thought those were caused by #15692 rather than this one.",
    "created_at": "2016-06-21T20:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377345",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:35'></a>
Replying to [vbraun](#comment%3A34):
> 
> ```
> sage -t --long src/sage/modular/dirichlet.py  # 1 doctest failed
> sage -t --long src/sage/modular/overconvergent/weightspace.py  # 2 doctests failed
> ```


I honestly thought those were caused by #15692 rather than this one.



---

archive/issue_comments_377346.json:
```json
{
    "body": "<a id='comment:36'></a>\nmaybe, let me double check...",
    "created_at": "2016-06-21T20:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377346",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:36'></a>
maybe, let me double check...



---

archive/issue_comments_377347.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2016-06-21T21:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377347",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_377348.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2016-06-23T17:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377348",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_377349.json:
```json
{
    "body": "**Changing branch** from \"[u/pbruin/20581-upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/20581-upgrade_pari_to_latest_master)\" to \"[bedff7be09d52fc7eba721074eaab6ad5607876b](https://github.com/sagemath/sagetrac-mirror/commit/bedff7be09d52fc7eba721074eaab6ad5607876b)\".",
    "created_at": "2016-06-23T17:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20581#issuecomment-377349",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/pbruin/20581-upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/20581-upgrade_pari_to_latest_master)" to "[bedff7be09d52fc7eba721074eaab6ad5607876b](https://github.com/sagemath/sagetrac-mirror/commit/bedff7be09d52fc7eba721074eaab6ad5607876b)".



---

archive/issue_events_063105.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-23T17:14:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20581",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20581#event-63105"
}
```
