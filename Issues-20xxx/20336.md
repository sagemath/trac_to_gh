# Issue 20336: Add more features to mq.SBox

archive/issues_020099.json:
```json
{
    "body": "Current implementation of mq.SBox is still lack of basic functionality to determine various cryptographic properties of an S-Box such as nonlinearity, differential uniformity, etc. This commit implements some of them such as :\n1. Computation of nonlinearity and differential uniformity.\n2. Determine if the S-Box is an almost bent (AB) / almost perfect nonlinear function (APN).\n3. Determine the balancedness of the S-Box.\n4. Compute the maximum and minimum algebraic degree of its component function.\n5. Obtain the component function.\n6. Compute its the differential and linear branch number.\n7. Compute its autocorrelation matrix.\n8. Obtain linear structures in its component functions.\n9. Obtain all fixed points in the S-Box.\n10. For an invertible S-Box, obtain its inverse.\n21. Determine if the S-Box is a monomial function.\n\nCC:  @malb\n\nKeywords: SBox, cryptography\n\nBranch/Commit: 05bc98b0e59ecf4a124881fc60a8b27179295bb0\n\nReviewer: Travis Scrimshaw, Martin Albrecht\n\nAuthor: Rusydi H. Makarim\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20336\n\n",
    "closed_at": "2016-04-05T12:35:00Z",
    "created_at": "2016-03-31T12:36:48Z",
    "labels": [
        "component: cryptography"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "Add more features to mq.SBox",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20336",
    "user": "https://github.com/rusydi"
}
```
Current implementation of mq.SBox is still lack of basic functionality to determine various cryptographic properties of an S-Box such as nonlinearity, differential uniformity, etc. This commit implements some of them such as :
1. Computation of nonlinearity and differential uniformity.
2. Determine if the S-Box is an almost bent (AB) / almost perfect nonlinear function (APN).
3. Determine the balancedness of the S-Box.
4. Compute the maximum and minimum algebraic degree of its component function.
5. Obtain the component function.
6. Compute its the differential and linear branch number.
7. Compute its autocorrelation matrix.
8. Obtain linear structures in its component functions.
9. Obtain all fixed points in the S-Box.
10. For an invertible S-Box, obtain its inverse.
21. Determine if the S-Box is a monomial function.

CC:  @malb

Keywords: SBox, cryptography

Branch/Commit: 05bc98b0e59ecf4a124881fc60a8b27179295bb0

Reviewer: Travis Scrimshaw, Martin Albrecht

Author: Rusydi H. Makarim

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20336





---

archive/issue_comments_294721.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to cryptography.",
    "created_at": "2016-03-31T12:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294721",
    "user": "https://github.com/rusydi"
}
```

Changing component from PLEASE CHANGE to cryptography.



---

archive/issue_comments_294722.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2016-03-31T12:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294722",
    "user": "https://github.com/rusydi"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_294723.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2016-03-31T12:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294723",
    "user": "https://github.com/rusydi"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_294724.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-03-31T12:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294724",
    "user": "https://github.com/rusydi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_294725.json:
```json
{
    "body": "Changing keywords from \"\" to \"SBox, cryptography\".",
    "created_at": "2016-03-31T12:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294725",
    "user": "https://github.com/rusydi"
}
```

Changing keywords from "" to "SBox, cryptography".



---

archive/issue_comments_294726.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,15 @@\n-\n+Current implementation of mq.SBox is still lack of basic functionality to determine various cryptographic properties of an S-Box such as nonlinearity, differential uniformity, etc. This commit implements some of them such as :\n+1. Computation of nonlinearity and differential uniformity.\n+2. Determine if the S-Box is an almost bent (AB) / almost perfect nonlinear function (APN).\n+3. Determine the balancedness of the S-Box.\n+4. Compute the maximum and minimum algebraic degree of its component function.\n+5. Obtain the component function.\n+6. Compute its the differential and linear branch number.\n+7. Compute its autocorrelation matrix.\n+8. Obtain linear structures in its component functions.\n+9. Obtain all fixed points in the S-Box.\n+10. For an invertible S-Box, obtain its inverse.\n+21. Determine if the S-Box is a monomial function.\n \n Comment: 1\n \n```\n",
    "created_at": "2016-03-31T12:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294726",
    "user": "https://github.com/rusydi"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,15 @@
-
+Current implementation of mq.SBox is still lack of basic functionality to determine various cryptographic properties of an S-Box such as nonlinearity, differential uniformity, etc. This commit implements some of them such as :
+1. Computation of nonlinearity and differential uniformity.
+2. Determine if the S-Box is an almost bent (AB) / almost perfect nonlinear function (APN).
+3. Determine the balancedness of the S-Box.
+4. Compute the maximum and minimum algebraic degree of its component function.
+5. Obtain the component function.
+6. Compute its the differential and linear branch number.
+7. Compute its autocorrelation matrix.
+8. Obtain linear structures in its component functions.
+9. Obtain all fixed points in the S-Box.
+10. For an invertible S-Box, obtain its inverse.
+21. Determine if the S-Box is a monomial function.
 
 Comment: 1
 
```




---

archive/issue_comments_294727.json:
```json
{
    "body": "<a id='comment:4'></a>I can't comment to much on the code itself since it is outside of my expertise. However, I can make some comments on formatting:\n\n- Instead of `$` for latex, you should use ```. (We do support the former, but it is not as well-supported as the latter.)\n- Instead of `\\mathbb{F}_2`, you should use the macro `\\GF{2}` for consistency with the rest of Sage.\n- Error statements are not sentences, and as such, should not start with a uppercase letter nor have a period. This is also to be consistent with Python.\n- The input block should be formatted like this:\n  {{{\n        - ``b`` -- either an integer or a tuple of `\\GF{2}` elements of\n          length ``self.n``\n  }}}\n- Remove the unnecessary parentheses here: `return (self.differential_uniformity() == 2)`.\n- It is better to use `\\mathrm{wt}` or `\\operatorname{wt}` instead of `\\text{wt}` (this is a latex thing having to do with spacing rules).\n- You should use `.. MATH::` and have the equation indented on a separate line (with a blank line inbetween).\n- Try to keep lines less than 80 characters long\n- `autocorrelation_matrix` should be a ``@`cached_method`. Also make sure it returns an immutable matrix.\n- All parentheses are extraneous here: `if ((m & 1) == 0):`. At least the outer ones are.\n- I prefer `EXAMPLES::` even when there is only one example; more maybe added later and this is for consistency.\n- In the doc, do ```TypeError```.\n\nOtherwise the doc and coding style looks good. I could try to review the code if no one else steps forward.\n\nAlso is this your first contribution to Sage?",
    "created_at": "2016-03-31T14:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294727",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>I can't comment to much on the code itself since it is outside of my expertise. However, I can make some comments on formatting:

- Instead of `$` for latex, you should use ```. (We do support the former, but it is not as well-supported as the latter.)
- Instead of `\mathbb{F}_2`, you should use the macro `\GF{2}` for consistency with the rest of Sage.
- Error statements are not sentences, and as such, should not start with a uppercase letter nor have a period. This is also to be consistent with Python.
- The input block should be formatted like this:
  {{{
        - ``b`` -- either an integer or a tuple of `\GF{2}` elements of
          length ``self.n``
  }}}
- Remove the unnecessary parentheses here: `return (self.differential_uniformity() == 2)`.
- It is better to use `\mathrm{wt}` or `\operatorname{wt}` instead of `\text{wt}` (this is a latex thing having to do with spacing rules).
- You should use `.. MATH::` and have the equation indented on a separate line (with a blank line inbetween).
- Try to keep lines less than 80 characters long
- `autocorrelation_matrix` should be a ``@`cached_method`. Also make sure it returns an immutable matrix.
- All parentheses are extraneous here: `if ((m & 1) == 0):`. At least the outer ones are.
- I prefer `EXAMPLES::` even when there is only one example; more maybe added later and this is for consistency.
- In the doc, do ```TypeError```.

Otherwise the doc and coding style looks good. I could try to review the code if no one else steps forward.

Also is this your first contribution to Sage?



---

archive/issue_comments_294728.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-01T14:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294728",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_294729.json:
```json
{
    "body": "<a id='comment:7'></a>Hi,\n\nThanks, I have updated it according to the initial comment. And yes, this is my first contribution to SAGE.\n\n-- Rusydi\n\nReplying to [comment:4 tscrim]:\n> I can't comment to much on the code itself since it is outside of my expertise. However, I can make some comments on formatting:\n> \n> - Instead of `$` for latex, you should use ```. (We do support the former, but it is not as well-supported as the latter.)\n> - Instead of `\\mathbb{F}_2`, you should use the macro `\\GF{2}` for consistency with the rest of Sage.\n> - Error statements are not sentences, and as such, should not start with a uppercase letter nor have a period. This is also to be consistent with Python.\n> - The input block should be formatted like this:\n>   {{{\n>         - ``b`` -- either an integer or a tuple of `\\GF{2}` elements of\n>           length ``self.n``\n>   }}}\n> - Remove the unnecessary parentheses here: `return (self.differential_uniformity() == 2)`.\n> - It is better to use `\\mathrm{wt}` or `\\operatorname{wt}` instead of `\\text{wt}` (this is a latex thing having to do with spacing rules).\n> - You should use `.. MATH::` and have the equation indented on a separate line (with a blank line inbetween).\n> - Try to keep lines less than 80 characters long\n> - `autocorrelation_matrix` should be a ``@`cached_method`. Also make sure it returns an immutable matrix.\n> - All parentheses are extraneous here: `if ((m & 1) == 0):`. At least the outer ones are.\n> - I prefer `EXAMPLES::` even when there is only one example; more maybe added later and this is for consistency.\n> - In the doc, do ```TypeError```.\n> \n> Otherwise the doc and coding style looks good. I could try to review the code if no one else steps forward.\n> \n> Also is this your first contribution to Sage?",
    "created_at": "2016-04-01T14:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294729",
    "user": "https://github.com/rusydi"
}
```

<a id='comment:7'></a>Hi,

Thanks, I have updated it according to the initial comment. And yes, this is my first contribution to SAGE.

-- Rusydi

Replying to [comment:4 tscrim]:
> I can't comment to much on the code itself since it is outside of my expertise. However, I can make some comments on formatting:
> 
> - Instead of `$` for latex, you should use ```. (We do support the former, but it is not as well-supported as the latter.)
> - Instead of `\mathbb{F}_2`, you should use the macro `\GF{2}` for consistency with the rest of Sage.
> - Error statements are not sentences, and as such, should not start with a uppercase letter nor have a period. This is also to be consistent with Python.
> - The input block should be formatted like this:
>   {{{
>         - ``b`` -- either an integer or a tuple of `\GF{2}` elements of
>           length ``self.n``
>   }}}
> - Remove the unnecessary parentheses here: `return (self.differential_uniformity() == 2)`.
> - It is better to use `\mathrm{wt}` or `\operatorname{wt}` instead of `\text{wt}` (this is a latex thing having to do with spacing rules).
> - You should use `.. MATH::` and have the equation indented on a separate line (with a blank line inbetween).
> - Try to keep lines less than 80 characters long
> - `autocorrelation_matrix` should be a ``@`cached_method`. Also make sure it returns an immutable matrix.
> - All parentheses are extraneous here: `if ((m & 1) == 0):`. At least the outer ones are.
> - I prefer `EXAMPLES::` even when there is only one example; more maybe added later and this is for consistency.
> - In the doc, do ```TypeError```.
> 
> Otherwise the doc and coding style looks good. I could try to review the code if no one else steps forward.
> 
> Also is this your first contribution to Sage?



---

archive/issue_comments_294730.json:
```json
{
    "body": "<a id='comment:8'></a>Welcome to Sage! This is a very well-done submission.\n\nNow that you are using ``@`cached_method`, you don't need the `_autocorrelation_matrix` attribute and can remove this code:\n\n```\n        try:\n            return self._autocorrelation_matrix\n        except AttributeError:\n            pass\n```\n(similarly for the `linearly_approximation_matrix`).\n\nMartin, will/can you be doing a review of the math parts?",
    "created_at": "2016-04-02T13:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294730",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Welcome to Sage! This is a very well-done submission.

Now that you are using ``@`cached_method`, you don't need the `_autocorrelation_matrix` attribute and can remove this code:

```
        try:
            return self._autocorrelation_matrix
        except AttributeError:
            pass
```
(similarly for the `linearly_approximation_matrix`).

Martin, will/can you be doing a review of the math parts?



---

archive/issue_comments_294731.json:
```json
{
    "body": "<a id='comment:9'></a>Hi all, I took a look at the ticket. It's very nice! The only thing I noticed is that you're adding new functions for `differential_uniformity`. Wouldn't an alias be sufficient, e.g. `differential_uniformity = maximal_difference_probability_absolute`?",
    "created_at": "2016-04-03T10:19:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294731",
    "user": "https://github.com/malb"
}
```

<a id='comment:9'></a>Hi all, I took a look at the ticket. It's very nice! The only thing I noticed is that you're adding new functions for `differential_uniformity`. Wouldn't an alias be sufficient, e.g. `differential_uniformity = maximal_difference_probability_absolute`?



---

archive/issue_comments_294732.json:
```json
{
    "body": "<a id='comment:10'></a>PS: We should move mq.SBox to some other place. It has almost nothing to do with MQ any more, it's much more general now. But that's another ticket.",
    "created_at": "2016-04-03T10:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294732",
    "user": "https://github.com/malb"
}
```

<a id='comment:10'></a>PS: We should move mq.SBox to some other place. It has almost nothing to do with MQ any more, it's much more general now. But that's another ticket.



---

archive/issue_comments_294733.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-03T20:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294733",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_294734.json:
```json
{
    "body": "<a id='comment:12'></a>This is good from my viewpoint.",
    "created_at": "2016-04-04T00:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294734",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>This is good from my viewpoint.



---

archive/issue_comments_294735.json:
```json
{
    "body": "<a id='comment:13'></a>Same here.",
    "created_at": "2016-04-04T09:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294735",
    "user": "https://github.com/malb"
}
```

<a id='comment:13'></a>Same here.



---

archive/issue_comments_294736.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-04-04T09:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294736",
    "user": "https://github.com/malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_055153.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-05T12:35:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20336#event-55153"
}
```



---

archive/issue_comments_294737.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-04-05T12:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20336#issuecomment-294737",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
