# Issue 20413: InteractiveLPBackend: Use standard-form transformation, objective_constant_term, change default base_ring to QQ

archive/issues_020176.json:
```json
{
    "body": "Follow-up on #20296, #20311, #20301. \nUpdating `InteractiveLPBackend` to:\n- use the standard-form transformation,\n- simplify its code slightly by making use of the new `objective_constant_term` handling in `InteractiveLPProblem`\n- make the example of optimizing over the dodecahedron more natural and remove use of backend methods.\n- change default `base_ring` to QQ -- a much saner default because it's so much faster\n\nCC:  @novoselt @dimpase @videlec\n\nKeywords: lp\n\nBranch/Commit: c8fa4b0a9a706f79786f8ee94e0c955e3cabae51\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #20296, #20311, #20301\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20413\n\n",
    "closed_at": "2016-04-14T21:56:56Z",
    "created_at": "2016-04-11T00:30:13Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "InteractiveLPBackend: Use standard-form transformation, objective_constant_term, change default base_ring to QQ",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20413",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up on #20296, #20311, #20301. 
Updating `InteractiveLPBackend` to:
- use the standard-form transformation,
- simplify its code slightly by making use of the new `objective_constant_term` handling in `InteractiveLPProblem`
- make the example of optimizing over the dodecahedron more natural and remove use of backend methods.
- change default `base_ring` to QQ -- a much saner default because it's so much faster

CC:  @novoselt @dimpase @videlec

Keywords: lp

Branch/Commit: c8fa4b0a9a706f79786f8ee94e0c955e3cabae51

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #20296, #20311, #20301

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20413





---

archive/issue_comments_370762.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/fx_with_new_interactive_simplex_objshift\"",
    "created_at": "2016-04-11T00:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370762",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/fx_with_new_interactive_simplex_objshift"



---

archive/issue_comments_370763.json:
```json
{
    "body": "<a id='comment:2'></a>Branch is on top of #20311\n\n---\nLast 10 new commits:",
    "created_at": "2016-04-11T00:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370763",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Branch is on top of #20311

---
Last 10 new commits:



---

archive/issue_comments_370764.json:
```json
{
    "body": "Changing commit from \"\" to \"bd1424bb2a56cabdc38d8162a9af8c66663bec58\"",
    "created_at": "2016-04-11T00:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370764",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "bd1424bb2a56cabdc38d8162a9af8c66663bec58"



---

archive/issue_comments_370765.json:
```json
{
    "body": "Changing commit from \"bd1424bb2a56cabdc38d8162a9af8c66663bec58\" to \"05af303f24dcd7899de4639666293adde8defdb8\"",
    "created_at": "2016-04-11T02:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370765",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bd1424bb2a56cabdc38d8162a9af8c66663bec58" to "05af303f24dcd7899de4639666293adde8defdb8"



---

archive/issue_comments_370766.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-11T02:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370766",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370767.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-04-11T02:55:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370767",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_370768.json:
```json
{
    "body": "<a id='comment:5'></a>Out of curiosity - how does timing of interactive backend compares with \"normal solvers\" on \"interesting problems\"?-) Presumably most of the time is spent on typesetting, but other solvers may have some setup overhead which is significant in small cases. Also you have used revised dictionaries - are there any benefits to them in this implementation? (It seemed to me that no, the first problem of https://sage373.math.ualberta.ca/home/pub/32/ )",
    "created_at": "2016-04-11T02:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370768",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:5'></a>Out of curiosity - how does timing of interactive backend compares with "normal solvers" on "interesting problems"?-) Presumably most of the time is spent on typesetting, but other solvers may have some setup overhead which is significant in small cases. Also you have used revised dictionaries - are there any benefits to them in this implementation? (It seemed to me that no, the first problem of https://sage373.math.ualberta.ca/home/pub/32/ )



---

archive/issue_comments_370769.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-11T03:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370769",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370770.json:
```json
{
    "body": "Changing commit from \"05af303f24dcd7899de4639666293adde8defdb8\" to \"c071f9a2a60f375c6b0fc731d73e5bcb89d5ea93\"",
    "created_at": "2016-04-11T03:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370770",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "05af303f24dcd7899de4639666293adde8defdb8" to "c071f9a2a60f375c6b0fc731d73e5bcb89d5ea93"



---

archive/issue_comments_370771.json:
```json
{
    "body": "<a id='comment:7'></a>I have not done any benchmarking, neither with real solvers, nor between your two dictionary implementations. This could be a nice class project. \nI have chosen the revised dictionary because that's what one \"should\" do. I suppose if one does the benchmarking, one will see the expected result that the revised method is faster when the number of nonbasics is large enough.\n\nI wrote `InteractiveLPBackend` because I needed a solver for some very small LPs with irrational algebraic data (unrelated to the example in the doctest!), for which there is simply no alternative solver available.",
    "created_at": "2016-04-11T03:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370771",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>I have not done any benchmarking, neither with real solvers, nor between your two dictionary implementations. This could be a nice class project. 
I have chosen the revised dictionary because that's what one "should" do. I suppose if one does the benchmarking, one will see the expected result that the revised method is faster when the number of nonbasics is large enough.

I wrote `InteractiveLPBackend` because I needed a solver for some very small LPs with irrational algebraic data (unrelated to the example in the doctest!), for which there is simply no alternative solver available.



---

archive/issue_comments_370772.json:
```json
{
    "body": "<a id='comment:8'></a>At the moment, `InteractiveLPBackend` chooses `AA` as the default base ring, that's probably a bad idea (I'll change it).\nIf I change it to `QQ`, I get the following comparison:\n\n```\nsage: %time delsarte_bound_additive_hamming_space(19,15,7,solver='ppl')\nCPU times: user 153 ms, sys: 13.4 ms, total: 167 ms\nWall time: 163 ms\n3\nsage: %time delsarte_bound_additive_hamming_space(19,15,7,solver='glpk')\nCPU times: user 84.9 ms, sys: 14.7 ms, total: 99.6 ms\nWall time: 109 ms\n3\nsage: %time delsarte_bound_additive_hamming_space(19,15,7,solver='coin')\nCPU times: user 87.9 ms, sys: 16.1 ms, total: 104 ms\nWall time: 160 ms\n3\nsage: %time delsarte_bound_additive_hamming_space(19,15,7,solver='interactivelp')\nCPU times: user 10.6 s, sys: 91.1 ms, total: 10.7 s\nWall time: 10.8 s\n3\n```",
    "created_at": "2016-04-11T03:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370772",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>At the moment, `InteractiveLPBackend` chooses `AA` as the default base ring, that's probably a bad idea (I'll change it).
If I change it to `QQ`, I get the following comparison:

```
sage: %time delsarte_bound_additive_hamming_space(19,15,7,solver='ppl')
CPU times: user 153 ms, sys: 13.4 ms, total: 167 ms
Wall time: 163 ms
3
sage: %time delsarte_bound_additive_hamming_space(19,15,7,solver='glpk')
CPU times: user 84.9 ms, sys: 14.7 ms, total: 99.6 ms
Wall time: 109 ms
3
sage: %time delsarte_bound_additive_hamming_space(19,15,7,solver='coin')
CPU times: user 87.9 ms, sys: 16.1 ms, total: 104 ms
Wall time: 160 ms
3
sage: %time delsarte_bound_additive_hamming_space(19,15,7,solver='interactivelp')
CPU times: user 10.6 s, sys: 91.1 ms, total: 10.7 s
Wall time: 10.8 s
3
```



---

archive/issue_comments_370773.json:
```json
{
    "body": "<a id='comment:9'></a>(The change of the default base ring will be on a different ticket; because first #20415 needs to be done.)\nSo the present ticket is ready for review.",
    "created_at": "2016-04-11T04:08:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370773",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>(The change of the default base ring will be on a different ticket; because first #20415 needs to be done.)
So the present ticket is ready for review.



---

archive/issue_comments_370774.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-04-13T00:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370774",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_370775.json:
```json
{
    "body": "Changing commit from \"c071f9a2a60f375c6b0fc731d73e5bcb89d5ea93\" to \"c8fa4b0a9a706f79786f8ee94e0c955e3cabae51\"",
    "created_at": "2016-04-13T00:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370775",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c071f9a2a60f375c6b0fc731d73e5bcb89d5ea93" to "c8fa4b0a9a706f79786f8ee94e0c955e3cabae51"



---

archive/issue_comments_370776.json:
```json
{
    "body": "<a id='comment:11'></a>Rebased on top of 7.2.beta4, which merged #20415. \n\nMade the change to a better (much faster) default `base_ring` QQ. \n\nNeeds review.",
    "created_at": "2016-04-13T00:07:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370776",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Rebased on top of 7.2.beta4, which merged #20415. 

Made the change to a better (much faster) default `base_ring` QQ. 

Needs review.



---

archive/issue_comments_370777.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n - use the standard-form transformation,\n - simplify its code slightly by making use of the new `objective_constant_term` handling in `InteractiveLPProblem`\n - make the example of optimizing over the dodecahedron more natural and remove use of backend methods.\n-\n+- change default `base_ring` to QQ -- a much saner default because it's so much faster\n``````\n",
    "created_at": "2016-04-13T00:07:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370777",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 - use the standard-form transformation,
 - simplify its code slightly by making use of the new `objective_constant_term` handling in `InteractiveLPProblem`
 - make the example of optimizing over the dodecahedron more natural and remove use of backend methods.
-
+- change default `base_ring` to QQ -- a much saner default because it's so much faster
``````




---

archive/issue_comments_370778.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Follow-up on #20296, #20311, #20301. \n-Updating `InteractiveLPProblem` to:\n+Updating `InteractiveLPBackend` to:\n - use the standard-form transformation,\n - simplify its code slightly by making use of the new `objective_constant_term` handling in `InteractiveLPProblem`\n - make the example of optimizing over the dodecahedron more natural and remove use of backend methods.\n``````\n",
    "created_at": "2016-04-13T00:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370778",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Follow-up on #20296, #20311, #20301. 
-Updating `InteractiveLPProblem` to:
+Updating `InteractiveLPBackend` to:
 - use the standard-form transformation,
 - simplify its code slightly by making use of the new `objective_constant_term` handling in `InteractiveLPProblem`
 - make the example of optimizing over the dodecahedron more natural and remove use of backend methods.
``````




---

archive/issue_comments_370779.json:
```json
{
    "body": "<a id='comment:13'></a>Corrected the title/description -- this ticket is about the *MIP backend* using the interactive simplex method.",
    "created_at": "2016-04-13T00:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370779",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Corrected the title/description -- this ticket is about the *MIP backend* using the interactive simplex method.



---

archive/issue_comments_370780.json:
```json
{
    "body": "<a id='comment:14'></a>looks good.",
    "created_at": "2016-04-13T14:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370780",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>looks good.



---

archive/issue_comments_370781.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-04-13T14:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370781",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_370782.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2016-04-13T14:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370782",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_370783.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/fx_with_new_interactive_simplex_objshift\" to \"c8fa4b0a9a706f79786f8ee94e0c955e3cabae51\"",
    "created_at": "2016-04-14T21:56:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370783",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/fx_with_new_interactive_simplex_objshift" to "c8fa4b0a9a706f79786f8ee94e0c955e3cabae51"



---

archive/issue_events_055263.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-14T21:56:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20413#event-55263"
}
```



---

archive/issue_comments_370784.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-04-14T21:56:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20413",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20413#issuecomment-370784",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
