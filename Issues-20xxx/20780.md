# Issue 20780: add level parameter to rational_preimages for projective points

archive/issues_020543.json:
```json
{
    "assignees": [
        "https://github.com/bhutz"
    ],
    "body": "When working with preimage trees it is usefull to compute more than just the first preimages of a given point. The ticket is to add a parameter to rational_preimages() to specify how far back to find preimages.  I.e. find all points Q with `f^k(Q) =P` for specified `k`.\n\nBranch/Commit: **[`6377a27`](https://github.com/sagemath/sagetrac-mirror/commit/6377a27d9be3cf3b46657d294da38f88ee73d65e)**\n\nReviewer: **Grayson Jorgenson, Rebecca Lauren Miller**\n\nAuthor: **Ben Hutz**\n\nComponent: **algebraic geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20780_\n\n",
    "closed_at": "2016-06-12T23:11:22Z",
    "created_at": "2016-06-07T18:14:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "add level parameter to rational_preimages for projective points",
    "type": "issue",
    "updated_at": "2016-06-12T23:11:22Z",
    "url": "https://github.com/sagemath/sage/issues/20780",
    "user": "https://github.com/bhutz"
}
```
When working with preimage trees it is usefull to compute more than just the first preimages of a given point. The ticket is to add a parameter to rational_preimages() to specify how far back to find preimages.  I.e. find all points Q with `f^k(Q) =P` for specified `k`.

Branch/Commit: **[`6377a27`](https://github.com/sagemath/sagetrac-mirror/commit/6377a27d9be3cf3b46657d294da38f88ee73d65e)**

Reviewer: **Grayson Jorgenson, Rebecca Lauren Miller**

Author: **Ben Hutz**

Component: **algebraic geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/20780_





---

archive/issue_events_293950.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2016-06-07T18:14:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20780#event-293950"
}
```



---

archive/issue_events_293951.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2016-06-07T18:14:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20780#event-293951"
}
```



---

archive/issue_events_293952.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2016-06-07T18:14:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20780#event-293952"
}
```



---

archive/issue_events_293953.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2016-06-07T18:14:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20780#event-293953"
}
```



---

archive/issue_events_293954.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2016-06-07T18:14:01Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "subject": "https://github.com/bhutz",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20780#event-293954"
}
```



---

archive/issue_comments_301375.json:
```json
{
    "body": "Commit: **[`e7db093`](https://github.com/sagemath/sagetrac-mirror/commit/e7db093e5e6d70000c9806e1555cb09ce579e997)**",
    "created_at": "2016-06-07T18:16:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20780#issuecomment-301375",
    "user": "https://github.com/bhutz"
}
```

Commit: **[`e7db093`](https://github.com/sagemath/sagetrac-mirror/commit/e7db093e5e6d70000c9806e1555cb09ce579e997)**



---

archive/issue_comments_301376.json:
```json
{
    "body": "Author: **Ben Hutz**",
    "created_at": "2016-06-07T18:16:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20780#issuecomment-301376",
    "user": "https://github.com/bhutz"
}
```

Author: **Ben Hutz**



---

archive/issue_comments_301377.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7db093e5e6d70000c9806e1555cb09ce579e997\"><code>e7db093</code></a></td><td><code>20780: add level parameter to rational_preimages</code></td></tr></table>\n",
    "created_at": "2016-06-07T18:16:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20780#issuecomment-301377",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7db093e5e6d70000c9806e1555cb09ce579e997"><code>e7db093</code></a></td><td><code>20780: add level parameter to rational_preimages</code></td></tr></table>




---

archive/issue_comments_301378.json:
```json
{
    "body": "Branch: **[u/bhutz/t/20780](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/t/20780)**",
    "created_at": "2016-06-07T18:16:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20780#issuecomment-301378",
    "user": "https://github.com/bhutz"
}
```

Branch: **[u/bhutz/t/20780](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/t/20780)**



---

archive/issue_events_293955.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2016-06-07T18:16:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20780#event-293955"
}
```



---

archive/issue_comments_301379.json:
```json
{
    "body": "Reviewer: **Grayson Jorgenson**",
    "created_at": "2016-06-08T08:20:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20780#issuecomment-301379",
    "user": "https://github.com/sagetrac-gjorgenson"
}
```

Reviewer: **Grayson Jorgenson**



---

archive/issue_comments_301380.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI think this looks good. The code makes sense and appears to work as intended. I just found some really minor things:\n\n-algebraic_scheme.py\n- line 2780 - change TypeError message to all lowercase\n- Old issues present before this ticket that maybe could be addressed here:\n- line 2680 - <code>\\`False\\`</code> to <code>\\`\\`False\\`\\`</code>\n- line 2711 - some spacing in ProjectiveSpace calls and in lists of defining polynomials\n\n-projective_homset.py\n- line 182 - the sorted() function takes any iterable and returns a list, so it shouldn't be necessary to convert rat_points to a list first\n\n-projective_morphism.py\n- line 3920 spacing around '>'\n- lines 3790 - 3793, formatting issues: <code>\\`\\`k\\`\\`th</code> and <code>\\`k\\`th</code> don't seem to render well, and perhaps\n  <code>\\`P\\`</code> and <code>\\`Q\\`</code> should be replaced with <code>\\`\\`P\\`\\`</code>, <code>\\`\\`Q\\`\\`</code>.\n- some ProjectiveSpace calls in examples of rational_preimages don't have any spacing in the arguments",
    "created_at": "2016-06-08T08:20:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20780#issuecomment-301380",
    "user": "https://github.com/sagetrac-gjorgenson"
}
```

<div id="comment:2" align="right">comment:2</div>

I think this looks good. The code makes sense and appears to work as intended. I just found some really minor things:

-algebraic_scheme.py
- line 2780 - change TypeError message to all lowercase
- Old issues present before this ticket that maybe could be addressed here:
- line 2680 - <code>\`False\`</code> to <code>\`\`False\`\`</code>
- line 2711 - some spacing in ProjectiveSpace calls and in lists of defining polynomials

-projective_homset.py
- line 182 - the sorted() function takes any iterable and returns a list, so it shouldn't be necessary to convert rat_points to a list first

-projective_morphism.py
- line 3920 spacing around '>'
- lines 3790 - 3793, formatting issues: <code>\`\`k\`\`th</code> and <code>\`k\`th</code> don't seem to render well, and perhaps
  <code>\`P\`</code> and <code>\`Q\`</code> should be replaced with <code>\`\`P\`\`</code>, <code>\`\`Q\`\`</code>.
- some ProjectiveSpace calls in examples of rational_preimages don't have any spacing in the arguments



---

archive/issue_comments_301381.json:
```json
{
    "body": "Changed commit from **[`e7db093`](https://github.com/sagemath/sagetrac-mirror/commit/e7db093e5e6d70000c9806e1555cb09ce579e997)** to **[`6377a27`](https://github.com/sagemath/sagetrac-mirror/commit/6377a27d9be3cf3b46657d294da38f88ee73d65e)**",
    "created_at": "2016-06-08T13:12:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20780#issuecomment-301381",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e7db093`](https://github.com/sagemath/sagetrac-mirror/commit/e7db093e5e6d70000c9806e1555cb09ce579e997)** to **[`6377a27`](https://github.com/sagemath/sagetrac-mirror/commit/6377a27d9be3cf3b46657d294da38f88ee73d65e)**



---

archive/issue_comments_301382.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6377a27d9be3cf3b46657d294da38f88ee73d65e\"><code>6377a27</code></a></td><td><code>20780: minor fixes</code></td></tr></table>\n",
    "created_at": "2016-06-08T13:12:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20780#issuecomment-301382",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6377a27d9be3cf3b46657d294da38f88ee73d65e"><code>6377a27</code></a></td><td><code>20780: minor fixes</code></td></tr></table>




---

archive/issue_comments_301383.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOkay, this looks fine to me now.",
    "created_at": "2016-06-08T18:53:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20780#issuecomment-301383",
    "user": "https://github.com/sagetrac-gjorgenson"
}
```

<div id="comment:4" align="right">comment:4</div>

Okay, this looks fine to me now.



---

archive/issue_events_293956.json:
```json
{
    "actor": "https://github.com/sagetrac-rlmiller",
    "created_at": "2016-06-11T17:11:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20780#event-293956"
}
```



---

archive/issue_events_293957.json:
```json
{
    "actor": "https://github.com/sagetrac-rlmiller",
    "created_at": "2016-06-11T17:11:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20780#event-293957"
}
```



---

archive/issue_comments_301384.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nLooks good to me.",
    "created_at": "2016-06-11T17:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20780#issuecomment-301384",
    "user": "https://github.com/sagetrac-rlmiller"
}
```

<div id="comment:5" align="right">comment:5</div>

Looks good to me.



---

archive/issue_comments_301385.json:
```json
{
    "body": "Changed reviewer from **Grayson Jorgenson** to **Grayson Jorgenson, Rebecca Lauren Miller**",
    "created_at": "2016-06-11T17:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20780#issuecomment-301385",
    "user": "https://github.com/sagetrac-rlmiller"
}
```

Changed reviewer from **Grayson Jorgenson** to **Grayson Jorgenson, Rebecca Lauren Miller**



---

archive/issue_comments_301386.json:
```json
{
    "body": "Changed branch from **[u/bhutz/t/20780](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/t/20780)** to **[`6377a27`](https://github.com/sagemath/sagetrac-mirror/commit/6377a27d9be3cf3b46657d294da38f88ee73d65e)**",
    "created_at": "2016-06-12T23:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20780#issuecomment-301386",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/bhutz/t/20780](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/t/20780)** to **[`6377a27`](https://github.com/sagemath/sagetrac-mirror/commit/6377a27d9be3cf3b46657d294da38f88ee73d65e)**



---

archive/issue_events_293958.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-12T23:11:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20780#event-293958"
}
```



---

archive/issue_events_293959.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0898b79222537cf918ceba28394ab649822e3b49",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-06-12T23:11:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20780",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20780#event-293959"
}
```
