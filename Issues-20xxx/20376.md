# Issue 20376: LoggingBackend - delegating MIP backend class that logs input/output to backend methods

archive/issues_020139.json:
```json
{
    "body": "This is a debugging tool. It logs calls to the methods of MIP backends.\n\nThere are three output formats:\n- on-screen comments\n- doctests, suitable for cut and paste\n- `_test_*` methods for the backends (#20323). \n\nI have already used this code to translate the testcase using the `MixedIntegerLinearProgram` reported in #18572 to a testcase in the style of the `_test_*` methods for the backends. The result has been committed on #20424 .\n\n\n\nCC:  @dimpase @videlec @vbraun @nthiery\n\nKeywords: lp\n\nBranch/Commit: f17cd9b799125912f098e541e950f1374674e6ca\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #20406, #20323\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20376\n\n",
    "closed_at": "2016-05-04T17:10:38Z",
    "created_at": "2016-04-06T21:26:41Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "LoggingBackend - delegating MIP backend class that logs input/output to backend methods",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20376",
    "user": "https://github.com/mkoeppe"
}
```
This is a debugging tool. It logs calls to the methods of MIP backends.

There are three output formats:
- on-screen comments
- doctests, suitable for cut and paste
- `_test_*` methods for the backends (#20323). 

I have already used this code to translate the testcase using the `MixedIntegerLinearProgram` reported in #18572 to a testcase in the style of the `_test_*` methods for the backends. The result has been committed on #20424 .



CC:  @dimpase @videlec @vbraun @nthiery

Keywords: lp

Branch/Commit: f17cd9b799125912f098e541e950f1374674e6ca

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #20406, #20323

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20376





---

archive/issue_comments_295270.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-10T07:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295270",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_295271.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,13 @@\n-This is a debugging tool. The delegating class looks much like `HybridBackend` from #18735.\n+This is a debugging tool. It logs calls to the methods of MIP backends.\n \n-The logging should be done (optionally) in a way that testcases using `MixedIntegerLinearProgram` such as the the one reported in #18572 are translated to testcases for backends, suitable for copy-pasting into new `_test` methods (#20323).\n+There are three output formats:\n+- on-screen comments\n+- doctests, suitable for cut and paste\n+- `_test_*` methods for the backends (#20323). \n+\n+I have already used this code to translate the testcase using the `MixedIntegerLinearProgram` reported in #18572 to a testcase in the style of the `_test_*` methods for the backends. The result has been committed on #20323.\n+\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2016-04-10T07:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295271",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,13 @@
-This is a debugging tool. The delegating class looks much like `HybridBackend` from #18735.
+This is a debugging tool. It logs calls to the methods of MIP backends.
 
-The logging should be done (optionally) in a way that testcases using `MixedIntegerLinearProgram` such as the the one reported in #18572 are translated to testcases for backends, suitable for copy-pasting into new `_test` methods (#20323).
+There are three output formats:
+- on-screen comments
+- doctests, suitable for cut and paste
+- `_test_*` methods for the backends (#20323). 
+
+I have already used this code to translate the testcase using the `MixedIntegerLinearProgram` reported in #18572 to a testcase in the style of the `_test_*` methods for the backends. The result has been committed on #20323.
+
+
 
 Comment: 1
 
```




---

archive/issue_comments_295272.json:
```json
{
    "body": "<a id='comment:3'></a>The branch is on top of #20406.\nThe `_test` methods that this class generates mimic the ones written in #20323, which is why I mark it as a dependency.",
    "created_at": "2016-04-10T07:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295272",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>The branch is on top of #20406.
The `_test` methods that this class generates mimic the ones written in #20323, which is why I mark it as a dependency.



---

archive/issue_comments_295273.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2016-04-15T00:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295273",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_295274.json:
```json
{
    "body": "<a id='comment:5'></a>rebased on top of current #20406.",
    "created_at": "2016-04-15T00:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295274",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>rebased on top of current #20406.



---

archive/issue_comments_295275.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,12 @@\n+This is a debugging tool. It logs calls to the methods of MIP backends.\n+\n+There are three output formats:\n+- on-screen comments\n+- doctests, suitable for cut and paste\n+- `_test_*` methods for the backends (#20323). \n+\n+I have already used this code to translate the testcase using the `MixedIntegerLinearProgram` reported in #18572 to a testcase in the style of the `_test_*` methods for the backends. The result has been committed on #20424 .\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2016-04-15T00:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295275",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,12 @@
+This is a debugging tool. It logs calls to the methods of MIP backends.
+
+There are three output formats:
+- on-screen comments
+- doctests, suitable for cut and paste
+- `_test_*` methods for the backends (#20323). 
+
+I have already used this code to translate the testcase using the `MixedIntegerLinearProgram` reported in #18572 to a testcase in the style of the `_test_*` methods for the backends. The result has been committed on #20424 .
+
 
 
 Comment: 1
```




---

archive/issue_comments_295276.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-04-15T00:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295276",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_295277.json:
```json
{
    "body": "<a id='comment:7'></a>it would be great to have a concrete explained example in the docs like \"suppose we want to test that foo does baz. Then we...\"",
    "created_at": "2016-04-18T08:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295277",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>it would be great to have a concrete explained example in the docs like "suppose we want to test that foo does baz. Then we..."



---

archive/issue_comments_295278.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-04-27T08:07:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295278",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_295279.json:
```json
{
    "body": "<a id='comment:9'></a>I've added a better example.",
    "created_at": "2016-04-27T08:07:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295279",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>I've added a better example.



---

archive/issue_comments_295280.json:
```json
{
    "body": "<a id='comment:10'></a>there is no trace of this backend in the docs. You probably want to add it to some index in an rst file...",
    "created_at": "2016-04-27T09:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295280",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>there is no trace of this backend in the docs. You probably want to add it to some index in an rst file...



---

archive/issue_comments_295281.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-27T20:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_295282.json:
```json
{
    "body": "<a id='comment:12'></a>Thanks for the reminder; I've added it to the documentation index.",
    "created_at": "2016-04-27T20:21:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295282",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Thanks for the reminder; I've added it to the documentation index.



---

archive/issue_comments_295283.json:
```json
{
    "body": "<a id='comment:13'></a>in \n\n```\ncall `compute_something` in the doctest\n```\n`compute_something` is being typeset in the doc as a maths expression. I guess it needs `:func:` prefix.\n\nAs well, after EXAMPLES there is a long list\n\n```\nadd_col(*args, **kwdargs)\nadd_linear_constraint(*args, **kwdargs)\n...\nwrite_mps(*args, **kwdargs)\n```\nIs it how it is meant to look?",
    "created_at": "2016-04-28T00:13:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295283",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>in 

```
call `compute_something` in the doctest
```
`compute_something` is being typeset in the doc as a maths expression. I guess it needs `:func:` prefix.

As well, after EXAMPLES there is a long list

```
add_col(*args, **kwdargs)
add_linear_constraint(*args, **kwdargs)
...
write_mps(*args, **kwdargs)
```
Is it how it is meant to look?



---

archive/issue_comments_295284.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-28T00:48:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295284",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_295285.json:
```json
{
    "body": "<a id='comment:15'></a>I've fixed the markup of that function, actually using double-backquotes.\n\nThe long list is a list of all instrumented methods that comes from the backend. I don't know if it should be suppressed, and if yes, how. \nI also don't know how to remove the strange stuff at the very bottom of that page.",
    "created_at": "2016-04-28T00:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295285",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>I've fixed the markup of that function, actually using double-backquotes.

The long list is a list of all instrumented methods that comes from the backend. I don't know if it should be suppressed, and if yes, how. 
I also don't know how to remove the strange stuff at the very bottom of that page.



---

archive/issue_comments_295286.json:
```json
{
    "body": "<a id='comment:16'></a>patchbots complain\n\n```\nMissing doctests in numerical/backends/logging_backend.py: 1 / 5 = 20%\n```",
    "created_at": "2016-04-28T08:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295286",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>patchbots complain

```
Missing doctests in numerical/backends/logging_backend.py: 1 / 5 = 20%
```



---

archive/issue_comments_295287.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:15 mkoeppe]:\n> The long list is a list of all instrumented methods that comes from the backend. I don't know if it should be suppressed, and if yes, how. \n\n\nYou can place `.. auto***` directives in the docstrings of classes; although I don't exactly know how to achieve what we want. See the doc here:\nhttp://www.sphinx-doc.org/en/stable/ext/autodoc.html#confval-autoclass_content\n\nand there are examples in src/sage/ doing something like this: `grep -R \"\\.\\. auto\" *` will show a lot...\n\n\n> I also don't know how to remove the strange stuff at the very bottom of that page. \n\nno idea either...",
    "created_at": "2016-04-28T08:52:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295287",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>Replying to [comment:15 mkoeppe]:
> The long list is a list of all instrumented methods that comes from the backend. I don't know if it should be suppressed, and if yes, how. 


You can place `.. auto***` directives in the docstrings of classes; although I don't exactly know how to achieve what we want. See the doc here:
http://www.sphinx-doc.org/en/stable/ext/autodoc.html#confval-autoclass_content

and there are examples in src/sage/ doing something like this: `grep -R "\.\. auto" *` will show a lot...


> I also don't know how to remove the strange stuff at the very bottom of that page. 

no idea either...



---

archive/issue_comments_295288.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2016-04-29T22:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295288",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_295289.json:
```json
{
    "body": "<a id='comment:19'></a>Found  a solution for the documentation.",
    "created_at": "2016-04-29T22:13:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295289",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>Found  a solution for the documentation.



---

archive/issue_comments_295290.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-29T22:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295290",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_295291.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-29T23:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295291",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_295292.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-30T00:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295292",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_295293.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-05-03T19:41:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295293",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_295294.json:
```json
{
    "body": "<a id='comment:23'></a>looks good to me. By the way, you use deprecated `db()` stuff. Are you going to undo #2536 ?",
    "created_at": "2016-05-03T19:41:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295294",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>looks good to me. By the way, you use deprecated `db()` stuff. Are you going to undo #2536 ?



---

archive/issue_comments_295295.json:
```json
{
    "body": "<a id='comment:24'></a>I'm not using it.\nThe `LoggingBackend` simply instruments every method that the backend has, including stuff that I never heard of or that was deprecated a decade ago.",
    "created_at": "2016-05-03T19:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295295",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>I'm not using it.
The `LoggingBackend` simply instruments every method that the backend has, including stuff that I never heard of or that was deprecated a decade ago.



---

archive/issue_comments_295296.json:
```json
{
    "body": "<a id='comment:25'></a>Ah, OK, never mind then (I had a quick look at generated docs, and saw that `db()` there...)",
    "created_at": "2016-05-03T19:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295296",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>Ah, OK, never mind then (I had a quick look at generated docs, and saw that `db()` there...)



---

archive/issue_events_055203.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-04T17:10:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20376#event-55203"
}
```



---

archive/issue_comments_295297.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-05-04T17:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20376#issuecomment-295297",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
