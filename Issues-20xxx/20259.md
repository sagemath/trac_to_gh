# Issue 20259: Polyhedron.restricted_automorphism_group(): allow returning the affine matrix group

archive/issues_020022.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nCurrently, the method `Polyhedron.restricted_automorphism_group()` returns an abstract permutation on the vertices. In this ticket, we optionally allow returning a concrete matrix group on the ambient space, either as matrix group or list of matrices.\n\nWe also fix this bug:\n\n```\nsage: polytopes.dodecahedron().restricted_automorphism_group()\n---------------------------------------------------------------------------\nUnboundLocalError                         Traceback (most recent call last)\n<ipython-input-6-d332241c23a2> in <module>()\n----> 1 polytopes.dodecahedron().restricted_automorphism_group()\n\n/usr/local/src/sage-config/src/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12404)()\n   2233         if self.cache is None:\n   2234             f = self.f\n-> 2235             self.cache = f(self._instance)\n   2236         return self.cache\n   2237 \n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in restricted_automorphism_group(self)\n   4619                 v_i = v_list[i]\n   4620                 v_j = v_list[j]\n-> 4621                 c_ij = rational_approximation( v_i * Qinv * v_j )\n   4622                 G.add_edge(i+1,j+1, edge_label(i,j,c_ij))\n   4623 \n\nUnboundLocalError: local variable 'rational_approximation' referenced before assignment\n```\n\nComponent: **geometry**\n\nAuthor: **Jeroen Demeyer**\n\nBranch/Commit: **[`fff1186`](https://github.com/sagemath/sagetrac-mirror/commit/fff11866f3eea78b6e27b9d9e1471ceb3517eeb1)**\n\nReviewer: **Volker Braun**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20259_\n\n",
    "closed_at": "2016-05-04T17:10:40Z",
    "created_at": "2016-03-23T13:23:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Polyhedron.restricted_automorphism_group(): allow returning the affine matrix group",
    "type": "issue",
    "updated_at": "2016-05-04T17:10:40Z",
    "url": "https://github.com/sagemath/sage/issues/20259",
    "user": "https://github.com/jdemeyer"
}
```
<div id="comment:0"></div>

Currently, the method `Polyhedron.restricted_automorphism_group()` returns an abstract permutation on the vertices. In this ticket, we optionally allow returning a concrete matrix group on the ambient space, either as matrix group or list of matrices.

We also fix this bug:

```
sage: polytopes.dodecahedron().restricted_automorphism_group()
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)
<ipython-input-6-d332241c23a2> in <module>()
----> 1 polytopes.dodecahedron().restricted_automorphism_group()

/usr/local/src/sage-config/src/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12404)()
   2233         if self.cache is None:
   2234             f = self.f
-> 2235             self.cache = f(self._instance)
   2236         return self.cache
   2237 

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in restricted_automorphism_group(self)
   4619                 v_i = v_list[i]
   4620                 v_j = v_list[j]
-> 4621                 c_ij = rational_approximation( v_i * Qinv * v_j )
   4622                 G.add_edge(i+1,j+1, edge_label(i,j,c_ij))
   4623 

UnboundLocalError: local variable 'rational_approximation' referenced before assignment
```

Component: **geometry**

Author: **Jeroen Demeyer**

Branch/Commit: **[`fff1186`](https://github.com/sagemath/sagetrac-mirror/commit/fff11866f3eea78b6e27b9d9e1471ceb3517eeb1)**

Reviewer: **Volker Braun**

_Issue created by migration from https://trac.sagemath.org/ticket/20259_





---

archive/issue_events_283463.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-23T13:23:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283463"
}
```



---

archive/issue_events_283464.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-23T13:23:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283464"
}
```



---

archive/issue_events_283465.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-23T13:23:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283465"
}
```



---

archive/issue_events_283466.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-23T13:23:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283466"
}
```



---

archive/issue_comments_291686.json:
```json
{
    "body": "Branch: **[u/jdemeyer/polyhedron_restricted_automorphism_group____allow_returning_the_affine_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/polyhedron_restricted_automorphism_group____allow_returning_the_affine_matrix_group)**",
    "created_at": "2016-03-23T20:06:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291686",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/polyhedron_restricted_automorphism_group____allow_returning_the_affine_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/polyhedron_restricted_automorphism_group____allow_returning_the_affine_matrix_group)**



---

archive/issue_events_283467.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-23T21:43:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283467"
}
```



---

archive/issue_comments_291687.json:
```json
{
    "body": "Commit: **[`9eda100`](https://github.com/sagemath/sagetrac-mirror/commit/9eda100828aaf7d4a3d191124b3f99528a3f4e17)**",
    "created_at": "2016-03-23T21:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291687",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`9eda100`](https://github.com/sagemath/sagetrac-mirror/commit/9eda100828aaf7d4a3d191124b3f99528a3f4e17)**



---

archive/issue_comments_291688.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9eda100828aaf7d4a3d191124b3f99528a3f4e17\"><code>9eda100</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>\n",
    "created_at": "2016-03-23T21:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291688",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9eda100828aaf7d4a3d191124b3f99528a3f4e17"><code>9eda100</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>




---

archive/issue_events_283468.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-24T13:21:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283468"
}
```



---

archive/issue_events_283469.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-24T13:21:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283469"
}
```



---

archive/issue_comments_291689.json:
```json
{
    "body": "Dependencies: **#20279**",
    "created_at": "2016-03-24T13:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291689",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#20279**



---

archive/issue_comments_291690.json:
```json
{
    "body": "Changed dependencies from **#20279** to **#20279, #20287**",
    "created_at": "2016-03-25T15:42:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291690",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#20279** to **#20279, #20287**



---

archive/issue_comments_291691.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80ed2fbaa4099cc1fa0507df86bbeae195b13eb1\"><code>80ed2fb</code></a></td><td><code>Use ring when constructing a matrix from numpy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9663a7b2638e0f705bfe510b0ccf14b223542fb\"><code>f9663a7</code></a></td><td><code>Implement the Moore-Penrose pseudoinverse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba8723abd6e77d9e9b0cacbcf9f124cd974968bb\"><code>ba8723a</code></a></td><td><code>Homogeneous coordinates of polyhedron V-representation objects</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd495ec341336ed6460c5db480263795ed52ab8e\"><code>fd495ec</code></a></td><td><code>Improve documentation of homogeneous_vector()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc2eb79310625ef5d18a14b8b75b7522a0d8ebec\"><code>dc2eb79</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/homogeneous_coordinates_of_polyhedron_v_representation_objects' into t/20259/polyhedron_restricted_automorphism_group____allow_returning_the_affine_matrix_group</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/496646879d95208d240ea521340f41029cf9bdfc\"><code>4966468</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>\n",
    "created_at": "2016-03-25T16:23:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291691",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80ed2fbaa4099cc1fa0507df86bbeae195b13eb1"><code>80ed2fb</code></a></td><td><code>Use ring when constructing a matrix from numpy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9663a7b2638e0f705bfe510b0ccf14b223542fb"><code>f9663a7</code></a></td><td><code>Implement the Moore-Penrose pseudoinverse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba8723abd6e77d9e9b0cacbcf9f124cd974968bb"><code>ba8723a</code></a></td><td><code>Homogeneous coordinates of polyhedron V-representation objects</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd495ec341336ed6460c5db480263795ed52ab8e"><code>fd495ec</code></a></td><td><code>Improve documentation of homogeneous_vector()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc2eb79310625ef5d18a14b8b75b7522a0d8ebec"><code>dc2eb79</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/homogeneous_coordinates_of_polyhedron_v_representation_objects' into t/20259/polyhedron_restricted_automorphism_group____allow_returning_the_affine_matrix_group</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/496646879d95208d240ea521340f41029cf9bdfc"><code>4966468</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>




---

archive/issue_comments_291692.json:
```json
{
    "body": "Changed commit from **[`9eda100`](https://github.com/sagemath/sagetrac-mirror/commit/9eda100828aaf7d4a3d191124b3f99528a3f4e17)** to **[`4966468`](https://github.com/sagemath/sagetrac-mirror/commit/496646879d95208d240ea521340f41029cf9bdfc)**",
    "created_at": "2016-03-25T16:23:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291692",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9eda100`](https://github.com/sagemath/sagetrac-mirror/commit/9eda100828aaf7d4a3d191124b3f99528a3f4e17)** to **[`4966468`](https://github.com/sagemath/sagetrac-mirror/commit/496646879d95208d240ea521340f41029cf9bdfc)**



---

archive/issue_events_283470.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-25T16:24:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283470"
}
```



---

archive/issue_events_283471.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-25T16:24:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283471"
}
```



---

archive/issue_comments_291693.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,27 @@\n Currently, the method `Polyhedron.restricted_automorphism_group()` returns an abstract permutation on the vertices. In this ticket, we optionally allow returning a concrete affine matrix group on the ambient space.\n+\n+We also fix this bug:\n+\n+```\n+sage: len(polytopes.dodecahedron().restricted_automorphism_group())\n+---------------------------------------------------------------------------\n+UnboundLocalError                         Traceback (most recent call last)\n+<ipython-input-6-d332241c23a2> in <module>()\n+----> 1 len(polytopes.dodecahedron().restricted_automorphism_group())\n+\n+/usr/local/src/sage-config/src/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12404)()\n+   2233         if self.cache is None:\n+   2234             f = self.f\n+-> 2235             self.cache = f(self._instance)\n+   2236         return self.cache\n+   2237 \n+\n+/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in restricted_automorphism_group(self)\n+   4619                 v_i = v_list[i]\n+   4620                 v_j = v_list[j]\n+-> 4621                 c_ij = rational_approximation( v_i * Qinv * v_j )\n+   4622                 G.add_edge(i+1,j+1, edge_label(i,j,c_ij))\n+   4623 \n+\n+UnboundLocalError: local variable 'rational_approximation' referenced before assignment\n+```\n``````\n",
    "created_at": "2016-03-31T12:44:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291693",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,27 @@
 Currently, the method `Polyhedron.restricted_automorphism_group()` returns an abstract permutation on the vertices. In this ticket, we optionally allow returning a concrete affine matrix group on the ambient space.
+
+We also fix this bug:
+
+```
+sage: len(polytopes.dodecahedron().restricted_automorphism_group())
+---------------------------------------------------------------------------
+UnboundLocalError                         Traceback (most recent call last)
+<ipython-input-6-d332241c23a2> in <module>()
+----> 1 len(polytopes.dodecahedron().restricted_automorphism_group())
+
+/usr/local/src/sage-config/src/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12404)()
+   2233         if self.cache is None:
+   2234             f = self.f
+-> 2235             self.cache = f(self._instance)
+   2236         return self.cache
+   2237 
+
+/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in restricted_automorphism_group(self)
+   4619                 v_i = v_list[i]
+   4620                 v_j = v_list[j]
+-> 4621                 c_ij = rational_approximation( v_i * Qinv * v_j )
+   4622                 G.add_edge(i+1,j+1, edge_label(i,j,c_ij))
+   4623 
+
+UnboundLocalError: local variable 'rational_approximation' referenced before assignment
+```
``````




---

archive/issue_events_283472.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-31T12:44:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283472"
}
```



---

archive/issue_events_283473.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-31T12:44:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283473"
}
```



---

archive/issue_comments_291694.json:
```json
{
    "body": "Changed commit from **[`4966468`](https://github.com/sagemath/sagetrac-mirror/commit/496646879d95208d240ea521340f41029cf9bdfc)** to **[`e70a1ea`](https://github.com/sagemath/sagetrac-mirror/commit/e70a1eae87ee937b21bd8f2767ffcb8353c914ea)**",
    "created_at": "2016-03-31T12:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291694",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4966468`](https://github.com/sagemath/sagetrac-mirror/commit/496646879d95208d240ea521340f41029cf9bdfc)** to **[`e70a1ea`](https://github.com/sagemath/sagetrac-mirror/commit/e70a1eae87ee937b21bd8f2767ffcb8353c914ea)**



---

archive/issue_comments_291695.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e70a1eae87ee937b21bd8f2767ffcb8353c914ea\"><code>e70a1ea</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>\n",
    "created_at": "2016-03-31T12:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291695",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e70a1eae87ee937b21bd8f2767ffcb8353c914ea"><code>e70a1ea</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>




---

archive/issue_comments_291696.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Currently, the method `Polyhedron.restricted_automorphism_group()` returns an abstract permutation on the vertices. In this ticket, we optionally allow returning a concrete affine matrix group on the ambient space.\n+Currently, the method `Polyhedron.restricted_automorphism_group()` returns an abstract permutation on the vertices. In this ticket, we optionally allow returning a concrete matrix group on the ambient space, either as matrix group or list of matrices.\n \n We also fix this bug:\n \n``````\n",
    "created_at": "2016-03-31T12:54:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291696",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Currently, the method `Polyhedron.restricted_automorphism_group()` returns an abstract permutation on the vertices. In this ticket, we optionally allow returning a concrete affine matrix group on the ambient space.
+Currently, the method `Polyhedron.restricted_automorphism_group()` returns an abstract permutation on the vertices. In this ticket, we optionally allow returning a concrete matrix group on the ambient space, either as matrix group or list of matrices.
 
 We also fix this bug:
 
``````




---

archive/issue_events_283474.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-31T12:54:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283474"
}
```



---

archive/issue_events_283475.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-31T12:54:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283475"
}
```



---

archive/issue_comments_291697.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,11 +3,11 @@\n We also fix this bug:\n \n ```\n-sage: len(polytopes.dodecahedron().restricted_automorphism_group())\n+sage: polytopes.dodecahedron().restricted_automorphism_group()\n ---------------------------------------------------------------------------\n UnboundLocalError                         Traceback (most recent call last)\n <ipython-input-6-d332241c23a2> in <module>()\n-----> 1 len(polytopes.dodecahedron().restricted_automorphism_group())\n+----> 1 polytopes.dodecahedron().restricted_automorphism_group()\n \n /usr/local/src/sage-config/src/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12404)()\n    2233         if self.cache is None:\n``````\n",
    "created_at": "2016-03-31T13:01:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291697",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,11 +3,11 @@
 We also fix this bug:
 
 ```
-sage: len(polytopes.dodecahedron().restricted_automorphism_group())
+sage: polytopes.dodecahedron().restricted_automorphism_group()
 ---------------------------------------------------------------------------
 UnboundLocalError                         Traceback (most recent call last)
 <ipython-input-6-d332241c23a2> in <module>()
-----> 1 len(polytopes.dodecahedron().restricted_automorphism_group())
+----> 1 polytopes.dodecahedron().restricted_automorphism_group()
 
 /usr/local/src/sage-config/src/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12404)()
    2233         if self.cache is None:
``````




---

archive/issue_comments_291698.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40da88af0fd8c3bc9fed59a93610a41fda2ca95f\"><code>40da88a</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>\n",
    "created_at": "2016-04-01T15:19:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291698",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40da88af0fd8c3bc9fed59a93610a41fda2ca95f"><code>40da88a</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>




---

archive/issue_comments_291699.json:
```json
{
    "body": "Changed commit from **[`e70a1ea`](https://github.com/sagemath/sagetrac-mirror/commit/e70a1eae87ee937b21bd8f2767ffcb8353c914ea)** to **[`40da88a`](https://github.com/sagemath/sagetrac-mirror/commit/40da88af0fd8c3bc9fed59a93610a41fda2ca95f)**",
    "created_at": "2016-04-01T15:19:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291699",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e70a1ea`](https://github.com/sagemath/sagetrac-mirror/commit/e70a1eae87ee937b21bd8f2767ffcb8353c914ea)** to **[`40da88a`](https://github.com/sagemath/sagetrac-mirror/commit/40da88af0fd8c3bc9fed59a93610a41fda2ca95f)**



---

archive/issue_comments_291700.json:
```json
{
    "body": "Changed commit from **[`40da88a`](https://github.com/sagemath/sagetrac-mirror/commit/40da88af0fd8c3bc9fed59a93610a41fda2ca95f)** to **[`293286c`](https://github.com/sagemath/sagetrac-mirror/commit/293286ca098582fe7637c817b53c4badad86f5c8)**",
    "created_at": "2016-04-01T19:48:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291700",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`40da88a`](https://github.com/sagemath/sagetrac-mirror/commit/40da88af0fd8c3bc9fed59a93610a41fda2ca95f)** to **[`293286c`](https://github.com/sagemath/sagetrac-mirror/commit/293286ca098582fe7637c817b53c4badad86f5c8)**



---

archive/issue_comments_291701.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/293286ca098582fe7637c817b53c4badad86f5c8\"><code>293286c</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>\n",
    "created_at": "2016-04-01T19:48:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291701",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/293286ca098582fe7637c817b53c4badad86f5c8"><code>293286c</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>




---

archive/issue_comments_291702.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d82fa6e7fd1d5cd458fd782f4bb25574fe67162d\"><code>d82fa6e</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>\n",
    "created_at": "2016-04-01T20:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291702",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d82fa6e7fd1d5cd458fd782f4bb25574fe67162d"><code>d82fa6e</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>




---

archive/issue_comments_291703.json:
```json
{
    "body": "Changed commit from **[`293286c`](https://github.com/sagemath/sagetrac-mirror/commit/293286ca098582fe7637c817b53c4badad86f5c8)** to **[`d82fa6e`](https://github.com/sagemath/sagetrac-mirror/commit/d82fa6e7fd1d5cd458fd782f4bb25574fe67162d)**",
    "created_at": "2016-04-01T20:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291703",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`293286c`](https://github.com/sagemath/sagetrac-mirror/commit/293286ca098582fe7637c817b53c4badad86f5c8)** to **[`d82fa6e`](https://github.com/sagemath/sagetrac-mirror/commit/d82fa6e7fd1d5cd458fd782f4bb25574fe67162d)**



---

archive/issue_comments_291704.json:
```json
{
    "body": "Changed dependencies from **#20279, #20287** to none",
    "created_at": "2016-04-01T20:29:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291704",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#20279, #20287** to none



---

archive/issue_comments_291705.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9f8bdee1447c80a0ecda4e31ee7675d3832775e\"><code>d9f8bde</code></a></td><td><code>Fix conversions matrix -> AffineGroup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4163d004cbe53b6bc73d3a81d8b9cf9d8d3acd88\"><code>4163d00</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>\n",
    "created_at": "2016-04-13T09:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291705",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9f8bdee1447c80a0ecda4e31ee7675d3832775e"><code>d9f8bde</code></a></td><td><code>Fix conversions matrix -> AffineGroup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4163d004cbe53b6bc73d3a81d8b9cf9d8d3acd88"><code>4163d00</code></a></td><td><code>Allow returning the matrix group in restricted_automorphism_group()</code></td></tr></table>




---

archive/issue_comments_291706.json:
```json
{
    "body": "Changed commit from **[`d82fa6e`](https://github.com/sagemath/sagetrac-mirror/commit/d82fa6e7fd1d5cd458fd782f4bb25574fe67162d)** to **[`4163d00`](https://github.com/sagemath/sagetrac-mirror/commit/4163d004cbe53b6bc73d3a81d8b9cf9d8d3acd88)**",
    "created_at": "2016-04-13T09:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291706",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d82fa6e`](https://github.com/sagemath/sagetrac-mirror/commit/d82fa6e7fd1d5cd458fd782f4bb25574fe67162d)** to **[`4163d00`](https://github.com/sagemath/sagetrac-mirror/commit/4163d004cbe53b6bc73d3a81d8b9cf9d8d3acd88)**



---

archive/issue_comments_291707.json:
```json
{
    "body": "Dependencies: **#20422**",
    "created_at": "2016-04-13T10:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291707",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#20422**



---

archive/issue_comments_291708.json:
```json
{
    "body": "Changed dependencies from **#20422** to none",
    "created_at": "2016-04-25T08:50:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291708",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#20422** to none



---

archive/issue_comments_291709.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nNice!\n\nCan we rename `kind` to `output`, `representation`, or something like that? It always returns the same abstract group, not different kinds of automorphism groups.\n\nThere should be some discussion about what the returned matrix groups are. Something like:\n\nIf the polyhedron is not full dimensional, the linear automorphism group is infinite as it can act arbitrarily in the orthogonal directions. Nevertheless, as a permutation group, the restricted automorphism group is finite. It has a natural representation as the subset of linear automorphisms that act trivially in the orthogonal directions. Use the `output='matrix'` option to return it.",
    "created_at": "2016-04-30T10:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291709",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">comment:18</div>

Nice!

Can we rename `kind` to `output`, `representation`, or something like that? It always returns the same abstract group, not different kinds of automorphism groups.

There should be some discussion about what the returned matrix groups are. Something like:

If the polyhedron is not full dimensional, the linear automorphism group is infinite as it can act arbitrarily in the orthogonal directions. Nevertheless, as a permutation group, the restricted automorphism group is finite. It has a natural representation as the subset of linear automorphisms that act trivially in the orthogonal directions. Use the `output='matrix'` option to return it.



---

archive/issue_comments_291710.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fff11866f3eea78b6e27b9d9e1471ceb3517eeb1\"><code>fff1186</code></a></td><td><code>Rename \"kind\" to \"output\" and clarify documentation</code></td></tr></table>\n",
    "created_at": "2016-05-03T10:32:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291710",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fff11866f3eea78b6e27b9d9e1471ceb3517eeb1"><code>fff1186</code></a></td><td><code>Rename "kind" to "output" and clarify documentation</code></td></tr></table>




---

archive/issue_comments_291711.json:
```json
{
    "body": "Changed commit from **[`4163d00`](https://github.com/sagemath/sagetrac-mirror/commit/4163d004cbe53b6bc73d3a81d8b9cf9d8d3acd88)** to **[`fff1186`](https://github.com/sagemath/sagetrac-mirror/commit/fff11866f3eea78b6e27b9d9e1471ceb3517eeb1)**",
    "created_at": "2016-05-03T10:32:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291711",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4163d00`](https://github.com/sagemath/sagetrac-mirror/commit/4163d004cbe53b6bc73d3a81d8b9cf9d8d3acd88)** to **[`fff1186`](https://github.com/sagemath/sagetrac-mirror/commit/fff11866f3eea78b6e27b9d9e1471ceb3517eeb1)**



---

archive/issue_comments_291712.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2016-05-03T12:03:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291712",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_283476.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-03T12:03:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283476"
}
```



---

archive/issue_events_283477.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-03T12:03:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283477"
}
```



---

archive/issue_events_283478.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-04T17:10:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283478"
}
```



---

archive/issue_events_283479.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "34ef33226531e66d617b658dd48a0d19ba753d51",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-05-04T17:10:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20259#event-283479"
}
```



---

archive/issue_comments_291713.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/polyhedron_restricted_automorphism_group____allow_returning_the_affine_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/polyhedron_restricted_automorphism_group____allow_returning_the_affine_matrix_group)** to **[`fff1186`](https://github.com/sagemath/sagetrac-mirror/commit/fff11866f3eea78b6e27b9d9e1471ceb3517eeb1)**",
    "created_at": "2016-05-04T17:10:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20259#issuecomment-291713",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/polyhedron_restricted_automorphism_group____allow_returning_the_affine_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/polyhedron_restricted_automorphism_group____allow_returning_the_affine_matrix_group)** to **[`fff1186`](https://github.com/sagemath/sagetrac-mirror/commit/fff11866f3eea78b6e27b9d9e1471ceb3517eeb1)**
