# Issue 20839: Basic intersection analysis for algebraic curves

archive/issues_020602.json:
```json
{
    "body": "Implement basic intersection analysis, such as when given two curves and a point, determine if the point is in the intersection of the two curves, and if so, compute the intersection multiplicity of the curves at that point if defined. Also, given a projective curve, determine if it is a complete intersection.\n\nCC:  @bhutz @miguelmarco\n\nKeywords: gsoc2016\n\nBranch/Commit: cae16fe73a6db14d63156e509c48b160ae17094e\n\nReviewer: Ben Hutz\n\nAuthor: Grayson Jorgenson\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20839\n\n",
    "closed_at": "2016-06-26T07:30:25Z",
    "created_at": "2016-06-17T05:55:10Z",
    "labels": [
        "component: algebraic geometry",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Basic intersection analysis for algebraic curves",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20839",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```
Implement basic intersection analysis, such as when given two curves and a point, determine if the point is in the intersection of the two curves, and if so, compute the intersection multiplicity of the curves at that point if defined. Also, given a projective curve, determine if it is a complete intersection.

CC:  @bhutz @miguelmarco

Keywords: gsoc2016

Branch/Commit: cae16fe73a6db14d63156e509c48b160ae17094e

Reviewer: Ben Hutz

Author: Grayson Jorgenson

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20839





---

archive/issue_comments_302633.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-20T02:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20839#issuecomment-302633",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302634.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-06-20T05:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20839#issuecomment-302634",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_302635.json:
```json
{
    "body": "<a id='comment:4'></a>- intersects_at(): why not but both attempts in the same try block?\n\n\n- is_complete_intersection: Boolean can go on the same line at OUTPUT\nnot the radical ideal per our discussion today\n\nhere is another noncomplete intersection example\n\n```\nP.<x,y,z,w>=ProjectiveSpace(QQ,3)\nX= Curve([x*z-y^2,z*(y*w-z^2) - w*(x*w-y*z)])\nX.is_complete_intersection()\n```\n\n- intersection_multiplicity: an integer can go on the same line as OUTPUT\n\ngood these add up to 4 as bezout's theorem implies\n\n```\nK.<i>=QuadraticField(-1)\nA.<x,y>=AffineSpace(K,2)\nC = Curve([x^2-y])\nD = Curve([x^2+y^2])\nfor t in C.intersection(D).rational_points():\n    C.intersection_multiplicity(D,t)\n```\n\nalso good\n\n```\nK.<i>=QuadraticField(-1)\nA.<x,y>=AffineSpace(K,2)\nC = Curve([y^2-x^3])\nD = Curve([(x^2+y^2)^2 - 4*x^2*y^2])\nfor t in C.intersection(D).rational_points():\n    C.intersection_multiplicity(D,t)\n```\n\nso for plane curves this looks ok. Does this really work in dimension greater than 2? I don't think it does, I think the intersection number possibly has lower order terms.  Regardless, in looking at this, the following  example died\n\n```\nK.<i>=QuadraticField(-1)\nA.<x,y,z>=AffineSpace(K,3)\nC = Curve([x^2-y,z^2+x^2])\nD = Curve([x^2+y^2,x^2+z])\nfor t in C.intersection(D).rational_points():\n    C.intersection_multiplicity(D,p)\n```\n\n\n\n- I think an transverse check would be nice too:\n\nis_transverse() - Returns true if and only if the point p is a nonsingular point of both plane curves C and D and the curves have distinct tangents there.",
    "created_at": "2016-06-20T20:27:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20839#issuecomment-302635",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:4'></a>- intersects_at(): why not but both attempts in the same try block?


- is_complete_intersection: Boolean can go on the same line at OUTPUT
not the radical ideal per our discussion today

here is another noncomplete intersection example

```
P.<x,y,z,w>=ProjectiveSpace(QQ,3)
X= Curve([x*z-y^2,z*(y*w-z^2) - w*(x*w-y*z)])
X.is_complete_intersection()
```

- intersection_multiplicity: an integer can go on the same line as OUTPUT

good these add up to 4 as bezout's theorem implies

```
K.<i>=QuadraticField(-1)
A.<x,y>=AffineSpace(K,2)
C = Curve([x^2-y])
D = Curve([x^2+y^2])
for t in C.intersection(D).rational_points():
    C.intersection_multiplicity(D,t)
```

also good

```
K.<i>=QuadraticField(-1)
A.<x,y>=AffineSpace(K,2)
C = Curve([y^2-x^3])
D = Curve([(x^2+y^2)^2 - 4*x^2*y^2])
for t in C.intersection(D).rational_points():
    C.intersection_multiplicity(D,t)
```

so for plane curves this looks ok. Does this really work in dimension greater than 2? I don't think it does, I think the intersection number possibly has lower order terms.  Regardless, in looking at this, the following  example died

```
K.<i>=QuadraticField(-1)
A.<x,y,z>=AffineSpace(K,3)
C = Curve([x^2-y,z^2+x^2])
D = Curve([x^2+y^2,x^2+z])
for t in C.intersection(D).rational_points():
    C.intersection_multiplicity(D,p)
```



- I think an transverse check would be nice too:

is_transverse() - Returns true if and only if the point p is a nonsingular point of both plane curves C and D and the curves have distinct tangents there.



---

archive/issue_comments_302636.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-06-21T07:59:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20839#issuecomment-302636",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_302637.json:
```json
{
    "body": "<a id='comment:6'></a>Thanks, I made most of the changes, but haven't yet addressed the intersection_multiplicity issue. Is there a good way to generalize the intersection multiplicity computations to work for space curves, or would it be best to make them specific to plane curves?\n\nI really don't have much homological algebra background, but if I understand correctly, I think a general definition of intersection multiplicity is given by Serre's Tor formula. I think Singular has some functionality for working with the needed constructions, but I'm not sure whether it's enough to be able to do multiplicity computations.",
    "created_at": "2016-06-21T08:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20839#issuecomment-302637",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

<a id='comment:6'></a>Thanks, I made most of the changes, but haven't yet addressed the intersection_multiplicity issue. Is there a good way to generalize the intersection multiplicity computations to work for space curves, or would it be best to make them specific to plane curves?

I really don't have much homological algebra background, but if I understand correctly, I think a general definition of intersection multiplicity is given by Serre's Tor formula. I think Singular has some functionality for working with the needed constructions, but I'm not sure whether it's enough to be able to do multiplicity computations.



---

archive/issue_comments_302638.json:
```json
{
    "body": "<a id='comment:7'></a>New commit didn't automatically appear.\n\n---\nNew commits:",
    "created_at": "2016-06-23T20:07:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20839#issuecomment-302638",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

<a id='comment:7'></a>New commit didn't automatically appear.

---
New commits:



---

archive/issue_comments_302639.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-06-23T20:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20839#issuecomment-302639",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_302640.json:
```json
{
    "body": "<a id='comment:8'></a>This looks fine except that is_transverse should return False when one of the points is singular.",
    "created_at": "2016-06-23T20:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20839#issuecomment-302640",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:8'></a>This looks fine except that is_transverse should return False when one of the points is singular.



---

archive/issue_comments_302641.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-06-24T02:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20839#issuecomment-302641",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302642.json:
```json
{
    "body": "<a id='comment:9'></a>New commits:",
    "created_at": "2016-06-24T02:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20839#issuecomment-302642",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

<a id='comment:9'></a>New commits:



---

archive/issue_comments_302643.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-06-24T13:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20839#issuecomment-302643",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_055875.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-26T07:30:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20839#event-55875"
}
```



---

archive/issue_comments_302644.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-06-26T07:30:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20839#issuecomment-302644",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
