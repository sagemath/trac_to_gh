# Issue 20887: Integration of polynomials over polytopes with LattE

archive/issues_020650.json:
```json
{
    "assignees": [],
    "body": "The ticket #22522 makes available a function `sage.interfaces.latte.integrate` that calls the corresponding LattE function. We make this low level function available as a method of polyhedra.\n\nMoreover, we add a new \"engine\" to the existent `volume` method of Polyhedron, interfacing with `sage.interfaces.latte.integrate`. \n\nDepends on #22522\n\nCC:  @jplab @mo271\n\nKeywords: **days84, polytope**\n\nBranch/Commit: **[`dc544fa`](https://github.com/sagemath/sagetrac-mirror/commit/dc544fac24882973b51a5e6c8c645ace92da1dd0)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Marcelo Forets**\n\nComponent: **geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20887_\n\n",
    "closed_at": "2017-04-03T21:00:17Z",
    "created_at": "2016-06-27T06:05:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Integration of polynomials over polytopes with LattE",
    "type": "issue",
    "updated_at": "2017-04-03T21:00:17Z",
    "url": "https://github.com/sagemath/sage/issues/20887",
    "user": "https://github.com/mkoeppe"
}
```
The ticket #22522 makes available a function `sage.interfaces.latte.integrate` that calls the corresponding LattE function. We make this low level function available as a method of polyhedra.

Moreover, we add a new "engine" to the existent `volume` method of Polyhedron, interfacing with `sage.interfaces.latte.integrate`. 

Depends on #22522

CC:  @jplab @mo271

Keywords: **days84, polytope**

Branch/Commit: **[`dc544fa`](https://github.com/sagemath/sagetrac-mirror/commit/dc544fac24882973b51a5e6c8c645ace92da1dd0)**

Reviewer: **Matthias Koeppe**

Author: **Marcelo Forets**

Component: **geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/20887_





---

archive/issue_events_293916.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T06:05:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293916"
}
```



---

archive/issue_events_293917.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T06:05:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293917"
}
```



---

archive/issue_events_293918.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T06:05:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293918"
}
```



---

archive/issue_events_293919.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T06:05:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293919"
}
```



---

archive/issue_comments_303066.json:
```json
{
    "body": "Dependencies: **#22522**",
    "created_at": "2017-03-06T00:41:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303066",
    "user": "https://github.com/videlec"
}
```

Dependencies: **#22522**



---

archive/issue_comments_303067.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+The ticket #22522 makes available a function `sage.interfaces.latte.integrate` that calls the corresponding LattE function. We make this low level function available as a method of polyhedra.\n``````\n",
    "created_at": "2017-03-06T00:41:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303067",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+The ticket #22522 makes available a function `sage.interfaces.latte.integrate` that calls the corresponding LattE function. We make this low level function available as a method of polyhedra.
``````




---

archive/issue_comments_303068.json:
```json
{
    "body": "Branch: **[u/mforets/22497](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/22497)**",
    "created_at": "2017-03-07T19:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303068",
    "user": "https://github.com/mforets"
}
```

Branch: **[u/mforets/22497](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/22497)**



---

archive/issue_comments_303069.json:
```json
{
    "body": "Commit: **[`6a474f9`](https://github.com/sagemath/sagetrac-mirror/commit/6a474f92580914f1cf42595fd8ee7b882b244b5d)**",
    "created_at": "2017-03-07T23:42:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303069",
    "user": "https://github.com/mforets"
}
```

Commit: **[`6a474f9`](https://github.com/sagemath/sagetrac-mirror/commit/6a474f92580914f1cf42595fd8ee7b882b244b5d)**



---

archive/issue_comments_303070.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5ff154e0bb10e333a3a9c39d3cd20ed9b7b69c2\">d5ff154</a></td><td><code>22497: generic interface to LattE integrale count</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96e40991054c847b0d1fb97623aa36a61854411a\">96e4099</a></td><td><code>Integral of a polynomial over a polytope.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3c95899bcff12e6a17dccd849a35d9274bb7bbd\">d3c9589</a></td><td><code>Add volume function to generic latte_int interface.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/000bf8b56094cb83b11894e2c8195747e06c803f\">000bf8b</a></td><td><code>Restructured the script, with an integrate function accepting different valuations.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5aa669584a92f474fc1a797a3caad9c03c92d6cc\">5aa6695</a></td><td><code>Added test for helper function _to_latte_polynomial.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72d03a12c6fc8b02e67a97d61538ca47c3996c3e\">72d03a1</a></td><td><code>Minor changes to helper function and integrate.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a474f92580914f1cf42595fd8ee7b882b244b5d\">6a474f9</a></td><td><code>fixed a typo in the docstring</code></td></tr></table>\n",
    "created_at": "2017-03-07T23:42:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303070",
    "user": "https://github.com/mforets"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5ff154e0bb10e333a3a9c39d3cd20ed9b7b69c2">d5ff154</a></td><td><code>22497: generic interface to LattE integrale count</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96e40991054c847b0d1fb97623aa36a61854411a">96e4099</a></td><td><code>Integral of a polynomial over a polytope.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3c95899bcff12e6a17dccd849a35d9274bb7bbd">d3c9589</a></td><td><code>Add volume function to generic latte_int interface.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/000bf8b56094cb83b11894e2c8195747e06c803f">000bf8b</a></td><td><code>Restructured the script, with an integrate function accepting different valuations.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5aa669584a92f474fc1a797a3caad9c03c92d6cc">5aa6695</a></td><td><code>Added test for helper function _to_latte_polynomial.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72d03a12c6fc8b02e67a97d61538ca47c3996c3e">72d03a1</a></td><td><code>Minor changes to helper function and integrate.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a474f92580914f1cf42595fd8ee7b882b244b5d">6a474f9</a></td><td><code>fixed a typo in the docstring</code></td></tr></table>




---

archive/issue_comments_303071.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17911f7051d618046f8ed37681b6f4516ec751b3\">17911f7</a></td><td><code>Added integrate method to Polyhedron base.py</code></td></tr></table>\n",
    "created_at": "2017-03-08T06:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303071",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17911f7051d618046f8ed37681b6f4516ec751b3">17911f7</a></td><td><code>Added integrate method to Polyhedron base.py</code></td></tr></table>




---

archive/issue_comments_303072.json:
```json
{
    "body": "Changed commit from **[`6a474f9`](https://github.com/sagemath/sagetrac-mirror/commit/6a474f92580914f1cf42595fd8ee7b882b244b5d)** to **[`17911f7`](https://github.com/sagemath/sagetrac-mirror/commit/17911f7051d618046f8ed37681b6f4516ec751b3)**",
    "created_at": "2017-03-08T06:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303072",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6a474f9`](https://github.com/sagemath/sagetrac-mirror/commit/6a474f92580914f1cf42595fd8ee7b882b244b5d)** to **[`17911f7`](https://github.com/sagemath/sagetrac-mirror/commit/17911f7051d618046f8ed37681b6f4516ec751b3)**



---

archive/issue_comments_303073.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n The ticket #22522 makes available a function `sage.interfaces.latte.integrate` that calls the corresponding LattE function. We make this low level function available as a method of polyhedra.\n+\n+Moreover, we add a new \"engine\" to the existent `volume` method of Polyhedron, interfacing with `sage.interfaces.latte.integrate`. \n``````\n",
    "created_at": "2017-03-08T06:51:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303073",
    "user": "https://github.com/mforets"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 The ticket #22522 makes available a function `sage.interfaces.latte.integrate` that calls the corresponding LattE function. We make this low level function available as a method of polyhedra.
+
+Moreover, we add a new "engine" to the existent `volume` method of Polyhedron, interfacing with `sage.interfaces.latte.integrate`. 
``````




---

archive/issue_comments_303074.json:
```json
{
    "body": "Changed commit from **[`17911f7`](https://github.com/sagemath/sagetrac-mirror/commit/17911f7051d618046f8ed37681b6f4516ec751b3)** to **[`507aea5`](https://github.com/sagemath/sagetrac-mirror/commit/507aea5adb6f05ddc95cfef7cd79d24d3041de10)**",
    "created_at": "2017-03-09T17:30:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303074",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`17911f7`](https://github.com/sagemath/sagetrac-mirror/commit/17911f7051d618046f8ed37681b6f4516ec751b3)** to **[`507aea5`](https://github.com/sagemath/sagetrac-mirror/commit/507aea5adb6f05ddc95cfef7cd79d24d3041de10)**



---

archive/issue_comments_303075.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91d885edbccb92d581781c72f3c5eeb94417d0b8\">91d885e</a></td><td><code>Fix the docstrings, and enhance integrate method.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/507aea5adb6f05ddc95cfef7cd79d24d3041de10\">507aea5</a></td><td><code>Add the new volume engine Polyhedron.</code></td></tr></table>\n",
    "created_at": "2017-03-09T17:30:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303075",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91d885edbccb92d581781c72f3c5eeb94417d0b8">91d885e</a></td><td><code>Fix the docstrings, and enhance integrate method.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/507aea5adb6f05ddc95cfef7cd79d24d3041de10">507aea5</a></td><td><code>Add the new volume engine Polyhedron.</code></td></tr></table>




---

archive/issue_events_293920.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-03-09T17:47:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293920"
}
```



---

archive/issue_events_293921.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-09T18:00:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293921"
}
```



---

archive/issue_events_293922.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-09T18:00:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293922"
}
```



---

archive/issue_comments_303076.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe commits here and at #22522 are exactly the same (last being `507aea5`). You need to be clear about what belong to which ticket and update the branches accordingly.",
    "created_at": "2017-03-09T18:00:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303076",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

The commits here and at #22522 are exactly the same (last being `507aea5`). You need to be clear about what belong to which ticket and update the branches accordingly.



---

archive/issue_comments_303077.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a563192b0dcbce9ab4e1387a1f3435e5d179cbc9\">a563192</a></td><td><code>fix a bug in _volume_latte</code></td></tr></table>\n",
    "created_at": "2017-03-10T08:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303077",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a563192b0dcbce9ab4e1387a1f3435e5d179cbc9">a563192</a></td><td><code>fix a bug in _volume_latte</code></td></tr></table>




---

archive/issue_comments_303078.json:
```json
{
    "body": "Changed commit from **[`507aea5`](https://github.com/sagemath/sagetrac-mirror/commit/507aea5adb6f05ddc95cfef7cd79d24d3041de10)** to **[`a563192`](https://github.com/sagemath/sagetrac-mirror/commit/a563192b0dcbce9ab4e1387a1f3435e5d179cbc9)**",
    "created_at": "2017-03-10T08:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303078",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`507aea5`](https://github.com/sagemath/sagetrac-mirror/commit/507aea5adb6f05ddc95cfef7cd79d24d3041de10)** to **[`a563192`](https://github.com/sagemath/sagetrac-mirror/commit/a563192b0dcbce9ab4e1387a1f3435e5d179cbc9)**



---

archive/issue_comments_303079.json:
```json
{
    "body": "Changed branch from **[u/mforets/22497](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/22497)** to **[u/mforets/20887](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/20887)**",
    "created_at": "2017-03-10T09:03:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303079",
    "user": "https://github.com/mforets"
}
```

Changed branch from **[u/mforets/22497](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/22497)** to **[u/mforets/20887](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/20887)**



---

archive/issue_events_293923.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-03-10T09:03:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293923"
}
```



---

archive/issue_events_293924.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-03-10T09:03:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293924"
}
```



---

archive/issue_comments_303080.json:
```json
{
    "body": "Changed commit from **[`a563192`](https://github.com/sagemath/sagetrac-mirror/commit/a563192b0dcbce9ab4e1387a1f3435e5d179cbc9)** to **[`9ac8279`](https://github.com/sagemath/sagetrac-mirror/commit/9ac82796710a0dfd1b99d95addf78cdfc1b37652)**",
    "created_at": "2017-03-10T15:07:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303080",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a563192`](https://github.com/sagemath/sagetrac-mirror/commit/a563192b0dcbce9ab4e1387a1f3435e5d179cbc9)** to **[`9ac8279`](https://github.com/sagemath/sagetrac-mirror/commit/9ac82796710a0dfd1b99d95addf78cdfc1b37652)**



---

archive/issue_comments_303081.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ac82796710a0dfd1b99d95addf78cdfc1b37652\">9ac8279</a></td><td><code>reject RDF, but add an example</code></td></tr></table>\n",
    "created_at": "2017-03-10T15:07:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303081",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ac82796710a0dfd1b99d95addf78cdfc1b37652">9ac8279</a></td><td><code>reject RDF, but add an example</code></td></tr></table>




---

archive/issue_comments_303082.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nthere is a test that's being incorrectly parsed by the bot (in the shell it's fine):\n\n```\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 4101, in sage.geometry.polyhedron.base.Polyhedron_base.integrate\nFailed example:\n    P.integrate('[[1,[2,2]]]')    # optional - latte_int\nExpected:\n    Traceback (most recent call last):\n    ...\n    TypeError: LattE integrale cannot be applied over inexact rings.\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/Users/forets/sage-src/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/forets/sage-src/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.integrate[15]>\", line 1, in <module>\n        P.integrate('[[1,[2,2]]]')    # optional - latte_int\n      File \"/Users/forets/sage-src/sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 4109, in integrate\n        raise ValueError(\"LattE integrale cannot be applied over inexact rings.\")\n    ValueError: LattE integrale cannot be applied over inexact rings.\n**********************************************************************\n```",
    "created_at": "2017-03-10T15:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303082",
    "user": "https://github.com/mforets"
}
```

<div id="comment:12" align="right">comment:12</div>

there is a test that's being incorrectly parsed by the bot (in the shell it's fine):

```
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 4101, in sage.geometry.polyhedron.base.Polyhedron_base.integrate
Failed example:
    P.integrate('[[1,[2,2]]]')    # optional - latte_int
Expected:
    Traceback (most recent call last):
    ...
    TypeError: LattE integrale cannot be applied over inexact rings.
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/Users/forets/sage-src/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/forets/sage-src/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.integrate[15]>", line 1, in <module>
        P.integrate('[[1,[2,2]]]')    # optional - latte_int
      File "/Users/forets/sage-src/sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 4109, in integrate
        raise ValueError("LattE integrale cannot be applied over inexact rings.")
    ValueError: LattE integrale cannot be applied over inexact rings.
**********************************************************************
```



---

archive/issue_comments_303083.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n(migrated from #22522)\n\nReplying to [@mkoeppe](#comment:26):\n> Integration over an RDF polyhedron via QQ polyhedron (latte) could make sense *as long as the method converts the answer back to RDF* to indicate that the answer is inexact.\n\nOk, that makes sense! Moreover Vincent convinced me that coercing and instantiating like that is a bad idea, potentially very costly and because it's hidden. In the new patch that's been reverted, but an illustrative example was added.\n \n> As to `change_ring`, this could be useful. I had related discussions with JP.\n\nI've created #22574 for change_ring and #22575 for change_backend.",
    "created_at": "2017-03-10T15:26:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303083",
    "user": "https://github.com/mforets"
}
```

<div id="comment:13" align="right">comment:13</div>

(migrated from #22522)

Replying to [@mkoeppe](#comment:26):
> Integration over an RDF polyhedron via QQ polyhedron (latte) could make sense *as long as the method converts the answer back to RDF* to indicate that the answer is inexact.

Ok, that makes sense! Moreover Vincent convinced me that coercing and instantiating like that is a bad idea, potentially very costly and because it's hidden. In the new patch that's been reverted, but an illustrative example was added.
 
> As to `change_ring`, this could be useful. I had related discussions with JP.

I've created #22574 for change_ring and #22575 for change_backend.



---

archive/issue_comments_303084.json:
```json
{
    "body": "Author: **Marcelo Forets**",
    "created_at": "2017-03-10T15:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303084",
    "user": "https://github.com/mforets"
}
```

Author: **Marcelo Forets**



---

archive/issue_comments_303085.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n\n```\n+        Testing convex decomposition algorithm::\n```\nthis should be \"cone decomposition\".\n\n`Polyhedron.integrate` should include tests for lower-dimensional polytopes. Those are not supported by latte's integrate. The result should either be 0 - or a proper error should be raised.",
    "created_at": "2017-03-14T15:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303085",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>


```
+        Testing convex decomposition algorithm::
```
this should be "cone decomposition".

`Polyhedron.integrate` should include tests for lower-dimensional polytopes. Those are not supported by latte's integrate. The result should either be 0 - or a proper error should be raised.



---

archive/issue_comments_303086.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2017-03-14T15:28:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303086",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_293925.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-14T15:28:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293925"
}
```



---

archive/issue_events_293926.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-14T15:28:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293926"
}
```



---

archive/issue_events_293927.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-14T15:28:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293927"
}
```



---

archive/issue_events_293928.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-14T15:28:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293928"
}
```



---

archive/issue_comments_303087.json:
```json
{
    "body": "Changed commit from **[`9ac8279`](https://github.com/sagemath/sagetrac-mirror/commit/9ac82796710a0dfd1b99d95addf78cdfc1b37652)** to **[`ec15897`](https://github.com/sagemath/sagetrac-mirror/commit/ec1589760e046f6cd18ead736b36338a18b84d74)**",
    "created_at": "2017-03-15T12:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303087",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9ac8279`](https://github.com/sagemath/sagetrac-mirror/commit/9ac82796710a0dfd1b99d95addf78cdfc1b37652)** to **[`ec15897`](https://github.com/sagemath/sagetrac-mirror/commit/ec1589760e046f6cd18ead736b36338a18b84d74)**



---

archive/issue_comments_303088.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec1589760e046f6cd18ead736b36338a18b84d74\">ec15897</a></td><td><code>add test for low-dim polytope and fix docstring typo</code></td></tr></table>\n",
    "created_at": "2017-03-15T12:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303088",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec1589760e046f6cd18ead736b36338a18b84d74">ec15897</a></td><td><code>add test for low-dim polytope and fix docstring typo</code></td></tr></table>




---

archive/issue_events_293929.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-03-15T12:46:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293929"
}
```



---

archive/issue_events_293930.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-03-15T12:46:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293930"
}
```



---

archive/issue_comments_303089.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@mkoeppe](#comment:15):\n> \n> ```\n> +        Testing convex decomposition algorithm::\n> ```\n> this should be \"cone decomposition\".\n> \n> `Polyhedron.integrate` should include tests for lower-dimensional polytopes. Those are not supported by latte's integrate. The result should either be 0 - or a proper error should be raised.\n\nwait a moment, because i may have misunderstood:\n\n1- if the polytope is not full-dimensional, but the polynomial is in low dimension, then latte gives an answer wrt to the relative interior, as in:\n\n```\nsage: P = Polyhedron(vertices=[[0,0],[1,1]])\nsage: from sage.interfaces.latte import integrate as integrate\nsage: x = polygen(QQ, 'x')\nsage: integrate(P.cdd_Hrepresentation(), 2*x^2 + x - 1, cdd=True)\n1/6\n```\n\nand we should keep this behaviour. \n\n2- however, in the situation of a multivariate polynomial in a low-dim polytope it breaks,\n\n```\nsage: P = Polyhedron(vertices=[[0,0],[1,1]])\nsage: from sage.interfaces.latte import integrate as integrate\nsage: x, y = polygens(QQ, 'x, y')\nsage: integrate(P.cdd_Hrepresentation(), 2*x^2 + x - y, cdd=True)\n...\nSetLength: can't change this vector's length\n```\n\nand we should raise an exception.\n\ncan you confirm?",
    "created_at": "2017-03-15T13:28:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303089",
    "user": "https://github.com/mforets"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@mkoeppe](#comment:15):
> 
> ```
> +        Testing convex decomposition algorithm::
> ```
> this should be "cone decomposition".
> 
> `Polyhedron.integrate` should include tests for lower-dimensional polytopes. Those are not supported by latte's integrate. The result should either be 0 - or a proper error should be raised.

wait a moment, because i may have misunderstood:

1- if the polytope is not full-dimensional, but the polynomial is in low dimension, then latte gives an answer wrt to the relative interior, as in:

```
sage: P = Polyhedron(vertices=[[0,0],[1,1]])
sage: from sage.interfaces.latte import integrate as integrate
sage: x = polygen(QQ, 'x')
sage: integrate(P.cdd_Hrepresentation(), 2*x^2 + x - 1, cdd=True)
1/6
```

and we should keep this behaviour. 

2- however, in the situation of a multivariate polynomial in a low-dim polytope it breaks,

```
sage: P = Polyhedron(vertices=[[0,0],[1,1]])
sage: from sage.interfaces.latte import integrate as integrate
sage: x, y = polygens(QQ, 'x, y')
sage: integrate(P.cdd_Hrepresentation(), 2*x^2 + x - y, cdd=True)
...
SetLength: can't change this vector's length
```

and we should raise an exception.

can you confirm?



---

archive/issue_comments_303090.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@mforets](#comment:19):\n> \n> ```\n> sage: P = Polyhedron(vertices=[[0,0],[1,1]])\n> sage: from sage.interfaces.latte import integrate as integrate\n> sage: x = polygen(QQ, 'x')\n> sage: integrate(P.cdd_Hrepresentation(), 2*x^2 + x - 1, cdd=True)\n> 1/6\n> ```\n> \n> and we should keep this behaviour. \n\nUnfortunately, there is no control over what exact transformation LattE applies; and so the input polynomial is meaningless even though it has the correct number of variables.",
    "created_at": "2017-03-15T23:17:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303090",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@mforets](#comment:19):
> 
> ```
> sage: P = Polyhedron(vertices=[[0,0],[1,1]])
> sage: from sage.interfaces.latte import integrate as integrate
> sage: x = polygen(QQ, 'x')
> sage: integrate(P.cdd_Hrepresentation(), 2*x^2 + x - 1, cdd=True)
> 1/6
> ```
> 
> and we should keep this behaviour. 

Unfortunately, there is no control over what exact transformation LattE applies; and so the input polynomial is meaningless even though it has the correct number of variables.



---

archive/issue_comments_303091.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@mkoeppe](#comment:20):\n> Replying to [@mforets](#comment:19):\n> > \n> > ```\n> > sage: P = Polyhedron(vertices=[[0,0],[1,1]])\n> > sage: from sage.interfaces.latte import integrate as integrate\n> > sage: x = polygen(QQ, 'x')\n> > sage: integrate(P.cdd_Hrepresentation(), 2*x^2 + x - 1, cdd=True)\n> > 1/6\n> > ```\n> > \n> > and we should keep this behaviour. \n\n> \n> Unfortunately, there is no control over what exact transformation LattE applies; and so the input polynomial is meaningless even though it has the correct number of variables.\n> \n\nok then; commit ec15897 raises exception in both cases.",
    "created_at": "2017-03-16T07:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303091",
    "user": "https://github.com/mforets"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@mkoeppe](#comment:20):
> Replying to [@mforets](#comment:19):
> > 
> > ```
> > sage: P = Polyhedron(vertices=[[0,0],[1,1]])
> > sage: from sage.interfaces.latte import integrate as integrate
> > sage: x = polygen(QQ, 'x')
> > sage: integrate(P.cdd_Hrepresentation(), 2*x^2 + x - 1, cdd=True)
> > 1/6
> > ```
> > 
> > and we should keep this behaviour. 

> 
> Unfortunately, there is no control over what exact transformation LattE applies; and so the input polynomial is meaningless even though it has the correct number of variables.
> 

ok then; commit ec15897 raises exception in both cases.



---

archive/issue_events_293931.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-16T22:54:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293931"
}
```



---

archive/issue_events_293932.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-16T22:54:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293932"
}
```



---

archive/issue_comments_303092.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI tested this on top of 7.6rc0 and got:\n\n```\nsage -t src/sage/geometry/polyhedron/base.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 4232, in sage.geometry.polyhedron.base.Polyhedron_base.integrate\nFailed example:\n    P.integrate('[[1,[2,2]]]')    # optional - latte_int\nExpected:\n    Traceback (most recent call last):\n    ...\n    TypeError: LattE integrale cannot be applied over inexact rings.\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.integrate[18]>\", line 1, in <module>\n        P.integrate('[[1,[2,2]]]')    # optional - latte_int\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 4240, in integrate\n        raise ValueError(\"LattE integrale cannot be applied over inexact rings.\")\n    ValueError: LattE integrale cannot be applied over inexact rings.\n**********************************************************************\n```",
    "created_at": "2017-03-16T22:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303092",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

I tested this on top of 7.6rc0 and got:

```
sage -t src/sage/geometry/polyhedron/base.py
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 4232, in sage.geometry.polyhedron.base.Polyhedron_base.integrate
Failed example:
    P.integrate('[[1,[2,2]]]')    # optional - latte_int
Expected:
    Traceback (most recent call last):
    ...
    TypeError: LattE integrale cannot be applied over inexact rings.
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.integrate[18]>", line 1, in <module>
        P.integrate('[[1,[2,2]]]')    # optional - latte_int
      File "/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 4240, in integrate
        raise ValueError("LattE integrale cannot be applied over inexact rings.")
    ValueError: LattE integrale cannot be applied over inexact rings.
**********************************************************************
```



---

archive/issue_comments_303093.json:
```json
{
    "body": "Changed commit from **[`ec15897`](https://github.com/sagemath/sagetrac-mirror/commit/ec1589760e046f6cd18ead736b36338a18b84d74)** to **[`1cf59f4`](https://github.com/sagemath/sagetrac-mirror/commit/1cf59f415161bb1901c0a1894fc9166dd0d90153)**",
    "created_at": "2017-03-19T08:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303093",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ec15897`](https://github.com/sagemath/sagetrac-mirror/commit/ec1589760e046f6cd18ead736b36338a18b84d74)** to **[`1cf59f4`](https://github.com/sagemath/sagetrac-mirror/commit/1cf59f415161bb1901c0a1894fc9166dd0d90153)**



---

archive/issue_comments_303094.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cf59f415161bb1901c0a1894fc9166dd0d90153\">1cf59f4</a></td><td><code>fix last doctest in integrate (exception mismatch)</code></td></tr></table>\n",
    "created_at": "2017-03-19T08:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303094",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cf59f415161bb1901c0a1894fc9166dd0d90153">1cf59f4</a></td><td><code>fix last doctest in integrate (exception mismatch)</code></td></tr></table>




---

archive/issue_events_293933.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-03-19T08:35:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293933"
}
```



---

archive/issue_events_293934.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-03-19T08:35:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293934"
}
```



---

archive/issue_comments_303095.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@mkoeppe](#comment:23):\n> I tested this on top of 7.6rc0 and got:\n> \n> ```\n> sage -t src/sage/geometry/polyhedron/base.py\n> **********************************************************************\n> File \"src/sage/geometry/polyhedron/base.py\", line 4232, in sage.geometry.polyhedron.base.Polyhedron_base.integrate\n> Failed example:\n>     P.integrate('[[1,[2,2]]]')    # optional - latte_int\n> Expected:\n>     Traceback (most recent call last):\n>     ...\n>     TypeError: LattE integrale cannot be applied over inexact rings.\n> Got:\n>     <BLANKLINE>\n>     Traceback (most recent call last):\n>       File \"/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n>         self.compile_and_execute(example, compiler, test.globs)\n>       File \"/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n>         exec(compiled, globs)\n>       File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.integrate[18]>\", line 1, in <module>\n>         P.integrate('[[1,[2,2]]]')    # optional - latte_int\n>       File \"/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 4240, in integrate\n>         raise ValueError(\"LattE integrale cannot be applied over inexact rings.\")\n>     ValueError: LattE integrale cannot be applied over inexact rings.\n> **********************************************************************\n> ```\n\nthanks Matthias; i did run the tests before submitting, but there was this \"<BLANKLINE>\" thing that i didn't know how to solve. but actually it was a trivial error on my side. anyway, commit \u200b1cf59f4 shall fix it.",
    "created_at": "2017-03-19T08:41:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303095",
    "user": "https://github.com/mforets"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@mkoeppe](#comment:23):
> I tested this on top of 7.6rc0 and got:
> 
> ```
> sage -t src/sage/geometry/polyhedron/base.py
> **********************************************************************
> File "src/sage/geometry/polyhedron/base.py", line 4232, in sage.geometry.polyhedron.base.Polyhedron_base.integrate
> Failed example:
>     P.integrate('[[1,[2,2]]]')    # optional - latte_int
> Expected:
>     Traceback (most recent call last):
>     ...
>     TypeError: LattE integrale cannot be applied over inexact rings.
> Got:
>     <BLANKLINE>
>     Traceback (most recent call last):
>       File "/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
>         self.compile_and_execute(example, compiler, test.globs)
>       File "/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
>         exec(compiled, globs)
>       File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.integrate[18]>", line 1, in <module>
>         P.integrate('[[1,[2,2]]]')    # optional - latte_int
>       File "/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 4240, in integrate
>         raise ValueError("LattE integrale cannot be applied over inexact rings.")
>     ValueError: LattE integrale cannot be applied over inexact rings.
> **********************************************************************
> ```

thanks Matthias; i did run the tests before submitting, but there was this "<BLANKLINE>" thing that i didn't know how to solve. but actually it was a trivial error on my side. anyway, commit ​1cf59f4 shall fix it.



---

archive/issue_comments_303096.json:
```json
{
    "body": "Changed keywords from none to **days84, polytope**",
    "created_at": "2017-03-19T08:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303096",
    "user": "https://github.com/mforets"
}
```

Changed keywords from none to **days84, polytope**



---

archive/issue_events_293935.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-19T22:16:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293935"
}
```



---

archive/issue_events_293936.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-19T22:16:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293936"
}
```



---

archive/issue_comments_303097.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI have to ask, at no point are importing `is_package_installed` from `sage.misc.package` or `sage.misc.all`, yet you are using it. How it is that you don't get \"global name `is_package_installed` is not defined\"?",
    "created_at": "2017-03-28T21:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303097",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

I have to ask, at no point are importing `is_package_installed` from `sage.misc.package` or `sage.misc.all`, yet you are using it. How it is that you don't get "global name `is_package_installed` is not defined"?



---

archive/issue_events_293937.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-28T22:21:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293937"
}
```



---

archive/issue_events_293938.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-28T22:21:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293938"
}
```



---

archive/issue_comments_303098.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n\n```\nsage -t --long src/sage/geometry/polyhedron/base.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 4308, in sage.geometry.polyhedron.base.Polyhedron_base.integrate\nFailed example:\n    P.integrate(x*y)\nExpected:\n    Traceback (most recent call last):\n    ...\n    NotImplementedError: The polytope must be full-dimensional.\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.integrate[6]>\", line 1, in <module>\n        P.integrate(x*y)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 4355, in integrate\n        raise NotImplementedError('You must install the optional latte_int package for this function to work.')\n    NotImplementedError: You must install the optional latte_int package for this function to work.\n**********************************************************************\n```",
    "created_at": "2017-03-28T22:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303098",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:30" align="right">comment:30</div>


```
sage -t --long src/sage/geometry/polyhedron/base.py
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 4308, in sage.geometry.polyhedron.base.Polyhedron_base.integrate
Failed example:
    P.integrate(x*y)
Expected:
    Traceback (most recent call last):
    ...
    NotImplementedError: The polytope must be full-dimensional.
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.integrate[6]>", line 1, in <module>
        P.integrate(x*y)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 4355, in integrate
        raise NotImplementedError('You must install the optional latte_int package for this function to work.')
    NotImplementedError: You must install the optional latte_int package for this function to work.
**********************************************************************
```



---

archive/issue_comments_303099.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI should have thought about that! Never mind \"is_package_installed\", it is only visible at all because you forgot to mark that particular test `#optional - latte_int`.",
    "created_at": "2017-03-28T22:43:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303099",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:31" align="right">comment:31</div>

I should have thought about that! Never mind "is_package_installed", it is only visible at all because you forgot to mark that particular test `#optional - latte_int`.



---

archive/issue_comments_303100.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc544fac24882973b51a5e6c8c645ace92da1dd0\">dc544fa</a></td><td><code>fix optional tag in integrate test</code></td></tr></table>\n",
    "created_at": "2017-03-29T05:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303100",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc544fac24882973b51a5e6c8c645ace92da1dd0">dc544fa</a></td><td><code>fix optional tag in integrate test</code></td></tr></table>




---

archive/issue_comments_303101.json:
```json
{
    "body": "Changed commit from **[`1cf59f4`](https://github.com/sagemath/sagetrac-mirror/commit/1cf59f415161bb1901c0a1894fc9166dd0d90153)** to **[`dc544fa`](https://github.com/sagemath/sagetrac-mirror/commit/dc544fac24882973b51a5e6c8c645ace92da1dd0)**",
    "created_at": "2017-03-29T05:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303101",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1cf59f4`](https://github.com/sagemath/sagetrac-mirror/commit/1cf59f415161bb1901c0a1894fc9166dd0d90153)** to **[`dc544fa`](https://github.com/sagemath/sagetrac-mirror/commit/dc544fac24882973b51a5e6c8c645ace92da1dd0)**



---

archive/issue_events_293939.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-03-29T05:43:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293939"
}
```



---

archive/issue_events_293940.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-03-29T05:43:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293940"
}
```



---

archive/issue_comments_303102.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nDoesn't fbissey's comment regarding `is_package_installed` need addressing?",
    "created_at": "2017-03-30T05:51:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303102",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Doesn't fbissey's comment regarding `is_package_installed` need addressing?



---

archive/issue_comments_303103.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nIt's a funny, it has to work due to a chain of import from `all.py` \n\n```\nfrom sage.misc.all \t import *         # takes a while\n```\nand in `misc/all.py`\n\n```\nfrom .package import (installed_packages, is_package_installed,\n        standard_packages, optional_packages, experimental_packages,\n        package_versions)\n```\nBut most other call to it, do an explicit import. I would think it is supposed to work unless I am missing something.",
    "created_at": "2017-03-30T06:40:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303103",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:35" align="right">comment:35</div>

It's a funny, it has to work due to a chain of import from `all.py` 

```
from sage.misc.all 	 import *         # takes a while
```
and in `misc/all.py`

```
from .package import (installed_packages, is_package_installed,
        standard_packages, optional_packages, experimental_packages,
        package_versions)
```
But most other call to it, do an explicit import. I would think it is supposed to work unless I am missing something.



---

archive/issue_comments_303104.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@mkoeppe](#comment:34):\n> Doesn't fbissey's comment regarding `is_package_installed` need addressing? \n\n \nbut `is_package_installed` is imported above (line 25). it also has to be imported in the function body? thanks.",
    "created_at": "2017-03-30T06:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303104",
    "user": "https://github.com/mforets"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@mkoeppe](#comment:34):
> Doesn't fbissey's comment regarding `is_package_installed` need addressing? 

 
but `is_package_installed` is imported above (line 25). it also has to be imported in the function body? thanks.



---

archive/issue_comments_303105.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nLet's call it a \"user\" error and forget about my comment about it. I have stuff from the feature branch which removes it. I didn't notice that this file was touched by it. That's why it is absent on my stuff.",
    "created_at": "2017-03-30T06:53:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303105",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:37" align="right">comment:37</div>

Let's call it a "user" error and forget about my comment about it. I have stuff from the feature branch which removes it. I didn't notice that this file was touched by it. That's why it is absent on my stuff.



---

archive/issue_comments_303106.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nAh, thanks for the clarification.",
    "created_at": "2017-03-30T17:56:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303106",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Ah, thanks for the clarification.



---

archive/issue_events_293941.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-30T17:56:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293941"
}
```



---

archive/issue_events_293942.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-30T17:56:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293942"
}
```



---

archive/issue_comments_303107.json:
```json
{
    "body": "Changed branch from **[u/mforets/20887](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/20887)** to **[`dc544fa`](https://github.com/sagemath/sagetrac-mirror/commit/dc544fac24882973b51a5e6c8c645ace92da1dd0)**",
    "created_at": "2017-04-03T21:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20887#issuecomment-303107",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mforets/20887](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/20887)** to **[`dc544fa`](https://github.com/sagemath/sagetrac-mirror/commit/dc544fac24882973b51a5e6c8c645ace92da1dd0)**



---

archive/issue_events_293943.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-03T21:00:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293943"
}
```



---

archive/issue_events_293944.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "cddc14abd7fb82a3828e1227939110442ad791bb",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-04-03T21:00:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20887",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20887#event-293944"
}
```
