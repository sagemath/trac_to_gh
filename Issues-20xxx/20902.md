# Issue 20902: Move Parent.list() method to EnumeratedSets category

archive/issues_020665.json:
```json
{
    "assignees": [],
    "body": "The methods `__len__`, `list`, `_list_from_iterator_cashed` in the Parent class conflict with those of the `FiniteEnumerableSets` category.  One symptom is #20743. The proper place for them is the `EnumeratedSets` category (#12955), and the three methods are moved  to therein.\n\nAlong the way, the patch also introduces \"Enumerated\" axiom into the category framework. The effect is for lots of cases, we get nicer names for the joint category with the enumerated sets category. \n\n\n\nCC:  @johanrosenkilde @nbruin @vbraun @jdemeyer @tscrim @nthiery\n\nBranch/Commit: **[bdbd034](https://github.com/sagemath/sagetrac-mirror/commit/bdbd034de6d3ebd7d922bcc68165ce18c2112888)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Kwankyu Lee**\n\nComponent: **categories**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20902_\n\n",
    "closed_at": "2016-11-07T18:27:15Z",
    "created_at": "2016-06-29T01:50:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20categories",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Move Parent.list() method to EnumeratedSets category",
    "type": "issue",
    "updated_at": "2016-11-07T18:27:15Z",
    "url": "https://github.com/sagemath/sage/issues/20902",
    "user": "https://github.com/kwankyu"
}
```
The methods `__len__`, `list`, `_list_from_iterator_cashed` in the Parent class conflict with those of the `FiniteEnumerableSets` category.  One symptom is #20743. The proper place for them is the `EnumeratedSets` category (#12955), and the three methods are moved  to therein.

Along the way, the patch also introduces "Enumerated" axiom into the category framework. The effect is for lots of cases, we get nicer names for the joint category with the enumerated sets category. 



CC:  @johanrosenkilde @nbruin @vbraun @jdemeyer @tscrim @nthiery

Branch/Commit: **[bdbd034](https://github.com/sagemath/sagetrac-mirror/commit/bdbd034de6d3ebd7d922bcc68165ce18c2112888)**

Reviewer: **Travis Scrimshaw**

Author: **Kwankyu Lee**

Component: **categories**

_Issue created by migration from https://trac.sagemath.org/ticket/20902_





---

archive/issue_events_294134.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-06-29T01:50:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294134"
}
```



---

archive/issue_events_294135.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-06-29T01:50:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20categories",
    "label_color": "0000ff",
    "label_name": "c: categories",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294135"
}
```



---

archive/issue_events_294136.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-06-29T01:50:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294136"
}
```



---

archive/issue_events_294137.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-06-29T01:50:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294137"
}
```



---

archive/issue_comments_303494.json:
```json
{
    "body": "Branch: **[u/klee/20902](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/20902)**",
    "created_at": "2016-06-29T01:51:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303494",
    "user": "https://github.com/kwankyu"
}
```

Branch: **[u/klee/20902](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/20902)**



---

archive/issue_comments_303495.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a36fa0c3c2c058c9dfb9dff74719174838c1a04\">6a36fa0</a></td><td><code>Move .list() to Sets category</code></td></tr></table>\n",
    "created_at": "2016-06-29T01:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303495",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a36fa0c3c2c058c9dfb9dff74719174838c1a04">6a36fa0</a></td><td><code>Move .list() to Sets category</code></td></tr></table>




---

archive/issue_comments_303496.json:
```json
{
    "body": "Commit: **[6a36fa0](https://github.com/sagemath/sagetrac-mirror/commit/6a36fa0c3c2c058c9dfb9dff74719174838c1a04)**",
    "created_at": "2016-06-29T01:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303496",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[6a36fa0](https://github.com/sagemath/sagetrac-mirror/commit/6a36fa0c3c2c058c9dfb9dff74719174838c1a04)**



---

archive/issue_events_294138.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-06-29T02:42:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294138"
}
```



---

archive/issue_comments_303497.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe patch introduces a doctest failure, which is not caused by the patch, but just revealed by it. The doctest failure is the issue treated in #20896.",
    "created_at": "2016-06-29T02:45:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303497",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:4" align="right">comment:4</div>

The patch introduces a doctest failure, which is not caused by the patch, but just revealed by it. The doctest failure is the issue treated in #20896.



---

archive/issue_comments_303498.json:
```json
{
    "body": "Author: **Kwankyu Lee**",
    "created_at": "2016-07-05T08:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303498",
    "user": "https://github.com/kwankyu"
}
```

Author: **Kwankyu Lee**



---

archive/issue_comments_303499.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI have some issues with this:\n\n* You are arguing that these functions **should** be in `EnumeratedSets`, but you move them to `Sets`. Why not move them to `EnumeratedSets` and start adding parents to that category? At least, you should keep the TODO that this would be best?\n\n* The `list` function now returns a copy of the (cached) list every time. We had a long discussion on sage-devel as well as on #20743 about this, and though complete consensus didn't arise, everyone seemed to think that `list` should **not** return a fresh copy every time. Rather we should somehow flag the list as being immutable.\n\nApart from that it makes sense to move those functions from `Parent`.\n\n(I added a few of the debators on #20743 to Cc, hope you're all ok with that).",
    "created_at": "2016-07-13T02:28:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303499",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:6" align="right">comment:6</div>

I have some issues with this:

* You are arguing that these functions **should** be in `EnumeratedSets`, but you move them to `Sets`. Why not move them to `EnumeratedSets` and start adding parents to that category? At least, you should keep the TODO that this would be best?

* The `list` function now returns a copy of the (cached) list every time. We had a long discussion on sage-devel as well as on #20743 about this, and though complete consensus didn't arise, everyone seemed to think that `list` should **not** return a fresh copy every time. Rather we should somehow flag the list as being immutable.

Apart from that it makes sense to move those functions from `Parent`.

(I added a few of the debators on #20743 to Cc, hope you're all ok with that).



---

archive/issue_comments_303500.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nFirst let me thank you for raising these issues, which are legitimate.\n\n> * You are arguing that these functions **should** be in `EnumeratedSets`, but you move them to `Sets`. Why not move them to `EnumeratedSets` and start adding parents to that category? At least, you should keep the TODO that this would be best?\n\nMany parents in Sage do have `list` method, but are not declared as in enumerable set category. Some of them seems that their enumerability is determined only at runtime, so cannot be declared so in its defining class. For example, a free module over a ring can be either enumerable or not depending on the ring. So keeping the \"list\" method only in `EnumeratedSets` category is not the way to support `list` method for existing parents. For the reason, I doubt that the TODO is really what we have to do. Yes, I am arguing against myself, but the **should** is for a perfect world.\n\n> * The `list` function now returns a copy of the (cached) list every time. We had a long discussion on sage-devel as well as on #20743 about this, and though complete consensus didn't arise, everyone seemed to think that `list` should **not** return a fresh copy every time. Rather we should somehow flag the list as being immutable.\n\nI am aware of the discussion. I was one of the proponents that `list` method should return a cashed tuple rather than a list. But searching through Sage library, I find that (1) `list` method is inconsistently implemented for many parents in Sage; (2) The implementation of `list` method for finite sets category returns a fresh copy of a cached list each time  (the same is true for `list` method of the current `Parent` class). My conclusion is that the behavior of the `list` method of the parents in the finite sets category is the de facto standard in Sage. So I copied the \"standard\" implementation to `Sets` category. \n\nIn the present ticket, I am not taking any position  about how the `list` method should be implemented, but just move around what is already in Sage. If we all agree on a proper implementation of the `list` methods of parents in the category framework, that should be another ticket.  Let me just say that for this issue, my present opinion is that the current implementation is reasonable in the category framework, and if a specific parent needs better performance, it can just implement its own `list` method.",
    "created_at": "2016-07-13T05:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303500",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:7" align="right">comment:7</div>

First let me thank you for raising these issues, which are legitimate.

> * You are arguing that these functions **should** be in `EnumeratedSets`, but you move them to `Sets`. Why not move them to `EnumeratedSets` and start adding parents to that category? At least, you should keep the TODO that this would be best?

Many parents in Sage do have `list` method, but are not declared as in enumerable set category. Some of them seems that their enumerability is determined only at runtime, so cannot be declared so in its defining class. For example, a free module over a ring can be either enumerable or not depending on the ring. So keeping the "list" method only in `EnumeratedSets` category is not the way to support `list` method for existing parents. For the reason, I doubt that the TODO is really what we have to do. Yes, I am arguing against myself, but the **should** is for a perfect world.

> * The `list` function now returns a copy of the (cached) list every time. We had a long discussion on sage-devel as well as on #20743 about this, and though complete consensus didn't arise, everyone seemed to think that `list` should **not** return a fresh copy every time. Rather we should somehow flag the list as being immutable.

I am aware of the discussion. I was one of the proponents that `list` method should return a cashed tuple rather than a list. But searching through Sage library, I find that (1) `list` method is inconsistently implemented for many parents in Sage; (2) The implementation of `list` method for finite sets category returns a fresh copy of a cached list each time  (the same is true for `list` method of the current `Parent` class). My conclusion is that the behavior of the `list` method of the parents in the finite sets category is the de facto standard in Sage. So I copied the "standard" implementation to `Sets` category. 

In the present ticket, I am not taking any position  about how the `list` method should be implemented, but just move around what is already in Sage. If we all agree on a proper implementation of the `list` methods of parents in the category framework, that should be another ticket.  Let me just say that for this issue, my present opinion is that the current implementation is reasonable in the category framework, and if a specific parent needs better performance, it can just implement its own `list` method.



---

archive/issue_events_294139.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-07-13T07:37:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294139"
}
```



---

archive/issue_events_294140.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-07-13T07:37:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294140"
}
```



---

archive/issue_comments_303501.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHmm. Now I suspect that I am wrong in the first answer. The category is determined at the parent creation time and need not be hardcoded into the class. Then a free module over a ring can declare itself as either enumerable or not at its creation time. Then the fact that it does not do that in the current Sage is simply a bug.  So at least free modules are not a good example for my argument.",
    "created_at": "2016-07-13T07:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303501",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:8" align="right">comment:8</div>

Hmm. Now I suspect that I am wrong in the first answer. The category is determined at the parent creation time and need not be hardcoded into the class. Then a free module over a ring can declare itself as either enumerable or not at its creation time. Then the fact that it does not do that in the current Sage is simply a bug.  So at least free modules are not a good example for my argument.



---

archive/issue_comments_303502.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOK, your arguments are compelling. I agree that making the move is orthogonal to changing the implementation of `list`.\n\nSince it is possible to dynamically be a member of `EnumerableSets` or not, how hard would it be to move the functions into there immediately? It seems a bit wasteful to first make the move of this ticket, and then move them again. In `sets_cat.py` there's also a note on line 1368 that `cardinality` and other functions are intentionally left out of `Sets` to be put in subcategories. It seems a shame to put other functions into `Set` which actually belong elsewhere.\n\nAbout the default implementation of `__len__()`: perhaps it could check whether `self` has a `cardinality` method, in which case it could return that.",
    "created_at": "2016-07-14T13:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303502",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:9" align="right">comment:9</div>

OK, your arguments are compelling. I agree that making the move is orthogonal to changing the implementation of `list`.

Since it is possible to dynamically be a member of `EnumerableSets` or not, how hard would it be to move the functions into there immediately? It seems a bit wasteful to first make the move of this ticket, and then move them again. In `sets_cat.py` there's also a note on line 1368 that `cardinality` and other functions are intentionally left out of `Sets` to be put in subcategories. It seems a shame to put other functions into `Set` which actually belong elsewhere.

About the default implementation of `__len__()`: perhaps it could check whether `self` has a `cardinality` method, in which case it could return that.



---

archive/issue_comments_303503.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n> Since it is possible to dynamically be a member of `EnumerableSets` or not, how hard would it be to move the functions into there immediately? It seems a bit wasteful to first make the move of this ticket, and then move them again. \n\nI thought before that it is a daunting task, if at all possible, to put every enumerable parent  into `EnumerableSets` category. Now I feel that the task can at least be done to such an extent as to avoid doctest failures.\n\n>In `sets_cat.py` there's also a note on line 1368 that `cardinality` and other functions are intentionally left out of `Sets` to be put in subcategories. It seems a shame to put other functions into `Set` which actually belong elsewhere.\n\nI agree.\n> About the default implementation of `__len__()`: perhaps it could check whether `self` has a `cardinality` method, in which case it could return that.\n\nI will consider that while moving the methods again into `EnumerableSets` category. For that, now the ticket is in \"needs work\" status :-)",
    "created_at": "2016-07-14T13:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303503",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:10" align="right">comment:10</div>

> Since it is possible to dynamically be a member of `EnumerableSets` or not, how hard would it be to move the functions into there immediately? It seems a bit wasteful to first make the move of this ticket, and then move them again. 

I thought before that it is a daunting task, if at all possible, to put every enumerable parent  into `EnumerableSets` category. Now I feel that the task can at least be done to such an extent as to avoid doctest failures.

>In `sets_cat.py` there's also a note on line 1368 that `cardinality` and other functions are intentionally left out of `Sets` to be put in subcategories. It seems a shame to put other functions into `Set` which actually belong elsewhere.

I agree.
> About the default implementation of `__len__()`: perhaps it could check whether `self` has a `cardinality` method, in which case it could return that.

I will consider that while moving the methods again into `EnumerableSets` category. For that, now the ticket is in "needs work" status :-)



---

archive/issue_comments_303504.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nSounds great. I'm glad you opened this ticket: I think one of the very confusing things about Sage is that many objects have generic methods that don't do anything sensible on them, exactly because some methods are not placed on the right category/parent object.",
    "created_at": "2016-07-14T14:22:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303504",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:11" align="right">comment:11</div>

Sounds great. I'm glad you opened this ticket: I think one of the very confusing things about Sage is that many objects have generic methods that don't do anything sensible on them, exactly because some methods are not placed on the right category/parent object.



---

archive/issue_comments_303505.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99dc083b75af8adeab1f1677f66e723971d96a2d\">99dc083</a></td><td><code>Move .list() to EnumeratedSets category</code></td></tr></table>\n",
    "created_at": "2016-09-04T13:14:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303505",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99dc083b75af8adeab1f1677f66e723971d96a2d">99dc083</a></td><td><code>Move .list() to EnumeratedSets category</code></td></tr></table>




---

archive/issue_comments_303506.json:
```json
{
    "body": "Changed commit from **[6a36fa0](https://github.com/sagemath/sagetrac-mirror/commit/6a36fa0c3c2c058c9dfb9dff74719174838c1a04)** to **[99dc083](https://github.com/sagemath/sagetrac-mirror/commit/99dc083b75af8adeab1f1677f66e723971d96a2d)**",
    "created_at": "2016-09-04T13:14:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303506",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6a36fa0](https://github.com/sagemath/sagetrac-mirror/commit/6a36fa0c3c2c058c9dfb9dff74719174838c1a04)** to **[99dc083](https://github.com/sagemath/sagetrac-mirror/commit/99dc083b75af8adeab1f1677f66e723971d96a2d)**



---

archive/issue_events_294141.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-09-04T13:19:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294141"
}
```



---

archive/issue_events_294142.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-09-04T13:19:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294142"
}
```



---

archive/issue_events_294143.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-09-04T13:19:45Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "title_is": "Move Parent.list() method to EnumeratdSets category",
    "title_was": "Move Parent.list() method to Sets category",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294143"
}
```



---

archive/issue_comments_303507.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n-The methods `__len__`, `list`, `_list_from_iterator_cashed` in the Parent class conflict with those of the `FiniteEnumerableSets` category.  One symptom is #20743. Arguably the proper place for them is the `EnumeratedSets` category (#12955). However many enumerable parents in Sage are not in that category, but nonetheless they are in Sets category. So, as a practical compromise, the three methods are moved  to the Sets category. \n+The methods `__len__`, `list`, `_list_from_iterator_cashed` in the Parent class conflict with those of the `FiniteEnumerableSets` category.  One symptom is #20743. Arguably the proper place for them is the `EnumeratedSets` category (#12955), and the three methods are moved  to therein.\n \n+Along the way, the patch also introduces \"Enumerated\" axiom into the category framework. The effect is for lots of cases, we get nicer names for the joint category with the enumerated sets category. \n+\n``````\n",
    "created_at": "2016-09-04T13:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303507",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
-The methods `__len__`, `list`, `_list_from_iterator_cashed` in the Parent class conflict with those of the `FiniteEnumerableSets` category.  One symptom is #20743. Arguably the proper place for them is the `EnumeratedSets` category (#12955). However many enumerable parents in Sage are not in that category, but nonetheless they are in Sets category. So, as a practical compromise, the three methods are moved  to the Sets category. 
+The methods `__len__`, `list`, `_list_from_iterator_cashed` in the Parent class conflict with those of the `FiniteEnumerableSets` category.  One symptom is #20743. Arguably the proper place for them is the `EnumeratedSets` category (#12955), and the three methods are moved  to therein.
 
+Along the way, the patch also introduces "Enumerated" axiom into the category framework. The effect is for lots of cases, we get nicer names for the joint category with the enumerated sets category. 
+
``````




---

archive/issue_comments_303508.json:
```json
{
    "body": "Changed commit from **[99dc083](https://github.com/sagemath/sagetrac-mirror/commit/99dc083b75af8adeab1f1677f66e723971d96a2d)** to **[cba4a24](https://github.com/sagemath/sagetrac-mirror/commit/cba4a24f898d1496deedcfe7204d679a9c34e893)**",
    "created_at": "2016-09-04T19:13:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303508",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[99dc083](https://github.com/sagemath/sagetrac-mirror/commit/99dc083b75af8adeab1f1677f66e723971d96a2d)** to **[cba4a24](https://github.com/sagemath/sagetrac-mirror/commit/cba4a24f898d1496deedcfe7204d679a9c34e893)**



---

archive/issue_comments_303509.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cba4a24f898d1496deedcfe7204d679a9c34e893\">cba4a24</a></td><td><code>Fixes some doctest failures</code></td></tr></table>\n",
    "created_at": "2016-09-04T19:13:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303509",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cba4a24f898d1496deedcfe7204d679a9c34e893">cba4a24</a></td><td><code>Fixes some doctest failures</code></td></tr></table>




---

archive/issue_comments_303510.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a47a865ceab6046111f9e0b50d3a82c68193f74\">7a47a86</a></td><td><code>Add a doctest string for Enumerated axiom</code></td></tr></table>\n",
    "created_at": "2016-09-05T06:20:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303510",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a47a865ceab6046111f9e0b50d3a82c68193f74">7a47a86</a></td><td><code>Add a doctest string for Enumerated axiom</code></td></tr></table>




---

archive/issue_comments_303511.json:
```json
{
    "body": "Changed commit from **[cba4a24](https://github.com/sagemath/sagetrac-mirror/commit/cba4a24f898d1496deedcfe7204d679a9c34e893)** to **[7a47a86](https://github.com/sagemath/sagetrac-mirror/commit/7a47a865ceab6046111f9e0b50d3a82c68193f74)**",
    "created_at": "2016-09-05T06:20:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303511",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cba4a24](https://github.com/sagemath/sagetrac-mirror/commit/cba4a24f898d1496deedcfe7204d679a9c34e893)** to **[7a47a86](https://github.com/sagemath/sagetrac-mirror/commit/7a47a865ceab6046111f9e0b50d3a82c68193f74)**



---

archive/issue_comments_303512.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d128a902ad8fae35838465b19ef5c8166118f622\">d128a90</a></td><td><code>Patch a doctest failure in jordan algebra</code></td></tr></table>\n",
    "created_at": "2016-09-05T09:46:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303512",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d128a902ad8fae35838465b19ef5c8166118f622">d128a90</a></td><td><code>Patch a doctest failure in jordan algebra</code></td></tr></table>




---

archive/issue_comments_303513.json:
```json
{
    "body": "Changed commit from **[7a47a86](https://github.com/sagemath/sagetrac-mirror/commit/7a47a865ceab6046111f9e0b50d3a82c68193f74)** to **[d128a90](https://github.com/sagemath/sagetrac-mirror/commit/d128a902ad8fae35838465b19ef5c8166118f622)**",
    "created_at": "2016-09-05T09:46:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303513",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7a47a86](https://github.com/sagemath/sagetrac-mirror/commit/7a47a865ceab6046111f9e0b50d3a82c68193f74)** to **[d128a90](https://github.com/sagemath/sagetrac-mirror/commit/d128a902ad8fae35838465b19ef5c8166118f622)**



---

archive/issue_comments_303514.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n-The methods `__len__`, `list`, `_list_from_iterator_cashed` in the Parent class conflict with those of the `FiniteEnumerableSets` category.  One symptom is #20743. Arguably the proper place for them is the `EnumeratedSets` category (#12955), and the three methods are moved  to therein.\n+The methods `__len__`, `list`, `_list_from_iterator_cashed` in the Parent class conflict with those of the `FiniteEnumerableSets` category.  One symptom is #20743. The proper place for them is the `EnumeratedSets` category (#12955), and the three methods are moved  to therein.\n \n Along the way, the patch also introduces \"Enumerated\" axiom into the category framework. The effect is for lots of cases, we get nicer names for the joint category with the enumerated sets category. \n \n+\n``````\n",
    "created_at": "2016-09-07T05:50:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303514",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
-The methods `__len__`, `list`, `_list_from_iterator_cashed` in the Parent class conflict with those of the `FiniteEnumerableSets` category.  One symptom is #20743. Arguably the proper place for them is the `EnumeratedSets` category (#12955), and the three methods are moved  to therein.
+The methods `__len__`, `list`, `_list_from_iterator_cashed` in the Parent class conflict with those of the `FiniteEnumerableSets` category.  One symptom is #20743. The proper place for them is the `EnumeratedSets` category (#12955), and the three methods are moved  to therein.
 
 Along the way, the patch also introduces "Enumerated" axiom into the category framework. The effect is for lots of cases, we get nicer names for the joint category with the enumerated sets category. 
 
+
``````




---

archive/issue_comments_303515.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIn the patch, some old parents are modified to avoid doctest failures, but moving parents into enumerated sets cateogy is not attempted.",
    "created_at": "2016-09-07T05:50:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303515",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:17" align="right">comment:17</div>

In the patch, some old parents are modified to avoid doctest failures, but moving parents into enumerated sets cateogy is not attempted.



---

archive/issue_events_294144.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-09-07T05:50:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294144"
}
```



---

archive/issue_events_294145.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-09-07T05:50:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294145"
}
```



---

archive/issue_comments_303516.json:
```json
{
    "body": "Changed commit from **[d128a90](https://github.com/sagemath/sagetrac-mirror/commit/d128a902ad8fae35838465b19ef5c8166118f622)** to **[7121e51](https://github.com/sagemath/sagetrac-mirror/commit/7121e51c8148ebd16579239a82a8fbd63412ab61)**",
    "created_at": "2016-09-08T01:43:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303516",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d128a90](https://github.com/sagemath/sagetrac-mirror/commit/d128a902ad8fae35838465b19ef5c8166118f622)** to **[7121e51](https://github.com/sagemath/sagetrac-mirror/commit/7121e51c8148ebd16579239a82a8fbd63412ab61)**



---

archive/issue_comments_303517.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7121e51c8148ebd16579239a82a8fbd63412ab61\">7121e51</a></td><td><code>Improve doctest coverage to attract patchbots</code></td></tr></table>\n",
    "created_at": "2016-09-08T01:43:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303517",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7121e51c8148ebd16579239a82a8fbd63412ab61">7121e51</a></td><td><code>Improve doctest coverage to attract patchbots</code></td></tr></table>




---

archive/issue_comments_303518.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI don't understand why you removed `_test_enumerated_set_iter_cardinality`. This is a good check that any code cannot render invalid/redundant.\n\nThe change to Jordan algebras is incorrect. You should just let the `TypeError` (or whatever the error is from `tuple(self.algebra_generators())`) propagate up. Also, you should avoid having a bare `except:` statement.",
    "created_at": "2016-09-08T14:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303518",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

I don't understand why you removed `_test_enumerated_set_iter_cardinality`. This is a good check that any code cannot render invalid/redundant.

The change to Jordan algebras is incorrect. You should just let the `TypeError` (or whatever the error is from `tuple(self.algebra_generators())`) propagate up. Also, you should avoid having a bare `except:` statement.



---

archive/issue_comments_303519.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@tscrim](#comment:19):\n> I don't understand why you removed `_test_enumerated_set_iter_cardinality`. This is a good check that any code cannot render invalid/redundant.\n\nIt tests the method `_cardinality_from_iterator`, which is removed in the current patch. Now `.cardinality()` method is implemented instead just using `self.list()` inherited from the enumerated sets category, which itself uses the iterator of self.\n\nSo it seemed to me that the `_test_enumerated_set_iter_cardinality` lost its point with the current patch. Even the example (\"let us now break...\") under the test does not work. Would you try that?\n\nBut I may have missed the point of the test as intended by the original author. Then would you elaborate on that? \n\n> \n> The change to Jordan algebras is incorrect. You should just let the `TypeError` (or whatever the error is from `tuple(self.algebra_generators())`) propagate up. \n\nWith the current patch, the original code `tuple(self.algebra_generators())` falls into an infinite loop in the case that `self.algebra_generators()` is an infinite set. The change is to avoid this. I don't know a better way to deal with this... \n\n> Also, you should avoid having a bare `except:` statement.\n\nI see. I will correct that.",
    "created_at": "2016-09-08T15:30:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303519",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@tscrim](#comment:19):
> I don't understand why you removed `_test_enumerated_set_iter_cardinality`. This is a good check that any code cannot render invalid/redundant.

It tests the method `_cardinality_from_iterator`, which is removed in the current patch. Now `.cardinality()` method is implemented instead just using `self.list()` inherited from the enumerated sets category, which itself uses the iterator of self.

So it seemed to me that the `_test_enumerated_set_iter_cardinality` lost its point with the current patch. Even the example ("let us now break...") under the test does not work. Would you try that?

But I may have missed the point of the test as intended by the original author. Then would you elaborate on that? 

> 
> The change to Jordan algebras is incorrect. You should just let the `TypeError` (or whatever the error is from `tuple(self.algebra_generators())`) propagate up. 

With the current patch, the original code `tuple(self.algebra_generators())` falls into an infinite loop in the case that `self.algebra_generators()` is an infinite set. The change is to avoid this. I don't know a better way to deal with this... 

> Also, you should avoid having a bare `except:` statement.

I see. I will correct that.



---

archive/issue_events_294146.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-09-08T15:45:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294146"
}
```



---

archive/issue_events_294147.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-09-08T15:45:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294147"
}
```



---

archive/issue_events_294148.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-09-08T15:45:08Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "title_is": "Move Parent.list() method to EnumeratedSets category",
    "title_was": "Move Parent.list() method to EnumeratdSets category",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294148"
}
```



---

archive/issue_comments_303520.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@kwankyu](#comment:20):\n> Replying to [@tscrim](#comment:19):\n> > I don't understand why you removed `_test_enumerated_set_iter_cardinality`. This is a good check that any code cannot render invalid/redundant.\n\n> \n> It tests the method `_cardinality_from_iterator`, which is removed in the current patch. Now `.cardinality()` method is implemented instead just using `self.list()` inherited from the enumerated sets category, which itself uses the iterator of self.\n> \n> So it seemed to me that the `_test_enumerated_set_iter_cardinality` lost its point with the current patch. Even the example (\"let us now break...\") under the test does not work. Would you try that?\n> \n> But I may have missed the point of the test as intended by the original author. Then would you elaborate on that? \n\nIt is there to test that (`X.list()` or) `list(X) == X.cardinality()`, which could break anytime a user directly implements `cardinality` (such as on the powerset of a finite set).\n\n> > \n> > The change to Jordan algebras is incorrect. You should just let the `TypeError` (or whatever the error is from `tuple(self.algebra_generators())`) propagate up. \n\n> \n> With the current patch, the original code `tuple(self.algebra_generators())` falls into an infinite loop in the case that `self.algebra_generators()` is an infinite set. The change is to avoid this. I don't know a better way to deal with this... \n\nPreviously, if we were calling `tuple(X)` when `X` was known to be infinite, then this would fail with IIRC a `NotImplementedError` (try `tuple(ZZ)`). In the example, `self.algebra_generators` is known to be infinite:\n\n```\nsage: J = JordanAlgebra(FreeAlgebra(QQ, 3, 'x,y,z'))\nsage: J.algebra_generators().cardinality()\n+Infinity\n```\nSo the error is correct (although the reason was not because the family should know it is in the  infinite enumerated sets category). Thus I would propose fixing the category issue of `LazyFamily` when the keys are known to be infinite.\n\nAlso, I am slightly of the opinion that changing this behavior of enumerated sets with unknown cardinality is a regression. I believe that if the user knows the set is finite, they can do an explicit iteration over the object and we should force them to do that as a safeguard against the infinite loops.",
    "created_at": "2016-09-08T16:12:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303520",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@kwankyu](#comment:20):
> Replying to [@tscrim](#comment:19):
> > I don't understand why you removed `_test_enumerated_set_iter_cardinality`. This is a good check that any code cannot render invalid/redundant.

> 
> It tests the method `_cardinality_from_iterator`, which is removed in the current patch. Now `.cardinality()` method is implemented instead just using `self.list()` inherited from the enumerated sets category, which itself uses the iterator of self.
> 
> So it seemed to me that the `_test_enumerated_set_iter_cardinality` lost its point with the current patch. Even the example ("let us now break...") under the test does not work. Would you try that?
> 
> But I may have missed the point of the test as intended by the original author. Then would you elaborate on that? 

It is there to test that (`X.list()` or) `list(X) == X.cardinality()`, which could break anytime a user directly implements `cardinality` (such as on the powerset of a finite set).

> > 
> > The change to Jordan algebras is incorrect. You should just let the `TypeError` (or whatever the error is from `tuple(self.algebra_generators())`) propagate up. 

> 
> With the current patch, the original code `tuple(self.algebra_generators())` falls into an infinite loop in the case that `self.algebra_generators()` is an infinite set. The change is to avoid this. I don't know a better way to deal with this... 

Previously, if we were calling `tuple(X)` when `X` was known to be infinite, then this would fail with IIRC a `NotImplementedError` (try `tuple(ZZ)`). In the example, `self.algebra_generators` is known to be infinite:

```
sage: J = JordanAlgebra(FreeAlgebra(QQ, 3, 'x,y,z'))
sage: J.algebra_generators().cardinality()
+Infinity
```
So the error is correct (although the reason was not because the family should know it is in the  infinite enumerated sets category). Thus I would propose fixing the category issue of `LazyFamily` when the keys are known to be infinite.

Also, I am slightly of the opinion that changing this behavior of enumerated sets with unknown cardinality is a regression. I believe that if the user knows the set is finite, they can do an explicit iteration over the object and we should force them to do that as a safeguard against the infinite loops.



---

archive/issue_comments_303521.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nHi Kwankyu!\n\nThanks for your much needed work on cleaning the generic code for\nenumerated sets. This code is tricky as it aims to cover many\ndifferent use cases, trying to do \"just the right thing\" in most of\nthem. It has grown from years of practice and this is all more artwork\nthan science ...\n\nReplying to [@kwankyu](#comment:20):\n> Replying to [@tscrim](#comment:19):\n> > I don't understand why you removed `_test_enumerated_set_iter_cardinality`. This is a good check that any code cannot render invalid/redundant.\n\n> It tests the method `_cardinality_from_iterator`, which is removed in the current patch. Now `.cardinality()` method is implemented instead just using `self.list()` inherited from the enumerated sets category, which itself uses the iterator of self.\n\n-1 on removing `_cardinality_from_iterator`. This methods\nintentionally supports computing the cardinality of very large sets,\nwithout paying the memory overhead of storing all the elements. It has\nalready been used for sets that just would not fit in memory.\n\n-1 on removing `_test_enumerated_set_iter_cardinality`: it does not\nonly test `_cardinality_from_iterator`, but also all cases where both\n`__iter__` and `cardinality` are implemented by an enumerated set.\n\nCheers,\n                            Nicolas",
    "created_at": "2016-09-08T16:36:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303521",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:23" align="right">comment:23</div>

Hi Kwankyu!

Thanks for your much needed work on cleaning the generic code for
enumerated sets. This code is tricky as it aims to cover many
different use cases, trying to do "just the right thing" in most of
them. It has grown from years of practice and this is all more artwork
than science ...

Replying to [@kwankyu](#comment:20):
> Replying to [@tscrim](#comment:19):
> > I don't understand why you removed `_test_enumerated_set_iter_cardinality`. This is a good check that any code cannot render invalid/redundant.

> It tests the method `_cardinality_from_iterator`, which is removed in the current patch. Now `.cardinality()` method is implemented instead just using `self.list()` inherited from the enumerated sets category, which itself uses the iterator of self.

-1 on removing `_cardinality_from_iterator`. This methods
intentionally supports computing the cardinality of very large sets,
without paying the memory overhead of storing all the elements. It has
already been used for sets that just would not fit in memory.

-1 on removing `_test_enumerated_set_iter_cardinality`: it does not
only test `_cardinality_from_iterator`, but also all cases where both
`__iter__` and `cardinality` are implemented by an enumerated set.

Cheers,
                            Nicolas



---

archive/issue_comments_303522.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@nthiery](#comment:23): \n> -1 on removing `_cardinality_from_iterator`. This methods\n> intentionally supports computing the cardinality of very large sets,\n> without paying the memory overhead of storing all the elements. It has\n> already been used for sets that just would not fit in memory.\n\nGood point. I missed this. \n\n> -1 on removing `_test_enumerated_set_iter_cardinality`: it does not\n> only test `_cardinality_from_iterator`, but also all cases where both\n> `__iter__` and `cardinality` are implemented by an enumerated set.\n\nI agree.\n\nI will recover these and also try to incorporate tscrim's criticisms. \n\nAs you will understand, it is quite tricky to accomplish this ticket's task while not failing parents relying on the existing structure...",
    "created_at": "2016-09-08T19:57:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303522",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@nthiery](#comment:23): 
> -1 on removing `_cardinality_from_iterator`. This methods
> intentionally supports computing the cardinality of very large sets,
> without paying the memory overhead of storing all the elements. It has
> already been used for sets that just would not fit in memory.

Good point. I missed this. 

> -1 on removing `_test_enumerated_set_iter_cardinality`: it does not
> only test `_cardinality_from_iterator`, but also all cases where both
> `__iter__` and `cardinality` are implemented by an enumerated set.

I agree.

I will recover these and also try to incorporate tscrim's criticisms. 

As you will understand, it is quite tricky to accomplish this ticket's task while not failing parents relying on the existing structure...



---

archive/issue_comments_303523.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@kwankyu](#comment:24):\n> As you will understand, it is quite tricky to accomplish this ticket's task while not failing parents relying on the existing structure... \n\nYou bet; that's why I am particularly grateful someone is taking up\nthe job!",
    "created_at": "2016-09-09T06:41:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303523",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@kwankyu](#comment:24):
> As you will understand, it is quite tricky to accomplish this ticket's task while not failing parents relying on the existing structure... 

You bet; that's why I am particularly grateful someone is taking up
the job!



---

archive/issue_comments_303524.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4f47a887e4a217ace18356ab68ef51d586e2766\">b4f47a8</a></td><td><code>Merged with 7.4.beta4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af2a9da159064498c4bf8bc97e3dbba13461e0ee\">af2a9da</a></td><td><code>Recover _cardinality_from_iterator and its test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4da69aaef4f91f0149c74bb710f16692ecca8fd9\">4da69aa</a></td><td><code>Remove degrading modifications to finite enumerated sets</code></td></tr></table>\n",
    "created_at": "2016-09-10T19:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303524",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4f47a887e4a217ace18356ab68ef51d586e2766">b4f47a8</a></td><td><code>Merged with 7.4.beta4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af2a9da159064498c4bf8bc97e3dbba13461e0ee">af2a9da</a></td><td><code>Recover _cardinality_from_iterator and its test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4da69aaef4f91f0149c74bb710f16692ecca8fd9">4da69aa</a></td><td><code>Remove degrading modifications to finite enumerated sets</code></td></tr></table>




---

archive/issue_comments_303525.json:
```json
{
    "body": "Changed commit from **[7121e51](https://github.com/sagemath/sagetrac-mirror/commit/7121e51c8148ebd16579239a82a8fbd63412ab61)** to **[4da69aa](https://github.com/sagemath/sagetrac-mirror/commit/4da69aaef4f91f0149c74bb710f16692ecca8fd9)**",
    "created_at": "2016-09-10T19:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303525",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7121e51](https://github.com/sagemath/sagetrac-mirror/commit/7121e51c8148ebd16579239a82a8fbd63412ab61)** to **[4da69aa](https://github.com/sagemath/sagetrac-mirror/commit/4da69aaef4f91f0149c74bb710f16692ecca8fd9)**



---

archive/issue_comments_303526.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nIn the last commits, I tried to make the footprints of the patch as light as possible while accomplishing the task at hand.",
    "created_at": "2016-09-11T01:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303526",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:27" align="right">comment:27</div>

In the last commits, I tried to make the footprints of the patch as light as possible while accomplishing the task at hand.



---

archive/issue_events_294149.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-09-11T01:54:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294149"
}
```



---

archive/issue_events_294150.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-09-11T01:54:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294150"
}
```



---

archive/issue_comments_303527.json:
```json
{
    "body": "Changed commit from **[4da69aa](https://github.com/sagemath/sagetrac-mirror/commit/4da69aaef4f91f0149c74bb710f16692ecca8fd9)** to **[c57069e](https://github.com/sagemath/sagetrac-mirror/commit/c57069e9c66ad4f28038744f370fe6aac9c574d0)**",
    "created_at": "2016-09-11T22:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303527",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4da69aa](https://github.com/sagemath/sagetrac-mirror/commit/4da69aaef4f91f0149c74bb710f16692ecca8fd9)** to **[c57069e](https://github.com/sagemath/sagetrac-mirror/commit/c57069e9c66ad4f28038744f370fe6aac9c574d0)**



---

archive/issue_comments_303528.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c57069e9c66ad4f28038744f370fe6aac9c574d0\">c57069e</a></td><td><code>Recover still relevant warning message</code></td></tr></table>\n",
    "created_at": "2016-09-11T22:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303528",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c57069e9c66ad4f28038744f370fe6aac9c574d0">c57069e</a></td><td><code>Recover still relevant warning message</code></td></tr></table>




---

archive/issue_comments_303529.json:
```json
{
    "body": "Changed commit from **[c57069e](https://github.com/sagemath/sagetrac-mirror/commit/c57069e9c66ad4f28038744f370fe6aac9c574d0)** to **[b31cfb0](https://github.com/sagemath/sagetrac-mirror/commit/b31cfb0da764918d3ef34c23aaed3ec6793cdc18)**",
    "created_at": "2016-09-12T16:54:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303529",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c57069e](https://github.com/sagemath/sagetrac-mirror/commit/c57069e9c66ad4f28038744f370fe6aac9c574d0)** to **[b31cfb0](https://github.com/sagemath/sagetrac-mirror/commit/b31cfb0da764918d3ef34c23aaed3ec6793cdc18)**



---

archive/issue_comments_303530.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b31cfb0da764918d3ef34c23aaed3ec6793cdc18\">b31cfb0</a></td><td><code>Make _cardinality_from_... cashed methods</code></td></tr></table>\n",
    "created_at": "2016-09-12T16:54:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303530",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b31cfb0da764918d3ef34c23aaed3ec6793cdc18">b31cfb0</a></td><td><code>Make _cardinality_from_... cashed methods</code></td></tr></table>




---

archive/issue_comments_303531.json:
```json
{
    "body": "Changed commit from **[b31cfb0](https://github.com/sagemath/sagetrac-mirror/commit/b31cfb0da764918d3ef34c23aaed3ec6793cdc18)** to **[0d4bc00](https://github.com/sagemath/sagetrac-mirror/commit/0d4bc007a1892df12bf8167e2274d26d1422b87f)**",
    "created_at": "2016-09-12T22:57:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303531",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b31cfb0](https://github.com/sagemath/sagetrac-mirror/commit/b31cfb0da764918d3ef34c23aaed3ec6793cdc18)** to **[0d4bc00](https://github.com/sagemath/sagetrac-mirror/commit/0d4bc007a1892df12bf8167e2274d26d1422b87f)**



---

archive/issue_comments_303532.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d4bc007a1892df12bf8167e2274d26d1422b87f\">0d4bc00</a></td><td><code>Fix some doctest failures with optional tag</code></td></tr></table>\n",
    "created_at": "2016-09-12T22:57:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303532",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d4bc007a1892df12bf8167e2274d26d1422b87f">0d4bc00</a></td><td><code>Fix some doctest failures with optional tag</code></td></tr></table>




---

archive/issue_events_294151.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-10-25T09:24:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294151"
}
```



---

archive/issue_events_294152.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-10-25T09:24:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294152"
}
```



---

archive/issue_comments_303533.json:
```json
{
    "body": "Changed commit from **[0d4bc00](https://github.com/sagemath/sagetrac-mirror/commit/0d4bc007a1892df12bf8167e2274d26d1422b87f)** to **[8c35940](https://github.com/sagemath/sagetrac-mirror/commit/8c35940dec1fd70fcb59f87efabee486a9d44015)**",
    "created_at": "2016-10-25T14:30:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303533",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0d4bc00](https://github.com/sagemath/sagetrac-mirror/commit/0d4bc007a1892df12bf8167e2274d26d1422b87f)** to **[8c35940](https://github.com/sagemath/sagetrac-mirror/commit/8c35940dec1fd70fcb59f87efabee486a9d44015)**



---

archive/issue_comments_303534.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/385f8743d705864a99ca00c741bcd887bd0101b6\">385f874</a></td><td><code>Fixes some doctest failures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d938f42faa23a2b09cc8a44cc277455b8c96779\">7d938f4</a></td><td><code>Add a doctest string for Enumerated axiom</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e149ce7893e09431656868e9fc121c011ead29f\">4e149ce</a></td><td><code>Patch a doctest failure in jordan algebra</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9572573f42aee22a680a384cc4fc8dfaca01944a\">9572573</a></td><td><code>Improve doctest coverage to attract patchbots</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec59bf5162cabacc49ee5ea069d349cbef76c478\">ec59bf5</a></td><td><code>Recover _cardinality_from_iterator and its test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eee9d5ad051babe4a6218b907d9a4e6cd9988287\">eee9d5a</a></td><td><code>Remove degrading modifications to finite enumerated sets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be6c9c8d5f53dfa1201dba7700541d1d55fbd7fd\">be6c9c8</a></td><td><code>Recover still relevant warning message</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9a67f79bd514d58056e20e9fc479ceea9de4408\">e9a67f7</a></td><td><code>Make _cardinality_from_... cashed methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10c757dfff986636a26b5e7af9d1e0bb3d9f8053\">10c757d</a></td><td><code>Fix some doctest failures with optional tag</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c35940dec1fd70fcb59f87efabee486a9d44015\">8c35940</a></td><td><code>Fix some docstring failures and error messages</code></td></tr></table>\n",
    "created_at": "2016-10-25T14:30:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303534",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/385f8743d705864a99ca00c741bcd887bd0101b6">385f874</a></td><td><code>Fixes some doctest failures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d938f42faa23a2b09cc8a44cc277455b8c96779">7d938f4</a></td><td><code>Add a doctest string for Enumerated axiom</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e149ce7893e09431656868e9fc121c011ead29f">4e149ce</a></td><td><code>Patch a doctest failure in jordan algebra</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9572573f42aee22a680a384cc4fc8dfaca01944a">9572573</a></td><td><code>Improve doctest coverage to attract patchbots</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec59bf5162cabacc49ee5ea069d349cbef76c478">ec59bf5</a></td><td><code>Recover _cardinality_from_iterator and its test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eee9d5ad051babe4a6218b907d9a4e6cd9988287">eee9d5a</a></td><td><code>Remove degrading modifications to finite enumerated sets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be6c9c8d5f53dfa1201dba7700541d1d55fbd7fd">be6c9c8</a></td><td><code>Recover still relevant warning message</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9a67f79bd514d58056e20e9fc479ceea9de4408">e9a67f7</a></td><td><code>Make _cardinality_from_... cashed methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10c757dfff986636a26b5e7af9d1e0bb3d9f8053">10c757d</a></td><td><code>Fix some doctest failures with optional tag</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c35940dec1fd70fcb59f87efabee486a9d44015">8c35940</a></td><td><code>Fix some docstring failures and error messages</code></td></tr></table>




---

archive/issue_events_294153.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-10-25T21:20:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294153"
}
```



---

archive/issue_events_294154.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-10-25T21:20:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294154"
}
```



---

archive/issue_comments_303535.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d20e9fc0e4f6dd68bedcf8d9ce0650af6e87617a\">d20e9fc</a></td><td><code>Merge Sage 7.5.beta1 into trac20902</code></td></tr></table>\n",
    "created_at": "2016-11-03T08:57:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303535",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d20e9fc0e4f6dd68bedcf8d9ce0650af6e87617a">d20e9fc</a></td><td><code>Merge Sage 7.5.beta1 into trac20902</code></td></tr></table>




---

archive/issue_comments_303536.json:
```json
{
    "body": "Changed commit from **[8c35940](https://github.com/sagemath/sagetrac-mirror/commit/8c35940dec1fd70fcb59f87efabee486a9d44015)** to **[d20e9fc](https://github.com/sagemath/sagetrac-mirror/commit/d20e9fc0e4f6dd68bedcf8d9ce0650af6e87617a)**",
    "created_at": "2016-11-03T08:57:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303536",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8c35940](https://github.com/sagemath/sagetrac-mirror/commit/8c35940dec1fd70fcb59f87efabee486a9d44015)** to **[d20e9fc](https://github.com/sagemath/sagetrac-mirror/commit/d20e9fc0e4f6dd68bedcf8d9ce0650af6e87617a)**



---

archive/issue_comments_303537.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nFrom a quick look at things, I don't like all of the `@cached_method`'s on `__len__` because `cardinality` should be quick to compute or `list` is (generically) cached (and very fast to get the length of).\n\nYou should use <code>\\`\\`self\\`\\`</code> since it is essentially code.\n\nThis part of [comment:22](#comment:22) is still true:\n> Also, I am slightly of the opinion that changing this behavior of enumerated sets with unknown cardinality is a regression. I believe that if the user knows the set is finite, they can do an explicit iteration over the object and we should force them to do that as a safeguard against the infinite loops. \n\nThinking about it a bit more, I am more convinced that this is a definite regression because it can cause infinite loops in cases that it previously did not.",
    "created_at": "2016-11-03T13:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303537",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:35" align="right">comment:35</div>

From a quick look at things, I don't like all of the `@cached_method`'s on `__len__` because `cardinality` should be quick to compute or `list` is (generically) cached (and very fast to get the length of).

You should use <code>\`\`self\`\`</code> since it is essentially code.

This part of [comment:22](#comment:22) is still true:
> Also, I am slightly of the opinion that changing this behavior of enumerated sets with unknown cardinality is a regression. I believe that if the user knows the set is finite, they can do an explicit iteration over the object and we should force them to do that as a safeguard against the infinite loops. 

Thinking about it a bit more, I am more convinced that this is a definite regression because it can cause infinite loops in cases that it previously did not.



---

archive/issue_comments_303538.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa2fee9580ccbdc69be923f5ffde72ec18e0d4b6\">aa2fee9</a></td><td><code>Removed unnecessary cached_methods</code></td></tr></table>\n",
    "created_at": "2016-11-03T14:49:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303538",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa2fee9580ccbdc69be923f5ffde72ec18e0d4b6">aa2fee9</a></td><td><code>Removed unnecessary cached_methods</code></td></tr></table>




---

archive/issue_comments_303539.json:
```json
{
    "body": "Changed commit from **[d20e9fc](https://github.com/sagemath/sagetrac-mirror/commit/d20e9fc0e4f6dd68bedcf8d9ce0650af6e87617a)** to **[aa2fee9](https://github.com/sagemath/sagetrac-mirror/commit/aa2fee9580ccbdc69be923f5ffde72ec18e0d4b6)**",
    "created_at": "2016-11-03T14:49:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303539",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d20e9fc](https://github.com/sagemath/sagetrac-mirror/commit/d20e9fc0e4f6dd68bedcf8d9ce0650af6e87617a)** to **[aa2fee9](https://github.com/sagemath/sagetrac-mirror/commit/aa2fee9580ccbdc69be923f5ffde72ec18e0d4b6)**



---

archive/issue_comments_303540.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@tscrim](#comment:35):\n> This part of [comment:22](#comment:22) is still true:\n> > Also, I am slightly of the opinion that changing this behavior of enumerated sets with unknown cardinality is a regression. I believe that if the user knows the set is finite, they can do an explicit iteration over the object and we should force them to do that as a safeguard against the infinite loops. \n\n> \n> Thinking about it a bit more, I am more convinced that this is a definite regression because it can cause infinite loops in cases that it previously did not.\n\nI don't really understand exactly what change you mean. Would you help me by pinpointing the method where the change was introduced? And a concrete example will also help.. Perhaps I forgot something that I myself have done.",
    "created_at": "2016-11-03T15:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303540",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@tscrim](#comment:35):
> This part of [comment:22](#comment:22) is still true:
> > Also, I am slightly of the opinion that changing this behavior of enumerated sets with unknown cardinality is a regression. I believe that if the user knows the set is finite, they can do an explicit iteration over the object and we should force them to do that as a safeguard against the infinite loops. 

> 
> Thinking about it a bit more, I am more convinced that this is a definite regression because it can cause infinite loops in cases that it previously did not.

I don't really understand exactly what change you mean. Would you help me by pinpointing the method where the change was introduced? And a concrete example will also help.. Perhaps I forgot something that I myself have done.



---

archive/issue_comments_303541.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@tscrim](#comment:35):\n> Thinking about it a bit more, I am more convinced that this is a definite regression because it can cause infinite loops in cases that it previously did not\n\nI now see that you meant catching `TypeError` in the list method of enumerated sets.",
    "created_at": "2016-11-03T15:28:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303541",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@tscrim](#comment:35):
> Thinking about it a bit more, I am more convinced that this is a definite regression because it can cause infinite loops in cases that it previously did not

I now see that you meant catching `TypeError` in the list method of enumerated sets.



---

archive/issue_comments_303542.json:
```json
{
    "body": "Changed commit from **[aa2fee9](https://github.com/sagemath/sagetrac-mirror/commit/aa2fee9580ccbdc69be923f5ffde72ec18e0d4b6)** to **[2ce8115](https://github.com/sagemath/sagetrac-mirror/commit/2ce8115a0bcab799799cdcff99bb2931d6888a19)**",
    "created_at": "2016-11-03T22:44:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303542",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[aa2fee9](https://github.com/sagemath/sagetrac-mirror/commit/aa2fee9580ccbdc69be923f5ffde72ec18e0d4b6)** to **[2ce8115](https://github.com/sagemath/sagetrac-mirror/commit/2ce8115a0bcab799799cdcff99bb2931d6888a19)**



---

archive/issue_comments_303543.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e27ecc64e34f2e802422e4c6b50a1ba9f899f02\">1e27ecc</a></td><td><code>Removed one more cached_method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f32238f1ea846b458ef135a395e1a56a2d8bf801\">f32238f</a></td><td><code>Fix doctest failures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ce8115a0bcab799799cdcff99bb2931d6888a19\">2ce8115</a></td><td><code>Fix docstrings and changed TypeError</code></td></tr></table>\n",
    "created_at": "2016-11-03T22:44:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303543",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e27ecc64e34f2e802422e4c6b50a1ba9f899f02">1e27ecc</a></td><td><code>Removed one more cached_method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f32238f1ea846b458ef135a395e1a56a2d8bf801">f32238f</a></td><td><code>Fix doctest failures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ce8115a0bcab799799cdcff99bb2931d6888a19">2ce8115</a></td><td><code>Fix docstrings and changed TypeError</code></td></tr></table>




---

archive/issue_events_294155.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-11-03T22:49:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294155"
}
```



---

archive/issue_events_294156.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-11-03T22:49:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294156"
}
```



---

archive/issue_comments_303544.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nI made changes reflecting Travis' comments, perhaps except the last one.",
    "created_at": "2016-11-03T22:49:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303544",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:40" align="right">comment:40</div>

I made changes reflecting Travis' comments, perhaps except the last one.



---

archive/issue_comments_303545.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nThe problem I have is if a set `X` has unknown cardinality, then previously, if you call `len(X)`, it would error out to prevent you from entering into an infinite loop. If I understand the current code, it will not do that, and instead try to compute the length (which generically would try `X.list()`) and run into that infinite loop if `X` was indeed infinite.\n\nBefore:\n\n```sage\nsage: R = RecursivelyEnumeratedSet([1], lambda a: [a+1])\nsage: R.category()\nCategory of enumerated sets\nsage: R.list()\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n...\nNotImplementedError: unknown cardinality\n```\nWith the branch:\n\n```sage\nsage: R = RecursivelyEnumeratedSet([1], lambda a: [a+1])\nsage: R.list()  # Still waiting...\n```\nActually, `__len__` is defined in `RecursivelyEnumeratedSet` to return `None`, but the same issue would occur if it was not.",
    "created_at": "2016-11-04T14:22:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303545",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:41" align="right">comment:41</div>

The problem I have is if a set `X` has unknown cardinality, then previously, if you call `len(X)`, it would error out to prevent you from entering into an infinite loop. If I understand the current code, it will not do that, and instead try to compute the length (which generically would try `X.list()`) and run into that infinite loop if `X` was indeed infinite.

Before:

```sage
sage: R = RecursivelyEnumeratedSet([1], lambda a: [a+1])
sage: R.category()
Category of enumerated sets
sage: R.list()
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
...
NotImplementedError: unknown cardinality
```
With the branch:

```sage
sage: R = RecursivelyEnumeratedSet([1], lambda a: [a+1])
sage: R.list()  # Still waiting...
```
Actually, `__len__` is defined in `RecursivelyEnumeratedSet` to return `None`, but the same issue would occur if it was not.



---

archive/issue_comments_303546.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@tscrim](#comment:41):\n> The problem I have is if a set `X` has unknown cardinality, then previously, if you call `len(X)`, it would error out to prevent you from entering into an infinite loop. If I understand the current code, it will not do that, and instead try to compute the length (which generically would try `X.list()`) and run into that infinite loop if `X` was indeed infinite.\n\nThe current code for `list` method and `len` method for enumerated sets depend on `cardinality`. If cardinality is not defined, it just tries to list all elements (as the doc says). So it falls into an infinite loop when the set is actually infinite, as you said and shown by your example. An easy solution  would be to list elements only when the cardinality is known to be finite. I am now experimenting with the solution to see if it breaks other parts of Sage...",
    "created_at": "2016-11-04T15:45:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303546",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@tscrim](#comment:41):
> The problem I have is if a set `X` has unknown cardinality, then previously, if you call `len(X)`, it would error out to prevent you from entering into an infinite loop. If I understand the current code, it will not do that, and instead try to compute the length (which generically would try `X.list()`) and run into that infinite loop if `X` was indeed infinite.

The current code for `list` method and `len` method for enumerated sets depend on `cardinality`. If cardinality is not defined, it just tries to list all elements (as the doc says). So it falls into an infinite loop when the set is actually infinite, as you said and shown by your example. An easy solution  would be to list elements only when the cardinality is known to be finite. I am now experimenting with the solution to see if it breaks other parts of Sage...



---

archive/issue_comments_303547.json:
```json
{
    "body": "Changed commit from **[2ce8115](https://github.com/sagemath/sagetrac-mirror/commit/2ce8115a0bcab799799cdcff99bb2931d6888a19)** to **[417a2f6](https://github.com/sagemath/sagetrac-mirror/commit/417a2f6745a57ef807c45e3864e025994772df84)**",
    "created_at": "2016-11-04T17:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303547",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2ce8115](https://github.com/sagemath/sagetrac-mirror/commit/2ce8115a0bcab799799cdcff99bb2931d6888a19)** to **[417a2f6](https://github.com/sagemath/sagetrac-mirror/commit/417a2f6745a57ef807c45e3864e025994772df84)**



---

archive/issue_comments_303548.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/417a2f6745a57ef807c45e3864e025994772df84\">417a2f6</a></td><td><code>Raise an exception for unknown cardinality</code></td></tr></table>\n",
    "created_at": "2016-11-04T17:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303548",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/417a2f6745a57ef807c45e3864e025994772df84">417a2f6</a></td><td><code>Raise an exception for unknown cardinality</code></td></tr></table>




---

archive/issue_events_294157.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-11-04T17:36:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294157"
}
```



---

archive/issue_events_294158.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-11-04T17:36:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294158"
}
```



---

archive/issue_comments_303549.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nSome little things:\n- `cashed` -> `cached`\n- Add back in the descriptive error message of \"unknown cardinality\"\n- This needs to be changed:\n\n  ```diff\n  -If ``x`` is known to be infinite, then an exception is raised.\n  +If ``x`` is not known to be finite, then an exception is raised.\n  ```\n- I don't see the point of `__len__` in `subword_complex.py`. If it is necessary, then it does not need to be cached and the `EXAMPLES::` needs a blankline after it.\n- Same for `abelian_group.py`.\n- Same for `libgap_mixin.py`.\n- For `fgp_module.py`, the `EXAMPLES::` block and you should use <code>\\`\\`self\\`\\`</code> (although isn't this just `_list_from_iterator`?).\n- In `homset.py`, use <code>\\`\\`self\\`\\`</code>.\n- Same for `parent.pyx`.",
    "created_at": "2016-11-04T18:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303549",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:45" align="right">comment:45</div>

Some little things:
- `cashed` -> `cached`
- Add back in the descriptive error message of "unknown cardinality"
- This needs to be changed:

  ```diff
  -If ``x`` is known to be infinite, then an exception is raised.
  +If ``x`` is not known to be finite, then an exception is raised.
  ```
- I don't see the point of `__len__` in `subword_complex.py`. If it is necessary, then it does not need to be cached and the `EXAMPLES::` needs a blankline after it.
- Same for `abelian_group.py`.
- Same for `libgap_mixin.py`.
- For `fgp_module.py`, the `EXAMPLES::` block and you should use <code>\`\`self\`\`</code> (although isn't this just `_list_from_iterator`?).
- In `homset.py`, use <code>\`\`self\`\`</code>.
- Same for `parent.pyx`.



---

archive/issue_comments_303550.json:
```json
{
    "body": "Changed commit from **[417a2f6](https://github.com/sagemath/sagetrac-mirror/commit/417a2f6745a57ef807c45e3864e025994772df84)** to **[fb1c079](https://github.com/sagemath/sagetrac-mirror/commit/fb1c079703e990840750bca94933c2c2e871d6de)**",
    "created_at": "2016-11-04T18:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303550",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[417a2f6](https://github.com/sagemath/sagetrac-mirror/commit/417a2f6745a57ef807c45e3864e025994772df84)** to **[fb1c079](https://github.com/sagemath/sagetrac-mirror/commit/fb1c079703e990840750bca94933c2c2e871d6de)**



---

archive/issue_comments_303551.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb1c079703e990840750bca94933c2c2e871d6de\">fb1c079</a></td><td><code>Minor fixes of docstrings</code></td></tr></table>\n",
    "created_at": "2016-11-04T18:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303551",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb1c079703e990840750bca94933c2c2e871d6de">fb1c079</a></td><td><code>Minor fixes of docstrings</code></td></tr></table>




---

archive/issue_comments_303552.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@tscrim](#comment:45):\n> Some little things:\n> - `cashed` -> `cached`\n\nDone.\n\n> - Add back in the descriptive error message of \"unknown cardinality\"\n\nIsn't this already there? Or do you mean somewhere else?\n\n> - This needs to be changed:\n> \n>   ```diff\n>   -If ``x`` is known to be infinite, then an exception is raised.\n>   +If ``x`` is not known to be finite, then an exception is raised.\n>   ```\n\nDone.\n\n> - I don't see the point of `__len__` in `subword_complex.py`.\n\nThis would not be necessary if `subword_complex` are in enumerated sets category (the same for below), but this ticket is not to put parents into proper category. This and removing unnecesary `__len__` would be tasks of one who knows `subword_complex` well. \n\n> - If it is necessary, then it does not need to be cached and the `EXAMPLES::` needs a blankline after it.\n> - Same for `abelian_group.py`.\n> - Same for `libgap_mixin.py`.\n> - For `fgp_module.py`, the `EXAMPLES::` block and you should use <code>\\`\\`self\\`\\`</code> (although isn't this just `_list_from_iterator`?).\n> - In `homset.py`, use <code>\\`\\`self\\`\\`</code>.\n> - Same for `parent.pyx`.\n\nDone.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb1c079703e990840750bca94933c2c2e871d6de\">fb1c079</a></td><td><code>Minor fixes of docstrings</code></td></tr></table>\n",
    "created_at": "2016-11-04T18:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303552",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@tscrim](#comment:45):
> Some little things:
> - `cashed` -> `cached`

Done.

> - Add back in the descriptive error message of "unknown cardinality"

Isn't this already there? Or do you mean somewhere else?

> - This needs to be changed:
> 
>   ```diff
>   -If ``x`` is known to be infinite, then an exception is raised.
>   +If ``x`` is not known to be finite, then an exception is raised.
>   ```

Done.

> - I don't see the point of `__len__` in `subword_complex.py`.

This would not be necessary if `subword_complex` are in enumerated sets category (the same for below), but this ticket is not to put parents into proper category. This and removing unnecesary `__len__` would be tasks of one who knows `subword_complex` well. 

> - If it is necessary, then it does not need to be cached and the `EXAMPLES::` needs a blankline after it.
> - Same for `abelian_group.py`.
> - Same for `libgap_mixin.py`.
> - For `fgp_module.py`, the `EXAMPLES::` block and you should use <code>\`\`self\`\`</code> (although isn't this just `_list_from_iterator`?).
> - In `homset.py`, use <code>\`\`self\`\`</code>.
> - Same for `parent.pyx`.

Done.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb1c079703e990840750bca94933c2c2e871d6de">fb1c079</a></td><td><code>Minor fixes of docstrings</code></td></tr></table>




---

archive/issue_comments_303553.json:
```json
{
    "body": "Changed branch from **[u/klee/20902](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/20902)** to **[public/categories/move_list_to_enumerated_sets-20902](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/move_list_to_enumerated_sets-20902)**",
    "created_at": "2016-11-05T17:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303553",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/klee/20902](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/20902)** to **[public/categories/move_list_to_enumerated_sets-20902](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/move_list_to_enumerated_sets-20902)**



---

archive/issue_comments_303554.json:
```json
{
    "body": "Changed commit from **[fb1c079](https://github.com/sagemath/sagetrac-mirror/commit/fb1c079703e990840750bca94933c2c2e871d6de)** to **[4179fe4](https://github.com/sagemath/sagetrac-mirror/commit/4179fe4b05a8fba63d2ae189a50c1fb2a105e913)**",
    "created_at": "2016-11-05T17:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303554",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[fb1c079](https://github.com/sagemath/sagetrac-mirror/commit/fb1c079703e990840750bca94933c2c2e871d6de)** to **[4179fe4](https://github.com/sagemath/sagetrac-mirror/commit/4179fe4b05a8fba63d2ae189a50c1fb2a105e913)**



---

archive/issue_comments_303555.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@kwankyu](#comment:47):\n> Replying to [@tscrim](#comment:45):\n> > - Add back in the descriptive error message of \"unknown cardinality\"\n\n> \n> Isn't this already there? Or do you mean somewhere else?\n\nSorry, I had misread this diff:\n\n```diff\n+                sage: R.<t,p> = QQ[]\n+                sage: Q = R.quotient(t^2-t+1)\n+                sage: Q.is_finite()\n                 Traceback (most recent call last):\n                 ...\n-                NotImplementedError: unknown cardinality\n+                NotImplementedError\n```\n\n> > - I don't see the point of `__len__` in `subword_complex.py`.\n\n> \n> This would not be necessary if `subword_complex` are in enumerated sets category (the same for below), but this ticket is not to put parents into proper category. This and removing unnecesary `__len__` would be tasks of one who knows `subword_complex` well. \n\nThe issue is that `SubwordComplex` is a `SimplicialComplex`, and while the latter is not an enumerated set, the former considers itself to be. However, `SimplicialComplex` does not take a category as input. So I added this and put `SubwordComplex` in the enumerated finite simplicial complexes category.\n\nI also pushed some other improvements to the abelian groups and the libgap mixin groups. Although infinite abelian groups do not iterate properly, but that is a bug for another ticket.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5a83999f39e01db2c3d4f0a506ef3276b0af935\">d5a8399</a></td><td><code>Making subword complex be an enumerated set.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4179fe4b05a8fba63d2ae189a50c1fb2a105e913\">4179fe4</a></td><td><code>Fixing some things exposed in abelian groups and libgap mixin.</code></td></tr></table>\n",
    "created_at": "2016-11-05T17:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303555",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@kwankyu](#comment:47):
> Replying to [@tscrim](#comment:45):
> > - Add back in the descriptive error message of "unknown cardinality"

> 
> Isn't this already there? Or do you mean somewhere else?

Sorry, I had misread this diff:

```diff
+                sage: R.<t,p> = QQ[]
+                sage: Q = R.quotient(t^2-t+1)
+                sage: Q.is_finite()
                 Traceback (most recent call last):
                 ...
-                NotImplementedError: unknown cardinality
+                NotImplementedError
```

> > - I don't see the point of `__len__` in `subword_complex.py`.

> 
> This would not be necessary if `subword_complex` are in enumerated sets category (the same for below), but this ticket is not to put parents into proper category. This and removing unnecesary `__len__` would be tasks of one who knows `subword_complex` well. 

The issue is that `SubwordComplex` is a `SimplicialComplex`, and while the latter is not an enumerated set, the former considers itself to be. However, `SimplicialComplex` does not take a category as input. So I added this and put `SubwordComplex` in the enumerated finite simplicial complexes category.

I also pushed some other improvements to the abelian groups and the libgap mixin groups. Although infinite abelian groups do not iterate properly, but that is a bug for another ticket.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5a83999f39e01db2c3d4f0a506ef3276b0af935">d5a8399</a></td><td><code>Making subword complex be an enumerated set.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4179fe4b05a8fba63d2ae189a50c1fb2a105e913">4179fe4</a></td><td><code>Fixing some things exposed in abelian groups and libgap mixin.</code></td></tr></table>




---

archive/issue_comments_303556.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2016-11-05T17:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303556",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_303557.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@tscrim](#comment:48):\n> The issue is that `SubwordComplex` is a `SimplicialComplex`, and while the latter is not an enumerated set, the former considers itself to be. However, `SimplicialComplex` does not take a category as input. So I added this and put `SubwordComplex` in the enumerated finite simplicial complexes category.\n> \n> I also pushed some other improvements to the abelian groups and the libgap mixin groups. Although infinite abelian groups do not iterate properly, but that is a bug for another ticket.\n\nThe patch looks good to me. Thank you.",
    "created_at": "2016-11-05T19:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303557",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@tscrim](#comment:48):
> The issue is that `SubwordComplex` is a `SimplicialComplex`, and while the latter is not an enumerated set, the former considers itself to be. However, `SimplicialComplex` does not take a category as input. So I added this and put `SubwordComplex` in the enumerated finite simplicial complexes category.
> 
> I also pushed some other improvements to the abelian groups and the libgap mixin groups. Although infinite abelian groups do not iterate properly, but that is a bug for another ticket.

The patch looks good to me. Thank you.



---

archive/issue_comments_303558.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nIs that a positive review?",
    "created_at": "2016-11-06T02:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303558",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:50" align="right">comment:50</div>

Is that a positive review?



---

archive/issue_comments_303559.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@tscrim](#comment:50):\n> Is that a positive review?\n\nYes, to your portion of the code.",
    "created_at": "2016-11-06T07:08:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303559",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@tscrim](#comment:50):
> Is that a positive review?

Yes, to your portion of the code.



---

archive/issue_comments_303560.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bdbd034de6d3ebd7d922bcc68165ce18c2112888\">bdbd034</a></td><td><code>Fixing some doctests due to changes of categories.</code></td></tr></table>\n",
    "created_at": "2016-11-06T14:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303560",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bdbd034de6d3ebd7d922bcc68165ce18c2112888">bdbd034</a></td><td><code>Fixing some doctests due to changes of categories.</code></td></tr></table>




---

archive/issue_comments_303561.json:
```json
{
    "body": "Changed commit from **[4179fe4](https://github.com/sagemath/sagetrac-mirror/commit/4179fe4b05a8fba63d2ae189a50c1fb2a105e913)** to **[bdbd034](https://github.com/sagemath/sagetrac-mirror/commit/bdbd034de6d3ebd7d922bcc68165ce18c2112888)**",
    "created_at": "2016-11-06T14:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303561",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4179fe4](https://github.com/sagemath/sagetrac-mirror/commit/4179fe4b05a8fba63d2ae189a50c1fb2a105e913)** to **[bdbd034](https://github.com/sagemath/sagetrac-mirror/commit/bdbd034de6d3ebd7d922bcc68165ce18c2112888)**



---

archive/issue_comments_303562.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nEverything else looks good. I just did some trivial fixes from the patchbot report, so I'm allowing myself to set a positive review.",
    "created_at": "2016-11-06T14:43:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303562",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:53" align="right">comment:53</div>

Everything else looks good. I just did some trivial fixes from the patchbot report, so I'm allowing myself to set a positive review.



---

archive/issue_events_294159.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-11-06T14:43:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294159"
}
```



---

archive/issue_events_294160.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-11-06T14:43:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294160"
}
```



---

archive/issue_events_294161.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-07T18:27:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294161"
}
```



---

archive/issue_events_294162.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f1bc00df0d74d8158bb93a53dc2c4a27f48bee93",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-11-07T18:27:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20902#event-294162"
}
```



---

archive/issue_comments_303563.json:
```json
{
    "body": "Changed branch from **[public/categories/move_list_to_enumerated_sets-20902](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/move_list_to_enumerated_sets-20902)** to **[bdbd034](https://github.com/sagemath/sagetrac-mirror/commit/bdbd034de6d3ebd7d922bcc68165ce18c2112888)**",
    "created_at": "2016-11-07T18:27:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20902",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20902#issuecomment-303563",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/categories/move_list_to_enumerated_sets-20902](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/move_list_to_enumerated_sets-20902)** to **[bdbd034](https://github.com/sagemath/sagetrac-mirror/commit/bdbd034de6d3ebd7d922bcc68165ce18c2112888)**
