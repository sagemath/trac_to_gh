# Issue 20176: Document ellipsis in doctests

archive/issues_019939.json:
```json
{
    "body": "The developer's manual needs to be updated to include an explanation of the ellipsis in doctests. For your information: The ellipsis is part of Python's doctest framework. In Python it's not enabled by default, but in Sage it is.\n\nBranch/Commit: 5694f4ee95ce733d7b30619f23fcd17177194207\n\nReviewer: Daniel Krenn\n\nAuthor: Kwankyu Lee\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20176\n\n",
    "closed_at": "2016-03-23T23:55:01Z",
    "created_at": "2016-03-08T08:31:38Z",
    "labels": [
        "component: documentation",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "Document ellipsis in doctests",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20176",
    "user": "https://github.com/kwankyu"
}
```
The developer's manual needs to be updated to include an explanation of the ellipsis in doctests. For your information: The ellipsis is part of Python's doctest framework. In Python it's not enabled by default, but in Sage it is.

Branch/Commit: 5694f4ee95ce733d7b30619f23fcd17177194207

Reviewer: Daniel Krenn

Author: Kwankyu Lee

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20176





---

archive/issue_comments_360024.json:
```json
{
    "body": "Replying to [ticket:20176 klee]:\n> We need a new magic comment\n> \n> # optional - latex\n> \n> for doctests that require latex installed on the system.\n> \n> In addition, the developer's manual needs to be updated to include an explanation of the ellipsis in doctests. For your information: The ellipsis is part of Python's doctest framework. In Python it's not enabled by default, but in Sage it is. \n\n\nMaybe also adding a link to the corresponding part of the Python manual.\n\nThe two issues should be split on two tickets.",
    "created_at": "2016-03-08T08:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360024",
    "user": "https://github.com/dkrenn"
}
```

Replying to [ticket:20176 klee]:
> We need a new magic comment
> 
> # optional - latex
> 
> for doctests that require latex installed on the system.
> 
> In addition, the developer's manual needs to be updated to include an explanation of the ellipsis in doctests. For your information: The ellipsis is part of Python's doctest framework. In Python it's not enabled by default, but in Sage it is. 


Maybe also adding a link to the corresponding part of the Python manual.

The two issues should be split on two tickets.



---

archive/issue_events_070162.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "rename": {
        "from": "New magic comment for doctest \"# optional - latex\"",
        "to": "Document ellipsis in doctests"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20176#event-70162"
}
```



---

archive/issue_comments_360025.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1 @@\n-We need a new magic comment\n-\n-# optional - latex\n-\n-for doctests that require latex installed on the system.\n-\n-In addition, the developer's manual needs to be updated to include an explanation of the ellipsis in doctests. For your information: The ellipsis is part of Python's doctest framework. In Python it's not enabled by default, but in Sage it is. \n+The developer's manual needs to be updated to include an explanation of the ellipsis in doctests. For your information: The ellipsis is part of Python's doctest framework. In Python it's not enabled by default, but in Sage it is.\n``````\n",
    "created_at": "2016-03-08T08:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360025",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1 @@
-We need a new magic comment
-
-# optional - latex
-
-for doctests that require latex installed on the system.
-
-In addition, the developer's manual needs to be updated to include an explanation of the ellipsis in doctests. For your information: The ellipsis is part of Python's doctest framework. In Python it's not enabled by default, but in Sage it is. 
+The developer's manual needs to be updated to include an explanation of the ellipsis in doctests. For your information: The ellipsis is part of Python's doctest framework. In Python it's not enabled by default, but in Sage it is.
``````




---

archive/issue_comments_360026.json:
```json
{
    "body": "<a id='comment:2'></a>\nYou can already use `# optional - latex` right now.",
    "created_at": "2016-03-08T08:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360026",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
You can already use `# optional - latex` right now.



---

archive/issue_comments_360027.json:
```json
{
    "body": "<a id='comment:3'></a>\nRegarding `latex`, we could consider trying to detect whether the system has LaTeX installed and so whether to run those doctests automatically. I don't want to do this for every non-Sage piece of software mentioned in an optional flag, but maybe LaTeX deserves a special case? I'm not sure.",
    "created_at": "2016-03-08T16:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360027",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'></a>
Regarding `latex`, we could consider trying to detect whether the system has LaTeX installed and so whether to run those doctests automatically. I don't want to do this for every non-Sage piece of software mentioned in an optional flag, but maybe LaTeX deserves a special case? I'm not sure.



---

archive/issue_comments_360028.json:
```json
{
    "body": "<a id='comment:4'></a>\nFor the record, I'm thinking of something like\n\n```diff\ndiff --git a/src/sage/doctest/control.py b/src/sage/doctest/control.py\nindex 6a49e68..79567db 100644\n--- a/src/sage/doctest/control.py\n+++ b/src/sage/doctest/control.py\n@@ -259,6 +259,10 @@ class DocTestController(SageObject):\n                         if versions[0] == versions[1]:\n                             options.optional.add(pkg)\n \n+                from sage.misc.latex import have_latex\n+                if have_latex():\n+                    options.optional.add('latex')\n+\n                 # Check that all tags are valid\n                 for o in options.optional:\n                     if not optionaltag_regex.search(o):\n```",
    "created_at": "2016-03-09T06:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360028",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
For the record, I'm thinking of something like

```diff
diff --git a/src/sage/doctest/control.py b/src/sage/doctest/control.py
index 6a49e68..79567db 100644
--- a/src/sage/doctest/control.py
+++ b/src/sage/doctest/control.py
@@ -259,6 +259,10 @@ class DocTestController(SageObject):
                         if versions[0] == versions[1]:
                             options.optional.add(pkg)
 
+                from sage.misc.latex import have_latex
+                if have_latex():
+                    options.optional.add('latex')
+
                 # Check that all tags are valid
                 for o in options.optional:
                     if not optionaltag_regex.search(o):
```



---

archive/issue_comments_360029.json:
```json
{
    "body": "<a id='comment:5'></a>\nSee #13540 and #18904 for general discussions about automatically detecting optional flags.",
    "created_at": "2016-03-09T07:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360029",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
See #13540 and #18904 for general discussions about automatically detecting optional flags.



---

archive/issue_comments_360030.json:
```json
{
    "body": "<a id='comment:6'></a>\nAnd now #20182, apparently.",
    "created_at": "2016-03-09T15:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360030",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
And now #20182, apparently.



---

archive/issue_comments_360031.json:
```json
{
    "body": "<a id='comment:7'></a>\nWow, you are so fast! Thank you.",
    "created_at": "2016-03-09T16:02:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360031",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:7'></a>
Wow, you are so fast! Thank you.



---

archive/issue_comments_360032.json:
```json
{
    "body": "<a id='comment:8'></a>\nNew commits:\n|                                                                                                                                          |                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[9477209](https://github.com/sagemath/sagetrac-mirror/commit/9477209496359a48efb9592b6ec9e7a306567ff8)|`Remark on the ellipsis marker`|\n|[b4456b1](https://github.com/sagemath/sagetrac-mirror/commit/b4456b1047adff22bd4e5b6c56425933f89e3894)|`Corrected the link to Python's manual`|",
    "created_at": "2016-03-17T06:08:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360032",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:8'></a>
New commits:
|                                                                                                                                          |                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[9477209](https://github.com/sagemath/sagetrac-mirror/commit/9477209496359a48efb9592b6ec9e7a306567ff8)|`Remark on the ellipsis marker`|
|[b4456b1](https://github.com/sagemath/sagetrac-mirror/commit/b4456b1047adff22bd4e5b6c56425933f89e3894)|`Corrected the link to Python's manual`|



---

archive/issue_comments_360033.json:
```json
{
    "body": "Changing branch from \"\" to \"public/20176\"",
    "created_at": "2016-03-17T06:08:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360033",
    "user": "https://github.com/kwankyu"
}
```

Changing branch from "" to "public/20176"



---

archive/issue_comments_360034.json:
```json
{
    "body": "Changing commit from \"\" to \"b4456b1047adff22bd4e5b6c56425933f89e3894\"",
    "created_at": "2016-03-17T06:08:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360034",
    "user": "https://github.com/kwankyu"
}
```

Changing commit from "" to "b4456b1047adff22bd4e5b6c56425933f89e3894"



---

archive/issue_comments_360035.json:
```json
{
    "body": "Changing author from \"\" to \"Kwankyu Lee\"",
    "created_at": "2016-03-17T06:10:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360035",
    "user": "https://github.com/kwankyu"
}
```

Changing author from "" to "Kwankyu Lee"



---

archive/issue_comments_360036.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-03-17T06:10:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360036",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_360037.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-17T07:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360037",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_360038.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Daniel Krenn\"",
    "created_at": "2016-03-17T07:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360038",
    "user": "https://github.com/dkrenn"
}
```

Changing reviewer from "" to "Daniel Krenn"



---

archive/issue_comments_360039.json:
```json
{
    "body": "<a id='comment:10'></a>\nSomething like `:python:`RuntimeError<library/exceptions.html#exceptions.RuntimeError>`` should work for Python-links.\n\nChanging `ellipsis marker (...)`  to `ellipsis marker ``...``` would (IMHO) make it clearer what the actual marker is, since it is typeset as code (tt-font). What do you think?",
    "created_at": "2016-03-17T07:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360039",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:10'></a>
Something like `:python:`RuntimeError<library/exceptions.html#exceptions.RuntimeError>`` should work for Python-links.

Changing `ellipsis marker (...)`  to `ellipsis marker ``...``` would (IMHO) make it clearer what the actual marker is, since it is typeset as code (tt-font). What do you think?



---

archive/issue_comments_360040.json:
```json
{
    "body": "Changing commit from \"b4456b1047adff22bd4e5b6c56425933f89e3894\" to \"57bfdee4eec37a346ed6d05d262c919087f8d3da\"",
    "created_at": "2016-03-18T03:00:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360040",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b4456b1047adff22bd4e5b6c56425933f89e3894" to "57bfdee4eec37a346ed6d05d262c919087f8d3da"



---

archive/issue_comments_360041.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[57bfdee](https://github.com/sagemath/sagetrac-mirror/commit/57bfdee4eec37a346ed6d05d262c919087f8d3da)|`Improve python-link`|",
    "created_at": "2016-03-18T03:00:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360041",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                     |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[57bfdee](https://github.com/sagemath/sagetrac-mirror/commit/57bfdee4eec37a346ed6d05d262c919087f8d3da)|`Improve python-link`|



---

archive/issue_comments_360042.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [dkrenn](#comment%3A10):\n> Something like `:python:`RuntimeError<library/exceptions.html#exceptions.RuntimeError>`` should work for Python-links.\n> \n> Changing `ellipsis marker (...)`  to `ellipsis marker ``...``` would (IMHO) make it clearer what the actual marker is, since it is typeset as code (tt-font). What do you think?\n\n\nNice tips. Thank you!",
    "created_at": "2016-03-18T03:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360042",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:12'></a>
Replying to [dkrenn](#comment%3A10):
> Something like `:python:`RuntimeError<library/exceptions.html#exceptions.RuntimeError>`` should work for Python-links.
> 
> Changing `ellipsis marker (...)`  to `ellipsis marker ``...``` would (IMHO) make it clearer what the actual marker is, since it is typeset as code (tt-font). What do you think?


Nice tips. Thank you!



---

archive/issue_comments_360043.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-18T03:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360043",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_360044.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-18T13:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360044",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_360045.json:
```json
{
    "body": "<a id='comment:14'></a>\nThanks for changing. One very small issue I just saw now: Could you make two line-breaks to avoid the long lines? (PEP8)\nApart from this, positive_review.",
    "created_at": "2016-03-18T13:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360045",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:14'></a>
Thanks for changing. One very small issue I just saw now: Could you make two line-breaks to avoid the long lines? (PEP8)
Apart from this, positive_review.



---

archive/issue_comments_360046.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[5694f4e](https://github.com/sagemath/sagetrac-mirror/commit/5694f4ee95ce733d7b30619f23fcd17177194207)|`Split long lines`|",
    "created_at": "2016-03-18T15:26:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360046",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                  |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[5694f4e](https://github.com/sagemath/sagetrac-mirror/commit/5694f4ee95ce733d7b30619f23fcd17177194207)|`Split long lines`|



---

archive/issue_comments_360047.json:
```json
{
    "body": "Changing commit from \"57bfdee4eec37a346ed6d05d262c919087f8d3da\" to \"5694f4ee95ce733d7b30619f23fcd17177194207\"",
    "created_at": "2016-03-18T15:26:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360047",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "57bfdee4eec37a346ed6d05d262c919087f8d3da" to "5694f4ee95ce733d7b30619f23fcd17177194207"



---

archive/issue_events_070163.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-03-22T01:26:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20176#event-70163"
}
```



---

archive/issue_comments_360048.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-23T04:24:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360048",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_360049.json:
```json
{
    "body": "<a id='comment:18'></a>\nLooks good now.",
    "created_at": "2016-03-23T10:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360049",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:18'></a>
Looks good now.



---

archive/issue_comments_360050.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-23T10:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360050",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_070164.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-23T23:55:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20176#event-70164"
}
```



---

archive/issue_comments_360051.json:
```json
{
    "body": "Changing branch from \"public/20176\" to \"5694f4ee95ce733d7b30619f23fcd17177194207\"",
    "created_at": "2016-03-23T23:55:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360051",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/20176" to "5694f4ee95ce733d7b30619f23fcd17177194207"



---

archive/issue_comments_360052.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-23T23:55:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20176#issuecomment-360052",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
