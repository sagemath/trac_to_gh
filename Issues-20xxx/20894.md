# Issue 20894: Sage package for Perl 5 readline library

archive/issues_020657.json:
```json
{
    "assignees": [],
    "body": "This is a prerequisite for building Polymake (#20892) on Mac OS X.\n\nhttp://search.cpan.org/~hayashi/Term-ReadLine-Gnu-1.34/\n\nhttp://search.cpan.org/CPAN/authors/id/H/HA/HAYASHI/Term-ReadLine-Gnu-1.34.tar.gz\n\nCC:  @videlec @vbraun @embray @jdemeyer @dimpase @kcrisman @tscrim\n\nBranch/Commit: **[cfffc5e](https://github.com/sagemath/sagetrac-mirror/commit/cfffc5e577405f996f10471273ee137d8cbd7966)**\n\nReviewer: **Karl-Dieter Crisman, Dima Pasechnik**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/20894_\n\n",
    "closed_at": "2016-07-09T07:46:15Z",
    "created_at": "2016-06-27T21:24:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20experimental",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Sage package for Perl 5 readline library",
    "type": "issue",
    "updated_at": "2016-07-09T07:46:15Z",
    "url": "https://github.com/sagemath/sage/issues/20894",
    "user": "https://github.com/mkoeppe"
}
```
This is a prerequisite for building Polymake (#20892) on Mac OS X.

http://search.cpan.org/~hayashi/Term-ReadLine-Gnu-1.34/

http://search.cpan.org/CPAN/authors/id/H/HA/HAYASHI/Term-ReadLine-Gnu-1.34.tar.gz

CC:  @videlec @vbraun @embray @jdemeyer @dimpase @kcrisman @tscrim

Branch/Commit: **[cfffc5e](https://github.com/sagemath/sagetrac-mirror/commit/cfffc5e577405f996f10471273ee137d8cbd7966)**

Reviewer: **Karl-Dieter Crisman, Dima Pasechnik**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/20894_





---

archive/issue_events_276119.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T21:24:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20894#event-276119"
}
```



---

archive/issue_events_276120.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T21:24:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20experimental",
    "label_color": "000080",
    "label_name": "component: packages: experimental",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20894#event-276120"
}
```



---

archive/issue_events_276121.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T21:24:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20894#event-276121"
}
```



---

archive/issue_events_276122.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T21:24:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20894#event-276122"
}
```



---

archive/issue_comments_305874.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,4 @@\n \n http://search.cpan.org/~hayashi/Term-ReadLine-Gnu-1.34/\n \n+http://search.cpan.org/CPAN/authors/id/H/HA/HAYASHI/Term-ReadLine-Gnu-1.34.tar.gz\n``````\n",
    "created_at": "2016-06-27T21:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305874",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,4 @@
 
 http://search.cpan.org/~hayashi/Term-ReadLine-Gnu-1.34/
 
+http://search.cpan.org/CPAN/authors/id/H/HA/HAYASHI/Term-ReadLine-Gnu-1.34.tar.gz
``````




---

archive/issue_comments_305875.json:
```json
{
    "body": "Branch: **[u/mkoeppe/sage_package_for_perl_5_readline_library](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_package_for_perl_5_readline_library)**",
    "created_at": "2016-06-27T22:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305875",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/sage_package_for_perl_5_readline_library](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_package_for_perl_5_readline_library)**



---

archive/issue_comments_305876.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nNot sure if this installation should be done using CPAN scripts instead.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c5a4acabe29c8bb6263ffb0fd280808d7c2f462\">3c5a4ac</a></td><td><code>Add Sage package for Perl 5 readline library</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac4779403ecf003fdcd25fd9fcd8ba2b97c04575\">ac47794</a></td><td><code>Set PERL5LIB environment variable</code></td></tr></table>\n",
    "created_at": "2016-06-27T22:17:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305876",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'>Comment 3:</a>
Not sure if this installation should be done using CPAN scripts instead.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c5a4acabe29c8bb6263ffb0fd280808d7c2f462">3c5a4ac</a></td><td><code>Add Sage package for Perl 5 readline library</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac4779403ecf003fdcd25fd9fcd8ba2b97c04575">ac47794</a></td><td><code>Set PERL5LIB environment variable</code></td></tr></table>




---

archive/issue_events_276123.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T22:17:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20894#event-276123"
}
```



---

archive/issue_comments_305877.json:
```json
{
    "body": "Commit: **[ac47794](https://github.com/sagemath/sagetrac-mirror/commit/ac4779403ecf003fdcd25fd9fcd8ba2b97c04575)**",
    "created_at": "2016-06-27T22:17:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305877",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[ac47794](https://github.com/sagemath/sagetrac-mirror/commit/ac4779403ecf003fdcd25fd9fcd8ba2b97c04575)**



---

archive/issue_comments_305878.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nThis always was a big part of the struggle for me in getting this to work on Mac.   Hopefully it can be portable to pre-10.11 as well but at least if it is working on *some* OS X it will be a huge improvement - I regularly see papers citing polymake or latte which could be using Sage to interface better with them and other stuff.",
    "created_at": "2016-06-28T01:07:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305878",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'>Comment 5:</a>
This always was a big part of the struggle for me in getting this to work on Mac.   Hopefully it can be portable to pre-10.11 as well but at least if it is working on *some* OS X it will be a huge improvement - I regularly see papers citing polymake or latte which could be using Sage to interface better with them and other stuff.



---

archive/issue_comments_305879.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nThere is a problem in the way we do things now with experimental packages.  Here is what I saw:\n\n```\nmake[1]: warning: -jN forced in submake: disabling jobserver mode.\nsage-logger -p 'sage-spkg  perl_term_readline_gnu-1.34' '/Users/karl.crisman/Downloads/sage/logs/pkgs/perl_term_readline_gnu-1.34.log'\n[perl_term_readline_gnu-1.34] Found local metadata for perl_term_readline_gnu-1.34\n[perl_term_readline_gnu-1.34] =========================== WARNING ===========================\n[perl_term_readline_gnu-1.34] You are about to download and install an experimental package.\n[perl_term_readline_gnu-1.34] This probably won't work at all for you! There is no guarantee\n[perl_term_readline_gnu-1.34] that it will build correctly, or behave as expected.\n[perl_term_readline_gnu-1.34] Use at your own risk!\n[perl_term_readline_gnu-1.34] ===============================================================\n<hang>\n```\nbut actually it was waiting for me to answer\n\n```\n[perl_term_readline_gnu-1.34] Are you sure you want to continue [Y/n]? \n```\nwhich the second time I did.  In the old `./sage -i` this worked okay, but somehow with the new logging system it sort of failed.  Don't know if fixing this belongs on this ticket, though.  (Jeroen, I think you've tried out more experimental packages than most - thoughts?)",
    "created_at": "2016-06-28T03:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305879",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'>Comment 6:</a>
There is a problem in the way we do things now with experimental packages.  Here is what I saw:

```
make[1]: warning: -jN forced in submake: disabling jobserver mode.
sage-logger -p 'sage-spkg  perl_term_readline_gnu-1.34' '/Users/karl.crisman/Downloads/sage/logs/pkgs/perl_term_readline_gnu-1.34.log'
[perl_term_readline_gnu-1.34] Found local metadata for perl_term_readline_gnu-1.34
[perl_term_readline_gnu-1.34] =========================== WARNING ===========================
[perl_term_readline_gnu-1.34] You are about to download and install an experimental package.
[perl_term_readline_gnu-1.34] This probably won't work at all for you! There is no guarantee
[perl_term_readline_gnu-1.34] that it will build correctly, or behave as expected.
[perl_term_readline_gnu-1.34] Use at your own risk!
[perl_term_readline_gnu-1.34] ===============================================================
<hang>
```
but actually it was waiting for me to answer

```
[perl_term_readline_gnu-1.34] Are you sure you want to continue [Y/n]? 
```
which the second time I did.  In the old `./sage -i` this worked okay, but somehow with the new logging system it sort of failed.  Don't know if fixing this belongs on this ticket, though.  (Jeroen, I think you've tried out more experimental packages than most - thoughts?)



---

archive/issue_comments_305880.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBut #20892 still does:\n\n```\n[polymake-3.0r1] Thread model: posix\n[polymake-3.0r1] gcc version 4.9.3 (GCC) \n[polymake-3.0r1] ****************************************************\n[polymake-3.0r1] checking C++ compiler ... ok (g++ is GCC 4.9.3)\n[polymake-3.0r1] checking C++ library ... ok (GNU stdlibc++ 20150626, C++ 199711)\n[polymake-3.0r1] checking fink installation ... The Fink package system is a mandatory prerequisite to build and use polymake under MacOS.\n[polymake-3.0r1] Please refer to http://www.polymake.org/doku.php/mac for details and installation instructions.\n[polymake-3.0r1] If you already have Fink installed at a non-standard location, please specify it using option --with-fink\n[polymake-3.0r1] Several configurations for MacOS platform found;\n[polymake-3.0r1] Please specify the desired one using the option Arch=<NAME>.\n[polymake-3.0r1] Makefile:32: *** CONFIGURATION ERROR.  Stop.\n[polymake-3.0r1] Several configurations for MacOS platform found;\n[polymake-3.0r1] Please specify the desired one using the option Arch=<NAME>.\n[polymake-3.0r1] Makefile:32: *** CONFIGURATION ERROR.  Stop.\n[polymake-3.0r1] \n[polymake-3.0r1] real\t0m1.003s\n[polymake-3.0r1] user\t0m0.415s\n[polymake-3.0r1] sys\t0m0.219s\n[polymake-3.0r1] ************************************************************************\n[polymake-3.0r1] Error installing package polymake-3.0r1\n[polymake-3.0r1] ************************************************************************\n```\nI see you have some special instructions at [#20892 comment:17](https://github.com/sagemath/sage/issues/20892#comment:17) so I'll try that.",
    "created_at": "2016-06-28T03:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305880",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'>Comment 7:</a>
But #20892 still does:

```
[polymake-3.0r1] Thread model: posix
[polymake-3.0r1] gcc version 4.9.3 (GCC) 
[polymake-3.0r1] ****************************************************
[polymake-3.0r1] checking C++ compiler ... ok (g++ is GCC 4.9.3)
[polymake-3.0r1] checking C++ library ... ok (GNU stdlibc++ 20150626, C++ 199711)
[polymake-3.0r1] checking fink installation ... The Fink package system is a mandatory prerequisite to build and use polymake under MacOS.
[polymake-3.0r1] Please refer to http://www.polymake.org/doku.php/mac for details and installation instructions.
[polymake-3.0r1] If you already have Fink installed at a non-standard location, please specify it using option --with-fink
[polymake-3.0r1] Several configurations for MacOS platform found;
[polymake-3.0r1] Please specify the desired one using the option Arch=<NAME>.
[polymake-3.0r1] Makefile:32: *** CONFIGURATION ERROR.  Stop.
[polymake-3.0r1] Several configurations for MacOS platform found;
[polymake-3.0r1] Please specify the desired one using the option Arch=<NAME>.
[polymake-3.0r1] Makefile:32: *** CONFIGURATION ERROR.  Stop.
[polymake-3.0r1] 
[polymake-3.0r1] real	0m1.003s
[polymake-3.0r1] user	0m0.415s
[polymake-3.0r1] sys	0m0.219s
[polymake-3.0r1] ************************************************************************
[polymake-3.0r1] Error installing package polymake-3.0r1
[polymake-3.0r1] ************************************************************************
```
I see you have some special instructions at [#20892 comment:17](https://github.com/sagemath/sage/issues/20892#comment:17) so I'll try that.



---

archive/issue_comments_305881.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nApparently this is working well enough that I'd say one could give it positive review (modulo [comment:6](#comment%3A6), if relevant).  But I would like to hear from Linuces.  I have to admit I was never successful in getting this to work on my older Mac but apparently the Perl part actually does here!",
    "created_at": "2016-06-28T03:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305881",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'>Comment 8:</a>
Apparently this is working well enough that I'd say one could give it positive review (modulo [comment:6](#comment%3A6), if relevant).  But I would like to hear from Linuces.  I have to admit I was never successful in getting this to work on my older Mac but apparently the Perl part actually does here!



---

archive/issue_comments_305882.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [@kcrisman](#comment%3A6):\n> There is a problem in the way we do things now with experimental packages.  Here is what I saw:\n> \n> ```\n> <hang>\n> ```\n> but actually it was waiting for me to answer\n> \n> ```\n> [perl_term_readline_gnu-1.34] Are you sure you want to continue [Y/n]? \n> ```\n> which the second time I did.\n\nThis is bug #20884.",
    "created_at": "2016-06-28T03:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305882",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [@kcrisman](#comment%3A6):
> There is a problem in the way we do things now with experimental packages.  Here is what I saw:
> 
> ```
> <hang>
> ```
> but actually it was waiting for me to answer
> 
> ```
> [perl_term_readline_gnu-1.34] Are you sure you want to continue [Y/n]? 
> ```
> which the second time I did.

This is bug #20884.



---

archive/issue_comments_305883.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2016-06-28T21:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305883",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_305884.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nOkay, then I think all we need for positive review is someone to test this doesn't break anything.  (E.g. on Linux or Cygwin...)  Very nice!",
    "created_at": "2016-06-28T22:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305884",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'>Comment 11:</a>
Okay, then I think all we need for positive review is someone to test this doesn't break anything.  (E.g. on Linux or Cygwin...)  Very nice!



---

archive/issue_comments_305885.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2016-06-28T22:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305885",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_comments_305886.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nThe `ARCHFLAGS='-arch x86_64'` looks weird. How does it behaves on other architectures ?",
    "created_at": "2016-06-30T09:10:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305886",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:12'>Comment 12:</a>
The `ARCHFLAGS='-arch x86_64'` looks weird. How does it behaves on other architectures ?



---

archive/issue_comments_305887.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4088becb513fe5a5a41002f5e4511941894da21d\">4088bec</a></td><td><code>Merge tag '7.3.beta6' into t/20894/sage_package_for_perl_5_readline_library</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfffc5e577405f996f10471273ee137d8cbd7966\">cfffc5e</a></td><td><code>Conditionalize ARCHFLAGS based on uname</code></td></tr></table>\n",
    "created_at": "2016-07-01T13:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305887",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4088becb513fe5a5a41002f5e4511941894da21d">4088bec</a></td><td><code>Merge tag '7.3.beta6' into t/20894/sage_package_for_perl_5_readline_library</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfffc5e577405f996f10471273ee137d8cbd7966">cfffc5e</a></td><td><code>Conditionalize ARCHFLAGS based on uname</code></td></tr></table>




---

archive/issue_comments_305888.json:
```json
{
    "body": "Changed commit from **[ac47794](https://github.com/sagemath/sagetrac-mirror/commit/ac4779403ecf003fdcd25fd9fcd8ba2b97c04575)** to **[cfffc5e](https://github.com/sagemath/sagetrac-mirror/commit/cfffc5e577405f996f10471273ee137d8cbd7966)**",
    "created_at": "2016-07-01T13:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305888",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ac47794](https://github.com/sagemath/sagetrac-mirror/commit/ac4779403ecf003fdcd25fd9fcd8ba2b97c04575)** to **[cfffc5e](https://github.com/sagemath/sagetrac-mirror/commit/cfffc5e577405f996f10471273ee137d8cbd7966)**



---

archive/issue_comments_305889.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [tmonteil](#comment%3A12):\n> The `ARCHFLAGS='-arch x86_64'` looks weird. How does it behaves on other architectures ?\n\nI now do this only on Mac OS X and use `uname`.\n\nIt needs testing (\"review\") to know whether this ticket works on other architectures. I don't have access to other architectures at the moment.",
    "created_at": "2016-07-01T13:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305889",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [tmonteil](#comment%3A12):
> The `ARCHFLAGS='-arch x86_64'` looks weird. How does it behaves on other architectures ?

I now do this only on Mac OS X and use `uname`.

It needs testing ("review") to know whether this ticket works on other architectures. I don't have access to other architectures at the moment.



---

archive/issue_comments_305890.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [@mkoeppe](#comment%3A14):\n> Replying to [tmonteil](#comment%3A12):\n> > The `ARCHFLAGS='-arch x86_64'` looks weird. How does it behaves on other architectures ?\n\n> \n> I now do this only on Mac OS X and use `uname`.\n\nLooks indeed better like this. I will test on i686 soon (i am currently doing some computations there, perhaps for 3-4 more days).\n\n> It needs testing (\"review\") to know whether this ticket works on other architectures. I don't have access to other architectures at the moment.",
    "created_at": "2016-07-01T14:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305890",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [@mkoeppe](#comment%3A14):
> Replying to [tmonteil](#comment%3A12):
> > The `ARCHFLAGS='-arch x86_64'` looks weird. How does it behaves on other architectures ?

> 
> I now do this only on Mac OS X and use `uname`.

Looks indeed better like this. I will test on i686 soon (i am currently doing some computations there, perhaps for 3-4 more days).

> It needs testing ("review") to know whether this ticket works on other architectures. I don't have access to other architectures at the moment.



---

archive/issue_comments_305891.json:
```json
{
    "body": "Changed reviewer from **Karl-Dieter Crisman** to **Karl-Dieter Crisman + needs more reviewers**",
    "created_at": "2016-07-07T07:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305891",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Karl-Dieter Crisman** to **Karl-Dieter Crisman + needs more reviewers**



---

archive/issue_events_276124.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-07-07T07:54:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "title_is": "Sage package for Perl 5 readline library -- needs test on Linux platforms",
    "title_was": "Sage package for Perl 5 readline library",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20894#event-276124"
}
```



---

archive/issue_comments_305892.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nI will do testing on i686",
    "created_at": "2016-07-07T08:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305892",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'>Comment 18:</a>
I will do testing on i686



---

archive/issue_comments_305893.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nthe upstream tarball is not wgetttable - I get \"scheme missing\"... While this does not prevent testing, release manager won't be amused.",
    "created_at": "2016-07-07T08:18:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305893",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'>Comment 19:</a>
the upstream tarball is not wgetttable - I get "scheme missing"... While this does not prevent testing, release manager won't be amused.



---

archive/issue_comments_305894.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nOn `x86_64` this installs well, but `polymake` installation fails:\n\n```\n...\n[polymake-3.0r1] checking mpfr installation ... ok\n[polymake-3.0r1] checking shared perl library ... Can't locate ExtUtils/Embed.pm in @INC (you may need to install the ExtUtils::Embed module) (@INC contains: /home/scratch/dimpase/sage/sage/local/lib/perl5/x86_64-linux-thread-multi /home/scratch/dimpase/sage/sage/local/lib/perl5 /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .).\n[polymake-3.0r1] BEGIN failed--compilation aborted.\n[polymake-3.0r1] Can't locate ExtUtils/Embed.pm in @INC (you may need to install the ExtUtils::Embed module) (@INC contains: /home/scratch/dimpase/sage/sage/local/lib/perl5/x86_64-linux-thread-multi /home/scratch/dimpase/sage/sage/local/lib/perl5 /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .).\n[polymake-3.0r1] BEGIN failed--compilation aborted.\n[polymake-3.0r1] failed\n[polymake-3.0r1] \n[polymake-3.0r1] Could not compile a test program for the libperl.so shared library.\n[polymake-3.0r1] The build error is as follows:\n[polymake-3.0r1] /tmp/polymake_10418_configure.cc:1:20: fatal error: EXTERN.h: No such file or directory\n[polymake-3.0r1] compilation terminated.\n[polymake-3.0r1] \n```",
    "created_at": "2016-07-07T08:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305894",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'>Comment 20:</a>
On `x86_64` this installs well, but `polymake` installation fails:

```
...
[polymake-3.0r1] checking mpfr installation ... ok
[polymake-3.0r1] checking shared perl library ... Can't locate ExtUtils/Embed.pm in @INC (you may need to install the ExtUtils::Embed module) (@INC contains: /home/scratch/dimpase/sage/sage/local/lib/perl5/x86_64-linux-thread-multi /home/scratch/dimpase/sage/sage/local/lib/perl5 /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .).
[polymake-3.0r1] BEGIN failed--compilation aborted.
[polymake-3.0r1] Can't locate ExtUtils/Embed.pm in @INC (you may need to install the ExtUtils::Embed module) (@INC contains: /home/scratch/dimpase/sage/sage/local/lib/perl5/x86_64-linux-thread-multi /home/scratch/dimpase/sage/sage/local/lib/perl5 /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .).
[polymake-3.0r1] BEGIN failed--compilation aborted.
[polymake-3.0r1] failed
[polymake-3.0r1] 
[polymake-3.0r1] Could not compile a test program for the libperl.so shared library.
[polymake-3.0r1] The build error is as follows:
[polymake-3.0r1] /tmp/polymake_10418_configure.cc:1:20: fatal error: EXTERN.h: No such file or directory
[polymake-3.0r1] compilation terminated.
[polymake-3.0r1] 
```



---

archive/issue_comments_305895.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nThanks for testing. Could you try to find out which packages on your distribution need to be installed for this to work? We could add this information to the polymake package readme. However, I don't see us including all kinds of Perl prerequisites as Sage packages. I consider `libterm-readline-gnu` an exception because it's not available on OS X; fink does not have a package for it; we already have libreadline; the CPAN script fails to install it on OS X.",
    "created_at": "2016-07-07T08:44:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305895",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'>Comment 21:</a>
Thanks for testing. Could you try to find out which packages on your distribution need to be installed for this to work? We could add this information to the polymake package readme. However, I don't see us including all kinds of Perl prerequisites as Sage packages. I consider `libterm-readline-gnu` an exception because it's not available on OS X; fink does not have a package for it; we already have libreadline; the CPAN script fails to install it on OS X.



---

archive/issue_comments_305896.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nDo you mean that on Linux you would not need to use this package, and system-wide Perl would do?",
    "created_at": "2016-07-07T08:47:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305896",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'>Comment 22:</a>
Do you mean that on Linux you would not need to use this package, and system-wide Perl would do?



---

archive/issue_comments_305897.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nI think a system-wide Perl with the necessary modules would do; but given that we unconditionally install readline (it being a standard package) even on Linux (which probably also has readline, though maybe not the header files), perhaps we want to use our readline for Perl as well for consistency.",
    "created_at": "2016-07-07T08:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305897",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'>Comment 23:</a>
I think a system-wide Perl with the necessary modules would do; but given that we unconditionally install readline (it being a standard package) even on Linux (which probably also has readline, though maybe not the header files), perhaps we want to use our readline for Perl as well for consistency.



---

archive/issue_comments_305898.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI am testing this on Fedora 23, and the missing header `EXTERN.h` is installed, it is in `/usr/lib64/perl5/CORE/`. This seems to be quite messy; [perl people recommend](https://www.centos.org/forums/viewtopic.php?t=19848) doing\n\n```\n$ perl -MConfig -e 'print \"$Config{archlib}\\n\"'\n```\nto get the path to default `perl` install. On Ubuntu I get `/usr/lib/perl/5.18`, on Fedora 23 I get `/usr/lib64/perl5`. Thus `polymake` ought to use the output of that `perl` call to construct a path to `EXTERN.h`.",
    "created_at": "2016-07-07T09:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305898",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'>Comment 24:</a>
I am testing this on Fedora 23, and the missing header `EXTERN.h` is installed, it is in `/usr/lib64/perl5/CORE/`. This seems to be quite messy; [perl people recommend](https://www.centos.org/forums/viewtopic.php?t=19848) doing

```
$ perl -MConfig -e 'print "$Config{archlib}\n"'
```
to get the path to default `perl` install. On Ubuntu I get `/usr/lib/perl/5.18`, on Fedora 23 I get `/usr/lib64/perl5`. Thus `polymake` ought to use the output of that `perl` call to construct a path to `EXTERN.h`.



---

archive/issue_comments_305899.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nThis check in Polymake's configure script is in support/configure.pl lines 718-\nCould you look what's going on and/or report this failure on Fedora 23 in the polymake forum? I think this is not Sage-specific. https://forum.polymake.org/viewforum.php?f=10",
    "created_at": "2016-07-07T09:28:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305899",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'>Comment 25:</a>
This check in Polymake's configure script is in support/configure.pl lines 718-
Could you look what's going on and/or report this failure on Fedora 23 in the polymake forum? I think this is not Sage-specific. https://forum.polymake.org/viewforum.php?f=10



---

archive/issue_comments_305900.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nIn fact, after `$ sudo yum install perl-ExtUtils-Embed` (took a while to dig up)\npolymake is building. I'll report this on polymake forum.",
    "created_at": "2016-07-07T10:19:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305900",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'>Comment 26:</a>
In fact, after `$ sudo yum install perl-ExtUtils-Embed` (took a while to dig up)
polymake is building. I'll report this on polymake forum.



---

archive/issue_comments_305901.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nShould this be an experimental or an optional package?",
    "created_at": "2016-07-07T21:25:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305901",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'>Comment 27:</a>
Should this be an experimental or an optional package?



---

archive/issue_comments_305902.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nlet's start with experimental. Optional needs approval on sage-devel, as well as passing all its tests... IMHO it and polymake should go in lockstep in this.",
    "created_at": "2016-07-07T21:28:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305902",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'>Comment 28:</a>
let's start with experimental. Optional needs approval on sage-devel, as well as passing all its tests... IMHO it and polymake should go in lockstep in this.



---

archive/issue_comments_305903.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nOK, then I leave it as experimental.",
    "created_at": "2016-07-07T21:43:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305903",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'>Comment 29:</a>
OK, then I leave it as experimental.



---

archive/issue_events_276125.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-07-07T22:23:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "title_is": "Sage package for Perl 5 readline library",
    "title_was": "Sage package for Perl 5 readline library -- needs test on Linux platforms",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20894#event-276125"
}
```



---

archive/issue_comments_305904.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nIf I understand the procedure correctly ([#20529 comment:15](https://github.com/sagemath/sage/issues/20529#comment:15)), this ticket might be ready for `positive_review` as buildbots will do further builds on other platforms.",
    "created_at": "2016-07-07T22:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305904",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'>Comment 30:</a>
If I understand the procedure correctly ([#20529 comment:15](https://github.com/sagemath/sage/issues/20529#comment:15)), this ticket might be ready for `positive_review` as buildbots will do further builds on other platforms.



---

archive/issue_comments_305905.json:
```json
{
    "body": "Changed reviewer from **Karl-Dieter Crisman + needs more reviewers** to **Karl-Dieter Crisman, Dima Pasechnik**",
    "created_at": "2016-07-07T22:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305905",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Karl-Dieter Crisman + needs more reviewers** to **Karl-Dieter Crisman, Dima Pasechnik**



---

archive/issue_comments_305906.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nlooks good to me",
    "created_at": "2016-07-07T22:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305906",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'>Comment 31:</a>
looks good to me



---

archive/issue_events_276126.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-07-07T22:33:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20894#event-276126"
}
```



---

archive/issue_events_276127.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-07-07T22:33:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20894#event-276127"
}
```



---

archive/issue_comments_305907.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/sage_package_for_perl_5_readline_library](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_package_for_perl_5_readline_library)** to **[cfffc5e](https://github.com/sagemath/sagetrac-mirror/commit/cfffc5e577405f996f10471273ee137d8cbd7966)**",
    "created_at": "2016-07-09T07:46:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20894#issuecomment-305907",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/sage_package_for_perl_5_readline_library](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_package_for_perl_5_readline_library)** to **[cfffc5e](https://github.com/sagemath/sagetrac-mirror/commit/cfffc5e577405f996f10471273ee137d8cbd7966)**



---

archive/issue_events_276128.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-09T07:46:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20894#event-276128"
}
```



---

archive/issue_events_276129.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c8e0e7505b4aa6f68018b35f1e5783d215bb5cdd",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-07-09T07:46:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20894",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20894#event-276129"
}
```
