# Issue 20238: Move the Sage <-> PARI interface to a stand-alone package CyPari

archive/issues_020001.json:
```json
{
    "body": "Needs cysignals:\n\n* #20002: Move interrupt.pyx to package cysignals\n* #20210: Move memory functions to cysignals\n\nCleanup of PARI interface:\n\n* #20205: Clean up factoring PARI interface\n* #20213: Replace pari_catch_sig_on by sig_on\n* #20216: Deprecate PARI nth_prime, prime_list, primes_up_to_n\n* #20217: Remove redundant functions from pari_instance.pyx\n* #20219: Remove redundant functions from gen.pyx\n* #20224: Auto-generated PARI functions sometimes return 0 instead of None\n* #20226: Implement conversion PARI <-> Python int/long without GMP/MPIR\n* #20241: Separate Sage-specific components from generic C-interface in PariInstance\n* #20257: Deprecate undocumented arguments to PARI functions\n* #20352: Initialize PARI constants in `PariInstance.__init__`\n* #20473: Remove global pari_instance variable\n* #20486: Remove deprecated PARI code\n* #21703: Interface PARI precision in bits\n* #21806: Allow multiple instances of the `PariInstance` object\n* #21807: Move `gentoobj` and rename it to `gentosage`\n* #21808: Change `gen.python()` to return Python objects\n* #21809: Pythonize deprecation warnings in PARI interface\n* #21810: Move calculation of PARI stack size out of `__init__`\n* #22183: Rename `PariInstance` -> `Pari`\n* #22185: Rename `gen` -> `Gen`\n* #22195: Allow compiling PARI interface without `anal.h`\n* #22165: Stop using deprecated PARI function `polred()`\n* #22210: Remove obsolete special case in PARI `Gen.eval()`\n* #22221: Fix dependency on PARI headers\n* #22222: Remove `pari_instance` global in `gen.pyx`\n* #22319: Implement `__index__` for PARI `Gen`\n* #22471: `Gen`: clean up \"`new_ref`\" mechanism\n* #22561: Implement `__iter__` for PARI `Gen`\n* #22584: Debug build doctests fail with `sig_block() with sig_on_count = 1, block_sigint = 1`\n\nPARI upgrades:\n\n* #20581: Upgrade PARI to latest master\n* #21005: Update PARI to version 2.8.0\n* #21756: Update PARI to version 2.9.1\n* #22276: Fix PARI patches\n* #22675: Upgrade PARI to version 2.9.2\n\nDecouple CyPari from the Sage coercion model:\n\n* #20740: Drop return type from arithmetic methods in coercion model\n* #20761: Drop argument types from arithmetic methods in coercion model\n* #20757: Drop argument types from comparison methods in coercion model\n* #20686: Refactor getattr_from_other_class() for lookup of methods in categories\n* #20767: Move coercion to Element\n* #21163: In richcmp, fall back to reversed operation if coercion fails\n* #21158: Decouple PARI from coercion model\n\nMove the PARI interface to a new package:\n\n* #21820: Split `src/sage/libs/pari`\n* #21821: Avoid Sage-specific variables in `autogen/pari`\n* #21874: Make autogen/pari Python 3 compatible\n* #22193: Move Sage doctests into standalone tests in `src/tests`\n* #22198: Make cypari2 Python2 / Python3 compatible\n* #22239: Don't use six in `sage_setup/autogen/pari`\n* #22240: Use relative imports in `sage_setup/autogen/pari`\n* #22291: `ob_size` does not exist in Python 3\n* #22470: Replace `_pari_` -> `__pari__`\n* #22728: Patch Cython to find includes better\n\nTo be fixed in `CyPari2`:\n\n* #22321: `Gen.__init__()` does not work as expected\n\n**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/cypari2-1.0.0.tar.bz2 (see https://github.com/defeo/cypari2/pull/11)\n\nDepends on #22728\n\n**CC:**  @defeo @slel @videlec @miguelmarco jpflori\n\n**Keywords:** Pari\n\n**Branch:** [a56fffe5458202647f66f338a94a9024a0e83a88](https://github.com/sagemath/sagetrac-mirror/commit/a56fffe5458202647f66f338a94a9024a0e83a88)\n\n**Reviewer:** Jean-Pierre Flori\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/20238\n\n",
    "closed_at": "2017-04-27T20:11:55Z",
    "created_at": "2016-03-21T13:07:46Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "title": "Move the Sage <-> PARI interface to a stand-alone package CyPari",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/20238",
    "user": "https://github.com/jdemeyer"
}
```
Needs cysignals:

* #20002: Move interrupt.pyx to package cysignals
* #20210: Move memory functions to cysignals

Cleanup of PARI interface:

* #20205: Clean up factoring PARI interface
* #20213: Replace pari_catch_sig_on by sig_on
* #20216: Deprecate PARI nth_prime, prime_list, primes_up_to_n
* #20217: Remove redundant functions from pari_instance.pyx
* #20219: Remove redundant functions from gen.pyx
* #20224: Auto-generated PARI functions sometimes return 0 instead of None
* #20226: Implement conversion PARI <-> Python int/long without GMP/MPIR
* #20241: Separate Sage-specific components from generic C-interface in PariInstance
* #20257: Deprecate undocumented arguments to PARI functions
* #20352: Initialize PARI constants in `PariInstance.__init__`
* #20473: Remove global pari_instance variable
* #20486: Remove deprecated PARI code
* #21703: Interface PARI precision in bits
* #21806: Allow multiple instances of the `PariInstance` object
* #21807: Move `gentoobj` and rename it to `gentosage`
* #21808: Change `gen.python()` to return Python objects
* #21809: Pythonize deprecation warnings in PARI interface
* #21810: Move calculation of PARI stack size out of `__init__`
* #22183: Rename `PariInstance` -> `Pari`
* #22185: Rename `gen` -> `Gen`
* #22195: Allow compiling PARI interface without `anal.h`
* #22165: Stop using deprecated PARI function `polred()`
* #22210: Remove obsolete special case in PARI `Gen.eval()`
* #22221: Fix dependency on PARI headers
* #22222: Remove `pari_instance` global in `gen.pyx`
* #22319: Implement `__index__` for PARI `Gen`
* #22471: `Gen`: clean up "`new_ref`" mechanism
* #22561: Implement `__iter__` for PARI `Gen`
* #22584: Debug build doctests fail with `sig_block() with sig_on_count = 1, block_sigint = 1`

PARI upgrades:

* #20581: Upgrade PARI to latest master
* #21005: Update PARI to version 2.8.0
* #21756: Update PARI to version 2.9.1
* #22276: Fix PARI patches
* #22675: Upgrade PARI to version 2.9.2

Decouple CyPari from the Sage coercion model:

* #20740: Drop return type from arithmetic methods in coercion model
* #20761: Drop argument types from arithmetic methods in coercion model
* #20757: Drop argument types from comparison methods in coercion model
* #20686: Refactor getattr_from_other_class() for lookup of methods in categories
* #20767: Move coercion to Element
* #21163: In richcmp, fall back to reversed operation if coercion fails
* #21158: Decouple PARI from coercion model

Move the PARI interface to a new package:

* #21820: Split `src/sage/libs/pari`
* #21821: Avoid Sage-specific variables in `autogen/pari`
* #21874: Make autogen/pari Python 3 compatible
* #22193: Move Sage doctests into standalone tests in `src/tests`
* #22198: Make cypari2 Python2 / Python3 compatible
* #22239: Don't use six in `sage_setup/autogen/pari`
* #22240: Use relative imports in `sage_setup/autogen/pari`
* #22291: `ob_size` does not exist in Python 3
* #22470: Replace `_pari_` -> `__pari__`
* #22728: Patch Cython to find includes better

To be fixed in `CyPari2`:

* #22321: `Gen.__init__()` does not work as expected

**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/cypari2-1.0.0.tar.bz2 (see https://github.com/defeo/cypari2/pull/11)

Depends on #22728

**CC:**  @defeo @slel @videlec @miguelmarco jpflori

**Keywords:** Pari

**Branch:** [a56fffe5458202647f66f338a94a9024a0e83a88](https://github.com/sagemath/sagetrac-mirror/commit/a56fffe5458202647f66f338a94a9024a0e83a88)

**Reviewer:** Jean-Pierre Flori

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/20238





---

archive/issue_events_181723.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-21T13:08:13Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "rename": {
        "from": "Make the Sage <-> PARI interface a stand-alone package",
        "to": "Move the Sage <-> PARI interface to a stand-alone package CyPari"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20238#event-181723"
}
```



---

archive/issue_comments_293681.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,3 +12,4 @@\n * #20219: Remove redundant functions from gen.pyx\n * #20224: Auto-generated PARI functions sometimes return 0 instead of None\n * #20226: Implement conversion PARI <-> Python int/long without GMP/MPIR\n+* #20241: Separate Sage-specific components from generic C-interface in PariInstance \n``````\n",
    "created_at": "2016-03-21T14:49:43Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293681",
    "user": "https://github.com/defeo"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,3 +12,4 @@
 * #20219: Remove redundant functions from gen.pyx
 * #20224: Auto-generated PARI functions sometimes return 0 instead of None
 * #20226: Implement conversion PARI <-> Python int/long without GMP/MPIR
+* #20241: Separate Sage-specific components from generic C-interface in PariInstance 
``````




---

archive/issue_comments_293682.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"Pari\".",
    "created_at": "2016-03-21T17:18:29Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293682",
    "user": "https://github.com/slel"
}
```

**Changing keywords** from "" to "Pari".



---

archive/issue_comments_293683.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,4 +12,5 @@\n * #20219: Remove redundant functions from gen.pyx\n * #20224: Auto-generated PARI functions sometimes return 0 instead of None\n * #20226: Implement conversion PARI <-> Python int/long without GMP/MPIR\n-* #20241: Separate Sage-specific components from generic C-interface in PariInstance \n+* #20241: Separate Sage-specific components from generic C-interface in PariInstance\n+* #20257: Deprecate undocumented arguments to PARI functions\n``````\n",
    "created_at": "2016-03-23T11:37:35Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293683",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,4 +12,5 @@
 * #20219: Remove redundant functions from gen.pyx
 * #20224: Auto-generated PARI functions sometimes return 0 instead of None
 * #20226: Implement conversion PARI <-> Python int/long without GMP/MPIR
-* #20241: Separate Sage-specific components from generic C-interface in PariInstance 
+* #20241: Separate Sage-specific components from generic C-interface in PariInstance
+* #20257: Deprecate undocumented arguments to PARI functions
``````




---

archive/issue_comments_293684.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,3 +14,4 @@\n * #20226: Implement conversion PARI <-> Python int/long without GMP/MPIR\n * #20241: Separate Sage-specific components from generic C-interface in PariInstance\n * #20257: Deprecate undocumented arguments to PARI functions\n+* #20352: Initialize PARI constants in PariInstance.__init__\n``````\n",
    "created_at": "2016-04-03T19:16:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293684",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,3 +14,4 @@
 * #20226: Implement conversion PARI <-> Python int/long without GMP/MPIR
 * #20241: Separate Sage-specific components from generic C-interface in PariInstance
 * #20257: Deprecate undocumented arguments to PARI functions
+* #20352: Initialize PARI constants in PariInstance.__init__
``````




---

archive/issue_comments_293685.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,4 +14,4 @@\n * #20226: Implement conversion PARI <-> Python int/long without GMP/MPIR\n * #20241: Separate Sage-specific components from generic C-interface in PariInstance\n * #20257: Deprecate undocumented arguments to PARI functions\n-* #20352: Initialize PARI constants in PariInstance.__init__\n+* #20352: Initialize PARI constants in `PariInstance.__init__`\n``````\n",
    "created_at": "2016-04-03T19:16:55Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293685",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,4 +14,4 @@
 * #20226: Implement conversion PARI <-> Python int/long without GMP/MPIR
 * #20241: Separate Sage-specific components from generic C-interface in PariInstance
 * #20257: Deprecate undocumented arguments to PARI functions
-* #20352: Initialize PARI constants in PariInstance.__init__
+* #20352: Initialize PARI constants in `PariInstance.__init__`
``````




---

archive/issue_comments_293686.json:
```json
{
    "body": "**Description changed:**\n``````diff\n\n``````\n",
    "created_at": "2016-04-03T20:33:57Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293686",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff

``````




---

archive/issue_comments_293687.json:
```json
{
    "body": "<a id='comment:8'></a>\nA comment by [kedlaya](https://github.com/sagemath/sage/issues/20241#comment:3) on #20241:\n> Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).\n",
    "created_at": "2016-04-09T13:54:49Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293687",
    "user": "https://github.com/defeo"
}
```

<a id='comment:8'></a>
A comment by [kedlaya](https://github.com/sagemath/sage/issues/20241#comment:3) on #20241:
> Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).




---

archive/issue_comments_293688.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,3 +15,4 @@\n * #20241: Separate Sage-specific components from generic C-interface in PariInstance\n * #20257: Deprecate undocumented arguments to PARI functions\n * #20352: Initialize PARI constants in `PariInstance.__init__`\n+* #20473: Remove global pari_instance variable\n``````\n",
    "created_at": "2016-04-20T09:20:06Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293688",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,3 +15,4 @@
 * #20241: Separate Sage-specific components from generic C-interface in PariInstance
 * #20257: Deprecate undocumented arguments to PARI functions
 * #20352: Initialize PARI constants in `PariInstance.__init__`
+* #20473: Remove global pari_instance variable
``````




---

archive/issue_comments_293689.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -16,3 +16,4 @@\n * #20257: Deprecate undocumented arguments to PARI functions\n * #20352: Initialize PARI constants in `PariInstance.__init__`\n * #20473: Remove global pari_instance variable\n+* #20486: Remove code deprecated in #16997\n``````\n",
    "created_at": "2016-04-22T13:31:04Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293689",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -16,3 +16,4 @@
 * #20257: Deprecate undocumented arguments to PARI functions
 * #20352: Initialize PARI constants in `PariInstance.__init__`
 * #20473: Remove global pari_instance variable
+* #20486: Remove code deprecated in #16997
``````




---

archive/issue_comments_293690.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -17,3 +17,7 @@\n * #20352: Initialize PARI constants in `PariInstance.__init__`\n * #20473: Remove global pari_instance variable\n * #20486: Remove code deprecated in #16997\n+\n+PARI upgrade:\n+\n+* #20581: Upgrade PARI to latest master\n``````\n",
    "created_at": "2016-05-11T15:15:39Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293690",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -17,3 +17,7 @@
 * #20352: Initialize PARI constants in `PariInstance.__init__`
 * #20473: Remove global pari_instance variable
 * #20486: Remove code deprecated in #16997
+
+PARI upgrade:
+
+* #20581: Upgrade PARI to latest master
``````




---

archive/issue_comments_293691.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -16,7 +16,7 @@\n * #20257: Deprecate undocumented arguments to PARI functions\n * #20352: Initialize PARI constants in `PariInstance.__init__`\n * #20473: Remove global pari_instance variable\n-* #20486: Remove code deprecated in #16997\n+* #20486: Remove deprecated PARI code\n \n PARI upgrade:\n \n``````\n",
    "created_at": "2016-05-11T15:16:03Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293691",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -16,7 +16,7 @@
 * #20257: Deprecate undocumented arguments to PARI functions
 * #20352: Initialize PARI constants in `PariInstance.__init__`
 * #20473: Remove global pari_instance variable
-* #20486: Remove code deprecated in #16997
+* #20486: Remove deprecated PARI code
 
 PARI upgrade:
 
``````




---

archive/issue_comments_293692.json:
```json
{
    "body": "<a id='comment:13'></a>\nJust a question: presently we have efficient sage.Integer <-> pari-gp integer conversion, right? `CyPari` would probably not support this directly, because that would make sage.Integer a dependency of the package. Where would the efficient conversion fit? (we wouldn't want to go through Python integers if we don't have to)",
    "created_at": "2016-05-11T21:18:39Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293692",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:13'></a>
Just a question: presently we have efficient sage.Integer <-> pari-gp integer conversion, right? `CyPari` would probably not support this directly, because that would make sage.Integer a dependency of the package. Where would the efficient conversion fit? (we wouldn't want to go through Python integers if we don't have to)



---

archive/issue_comments_293693.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,3 +21,11 @@\n PARI upgrade:\n \n * #20581: Upgrade PARI to latest master\n+\n+Refactoring of coercion in order to decouple CyPari from the Sage coercion model:\n+\n+* #20740: Drop return type from arithmetic methods in coercion model\n+* #20761: Drop argument types from arithmetic methods in coercion model\n+* #20757: Drop argument types from comparison methods in coercion model\n+* #20686: Refactor getattr_from_other_class() for lookup of methods in categories\n+* #20767: Move coercion to Element\n``````\n",
    "created_at": "2016-06-15T13:10:53Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293693",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -21,3 +21,11 @@
 PARI upgrade:
 
 * #20581: Upgrade PARI to latest master
+
+Refactoring of coercion in order to decouple CyPari from the Sage coercion model:
+
+* #20740: Drop return type from arithmetic methods in coercion model
+* #20761: Drop argument types from arithmetic methods in coercion model
+* #20757: Drop argument types from comparison methods in coercion model
+* #20686: Refactor getattr_from_other_class() for lookup of methods in categories
+* #20767: Move coercion to Element
``````




---

archive/issue_events_181724.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-06-15T13:10:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20238#event-181724"
}
```



---

archive/issue_events_181725.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-06-15T13:10:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20238#event-181725"
}
```



---

archive/issue_comments_293694.json:
```json
{
    "body": "**Description changed:**\n``````diff\n\n``````\n",
    "created_at": "2016-06-15T13:17:52Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293694",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff

``````




---

archive/issue_comments_293695.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -22,6 +22,8 @@\n \n * #20581: Upgrade PARI to latest master\n \n+* #21005: Update PARI to version 2.8.0\n+\n Refactoring of coercion in order to decouple CyPari from the Sage coercion model:\n \n * #20740: Drop return type from arithmetic methods in coercion model\n``````\n",
    "created_at": "2016-08-02T14:38:47Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293695",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -22,6 +22,8 @@
 
 * #20581: Upgrade PARI to latest master
 
+* #21005: Update PARI to version 2.8.0
+
 Refactoring of coercion in order to decouple CyPari from the Sage coercion model:
 
 * #20740: Drop return type from arithmetic methods in coercion model
``````




---

archive/issue_comments_293696.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,13 +21,13 @@\n PARI upgrade:\n \n * #20581: Upgrade PARI to latest master\n-\n * #21005: Update PARI to version 2.8.0\n \n-Refactoring of coercion in order to decouple CyPari from the Sage coercion model:\n+Decouple CyPari from the Sage coercion model:\n \n * #20740: Drop return type from arithmetic methods in coercion model\n * #20761: Drop argument types from arithmetic methods in coercion model\n * #20757: Drop argument types from comparison methods in coercion model\n * #20686: Refactor getattr_from_other_class() for lookup of methods in categories\n * #20767: Move coercion to Element\n+* #21158: Decouple PARI from coercion model\n``````\n",
    "created_at": "2016-08-03T14:01:49Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293696",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -21,13 +21,13 @@
 PARI upgrade:
 
 * #20581: Upgrade PARI to latest master
-
 * #21005: Update PARI to version 2.8.0
 
-Refactoring of coercion in order to decouple CyPari from the Sage coercion model:
+Decouple CyPari from the Sage coercion model:
 
 * #20740: Drop return type from arithmetic methods in coercion model
 * #20761: Drop argument types from arithmetic methods in coercion model
 * #20757: Drop argument types from comparison methods in coercion model
 * #20686: Refactor getattr_from_other_class() for lookup of methods in categories
 * #20767: Move coercion to Element
+* #21158: Decouple PARI from coercion model
``````




---

archive/issue_comments_293697.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -30,4 +30,5 @@\n * #20757: Drop argument types from comparison methods in coercion model\n * #20686: Refactor getattr_from_other_class() for lookup of methods in categories\n * #20767: Move coercion to Element\n+* #21163: In richcmp, fall back to reversed operation if coercion fails\n * #21158: Decouple PARI from coercion model\n``````\n",
    "created_at": "2016-08-04T11:43:11Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293697",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -30,4 +30,5 @@
 * #20757: Drop argument types from comparison methods in coercion model
 * #20686: Refactor getattr_from_other_class() for lookup of methods in categories
 * #20767: Move coercion to Element
+* #21163: In richcmp, fall back to reversed operation if coercion fails
 * #21158: Decouple PARI from coercion model
``````




---

archive/issue_comments_293698.json:
```json
{
    "body": "<a id='comment:20'></a>\nSo, what's left to be done? Are we ready to externalize the interface?",
    "created_at": "2016-10-19T11:34:03Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293698",
    "user": "https://github.com/defeo"
}
```

<a id='comment:20'></a>
So, what's left to be done? Are we ready to externalize the interface?



---

archive/issue_comments_293699.json:
```json
{
    "body": "<a id='comment:21'></a>\nWhen the next beta with #20241 is released, I will have a look.",
    "created_at": "2016-10-21T07:52:58Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293699",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>
When the next beta with #20241 is released, I will have a look.



---

archive/issue_comments_293700.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -17,6 +17,7 @@\n * #20352: Initialize PARI constants in `PariInstance.__init__`\n * #20473: Remove global pari_instance variable\n * #20486: Remove deprecated PARI code\n+* #21703: Interface PARI precision in bits\n \n PARI upgrade:\n \n``````\n",
    "created_at": "2016-10-21T07:52:58Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293700",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -17,6 +17,7 @@
 * #20352: Initialize PARI constants in `PariInstance.__init__`
 * #20473: Remove global pari_instance variable
 * #20486: Remove deprecated PARI code
+* #21703: Interface PARI precision in bits
 
 PARI upgrade:
 
``````




---

archive/issue_comments_293701.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,11 +18,16 @@\n * #20473: Remove global pari_instance variable\n * #20486: Remove deprecated PARI code\n * #21703: Interface PARI precision in bits\n+* #21806: Allow multiple instances of the `PariInstance` object\n+* #21807: Move gentoobj and rename it to gentosage\n+* #21808: Change gen.python() to return Python objects\n+* #21809: Pythonize deprecation warnings in PARI interface\n \n-PARI upgrade:\n+PARI upgrades:\n \n * #20581: Upgrade PARI to latest master\n * #21005: Update PARI to version 2.8.0\n+* #21756: Update PARI to version 2.9.0\n \n Decouple CyPari from the Sage coercion model:\n \n``````\n",
    "created_at": "2016-11-03T14:24:33Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293701",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,11 +18,16 @@
 * #20473: Remove global pari_instance variable
 * #20486: Remove deprecated PARI code
 * #21703: Interface PARI precision in bits
+* #21806: Allow multiple instances of the `PariInstance` object
+* #21807: Move gentoobj and rename it to gentosage
+* #21808: Change gen.python() to return Python objects
+* #21809: Pythonize deprecation warnings in PARI interface
 
-PARI upgrade:
+PARI upgrades:
 
 * #20581: Upgrade PARI to latest master
 * #21005: Update PARI to version 2.8.0
+* #21756: Update PARI to version 2.9.0
 
 Decouple CyPari from the Sage coercion model:
 
``````




---

archive/issue_events_181726.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-03T14:24:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20238#event-181726"
}
```



---

archive/issue_events_181727.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-03T14:24:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20238#event-181727"
}
```



---

archive/issue_comments_293702.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -19,9 +19,10 @@\n * #20486: Remove deprecated PARI code\n * #21703: Interface PARI precision in bits\n * #21806: Allow multiple instances of the `PariInstance` object\n-* #21807: Move gentoobj and rename it to gentosage\n-* #21808: Change gen.python() to return Python objects\n+* #21807: Move `gentoobj` and rename it to `gentosage`\n+* #21808: Change `gen.python()` to return Python objects\n * #21809: Pythonize deprecation warnings in PARI interface\n+* #21810: Move calculation of PARI stack size out of `__init__`\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2016-11-03T14:29:19Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293702",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -19,9 +19,10 @@
 * #20486: Remove deprecated PARI code
 * #21703: Interface PARI precision in bits
 * #21806: Allow multiple instances of the `PariInstance` object
-* #21807: Move gentoobj and rename it to gentosage
-* #21808: Change gen.python() to return Python objects
+* #21807: Move `gentoobj` and rename it to `gentosage`
+* #21808: Change `gen.python()` to return Python objects
 * #21809: Pythonize deprecation warnings in PARI interface
+* #21810: Move calculation of PARI stack size out of `__init__`
 
 PARI upgrades:
 
``````




---

archive/issue_comments_293703.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -23,6 +23,7 @@\n * #21808: Change `gen.python()` to return Python objects\n * #21809: Pythonize deprecation warnings in PARI interface\n * #21810: Move calculation of PARI stack size out of `__init__`\n+* #21820: Split `src/sage/libs/pari`\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2016-11-04T14:40:40Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293703",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -23,6 +23,7 @@
 * #21808: Change `gen.python()` to return Python objects
 * #21809: Pythonize deprecation warnings in PARI interface
 * #21810: Move calculation of PARI stack size out of `__init__`
+* #21820: Split `src/sage/libs/pari`
 
 PARI upgrades:
 
``````




---

archive/issue_comments_293704.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -23,7 +23,6 @@\n * #21808: Change `gen.python()` to return Python objects\n * #21809: Pythonize deprecation warnings in PARI interface\n * #21810: Move calculation of PARI stack size out of `__init__`\n-* #21820: Split `src/sage/libs/pari`\n \n PARI upgrades:\n \n@@ -40,3 +39,7 @@\n * #20767: Move coercion to Element\n * #21163: In richcmp, fall back to reversed operation if coercion fails\n * #21158: Decouple PARI from coercion model\n+\n+Move the PARI interface to a new package:\n+\n+* #21820: Split `src/sage/libs/pari`\n``````\n",
    "created_at": "2016-11-04T14:42:53Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293704",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -23,7 +23,6 @@
 * #21808: Change `gen.python()` to return Python objects
 * #21809: Pythonize deprecation warnings in PARI interface
 * #21810: Move calculation of PARI stack size out of `__init__`
-* #21820: Split `src/sage/libs/pari`
 
 PARI upgrades:
 
@@ -40,3 +39,7 @@
 * #20767: Move coercion to Element
 * #21163: In richcmp, fall back to reversed operation if coercion fails
 * #21158: Decouple PARI from coercion model
+
+Move the PARI interface to a new package:
+
+* #21820: Split `src/sage/libs/pari`
``````




---

archive/issue_comments_293705.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -43,3 +43,4 @@\n Move the PARI interface to a new package:\n \n * #21820: Split `src/sage/libs/pari`\n+* #21821: Do not hardcode path of `pari.desc`\n``````\n",
    "created_at": "2016-11-04T15:01:38Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293705",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -43,3 +43,4 @@
 Move the PARI interface to a new package:
 
 * #21820: Split `src/sage/libs/pari`
+* #21821: Do not hardcode path of `pari.desc`
``````




---

archive/issue_comments_293706.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -43,4 +43,4 @@\n Move the PARI interface to a new package:\n \n * #21820: Split `src/sage/libs/pari`\n-* #21821: Do not hardcode path of `pari.desc`\n+* #21821: Avoid Sage-specific variables in `autogen/pari`\n``````\n",
    "created_at": "2016-11-07T18:56:26Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293706",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -43,4 +43,4 @@
 Move the PARI interface to a new package:
 
 * #21820: Split `src/sage/libs/pari`
-* #21821: Do not hardcode path of `pari.desc`
+* #21821: Avoid Sage-specific variables in `autogen/pari`
``````




---

archive/issue_comments_293707.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -44,3 +44,4 @@\n \n * #21820: Split `src/sage/libs/pari`\n * #21821: Avoid Sage-specific variables in `autogen/pari`\n+* #21874: Make autogen/pari Python 3 compatible\n``````\n",
    "created_at": "2016-11-13T22:50:49Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293707",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -44,3 +44,4 @@
 
 * #21820: Split `src/sage/libs/pari`
 * #21821: Avoid Sage-specific variables in `autogen/pari`
+* #21874: Make autogen/pari Python 3 compatible
``````




---

archive/issue_comments_293708.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -28,7 +28,7 @@\n \n * #20581: Upgrade PARI to latest master\n * #21005: Update PARI to version 2.8.0\n-* #21756: Update PARI to version 2.9.0\n+* #21756: Update PARI to version 2.9.1\n \n Decouple CyPari from the Sage coercion model:\n \n``````\n",
    "created_at": "2017-01-09T15:41:49Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293708",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -28,7 +28,7 @@
 
 * #20581: Upgrade PARI to latest master
 * #21005: Update PARI to version 2.8.0
-* #21756: Update PARI to version 2.9.0
+* #21756: Update PARI to version 2.9.1
 
 Decouple CyPari from the Sage coercion model:
 
``````




---

archive/issue_comments_293709.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -23,6 +23,7 @@\n * #21808: Change `gen.python()` to return Python objects\n * #21809: Pythonize deprecation warnings in PARI interface\n * #21810: Move calculation of PARI stack size out of `__init__`\n+* #22183: Rename `PariInstance` -> `Pari`\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2017-01-12T21:44:26Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293709",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -23,6 +23,7 @@
 * #21808: Change `gen.python()` to return Python objects
 * #21809: Pythonize deprecation warnings in PARI interface
 * #21810: Move calculation of PARI stack size out of `__init__`
+* #22183: Rename `PariInstance` -> `Pari`
 
 PARI upgrades:
 
``````




---

archive/issue_comments_293710.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -46,3 +46,4 @@\n * #21820: Split `src/sage/libs/pari`\n * #21821: Avoid Sage-specific variables in `autogen/pari`\n * #21874: Make autogen/pari Python 3 compatible\n+* #22193: Move Sage doctests into standalone tests in `src/tests`\n``````\n",
    "created_at": "2017-01-16T18:40:15Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293710",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -46,3 +46,4 @@
 * #21820: Split `src/sage/libs/pari`
 * #21821: Avoid Sage-specific variables in `autogen/pari`
 * #21874: Make autogen/pari Python 3 compatible
+* #22193: Move Sage doctests into standalone tests in `src/tests`
``````




---

archive/issue_comments_293711.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -24,6 +24,8 @@\n * #21809: Pythonize deprecation warnings in PARI interface\n * #21810: Move calculation of PARI stack size out of `__init__`\n * #22183: Rename `PariInstance` -> `Pari`\n+* #22185: Rename `gen` -> `Gen`\n+* #22195: Allow compiling PARI interface without `anal.h`\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2017-01-17T08:15:16Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293711",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -24,6 +24,8 @@
 * #21809: Pythonize deprecation warnings in PARI interface
 * #21810: Move calculation of PARI stack size out of `__init__`
 * #22183: Rename `PariInstance` -> `Pari`
+* #22185: Rename `gen` -> `Gen`
+* #22195: Allow compiling PARI interface without `anal.h`
 
 PARI upgrades:
 
``````




---

archive/issue_comments_293712.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -49,3 +49,4 @@\n * #21821: Avoid Sage-specific variables in `autogen/pari`\n * #21874: Make autogen/pari Python 3 compatible\n * #22193: Move Sage doctests into standalone tests in `src/tests`\n+* #22198: Python 3 compatibility for strings vs unicode\n``````\n",
    "created_at": "2017-01-17T18:10:33Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293712",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -49,3 +49,4 @@
 * #21821: Avoid Sage-specific variables in `autogen/pari`
 * #21874: Make autogen/pari Python 3 compatible
 * #22193: Move Sage doctests into standalone tests in `src/tests`
+* #22198: Python 3 compatibility for strings vs unicode
``````




---

archive/issue_comments_293713.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -26,6 +26,7 @@\n * #22183: Rename `PariInstance` -> `Pari`\n * #22185: Rename `gen` -> `Gen`\n * #22195: Allow compiling PARI interface without `anal.h`\n+* #22165: Stop using deprecated PARI function polred()\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2017-01-19T16:54:40Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293713",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -26,6 +26,7 @@
 * #22183: Rename `PariInstance` -> `Pari`
 * #22185: Rename `gen` -> `Gen`
 * #22195: Allow compiling PARI interface without `anal.h`
+* #22165: Stop using deprecated PARI function polred()
 
 PARI upgrades:
 
``````




---

archive/issue_comments_293714.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -26,7 +26,7 @@\n * #22183: Rename `PariInstance` -> `Pari`\n * #22185: Rename `gen` -> `Gen`\n * #22195: Allow compiling PARI interface without `anal.h`\n-* #22165: Stop using deprecated PARI function polred()\n+* #22165: Stop using deprecated PARI function `polred()`\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2017-01-19T17:30:04Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293714",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -26,7 +26,7 @@
 * #22183: Rename `PariInstance` -> `Pari`
 * #22185: Rename `gen` -> `Gen`
 * #22195: Allow compiling PARI interface without `anal.h`
-* #22165: Stop using deprecated PARI function polred()
+* #22165: Stop using deprecated PARI function `polred()`
 
 PARI upgrades:
 
``````




---

archive/issue_comments_293715.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -27,6 +27,7 @@\n * #22185: Rename `gen` -> `Gen`\n * #22195: Allow compiling PARI interface without `anal.h`\n * #22165: Stop using deprecated PARI function `polred()`\n+* #22210: Remove obsolete special case in PARI `Gen.eval()`\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2017-01-19T18:12:28Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293715",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -27,6 +27,7 @@
 * #22185: Rename `gen` -> `Gen`
 * #22195: Allow compiling PARI interface without `anal.h`
 * #22165: Stop using deprecated PARI function `polred()`
+* #22210: Remove obsolete special case in PARI `Gen.eval()`
 
 PARI upgrades:
 
``````




---

archive/issue_comments_293716.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -51,4 +51,4 @@\n * #21821: Avoid Sage-specific variables in `autogen/pari`\n * #21874: Make autogen/pari Python 3 compatible\n * #22193: Move Sage doctests into standalone tests in `src/tests`\n-* #22198: Python 3 compatibility for strings vs unicode\n+* #22198: Make cypari2 Python2 / Python3 compatible\n``````\n",
    "created_at": "2017-01-19T21:58:50Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293716",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -51,4 +51,4 @@
 * #21821: Avoid Sage-specific variables in `autogen/pari`
 * #21874: Make autogen/pari Python 3 compatible
 * #22193: Move Sage doctests into standalone tests in `src/tests`
-* #22198: Python 3 compatibility for strings vs unicode
+* #22198: Make cypari2 Python2 / Python3 compatible
``````




---

archive/issue_comments_293717.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -28,6 +28,8 @@\n * #22195: Allow compiling PARI interface without `anal.h`\n * #22165: Stop using deprecated PARI function `polred()`\n * #22210: Remove obsolete special case in PARI `Gen.eval()`\n+* #22221: Fix dependency on PARI headers\n+* #22222: Remove `pari_instance` global in `gen.pyx`\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2017-01-21T11:43:23Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293717",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -28,6 +28,8 @@
 * #22195: Allow compiling PARI interface without `anal.h`
 * #22165: Stop using deprecated PARI function `polred()`
 * #22210: Remove obsolete special case in PARI `Gen.eval()`
+* #22221: Fix dependency on PARI headers
+* #22222: Remove `pari_instance` global in `gen.pyx`
 
 PARI upgrades:
 
``````




---

archive/issue_comments_293718.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -54,3 +54,5 @@\n * #21874: Make autogen/pari Python 3 compatible\n * #22193: Move Sage doctests into standalone tests in `src/tests`\n * #22198: Make cypari2 Python2 / Python3 compatible\n+* #22239: Don't use six in `sage_setup/autogen/pari`\n+* #22240: Use relative imports in `sage_setup/autogen/pari`\n``````\n",
    "created_at": "2017-01-23T16:47:23Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293718",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -54,3 +54,5 @@
 * #21874: Make autogen/pari Python 3 compatible
 * #22193: Move Sage doctests into standalone tests in `src/tests`
 * #22198: Make cypari2 Python2 / Python3 compatible
+* #22239: Don't use six in `sage_setup/autogen/pari`
+* #22240: Use relative imports in `sage_setup/autogen/pari`
``````




---

archive/issue_comments_293719.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -56,3 +56,4 @@\n * #22198: Make cypari2 Python2 / Python3 compatible\n * #22239: Don't use six in `sage_setup/autogen/pari`\n * #22240: Use relative imports in `sage_setup/autogen/pari`\n+* #22291: `ob_size` does not exist in Python 3\n``````\n",
    "created_at": "2017-02-02T16:33:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293719",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -56,3 +56,4 @@
 * #22198: Make cypari2 Python2 / Python3 compatible
 * #22239: Don't use six in `sage_setup/autogen/pari`
 * #22240: Use relative imports in `sage_setup/autogen/pari`
+* #22291: `ob_size` does not exist in Python 3
``````




---

archive/issue_comments_293720.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -30,6 +30,7 @@\n * #22210: Remove obsolete special case in PARI `Gen.eval()`\n * #22221: Fix dependency on PARI headers\n * #22222: Remove `pari_instance` global in `gen.pyx`\n+* #22319: Implement `__index__` for PARI `Gen`\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2017-02-07T08:27:00Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293720",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -30,6 +30,7 @@
 * #22210: Remove obsolete special case in PARI `Gen.eval()`
 * #22221: Fix dependency on PARI headers
 * #22222: Remove `pari_instance` global in `gen.pyx`
+* #22319: Implement `__index__` for PARI `Gen`
 
 PARI upgrades:
 
``````




---

archive/issue_comments_293721.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -31,6 +31,7 @@\n * #22221: Fix dependency on PARI headers\n * #22222: Remove `pari_instance` global in `gen.pyx`\n * #22319: Implement `__index__` for PARI `Gen`\n+* #22321: `Gen.__init__()` does not work as expected\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2017-02-07T14:10:05Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293721",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -31,6 +31,7 @@
 * #22221: Fix dependency on PARI headers
 * #22222: Remove `pari_instance` global in `gen.pyx`
 * #22319: Implement `__index__` for PARI `Gen`
+* #22321: `Gen.__init__()` does not work as expected
 
 PARI upgrades:
 
``````




---

archive/issue_comments_293722.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -38,6 +38,7 @@\n * #20581: Upgrade PARI to latest master\n * #21005: Update PARI to version 2.8.0\n * #21756: Update PARI to version 2.9.1\n+* #22276: Fix PARI patches\n \n Decouple CyPari from the Sage coercion model:\n \n``````\n",
    "created_at": "2017-02-10T08:29:43Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293722",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -38,6 +38,7 @@
 * #20581: Upgrade PARI to latest master
 * #21005: Update PARI to version 2.8.0
 * #21756: Update PARI to version 2.9.1
+* #22276: Fix PARI patches
 
 Decouple CyPari from the Sage coercion model:
 
``````




---

archive/issue_comments_293723.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -60,3 +60,4 @@\n * #22239: Don't use six in `sage_setup/autogen/pari`\n * #22240: Use relative imports in `sage_setup/autogen/pari`\n * #22291: `ob_size` does not exist in Python 3\n+* #22470: Replace `_pari_` -> `__pari__`\n``````\n",
    "created_at": "2017-02-28T11:18:59Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293723",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -60,3 +60,4 @@
 * #22239: Don't use six in `sage_setup/autogen/pari`
 * #22240: Use relative imports in `sage_setup/autogen/pari`
 * #22291: `ob_size` does not exist in Python 3
+* #22470: Replace `_pari_` -> `__pari__`
``````




---

archive/issue_comments_293724.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -32,6 +32,7 @@\n * #22222: Remove `pari_instance` global in `gen.pyx`\n * #22319: Implement `__index__` for PARI `Gen`\n * #22321: `Gen.__init__()` does not work as expected\n+* #22471: `Gen`: clean up \"`new_ref`\" mechanism\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2017-02-28T19:28:49Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293724",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -32,6 +32,7 @@
 * #22222: Remove `pari_instance` global in `gen.pyx`
 * #22319: Implement `__index__` for PARI `Gen`
 * #22321: `Gen.__init__()` does not work as expected
+* #22471: `Gen`: clean up "`new_ref`" mechanism
 
 PARI upgrades:
 
``````




---

archive/issue_comments_293725.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -33,6 +33,7 @@\n * #22319: Implement `__index__` for PARI `Gen`\n * #22321: `Gen.__init__()` does not work as expected\n * #22471: `Gen`: clean up \"`new_ref`\" mechanism\n+* #22561: Implement `__iter__` for PARI `Gen`\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2017-03-10T10:56:29Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293725",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -33,6 +33,7 @@
 * #22319: Implement `__index__` for PARI `Gen`
 * #22321: `Gen.__init__()` does not work as expected
 * #22471: `Gen`: clean up "`new_ref`" mechanism
+* #22561: Implement `__iter__` for PARI `Gen`
 
 PARI upgrades:
 
``````




---

archive/issue_comments_293726.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -31,7 +31,6 @@\n * #22221: Fix dependency on PARI headers\n * #22222: Remove `pari_instance` global in `gen.pyx`\n * #22319: Implement `__index__` for PARI `Gen`\n-* #22321: `Gen.__init__()` does not work as expected\n * #22471: `Gen`: clean up \"`new_ref`\" mechanism\n * #22561: Implement `__iter__` for PARI `Gen`\n \n@@ -41,6 +40,7 @@\n * #21005: Update PARI to version 2.8.0\n * #21756: Update PARI to version 2.9.1\n * #22276: Fix PARI patches\n+* #22675: Upgrade PARI to version 2.9.2\n \n Decouple CyPari from the Sage coercion model:\n \n@@ -63,3 +63,7 @@\n * #22240: Use relative imports in `sage_setup/autogen/pari`\n * #22291: `ob_size` does not exist in Python 3\n * #22470: Replace `_pari_` -> `__pari__`\n+\n+To be fixed in `CyPari2`:\n+\n+* #22321: `Gen.__init__()` does not work as expected\n``````\n",
    "created_at": "2017-03-28T12:30:48Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293726",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -31,7 +31,6 @@
 * #22221: Fix dependency on PARI headers
 * #22222: Remove `pari_instance` global in `gen.pyx`
 * #22319: Implement `__index__` for PARI `Gen`
-* #22321: `Gen.__init__()` does not work as expected
 * #22471: `Gen`: clean up "`new_ref`" mechanism
 * #22561: Implement `__iter__` for PARI `Gen`
 
@@ -41,6 +40,7 @@
 * #21005: Update PARI to version 2.8.0
 * #21756: Update PARI to version 2.9.1
 * #22276: Fix PARI patches
+* #22675: Upgrade PARI to version 2.9.2
 
 Decouple CyPari from the Sage coercion model:
 
@@ -63,3 +63,7 @@
 * #22240: Use relative imports in `sage_setup/autogen/pari`
 * #22291: `ob_size` does not exist in Python 3
 * #22470: Replace `_pari_` -> `__pari__`
+
+To be fixed in `CyPari2`:
+
+* #22321: `Gen.__init__()` does not work as expected
``````




---

archive/issue_comments_293727.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -33,6 +33,7 @@\n * #22319: Implement `__index__` for PARI `Gen`\n * #22471: `Gen`: clean up \"`new_ref`\" mechanism\n * #22561: Implement `__iter__` for PARI `Gen`\n+* #22584: Debug build doctests fail with `sig_block() with sig_on_count = 1, block_sigint = 1`\n \n PARI upgrades:\n \n``````\n",
    "created_at": "2017-03-28T13:31:52Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293727",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -33,6 +33,7 @@
 * #22319: Implement `__index__` for PARI `Gen`
 * #22471: `Gen`: clean up "`new_ref`" mechanism
 * #22561: Implement `__iter__` for PARI `Gen`
+* #22584: Debug build doctests fail with `sig_block() with sig_on_count = 1, block_sigint = 1`
 
 PARI upgrades:
 
``````




---

archive/issue_events_181728.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-31T08:50:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20238#event-181728"
}
```



---

archive/issue_events_181729.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-31T08:50:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20238#event-181729"
}
```



---

archive/issue_comments_293728.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2017-03-31T08:50:00Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293728",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_293729.json:
```json
{
    "body": "<a id='comment:50'></a>\nThere is one issue which comes up regularly when dealing with Cython code. When you do something like\n\n```\ncdef extern from \"cypari.h\":\n    GEN set_gel(GEN x, long n, GEN z)              # gel(x, n) = z\n    GEN set_gmael(GEN x, long i, long j, GEN z)    # gmael(x, i, j) = z\n    GEN set_gcoeff(GEN x, long i, long j, GEN z)   # gcoeff(x, i, j) = z\n    GEN set_uel(GEN x, long n, ulong z)            # uel(x, n) = z\n```\nthe C compiler does not know where to find `cypari.h`. I had a similar issue in `cysignals`, for which I implemented an ugly work-around by auto-generating some `__init__.pxd` file (this wasn't so bad, since I needed to auto-generate that file anyway).\n\nHowever, for a proper solution, Cython should add the include directory because Cython does know where to find `cypari.h`",
    "created_at": "2017-03-31T10:22:17Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293729",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:50'></a>
There is one issue which comes up regularly when dealing with Cython code. When you do something like

```
cdef extern from "cypari.h":
    GEN set_gel(GEN x, long n, GEN z)              # gel(x, n) = z
    GEN set_gmael(GEN x, long i, long j, GEN z)    # gmael(x, i, j) = z
    GEN set_gcoeff(GEN x, long i, long j, GEN z)   # gcoeff(x, i, j) = z
    GEN set_uel(GEN x, long n, ulong z)            # uel(x, n) = z
```
the C compiler does not know where to find `cypari.h`. I had a similar issue in `cysignals`, for which I implemented an ugly work-around by auto-generating some `__init__.pxd` file (this wasn't so bad, since I needed to auto-generate that file anyway).

However, for a proper solution, Cython should add the include directory because Cython does know where to find `cypari.h`



---

archive/issue_comments_293730.json:
```json
{
    "body": "<a id='comment:51'></a>\nSo the plan is now to add a Cython patch: #22728.",
    "created_at": "2017-03-31T10:24:40Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293730",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:51'></a>
So the plan is now to add a Cython patch: #22728.



---

archive/issue_comments_293731.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -64,6 +64,7 @@\n * #22240: Use relative imports in `sage_setup/autogen/pari`\n * #22291: `ob_size` does not exist in Python 3\n * #22470: Replace `_pari_` -> `__pari__`\n+* #22728: Patch Cython to find includes better\n \n To be fixed in `CyPari2`:\n \n``````\n",
    "created_at": "2017-03-31T10:24:40Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293731",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -64,6 +64,7 @@
 * #22240: Use relative imports in `sage_setup/autogen/pari`
 * #22291: `ob_size` does not exist in Python 3
 * #22470: Replace `_pari_` -> `__pari__`
+* #22728: Patch Cython to find includes better
 
 To be fixed in `CyPari2`:
 
``````




---

archive/issue_comments_293732.json:
```json
{
    "body": "**Dependencies:** #22728",
    "created_at": "2017-03-31T15:17:12Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293732",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #22728



---

archive/issue_comments_293733.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/move_the_sage_____pari_interface_to_a_stand_alone_package_cypari](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/move_the_sage_____pari_interface_to_a_stand_alone_package_cypari)",
    "created_at": "2017-03-31T15:24:11Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293733",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/move_the_sage_____pari_interface_to_a_stand_alone_package_cypari](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/move_the_sage_____pari_interface_to_a_stand_alone_package_cypari)



---

archive/issue_comments_293734.json:
```json
{
    "body": "<a id='comment:54'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3005c02342b2a0173b534e63bc61068069d2eb3\">c3005c0</a></td><td><code>Add cypari2 package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5be743be5f14e8b4e7d8823d40ab535cfca822ab\">5be743b</a></td><td><code>Remove cypari2 from Sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90f3abaa095a3cd5798645428c7103c6d1c65c01\">90f3aba</a></td><td><code>Replace sage.libs.cypari2 by cypari2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/526cf1374aee6ba652c39f66d3b183070081da26\">526cf13</a></td><td><code>Remove deprecated file src/sage/libs/pari/decl.pxi</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e4e13f48dcf779dcb74e3e8f307b48876c49807\">8e4e13f</a></td><td><code>Clean up imports</code></td></tr></table>\n",
    "created_at": "2017-03-31T16:49:09Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293734",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3005c02342b2a0173b534e63bc61068069d2eb3">c3005c0</a></td><td><code>Add cypari2 package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5be743be5f14e8b4e7d8823d40ab535cfca822ab">5be743b</a></td><td><code>Remove cypari2 from Sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90f3abaa095a3cd5798645428c7103c6d1c65c01">90f3aba</a></td><td><code>Replace sage.libs.cypari2 by cypari2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/526cf1374aee6ba652c39f66d3b183070081da26">526cf13</a></td><td><code>Remove deprecated file src/sage/libs/pari/decl.pxi</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e4e13f48dcf779dcb74e3e8f307b48876c49807">8e4e13f</a></td><td><code>Clean up imports</code></td></tr></table>




---

archive/issue_comments_293735.json:
```json
{
    "body": "**Commit:** [8e4e13f48dcf779dcb74e3e8f307b48876c49807](https://github.com/sagemath/sagetrac-mirror/commit/8e4e13f48dcf779dcb74e3e8f307b48876c49807)",
    "created_at": "2017-03-31T16:49:09Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293735",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [8e4e13f48dcf779dcb74e3e8f307b48876c49807](https://github.com/sagemath/sagetrac-mirror/commit/8e4e13f48dcf779dcb74e3e8f307b48876c49807)



---

archive/issue_comments_293736.json:
```json
{
    "body": "**Changing commit** from \"[8e4e13f48dcf779dcb74e3e8f307b48876c49807](https://github.com/sagemath/sagetrac-mirror/commit/8e4e13f48dcf779dcb74e3e8f307b48876c49807)\" to \"[38124963163999f6972328e6a916c80a7e3bcd6b](https://github.com/sagemath/sagetrac-mirror/commit/38124963163999f6972328e6a916c80a7e3bcd6b)\".",
    "created_at": "2017-03-31T18:29:47Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293736",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8e4e13f48dcf779dcb74e3e8f307b48876c49807](https://github.com/sagemath/sagetrac-mirror/commit/8e4e13f48dcf779dcb74e3e8f307b48876c49807)" to "[38124963163999f6972328e6a916c80a7e3bcd6b](https://github.com/sagemath/sagetrac-mirror/commit/38124963163999f6972328e6a916c80a7e3bcd6b)".



---

archive/issue_comments_293737.json:
```json
{
    "body": "<a id='comment:55'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38124963163999f6972328e6a916c80a7e3bcd6b\">3812496</a></td><td><code>Clean up imports</code></td></tr></table>\n",
    "created_at": "2017-03-31T18:29:47Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293737",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38124963163999f6972328e6a916c80a7e3bcd6b">3812496</a></td><td><code>Clean up imports</code></td></tr></table>




---

archive/issue_events_181730.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-31T20:16:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20238#event-181730"
}
```



---

archive/issue_comments_293738.json:
```json
{
    "body": "**Changing commit** from \"[38124963163999f6972328e6a916c80a7e3bcd6b](https://github.com/sagemath/sagetrac-mirror/commit/38124963163999f6972328e6a916c80a7e3bcd6b)\" to \"[a56fffe5458202647f66f338a94a9024a0e83a88](https://github.com/sagemath/sagetrac-mirror/commit/a56fffe5458202647f66f338a94a9024a0e83a88)\".",
    "created_at": "2017-04-01T09:20:48Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293738",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[38124963163999f6972328e6a916c80a7e3bcd6b](https://github.com/sagemath/sagetrac-mirror/commit/38124963163999f6972328e6a916c80a7e3bcd6b)" to "[a56fffe5458202647f66f338a94a9024a0e83a88](https://github.com/sagemath/sagetrac-mirror/commit/a56fffe5458202647f66f338a94a9024a0e83a88)".



---

archive/issue_comments_293739.json:
```json
{
    "body": "<a id='comment:57'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e3575064f9e85b00e292b3bd6ca53cb86ba5ece\">5e35750</a></td><td><code>Add cypari2 package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35af412357b678cfc224651185025a4198e04b64\">35af412</a></td><td><code>Remove cypari2 from Sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3650f16adb8924aa8e0f2fa0809629ab3c6d3fc9\">3650f16</a></td><td><code>Replace sage.libs.cypari2 by cypari2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e895bc4730d163d7c39ab3d8f790cebefd63fd1b\">e895bc4</a></td><td><code>Remove deprecated file src/sage/libs/pari/decl.pxi</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a56fffe5458202647f66f338a94a9024a0e83a88\">a56fffe</a></td><td><code>Clean up imports</code></td></tr></table>\n",
    "created_at": "2017-04-01T09:20:48Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293739",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e3575064f9e85b00e292b3bd6ca53cb86ba5ece">5e35750</a></td><td><code>Add cypari2 package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35af412357b678cfc224651185025a4198e04b64">35af412</a></td><td><code>Remove cypari2 from Sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3650f16adb8924aa8e0f2fa0809629ab3c6d3fc9">3650f16</a></td><td><code>Replace sage.libs.cypari2 by cypari2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e895bc4730d163d7c39ab3d8f790cebefd63fd1b">e895bc4</a></td><td><code>Remove deprecated file src/sage/libs/pari/decl.pxi</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a56fffe5458202647f66f338a94a9024a0e83a88">a56fffe</a></td><td><code>Clean up imports</code></td></tr></table>




---

archive/issue_comments_293740.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -69,3 +69,5 @@\n To be fixed in `CyPari2`:\n \n * #22321: `Gen.__init__()` does not work as expected\n+\n+**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/cypari2-1.0.0.tar.bz2\n``````\n",
    "created_at": "2017-04-01T09:21:21Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293740",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -69,3 +69,5 @@
 To be fixed in `CyPari2`:
 
 * #22321: `Gen.__init__()` does not work as expected
+
+**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/cypari2-1.0.0.tar.bz2
``````




---

archive/issue_comments_293741.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -70,4 +70,4 @@\n \n * #22321: `Gen.__init__()` does not work as expected\n \n-**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/cypari2-1.0.0.tar.bz2\n+**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/cypari2-1.0.0.tar.bz2 (see https://github.com/defeo/cypari2/pull/11)\n``````\n",
    "created_at": "2017-04-01T09:22:29Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293741",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -70,4 +70,4 @@
 
 * #22321: `Gen.__init__()` does not work as expected
 
-**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/cypari2-1.0.0.tar.bz2
+**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/cypari2-1.0.0.tar.bz2 (see https://github.com/defeo/cypari2/pull/11)
``````




---

archive/issue_comments_293742.json:
```json
{
    "body": "<a id='comment:60'></a>\nAnother solution would be to install the header into a standard location using `headers` option of `distutils.core.setup`. See https://docs.python.org/3/distutils/setupscript.html#preprocessor-options for why that works.\n\nIf you do that, you need to change `cdef extern from \"cypari.h\":` to `cdef extern from \"cypari2/cypari.h\":` because distutils will install `cypari.h` to `cypari2/cypari.h`",
    "created_at": "2017-04-22T01:53:30Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293742",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:60'></a>
Another solution would be to install the header into a standard location using `headers` option of `distutils.core.setup`. See https://docs.python.org/3/distutils/setupscript.html#preprocessor-options for why that works.

If you do that, you need to change `cdef extern from "cypari.h":` to `cdef extern from "cypari2/cypari.h":` because distutils will install `cypari.h` to `cypari2/cypari.h`



---

archive/issue_comments_293743.json:
```json
{
    "body": "<a id='comment:61'></a>\nReplying to [isuruf](#comment%3A60):\n> Another solution would be to install the header into a standard location using `headers` option of `distutils.core.setup`. See https://docs.python.org/3/distutils/setupscript.html#preprocessor-options for why that works.\n\n\nRight. However, it seems that Python packages rarely use this option. I wonder if there is a reason for that...",
    "created_at": "2017-04-22T13:33:02Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293743",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:61'></a>
Replying to [isuruf](#comment%3A60):
> Another solution would be to install the header into a standard location using `headers` option of `distutils.core.setup`. See https://docs.python.org/3/distutils/setupscript.html#preprocessor-options for why that works.


Right. However, it seems that Python packages rarely use this option. I wonder if there is a reason for that...



---

archive/issue_comments_293744.json:
```json
{
    "body": "<a id='comment:62'></a>\nReading that page https://docs.python.org/3/distutils/setupscript.html#preprocessor-options better, it only talks about what you need to do in order to compile against the header. It doesn't say how to actually install the headers.\n\nHere is a \"interesting\" post about Python header files: https://github.com/pypa/packaging-problems/issues/84",
    "created_at": "2017-04-23T08:05:58Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293744",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:62'></a>
Reading that page https://docs.python.org/3/distutils/setupscript.html#preprocessor-options better, it only talks about what you need to do in order to compile against the header. It doesn't say how to actually install the headers.

Here is a "interesting" post about Python header files: https://github.com/pypa/packaging-problems/issues/84



---

archive/issue_comments_293745.json:
```json
{
    "body": "<a id='comment:64'></a>\nThis looks pretty trivial and good.\nMy only concern is: is it cypari or cypari2?",
    "created_at": "2017-04-25T12:14:34Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293745",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:64'></a>
This looks pretty trivial and good.
My only concern is: is it cypari or cypari2?



---

archive/issue_comments_293746.json:
```json
{
    "body": "<a id='comment:65'></a>\nReplying to [jpflori](#comment%3A64):\n> My only concern is: is it cypari or cypari2?\n\n\nThe Python package is currently called CyPari2, but the goal is to merge it with CyPari.",
    "created_at": "2017-04-25T12:36:41Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293746",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:65'></a>
Replying to [jpflori](#comment%3A64):
> My only concern is: is it cypari or cypari2?


The Python package is currently called CyPari2, but the goal is to merge it with CyPari.



---

archive/issue_events_181731.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2017-04-25T12:50:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20238#event-181731"
}
```



---

archive/issue_events_181732.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2017-04-25T12:50:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20238#event-181732"
}
```



---

archive/issue_comments_293747.json:
```json
{
    "body": "**Reviewer:** Jean-Pierre Flori",
    "created_at": "2017-04-25T12:50:14Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293747",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Reviewer:** Jean-Pierre Flori



---

archive/issue_comments_293748.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/move_the_sage_____pari_interface_to_a_stand_alone_package_cypari](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/move_the_sage_____pari_interface_to_a_stand_alone_package_cypari)\" to \"[a56fffe5458202647f66f338a94a9024a0e83a88](https://github.com/sagemath/sagetrac-mirror/commit/a56fffe5458202647f66f338a94a9024a0e83a88)\".",
    "created_at": "2017-04-27T20:11:55Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293748",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/move_the_sage_____pari_interface_to_a_stand_alone_package_cypari](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/move_the_sage_____pari_interface_to_a_stand_alone_package_cypari)" to "[a56fffe5458202647f66f338a94a9024a0e83a88](https://github.com/sagemath/sagetrac-mirror/commit/a56fffe5458202647f66f338a94a9024a0e83a88)".



---

archive/issue_events_181733.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-27T20:11:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20238#event-181733"
}
```



---

archive/issue_events_181734.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ffab656a4fa0a0a921581bbee044ed6e4f182bd6",
    "created_at": "2017-04-27T20:11:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20238#event-181734"
}
```



---

archive/issue_comments_293749.json:
```json
{
    "body": "<a id='comment:68'></a>\nGreat news! I will officially release CyPari2-1.0.0 then and put it on pypi.",
    "created_at": "2017-04-28T07:00:59Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293749",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:68'></a>
Great news! I will officially release CyPari2-1.0.0 then and put it on pypi.



---

archive/issue_comments_293750.json:
```json
{
    "body": "**Changing commit** from \"[a56fffe5458202647f66f338a94a9024a0e83a88](https://github.com/sagemath/sagetrac-mirror/commit/a56fffe5458202647f66f338a94a9024a0e83a88)\" to \"\".",
    "created_at": "2017-04-28T07:00:59Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293750",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[a56fffe5458202647f66f338a94a9024a0e83a88](https://github.com/sagemath/sagetrac-mirror/commit/a56fffe5458202647f66f338a94a9024a0e83a88)" to "".



---

archive/issue_comments_293751.json:
```json
{
    "body": "<a id='comment:69'></a>\nAfter updating to the latest beta, I have some stale autogenerated files in `src/sage/lib/cypari2`: the ones listed in the now deleted `.gitignore` file. Should it be the job of the CyPari2 `spkg-install` file to delete those?",
    "created_at": "2017-04-28T20:17:26Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293751",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:69'></a>
After updating to the latest beta, I have some stale autogenerated files in `src/sage/lib/cypari2`: the ones listed in the now deleted `.gitignore` file. Should it be the job of the CyPari2 `spkg-install` file to delete those?



---

archive/issue_comments_293752.json:
```json
{
    "body": "<a id='comment:70'></a>\nReplying to [jhpalmieri](#comment%3A69):\n> After updating to the latest beta, I have some stale autogenerated files in `src/sage/lib/cypari2`: the ones listed in the now deleted `.gitignore` file. Should it be the job of the CyPari2 `spkg-install` file to delete those?\n\n\nThey were just not removed because not tracked by git, aren't they?",
    "created_at": "2017-04-28T20:21:03Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293752",
    "user": "https://github.com/videlec"
}
```

<a id='comment:70'></a>
Replying to [jhpalmieri](#comment%3A69):
> After updating to the latest beta, I have some stale autogenerated files in `src/sage/lib/cypari2`: the ones listed in the now deleted `.gitignore` file. Should it be the job of the CyPari2 `spkg-install` file to delete those?


They were just not removed because not tracked by git, aren't they?



---

archive/issue_comments_293753.json:
```json
{
    "body": "<a id='comment:71'></a>\nReplying to [vdelecroix](#comment%3A70):\n> Replying to [jhpalmieri](#comment%3A69):\n> > After updating to the latest beta, I have some stale autogenerated files in `src/sage/lib/cypari2`: the ones listed in the now deleted `.gitignore` file. Should it be the job of the CyPari2 `spkg-install` file to delete those?\n\n> \n> They were just not removed because not tracked by git, aren't they?\n\n\nRight: since they are not tracked by git, they were not removed. And since the `src/sage/libs/cypari2/.gitignore` file was removed, they are no longer ignored.",
    "created_at": "2017-04-28T20:53:19Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293753",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:71'></a>
Replying to [vdelecroix](#comment%3A70):
> Replying to [jhpalmieri](#comment%3A69):
> > After updating to the latest beta, I have some stale autogenerated files in `src/sage/lib/cypari2`: the ones listed in the now deleted `.gitignore` file. Should it be the job of the CyPari2 `spkg-install` file to delete those?

> 
> They were just not removed because not tracked by git, aren't they?


Right: since they are not tracked by git, they were not removed. And since the `src/sage/libs/cypari2/.gitignore` file was removed, they are no longer ignored.



---

archive/issue_comments_293754.json:
```json
{
    "body": "<a id='comment:72'></a>\nReplying to [jhpalmieri](#comment%3A69):\n> Should it be the job of the CyPari2 `spkg-install` file to delete those?\n\n\nCertainly not (separation of concerns: the `cypari2` package and the Sage library are two independent things).\n\nBut `src/setup.py` could delete those files.",
    "created_at": "2017-04-29T09:16:56Z",
    "issue": "https://github.com/sagemath/sage/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20238#issuecomment-293754",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:72'></a>
Replying to [jhpalmieri](#comment%3A69):
> Should it be the job of the CyPari2 `spkg-install` file to delete those?


Certainly not (separation of concerns: the `cypari2` package and the Sage library are two independent things).

But `src/setup.py` could delete those files.
