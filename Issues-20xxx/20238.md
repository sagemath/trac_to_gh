# Issue 20238: Move the Sage <-> PARI interface to a stand-alone package CyPari

archive/issues_020001.json:
```json
{
    "body": "CC:  @defeo @slel @videlec @miguelmarco jpflori\n\nKeywords: Pari\n\nNeeds cysignals:\n\n* #20002: Move interrupt.pyx to package cysignals\n* #20210: Move memory functions to cysignals\n\nCleanup of PARI interface:\n\n* #20205: Clean up factoring PARI interface\n* #20213: Replace pari_catch_sig_on by sig_on\n* #20216: Deprecate PARI nth_prime, prime_list, primes_up_to_n\n* #20217: Remove redundant functions from pari_instance.pyx\n* #20219: Remove redundant functions from gen.pyx\n* #20224: Auto-generated PARI functions sometimes return 0 instead of None\n* #20226: Implement conversion PARI <-> Python int/long without GMP/MPIR\n* #20241: Separate Sage-specific components from generic C-interface in PariInstance\n* #20257: Deprecate undocumented arguments to PARI functions\n* #20352: Initialize PARI constants in `PariInstance.__init__`\n* #20473: Remove global pari_instance variable\n* #20486: Remove deprecated PARI code\n* #21703: Interface PARI precision in bits\n* #21806: Allow multiple instances of the `PariInstance` object\n* #21807: Move `gentoobj` and rename it to `gentosage`\n* #21808: Change `gen.python()` to return Python objects\n* #21809: Pythonize deprecation warnings in PARI interface\n* #21810: Move calculation of PARI stack size out of `__init__`\n* #22183: Rename `PariInstance` -> `Pari`\n* #22185: Rename `gen` -> `Gen`\n* #22195: Allow compiling PARI interface without `anal.h`\n* #22165: Stop using deprecated PARI function `polred()`\n* #22210: Remove obsolete special case in PARI `Gen.eval()`\n* #22221: Fix dependency on PARI headers\n* #22222: Remove `pari_instance` global in `gen.pyx`\n* #22319: Implement `__index__` for PARI `Gen`\n* #22471: `Gen`: clean up \"`new_ref`\" mechanism\n* #22561: Implement `__iter__` for PARI `Gen`\n* #22584: Debug build doctests fail with `sig_block() with sig_on_count = 1, block_sigint = 1`\n\nPARI upgrades:\n\n* #20581: Upgrade PARI to latest master\n* #21005: Update PARI to version 2.8.0\n* #21756: Update PARI to version 2.9.1\n* #22276: Fix PARI patches\n* #22675: Upgrade PARI to version 2.9.2\n\nDecouple CyPari from the Sage coercion model:\n\n* #20740: Drop return type from arithmetic methods in coercion model\n* #20761: Drop argument types from arithmetic methods in coercion model\n* #20757: Drop argument types from comparison methods in coercion model\n* #20686: Refactor getattr_from_other_class() for lookup of methods in categories\n* #20767: Move coercion to Element\n* #21163: In richcmp, fall back to reversed operation if coercion fails\n* #21158: Decouple PARI from coercion model\n\nMove the PARI interface to a new package:\n\n* #21820: Split `src/sage/libs/pari`\n* #21821: Avoid Sage-specific variables in `autogen/pari`\n* #21874: Make autogen/pari Python 3 compatible\n* #22193: Move Sage doctests into standalone tests in `src/tests`\n* #22198: Make cypari2 Python2 / Python3 compatible\n* #22239: Don't use six in `sage_setup/autogen/pari`\n* #22240: Use relative imports in `sage_setup/autogen/pari`\n* #22291: `ob_size` does not exist in Python 3\n* #22470: Replace `_pari_` -> `__pari__`\n* #22728: Patch Cython to find includes better\n\nTo be fixed in `CyPari2`:\n\n* #22321: `Gen.__init__()` does not work as expected\n\n**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/cypari2-1.0.0.tar.bz2 (see https://github.com/defeo/cypari2/pull/11)\n\nIssue created by migration from https://trac.sagemath.org/ticket/20238\n\n",
    "closed_at": "2017-04-27T20:11:55Z",
    "created_at": "2016-03-21T13:07:46Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Move the Sage <-> PARI interface to a stand-alone package CyPari",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20238",
    "user": "https://github.com/jdemeyer"
}
```
CC:  @defeo @slel @videlec @miguelmarco jpflori

Keywords: Pari

Needs cysignals:

* #20002: Move interrupt.pyx to package cysignals
* #20210: Move memory functions to cysignals

Cleanup of PARI interface:

* #20205: Clean up factoring PARI interface
* #20213: Replace pari_catch_sig_on by sig_on
* #20216: Deprecate PARI nth_prime, prime_list, primes_up_to_n
* #20217: Remove redundant functions from pari_instance.pyx
* #20219: Remove redundant functions from gen.pyx
* #20224: Auto-generated PARI functions sometimes return 0 instead of None
* #20226: Implement conversion PARI <-> Python int/long without GMP/MPIR
* #20241: Separate Sage-specific components from generic C-interface in PariInstance
* #20257: Deprecate undocumented arguments to PARI functions
* #20352: Initialize PARI constants in `PariInstance.__init__`
* #20473: Remove global pari_instance variable
* #20486: Remove deprecated PARI code
* #21703: Interface PARI precision in bits
* #21806: Allow multiple instances of the `PariInstance` object
* #21807: Move `gentoobj` and rename it to `gentosage`
* #21808: Change `gen.python()` to return Python objects
* #21809: Pythonize deprecation warnings in PARI interface
* #21810: Move calculation of PARI stack size out of `__init__`
* #22183: Rename `PariInstance` -> `Pari`
* #22185: Rename `gen` -> `Gen`
* #22195: Allow compiling PARI interface without `anal.h`
* #22165: Stop using deprecated PARI function `polred()`
* #22210: Remove obsolete special case in PARI `Gen.eval()`
* #22221: Fix dependency on PARI headers
* #22222: Remove `pari_instance` global in `gen.pyx`
* #22319: Implement `__index__` for PARI `Gen`
* #22471: `Gen`: clean up "`new_ref`" mechanism
* #22561: Implement `__iter__` for PARI `Gen`
* #22584: Debug build doctests fail with `sig_block() with sig_on_count = 1, block_sigint = 1`

PARI upgrades:

* #20581: Upgrade PARI to latest master
* #21005: Update PARI to version 2.8.0
* #21756: Update PARI to version 2.9.1
* #22276: Fix PARI patches
* #22675: Upgrade PARI to version 2.9.2

Decouple CyPari from the Sage coercion model:

* #20740: Drop return type from arithmetic methods in coercion model
* #20761: Drop argument types from arithmetic methods in coercion model
* #20757: Drop argument types from comparison methods in coercion model
* #20686: Refactor getattr_from_other_class() for lookup of methods in categories
* #20767: Move coercion to Element
* #21163: In richcmp, fall back to reversed operation if coercion fails
* #21158: Decouple PARI from coercion model

Move the PARI interface to a new package:

* #21820: Split `src/sage/libs/pari`
* #21821: Avoid Sage-specific variables in `autogen/pari`
* #21874: Make autogen/pari Python 3 compatible
* #22193: Move Sage doctests into standalone tests in `src/tests`
* #22198: Make cypari2 Python2 / Python3 compatible
* #22239: Don't use six in `sage_setup/autogen/pari`
* #22240: Use relative imports in `sage_setup/autogen/pari`
* #22291: `ob_size` does not exist in Python 3
* #22470: Replace `_pari_` -> `__pari__`
* #22728: Patch Cython to find includes better

To be fixed in `CyPari2`:

* #22321: `Gen.__init__()` does not work as expected

**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/cypari2-1.0.0.tar.bz2 (see https://github.com/defeo/cypari2/pull/11)

Issue created by migration from https://trac.sagemath.org/ticket/20238





---

archive/issue_comments_275109.json:
```json
{
    "body": "Changing keywords from \"\" to \"Pari\".",
    "created_at": "2016-03-21T17:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275109",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "Pari".



---

archive/issue_comments_275110.json:
```json
{
    "body": "A comment by [ticket:20241#comment:3 kedlaya] on #20241:\n> Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).",
    "created_at": "2016-04-09T13:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275110",
    "user": "https://github.com/defeo"
}
```

A comment by [ticket:20241#comment:3 kedlaya] on #20241:
> Regarding the utility functions: I think `primes` belongs in `sage.rings.fast_arith` along with `prime_range`, while `genus2red` should be in `sage.schemes.hyperelliptic_curves.HyperellipticCurve_g2_rational_field` which is otherwise completely empty! The other functions don't provide any new functionality (factorials, Chebyshev polynomials, etc.).



---

archive/issue_comments_275111.json:
```json
{
    "body": "Just a question: presently we have efficient sage.Integer <-> pari-gp integer conversion, right? `CyPari` would probably not support this directly, because that would make sage.Integer a dependency of the package. Where would the efficient conversion fit? (we wouldn't want to go through Python integers if we don't have to)",
    "created_at": "2016-05-11T21:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275111",
    "user": "https://github.com/nbruin"
}
```

Just a question: presently we have efficient sage.Integer <-> pari-gp integer conversion, right? `CyPari` would probably not support this directly, because that would make sage.Integer a dependency of the package. Where would the efficient conversion fit? (we wouldn't want to go through Python integers if we don't have to)



---

archive/issue_events_054969.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-06-15T13:10:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20238#event-54969"
}
```



---

archive/issue_comments_275112.json:
```json
{
    "body": "So, what's left to be done? Are we ready to externalize the interface?",
    "created_at": "2016-10-19T11:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275112",
    "user": "https://github.com/defeo"
}
```

So, what's left to be done? Are we ready to externalize the interface?



---

archive/issue_comments_275113.json:
```json
{
    "body": "When the next beta with #20241 is released, I will have a look.",
    "created_at": "2016-10-21T07:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275113",
    "user": "https://github.com/jdemeyer"
}
```

When the next beta with #20241 is released, I will have a look.



---

archive/issue_events_054970.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-03T14:24:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20238#event-54970"
}
```



---

archive/issue_events_054971.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-03T14:24:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20238#event-54971"
}
```



---

archive/issue_events_054972.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-31T08:50:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20238#event-54972"
}
```



---

archive/issue_events_054973.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-31T08:50:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20238#event-54973"
}
```



---

archive/issue_comments_275114.json:
```json
{
    "body": "There is one issue which comes up regularly when dealing with Cython code. When you do something like\n\n```\ncdef extern from \"cypari.h\":\n    GEN set_gel(GEN x, long n, GEN z)              # gel(x, n) = z\n    GEN set_gmael(GEN x, long i, long j, GEN z)    # gmael(x, i, j) = z\n    GEN set_gcoeff(GEN x, long i, long j, GEN z)   # gcoeff(x, i, j) = z\n    GEN set_uel(GEN x, long n, ulong z)            # uel(x, n) = z\n```\nthe C compiler does not know where to find `cypari.h`. I had a similar issue in `cysignals`, for which I implemented an ugly work-around by auto-generating some `__init__.pxd` file (this wasn't so bad, since I needed to auto-generate that file anyway).\n\nHowever, for a proper solution, Cython should add the include directory because Cython does know where to find `cypari.h`",
    "created_at": "2017-03-31T10:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275114",
    "user": "https://github.com/jdemeyer"
}
```

There is one issue which comes up regularly when dealing with Cython code. When you do something like

```
cdef extern from "cypari.h":
    GEN set_gel(GEN x, long n, GEN z)              # gel(x, n) = z
    GEN set_gmael(GEN x, long i, long j, GEN z)    # gmael(x, i, j) = z
    GEN set_gcoeff(GEN x, long i, long j, GEN z)   # gcoeff(x, i, j) = z
    GEN set_uel(GEN x, long n, ulong z)            # uel(x, n) = z
```
the C compiler does not know where to find `cypari.h`. I had a similar issue in `cysignals`, for which I implemented an ugly work-around by auto-generating some `__init__.pxd` file (this wasn't so bad, since I needed to auto-generate that file anyway).

However, for a proper solution, Cython should add the include directory because Cython does know where to find `cypari.h`



---

archive/issue_comments_275115.json:
```json
{
    "body": "So the plan is now to add a Cython patch: #22728.",
    "created_at": "2017-03-31T10:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275115",
    "user": "https://github.com/jdemeyer"
}
```

So the plan is now to add a Cython patch: #22728.



---

archive/issue_comments_275116.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-03-31T16:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275116",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_275117.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-03-31T18:29:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275117",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_275118.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-31T20:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275118",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_275119.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-04-01T09:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275119",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_275120.json:
```json
{
    "body": "Another solution would be to install the header into a standard location using `headers` option of `distutils.core.setup`. See https://docs.python.org/3/distutils/setupscript.html#preprocessor-options for why that works.\n\nIf you do that, you need to change `cdef extern from \"cypari.h\":` to `cdef extern from \"cypari2/cypari.h\":` because distutils will install `cypari.h` to `cypari2/cypari.h`",
    "created_at": "2017-04-22T01:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275120",
    "user": "https://github.com/isuruf"
}
```

Another solution would be to install the header into a standard location using `headers` option of `distutils.core.setup`. See https://docs.python.org/3/distutils/setupscript.html#preprocessor-options for why that works.

If you do that, you need to change `cdef extern from "cypari.h":` to `cdef extern from "cypari2/cypari.h":` because distutils will install `cypari.h` to `cypari2/cypari.h`



---

archive/issue_comments_275121.json:
```json
{
    "body": "Replying to [comment:60 isuruf]:\n> Another solution would be to install the header into a standard location using `headers` option of `distutils.core.setup`. See https://docs.python.org/3/distutils/setupscript.html#preprocessor-options for why that works.\n\n\nRight. However, it seems that Python packages rarely use this option. I wonder if there is a reason for that...",
    "created_at": "2017-04-22T13:33:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275121",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:60 isuruf]:
> Another solution would be to install the header into a standard location using `headers` option of `distutils.core.setup`. See https://docs.python.org/3/distutils/setupscript.html#preprocessor-options for why that works.


Right. However, it seems that Python packages rarely use this option. I wonder if there is a reason for that...



---

archive/issue_comments_275122.json:
```json
{
    "body": "Reading that page https://docs.python.org/3/distutils/setupscript.html#preprocessor-options better, it only talks about what you need to do in order to compile against the header. It doesn't say how to actually install the headers.\n\nHere is a \"interesting\" post about Python header files: https://github.com/pypa/packaging-problems/issues/84",
    "created_at": "2017-04-23T08:05:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275122",
    "user": "https://github.com/jdemeyer"
}
```

Reading that page https://docs.python.org/3/distutils/setupscript.html#preprocessor-options better, it only talks about what you need to do in order to compile against the header. It doesn't say how to actually install the headers.

Here is a "interesting" post about Python header files: https://github.com/pypa/packaging-problems/issues/84



---

archive/issue_comments_275123.json:
```json
{
    "body": "This looks pretty trivial and good.\nMy only concern is: is it cypari or cypari2?",
    "created_at": "2017-04-25T12:14:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275123",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

This looks pretty trivial and good.
My only concern is: is it cypari or cypari2?



---

archive/issue_comments_275124.json:
```json
{
    "body": "Replying to [comment:64 jpflori]:\n> My only concern is: is it cypari or cypari2?\n\n\nThe Python package is currently called CyPari2, but the goal is to merge it with CyPari.",
    "created_at": "2017-04-25T12:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275124",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:64 jpflori]:
> My only concern is: is it cypari or cypari2?


The Python package is currently called CyPari2, but the goal is to merge it with CyPari.



---

archive/issue_comments_275125.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-25T12:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275125",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_275126.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-27T20:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275126",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_054974.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-27T20:11:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20238#event-54974"
}
```



---

archive/issue_comments_275127.json:
```json
{
    "body": "Great news! I will officially release CyPari2-1.0.0 then and put it on pypi.",
    "created_at": "2017-04-28T07:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275127",
    "user": "https://github.com/jdemeyer"
}
```

Great news! I will officially release CyPari2-1.0.0 then and put it on pypi.



---

archive/issue_comments_275128.json:
```json
{
    "body": "After updating to the latest beta, I have some stale autogenerated files in `src/sage/lib/cypari2`: the ones listed in the now deleted `.gitignore` file. Should it be the job of the CyPari2 `spkg-install` file to delete those?",
    "created_at": "2017-04-28T20:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275128",
    "user": "https://github.com/jhpalmieri"
}
```

After updating to the latest beta, I have some stale autogenerated files in `src/sage/lib/cypari2`: the ones listed in the now deleted `.gitignore` file. Should it be the job of the CyPari2 `spkg-install` file to delete those?



---

archive/issue_comments_275129.json:
```json
{
    "body": "Replying to [comment:69 jhpalmieri]:\n> After updating to the latest beta, I have some stale autogenerated files in `src/sage/lib/cypari2`: the ones listed in the now deleted `.gitignore` file. Should it be the job of the CyPari2 `spkg-install` file to delete those?\n\n\nThey were just not removed because not tracked by git, aren't they?",
    "created_at": "2017-04-28T20:21:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275129",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:69 jhpalmieri]:
> After updating to the latest beta, I have some stale autogenerated files in `src/sage/lib/cypari2`: the ones listed in the now deleted `.gitignore` file. Should it be the job of the CyPari2 `spkg-install` file to delete those?


They were just not removed because not tracked by git, aren't they?



---

archive/issue_comments_275130.json:
```json
{
    "body": "Replying to [comment:70 vdelecroix]:\n> Replying to [comment:69 jhpalmieri]:\n> > After updating to the latest beta, I have some stale autogenerated files in `src/sage/lib/cypari2`: the ones listed in the now deleted `.gitignore` file. Should it be the job of the CyPari2 `spkg-install` file to delete those?\n\n> \n> They were just not removed because not tracked by git, aren't they?\n\n\nRight: since they are not tracked by git, they were not removed. And since the `src/sage/libs/cypari2/.gitignore` file was removed, they are no longer ignored.",
    "created_at": "2017-04-28T20:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275130",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:70 vdelecroix]:
> Replying to [comment:69 jhpalmieri]:
> > After updating to the latest beta, I have some stale autogenerated files in `src/sage/lib/cypari2`: the ones listed in the now deleted `.gitignore` file. Should it be the job of the CyPari2 `spkg-install` file to delete those?

> 
> They were just not removed because not tracked by git, aren't they?


Right: since they are not tracked by git, they were not removed. And since the `src/sage/libs/cypari2/.gitignore` file was removed, they are no longer ignored.



---

archive/issue_comments_275131.json:
```json
{
    "body": "Replying to [comment:69 jhpalmieri]:\n> Should it be the job of the CyPari2 `spkg-install` file to delete those?\n\n\nCertainly not (separation of concerns: the `cypari2` package and the Sage library are two independent things).\n\nBut `src/setup.py` could delete those files.",
    "created_at": "2017-04-29T09:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20238#issuecomment-275131",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:69 jhpalmieri]:
> Should it be the job of the CyPari2 `spkg-install` file to delete those?


Certainly not (separation of concerns: the `cypari2` package and the Sage library are two independent things).

But `src/setup.py` could delete those files.
