# Issue 20396: Implement the invariant form for complex reflection groups

archive/issues_020159.json:
```json
{
    "body": "Implements the invariant form for complex, non-real reflection groups.\n\nThe implementation currently uses the Reynolds operator in Lemma 1.3 in Lehrer-Taylor, but I am asking to follow the Cartan matrix in Chapter 1.6, as we have the Cartan matrix already available.\n\nCC:  @tscrim @fchapoton @nthiery vripoll\n\nKeywords: complex reflection group, cartan matrix\n\nAuthor: Christian Stump\n\nBranch: u/stumpc5/20396\n\nDependencies: #11187\n\nCommit: def701588736edda81a86ddd1a9cbdbc849657be\n\nResolution: duplicate\n\nIssue created by migration from https://trac.sagemath.org/ticket/20396\n\n",
    "closed_at": "2016-04-16T13:55:07Z",
    "created_at": "2016-04-09T09:34:21Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "Implement the invariant form for complex reflection groups",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20396",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
Implements the invariant form for complex, non-real reflection groups.

The implementation currently uses the Reynolds operator in Lemma 1.3 in Lehrer-Taylor, but I am asking to follow the Cartan matrix in Chapter 1.6, as we have the Cartan matrix already available.

CC:  @tscrim @fchapoton @nthiery vripoll

Keywords: complex reflection group, cartan matrix

Author: Christian Stump

Branch: u/stumpc5/20396

Dependencies: #11187

Commit: def701588736edda81a86ddd1a9cbdbc849657be

Resolution: duplicate

Issue created by migration from https://trac.sagemath.org/ticket/20396





---

archive/issue_comments_370443.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#11187\"",
    "created_at": "2016-04-09T09:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370443",
    "user": "https://github.com/fchapoton"
}
```

Changing dependencies from "" to "#11187"



---

archive/issue_comments_370444.json:
```json
{
    "body": "Changing branch from \"\" to \"public/20396\"",
    "created_at": "2016-04-09T09:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370444",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "public/20396"



---

archive/issue_comments_370445.json:
```json
{
    "body": "Changing commit from \"\" to \"cf00014efb9370d9e27cb7ecbdaa0864bfacb205\"",
    "created_at": "2016-04-09T09:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370445",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "cf00014efb9370d9e27cb7ecbdaa0864bfacb205"



---

archive/issue_comments_370446.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[75e8d69](http://git.sagemath.org/sage.git/commit/?id=75e8d699b73bc78ecd3374eddf6a927dc2f653a2)|`trac #20396 first try at simpler implementation`|",
    "created_at": "2016-04-09T15:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[75e8d69](http://git.sagemath.org/sage.git/commit/?id=75e8d699b73bc78ecd3374eddf6a927dc2f653a2)|`trac #20396 first try at simpler implementation`|



---

archive/issue_comments_370447.json:
```json
{
    "body": "Changing commit from \"cf00014efb9370d9e27cb7ecbdaa0864bfacb205\" to \"75e8d699b73bc78ecd3374eddf6a927dc2f653a2\"",
    "created_at": "2016-04-09T15:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370447",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cf00014efb9370d9e27cb7ecbdaa0864bfacb205" to "75e8d699b73bc78ecd3374eddf6a927dc2f653a2"



---

archive/issue_comments_370448.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[cdef4c3](http://git.sagemath.org/sage.git/commit/?id=cdef4c3e7d25a51386265d03b41446ce8ee7db7a)|`trac #20396 not yet working`|",
    "created_at": "2016-04-09T19:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370448",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[cdef4c3](http://git.sagemath.org/sage.git/commit/?id=cdef4c3e7d25a51386265d03b41446ce8ee7db7a)|`trac #20396 not yet working`|



---

archive/issue_comments_370449.json:
```json
{
    "body": "Changing commit from \"75e8d699b73bc78ecd3374eddf6a927dc2f653a2\" to \"cdef4c3e7d25a51386265d03b41446ce8ee7db7a\"",
    "created_at": "2016-04-09T19:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370449",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "75e8d699b73bc78ecd3374eddf6a927dc2f653a2" to "cdef4c3e7d25a51386265d03b41446ce8ee7db7a"



---

archive/issue_comments_370450.json:
```json
{
    "body": "<a id='comment:4'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|\n|[844f450](http://git.sagemath.org/sage.git/commit/?id=844f4506ca67cb2ae69e04ca71960cb08f6b0d33)|`Merge branch 'u/stumpc5/11187' of trac.sagemath.org:sage into u/tscrim/reflection_groups-11187`|\n|[d425669](http://git.sagemath.org/sage.git/commit/?id=d4256691756e16c64b6f2f855367f5afb911a00c)|`Fixing failures and some other things.`|\n|[87cd989](http://git.sagemath.org/sage.git/commit/?id=87cd989b6d1dd7e5e8704e5c68d4ba2240474234)|`fixed one doctest in category complex reflection group`|\n|[05a8ab4](http://git.sagemath.org/sage.git/commit/?id=05a8ab4201355f554d4c7e0916b1f90c1ab1ff6d)|`11187: fixed trivial doctest failures`|\n|[32bf1ae](http://git.sagemath.org/sage.git/commit/?id=32bf1aeb9a730335d0f17744349ef26838a3397a)|`11187: cleanup of the organization of the various axioms (WellGenerated, ...) for complex/generalized reflection groups + documentation improvements`|\n|[73276ca](http://git.sagemath.org/sage.git/commit/?id=73276caaa350dcfb7c00999f0a4b84626f19c75a)|`Merge branch 'u/tscrim/11187' of trac.sagemath.org:sage into t/11187/11187`|\n|[e074050](http://git.sagemath.org/sage.git/commit/?id=e074050131cd483022c5783f749cbce3ac522ae5)|`merged`|\n|[b572c74](http://git.sagemath.org/sage.git/commit/?id=b572c74c3a4db2909bea5c538c8be26089068fc6)|`fixed a missing doctest`|\n|[8013693](http://git.sagemath.org/sage.git/commit/?id=80136935cc332815583a419bdb060f545890cfed)|`Merge branch 'public/20396' of git://trac.sagemath.org/sage into u/stumpc5/20396`|\n|[e02cf02](http://git.sagemath.org/sage.git/commit/?id=e02cf020c403d95a1d621c27b0af74295d2b84f0)|`still in trouble about the complex case`|",
    "created_at": "2016-04-11T08:46:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370450",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:4'></a>
Last 10 new commits:
|                                                                                                                                          |                                                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|
|[844f450](http://git.sagemath.org/sage.git/commit/?id=844f4506ca67cb2ae69e04ca71960cb08f6b0d33)|`Merge branch 'u/stumpc5/11187' of trac.sagemath.org:sage into u/tscrim/reflection_groups-11187`|
|[d425669](http://git.sagemath.org/sage.git/commit/?id=d4256691756e16c64b6f2f855367f5afb911a00c)|`Fixing failures and some other things.`|
|[87cd989](http://git.sagemath.org/sage.git/commit/?id=87cd989b6d1dd7e5e8704e5c68d4ba2240474234)|`fixed one doctest in category complex reflection group`|
|[05a8ab4](http://git.sagemath.org/sage.git/commit/?id=05a8ab4201355f554d4c7e0916b1f90c1ab1ff6d)|`11187: fixed trivial doctest failures`|
|[32bf1ae](http://git.sagemath.org/sage.git/commit/?id=32bf1aeb9a730335d0f17744349ef26838a3397a)|`11187: cleanup of the organization of the various axioms (WellGenerated, ...) for complex/generalized reflection groups + documentation improvements`|
|[73276ca](http://git.sagemath.org/sage.git/commit/?id=73276caaa350dcfb7c00999f0a4b84626f19c75a)|`Merge branch 'u/tscrim/11187' of trac.sagemath.org:sage into t/11187/11187`|
|[e074050](http://git.sagemath.org/sage.git/commit/?id=e074050131cd483022c5783f749cbce3ac522ae5)|`merged`|
|[b572c74](http://git.sagemath.org/sage.git/commit/?id=b572c74c3a4db2909bea5c538c8be26089068fc6)|`fixed a missing doctest`|
|[8013693](http://git.sagemath.org/sage.git/commit/?id=80136935cc332815583a419bdb060f545890cfed)|`Merge branch 'public/20396' of git://trac.sagemath.org/sage into u/stumpc5/20396`|
|[e02cf02](http://git.sagemath.org/sage.git/commit/?id=e02cf020c403d95a1d621c27b0af74295d2b84f0)|`still in trouble about the complex case`|



---

archive/issue_comments_370451.json:
```json
{
    "body": "Changing commit from \"cdef4c3e7d25a51386265d03b41446ce8ee7db7a\" to \"e02cf020c403d95a1d621c27b0af74295d2b84f0\"",
    "created_at": "2016-04-11T08:46:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370451",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing commit from "cdef4c3e7d25a51386265d03b41446ce8ee7db7a" to "e02cf020c403d95a1d621c27b0af74295d2b84f0"



---

archive/issue_comments_370452.json:
```json
{
    "body": "Changing branch from \"public/20396\" to \"u/stumpc5/20396\"",
    "created_at": "2016-04-11T08:46:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370452",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing branch from "public/20396" to "u/stumpc5/20396"



---

archive/issue_comments_370453.json:
```json
{
    "body": "Changing commit from \"e02cf020c403d95a1d621c27b0af74295d2b84f0\" to \"def701588736edda81a86ddd1a9cbdbc849657be\"",
    "created_at": "2016-04-13T10:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370453",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e02cf020c403d95a1d621c27b0af74295d2b84f0" to "def701588736edda81a86ddd1a9cbdbc849657be"



---

archive/issue_comments_370454.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[bf2ea92](http://git.sagemath.org/sage.git/commit/?id=bf2ea922cd09908b1f8a590494ac82f38cbff3f4)|`fixed the coroots + work on invariant form`|\n|[241e660](http://git.sagemath.org/sage.git/commit/?id=241e6607cf62f3938019d5118aac018e9254dc24)|`11187: sum  ->  ZZ.sum for consistency when the list of degrees is empty`|\n|[82ff288](http://git.sagemath.org/sage.git/commit/?id=82ff2882bcdee03518224a3b63a0f2ebd1dd33b3)|`11187: rename 'reflecting hyperplane' to 'reflection hyperplane' in the docstrings`|\n|[c09cd4d](http://git.sagemath.org/sage.git/commit/?id=c09cd4d5e8f61909a57b74dfa09627f6aef6f130)|`11187: Fixed heisenbug caused by temporarily breaking the implementation of (co)degrees for testing without restoring it after`|\n|[0becba3](http://git.sagemath.org/sage.git/commit/?id=0becba3698653fedcfa8547d44fc7d45fb2fecb3)|`Merge branch 'public/11187' of git://trac.sagemath.org/sage into u/stumpc5/20396`|\n|[8927ab9](http://git.sagemath.org/sage.git/commit/?id=8927ab98d9aa88610774567e4bde0ce8ec8c14b9)|`matrix action is on the right!`|\n|[eb2ea75](http://git.sagemath.org/sage.git/commit/?id=eb2ea75a566bccb38fce37ba72f593539cc1c1a5)|`cleaned the reduced word code`|\n|[6fbba18](http://git.sagemath.org/sage.git/commit/?id=6fbba185faebad9f9d39028cd6002fee9315eb00)|`undo the change to repr methods`|\n|[8497f5d](http://git.sagemath.org/sage.git/commit/?id=8497f5d6aebbd8dd640ea41ffbd904c47886e34e)|`first try to skip elements in the iteration, too slow`|\n|[def7015](http://git.sagemath.org/sage.git/commit/?id=def701588736edda81a86ddd1a9cbdbc849657be)|`reorganized the invariant form (still missing an improvement) + fixed two doctests`|",
    "created_at": "2016-04-13T10:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370454",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[bf2ea92](http://git.sagemath.org/sage.git/commit/?id=bf2ea922cd09908b1f8a590494ac82f38cbff3f4)|`fixed the coroots + work on invariant form`|
|[241e660](http://git.sagemath.org/sage.git/commit/?id=241e6607cf62f3938019d5118aac018e9254dc24)|`11187: sum  ->  ZZ.sum for consistency when the list of degrees is empty`|
|[82ff288](http://git.sagemath.org/sage.git/commit/?id=82ff2882bcdee03518224a3b63a0f2ebd1dd33b3)|`11187: rename 'reflecting hyperplane' to 'reflection hyperplane' in the docstrings`|
|[c09cd4d](http://git.sagemath.org/sage.git/commit/?id=c09cd4d5e8f61909a57b74dfa09627f6aef6f130)|`11187: Fixed heisenbug caused by temporarily breaking the implementation of (co)degrees for testing without restoring it after`|
|[0becba3](http://git.sagemath.org/sage.git/commit/?id=0becba3698653fedcfa8547d44fc7d45fb2fecb3)|`Merge branch 'public/11187' of git://trac.sagemath.org/sage into u/stumpc5/20396`|
|[8927ab9](http://git.sagemath.org/sage.git/commit/?id=8927ab98d9aa88610774567e4bde0ce8ec8c14b9)|`matrix action is on the right!`|
|[eb2ea75](http://git.sagemath.org/sage.git/commit/?id=eb2ea75a566bccb38fce37ba72f593539cc1c1a5)|`cleaned the reduced word code`|
|[6fbba18](http://git.sagemath.org/sage.git/commit/?id=6fbba185faebad9f9d39028cd6002fee9315eb00)|`undo the change to repr methods`|
|[8497f5d](http://git.sagemath.org/sage.git/commit/?id=8497f5d6aebbd8dd640ea41ffbd904c47886e34e)|`first try to skip elements in the iteration, too slow`|
|[def7015](http://git.sagemath.org/sage.git/commit/?id=def701588736edda81a86ddd1a9cbdbc849657be)|`reorganized the invariant form (still missing an improvement) + fixed two doctests`|



---

archive/issue_comments_370455.json:
```json
{
    "body": "<a id='comment:6'></a>\nI merged the implementation as is into #11187 since it does work properly in the real case (using the Cartan matrix) and in the complex case (using brute force).\n\nI would then use this ticket to figure how to do the Cartan matrix version in the complex case.",
    "created_at": "2016-04-13T10:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370455",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:6'></a>
I merged the implementation as is into #11187 since it does work properly in the real case (using the Cartan matrix) and in the complex case (using brute force).

I would then use this ticket to figure how to do the Cartan matrix version in the complex case.



---

archive/issue_comments_370456.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2016-04-16T13:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370456",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Resolution: duplicate



---

archive/issue_comments_370457.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2016-04-16T13:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370457",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_events_055244.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/stumpc5",
    "created_at": "2016-04-16T13:55:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20396#event-55244"
}
```



---

archive/issue_comments_370458.json:
```json
{
    "body": "<a id='comment:7'></a>\nI now added the complete universal algorithm in all types (including non-irreducible and badly generated) and merged it into #11187.",
    "created_at": "2016-04-16T13:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20396#issuecomment-370458",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:7'></a>
I now added the complete universal algorithm in all types (including non-irreducible and badly generated) and merged it into #11187.
