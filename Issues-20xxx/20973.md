# Issue 20973: Cartan type Aoo

archive/issues_020736.json:
```json
{
    "body": "Gives a *minimal* implementation of the `A_oo` Cartan type:\n\n```sage\nsage: CartanType(['A',oo])\n['A', oo]\nsage: CartanType(['A',oo]).is_irreducible()\nTrue\nsage: CartanType(['A',oo]).is_simply_laced()\nTrue\nsage: print(CartanType(['A', oo]).ascii_art())\n...---O---O---O---O---O---O---O---...\n     -3  -2  -1   0   1   2   3\n```\n\nIn addition, the ticket fixes the following error in `CartanType`:\n\n```sage\nsage: CartanType(['A',-1])\n  File \"<string>\", line unknown\n\n    ^\nSyntaxError: unexpected EOF while parsing\n```\nThis, and other nonsensical input, now raises a `ValueError`.\n\nSee related discussion on [sage-combinat](https://groups.google.com/forum/#!topic/sage-combinat-devel/tnQngybmlI4).\n\nCC:  sage-combinat @nthiery @tscrim\n\nKeywords: Cartan type, A infinity\n\nReviewer: Nicolas M. Thi\u00e9ry, Travis Scrimshaw\n\nAuthor: Andrew Mathas\n\nBranch: c1b57e673a66cb92d92acefa2cd6f86b236ca7f9\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/20973\n\n",
    "closed_at": "2016-07-22T06:50:49Z",
    "created_at": "2016-07-07T10:34:36Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Cartan type Aoo",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20973",
    "user": "https://github.com/AndrewAtLarge"
}
```
Gives a *minimal* implementation of the `A_oo` Cartan type:

```sage
sage: CartanType(['A',oo])
['A', oo]
sage: CartanType(['A',oo]).is_irreducible()
True
sage: CartanType(['A',oo]).is_simply_laced()
True
sage: print(CartanType(['A', oo]).ascii_art())
...---O---O---O---O---O---O---O---...
     -3  -2  -1   0   1   2   3
```

In addition, the ticket fixes the following error in `CartanType`:

```sage
sage: CartanType(['A',-1])
  File "<string>", line unknown

    ^
SyntaxError: unexpected EOF while parsing
```
This, and other nonsensical input, now raises a `ValueError`.

See related discussion on [sage-combinat](https://groups.google.com/forum/#!topic/sage-combinat-devel/tnQngybmlI4).

CC:  sage-combinat @nthiery @tscrim

Keywords: Cartan type, A infinity

Reviewer: Nicolas M. Thi√©ry, Travis Scrimshaw

Author: Andrew Mathas

Branch: c1b57e673a66cb92d92acefa2cd6f86b236ca7f9

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/20973





---

archive/issue_comments_304855.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,28 @@\n+Gives a minimal implementation of the `A_oo` Cartan type:\n \n+```sage\n+sage: CartanType(['A',oo])\n+['A', oo]\n+sage: CartanType(['A',oo]).is_irreducible()\n+True\n+sage: CartanType(['A',oo]).is_simply_laced()\n+True\n+sage: print(CartanType(['A', oo]).ascii_art())\n+...---O---O---O---O---O---O---O---...\n+     -3  -2  -1   0   1   2   3\n+```\n+\n+In addition, the ficket fixes the following error:\n+\n+```sage\n+sage: CartanType(['A',-1])\n+  File \"<string>\", line unknown\n+\n+    ^\n+SyntaxError: unexpected EOF while parsing\n+```\n+\n+See related discussion on [sage-combinat](https://groups.google.com/forum/#!topic/sage-combinat-devel/tnQngybmlI4).\n \n Comment: 1\n \n```\n",
    "created_at": "2016-07-07T10:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304855",
    "user": "https://github.com/AndrewAtLarge"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,28 @@
+Gives a minimal implementation of the `A_oo` Cartan type:
 
+```sage
+sage: CartanType(['A',oo])
+['A', oo]
+sage: CartanType(['A',oo]).is_irreducible()
+True
+sage: CartanType(['A',oo]).is_simply_laced()
+True
+sage: print(CartanType(['A', oo]).ascii_art())
+...---O---O---O---O---O---O---O---...
+     -3  -2  -1   0   1   2   3
+```
+
+In addition, the ficket fixes the following error:
+
+```sage
+sage: CartanType(['A',-1])
+  File "<string>", line unknown
+
+    ^
+SyntaxError: unexpected EOF while parsing
+```
+
+See related discussion on [sage-combinat](https://groups.google.com/forum/#!topic/sage-combinat-devel/tnQngybmlI4).
 
 Comment: 1
 
```




---

archive/issue_comments_304856.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2016-07-07T10:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304856",
    "user": "https://github.com/AndrewAtLarge"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_304857.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2016-07-07T10:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304857",
    "user": "https://github.com/AndrewAtLarge"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_304858.json:
```json
{
    "body": "Changing keywords from \"\" to \"Cartan type, A infinity\".",
    "created_at": "2016-07-07T10:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304858",
    "user": "https://github.com/AndrewAtLarge"
}
```

Changing keywords from "" to "Cartan type, A infinity".



---

archive/issue_comments_304859.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2016-07-07T10:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304859",
    "user": "https://github.com/AndrewAtLarge"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_304860.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,28 @@\n+Gives a *minimal* implementation of the `A_oo` Cartan type:\n \n+```sage\n+sage: CartanType(['A',oo])\n+['A', oo]\n+sage: CartanType(['A',oo]).is_irreducible()\n+True\n+sage: CartanType(['A',oo]).is_simply_laced()\n+True\n+sage: print(CartanType(['A', oo]).ascii_art())\n+...---O---O---O---O---O---O---O---...\n+     -3  -2  -1   0   1   2   3\n+```\n+\n+In addition, the ticket fixes the following error an `CartanType`:\n+\n+```sage\n+sage: CartanType(['A',-1])\n+  File \"<string>\", line unknown\n+\n+    ^\n+SyntaxError: unexpected EOF while parsing\n+```\n+\n+See related discussion on [sage-combinat](https://groups.google.com/forum/#!topic/sage-combinat-devel/tnQngybmlI4).\n \n Comment: 1\n \n```\n",
    "created_at": "2016-07-07T10:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304860",
    "user": "https://github.com/AndrewAtLarge"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,28 @@
+Gives a *minimal* implementation of the `A_oo` Cartan type:
 
+```sage
+sage: CartanType(['A',oo])
+['A', oo]
+sage: CartanType(['A',oo]).is_irreducible()
+True
+sage: CartanType(['A',oo]).is_simply_laced()
+True
+sage: print(CartanType(['A', oo]).ascii_art())
+...---O---O---O---O---O---O---O---...
+     -3  -2  -1   0   1   2   3
+```
+
+In addition, the ticket fixes the following error an `CartanType`:
+
+```sage
+sage: CartanType(['A',-1])
+  File "<string>", line unknown
+
+    ^
+SyntaxError: unexpected EOF while parsing
+```
+
+See related discussion on [sage-combinat](https://groups.google.com/forum/#!topic/sage-combinat-devel/tnQngybmlI4).
 
 Comment: 1
 
```




---

archive/issue_comments_304861.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,28 @@\n+Gives a *minimal* implementation of the `A_oo` Cartan type:\n \n+```sage\n+sage: CartanType(['A',oo])\n+['A', oo]\n+sage: CartanType(['A',oo]).is_irreducible()\n+True\n+sage: CartanType(['A',oo]).is_simply_laced()\n+True\n+sage: print(CartanType(['A', oo]).ascii_art())\n+...---O---O---O---O---O---O---O---...\n+     -3  -2  -1   0   1   2   3\n+```\n+\n+In addition, the ticket fixes the following error an `CartanType`:\n+\n+```sage\n+sage: CartanType(['A',-1])\n+  File \"<string>\", line unknown\n+\n+    ^\n+SyntaxError: unexpected EOF while parsing\n+```\n+\n+See related discussion on [sage-combinat](https://groups.google.com/forum/#!topic/sage-combinat-devel/tnQngybmlI4).\n \n Comment: 1\n \n```\n",
    "created_at": "2016-07-07T10:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304861",
    "user": "https://github.com/AndrewAtLarge"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,28 @@
+Gives a *minimal* implementation of the `A_oo` Cartan type:
 
+```sage
+sage: CartanType(['A',oo])
+['A', oo]
+sage: CartanType(['A',oo]).is_irreducible()
+True
+sage: CartanType(['A',oo]).is_simply_laced()
+True
+sage: print(CartanType(['A', oo]).ascii_art())
+...---O---O---O---O---O---O---O---...
+     -3  -2  -1   0   1   2   3
+```
+
+In addition, the ticket fixes the following error an `CartanType`:
+
+```sage
+sage: CartanType(['A',-1])
+  File "<string>", line unknown
+
+    ^
+SyntaxError: unexpected EOF while parsing
+```
+
+See related discussion on [sage-combinat](https://groups.google.com/forum/#!topic/sage-combinat-devel/tnQngybmlI4).
 
 Comment: 1
 
```




---

archive/issue_comments_304862.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,28 @@\n+Gives a *minimal* implementation of the `A_oo` Cartan type:\n \n+```sage\n+sage: CartanType(['A',oo])\n+['A', oo]\n+sage: CartanType(['A',oo]).is_irreducible()\n+True\n+sage: CartanType(['A',oo]).is_simply_laced()\n+True\n+sage: print(CartanType(['A', oo]).ascii_art())\n+...---O---O---O---O---O---O---O---...\n+     -3  -2  -1   0   1   2   3\n+```\n+\n+In addition, the ticket fixes the following error in `CartanType`:\n+\n+```sage\n+sage: CartanType(['A',-1])\n+  File \"<string>\", line unknown\n+\n+    ^\n+SyntaxError: unexpected EOF while parsing\n+```\n+\n+See related discussion on [sage-combinat](https://groups.google.com/forum/#!topic/sage-combinat-devel/tnQngybmlI4).\n \n Comment: 1\n \n```\n",
    "created_at": "2016-07-07T11:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304862",
    "user": "https://github.com/AndrewAtLarge"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,28 @@
+Gives a *minimal* implementation of the `A_oo` Cartan type:
 
+```sage
+sage: CartanType(['A',oo])
+['A', oo]
+sage: CartanType(['A',oo]).is_irreducible()
+True
+sage: CartanType(['A',oo]).is_simply_laced()
+True
+sage: print(CartanType(['A', oo]).ascii_art())
+...---O---O---O---O---O---O---O---...
+     -3  -2  -1   0   1   2   3
+```
+
+In addition, the ticket fixes the following error in `CartanType`:
+
+```sage
+sage: CartanType(['A',-1])
+  File "<string>", line unknown
+
+    ^
+SyntaxError: unexpected EOF while parsing
+```
+
+See related discussion on [sage-combinat](https://groups.google.com/forum/#!topic/sage-combinat-devel/tnQngybmlI4).
 
 Comment: 1
 
```




---

archive/issue_comments_304863.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,29 @@\n+Gives a *minimal* implementation of the `A_oo` Cartan type:\n \n+```sage\n+sage: CartanType(['A',oo])\n+['A', oo]\n+sage: CartanType(['A',oo]).is_irreducible()\n+True\n+sage: CartanType(['A',oo]).is_simply_laced()\n+True\n+sage: print(CartanType(['A', oo]).ascii_art())\n+...---O---O---O---O---O---O---O---...\n+     -3  -2  -1   0   1   2   3\n+```\n+\n+In addition, the ticket fixes the following error in `CartanType`:\n+\n+```sage\n+sage: CartanType(['A',-1])\n+  File \"<string>\", line unknown\n+\n+    ^\n+SyntaxError: unexpected EOF while parsing\n+```\n+This, and other nonsensical input, now raises a `ValueError`.\n+\n+See related discussion on [sage-combinat](https://groups.google.com/forum/#!topic/sage-combinat-devel/tnQngybmlI4).\n \n Comment: 1\n \n```\n",
    "created_at": "2016-07-07T11:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304863",
    "user": "https://github.com/AndrewAtLarge"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,29 @@
+Gives a *minimal* implementation of the `A_oo` Cartan type:
 
+```sage
+sage: CartanType(['A',oo])
+['A', oo]
+sage: CartanType(['A',oo]).is_irreducible()
+True
+sage: CartanType(['A',oo]).is_simply_laced()
+True
+sage: print(CartanType(['A', oo]).ascii_art())
+...---O---O---O---O---O---O---O---...
+     -3  -2  -1   0   1   2   3
+```
+
+In addition, the ticket fixes the following error in `CartanType`:
+
+```sage
+sage: CartanType(['A',-1])
+  File "<string>", line unknown
+
+    ^
+SyntaxError: unexpected EOF while parsing
+```
+This, and other nonsensical input, now raises a `ValueError`.
+
+See related discussion on [sage-combinat](https://groups.google.com/forum/#!topic/sage-combinat-devel/tnQngybmlI4).
 
 Comment: 1
 
```




---

archive/issue_comments_304864.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-07T21:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304864",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304865.json:
```json
{
    "body": "<a id='comment:9'></a>It is very rudimentary, but comments/suggestions/review welcome",
    "created_at": "2016-07-07T23:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304865",
    "user": "https://github.com/AndrewAtLarge"
}
```

<a id='comment:9'></a>It is very rudimentary, but comments/suggestions/review welcome



---

archive/issue_comments_304866.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-07T23:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304866",
    "user": "https://github.com/AndrewAtLarge"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_304867.json:
```json
{
    "body": "<a id='comment:10'></a>Hi Andrew,\n\nOverall, this looks good! It's a bit frustrating to have to write so many methods that are very similar to existing ones, but I did not quite see a good way to factor stuff out either.\n\nOne thing that could be done is to add a class `CartanType_standard` in cartan_type.py (and inherit from it in the `CartanType_standard_*` classes. At least, the inheritance from `UniqueRep` and `SageObject` would be written out only once.\n\nPlugin failures:\n- startup: I guess we can ignore that one\n- trac: in cartan_type.py, the second quote in `trac:`20973'` should be a backquote\n\nSome comments and suggestions:\n\nThe method description in the docstrings is not rather inconsistent. I can see the origin: the rest of the root system code that you took inspiration from is not very consistent either (mostly by my fault :-)). Still it would be good to make it more uniform.\n\n```\n    r\"\"\"\n    Return ... .\n\n    This implements :meth:`` by returning True.\n\n    EXAMPLES::\n\n    \"\"\"\n```\n\nI would move most of the doctests from `type_A_infinity.CartanType.__init__` in the class docstring, as this is useful documentation. Maybe with a bit of text interspersed explaining what this type is about (if this feels natural to you).\n\nWhile you are at it, it should be easy to implement the `index_set` method.\n\nCheers,\n                              Nicolas",
    "created_at": "2016-07-10T14:31:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304867",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:10'></a>Hi Andrew,

Overall, this looks good! It's a bit frustrating to have to write so many methods that are very similar to existing ones, but I did not quite see a good way to factor stuff out either.

One thing that could be done is to add a class `CartanType_standard` in cartan_type.py (and inherit from it in the `CartanType_standard_*` classes. At least, the inheritance from `UniqueRep` and `SageObject` would be written out only once.

Plugin failures:
- startup: I guess we can ignore that one
- trac: in cartan_type.py, the second quote in `trac:`20973'` should be a backquote

Some comments and suggestions:

The method description in the docstrings is not rather inconsistent. I can see the origin: the rest of the root system code that you took inspiration from is not very consistent either (mostly by my fault :-)). Still it would be good to make it more uniform.

```
    r"""
    Return ... .

    This implements :meth:`` by returning True.

    EXAMPLES::

    """
```

I would move most of the doctests from `type_A_infinity.CartanType.__init__` in the class docstring, as this is useful documentation. Maybe with a bit of text interspersed explaining what this type is about (if this feels natural to you).

While you are at it, it should be easy to implement the `index_set` method.

Cheers,
                              Nicolas



---

archive/issue_comments_304868.json:
```json
{
    "body": "<a id='comment:11'></a>Thinking twice about it, Travis is probably right: once `dynkin_diagram` will be implemented (which should boil down to returning some object such that `t[i][j]` returns the right thing), there is a non trivial chance that the rest of the root system code would work with just minor glitches here and there.\n\nBut if you don't need it yourself, that's for a later ticket.",
    "created_at": "2016-07-10T14:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304868",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:11'></a>Thinking twice about it, Travis is probably right: once `dynkin_diagram` will be implemented (which should boil down to returning some object such that `t[i][j]` returns the right thing), there is a non trivial chance that the rest of the root system code would work with just minor glitches here and there.

But if you don't need it yourself, that's for a later ticket.



---

archive/issue_comments_304869.json:
```json
{
    "body": "<a id='comment:12'></a>Ah: you may want to add this new type to `CartanType.sample`.",
    "created_at": "2016-07-10T14:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304869",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:12'></a>Ah: you may want to add this new type to `CartanType.sample`.



---

archive/issue_comments_304870.json:
```json
{
    "body": "<a id='comment:13'></a>I would like to future proof this by deciding how we want to differentiate between A<sub>+oo</sub> and A<sub>oo</sub>. Unfortunately `oo` is `+Infinity`, so something as subtle as the difference between unsigned infinity and plus infinity might not go over so well. I don't want to hold this up (because this is a good improvement and test use-case), but I do think it is something we should discuss for a moment.",
    "created_at": "2016-07-10T16:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304870",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>I would like to future proof this by deciding how we want to differentiate between A<sub>+oo</sub> and A<sub>oo</sub>. Unfortunately `oo` is `+Infinity`, so something as subtle as the difference between unsigned infinity and plus infinity might not go over so well. I don't want to hold this up (because this is a good improvement and test use-case), but I do think it is something we should discuss for a moment.



---

archive/issue_comments_304871.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:10 nthiery]:\n \n> One thing that could be done is to add a class `CartanType_standard` in cartan_type.py (and inherit from it in the `CartanType_standard_*` classes. At least, the inheritance from `UniqueRep` and `SageObject` would be written out only once.\n\n\nThanks. I almost did something like this when I when I was putting this together. I agree it would be better this way, so I'll try and clean this up a little. Along similar lines, there seems to be quite a lot of code duplication between `cartan_matrix`, `cartan_type`, `dynkin_diagram`, ... I not familiar with the nuances, differences and uses of all of this code but it would be good to clean this up down the track.\n\nAndrew",
    "created_at": "2016-07-10T17:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304871",
    "user": "https://github.com/AndrewAtLarge"
}
```

<a id='comment:14'></a>Replying to [comment:10 nthiery]:
 
> One thing that could be done is to add a class `CartanType_standard` in cartan_type.py (and inherit from it in the `CartanType_standard_*` classes. At least, the inheritance from `UniqueRep` and `SageObject` would be written out only once.


Thanks. I almost did something like this when I when I was putting this together. I agree it would be better this way, so I'll try and clean this up a little. Along similar lines, there seems to be quite a lot of code duplication between `cartan_matrix`, `cartan_type`, `dynkin_diagram`, ... I not familiar with the nuances, differences and uses of all of this code but it would be good to clean this up down the track.

Andrew



---

archive/issue_comments_304872.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:13 tscrim]:\n> I would like to future proof this by deciding how we want to differentiate between A<sub>+oo</sub> and A<sub>oo</sub>. Unfortunately `oo` is `+Infinity`, so something as subtle as the difference between unsigned infinity and plus infinity might not go over so well. I don't want to hold this up (because this is a good improvement and test use-case), but I do think it is something we should discuss for a moment.\n\n\nAs you suggested implementing both the `oo` and `+oo` cases I thought about this and got stuck on precisely the problem that `oo == +Infinity`. If anyone has a good idea as to how this should work in terms of syntax I am happy to implement it. It is unfortunate that we can't use:\n\n```sage\nsage: CartanType(['A', oo])\nsage: CartanType(['A',+oo])\n```\nbut, as you say, this won't work.\n\nAnother direction for relatively easy generalisation is `B_oo` etc.\n\nI have a related question concerning `cartan_matrix`, and possibly `dynkin_diagram`. I was surprised that matrices indexed by `Z` and `N` are not implemented in sage and, similarly, that graphs with infinite vertex sets are not supported. It would be very easy to implement a fake Cartan matrix, say `C`, that given two integers makes `C[i,j]`, or `C[i][j]`, return the corresponding entry of the Cartan matrix. Is some one able to tell me what functionality such a matrix would need in order to be useful to the root system code? Similarly, implementing a fake Dynkin diagram class would be straightforward as long as I knew what methods I have to implement.",
    "created_at": "2016-07-10T17:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304872",
    "user": "https://github.com/AndrewAtLarge"
}
```

<a id='comment:15'></a>Replying to [comment:13 tscrim]:
> I would like to future proof this by deciding how we want to differentiate between A<sub>+oo</sub> and A<sub>oo</sub>. Unfortunately `oo` is `+Infinity`, so something as subtle as the difference between unsigned infinity and plus infinity might not go over so well. I don't want to hold this up (because this is a good improvement and test use-case), but I do think it is something we should discuss for a moment.


As you suggested implementing both the `oo` and `+oo` cases I thought about this and got stuck on precisely the problem that `oo == +Infinity`. If anyone has a good idea as to how this should work in terms of syntax I am happy to implement it. It is unfortunate that we can't use:

```sage
sage: CartanType(['A', oo])
sage: CartanType(['A',+oo])
```
but, as you say, this won't work.

Another direction for relatively easy generalisation is `B_oo` etc.

I have a related question concerning `cartan_matrix`, and possibly `dynkin_diagram`. I was surprised that matrices indexed by `Z` and `N` are not implemented in sage and, similarly, that graphs with infinite vertex sets are not supported. It would be very easy to implement a fake Cartan matrix, say `C`, that given two integers makes `C[i,j]`, or `C[i][j]`, return the corresponding entry of the Cartan matrix. Is some one able to tell me what functionality such a matrix would need in order to be useful to the root system code? Similarly, implementing a fake Dynkin diagram class would be straightforward as long as I knew what methods I have to implement.



---

archive/issue_comments_304873.json:
```json
{
    "body": "<a id='comment:16'></a>Perhaps it would be a bit strange to do `['A', oo, 1]` for **Z** as it is more like A<sub>1</sub><sup>(1)</sup> and it differs from the usual limits of the other finite types.\n\nIt's been a while since I looked deeply into the Dynkin diagram, Cartan type/matrix code. They all inherit from `CartanType_abstract`, but they usually need to direct to the correct representative object to work correctly. One of the good things is that we can add in functionality in layers (i.e., we don't need to do things all at once to make improvements). So a simple class with basic functionality can be a good starting point (on another ticket); this is what I did with Coxeter types.",
    "created_at": "2016-07-10T17:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304873",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>Perhaps it would be a bit strange to do `['A', oo, 1]` for **Z** as it is more like A<sub>1</sub><sup>(1)</sup> and it differs from the usual limits of the other finite types.

It's been a while since I looked deeply into the Dynkin diagram, Cartan type/matrix code. They all inherit from `CartanType_abstract`, but they usually need to direct to the correct representative object to work correctly. One of the good things is that we can add in functionality in layers (i.e., we don't need to do things all at once to make improvements). So a simple class with basic functionality can be a good starting point (on another ticket); this is what I did with Coxeter types.



---

archive/issue_comments_304874.json:
```json
{
    "body": "<a id='comment:17'></a>Just a brief note for now: for the syntax for the various types of infinity, what about using\n\n```\n    sage: CartanType(['A',\\NN])\n    sage: CartanType(['A',\\ZZ])\n```\nThe implementation could be generic and handle both, and even more (e.g. if someone would want to use positive integers as index set, or some parabolic subtype). We could even imagine sharing some stuff with the finite case, but that's probably overdesign.\n\n\n`CartanType(['A',oo])` could be set as an alias to either of them. I would tend to use `\\ZZ`, as the other is a parabolic subtype, but I don't know the field enough to know which one would be the natural default for a mathematician there.",
    "created_at": "2016-07-11T07:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304874",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:17'></a>Just a brief note for now: for the syntax for the various types of infinity, what about using

```
    sage: CartanType(['A',\NN])
    sage: CartanType(['A',\ZZ])
```
The implementation could be generic and handle both, and even more (e.g. if someone would want to use positive integers as index set, or some parabolic subtype). We could even imagine sharing some stuff with the finite case, but that's probably overdesign.


`CartanType(['A',oo])` could be set as an alias to either of them. I would tend to use `\ZZ`, as the other is a parabolic subtype, but I don't know the field enough to know which one would be the natural default for a mathematician there.



---

archive/issue_comments_304875.json:
```json
{
    "body": "<a id='comment:18'></a>bad syntax for trac link, see patchbot report",
    "created_at": "2016-07-11T07:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304875",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:18'></a>bad syntax for trac link, see patchbot report



---

archive/issue_comments_304876.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-12T10:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304876",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304877.json:
```json
{
    "body": "<a id='comment:20'></a>I have addressed all of the comments above. Given the ambiguity between `oo` and `+oo` I have used `NN` and `ZZ` throughout, although `oo` is a synonym for `ZZ`:\n\n```sage\n    sage: CartanType(['A', NN])\n    ['A', NN]\n    sage: print(CartanType(['A', NN]).ascii_art())\n    O---O---O---O---O---O---O---..\n    0   1   2   3\n    sage: CartanType(['A', ZZ])\n    ['A', ZZ]\n    sage: print(CartanType(['A', ZZ]).ascii_art())\n    ..---O---O---O---O---O---O---O---..\n        -3  -2  -1   0   1   2   3\n\n```\nThere is now a `CartanType_standard` class in `cartan_type.py` but, to be honest, it does not save a great deal. I played round a little to try and rationalise the code but everything seems very tangled because small changes in one place cause errors elsewhere. I think that if the code is to the cleaned up then it needs to be done by some one who is more familiar with it and its' applications in sage.\n\nThe code works with 7.3.beta7 but it will almost certainly not merge on the next release on the develop branch given trac:18555.",
    "created_at": "2016-07-12T10:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304877",
    "user": "https://github.com/AndrewAtLarge"
}
```

<a id='comment:20'></a>I have addressed all of the comments above. Given the ambiguity between `oo` and `+oo` I have used `NN` and `ZZ` throughout, although `oo` is a synonym for `ZZ`:

```sage
    sage: CartanType(['A', NN])
    ['A', NN]
    sage: print(CartanType(['A', NN]).ascii_art())
    O---O---O---O---O---O---O---..
    0   1   2   3
    sage: CartanType(['A', ZZ])
    ['A', ZZ]
    sage: print(CartanType(['A', ZZ]).ascii_art())
    ..---O---O---O---O---O---O---O---..
        -3  -2  -1   0   1   2   3

```
There is now a `CartanType_standard` class in `cartan_type.py` but, to be honest, it does not save a great deal. I played round a little to try and rationalise the code but everything seems very tangled because small changes in one place cause errors elsewhere. I think that if the code is to the cleaned up then it needs to be done by some one who is more familiar with it and its' applications in sage.

The code works with 7.3.beta7 but it will almost certainly not merge on the next release on the develop branch given trac:18555.



---

archive/issue_comments_304878.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:20 andrew.mathas]:\n> I have addressed all of the comments above. Given the ambiguity between `oo` and `+oo` I have used `NN` and `ZZ` throughout, although `oo` is a synonym for `ZZ`:\n\n\nThat is exactly what I was just going to suggest this morning. :P I think this is the best way forward.\n\n> There is now a `CartanType_standard` class in `cartan_type.py` but, to be honest, it does not save a great deal. I played round a little to try and rationalise the code but everything seems very tangled because small changes in one place cause errors elsewhere. I think that if the code is to the cleaned up then it needs to be done by some one who is more familiar with it and its' applications in sage.\n\n\nYea, I remember them being fairly interconnected, sometimes in subtle ways. I remember fighting some things when I was trying to implement hyperbolic types (which I don't know when I will get back to this).\n\n> The code works with 7.3.beta7 but it will almost certainly not merge on the next release on the develop branch given trac:18555.\n\n\nIf #18555 really does cause a conflict, which I agree it probably does, then let's have a preemptive strike and base this over #18555.",
    "created_at": "2016-07-12T14:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304878",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>Replying to [comment:20 andrew.mathas]:
> I have addressed all of the comments above. Given the ambiguity between `oo` and `+oo` I have used `NN` and `ZZ` throughout, although `oo` is a synonym for `ZZ`:


That is exactly what I was just going to suggest this morning. :P I think this is the best way forward.

> There is now a `CartanType_standard` class in `cartan_type.py` but, to be honest, it does not save a great deal. I played round a little to try and rationalise the code but everything seems very tangled because small changes in one place cause errors elsewhere. I think that if the code is to the cleaned up then it needs to be done by some one who is more familiar with it and its' applications in sage.


Yea, I remember them being fairly interconnected, sometimes in subtle ways. I remember fighting some things when I was trying to implement hyperbolic types (which I don't know when I will get back to this).

> The code works with 7.3.beta7 but it will almost certainly not merge on the next release on the develop branch given trac:18555.


If #18555 really does cause a conflict, which I agree it probably does, then let's have a preemptive strike and base this over #18555.



---

archive/issue_comments_304879.json:
```json
{
    "body": "<a id='comment:22'></a>Also, this sentence is vague:\n\n```\n    In sage `oo` is the same as `+Infinity` so `NN` and `ZZ` are used to\n    differentiate between the `A_{+\\infty}` and `A_{\\infty}` root systems.\n```\nIn particular, what does `oo` do? I would write the entire docstring as:\n\n```python\nclass CartanType(CartanType_standard, CartanType_simple):\n    r\"\"\"\n    Define the Cartan type `A_{\\infty}`.\n\n    We use `NN` and `ZZ` to explicitly differentiate between the\n    `A_{+\\infty}` and `A_{\\infty}` root systems. While `oo` is\n    the same as `+Infinity` in Sage, it is used as an alias\n    for `ZZ`.\n    \"\"\"\n```\nI would also move all of the `EXAMPLES::` from the `__init__` into the class-level doc above (but leave the ones in `TESTS::` in `__init__`).",
    "created_at": "2016-07-12T14:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304879",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>Also, this sentence is vague:

```
    In sage `oo` is the same as `+Infinity` so `NN` and `ZZ` are used to
    differentiate between the `A_{+\infty}` and `A_{\infty}` root systems.
```
In particular, what does `oo` do? I would write the entire docstring as:

```python
class CartanType(CartanType_standard, CartanType_simple):
    r"""
    Define the Cartan type `A_{\infty}`.

    We use `NN` and `ZZ` to explicitly differentiate between the
    `A_{+\infty}` and `A_{\infty}` root systems. While `oo` is
    the same as `+Infinity` in Sage, it is used as an alias
    for `ZZ`.
    """
```
I would also move all of the `EXAMPLES::` from the `__init__` into the class-level doc above (but leave the ones in `TESTS::` in `__init__`).



---

archive/issue_comments_304880.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-15T17:21:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304880",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304881.json:
```json
{
    "body": "<a id='comment:24'></a>Thanks for the changes. I made a few minor reviewer changes. If you're okay with them, then you can set a positive review.\n\n---\nNew commits:",
    "created_at": "2016-07-18T00:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304881",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>Thanks for the changes. I made a few minor reviewer changes. If you're okay with them, then you can set a positive review.

---
New commits:



---

archive/issue_comments_304882.json:
```json
{
    "body": "<a id='comment:25'></a>Thanks Travis. Yes, I am happy with your changes.",
    "created_at": "2016-07-20T16:55:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304882",
    "user": "https://github.com/AndrewAtLarge"
}
```

<a id='comment:25'></a>Thanks Travis. Yes, I am happy with your changes.



---

archive/issue_comments_304883.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-20T16:55:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304883",
    "user": "https://github.com/AndrewAtLarge"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_304884.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-07-21T07:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304884",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_304885.json:
```json
{
    "body": "<a id='comment:26'></a>\n```\nsage -t --long src/sage/algebras/nil_coxeter_algebra.py  # 1 doctest failed\nsage -t --long src/sage/combinat/root_system/cartan_type.py  # 1 doctest failed\nsage -t --long src/sage/combinat/root_system/dynkin_diagram.py  # 1 doctest failed\n```",
    "created_at": "2016-07-21T07:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304885",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'></a>
```
sage -t --long src/sage/algebras/nil_coxeter_algebra.py  # 1 doctest failed
sage -t --long src/sage/combinat/root_system/cartan_type.py  # 1 doctest failed
sage -t --long src/sage/combinat/root_system/dynkin_diagram.py  # 1 doctest failed
```



---

archive/issue_comments_304886.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-21T09:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304886",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304887.json:
```json
{
    "body": "<a id='comment:28'></a>Sorry! All fixed.",
    "created_at": "2016-07-21T10:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304887",
    "user": "https://github.com/AndrewAtLarge"
}
```

<a id='comment:28'></a>Sorry! All fixed.



---

archive/issue_comments_304888.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-07-21T10:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304888",
    "user": "https://github.com/AndrewAtLarge"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_304889.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-07-22T06:50:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20973#issuecomment-304889",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_056104.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-22T06:50:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20973",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20973#event-56104"
}
```
