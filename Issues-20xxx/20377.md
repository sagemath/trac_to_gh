# Issue 20377: Minimize use of is_package_installed at runtime

archive/issues_020140.json:
```json
{
    "body": "This is helpful for sage-on-distributions. Typically sage-on-distribution do not want, or need, to call sage's internal packaging system.\n\nI raised this as part of Sage days 77.\n\nRelated tickets:\n- #20382 Replace is_package_installed with Features\n- #21289 Don't use is_package_installed('bliss')\n- #21291 speed regression in is_package_installed\n- #21355 Timeout in graphs/tutte_polynomial.py\n\n\nCC:  @slel\n\nKeywords: sagedays 77\n\nAuthor: Fran\u00e7ois Bissey\n\nBranch: u/fbissey/is_pkg_installed\n\nCommit: aba00ce5414227f4d1a2fb9fcb7af8ba8d81ea6b\n\nResolution: duplicate\n\nIssue created by migration from https://trac.sagemath.org/ticket/20377\n\n",
    "closed_at": "2018-03-19T20:28:33Z",
    "created_at": "2016-04-07T01:21:35Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Minimize use of is_package_installed at runtime",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20377",
    "user": "https://github.com/kiwifb"
}
```
This is helpful for sage-on-distributions. Typically sage-on-distribution do not want, or need, to call sage's internal packaging system.

I raised this as part of Sage days 77.

Related tickets:
- #20382 Replace is_package_installed with Features
- #21289 Don't use is_package_installed('bliss')
- #21291 speed regression in is_package_installed
- #21355 Timeout in graphs/tutte_polynomial.py


CC:  @slel

Keywords: sagedays 77

Author: François Bissey

Branch: u/fbissey/is_pkg_installed

Commit: aba00ce5414227f4d1a2fb9fcb7af8ba8d81ea6b

Resolution: duplicate

Issue created by migration from https://trac.sagemath.org/ticket/20377





---

archive/issue_comments_295298.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-04-07T01:21:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295298",
    "user": "https://github.com/kiwifb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_295299.json:
```json
{
    "body": "<a id='comment:2'></a>Your branch points to the latest beta, did you forget to push or something?",
    "created_at": "2016-04-07T07:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295299",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:2'></a>Your branch points to the latest beta, did you forget to push or something?



---

archive/issue_comments_295300.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: optional.",
    "created_at": "2016-04-07T07:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295300",
    "user": "https://github.com/mezzarobba"
}
```

Changing component from PLEASE CHANGE to packages: optional.



---

archive/issue_comments_295301.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-04-07T07:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295301",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_295302.json:
```json
{
    "body": "<a id='comment:4'></a>I forgot to commit :(",
    "created_at": "2016-04-07T07:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295302",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>I forgot to commit :(



---

archive/issue_comments_295303.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-07T07:39:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295303",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_295304.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-04-07T07:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295304",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_295305.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-04-07T15:27:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295305",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_295306.json:
```json
{
    "body": "<a id='comment:7'></a>You forget a colon\n\n```\n  File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/groups/generic.py\", line 1407\n    if not os.path.isfile(os.path.join(SAGE_LOCAL, \"gap\", \"latest\", \"small\", \"readsml.g\"))\n```",
    "created_at": "2016-04-07T15:27:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295306",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>You forget a colon

```
  File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/groups/generic.py", line 1407
    if not os.path.isfile(os.path.join(SAGE_LOCAL, "gap", "latest", "small", "readsml.g"))
```



---

archive/issue_comments_295307.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-07T21:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295307",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_295308.json:
```json
{
    "body": "<a id='comment:9'></a>If that's all I forgot that's not a bad score. This particular one was different in sage-on-gentoo because I don't ship this database separately from `gap` like it is done in sage so it doesn't need testing.\nI'll still need to patch that one one way or another because the path will be different on gentoo. Alternative proposal welcome.",
    "created_at": "2016-04-07T21:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295308",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'></a>If that's all I forgot that's not a bad score. This particular one was different in sage-on-gentoo because I don't ship this database separately from `gap` like it is done in sage so it doesn't need testing.
I'll still need to patch that one one way or another because the path will be different on gentoo. Alternative proposal welcome.



---

archive/issue_comments_295309.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-07T22:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295309",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_295310.json:
```json
{
    "body": "<a id='comment:11'></a>It seems we are working on the same issue ;)\n#20382 does essentially the same, maybe you want to have a look.\n\nIt seems to me that my approach is slightly more generic but I am open for discussion.",
    "created_at": "2016-04-07T22:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295310",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:11'></a>It seems we are working on the same issue ;)
#20382 does essentially the same, maybe you want to have a look.

It seems to me that my approach is slightly more generic but I am open for discussion.



---

archive/issue_comments_295311.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,13 @@\n This is helpful for sage-on-distributions. Typically sage-on-distribution do not want, or need, to call sage's internal packaging system.\n \n-I raised this as part of sage days 77.\n+I raised this as part of Sage days 77.\n+\n+Related tickets:\n+- #20382 Replace is_package_installed with Features\n+- #21289 Don't use is_package_installed('bliss')\n+- #21291 speed regression in is_package_installed\n+- #21355 Timeout in graphs/tutte_polynomial.py\n+\n \n Author: Fran\u00e7ois Bissey\n \n``````\n",
    "created_at": "2016-08-29T08:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295311",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,13 @@
 This is helpful for sage-on-distributions. Typically sage-on-distribution do not want, or need, to call sage's internal packaging system.
 
-I raised this as part of sage days 77.
+I raised this as part of Sage days 77.
+
+Related tickets:
+- #20382 Replace is_package_installed with Features
+- #21289 Don't use is_package_installed('bliss')
+- #21291 speed regression in is_package_installed
+- #21355 Timeout in graphs/tutte_polynomial.py
+
 
 Author: François Bissey
 
``````




---

archive/issue_comments_295312.json:
```json
{
    "body": "<a id='comment:13'></a>Is this still relevant or should it be closed in the light of #20382?",
    "created_at": "2018-03-19T20:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295312",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Is this still relevant or should it be closed in the light of #20382?



---

archive/issue_comments_295313.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-03-19T20:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295313",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_295314.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 jdemeyer]:\n> Is this still relevant or should it be closed in the light of #20382?\n\n\nI think I should have marked this one duplicate months ago. There is nothing in here that #20382 doesn't do better.",
    "created_at": "2018-03-19T20:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295314",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:14'></a>Replying to [comment:13 jdemeyer]:
> Is this still relevant or should it be closed in the light of #20382?


I think I should have marked this one duplicate months ago. There is nothing in here that #20382 doesn't do better.



---

archive/issue_events_055204.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-03-19T20:18:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20377#event-55204"
}
```



---

archive/issue_events_055205.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-19T20:28:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20377#event-55205"
}
```



---

archive/issue_comments_295315.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2018-03-19T20:28:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-295315",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: duplicate
