# Issue 20377: Minimize use of is_package_installed at runtime

archive/issues_020140.json:
```json
{
    "body": "CC:  @slel\n\nKeywords: sagedays 77\n\nThis is helpful for sage-on-distributions. Typically sage-on-distribution do not want, or need, to call sage's internal packaging system.\n\nI raised this as part of Sage days 77.\n\nRelated tickets:\n- #20382 Replace is_package_installed with Features\n- #21289 Don't use is_package_installed('bliss')\n- #21291 speed regression in is_package_installed\n- #21355 Timeout in graphs/tutte_polynomial.py\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/20377\n\n",
    "closed_at": "2018-03-19T20:28:33Z",
    "created_at": "2016-04-07T01:21:35Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Minimize use of is_package_installed at runtime",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20377",
    "user": "https://github.com/kiwifb"
}
```
CC:  @slel

Keywords: sagedays 77

This is helpful for sage-on-distributions. Typically sage-on-distribution do not want, or need, to call sage's internal packaging system.

I raised this as part of Sage days 77.

Related tickets:
- #20382 Replace is_package_installed with Features
- #21289 Don't use is_package_installed('bliss')
- #21291 speed regression in is_package_installed
- #21355 Timeout in graphs/tutte_polynomial.py


Issue created by migration from https://trac.sagemath.org/ticket/20377





---

archive/issue_comments_277157.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-04-07T01:21:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277157",
    "user": "https://github.com/kiwifb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_277158.json:
```json
{
    "body": "Your branch points to the latest beta, did you forget to push or something?",
    "created_at": "2016-04-07T07:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277158",
    "user": "https://github.com/mezzarobba"
}
```

Your branch points to the latest beta, did you forget to push or something?



---

archive/issue_comments_277159.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: optional.",
    "created_at": "2016-04-07T07:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277159",
    "user": "https://github.com/mezzarobba"
}
```

Changing component from PLEASE CHANGE to packages: optional.



---

archive/issue_comments_277160.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-04-07T07:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277160",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_277161.json:
```json
{
    "body": "I forgot to commit :(",
    "created_at": "2016-04-07T07:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277161",
    "user": "https://github.com/kiwifb"
}
```

I forgot to commit :(



---

archive/issue_comments_277162.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-07T07:39:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_277163.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-04-07T07:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277163",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_277164.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-04-07T15:27:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277164",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_277165.json:
```json
{
    "body": "You forget a colon\n\n```\n  File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/groups/generic.py\", line 1407\n    if not os.path.isfile(os.path.join(SAGE_LOCAL, \"gap\", \"latest\", \"small\", \"readsml.g\"))\n```",
    "created_at": "2016-04-07T15:27:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277165",
    "user": "https://github.com/videlec"
}
```

You forget a colon

```
  File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/groups/generic.py", line 1407
    if not os.path.isfile(os.path.join(SAGE_LOCAL, "gap", "latest", "small", "readsml.g"))
```



---

archive/issue_comments_277166.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-07T21:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277166",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_277167.json:
```json
{
    "body": "If that's all I forgot that's not a bad score. This particular one was different in sage-on-gentoo because I don't ship this database separately from `gap` like it is done in sage so it doesn't need testing.\nI'll still need to patch that one one way or another because the path will be different on gentoo. Alternative proposal welcome.",
    "created_at": "2016-04-07T21:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277167",
    "user": "https://github.com/kiwifb"
}
```

If that's all I forgot that's not a bad score. This particular one was different in sage-on-gentoo because I don't ship this database separately from `gap` like it is done in sage so it doesn't need testing.
I'll still need to patch that one one way or another because the path will be different on gentoo. Alternative proposal welcome.



---

archive/issue_comments_277168.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-07T22:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277168",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_277169.json:
```json
{
    "body": "It seems we are working on the same issue ;)\n#20382 does essentially the same, maybe you want to have a look.\n\nIt seems to me that my approach is slightly more generic but I am open for discussion.",
    "created_at": "2016-04-07T22:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277169",
    "user": "https://github.com/saraedum"
}
```

It seems we are working on the same issue ;)
#20382 does essentially the same, maybe you want to have a look.

It seems to me that my approach is slightly more generic but I am open for discussion.



---

archive/issue_comments_277170.json:
```json
{
    "body": "Is this still relevant or should it be closed in the light of #20382?",
    "created_at": "2018-03-19T20:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277170",
    "user": "https://github.com/jdemeyer"
}
```

Is this still relevant or should it be closed in the light of #20382?



---

archive/issue_comments_277171.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-03-19T20:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277171",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_277172.json:
```json
{
    "body": "Replying to [comment:13 jdemeyer]:\n> Is this still relevant or should it be closed in the light of #20382?\n\n\nI think I should have marked this one duplicate months ago. There is nothing in here that #20382 doesn't do better.",
    "created_at": "2018-03-19T20:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277172",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:13 jdemeyer]:
> Is this still relevant or should it be closed in the light of #20382?


I think I should have marked this one duplicate months ago. There is nothing in here that #20382 doesn't do better.



---

archive/issue_events_055204.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-03-19T20:18:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20377#event-55204"
}
```



---

archive/issue_events_055205.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-19T20:28:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20377#event-55205"
}
```



---

archive/issue_comments_277173.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2018-03-19T20:28:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20377",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20377#issuecomment-277173",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: duplicate
